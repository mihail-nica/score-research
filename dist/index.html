<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="./vite-DcBtz0py.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + Preact + TS</title>
    <script src="https://bundle.run/tab-emitter@1.0.11"></script>
    <script type="module" crossorigin>(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(":root{font-family:Inter,system-ui,Avenir,Helvetica,Arial,sans-serif;line-height:1.5;font-weight:400;color-scheme:light dark;color:#ffffffde;background-color:#242424;font-synthesis:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}table,th,td{border:1px solid;border-collapse:collapse;border-radius:1rem;padding:.4rem;text-align:center;white-space:nowrap;overflow:scroll}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();
(function(){const Ke=document.createElement("link").relList;if(Ke&&Ke.supports&&Ke.supports("modulepreload"))return;for(const qt of document.querySelectorAll('link[rel="modulepreload"]'))Dt(qt);new MutationObserver(qt=>{for(const Y of qt)if(Y.type==="childList")for(const O of Y.addedNodes)O.tagName==="LINK"&&O.rel==="modulepreload"&&Dt(O)}).observe(document,{childList:!0,subtree:!0});function bt(qt){const Y={};return qt.integrity&&(Y.integrity=qt.integrity),qt.referrerPolicy&&(Y.referrerPolicy=qt.referrerPolicy),qt.crossOrigin==="use-credentials"?Y.credentials="include":qt.crossOrigin==="anonymous"?Y.credentials="omit":Y.credentials="same-origin",Y}function Dt(qt){if(qt.ep)return;qt.ep=!0;const Y=bt(qt);fetch(qt.href,Y)}})();var yf,Ci,Ed,Ld,au,hd,Cd,dh,gc={},wh=[],D1=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Th=Array.isArray;function Bl(gt,Ke){for(var bt in Ke)gt[bt]=Ke[bt];return gt}function Pd(gt){var Ke=gt.parentNode;Ke&&Ke.removeChild(gt)}function R1(gt,Ke,bt){var Dt,qt,Y,O={};for(Y in Ke)Y=="key"?Dt=Ke[Y]:Y=="ref"?qt=Ke[Y]:O[Y]=Ke[Y];if(arguments.length>2&&(O.children=arguments.length>3?yf.call(arguments,2):bt),typeof gt=="function"&&gt.defaultProps!=null)for(Y in gt.defaultProps)O[Y]===void 0&&(O[Y]=gt.defaultProps[Y]);return lf(gt,O,Dt,qt,null)}function lf(gt,Ke,bt,Dt,qt){var Y={type:gt,props:Ke,key:bt,ref:Dt,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:qt??++Ed,__i:-1,__u:0};return qt==null&&Ci.vnode!=null&&Ci.vnode(Y),Y}function Nl(gt){return gt.children}function hc(gt,Ke){this.props=gt,this.context=Ke}function Pu(gt,Ke){if(Ke==null)return gt.__?Pu(gt.__,gt.__i+1):null;for(var bt;Ke<gt.__k.length;Ke++)if((bt=gt.__k[Ke])!=null&&bt.__e!=null)return bt.__e;return typeof gt.type=="function"?Pu(gt):null}function F1(gt,Ke,bt){var Dt,qt=gt.__v,Y=qt.__e,O=gt.__P;if(O)return(Dt=Bl({},qt)).__v=qt.__v+1,Ci.vnode&&Ci.vnode(Dt),kh(O,Dt,qt,gt.__n,O.ownerSVGElement!==void 0,32&qt.__u?[Y]:null,Ke,Y??Pu(qt),!!(32&qt.__u),bt),Dt.__v=qt.__v,Dt.__.__k[Dt.__i]=Dt,Dt.__d=void 0,Dt.__e!=Y&&Od(Dt),Dt}function Od(gt){var Ke,bt;if((gt=gt.__)!=null&&gt.__c!=null){for(gt.__e=gt.__c.base=null,Ke=0;Ke<gt.__k.length;Ke++)if((bt=gt.__k[Ke])!=null&&bt.__e!=null){gt.__e=gt.__c.base=bt.__e;break}return Od(gt)}}function pd(gt){(!gt.__d&&(gt.__d=!0)&&au.push(gt)&&!ff.__r++||hd!==Ci.debounceRendering)&&((hd=Ci.debounceRendering)||Cd)(ff)}function ff(){var gt,Ke,bt,Dt=[],qt=[];for(au.sort(dh);gt=au.shift();)gt.__d&&(bt=au.length,Ke=F1(gt,Dt,qt)||Ke,bt===0||au.length>bt?(gh(Dt,Ke,qt),qt.length=Dt.length=0,Ke=void 0,au.sort(dh)):Ke&&Ci.__c&&Ci.__c(Ke,wh));Ke&&gh(Dt,Ke,qt),ff.__r=0}function Id(gt,Ke,bt,Dt,qt,Y,O,e,M,A,o){var w,_,p,s,n,a=Dt&&Dt.__k||wh,r=Ke.length;for(bt.__d=M,B1(bt,Ke,a),M=bt.__d,w=0;w<r;w++)(p=bt.__k[w])!=null&&typeof p!="boolean"&&typeof p!="function"&&(_=p.__i===-1?gc:a[p.__i]||gc,p.__i=w,kh(gt,p,_,qt,Y,O,e,M,A,o),s=p.__e,p.ref&&_.ref!=p.ref&&(_.ref&&Ah(_.ref,null,p),o.push(p.ref,p.__c||s,p)),n==null&&s!=null&&(n=s),65536&p.__u||_.__k===p.__k?M=zd(p,M,gt):typeof p.type=="function"&&p.__d!==void 0?M=p.__d:s&&(M=s.nextSibling),p.__d=void 0,p.__u&=-196609);bt.__d=M,bt.__e=n}function B1(gt,Ke,bt){var Dt,qt,Y,O,e,M=Ke.length,A=bt.length,o=A,w=0;for(gt.__k=[],Dt=0;Dt<M;Dt++)O=Dt+w,(qt=gt.__k[Dt]=(qt=Ke[Dt])==null||typeof qt=="boolean"||typeof qt=="function"?null:typeof qt=="string"||typeof qt=="number"||typeof qt=="bigint"||qt.constructor==String?lf(null,qt,null,null,null):Th(qt)?lf(Nl,{children:qt},null,null,null):qt.constructor===void 0&&qt.__b>0?lf(qt.type,qt.props,qt.key,qt.ref?qt.ref:null,qt.__v):qt)!=null?(qt.__=gt,qt.__b=gt.__b+1,e=N1(qt,bt,O,o),qt.__i=e,Y=null,e!==-1&&(o--,(Y=bt[e])&&(Y.__u|=131072)),Y==null||Y.__v===null?(e==-1&&w--,typeof qt.type!="function"&&(qt.__u|=65536)):e!==O&&(e===O+1?w++:e>O?o>M-O?w+=e-O:w--:e<O?e==O-1&&(w=e-O):w=0,e!==Dt+w&&(qt.__u|=65536))):(Y=bt[O])&&Y.key==null&&Y.__e&&!(131072&Y.__u)&&(Y.__e==gt.__d&&(gt.__d=Pu(Y)),vh(Y,Y,!1),bt[O]=null,o--);if(o)for(Dt=0;Dt<A;Dt++)(Y=bt[Dt])!=null&&!(131072&Y.__u)&&(Y.__e==gt.__d&&(gt.__d=Pu(Y)),vh(Y,Y))}function zd(gt,Ke,bt){var Dt,qt;if(typeof gt.type=="function"){for(Dt=gt.__k,qt=0;Dt&&qt<Dt.length;qt++)Dt[qt]&&(Dt[qt].__=gt,Ke=zd(Dt[qt],Ke,bt));return Ke}gt.__e!=Ke&&(bt.insertBefore(gt.__e,Ke||null),Ke=gt.__e);do Ke=Ke&&Ke.nextSibling;while(Ke!=null&&Ke.nodeType===8);return Ke}function N1(gt,Ke,bt,Dt){var qt=gt.key,Y=gt.type,O=bt-1,e=bt+1,M=Ke[bt];if(M===null||M&&qt==M.key&&Y===M.type&&!(131072&M.__u))return bt;if(Dt>(M!=null&&!(131072&M.__u)?1:0))for(;O>=0||e<Ke.length;){if(O>=0){if((M=Ke[O])&&!(131072&M.__u)&&qt==M.key&&Y===M.type)return O;O--}if(e<Ke.length){if((M=Ke[e])&&!(131072&M.__u)&&qt==M.key&&Y===M.type)return e;e++}}return-1}function dd(gt,Ke,bt){Ke[0]==="-"?gt.setProperty(Ke,bt??""):gt[Ke]=bt==null?"":typeof bt!="number"||D1.test(Ke)?bt:bt+"px"}function of(gt,Ke,bt,Dt,qt){var Y;e:if(Ke==="style")if(typeof bt=="string")gt.style.cssText=bt;else{if(typeof Dt=="string"&&(gt.style.cssText=Dt=""),Dt)for(Ke in Dt)bt&&Ke in bt||dd(gt.style,Ke,"");if(bt)for(Ke in bt)Dt&&bt[Ke]===Dt[Ke]||dd(gt.style,Ke,bt[Ke])}else if(Ke[0]==="o"&&Ke[1]==="n")Y=Ke!==(Ke=Ke.replace(/(PointerCapture)$|Capture$/i,"$1")),Ke=Ke.toLowerCase()in gt?Ke.toLowerCase().slice(2):Ke.slice(2),gt.l||(gt.l={}),gt.l[Ke+Y]=bt,bt?Dt?bt.u=Dt.u:(bt.u=Date.now(),gt.addEventListener(Ke,Y?vd:gd,Y)):gt.removeEventListener(Ke,Y?vd:gd,Y);else{if(qt)Ke=Ke.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(Ke!=="width"&&Ke!=="height"&&Ke!=="href"&&Ke!=="list"&&Ke!=="form"&&Ke!=="tabIndex"&&Ke!=="download"&&Ke!=="rowSpan"&&Ke!=="colSpan"&&Ke!=="role"&&Ke in gt)try{gt[Ke]=bt??"";break e}catch{}typeof bt=="function"||(bt==null||bt===!1&&Ke[4]!=="-"?gt.removeAttribute(Ke):gt.setAttribute(Ke,bt))}}function gd(gt){if(this.l){var Ke=this.l[gt.type+!1];if(gt.t){if(gt.t<=Ke.u)return}else gt.t=Date.now();return Ke(Ci.event?Ci.event(gt):gt)}}function vd(gt){if(this.l)return this.l[gt.type+!0](Ci.event?Ci.event(gt):gt)}function kh(gt,Ke,bt,Dt,qt,Y,O,e,M,A){var o,w,_,p,s,n,a,r,i,l,u,c,g,f,b,v=Ke.type;if(Ke.constructor!==void 0)return null;128&bt.__u&&(M=!!(32&bt.__u),Y=[e=Ke.__e=bt.__e]),(o=Ci.__b)&&o(Ke);e:if(typeof v=="function")try{if(r=Ke.props,i=(o=v.contextType)&&Dt[o.__c],l=o?i?i.props.value:o.__:Dt,bt.__c?a=(w=Ke.__c=bt.__c).__=w.__E:("prototype"in v&&v.prototype.render?Ke.__c=w=new v(r,l):(Ke.__c=w=new hc(r,l),w.constructor=v,w.render=U1),i&&i.sub(w),w.props=r,w.state||(w.state={}),w.context=l,w.__n=Dt,_=w.__d=!0,w.__h=[],w._sb=[]),w.__s==null&&(w.__s=w.state),v.getDerivedStateFromProps!=null&&(w.__s==w.state&&(w.__s=Bl({},w.__s)),Bl(w.__s,v.getDerivedStateFromProps(r,w.__s))),p=w.props,s=w.state,w.__v=Ke,_)v.getDerivedStateFromProps==null&&w.componentWillMount!=null&&w.componentWillMount(),w.componentDidMount!=null&&w.__h.push(w.componentDidMount);else{if(v.getDerivedStateFromProps==null&&r!==p&&w.componentWillReceiveProps!=null&&w.componentWillReceiveProps(r,l),!w.__e&&(w.shouldComponentUpdate!=null&&w.shouldComponentUpdate(r,w.__s,l)===!1||Ke.__v===bt.__v)){for(Ke.__v!==bt.__v&&(w.props=r,w.state=w.__s,w.__d=!1),Ke.__e=bt.__e,Ke.__k=bt.__k,Ke.__k.forEach(function(d){d&&(d.__=Ke)}),u=0;u<w._sb.length;u++)w.__h.push(w._sb[u]);w._sb=[],w.__h.length&&O.push(w);break e}w.componentWillUpdate!=null&&w.componentWillUpdate(r,w.__s,l),w.componentDidUpdate!=null&&w.__h.push(function(){w.componentDidUpdate(p,s,n)})}if(w.context=l,w.props=r,w.__P=gt,w.__e=!1,c=Ci.__r,g=0,"prototype"in v&&v.prototype.render){for(w.state=w.__s,w.__d=!1,c&&c(Ke),o=w.render(w.props,w.state,w.context),f=0;f<w._sb.length;f++)w.__h.push(w._sb[f]);w._sb=[]}else do w.__d=!1,c&&c(Ke),o=w.render(w.props,w.state,w.context),w.state=w.__s;while(w.__d&&++g<25);w.state=w.__s,w.getChildContext!=null&&(Dt=Bl(Bl({},Dt),w.getChildContext())),_||w.getSnapshotBeforeUpdate==null||(n=w.getSnapshotBeforeUpdate(p,s)),Id(gt,Th(b=o!=null&&o.type===Nl&&o.key==null?o.props.children:o)?b:[b],Ke,bt,Dt,qt,Y,O,e,M,A),w.base=Ke.__e,Ke.__u&=-161,w.__h.length&&O.push(w),a&&(w.__E=w.__=null)}catch(d){Ke.__v=null,M||Y!=null?(Ke.__e=e,Ke.__u|=M?160:32,Y[Y.indexOf(e)]=null):(Ke.__e=bt.__e,Ke.__k=bt.__k),Ci.__e(d,Ke,bt)}else Y==null&&Ke.__v===bt.__v?(Ke.__k=bt.__k,Ke.__e=bt.__e):Ke.__e=j1(bt.__e,Ke,bt,Dt,qt,Y,O,M,A);(o=Ci.diffed)&&o(Ke)}function gh(gt,Ke,bt){for(var Dt=0;Dt<bt.length;Dt++)Ah(bt[Dt],bt[++Dt],bt[++Dt]);Ci.__c&&Ci.__c(Ke,gt),gt.some(function(qt){try{gt=qt.__h,qt.__h=[],gt.some(function(Y){Y.call(qt)})}catch(Y){Ci.__e(Y,qt.__v)}})}function j1(gt,Ke,bt,Dt,qt,Y,O,e,M){var A,o,w,_,p,s,n,a=bt.props,r=Ke.props,i=Ke.type;if(i==="svg"&&(qt=!0),Y!=null){for(A=0;A<Y.length;A++)if((p=Y[A])&&"setAttribute"in p==!!i&&(i?p.localName===i:p.nodeType===3)){gt=p,Y[A]=null;break}}if(gt==null){if(i===null)return document.createTextNode(r);gt=qt?document.createElementNS("http://www.w3.org/2000/svg",i):document.createElement(i,r.is&&r),Y=null,e=!1}if(i===null)a===r||e&&gt.data===r||(gt.data=r);else{if(Y=Y&&yf.call(gt.childNodes),a=bt.props||gc,!e&&Y!=null)for(a={},A=0;A<gt.attributes.length;A++)a[(p=gt.attributes[A]).name]=p.value;for(A in a)p=a[A],A=="children"||(A=="dangerouslySetInnerHTML"?w=p:A==="key"||A in r||of(gt,A,null,p,qt));for(A in r)p=r[A],A=="children"?_=p:A=="dangerouslySetInnerHTML"?o=p:A=="value"?s=p:A=="checked"?n=p:A==="key"||e&&typeof p!="function"||a[A]===p||of(gt,A,p,a[A],qt);if(o)e||w&&(o.__html===w.__html||o.__html===gt.innerHTML)||(gt.innerHTML=o.__html),Ke.__k=[];else if(w&&(gt.innerHTML=""),Id(gt,Th(_)?_:[_],Ke,bt,Dt,qt&&i!=="foreignObject",Y,O,Y?Y[0]:bt.__k&&Pu(bt,0),e,M),Y!=null)for(A=Y.length;A--;)Y[A]!=null&&Pd(Y[A]);e||(A="value",s!==void 0&&(s!==gt[A]||i==="progress"&&!s||i==="option"&&s!==a[A])&&of(gt,A,s,a[A],!1),A="checked",n!==void 0&&n!==gt[A]&&of(gt,A,n,a[A],!1))}return gt}function Ah(gt,Ke,bt){try{typeof gt=="function"?gt(Ke):gt.current=Ke}catch(Dt){Ci.__e(Dt,bt)}}function vh(gt,Ke,bt){var Dt,qt;if(Ci.unmount&&Ci.unmount(gt),(Dt=gt.ref)&&(Dt.current&&Dt.current!==gt.__e||Ah(Dt,null,Ke)),(Dt=gt.__c)!=null){if(Dt.componentWillUnmount)try{Dt.componentWillUnmount()}catch(Y){Ci.__e(Y,Ke)}Dt.base=Dt.__P=null,gt.__c=void 0}if(Dt=gt.__k)for(qt=0;qt<Dt.length;qt++)Dt[qt]&&vh(Dt[qt],Ke,bt||typeof gt.type!="function");bt||gt.__e==null||Pd(gt.__e),gt.__=gt.__e=gt.__d=void 0}function U1(gt,Ke,bt){return this.constructor(gt,bt)}function V1(gt,Ke,bt){var Dt,qt,Y,O;Ci.__&&Ci.__(gt,Ke),qt=(Dt=typeof bt=="function")?null:bt&&bt.__k||Ke.__k,Y=[],O=[],kh(Ke,gt=(!Dt&&bt||Ke).__k=R1(Nl,null,[gt]),qt||gc,gc,Ke.ownerSVGElement!==void 0,!Dt&&bt?[bt]:qt?null:Ke.firstChild?yf.call(Ke.childNodes):null,Y,!Dt&&bt?bt:qt?qt.__e:Ke.firstChild,Dt,O),gt.__d=void 0,gh(Y,gt,O)}yf=wh.slice,Ci={__e:function(gt,Ke,bt,Dt){for(var qt,Y,O;Ke=Ke.__;)if((qt=Ke.__c)&&!qt.__)try{if((Y=qt.constructor)&&Y.getDerivedStateFromError!=null&&(qt.setState(Y.getDerivedStateFromError(gt)),O=qt.__d),qt.componentDidCatch!=null&&(qt.componentDidCatch(gt,Dt||{}),O=qt.__d),O)return qt.__E=qt}catch(e){gt=e}throw gt}},Ed=0,Ld=function(gt){return gt!=null&&gt.constructor==null},hc.prototype.setState=function(gt,Ke){var bt;bt=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Bl({},this.state),typeof gt=="function"&&(gt=gt(Bl({},bt),this.props)),gt&&Bl(bt,gt),gt!=null&&this.__v&&(Ke&&this._sb.push(Ke),pd(this))},hc.prototype.forceUpdate=function(gt){this.__v&&(this.__e=!0,gt&&this.__h.push(gt),pd(this))},hc.prototype.render=Nl,au=[],Cd=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,dh=function(gt,Ke){return gt.__v.__b-Ke.__v.__b},ff.__r=0;var mh,fs,ch,md,yh=0,Dd=[],uf=[],za=Ci,yd=za.__b,xd=za.__r,bd=za.diffed,_d=za.__c,wd=za.unmount,Td=za.__;function q1(gt,Ke){za.__h&&za.__h(fs,gt,yh||Ke),yh=0;var bt=fs.__H||(fs.__H={__:[],__h:[]});return gt>=bt.__.length&&bt.__.push({__V:uf}),bt.__[gt]}function H1(gt){return yh=5,xf(function(){return{current:gt}},[])}function xf(gt,Ke){var bt=q1(mh++,7);return Y1(bt.__H,Ke)?(bt.__V=gt(),bt.i=Ke,bt.__h=gt,bt.__V):bt.__}function G1(){for(var gt;gt=Dd.shift();)if(gt.__P&&gt.__H)try{gt.__H.__h.forEach(cf),gt.__H.__h.forEach(xh),gt.__H.__h=[]}catch(Ke){gt.__H.__h=[],za.__e(Ke,gt.__v)}}za.__b=function(gt){fs=null,yd&&yd(gt)},za.__=function(gt,Ke){gt&&Ke.__k&&Ke.__k.__m&&(gt.__m=Ke.__k.__m),Td&&Td(gt,Ke)},za.__r=function(gt){xd&&xd(gt),mh=0;var Ke=(fs=gt.__c).__H;Ke&&(ch===fs?(Ke.__h=[],fs.__h=[],Ke.__.forEach(function(bt){bt.__N&&(bt.__=bt.__N),bt.__V=uf,bt.__N=bt.i=void 0})):(Ke.__h.forEach(cf),Ke.__h.forEach(xh),Ke.__h=[],mh=0)),ch=fs},za.diffed=function(gt){bd&&bd(gt);var Ke=gt.__c;Ke&&Ke.__H&&(Ke.__H.__h.length&&(Dd.push(Ke)!==1&&md===za.requestAnimationFrame||((md=za.requestAnimationFrame)||W1)(G1)),Ke.__H.__.forEach(function(bt){bt.i&&(bt.__H=bt.i),bt.__V!==uf&&(bt.__=bt.__V),bt.i=void 0,bt.__V=uf})),ch=fs=null},za.__c=function(gt,Ke){Ke.some(function(bt){try{bt.__h.forEach(cf),bt.__h=bt.__h.filter(function(Dt){return!Dt.__||xh(Dt)})}catch(Dt){Ke.some(function(qt){qt.__h&&(qt.__h=[])}),Ke=[],za.__e(Dt,bt.__v)}}),_d&&_d(gt,Ke)},za.unmount=function(gt){wd&&wd(gt);var Ke,bt=gt.__c;bt&&bt.__H&&(bt.__H.__.forEach(function(Dt){try{cf(Dt)}catch(qt){Ke=qt}}),bt.__H=void 0,Ke&&za.__e(Ke,bt.__v))};var kd=typeof requestAnimationFrame=="function";function W1(gt){var Ke,bt=function(){clearTimeout(Dt),kd&&cancelAnimationFrame(Ke),setTimeout(gt)},Dt=setTimeout(bt,100);kd&&(Ke=requestAnimationFrame(bt))}function cf(gt){var Ke=fs,bt=gt.__c;typeof bt=="function"&&(gt.__c=void 0,bt()),fs=Ke}function xh(gt){var Ke=fs;gt.__c=gt.__(),fs=Ke}function Y1(gt,Ke){return!gt||gt.length!==Ke.length||Ke.some(function(bt,Dt){return bt!==gt[Dt]})}function bf(){throw new Error("Cycle detected")}var Z1=Symbol.for("preact-signals");function Mh(){if(Cu>1)Cu--;else{for(var gt,Ke=!1;pc!==void 0;){var bt=pc;for(pc=void 0,bh++;bt!==void 0;){var Dt=bt.o;if(bt.o=void 0,bt.f&=-3,!(8&bt.f)&&Fd(bt))try{bt.c()}catch(qt){Ke||(gt=qt,Ke=!0)}bt=Dt}}if(bh=0,Cu--,Ke)throw gt}}var ha=void 0,pc=void 0,Cu=0,bh=0,hf=0;function Rd(gt){if(ha!==void 0){var Ke=gt.n;if(Ke===void 0||Ke.t!==ha)return Ke={i:0,S:gt,p:ha.s,n:void 0,t:ha,e:void 0,x:void 0,r:Ke},ha.s!==void 0&&(ha.s.n=Ke),ha.s=Ke,gt.n=Ke,32&ha.f&&gt.S(Ke),Ke;if(Ke.i===-1)return Ke.i=0,Ke.n!==void 0&&(Ke.n.p=Ke.p,Ke.p!==void 0&&(Ke.p.n=Ke.n),Ke.p=ha.s,Ke.n=void 0,ha.s.n=Ke,ha.s=Ke),Ke}}function no(gt){this.v=gt,this.i=0,this.n=void 0,this.t=void 0}no.prototype.brand=Z1;no.prototype.h=function(){return!0};no.prototype.S=function(gt){this.t!==gt&&gt.e===void 0&&(gt.x=this.t,this.t!==void 0&&(this.t.e=gt),this.t=gt)};no.prototype.U=function(gt){if(this.t!==void 0){var Ke=gt.e,bt=gt.x;Ke!==void 0&&(Ke.x=bt,gt.e=void 0),bt!==void 0&&(bt.e=Ke,gt.x=void 0),gt===this.t&&(this.t=bt)}};no.prototype.subscribe=function(gt){var Ke=this;return Eh(function(){var bt=Ke.value,Dt=32&this.f;this.f&=-33;try{gt(bt)}finally{this.f|=Dt}})};no.prototype.valueOf=function(){return this.value};no.prototype.toString=function(){return this.value+""};no.prototype.toJSON=function(){return this.value};no.prototype.peek=function(){return this.v};Object.defineProperty(no.prototype,"value",{get:function(){var gt=Rd(this);return gt!==void 0&&(gt.i=this.i),this.v},set:function(gt){if(ha instanceof jl&&function(){throw new Error("Computed cannot have side-effects")}(),gt!==this.v){bh>100&&bf(),this.v=gt,this.i++,hf++,Cu++;try{for(var Ke=this.t;Ke!==void 0;Ke=Ke.x)Ke.t.N()}finally{Mh()}}}});function go(gt){return new no(gt)}function Fd(gt){for(var Ke=gt.s;Ke!==void 0;Ke=Ke.n)if(Ke.S.i!==Ke.i||!Ke.S.h()||Ke.S.i!==Ke.i)return!0;return!1}function Bd(gt){for(var Ke=gt.s;Ke!==void 0;Ke=Ke.n){var bt=Ke.S.n;if(bt!==void 0&&(Ke.r=bt),Ke.S.n=Ke,Ke.i=-1,Ke.n===void 0){gt.s=Ke;break}}}function Nd(gt){for(var Ke=gt.s,bt=void 0;Ke!==void 0;){var Dt=Ke.p;Ke.i===-1?(Ke.S.U(Ke),Dt!==void 0&&(Dt.n=Ke.n),Ke.n!==void 0&&(Ke.n.p=Dt)):bt=Ke,Ke.S.n=Ke.r,Ke.r!==void 0&&(Ke.r=void 0),Ke=Dt}gt.s=bt}function jl(gt){no.call(this,void 0),this.x=gt,this.s=void 0,this.g=hf-1,this.f=4}(jl.prototype=new no).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===hf))return!0;if(this.g=hf,this.f|=1,this.i>0&&!Fd(this))return this.f&=-2,!0;var gt=ha;try{Bd(this),ha=this;var Ke=this.x();(16&this.f||this.v!==Ke||this.i===0)&&(this.v=Ke,this.f&=-17,this.i++)}catch(bt){this.v=bt,this.f|=16,this.i++}return ha=gt,Nd(this),this.f&=-2,!0};jl.prototype.S=function(gt){if(this.t===void 0){this.f|=36;for(var Ke=this.s;Ke!==void 0;Ke=Ke.n)Ke.S.S(Ke)}no.prototype.S.call(this,gt)};jl.prototype.U=function(gt){if(this.t!==void 0&&(no.prototype.U.call(this,gt),this.t===void 0)){this.f&=-33;for(var Ke=this.s;Ke!==void 0;Ke=Ke.n)Ke.S.U(Ke)}};jl.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var gt=this.t;gt!==void 0;gt=gt.x)gt.t.N()}};jl.prototype.peek=function(){if(this.h()||bf(),16&this.f)throw this.v;return this.v};Object.defineProperty(jl.prototype,"value",{get:function(){1&this.f&&bf();var gt=Rd(this);if(this.h(),gt!==void 0&&(gt.i=this.i),16&this.f)throw this.v;return this.v}});function ps(gt){return new jl(gt)}function jd(gt){var Ke=gt.u;if(gt.u=void 0,typeof Ke=="function"){Cu++;var bt=ha;ha=void 0;try{Ke()}catch(Dt){throw gt.f&=-2,gt.f|=8,Sh(gt),Dt}finally{ha=bt,Mh()}}}function Sh(gt){for(var Ke=gt.s;Ke!==void 0;Ke=Ke.n)Ke.S.U(Ke);gt.x=void 0,gt.s=void 0,jd(gt)}function X1(gt){if(ha!==this)throw new Error("Out-of-order effect");Nd(this),ha=gt,this.f&=-2,8&this.f&&Sh(this),Mh()}function yc(gt){this.x=gt,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}yc.prototype.c=function(){var gt=this.S();try{if(8&this.f||this.x===void 0)return;var Ke=this.x();typeof Ke=="function"&&(this.u=Ke)}finally{gt()}};yc.prototype.S=function(){1&this.f&&bf(),this.f|=1,this.f&=-9,jd(this),Bd(this),Cu++;var gt=ha;return ha=this,X1.bind(this,gt)};yc.prototype.N=function(){2&this.f||(this.f|=2,this.o=pc,pc=this)};yc.prototype.d=function(){this.f|=8,1&this.f||Sh(this)};function Eh(gt){var Ke=new yc(gt);try{Ke.c()}catch(bt){throw Ke.d(),bt}return Ke.d.bind(Ke)}var _f,fh;function Ou(gt,Ke){Ci[gt]=Ke.bind(null,Ci[gt]||function(){})}function pf(gt){fh&&fh(),fh=gt&&gt.S()}function Ud(gt){var Ke=this,bt=gt.data,Dt=K1(bt);Dt.value=bt;var qt=xf(function(){for(var Y=Ke.__v;Y=Y.__;)if(Y.__c){Y.__c.__$f|=4;break}return Ke.__$u.c=function(){var O;!Ld(qt.peek())&&((O=Ke.base)==null?void 0:O.nodeType)===3?Ke.base.data=qt.peek():(Ke.__$f|=1,Ke.setState({}))},ps(function(){var O=Dt.value.value;return O===0?0:O===!0?"":O||""})},[]);return qt.value}Ud.displayName="_st";Object.defineProperties(no.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:Ud},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});Ou("__b",function(gt,Ke){if(typeof Ke.type=="string"){var bt,Dt=Ke.props;for(var qt in Dt)if(qt!=="children"){var Y=Dt[qt];Y instanceof no&&(bt||(Ke.__np=bt={}),bt[qt]=Y,Dt[qt]=Y.peek())}}gt(Ke)});Ou("__r",function(gt,Ke){pf();var bt,Dt=Ke.__c;Dt&&(Dt.__$f&=-2,(bt=Dt.__$u)===void 0&&(Dt.__$u=bt=function(qt){var Y;return Eh(function(){Y=this}),Y.c=function(){Dt.__$f|=1,Dt.setState({})},Y}())),_f=Dt,pf(bt),gt(Ke)});Ou("__e",function(gt,Ke,bt,Dt){pf(),_f=void 0,gt(Ke,bt,Dt)});Ou("diffed",function(gt,Ke){pf(),_f=void 0;var bt;if(typeof Ke.type=="string"&&(bt=Ke.__e)){var Dt=Ke.__np,qt=Ke.props;if(Dt){var Y=bt.U;if(Y)for(var O in Y){var e=Y[O];e!==void 0&&!(O in Dt)&&(e.d(),Y[O]=void 0)}else bt.U=Y={};for(var M in Dt){var A=Y[M],o=Dt[M];A===void 0?(A=J1(bt,M,o,qt),Y[M]=A):A.o(o,qt)}}}gt(Ke)});function J1(gt,Ke,bt,Dt){var qt=Ke in gt&&gt.ownerSVGElement===void 0,Y=go(bt);return{o:function(O,e){Y.value=O,Dt=e},d:Eh(function(){var O=Y.value.value;Dt[Ke]!==O&&(Dt[Ke]=O,qt?gt[Ke]=O:O?gt.setAttribute(Ke,O):gt.removeAttribute(Ke))})}}Ou("unmount",function(gt,Ke){if(typeof Ke.type=="string"){var bt=Ke.__e;if(bt){var Dt=bt.U;if(Dt){bt.U=void 0;for(var qt in Dt){var Y=Dt[qt];Y&&Y.d()}}}}else{var O=Ke.__c;if(O){var e=O.__$u;e&&(O.__$u=void 0,e.d())}}gt(Ke)});Ou("__h",function(gt,Ke,bt,Dt){(Dt<3||Dt===9)&&(Ke.__$f|=2),gt(Ke,bt,Dt)});hc.prototype.shouldComponentUpdate=function(gt,Ke){var bt=this.__$u;if(!(bt&&bt.s!==void 0||4&this.__$f)||3&this.__$f)return!0;for(var Dt in Ke)return!0;for(var qt in gt)if(qt!=="__source"&&gt[qt]!==this.props[qt])return!0;for(var Y in this.props)if(!(Y in gt))return!0;return!1};function K1(gt){return xf(function(){return go(gt)},[])}function $1(gt){var Ke=H1(gt);return Ke.current=gt,_f.__$f|=4,xf(function(){return ps(function(){return Ke.current()})},[])}function Q1(gt){return gt&&gt.__esModule&&Object.prototype.hasOwnProperty.call(gt,"default")?gt.default:gt}var Vd={exports:{}};(function(gt,Ke){/*! For license information please see plotly.min.js.LICENSE.txt */(function(bt,Dt){gt.exports=Dt()})(self,function(){return function(){var bt={79288:function(Y,O,e){var M=e(3400),A={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var o in A){var w=o.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");M.addStyleRule(w,A[o])}},86712:function(Y,O,e){Y.exports=e(84224)},37240:function(Y,O,e){Y.exports=e(51132)},29744:function(Y,O,e){Y.exports=e(94456)},29352:function(Y,O,e){Y.exports=e(67244)},96144:function(Y,O,e){Y.exports=e(97776)},53219:function(Y,O,e){Y.exports=e(61712)},4624:function(Y,O,e){Y.exports=e(95856)},54543:function(Y,O,e){Y.exports=e(54272)},45e3:function(Y,O,e){Y.exports=e(85404)},62300:function(Y,O,e){Y.exports=e(26048)},6920:function(Y,O,e){Y.exports=e(66240)},10264:function(Y,O,e){Y.exports=e(40448)},32016:function(Y,O,e){Y.exports=e(64884)},27528:function(Y,O,e){Y.exports=e(15088)},75556:function(Y,O,e){Y.exports=e(76744)},39204:function(Y,O,e){Y.exports=e(94704)},73996:function(Y,O,e){Y.exports=e(62396)},16489:function(Y,O,e){Y.exports=e(32028)},5e3:function(Y,O,e){Y.exports=e(81932)},77280:function(Y,O,e){Y.exports=e(45536)},33992:function(Y,O,e){Y.exports=e(42600)},17600:function(Y,O,e){Y.exports=e(21536)},49116:function(Y,O,e){Y.exports=e(65664)},46808:function(Y,O,e){Y.exports=e(29044)},36168:function(Y,O,e){Y.exports=e(48928)},13792:function(Y,O,e){var M=e(32016);M.register([e(37240),e(29352),e(5e3),e(33992),e(17600),e(49116),e(6920),e(67484),e(79440),e(39204),e(83096),e(36168),e(20260),e(63560),e(65832),e(46808),e(73996),e(48824),e(89904),e(25120),e(13752),e(4340),e(62300),e(29800),e(8363),e(54543),e(86636),e(42192),e(32140),e(77280),e(89296),e(56816),e(70192),e(45e3),e(27528),e(84764),e(3920),e(50248),e(4624),e(69967),e(10264),e(86152),e(53219),e(81604),e(63796),e(29744),e(89336),e(86712),e(75556),e(16489),e(97312),e(96144)]),Y.exports=M},3920:function(Y,O,e){Y.exports=e(43480)},25120:function(Y,O,e){Y.exports=e(6296)},4340:function(Y,O,e){Y.exports=e(7404)},86152:function(Y,O,e){Y.exports=e(65456)},56816:function(Y,O,e){Y.exports=e(22020)},89296:function(Y,O,e){Y.exports=e(29928)},20260:function(Y,O,e){Y.exports=e(75792)},32140:function(Y,O,e){Y.exports=e(156)},84764:function(Y,O,e){Y.exports=e(45499)},48824:function(Y,O,e){Y.exports=e(3296)},69967:function(Y,O,e){Y.exports=e(4184)},8363:function(Y,O,e){Y.exports=e(36952)},86636:function(Y,O,e){Y.exports=e(38983)},70192:function(Y,O,e){Y.exports=e(11572)},81604:function(Y,O,e){Y.exports=e(76924)},63796:function(Y,O,e){Y.exports=e(62944)},89336:function(Y,O,e){Y.exports=e(95443)},67484:function(Y,O,e){Y.exports=e(34864)},97312:function(Y,O,e){Y.exports=e(76272)},42192:function(Y,O,e){Y.exports=e(97924)},29800:function(Y,O,e){Y.exports=e(15436)},63560:function(Y,O,e){Y.exports=e(5621)},89904:function(Y,O,e){Y.exports=e(91304)},50248:function(Y,O,e){Y.exports=e(41724)},65832:function(Y,O,e){Y.exports=e(31991)},79440:function(Y,O,e){Y.exports=e(22869)},13752:function(Y,O,e){Y.exports=e(67776)},83096:function(Y,O,e){Y.exports=e(95952)},72196:function(Y){Y.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},13916:function(Y,O,e){var M=e(72196),A=e(25376),o=e(33816),w=e(31780).templatedArray;e(36208),Y.exports=w("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:A({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:M.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:M.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",o.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",o.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:A({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},90272:function(Y,O,e){var M=e(3400),A=e(54460),o=e(23816).draw;function w(p){var s=p._fullLayout;M.filterVisible(s.annotations).forEach(function(n){var a=A.getFromId(p,n.xref),r=A.getFromId(p,n.yref),i=A.getRefType(n.xref),l=A.getRefType(n.yref);n._extremes={},i==="range"&&_(n,a),l==="range"&&_(n,r)})}function _(p,s){var n,a=s._id,r=a.charAt(0),i=p[r],l=p["a"+r],u=p[r+"ref"],c=p["a"+r+"ref"],g=p["_"+r+"padplus"],f=p["_"+r+"padminus"],b={x:1,y:-1}[r]*p[r+"shift"],v=3*p.arrowsize*p.arrowwidth||0,d=v+b,m=v-b,x=3*p.startarrowsize*p.arrowwidth||0,y=x+b,T=x-b;if(c===u){var h=A.findExtremes(s,[s.r2c(i)],{ppadplus:d,ppadminus:m}),E=A.findExtremes(s,[s.r2c(l)],{ppadplus:Math.max(g,y),ppadminus:Math.max(f,T)});n={min:[h.min[0],E.min[0]],max:[h.max[0],E.max[0]]}}else y=l?y+l:y,T=l?T-l:T,n=A.findExtremes(s,[s.r2c(i)],{ppadplus:Math.max(g,d,y),ppadminus:Math.max(f,m,T)});p._extremes[a]=n}Y.exports=function(p){var s=p._fullLayout;if(M.filterVisible(s.annotations).length&&p._fullData.length)return M.syncOrAsync([o,w],p)}},42300:function(Y,O,e){var M=e(3400),A=e(24040),o=e(31780).arrayEditor;function w(p,s){var n,a,r,i,l,u,c,g=p._fullLayout.annotations,f=[],b=[],v=[],d=(s||[]).length;for(n=0;n<g.length;n++)if(i=(r=g[n]).clicktoshow){for(a=0;a<d;a++)if(u=(l=s[a]).xaxis,c=l.yaxis,u._id===r.xref&&c._id===r.yref&&u.d2r(l.x)===_(r._xclick,u)&&c.d2r(l.y)===_(r._yclick,c)){(r.visible?i==="onout"?b:v:f).push(n);break}a===d&&r.visible&&i==="onout"&&b.push(n)}return{on:f,off:b,explicitOff:v}}function _(p,s){return s.type==="log"?s.l2r(p):s.d2r(p)}Y.exports={hasClickToShow:function(p,s){var n=w(p,s);return n.on.length>0||n.explicitOff.length>0},onClick:function(p,s){var n,a,r=w(p,s),i=r.on,l=r.off.concat(r.explicitOff),u={},c=p._fullLayout.annotations;if(i.length||l.length){for(n=0;n<i.length;n++)(a=o(p.layout,"annotations",c[i[n]])).modifyItem("visible",!0),M.extendFlat(u,a.getUpdateObj());for(n=0;n<l.length;n++)(a=o(p.layout,"annotations",c[l[n]])).modifyItem("visible",!1),M.extendFlat(u,a.getUpdateObj());return A.call("update",p,{},u)}}}},87192:function(Y,O,e){var M=e(3400),A=e(76308);Y.exports=function(o,w,_,p){p("opacity");var s=p("bgcolor"),n=p("bordercolor"),a=A.opacity(n);p("borderpad");var r=p("borderwidth"),i=p("showarrow");if(p("text",i?" ":_._dfltTitle.annotation),p("textangle"),M.coerceFont(p,"font",_.font),p("width"),p("align"),p("height")&&p("valign"),i){var l,u,c=p("arrowside");c.indexOf("end")!==-1&&(l=p("arrowhead"),u=p("arrowsize")),c.indexOf("start")!==-1&&(p("startarrowhead",l),p("startarrowsize",u)),p("arrowcolor",a?w.bordercolor:A.defaultLine),p("arrowwidth",2*(a&&r||1)),p("standoff"),p("startstandoff")}var g=p("hovertext"),f=_.hoverlabel||{};if(g){var b=p("hoverlabel.bgcolor",f.bgcolor||(A.opacity(s)?A.rgb(s):A.defaultLine)),v=p("hoverlabel.bordercolor",f.bordercolor||A.contrast(b));M.coerceFont(p,"hoverlabel.font",{family:f.font.family,size:f.font.size,color:f.font.color||v})}p("captureevents",!!g)}},26828:function(Y,O,e){var M=e(38248),A=e(36896);Y.exports=function(o,w,_,p){w=w||{};var s=_==="log"&&w.type==="linear",n=_==="linear"&&w.type==="log";if(s||n)for(var a,r,i=o._fullLayout.annotations,l=w._id.charAt(0),u=0;u<i.length;u++)a=i[u],r="annotations["+u+"].",a[l+"ref"]===w._id&&c(l),a["a"+l+"ref"]===w._id&&c("a"+l);function c(g){var f=a[g],b=null;b=s?A(f,w.range):Math.pow(10,f),M(b)||(b=null),p(r+g,b)}}},45216:function(Y,O,e){var M=e(3400),A=e(54460),o=e(51272),w=e(87192),_=e(13916);function p(s,n,a){function r(E,k){return M.coerce(s,n,_,E,k)}var i=r("visible"),l=r("clicktoshow");if(i||l){w(s,n,a,r);for(var u=n.showarrow,c=["x","y"],g=[-10,-30],f={_fullLayout:a},b=0;b<2;b++){var v=c[b],d=A.coerceRef(s,n,f,v,"","paper");if(d!=="paper"&&A.getFromId(f,d)._annIndices.push(n._index),A.coercePosition(n,f,r,d,v,.5),u){var m="a"+v,x=A.coerceRef(s,n,f,m,"pixel",["pixel","paper"]);x!=="pixel"&&x!==d&&(x=n[m]="pixel");var y=x==="pixel"?g[b]:.4;A.coercePosition(n,f,r,x,m,y)}r(v+"anchor"),r(v+"shift")}if(M.noneOrAll(s,n,["x","y"]),u&&M.noneOrAll(s,n,["ax","ay"]),l){var T=r("xclick"),h=r("yclick");n._xclick=T===void 0?n.x:A.cleanPosition(T,f,n.xref),n._yclick=h===void 0?n.y:A.cleanPosition(h,f,n.yref)}}}Y.exports=function(s,n){o(s,n,{name:"annotations",handleItemDefaults:p})}},23816:function(Y,O,e){var M=e(33428),A=e(24040),o=e(7316),w=e(3400),_=w.strTranslate,p=e(54460),s=e(76308),n=e(43616),a=e(93024),r=e(72736),i=e(93972),l=e(86476),u=e(31780).arrayEditor,c=e(33652);function g(v,d){var m=v._fullLayout.annotations[d]||{},x=p.getFromId(v,m.xref),y=p.getFromId(v,m.yref);x&&x.setScale(),y&&y.setScale(),b(v,m,d,!1,x,y)}function f(v,d,m,x,y){var T=y[m],h=y[m+"ref"],E=m.indexOf("y")!==-1,k=p.getRefType(h)==="domain",L=E?x.h:x.w;return v?k?T+(E?-d:d)/v._length:v.p2r(v.r2p(T)+d):T+(E?-d:d)/L}function b(v,d,m,x,y,T){var h,E,k=v._fullLayout,L=v._fullLayout._size,P=v._context.edits;x?(h="annotation-"+x,E=x+".annotations"):(h="annotation",E="annotations");var I=u(v.layout,E,d),z=I.modifyBase,F=I.modifyItem,U=I.getUpdateObj;k._infolayer.selectAll("."+h+'[data-index="'+m+'"]').remove();var R="clip"+k._uid+"_ann"+m;if(d._input&&d.visible!==!1){var j={x:{},y:{}},Z=+d.textangle||0,B=k._infolayer.append("g").classed(h,!0).attr("data-index",String(m)).style("opacity",d.opacity),q=B.append("g").classed("annotation-text-g",!0),V=P[d.showarrow?"annotationTail":"annotationPosition"],ne=d.captureevents||P.annotationText||V,ee=q.append("g").style("pointer-events",ne?"all":null).call(i,"pointer").on("click",function(){v._dragging=!1,v.emit("plotly_clickannotation",ge(M.event))});d.hovertext&&ee.on("mouseover",function(){var me=d.hoverlabel,Se=me.font,we=this.getBoundingClientRect(),_e=v.getBoundingClientRect();a.loneHover({x0:we.left-_e.left,x1:we.right-_e.left,y:(we.top+we.bottom)/2-_e.top,text:d.hovertext,color:me.bgcolor,borderColor:me.bordercolor,fontFamily:Se.family,fontSize:Se.size,fontColor:Se.color},{container:k._hoverlayer.node(),outerContainer:k._paper.node(),gd:v})}).on("mouseout",function(){a.loneUnhover(k._hoverlayer.node())});var $=d.borderwidth,J=d.borderpad,K=$+J,te=ee.append("rect").attr("class","bg").style("stroke-width",$+"px").call(s.stroke,d.bordercolor).call(s.fill,d.bgcolor),ie=d.width||d.height,ae=k._topclips.selectAll("#"+R).data(ie?[0]:[]);ae.enter().append("clipPath").classed("annclip",!0).attr("id",R).append("rect"),ae.exit().remove();var se=d.font,ce=k._meta?w.templateString(d.text,k._meta):d.text,de=ee.append("text").classed("annotation-text",!0).text(ce);P.annotationText?de.call(r.makeEditable,{delegate:ee,gd:v}).call(ve).on("edit",function(me){d.text=me,this.call(ve),F("text",me),y&&y.autorange&&z(y._name+".autorange",!0),T&&T.autorange&&z(T._name+".autorange",!0),A.call("_guiRelayout",v,U())}):de.call(ve)}else M.selectAll("#"+R).remove();function ge(me){var Se={index:m,annotation:d._input,fullAnnotation:d,event:me};return x&&(Se.subplotId=x),Se}function ve(me){return me.call(n.font,se).attr({"text-anchor":{left:"start",right:"end"}[d.align]||"middle"}),r.convertToTspans(me,v,be),me}function be(){var me=de.selectAll("a");me.size()===1&&me.text()===de.text()&&ee.insert("a",":first-child").attr({"xlink:xlink:href":me.attr("xlink:href"),"xlink:xlink:show":me.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(te.node());var Se=ee.select(".annotation-text-math-group"),we=!Se.empty(),_e=n.bBox((we?Se:de).node()),oe=_e.width,le=_e.height,pe=d.width||oe,Ee=d.height||le,Te=Math.round(pe+2*K),Me=Math.round(Ee+2*K);function Le(mt,ft){return ft==="auto"&&(ft=mt<.3333333333333333?"left":mt>.6666666666666666?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[ft]}for(var Ie=!1,he=["x","y"],xe=0;xe<he.length;xe++){var ke,ze,Re,Oe,Ve,qe=he[xe],Je=d[qe+"ref"]||qe,ot=d["a"+qe+"ref"],rt={x:y,y:T}[qe],dt=(Z+(qe==="x"?0:-90))*Math.PI/180,_t=Te*Math.cos(dt),yt=Me*Math.sin(dt),et=Math.abs(_t)+Math.abs(yt),nt=d[qe+"anchor"],At=d[qe+"shift"]*(qe==="x"?1:-1),Rt=j[qe],Ft=p.getRefType(Je);if(rt&&Ft!=="domain"){var It=rt.r2fraction(d[qe]);(It<0||It>1)&&(ot===Je?((It=rt.r2fraction(d["a"+qe]))<0||It>1)&&(Ie=!0):Ie=!0),ke=rt._offset+rt.r2p(d[qe]),Oe=.5}else{var Ge=Ft==="domain";qe==="x"?(Re=d[qe],ke=Ge?rt._offset+rt._length*Re:ke=L.l+L.w*Re):(Re=1-d[qe],ke=Ge?rt._offset+rt._length*Re:ke=L.t+L.h*Re),Oe=d.showarrow?.5:Re}if(d.showarrow){Rt.head=ke;var Ye=d["a"+qe];if(Ve=_t*Le(.5,d.xanchor)-yt*Le(.5,d.yanchor),ot===Je){var Ne=p.getRefType(ot);Ne==="domain"?(qe==="y"&&(Ye=1-Ye),Rt.tail=rt._offset+rt._length*Ye):Ne==="paper"?qe==="y"?(Ye=1-Ye,Rt.tail=L.t+L.h*Ye):Rt.tail=L.l+L.w*Ye:Rt.tail=rt._offset+rt.r2p(Ye),ze=Ve}else Rt.tail=ke+Ye,ze=Ve+Ye;Rt.text=Rt.tail+Ve;var We=k[qe==="x"?"width":"height"];if(Je==="paper"&&(Rt.head=w.constrain(Rt.head,1,We-1)),ot==="pixel"){var st=-Math.max(Rt.tail-3,Rt.text),it=Math.min(Rt.tail+3,Rt.text)-We;st>0?(Rt.tail+=st,Rt.text+=st):it>0&&(Rt.tail-=it,Rt.text-=it)}Rt.tail+=At,Rt.head+=At}else ze=Ve=et*Le(Oe,nt),Rt.text=ke+Ve;Rt.text+=At,Ve+=At,ze+=At,d["_"+qe+"padplus"]=et/2+ze,d["_"+qe+"padminus"]=et/2-ze,d["_"+qe+"size"]=et,d["_"+qe+"shift"]=Ve}if(Ie)ee.remove();else{var Fe=0,Be=0;if(d.align!=="left"&&(Fe=(pe-oe)*(d.align==="center"?.5:1)),d.valign!=="top"&&(Be=(Ee-le)*(d.valign==="middle"?.5:1)),we)Se.select("svg").attr({x:K+Fe-1,y:K+Be}).call(n.setClipUrl,ie?R:null,v);else{var at=K+Be-_e.top,Ze=K+Fe-_e.left;de.call(r.positionText,Ze,at).call(n.setClipUrl,ie?R:null,v)}ae.select("rect").call(n.setRect,K,K,pe,Ee),te.call(n.setRect,$/2,$/2,Te-$,Me-$),ee.call(n.setTranslate,Math.round(j.x.text-Te/2),Math.round(j.y.text-Me/2)),q.attr({transform:"rotate("+Z+","+j.x.text+","+j.y.text+")"});var ht,vt=function(mt,ft){B.selectAll(".annotation-arrow-g").remove();var Et=j.x.head,Tt=j.y.head,xt=j.x.tail+mt,Ct=j.y.tail+ft,Pt=j.x.text+mt,Bt=j.y.text+ft,Kt=w.rotationXYMatrix(Z,Pt,Bt),sn=w.apply2DTransform(Kt),Gt=w.apply2DTransform2(Kt),Yt=+te.attr("width"),rn=+te.attr("height"),Ln=Pt-.5*Yt,Sn=Ln+Yt,gn=Bt-.5*rn,$t=gn+rn,cn=[[Ln,gn,Ln,$t],[Ln,$t,Sn,$t],[Sn,$t,Sn,gn],[Sn,gn,Ln,gn]].map(Gt);if(!cn.reduce(function(cr,er){return cr^!!w.segmentsIntersect(Et,Tt,Et+1e6,Tt+1e6,er[0],er[1],er[2],er[3])},!1)){cn.forEach(function(cr){var er=w.segmentsIntersect(xt,Ct,Et,Tt,cr[0],cr[1],cr[2],cr[3]);er&&(xt=er.x,Ct=er.y)});var an=d.arrowwidth,pn=d.arrowcolor,An=d.arrowside,Cn=B.append("g").style({opacity:s.opacity(pn)}).classed("annotation-arrow-g",!0),Rn=Cn.append("path").attr("d","M"+xt+","+Ct+"L"+Et+","+Tt).style("stroke-width",an+"px").call(s.stroke,s.rgb(pn));if(c(Rn,An,d),P.annotationPosition&&Rn.node().parentNode&&!x){var Fn=Et,In=Tt;if(d.standoff){var Hn=Math.sqrt(Math.pow(Et-xt,2)+Math.pow(Tt-Ct,2));Fn+=d.standoff*(xt-Et)/Hn,In+=d.standoff*(Ct-Tt)/Hn}var Un,ar,ur=Cn.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(xt-Fn)+","+(Ct-In),transform:_(Fn,In)}).style("stroke-width",an+6+"px").call(s.stroke,"rgba(0,0,0,0)").call(s.fill,"rgba(0,0,0,0)");l.init({element:ur.node(),gd:v,prepFn:function(){var cr=n.getTranslate(ee);Un=cr.x,ar=cr.y,y&&y.autorange&&z(y._name+".autorange",!0),T&&T.autorange&&z(T._name+".autorange",!0)},moveFn:function(cr,er){var Tr=sn(Un,ar),Ht=Tr[0]+cr,on=Tr[1]+er;ee.call(n.setTranslate,Ht,on),F("x",f(y,cr,"x",L,d)),F("y",f(T,er,"y",L,d)),d.axref===d.xref&&F("ax",f(y,cr,"ax",L,d)),d.ayref===d.yref&&F("ay",f(T,er,"ay",L,d)),Cn.attr("transform",_(cr,er)),q.attr({transform:"rotate("+Z+","+Ht+","+on+")"})},doneFn:function(){A.call("_guiRelayout",v,U());var cr=document.querySelector(".js-notes-box-panel");cr&&cr.redraw(cr.selectedObj)}})}}};d.showarrow&&vt(0,0),V&&l.init({element:ee.node(),gd:v,prepFn:function(){ht=q.attr("transform")},moveFn:function(mt,ft){var Et="pointer";if(d.showarrow)d.axref===d.xref?F("ax",f(y,mt,"ax",L,d)):F("ax",d.ax+mt),d.ayref===d.yref?F("ay",f(T,ft,"ay",L.w,d)):F("ay",d.ay+ft),vt(mt,ft);else{if(x)return;var Tt,xt;if(y)Tt=f(y,mt,"x",L,d);else{var Ct=d._xsize/L.w,Pt=d.x+(d._xshift-d.xshift)/L.w-Ct/2;Tt=l.align(Pt+mt/L.w,Ct,0,1,d.xanchor)}if(T)xt=f(T,ft,"y",L,d);else{var Bt=d._ysize/L.h,Kt=d.y-(d._yshift+d.yshift)/L.h-Bt/2;xt=l.align(Kt-ft/L.h,Bt,0,1,d.yanchor)}F("x",Tt),F("y",xt),y&&T||(Et=l.getCursor(y?.5:Tt,T?.5:xt,d.xanchor,d.yanchor))}q.attr({transform:_(mt,ft)+ht}),i(ee,Et)},clickFn:function(mt,ft){d.captureevents&&v.emit("plotly_clickannotation",ge(ft))},doneFn:function(){i(ee),A.call("_guiRelayout",v,U());var mt=document.querySelector(".js-notes-box-panel");mt&&mt.redraw(mt.selectedObj)}})}}}Y.exports={draw:function(v){var d=v._fullLayout;d._infolayer.selectAll(".annotation").remove();for(var m=0;m<d.annotations.length;m++)d.annotations[m].visible&&g(v,m);return o.previousPromises(v)},drawOne:g,drawRaw:b}},33652:function(Y,O,e){var M=e(33428),A=e(76308),o=e(72196),w=e(3400),_=w.strScale,p=w.strRotate,s=w.strTranslate;Y.exports=function(n,a,r){var i,l,u,c,g=n.node(),f=o[r.arrowhead||0],b=o[r.startarrowhead||0],v=(r.arrowwidth||1)*(r.arrowsize||1),d=(r.arrowwidth||1)*(r.startarrowsize||1),m=a.indexOf("start")>=0,x=a.indexOf("end")>=0,y=f.backoff*v+r.standoff,T=b.backoff*d+r.startstandoff;if(g.nodeName==="line"){i={x:+n.attr("x1"),y:+n.attr("y1")},l={x:+n.attr("x2"),y:+n.attr("y2")};var h=i.x-l.x,E=i.y-l.y;if(c=(u=Math.atan2(E,h))+Math.PI,y&&T&&y+T>Math.sqrt(h*h+E*E))return void B();if(y){if(y*y>h*h+E*E)return void B();var k=y*Math.cos(u),L=y*Math.sin(u);l.x+=k,l.y+=L,n.attr({x2:l.x,y2:l.y})}if(T){if(T*T>h*h+E*E)return void B();var P=T*Math.cos(u),I=T*Math.sin(u);i.x-=P,i.y-=I,n.attr({x1:i.x,y1:i.y})}}else if(g.nodeName==="path"){var z=g.getTotalLength(),F="";if(z<y+T)return void B();var U=g.getPointAtLength(0),R=g.getPointAtLength(.1);u=Math.atan2(U.y-R.y,U.x-R.x),i=g.getPointAtLength(Math.min(T,z)),F="0px,"+T+"px,";var j=g.getPointAtLength(z),Z=g.getPointAtLength(z-.1);c=Math.atan2(j.y-Z.y,j.x-Z.x),l=g.getPointAtLength(Math.max(0,z-y)),F+=z-(F?T+y:y)+"px,"+z+"px",n.style("stroke-dasharray",F)}function B(){n.style("stroke-dasharray","0px,100px")}function q(V,ne,ee,$){V.path&&(V.noRotate&&(ee=0),M.select(g.parentNode).append("path").attr({class:n.attr("class"),d:V.path,transform:s(ne.x,ne.y)+p(180*ee/Math.PI)+_($)}).style({fill:A.rgb(r.arrowcolor),"stroke-width":0}))}m&&q(b,i,u,d),x&&q(f,l,c,v)}},79180:function(Y,O,e){var M=e(23816),A=e(42300);Y.exports={moduleType:"component",name:"annotations",layoutAttributes:e(13916),supplyLayoutDefaults:e(45216),includeBasePlot:e(36632)("annotations"),calcAutorange:e(90272),draw:M.draw,drawOne:M.drawOne,drawRaw:M.drawRaw,hasClickToShow:A.hasClickToShow,onClick:A.onClick,convertCoords:e(26828)}},45899:function(Y,O,e){var M=e(13916),A=e(67824).overrideAll,o=e(31780).templatedArray;Y.exports=A(o("annotation",{visible:M.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:M.xanchor,xshift:M.xshift,yanchor:M.yanchor,yshift:M.yshift,text:M.text,textangle:M.textangle,font:M.font,width:M.width,height:M.height,opacity:M.opacity,align:M.align,valign:M.valign,bgcolor:M.bgcolor,bordercolor:M.bordercolor,borderpad:M.borderpad,borderwidth:M.borderwidth,showarrow:M.showarrow,arrowcolor:M.arrowcolor,arrowhead:M.arrowhead,startarrowhead:M.startarrowhead,arrowside:M.arrowside,arrowsize:M.arrowsize,startarrowsize:M.startarrowsize,arrowwidth:M.arrowwidth,standoff:M.standoff,startstandoff:M.startstandoff,hovertext:M.hovertext,hoverlabel:M.hoverlabel,captureevents:M.captureevents}),"calc","from-root")},42456:function(Y,O,e){var M=e(3400),A=e(54460);function o(w,_){var p=_.fullSceneLayout.domain,s=_.fullLayout._size,n={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};w._xa={},M.extendFlat(w._xa,n),A.setConvert(w._xa),w._xa._offset=s.l+p.x[0]*s.w,w._xa.l2p=function(){return .5*(1+w._pdata[0]/w._pdata[3])*s.w*(p.x[1]-p.x[0])},w._ya={},M.extendFlat(w._ya,n),A.setConvert(w._ya),w._ya._offset=s.t+(1-p.y[1])*s.h,w._ya.l2p=function(){return .5*(1-w._pdata[1]/w._pdata[3])*s.h*(p.y[1]-p.y[0])}}Y.exports=function(w){for(var _=w.fullSceneLayout.annotations,p=0;p<_.length;p++)o(_[p],w);w.fullLayout._infolayer.selectAll(".annotation-"+w.id).remove()}},52808:function(Y,O,e){var M=e(3400),A=e(54460),o=e(51272),w=e(87192),_=e(45899);function p(s,n,a,r){function i(u,c){return M.coerce(s,n,_,u,c)}function l(u){var c=u+"axis",g={_fullLayout:{}};return g._fullLayout[c]=a[c],A.coercePosition(n,g,i,u,u,.5)}i("visible")&&(w(s,n,r.fullLayout,i),l("x"),l("y"),l("z"),M.noneOrAll(s,n,["x","y","z"]),n.xref="x",n.yref="y",n.zref="z",i("xanchor"),i("yanchor"),i("xshift"),i("yshift"),n.showarrow&&(n.axref="pixel",n.ayref="pixel",i("ax",-10),i("ay",-30),M.noneOrAll(s,n,["ax","ay"])))}Y.exports=function(s,n,a){o(s,n,{name:"annotations",handleItemDefaults:p,fullLayout:a.fullLayout})}},71836:function(Y,O,e){var M=e(23816).drawRaw,A=e(94424),o=["x","y","z"];Y.exports=function(w){for(var _=w.fullSceneLayout,p=w.dataScale,s=_.annotations,n=0;n<s.length;n++){for(var a=s[n],r=!1,i=0;i<3;i++){var l=o[i],u=a[l],c=_[l+"axis"].r2fraction(u);if(c<0||c>1){r=!0;break}}r?w.fullLayout._infolayer.select(".annotation-"+w.id+'[data-index="'+n+'"]').remove():(a._pdata=A(w.glplot.cameraParams,[_.xaxis.r2l(a.x)*p[0],_.yaxis.r2l(a.y)*p[1],_.zaxis.r2l(a.z)*p[2]]),M(w.graphDiv,a,n,w.id,a._xa,a._ya))}}},56864:function(Y,O,e){var M=e(24040),A=e(3400);Y.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e(45899)}}},layoutAttributes:e(45899),handleDefaults:e(52808),includeBasePlot:function(o,w){var _=M.subplotsRegistry.gl3d;if(_)for(var p=_.attrRegex,s=Object.keys(o),n=0;n<s.length;n++){var a=s[n];p.test(a)&&(o[a].annotations||[]).length&&(A.pushUnique(w._basePlotModules,_),A.pushUnique(w._subplots.gl3d,a))}},convert:e(42456),draw:e(71836)}},54976:function(Y,O,e){Y.exports=e(38700),e(15168),e(67020),e(89792),e(55668),e(65168),e(2084),e(26368),e(24747),e(65616),e(30632),e(73040),e(1104),e(51456),e(4592),e(45348)},97776:function(Y,O,e){var M=e(54976),A=e(3400),o=e(39032),w=o.EPOCHJD,_=o.ONEDAY,p={valType:"enumerated",values:A.sortObjectKeys(M.calendars),editType:"calc",dflt:"gregorian"},s=function(v,d,m,x){var y={};return y[m]=p,A.coerce(v,d,y,m,x)},n="##",a={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:n,w:n,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},r={};function i(v){var d=r[v];return d||(r[v]=M.instance(v))}function l(v){return A.extendFlat({},p,{description:v})}function u(v){return"Sets the calendar system to use with `"+v+"` date data."}var c={xcalendar:l(u("x"))},g=A.extendFlat({},c,{ycalendar:l(u("y"))}),f=A.extendFlat({},g,{zcalendar:l(u("z"))}),b=l(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));Y.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:g,bar:g,box:g,heatmap:g,contour:g,histogram:g,histogram2d:g,histogram2dcontour:g,scatter3d:f,surface:f,mesh3d:f,scattergl:g,ohlc:c,candlestick:c},layout:{calendar:l(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:b},yaxis:{calendar:b},scene:{xaxis:{calendar:b},yaxis:{calendar:b},zaxis:{calendar:b}},polar:{radialaxis:{calendar:b}}},transforms:{filter:{valuecalendar:l(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:l(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:p,handleDefaults:s,handleTraceDefaults:function(v,d,m,x){for(var y=0;y<m.length;y++)s(v,d,m[y]+"calendar",x.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:i,worldCalFmt:function(v,d,m){for(var x,y,T,h,E,k=Math.floor((d+.05)/_)+w,L=i(m).fromJD(k),P=0;(P=v.indexOf("%",P))!==-1;)(x=v.charAt(P+1))==="0"||x==="-"||x==="_"?(T=3,y=v.charAt(P+2),x==="_"&&(x="-")):(y=x,x="0",T=2),(h=a[y])?(E=h===n?n:L.formatDate(h[x]),v=v.substr(0,P)+E+v.substr(P+T),P+=E.length):P+=T;return v}}},22548:function(Y,O){O.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],O.defaultLine="#444",O.lightLine="#eee",O.background="#fff",O.borderLine="#BEC8D9",O.lightFraction=90.9090909090909},76308:function(Y,O,e){var M=e(49760),A=e(38248),o=e(38116).isTypedArray,w=Y.exports={},_=e(22548);w.defaults=_.defaults;var p=w.defaultLine=_.defaultLine;w.lightLine=_.lightLine;var s=w.background=_.background;function n(a){if(A(a)||typeof a!="string")return a;var r=a.trim();if(r.substr(0,3)!=="rgb")return a;var i=r.match(/^rgba?\s*\(([^()]*)\)$/);if(!i)return a;var l=i[1].trim().split(/\s*[\s,]\s*/),u=r.charAt(3)==="a"&&l.length===4;if(!u&&l.length!==3)return a;for(var c=0;c<l.length;c++){if(!l[c].length||(l[c]=Number(l[c]),!(l[c]>=0)))return a;if(c===3)l[c]>1&&(l[c]=1);else if(l[c]>=1)return a}var g=Math.round(255*l[0])+", "+Math.round(255*l[1])+", "+Math.round(255*l[2]);return u?"rgba("+g+", "+l[3]+")":"rgb("+g+")"}w.tinyRGB=function(a){var r=a.toRgb();return"rgb("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+")"},w.rgb=function(a){return w.tinyRGB(M(a))},w.opacity=function(a){return a?M(a).getAlpha():0},w.addOpacity=function(a,r){var i=M(a).toRgb();return"rgba("+Math.round(i.r)+", "+Math.round(i.g)+", "+Math.round(i.b)+", "+r+")"},w.combine=function(a,r){var i=M(a).toRgb();if(i.a===1)return M(a).toRgbString();var l=M(r||s).toRgb(),u=l.a===1?l:{r:255*(1-l.a)+l.r*l.a,g:255*(1-l.a)+l.g*l.a,b:255*(1-l.a)+l.b*l.a},c={r:u.r*(1-i.a)+i.r*i.a,g:u.g*(1-i.a)+i.g*i.a,b:u.b*(1-i.a)+i.b*i.a};return M(c).toRgbString()},w.contrast=function(a,r,i){var l=M(a);return l.getAlpha()!==1&&(l=M(w.combine(a,s))),(l.isDark()?r?l.lighten(r):s:i?l.darken(i):p).toString()},w.stroke=function(a,r){var i=M(r);a.style({stroke:w.tinyRGB(i),"stroke-opacity":i.getAlpha()})},w.fill=function(a,r){var i=M(r);a.style({fill:w.tinyRGB(i),"fill-opacity":i.getAlpha()})},w.clean=function(a){if(a&&typeof a=="object"){var r,i,l,u,c=Object.keys(a);for(r=0;r<c.length;r++)if(u=a[l=c[r]],l.substr(l.length-5)==="color")if(Array.isArray(u))for(i=0;i<u.length;i++)u[i]=n(u[i]);else a[l]=n(u);else if(l.substr(l.length-10)==="colorscale"&&Array.isArray(u))for(i=0;i<u.length;i++)Array.isArray(u[i])&&(u[i][1]=n(u[i][1]));else if(Array.isArray(u)){var g=u[0];if(!Array.isArray(g)&&g&&typeof g=="object")for(i=0;i<u.length;i++)w.clean(u[i])}else u&&typeof u=="object"&&!o(u)&&w.clean(u)}}},42996:function(Y,O,e){var M=e(94724),A=e(25376),o=e(92880).extendFlat,w=e(67824).overrideAll;Y.exports=w({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:M.linecolor,outlinewidth:M.linewidth,bordercolor:M.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:M.minor.tickmode,nticks:M.nticks,tick0:M.tick0,dtick:M.dtick,tickvals:M.tickvals,ticktext:M.ticktext,ticks:o({},M.ticks,{dflt:""}),ticklabeloverflow:o({},M.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:M.ticklen,tickwidth:M.tickwidth,tickcolor:M.tickcolor,ticklabelstep:M.ticklabelstep,showticklabels:M.showticklabels,labelalias:M.labelalias,tickfont:A({}),tickangle:M.tickangle,tickformat:M.tickformat,tickformatstops:M.tickformatstops,tickprefix:M.tickprefix,showtickprefix:M.showtickprefix,ticksuffix:M.ticksuffix,showticksuffix:M.showticksuffix,separatethousands:M.separatethousands,exponentformat:M.exponentformat,minexponent:M.minexponent,showexponent:M.showexponent,title:{text:{valType:"string"},font:A({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:A({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},63964:function(Y){Y.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},64013:function(Y,O,e){var M=e(3400),A=e(31780),o=e(26332),w=e(25404),_=e(95936),p=e(42568),s=e(42996);Y.exports=function(n,a,r){var i=A.newContainer(a,"colorbar"),l=n.colorbar||{};function u(F,U){return M.coerce(l,i,s,F,U)}var c=r.margin||{t:0,b:0,l:0,r:0},g=r.width-c.l-c.r,f=r.height-c.t-c.b,b=u("orientation")==="v",v=u("thicknessmode");u("thickness",v==="fraction"?30/(b?g:f):30);var d=u("lenmode");u("len",d==="fraction"?1:b?f:g);var m,x,y,T=u("yref")==="paper",h=u("xref")==="paper",E="left";b?(y="middle",E=h?"left":"right",m=h?1.02:1,x=.5):(y=T?"bottom":"top",E="center",m=.5,x=T?1.02:1),M.coerce(l,i,{x:{valType:"number",min:h?-2:0,max:h?3:1,dflt:m}},"x"),M.coerce(l,i,{y:{valType:"number",min:T?-2:0,max:T?3:1,dflt:x}},"y"),u("xanchor",E),u("xpad"),u("yanchor",y),u("ypad"),M.noneOrAll(l,i,["x","y"]),u("outlinecolor"),u("outlinewidth"),u("bordercolor"),u("borderwidth"),u("bgcolor");var k=M.coerce(l,i,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:b?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");u("ticklabeloverflow",k.indexOf("inside")!==-1?"hide past domain":"hide past div"),o(l,i,u,"linear");var L=r.font,P={noAutotickangles:!0,outerTicks:!1,font:L};k.indexOf("inside")!==-1&&(P.bgColor="black"),p(l,i,u,"linear",P),_(l,i,u,"linear",P),w(l,i,u,"linear",P),u("title.text",r._dfltTitle.colorbar);var I=i.showticklabels?i.tickfont:L,z=M.extendFlat({},I,{color:L.color,size:M.bigFont(I.size)});M.coerceFont(u,"title.font",z),u("title.side",b?"top":"right")}},37848:function(Y,O,e){var M=e(33428),A=e(49760),o=e(7316),w=e(24040),_=e(54460),p=e(86476),s=e(3400),n=s.strTranslate,a=e(92880).extendFlat,r=e(93972),i=e(43616),l=e(76308),u=e(81668),c=e(72736),g=e(94288).flipScale,f=e(28336),b=e(37668),v=e(94724),d=e(84284),m=d.LINE_SPACING,x=d.FROM_TL,y=d.FROM_BR,T=e(63964).cn;Y.exports={draw:function(h){var E=h._fullLayout._infolayer.selectAll("g."+T.colorbar).data(function(k){var L,P,I,z,F=k._fullLayout,U=k.calcdata,R=[];function j(ie){return a(ie,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function Z(){typeof z.calc=="function"?z.calc(k,I,L):(L._fillgradient=P.reversescale?g(P.colorscale):P.colorscale,L._zrange=[P[z.min],P[z.max]])}for(var B=0;B<U.length;B++){var q=U[B];if((I=q[0].trace)._module){var V=I._module.colorbar;if(I.visible===!0&&V)for(var ne=Array.isArray(V),ee=ne?V:[V],$=0;$<ee.length;$++){var J=(z=ee[$]).container;(P=J?I[J]:I)&&P.showscale&&((L=j(P.colorbar))._id="cb"+I.uid+(ne&&J?"-"+J:""),L._traceIndex=I.index,L._propPrefix=(J?J+".":"")+"colorbar.",L._meta=I._meta,Z(),R.push(L))}}}for(var K in F._colorAxes)if((P=F[K]).showscale){var te=F._colorAxes[K];(L=j(P.colorbar))._id="cb"+K,L._propPrefix=K+".colorbar.",L._meta=F._meta,z={min:"cmin",max:"cmax"},te[0]!=="heatmap"&&(I=te[1],z.calc=I._module.colorbar.calc),Z(),R.push(L)}return R}(h),function(k){return k._id});E.enter().append("g").attr("class",function(k){return k._id}).classed(T.colorbar,!0),E.each(function(k){var L=M.select(this);s.ensureSingle(L,"rect",T.cbbg),s.ensureSingle(L,"g",T.cbfills),s.ensureSingle(L,"g",T.cblines),s.ensureSingle(L,"g",T.cbaxis,function(I){I.classed(T.crisp,!0)}),s.ensureSingle(L,"g",T.cbtitleunshift,function(I){I.append("g").classed(T.cbtitle,!0)}),s.ensureSingle(L,"rect",T.cboutline);var P=function(I,z,F){var U=z.orientation==="v",R=z.len,j=z.lenmode,Z=z.thickness,B=z.thicknessmode,q=z.outlinewidth,V=z.borderwidth,ne=z.bgcolor,ee=z.xanchor,$=z.yanchor,J=z.xpad,K=z.ypad,te=z.x,ie=U?z.y:1-z.y,ae=z.yref==="paper",se=z.xref==="paper",ce=F._fullLayout,de=ce._size,ge=z._fillcolor,ve=z._line,be=z.title,me=be.side,Se=z._zrange||M.extent((typeof ge=="function"?ge:ve.color).domain()),we=typeof ve.color=="function"?ve.color:function(){return ve.color},_e=typeof ge=="function"?ge:function(){return ge},oe=z._levels,le=function(Ne,We,st){var it,Fe,Be=We._levels,at=[],Ze=[],ht=Be.end+Be.size/100,vt=Be.size,mt=1.001*st[0]-.001*st[1],ft=1.001*st[1]-.001*st[0];for(Fe=0;Fe<1e5&&(it=Be.start+Fe*vt,!(vt>0?it>=ht:it<=ht));Fe++)it>mt&&it<ft&&at.push(it);if(We._fillgradient)Ze=[0];else if(typeof We._fillcolor=="function"){var Et=We._filllevels;if(Et)for(ht=Et.end+Et.size/100,vt=Et.size,Fe=0;Fe<1e5&&(it=Et.start+Fe*vt,!(vt>0?it>=ht:it<=ht));Fe++)it>st[0]&&it<st[1]&&Ze.push(it);else(Ze=at.map(function(Tt){return Tt-Be.size/2})).push(Ze[Ze.length-1]+Be.size)}else We._fillcolor&&typeof We._fillcolor=="string"&&(Ze=[0]);return Be.size<0&&(at.reverse(),Ze.reverse()),{line:at,fill:Ze}}(0,z,Se),pe=le.fill,Ee=le.line,Te=Math.round(Z*(B==="fraction"?U?de.w:de.h:1)),Me=Te/(U?de.w:de.h),Le=Math.round(R*(j==="fraction"?U?de.h:de.w:1)),Ie=Le/(U?de.h:de.w),he=se?de.w:F._fullLayout.width,xe=ae?de.h:F._fullLayout.height,ke=Math.round(U?te*he+J:ie*xe+K),ze={center:.5,right:1}[ee]||0,Re={top:1,middle:.5}[$]||0,Oe=U?te-ze*Me:ie-Re*Me,Ve=U?ie-Re*Ie:te-ze*Ie,qe=Math.round(U?xe*(1-Ve):he*Ve);z._lenFrac=Ie,z._thickFrac=Me,z._uFrac=Oe,z._vFrac=Ve;var Je=z._axis=function(Ne,We,st){var it=Ne._fullLayout,Fe=We.orientation==="v",Be={type:"linear",range:st,tickmode:We.tickmode,nticks:We.nticks,tick0:We.tick0,dtick:We.dtick,tickvals:We.tickvals,ticktext:We.ticktext,ticks:We.ticks,ticklen:We.ticklen,tickwidth:We.tickwidth,tickcolor:We.tickcolor,showticklabels:We.showticklabels,labelalias:We.labelalias,ticklabelposition:We.ticklabelposition,ticklabeloverflow:We.ticklabeloverflow,ticklabelstep:We.ticklabelstep,tickfont:We.tickfont,tickangle:We.tickangle,tickformat:We.tickformat,exponentformat:We.exponentformat,minexponent:We.minexponent,separatethousands:We.separatethousands,showexponent:We.showexponent,showtickprefix:We.showtickprefix,tickprefix:We.tickprefix,showticksuffix:We.showticksuffix,ticksuffix:We.ticksuffix,title:We.title,showline:!0,anchor:"free",side:Fe?"right":"bottom",position:1},at=Fe?"y":"x",Ze={type:"linear",_id:at+We._id},ht={letter:at,font:it.font,noAutotickangles:at==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:it.calendar};function vt(mt,ft){return s.coerce(Be,Ze,v,mt,ft)}return f(Be,Ze,vt,ht,it),b(Be,Ze,vt,ht),Ze}(F,z,Se);Je.position=Me+(U?te+J/de.w:ie+K/de.h);var ot=["top","bottom"].indexOf(me)!==-1;if(U&&ot&&(Je.title.side=me,Je.titlex=te+J/de.w,Je.titley=Ve+(be.side==="top"?Ie-K/de.h:K/de.h)),U||ot||(Je.title.side=me,Je.titley=ie+K/de.h,Je.titlex=Ve+J/de.w),ve.color&&z.tickmode==="auto"){Je.tickmode="linear",Je.tick0=oe.start;var rt=oe.size,dt=s.constrain(Le/50,4,15)+1,_t=(Se[1]-Se[0])/((z.nticks||dt)*rt);if(_t>1){var yt=Math.pow(10,Math.floor(Math.log(_t)/Math.LN10));rt*=yt*s.roundUp(_t/yt,[2,5,10]),(Math.abs(oe.start)/oe.size+1e-6)%1<2e-6&&(Je.tick0=0)}Je.dtick=rt}Je.domain=U?[Ve+K/de.h,Ve+Ie-K/de.h]:[Ve+J/de.w,Ve+Ie-J/de.w],Je.setScale(),I.attr("transform",n(Math.round(de.l),Math.round(de.t)));var et,nt=I.select("."+T.cbtitleunshift).attr("transform",n(-Math.round(de.l),-Math.round(de.t))),At=Je.ticklabelposition,Rt=Je.title.font.size,Ft=I.select("."+T.cbaxis),It=0,Ge=0;function Ye(Ne,We){var st={propContainer:Je,propName:z._propPrefix+"title",traceIndex:z._traceIndex,_meta:z._meta,placeholder:ce._dfltTitle.colorbar,containerGroup:I.select("."+T.cbtitle)},it=Ne.charAt(0)==="h"?Ne.substr(1):"h"+Ne;I.selectAll("."+it+",."+it+"-math-group").remove(),u.draw(F,Ne,a(st,We||{}))}return s.syncOrAsync([o.previousPromises,function(){var Ne,We;(U&&ot||!U&&!ot)&&(me==="top"&&(Ne=J+de.l+he*te,We=K+de.t+xe*(1-Ve-Ie)+3+.75*Rt),me==="bottom"&&(Ne=J+de.l+he*te,We=K+de.t+xe*(1-Ve)-3-.25*Rt),me==="right"&&(We=K+de.t+xe*ie+3+.75*Rt,Ne=J+de.l+he*Ve),Ye(Je._id+"title",{attributes:{x:Ne,y:We,"text-anchor":U?"start":"middle"}}))},function(){if(!U&&!ot||U&&ot){var Ne,We=I.select("."+T.cbtitle),st=We.select("text"),it=[-q/2,q/2],Fe=We.select(".h"+Je._id+"title-math-group").node(),Be=15.6;if(st.node()&&(Be=parseInt(st.node().style.fontSize,10)*m),Fe?(Ne=i.bBox(Fe),Ge=Ne.width,(It=Ne.height)>Be&&(it[1]-=(It-Be)/2)):st.node()&&!st.classed(T.jsPlaceholder)&&(Ne=i.bBox(st.node()),Ge=Ne.width,It=Ne.height),U){if(It){if(It+=5,me==="top")Je.domain[1]-=It/de.h,it[1]*=-1;else{Je.domain[0]+=It/de.h;var at=c.lineCount(st);it[1]+=(1-at)*Be}We.attr("transform",n(it[0],it[1])),Je.setScale()}}else Ge&&(me==="right"&&(Je.domain[0]+=(Ge+Rt/2)/de.w),We.attr("transform",n(it[0],it[1])),Je.setScale())}I.selectAll("."+T.cbfills+",."+T.cblines).attr("transform",U?n(0,Math.round(de.h*(1-Je.domain[1]))):n(Math.round(de.w*Je.domain[0]),0)),Ft.attr("transform",U?n(0,Math.round(-de.t)):n(Math.round(-de.l),0));var Ze=I.select("."+T.cbfills).selectAll("rect."+T.cbfill).attr("style","").data(pe);Ze.enter().append("rect").classed(T.cbfill,!0).attr("style",""),Ze.exit().remove();var ht=Se.map(Je.c2p).map(Math.round).sort(function(Tt,xt){return Tt-xt});Ze.each(function(Tt,xt){var Ct=[xt===0?Se[0]:(pe[xt]+pe[xt-1])/2,xt===pe.length-1?Se[1]:(pe[xt]+pe[xt+1])/2].map(Je.c2p).map(Math.round);U&&(Ct[1]=s.constrain(Ct[1]+(Ct[1]>Ct[0])?1:-1,ht[0],ht[1]));var Pt=M.select(this).attr(U?"x":"y",ke).attr(U?"y":"x",M.min(Ct)).attr(U?"width":"height",Math.max(Te,2)).attr(U?"height":"width",Math.max(M.max(Ct)-M.min(Ct),2));if(z._fillgradient)i.gradient(Pt,F,z._id,U?"vertical":"horizontalreversed",z._fillgradient,"fill");else{var Bt=_e(Tt).replace("e-","");Pt.attr("fill",A(Bt).toHexString())}});var vt=I.select("."+T.cblines).selectAll("path."+T.cbline).data(ve.color&&ve.width?Ee:[]);vt.enter().append("path").classed(T.cbline,!0),vt.exit().remove(),vt.each(function(Tt){var xt=ke,Ct=Math.round(Je.c2p(Tt))+ve.width/2%1;M.select(this).attr("d","M"+(U?xt+","+Ct:Ct+","+xt)+(U?"h":"v")+Te).call(i.lineGroupStyle,ve.width,we(Tt),ve.dash)}),Ft.selectAll("g."+Je._id+"tick,path").remove();var mt=ke+Te+(q||0)/2-(z.ticks==="outside"?1:0),ft=_.calcTicks(Je),Et=_.getTickSigns(Je)[2];return _.drawTicks(F,Je,{vals:Je.ticks==="inside"?_.clipEnds(Je,ft):ft,layer:Ft,path:_.makeTickPath(Je,mt,Et),transFn:_.makeTransTickFn(Je)}),_.drawLabels(F,Je,{vals:ft,layer:Ft,transFn:_.makeTransTickLabelFn(Je),labelFns:_.makeLabelFns(Je,mt)})},function(){if(U&&!ot||!U&&ot){var Ne,We,st=Je.position||0,it=Je._offset+Je._length/2;if(me==="right")We=it,Ne=de.l+he*st+10+Rt*(Je.showticklabels?1:.5);else if(Ne=it,me==="bottom"&&(We=de.t+xe*st+10+(At.indexOf("inside")===-1?Je.tickfont.size:0)+(Je.ticks!=="intside"&&z.ticklen||0)),me==="top"){var Fe=be.text.split("<br>").length;We=de.t+xe*st+10-Te-m*Rt*Fe}Ye((U?"h":"v")+Je._id+"title",{avoid:{selection:M.select(F).selectAll("g."+Je._id+"tick"),side:me,offsetTop:U?0:de.t,offsetLeft:U?de.l:0,maxShift:U?ce.width:ce.height},attributes:{x:Ne,y:We,"text-anchor":"middle"},transform:{rotate:U?-90:0,offset:0}})}},o.previousPromises,function(){var Ne,We=Te+q/2;At.indexOf("inside")===-1&&(Ne=i.bBox(Ft.node()),We+=U?Ne.width:Ne.height),et=nt.select("text");var st=0,it=U&&me==="top",Fe=!U&&me==="right",Be=0;if(et.node()&&!et.classed(T.jsPlaceholder)){var at,Ze=nt.select(".h"+Je._id+"title-math-group").node();Ze&&(U&&ot||!U&&!ot)?(st=(Ne=i.bBox(Ze)).width,at=Ne.height):(st=(Ne=i.bBox(nt.node())).right-de.l-(U?ke:qe),at=Ne.bottom-de.t-(U?qe:ke),U||me!=="top"||(We+=Ne.height,Be=Ne.height)),Fe&&(et.attr("transform",n(st/2+Rt/2,0)),st*=2),We=Math.max(We,U?st:at)}var ht=2*(U?J:K)+We+V+q/2,vt=0;!U&&be.text&&$==="bottom"&&ie<=0&&(ht+=vt=ht/2,Be+=vt),ce._hColorbarMoveTitle=vt,ce._hColorbarMoveCBTitle=Be;var mt=V+q,ft=(U?ke:qe)-mt/2-(U?J:0),Et=(U?qe:ke)-(U?Le:K+Be-vt);I.select("."+T.cbbg).attr("x",ft).attr("y",Et).attr(U?"width":"height",Math.max(ht-vt,2)).attr(U?"height":"width",Math.max(Le+mt,2)).call(l.fill,ne).call(l.stroke,z.bordercolor).style("stroke-width",V);var Tt=Fe?Math.max(st-10,0):0;I.selectAll("."+T.cboutline).attr("x",(U?ke:qe+J)+Tt).attr("y",(U?qe+K-Le:ke)+(it?It:0)).attr(U?"width":"height",Math.max(Te,2)).attr(U?"height":"width",Math.max(Le-(U?2*K+It:2*J+Tt),2)).call(l.stroke,z.outlinecolor).style({fill:"none","stroke-width":q});var xt=U?ze*ht:0,Ct=U?0:(1-Re)*ht-Be;if(xt=se?de.l-xt:-xt,Ct=ae?de.t-Ct:-Ct,I.attr("transform",n(xt,Ct)),!U&&(V||A(ne).getAlpha()&&!A.equals(ce.paper_bgcolor,ne))){var Pt=Ft.selectAll("text"),Bt=Pt[0].length,Kt=I.select("."+T.cbbg).node(),sn=i.bBox(Kt),Gt=i.getTranslate(I);Pt.each(function(An,Cn){var Rn=Bt-1;if(Cn===0||Cn===Rn){var Fn,In=i.bBox(this),Hn=i.getTranslate(this);if(Cn===Rn){var Un=In.right+Hn.x;(Fn=sn.right+Gt.x+qe-V-2+te-Un)>0&&(Fn=0)}else if(Cn===0){var ar=In.left+Hn.x;(Fn=sn.left+Gt.x+qe+V+2-ar)<0&&(Fn=0)}Fn&&(Bt<3?this.setAttribute("transform","translate("+Fn+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Yt={},rn=x[ee],Ln=y[ee],Sn=x[$],gn=y[$],$t=ht-Te;U?(j==="pixels"?(Yt.y=ie,Yt.t=Le*Sn,Yt.b=Le*gn):(Yt.t=Yt.b=0,Yt.yt=ie+R*Sn,Yt.yb=ie-R*gn),B==="pixels"?(Yt.x=te,Yt.l=ht*rn,Yt.r=ht*Ln):(Yt.l=$t*rn,Yt.r=$t*Ln,Yt.xl=te-Z*rn,Yt.xr=te+Z*Ln)):(j==="pixels"?(Yt.x=te,Yt.l=Le*rn,Yt.r=Le*Ln):(Yt.l=Yt.r=0,Yt.xl=te+R*rn,Yt.xr=te-R*Ln),B==="pixels"?(Yt.y=1-ie,Yt.t=ht*Sn,Yt.b=ht*gn):(Yt.t=$t*Sn,Yt.b=$t*gn,Yt.yt=ie-Z*Sn,Yt.yb=ie+Z*gn));var cn=z.y<.5?"b":"t",an=z.x<.5?"l":"r";F._fullLayout._reservedMargin[z._id]={};var pn={r:ce.width-ft-xt,l:ft+Yt.r,b:ce.height-Et-Ct,t:Et+Yt.b};se&&ae?o.autoMargin(F,z._id,Yt):se?F._fullLayout._reservedMargin[z._id][cn]=pn[cn]:ae||U?F._fullLayout._reservedMargin[z._id][an]=pn[an]:F._fullLayout._reservedMargin[z._id][cn]=pn[cn]}],F)}(L,k,h);P&&P.then&&(h._promises||[]).push(P),h._context.edits.colorbarPosition&&function(I,z,F){var U,R,j,Z=z.orientation==="v",B=F._fullLayout._size;p.init({element:I.node(),gd:F,prepFn:function(){U=I.attr("transform"),r(I)},moveFn:function(q,V){I.attr("transform",U+n(q,V)),R=p.align((Z?z._uFrac:z._vFrac)+q/B.w,Z?z._thickFrac:z._lenFrac,0,1,z.xanchor),j=p.align((Z?z._vFrac:1-z._uFrac)-V/B.h,Z?z._lenFrac:z._thickFrac,0,1,z.yanchor);var ne=p.getCursor(R,j,z.xanchor,z.yanchor);r(I,ne)},doneFn:function(){if(r(I),R!==void 0&&j!==void 0){var q={};q[z._propPrefix+"x"]=R,q[z._propPrefix+"y"]=j,z._traceIndex!==void 0?w.call("_guiRestyle",F,q,z._traceIndex):w.call("_guiRelayout",F,q)}}})}(L,k,h)}),E.exit().each(function(k){o.autoMargin(h,k._id)}).remove(),E.order()}}},90553:function(Y,O,e){var M=e(3400);Y.exports=function(A){return M.isPlainObject(A.colorbar)}},55080:function(Y,O,e){Y.exports={moduleType:"component",name:"colorbar",attributes:e(42996),supplyDefaults:e(64013),draw:e(37848).draw,hasColorbar:e(90553)}},49084:function(Y,O,e){var M=e(42996),A=e(53756).counter,o=e(95376),w=e(88304).scales;function _(p){return"`"+p+"`"}o(w),Y.exports=function(p,s){p=p||"";var n,a=(s=s||{}).cLetter||"c",r=("onlyIfNumerical"in s&&s.onlyIfNumerical,"noScale"in s?s.noScale:p==="marker.line"),i="showScaleDflt"in s?s.showScaleDflt:a==="z",l=typeof s.colorscaleDflt=="string"?w[s.colorscaleDflt]:null,u=s.editTypeOverride||"",c=p?p+".":"";"colorAttr"in s?(n=s.colorAttr,s.colorAttr):_(c+(n={z:"z",c:"color"}[a]));var g=a+"auto",f=a+"min",b=a+"max",v=a+"mid",d={};d[f]=d[b]=void 0;var m={};m[g]=!1;var x={};return n==="color"&&(x.color={valType:"color",arrayOk:!0,editType:u||"style"},s.anim&&(x.color.anim=!0)),x[g]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:d},x[f]={valType:"number",dflt:null,editType:u||"plot",impliedEdits:m},x[b]={valType:"number",dflt:null,editType:u||"plot",impliedEdits:m},x[v]={valType:"number",dflt:null,editType:"calc",impliedEdits:d},x.colorscale={valType:"colorscale",editType:"calc",dflt:l,impliedEdits:{autocolorscale:!1}},x.autocolorscale={valType:"boolean",dflt:s.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},x.reversescale={valType:"boolean",dflt:!1,editType:"plot"},r||(x.showscale={valType:"boolean",dflt:i,editType:"calc"},x.colorbar=M),s.noColorAxis||(x.coloraxis={valType:"subplotid",regex:A("coloraxis"),dflt:null,editType:"calc"}),x}},47128:function(Y,O,e){var M=e(38248),A=e(3400),o=e(94288).extractOpts;Y.exports=function(w,_,p){var s,n=w._fullLayout,a=p.vals,r=p.containerStr,i=r?A.nestedProperty(_,r).get():_,l=o(i),u=l.auto!==!1,c=l.min,g=l.max,f=l.mid,b=function(){return A.aggNums(Math.min,null,a)},v=function(){return A.aggNums(Math.max,null,a)};c===void 0?c=b():u&&(c=i._colorAx&&M(c)?Math.min(c,b()):b()),g===void 0?g=v():u&&(g=i._colorAx&&M(g)?Math.max(g,v()):v()),u&&f!==void 0&&(g-f>f-c?c=f-(g-f):g-f<f-c&&(g=f+(f-c))),c===g&&(c-=.5,g+=.5),l._sync("min",c),l._sync("max",g),l.autocolorscale&&(s=c*g<0?n.colorscale.diverging:c>=0?n.colorscale.sequential:n.colorscale.sequentialminus,l._sync("colorscale",s))}},95504:function(Y,O,e){var M=e(3400),A=e(94288).hasColorscale,o=e(94288).extractOpts;Y.exports=function(w,_){function p(u,c){var g=u["_"+c];g!==void 0&&(u[c]=g)}function s(u,c){var g=c.container?M.nestedProperty(u,c.container).get():u;if(g)if(g.coloraxis)g._colorAx=_[g.coloraxis];else{var f=o(g),b=f.auto;(b||f.min===void 0)&&p(g,c.min),(b||f.max===void 0)&&p(g,c.max),f.autocolorscale&&p(g,"colorscale")}}for(var n=0;n<w.length;n++){var a=w[n],r=a._module.colorbar;if(r)if(Array.isArray(r))for(var i=0;i<r.length;i++)s(a,r[i]);else s(a,r);A(a,"marker.line")&&s(a,{container:"marker.line",min:"cmin",max:"cmax"})}for(var l in _._colorAxes)s(_[l],{min:"cmin",max:"cmax"})}},27260:function(Y,O,e){var M=e(38248),A=e(3400),o=e(90553),w=e(64013),_=e(88304).isValid,p=e(24040).traceIs;function s(n,a){var r=a.slice(0,a.length-1);return a?A.nestedProperty(n,r).get()||{}:n}Y.exports=function n(a,r,i,l,u){var c=u.prefix,g=u.cLetter,f="_module"in r,b=s(a,c),v=s(r,c),d=s(r._template||{},c)||{},m=function(){return delete a.coloraxis,delete r.coloraxis,n(a,r,i,l,u)};if(f){var x=i._colorAxes||{},y=l(c+"coloraxis");if(y){var T=p(r,"contour")&&A.nestedProperty(r,"contours.coloring").get()||"heatmap",h=x[y];return void(h?(h[2].push(m),h[0]!==T&&(h[0]=!1,A.warn(["Ignoring coloraxis:",y,"setting","as it is linked to incompatible colorscales."].join(" ")))):x[y]=[T,r,[m]])}}var E=b[g+"min"],k=b[g+"max"],L=M(E)&&M(k)&&E<k;l(c+g+"auto",!L)?l(c+g+"mid"):(l(c+g+"min"),l(c+g+"max"));var P,I,z=b.colorscale,F=d.colorscale;z!==void 0&&(P=!_(z)),F!==void 0&&(P=!_(F)),l(c+"autocolorscale",P),l(c+"colorscale"),l(c+"reversescale"),c!=="marker.line."&&(c&&f&&(I=o(b)),l(c+"showscale",I)&&(c&&d&&(v._template=d),w(b,v,i)))}},94288:function(Y,O,e){var M=e(33428),A=e(49760),o=e(38248),w=e(3400),_=e(76308),p=e(88304).isValid,s=["showscale","autocolorscale","colorscale","reversescale","colorbar"],n=["min","max","mid","auto"];function a(c){var g,f,b,v=c._colorAx,d=v||c,m={};for(f=0;f<s.length;f++)m[b=s[f]]=d[b];if(v)for(g="c",f=0;f<n.length;f++)m[b=n[f]]=d["c"+b];else{var x;for(f=0;f<n.length;f++)((x="c"+(b=n[f]))in d||(x="z"+b)in d)&&(m[b]=d[x]);g=x.charAt(0)}return m._sync=function(y,T){var h=n.indexOf(y)!==-1?g+y:y;d[h]=d["_"+h]=T},m}function r(c){for(var g=a(c),f=g.min,b=g.max,v=g.reversescale?i(g.colorscale):g.colorscale,d=v.length,m=new Array(d),x=new Array(d),y=0;y<d;y++){var T=v[y];m[y]=f+T[0]*(b-f),x[y]=T[1]}return{domain:m,range:x}}function i(c){for(var g=c.length,f=new Array(g),b=g-1,v=0;b>=0;b--,v++){var d=c[b];f[v]=[1-d[0],d[1]]}return f}function l(c,g){g=g||{};for(var f=c.domain,b=c.range,v=b.length,d=new Array(v),m=0;m<v;m++){var x=A(b[m]).toRgb();d[m]=[x.r,x.g,x.b,x.a]}var y,T=M.scale.linear().domain(f).range(d).clamp(!0),h=g.noNumericCheck,E=g.returnArray;return(y=h&&E?T:h?function(k){return u(T(k))}:E?function(k){return o(k)?T(k):A(k).isValid()?k:_.defaultLine}:function(k){return o(k)?u(T(k)):A(k).isValid()?k:_.defaultLine}).domain=T.domain,y.range=function(){return b},y}function u(c){var g={r:c[0],g:c[1],b:c[2],a:c[3]};return A(g).toRgbString()}Y.exports={hasColorscale:function(c,g,f){var b=g?w.nestedProperty(c,g).get()||{}:c,v=b[f||"color"];v&&v._inputArray&&(v=v._inputArray);var d=!1;if(w.isArrayOrTypedArray(v)){for(var m=0;m<v.length;m++)if(o(v[m])){d=!0;break}}return w.isPlainObject(b)&&(d||b.showscale===!0||o(b.cmin)&&o(b.cmax)||p(b.colorscale)||w.isPlainObject(b.colorbar))},extractOpts:a,extractScale:r,flipScale:i,makeColorScaleFunc:l,makeColorScaleFuncFromTrace:function(c,g){return l(r(c),g)}}},8932:function(Y,O,e){var M=e(88304),A=e(94288);Y.exports={moduleType:"component",name:"colorscale",attributes:e(49084),layoutAttributes:e(92332),supplyLayoutDefaults:e(51608),handleDefaults:e(27260),crossTraceDefaults:e(95504),calc:e(47128),scales:M.scales,defaultScale:M.defaultScale,getScale:M.get,isValidScale:M.isValid,hasColorscale:A.hasColorscale,extractOpts:A.extractOpts,extractScale:A.extractScale,flipScale:A.flipScale,makeColorScaleFunc:A.makeColorScaleFunc,makeColorScaleFuncFromTrace:A.makeColorScaleFuncFromTrace}},92332:function(Y,O,e){var M=e(92880).extendFlat,A=e(49084),o=e(88304).scales;Y.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:o.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:o.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:o.RdBu,editType:"calc"}},coloraxis:M({_isSubplotObj:!0,editType:"calc"},A("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},51608:function(Y,O,e){var M=e(3400),A=e(31780),o=e(92332),w=e(27260);Y.exports=function(_,p){function s(g,f){return M.coerce(_,p,o,g,f)}s("colorscale.sequential"),s("colorscale.sequentialminus"),s("colorscale.diverging");var n,a,r=p._colorAxes;function i(g,f){return M.coerce(n,a,o.coloraxis,g,f)}for(var l in r){var u=r[l];if(u[0])n=_[l]||{},(a=A.newContainer(p,l,"coloraxis"))._name=l,w(n,a,p,i,{prefix:"",cLetter:"c"});else{for(var c=0;c<u[2].length;c++)u[2][c]();delete p._colorAxes[l]}}}},88304:function(Y,O,e){var M=e(49760),A={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},o=A.RdBu;function w(_){var p=0;if(!Array.isArray(_)||_.length<2||!_[0]||!_[_.length-1]||+_[0][0]!=0||+_[_.length-1][0]!=1)return!1;for(var s=0;s<_.length;s++){var n=_[s];if(n.length!==2||+n[0]<p||!M(n[1]).isValid())return!1;p=+n[0]}return!0}Y.exports={scales:A,defaultScale:o,get:function(_,p){if(p||(p=o),!_)return p;function s(){try{_=A[_]||JSON.parse(_)}catch{_=p}}return typeof _=="string"&&(s(),typeof _=="string"&&s()),w(_)?_:p},isValid:function(_){return A[_]!==void 0||w(_)}}},78316:function(Y){Y.exports=function(O,e,M,A,o){var w=(O-M)/(A-M),_=w+e/(A-M),p=(w+_)/2;return o==="left"||o==="bottom"?w:o==="center"||o==="middle"?p:o==="right"||o==="top"?_:w<.6666666666666666-p?w:_>1.3333333333333333-p?_:p}},67416:function(Y,O,e){var M=e(3400),A=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];Y.exports=function(o,w,_,p){return o=_==="left"?0:_==="center"?1:_==="right"?2:M.constrain(Math.floor(3*o),0,2),w=p==="bottom"?0:p==="middle"?1:p==="top"?2:M.constrain(Math.floor(3*w),0,2),A[w][o]}},72760:function(Y,O){O.selectMode=function(e){return e==="lasso"||e==="select"},O.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"},O.openMode=function(e){return e==="drawline"||e==="drawopenpath"},O.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"},O.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"},O.selectingOrDrawing=function(e){return O.freeMode(e)||O.rectMode(e)}},86476:function(Y,O,e){var M=e(29128),A=e(52264),o=e(89184),w=e(3400).removeElement,_=e(33816),p=Y.exports={};p.align=e(78316),p.getCursor=e(67416);var s=e(2616);function n(){var r=document.createElement("div");r.className="dragcover";var i=r.style;return i.position="fixed",i.left=0,i.right=0,i.top=0,i.bottom=0,i.zIndex=999999999,i.background="none",document.body.appendChild(r),r}function a(r){return M(r.changedTouches?r.changedTouches[0]:r,document.body)}p.unhover=s.wrapped,p.unhoverRaw=s.raw,p.init=function(r){var i,l,u,c,g,f,b,v,d=r.gd,m=1,x=d._context.doubleClickDelay,y=r.element;d._mouseDownTime||(d._mouseDownTime=0),y.style.pointerEvents="all",y.onmousedown=h,o?(y._ontouchstart&&y.removeEventListener("touchstart",y._ontouchstart),y._ontouchstart=h,y.addEventListener("touchstart",h,{passive:!1})):y.ontouchstart=h;var T=r.clampFn||function(L,P,I){return Math.abs(L)<I&&(L=0),Math.abs(P)<I&&(P=0),[L,P]};function h(L){d._dragged=!1,d._dragging=!0;var P=a(L);i=P[0],l=P[1],b=L.target,f=L,v=L.buttons===2||L.ctrlKey,L.clientX===void 0&&L.clientY===void 0&&(L.clientX=i,L.clientY=l),(u=new Date().getTime())-d._mouseDownTime<x?m+=1:(m=1,d._mouseDownTime=u),r.prepFn&&r.prepFn(L,i,l),A&&!v?(g=n()).style.cursor=window.getComputedStyle(y).cursor:A||(g=document,c=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(y).cursor),document.addEventListener("mouseup",k),document.addEventListener("touchend",k),r.dragmode!==!1&&(L.preventDefault(),document.addEventListener("mousemove",E),document.addEventListener("touchmove",E,{passive:!1}))}function E(L){L.preventDefault();var P=a(L),I=r.minDrag||_.MINDRAG,z=T(P[0]-i,P[1]-l,I),F=z[0],U=z[1];(F||U)&&(d._dragged=!0,p.unhover(d,L)),d._dragged&&r.moveFn&&!v&&(d._dragdata={element:y,dx:F,dy:U},r.moveFn(F,U))}function k(L){if(delete d._dragdata,r.dragmode!==!1&&(L.preventDefault(),document.removeEventListener("mousemove",E),document.removeEventListener("touchmove",E)),document.removeEventListener("mouseup",k),document.removeEventListener("touchend",k),A?w(g):c&&(g.documentElement.style.cursor=c,c=null),d._dragging){if(d._dragging=!1,new Date().getTime()-d._mouseDownTime>x&&(m=Math.max(m-1,1)),d._dragged)r.doneFn&&r.doneFn();else if(r.clickFn&&r.clickFn(m,f),!v){var P;try{P=new MouseEvent("click",L)}catch{var I=a(L);(P=document.createEvent("MouseEvents")).initMouseEvent("click",L.bubbles,L.cancelable,L.view,L.detail,L.screenX,L.screenY,I[0],I[1],L.ctrlKey,L.altKey,L.shiftKey,L.metaKey,L.button,L.relatedTarget)}b.dispatchEvent(P)}d._dragging=!1,d._dragged=!1}else d._dragged=!1}},p.coverSlip=n},2616:function(Y,O,e){var M=e(95924),A=e(91200),o=e(52200).getGraphDiv,w=e(92456),_=Y.exports={};_.wrapped=function(p,s,n){(p=o(p))._fullLayout&&A.clear(p._fullLayout._uid+w.HOVERID),_.raw(p,s,n)},_.raw=function(p,s){var n=p._fullLayout,a=p._hoverdata;s||(s={}),s.target&&!p._dragged&&M.triggerHandler(p,"plotly_beforehover",s)===!1||(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),p._hoverdata=void 0,s.target&&a&&p.emit("plotly_unhover",{event:s,points:a}))}},98192:function(Y,O){O.u={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},O.c={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},43616:function(Y,O,e){var M=e(33428),A=e(3400),o=A.numberFormat,w=e(38248),_=e(49760),p=e(24040),s=e(76308),n=e(8932),a=A.strTranslate,r=e(72736),i=e(9616),l=e(84284).LINE_SPACING,u=e(13448).DESELECTDIM,c=e(43028),g=e(7152),f=e(10624).appendArrayPointValue,b=Y.exports={};function v(we,_e,oe){var le=_e.fillpattern,pe=le&&b.getPatternAttr(le.shape,0,"");if(pe){var Ee=b.getPatternAttr(le.bgcolor,0,null),Te=b.getPatternAttr(le.fgcolor,0,null),Me=le.fgopacity,Le=b.getPatternAttr(le.size,0,8),Ie=b.getPatternAttr(le.solidity,0,.3),he=_e.uid;b.pattern(we,"point",oe,he,pe,Le,Ie,void 0,le.fillmode,Ee,Te,Me)}else _e.fillcolor&&we.call(s.fill,_e.fillcolor)}b.font=function(we,_e,oe,le){A.isPlainObject(_e)&&(le=_e.color,oe=_e.size,_e=_e.family),_e&&we.style("font-family",_e),oe+1&&we.style("font-size",oe+"px"),le&&we.call(s.fill,le)},b.setPosition=function(we,_e,oe){we.attr("x",_e).attr("y",oe)},b.setSize=function(we,_e,oe){we.attr("width",_e).attr("height",oe)},b.setRect=function(we,_e,oe,le,pe){we.call(b.setPosition,_e,oe).call(b.setSize,le,pe)},b.translatePoint=function(we,_e,oe,le){var pe=oe.c2p(we.x),Ee=le.c2p(we.y);return!!(w(pe)&&w(Ee)&&_e.node())&&(_e.node().nodeName==="text"?_e.attr("x",pe).attr("y",Ee):_e.attr("transform",a(pe,Ee)),!0)},b.translatePoints=function(we,_e,oe){we.each(function(le){var pe=M.select(this);b.translatePoint(le,pe,_e,oe)})},b.hideOutsideRangePoint=function(we,_e,oe,le,pe,Ee){_e.attr("display",oe.isPtWithinRange(we,pe)&&le.isPtWithinRange(we,Ee)?null:"none")},b.hideOutsideRangePoints=function(we,_e){if(_e._hasClipOnAxisFalse){var oe=_e.xaxis,le=_e.yaxis;we.each(function(pe){var Ee=pe[0].trace,Te=Ee.xcalendar,Me=Ee.ycalendar,Le=p.traceIs(Ee,"bar-like")?".bartext":".point,.textpoint";we.selectAll(Le).each(function(Ie){b.hideOutsideRangePoint(Ie,M.select(this),oe,le,Te,Me)})})}},b.crispRound=function(we,_e,oe){return _e&&w(_e)?we._context.staticPlot?_e:_e<1?1:Math.round(_e):oe||0},b.singleLineStyle=function(we,_e,oe,le,pe){_e.style("fill","none");var Ee=(((we||[])[0]||{}).trace||{}).line||{},Te=oe||Ee.width||0,Me=pe||Ee.dash||"";s.stroke(_e,le||Ee.color),b.dashLine(_e,Me,Te)},b.lineGroupStyle=function(we,_e,oe,le){we.style("fill","none").each(function(pe){var Ee=(((pe||[])[0]||{}).trace||{}).line||{},Te=_e||Ee.width||0,Me=le||Ee.dash||"";M.select(this).call(s.stroke,oe||Ee.color).call(b.dashLine,Me,Te)})},b.dashLine=function(we,_e,oe){oe=+oe||0,_e=b.dashStyle(_e,oe),we.style({"stroke-dasharray":_e,"stroke-width":oe+"px"})},b.dashStyle=function(we,_e){_e=+_e||1;var oe=Math.max(_e,3);return we==="solid"?we="":we==="dot"?we=oe+"px,"+oe+"px":we==="dash"?we=3*oe+"px,"+3*oe+"px":we==="longdash"?we=5*oe+"px,"+5*oe+"px":we==="dashdot"?we=3*oe+"px,"+oe+"px,"+oe+"px,"+oe+"px":we==="longdashdot"&&(we=5*oe+"px,"+2*oe+"px,"+oe+"px,"+2*oe+"px"),we},b.singleFillStyle=function(we,_e){var oe=M.select(we.node());v(we,((oe.data()[0]||[])[0]||{}).trace||{},_e)},b.fillGroupStyle=function(we,_e){we.style("stroke-width",0).each(function(oe){var le=M.select(this);oe[0].trace&&v(le,oe[0].trace,_e)})};var d=e(71984);b.symbolNames=[],b.symbolFuncs=[],b.symbolBackOffs=[],b.symbolNeedLines={},b.symbolNoDot={},b.symbolNoFill={},b.symbolList=[],Object.keys(d).forEach(function(we){var _e=d[we],oe=_e.n;b.symbolList.push(oe,String(oe),we,oe+100,String(oe+100),we+"-open"),b.symbolNames[oe]=we,b.symbolFuncs[oe]=_e.f,b.symbolBackOffs[oe]=_e.backoff||0,_e.needLine&&(b.symbolNeedLines[oe]=!0),_e.noDot?b.symbolNoDot[oe]=!0:b.symbolList.push(oe+200,String(oe+200),we+"-dot",oe+300,String(oe+300),we+"-open-dot"),_e.noFill&&(b.symbolNoFill[oe]=!0)});var m=b.symbolNames.length;function x(we,_e,oe,le){var pe=we%100;return b.symbolFuncs[pe](_e,oe,le)+(we>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}b.symbolNumber=function(we){if(w(we))we=+we;else if(typeof we=="string"){var _e=0;we.indexOf("-open")>0&&(_e=100,we=we.replace("-open","")),we.indexOf("-dot")>0&&(_e+=200,we=we.replace("-dot","")),(we=b.symbolNames.indexOf(we))>=0&&(we+=_e)}return we%100>=m||we>=400?0:Math.floor(Math.max(we,0))};var y={x1:1,x2:0,y1:0,y2:0},T={x1:0,x2:0,y1:1,y2:0},h=o("~f"),E={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:y},horizontalreversed:{node:"linearGradient",attrs:y,reversed:!0},vertical:{node:"linearGradient",attrs:T},verticalreversed:{node:"linearGradient",attrs:T,reversed:!0}};b.gradient=function(we,_e,oe,le,pe,Ee){for(var Te=pe.length,Me=E[le],Le=new Array(Te),Ie=0;Ie<Te;Ie++)Me.reversed?Le[Te-1-Ie]=[h(100*(1-pe[Ie][0])),pe[Ie][1]]:Le[Ie]=[h(100*pe[Ie][0]),pe[Ie][1]];var he=_e._fullLayout,xe="g"+he._uid+"-"+oe,ke=he._defs.select(".gradients").selectAll("#"+xe).data([le+Le.join(";")],A.identity);ke.exit().remove(),ke.enter().append(Me.node).each(function(){var ze=M.select(this);Me.attrs&&ze.attr(Me.attrs),ze.attr("id",xe);var Re=ze.selectAll("stop").data(Le);Re.exit().remove(),Re.enter().append("stop"),Re.each(function(Oe){var Ve=_(Oe[1]);M.select(this).attr({offset:Oe[0]+"%","stop-color":s.tinyRGB(Ve),"stop-opacity":Ve.getAlpha()})})}),we.style(Ee,ee(xe,_e)).style(Ee+"-opacity",null),we.classed("gradient_filled",!0)},b.pattern=function(we,_e,oe,le,pe,Ee,Te,Me,Le,Ie,he,xe){var ke=_e==="legend";Me&&(Le==="overlay"?(Ie=Me,he=s.contrast(Ie)):(Ie=void 0,he=Me));var ze,Re,Oe,Ve,qe,Je,ot,rt,dt,_t=oe._fullLayout,yt="p"+_t._uid+"-"+le,et={},nt=_(he),At=s.tinyRGB(nt),Rt=xe*nt.getAlpha();switch(pe){case"/":ze=Ee*Math.sqrt(2),Re=Ee*Math.sqrt(2),Je="path",et={d:Oe="M-"+ze/4+","+Re/4+"l"+ze/2+",-"+Re/2+"M0,"+Re+"L"+ze+",0M"+ze/4*3+","+Re/4*5+"l"+ze/2+",-"+Re/2,opacity:Rt,stroke:At,"stroke-width":(Ve=Te*Ee)+"px"};break;case"\\":ze=Ee*Math.sqrt(2),Re=Ee*Math.sqrt(2),Je="path",et={d:Oe="M"+ze/4*3+",-"+Re/4+"l"+ze/2+","+Re/2+"M0,0L"+ze+","+Re+"M-"+ze/4+","+Re/4*3+"l"+ze/2+","+Re/2,opacity:Rt,stroke:At,"stroke-width":(Ve=Te*Ee)+"px"};break;case"x":ze=Ee*Math.sqrt(2),Re=Ee*Math.sqrt(2),Oe="M-"+ze/4+","+Re/4+"l"+ze/2+",-"+Re/2+"M0,"+Re+"L"+ze+",0M"+ze/4*3+","+Re/4*5+"l"+ze/2+",-"+Re/2+"M"+ze/4*3+",-"+Re/4+"l"+ze/2+","+Re/2+"M0,0L"+ze+","+Re+"M-"+ze/4+","+Re/4*3+"l"+ze/2+","+Re/2,Ve=Ee-Ee*Math.sqrt(1-Te),Je="path",et={d:Oe,opacity:Rt,stroke:At,"stroke-width":Ve+"px"};break;case"|":Je="path",Je="path",et={d:Oe="M"+(ze=Ee)/2+",0L"+ze/2+","+(Re=Ee),opacity:Rt,stroke:At,"stroke-width":(Ve=Te*Ee)+"px"};break;case"-":Je="path",Je="path",et={d:Oe="M0,"+(Re=Ee)/2+"L"+(ze=Ee)+","+Re/2,opacity:Rt,stroke:At,"stroke-width":(Ve=Te*Ee)+"px"};break;case"+":Je="path",Oe="M"+(ze=Ee)/2+",0L"+ze/2+","+(Re=Ee)+"M0,"+Re/2+"L"+ze+","+Re/2,Ve=Ee-Ee*Math.sqrt(1-Te),Je="path",et={d:Oe,opacity:Rt,stroke:At,"stroke-width":Ve+"px"};break;case".":ze=Ee,Re=Ee,Te<Math.PI/4?qe=Math.sqrt(Te*Ee*Ee/Math.PI):(ot=Te,rt=Math.PI/4,qe=(dt=Ee/2)+(Ee/Math.sqrt(2)-dt)*(ot-rt)/(1-rt)),Je="circle",et={cx:ze/2,cy:Re/2,r:qe,opacity:Rt,fill:At}}var Ft=[pe||"noSh",Ie||"noBg",he||"noFg",Ee,Te].join(";"),It=_t._defs.select(".patterns").selectAll("#"+yt).data([Ft],A.identity);It.exit().remove(),It.enter().append("pattern").each(function(){var Ge=M.select(this);if(Ge.attr({id:yt,width:ze+"px",height:Re+"px",patternUnits:"userSpaceOnUse",patternTransform:ke?"scale(0.8)":""}),Ie){var Ye=_(Ie),Ne=s.tinyRGB(Ye),We=Ye.getAlpha(),st=Ge.selectAll("rect").data([0]);st.exit().remove(),st.enter().append("rect").attr({width:ze+"px",height:Re+"px",fill:Ne,"fill-opacity":We})}var it=Ge.selectAll(Je).data([0]);it.exit().remove(),it.enter().append(Je).attr(et)}),we.style("fill",ee(yt,oe)).style("fill-opacity",null),we.classed("pattern_filled",!0)},b.initGradients=function(we){var _e=we._fullLayout;A.ensureSingle(_e._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),M.select(we).selectAll(".gradient_filled").classed("gradient_filled",!1)},b.initPatterns=function(we){var _e=we._fullLayout;A.ensureSingle(_e._defs,"g","patterns").selectAll("pattern").remove(),M.select(we).selectAll(".pattern_filled").classed("pattern_filled",!1)},b.getPatternAttr=function(we,_e,oe){return we&&A.isArrayOrTypedArray(we)?_e<we.length?we[_e]:oe:we},b.pointStyle=function(we,_e,oe,le){if(we.size()){var pe=b.makePointStyleFns(_e);we.each(function(Ee){b.singlePointStyle(Ee,M.select(this),_e,pe,oe,le)})}},b.singlePointStyle=function(we,_e,oe,le,pe,Ee){var Te=oe.marker,Me=Te.line;if(Ee&&Ee.i>=0&&we.i===void 0&&(we.i=Ee.i),_e.style("opacity",le.selectedOpacityFn?le.selectedOpacityFn(we):we.mo===void 0?Te.opacity:we.mo),le.ms2mrc){var Le;Le=we.ms==="various"||Te.size==="various"?3:le.ms2mrc(we.ms),we.mrc=Le,le.selectedSizeFn&&(Le=we.mrc=le.selectedSizeFn(we));var Ie=b.symbolNumber(we.mx||Te.symbol)||0;we.om=Ie%200>=100;var he=Se(we,oe),xe=K(we,oe);_e.attr("d",x(Ie,Le,he,xe))}var ke,ze,Re,Oe=!1;if(we.so)Re=Me.outlierwidth,ze=Me.outliercolor,ke=Te.outliercolor;else{var Ve=(Me||{}).width;Re=(we.mlw+1||Ve+1||(we.trace?(we.trace.marker.line||{}).width:0)+1)-1||0,ze="mlc"in we?we.mlcc=le.lineScale(we.mlc):A.isArrayOrTypedArray(Me.color)?s.defaultLine:Me.color,A.isArrayOrTypedArray(Te.color)&&(ke=s.defaultLine,Oe=!0),ke="mc"in we?we.mcc=le.markerScale(we.mc):Te.color||Te.colors||"rgba(0,0,0,0)",le.selectedColorFn&&(ke=le.selectedColorFn(we))}if(we.om)_e.call(s.stroke,ke).style({"stroke-width":(Re||1)+"px",fill:"none"});else{_e.style("stroke-width",(we.isBlank?0:Re)+"px");var qe=Te.gradient,Je=we.mgt;Je?Oe=!0:Je=qe&&qe.type,A.isArrayOrTypedArray(Je)&&(Je=Je[0],E[Je]||(Je=0));var ot=Te.pattern,rt=ot&&b.getPatternAttr(ot.shape,we.i,"");if(Je&&Je!=="none"){var dt=we.mgc;dt?Oe=!0:dt=qe.color;var _t=oe.uid;Oe&&(_t+="-"+we.i),b.gradient(_e,pe,_t,Je,[[0,dt],[1,ke]],"fill")}else if(rt){var yt=!1,et=ot.fgcolor;!et&&Ee&&Ee.color&&(et=Ee.color,yt=!0);var nt=b.getPatternAttr(et,we.i,Ee&&Ee.color||null),At=b.getPatternAttr(ot.bgcolor,we.i,null),Rt=ot.fgopacity,Ft=b.getPatternAttr(ot.size,we.i,8),It=b.getPatternAttr(ot.solidity,we.i,.3);yt=yt||we.mcc||A.isArrayOrTypedArray(ot.shape)||A.isArrayOrTypedArray(ot.bgcolor)||A.isArrayOrTypedArray(ot.fgcolor)||A.isArrayOrTypedArray(ot.size)||A.isArrayOrTypedArray(ot.solidity);var Ge=oe.uid;yt&&(Ge+="-"+we.i),b.pattern(_e,"point",pe,Ge,rt,Ft,It,we.mcc,ot.fillmode,At,nt,Rt)}else A.isArrayOrTypedArray(ke)?s.fill(_e,ke[we.i]):s.fill(_e,ke);Re&&s.stroke(_e,ze)}},b.makePointStyleFns=function(we){var _e={},oe=we.marker;return _e.markerScale=b.tryColorscale(oe,""),_e.lineScale=b.tryColorscale(oe,"line"),p.traceIs(we,"symbols")&&(_e.ms2mrc=c.isBubble(we)?g(we):function(){return(oe.size||6)/2}),we.selectedpoints&&A.extendFlat(_e,b.makeSelectedPointStyleFns(we)),_e},b.makeSelectedPointStyleFns=function(we){var _e={},oe=we.selected||{},le=we.unselected||{},pe=we.marker||{},Ee=oe.marker||{},Te=le.marker||{},Me=pe.opacity,Le=Ee.opacity,Ie=Te.opacity,he=Le!==void 0,xe=Ie!==void 0;(A.isArrayOrTypedArray(Me)||he||xe)&&(_e.selectedOpacityFn=function(rt){var dt=rt.mo===void 0?pe.opacity:rt.mo;return rt.selected?he?Le:dt:xe?Ie:u*dt});var ke=pe.color,ze=Ee.color,Re=Te.color;(ze||Re)&&(_e.selectedColorFn=function(rt){var dt=rt.mcc||ke;return rt.selected?ze||dt:Re||dt});var Oe=pe.size,Ve=Ee.size,qe=Te.size,Je=Ve!==void 0,ot=qe!==void 0;return p.traceIs(we,"symbols")&&(Je||ot)&&(_e.selectedSizeFn=function(rt){var dt=rt.mrc||Oe/2;return rt.selected?Je?Ve/2:dt:ot?qe/2:dt}),_e},b.makeSelectedTextStyleFns=function(we){var _e={},oe=we.selected||{},le=we.unselected||{},pe=we.textfont||{},Ee=oe.textfont||{},Te=le.textfont||{},Me=pe.color,Le=Ee.color,Ie=Te.color;return _e.selectedTextColorFn=function(he){var xe=he.tc||Me;return he.selected?Le||xe:Ie||(Le?xe:s.addOpacity(xe,u))},_e},b.selectedPointStyle=function(we,_e){if(we.size()&&_e.selectedpoints){var oe=b.makeSelectedPointStyleFns(_e),le=_e.marker||{},pe=[];oe.selectedOpacityFn&&pe.push(function(Ee,Te){Ee.style("opacity",oe.selectedOpacityFn(Te))}),oe.selectedColorFn&&pe.push(function(Ee,Te){s.fill(Ee,oe.selectedColorFn(Te))}),oe.selectedSizeFn&&pe.push(function(Ee,Te){var Me=Te.mx||le.symbol||0,Le=oe.selectedSizeFn(Te);Ee.attr("d",x(b.symbolNumber(Me),Le,Se(Te,_e),K(Te,_e))),Te.mrc2=Le}),pe.length&&we.each(function(Ee){for(var Te=M.select(this),Me=0;Me<pe.length;Me++)pe[Me](Te,Ee)})}},b.tryColorscale=function(we,_e){var oe=_e?A.nestedProperty(we,_e).get():we;if(oe){var le=oe.color;if((oe.colorscale||oe._colorAx)&&A.isArrayOrTypedArray(le))return n.makeColorScaleFuncFromTrace(oe)}return A.identity};var k,L,P={start:1,end:-1,middle:0,bottom:1,top:-1};function I(we,_e,oe,le,pe){var Ee=M.select(we.node().parentNode),Te=_e.indexOf("top")!==-1?"top":_e.indexOf("bottom")!==-1?"bottom":"middle",Me=_e.indexOf("left")!==-1?"end":_e.indexOf("right")!==-1?"start":"middle",Le=le?le/.8+1:0,Ie=(r.lineCount(we)-1)*l+1,he=P[Me]*Le,xe=.75*oe+P[Te]*Le+(P[Te]-1)*Ie*oe/2;we.attr("text-anchor",Me),pe||Ee.attr("transform",a(he,xe))}function z(we,_e){var oe=we.ts||_e.textfont.size;return w(oe)&&oe>0?oe:0}function F(we,_e,oe){return oe&&(we=q(we)),_e?R(we[1]):U(we[0])}function U(we){var _e=M.round(we,2);return k=_e,_e}function R(we){var _e=M.round(we,2);return L=_e,_e}function j(we,_e,oe,le){var pe=we[0]-_e[0],Ee=we[1]-_e[1],Te=oe[0]-_e[0],Me=oe[1]-_e[1],Le=Math.pow(pe*pe+Ee*Ee,.25),Ie=Math.pow(Te*Te+Me*Me,.25),he=(Ie*Ie*pe-Le*Le*Te)*le,xe=(Ie*Ie*Ee-Le*Le*Me)*le,ke=3*Ie*(Le+Ie),ze=3*Le*(Le+Ie);return[[U(_e[0]+(ke&&he/ke)),R(_e[1]+(ke&&xe/ke))],[U(_e[0]-(ze&&he/ze)),R(_e[1]-(ze&&xe/ze))]]}b.textPointStyle=function(we,_e,oe){if(we.size()){var le;if(_e.selectedpoints){var pe=b.makeSelectedTextStyleFns(_e);le=pe.selectedTextColorFn}var Ee=_e.texttemplate,Te=oe._fullLayout;we.each(function(Me){var Le=M.select(this),Ie=Ee?A.extractOption(Me,_e,"txt","texttemplate"):A.extractOption(Me,_e,"tx","text");if(Ie||Ie===0){if(Ee){var he=_e._module.formatLabels,xe=he?he(Me,_e,Te):{},ke={};f(ke,_e,Me.i);var ze=_e._meta||{};Ie=A.texttemplateString(Ie,xe,Te._d3locale,ke,Me,ze)}var Re=Me.tp||_e.textposition,Oe=z(Me,_e),Ve=le?le(Me):Me.tc||_e.textfont.color;Le.call(b.font,Me.tf||_e.textfont.family,Oe,Ve).text(Ie).call(r.convertToTspans,oe).call(I,Re,Oe,Me.mrc)}else Le.remove()})}},b.selectedTextStyle=function(we,_e){if(we.size()&&_e.selectedpoints){var oe=b.makeSelectedTextStyleFns(_e);we.each(function(le){var pe=M.select(this),Ee=oe.selectedTextColorFn(le),Te=le.tp||_e.textposition,Me=z(le,_e);s.fill(pe,Ee);var Le=p.traceIs(_e,"bar-like");I(pe,Te,Me,le.mrc2||le.mrc,Le)})}},b.smoothopen=function(we,_e){if(we.length<3)return"M"+we.join("L");var oe,le="M"+we[0],pe=[];for(oe=1;oe<we.length-1;oe++)pe.push(j(we[oe-1],we[oe],we[oe+1],_e));for(le+="Q"+pe[0][0]+" "+we[1],oe=2;oe<we.length-1;oe++)le+="C"+pe[oe-2][1]+" "+pe[oe-1][0]+" "+we[oe];return le+"Q"+pe[we.length-3][1]+" "+we[we.length-1]},b.smoothclosed=function(we,_e){if(we.length<3)return"M"+we.join("L")+"Z";var oe,le="M"+we[0],pe=we.length-1,Ee=[j(we[pe],we[0],we[1],_e)];for(oe=1;oe<pe;oe++)Ee.push(j(we[oe-1],we[oe],we[oe+1],_e));for(Ee.push(j(we[pe-1],we[pe],we[0],_e)),oe=1;oe<=pe;oe++)le+="C"+Ee[oe-1][1]+" "+Ee[oe][0]+" "+we[oe];return le+"C"+Ee[pe][1]+" "+Ee[0][0]+" "+we[0]+"Z"};var Z={hv:function(we,_e,oe){return"H"+U(_e[0])+"V"+F(_e,1,oe)},vh:function(we,_e,oe){return"V"+R(_e[1])+"H"+F(_e,0,oe)},hvh:function(we,_e,oe){return"H"+U((we[0]+_e[0])/2)+"V"+R(_e[1])+"H"+F(_e,0,oe)},vhv:function(we,_e,oe){return"V"+R((we[1]+_e[1])/2)+"H"+U(_e[0])+"V"+F(_e,1,oe)}},B=function(we,_e,oe){return"L"+F(_e,0,oe)+","+F(_e,1,oe)};function q(we,_e){var oe=we.backoff,le=we.trace,pe=we.d,Ee=we.i;if(oe&&le&&le.marker&&le.marker.angle%360==0&&le.line&&le.line.shape!=="spline"){var Te=A.isArrayOrTypedArray(oe),Me=we,Le=_e?_e[0]:k||0,Ie=_e?_e[1]:L||0,he=Me[0],xe=Me[1],ke=he-Le,ze=xe-Ie,Re=Math.atan2(ze,ke),Oe=Te?oe[Ee]:oe;if(Oe==="auto"){var Ve=Me.i;le.type==="scatter"&&Ve--;var qe=Me.marker,Je=qe.symbol;A.isArrayOrTypedArray(Je)&&(Je=Je[Ve]);var ot=qe.size;A.isArrayOrTypedArray(ot)&&(ot=ot[Ve]),Oe=qe?b.symbolBackOffs[b.symbolNumber(Je)]*ot:0,Oe+=b.getMarkerStandoff(pe[Ve],le)||0}var rt=he-Oe*Math.cos(Re),dt=xe-Oe*Math.sin(Re);(rt<=he&&rt>=Le||rt>=he&&rt<=Le)&&(dt<=xe&&dt>=Ie||dt>=xe&&dt<=Ie)&&(we=[rt,dt])}return we}b.steps=function(we){var _e=Z[we]||B;return function(oe){for(var le="M"+U(oe[0][0])+","+R(oe[0][1]),pe=oe.length,Ee=1;Ee<pe;Ee++)le+=_e(oe[Ee-1],oe[Ee],Ee===pe-1);return le}},b.applyBackoff=q,b.makeTester=function(){var we=A.ensureSingleById(M.select("body"),"svg","js-plotly-tester",function(oe){oe.attr(i.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),_e=A.ensureSingle(we,"path","js-reference-point",function(oe){oe.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});b.tester=we,b.testref=_e},b.savedBBoxes={};var V=0;function ne(we){var _e=we.getAttribute("data-unformatted");if(_e!==null)return _e+we.getAttribute("data-math")+we.getAttribute("text-anchor")+we.getAttribute("style")}function ee(we,_e){if(!we)return null;var oe=_e._context,le=oe._exportedPlot?"":oe._baseUrl||"";return le?"url('"+le+"#"+we+"')":"url(#"+we+")"}b.bBox=function(we,_e,oe){var le,pe,Ee;if(oe||(oe=ne(we)),oe){if(le=b.savedBBoxes[oe])return A.extendFlat({},le)}else if(we.childNodes.length===1){var Te=we.childNodes[0];if(oe=ne(Te)){var Me=+Te.getAttribute("x")||0,Le=+Te.getAttribute("y")||0,Ie=Te.getAttribute("transform");if(!Ie){var he=b.bBox(Te,!1,oe);return Me&&(he.left+=Me,he.right+=Me),Le&&(he.top+=Le,he.bottom+=Le),he}if(oe+="~"+Me+"~"+Le+"~"+Ie,le=b.savedBBoxes[oe])return A.extendFlat({},le)}}_e?pe=we:(Ee=b.tester.node(),pe=we.cloneNode(!0),Ee.appendChild(pe)),M.select(pe).attr("transform",null).call(r.positionText,0,0);var xe=pe.getBoundingClientRect(),ke=b.testref.node().getBoundingClientRect();_e||Ee.removeChild(pe);var ze={height:xe.height,width:xe.width,left:xe.left-ke.left,top:xe.top-ke.top,right:xe.right-ke.left,bottom:xe.bottom-ke.top};return V>=1e4&&(b.savedBBoxes={},V=0),oe&&(b.savedBBoxes[oe]=ze),V++,A.extendFlat({},ze)},b.setClipUrl=function(we,_e,oe){we.attr("clip-path",ee(_e,oe))},b.getTranslate=function(we){var _e=(we[we.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(oe,le,pe){return[le,pe].join(" ")}).split(" ");return{x:+_e[0]||0,y:+_e[1]||0}},b.setTranslate=function(we,_e,oe){var le=we.attr?"attr":"getAttribute",pe=we.attr?"attr":"setAttribute",Ee=we[le]("transform")||"";return _e=_e||0,oe=oe||0,Ee=Ee.replace(/(\btranslate\(.*?\);?)/,"").trim(),Ee=(Ee+=a(_e,oe)).trim(),we[pe]("transform",Ee),Ee},b.getScale=function(we){var _e=(we[we.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(oe,le,pe){return[le,pe].join(" ")}).split(" ");return{x:+_e[0]||1,y:+_e[1]||1}},b.setScale=function(we,_e,oe){var le=we.attr?"attr":"getAttribute",pe=we.attr?"attr":"setAttribute",Ee=we[le]("transform")||"";return _e=_e||1,oe=oe||1,Ee=Ee.replace(/(\bscale\(.*?\);?)/,"").trim(),Ee=(Ee+="scale("+_e+","+oe+")").trim(),we[pe]("transform",Ee),Ee};var $=/\s*sc.*/;b.setPointGroupScale=function(we,_e,oe){if(_e=_e||1,oe=oe||1,we){var le=_e===1&&oe===1?"":"scale("+_e+","+oe+")";we.each(function(){var pe=(this.getAttribute("transform")||"").replace($,"");pe=(pe+=le).trim(),this.setAttribute("transform",pe)})}};var J=/translate\([^)]*\)\s*$/;function K(we,_e){var oe;return we&&(oe=we.mf),oe===void 0&&(oe=_e.marker&&_e.marker.standoff||0),_e._geo||_e._xA?oe:-oe}b.setTextPointsScale=function(we,_e,oe){we&&we.each(function(){var le,pe=M.select(this),Ee=pe.select("text");if(Ee.node()){var Te=parseFloat(Ee.attr("x")||0),Me=parseFloat(Ee.attr("y")||0),Le=(pe.attr("transform")||"").match(J);le=_e===1&&oe===1?[]:[a(Te,Me),"scale("+_e+","+oe+")",a(-Te,-Me)],Le&&le.push(Le),pe.attr("transform",le.join(""))}})},b.getMarkerStandoff=K;var te,ie,ae,se,ce,de,ge=Math.atan2,ve=Math.cos,be=Math.sin;function me(we,_e){var oe=_e[0],le=_e[1];return[oe*ve(we)-le*be(we),oe*be(we)+le*ve(we)]}function Se(we,_e){var oe,le,pe=we.ma;pe===void 0&&((pe=_e.marker.angle)&&!A.isArrayOrTypedArray(pe)||(pe=0));var Ee=_e.marker.angleref;if(Ee==="previous"||Ee==="north"){if(_e._geo){var Te=_e._geo.project(we.lonlat);oe=Te[0],le=Te[1]}else{var Me=_e._xA,Le=_e._yA;if(!Me||!Le)return 90;oe=Me.c2p(we.x),le=Le.c2p(we.y)}if(_e._geo){var Ie,he=we.lonlat[0],xe=we.lonlat[1],ke=_e._geo.project([he,xe+1e-5]),ze=_e._geo.project([he+1e-5,xe]),Re=ge(ze[1]-le,ze[0]-oe),Oe=ge(ke[1]-le,ke[0]-oe);if(Ee==="north")Ie=pe/180*Math.PI;else if(Ee==="previous"){var Ve=he/180*Math.PI,qe=xe/180*Math.PI,Je=te/180*Math.PI,ot=ie/180*Math.PI,rt=Je-Ve,dt=ve(ot)*be(rt),_t=be(ot)*ve(qe)-ve(ot)*be(qe)*ve(rt);Ie=-ge(dt,_t)-Math.PI,te=he,ie=xe}var yt=me(Re,[ve(Ie),0]),et=me(Oe,[be(Ie),0]);pe=ge(yt[1]+et[1],yt[0]+et[0])/Math.PI*180,Ee!=="previous"||de===_e.uid&&we.i===ce+1||(pe=null)}if(Ee==="previous"&&!_e._geo)if(de===_e.uid&&we.i===ce+1&&w(oe)&&w(le)){var nt=oe-ae,At=le-se,Rt=_e.line&&_e.line.shape||"",Ft=Rt.slice(Rt.length-1);Ft==="h"&&(At=0),Ft==="v"&&(nt=0),pe+=ge(At,nt)/Math.PI*180+90}else pe=null}return ae=oe,se=le,ce=we.i,de=_e.uid,pe}b.getMarkerAngle=Se},71984:function(Y,O,e){var M,A,o,w,_=e(21984),p=e(33428).round,s="M0,0Z",n=Math.sqrt(2),a=Math.sqrt(3),r=Math.PI,i=Math.cos,l=Math.sin;function u(g){return g===null}function c(g,f,b){if(!(g&&g%360!=0||f))return b;if(o===g&&w===f&&M===b)return A;function v(F,U){var R=i(F),j=l(F),Z=U[0],B=U[1]+(f||0);return[Z*R-B*j,Z*j+B*R]}o=g,w=f,M=b;for(var d=g/180*r,m=0,x=0,y=_(b),T="",h=0;h<y.length;h++){var E=y[h],k=E[0],L=m,P=x;if(k==="M"||k==="L")m=+E[1],x=+E[2];else if(k==="m"||k==="l")m+=+E[1],x+=+E[2];else if(k==="H")m=+E[1];else if(k==="h")m+=+E[1];else if(k==="V")x=+E[1];else if(k==="v")x+=+E[1];else if(k==="A"){m=+E[1],x=+E[2];var I=v(d,[+E[6],+E[7]]);E[6]=I[0],E[7]=I[1],E[3]=+E[3]+g}k!=="H"&&k!=="V"||(k="L"),k!=="h"&&k!=="v"||(k="l"),k!=="m"&&k!=="l"||(m-=L,x-=P);var z=v(d,[m,x]);k!=="H"&&k!=="V"||(k="L"),k!=="M"&&k!=="L"&&k!=="m"&&k!=="l"||(E[1]=z[0],E[2]=z[1]),E[0]=k,T+=E[0]+E.slice(1).join(",")}return A=T,T}Y.exports={circle:{n:0,f:function(g,f,b){if(u(f))return s;var v=p(g,2),d="M"+v+",0A"+v+","+v+" 0 1,1 0,-"+v+"A"+v+","+v+" 0 0,1 "+v+",0Z";return b?c(f,b,d):d}},square:{n:1,f:function(g,f,b){if(u(f))return s;var v=p(g,2);return c(f,b,"M"+v+","+v+"H-"+v+"V-"+v+"H"+v+"Z")}},diamond:{n:2,f:function(g,f,b){if(u(f))return s;var v=p(1.3*g,2);return c(f,b,"M"+v+",0L0,"+v+"L-"+v+",0L0,-"+v+"Z")}},cross:{n:3,f:function(g,f,b){if(u(f))return s;var v=p(.4*g,2),d=p(1.2*g,2);return c(f,b,"M"+d+","+v+"H"+v+"V"+d+"H-"+v+"V"+v+"H-"+d+"V-"+v+"H-"+v+"V-"+d+"H"+v+"V-"+v+"H"+d+"Z")}},x:{n:4,f:function(g,f,b){if(u(f))return s;var v=p(.8*g/n,2),d="l"+v+","+v,m="l"+v+",-"+v,x="l-"+v+",-"+v,y="l-"+v+","+v;return c(f,b,"M0,"+v+d+m+x+m+x+y+x+y+d+y+d+"Z")}},"triangle-up":{n:5,f:function(g,f,b){if(u(f))return s;var v=p(2*g/a,2);return c(f,b,"M-"+v+","+p(g/2,2)+"H"+v+"L0,-"+p(g,2)+"Z")}},"triangle-down":{n:6,f:function(g,f,b){if(u(f))return s;var v=p(2*g/a,2);return c(f,b,"M-"+v+",-"+p(g/2,2)+"H"+v+"L0,"+p(g,2)+"Z")}},"triangle-left":{n:7,f:function(g,f,b){if(u(f))return s;var v=p(2*g/a,2);return c(f,b,"M"+p(g/2,2)+",-"+v+"V"+v+"L-"+p(g,2)+",0Z")}},"triangle-right":{n:8,f:function(g,f,b){if(u(f))return s;var v=p(2*g/a,2);return c(f,b,"M-"+p(g/2,2)+",-"+v+"V"+v+"L"+p(g,2)+",0Z")}},"triangle-ne":{n:9,f:function(g,f,b){if(u(f))return s;var v=p(.6*g,2),d=p(1.2*g,2);return c(f,b,"M-"+d+",-"+v+"H"+v+"V"+d+"Z")}},"triangle-se":{n:10,f:function(g,f,b){if(u(f))return s;var v=p(.6*g,2),d=p(1.2*g,2);return c(f,b,"M"+v+",-"+d+"V"+v+"H-"+d+"Z")}},"triangle-sw":{n:11,f:function(g,f,b){if(u(f))return s;var v=p(.6*g,2),d=p(1.2*g,2);return c(f,b,"M"+d+","+v+"H-"+v+"V-"+d+"Z")}},"triangle-nw":{n:12,f:function(g,f,b){if(u(f))return s;var v=p(.6*g,2),d=p(1.2*g,2);return c(f,b,"M-"+v+","+d+"V-"+v+"H"+d+"Z")}},pentagon:{n:13,f:function(g,f,b){if(u(f))return s;var v=p(.951*g,2),d=p(.588*g,2),m=p(-g,2),x=p(-.309*g,2);return c(f,b,"M"+v+","+x+"L"+d+","+p(.809*g,2)+"H-"+d+"L-"+v+","+x+"L0,"+m+"Z")}},hexagon:{n:14,f:function(g,f,b){if(u(f))return s;var v=p(g,2),d=p(g/2,2),m=p(g*a/2,2);return c(f,b,"M"+m+",-"+d+"V"+d+"L0,"+v+"L-"+m+","+d+"V-"+d+"L0,-"+v+"Z")}},hexagon2:{n:15,f:function(g,f,b){if(u(f))return s;var v=p(g,2),d=p(g/2,2),m=p(g*a/2,2);return c(f,b,"M-"+d+","+m+"H"+d+"L"+v+",0L"+d+",-"+m+"H-"+d+"L-"+v+",0Z")}},octagon:{n:16,f:function(g,f,b){if(u(f))return s;var v=p(.924*g,2),d=p(.383*g,2);return c(f,b,"M-"+d+",-"+v+"H"+d+"L"+v+",-"+d+"V"+d+"L"+d+","+v+"H-"+d+"L-"+v+","+d+"V-"+d+"Z")}},star:{n:17,f:function(g,f,b){if(u(f))return s;var v=1.4*g,d=p(.225*v,2),m=p(.951*v,2),x=p(.363*v,2),y=p(.588*v,2),T=p(-v,2),h=p(-.309*v,2),E=p(.118*v,2),k=p(.809*v,2);return c(f,b,"M"+d+","+h+"H"+m+"L"+x+","+E+"L"+y+","+k+"L0,"+p(.382*v,2)+"L-"+y+","+k+"L-"+x+","+E+"L-"+m+","+h+"H-"+d+"L0,"+T+"Z")}},hexagram:{n:18,f:function(g,f,b){if(u(f))return s;var v=p(.66*g,2),d=p(.38*g,2),m=p(.76*g,2);return c(f,b,"M-"+m+",0l-"+d+",-"+v+"h"+m+"l"+d+",-"+v+"l"+d+","+v+"h"+m+"l-"+d+","+v+"l"+d+","+v+"h-"+m+"l-"+d+","+v+"l-"+d+",-"+v+"h-"+m+"Z")}},"star-triangle-up":{n:19,f:function(g,f,b){if(u(f))return s;var v=p(g*a*.8,2),d=p(.8*g,2),m=p(1.6*g,2),x=p(4*g,2),y="A "+x+","+x+" 0 0 1 ";return c(f,b,"M-"+v+","+d+y+v+","+d+y+"0,-"+m+y+"-"+v+","+d+"Z")}},"star-triangle-down":{n:20,f:function(g,f,b){if(u(f))return s;var v=p(g*a*.8,2),d=p(.8*g,2),m=p(1.6*g,2),x=p(4*g,2),y="A "+x+","+x+" 0 0 1 ";return c(f,b,"M"+v+",-"+d+y+"-"+v+",-"+d+y+"0,"+m+y+v+",-"+d+"Z")}},"star-square":{n:21,f:function(g,f,b){if(u(f))return s;var v=p(1.1*g,2),d=p(2*g,2),m="A "+d+","+d+" 0 0 1 ";return c(f,b,"M-"+v+",-"+v+m+"-"+v+","+v+m+v+","+v+m+v+",-"+v+m+"-"+v+",-"+v+"Z")}},"star-diamond":{n:22,f:function(g,f,b){if(u(f))return s;var v=p(1.4*g,2),d=p(1.9*g,2),m="A "+d+","+d+" 0 0 1 ";return c(f,b,"M-"+v+",0"+m+"0,"+v+m+v+",0"+m+"0,-"+v+m+"-"+v+",0Z")}},"diamond-tall":{n:23,f:function(g,f,b){if(u(f))return s;var v=p(.7*g,2),d=p(1.4*g,2);return c(f,b,"M0,"+d+"L"+v+",0L0,-"+d+"L-"+v+",0Z")}},"diamond-wide":{n:24,f:function(g,f,b){if(u(f))return s;var v=p(1.4*g,2),d=p(.7*g,2);return c(f,b,"M0,"+d+"L"+v+",0L0,-"+d+"L-"+v+",0Z")}},hourglass:{n:25,f:function(g,f,b){if(u(f))return s;var v=p(g,2);return c(f,b,"M"+v+","+v+"H-"+v+"L"+v+",-"+v+"H-"+v+"Z")},noDot:!0},bowtie:{n:26,f:function(g,f,b){if(u(f))return s;var v=p(g,2);return c(f,b,"M"+v+","+v+"V-"+v+"L-"+v+","+v+"V-"+v+"Z")},noDot:!0},"circle-cross":{n:27,f:function(g,f,b){if(u(f))return s;var v=p(g,2);return c(f,b,"M0,"+v+"V-"+v+"M"+v+",0H-"+v+"M"+v+",0A"+v+","+v+" 0 1,1 0,-"+v+"A"+v+","+v+" 0 0,1 "+v+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(g,f,b){if(u(f))return s;var v=p(g,2),d=p(g/n,2);return c(f,b,"M"+d+","+d+"L-"+d+",-"+d+"M"+d+",-"+d+"L-"+d+","+d+"M"+v+",0A"+v+","+v+" 0 1,1 0,-"+v+"A"+v+","+v+" 0 0,1 "+v+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(g,f,b){if(u(f))return s;var v=p(g,2);return c(f,b,"M0,"+v+"V-"+v+"M"+v+",0H-"+v+"M"+v+","+v+"H-"+v+"V-"+v+"H"+v+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(g,f,b){if(u(f))return s;var v=p(g,2);return c(f,b,"M"+v+","+v+"L-"+v+",-"+v+"M"+v+",-"+v+"L-"+v+","+v+"M"+v+","+v+"H-"+v+"V-"+v+"H"+v+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(g,f,b){if(u(f))return s;var v=p(1.3*g,2);return c(f,b,"M"+v+",0L0,"+v+"L-"+v+",0L0,-"+v+"ZM0,-"+v+"V"+v+"M-"+v+",0H"+v)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(g,f,b){if(u(f))return s;var v=p(1.3*g,2),d=p(.65*g,2);return c(f,b,"M"+v+",0L0,"+v+"L-"+v+",0L0,-"+v+"ZM-"+d+",-"+d+"L"+d+","+d+"M-"+d+","+d+"L"+d+",-"+d)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(g,f,b){if(u(f))return s;var v=p(1.4*g,2);return c(f,b,"M0,"+v+"V-"+v+"M"+v+",0H-"+v)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(g,f,b){if(u(f))return s;var v=p(g,2);return c(f,b,"M"+v+","+v+"L-"+v+",-"+v+"M"+v+",-"+v+"L-"+v+","+v)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(g,f,b){if(u(f))return s;var v=p(1.2*g,2),d=p(.85*g,2);return c(f,b,"M0,"+v+"V-"+v+"M"+v+",0H-"+v+"M"+d+","+d+"L-"+d+",-"+d+"M"+d+",-"+d+"L-"+d+","+d)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(g,f,b){if(u(f))return s;var v=p(g/2,2),d=p(g,2);return c(f,b,"M"+v+","+d+"V-"+d+"M"+(v-d)+",-"+d+"V"+d+"M"+d+","+v+"H-"+d+"M-"+d+","+(v-d)+"H"+d)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(g,f,b){if(u(f))return s;var v=p(1.2*g,2),d=p(1.6*g,2),m=p(.8*g,2);return c(f,b,"M-"+v+","+m+"L0,0M"+v+","+m+"L0,0M0,-"+d+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(g,f,b){if(u(f))return s;var v=p(1.2*g,2),d=p(1.6*g,2),m=p(.8*g,2);return c(f,b,"M-"+v+",-"+m+"L0,0M"+v+",-"+m+"L0,0M0,"+d+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(g,f,b){if(u(f))return s;var v=p(1.2*g,2),d=p(1.6*g,2),m=p(.8*g,2);return c(f,b,"M"+m+","+v+"L0,0M"+m+",-"+v+"L0,0M-"+d+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(g,f,b){if(u(f))return s;var v=p(1.2*g,2),d=p(1.6*g,2),m=p(.8*g,2);return c(f,b,"M-"+m+","+v+"L0,0M-"+m+",-"+v+"L0,0M"+d+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(g,f,b){if(u(f))return s;var v=p(1.4*g,2);return c(f,b,"M"+v+",0H-"+v)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(g,f,b){if(u(f))return s;var v=p(1.4*g,2);return c(f,b,"M0,"+v+"V-"+v)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(g,f,b){if(u(f))return s;var v=p(g,2);return c(f,b,"M"+v+",-"+v+"L-"+v+","+v)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(g,f,b){if(u(f))return s;var v=p(g,2);return c(f,b,"M"+v+","+v+"L-"+v+",-"+v)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(g,f,b){if(u(f))return s;var v=p(g,2);return c(f,b,"M0,0L-"+v+","+p(2*g,2)+"H"+v+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(g,f,b){if(u(f))return s;var v=p(g,2);return c(f,b,"M0,0L-"+v+",-"+p(2*g,2)+"H"+v+"Z")},noDot:!0},"arrow-left":{n:47,f:function(g,f,b){if(u(f))return s;var v=p(2*g,2),d=p(g,2);return c(f,b,"M0,0L"+v+",-"+d+"V"+d+"Z")},noDot:!0},"arrow-right":{n:48,f:function(g,f,b){if(u(f))return s;var v=p(2*g,2),d=p(g,2);return c(f,b,"M0,0L-"+v+",-"+d+"V"+d+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(g,f,b){if(u(f))return s;var v=p(g,2);return c(f,b,"M-"+v+",0H"+v+"M0,0L-"+v+","+p(2*g,2)+"H"+v+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(g,f,b){if(u(f))return s;var v=p(g,2);return c(f,b,"M-"+v+",0H"+v+"M0,0L-"+v+",-"+p(2*g,2)+"H"+v+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(g,f,b){if(u(f))return s;var v=p(2*g,2),d=p(g,2);return c(f,b,"M0,-"+d+"V"+d+"M0,0L"+v+",-"+d+"V"+d+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(g,f,b){if(u(f))return s;var v=p(2*g,2),d=p(g,2);return c(f,b,"M0,-"+d+"V"+d+"M0,0L-"+v+",-"+d+"V"+d+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(g,f,b){if(u(f))return s;var v=r/2.5,d=2*g*i(v),m=2*g*l(v);return c(f,b,"M0,0L"+-d+","+m+"L"+d+","+m+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(g,f,b){if(u(f))return s;var v=r/4,d=2*g*i(v),m=2*g*l(v);return c(f,b,"M0,0L"+-d+","+m+"A "+2*g+","+2*g+" 0 0 1 "+d+","+m+"Z")},backoff:.4,noDot:!0}}},97644:function(Y){Y.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},14880:function(Y,O,e){var M=e(38248),A=e(24040),o=e(54460),w=e(3400),_=e(93792);function p(s,n,a,r){var i=n["error_"+r]||{},l=[];if(i.visible&&["linear","log"].indexOf(a.type)!==-1){for(var u=_(i),c=0;c<s.length;c++){var g=s[c],f=g.i;if(f===void 0)f=c;else if(f===null)continue;var b=g[r];if(M(a.c2l(b))){var v=u(b,f);if(M(v[0])&&M(v[1])){var d=g[r+"s"]=b-v[0],m=g[r+"h"]=b+v[1];l.push(d,m)}}}var x=a._id,y=n._extremes[x],T=o.findExtremes(a,l,w.extendFlat({tozero:y.opts.tozero},{padded:!0}));y.min=y.min.concat(T.min),y.max=y.max.concat(T.max)}}Y.exports=function(s){for(var n=s.calcdata,a=0;a<n.length;a++){var r=n[a],i=r[0].trace;if(i.visible===!0&&A.traceIs(i,"errorBarsOK")){var l=o.getFromId(s,i.xaxis),u=o.getFromId(s,i.yaxis);p(r,i,l,"x"),p(r,i,u,"y")}}}},93792:function(Y){function O(e,M){return e==="percent"?function(A){return Math.abs(A*M/100)}:e==="constant"?function(){return Math.abs(M)}:e==="sqrt"?function(A){return Math.sqrt(Math.abs(A))}:void 0}Y.exports=function(e){var M=e.type,A=e.symmetric;if(M==="data"){var o=e.array||[];if(A)return function(s,n){var a=+o[n];return[a,a]};var w=e.arrayminus||[];return function(s,n){var a=+o[n],r=+w[n];return isNaN(a)&&isNaN(r)?[NaN,NaN]:[r||0,a||0]}}var _=O(M,e.value),p=O(M,e.valueminus);return A||e.valueminus===void 0?function(s){var n=_(s);return[n,n]}:function(s){return[p(s),_(s)]}}},65200:function(Y,O,e){var M=e(38248),A=e(24040),o=e(3400),w=e(31780),_=e(97644);Y.exports=function(p,s,n,a){var r="error_"+a.axis,i=w.newContainer(s,r),l=p[r]||{};function u(b,v){return o.coerce(l,i,_,b,v)}if(u("visible",l.array!==void 0||l.value!==void 0||l.type==="sqrt")!==!1){var c=u("type","array"in l?"data":"percent"),g=!0;c!=="sqrt"&&(g=u("symmetric",!((c==="data"?"arrayminus":"valueminus")in l))),c==="data"?(u("array"),u("traceref"),g||(u("arrayminus"),u("tracerefminus"))):c!=="percent"&&c!=="constant"||(u("value"),g||u("valueminus"));var f="copy_"+a.inherit+"style";a.inherit&&(s["error_"+a.inherit]||{}).visible&&u(f,!(l.color||M(l.thickness)||M(l.width))),a.inherit&&i[f]||(u("color",n),u("thickness"),u("width",A.traceIs(s,"gl3d")?0:4))}}},64968:function(Y,O,e){var M=e(3400),A=e(67824).overrideAll,o=e(97644),w={error_x:M.extendFlat({},o),error_y:M.extendFlat({},o)};delete w.error_x.copy_zstyle,delete w.error_y.copy_zstyle,delete w.error_y.copy_ystyle;var _={error_x:M.extendFlat({},o),error_y:M.extendFlat({},o),error_z:M.extendFlat({},o)};delete _.error_x.copy_ystyle,delete _.error_y.copy_ystyle,delete _.error_z.copy_ystyle,delete _.error_z.copy_zstyle,Y.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:w,bar:w,histogram:w,scatter3d:A(_,"calc","nested"),scattergl:A(w,"calc","nested")}},supplyDefaults:e(65200),calc:e(14880),makeComputeError:e(93792),plot:e(78512),style:e(92036),hoverInfo:function(p,s,n){(s.error_y||{}).visible&&(n.yerr=p.yh-p.y,s.error_y.symmetric||(n.yerrneg=p.y-p.ys)),(s.error_x||{}).visible&&(n.xerr=p.xh-p.x,s.error_x.symmetric||(n.xerrneg=p.x-p.xs))}}},78512:function(Y,O,e){var M=e(33428),A=e(38248),o=e(43616),w=e(43028);Y.exports=function(_,p,s,n){var a=s.xaxis,r=s.yaxis,i=n&&n.duration>0,l=_._context.staticPlot;p.each(function(u){var c,g=u[0].trace,f=g.error_x||{},b=g.error_y||{};g.ids&&(c=function(x){return x.id});var v=w.hasMarkers(g)&&g.marker.maxdisplayed>0;b.visible||f.visible||(u=[]);var d=M.select(this).selectAll("g.errorbar").data(u,c);if(d.exit().remove(),u.length){f.visible||d.selectAll("path.xerror").remove(),b.visible||d.selectAll("path.yerror").remove(),d.style("opacity",1);var m=d.enter().append("g").classed("errorbar",!0);i&&m.style("opacity",0).transition().duration(n.duration).style("opacity",1),o.setClipUrl(d,s.layerClipId,_),d.each(function(x){var y=M.select(this),T=function(I,z,F){var U={x:z.c2p(I.x),y:F.c2p(I.y)};return I.yh!==void 0&&(U.yh=F.c2p(I.yh),U.ys=F.c2p(I.ys),A(U.ys)||(U.noYS=!0,U.ys=F.c2p(I.ys,!0))),I.xh!==void 0&&(U.xh=z.c2p(I.xh),U.xs=z.c2p(I.xs),A(U.xs)||(U.noXS=!0,U.xs=z.c2p(I.xs,!0))),U}(x,a,r);if(!v||x.vis){var h,E=y.select("path.yerror");if(b.visible&&A(T.x)&&A(T.yh)&&A(T.ys)){var k=b.width;h="M"+(T.x-k)+","+T.yh+"h"+2*k+"m-"+k+",0V"+T.ys,T.noYS||(h+="m-"+k+",0h"+2*k),E.size()?i&&(E=E.transition().duration(n.duration).ease(n.easing)):E=y.append("path").style("vector-effect",l?"none":"non-scaling-stroke").classed("yerror",!0),E.attr("d",h)}else E.remove();var L=y.select("path.xerror");if(f.visible&&A(T.y)&&A(T.xh)&&A(T.xs)){var P=(f.copy_ystyle?b:f).width;h="M"+T.xh+","+(T.y-P)+"v"+2*P+"m0,-"+P+"H"+T.xs,T.noXS||(h+="m0,-"+P+"v"+2*P),L.size()?i&&(L=L.transition().duration(n.duration).ease(n.easing)):L=y.append("path").style("vector-effect",l?"none":"non-scaling-stroke").classed("xerror",!0),L.attr("d",h)}else L.remove()}})}})}},92036:function(Y,O,e){var M=e(33428),A=e(76308);Y.exports=function(o){o.each(function(w){var _=w[0].trace,p=_.error_y||{},s=_.error_x||{},n=M.select(this);n.selectAll("path.yerror").style("stroke-width",p.thickness+"px").call(A.stroke,p.color),s.copy_ystyle&&(s=p),n.selectAll("path.xerror").style("stroke-width",s.thickness+"px").call(A.stroke,s.color)})}},55756:function(Y,O,e){var M=e(25376),A=e(65460).hoverlabel,o=e(92880).extendFlat;Y.exports={hoverlabel:{bgcolor:o({},A.bgcolor,{arrayOk:!0}),bordercolor:o({},A.bordercolor,{arrayOk:!0}),font:M({arrayOk:!0,editType:"none"}),align:o({},A.align,{arrayOk:!0}),namelength:o({},A.namelength,{arrayOk:!0}),editType:"none"}}},55056:function(Y,O,e){var M=e(3400),A=e(24040);function o(w,_,p,s){s=s||M.identity,Array.isArray(w)&&(_[0][p]=s(w))}Y.exports=function(w){var _=w.calcdata,p=w._fullLayout;function s(l){return function(u){return M.coerceHoverinfo({hoverinfo:u},{_module:l._module},p)}}for(var n=0;n<_.length;n++){var a=_[n],r=a[0].trace;if(!A.traceIs(r,"pie-like")){var i=A.traceIs(r,"2dMap")?o:M.fillArray;i(r.hoverinfo,a,"hi",s(r)),r.hovertemplate&&i(r.hovertemplate,a,"ht"),r.hoverlabel&&(i(r.hoverlabel.bgcolor,a,"hbg"),i(r.hoverlabel.bordercolor,a,"hbc"),i(r.hoverlabel.font.size,a,"hts"),i(r.hoverlabel.font.color,a,"htc"),i(r.hoverlabel.font.family,a,"htf"),i(r.hoverlabel.namelength,a,"hnl"),i(r.hoverlabel.align,a,"hta"))}}}},62376:function(Y,O,e){var M=e(24040),A=e(83292).hover;Y.exports=function(o,w,_){var p=M.getComponentMethod("annotations","onClick")(o,o._hoverdata);function s(){o.emit("plotly_click",{points:o._hoverdata,event:w})}_!==void 0&&A(o,w,_,!0),o._hoverdata&&w&&w.target&&(p&&p.then?p.then(s):s(),w.stopImmediatePropagation&&w.stopImmediatePropagation())}},92456:function(Y){Y.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},95448:function(Y,O,e){var M=e(3400),A=e(55756),o=e(16132);Y.exports=function(w,_,p,s){var n=M.extendFlat({},s.hoverlabel);_.hovertemplate&&(n.namelength=-1),o(w,_,function(a,r){return M.coerce(w,_,A,a,r)},n)}},10624:function(Y,O,e){var M=e(3400);O.getSubplot=function(s){return s.subplot||s.xaxis+s.yaxis||s.geo},O.isTraceInSubplots=function(s,n){if(s.type==="splom"){for(var a=s.xaxes||[],r=s.yaxes||[],i=0;i<a.length;i++)for(var l=0;l<r.length;l++)if(n.indexOf(a[i]+r[l])!==-1)return!0;return!1}return n.indexOf(O.getSubplot(s))!==-1},O.flat=function(s,n){for(var a=new Array(s.length),r=0;r<s.length;r++)a[r]=n;return a},O.p2c=function(s,n){for(var a=new Array(s.length),r=0;r<s.length;r++)a[r]=s[r].p2c(n);return a},O.getDistanceFunction=function(s,n,a,r){return s==="closest"?r||O.quadrature(n,a):s.charAt(0)==="x"?n:a},O.getClosest=function(s,n,a){if(a.index!==!1)a.index>=0&&a.index<s.length?a.distance=0:a.index=!1;else for(var r=0;r<s.length;r++){var i=n(s[r]);i<=a.distance&&(a.index=r,a.distance=i)}return a},O.inbox=function(s,n,a){return s*n<0||s===0?a:1/0},O.quadrature=function(s,n){return function(a){var r=s(a),i=n(a);return Math.sqrt(r*r+i*i)}},O.makeEventData=function(s,n,a){var r="index"in s?s.index:s.pointNumber,i={data:n._input,fullData:n,curveNumber:n.index,pointNumber:r};if(n._indexToPoints){var l=n._indexToPoints[r];l.length===1?i.pointIndex=l[0]:i.pointIndices=l}else i.pointIndex=r;return n._module.eventData?i=n._module.eventData(i,s,n,a,r):("xVal"in s?i.x=s.xVal:"x"in s&&(i.x=s.x),"yVal"in s?i.y=s.yVal:"y"in s&&(i.y=s.y),s.xa&&(i.xaxis=s.xa),s.ya&&(i.yaxis=s.ya),s.zLabelVal!==void 0&&(i.z=s.zLabelVal)),O.appendArrayPointValue(i,n,r),i},O.appendArrayPointValue=function(s,n,a){var r=n._arrayAttrs;if(r)for(var i=0;i<r.length;i++){var l=r[i],u=o(l);if(s[u]===void 0){var c=w(M.nestedProperty(n,l).get(),a);c!==void 0&&(s[u]=c)}}},O.appendArrayMultiPointValues=function(s,n,a){var r=n._arrayAttrs;if(r)for(var i=0;i<r.length;i++){var l=r[i],u=o(l);if(s[u]===void 0){for(var c=M.nestedProperty(n,l).get(),g=new Array(a.length),f=0;f<a.length;f++)g[f]=w(c,a[f]);s[u]=g}}};var A={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function o(s){return A[s]||s}function w(s,n){return Array.isArray(n)?Array.isArray(s)&&Array.isArray(s[n[0]])?s[n[0]][n[1]]:void 0:s[n]}var _={x:!0,y:!0},p={"x unified":!0,"y unified":!0};O.isUnifiedHover=function(s){return typeof s=="string"&&!!p[s]},O.isXYhover=function(s){return typeof s=="string"&&!!_[s]}},83292:function(Y,O,e){var M=e(33428),A=e(38248),o=e(49760),w=e(3400),_=w.strTranslate,p=w.strRotate,s=e(95924),n=e(72736),a=e(72213),r=e(43616),i=e(76308),l=e(86476),u=e(54460),c=e(24040),g=e(10624),f=e(92456),b=e(77864),v=e(31140),d=f.YANGLE,m=Math.PI*d/180,x=1/Math.sin(m),y=Math.cos(m),T=Math.sin(m),h=f.HOVERARROWSIZE,E=f.HOVERTEXTPAD,k={box:!0,ohlc:!0,violin:!0,candlestick:!0},L={scatter:!0,scattergl:!0,splom:!0};function P(J){return[J.trace.index,J.index,J.x0,J.y0,J.name,J.attr,J.xa?J.xa._id:"",J.ya?J.ya._id:""].join(",")}O.hover=function(J,K,te,ie){J=w.getGraphDiv(J);var ae=K.target;w.throttle(J._fullLayout._uid+f.HOVERID,f.HOVERMINTIME,function(){(function(se,ce,de,ge,ve){de||(de="xy");var be=Array.isArray(de)?de:[de],me=se._fullLayout,Se=me._plots||[],we=Se[de],_e=me._has("cartesian");if(we){var oe=we.overlays.map(function(Ht){return Ht.id});be=be.concat(oe)}for(var le=be.length,pe=new Array(le),Ee=new Array(le),Te=!1,Me=0;Me<le;Me++){var Le=be[Me];if(Se[Le])Te=!0,pe[Me]=Se[Le].xaxis,Ee[Me]=Se[Le].yaxis;else{if(!me[Le]||!me[Le]._subplot)return void w.warn("Unrecognized subplot: "+Le);var Ie=me[Le]._subplot;pe[Me]=Ie.xaxis,Ee[Me]=Ie.yaxis}}var he=ce.hovermode||me.hovermode;if(he&&!Te&&(he="closest"),["x","y","closest","x unified","y unified"].indexOf(he)===-1||!se.calcdata||se.querySelector(".zoombox")||se._dragging)return l.unhoverRaw(se,ce);var xe=me.hoverdistance;xe===-1&&(xe=1/0);var ke=me.spikedistance;ke===-1&&(ke=1/0);var ze,Re,Oe,Ve,qe,Je,ot,rt,dt,_t,yt,et,nt,At=[],Rt=[],Ft={hLinePoint:null,vLinePoint:null},It=!1;if(Array.isArray(ce))for(he="array",Oe=0;Oe<ce.length;Oe++)(qe=se.calcdata[ce[Oe].curveNumber||0])&&(Je=qe[0].trace,qe[0].trace.hoverinfo!=="skip"&&(Rt.push(qe),Je.orientation==="h"&&(It=!0)));else{for(Ve=0;Ve<se.calcdata.length;Ve++)qe=se.calcdata[Ve],(Je=qe[0].trace).hoverinfo!=="skip"&&g.isTraceInSubplots(Je,be)&&(Rt.push(qe),Je.orientation==="h"&&(It=!0));var Ge,Ye;if(ve){if(s.triggerHandler(se,"plotly_beforehover",ce)===!1)return;var Ne=ve.getBoundingClientRect();Ge=ce.clientX-Ne.left,Ye=ce.clientY-Ne.top,me._calcInverseTransform(se);var We=w.apply3DTransform(me._invTransform)(Ge,Ye);if(Ge=We[0],Ye=We[1],Ge<0||Ge>pe[0]._length||Ye<0||Ye>Ee[0]._length)return l.unhoverRaw(se,ce)}else Ge="xpx"in ce?ce.xpx:pe[0]._length/2,Ye="ypx"in ce?ce.ypx:Ee[0]._length/2;if(ce.pointerX=Ge+pe[0]._offset,ce.pointerY=Ye+Ee[0]._offset,ze="xval"in ce?g.flat(be,ce.xval):g.p2c(pe,Ge),Re="yval"in ce?g.flat(be,ce.yval):g.p2c(Ee,Ye),!A(ze[0])||!A(Re[0]))return w.warn("Fx.hover failed",ce,se),l.unhoverRaw(se,ce)}var st=1/0;function it(Ht,on){for(Ve=0;Ve<Rt.length;Ve++)if((qe=Rt[Ve])&&qe[0]&&qe[0].trace&&(Je=qe[0].trace).visible===!0&&Je._length!==0&&["carpet","contourcarpet"].indexOf(Je._module.name)===-1){if(Je.type==="splom"?ot=be[rt=0]:(ot=g.getSubplot(Je),rt=be.indexOf(ot)),dt=he,g.isUnifiedHover(dt)&&(dt=dt.charAt(0)),et={cd:qe,trace:Je,xa:pe[rt],ya:Ee[rt],maxHoverDistance:xe,maxSpikeDistance:ke,index:!1,distance:Math.min(st,xe),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:i.defaultLine,name:Je.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},me[ot]&&(et.subplot=me[ot]._subplot),me._splomScenes&&me._splomScenes[Je.uid]&&(et.scene=me._splomScenes[Je.uid]),nt=At.length,dt==="array"){var wn=ce[Ve];"pointNumber"in wn?(et.index=wn.pointNumber,dt="closest"):(dt="","xval"in wn&&(_t=wn.xval,dt="x"),"yval"in wn&&(yt=wn.yval,dt=dt?"closest":"y"))}else Ht!==void 0&&on!==void 0?(_t=Ht,yt=on):(_t=ze[rt],yt=Re[rt]);if(xe!==0)if(Je._module&&Je._module.hoverPoints){var mn=Je._module.hoverPoints(et,_t,yt,dt,{finiteRange:!0,hoverLayer:me._hoverlayer});if(mn)for(var Pn,Wn=0;Wn<mn.length;Wn++)Pn=mn[Wn],A(Pn.x0)&&A(Pn.y0)&&At.push(j(Pn,he))}else w.log("Unrecognized trace type in hover:",Je);if(he==="closest"&&At.length>nt&&(At.splice(0,nt),st=At[0].distance),_e&&ke!==0&&At.length===0){et.distance=ke,et.index=!1;var Bn=Je._module.hoverPoints(et,_t,yt,"closest",{hoverLayer:me._hoverlayer});if(Bn&&(Bn=Bn.filter(function(Jt){return Jt.spikeDistance<=ke})),Bn&&Bn.length){var jn,rr=Bn.filter(function(Jt){return Jt.xa.showspikes&&Jt.xa.spikesnap!=="hovered data"});if(rr.length){var Xt=rr[0];A(Xt.x0)&&A(Xt.y0)&&(jn=Be(Xt),(!Ft.vLinePoint||Ft.vLinePoint.spikeDistance>jn.spikeDistance)&&(Ft.vLinePoint=jn))}var yn=Bn.filter(function(Jt){return Jt.ya.showspikes&&Jt.ya.spikesnap!=="hovered data"});if(yn.length){var Ot=yn[0];A(Ot.x0)&&A(Ot.y0)&&(jn=Be(Ot),(!Ft.hLinePoint||Ft.hLinePoint.spikeDistance>jn.spikeDistance)&&(Ft.hLinePoint=jn))}}}}}function Fe(Ht,on,wn){for(var mn,Pn=null,Wn=1/0,Bn=0;Bn<Ht.length;Bn++)mn=Ht[Bn].spikeDistance,wn&&Bn===0&&(mn=-1/0),mn<=Wn&&mn<=on&&(Pn=Ht[Bn],Wn=mn);return Pn}function Be(Ht){return Ht?{xa:Ht.xa,ya:Ht.ya,x:Ht.xSpike!==void 0?Ht.xSpike:(Ht.x0+Ht.x1)/2,y:Ht.ySpike!==void 0?Ht.ySpike:(Ht.y0+Ht.y1)/2,distance:Ht.distance,spikeDistance:Ht.spikeDistance,curveNumber:Ht.trace.index,color:Ht.color,pointNumber:Ht.index}:null}it();var at={fullLayout:me,container:me._hoverlayer,event:ce},Ze=se._spikepoints,ht={vLinePoint:Ft.vLinePoint,hLinePoint:Ft.hLinePoint};se._spikepoints=ht;var vt=function(){At.sort(function(Ht,on){return Ht.distance-on.distance}),At=function(Ht,on){for(var wn=on.charAt(0),mn=[],Pn=[],Wn=[],Bn=0;Bn<Ht.length;Bn++){var jn=Ht[Bn];c.traceIs(jn.trace,"bar-like")||c.traceIs(jn.trace,"box-violin")?Wn.push(jn):jn.trace[wn+"period"]?Pn.push(jn):mn.push(jn)}return mn.concat(Pn).concat(Wn)}(At,he)};vt();var mt=he.charAt(0),ft=(mt==="x"||mt==="y")&&At[0]&&L[At[0].trace.type];if(_e&&ke!==0&&At.length!==0){var Et=Fe(At.filter(function(Ht){return Ht.ya.showspikes}),ke,ft);Ft.hLinePoint=Be(Et);var Tt=Fe(At.filter(function(Ht){return Ht.xa.showspikes}),ke,ft);Ft.vLinePoint=Be(Tt)}if(At.length===0){var xt=l.unhoverRaw(se,ce);return!_e||Ft.hLinePoint===null&&Ft.vLinePoint===null||B(Ze)&&Z(se,Ft,at),xt}if(_e&&B(Ze)&&Z(se,Ft,at),g.isXYhover(dt)&&At[0].length!==0&&At[0].trace.type!=="splom"){var Ct=At[0],Pt=(At=k[Ct.trace.type]?At.filter(function(Ht){return Ht.trace.index===Ct.trace.index}):[Ct]).length;it(V("x",Ct,me),V("y",Ct,me));var Bt,Kt=[],sn={},Gt=0,Yt=function(Ht){var on=k[Ht.trace.type]?P(Ht):Ht.trace.index;if(sn[on]){var wn=sn[on]-1,mn=Kt[wn];wn>0&&Math.abs(Ht.distance)<Math.abs(mn.distance)&&(Kt[wn]=Ht)}else Gt++,sn[on]=Gt,Kt.push(Ht)};for(Bt=0;Bt<Pt;Bt++)Yt(At[Bt]);for(Bt=At.length-1;Bt>Pt-1;Bt--)Yt(At[Bt]);At=Kt,vt()}var rn=se._hoverdata,Ln=[],Sn=ne(se),gn=ee(se);for(Oe=0;Oe<At.length;Oe++){var $t=At[Oe],cn=g.makeEventData($t,$t.trace,$t.cd);if($t.hovertemplate!==!1){var an=!1;$t.cd[$t.index]&&$t.cd[$t.index].ht&&(an=$t.cd[$t.index].ht),$t.hovertemplate=an||$t.trace.hovertemplate||!1}if($t.xa&&$t.ya){var pn=$t.x0+$t.xa._offset,An=$t.x1+$t.xa._offset,Cn=$t.y0+$t.ya._offset,Rn=$t.y1+$t.ya._offset,Fn=Math.min(pn,An),In=Math.max(pn,An),Hn=Math.min(Cn,Rn),Un=Math.max(Cn,Rn);cn.bbox={x0:Fn+gn,x1:In+gn,y0:Hn+Sn,y1:Un+Sn}}$t.eventData=[cn],Ln.push(cn)}se._hoverdata=Ln;var ar=he==="y"&&(Rt.length>1||At.length>1)||he==="closest"&&It&&At.length>1,ur=i.combine(me.plot_bgcolor||i.background,me.paper_bgcolor),cr=z(At,{gd:se,hovermode:he,rotateLabels:ar,bgColor:ur,container:me._hoverlayer,outerContainer:me._paper.node(),commonLabelOpts:me.hoverlabel,hoverdistance:me.hoverdistance}),er=cr.hoverLabels;if(g.isUnifiedHover(he)||(function(Ht,on,wn,mn){var Pn,Wn,Bn,jn,rr,Xt,yn,Ot=on?"xa":"ya",Jt=on?"ya":"xa",nn=0,_n=1,xn=Ht.size(),kn=new Array(xn),hn=0,en=mn.minX,tn=mn.maxX,un=mn.minY,dn=mn.maxY,En=function(fr){return fr*wn._invScaleX},zn=function(fr){return fr*wn._invScaleY};function qn(fr){var dr=fr[0],sr=fr[fr.length-1];if(Wn=dr.pmin-dr.pos-dr.dp+dr.size,Bn=sr.pos+sr.dp+sr.size-dr.pmax,Wn>.01){for(rr=fr.length-1;rr>=0;rr--)fr[rr].dp+=Wn;Pn=!1}if(!(Bn<.01)){if(Wn<-.01){for(rr=fr.length-1;rr>=0;rr--)fr[rr].dp-=Bn;Pn=!1}if(Pn){var xr=0;for(jn=0;jn<fr.length;jn++)(Xt=fr[jn]).pos+Xt.dp+Xt.size>dr.pmax&&xr++;for(jn=fr.length-1;jn>=0&&!(xr<=0);jn--)(Xt=fr[jn]).pos>dr.pmax-1&&(Xt.del=!0,xr--);for(jn=0;jn<fr.length&&!(xr<=0);jn++)if((Xt=fr[jn]).pos<dr.pmin+1)for(Xt.del=!0,xr--,Bn=2*Xt.size,rr=fr.length-1;rr>=0;rr--)fr[rr].dp-=Bn;for(jn=fr.length-1;jn>=0&&!(xr<=0);jn--)(Xt=fr[jn]).pos+Xt.dp+Xt.size>dr.pmax&&(Xt.del=!0,xr--)}}}for(Ht.each(function(fr){var dr=fr[Ot],sr=fr[Jt],xr=dr._id.charAt(0)==="x",Er=dr.range;hn===0&&Er&&Er[0]>Er[1]!==xr&&(_n=-1);var jr=0,fi=xr?wn.width:wn.height;if(wn.hovermode==="x"||wn.hovermode==="y"){var pi,Ni,li=U(fr,on),Pi=fr.anchor,pa=Pi==="end"?-1:1;if(Pi==="middle")Ni=(pi=fr.crossPos+(xr?zn(li.y-fr.by/2):En(fr.bx/2+fr.tx2width/2)))+(xr?zn(fr.by):En(fr.bx));else if(xr)Ni=(pi=fr.crossPos+zn(h+li.y)-zn(fr.by/2-h))+zn(fr.by);else{var da=En(pa*h+li.x),Xo=da+En(pa*fr.bx);pi=fr.crossPos+Math.min(da,Xo),Ni=fr.crossPos+Math.max(da,Xo)}xr?un!==void 0&&dn!==void 0&&Math.min(Ni,dn)-Math.max(pi,un)>1&&(sr.side==="left"?(jr=sr._mainLinePosition,fi=wn.width):fi=sr._mainLinePosition):en!==void 0&&tn!==void 0&&Math.min(Ni,tn)-Math.max(pi,en)>1&&(sr.side==="top"?(jr=sr._mainLinePosition,fi=wn.height):fi=sr._mainLinePosition)}kn[hn++]=[{datum:fr,traceIndex:fr.trace.index,dp:0,pos:fr.pos,posref:fr.posref,size:fr.by*(xr?x:1)/2,pmin:jr,pmax:fi}]}),kn.sort(function(fr,dr){return fr[0].posref-dr[0].posref||_n*(dr[0].traceIndex-fr[0].traceIndex)});!Pn&&nn<=xn;){for(nn++,Pn=!0,jn=0;jn<kn.length-1;){var Gn=kn[jn],$n=kn[jn+1],Xn=Gn[Gn.length-1],or=$n[0];if((Wn=Xn.pos+Xn.dp+Xn.size-or.pos-or.dp+or.size)>.01&&Xn.pmin===or.pmin&&Xn.pmax===or.pmax){for(rr=$n.length-1;rr>=0;rr--)$n[rr].dp+=Wn;for(Gn.push.apply(Gn,$n),kn.splice(jn+1,1),yn=0,rr=Gn.length-1;rr>=0;rr--)yn+=Gn[rr].dp;for(Bn=yn/Gn.length,rr=Gn.length-1;rr>=0;rr--)Gn[rr].dp-=Bn;Pn=!1}else jn++}kn.forEach(qn)}for(jn=kn.length-1;jn>=0;jn--){var tr=kn[jn];for(rr=tr.length-1;rr>=0;rr--){var Qn=tr[rr],mr=Qn.datum;mr.offset=Qn.dp,mr.del=Qn.del}}}(er,ar,me,cr.commonLabelBoundingBox),R(er,ar,me._invScaleX,me._invScaleY)),ve&&ve.tagName){var Tr=c.getComponentMethod("annotations","hasClickToShow")(se,Ln);a(M.select(ve),Tr?"pointer":"")}ve&&!ge&&function(Ht,on,wn){if(!wn||wn.length!==Ht._hoverdata.length)return!0;for(var mn=wn.length-1;mn>=0;mn--){var Pn=wn[mn],Wn=Ht._hoverdata[mn];if(Pn.curveNumber!==Wn.curveNumber||String(Pn.pointNumber)!==String(Wn.pointNumber)||String(Pn.pointNumbers)!==String(Wn.pointNumbers))return!0}return!1}(se,0,rn)&&(rn&&se.emit("plotly_unhover",{event:ce,points:rn}),se.emit("plotly_hover",{event:ce,points:se._hoverdata,xaxes:pe,yaxes:Ee,xvals:ze,yvals:Re}))})(J,K,te,ie,ae)})},O.loneHover=function(J,K){var te=!0;Array.isArray(J)||(te=!1,J=[J]);var ie=K.gd,ae=ne(ie),se=ee(ie),ce=z(J.map(function(ve){var be=ve._x0||ve.x0||ve.x||0,me=ve._x1||ve.x1||ve.x||0,Se=ve._y0||ve.y0||ve.y||0,we=ve._y1||ve.y1||ve.y||0,_e=ve.eventData;if(_e){var oe=Math.min(be,me),le=Math.max(be,me),pe=Math.min(Se,we),Ee=Math.max(Se,we),Te=ve.trace;if(c.traceIs(Te,"gl3d")){var Me=ie._fullLayout[Te.scene]._scene.container,Le=Me.offsetLeft,Ie=Me.offsetTop;oe+=Le,le+=Le,pe+=Ie,Ee+=Ie}_e.bbox={x0:oe+se,x1:le+se,y0:pe+ae,y1:Ee+ae},K.inOut_bbox&&K.inOut_bbox.push(_e.bbox)}else _e=!1;return{color:ve.color||i.defaultLine,x0:ve.x0||ve.x||0,x1:ve.x1||ve.x||0,y0:ve.y0||ve.y||0,y1:ve.y1||ve.y||0,xLabel:ve.xLabel,yLabel:ve.yLabel,zLabel:ve.zLabel,text:ve.text,name:ve.name,idealAlign:ve.idealAlign,borderColor:ve.borderColor,fontFamily:ve.fontFamily,fontSize:ve.fontSize,fontColor:ve.fontColor,nameLength:ve.nameLength,textAlign:ve.textAlign,trace:ve.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:ve.hovertemplate||!1,hovertemplateLabels:ve.hovertemplateLabels||!1,eventData:_e}}),{gd:ie,hovermode:"closest",rotateLabels:!1,bgColor:K.bgColor||i.background,container:M.select(K.container),outerContainer:K.outerContainer||K.container}).hoverLabels,de=0,ge=0;return ce.sort(function(ve,be){return ve.y0-be.y0}).each(function(ve,be){var me=ve.y0-ve.by/2;ve.offset=me-5<de?de-me+5:0,de=me+ve.by+ve.offset,be===K.anchorIndex&&(ge=ve.offset)}).each(function(ve){ve.offset-=ge}),R(ce,!1,ie._fullLayout._invScaleX,ie._fullLayout._invScaleY),te?ce:ce.node()};var I=/<extra>([\s\S]*)<\/extra>/;function z(J,K){var te=K.gd,ie=te._fullLayout,ae=K.hovermode,se=K.rotateLabels,ce=K.bgColor,de=K.container,ge=K.outerContainer,ve=K.commonLabelOpts||{};if(J.length===0)return[[]];var be=K.fontFamily||f.HOVERFONT,me=K.fontSize||f.HOVERFONTSIZE,Se=J[0],we=Se.xa,_e=Se.ya,oe=ae.charAt(0),le=oe+"Label",pe=Se[le];if(pe===void 0&&we.type==="multicategory")for(var Ee=0;Ee<J.length&&(pe=J[Ee][le])===void 0;Ee++);var Te=$(te,ge),Me=Te.top,Le=Te.width,Ie=Te.height,he=pe!==void 0&&Se.distance<=K.hoverdistance&&(ae==="x"||ae==="y");if(he){var xe,ke,ze=!0;for(xe=0;xe<J.length;xe++)if(ze&&J[xe].zLabel===void 0&&(ze=!1),ke=J[xe].hoverinfo||J[xe].trace.hoverinfo){var Re=Array.isArray(ke)?ke:ke.split("+");if(Re.indexOf("all")===-1&&Re.indexOf(ae)===-1){he=!1;break}}ze&&(he=!1)}var Oe=de.selectAll("g.axistext").data(he?[0]:[]);Oe.enter().append("g").classed("axistext",!0),Oe.exit().remove();var Ve={minX:0,maxX:0,minY:0,maxY:0};if(Oe.each(function(){var xt=M.select(this),Ct=w.ensureSingle(xt,"path","",function(Hn){Hn.style({"stroke-width":"1px"})}),Pt=w.ensureSingle(xt,"text","",function(Hn){Hn.attr("data-notex",1)}),Bt=ve.bgcolor||i.defaultLine,Kt=ve.bordercolor||i.contrast(Bt),sn=i.contrast(Bt),Gt={family:ve.font.family||be,size:ve.font.size||me,color:ve.font.color||sn};Ct.style({fill:Bt,stroke:Kt}),Pt.text(pe).call(r.font,Gt).call(n.positionText,0,0).call(n.convertToTspans,te),xt.attr("transform","");var Yt,rn,Ln=$(te,Pt.node());if(ae==="x"){var Sn=we.side==="top"?"-":"";Pt.attr("text-anchor","middle").call(n.positionText,0,we.side==="top"?Me-Ln.bottom-h-E:Me-Ln.top+h+E),Yt=we._offset+(Se.x0+Se.x1)/2,rn=_e._offset+(we.side==="top"?0:_e._length);var gn=Ln.width/2+E;Yt<gn?(Yt=gn,Ct.attr("d","M-"+(gn-h)+",0L-"+(gn-2*h)+","+Sn+h+"H"+gn+"v"+Sn+(2*E+Ln.height)+"H-"+gn+"V"+Sn+h+"Z")):Yt>ie.width-gn?(Yt=ie.width-gn,Ct.attr("d","M"+(gn-h)+",0L"+gn+","+Sn+h+"v"+Sn+(2*E+Ln.height)+"H-"+gn+"V"+Sn+h+"H"+(gn-2*h)+"Z")):Ct.attr("d","M0,0L"+h+","+Sn+h+"H"+gn+"v"+Sn+(2*E+Ln.height)+"H-"+gn+"V"+Sn+h+"H-"+h+"Z"),Ve.minX=Yt-gn,Ve.maxX=Yt+gn,we.side==="top"?(Ve.minY=rn-(2*E+Ln.height),Ve.maxY=rn-E):(Ve.minY=rn+E,Ve.maxY=rn+(2*E+Ln.height))}else{var $t,cn,an;_e.side==="right"?($t="start",cn=1,an="",Yt=we._offset+we._length):($t="end",cn=-1,an="-",Yt=we._offset),rn=_e._offset+(Se.y0+Se.y1)/2,Pt.attr("text-anchor",$t),Ct.attr("d","M0,0L"+an+h+","+h+"V"+(E+Ln.height/2)+"h"+an+(2*E+Ln.width)+"V-"+(E+Ln.height/2)+"H"+an+h+"V-"+h+"Z"),Ve.minY=rn-(E+Ln.height/2),Ve.maxY=rn+(E+Ln.height/2),_e.side==="right"?(Ve.minX=Yt+h,Ve.maxX=Yt+h+(2*E+Ln.width)):(Ve.minX=Yt-h-(2*E+Ln.width),Ve.maxX=Yt-h);var pn,An=Ln.height/2,Cn=Me-Ln.top-An,Rn="clip"+ie._uid+"commonlabel"+_e._id;if(Yt<Ln.width+2*E+h){pn="M-"+(h+E)+"-"+An+"h-"+(Ln.width-E)+"V"+An+"h"+(Ln.width-E)+"Z";var Fn=Ln.width-Yt+E;n.positionText(Pt,Fn,Cn),$t==="end"&&Pt.selectAll("tspan").each(function(){var Hn=M.select(this),Un=r.tester.append("text").text(Hn.text()).call(r.font,Gt),ar=$(te,Un.node());Math.round(ar.width)<Math.round(Ln.width)&&Hn.attr("x",Fn-ar.width),Un.remove()})}else n.positionText(Pt,cn*(E+h),Cn),pn=null;var In=ie._topclips.selectAll("#"+Rn).data(pn?[0]:[]);In.enter().append("clipPath").attr("id",Rn).append("path"),In.exit().remove(),In.select("path").attr("d",pn),r.setClipUrl(Pt,pn?Rn:null,te)}xt.attr("transform",_(Yt,rn))}),g.isUnifiedHover(ae)){de.selectAll("g.hovertext").remove();var qe=J.filter(function(xt){return xt.hoverinfo!=="none"});if(qe.length===0)return[];var Je=ie.hoverlabel,ot=Je.font,rt={showlegend:!0,legend:{title:{text:pe,font:ot},font:ot,bgcolor:Je.bgcolor,bordercolor:Je.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ie.legend?ie.legend.traceorder:void 0,orientation:"v"}},dt={font:ot};b(rt,dt,te._fullData);var _t=dt.legend;_t.entries=[];for(var yt=0;yt<qe.length;yt++){var et=qe[yt];if(et.hoverinfo!=="none"){var nt=F(et,!0,ae,ie,pe),At=nt[0],Rt=nt[1];et.name=Rt,et.text=Rt!==""?Rt+" : "+At:At;var Ft=et.cd[et.index];Ft&&(Ft.mc&&(et.mc=Ft.mc),Ft.mcc&&(et.mc=Ft.mcc),Ft.mlc&&(et.mlc=Ft.mlc),Ft.mlcc&&(et.mlc=Ft.mlcc),Ft.mlw&&(et.mlw=Ft.mlw),Ft.mrc&&(et.mrc=Ft.mrc),Ft.dir&&(et.dir=Ft.dir)),et._distinct=!0,_t.entries.push([et])}}_t.entries.sort(function(xt,Ct){return xt[0].trace.index-Ct[0].trace.index}),_t.layer=de,_t._inHover=!0,_t._groupTitleFont=Je.grouptitlefont,v(te,_t);var It,Ge,Ye,Ne,We=de.select("g.legend"),st=$(te,We.node()),it=st.width+2*E,Fe=st.height+2*E,Be=qe[0],at=(Be.x0+Be.x1)/2,Ze=(Be.y0+Be.y1)/2,ht=!(c.traceIs(Be.trace,"bar-like")||c.traceIs(Be.trace,"box-violin"));oe==="y"?ht?(Ge=Ze-E,It=Ze+E):(Ge=Math.min.apply(null,qe.map(function(xt){return Math.min(xt.y0,xt.y1)})),It=Math.max.apply(null,qe.map(function(xt){return Math.max(xt.y0,xt.y1)}))):Ge=It=w.mean(qe.map(function(xt){return(xt.y0+xt.y1)/2}))-Fe/2,oe==="x"?ht?(Ye=at+E,Ne=at-E):(Ye=Math.max.apply(null,qe.map(function(xt){return Math.max(xt.x0,xt.x1)})),Ne=Math.min.apply(null,qe.map(function(xt){return Math.min(xt.x0,xt.x1)}))):Ye=Ne=w.mean(qe.map(function(xt){return(xt.x0+xt.x1)/2}))-it/2;var vt,mt,ft=we._offset,Et=_e._offset;return Ne+=ft-it,Ge+=Et-Fe,vt=(Ye+=ft)+it<Le&&Ye>=0?Ye:Ne+it<Le&&Ne>=0?Ne:ft+it<Le?ft:Ye-at<at-Ne+it?Le-it:0,vt+=E,mt=(It+=Et)+Fe<Ie&&It>=0?It:Ge+Fe<Ie&&Ge>=0?Ge:Et+Fe<Ie?Et:It-Ze<Ze-Ge+Fe?Ie-Fe:0,mt+=E,We.attr("transform",_(vt-1,mt-1)),We}var Tt=de.selectAll("g.hovertext").data(J,function(xt){return P(xt)});return Tt.enter().append("g").classed("hovertext",!0).each(function(){var xt=M.select(this);xt.append("rect").call(i.fill,i.addOpacity(ce,.8)),xt.append("text").classed("name",!0),xt.append("path").style("stroke-width","1px"),xt.append("text").classed("nums",!0).call(r.font,be,me)}),Tt.exit().remove(),Tt.each(function(xt){var Ct=M.select(this).attr("transform",""),Pt=xt.color;Array.isArray(Pt)&&(Pt=Pt[xt.eventData[0].pointNumber]);var Bt=xt.bgcolor||Pt,Kt=i.combine(i.opacity(Bt)?Bt:i.defaultLine,ce),sn=i.combine(i.opacity(Pt)?Pt:i.defaultLine,ce),Gt=xt.borderColor||i.contrast(Kt),Yt=F(xt,he,ae,ie,pe,Ct),rn=Yt[0],Ln=Yt[1],Sn=Ct.select("text.nums").call(r.font,xt.fontFamily||be,xt.fontSize||me,xt.fontColor||Gt).text(rn).attr("data-notex",1).call(n.positionText,0,0).call(n.convertToTspans,te),gn=Ct.select("text.name"),$t=0,cn=0;if(Ln&&Ln!==rn){gn.call(r.font,xt.fontFamily||be,xt.fontSize||me,sn).text(Ln).attr("data-notex",1).call(n.positionText,0,0).call(n.convertToTspans,te);var an=$(te,gn.node());$t=an.width+2*E,cn=an.height+2*E}else gn.remove(),Ct.select("rect").remove();Ct.select("path").style({fill:Kt,stroke:Gt});var pn=xt.xa._offset+(xt.x0+xt.x1)/2,An=xt.ya._offset+(xt.y0+xt.y1)/2,Cn=Math.abs(xt.x1-xt.x0),Rn=Math.abs(xt.y1-xt.y0),Fn=$(te,Sn.node()),In=Fn.width/ie._invScaleX,Hn=Fn.height/ie._invScaleY;xt.ty0=(Me-Fn.top)/ie._invScaleY,xt.bx=In+2*E,xt.by=Math.max(Hn+2*E,cn),xt.anchor="start",xt.txwidth=In,xt.tx2width=$t,xt.offset=0;var Un,ar,ur=(In+h+E+$t)*ie._invScaleX;if(se)xt.pos=pn,Un=An+Rn/2+ur<=Ie,ar=An-Rn/2-ur>=0,xt.idealAlign!=="top"&&Un||!ar?Un?(An+=Rn/2,xt.anchor="start"):xt.anchor="middle":(An-=Rn/2,xt.anchor="end"),xt.crossPos=An;else{if(xt.pos=An,Un=pn+Cn/2+ur<=Le,ar=pn-Cn/2-ur>=0,xt.idealAlign!=="left"&&Un||!ar)if(Un)pn+=Cn/2,xt.anchor="start";else{xt.anchor="middle";var cr=ur/2,er=pn+cr-Le,Tr=pn-cr;er>0&&(pn-=er),Tr<0&&(pn+=-Tr)}else pn-=Cn/2,xt.anchor="end";xt.crossPos=pn}Sn.attr("text-anchor",xt.anchor),$t&&gn.attr("text-anchor",xt.anchor),Ct.attr("transform",_(pn,An)+(se?p(d):""))}),{hoverLabels:Tt,commonLabelBoundingBox:Ve}}function F(J,K,te,ie,ae,se){var ce="",de="";J.nameOverride!==void 0&&(J.name=J.nameOverride),J.name&&(J.trace._meta&&(J.name=w.templateString(J.name,J.trace._meta)),ce=q(J.name,J.nameLength));var ge=te.charAt(0),ve=ge==="x"?"y":"x";J.zLabel!==void 0?(J.xLabel!==void 0&&(de+="x: "+J.xLabel+"<br>"),J.yLabel!==void 0&&(de+="y: "+J.yLabel+"<br>"),J.trace.type!=="choropleth"&&J.trace.type!=="choroplethmapbox"&&(de+=(de?"z: ":"")+J.zLabel)):K&&J[ge+"Label"]===ae?de=J[ve+"Label"]||"":J.xLabel===void 0?J.yLabel!==void 0&&J.trace.type!=="scattercarpet"&&(de=J.yLabel):de=J.yLabel===void 0?J.xLabel:"("+J.xLabel+", "+J.yLabel+")",!J.text&&J.text!==0||Array.isArray(J.text)||(de+=(de?"<br>":"")+J.text),J.extraText!==void 0&&(de+=(de?"<br>":"")+J.extraText),se&&de===""&&!J.hovertemplate&&(ce===""&&se.remove(),de=ce);var be=J.hovertemplate||!1;if(be){var me=J.hovertemplateLabels||J;J[ge+"Label"]!==ae&&(me[ge+"other"]=me[ge+"Val"],me[ge+"otherLabel"]=me[ge+"Label"]),de=(de=w.hovertemplateString(be,me,ie._d3locale,J.eventData[0]||{},J.trace._meta)).replace(I,function(Se,we){return ce=q(we,J.nameLength),""})}return[de,ce]}function U(J,K){var te=0,ie=J.offset;return K&&(ie*=-T,te=J.offset*y),{x:te,y:ie}}function R(J,K,te,ie){var ae=function(ce){return ce*te},se=function(ce){return ce*ie};J.each(function(ce){var de=M.select(this);if(ce.del)return de.remove();var ge,ve,be,me,Se=de.select("text.nums"),we=ce.anchor,_e=we==="end"?-1:1,oe=(me=(be=(ve={start:1,end:-1,middle:0}[(ge=ce).anchor])*(h+E))+ve*(ge.txwidth+E),ge.anchor==="middle"&&(be-=ge.tx2width/2,me+=ge.txwidth/2+E),{alignShift:ve,textShiftX:be,text2ShiftX:me}),le=U(ce,K),pe=le.x,Ee=le.y,Te=we==="middle";de.select("path").attr("d",Te?"M-"+ae(ce.bx/2+ce.tx2width/2)+","+se(Ee-ce.by/2)+"h"+ae(ce.bx)+"v"+se(ce.by)+"h-"+ae(ce.bx)+"Z":"M0,0L"+ae(_e*h+pe)+","+se(h+Ee)+"v"+se(ce.by/2-h)+"h"+ae(_e*ce.bx)+"v-"+se(ce.by)+"H"+ae(_e*h+pe)+"V"+se(Ee-h)+"Z");var Me=pe+oe.textShiftX,Le=Ee+ce.ty0-ce.by/2+E,Ie=ce.textAlign||"auto";Ie!=="auto"&&(Ie==="left"&&we!=="start"?(Se.attr("text-anchor","start"),Me=Te?-ce.bx/2-ce.tx2width/2+E:-ce.bx-E):Ie==="right"&&we!=="end"&&(Se.attr("text-anchor","end"),Me=Te?ce.bx/2-ce.tx2width/2-E:ce.bx+E)),Se.call(n.positionText,ae(Me),se(Le)),ce.tx2width&&(de.select("text.name").call(n.positionText,ae(oe.text2ShiftX+oe.alignShift*E+pe),se(Ee+ce.ty0-ce.by/2+E)),de.select("rect").call(r.setRect,ae(oe.text2ShiftX+(oe.alignShift-1)*ce.tx2width/2+pe),se(Ee-ce.by/2-1),ae(ce.tx2width),se(ce.by+2)))})}function j(J,K){var te=J.index,ie=J.trace||{},ae=J.cd[0],se=J.cd[te]||{};function ce(Se){return Se||A(Se)&&Se===0}var de=Array.isArray(te)?function(Se,we){var _e=w.castOption(ae,te,Se);return ce(_e)?_e:w.extractOption({},ie,"",we)}:function(Se,we){return w.extractOption(se,ie,Se,we)};function ge(Se,we,_e){var oe=de(we,_e);ce(oe)&&(J[Se]=oe)}if(ge("hoverinfo","hi","hoverinfo"),ge("bgcolor","hbg","hoverlabel.bgcolor"),ge("borderColor","hbc","hoverlabel.bordercolor"),ge("fontFamily","htf","hoverlabel.font.family"),ge("fontSize","hts","hoverlabel.font.size"),ge("fontColor","htc","hoverlabel.font.color"),ge("nameLength","hnl","hoverlabel.namelength"),ge("textAlign","hta","hoverlabel.align"),J.posref=K==="y"||K==="closest"&&ie.orientation==="h"?J.xa._offset+(J.x0+J.x1)/2:J.ya._offset+(J.y0+J.y1)/2,J.x0=w.constrain(J.x0,0,J.xa._length),J.x1=w.constrain(J.x1,0,J.xa._length),J.y0=w.constrain(J.y0,0,J.ya._length),J.y1=w.constrain(J.y1,0,J.ya._length),J.xLabelVal!==void 0&&(J.xLabel="xLabel"in J?J.xLabel:u.hoverLabelText(J.xa,J.xLabelVal,ie.xhoverformat),J.xVal=J.xa.c2d(J.xLabelVal)),J.yLabelVal!==void 0&&(J.yLabel="yLabel"in J?J.yLabel:u.hoverLabelText(J.ya,J.yLabelVal,ie.yhoverformat),J.yVal=J.ya.c2d(J.yLabelVal)),J.zLabelVal!==void 0&&J.zLabel===void 0&&(J.zLabel=String(J.zLabelVal)),!(isNaN(J.xerr)||J.xa.type==="log"&&J.xerr<=0)){var ve=u.tickText(J.xa,J.xa.c2l(J.xerr),"hover").text;J.xerrneg!==void 0?J.xLabel+=" +"+ve+" / -"+u.tickText(J.xa,J.xa.c2l(J.xerrneg),"hover").text:J.xLabel+="  "+ve,K==="x"&&(J.distance+=1)}if(!(isNaN(J.yerr)||J.ya.type==="log"&&J.yerr<=0)){var be=u.tickText(J.ya,J.ya.c2l(J.yerr),"hover").text;J.yerrneg!==void 0?J.yLabel+=" +"+be+" / -"+u.tickText(J.ya,J.ya.c2l(J.yerrneg),"hover").text:J.yLabel+="  "+be,K==="y"&&(J.distance+=1)}var me=J.hoverinfo||J.trace.hoverinfo;return me&&me!=="all"&&((me=Array.isArray(me)?me:me.split("+")).indexOf("x")===-1&&(J.xLabel=void 0),me.indexOf("y")===-1&&(J.yLabel=void 0),me.indexOf("z")===-1&&(J.zLabel=void 0),me.indexOf("text")===-1&&(J.text=void 0),me.indexOf("name")===-1&&(J.name=void 0)),J}function Z(J,K,te){var ie,ae,se=te.container,ce=te.fullLayout,de=ce._size,ge=te.event,ve=!!K.hLinePoint,be=!!K.vLinePoint;if(se.selectAll(".spikeline").remove(),be||ve){var me=i.combine(ce.plot_bgcolor,ce.paper_bgcolor);if(ve){var Se,we,_e=K.hLinePoint;ie=_e&&_e.xa,(ae=_e&&_e.ya).spikesnap==="cursor"?(Se=ge.pointerX,we=ge.pointerY):(Se=ie._offset+_e.x,we=ae._offset+_e.y);var oe,le,pe=o.readability(_e.color,me)<1.5?i.contrast(me):_e.color,Ee=ae.spikemode,Te=ae.spikethickness,Me=ae.spikecolor||pe,Le=u.getPxPosition(J,ae);if(Ee.indexOf("toaxis")!==-1||Ee.indexOf("across")!==-1){if(Ee.indexOf("toaxis")!==-1&&(oe=Le,le=Se),Ee.indexOf("across")!==-1){var Ie=ae._counterDomainMin,he=ae._counterDomainMax;ae.anchor==="free"&&(Ie=Math.min(Ie,ae.position),he=Math.max(he,ae.position)),oe=de.l+Ie*de.w,le=de.l+he*de.w}se.insert("line",":first-child").attr({x1:oe,x2:le,y1:we,y2:we,"stroke-width":Te,stroke:Me,"stroke-dasharray":r.dashStyle(ae.spikedash,Te)}).classed("spikeline",!0).classed("crisp",!0),se.insert("line",":first-child").attr({x1:oe,x2:le,y1:we,y2:we,"stroke-width":Te+2,stroke:me}).classed("spikeline",!0).classed("crisp",!0)}Ee.indexOf("marker")!==-1&&se.insert("circle",":first-child").attr({cx:Le+(ae.side!=="right"?Te:-Te),cy:we,r:Te,fill:Me}).classed("spikeline",!0)}if(be){var xe,ke,ze=K.vLinePoint;ie=ze&&ze.xa,ae=ze&&ze.ya,ie.spikesnap==="cursor"?(xe=ge.pointerX,ke=ge.pointerY):(xe=ie._offset+ze.x,ke=ae._offset+ze.y);var Re,Oe,Ve=o.readability(ze.color,me)<1.5?i.contrast(me):ze.color,qe=ie.spikemode,Je=ie.spikethickness,ot=ie.spikecolor||Ve,rt=u.getPxPosition(J,ie);if(qe.indexOf("toaxis")!==-1||qe.indexOf("across")!==-1){if(qe.indexOf("toaxis")!==-1&&(Re=rt,Oe=ke),qe.indexOf("across")!==-1){var dt=ie._counterDomainMin,_t=ie._counterDomainMax;ie.anchor==="free"&&(dt=Math.min(dt,ie.position),_t=Math.max(_t,ie.position)),Re=de.t+(1-_t)*de.h,Oe=de.t+(1-dt)*de.h}se.insert("line",":first-child").attr({x1:xe,x2:xe,y1:Re,y2:Oe,"stroke-width":Je,stroke:ot,"stroke-dasharray":r.dashStyle(ie.spikedash,Je)}).classed("spikeline",!0).classed("crisp",!0),se.insert("line",":first-child").attr({x1:xe,x2:xe,y1:Re,y2:Oe,"stroke-width":Je+2,stroke:me}).classed("spikeline",!0).classed("crisp",!0)}qe.indexOf("marker")!==-1&&se.insert("circle",":first-child").attr({cx:xe,cy:rt-(ie.side!=="top"?Je:-Je),r:Je,fill:ot}).classed("spikeline",!0)}}}function B(J,K){return!K||K.vLinePoint!==J._spikepoints.vLinePoint||K.hLinePoint!==J._spikepoints.hLinePoint}function q(J,K){return n.plainText(J||"",{len:K,allowedTags:["br","sub","sup","b","i","em"]})}function V(J,K,te){var ie=K[J+"a"],ae=K[J+"Val"],se=K.cd[0];if(ie.type==="category"||ie.type==="multicategory")ae=ie._categoriesMap[ae];else if(ie.type==="date"){var ce=K.trace[J+"periodalignment"];if(ce){var de=K.cd[K.index],ge=de[J+"Start"];ge===void 0&&(ge=de[J]);var ve=de[J+"End"];ve===void 0&&(ve=de[J]);var be=ve-ge;ce==="end"?ae+=be:ce==="middle"&&(ae+=be/2)}ae=ie.d2c(ae)}return se&&se.t&&se.t.posLetter===ie._id&&(te.boxmode!=="group"&&te.violinmode!=="group"||(ae+=se.t.dPos)),ae}function ne(J){return J.offsetTop+J.clientTop}function ee(J){return J.offsetLeft+J.clientLeft}function $(J,K){var te=J._fullLayout,ie=K.getBoundingClientRect(),ae=ie.left,se=ie.top,ce=ae+ie.width,de=se+ie.height,ge=w.apply3DTransform(te._invTransform)(ae,se),ve=w.apply3DTransform(te._invTransform)(ce,de),be=ge[0],me=ge[1],Se=ve[0],we=ve[1];return{x:be,y:me,width:Se-be,height:we-me,top:Math.min(me,we),left:Math.min(be,Se),right:Math.max(be,Se),bottom:Math.max(me,we)}}},16132:function(Y,O,e){var M=e(3400),A=e(76308),o=e(10624).isUnifiedHover;Y.exports=function(w,_,p,s){s=s||{};var n=_.legend;function a(r){s.font[r]||(s.font[r]=n?_.legend.font[r]:_.font[r])}_&&o(_.hovermode)&&(s.font||(s.font={}),a("size"),a("family"),a("color"),n?(s.bgcolor||(s.bgcolor=A.combine(_.legend.bgcolor,_.paper_bgcolor)),s.bordercolor||(s.bordercolor=_.legend.bordercolor)):s.bgcolor||(s.bgcolor=_.paper_bgcolor)),p("hoverlabel.bgcolor",s.bgcolor),p("hoverlabel.bordercolor",s.bordercolor),p("hoverlabel.namelength",s.namelength),M.coerceFont(p,"hoverlabel.font",s.font),p("hoverlabel.align",s.align)}},41008:function(Y,O,e){var M=e(3400),A=e(65460);Y.exports=function(o,w){function _(p,s){return w[p]!==void 0?w[p]:M.coerce(o,w,A,p,s)}return _("clickmode"),_("hovermode")}},93024:function(Y,O,e){var M=e(33428),A=e(3400),o=e(86476),w=e(10624),_=e(65460),p=e(83292);Y.exports={moduleType:"component",name:"fx",constants:e(92456),schema:{layout:_},attributes:e(55756),layoutAttributes:_,supplyLayoutGlobalDefaults:e(81976),supplyDefaults:e(95448),supplyLayoutDefaults:e(88336),calc:e(55056),getDistanceFunction:w.getDistanceFunction,getClosest:w.getClosest,inbox:w.inbox,quadrature:w.quadrature,appendArrayPointValue:w.appendArrayPointValue,castHoverOption:function(s,n,a){return A.castOption(s,n,"hoverlabel."+a)},castHoverinfo:function(s,n,a){return A.castOption(s,a,"hoverinfo",function(r){return A.coerceHoverinfo({hoverinfo:r},{_module:s._module},n)})},hover:p.hover,unhover:o.unhover,loneHover:p.loneHover,loneUnhover:function(s){var n=A.isD3Selection(s)?s:M.select(s);n.selectAll("g.hovertext").remove(),n.selectAll(".spikeline").remove()},click:e(62376)}},65460:function(Y,O,e){var M=e(92456),A=e(25376),o=A({editType:"none"});o.family.dflt=M.HOVERFONT,o.size.dflt=M.HOVERFONTSIZE,Y.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:o,grouptitlefont:A({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},88336:function(Y,O,e){var M=e(3400),A=e(65460),o=e(41008),w=e(16132);Y.exports=function(_,p){function s(i,l){return M.coerce(_,p,A,i,l)}o(_,p)&&(s("hoverdistance"),s("spikedistance")),s("dragmode")==="select"&&s("selectdirection");var n=p._has("mapbox"),a=p._has("geo"),r=p._basePlotModules.length;p.dragmode==="zoom"&&((n||a)&&r===1||n&&a&&r===2)&&(p.dragmode="pan"),w(_,p,s),M.coerceFont(s,"hoverlabel.grouptitlefont",p.hoverlabel.font)}},81976:function(Y,O,e){var M=e(3400),A=e(16132),o=e(65460);Y.exports=function(w,_){A(w,_,function(p,s){return M.coerce(w,_,o,p,s)})}},12704:function(Y,O,e){var M=e(3400),A=e(53756).counter,o=e(86968).u,w=e(33816).idRegex,_=e(31780),p={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[A("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[w.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[w.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:o({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function s(r,i,l){var u=i[l+"axes"],c=Object.keys((r._splomAxes||{})[l]||{});return Array.isArray(u)?u:c.length?c:void 0}function n(r,i,l,u,c,g){var f=i(r+"gap",l),b=i("domain."+r);i(r+"side",u);for(var v=new Array(c),d=b[0],m=(b[1]-d)/(c-f),x=m*(1-f),y=0;y<c;y++){var T=d+m*y;v[g?c-1-y:y]=[T,T+x]}return v}function a(r,i,l,u,c){var g,f=new Array(l);function b(v,d){i.indexOf(d)!==-1&&u[d]===void 0?(f[v]=d,u[d]=v):f[v]=""}if(Array.isArray(r))for(g=0;g<l;g++)b(g,r[g]);else for(b(0,c),g=1;g<l;g++)b(g,c+(g+1));return f}Y.exports={moduleType:"component",name:"grid",schema:{layout:{grid:p}},layoutAttributes:p,sizeDefaults:function(r,i){var l=r.grid||{},u=s(i,l,"x"),c=s(i,l,"y");if(r.grid||u||c){var g,f,b=Array.isArray(l.subplots)&&Array.isArray(l.subplots[0]),v=Array.isArray(u),d=Array.isArray(c),m=v&&u!==l.xaxes&&d&&c!==l.yaxes;b?(g=l.subplots.length,f=l.subplots[0].length):(d&&(g=c.length),v&&(f=u.length));var x=_.newContainer(i,"grid"),y=I("rows",g),T=I("columns",f);if(y*T>1){b||v||d||I("pattern")==="independent"&&(b=!0),x._hasSubplotGrid=b;var h,E,k=I("roworder")==="top to bottom",L=b?.2:.1,P=b?.3:.1;m&&i._splomGridDflt&&(h=i._splomGridDflt.xside,E=i._splomGridDflt.yside),x._domains={x:n("x",I,L,h,T),y:n("y",I,P,E,y,k)}}else delete i.grid}function I(z,F){return M.coerce(l,x,p,z,F)}},contentDefaults:function(r,i){var l=i.grid;if(l&&l._domains){var u,c,g,f,b,v,d,m=r.grid||{},x=i._subplots,y=l._hasSubplotGrid,T=l.rows,h=l.columns,E=l.pattern==="independent",k=l._axisMap={};if(y){var L=m.subplots||[];v=l.subplots=new Array(T);var P=1;for(u=0;u<T;u++){var I=v[u]=new Array(h),z=L[u]||[];for(c=0;c<h;c++)if(E?(b=P===1?"xy":"x"+P+"y"+P,P++):b=z[c],I[c]="",x.cartesian.indexOf(b)!==-1){if(d=b.indexOf("y"),g=b.slice(0,d),f=b.slice(d),k[g]!==void 0&&k[g]!==c||k[f]!==void 0&&k[f]!==u)continue;I[c]=b,k[g]=c,k[f]=u}}}else{var F=s(i,m,"x"),U=s(i,m,"y");l.xaxes=a(F,x.xaxis,h,k,"x"),l.yaxes=a(U,x.yaxis,T,k,"y")}var R=l._anchors={},j=l.roworder==="top to bottom";for(var Z in k){var B,q,V,ne=Z.charAt(0),ee=l[ne+"side"];if(ee.length<8)R[Z]="free";else if(ne==="x"){if(ee.charAt(0)==="t"===j?(B=0,q=1,V=T):(B=T-1,q=-1,V=-1),y){var $=k[Z];for(u=B;u!==V;u+=q)if((b=v[u][$])&&(d=b.indexOf("y"),b.slice(0,d)===Z)){R[Z]=b.slice(d);break}}else for(u=B;u!==V;u+=q)if(f=l.yaxes[u],x.cartesian.indexOf(Z+f)!==-1){R[Z]=f;break}}else if(ee.charAt(0)==="l"?(B=0,q=1,V=h):(B=h-1,q=-1,V=-1),y){var J=k[Z];for(u=B;u!==V;u+=q)if((b=v[J][u])&&(d=b.indexOf("y"),b.slice(d)===Z)){R[Z]=b.slice(0,d);break}}else for(u=B;u!==V;u+=q)if(g=l.xaxes[u],x.cartesian.indexOf(g+Z)!==-1){R[Z]=g;break}}}}}},65760:function(Y,O,e){var M=e(33816),A=e(31780).templatedArray;e(36208),Y.exports=A("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",M.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",M.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},63556:function(Y,O,e){var M=e(38248),A=e(36896);Y.exports=function(o,w,_,p){w=w||{};var s=_==="log"&&w.type==="linear",n=_==="linear"&&w.type==="log";if(s||n){for(var a,r,i=o._fullLayout.images,l=w._id.charAt(0),u=0;u<i.length;u++)if(r="images["+u+"].",(a=i[u])[l+"ref"]===w._id){var c=a[l],g=a["size"+l],f=null,b=null;if(s){f=A(c,w.range);var v=g/Math.pow(10,f)/2;b=2*Math.log(v+Math.sqrt(1+v*v))/Math.LN10}else b=(f=Math.pow(10,c))*(Math.pow(10,g/2)-Math.pow(10,-g/2));M(f)?M(b)||(b=null):(f=null,b=null),p(r+l,f),p(r+"size"+l,b)}}}},25024:function(Y,O,e){var M=e(3400),A=e(54460),o=e(51272),w=e(65760);function _(p,s,n){function a(f,b){return M.coerce(p,s,w,f,b)}var r=a("source");if(!a("visible",!!r))return s;a("layer"),a("xanchor"),a("yanchor"),a("sizex"),a("sizey"),a("sizing"),a("opacity");for(var i={_fullLayout:n},l=["x","y"],u=0;u<2;u++){var c=l[u],g=A.coerceRef(p,s,i,c,"paper",void 0);g!=="paper"&&A.getFromId(i,g)._imgIndices.push(s._index),A.coercePosition(s,i,a,g,c,0)}return s}Y.exports=function(p,s){o(p,s,{name:"images",handleItemDefaults:_})}},60963:function(Y,O,e){var M=e(33428),A=e(43616),o=e(54460),w=e(79811),_=e(9616);Y.exports=function(p){var s,n,a=p._fullLayout,r=[],i={},l=[];for(n=0;n<a.images.length;n++){var u=a.images[n];if(u.visible)if(u.layer==="below"&&u.xref!=="paper"&&u.yref!=="paper"){s=w.ref2id(u.xref)+w.ref2id(u.yref);var c=a._plots[s];if(!c){l.push(u);continue}c.mainplot&&(s=c.mainplot.id),i[s]||(i[s]=[]),i[s].push(u)}else u.layer==="above"?r.push(u):l.push(u)}var g={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},f={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function b(h){var E=M.select(this);if(this._imgSrc!==h.source)if(E.attr("xmlns",_.svg),h.source&&h.source.slice(0,5)==="data:")E.attr("xlink:href",h.source),this._imgSrc=h.source;else{var k=new Promise((function(L){var P=new Image;function I(){E.remove(),L()}this.img=P,P.setAttribute("crossOrigin","anonymous"),P.onerror=I,P.onload=function(){var z=document.createElement("canvas");z.width=this.width,z.height=this.height,z.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var F=z.toDataURL("image/png");E.attr("xlink:href",F),L()},E.on("error",I),P.src=h.source,this._imgSrc=h.source}).bind(this));p._promises.push(k)}}function v(h){var E,k,L=M.select(this),P=o.getFromId(p,h.xref),I=o.getFromId(p,h.yref),z=o.getRefType(h.xref)==="domain",F=o.getRefType(h.yref)==="domain",U=a._size;E=P!==void 0?typeof h.xref=="string"&&z?P._length*h.sizex:Math.abs(P.l2p(h.sizex)-P.l2p(0)):h.sizex*U.w,k=I!==void 0?typeof h.yref=="string"&&F?I._length*h.sizey:Math.abs(I.l2p(h.sizey)-I.l2p(0)):h.sizey*U.h;var R,j,Z=E*g[h.xanchor].offset,B=k*f[h.yanchor].offset,q=g[h.xanchor].sizing+f[h.yanchor].sizing;switch(R=P!==void 0?typeof h.xref=="string"&&z?P._length*h.x+P._offset:P.r2p(h.x)+P._offset:h.x*U.w+U.l,R+=Z,j=I!==void 0?typeof h.yref=="string"&&F?I._length*(1-h.y)+I._offset:I.r2p(h.y)+I._offset:U.h-h.y*U.h+U.t,j+=B,h.sizing){case"fill":q+=" slice";break;case"stretch":q="none"}L.attr({x:R,y:j,width:E,height:k,preserveAspectRatio:q,opacity:h.opacity});var V=(P&&o.getRefType(h.xref)!=="domain"?P._id:"")+(I&&o.getRefType(h.yref)!=="domain"?I._id:"");A.setClipUrl(L,V?"clip"+a._uid+V:null,p)}var d=a._imageLowerLayer.selectAll("image").data(l),m=a._imageUpperLayer.selectAll("image").data(r);d.enter().append("image"),m.enter().append("image"),d.exit().remove(),m.exit().remove(),d.each(function(h){b.bind(this)(h),v.bind(this)(h)}),m.each(function(h){b.bind(this)(h),v.bind(this)(h)});var x=Object.keys(a._plots);for(n=0;n<x.length;n++){s=x[n];var y=a._plots[s];if(y.imagelayer){var T=y.imagelayer.selectAll("image").data(i[s]||[]);T.enter().append("image"),T.exit().remove(),T.each(function(h){b.bind(this)(h),v.bind(this)(h)})}}}},7402:function(Y,O,e){Y.exports={moduleType:"component",name:"images",layoutAttributes:e(65760),supplyLayoutDefaults:e(25024),includeBasePlot:e(36632)("images"),draw:e(60963),convertCoords:e(63556)}},3800:function(Y,O,e){var M=e(25376),A=e(22548);Y.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:A.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:M({editType:"legend"}),grouptitlefont:M({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:M({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},65196:function(Y){Y.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},77864:function(Y,O,e){var M=e(24040),A=e(3400),o=e(31780),w=e(45464),_=e(3800),p=e(64859),s=e(42451);function n(a,r,i,l){var u=r[a]||{},c=o.newContainer(i,a);function g(q,V){return A.coerce(u,c,_,q,V)}var f=A.coerceFont(g,"font",i.font);if(g("bgcolor",i.paper_bgcolor),g("bordercolor"),g("visible")){for(var b,v=function(q,V){var ne=b._input,ee=b;return A.coerce(ne,ee,w,q,V)},d=i.font||{},m=A.coerceFont(g,"grouptitlefont",A.extendFlat({},d,{size:Math.round(1.1*d.size)})),x=0,y=!1,T="normal",h=(i.shapes||[]).filter(function(q){return q.showlegend}),E=l.concat(h).filter(function(q){return a===(q.legend||"legend")}),k=0;k<E.length;k++)if((b=E[k]).visible){var L=b._isShape;(b.showlegend||b._dfltShowLegend&&!(b._module&&b._module.attributes&&b._module.attributes.showlegend&&b._module.attributes.showlegend.dflt===!1))&&(x++,b.showlegend&&(y=!0,(!L&&M.traceIs(b,"pie-like")||b._input.showlegend===!0)&&x++),A.coerceFont(v,"legendgrouptitle.font",m)),(!L&&M.traceIs(b,"bar")&&i.barmode==="stack"||["tonextx","tonexty"].indexOf(b.fill)!==-1)&&(T=s.isGrouped({traceorder:T})?"grouped+reversed":"reversed"),b.legendgroup!==void 0&&b.legendgroup!==""&&(T=s.isReversed({traceorder:T})?"reversed+grouped":"grouped")}var P=A.coerce(r,i,p,"showlegend",y&&x>(a==="legend"?1:0));if(P===!1&&(i[a]=void 0),(P!==!1||u.uirevision)&&(g("uirevision",i.uirevision),P!==!1)){g("borderwidth");var I,z,F,U=g("orientation")==="h",R=g("yref")==="paper",j=g("xref")==="paper",Z="left";if(U?(I=0,M.getComponentMethod("rangeslider","isVisible")(r.xaxis)?R?(z=1.1,F="bottom"):(z=1,F="top"):R?(z=-.1,F="top"):(z=0,F="bottom")):(z=1,F="auto",j?I=1.02:(I=1,Z="right")),A.coerce(u,c,{x:{valType:"number",editType:"legend",min:j?-2:0,max:j?3:1,dflt:I}},"x"),A.coerce(u,c,{y:{valType:"number",editType:"legend",min:R?-2:0,max:R?3:1,dflt:z}},"y"),g("traceorder",T),s.isGrouped(i[a])&&g("tracegroupgap"),g("entrywidth"),g("entrywidthmode"),g("itemsizing"),g("itemwidth"),g("itemclick"),g("itemdoubleclick"),g("groupclick"),g("xanchor",Z),g("yanchor",F),g("valign"),A.noneOrAll(u,c,["x","y"]),g("title.text")){g("title.side",U?"left":"top");var B=A.extendFlat({},f,{size:A.bigFont(f.size)});A.coerceFont(g,"title.font",B)}}}}Y.exports=function(a,r,i){var l,u=i.slice(),c=r.shapes;if(c)for(l=0;l<c.length;l++){var g=c[l];if(g.showlegend){var f={_input:g._input,visible:g.visible,showlegend:g.showlegend,legend:g.legend};u.push(f)}}var b=["legend"];for(l=0;l<u.length;l++)A.pushUnique(b,u[l].legend);for(r._legends=[],l=0;l<b.length;l++){var v=b[l];n(v,a,r,u),r[v]&&r[v].visible&&(r[v]._id=v),r._legends.push(v)}}},31140:function(Y,O,e){var M=e(33428),A=e(3400),o=e(7316),w=e(24040),_=e(95924),p=e(86476),s=e(43616),n=e(76308),a=e(72736),r=e(33048),i=e(65196),l=e(84284),u=l.LINE_SPACING,c=l.FROM_TL,g=l.FROM_BR,f=e(35456),b=e(2012),v=e(42451),d=1,m=/^legend[0-9]*$/;function x(F,U){var R,j,Z=U||{},B=F._fullLayout,q=z(Z),V=Z._inHover;if(V?(j=Z.layer,R="hover"):(j=B._infolayer,R=q),j){var ne;if(R+=B._uid,F._legendMouseDownTime||(F._legendMouseDownTime=0),V){if(!Z.entries)return;ne=f(Z.entries,Z)}else{for(var ee=(F.calcdata||[]).slice(),$=B.shapes,J=0;J<$.length;J++){var K=$[J];if(K.showlegend){var te={_isShape:!0,_fullInput:K,index:K._index,name:K.name||K.label.text||"shape "+K._index,legend:K.legend,legendgroup:K.legendgroup,legendgrouptitle:K.legendgrouptitle,legendrank:K.legendrank,legendwidth:K.legendwidth,showlegend:K.showlegend,visible:K.visible,opacity:K.opacity,mode:K.type==="line"?"lines":"markers",line:K.line,marker:{line:K.line,color:K.fillcolor,size:12,symbol:K.type==="rect"?"square":K.type==="circle"?"circle":"hexagon2"}};ee.push([{trace:te}])}}ne=B.showlegend&&f(ee,Z,B._legends.length>1)}var ie=B.hiddenlabels||[];if(!(V||B.showlegend&&ne.length))return j.selectAll("."+q).remove(),B._topdefs.select("#"+R).remove(),o.autoMargin(F,q);var ae=A.ensureSingle(j,"g",q,function(we){V||we.attr("pointer-events","all")}),se=A.ensureSingleById(B._topdefs,"clipPath",R,function(we){we.append("rect")}),ce=A.ensureSingle(ae,"rect","bg",function(we){we.attr("shape-rendering","crispEdges")});ce.call(n.stroke,Z.bordercolor).call(n.fill,Z.bgcolor).style("stroke-width",Z.borderwidth+"px");var de,ge=A.ensureSingle(ae,"g","scrollbox"),ve=Z.title;Z._titleWidth=0,Z._titleHeight=0,ve.text?((de=A.ensureSingle(ge,"text",q+"titletext")).attr("text-anchor","start").call(s.font,ve.font).text(ve.text),L(de,ge,F,Z,d)):ge.selectAll("."+q+"titletext").remove();var be=A.ensureSingle(ae,"rect","scrollbar",function(we){we.attr(i.scrollBarEnterAttrs).call(n.fill,i.scrollBarColor)}),me=ge.selectAll("g.groups").data(ne);me.enter().append("g").attr("class","groups"),me.exit().remove();var Se=me.selectAll("g.traces").data(A.identity);Se.enter().append("g").attr("class","traces"),Se.exit().remove(),Se.style("opacity",function(we){var _e=we[0].trace;return w.traceIs(_e,"pie-like")?ie.indexOf(we[0].label)!==-1?.5:1:_e.visible==="legendonly"?.5:1}).each(function(){M.select(this).call(h,F,Z)}).call(b,F,Z).each(function(){V||M.select(this).call(k,F,q)}),A.syncOrAsync([o.previousPromises,function(){return function(we,_e,oe,le){var pe=we._fullLayout,Ee=z(le);le||(le=pe[Ee]);var Te=pe._size,Me=v.isVertical(le),Le=v.isGrouped(le),Ie=le.entrywidthmode==="fraction",he=le.borderwidth,xe=2*he,ke=i.itemGap,ze=le.itemwidth+2*ke,Re=2*(he+ke),Oe=I(le),Ve=le.y<0||le.y===0&&Oe==="top",qe=le.y>1||le.y===1&&Oe==="bottom",Je=le.tracegroupgap,ot={};le._maxHeight=Math.max(Ve||qe?pe.height/2:Te.h,30);var rt=0;le._width=0,le._height=0;var dt=function(vt){var mt=0,ft=0,Et=vt.title.side;return Et&&(Et.indexOf("left")!==-1&&(mt=vt._titleWidth),Et.indexOf("top")!==-1&&(ft=vt._titleHeight)),[mt,ft]}(le);if(Me)oe.each(function(vt){var mt=vt[0].height;s.setTranslate(this,he+dt[0],he+dt[1]+le._height+mt/2+ke),le._height+=mt,le._width=Math.max(le._width,vt[0].width)}),rt=ze+le._width,le._width+=ke+ze+xe,le._height+=Re,Le&&(_e.each(function(vt,mt){s.setTranslate(this,0,mt*le.tracegroupgap)}),le._height+=(le._lgroupsLength-1)*le.tracegroupgap);else{var _t=P(le),yt=le.x<0||le.x===0&&_t==="right",et=le.x>1||le.x===1&&_t==="left",nt=qe||Ve,At=pe.width/2;le._maxWidth=Math.max(yt?nt&&_t==="left"?Te.l+Te.w:At:et?nt&&_t==="right"?Te.r+Te.w:At:Te.w,2*ze);var Rt=0,Ft=0;oe.each(function(vt){var mt=y(vt,le,ze);Rt=Math.max(Rt,mt),Ft+=mt}),rt=null;var It=0;if(Le){var Ge=0,Ye=0,Ne=0;_e.each(function(){var vt=0,mt=0;M.select(this).selectAll("g.traces").each(function(Et){var Tt=y(Et,le,ze),xt=Et[0].height;s.setTranslate(this,dt[0],dt[1]+he+ke+xt/2+mt),mt+=xt,vt=Math.max(vt,Tt),ot[Et[0].trace.legendgroup]=vt});var ft=vt+ke;Ye>0&&ft+he+Ye>le._maxWidth?(It=Math.max(It,Ye),Ye=0,Ne+=Ge+Je,Ge=mt):Ge=Math.max(Ge,mt),s.setTranslate(this,Ye,Ne),Ye+=ft}),le._width=Math.max(It,Ye)+he,le._height=Ne+Ge+Re}else{var We=oe.size(),st=Ft+xe+(We-1)*ke<le._maxWidth,it=0,Fe=0,Be=0,at=0;oe.each(function(vt){var mt=vt[0].height,ft=y(vt,le,ze),Et=st?ft:Rt;Ie||(Et+=ke),Et+he+Fe-ke>=le._maxWidth&&(It=Math.max(It,at),Fe=0,Be+=it,le._height+=it,it=0),s.setTranslate(this,dt[0]+he+Fe,dt[1]+he+Be+mt/2+ke),at=Fe+ft+ke,Fe+=Et,it=Math.max(it,mt)}),st?(le._width=Fe+xe,le._height=it+Re):(le._width=Math.max(It,at)+xe,le._height+=it+Re)}}le._width=Math.ceil(Math.max(le._width+dt[0],le._titleWidth+2*(he+i.titlePad))),le._height=Math.ceil(Math.max(le._height+dt[1],le._titleHeight+2*(he+i.itemGap))),le._effHeight=Math.min(le._height,le._maxHeight);var Ze=we._context.edits,ht=Ze.legendText||Ze.legendPosition;oe.each(function(vt){var mt=M.select(this).select("."+Ee+"toggle"),ft=vt[0].height,Et=vt[0].trace.legendgroup,Tt=y(vt,le,ze);Le&&Et!==""&&(Tt=ot[Et]);var xt=ht?ze:rt||Tt;Me||Ie||(xt+=ke/2),s.setRect(mt,0,-ft/2,xt,ft)})}(F,me,Se,Z)},function(){var we,_e,oe,le,pe=B._size,Ee=Z.borderwidth,Te=Z.xref==="paper",Me=Z.yref==="paper";if(ve.text&&function(nt,At,Rt){if(At.title.side==="top center"||At.title.side==="top right"){var Ft=At.title.font.size*u,It=0,Ge=nt.node(),Ye=s.bBox(Ge).width;At.title.side==="top center"?It=.5*(At._width-2*Rt-2*i.titlePad-Ye):At.title.side==="top right"&&(It=At._width-2*Rt-2*i.titlePad-Ye),a.positionText(nt,Rt+i.titlePad+It,Rt+Ft)}}(de,Z,Ee),!V){var Le,Ie;Le=Te?pe.l+pe.w*Z.x-c[P(Z)]*Z._width:B.width*Z.x-c[P(Z)]*Z._width,Ie=Me?pe.t+pe.h*(1-Z.y)-c[I(Z)]*Z._effHeight:B.height*(1-Z.y)-c[I(Z)]*Z._effHeight;var he=function(nt,At,Rt,Ft){var It=nt._fullLayout,Ge=It[At],Ye=P(Ge),Ne=I(Ge),We=Ge.xref==="paper",st=Ge.yref==="paper";nt._fullLayout._reservedMargin[At]={};var it=Ge.y<.5?"b":"t",Fe=Ge.x<.5?"l":"r",Be={r:It.width-Rt,l:Rt+Ge._width,b:It.height-Ft,t:Ft+Ge._effHeight};if(We&&st)return o.autoMargin(nt,At,{x:Ge.x,y:Ge.y,l:Ge._width*c[Ye],r:Ge._width*g[Ye],b:Ge._effHeight*g[Ne],t:Ge._effHeight*c[Ne]});We?nt._fullLayout._reservedMargin[At][it]=Be[it]:st||Ge.orientation==="v"?nt._fullLayout._reservedMargin[At][Fe]=Be[Fe]:nt._fullLayout._reservedMargin[At][it]=Be[it]}(F,q,Le,Ie);if(he)return;if(B.margin.autoexpand){var xe=Le,ke=Ie;Le=Te?A.constrain(Le,0,B.width-Z._width):xe,Ie=Me?A.constrain(Ie,0,B.height-Z._effHeight):ke,Le!==xe&&A.log("Constrain "+q+".x to make legend fit inside graph"),Ie!==ke&&A.log("Constrain "+q+".y to make legend fit inside graph")}s.setTranslate(ae,Le,Ie)}if(be.on(".drag",null),ae.on("wheel",null),V||Z._height<=Z._maxHeight||F._context.staticPlot){var ze=Z._effHeight;V&&(ze=Z._height),ce.attr({width:Z._width-Ee,height:ze-Ee,x:Ee/2,y:Ee/2}),s.setTranslate(ge,0,0),se.select("rect").attr({width:Z._width-2*Ee,height:ze-2*Ee,x:Ee,y:Ee}),s.setClipUrl(ge,R,F),s.setRect(be,0,0,0,0),delete Z._scrollY}else{var Re,Oe,Ve,qe=Math.max(i.scrollBarMinHeight,Z._effHeight*Z._effHeight/Z._height),Je=Z._effHeight-qe-2*i.scrollBarMargin,ot=Z._height-Z._effHeight,rt=Je/ot,dt=Math.min(Z._scrollY||0,ot);ce.attr({width:Z._width-2*Ee+i.scrollBarWidth+i.scrollBarMargin,height:Z._effHeight-Ee,x:Ee/2,y:Ee/2}),se.select("rect").attr({width:Z._width-2*Ee+i.scrollBarWidth+i.scrollBarMargin,height:Z._effHeight-2*Ee,x:Ee,y:Ee+dt}),s.setClipUrl(ge,R,F),et(dt,qe,rt),ae.on("wheel",function(){et(dt=A.constrain(Z._scrollY+M.event.deltaY/Je*ot,0,ot),qe,rt),dt!==0&&dt!==ot&&M.event.preventDefault()});var _t=M.behavior.drag().on("dragstart",function(){var nt=M.event.sourceEvent;Re=nt.type==="touchstart"?nt.changedTouches[0].clientY:nt.clientY,Ve=dt}).on("drag",function(){var nt=M.event.sourceEvent;nt.buttons===2||nt.ctrlKey||(Oe=nt.type==="touchmove"?nt.changedTouches[0].clientY:nt.clientY,dt=function(At,Rt,Ft){var It=(Ft-Rt)/rt+At;return A.constrain(It,0,ot)}(Ve,Re,Oe),et(dt,qe,rt))});be.call(_t);var yt=M.behavior.drag().on("dragstart",function(){var nt=M.event.sourceEvent;nt.type==="touchstart"&&(Re=nt.changedTouches[0].clientY,Ve=dt)}).on("drag",function(){var nt=M.event.sourceEvent;nt.type==="touchmove"&&(Oe=nt.changedTouches[0].clientY,dt=function(At,Rt,Ft){var It=(Rt-Ft)/rt+At;return A.constrain(It,0,ot)}(Ve,Re,Oe),et(dt,qe,rt))});ge.call(yt)}function et(nt,At,Rt){Z._scrollY=F._fullLayout[q]._scrollY=nt,s.setTranslate(ge,0,-nt),s.setRect(be,Z._width,i.scrollBarMargin+nt*Rt,i.scrollBarWidth,At),se.select("rect").attr("y",Ee+nt)}F._context.edits.legendPosition&&(ae.classed("cursor-move",!0),p.init({element:ae.node(),gd:F,prepFn:function(){var nt=s.getTranslate(ae);oe=nt.x,le=nt.y},moveFn:function(nt,At){var Rt=oe+nt,Ft=le+At;s.setTranslate(ae,Rt,Ft),we=p.align(Rt,Z._width,pe.l,pe.l+pe.w,Z.xanchor),_e=p.align(Ft+Z._height,-Z._height,pe.t+pe.h,pe.t,Z.yanchor)},doneFn:function(){if(we!==void 0&&_e!==void 0){var nt={};nt[q+".x"]=we,nt[q+".y"]=_e,w.call("_guiRelayout",F,nt)}},clickFn:function(nt,At){var Rt=j.selectAll("g.traces").filter(function(){var Ft=this.getBoundingClientRect();return At.clientX>=Ft.left&&At.clientX<=Ft.right&&At.clientY>=Ft.top&&At.clientY<=Ft.bottom});Rt.size()>0&&T(F,ae,Rt,nt,At)}}))}],F)}}function y(F,U,R){var j=F[0],Z=j.width,B=U.entrywidthmode,q=j.trace.legendwidth||U.entrywidth;return B==="fraction"?U._maxWidth*q:R+(q||Z)}function T(F,U,R,j,Z){var B=R.data()[0][0].trace,q={event:Z,node:R.node(),curveNumber:B.index,expandedIndex:B._expandedIndex,data:F.data,layout:F.layout,frames:F._transitionData._frames,config:F._context,fullData:F._fullData,fullLayout:F._fullLayout};B._group&&(q.group=B._group),w.traceIs(B,"pie-like")&&(q.label=R.datum()[0].label);var V=_.triggerHandler(F,"plotly_legendclick",q);if(j===1){if(V===!1)return;U._clickTimeout=setTimeout(function(){F._fullLayout&&r(R,F,j)},F._context.doubleClickDelay)}else j===2&&(U._clickTimeout&&clearTimeout(U._clickTimeout),F._legendMouseDownTime=0,_.triggerHandler(F,"plotly_legenddoubleclick",q)!==!1&&V!==!1&&r(R,F,j))}function h(F,U,R){var j,Z,B=z(R),q=F.data()[0][0],V=q.trace,ne=w.traceIs(V,"pie-like"),ee=!R._inHover&&U._context.edits.legendText&&!ne,$=R._maxNameLength;q.groupTitle?(j=q.groupTitle.text,Z=q.groupTitle.font):(Z=R.font,R.entries?j=q.text:(j=ne?q.label:V.name,V._meta&&(j=A.templateString(j,V._meta))));var J=A.ensureSingle(F,"text",B+"text");J.attr("text-anchor","start").call(s.font,Z).text(ee?E(j,$):j);var K=R.itemwidth+2*i.itemGap;a.positionText(J,K,0),ee?J.call(a.makeEditable,{gd:U,text:j}).call(L,F,U,R).on("edit",function(te){this.text(E(te,$)).call(L,F,U,R);var ie=q.trace._fullInput||{},ae={};if(w.hasTransform(ie,"groupby")){var se=w.getTransformIndices(ie,"groupby"),ce=se[se.length-1],de=A.keyedContainer(ie,"transforms["+ce+"].styles","target","value.name");de.set(q.trace._group,te),ae=de.constructUpdate()}else ae.name=te;return ie._isShape?w.call("_guiRelayout",U,"shapes["+V.index+"].name",ae.name):w.call("_guiRestyle",U,ae,V.index)}):L(J,F,U,R)}function E(F,U){var R=Math.max(4,U);if(F&&F.trim().length>=R/2)return F;for(var j=R-(F=F||"").length;j>0;j--)F+=" ";return F}function k(F,U,R){var j,Z=U._context.doubleClickDelay,B=1,q=A.ensureSingle(F,"rect",R+"toggle",function(V){U._context.staticPlot||V.style("cursor","pointer").attr("pointer-events","all"),V.call(n.fill,"rgba(0,0,0,0)")});U._context.staticPlot||(q.on("mousedown",function(){(j=new Date().getTime())-U._legendMouseDownTime<Z?B+=1:(B=1,U._legendMouseDownTime=j)}),q.on("mouseup",function(){if(!U._dragged&&!U._editing){var V=U._fullLayout[R];new Date().getTime()-U._legendMouseDownTime>Z&&(B=Math.max(B-1,1)),T(U,V,F,B,M.event)}}))}function L(F,U,R,j,Z){j._inHover&&F.attr("data-notex",!0),a.convertToTspans(F,R,function(){(function(B,q,V,ne){var ee=B.data()[0][0];if(V._inHover||!ee||ee.trace.showlegend){var $=B.select("g[class*=math-group]"),J=$.node(),K=z(V);V||(V=q._fullLayout[K]);var te,ie,ae=V.borderwidth,se=(ne===d?V.title.font:ee.groupTitle?ee.groupTitle.font:V.font).size*u;if(J){var ce=s.bBox(J);te=ce.height,ie=ce.width,ne===d?s.setTranslate($,ae,ae+.75*te):s.setTranslate($,0,.25*te)}else{var de="."+K+(ne===d?"title":"")+"text",ge=B.select(de),ve=a.lineCount(ge),be=ge.node();if(te=se*ve,ie=be?s.bBox(be).width:0,ne===d)V.title.side==="left"&&(ie+=2*i.itemGap),a.positionText(ge,ae+i.titlePad,ae+se);else{var me=2*i.itemGap+V.itemwidth;ee.groupTitle&&(me=i.itemGap,ie-=V.itemwidth),a.positionText(ge,me,-se*((ve-1)/2-.3))}}ne===d?(V._titleWidth=ie,V._titleHeight=te):(ee.lineHeight=se,ee.height=Math.max(te,16)+3,ee.width=ie)}else B.remove()})(U,R,j,Z)})}function P(F){return A.isRightAnchor(F)?"right":A.isCenterAnchor(F)?"center":"left"}function I(F){return A.isBottomAnchor(F)?"bottom":A.isMiddleAnchor(F)?"middle":"top"}function z(F){return F._id||"legend"}Y.exports=function(F,U){if(U)x(F,U);else{var R=F._fullLayout,j=R._legends;R._infolayer.selectAll('[class^="legend"]').each(function(){var q=M.select(this),V=q.attr("class").split(" ")[0];V.match(m)&&j.indexOf(V)===-1&&q.remove()});for(var Z=0;Z<j.length;Z++){var B=j[Z];x(F,F._fullLayout[B])}}}},35456:function(Y,O,e){var M=e(24040),A=e(42451);Y.exports=function(o,w,_){var p,s,n=w._inHover,a=A.isGrouped(w),r=A.isReversed(w),i={},l=[],u=!1,c={},g=0,f=0;function b(j,Z,B){if(w.visible!==!1&&(!_||j===w._id))if(Z!==""&&A.isGrouped(w))l.indexOf(Z)===-1?(l.push(Z),u=!0,i[Z]=[B]):i[Z].push(B);else{var q="~~i"+g;l.push(q),i[q]=[B],g++}}for(p=0;p<o.length;p++){var v=o[p],d=v[0],m=d.trace,x=m.legend,y=m.legendgroup;if(n||m.visible&&m.showlegend)if(M.traceIs(m,"pie-like"))for(c[y]||(c[y]={}),s=0;s<v.length;s++){var T=v[s].label;c[y][T]||(b(x,y,{label:T,color:v[s].color,i:v[s].i,trace:m,pts:v[s].pts}),c[y][T]=!0,f=Math.max(f,(T||"").length))}else b(x,y,d),f=Math.max(f,(m.name||"").length)}if(!l.length)return[];var h=!u||!a,E=[];for(p=0;p<l.length;p++){var k=i[l[p]];h?E.push(k[0]):E.push(k)}for(h&&(E=[E]),p=0;p<E.length;p++){var L=1/0;for(s=0;s<E[p].length;s++){var P=E[p][s].trace.legendrank;L>P&&(L=P)}E[p][0]._groupMinRank=L,E[p][0]._preGroupSort=p}var I=function(j,Z){return j.trace.legendrank-Z.trace.legendrank||j._preSort-Z._preSort};for(E.forEach(function(j,Z){j[0]._preGroupSort=Z}),E.sort(function(j,Z){return j[0]._groupMinRank-Z[0]._groupMinRank||j[0]._preGroupSort-Z[0]._preGroupSort}),p=0;p<E.length;p++){E[p].forEach(function(j,Z){j._preSort=Z}),E[p].sort(I);var z=E[p][0].trace,F=null;for(s=0;s<E[p].length;s++){var U=E[p][s].trace.legendgrouptitle;if(U&&U.text){F=U,n&&(U.font=w._groupTitleFont);break}}if(r&&E[p].reverse(),F){var R=!1;for(s=0;s<E[p].length;s++)if(M.traceIs(E[p][s].trace,"pie-like")){R=!0;break}E[p].unshift({i:-1,groupTitle:F,noClick:R,trace:{showlegend:z.showlegend,legendgroup:z.legendgroup,visible:w.groupclick==="toggleitem"||z.visible}})}for(s=0;s<E[p].length;s++)E[p][s]=[E[p][s]]}return w._lgroupsLength=E.length,w._maxNameLength=f,E}},33048:function(Y,O,e){var M=e(24040),A=e(3400),o=A.pushUnique,w=!0;Y.exports=function(_,p,s){var n=p._fullLayout;if(!p._dragged&&!p._editing){var a,r=n.legend.itemclick,i=n.legend.itemdoubleclick,l=n.legend.groupclick;if(s===1&&r==="toggle"&&i==="toggleothers"&&w&&p.data&&p._context.showTips&&A.notifier(A._(p,"Double-click on legend to isolate one trace"),"long"),w=!1,s===1?a=r:s===2&&(a=i),a){var u=l==="togglegroup",c=n.hiddenlabels?n.hiddenlabels.slice():[],g=_.data()[0][0];if(!g.groupTitle||!g.noClick){var f=p._fullData,b=(n.shapes||[]).filter(function(_e){return _e.showlegend}),v=f.concat(b),d=g.trace;d._isShape&&(d=d._fullInput);var m,x,y,T,h,E=d.legendgroup,k={},L=[],P=[],I=[],z=(n.shapes||[]).map(function(_e){return _e._input}),F=!1,U=d.legend,R=d._fullInput;if(R&&R._isShape||!M.traceIs(d,"pie-like")){var j,Z=E&&E.length,B=[];if(Z)for(m=0;m<v.length;m++)(j=v[m]).visible&&j.legendgroup===E&&B.push(m);if(a==="toggle"){var q;switch(d.visible){case!0:q="legendonly";break;case!1:q=!1;break;case"legendonly":q=!0}if(Z)if(u)for(m=0;m<v.length;m++){var V=v[m];V.visible!==!1&&V.legendgroup===E&&we(V,q)}else we(d,q);else we(d,q)}else if(a==="toggleothers"){var ne,ee,$,J,K=!0;for(m=0;m<v.length;m++)if(ne=(J=v[m])===d,ee=J.showlegend!==!0,!(ne||ee||Z&&J.legendgroup===E||J.legend!==U||J.visible!==!0||M.traceIs(J,"notLegendIsolatable"))){K=!1;break}for(m=0;m<v.length;m++)if((J=v[m]).visible!==!1&&J.legend===U&&!M.traceIs(J,"notLegendIsolatable"))switch(d.visible){case"legendonly":we(J,!0);break;case!0:$=!!K||"legendonly",ne=J===d,ee=J.showlegend!==!0&&!J.legendgroup,we(J,!!(ne||Z&&J.legendgroup===E||ee)||$)}}for(m=0;m<P.length;m++)if(y=P[m]){var te=y.constructUpdate(),ie=Object.keys(te);for(x=0;x<ie.length;x++)T=ie[x],(k[T]=k[T]||[])[I[m]]=te[T]}for(h=Object.keys(k),m=0;m<h.length;m++)for(T=h[m],x=0;x<L.length;x++)k[T].hasOwnProperty(x)||(k[T][x]=void 0);F?M.call("_guiUpdate",p,k,{shapes:z},L):M.call("_guiRestyle",p,k,L)}else{var ae=g.label,se=c.indexOf(ae);if(a==="toggle")se===-1?c.push(ae):c.splice(se,1);else if(a==="toggleothers"){var ce=se!==-1,de=[];for(m=0;m<p.calcdata.length;m++){var ge=p.calcdata[m];for(x=0;x<ge.length;x++){var ve=ge[x].label;U===ge[0].trace.legend&&ae!==ve&&(c.indexOf(ve)===-1&&(ce=!0),o(c,ve),de.push(ve))}}if(!ce)for(var be=0;be<de.length;be++){var me=c.indexOf(de[be]);me!==-1&&c.splice(me,1)}}M.call("_guiRelayout",p,"hiddenlabels",c)}}}}function Se(_e,oe){var le=L.indexOf(_e),pe=k.visible;return pe||(pe=k.visible=[]),L.indexOf(_e)===-1&&(L.push(_e),le=L.length-1),pe[le]=oe,le}function we(_e,oe){if(!g.groupTitle||u){var le,pe=_e._fullInput||_e,Ee=pe._isShape,Te=pe.index;if(Te===void 0&&(Te=pe._index),M.hasTransform(pe,"groupby")){var Me=P[Te];if(!Me){var Le=M.getTransformIndices(pe,"groupby"),Ie=Le[Le.length-1];Me=A.keyedContainer(pe,"transforms["+Ie+"].styles","target","value.visible"),P[Te]=Me}var he=Me.get(_e._group);he===void 0&&(he=!0),he!==!1&&Me.set(_e._group,oe),I[Te]=Se(Te,pe.visible!==!1)}else{var xe=pe.visible!==!1&&oe;Ee?(le=xe,z[Te].visible=le,F=!0):Se(Te,xe)}}}}},42451:function(Y,O){O.isGrouped=function(e){return(e.traceorder||"").indexOf("grouped")!==-1},O.isVertical=function(e){return e.orientation!=="h"},O.isReversed=function(e){return(e.traceorder||"").indexOf("reversed")!==-1}},2780:function(Y,O,e){Y.exports={moduleType:"component",name:"legend",layoutAttributes:e(3800),supplyLayoutDefaults:e(77864),draw:e(31140),style:e(2012)}},2012:function(Y,O,e){var M=e(33428),A=e(24040),o=e(3400),w=o.strTranslate,_=e(43616),p=e(76308),s=e(94288).extractOpts,n=e(43028),a=e(10528),r=e(69656).castOption,i=e(65196);function l(g,f){return(f?"radial":"horizontal")+(g?"":"reversed")}function u(g){var f=g[0].trace,b=f.contours,v=n.hasLines(f),d=n.hasMarkers(f),m=f.visible&&f.fill&&f.fill!=="none",x=!1,y=!1;if(b){var T=b.coloring;T==="lines"?x=!0:v=T==="none"||T==="heatmap"||b.showlines,b.type==="constraint"?m=b._operation!=="=":T!=="fill"&&T!=="heatmap"||(y=!0)}return{showMarker:d,showLine:v,showFill:m,showGradientLine:x,showGradientFill:y,anyLine:v||x,anyFill:m||y}}function c(g,f,b){return g&&o.isArrayOrTypedArray(g)?f:g>b?b:g}Y.exports=function(g,f,b){var v=f._fullLayout;b||(b=v.legend);var d=b.itemsizing==="constant",m=b.itemwidth,x=(m+2*i.itemGap)/2,y=w(x,0),T=function(k,L,P,I){var z;if(k+1)z=k;else{if(!(L&&L.width>0))return 0;z=L.width}return d?I:Math.min(z,P)};function h(k,L,P){var I=k[0].trace,z=I.marker||{},F=z.line||{},U=z.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",R=P?I.visible&&I.type===P:A.traceIs(I,"bar"),j=M.select(L).select("g.legendpoints").selectAll("path.legend"+P).data(R?[k]:[]);j.enter().append("path").classed("legend"+P,!0).attr("d",U).attr("transform",y),j.exit().remove(),j.each(function(Z){var B=M.select(this),q=Z[0],V=T(q.mlw,z.line,5,2);B.style("stroke-width",V+"px");var ne=q.mcc;if(!b._inHover&&"mc"in q){var ee=s(z),$=ee.mid;$===void 0&&($=(ee.max+ee.min)/2),ne=_.tryColorscale(z,"")($)}var J=ne||q.mc||z.color,K=z.pattern,te=K&&_.getPatternAttr(K.shape,0,"");if(te){var ie=_.getPatternAttr(K.bgcolor,0,null),ae=_.getPatternAttr(K.fgcolor,0,null),se=K.fgopacity,ce=c(K.size,8,10),de=c(K.solidity,.5,1),ge="legend-"+I.uid;B.call(_.pattern,"legend",f,ge,te,ce,de,ne,K.fillmode,ie,ae,se)}else B.call(p.fill,J);V&&p.stroke(B,q.mlc||F.color)})}function E(k,L,P){var I=k[0],z=I.trace,F=P?z.visible&&z.type===P:A.traceIs(z,P),U=M.select(L).select("g.legendpoints").selectAll("path.legend"+P).data(F?[k]:[]);if(U.enter().append("path").classed("legend"+P,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",y),U.exit().remove(),U.size()){var R=z.marker||{},j=T(r(R.line.width,I.pts),R.line,5,2),Z="pieLike",B=o.minExtend(z,{marker:{line:{width:j}}},Z),q=o.minExtend(I,{trace:B},Z);a(U,q,B,f)}}g.each(function(k){var L=M.select(this),P=o.ensureSingle(L,"g","layers");P.style("opacity",k[0].trace.opacity);var I=b.valign,z=k[0].lineHeight,F=k[0].height;if(I!=="middle"&&z&&F){var U={top:1,bottom:-1}[I]*(.5*(z-F+3));P.attr("transform",w(0,U))}else P.attr("transform",null);P.selectAll("g.legendfill").data([k]).enter().append("g").classed("legendfill",!0),P.selectAll("g.legendlines").data([k]).enter().append("g").classed("legendlines",!0);var R=P.selectAll("g.legendsymbols").data([k]);R.enter().append("g").classed("legendsymbols",!0),R.selectAll("g.legendpoints").data([k]).enter().append("g").classed("legendpoints",!0)}).each(function(k){var L,P=k[0].trace,I=[];if(P.visible)switch(P.type){case"histogram2d":case"heatmap":I=[["M-15,-2V4H15V-2Z"]],L=!0;break;case"choropleth":case"choroplethmapbox":I=[["M-6,-6V6H6V-6Z"]],L=!0;break;case"densitymapbox":I=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],L="radial";break;case"cone":I=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],L=!1;break;case"streamtube":I=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],L=!1;break;case"surface":I=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],L=!0;break;case"mesh3d":I=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],L=!1;break;case"volume":I=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],L=!0;break;case"isosurface":I=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],L=!1}var z=M.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(I);z.enter().append("path").classed("legend3dandfriends",!0).attr("transform",y).style("stroke-miterlimit",1),z.exit().remove(),z.each(function(F,U){var R,j=M.select(this),Z=s(P),B=Z.colorscale,q=Z.reversescale;if(B){if(!L){var V=B.length;R=U===0?B[q?V-1:0][1]:U===1?B[q?0:V-1][1]:B[Math.floor((V-1)/2)][1]}}else{var ne=P.vertexcolor||P.facecolor||P.color;R=o.isArrayOrTypedArray(ne)?ne[U]||ne[0]:ne}j.attr("d",F[0]),R?j.call(p.fill,R):j.call(function(ee){if(ee.size()){var $="legendfill-"+P.uid;_.gradient(ee,f,$,l(q,L==="radial"),B,"fill")}})})}).each(function(k){var L=k[0].trace,P=L.type==="waterfall";if(k[0]._distinct&&P){var I=k[0].trace[k[0].dir].marker;return k[0].mc=I.color,k[0].mlw=I.line.width,k[0].mlc=I.line.color,h(k,this,"waterfall")}var z=[];L.visible&&P&&(z=k[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var F=M.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(z);F.enter().append("path").classed("legendwaterfall",!0).attr("transform",y).style("stroke-miterlimit",1),F.exit().remove(),F.each(function(U){var R=M.select(this),j=L[U[0]].marker,Z=T(void 0,j.line,5,2);R.attr("d",U[1]).style("stroke-width",Z+"px").call(p.fill,j.color),Z&&R.call(p.stroke,j.line.color)})}).each(function(k){h(k,this,"funnel")}).each(function(k){h(k,this)}).each(function(k){var L=k[0].trace,P=M.select(this).select("g.legendpoints").selectAll("path.legendbox").data(L.visible&&A.traceIs(L,"box-violin")?[k]:[]);P.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",y),P.exit().remove(),P.each(function(){var I=M.select(this);if(L.boxpoints!=="all"&&L.points!=="all"||p.opacity(L.fillcolor)!==0||p.opacity((L.line||{}).color)!==0){var z=T(void 0,L.line,5,2);I.style("stroke-width",z+"px").call(p.fill,L.fillcolor),z&&p.stroke(I,L.line.color)}else{var F=o.minExtend(L,{marker:{size:d?12:o.constrain(L.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});P.call(_.pointStyle,F,f)}})}).each(function(k){E(k,this,"funnelarea")}).each(function(k){E(k,this,"pie")}).each(function(k){var L,P,I=u(k),z=I.showFill,F=I.showLine,U=I.showGradientLine,R=I.showGradientFill,j=I.anyFill,Z=I.anyLine,B=k[0],q=B.trace,V=s(q),ne=V.colorscale,ee=V.reversescale,$=n.hasMarkers(q)||!j?"M5,0":Z?"M5,-2":"M5,-3",J=M.select(this),K=J.select(".legendfill").selectAll("path").data(z||R?[k]:[]);if(K.enter().append("path").classed("js-fill",!0),K.exit().remove(),K.attr("d",$+"h"+m+"v6h-"+m+"z").call(function(ae){if(ae.size())if(z)_.fillGroupStyle(ae,f);else{var se="legendfill-"+q.uid;_.gradient(ae,f,se,l(ee),ne,"fill")}}),F||U){var te=T(void 0,q.line,10,5);P=o.minExtend(q,{line:{width:te}}),L=[o.minExtend(B,{trace:P})]}var ie=J.select(".legendlines").selectAll("path").data(F||U?[L]:[]);ie.enter().append("path").classed("js-line",!0),ie.exit().remove(),ie.attr("d",$+(U?"l"+m+",0.0001":"h"+m)).call(F?_.lineGroupStyle:function(ae){if(ae.size()){var se="legendline-"+q.uid;_.lineGroupStyle(ae),_.gradient(ae,f,se,l(ee),ne,"stroke")}})}).each(function(k){var L,P,I=u(k),z=I.anyFill,F=I.anyLine,U=I.showLine,R=I.showMarker,j=k[0],Z=j.trace,B=!R&&!F&&!z&&n.hasText(Z);function q(ie,ae,se,ce){var de=o.nestedProperty(Z,ie).get(),ge=o.isArrayOrTypedArray(de)&&ae?ae(de):de;if(d&&ge&&ce!==void 0&&(ge=ce),se){if(ge<se[0])return se[0];if(ge>se[1])return se[1]}return ge}function V(ie){return j._distinct&&j.index&&ie[j.index]?ie[j.index]:ie[0]}if(R||B||U){var ne={},ee={};if(R){ne.mc=q("marker.color",V),ne.mx=q("marker.symbol",V),ne.mo=q("marker.opacity",o.mean,[.2,1]),ne.mlc=q("marker.line.color",V),ne.mlw=q("marker.line.width",o.mean,[0,5],2),ee.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var $=q("marker.size",o.mean,[2,16],12);ne.ms=$,ee.marker.size=$}U&&(ee.line={width:q("line.width",V,[0,10],5)}),B&&(ne.tx="Aa",ne.tp=q("textposition",V),ne.ts=10,ne.tc=q("textfont.color",V),ne.tf=q("textfont.family",V)),L=[o.minExtend(j,ne)],(P=o.minExtend(Z,ee)).selectedpoints=null,P.texttemplate=null}var J=M.select(this).select("g.legendpoints"),K=J.selectAll("path.scatterpts").data(R?L:[]);K.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",y),K.exit().remove(),K.call(_.pointStyle,P,f),R&&(L[0].mrc=3);var te=J.selectAll("g.pointtext").data(B?L:[]);te.enter().append("g").classed("pointtext",!0).append("text").attr("transform",y),te.exit().remove(),te.selectAll("text").call(_.textPointStyle,P,f)}).each(function(k){var L=k[0].trace,P=M.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(L.visible&&L.type==="candlestick"?[k,k]:[]);P.enter().append("path").classed("legendcandle",!0).attr("d",function(I,z){return z?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",y).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(I,z){var F=M.select(this),U=L[z?"increasing":"decreasing"],R=T(void 0,U.line,5,2);F.style("stroke-width",R+"px").call(p.fill,U.fillcolor),R&&p.stroke(F,U.line.color)})}).each(function(k){var L=k[0].trace,P=M.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(L.visible&&L.type==="ohlc"?[k,k]:[]);P.enter().append("path").classed("legendohlc",!0).attr("d",function(I,z){return z?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",y).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(I,z){var F=M.select(this),U=L[z?"increasing":"decreasing"],R=T(void 0,U.line,5,2);F.style("fill","none").call(_.dashLine,U.line.dash,R),R&&p.stroke(F,U.line.color)})})}},66540:function(Y,O,e){e(76052),Y.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},44248:function(Y,O,e){var M=e(24040),A=e(7316),o=e(79811),w=e(9224),_=e(4016).eraseActiveShape,p=e(3400),s=p._,n=Y.exports={};function a(v,d){var m,x,y=d.currentTarget,T=y.getAttribute("data-attr"),h=y.getAttribute("data-val")||!0,E=v._fullLayout,k={},L=o.list(v,null,!0),P=E._cartesianSpikesEnabled;if(T==="zoom"){var I,z=h==="in"?.5:2,F=(1+z)/2,U=(1-z)/2;for(x=0;x<L.length;x++)if(!(m=L[x]).fixedrange)if(I=m._name,h==="auto")k[I+".autorange"]=!0;else if(h==="reset")m._rangeInitial0===void 0&&m._rangeInitial1===void 0?k[I+".autorange"]=!0:m._rangeInitial0===void 0?(k[I+".autorange"]=m._autorangeInitial,k[I+".range"]=[null,m._rangeInitial1]):m._rangeInitial1===void 0?(k[I+".range"]=[m._rangeInitial0,null],k[I+".autorange"]=m._autorangeInitial):k[I+".range"]=[m._rangeInitial0,m._rangeInitial1],m._showSpikeInitial!==void 0&&(k[I+".showspikes"]=m._showSpikeInitial,P!=="on"||m._showSpikeInitial||(P="off"));else{var R=[m.r2l(m.range[0]),m.r2l(m.range[1])],j=[F*R[0]+U*R[1],F*R[1]+U*R[0]];k[I+".range[0]"]=m.l2r(j[0]),k[I+".range[1]"]=m.l2r(j[1])}}else T!=="hovermode"||h!=="x"&&h!=="y"||(h=E._isHoriz?"y":"x",y.setAttribute("data-val",h)),k[T]=h;E._cartesianSpikesEnabled=P,M.call("_guiRelayout",v,k)}function r(v,d){for(var m=d.currentTarget,x=m.getAttribute("data-attr"),y=m.getAttribute("data-val")||!0,T=v._fullLayout._subplots.gl3d||[],h={},E=x.split("."),k=0;k<T.length;k++)h[T[k]+"."+E[1]]=y;var L=y==="pan"?y:"zoom";h.dragmode=L,M.call("_guiRelayout",v,h)}function i(v,d){for(var m=d.currentTarget.getAttribute("data-attr"),x=m==="resetLastSave",y=m==="resetDefault",T=v._fullLayout,h=T._subplots.gl3d||[],E={},k=0;k<h.length;k++){var L,P=h[k],I=P+".camera",z=P+".aspectratio",F=P+".aspectmode",U=T[P]._scene;x?(E[I+".up"]=U.viewInitial.up,E[I+".eye"]=U.viewInitial.eye,E[I+".center"]=U.viewInitial.center,L=!0):y&&(E[I+".up"]=null,E[I+".eye"]=null,E[I+".center"]=null,L=!0),L&&(E[z+".x"]=U.viewInitial.aspectratio.x,E[z+".y"]=U.viewInitial.aspectratio.y,E[z+".z"]=U.viewInitial.aspectratio.z,E[F]=U.viewInitial.aspectmode)}M.call("_guiRelayout",v,E)}function l(v,d){var m=d.currentTarget,x=m._previousVal,y=v._fullLayout,T=y._subplots.gl3d||[],h=["xaxis","yaxis","zaxis"],E={},k={};if(x)k=x,m._previousVal=null;else{for(var L=0;L<T.length;L++){var P=T[L],I=y[P],z=P+".hovermode";E[z]=I.hovermode,k[z]=!1;for(var F=0;F<3;F++){var U=h[F],R=P+"."+U+".showspikes";k[R]=!1,E[R]=I[U].showspikes}}m._previousVal=E}return k}function u(v,d){for(var m=d.currentTarget,x=m.getAttribute("data-attr"),y=m.getAttribute("data-val")||!0,T=v._fullLayout,h=T._subplots.geo||[],E=0;E<h.length;E++){var k=h[E],L=T[k];if(x==="zoom"){var P=L.projection.scale,I=y==="in"?2*P:.5*P;M.call("_guiRelayout",v,k+".projection.scale",I)}}x==="reset"&&b(v,"geo")}function c(v){var d=v._fullLayout;return!d.hovermode&&(d._has("cartesian")?d._isHoriz?"y":"x":"closest")}function g(v){var d=c(v);M.call("_guiRelayout",v,"hovermode",d)}function f(v,d){for(var m=d.currentTarget.getAttribute("data-val"),x=v._fullLayout,y=x._subplots.mapbox||[],T={},h=0;h<y.length;h++){var E=y[h],k=x[E].zoom,L=m==="in"?1.05*k:k/1.05;T[E+".zoom"]=L}M.call("_guiRelayout",v,T)}function b(v,d){for(var m=v._fullLayout,x=m._subplots[d]||[],y={},T=0;T<x.length;T++)for(var h=x[T],E=m[h]._subplot.viewInitial,k=Object.keys(E),L=0;L<k.length;L++){var P=k[L];y[h+"."+P]=E[P]}M.call("_guiRelayout",v,y)}n.toImage={name:"toImage",title:function(v){var d=(v._context.toImageButtonOptions||{}).format||"png";return s(v,d==="png"?"Download plot as a png":"Download plot")},icon:w.camera,click:function(v){var d=v._context.toImageButtonOptions,m={format:d.format||"png"};p.notifier(s(v,"Taking snapshot - this may take a few seconds"),"long"),m.format!=="svg"&&p.isIE()&&(p.notifier(s(v,"IE only supports svg.  Changing format to svg."),"long"),m.format="svg"),["filename","width","height","scale"].forEach(function(x){x in d&&(m[x]=d[x])}),M.call("downloadImage",v,m).then(function(x){p.notifier(s(v,"Snapshot succeeded")+" - "+x,"long")}).catch(function(){p.notifier(s(v,"Sorry, there was a problem downloading your snapshot!"),"long")})}},n.sendDataToCloud={name:"sendDataToCloud",title:function(v){return s(v,"Edit in Chart Studio")},icon:w.disk,click:function(v){A.sendDataToCloud(v)}},n.editInChartStudio={name:"editInChartStudio",title:function(v){return s(v,"Edit in Chart Studio")},icon:w.pencil,click:function(v){A.sendDataToCloud(v)}},n.zoom2d={name:"zoom2d",_cat:"zoom",title:function(v){return s(v,"Zoom")},attr:"dragmode",val:"zoom",icon:w.zoombox,click:a},n.pan2d={name:"pan2d",_cat:"pan",title:function(v){return s(v,"Pan")},attr:"dragmode",val:"pan",icon:w.pan,click:a},n.select2d={name:"select2d",_cat:"select",title:function(v){return s(v,"Box Select")},attr:"dragmode",val:"select",icon:w.selectbox,click:a},n.lasso2d={name:"lasso2d",_cat:"lasso",title:function(v){return s(v,"Lasso Select")},attr:"dragmode",val:"lasso",icon:w.lasso,click:a},n.drawclosedpath={name:"drawclosedpath",title:function(v){return s(v,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:w.drawclosedpath,click:a},n.drawopenpath={name:"drawopenpath",title:function(v){return s(v,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:w.drawopenpath,click:a},n.drawline={name:"drawline",title:function(v){return s(v,"Draw line")},attr:"dragmode",val:"drawline",icon:w.drawline,click:a},n.drawrect={name:"drawrect",title:function(v){return s(v,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:w.drawrect,click:a},n.drawcircle={name:"drawcircle",title:function(v){return s(v,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:w.drawcircle,click:a},n.eraseshape={name:"eraseshape",title:function(v){return s(v,"Erase active shape")},icon:w.eraseshape,click:_},n.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(v){return s(v,"Zoom in")},attr:"zoom",val:"in",icon:w.zoom_plus,click:a},n.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(v){return s(v,"Zoom out")},attr:"zoom",val:"out",icon:w.zoom_minus,click:a},n.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(v){return s(v,"Autoscale")},attr:"zoom",val:"auto",icon:w.autoscale,click:a},n.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(v){return s(v,"Reset axes")},attr:"zoom",val:"reset",icon:w.home,click:a},n.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(v){return s(v,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:w.tooltip_basic,gravity:"ne",click:a},n.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(v){return s(v,"Compare data on hover")},attr:"hovermode",val:function(v){return v._fullLayout._isHoriz?"y":"x"},icon:w.tooltip_compare,gravity:"ne",click:a},n.zoom3d={name:"zoom3d",_cat:"zoom",title:function(v){return s(v,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:w.zoombox,click:r},n.pan3d={name:"pan3d",_cat:"pan",title:function(v){return s(v,"Pan")},attr:"scene.dragmode",val:"pan",icon:w.pan,click:r},n.orbitRotation={name:"orbitRotation",title:function(v){return s(v,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:w["3d_rotate"],click:r},n.tableRotation={name:"tableRotation",title:function(v){return s(v,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:w["z-axis"],click:r},n.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(v){return s(v,"Reset camera to default")},attr:"resetDefault",icon:w.home,click:i},n.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(v){return s(v,"Reset camera to last save")},attr:"resetLastSave",icon:w.movie,click:i},n.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:w.tooltip_basic,gravity:"ne",click:function(v,d){var m=l(v,d);M.call("_guiRelayout",v,m)}},n.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(v){return s(v,"Zoom in")},attr:"zoom",val:"in",icon:w.zoom_plus,click:u},n.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(v){return s(v,"Zoom out")},attr:"zoom",val:"out",icon:w.zoom_minus,click:u},n.resetGeo={name:"resetGeo",_cat:"reset",title:function(v){return s(v,"Reset")},attr:"reset",val:null,icon:w.autoscale,click:u},n.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:w.tooltip_basic,gravity:"ne",click:g},n.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:w.tooltip_basic,gravity:"ne",click:g},n.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:w.tooltip_basic,gravity:"ne",click:g},n.resetViewSankey={name:"resetSankeyGroup",title:function(v){return s(v,"Reset view")},icon:w.home,click:function(v){for(var d={"node.groups":[],"node.x":[],"node.y":[]},m=0;m<v._fullData.length;m++){var x=v._fullData[m]._viewInitial;d["node.groups"].push(x.node.groups.slice()),d["node.x"].push(x.node.x.slice()),d["node.y"].push(x.node.y.slice())}M.call("restyle",v,d)}},n.toggleHover={name:"toggleHover",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:w.tooltip_basic,gravity:"ne",click:function(v,d){var m=l(v,d);m.hovermode=c(v),M.call("_guiRelayout",v,m)}},n.resetViews={name:"resetViews",title:function(v){return s(v,"Reset views")},icon:w.home,click:function(v,d){var m=d.currentTarget;m.setAttribute("data-attr","zoom"),m.setAttribute("data-val","reset"),a(v,d),m.setAttribute("data-attr","resetLastSave"),i(v,d),b(v,"geo"),b(v,"mapbox")}},n.toggleSpikelines={name:"toggleSpikelines",title:function(v){return s(v,"Toggle Spike Lines")},icon:w.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(v){var d=v._fullLayout,m=d._cartesianSpikesEnabled;d._cartesianSpikesEnabled=m==="on"?"off":"on",M.call("_guiRelayout",v,function(x){for(var y=x._fullLayout._cartesianSpikesEnabled==="on",T=o.list(x,null,!0),h={},E=0;E<T.length;E++){var k=T[E];h[k._name+".showspikes"]=!!y||k._showSpikeInitial}return h}(v))}},n.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(v){return s(v,"Reset view")},attr:"reset",icon:w.home,click:function(v){b(v,"mapbox")}},n.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(v){return s(v,"Zoom in")},attr:"zoom",val:"in",icon:w.zoom_plus,click:f},n.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(v){return s(v,"Zoom out")},attr:"zoom",val:"out",icon:w.zoom_minus,click:f}},76052:function(Y,O,e){var M=e(44248),A=Object.keys(M),o=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],w=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(o),_=[];A.forEach(function(p){(function(s){if(w.indexOf(s._cat||s.name)===-1){var n=s.name,a=(s._cat||s.name).toLowerCase();_.indexOf(n)===-1&&_.push(n),_.indexOf(a)===-1&&_.push(a)}})(M[p])}),_.sort(),Y.exports={DRAW_MODES:o,backButtons:w,foreButtons:_}},90824:function(Y,O,e){var M=e(3400),A=e(76308),o=e(31780),w=e(66540);Y.exports=function(_,p){var s=_.modebar||{},n=o.newContainer(p,"modebar");function a(i,l){return M.coerce(s,n,w,i,l)}a("orientation"),a("bgcolor",A.addOpacity(p.paper_bgcolor,.5));var r=A.contrast(A.rgb(p.modebar.bgcolor));a("color",A.addOpacity(r,.3)),a("activecolor",A.addOpacity(r,.7)),a("uirevision",p.uirevision),a("add"),a("remove")}},45460:function(Y,O,e){Y.exports={moduleType:"component",name:"modebar",layoutAttributes:e(66540),supplyLayoutDefaults:e(90824),manage:e(18816)}},18816:function(Y,O,e){var M=e(79811),A=e(43028),o=e(24040),w=e(10624).isUnifiedHover,_=e(66400),p=e(44248),s=e(76052).DRAW_MODES,n=e(3400).extendDeep;Y.exports=function(a){var r=a._fullLayout,i=a._context,l=r._modeBar;if(i.displayModeBar||i.watermark){if(!Array.isArray(i.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(i.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var u,c=i.modeBarButtons;u=Array.isArray(c)&&c.length?function(g){for(var f=n([],g),b=0;b<f.length;b++)for(var v=f[b],d=0;d<v.length;d++){var m=v[d];if(typeof m=="string"){if(p[m]===void 0)throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));f[b][d]=p[m]}}return f}(c):!i.displayModeBar&&i.watermark?[]:function(g){var f=g._fullLayout,b=g._fullData,v=g._context;function d(de,ge){if(typeof ge=="string"){if(ge.toLowerCase()===de.toLowerCase())return!0}else{var ve=ge.name,be=ge._cat||ge.name;if(ve===de||be===de.toLowerCase())return!0}return!1}var m=f.modebar.add;typeof m=="string"&&(m=[m]);var x=f.modebar.remove;typeof x=="string"&&(x=[x]);var y=v.modeBarButtonsToAdd.concat(m.filter(function(de){for(var ge=0;ge<v.modeBarButtonsToRemove.length;ge++)if(d(de,v.modeBarButtonsToRemove[ge]))return!1;return!0})),T=v.modeBarButtonsToRemove.concat(x.filter(function(de){for(var ge=0;ge<v.modeBarButtonsToAdd.length;ge++)if(d(de,v.modeBarButtonsToAdd[ge]))return!1;return!0})),h=f._has("cartesian"),E=f._has("gl3d"),k=f._has("geo"),L=f._has("pie"),P=f._has("funnelarea"),I=f._has("gl2d"),z=f._has("ternary"),F=f._has("mapbox"),U=f._has("polar"),R=f._has("smith"),j=f._has("sankey"),Z=function(de){for(var ge=M.list({_fullLayout:de},null,!0),ve=0;ve<ge.length;ve++)if(!ge[ve].fixedrange)return!1;return!0}(f),B=w(f.hovermode),q=[];function V(de){if(de.length){for(var ge=[],ve=0;ve<de.length;ve++){for(var be=de[ve],me=p[be],Se=me.name.toLowerCase(),we=(me._cat||me.name).toLowerCase(),_e=!1,oe=0;oe<T.length;oe++){var le=T[oe].toLowerCase();if(le===Se||le===we){_e=!0;break}}_e||ge.push(p[be])}q.push(ge)}}var ne=["toImage"];v.showEditInChartStudio?ne.push("editInChartStudio"):v.showSendToCloud&&ne.push("sendDataToCloud"),V(ne);var ee=[],$=[],J=[],K=[];(h||I||L||P||z)+k+E+F+U+R>1?($=["toggleHover"],J=["resetViews"]):k?(ee=["zoomInGeo","zoomOutGeo"],$=["hoverClosestGeo"],J=["resetGeo"]):E?($=["hoverClosest3d"],J=["resetCameraDefault3d","resetCameraLastSave3d"]):F?(ee=["zoomInMapbox","zoomOutMapbox"],$=["toggleHover"],J=["resetViewMapbox"]):I?$=["hoverClosestGl2d"]:L?$=["hoverClosestPie"]:j?($=["hoverClosestCartesian","hoverCompareCartesian"],J=["resetViewSankey"]):$=["toggleHover"],h&&($=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(de){for(var ge=0;ge<de.length;ge++)if(!o.traceIs(de[ge],"noHover"))return!1;return!0}(b)||B)&&($=[]),!h&&!I||Z||(ee=["zoomIn2d","zoomOut2d","autoScale2d"],J[0]!=="resetViews"&&(J=["resetScale2d"])),E?K=["zoom3d","pan3d","orbitRotation","tableRotation"]:(h||I)&&!Z||z?K=["zoom2d","pan2d"]:F||k?K=["pan2d"]:U&&(K=["zoom2d"]),function(de){for(var ge=!1,ve=0;ve<de.length&&!ge;ve++){var be=de[ve];be._module&&be._module.selectPoints&&(o.traceIs(be,"scatter-like")?(A.hasMarkers(be)||A.hasText(be))&&(ge=!0):o.traceIs(be,"box-violin")&&be.boxpoints!=="all"&&be.points!=="all"||(ge=!0))}return ge}(b)&&K.push("select2d","lasso2d");var te=[],ie=function(de){te.indexOf(de)===-1&&$.indexOf(de)!==-1&&te.push(de)};if(Array.isArray(y)){for(var ae=[],se=0;se<y.length;se++){var ce=y[se];typeof ce=="string"?(ce=ce.toLowerCase(),s.indexOf(ce)!==-1?(f._has("mapbox")||f._has("cartesian"))&&K.push(ce):ce==="togglespikelines"?ie("toggleSpikelines"):ce==="togglehover"?ie("toggleHover"):ce==="hovercompare"?ie("hoverCompareCartesian"):ce==="hoverclosest"?(ie("hoverClosestCartesian"),ie("hoverClosestGeo"),ie("hoverClosest3d"),ie("hoverClosestGl2d"),ie("hoverClosestPie")):ce==="v1hovermode"&&(ie("toggleHover"),ie("hoverClosestCartesian"),ie("hoverCompareCartesian"),ie("hoverClosestGeo"),ie("hoverClosest3d"),ie("hoverClosestGl2d"),ie("hoverClosestPie"))):ae.push(ce)}y=ae}return V(K),V(ee.concat(J)),V(te),function(de,ge){if(ge.length)if(Array.isArray(ge[0]))for(var ve=0;ve<ge.length;ve++)de.push(ge[ve]);else de.push(ge);return de}(q,y)}(a),l?l.update(a,u):r._modeBar=_(a,u)}else l&&(l.destroy(),delete r._modeBar)}},66400:function(Y,O,e){var M=e(33428),A=e(38248),o=e(3400),w=e(9224),_=e(25788).version,p=new DOMParser;function s(a){this.container=a.container,this.element=document.createElement("div"),this.update(a.graphInfo,a.buttons),this.container.appendChild(this.element)}var n=s.prototype;n.update=function(a,r){this.graphInfo=a;var i=this.graphInfo._context,l=this.graphInfo._fullLayout,u="modebar-"+l._uid;this.element.setAttribute("id",u),this._uid=u,this.element.className="modebar",i.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),l.modebar.orientation==="v"&&(this.element.className+=" vertical",r=r.reverse());var c=l.modebar,g=i.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";o.deleteRelatedStyleRule(u),o.addRelatedStyleRule(u,g+"#"+u+" .modebar-group","background-color: "+c.bgcolor),o.addRelatedStyleRule(u,"#"+u+" .modebar-btn .icon path","fill: "+c.color),o.addRelatedStyleRule(u,"#"+u+" .modebar-btn:hover .icon path","fill: "+c.activecolor),o.addRelatedStyleRule(u,"#"+u+" .modebar-btn.active .icon path","fill: "+c.activecolor);var f=!this.hasButtons(r),b=this.hasLogo!==i.displaylogo,v=this.locale!==i.locale;if(this.locale=i.locale,(f||b||v)&&(this.removeAllButtons(),this.updateButtons(r),i.watermark||i.displaylogo)){var d=this.getLogo();i.watermark&&(d.className=d.className+" watermark"),l.modebar.orientation==="v"?this.element.insertBefore(d,this.element.childNodes[0]):this.element.appendChild(d),this.hasLogo=!0}this.updateActiveButton()},n.updateButtons=function(a){var r=this;this.buttons=a,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(i){var l=r.createGroup();i.forEach(function(u){var c=u.name;if(!c)throw new Error("must provide button 'name' in button config");if(r.buttonsNames.indexOf(c)!==-1)throw new Error("button name '"+c+"' is taken");r.buttonsNames.push(c);var g=r.createButton(u);r.buttonElements.push(g),l.appendChild(g)}),r.element.appendChild(l)})},n.createGroup=function(){var a=document.createElement("div");return a.className="modebar-group",a},n.createButton=function(a){var r=this,i=document.createElement("a");i.setAttribute("rel","tooltip"),i.className="modebar-btn";var l=a.title;l===void 0?l=a.name:typeof l=="function"&&(l=l(this.graphInfo)),(l||l===0)&&i.setAttribute("data-title",l),a.attr!==void 0&&i.setAttribute("data-attr",a.attr);var u=a.val;if(u!==void 0&&(typeof u=="function"&&(u=u(this.graphInfo)),i.setAttribute("data-val",u)),typeof a.click!="function")throw new Error("must provide button 'click' function in button config");i.addEventListener("click",function(g){a.click(r.graphInfo,g),r.updateActiveButton(g.currentTarget)}),i.setAttribute("data-toggle",a.toggle||!1),a.toggle&&M.select(i).classed("active",!0);var c=a.icon;return typeof c=="function"?i.appendChild(c()):i.appendChild(this.createIcon(c||w.question)),i.setAttribute("data-gravity",a.gravity||"n"),i},n.createIcon=function(a){var r,i=A(a.height)?Number(a.height):a.ascent-a.descent,l="http://www.w3.org/2000/svg";if(a.path){(r=document.createElementNS(l,"svg")).setAttribute("viewBox",[0,0,a.width,i].join(" ")),r.setAttribute("class","icon");var u=document.createElementNS(l,"path");u.setAttribute("d",a.path),a.transform?u.setAttribute("transform",a.transform):a.ascent!==void 0&&u.setAttribute("transform","matrix(1 0 0 -1 0 "+a.ascent+")"),r.appendChild(u)}return a.svg&&(r=p.parseFromString(a.svg,"application/xml").childNodes[0]),r.setAttribute("height","1em"),r.setAttribute("width","1em"),r},n.updateActiveButton=function(a){var r=this.graphInfo._fullLayout,i=a!==void 0?a.getAttribute("data-attr"):null;this.buttonElements.forEach(function(l){var u=l.getAttribute("data-val")||!0,c=l.getAttribute("data-attr"),g=l.getAttribute("data-toggle")==="true",f=M.select(l);if(g)c===i&&f.classed("active",!f.classed("active"));else{var b=c===null?c:o.nestedProperty(r,c).get();f.classed("active",b===u)}})},n.hasButtons=function(a){var r=this.buttons;if(!r||a.length!==r.length)return!1;for(var i=0;i<a.length;++i){if(a[i].length!==r[i].length)return!1;for(var l=0;l<a[i].length;l++)if(a[i][l].name!==r[i][l].name)return!1}return!0},n.getLogo=function(){var a=this.createGroup(),r=document.createElement("a");return r.href="https://plotly.com/",r.target="_blank",r.setAttribute("data-title",o._(this.graphInfo,"Produced with Plotly.js")+" (v"+_+")"),r.className="modebar-btn plotlyjsicon modebar-btn--logo",r.appendChild(this.createIcon(w.newplotlylogo)),a.appendChild(r),a},n.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},n.destroy=function(){o.removeElement(this.container.querySelector(".modebar")),o.deleteRelatedStyleRule(this._uid)},Y.exports=function(a,r){var i=a._fullLayout,l=new s({graphInfo:a,container:i._modebardiv.node(),buttons:r});return i._privateplot&&M.select(l.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),l}},26680:function(Y,O,e){var M=e(25376),A=e(22548),o=(0,e(31780).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});Y.exports={visible:{valType:"boolean",editType:"plot"},buttons:o,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:M({editType:"plot"}),bgcolor:{valType:"color",dflt:A.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:A.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},85984:function(Y){Y.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},22148:function(Y,O,e){var M=e(3400),A=e(76308),o=e(31780),w=e(51272),_=e(26680),p=e(85984);function s(n,a,r,i){var l=i.calendar;function u(g,f){return M.coerce(n,a,_.buttons,g,f)}if(u("visible")){var c=u("step");c!=="all"&&(!l||l==="gregorian"||c!=="month"&&c!=="year"?u("stepmode"):a.stepmode="backward",u("count")),u("label")}}Y.exports=function(n,a,r,i,l){var u=n.rangeselector||{},c=o.newContainer(a,"rangeselector");function g(v,d){return M.coerce(u,c,_,v,d)}if(g("visible",w(u,c,{name:"buttons",handleItemDefaults:s,calendar:l}).length>0)){var f=function(v,d,m){for(var x=m.filter(function(E){return d[E].anchor===v._id}),y=0,T=0;T<x.length;T++){var h=d[x[T]].domain;h&&(y=Math.max(h[1],y))}return[v.domain[0],y+p.yPad]}(a,r,i);g("x",f[0]),g("y",f[1]),M.noneOrAll(n,a,["x","y"]),g("xanchor"),g("yanchor"),M.coerceFont(g,"font",r.font);var b=g("bgcolor");g("activecolor",A.contrast(b,p.lightAmount,p.darkAmount)),g("bordercolor"),g("borderwidth")}}},50216:function(Y,O,e){var M=e(33428),A=e(24040),o=e(7316),w=e(76308),_=e(43616),p=e(3400),s=p.strTranslate,n=e(72736),a=e(79811),r=e(84284),i=r.LINE_SPACING,l=r.FROM_TL,u=r.FROM_BR,c=e(85984),g=e(48040);function f(d){return d._id}function b(d,m,x){var y=p.ensureSingle(d,"rect","selector-rect",function(T){T.attr("shape-rendering","crispEdges")});y.attr({rx:c.rx,ry:c.ry}),y.call(w.stroke,m.bordercolor).call(w.fill,function(T,h){return h._isActive||h._isHovered?T.activecolor:T.bgcolor}(m,x)).style("stroke-width",m.borderwidth+"px")}function v(d,m,x,y){var T,h;p.ensureSingle(d,"text","selector-text",function(E){E.attr("text-anchor","middle")}).call(_.font,m.font).text((T=x,h=y._fullLayout._meta,T.label?h?p.templateString(T.label,h):T.label:T.step==="all"?"all":T.count+T.step.charAt(0))).call(function(E){n.convertToTspans(E,y)})}Y.exports=function(d){var m=d._fullLayout._infolayer.selectAll(".rangeselector").data(function(x){for(var y=a.list(x,"x",!0),T=[],h=0;h<y.length;h++){var E=y[h];E.rangeselector&&E.rangeselector.visible&&T.push(E)}return T}(d),f);m.enter().append("g").classed("rangeselector",!0),m.exit().remove(),m.style({cursor:"pointer","pointer-events":"all"}),m.each(function(x){var y=M.select(this),T=x,h=T.rangeselector,E=y.selectAll("g.button").data(p.filterVisible(h.buttons));E.enter().append("g").classed("button",!0),E.exit().remove(),E.each(function(k){var L=M.select(this),P=g(T,k);k._isActive=function(I,z,F){if(z.step==="all")return I.autorange===!0;var U=Object.keys(F);return I.range[0]===F[U[0]]&&I.range[1]===F[U[1]]}(T,k,P),L.call(b,h,k),L.call(v,h,k,d),L.on("click",function(){d._dragged||A.call("_guiRelayout",d,P)}),L.on("mouseover",function(){k._isHovered=!0,L.call(b,h,k)}),L.on("mouseout",function(){k._isHovered=!1,L.call(b,h,k)})}),function(k,L,P,I,z){var F=0,U=0,R=P.borderwidth;L.each(function(){var ne=M.select(this).select(".selector-text"),ee=P.font.size*i,$=Math.max(ee*n.lineCount(ne),16)+3;U=Math.max(U,$)}),L.each(function(){var ne=M.select(this),ee=ne.select(".selector-rect"),$=ne.select(".selector-text"),J=$.node()&&_.bBox($.node()).width,K=P.font.size*i,te=n.lineCount($),ie=Math.max(J+10,c.minButtonWidth);ne.attr("transform",s(R+F,R)),ee.attr({x:0,y:0,width:ie,height:U}),n.positionText($,ie/2,U/2-(te-1)*K/2+3),F+=ie+5});var j=k._fullLayout._size,Z=j.l+j.w*P.x,B=j.t+j.h*(1-P.y),q="left";p.isRightAnchor(P)&&(Z-=F,q="right"),p.isCenterAnchor(P)&&(Z-=F/2,q="center");var V="top";p.isBottomAnchor(P)&&(B-=U,V="bottom"),p.isMiddleAnchor(P)&&(B-=U/2,V="middle"),F=Math.ceil(F),U=Math.ceil(U),Z=Math.round(Z),B=Math.round(B),o.autoMargin(k,I+"-range-selector",{x:P.x,y:P.y,l:F*l[q],r:F*u[q],b:U*u[V],t:U*l[V]}),z.attr("transform",s(Z,B))}(d,E,h,T._name,y)})}},48040:function(Y,O,e){var M=e(73220),A=e(3400).titleCase;Y.exports=function(o,w){var _=o._name,p={};if(w.step==="all")p[_+".autorange"]=!0;else{var s=function(n,a){var r,i=n.range,l=new Date(n.r2l(i[1])),u=a.step,c=M["utc"+A(u)],g=a.count;switch(a.stepmode){case"backward":r=n.l2r(+c.offset(l,-g));break;case"todate":var f=c.offset(l,-g);r=n.l2r(+c.ceil(f))}return[r,i[1]]}(o,w);p[_+".range[0]"]=s[0],p[_+".range[1]"]=s[1]}return p}},41152:function(Y,O,e){Y.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e(26680)}}},layoutAttributes:e(26680),handleDefaults:e(22148),draw:e(50216)}},11200:function(Y,O,e){var M=e(22548);Y.exports={bgcolor:{valType:"color",dflt:M.background,editType:"plot"},bordercolor:{valType:"color",dflt:M.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},26652:function(Y,O,e){var M=e(79811).list,A=e(19280).getAutoRange,o=e(74636);Y.exports=function(w){for(var _=M(w,"x",!0),p=0;p<_.length;p++){var s=_[p],n=s[o.name];n&&n.visible&&n.autorange&&(n._input.autorange=!0,n._input.range=n.range=A(w,s))}}},74636:function(Y){Y.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},94040:function(Y,O,e){var M=e(3400),A=e(31780),o=e(79811),w=e(11200),_=e(10936);Y.exports=function(p,s,n){var a=p[n],r=s[n];if(a.rangeslider||s._requestRangeslider[r._id]){M.isPlainObject(a.rangeslider)||(a.rangeslider={});var i,l,u=a.rangeslider,c=A.newContainer(r,"rangeslider");if(y("visible")){y("bgcolor",s.plot_bgcolor),y("bordercolor"),y("borderwidth"),y("thickness"),y("autorange",!r.isValidRange(u.range)),y("range");var g=s._subplots;if(g)for(var f=g.cartesian.filter(function(h){return h.substr(0,h.indexOf("y"))===o.name2id(n)}).map(function(h){return h.substr(h.indexOf("y"),h.length)}),b=M.simpleMap(f,o.id2name),v=0;v<b.length;v++){var d=b[v];i=u[d]||{},l=A.newContainer(c,d,"yaxis");var m,x=s[d];i.range&&x.isValidRange(i.range)&&(m="fixed"),T("rangemode",m)!=="match"&&T("range",x.range.slice())}c._input=u}}function y(h,E){return M.coerce(u,c,w,h,E)}function T(h,E){return M.coerce(i,l,_,h,E)}}},20060:function(Y,O,e){var M=e(33428),A=e(24040),o=e(7316),w=e(3400),_=w.strTranslate,p=e(43616),s=e(76308),n=e(81668),a=e(57952),r=e(79811),i=e(86476),l=e(93972),u=e(74636);function c(x){return typeof x.clientX=="number"?x.clientX:x.touches&&x.touches.length>0?x.touches[0].clientX:0}function g(x,y,T,h){var E=w.ensureSingle(x,"rect",u.bgClassName,function(I){I.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),k=h.borderwidth%2==0?h.borderwidth:h.borderwidth-1,L=-h._offsetShift,P=p.crispRound(y,h.borderwidth);E.attr({width:h._width+k,height:h._height+k,transform:_(L,L),"stroke-width":P}).call(s.stroke,h.bordercolor).call(s.fill,h.bgcolor)}function f(x,y,T,h){var E=y._fullLayout;w.ensureSingleById(E._topdefs,"clipPath",h._clipId,function(k){k.append("rect").attr({x:0,y:0})}).select("rect").attr({width:h._width,height:h._height})}function b(x,y,T,h){var E,k=y.calcdata,L=x.selectAll("g."+u.rangePlotClassName).data(T._subplotsWith,w.identity);L.enter().append("g").attr("class",function(P){return u.rangePlotClassName+" "+P}).call(p.setClipUrl,h._clipId,y),L.order(),L.exit().remove(),L.each(function(P,I){var z=M.select(this),F=I===0,U=r.getFromId(y,P,"y"),R=U._name,j=h[R],Z={data:[],layout:{xaxis:{type:T.type,domain:[0,1],range:h.range.slice(),calendar:T.calendar},width:h._width,height:h._height,margin:{t:0,b:0,l:0,r:0}},_context:y._context};T.rangebreaks&&(Z.layout.xaxis.rangebreaks=T.rangebreaks),Z.layout[R]={type:U.type,domain:[0,1],range:j.rangemode!=="match"?j.range.slice():U.range.slice(),calendar:U.calendar},U.rangebreaks&&(Z.layout[R].rangebreaks=U.rangebreaks),o.supplyDefaults(Z);var B=Z._fullLayout.xaxis,q=Z._fullLayout[R];B.clearCalc(),B.setScale(),q.clearCalc(),q.setScale();var V={id:P,plotgroup:z,xaxis:B,yaxis:q,isRangePlot:!0};F?E=V:(V.mainplot="xy",V.mainplotinfo=E),a.rangePlot(y,V,function(ne,ee){for(var $=[],J=0;J<ne.length;J++){var K=ne[J],te=K[0].trace;te.xaxis+te.yaxis===ee&&$.push(K)}return $}(k,P))})}function v(x,y,T,h,E){w.ensureSingle(x,"rect",u.maskMinClassName,function(k){k.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",h._height).call(s.fill,u.maskColor),w.ensureSingle(x,"rect",u.maskMaxClassName,function(k){k.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",h._height).call(s.fill,u.maskColor),E.rangemode!=="match"&&(w.ensureSingle(x,"rect",u.maskMinOppAxisClassName,function(k){k.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",h._width).call(s.fill,u.maskOppAxisColor),w.ensureSingle(x,"rect",u.maskMaxOppAxisClassName,function(k){k.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",h._width).style("border-top",u.maskOppBorder).call(s.fill,u.maskOppAxisColor))}function d(x,y,T,h){y._context.staticPlot||w.ensureSingle(x,"rect",u.slideBoxClassName,function(E){E.attr({y:0,cursor:u.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:h._height,fill:u.slideBoxFill})}function m(x,y,T,h){var E=w.ensureSingle(x,"g",u.grabberMinClassName),k=w.ensureSingle(x,"g",u.grabberMaxClassName),L={x:0,width:u.handleWidth,rx:u.handleRadius,fill:s.background,stroke:s.defaultLine,"stroke-width":u.handleStrokeWidth,"shape-rendering":"crispEdges"},P={y:Math.round(h._height/4),height:Math.round(h._height/2)};w.ensureSingle(E,"rect",u.handleMinClassName,function(z){z.attr(L)}).attr(P),w.ensureSingle(k,"rect",u.handleMaxClassName,function(z){z.attr(L)}).attr(P);var I={width:u.grabAreaWidth,x:0,y:0,fill:u.grabAreaFill,cursor:y._context.staticPlot?void 0:u.grabAreaCursor};w.ensureSingle(E,"rect",u.grabAreaMinClassName,function(z){z.attr(I)}).attr("height",h._height),w.ensureSingle(k,"rect",u.grabAreaMaxClassName,function(z){z.attr(I)}).attr("height",h._height)}Y.exports=function(x){for(var y=x._fullLayout,T=y._rangeSliderData,h=0;h<T.length;h++){var E=T[h][u.name];E._clipId=E._id+"-"+y._uid}var k=y._infolayer.selectAll("g."+u.containerClassName).data(T,function(L){return L._name});k.exit().each(function(L){var P=L[u.name];y._topdefs.select("#"+P._clipId).remove()}).remove(),T.length!==0&&(k.enter().append("g").classed(u.containerClassName,!0).attr("pointer-events","all"),k.each(function(L){var P=M.select(this),I=L[u.name],z=y[r.id2name(L.anchor)],F=I[r.id2name(L.anchor)];if(I.range){var U,R=w.simpleMap(I.range,L.r2l),j=w.simpleMap(L.range,L.r2l);U=j[0]<j[1]?[Math.min(R[0],j[0]),Math.max(R[1],j[1])]:[Math.max(R[0],j[0]),Math.min(R[1],j[1])],I.range=I._input.range=w.simpleMap(U,L.l2r)}L.cleanRange("rangeslider.range");var Z=y._size,B=L.domain;I._width=Z.w*(B[1]-B[0]);var q=Math.round(Z.l+Z.w*B[0]),V=Math.round(Z.t+Z.h*(1-L._counterDomainMin)+(L.side==="bottom"?L._depth:0)+I._offsetShift+u.extraPad);P.attr("transform",_(q,V)),I._rl=w.simpleMap(I.range,L.r2l);var ne=I._rl[0],ee=I._rl[1],$=ee-ne;if(I.p2d=function(ge){return ge/I._width*$+ne},I.d2p=function(ge){return(ge-ne)/$*I._width},L.rangebreaks){var J=L.locateBreaks(ne,ee);if(J.length){var K,te,ie=0;for(K=0;K<J.length;K++)ie+=(te=J[K]).max-te.min;var ae=I._width/(ee-ne-ie),se=[-ae*ne];for(K=0;K<J.length;K++)te=J[K],se.push(se[se.length-1]-ae*(te.max-te.min));for(I.d2p=function(ge){for(var ve=se[0],be=0;be<J.length;be++){var me=J[be];if(ge>=me.max)ve=se[be+1];else if(ge<me.min)break}return ve+ae*ge},K=0;K<J.length;K++)(te=J[K]).pmin=I.d2p(te.min),te.pmax=I.d2p(te.max);I.p2d=function(ge){for(var ve=se[0],be=0;be<J.length;be++){var me=J[be];if(ge>=me.pmax)ve=se[be+1];else if(ge<me.pmin)break}return(ge-ve)/ae}}}if(F.rangemode!=="match"){var ce=z.r2l(F.range[0]),de=z.r2l(F.range[1])-ce;I.d2pOppAxis=function(ge){return(ge-ce)/de*I._height}}P.call(g,x,L,I).call(f,x,L,I).call(b,x,L,I).call(v,x,L,I,F).call(d,x,L,I).call(m,x,L,I),function(ge,ve,be,me){if(!ve._context.staticPlot){var Se=ge.select("rect."+u.slideBoxClassName).node(),we=ge.select("rect."+u.grabAreaMinClassName).node(),_e=ge.select("rect."+u.grabAreaMaxClassName).node();ge.on("mousedown",oe),ge.on("touchstart",oe)}function oe(){var le=M.event,pe=le.target,Ee=c(le),Te=Ee-ge.node().getBoundingClientRect().left,Me=me.d2p(be._rl[0]),Le=me.d2p(be._rl[1]),Ie=i.coverSlip();function he(ke){var ze,Re,Oe,Ve=+c(ke)-Ee;switch(pe){case Se:if(Oe="ew-resize",Me+Ve>be._length||Le+Ve<0)return;ze=Me+Ve,Re=Le+Ve;break;case we:if(Oe="col-resize",Me+Ve>be._length)return;ze=Me+Ve,Re=Le;break;case _e:if(Oe="col-resize",Le+Ve<0)return;ze=Me,Re=Le+Ve;break;default:Oe="ew-resize",ze=Te,Re=Te+Ve}if(Re<ze){var qe=Re;Re=ze,ze=qe}me._pixelMin=ze,me._pixelMax=Re,l(M.select(Ie),Oe),function(Je,ot,rt,dt){function _t(nt){return rt.l2r(w.constrain(nt,dt._rl[0],dt._rl[1]))}var yt=_t(dt.p2d(dt._pixelMin)),et=_t(dt.p2d(dt._pixelMax));window.requestAnimationFrame(function(){A.call("_guiRelayout",ot,rt._name+".range",[yt,et])})}(0,ve,be,me)}function xe(){Ie.removeEventListener("mousemove",he),Ie.removeEventListener("mouseup",xe),this.removeEventListener("touchmove",he),this.removeEventListener("touchend",xe),w.removeElement(Ie)}this.addEventListener("touchmove",he),this.addEventListener("touchend",xe),Ie.addEventListener("mousemove",he),Ie.addEventListener("mouseup",xe)}}(P,x,L,I),function(ge,ve,be,me,Se,we){var _e=u.handleWidth/2;function oe(ke){return w.constrain(ke,0,me._width)}function le(ke){return w.constrain(ke,0,me._height)}function pe(ke){return w.constrain(ke,-_e,me._width+_e)}var Ee=oe(me.d2p(be._rl[0])),Te=oe(me.d2p(be._rl[1]));if(ge.select("rect."+u.slideBoxClassName).attr("x",Ee).attr("width",Te-Ee),ge.select("rect."+u.maskMinClassName).attr("width",Ee),ge.select("rect."+u.maskMaxClassName).attr("x",Te).attr("width",me._width-Te),we.rangemode!=="match"){var Me=me._height-le(me.d2pOppAxis(Se._rl[1])),Le=me._height-le(me.d2pOppAxis(Se._rl[0]));ge.select("rect."+u.maskMinOppAxisClassName).attr("x",Ee).attr("height",Me).attr("width",Te-Ee),ge.select("rect."+u.maskMaxOppAxisClassName).attr("x",Ee).attr("y",Le).attr("height",me._height-Le).attr("width",Te-Ee),ge.select("rect."+u.slideBoxClassName).attr("y",Me).attr("height",Le-Me)}var Ie=.5,he=Math.round(pe(Ee-_e))-Ie,xe=Math.round(pe(Te-_e))+Ie;ge.select("g."+u.grabberMinClassName).attr("transform",_(he,Ie)),ge.select("g."+u.grabberMaxClassName).attr("transform",_(xe,Ie))}(P,0,L,I,z,F),L.side==="bottom"&&n.draw(x,L._id+"title",{propContainer:L,propName:L._name+".title",placeholder:y._dfltTitle.x,attributes:{x:L._offset+L._length/2,y:V+I._height+I._offsetShift+10+1.5*L.title.font.size,"text-anchor":"middle"}})}))}},97944:function(Y,O,e){var M=e(79811),A=e(72736),o=e(74636),w=e(84284).LINE_SPACING,_=o.name;function p(s){var n=s&&s[_];return n&&n.visible}O.isVisible=p,O.makeData=function(s){var n=M.list({_fullLayout:s},"x",!0),a=s.margin,r=[];if(!s._has("gl2d"))for(var i=0;i<n.length;i++){var l=n[i];if(p(l)){r.push(l);var u=l[_];u._id=_+l._id,u._height=(s.height-a.b-a.t)*u.thickness,u._offsetShift=Math.floor(u.borderwidth/2)}}s._rangeSliderData=r},O.autoMarginOpts=function(s,n){var a=s._fullLayout,r=n[_],i=n._id.charAt(0),l=0,u=0;return n.side==="bottom"&&(l=n._depth,n.title.text!==a._dfltTitle[i]&&(u=1.5*n.title.font.size+10+r._offsetShift,u+=(n.title.text.match(A.BR_TAG_ALL)||[]).length*n.title.font.size*w)),{x:0,y:n._counterDomainMin,l:0,r:0,t:0,b:r._height+l+Math.max(a.margin.b,u),pad:o.extraPad+2*r._offsetShift}}},49692:function(Y,O,e){var M=e(3400),A=e(11200),o=e(10936),w=e(97944);Y.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:M.extendFlat({},A,{yaxis:o})}}},layoutAttributes:e(11200),handleDefaults:e(94040),calcAutorange:e(26652),draw:e(20060),isVisible:w.isVisible,makeData:w.makeData,autoMarginOpts:w.autoMarginOpts}},10936:function(Y){Y.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},93956:function(Y,O,e){var M=e(13916),A=e(52904).line,o=e(98192).u,w=e(92880).extendFlat,_=e(67824).overrideAll,p=e(31780).templatedArray;e(36208),Y.exports=_(p("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:w({},M.xref,{}),yref:w({},M.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:A.color,width:w({},A.width,{min:1,dflt:1}),dash:w({},o,{dflt:"dot"})}}),"arraydraw","from-root")},83280:function(Y){Y.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},74224:function(Y,O,e){var M=e(3400),A=e(54460),o=e(51272),w=e(93956),_=e(65152);function p(s,n,a){function r(L,P){return M.coerce(s,n,w,L,P)}var i=r("path"),l=r("type",i?"path":"rect")!=="path";l&&delete n.path,r("opacity"),r("line.color"),r("line.width"),r("line.dash");for(var u=["x","y"],c=0;c<2;c++){var g,f,b,v=u[c],d={_fullLayout:a},m=A.coerceRef(s,n,d,v);if((g=A.getFromId(d,m))._selectionIndices.push(n._index),b=_.rangeToShapePosition(g),f=_.shapePositionToRange(g),l){var x=v+"0",y=v+"1",T=s[x],h=s[y];s[x]=f(s[x],!0),s[y]=f(s[y],!0),A.coercePosition(n,d,r,m,x),A.coercePosition(n,d,r,m,y);var E=n[x],k=n[y];E!==void 0&&k!==void 0&&(n[x]=b(E),n[y]=b(k),s[x]=T,s[y]=h)}}l&&M.noneOrAll(s,n,["x0","x1","y0","y1"])}Y.exports=function(s,n){o(s,n,{name:"selections",handleItemDefaults:p});for(var a=n.selections,r=0;r<a.length;r++){var i=a[r];i&&i.path===void 0&&(i.x0!==void 0&&i.x1!==void 0&&i.y0!==void 0&&i.y1!==void 0||(n.selections[r]=null))}}},23640:function(Y,O,e){var M=e(9856).readPaths,A=e(55496),o=e(1936).clearOutlineControllers,w=e(76308),_=e(43616),p=e(31780).arrayEditor,s=e(65152),n=s.getPathString;function a(c){var g=c._fullLayout;for(var f in o(c),g._selectionLayer.selectAll("path").remove(),g._plots){var b=g._plots[f].selectionLayer;b&&b.selectAll("path").remove()}for(var v=0;v<g.selections.length;v++)i(c,v)}function r(c){return c._context.editSelection}function i(c,g){c._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+g+'"]').remove();var f=s.makeSelectionsOptionsAndPlotinfo(c,g),b=f.options,v=f.plotinfo;b._input&&function(d){var m=n(c,b),x={"data-index":g,"fill-rule":"evenodd",d:m},y=b.opacity,T="rgba(0,0,0,0)",h=b.line.color||w.contrast(c._fullLayout.plot_bgcolor),E=b.line.width,k=b.line.dash;E||(E=5,k="solid");var L=r(c)&&c._fullLayout._activeSelectionIndex===g;L&&(T=c._fullLayout.activeselection.fillcolor,y=c._fullLayout.activeselection.opacity);for(var P=[],I=1;I>=0;I--){var z=d.append("path").attr(x).style("opacity",I?.1:y).call(w.stroke,h).call(w.fill,T).call(_.dashLine,I?"solid":k,I?4+E:E);if(l(z,c,b),L){var F=p(c.layout,"selections",b);z.style({cursor:"move"});var U={element:z.node(),plotinfo:v,gd:c,editHelpers:F,isActiveSelection:!0},R=M(m,c);A(R,z,U)}else z.style("pointer-events",I?"all":"none");P[I]=z}var j=P[0];P[1].node().addEventListener("click",function(){return function(Z,B){if(r(Z)){var q=+B.node().getAttribute("data-index");if(q>=0){if(q===Z._fullLayout._activeSelectionIndex)return void u(Z);Z._fullLayout._activeSelectionIndex=q,Z._fullLayout._deactivateSelection=u,a(Z)}}}(c,j)})}(c._fullLayout._selectionLayer)}function l(c,g,f){var b=f.xref+f.yref;_.setClipUrl(c,"clip"+g._fullLayout._uid+b,g)}function u(c){r(c)&&c._fullLayout._activeSelectionIndex>=0&&(o(c),delete c._fullLayout._activeSelectionIndex,a(c))}Y.exports={draw:a,drawOne:i,activateLastSelection:function(c){if(r(c)){var g=c._fullLayout.selections.length-1;c._fullLayout._activeSelectionIndex=g,c._fullLayout._deactivateSelection=u,a(c)}}}},34200:function(Y,O,e){var M=e(98192).u,A=e(92880).extendFlat;Y.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:A({},M,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},81004:function(Y){Y.exports=function(O,e,M){M("newselection.mode"),M("newselection.line.width")&&(M("newselection.line.color"),M("newselection.line.dash")),M("activeselection.fillcolor"),M("activeselection.opacity")}},5968:function(Y,O,e){var M=e(72760).selectMode,A=e(1936).clearOutline,o=e(9856),w=o.readPaths,_=o.writePaths,p=o.fixDatesForPaths;Y.exports=function(s,n){if(s.length){var a=s[0][0];if(a){var r=a.getAttribute("d"),i=n.gd,l=i._fullLayout.newselection,u=n.plotinfo,c=u.xaxis,g=u.yaxis,f=n.isActiveSelection,b=n.dragmode,v=(i.layout||{}).selections||[];if(!M(b)&&f!==void 0){var d=i._fullLayout._activeSelectionIndex;if(d<v.length)switch(i._fullLayout.selections[d].type){case"rect":b="select";break;case"path":b="lasso"}}var m,x=w(r,i,u,f),y={xref:c._id,yref:g._id,opacity:l.opacity,line:{color:l.line.color,width:l.line.width,dash:l.line.dash}};x.length===1&&(m=x[0]),m&&m.length===5&&b==="select"?(y.type="rect",y.x0=m[0][1],y.y0=m[0][2],y.x1=m[2][1],y.y1=m[2][2]):(y.type="path",c&&g&&p(x,c,g),y.path=_(x),m=null),A(i);for(var T=n.editHelpers,h=(T||{}).modifyItem,E=[],k=0;k<v.length;k++){var L=i._fullLayout.selections[k];if(L){if(E[k]=L._input,f!==void 0&&k===i._fullLayout._activeSelectionIndex){var P=y;switch(L.type){case"rect":h("x0",P.x0),h("x1",P.x1),h("y0",P.y0),h("y1",P.y1);break;case"path":h("path",P.path)}}}else E[k]=L}return f===void 0?(E.push(y),E):T?T.getUpdateObj():{}}}}},5840:function(Y,O,e){var M=e(3400).strTranslate;function A(o,w){switch(o.type){case"log":return o.p2d(w);case"date":return o.p2r(w,0,o.calendar);default:return o.p2r(w)}}Y.exports={p2r:A,r2p:function(o,w){switch(o.type){case"log":return o.d2p(w);case"date":return o.r2p(w,0,o.calendar);default:return o.r2p(w)}},axValue:function(o){var w=o._id.charAt(0)==="y"?1:0;return function(_){return A(o,_[w])}},getTransform:function(o){return M(o.xaxis._offset,o.yaxis._offset)}}},22676:function(Y,O,e){var M=e(23640),A=e(43156);Y.exports={moduleType:"component",name:"selections",layoutAttributes:e(93956),supplyLayoutDefaults:e(74224),supplyDrawNewSelectionDefaults:e(81004),includeBasePlot:e(36632)("selections"),draw:M.draw,drawOne:M.drawOne,reselect:A.reselect,prepSelect:A.prepSelect,clearOutline:A.clearOutline,clearSelectionsCache:A.clearSelectionsCache,selectOnClick:A.selectOnClick}},43156:function(Y,O,e){var M=e(14756),A=e(61456),o=e(24040),w=e(43616).dashStyle,_=e(76308),p=e(93024),s=e(10624).makeEventData,n=e(72760),a=n.freeMode,r=n.rectMode,i=n.drawMode,l=n.openMode,u=n.selectMode,c=e(65152),g=e(85448),f=e(55496),b=e(1936).clearOutline,v=e(9856),d=v.handleEllipse,m=v.readPaths,x=e(93940).newShapes,y=e(5968),T=e(23640).activateLastSelection,h=e(3400),E=h.sorterAsc,k=e(92065),L=e(91200),P=e(79811).getFromId,I=e(73696),z=e(39172).redrawReglTraces,F=e(83280),U=F.MINSELECT,R=k.filter,j=k.tester,Z=e(5840),B=Z.p2r,q=Z.axValue,V=Z.getTransform;function ne(he){return he.subplot!==void 0}function ee(he,xe,ke,ze,Re,Oe,Ve){var qe,Je,ot,rt,dt,_t,yt,et,nt,At=xe._hoverdata,Rt=xe._fullLayout.clickmode.indexOf("event")>-1,Ft=[];if(function(We){return We&&Array.isArray(We)&&We[0].hoverOnBox!==!0}(At)){te(he,xe,Oe);var It=function(We,st){var it,Fe,Be=We[0],at=-1,Ze=[];for(Fe=0;Fe<st.length;Fe++)if(it=st[Fe],Be.fullData._expandedIndex===it.cd[0].trace._expandedIndex){if(Be.hoverOnBox===!0)break;Be.pointNumber!==void 0?at=Be.pointNumber:Be.binNumber!==void 0&&(at=Be.binNumber,Ze=Be.pointNumbers);break}return{pointNumber:at,pointNumbers:Ze,searchInfo:it}}(At,qe=se(xe,ke,ze,Re));if(It.pointNumbers.length>0?function(We,st){var it,Fe,Be,at=[];for(Be=0;Be<We.length;Be++)(it=We[Be]).cd[0].trace.selectedpoints&&it.cd[0].trace.selectedpoints.length>0&&at.push(it);if(at.length===1&&at[0]===st.searchInfo&&(Fe=st.searchInfo.cd[0].trace).selectedpoints.length===st.pointNumbers.length){for(Be=0;Be<st.pointNumbers.length;Be++)if(Fe.selectedpoints.indexOf(st.pointNumbers[Be])<0)return!1;return!0}return!1}(qe,It):function(We){var st,it,Fe=0;for(it=0;it<We.length;it++)if((st=We[it].cd[0].trace).selectedpoints&&(st.selectedpoints.length>1||(Fe+=st.selectedpoints.length)>1))return!1;return Fe===1}(qe)&&(_t=de(It))){for(Ve&&Ve.remove(),nt=0;nt<qe.length;nt++)(Je=qe[nt])._module.selectPoints(Je,!1);ge(xe,qe),ie(Oe),Rt&&Ie(xe)}else{for(yt=he.shiftKey&&(_t!==void 0?_t:de(It)),ot=function(We,st,it){return{pointNumber:We,searchInfo:st,subtract:!!it}}(It.pointNumber,It.searchInfo,yt),rt=K(Oe.selectionDefs.concat([ot])),nt=0;nt<qe.length;nt++)if(dt=be(qe[nt]._module.selectPoints(qe[nt],rt),qe[nt]),Ft.length)for(var Ge=0;Ge<dt.length;Ge++)Ft.push(dt[Ge]);else Ft=dt;if(ge(xe,qe,et={points:Ft}),ot&&Oe&&Oe.selectionDefs.push(ot),Ve){var Ye=Oe.mergedPolygons,Ne=l(Oe.dragmode);f(me(Ye,Ne),Ve,Oe)}Rt&&Le(xe,et)}}}function $(he){return"pointNumber"in he&&"searchInfo"in he}function J(he){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(xe,ke,ze,Re){var Oe=he.searchInfo.cd[0].trace._expandedIndex;return Re.cd[0].trace._expandedIndex===Oe&&ze===he.pointNumber},isRect:!1,degenerate:!1,subtract:!!he.subtract}}function K(he){if(he.length){for(var xe=[],ke=$(he[0])?0:he[0][0][0],ze=ke,Re=$(he[0])?0:he[0][0][1],Oe=Re,Ve=0;Ve<he.length;Ve++)if($(he[Ve]))xe.push(J(he[Ve]));else{var qe=j(he[Ve]);qe.subtract=!!he[Ve].subtract,xe.push(qe),ke=Math.min(ke,qe.xmin),ze=Math.max(ze,qe.xmax),Re=Math.min(Re,qe.ymin),Oe=Math.max(Oe,qe.ymax)}return{xmin:ke,xmax:ze,ymin:Re,ymax:Oe,pts:[],contains:function(Je,ot,rt,dt){for(var _t=!1,yt=0;yt<xe.length;yt++)xe[yt].contains(Je,ot,rt,dt)&&(_t=!xe[yt].subtract);return _t},isRect:!1,degenerate:!1}}}function te(he,xe,ke){var ze=xe._fullLayout,Re=ke.plotinfo,Oe=ke.dragmode,Ve=ze._lastSelectedSubplot&&ze._lastSelectedSubplot===Re.id,qe=(he.shiftKey||he.altKey)&&!(i(Oe)&&l(Oe));Ve&&qe&&Re.selection&&Re.selection.selectionDefs&&!ke.selectionDefs?(ke.selectionDefs=Re.selection.selectionDefs,ke.mergedPolygons=Re.selection.mergedPolygons):qe&&Re.selection||ie(ke),Ve||(b(xe),ze._lastSelectedSubplot=Re.id)}function ie(he,xe){var ke=he.dragmode,ze=he.plotinfo,Re=he.gd;(function(dt){return dt._fullLayout._activeShapeIndex>=0})(Re)&&Re._fullLayout._deactivateShape(Re),function(dt){return dt._fullLayout._activeSelectionIndex>=0}(Re)&&Re._fullLayout._deactivateSelection(Re);var Oe=Re._fullLayout._zoomlayer,Ve=i(ke),qe=u(ke);if(Ve||qe){var Je,ot,rt=Oe.selectAll(".select-outline-"+ze.id);rt&&Re._fullLayout._outlining&&(Ve&&(Je=x(rt,he)),Je&&o.call("_guiRelayout",Re,{shapes:Je}),qe&&!ne(he)&&(ot=y(rt,he)),ot&&(Re._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",Re,{selections:ot}).then(function(){xe&&T(Re)})),Re._fullLayout._outlining=!1)}ze.selection={},ze.selection.selectionDefs=he.selectionDefs=[],ze.selection.mergedPolygons=he.mergedPolygons=[]}function ae(he){return he._id}function se(he,xe,ke,ze){if(!he.calcdata)return[];var Re,Oe,Ve,qe=[],Je=xe.map(ae),ot=ke.map(ae);for(Ve=0;Ve<he.calcdata.length;Ve++)if((Oe=(Re=he.calcdata[Ve])[0].trace).visible===!0&&Oe._module&&Oe._module.selectPoints)if(!ne({subplot:ze})||Oe.subplot!==ze&&Oe.geo!==ze)if(Oe.type==="splom"){if(Oe._xaxes[Je[0]]&&Oe._yaxes[ot[0]]){var rt=ce(Oe._module,Re,xe[0],ke[0]);rt.scene=he._fullLayout._splomScenes[Oe.uid],qe.push(rt)}}else if(Oe.type==="sankey"){var dt=ce(Oe._module,Re,xe[0],ke[0]);qe.push(dt)}else{if(!(Je.indexOf(Oe.xaxis)!==-1||Oe._xA&&Oe._xA.overlaying)||!(ot.indexOf(Oe.yaxis)!==-1||Oe._yA&&Oe._yA.overlaying))continue;qe.push(ce(Oe._module,Re,P(he,Oe.xaxis),P(he,Oe.yaxis)))}else qe.push(ce(Oe._module,Re,xe[0],ke[0]));return qe}function ce(he,xe,ke,ze){return{_module:he,cd:xe,xaxis:ke,yaxis:ze}}function de(he){var xe=he.searchInfo.cd[0].trace,ke=he.pointNumber,ze=he.pointNumbers,Re=ze.length>0?ze[0]:ke;return!!xe.selectedpoints&&xe.selectedpoints.indexOf(Re)>-1}function ge(he,xe,ke){var ze,Re;for(ze=0;ze<xe.length;ze++){var Oe=xe[ze].cd[0].trace._fullInput,Ve=he._fullLayout._tracePreGUI[Oe.uid]||{};Ve.selectedpoints===void 0&&(Ve.selectedpoints=Oe._input.selectedpoints||null)}if(ke){var qe=ke.points||[];for(ze=0;ze<xe.length;ze++)(Re=xe[ze].cd[0].trace)._input.selectedpoints=Re._fullInput.selectedpoints=[],Re._fullInput!==Re&&(Re.selectedpoints=[]);for(var Je=0;Je<qe.length;Je++){var ot=qe[Je],rt=ot.data,dt=ot.fullData,_t=ot.pointIndex,yt=ot.pointIndices;yt?([].push.apply(rt.selectedpoints,yt),Re._fullInput!==Re&&[].push.apply(dt.selectedpoints,yt)):(rt.selectedpoints.push(_t),Re._fullInput!==Re&&dt.selectedpoints.push(_t))}}else for(ze=0;ze<xe.length;ze++)delete(Re=xe[ze].cd[0].trace).selectedpoints,delete Re._input.selectedpoints,Re._fullInput!==Re&&delete Re._fullInput.selectedpoints;(function(et,nt){for(var At=!1,Rt=0;Rt<nt.length;Rt++){var Ft=nt[Rt],It=Ft.cd;o.traceIs(It[0].trace,"regl")&&(At=!0);var Ge=Ft._module,Ye=Ge.styleOnSelect||Ge.style;Ye&&(Ye(et,It,It[0].node3),It[0].nodeRangePlot3&&Ye(et,It,It[0].nodeRangePlot3))}At&&(I(et),z(et))})(he,xe)}function ve(he,xe,ke){for(var ze=(ke?M.difference:M.union)({regions:he},{regions:[xe]}).regions.reverse(),Re=0;Re<ze.length;Re++){var Oe=ze[Re];Oe.subtract=pe(Oe,ze.slice(0,Re))}return ze}function be(he,xe){if(Array.isArray(he))for(var ke=xe.cd,ze=xe.cd[0].trace,Re=0;Re<he.length;Re++)he[Re]=s(he[Re],ze,ke);return he}function me(he,xe){for(var ke=[],ze=0;ze<he.length;ze++){ke[ze]=[];for(var Re=0;Re<he[ze].length;Re++){ke[ze][Re]=[],ke[ze][Re][0]=Re?"L":"M";for(var Oe=0;Oe<he[ze][Re].length;Oe++)ke[ze][Re].push(he[ze][Re][Oe])}xe||ke[ze].push(["Z",ke[ze][0][1],ke[ze][0][2]])}return ke}function Se(he,xe){for(var ke,ze,Re=[],Oe=[],Ve=0;Ve<xe.length;Ve++){var qe=xe[Ve];ze=qe._module.selectPoints(qe,he),Oe.push(ze),ke=be(ze,qe),Re=Re.concat(ke)}return Re}function we(he,xe,ke,ze,Re){var Oe,Ve,qe,Je=!!ze;Re&&(Oe=Re.plotinfo,Ve=Re.xaxes[0]._id,qe=Re.yaxes[0]._id);var ot=[],rt=[],dt=le(he),_t=he._fullLayout;if(Oe){var yt=_t._zoomlayer,et=_t.dragmode,nt=i(et),At=u(et);if(nt||At){var Rt=P(he,Ve,"x"),Ft=P(he,qe,"y");if(Rt&&Ft){var It=yt.selectAll(".select-outline-"+Oe.id);if(It&&he._fullLayout._outlining&&It.length){for(var Ge=It[0][0].getAttribute("d"),Ye=m(Ge,he,Oe),Ne=[],We=0;We<Ye.length;We++){for(var st=Ye[We],it=[],Fe=0;Fe<st.length;Fe++)it.push([Ee(Rt,st[Fe][1]),Ee(Ft,st[Fe][2])]);it.xref=Ve,it.yref=qe,it.subtract=pe(it,Ne),Ne.push(it)}dt=dt.concat(Ne)}}}}var Be=Ve&&qe?[Ve+qe]:_t._subplots.cartesian;(function(Rn){var Fn=Rn.calcdata;if(Fn)for(var In=0;In<Fn.length;In++){var Hn=Fn[In][0].trace,Un=Rn._fullLayout._splomScenes;if(Un){var ar=Un[Hn.uid];ar&&(ar.selectBatch=[])}}})(he);for(var at={},Ze=0;Ze<Be.length;Ze++){var ht=Be[Ze],vt=ht.indexOf("y"),mt=ht.slice(0,vt),ft=ht.slice(vt),Et=Ve&&qe?ke:void 0;if(Et=oe(dt,mt,ft,Et)){var Tt=ze;if(!Je){var xt=P(he,mt,"x"),Ct=P(he,ft,"y");Tt=se(he,[xt],[Ct],ht);for(var Pt=0;Pt<Tt.length;Pt++){var Bt=Tt[Pt],Kt=Bt.cd[0],sn=Kt.trace;if(Bt._module.name==="scattergl"&&!Kt.t.xpx){var Gt=sn.x,Yt=sn.y,rn=sn._length;Kt.t.xpx=[],Kt.t.ypx=[];for(var Ln=0;Ln<rn;Ln++)Kt.t.xpx[Ln]=xt.c2p(Gt[Ln]),Kt.t.ypx[Ln]=Ct.c2p(Yt[Ln])}Bt._module.name==="splom"&&(at[sn.uid]||(at[sn.uid]=!0))}}var Sn=Se(Et,Tt);ot=ot.concat(Sn),rt=rt.concat(Tt)}}var gn={points:ot};ge(he,rt,gn);var $t=_t.clickmode.indexOf("event")>-1&&xe;if(!Oe&&xe){var cn=le(he,!0);if(cn.length){var an=cn[0].xref,pn=cn[0].yref;if(an&&pn){var An=Te(cn);Me([P(he,an,"x"),P(he,pn,"y")])(gn,An)}}he._fullLayout._noEmitSelectedAtStart?he._fullLayout._noEmitSelectedAtStart=!1:$t&&Le(he,gn),_t._reselect=!1}if(!Oe&&_t._deselect){var Cn=_t._deselect;(function(Rn,Fn,In){for(var Hn=0;Hn<In.length;Hn++){var Un=In[Hn];if(Un.xaxis&&Un.xaxis._id===Rn&&Un.yaxis&&Un.yaxis._id===Fn)return!0}return!1})(Ve=Cn.xref,qe=Cn.yref,rt)||_e(he,Ve,qe,ze),$t&&(gn.points.length?Le(he,gn):Ie(he)),_t._deselect=!1}return{eventData:gn,selectionTesters:ke}}function _e(he,xe,ke,ze){ze=se(he,[P(he,xe,"x")],[P(he,ke,"y")],xe+ke);for(var Re=0;Re<ze.length;Re++){var Oe=ze[Re];Oe._module.selectPoints(Oe,!1)}ge(he,ze)}function oe(he,xe,ke,ze){for(var Re,Oe=0;Oe<he.length;Oe++){var Ve=he[Oe];xe===Ve.xref&&ke===Ve.yref&&(Re?ze=K(Re=ve(Re,Ve,!!Ve.subtract)):(Re=[Ve],ze=j(Ve)))}return ze}function le(he,xe){for(var ke=[],ze=he._fullLayout,Re=ze.selections,Oe=Re.length,Ve=0;Ve<Oe;Ve++)if(!xe||Ve===ze._activeSelectionIndex){var qe=Re[Ve];if(qe){var Je,ot,rt,dt,_t,yt=qe.xref,et=qe.yref,nt=P(he,yt,"x"),At=P(he,et,"y");if(qe.type==="rect"){_t=[];var Rt=Ee(nt,qe.x0),Ft=Ee(nt,qe.x1),It=Ee(At,qe.y0),Ge=Ee(At,qe.y1);_t=[[Rt,It],[Rt,Ge],[Ft,Ge],[Ft,It]],Je=Math.min(Rt,Ft),ot=Math.max(Rt,Ft),rt=Math.min(It,Ge),dt=Math.max(It,Ge),_t.xmin=Je,_t.xmax=ot,_t.ymin=rt,_t.ymax=dt,_t.xref=yt,_t.yref=et,_t.subtract=!1,_t.isRect=!0,ke.push(_t)}else if(qe.type==="path")for(var Ye=qe.path.split("Z"),Ne=[],We=0;We<Ye.length;We++){var st=Ye[We];if(st){st+="Z";var it=c.extractPathCoords(st,g.paramIsX,"raw"),Fe=c.extractPathCoords(st,g.paramIsY,"raw");Je=1/0,ot=-1/0,rt=1/0,dt=-1/0,_t=[];for(var Be=0;Be<it.length;Be++){var at=Ee(nt,it[Be]),Ze=Ee(At,Fe[Be]);_t.push([at,Ze]),Je=Math.min(at,Je),ot=Math.max(at,ot),rt=Math.min(Ze,rt),dt=Math.max(Ze,dt)}_t.xmin=Je,_t.xmax=ot,_t.ymin=rt,_t.ymax=dt,_t.xref=yt,_t.yref=et,_t.subtract=pe(_t,Ne),Ne.push(_t),ke.push(_t)}}}}return ke}function pe(he,xe){for(var ke=!1,ze=0;ze<xe.length;ze++)for(var Re=xe[ze],Oe=0;Oe<he.length;Oe++)if(A(he[Oe],Re)){ke=!ke;break}return ke}function Ee(he,xe){return he.type==="date"&&(xe=xe.replace("_"," ")),he.type==="log"?he.c2p(xe):he.r2p(xe,null,he.calendar)}function Te(he){for(var xe=he.length,ke=[],ze=0;ze<xe;ze++){var Re=he[ze];ke=(ke=ke.concat(Re)).concat([Re[0]])}return(Oe=ke).isRect=Oe.length===5&&Oe[0][0]===Oe[4][0]&&Oe[0][1]===Oe[4][1]&&Oe[0][0]===Oe[1][0]&&Oe[2][0]===Oe[3][0]&&Oe[0][1]===Oe[3][1]&&Oe[1][1]===Oe[2][1]||Oe[0][1]===Oe[1][1]&&Oe[2][1]===Oe[3][1]&&Oe[0][0]===Oe[3][0]&&Oe[1][0]===Oe[2][0],Oe.isRect&&(Oe.xmin=Math.min(Oe[0][0],Oe[2][0]),Oe.xmax=Math.max(Oe[0][0],Oe[2][0]),Oe.ymin=Math.min(Oe[0][1],Oe[2][1]),Oe.ymax=Math.max(Oe[0][1],Oe[2][1])),Oe;var Oe}function Me(he){return function(xe,ke){for(var ze,Re,Oe=0;Oe<he.length;Oe++){var Ve=he[Oe],qe=Ve._id,Je=qe.charAt(0);if(ke.isRect){ze||(ze={});var ot=ke[Je+"min"],rt=ke[Je+"max"];ot!==void 0&&rt!==void 0&&(ze[qe]=[B(Ve,ot),B(Ve,rt)].sort(E))}else Re||(Re={}),Re[qe]=ke.map(q(Ve))}ze&&(xe.range=ze),Re&&(xe.lassoPoints=Re)}}function Le(he,xe){xe&&(xe.selections=(he.layout||{}).selections||[]),he.emit("plotly_selected",xe)}function Ie(he){he.emit("plotly_deselect",null)}Y.exports={reselect:we,prepSelect:function(he,xe,ke,ze,Re){var Oe=!ne(ze),Ve=a(Re),qe=r(Re),Je=l(Re),ot=i(Re),rt=u(Re),dt=Re==="drawcircle",_t=Re==="drawline"||dt,yt=ze.gd,et=yt._fullLayout,nt=rt&&et.newselection.mode==="immediate"&&Oe,At=et._zoomlayer,Rt=ze.element.getBoundingClientRect(),Ft=ze.plotinfo,It=V(Ft),Ge=xe-Rt.left,Ye=ke-Rt.top;et._calcInverseTransform(yt);var Ne=h.apply3DTransform(et._invTransform)(Ge,Ye);Ge=Ne[0],Ye=Ne[1];var We,st,it,Fe,Be,at,Ze,ht=et._invScaleX,vt=et._invScaleY,mt=Ge,ft=Ye,Et="M"+Ge+","+Ye,Tt=ze.xaxes[0],xt=ze.yaxes[0],Ct=Tt._length,Pt=xt._length,Bt=he.altKey&&!(i(Re)&&Je);te(he,yt,ze),Ve&&(We=R([[Ge,Ye]],F.BENDPX));var Kt=At.selectAll("path.select-outline-"+Ft.id).data([1]),sn=ot?et.newshape:et.newselection;ot&&(ze.hasText=sn.label.text||sn.label.texttemplate);var Gt=ot&&!Je?sn.fillcolor:"rgba(0,0,0,0)",Yt=sn.line.color||(Oe?_.contrast(yt._fullLayout.plot_bgcolor):"#7f7f7f");Kt.enter().append("path").attr("class","select-outline select-outline-"+Ft.id).style({opacity:ot?sn.opacity/2:1,"stroke-dasharray":w(sn.line.dash,sn.line.width),"stroke-width":sn.line.width+"px","shape-rendering":"crispEdges"}).call(_.stroke,Yt).call(_.fill,Gt).attr("fill-rule","evenodd").classed("cursor-move",!!ot).attr("transform",It).attr("d",Et+"Z");var rn=At.append("path").attr("class","zoombox-corners").style({fill:_.background,stroke:_.defaultLine,"stroke-width":1}).attr("transform",It).attr("d","M0,0Z");if(ot&&ze.hasText){var Ln=At.select(".label-temp");Ln.empty()&&(Ln=At.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var Sn=et._uid+F.SELECTID,gn=[],$t=se(yt,ze.xaxes,ze.yaxes,ze.subplot);nt&&!he.shiftKey&&(ze._clearSubplotSelections=function(){if(Oe){var an=Tt._id,pn=xt._id;_e(yt,an,pn,$t);for(var An=(yt.layout||{}).selections||[],Cn=[],Rn=!1,Fn=0;Fn<An.length;Fn++){var In=et.selections[Fn];In.xref!==an||In.yref!==pn?Cn.push(An[Fn]):Rn=!0}Rn&&(yt._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",yt,{selections:Cn}))}});var cn=function(an){return an.plotinfo.fillRangeItems||Me(an.xaxes.concat(an.yaxes))}(ze);ze.moveFn=function(an,pn){ze._clearSubplotSelections&&(ze._clearSubplotSelections(),ze._clearSubplotSelections=void 0),mt=Math.max(0,Math.min(Ct,ht*an+Ge)),ft=Math.max(0,Math.min(Pt,vt*pn+Ye));var An=Math.abs(mt-Ge),Cn=Math.abs(ft-Ye);if(qe){var Rn,Fn,In;if(rt){var Hn=et.selectdirection;switch(Rn=Hn==="any"?Cn<Math.min(.6*An,U)?"h":An<Math.min(.6*Cn,U)?"v":"d":Hn){case"h":Fn=dt?Pt/2:0,In=Pt;break;case"v":Fn=dt?Ct/2:0,In=Ct}}if(ot)switch(et.newshape.drawdirection){case"vertical":Rn="h",Fn=dt?Pt/2:0,In=Pt;break;case"horizontal":Rn="v",Fn=dt?Ct/2:0,In=Ct;break;case"ortho":An<Cn?(Rn="h",Fn=Ye,In=ft):(Rn="v",Fn=Ge,In=mt);break;default:Rn="d"}Rn==="h"?((Fe=_t?d(dt,[mt,Fn],[mt,In]):[[Ge,Fn],[Ge,In],[mt,In],[mt,Fn]]).xmin=_t?mt:Math.min(Ge,mt),Fe.xmax=_t?mt:Math.max(Ge,mt),Fe.ymin=Math.min(Fn,In),Fe.ymax=Math.max(Fn,In),rn.attr("d","M"+Fe.xmin+","+(Ye-U)+"h-4v"+2*U+"h4ZM"+(Fe.xmax-1)+","+(Ye-U)+"h4v"+2*U+"h-4Z")):Rn==="v"?((Fe=_t?d(dt,[Fn,ft],[In,ft]):[[Fn,Ye],[Fn,ft],[In,ft],[In,Ye]]).xmin=Math.min(Fn,In),Fe.xmax=Math.max(Fn,In),Fe.ymin=_t?ft:Math.min(Ye,ft),Fe.ymax=_t?ft:Math.max(Ye,ft),rn.attr("d","M"+(Ge-U)+","+Fe.ymin+"v-4h"+2*U+"v4ZM"+(Ge-U)+","+(Fe.ymax-1)+"v4h"+2*U+"v-4Z")):Rn==="d"&&((Fe=_t?d(dt,[Ge,Ye],[mt,ft]):[[Ge,Ye],[Ge,ft],[mt,ft],[mt,Ye]]).xmin=Math.min(Ge,mt),Fe.xmax=Math.max(Ge,mt),Fe.ymin=Math.min(Ye,ft),Fe.ymax=Math.max(Ye,ft),rn.attr("d","M0,0Z"))}else Ve&&(We.addPt([mt,ft]),Fe=We.filtered);if(ze.selectionDefs&&ze.selectionDefs.length?(it=ve(ze.mergedPolygons,Fe,Bt),Fe.subtract=Bt,st=K(ze.selectionDefs.concat([Fe]))):(it=[Fe],st=j(Fe)),f(me(it,Je),Kt,ze),rt){var Un,ar=we(yt,!1),ur=ar.eventData?ar.eventData.points.slice():[];ar=we(yt,!1,st,$t,ze),st=ar.selectionTesters,Ze=ar.eventData,Un=We?We.filtered:Te(it),L.throttle(Sn,F.SELECTDELAY,function(){for(var cr=(gn=Se(st,$t)).slice(),er=0;er<ur.length;er++){for(var Tr=ur[er],Ht=!1,on=0;on<cr.length;on++)if(cr[on].curveNumber===Tr.curveNumber&&cr[on].pointNumber===Tr.pointNumber){Ht=!0;break}Ht||cr.push(Tr)}cr.length&&(Ze||(Ze={}),Ze.points=cr),cn(Ze,Un),function(wn,mn){wn.emit("plotly_selecting",mn)}(yt,Ze)})}},ze.clickFn=function(an,pn){if(rn.remove(),yt._fullLayout._activeShapeIndex>=0)yt._fullLayout._deactivateShape(yt);else if(!ot){var An=et.clickmode;L.done(Sn).then(function(){if(L.clear(Sn),an===2){for(Kt.remove(),Be=0;Be<$t.length;Be++)(at=$t[Be])._module.selectPoints(at,!1);if(ge(yt,$t),ie(ze),Ie(yt),$t.length){var Cn=$t[0].xaxis,Rn=$t[0].yaxis;if(Cn&&Rn){for(var Fn=[],In=yt._fullLayout.selections,Hn=0;Hn<In.length;Hn++){var Un=In[Hn];Un&&(Un.xref===Cn._id&&Un.yref===Rn._id||Fn.push(Un))}Fn.length<In.length&&(yt._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",yt,{selections:Fn}))}}}else An.indexOf("select")>-1&&ee(pn,yt,ze.xaxes,ze.yaxes,ze.subplot,ze,Kt),An==="event"&&Le(yt,void 0);p.click(yt,pn,Ft.id)}).catch(h.error)}},ze.doneFn=function(){rn.remove(),L.done(Sn).then(function(){L.clear(Sn),!nt&&Fe&&ze.selectionDefs&&(Fe.subtract=Bt,ze.selectionDefs.push(Fe),ze.mergedPolygons.length=0,[].push.apply(ze.mergedPolygons,it)),(nt||ot)&&ie(ze,nt),ze.doneFnCompleted&&ze.doneFnCompleted(gn),rt&&Le(yt,Ze)}).catch(h.error)}},clearOutline:b,clearSelectionsCache:ie,selectOnClick:ee}},46056:function(Y,O,e){var M=e(13916),A=e(25376),o=e(52904).line,w=e(98192).u,_=e(92880).extendFlat,p=e(31780).templatedArray,s=(e(36208),e(45464)),n=e(21776).ye,a=e(97728);Y.exports=p("shape",{visible:_({},s.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:_({},s.legend,{editType:"calc+arraydraw"}),legendgroup:_({},s.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:_({},s.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:A({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:_({},s.legendrank,{editType:"calc+arraydraw"}),legendwidth:_({},s.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:_({},M.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:_({},M.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:_({},o.color,{editType:"arraydraw"}),width:_({},o.width,{editType:"calc+arraydraw"}),dash:_({},w,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:n({},{keys:Object.keys(a)}),font:A({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},96084:function(Y,O,e){var M=e(3400),A=e(54460),o=e(85448),w=e(65152);function _(a){return s(a.line.width,a.xsizemode,a.x0,a.x1,a.path,!1)}function p(a){return s(a.line.width,a.ysizemode,a.y0,a.y1,a.path,!0)}function s(a,r,i,l,u,c){var g=a/2,f=c;if(r==="pixel"){var b=u?w.extractPathCoords(u,c?o.paramIsY:o.paramIsX):[i,l],v=M.aggNums(Math.max,null,b),d=M.aggNums(Math.min,null,b),m=d<0?Math.abs(d)+g:g,x=v>0?v+g:g;return{ppad:g,ppadplus:f?m:x,ppadminus:f?x:m}}return{ppad:g}}function n(a,r,i,l,u){var c=a.type==="category"||a.type==="multicategory"?a.r2c:a.d2c;if(r!==void 0)return[c(r),c(i)];if(l){var g,f,b,v,d=1/0,m=-1/0,x=l.match(o.segmentRE);for(a.type==="date"&&(c=w.decodeDate(c)),g=0;g<x.length;g++)(f=u[x[g].charAt(0)].drawn)!==void 0&&(!(b=x[g].substr(1).match(o.paramRE))||b.length<f||((v=c(b[f]))<d&&(d=v),v>m&&(m=v)));return m>=d?[d,m]:void 0}}Y.exports=function(a){var r=a._fullLayout,i=M.filterVisible(r.shapes);if(i.length&&a._fullData.length)for(var l=0;l<i.length;l++){var u,c,g=i[l];g._extremes={};var f=A.getRefType(g.xref),b=A.getRefType(g.yref);if(g.xref!=="paper"&&f!=="domain"){var v=g.xsizemode==="pixel"?g.xanchor:g.x0,d=g.xsizemode==="pixel"?g.xanchor:g.x1;(c=n(u=A.getFromId(a,g.xref),v,d,g.path,o.paramIsX))&&(g._extremes[u._id]=A.findExtremes(u,c,_(g)))}if(g.yref!=="paper"&&b!=="domain"){var m=g.ysizemode==="pixel"?g.yanchor:g.y0,x=g.ysizemode==="pixel"?g.yanchor:g.y1;(c=n(u=A.getFromId(a,g.yref),m,x,g.path,o.paramIsY))&&(g._extremes[u._id]=A.findExtremes(u,c,p(g)))}}}},85448:function(Y){Y.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},43712:function(Y,O,e){var M=e(3400),A=e(54460),o=e(51272),w=e(46056),_=e(65152);function p(s,n,a){function r(Z,B){return M.coerce(s,n,w,Z,B)}if(n._isShape=!0,r("visible")){r("showlegend")&&(r("legend"),r("legendwidth"),r("legendgroup"),r("legendgrouptitle.text"),M.coerceFont(r,"legendgrouptitle.font"),r("legendrank"));var i=r("path"),l=r("type",i?"path":"rect"),u=l!=="path";u&&delete n.path,r("editable"),r("layer"),r("opacity"),r("fillcolor"),r("fillrule"),r("line.width")&&(r("line.color"),r("line.dash"));for(var c=r("xsizemode"),g=r("ysizemode"),f=["x","y"],b=0;b<2;b++){var v,d,m,x=f[b],y=x+"anchor",T=x==="x"?c:g,h={_fullLayout:a},E=A.coerceRef(s,n,h,x,void 0,"paper");if(A.getRefType(E)==="range"?((v=A.getFromId(h,E))._shapeIndices.push(n._index),m=_.rangeToShapePosition(v),d=_.shapePositionToRange(v)):d=m=M.identity,u){var k=x+"0",L=x+"1",P=s[k],I=s[L];s[k]=d(s[k],!0),s[L]=d(s[L],!0),T==="pixel"?(r(k,0),r(L,10)):(A.coercePosition(n,h,r,E,k,.25),A.coercePosition(n,h,r,E,L,.75)),n[k]=m(n[k]),n[L]=m(n[L]),s[k]=P,s[L]=I}if(T==="pixel"){var z=s[y];s[y]=d(s[y],!0),A.coercePosition(n,h,r,E,y,.25),n[y]=m(n[y]),s[y]=z}}u&&M.noneOrAll(s,n,["x0","x1","y0","y1"]);var F,U,R=l==="line";if(u&&(F=r("label.texttemplate")),F||(U=r("label.text")),U||F){r("label.textangle");var j=r("label.textposition",R?"middle":"middle center");r("label.xanchor"),r("label.yanchor",function(Z,B){return Z?"bottom":B.indexOf("top")!==-1?"top":B.indexOf("bottom")!==-1?"bottom":"middle"}(R,j)),r("label.padding"),M.coerceFont(r,"label.font",a.font)}}}Y.exports=function(s,n){o(s,n,{name:"shapes",handleItemDefaults:p})}},60728:function(Y,O,e){var M=e(3400),A=e(54460),o=e(72736),w=e(43616),_=e(9856).readPaths,p=e(65152),s=p.getPathString,n=e(97728),a=e(84284).FROM_TL;Y.exports=function(r,i,l,u){if(u.selectAll(".shape-label").remove(),l.label.text||l.label.texttemplate){var c;if(l.label.texttemplate){var g={};if(l.type!=="path"){var f=A.getFromId(r,l.xref),b=A.getFromId(r,l.yref);for(var v in n){var d=n[v](l,f,b);d!==void 0&&(g[v]=d)}}c=M.texttemplateStringForShapes(l.label.texttemplate,{},r._fullLayout._d3locale,g)}else c=l.label.text;var m,x,y,T,h={"data-index":i},E=l.label.font,k=u.append("g").attr(h).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(c);if(l.path){var L=s(r,l),P=_(L,r);m=1/0,y=1/0,x=-1/0,T=-1/0;for(var I=0;I<P.length;I++)for(var z=0;z<P[I].length;z++)for(var F=P[I][z],U=1;U<F.length;U+=2){var R=F[U],j=F[U+1];m=Math.min(m,R),x=Math.max(x,R),y=Math.min(y,j),T=Math.max(T,j)}}else{var Z=A.getFromId(r,l.xref),B=A.getRefType(l.xref),q=A.getFromId(r,l.yref),V=A.getRefType(l.yref),ne=p.getDataToPixel(r,Z,!1,B),ee=p.getDataToPixel(r,q,!0,V);m=ne(l.x0),x=ne(l.x1),y=ee(l.y0),T=ee(l.y1)}var $=l.label.textangle;$==="auto"&&($=l.type==="line"?function(ae,se,ce,de){var ge,ve;return ve=Math.abs(ce-ae),ge=ce>=ae?se-de:de-se,-180/Math.PI*Math.atan2(ge,ve)}(m,y,x,T):0),k.call(function(ae){return ae.call(w.font,E).attr({}),o.convertToTspans(ae,r),ae});var J=function(ae,se,ce,de,ge,ve,be){var me,Se,we,_e,oe=ge.label.textposition,le=ge.label.textangle,pe=ge.label.padding,Ee=ge.type,Te=Math.PI/180*ve,Me=Math.sin(Te),Le=Math.cos(Te),Ie=ge.label.xanchor,he=ge.label.yanchor;if(Ee==="line"){oe==="start"?(me=ae,Se=se):oe==="end"?(me=ce,Se=de):(me=(ae+ce)/2,Se=(se+de)/2),Ie==="auto"&&(Ie=oe==="start"?le==="auto"?ce>ae?"left":ce<ae?"right":"center":ce>ae?"right":ce<ae?"left":"center":oe==="end"?le==="auto"?ce>ae?"right":ce<ae?"left":"center":ce>ae?"left":ce<ae?"right":"center":"center");var xe={bottom:-1,middle:0,top:1};if(le==="auto"){var ke=xe[he];we=-pe*Me*ke,_e=pe*Le*ke}else we=pe*{left:1,center:0,right:-1}[Ie],_e=pe*xe[he];me+=we,Se+=_e}else we=pe+3,oe.indexOf("right")!==-1?(me=Math.max(ae,ce)-we,Ie==="auto"&&(Ie="right")):oe.indexOf("left")!==-1?(me=Math.min(ae,ce)+we,Ie==="auto"&&(Ie="left")):(me=(ae+ce)/2,Ie==="auto"&&(Ie="center")),Se=oe.indexOf("top")!==-1?Math.min(se,de):oe.indexOf("bottom")!==-1?Math.max(se,de):(se+de)/2,_e=pe,he==="bottom"?Se-=_e:he==="top"&&(Se+=_e);var ze=a[he],Re=ge.label.font.size,Oe=be.height;return{textx:me+(Oe*ze-Re)*Me,texty:Se+-(Oe*ze-Re)*Le,xanchor:Ie}}(m,y,x,T,l,$,w.bBox(k.node())),K=J.textx,te=J.texty,ie=J.xanchor;k.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[ie],y:te,x:K,transform:"rotate("+$+","+K+","+te+")"}).call(o.positionText,K,te)}}},55496:function(Y,O,e){var M=e(3400).strTranslate,A=e(86476),o=e(72760),w=o.drawMode,_=o.selectMode,p=e(24040),s=e(76308),n=e(7e3),a=n.i000,r=n.i090,i=n.i180,l=n.i270,u=e(1936).clearOutlineControllers,c=e(9856),g=c.pointsOnRectangle,f=c.pointsOnEllipse,b=c.writePaths,v=e(93940).newShapes,d=e(93940).createShapeObj,m=e(5968),x=e(60728);function y(T,h){var E,k,L,P=T[h][1],I=T[h][2],z=T.length;return k=T[E=(h+1)%z][1],L=T[E][2],k===P&&L===I&&(k=T[E=(h+2)%z][1],L=T[E][2]),[E,k,L]}Y.exports=function T(h,E,k,L){L||(L=0);var P=k.gd;function I(){T(h,E,k,L++),(f(h[0])||k.hasText)&&z({redrawing:!0})}function z(ge){var ve={};k.isActiveShape!==void 0&&(k.isActiveShape=!1,ve=v(E,k)),k.isActiveSelection!==void 0&&(k.isActiveSelection=!1,ve=m(E,k),P._fullLayout._reselect=!0),Object.keys(ve).length&&p.call((ge||{}).redrawing?"relayout":"_guiRelayout",P,ve)}var F,U,R,j,Z,B=P._fullLayout._zoomlayer,q=k.dragmode,V=w(q),ne=_(q);if((V||ne)&&(P._fullLayout._outlining=!0),u(P),E.attr("d",b(h)),L||!k.isActiveShape&&!k.isActiveSelection||(Z=function(ge,ve){for(var be=0;be<ve.length;be++){var me=ve[be];ge[be]=[];for(var Se=0;Se<me.length;Se++){ge[be][Se]=[];for(var we=0;we<me[Se].length;we++)ge[be][Se][we]=me[Se][we]}}return ge}([],h),function(ge){F=[];for(var ve=0;ve<h.length;ve++){var be=h[ve],me=g(be),Se=!me&&f(be);F[ve]=[];for(var we=be.length,_e=0;_e<we;_e++)if(be[_e][0]!=="Z"&&(!Se||_e===a||_e===r||_e===i||_e===l)){var oe,le=me&&k.isActiveSelection;le&&(oe=y(be,_e));var pe=be[_e][1],Ee=be[_e][2],Te=ge.append(le?"rect":"circle").attr("data-i",ve).attr("data-j",_e).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(le){var Me=oe[1]-pe,Le=oe[2]-Ee,Ie=Le?5:Math.max(Math.min(25,Math.abs(Me)-5),5),he=Me?5:Math.max(Math.min(25,Math.abs(Le)-5),5);Te.classed(Le?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Ie).attr("height",he).attr("x",pe-Ie/2).attr("y",Ee-he/2).attr("transform",M(Me/2,Le/2))}else Te.classed("cursor-grab",!0).attr("r",5).attr("cx",pe).attr("cy",Ee);F[ve][_e]={element:Te.node(),gd:P,prepFn:J,doneFn:te,clickFn:ie},A.init(F[ve][_e])}}}(B.append("g").attr("class","outline-controllers")),function(){U=[],h.length&&(U[0]={element:E[0][0],gd:P,prepFn:se,doneFn:ce,clickFn:de},A.init(U[0]))}()),V&&k.hasText){var ee=B.select(".label-temp"),$=d(E,k,k.dragmode);x(P,"label-temp",$,ee)}function J(ge){R=+ge.srcElement.getAttribute("data-i"),j=+ge.srcElement.getAttribute("data-j"),F[R][j].moveFn=K}function K(ge,ve){if(h.length){var be=Z[R][j][1],me=Z[R][j][2],Se=h[R],we=Se.length;if(g(Se)){var _e=ge,oe=ve;k.isActiveSelection&&(y(Se,j)[1]===Se[j][1]?oe=0:_e=0);for(var le=0;le<we;le++)if(le!==j){var pe=Se[le];pe[1]===Se[j][1]&&(pe[1]=be+_e),pe[2]===Se[j][2]&&(pe[2]=me+oe)}if(Se[j][1]=be+_e,Se[j][2]=me+oe,!g(Se))for(var Ee=0;Ee<we;Ee++)for(var Te=0;Te<Se[Ee].length;Te++)Se[Ee][Te]=Z[R][Ee][Te]}else Se[j][1]=be+ge,Se[j][2]=me+ve;I()}}function te(){z()}function ie(ge,ve){if(ge===2){R=+ve.srcElement.getAttribute("data-i"),j=+ve.srcElement.getAttribute("data-j");var be=h[R];g(be)||f(be)||function(){if(h.length&&h[R]&&h[R].length){for(var me=[],Se=0;Se<h[R].length;Se++)Se!==j&&me.push(h[R][Se]);me.length>1&&(me.length!==2||me[1][0]!=="Z")&&(j===0&&(me[0][0]="M"),h[R]=me,I(),z())}}()}}function ae(ge,ve){(function(be,me){if(h.length)for(var Se=0;Se<h.length;Se++)for(var we=0;we<h[Se].length;we++)for(var _e=0;_e+2<h[Se][we].length;_e+=2)h[Se][we][_e+1]=Z[Se][we][_e+1]+be,h[Se][we][_e+2]=Z[Se][we][_e+2]+me})(ge,ve),I()}function se(ge){(R=+ge.srcElement.getAttribute("data-i"))||(R=0),U[R].moveFn=ae}function ce(){z()}function de(ge){ge===2&&function(ve){if(_(ve._fullLayout.dragmode)){u(ve);var be=ve._fullLayout._activeSelectionIndex,me=(ve.layout||{}).selections||[];if(be<me.length){for(var Se=[],we=0;we<me.length;we++)we!==be&&Se.push(me[we]);delete ve._fullLayout._activeSelectionIndex;var _e=ve._fullLayout.selections[be];ve._fullLayout._deselect={xref:_e.xref,yref:_e.yref},p.call("_guiRelayout",ve,{selections:Se})}}}(P)}}},4016:function(Y,O,e){var M=e(33428),A=e(24040),o=e(3400),w=e(54460),_=e(9856).readPaths,p=e(55496),s=e(60728),n=e(1936).clearOutlineControllers,a=e(76308),r=e(43616),i=e(31780).arrayEditor,l=e(86476),u=e(93972),c=e(85448),g=e(65152),f=g.getPathString;function b(h){var E=h._fullLayout;for(var k in E._shapeUpperLayer.selectAll("path").remove(),E._shapeLowerLayer.selectAll("path").remove(),E._shapeUpperLayer.selectAll("text").remove(),E._shapeLowerLayer.selectAll("text").remove(),E._plots){var L=E._plots[k].shapelayer;L&&(L.selectAll("path").remove(),L.selectAll("text").remove())}for(var P=0;P<E.shapes.length;P++)E.shapes[P].visible===!0&&m(h,P)}function v(h){return!!h._fullLayout._outlining}function d(h){return!h._context.edits.shapePosition}function m(h,E){h._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+E+'"]').remove();var k=g.makeShapesOptionsAndPlotinfo(h,E),L=k.options,P=k.plotinfo;function I(z){var F=f(h,L),U={"data-index":E,"fill-rule":L.fillrule,d:F},R=L.opacity,j=L.fillcolor,Z=L.line.width?L.line.color:"rgba(0,0,0,0)",B=L.line.width,q=L.line.dash;B||L.editable!==!0||(B=5,q="solid");var V=F[F.length-1]!=="Z",ne=d(h)&&L.editable&&h._fullLayout._activeShapeIndex===E;ne&&(j=V?"rgba(0,0,0,0)":h._fullLayout.activeshape.fillcolor,R=h._fullLayout.activeshape.opacity);var ee,$=z.append("g").classed("shape-group",!0).attr({"data-index":E}),J=$.append("path").attr(U).style("opacity",R).call(a.stroke,Z).call(a.fill,j).call(r.dashLine,q,B);if(x($,h,L),s(h,E,L,$),(ne||h._context.edits.shapePosition)&&(ee=i(h.layout,"shapes",L)),ne){J.style({cursor:"move"});var K={element:J.node(),plotinfo:P,gd:h,editHelpers:ee,hasText:L.label.text||L.label.texttemplate,isActiveShape:!0},te=_(F,h);p(te,J,K)}else h._context.edits.shapePosition?function(ie,ae,se,ce,de,ge){var ve,be,me,Se,we,_e,oe,le,pe,Ee,Te,Me,Le,Ie,he,xe,ke=10,ze=10,Re=se.xsizemode==="pixel",Oe=se.ysizemode==="pixel",Ve=se.type==="line",qe=se.type==="path",Je=ge.modifyItem,ot=M.select(ae.node().parentNode),rt=w.getFromId(ie,se.xref),dt=w.getRefType(se.xref),_t=w.getFromId(ie,se.yref),yt=w.getRefType(se.yref),et=g.getDataToPixel(ie,rt,!1,dt),nt=g.getDataToPixel(ie,_t,!0,yt),At=g.getPixelToData(ie,rt,!1,dt),Rt=g.getPixelToData(ie,_t,!0,yt),Ft=Ve?function(){var it=10,Fe=Math.max(se.line.width,it),Be=de.append("g").attr("data-index",ce).attr("drag-helper",!0);Be.append("path").attr("d",ae.attr("d")).style({cursor:"move","stroke-width":Fe,"stroke-opacity":"0"});var at={"fill-opacity":"0"},Ze=Math.max(Fe/2,it);return Be.append("circle").attr({"data-line-point":"start-point",cx:Re?et(se.xanchor)+se.x0:et(se.x0),cy:Oe?nt(se.yanchor)-se.y0:nt(se.y0),r:Ze}).style(at).classed("cursor-grab",!0),Be.append("circle").attr({"data-line-point":"end-point",cx:Re?et(se.xanchor)+se.x1:et(se.x1),cy:Oe?nt(se.yanchor)-se.y1:nt(se.y1),r:Ze}).style(at).classed("cursor-grab",!0),Be}():ae,It={element:Ft.node(),gd:ie,prepFn:function(it){v(ie)||(Re&&(we=et(se.xanchor)),Oe&&(_e=nt(se.yanchor)),se.type==="path"?he=se.path:(ve=Re?se.x0:et(se.x0),be=Oe?se.y0:nt(se.y0),me=Re?se.x1:et(se.x1),Se=Oe?se.y1:nt(se.y1)),ve<me?(pe=ve,Le="x0",Ee=me,Ie="x1"):(pe=me,Le="x1",Ee=ve,Ie="x0"),!Oe&&be<Se||Oe&&be>Se?(oe=be,Te="y0",le=Se,Me="y1"):(oe=Se,Te="y1",le=be,Me="y0"),Ge(it),We(de,se),function(Fe,Be,at){var Ze=Be.xref,ht=Be.yref,vt=w.getFromId(at,Ze),mt=w.getFromId(at,ht),ft="";Ze==="paper"||vt.autorange||(ft+=Ze),ht==="paper"||mt.autorange||(ft+=ht),r.setClipUrl(Fe,ft?"clip"+at._fullLayout._uid+ft:null,at)}(ae,se,ie),It.moveFn=xe==="move"?Ye:Ne,It.altKey=it.altKey)},doneFn:function(){v(ie)||(u(ae),st(de),x(ae,ie,se),A.call("_guiRelayout",ie,ge.getUpdateObj()))},clickFn:function(){v(ie)||st(de)}};function Ge(it){if(v(ie))xe=null;else if(Ve)xe=it.target.tagName==="path"?"move":it.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Fe=It.element.getBoundingClientRect(),Be=Fe.right-Fe.left,at=Fe.bottom-Fe.top,Ze=it.clientX-Fe.left,ht=it.clientY-Fe.top,vt=!qe&&Be>ke&&at>ze&&!it.shiftKey?l.getCursor(Ze/Be,1-ht/at):"move";u(ae,vt),xe=vt.split("-")[0]}}function Ye(it,Fe){if(se.type==="path"){var Be=function(ht){return ht},at=Be,Ze=Be;Re?Je("xanchor",se.xanchor=At(we+it)):(at=function(ht){return At(et(ht)+it)},rt&&rt.type==="date"&&(at=g.encodeDate(at))),Oe?Je("yanchor",se.yanchor=Rt(_e+Fe)):(Ze=function(ht){return Rt(nt(ht)+Fe)},_t&&_t.type==="date"&&(Ze=g.encodeDate(Ze))),Je("path",se.path=y(he,at,Ze))}else Re?Je("xanchor",se.xanchor=At(we+it)):(Je("x0",se.x0=At(ve+it)),Je("x1",se.x1=At(me+it))),Oe?Je("yanchor",se.yanchor=Rt(_e+Fe)):(Je("y0",se.y0=Rt(be+Fe)),Je("y1",se.y1=Rt(Se+Fe)));ae.attr("d",f(ie,se)),We(de,se),s(ie,ce,se,ot)}function Ne(it,Fe){if(qe){var Be=function(Yt){return Yt},at=Be,Ze=Be;Re?Je("xanchor",se.xanchor=At(we+it)):(at=function(Yt){return At(et(Yt)+it)},rt&&rt.type==="date"&&(at=g.encodeDate(at))),Oe?Je("yanchor",se.yanchor=Rt(_e+Fe)):(Ze=function(Yt){return Rt(nt(Yt)+Fe)},_t&&_t.type==="date"&&(Ze=g.encodeDate(Ze))),Je("path",se.path=y(he,at,Ze))}else if(Ve){if(xe==="resize-over-start-point"){var ht=ve+it,vt=Oe?be-Fe:be+Fe;Je("x0",se.x0=Re?ht:At(ht)),Je("y0",se.y0=Oe?vt:Rt(vt))}else if(xe==="resize-over-end-point"){var mt=me+it,ft=Oe?Se-Fe:Se+Fe;Je("x1",se.x1=Re?mt:At(mt)),Je("y1",se.y1=Oe?ft:Rt(ft))}}else{var Et=function(Yt){return xe.indexOf(Yt)!==-1},Tt=Et("n"),xt=Et("s"),Ct=Et("w"),Pt=Et("e"),Bt=Tt?oe+Fe:oe,Kt=xt?le+Fe:le,sn=Ct?pe+it:pe,Gt=Pt?Ee+it:Ee;Oe&&(Tt&&(Bt=oe-Fe),xt&&(Kt=le-Fe)),(!Oe&&Kt-Bt>ze||Oe&&Bt-Kt>ze)&&(Je(Te,se[Te]=Oe?Bt:Rt(Bt)),Je(Me,se[Me]=Oe?Kt:Rt(Kt))),Gt-sn>ke&&(Je(Le,se[Le]=Re?sn:At(sn)),Je(Ie,se[Ie]=Re?Gt:At(Gt)))}ae.attr("d",f(ie,se)),We(de,se),s(ie,ce,se,ot)}function We(it,Fe){(Re||Oe)&&function(){var Be=Fe.type!=="path",at=it.selectAll(".visual-cue").data([0]);at.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var Ze=et(Re?Fe.xanchor:o.midRange(Be?[Fe.x0,Fe.x1]:g.extractPathCoords(Fe.path,c.paramIsX))),ht=nt(Oe?Fe.yanchor:o.midRange(Be?[Fe.y0,Fe.y1]:g.extractPathCoords(Fe.path,c.paramIsY)));if(Ze=g.roundPositionForSharpStrokeRendering(Ze,1),ht=g.roundPositionForSharpStrokeRendering(ht,1),Re&&Oe){var vt="M"+(Ze-1-1)+","+(ht-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";at.attr("d",vt)}else if(Re){var mt="M"+(Ze-1-1)+","+(ht-9-1)+"v18 h2 v-18 Z";at.attr("d",mt)}else{var ft="M"+(Ze-9-1)+","+(ht-1-1)+"h18 v2 h-18 Z";at.attr("d",ft)}}()}function st(it){it.selectAll(".visual-cue").remove()}l.init(It),Ft.node().onmousemove=Ge}(h,J,L,E,z,ee):L.editable===!0&&J.style("pointer-events",V||a.opacity(j)*R<=.5?"stroke":"all");J.node().addEventListener("click",function(){return function(ie,ae){if(d(ie)){var se=+ae.node().getAttribute("data-index");if(se>=0){if(se===ie._fullLayout._activeShapeIndex)return void T(ie);ie._fullLayout._activeShapeIndex=se,ie._fullLayout._deactivateShape=T,b(ie)}}}(h,J)})}L._input&&L.visible===!0&&(L.layer!=="below"?I(h._fullLayout._shapeUpperLayer):L.xref==="paper"||L.yref==="paper"?I(h._fullLayout._shapeLowerLayer):P._hadPlotinfo?I((P.mainplotinfo||P).shapelayer):I(h._fullLayout._shapeLowerLayer))}function x(h,E,k){var L=(k.xref+k.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");r.setClipUrl(h,L?"clip"+E._fullLayout._uid+L:null,E)}function y(h,E,k){return h.replace(c.segmentRE,function(L){var P=0,I=L.charAt(0),z=c.paramIsX[I],F=c.paramIsY[I],U=c.numParams[I];return I+L.substr(1).replace(c.paramRE,function(R){return P>=U||(z[P]?R=E(R):F[P]&&(R=k(R)),P++),R})})}function T(h){d(h)&&h._fullLayout._activeShapeIndex>=0&&(n(h),delete h._fullLayout._activeShapeIndex,b(h))}Y.exports={draw:b,drawOne:m,eraseActiveShape:function(h){if(d(h)){n(h);var E=h._fullLayout._activeShapeIndex,k=(h.layout||{}).shapes||[];if(E<k.length){for(var L=[],P=0;P<k.length;P++)P!==E&&L.push(k[P]);return delete h._fullLayout._activeShapeIndex,A.call("_guiRelayout",h,{shapes:L})}}},drawLabel:s}},92872:function(Y,O,e){var M=e(67824).overrideAll,A=e(45464),o=e(25376),w=e(98192).u,_=e(92880).extendFlat,p=e(21776).ye,s=e(97728);Y.exports=M({newshape:{visible:_({},A.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:_({},A.legend,{}),legendgroup:_({},A.legendgroup,{}),legendgrouptitle:{text:_({},A.legendgrouptitle.text,{}),font:o({})},legendrank:_({},A.legendrank,{}),legendwidth:_({},A.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:_({},w,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:_({},A.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:p({newshape:!0},{keys:Object.keys(s)}),font:o({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},7e3:function(Y){Y.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},65144:function(Y,O,e){var M=e(76308),A=e(3400);Y.exports=function(o,w,_){if(_("newshape.visible"),_("newshape.name"),_("newshape.showlegend"),_("newshape.legend"),_("newshape.legendwidth"),_("newshape.legendgroup"),_("newshape.legendgrouptitle.text"),A.coerceFont(_,"newshape.legendgrouptitle.font"),_("newshape.legendrank"),_("newshape.drawdirection"),_("newshape.layer"),_("newshape.fillcolor"),_("newshape.fillrule"),_("newshape.opacity"),_("newshape.line.width")){var p=(o||{}).plot_bgcolor||"#FFF";_("newshape.line.color",M.contrast(p)),_("newshape.line.dash")}var s=o.dragmode==="drawline",n=_("newshape.label.text"),a=_("newshape.label.texttemplate");if(n||a){_("newshape.label.textangle");var r=_("newshape.label.textposition",s?"middle":"middle center");_("newshape.label.xanchor"),_("newshape.label.yanchor",function(i,l){return i?"bottom":l.indexOf("top")!==-1?"top":l.indexOf("bottom")!==-1?"bottom":"middle"}(s,r)),_("newshape.label.padding"),A.coerceFont(_,"newshape.label.font",w.font)}_("activeshape.fillcolor"),_("activeshape.opacity")}},9856:function(Y,O,e){var M=e(21984),A=e(7e3),o=A.CIRCLE_SIDES,w=A.SQRT2,_=e(5840),p=_.p2r,s=_.r2p,n=[0,3,4,5,6,1,2],a=[0,3,4,1,2];function r(l,u){return Math.abs(l-u)<=1e-6}function i(l,u){var c=u[1]-l[1],g=u[2]-l[2];return Math.sqrt(c*c+g*g)}O.writePaths=function(l){var u=l.length;if(!u)return"M0,0Z";for(var c="",g=0;g<u;g++)for(var f=l[g].length,b=0;b<f;b++){var v=l[g][b][0];if(v==="Z")c+="Z";else for(var d=l[g][b].length,m=0;m<d;m++){var x=m;v==="Q"||v==="S"?x=a[m]:v==="C"&&(x=n[m]),c+=l[g][b][x],m>0&&m<d-1&&(c+=",")}}return c},O.readPaths=function(l,u,c,g){var f,b,v,d=M(l),m=[],x=-1,y=0,T=0,h=function(){b=y,v=T};h();for(var E=0;E<d.length;E++){var k,L,P,I,z=[],F=d[E][0],U=F;switch(F){case"M":m[++x]=[],y=+d[E][1],T=+d[E][2],z.push([U,y,T]),h();break;case"Q":case"S":k=+d[E][1],P=+d[E][2],y=+d[E][3],T=+d[E][4],z.push([U,y,T,k,P]);break;case"C":k=+d[E][1],P=+d[E][2],L=+d[E][3],I=+d[E][4],y=+d[E][5],T=+d[E][6],z.push([U,y,T,k,P,L,I]);break;case"T":case"L":y=+d[E][1],T=+d[E][2],z.push([U,y,T]);break;case"H":U="L",y=+d[E][1],z.push([U,y,T]);break;case"V":U="L",T=+d[E][1],z.push([U,y,T]);break;case"A":U="L";var R=+d[E][1],j=+d[E][2];+d[E][4]||(R=-R,j=-j);var Z=y-R,B=T;for(f=1;f<=o/2;f++){var q=2*Math.PI*f/o;z.push([U,Z+R*Math.cos(q),B+j*Math.sin(q)])}break;case"Z":y===b&&T===v||(y=b,T=v,z.push([U,y,T]))}for(var V=(c||{}).domain,ne=u._fullLayout._size,ee=c&&c.xsizemode==="pixel",$=c&&c.ysizemode==="pixel",J=g===!1,K=0;K<z.length;K++){for(f=0;f+2<7;f+=2){var te=z[K][f+1],ie=z[K][f+2];te!==void 0&&ie!==void 0&&(y=te,T=ie,c&&(c.xaxis&&c.xaxis.p2r?(J&&(te-=c.xaxis._offset),te=ee?s(c.xaxis,c.xanchor)+te:p(c.xaxis,te)):(J&&(te-=ne.l),V?te=V.x[0]+te/ne.w:te/=ne.w),c.yaxis&&c.yaxis.p2r?(J&&(ie-=c.yaxis._offset),ie=$?s(c.yaxis,c.yanchor)-ie:p(c.yaxis,ie)):(J&&(ie-=ne.t),ie=V?V.y[1]-ie/ne.h:1-ie/ne.h)),z[K][f+1]=te,z[K][f+2]=ie)}m[x].push(z[K].slice())}}return m},O.pointsOnRectangle=function(l){if(l.length!==5)return!1;for(var u=1;u<3;u++)if(!r(l[0][u]-l[1][u],l[3][u]-l[2][u])||!r(l[0][u]-l[3][u],l[1][u]-l[2][u]))return!1;return!(!r(l[0][1],l[1][1])&&!r(l[0][1],l[3][1])||!(i(l[0],l[1])*i(l[0],l[3])))},O.pointsOnEllipse=function(l){var u=l.length;if(u!==o+1)return!1;u=o;for(var c=0;c<u;c++){var g=(2*u-c)%u,f=(u/2+g)%u,b=(u/2+c)%u;if(!r(i(l[c],l[b]),i(l[g],l[f])))return!1}return!0},O.handleEllipse=function(l,u,c){if(!l)return[u,c];var g=O.ellipseOver({x0:u[0],y0:u[1],x1:c[0],y1:c[1]}),f=(g.x1+g.x0)/2,b=(g.y1+g.y0)/2,v=(g.x1-g.x0)/2,d=(g.y1-g.y0)/2;v||(v=d/=w),d||(d=v/=w);for(var m=[],x=0;x<o;x++){var y=2*x*Math.PI/o;m.push([f+v*Math.cos(y),b+d*Math.sin(y)])}return m},O.ellipseOver=function(l){var u=l.x0,c=l.y0,g=l.x1,f=l.y1,b=g-u,v=f-c,d=((u-=b)+g)/2,m=((c-=v)+f)/2;return{x0:d-(b*=w),y0:m-(v*=w),x1:d+b,y1:m+v}},O.fixDatesForPaths=function(l,u,c){var g=u.type==="date",f=c.type==="date";if(!g&&!f)return l;for(var b=0;b<l.length;b++)for(var v=0;v<l[b].length;v++)for(var d=0;d+2<l[b][v].length;d+=2)g&&(l[b][v][d+1]=l[b][v][d+1].replace(" ","_")),f&&(l[b][v][d+2]=l[b][v][d+2].replace(" ","_"));return l}},93940:function(Y,O,e){var M=e(72760),A=M.drawMode,o=M.openMode,w=e(7e3),_=w.i000,p=w.i090,s=w.i180,n=w.i270,a=w.cos45,r=w.sin45,i=e(5840),l=i.p2r,u=i.r2p,c=e(1936).clearOutline,g=e(9856),f=g.readPaths,b=g.writePaths,v=g.ellipseOver,d=g.fixDatesForPaths;function m(x,y,T){var h,E=x[0][0],k=y.gd,L=E.getAttribute("d"),P=k._fullLayout.newshape,I=y.plotinfo,z=y.isActiveShape,F=I.xaxis,U=I.yaxis,R=!!I.domain||!I.xaxis,j=!!I.domain||!I.yaxis,Z=o(T),B=f(L,k,I,z),q={editable:!0,visible:P.visible,name:P.name,showlegend:P.showlegend,legend:P.legend,legendwidth:P.legendwidth,legendgroup:P.legendgroup,legendgrouptitle:{text:P.legendgrouptitle.text,font:P.legendgrouptitle.font},legendrank:P.legendrank,label:P.label,xref:R?"paper":F._id,yref:j?"paper":U._id,layer:P.layer,opacity:P.opacity,line:{color:P.line.color,width:P.line.width,dash:P.line.dash}};if(Z||(q.fillcolor=P.fillcolor,q.fillrule=P.fillrule),B.length===1&&(h=B[0]),h&&h.length===5&&T==="drawrect")q.type="rect",q.x0=h[0][1],q.y0=h[0][2],q.x1=h[2][1],q.y1=h[2][2];else if(h&&T==="drawline")q.type="line",q.x0=h[0][1],q.y0=h[0][2],q.x1=h[1][1],q.y1=h[1][2];else if(h&&T==="drawcircle"){q.type="circle";var V=h[_][1],ne=h[p][1],ee=h[s][1],$=h[n][1],J=h[_][2],K=h[p][2],te=h[s][2],ie=h[n][2],ae=I.xaxis&&(I.xaxis.type==="date"||I.xaxis.type==="log"),se=I.yaxis&&(I.yaxis.type==="date"||I.yaxis.type==="log");ae&&(V=u(I.xaxis,V),ne=u(I.xaxis,ne),ee=u(I.xaxis,ee),$=u(I.xaxis,$)),se&&(J=u(I.yaxis,J),K=u(I.yaxis,K),te=u(I.yaxis,te),ie=u(I.yaxis,ie));var ce=(ne+$)/2,de=(J+te)/2,ge=v({x0:ce,y0:de,x1:ce+($-ne+ee-V)/2*a,y1:de+(ie-K+te-J)/2*r});ae&&(ge.x0=l(I.xaxis,ge.x0),ge.x1=l(I.xaxis,ge.x1)),se&&(ge.y0=l(I.yaxis,ge.y0),ge.y1=l(I.yaxis,ge.y1)),q.x0=ge.x0,q.y0=ge.y0,q.x1=ge.x1,q.y1=ge.y1}else q.type="path",F&&U&&d(B,F,U),q.path=b(B),h=null;return q}Y.exports={newShapes:function(x,y){if(x.length&&x[0][0]){var T=y.gd,h=y.isActiveShape,E=y.dragmode,k=(T.layout||{}).shapes||[];if(!A(E)&&h!==void 0){var L=T._fullLayout._activeShapeIndex;if(L<k.length)switch(T._fullLayout.shapes[L].type){case"rect":E="drawrect";break;case"circle":E="drawcircle";break;case"line":E="drawline";break;case"path":var P=k[L].path||"";E=P[P.length-1]==="Z"?"drawclosedpath":"drawopenpath"}}var I=m(x,y,E);c(T);for(var z=y.editHelpers,F=(z||{}).modifyItem,U=[],R=0;R<k.length;R++){var j=T._fullLayout.shapes[R];if(U[R]=j._input,h!==void 0&&R===T._fullLayout._activeShapeIndex){var Z=I;switch(j.type){case"line":case"rect":case"circle":F("x0",Z.x0),F("x1",Z.x1),F("y0",Z.y0),F("y1",Z.y1);break;case"path":F("path",Z.path)}}}return h===void 0?(U.push(I),U):z?z.getUpdateObj():{}}},createShapeObj:m}},1936:function(Y){Y.exports={clearOutlineControllers:function(O){var e=O._fullLayout._zoomlayer;e&&e.selectAll(".outline-controllers").remove()},clearOutline:function(O){var e=O._fullLayout._zoomlayer;e&&e.selectAll(".select-outline").remove(),O._fullLayout._outlining=!1}}},65152:function(Y,O,e){var M=e(85448),A=e(3400),o=e(54460);O.rangeToShapePosition=function(w){return w.type==="log"?w.r2d:function(_){return _}},O.shapePositionToRange=function(w){return w.type==="log"?w.d2r:function(_){return _}},O.decodeDate=function(w){return function(_){return _.replace&&(_=_.replace("_"," ")),w(_)}},O.encodeDate=function(w){return function(_){return w(_).replace(" ","_")}},O.extractPathCoords=function(w,_,p){var s=[];return w.match(M.segmentRE).forEach(function(n){var a=_[n.charAt(0)].drawn;if(a!==void 0){var r=n.substr(1).match(M.paramRE);if(r&&!(r.length<a)){var i=r[a],l=p?i:A.cleanNumber(i);s.push(l)}}}),s},O.getDataToPixel=function(w,_,p,s){var n,a=w._fullLayout._size;if(_)if(s==="domain")n=function(i){return _._length*(p?1-i:i)+_._offset};else{var r=O.shapePositionToRange(_);n=function(i){return _._offset+_.r2p(r(i,!0))},_.type==="date"&&(n=O.decodeDate(n))}else n=p?function(i){return a.t+a.h*(1-i)}:function(i){return a.l+a.w*i};return n},O.getPixelToData=function(w,_,p,s){var n,a=w._fullLayout._size;if(_)if(s==="domain")n=function(i){var l=(i-_._offset)/_._length;return p?1-l:l};else{var r=O.rangeToShapePosition(_);n=function(i){return r(_.p2r(i-_._offset))}}else n=p?function(i){return 1-(i-a.t)/a.h}:function(i){return(i-a.l)/a.w};return n},O.roundPositionForSharpStrokeRendering=function(w,_){var p=Math.round(_%2)===1,s=Math.round(w);return p?s+.5:s},O.makeShapesOptionsAndPlotinfo=function(w,_){var p=w._fullLayout.shapes[_]||{},s=w._fullLayout._plots[p.xref+p.yref];return s?s._hadPlotinfo=!0:(s={},p.xref&&p.xref!=="paper"&&(s.xaxis=w._fullLayout[p.xref+"axis"]),p.yref&&p.yref!=="paper"&&(s.yaxis=w._fullLayout[p.yref+"axis"])),s.xsizemode=p.xsizemode,s.ysizemode=p.ysizemode,s.xanchor=p.xanchor,s.yanchor=p.yanchor,{options:p,plotinfo:s}},O.makeSelectionsOptionsAndPlotinfo=function(w,_){var p=w._fullLayout.selections[_]||{},s=w._fullLayout._plots[p.xref+p.yref];return s?s._hadPlotinfo=!0:(s={},p.xref&&(s.xaxis=w._fullLayout[p.xref+"axis"]),p.yref&&(s.yaxis=w._fullLayout[p.yref+"axis"])),{options:p,plotinfo:s}},O.getPathString=function(w,_){var p,s,n,a,r,i,l,u,c=_.type,g=o.getRefType(_.xref),f=o.getRefType(_.yref),b=o.getFromId(w,_.xref),v=o.getFromId(w,_.yref),d=w._fullLayout._size;if(b?g==="domain"?s=function(P){return b._offset+b._length*P}:(p=O.shapePositionToRange(b),s=function(P){return b._offset+b.r2p(p(P,!0))}):s=function(P){return d.l+d.w*P},v?f==="domain"?a=function(P){return v._offset+v._length*(1-P)}:(n=O.shapePositionToRange(v),a=function(P){return v._offset+v.r2p(n(P,!0))}):a=function(P){return d.t+d.h*(1-P)},c==="path")return b&&b.type==="date"&&(s=O.decodeDate(s)),v&&v.type==="date"&&(a=O.decodeDate(a)),function(P,I,z){var F=P.path,U=P.xsizemode,R=P.ysizemode,j=P.xanchor,Z=P.yanchor;return F.replace(M.segmentRE,function(B){var q=0,V=B.charAt(0),ne=M.paramIsX[V],ee=M.paramIsY[V],$=M.numParams[V],J=B.substr(1).replace(M.paramRE,function(K){return ne[q]?K=U==="pixel"?I(j)+Number(K):I(K):ee[q]&&(K=R==="pixel"?z(Z)-Number(K):z(K)),++q>$&&(K="X"),K});return q>$&&(J=J.replace(/[\s,]*X.*/,""),A.log("Ignoring extra params in segment "+B)),V+J})}(_,s,a);if(_.xsizemode==="pixel"){var m=s(_.xanchor);r=m+_.x0,i=m+_.x1}else r=s(_.x0),i=s(_.x1);if(_.ysizemode==="pixel"){var x=a(_.yanchor);l=x-_.y0,u=x-_.y1}else l=a(_.y0),u=a(_.y1);if(c==="line")return"M"+r+","+l+"L"+i+","+u;if(c==="rect")return"M"+r+","+l+"H"+i+"V"+u+"H"+r+"Z";var y=(r+i)/2,T=(l+u)/2,h=Math.abs(y-r),E=Math.abs(T-l),k="A"+h+","+E,L=y+h+","+T;return"M"+L+k+" 0 1,1 "+y+","+(T-E)+k+" 0 0,1 "+L+"Z"}},41592:function(Y,O,e){var M=e(4016);Y.exports={moduleType:"component",name:"shapes",layoutAttributes:e(46056),supplyLayoutDefaults:e(43712),supplyDrawNewShapeDefaults:e(65144),includeBasePlot:e(36632)("shapes"),calcAutorange:e(96084),draw:M.draw,drawOne:M.drawOne}},97728:function(Y){function O(o,w){return w?w.d2l(o):o}function e(o,w){return w?w.l2d(o):o}function M(o,w){return O(o.x1,w)-O(o.x0,w)}function A(o,w,_){return O(o.y1,_)-O(o.y0,_)}Y.exports={x0:function(o){return o.x0},x1:function(o){return o.x1},y0:function(o){return o.y0},y1:function(o){return o.y1},slope:function(o,w,_){return o.type!=="line"?void 0:A(o,0,_)/M(o,w)},dx:M,dy:A,width:function(o,w){return Math.abs(M(o,w))},height:function(o,w,_){return Math.abs(A(o,0,_))},length:function(o,w,_){return o.type!=="line"?void 0:Math.sqrt(Math.pow(M(o,w),2)+Math.pow(A(o,0,_),2))},xcenter:function(o,w){return e((O(o.x1,w)+O(o.x0,w))/2,w)},ycenter:function(o,w,_){return e((O(o.y1,_)+O(o.y0,_))/2,_)}}},89861:function(Y,O,e){var M=e(25376),A=e(66741),o=e(92880).extendDeepAll,w=e(67824).overrideAll,_=e(85656),p=e(31780).templatedArray,s=e(60876),n=p("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});Y.exports=w(p("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:n,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:o(A({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:_.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:M({})},font:M({}),activebgcolor:{valType:"color",dflt:s.gripBgActiveColor},bgcolor:{valType:"color",dflt:s.railBgColor},bordercolor:{valType:"color",dflt:s.railBorderColor},borderwidth:{valType:"number",min:0,dflt:s.railBorderWidth},ticklen:{valType:"number",min:0,dflt:s.tickLength},tickcolor:{valType:"color",dflt:s.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:s.minorTickLength}}),"arraydraw","from-root")},60876:function(Y){Y.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},8132:function(Y,O,e){var M=e(3400),A=e(51272),o=e(89861),w=e(60876).name,_=o.steps;function p(n,a,r){function i(f,b){return M.coerce(n,a,o,f,b)}for(var l=A(n,a,{name:"steps",handleItemDefaults:s}),u=0,c=0;c<l.length;c++)l[c].visible&&u++;if(u<2?a.visible=!1:i("visible")){a._stepCount=u;var g=a._visibleSteps=M.filterVisible(l);(l[i("active")]||{}).visible||(a.active=g[0]._index),i("x"),i("y"),M.noneOrAll(n,a,["x","y"]),i("xanchor"),i("yanchor"),i("len"),i("lenmode"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),M.coerceFont(i,"font",r.font),i("currentvalue.visible")&&(i("currentvalue.xanchor"),i("currentvalue.prefix"),i("currentvalue.suffix"),i("currentvalue.offset"),M.coerceFont(i,"currentvalue.font",a.font)),i("transition.duration"),i("transition.easing"),i("bgcolor"),i("activebgcolor"),i("bordercolor"),i("borderwidth"),i("ticklen"),i("tickwidth"),i("tickcolor"),i("minorticklen")}}function s(n,a){function r(l,u){return M.coerce(n,a,_,l,u)}if(n.method==="skip"||Array.isArray(n.args)?r("visible"):a.visible=!1){r("method"),r("args");var i=r("label","step-"+a._index);r("value",i),r("execute")}}Y.exports=function(n,a){A(n,a,{name:w,handleItemDefaults:p})}},79664:function(Y,O,e){var M=e(33428),A=e(7316),o=e(76308),w=e(43616),_=e(3400),p=_.strTranslate,s=e(72736),n=e(31780).arrayEditor,a=e(60876),r=e(84284),i=r.LINE_SPACING,l=r.FROM_TL,u=r.FROM_BR;function c(z){return a.autoMarginIdRoot+z._index}function g(z){return z._index}function f(z,F){var U=w.tester.selectAll("g."+a.labelGroupClass).data(F._visibleSteps);U.enter().append("g").classed(a.labelGroupClass,!0);var R=0,j=0;U.each(function(K){var te=d(M.select(this),{step:K},F).node();if(te){var ie=w.bBox(te);j=Math.max(j,ie.height),R=Math.max(R,ie.width)}}),U.remove();var Z=F._dims={};Z.inputAreaWidth=Math.max(a.railWidth,a.gripHeight);var B=z._fullLayout._size;Z.lx=B.l+B.w*F.x,Z.ly=B.t+B.h*(1-F.y),F.lenmode==="fraction"?Z.outerLength=Math.round(B.w*F.len):Z.outerLength=F.len,Z.inputAreaStart=0,Z.inputAreaLength=Math.round(Z.outerLength-F.pad.l-F.pad.r);var q=(Z.inputAreaLength-2*a.stepInset)/(F._stepCount-1),V=R+a.labelPadding;if(Z.labelStride=Math.max(1,Math.ceil(V/q)),Z.labelHeight=j,Z.currentValueMaxWidth=0,Z.currentValueHeight=0,Z.currentValueTotalHeight=0,Z.currentValueMaxLines=1,F.currentvalue.visible){var ne=w.tester.append("g");U.each(function(K){var te=b(ne,F,K.label),ie=te.node()&&w.bBox(te.node())||{width:0,height:0},ae=s.lineCount(te);Z.currentValueMaxWidth=Math.max(Z.currentValueMaxWidth,Math.ceil(ie.width)),Z.currentValueHeight=Math.max(Z.currentValueHeight,Math.ceil(ie.height)),Z.currentValueMaxLines=Math.max(Z.currentValueMaxLines,ae)}),Z.currentValueTotalHeight=Z.currentValueHeight+F.currentvalue.offset,ne.remove()}Z.height=Z.currentValueTotalHeight+a.tickOffset+F.ticklen+a.labelOffset+Z.labelHeight+F.pad.t+F.pad.b;var ee="left";_.isRightAnchor(F)&&(Z.lx-=Z.outerLength,ee="right"),_.isCenterAnchor(F)&&(Z.lx-=Z.outerLength/2,ee="center");var $="top";_.isBottomAnchor(F)&&(Z.ly-=Z.height,$="bottom"),_.isMiddleAnchor(F)&&(Z.ly-=Z.height/2,$="middle"),Z.outerLength=Math.ceil(Z.outerLength),Z.height=Math.ceil(Z.height),Z.lx=Math.round(Z.lx),Z.ly=Math.round(Z.ly);var J={y:F.y,b:Z.height*u[$],t:Z.height*l[$]};F.lenmode==="fraction"?(J.l=0,J.xl=F.x-F.len*l[ee],J.r=0,J.xr=F.x+F.len*u[ee]):(J.x=F.x,J.l=Z.outerLength*l[ee],J.r=Z.outerLength*u[ee]),A.autoMargin(z,c(F),J)}function b(z,F,U){if(F.currentvalue.visible){var R,j,Z=F._dims;switch(F.currentvalue.xanchor){case"right":R=Z.inputAreaLength-a.currentValueInset-Z.currentValueMaxWidth,j="left";break;case"center":R=.5*Z.inputAreaLength,j="middle";break;default:R=a.currentValueInset,j="left"}var B=_.ensureSingle(z,"text",a.labelClass,function(J){J.attr({"text-anchor":j,"data-notex":1})}),q=F.currentvalue.prefix?F.currentvalue.prefix:"";if(typeof U=="string")q+=U;else{var V=F.steps[F.active].label,ne=F._gd._fullLayout._meta;ne&&(V=_.templateString(V,ne)),q+=V}F.currentvalue.suffix&&(q+=F.currentvalue.suffix),B.call(w.font,F.currentvalue.font).text(q).call(s.convertToTspans,F._gd);var ee=s.lineCount(B),$=(Z.currentValueMaxLines+1-ee)*F.currentvalue.font.size*i;return s.positionText(B,R,$),B}}function v(z,F,U){_.ensureSingle(z,"rect",a.gripRectClass,function(R){R.call(T,F,z,U).style("pointer-events","all")}).attr({width:a.gripWidth,height:a.gripHeight,rx:a.gripRadius,ry:a.gripRadius}).call(o.stroke,U.bordercolor).call(o.fill,U.bgcolor).style("stroke-width",U.borderwidth+"px")}function d(z,F,U){var R=_.ensureSingle(z,"text",a.labelClass,function(B){B.attr({"text-anchor":"middle","data-notex":1})}),j=F.step.label,Z=U._gd._fullLayout._meta;return Z&&(j=_.templateString(j,Z)),R.call(w.font,U.font).text(j).call(s.convertToTspans,U._gd),R}function m(z,F){var U=_.ensureSingle(z,"g",a.labelsClass),R=F._dims,j=U.selectAll("g."+a.labelGroupClass).data(R.labelSteps);j.enter().append("g").classed(a.labelGroupClass,!0),j.exit().remove(),j.each(function(Z){var B=M.select(this);B.call(d,Z,F),w.setTranslate(B,k(F,Z.fraction),a.tickOffset+F.ticklen+F.font.size*i+a.labelOffset+R.currentValueTotalHeight)})}function x(z,F,U,R,j){var Z=Math.round(R*(U._stepCount-1)),B=U._visibleSteps[Z]._index;B!==U.active&&y(z,F,U,B,!0,j)}function y(z,F,U,R,j,Z){var B=U.active;U.active=R,n(z.layout,a.name,U).applyUpdate("active",R);var q=U.steps[U.active];F.call(E,U,Z),F.call(b,U),z.emit("plotly_sliderchange",{slider:U,step:U.steps[U.active],interaction:j,previousActive:B}),q&&q.method&&j&&(F._nextMethod?(F._nextMethod.step=q,F._nextMethod.doCallback=j,F._nextMethod.doTransition=Z):(F._nextMethod={step:q,doCallback:j,doTransition:Z},F._nextMethodRaf=window.requestAnimationFrame(function(){var V=F._nextMethod.step;V.method&&(V.execute&&A.executeAPICommand(z,V.method,V.args),F._nextMethod=null,F._nextMethodRaf=null)})))}function T(z,F,U){if(!F._context.staticPlot){var R=U.node(),j=M.select(F);z.on("mousedown",B),z.on("touchstart",B)}function Z(){return U.data()[0]}function B(){var q=Z();F.emit("plotly_sliderstart",{slider:q});var V=U.select("."+a.gripRectClass);M.event.stopPropagation(),M.event.preventDefault(),V.call(o.fill,q.activebgcolor);var ne=L(q,M.mouse(R)[0]);function ee(){var J=Z(),K=L(J,M.mouse(R)[0]);x(F,U,J,K,!1)}function $(){var J=Z();J._dragging=!1,V.call(o.fill,J.bgcolor),j.on("mouseup",null),j.on("mousemove",null),j.on("touchend",null),j.on("touchmove",null),F.emit("plotly_sliderend",{slider:J,step:J.steps[J.active]})}x(F,U,q,ne,!0),q._dragging=!0,j.on("mousemove",ee),j.on("touchmove",ee),j.on("mouseup",$),j.on("touchend",$)}}function h(z,F){var U=z.selectAll("rect."+a.tickRectClass).data(F._visibleSteps),R=F._dims;U.enter().append("rect").classed(a.tickRectClass,!0),U.exit().remove(),U.attr({width:F.tickwidth+"px","shape-rendering":"crispEdges"}),U.each(function(j,Z){var B=Z%R.labelStride==0,q=M.select(this);q.attr({height:B?F.ticklen:F.minorticklen}).call(o.fill,F.tickcolor),w.setTranslate(q,k(F,Z/(F._stepCount-1))-.5*F.tickwidth,(B?a.tickOffset:a.minorTickOffset)+R.currentValueTotalHeight)})}function E(z,F,U){for(var R=z.select("rect."+a.gripRectClass),j=0,Z=0;Z<F._stepCount;Z++)if(F._visibleSteps[Z]._index===F.active){j=Z;break}var B=k(F,j/(F._stepCount-1));if(!F._invokingCommand){var q=R;U&&F.transition.duration>0&&(q=q.transition().duration(F.transition.duration).ease(F.transition.easing)),q.attr("transform",p(B-.5*a.gripWidth,F._dims.currentValueTotalHeight))}}function k(z,F){var U=z._dims;return U.inputAreaStart+a.stepInset+(U.inputAreaLength-2*a.stepInset)*Math.min(1,Math.max(0,F))}function L(z,F){var U=z._dims;return Math.min(1,Math.max(0,(F-a.stepInset-U.inputAreaStart)/(U.inputAreaLength-2*a.stepInset-2*U.inputAreaStart)))}function P(z,F,U){var R=U._dims,j=_.ensureSingle(z,"rect",a.railTouchRectClass,function(Z){Z.call(T,F,z,U).style("pointer-events","all")});j.attr({width:R.inputAreaLength,height:Math.max(R.inputAreaWidth,a.tickOffset+U.ticklen+R.labelHeight)}).call(o.fill,U.bgcolor).attr("opacity",0),w.setTranslate(j,0,R.currentValueTotalHeight)}function I(z,F){var U=F._dims,R=U.inputAreaLength-2*a.railInset,j=_.ensureSingle(z,"rect",a.railRectClass);j.attr({width:R,height:a.railWidth,rx:a.railRadius,ry:a.railRadius,"shape-rendering":"crispEdges"}).call(o.stroke,F.bordercolor).call(o.fill,F.bgcolor).style("stroke-width",F.borderwidth+"px"),w.setTranslate(j,a.railInset,.5*(U.inputAreaWidth-a.railWidth)+U.currentValueTotalHeight)}Y.exports=function(z){var F=z._context.staticPlot,U=z._fullLayout,R=function(ne,ee){for(var $=ne[a.name],J=[],K=0;K<$.length;K++){var te=$[K];te.visible&&(te._gd=ee,J.push(te))}return J}(U,z),j=U._infolayer.selectAll("g."+a.containerClassName).data(R.length>0?[0]:[]);function Z(ne){ne._commandObserver&&(ne._commandObserver.remove(),delete ne._commandObserver),A.autoMargin(z,c(ne))}if(j.enter().append("g").classed(a.containerClassName,!0).style("cursor",F?null:"ew-resize"),j.exit().each(function(){M.select(this).selectAll("g."+a.groupClassName).each(Z)}).remove(),R.length!==0){var B=j.selectAll("g."+a.groupClassName).data(R,g);B.enter().append("g").classed(a.groupClassName,!0),B.exit().each(Z).remove();for(var q=0;q<R.length;q++){var V=R[q];f(z,V)}B.each(function(ne){var ee=M.select(this);(function($){var J=$._dims;J.labelSteps=[];for(var K=$._stepCount,te=0;te<K;te+=J.labelStride)J.labelSteps.push({fraction:te/(K-1),step:$._visibleSteps[te]})})(ne),A.manageCommandObserver(z,ne,ne._visibleSteps,function($){var J=ee.data()[0];J.active!==$.index&&(J._dragging||y(z,ee,J,$.index,!1,!0))}),function($,J,K){(K.steps[K.active]||{}).visible||(K.active=K._visibleSteps[0]._index),J.call(b,K).call(I,K).call(m,K).call(h,K).call(P,$,K).call(v,$,K);var te=K._dims;w.setTranslate(J,te.lx+K.pad.l,te.ly+K.pad.t),J.call(E,K,!1),J.call(b,K)}(z,M.select(this),ne)})}}},97544:function(Y,O,e){var M=e(60876);Y.exports={moduleType:"component",name:M.name,layoutAttributes:e(89861),supplyLayoutDefaults:e(8132),draw:e(79664)}},81668:function(Y,O,e){var M=e(33428),A=e(38248),o=e(7316),w=e(24040),_=e(3400),p=_.strTranslate,s=e(43616),n=e(76308),a=e(72736),r=e(13448),i=e(84284).OPPOSITE_SIDE,l=/ [XY][0-9]* /;Y.exports={draw:function(u,c,g){var f,b=g.propContainer,v=g.propName,d=g.placeholder,m=g.traceIndex,x=g.avoid||{},y=g.attributes,T=g.transform,h=g.containerGroup,E=u._fullLayout,k=1,L=!1,P=b.title,I=(P&&P.text?P.text:"").trim(),z=P&&P.font?P.font:{},F=z.family,U=z.size,R=z.color;v==="title.text"?f="titleText":v.indexOf("axis")!==-1?f="axisTitleText":v.indexOf(!0)&&(f="colorbarTitleText");var j=u._context.edits[f];I===""?k=0:I.replace(l," % ")===d.replace(l," % ")&&(k=.2,L=!0,j||(I="")),g._meta?I=_.templateString(I,g._meta):E._meta&&(I=_.templateString(I,E._meta));var Z,B=I||j;h||(h=_.ensureSingle(E._infolayer,"g","g-"+c),Z=E._hColorbarMoveTitle);var q=h.selectAll("text").data(B?[0]:[]);if(q.enter().append("text"),q.text(I).attr("class",c),q.exit().remove(),!B)return h;function V($){_.syncOrAsync([ne,ee],$)}function ne($){var J;return!T&&Z&&(T={}),T?(J="",T.rotate&&(J+="rotate("+[T.rotate,y.x,y.y]+")"),(T.offset||Z)&&(J+=p(0,(T.offset||0)-(Z||0)))):J=null,$.attr("transform",J),$.style({"font-family":F,"font-size":M.round(U,2)+"px",fill:n.rgb(R),opacity:k*n.opacity(R),"font-weight":o.fontWeight}).attr(y).call(a.convertToTspans,u),o.previousPromises(u)}function ee($){var J=M.select($.node().parentNode);if(x&&x.selection&&x.side&&I){J.attr("transform",null);var K=i[x.side],te=x.side==="left"||x.side==="top"?-1:1,ie=A(x.pad)?x.pad:2,ae=s.bBox(J.node()),se={t:0,b:0,l:0,r:0},ce=u._fullLayout._reservedMargin;for(var de in ce)for(var ge in ce[de]){var ve=ce[de][ge];se[ge]=Math.max(se[ge],ve)}var be={left:se.l,top:se.t,right:E.width-se.r,bottom:E.height-se.b},me=x.maxShift||te*(be[x.side]-ae[x.side]),Se=0;if(me<0)Se=me;else{var we=x.offsetLeft||0,_e=x.offsetTop||0;ae.left-=we,ae.right-=we,ae.top-=_e,ae.bottom-=_e,x.selection.each(function(){var le=s.bBox(this);_.bBoxIntersect(ae,le,ie)&&(Se=Math.max(Se,te*(le[x.side]-ae[K])+ie))}),Se=Math.min(me,Se),b._titleScoot=Math.abs(Se)}if(Se>0||me<0){var oe={left:[-Se,0],right:[Se,0],top:[0,-Se],bottom:[0,Se]}[x.side];J.attr("transform",p(oe[0],oe[1]))}}}return q.call(V),j&&(I?q.on(".opacity",null):(k=0,L=!0,q.text(d).on("mouseover.opacity",function(){M.select(this).transition().duration(r.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){M.select(this).transition().duration(r.HIDE_PLACEHOLDER).style("opacity",0)})),q.call(a.makeEditable,{gd:u}).on("edit",function($){m!==void 0?w.call("_guiRestyle",u,v,$,m):w.call("_guiRelayout",u,v,$)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(V)}).on("input",function($){this.text($||" ").call(a.positionText,y.x,y.y)})),q.classed("js-placeholder",L),h}}},88444:function(Y,O,e){var M=e(25376),A=e(22548),o=e(92880).extendFlat,w=e(67824).overrideAll,_=e(66741),p=e(31780).templatedArray,s=p("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});Y.exports=w(p("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:s,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:o(_({editType:"arraydraw"}),{}),font:M({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:A.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},73712:function(Y){Y.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},91384:function(Y,O,e){var M=e(3400),A=e(51272),o=e(88444),w=e(73712).name,_=o.buttons;function p(n,a,r){function i(l,u){return M.coerce(n,a,o,l,u)}i("visible",A(n,a,{name:"buttons",handleItemDefaults:s}).length>0)&&(i("active"),i("direction"),i("type"),i("showactive"),i("x"),i("y"),M.noneOrAll(n,a,["x","y"]),i("xanchor"),i("yanchor"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),M.coerceFont(i,"font",r.font),i("bgcolor",r.paper_bgcolor),i("bordercolor"),i("borderwidth"))}function s(n,a){function r(i,l){return M.coerce(n,a,_,i,l)}r("visible",n.method==="skip"||Array.isArray(n.args))&&(r("method"),r("args"),r("args2"),r("label"),r("execute"))}Y.exports=function(n,a){A(n,a,{name:w,handleItemDefaults:p})}},14420:function(Y,O,e){var M=e(33428),A=e(7316),o=e(76308),w=e(43616),_=e(3400),p=e(72736),s=e(31780).arrayEditor,n=e(84284).LINE_SPACING,a=e(73712),r=e(37400);function i(k){return k._index}function l(k,L){return+k.attr(a.menuIndexAttrName)===L._index}function u(k,L,P,I,z,F,U,R){L.active=U,s(k.layout,a.name,L).applyUpdate("active",U),L.type==="buttons"?g(k,I,null,null,L):L.type==="dropdown"&&(z.attr(a.menuIndexAttrName,"-1"),c(k,I,z,F,L),R||g(k,I,z,F,L))}function c(k,L,P,I,z){var F=_.ensureSingle(L,"g",a.headerClassName,function(q){q.style("pointer-events","all")}),U=z._dims,R=z.active,j=z.buttons[R]||a.blankHeaderOpts,Z={y:z.pad.t,yPad:0,x:z.pad.l,xPad:0,index:0},B={width:U.headerWidth,height:U.headerHeight};F.call(f,z,j,k).call(h,z,Z,B),_.ensureSingle(L,"text",a.headerArrowClassName,function(q){q.attr("text-anchor","end").call(w.font,z.font).text(a.arrowSymbol[z.direction])}).attr({x:U.headerWidth-a.arrowOffsetX+z.pad.l,y:U.headerHeight/2+a.textOffsetY+z.pad.t}),F.on("click",function(){P.call(E,String(l(P,z)?-1:z._index)),g(k,L,P,I,z)}),F.on("mouseover",function(){F.call(m)}),F.on("mouseout",function(){F.call(x,z)}),w.setTranslate(L,U.lx,U.ly)}function g(k,L,P,I,z){P||(P=L).attr("pointer-events","all");var F=function(J){return+J.attr(a.menuIndexAttrName)==-1}(P)&&z.type!=="buttons"?[]:z.buttons,U=z.type==="dropdown"?a.dropdownButtonClassName:a.buttonClassName,R=P.selectAll("g."+U).data(_.filterVisible(F)),j=R.enter().append("g").classed(U,!0),Z=R.exit();z.type==="dropdown"?(j.attr("opacity","0").transition().attr("opacity","1"),Z.transition().attr("opacity","0").remove()):Z.remove();var B=0,q=0,V=z._dims,ne=["up","down"].indexOf(z.direction)!==-1;z.type==="dropdown"&&(ne?q=V.headerHeight+a.gapButtonHeader:B=V.headerWidth+a.gapButtonHeader),z.type==="dropdown"&&z.direction==="up"&&(q=-a.gapButtonHeader+a.gapButton-V.openHeight),z.type==="dropdown"&&z.direction==="left"&&(B=-a.gapButtonHeader+a.gapButton-V.openWidth);var ee={x:V.lx+B+z.pad.l,y:V.ly+q+z.pad.t,yPad:a.gapButton,xPad:a.gapButton,index:0},$={l:ee.x+z.borderwidth,t:ee.y+z.borderwidth};R.each(function(J,K){var te=M.select(this);te.call(f,z,J,k).call(h,z,ee),te.on("click",function(){M.event.defaultPrevented||(J.execute&&(J.args2&&z.active===K?(u(k,z,0,L,P,I,-1),A.executeAPICommand(k,J.method,J.args2)):(u(k,z,0,L,P,I,K),A.executeAPICommand(k,J.method,J.args))),k.emit("plotly_buttonclicked",{menu:z,button:J,active:z.active}))}),te.on("mouseover",function(){te.call(m)}),te.on("mouseout",function(){te.call(x,z),R.call(d,z)})}),R.call(d,z),ne?($.w=Math.max(V.openWidth,V.headerWidth),$.h=ee.y-$.t):($.w=ee.x-$.l,$.h=Math.max(V.openHeight,V.headerHeight)),$.direction=z.direction,I&&(R.size()?function(J,K,te,ie,ae,se){var ce,de,ge,ve=ae.direction,be=ve==="up"||ve==="down",me=ae._dims,Se=ae.active;if(be)for(de=0,ge=0;ge<Se;ge++)de+=me.heights[ge]+a.gapButton;else for(ce=0,ge=0;ge<Se;ge++)ce+=me.widths[ge]+a.gapButton;ie.enable(se,ce,de),ie.hbar&&ie.hbar.attr("opacity","0").transition().attr("opacity","1"),ie.vbar&&ie.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,I,z,$):function(J){var K=!!J.hbar,te=!!J.vbar;K&&J.hbar.transition().attr("opacity","0").each("end",function(){K=!1,te||J.disable()}),te&&J.vbar.transition().attr("opacity","0").each("end",function(){te=!1,K||J.disable()})}(I))}function f(k,L,P,I){k.call(b,L).call(v,L,P,I)}function b(k,L){_.ensureSingle(k,"rect",a.itemRectClassName,function(P){P.attr({rx:a.rx,ry:a.ry,"shape-rendering":"crispEdges"})}).call(o.stroke,L.bordercolor).call(o.fill,L.bgcolor).style("stroke-width",L.borderwidth+"px")}function v(k,L,P,I){var z=_.ensureSingle(k,"text",a.itemTextClassName,function(R){R.attr({"text-anchor":"start","data-notex":1})}),F=P.label,U=I._fullLayout._meta;U&&(F=_.templateString(F,U)),z.call(w.font,L.font).text(F).call(p.convertToTspans,I)}function d(k,L){var P=L.active;k.each(function(I,z){var F=M.select(this);z===P&&L.showactive&&F.select("rect."+a.itemRectClassName).call(o.fill,a.activeColor)})}function m(k){k.select("rect."+a.itemRectClassName).call(o.fill,a.hoverColor)}function x(k,L){k.select("rect."+a.itemRectClassName).call(o.fill,L.bgcolor)}function y(k,L){var P=L._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},I=w.tester.selectAll("g."+a.dropdownButtonClassName).data(_.filterVisible(L.buttons));I.enter().append("g").classed(a.dropdownButtonClassName,!0);var z=["up","down"].indexOf(L.direction)!==-1;I.each(function(B,q){var V=M.select(this);V.call(f,L,B,k);var ne=V.select("."+a.itemTextClassName),ee=ne.node()&&w.bBox(ne.node()).width,$=Math.max(ee+a.textPadX,a.minWidth),J=L.font.size*n,K=p.lineCount(ne),te=Math.max(J*K,a.minHeight)+a.textOffsetY;te=Math.ceil(te),$=Math.ceil($),P.widths[q]=$,P.heights[q]=te,P.height1=Math.max(P.height1,te),P.width1=Math.max(P.width1,$),z?(P.totalWidth=Math.max(P.totalWidth,$),P.openWidth=P.totalWidth,P.totalHeight+=te+a.gapButton,P.openHeight+=te+a.gapButton):(P.totalWidth+=$+a.gapButton,P.openWidth+=$+a.gapButton,P.totalHeight=Math.max(P.totalHeight,te),P.openHeight=P.totalHeight)}),z?P.totalHeight-=a.gapButton:P.totalWidth-=a.gapButton,P.headerWidth=P.width1+a.arrowPadX,P.headerHeight=P.height1,L.type==="dropdown"&&(z?(P.width1+=a.arrowPadX,P.totalHeight=P.height1):P.totalWidth=P.width1,P.totalWidth+=a.arrowPadX),I.remove();var F=P.totalWidth+L.pad.l+L.pad.r,U=P.totalHeight+L.pad.t+L.pad.b,R=k._fullLayout._size;P.lx=R.l+R.w*L.x,P.ly=R.t+R.h*(1-L.y);var j="left";_.isRightAnchor(L)&&(P.lx-=F,j="right"),_.isCenterAnchor(L)&&(P.lx-=F/2,j="center");var Z="top";_.isBottomAnchor(L)&&(P.ly-=U,Z="bottom"),_.isMiddleAnchor(L)&&(P.ly-=U/2,Z="middle"),P.totalWidth=Math.ceil(P.totalWidth),P.totalHeight=Math.ceil(P.totalHeight),P.lx=Math.round(P.lx),P.ly=Math.round(P.ly),A.autoMargin(k,T(L),{x:L.x,y:L.y,l:F*({right:1,center:.5}[j]||0),r:F*({left:1,center:.5}[j]||0),b:U*({top:1,middle:.5}[Z]||0),t:U*({bottom:1,middle:.5}[Z]||0)})}function T(k){return a.autoMarginIdRoot+k._index}function h(k,L,P,I){I=I||{};var z=k.select("."+a.itemRectClassName),F=k.select("."+a.itemTextClassName),U=L.borderwidth,R=P.index,j=L._dims;w.setTranslate(k,U+P.x,U+P.y);var Z=["up","down"].indexOf(L.direction)!==-1,B=I.height||(Z?j.heights[R]:j.height1);z.attr({x:0,y:0,width:I.width||(Z?j.width1:j.widths[R]),height:B});var q=L.font.size*n,V=(p.lineCount(F)-1)*q/2;p.positionText(F,a.textOffsetX,B/2-V+a.textOffsetY),Z?P.y+=j.heights[R]+P.yPad:P.x+=j.widths[R]+P.xPad,P.index++}function E(k,L){k.attr(a.menuIndexAttrName,L||"-1").selectAll("g."+a.dropdownButtonClassName).remove()}Y.exports=function(k){var L=k._fullLayout,P=_.filterVisible(L[a.name]);function I(q){A.autoMargin(k,T(q))}var z=L._menulayer.selectAll("g."+a.containerClassName).data(P.length>0?[0]:[]);if(z.enter().append("g").classed(a.containerClassName,!0).style("cursor","pointer"),z.exit().each(function(){M.select(this).selectAll("g."+a.headerGroupClassName).each(I)}).remove(),P.length!==0){var F=z.selectAll("g."+a.headerGroupClassName).data(P,i);F.enter().append("g").classed(a.headerGroupClassName,!0);for(var U=_.ensureSingle(z,"g",a.dropdownButtonGroupClassName,function(q){q.style("pointer-events","all")}),R=0;R<P.length;R++){var j=P[R];y(k,j)}var Z="updatemenus"+L._uid,B=new r(k,U,Z);F.enter().size()&&(U.node().parentNode.appendChild(U.node()),U.call(E)),F.exit().each(function(q){U.call(E),I(q)}).remove(),F.each(function(q){var V=M.select(this),ne=q.type==="dropdown"?U:null;A.manageCommandObserver(k,q,q.buttons,function(ee){u(k,q,q.buttons[ee.index],V,ne,B,ee.index,!0)}),q.type==="dropdown"?(c(k,V,U,B,q),l(U,q)&&g(k,V,U,B,q)):g(k,V,null,null,q)})}}},76908:function(Y,O,e){var M=e(73712);Y.exports={moduleType:"component",name:M.name,layoutAttributes:e(88444),supplyLayoutDefaults:e(91384),draw:e(14420)}},37400:function(Y,O,e){Y.exports=_;var M=e(33428),A=e(76308),o=e(43616),w=e(3400);function _(p,s,n){this.gd=p,this.container=s,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}_.barWidth=2,_.barLength=20,_.barRadius=2,_.barPad=1,_.barColor="#808BA4",_.prototype.enable=function(p,s,n){var a=this.gd._fullLayout,r=a.width,i=a.height;this.position=p;var l,u,c,g,f=this.position.l,b=this.position.w,v=this.position.t,d=this.position.h,m=this.position.direction,x=m==="down",y=m==="left",T=m==="up",h=b,E=d;x||y||m==="right"||T||(this.position.direction="down",x=!0),x||T?(u=(l=f)+h,x?(c=v,E=(g=Math.min(c+E,i))-c):E=(g=v+E)-(c=Math.max(g-E,0))):(g=(c=v)+E,y?h=(u=f+h)-(l=Math.max(u-h,0)):(l=f,h=(u=Math.min(l+h,r))-l)),this._box={l,t:c,w:h,h:E};var k=b>h,L=_.barLength+2*_.barPad,P=_.barWidth+2*_.barPad,I=f,z=v+d;z+P>i&&(z=i-P);var F=this.container.selectAll("rect.scrollbar-horizontal").data(k?[0]:[]);F.exit().on(".drag",null).remove(),F.enter().append("rect").classed("scrollbar-horizontal",!0).call(A.fill,_.barColor),k?(this.hbar=F.attr({rx:_.barRadius,ry:_.barRadius,x:I,y:z,width:L,height:P}),this._hbarXMin=I+L/2,this._hbarTranslateMax=h-L):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var U=d>E,R=_.barWidth+2*_.barPad,j=_.barLength+2*_.barPad,Z=f+b,B=v;Z+R>r&&(Z=r-R);var q=this.container.selectAll("rect.scrollbar-vertical").data(U?[0]:[]);q.exit().on(".drag",null).remove(),q.enter().append("rect").classed("scrollbar-vertical",!0).call(A.fill,_.barColor),U?(this.vbar=q.attr({rx:_.barRadius,ry:_.barRadius,x:Z,y:B,width:R,height:j}),this._vbarYMin=B+j/2,this._vbarTranslateMax=E-j):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var V=this.id,ne=l-.5,ee=U?u+R+.5:u+.5,$=c-.5,J=k?g+P+.5:g+.5,K=a._topdefs.selectAll("#"+V).data(k||U?[0]:[]);if(K.exit().remove(),K.enter().append("clipPath").attr("id",V).append("rect"),k||U?(this._clipRect=K.select("rect").attr({x:Math.floor(ne),y:Math.floor($),width:Math.ceil(ee)-Math.floor(ne),height:Math.ceil(J)-Math.floor($)}),this.container.call(o.setClipUrl,V,this.gd),this.bg.attr({x:f,y:v,width:b,height:d})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(o.setClipUrl,null),delete this._clipRect),k||U){var te=M.behavior.drag().on("dragstart",function(){M.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(te);var ie=M.behavior.drag().on("dragstart",function(){M.event.sourceEvent.preventDefault(),M.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));k&&this.hbar.on(".drag",null).call(ie),U&&this.vbar.on(".drag",null).call(ie)}this.setTranslate(s,n)},_.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(o.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},_.prototype._onBoxDrag=function(){var p=this.translateX,s=this.translateY;this.hbar&&(p-=M.event.dx),this.vbar&&(s-=M.event.dy),this.setTranslate(p,s)},_.prototype._onBoxWheel=function(){var p=this.translateX,s=this.translateY;this.hbar&&(p+=M.event.deltaY),this.vbar&&(s+=M.event.deltaY),this.setTranslate(p,s)},_.prototype._onBarDrag=function(){var p=this.translateX,s=this.translateY;if(this.hbar){var n=p+this._hbarXMin,a=n+this._hbarTranslateMax;p=(w.constrain(M.event.x,n,a)-n)/(a-n)*(this.position.w-this._box.w)}if(this.vbar){var r=s+this._vbarYMin,i=r+this._vbarTranslateMax;s=(w.constrain(M.event.y,r,i)-r)/(i-r)*(this.position.h-this._box.h)}this.setTranslate(p,s)},_.prototype.setTranslate=function(p,s){var n=this.position.w-this._box.w,a=this.position.h-this._box.h;if(p=w.constrain(p||0,0,n),s=w.constrain(s||0,0,a),this.translateX=p,this.translateY=s,this.container.call(o.setTranslate,this._box.l-this.position.l-p,this._box.t-this.position.t-s),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+p-.5),y:Math.floor(this.position.t+s-.5)}),this.hbar){var r=p/n;this.hbar.call(o.setTranslate,p+r*this._hbarTranslateMax,s)}if(this.vbar){var i=s/a;this.vbar.call(o.setTranslate,p,s+i*this._vbarTranslateMax)}}},84284:function(Y){Y.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},36208:function(Y){Y.exports={axisRefDescription:function(O,e,M){return["If set to a",O,"axis id (e.g. *"+O+"* or","*"+O+"2*), the `"+O+"` position refers to a",O,"coordinate. If set to *paper*, the `"+O+"`","position refers to the distance from the",e,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",e,"("+M+"). If set to a",O,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",e,"of the domain of that axis: e.g.,","*"+O+"2 domain* refers to the domain of the second",O," axis and a",O,"position of 0.5 refers to the","point between the",e,"and the",M,"of the domain of the","second",O,"axis."].join(" ")}}},48164:function(Y){Y.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:""},DECREASING:{COLOR:"#FF4136",SYMBOL:""}}},26880:function(Y){Y.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},69104:function(Y){Y.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},99168:function(Y){Y.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87792:function(Y){Y.exports={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",x:""}},13448:function(Y){Y.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},39032:function(Y){Y.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:""}},2264:function(Y,O){O.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],O.STYLE=O.CSS_DECLARATIONS.map(function(e){return e.join(": ")+"; "}).join("")},9616:function(Y,O){O.xmlns="http://www.w3.org/2000/xmlns/",O.svg="http://www.w3.org/2000/svg",O.xlink="http://www.w3.org/1999/xlink",O.svgAttrs={xmlns:O.svg,"xmlns:xlink":O.xlink}},64884:function(Y,O,e){O.version=e(25788).version,e(88324),e(79288);for(var M=e(24040),A=O.register=M.register,o=e(22448),w=Object.keys(o),_=0;_<w.length;_++){var p=w[_];p.charAt(0)!=="_"&&(O[p]=o[p]),A({moduleType:"apiMethod",name:p,fn:o[p]})}A(e(65875)),A([e(79180),e(56864),e(22676),e(41592),e(7402),e(76908),e(97544),e(49692),e(41152),e(12704),e(64968),e(8932),e(55080),e(2780),e(93024),e(45460)]),A([e(6580),e(11680)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(A(window.PlotlyLocales),delete window.PlotlyLocales),O.Icons=e(9224);var s=e(93024),n=e(7316);O.Plots={resize:n.resize,graphJson:n.graphJson,sendDataToCloud:n.sendDataToCloud},O.Fx={hover:s.hover,unhover:s.unhover,loneHover:s.loneHover,loneUnhover:s.loneUnhover},O.Snapshot=e(78904),O.PlotSchema=e(73060)},9224:function(Y){Y.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},98308:function(Y,O){O.isLeftAnchor=function(e){return e.xanchor==="left"||e.xanchor==="auto"&&e.x<=.3333333333333333},O.isCenterAnchor=function(e){return e.xanchor==="center"||e.xanchor==="auto"&&e.x>.3333333333333333&&e.x<.6666666666666666},O.isRightAnchor=function(e){return e.xanchor==="right"||e.xanchor==="auto"&&e.x>=.6666666666666666},O.isTopAnchor=function(e){return e.yanchor==="top"||e.yanchor==="auto"&&e.y>=.6666666666666666},O.isMiddleAnchor=function(e){return e.yanchor==="middle"||e.yanchor==="auto"&&e.y>.3333333333333333&&e.y<.6666666666666666},O.isBottomAnchor=function(e){return e.yanchor==="bottom"||e.yanchor==="auto"&&e.y<=.3333333333333333}},11864:function(Y,O,e){var M=e(20435),A=M.mod,o=M.modHalf,w=Math.PI,_=2*w;function p(r){return Math.abs(r[1]-r[0])>_-1e-14}function s(r,i){return o(i-r,_)}function n(r,i){if(p(i))return!0;var l,u;i[0]<i[1]?(l=i[0],u=i[1]):(l=i[1],u=i[0]),(l=A(l,_))>(u=A(u,_))&&(u+=_);var c=A(r,_),g=c+_;return c>=l&&c<=u||g>=l&&g<=u}function a(r,i,l,u,c,g,f){c=c||0,g=g||0;var b,v,d,m,x,y=p([l,u]);function T(L,P){return[L*Math.cos(P)+c,g-L*Math.sin(P)]}y?(b=0,v=w,d=_):l<u?(b=l,d=u):(b=u,d=l),r<i?(m=r,x=i):(m=i,x=r);var h,E=Math.abs(d-b)<=w?0:1;function k(L,P,I){return"A"+[L,L]+" "+[0,E,I]+" "+T(L,P)}return y?h=m===null?"M"+T(x,b)+k(x,v,0)+k(x,d,0)+"Z":"M"+T(m,b)+k(m,v,0)+k(m,d,0)+"ZM"+T(x,b)+k(x,v,1)+k(x,d,1)+"Z":m===null?(h="M"+T(x,b)+k(x,d,0),f&&(h+="L0,0Z")):h="M"+T(m,b)+"L"+T(x,b)+k(x,d,0)+"L"+T(m,d)+k(m,b,1)+"Z",h}Y.exports={deg2rad:function(r){return r/180*w},rad2deg:function(r){return r/w*180},angleDelta:s,angleDist:function(r,i){return Math.abs(s(r,i))},isFullCircle:p,isAngleInsideSector:n,isPtInsideSector:function(r,i,l,u){return!!n(i,u)&&(l[0]<l[1]?(c=l[0],g=l[1]):(c=l[1],g=l[0]),r>=c&&r<=g);var c,g},pathArc:function(r,i,l,u,c){return a(null,r,i,l,u,c,0)},pathSector:function(r,i,l,u,c){return a(null,r,i,l,u,c,1)},pathAnnulus:function(r,i,l,u,c,g){return a(r,i,l,u,c,g,1)}}},38116:function(Y,O,e){var M=e(83160).decode,A=e(63620),o=Array.isArray,w=ArrayBuffer,_=DataView;function p(i){return w.isView(i)&&!(i instanceof _)}function s(i){return o(i)||p(i)}O.isTypedArray=p,O.isArrayOrTypedArray=s,O.isArray1D=function(i){return!s(i[0])},O.ensureArray=function(i,l){return o(i)||(i=[]),i.length=l,i};var n={u1c:typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,i1:typeof Int8Array>"u"?void 0:Int8Array,u1:typeof Uint8Array>"u"?void 0:Uint8Array,i2:typeof Int16Array>"u"?void 0:Int16Array,u2:typeof Uint16Array>"u"?void 0:Uint16Array,i4:typeof Int32Array>"u"?void 0:Int32Array,u4:typeof Uint32Array>"u"?void 0:Uint32Array,f4:typeof Float32Array>"u"?void 0:Float32Array,f8:typeof Float64Array>"u"?void 0:Float64Array};function a(i){return i.constructor===ArrayBuffer}function r(i,l,u){if(s(i)){if(s(i[0])){for(var c=u,g=0;g<i.length;g++)c=l(c,i[g].length);return c}return i.length}return 0}n.uint8c=n.u1c,n.uint8=n.u1,n.int8=n.i1,n.uint16=n.u2,n.int16=n.i2,n.uint32=n.u4,n.int32=n.i4,n.float32=n.f4,n.float64=n.f8,O.isArrayBuffer=a,O.decodeTypedArraySpec=function(i){var l=[],u=function(L){return{bdata:L.bdata,dtype:L.dtype,shape:L.shape}}(i),c=u.dtype,g=n[c];if(!g)throw new Error('Error in dtype: "'+c+'"');var f=g.BYTES_PER_ELEMENT,b=u.bdata;a(b)||(b=M(b));var v=u.shape===void 0?[b.byteLength/f]:(""+u.shape).split(",");v.reverse();var d,m,x=v.length,y=+v[0],T=f*y,h=0;if(x===1)l=new g(b);else if(x===2)for(d=+v[1],m=0;m<d;m++)l[m]=new g(b,h,y),h+=T;else{if(x!==3)throw new Error("ndim: "+x+'is not supported with the shape:"'+u.shape+'"');d=+v[1];for(var E=+v[2],k=0;k<E;k++)for(l[k]=[],m=0;m<d;m++)l[k][m]=new g(b,h,y),h+=T}return l.bdata=u.bdata,l.dtype=u.dtype,l.shape=v.reverse().join(","),i._inputArray=l,l},O.isTypedArraySpec=function(i){return A(i)&&i.hasOwnProperty("dtype")&&typeof i.dtype=="string"&&i.hasOwnProperty("bdata")&&(typeof i.bdata=="string"||a(i.bdata))&&(i.shape===void 0||i.hasOwnProperty("shape")&&(typeof i.shape=="string"||typeof i.shape=="number"))},O.concat=function(){var i,l,u,c,g,f,b,v,d=[],m=!0,x=0;for(u=0;u<arguments.length;u++)(f=(c=arguments[u]).length)&&(l?d.push(c):(l=c,g=f),o(c)?i=!1:(m=!1,x?i!==c.constructor&&(i=!1):i=c.constructor),x+=f);if(!x)return[];if(!d.length)return l;if(m)return l.concat.apply(l,d);if(i){for((b=new i(x)).set(l),u=0;u<d.length;u++)c=d[u],b.set(c,g),g+=c.length;return b}for(b=new Array(x),v=0;v<l.length;v++)b[v]=l[v];for(u=0;u<d.length;u++){for(c=d[u],v=0;v<c.length;v++)b[g+v]=c[v];g+=v}return b},O.maxRowLength=function(i){return r(i,Math.max,0)},O.minRowLength=function(i){return r(i,Math.min,1/0)}},54037:function(Y,O,e){var M=e(38248),A=e(39032).BADNUM,o=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;Y.exports=function(w){return typeof w=="string"&&(w=w.replace(o,"")),M(w)?Number(w):A}},73696:function(Y){Y.exports=function(O){var e=O._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(M){M.regl&&M.regl.clear({color:!0,depth:!0})})}},75352:function(Y){Y.exports=function(O){O._responsiveChartHandler&&(window.removeEventListener("resize",O._responsiveChartHandler),delete O._responsiveChartHandler)}},63064:function(Y,O,e){var M=e(38248),A=e(49760),o=e(45464),w=e(88304),_=e(76308),p=e(13448).DESELECTDIM,s=e(22296),n=e(53756).counter,a=e(20435).modHalf,r=e(38116).isArrayOrTypedArray,i=e(38116).isTypedArraySpec,l=e(38116).decodeTypedArraySpec;function u(c,g){var f=O.valObjectMeta[g.valType];if(g.arrayOk&&r(c))return!0;if(f.validateFunction)return f.validateFunction(c,g);var b={},v=b,d={set:function(m){v=m}};return f.coerceFunction(c,d,b,g),v!==b}O.valObjectMeta={data_array:{coerceFunction:function(c,g,f){g.set(r(c)?c:i(c)?l(c):f)}},enumerated:{coerceFunction:function(c,g,f,b){b.coerceNumber&&(c=+c),b.values.indexOf(c)===-1?g.set(f):g.set(c)},validateFunction:function(c,g){g.coerceNumber&&(c=+c);for(var f=g.values,b=0;b<f.length;b++){var v=String(f[b]);if(v.charAt(0)==="/"&&v.charAt(v.length-1)==="/"){if(new RegExp(v.substr(1,v.length-2)).test(c))return!0}else if(c===f[b])return!0}return!1}},boolean:{coerceFunction:function(c,g,f){c===!0||c===!1?g.set(c):g.set(f)}},number:{coerceFunction:function(c,g,f,b){!M(c)||b.min!==void 0&&c<b.min||b.max!==void 0&&c>b.max?g.set(f):g.set(+c)}},integer:{coerceFunction:function(c,g,f,b){c%1||!M(c)||b.min!==void 0&&c<b.min||b.max!==void 0&&c>b.max?g.set(f):g.set(+c)}},string:{coerceFunction:function(c,g,f,b){if(typeof c!="string"){var v=typeof c=="number";b.strict!==!0&&v?g.set(String(c)):g.set(f)}else b.noBlank&&!c?g.set(f):g.set(c)}},color:{coerceFunction:function(c,g,f){A(c).isValid()?g.set(c):g.set(f)}},colorlist:{coerceFunction:function(c,g,f){Array.isArray(c)&&c.length&&c.every(function(b){return A(b).isValid()})?g.set(c):g.set(f)}},colorscale:{coerceFunction:function(c,g,f){g.set(w.get(c,f))}},angle:{coerceFunction:function(c,g,f){c==="auto"?g.set("auto"):M(c)?g.set(a(+c,360)):g.set(f)}},subplotid:{coerceFunction:function(c,g,f,b){var v=b.regex||n(f);typeof c=="string"&&v.test(c)?g.set(c):g.set(f)},validateFunction:function(c,g){var f=g.dflt;return c===f||typeof c=="string"&&!!n(f).test(c)}},flaglist:{coerceFunction:function(c,g,f,b){if((b.extras||[]).indexOf(c)===-1)if(typeof c=="string"){for(var v=c.split("+"),d=0;d<v.length;){var m=v[d];b.flags.indexOf(m)===-1||v.indexOf(m)<d?v.splice(d,1):d++}v.length?g.set(v.join("+")):g.set(f)}else g.set(f);else g.set(c)}},any:{coerceFunction:function(c,g,f){c===void 0?g.set(f):g.set(i(c)?l(c):c)}},info_array:{coerceFunction:function(c,g,f,b){function v(U,R,j){var Z,B={set:function(q){Z=q}};return j===void 0&&(j=R.dflt),O.valObjectMeta[R.valType].coerceFunction(U,B,j,R),Z}if(i(c)&&(c=l(c)),r(c)){var d,m,x,y,T,h,E=b.dimensions===2||b.dimensions==="1-2"&&Array.isArray(c)&&r(c[0]),k=b.items,L=[],P=Array.isArray(k),I=P&&E&&r(k[0]),z=E&&P&&!I,F=P&&!z?k.length:c.length;if(f=Array.isArray(f)?f:[],E)for(d=0;d<F;d++)for(L[d]=[],x=r(c[d])?c[d]:[],T=z?k.length:P?k[d].length:x.length,m=0;m<T;m++)y=z?k[m]:P?k[d][m]:k,(h=v(x[m],y,(f[d]||[])[m]))!==void 0&&(L[d][m]=h);else for(d=0;d<F;d++)(h=v(c[d],P?k[d]:k,f[d]))!==void 0&&(L[d]=h);g.set(L)}else g.set(f)},validateFunction:function(c,g){if(!r(c))return!1;var f=g.items,b=Array.isArray(f),v=g.dimensions===2;if(!g.freeLength&&c.length!==f.length)return!1;for(var d=0;d<c.length;d++)if(v){if(!r(c[d])||!g.freeLength&&c[d].length!==f[d].length)return!1;for(var m=0;m<c[d].length;m++)if(!u(c[d][m],b?f[d][m]:f))return!1}else if(!u(c[d],b?f[d]:f))return!1;return!0}}},O.coerce=function(c,g,f,b,v){var d=s(f,b).get(),m=s(c,b),x=s(g,b),y=m.get(),T=g._template;if(y===void 0&&T&&(y=s(T,b).get(),T=0),v===void 0&&(v=d.dflt),d.arrayOk){if(r(y))return x.set(y),y;if(i(y))return y=l(y),x.set(y),y}var h=O.valObjectMeta[d.valType].coerceFunction;h(y,x,v,d);var E=x.get();return T&&E===v&&!u(y,d)&&(h(y=s(T,b).get(),x,v,d),E=x.get()),E},O.coerce2=function(c,g,f,b,v){var d=s(c,b),m=O.coerce(c,g,f,b,v);return d.get()!=null&&m},O.coerceFont=function(c,g,f){var b={};return f=f||{},b.family=c(g+".family",f.family),b.size=c(g+".size",f.size),b.color=c(g+".color",f.color),b},O.coercePattern=function(c,g,f,b){if(c(g+".shape")){c(g+".solidity"),c(g+".size");var v=c(g+".fillmode")==="overlay";if(!b){var d=c(g+".bgcolor",v?f:void 0);c(g+".fgcolor",v?_.contrast(d):f)}c(g+".fgopacity",v?.5:1)}},O.coerceHoverinfo=function(c,g,f){var b,v=g._module.attributes,d=v.hoverinfo?v:o,m=d.hoverinfo;if(f._dataLength===1){var x=m.dflt==="all"?m.flags.slice():m.dflt.split("+");x.splice(x.indexOf("name"),1),b=x.join("+")}return O.coerce(c,g,d,"hoverinfo",b)},O.coerceSelectionMarkerOpacity=function(c,g){if(c.marker){var f,b,v=c.marker.opacity;v!==void 0&&(r(v)||c.selected||c.unselected||(f=v,b=p*v),g("selected.marker.opacity",f),g("unselected.marker.opacity",b))}},O.validate=u},67555:function(Y,O,e){var M,A,o=e(94336).Yn,w=e(38248),_=e(24248),p=e(20435).mod,s=e(39032),n=s.BADNUM,a=s.ONEDAY,r=s.ONEHOUR,i=s.ONEMIN,l=s.ONESEC,u=s.EPOCHJD,c=e(24040),g=e(94336).E9,f=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,b=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,v=new Date().getFullYear()-70;function d(F){return F&&c.componentsRegistry.calendars&&typeof F=="string"&&F!=="gregorian"}function m(F,U){return String(F+Math.pow(10,U)).substr(1)}O.dateTick0=function(F,U){var R=function(Z,B){return d(Z)?B?c.getComponentMethod("calendars","CANONICAL_SUNDAY")[Z]:c.getComponentMethod("calendars","CANONICAL_TICK")[Z]:B?"2000-01-02":"2000-01-01"}(F,!!U);if(U<2)return R;var j=O.dateTime2ms(R,F);return j+=a*(U-1),O.ms2DateTime(j,0,F)},O.dfltRange=function(F){return d(F)?c.getComponentMethod("calendars","DFLTRANGE")[F]:["2000-01-01","2001-01-01"]},O.isJSDate=function(F){return typeof F=="object"&&F!==null&&typeof F.getTime=="function"},O.dateTime2ms=function(F,U){if(O.isJSDate(F)){var R=F.getTimezoneOffset()*i,j=(F.getUTCMinutes()-F.getMinutes())*i+(F.getUTCSeconds()-F.getSeconds())*l+(F.getUTCMilliseconds()-F.getMilliseconds());if(j){var Z=3*i;R=R-Z/2+p(j-R+Z/2,Z)}return(F=Number(F)-R)>=M&&F<=A?F:n}if(typeof F!="string"&&typeof F!="number")return n;F=String(F);var B=d(U),q=F.charAt(0);!B||q!=="G"&&q!=="g"||(F=F.substr(1),U="");var V=B&&U.substr(0,7)==="chinese",ne=F.match(V?b:f);if(!ne)return n;var ee=ne[1],$=ne[3]||"1",J=Number(ne[5]||1),K=Number(ne[7]||0),te=Number(ne[9]||0),ie=Number(ne[11]||0);if(B){if(ee.length===2)return n;var ae;ee=Number(ee);try{var se=c.getComponentMethod("calendars","getCal")(U);if(V){var ce=$.charAt($.length-1)==="i";$=parseInt($,10),ae=se.newDate(ee,se.toMonthIndex(ee,$,ce),J)}else ae=se.newDate(ee,Number($),J)}catch{return n}return ae?(ae.toJD()-u)*a+K*r+te*i+ie*l:n}ee=ee.length===2?(Number(ee)+2e3-v)%100+v:Number(ee),$-=1;var de=new Date(Date.UTC(2e3,$,J,K,te));return de.setUTCFullYear(ee),de.getUTCMonth()!==$||de.getUTCDate()!==J?n:de.getTime()+ie*l},M=O.MIN_MS=O.dateTime2ms("-9999"),A=O.MAX_MS=O.dateTime2ms("9999-12-31 23:59:59.9999"),O.isDateTime=function(F,U){return O.dateTime2ms(F,U)!==n};var x=90*a,y=3*r,T=5*i;function h(F,U,R,j,Z){if((U||R||j||Z)&&(F+=" "+m(U,2)+":"+m(R,2),(j||Z)&&(F+=":"+m(j,2),Z))){for(var B=4;Z%10==0;)B-=1,Z/=10;F+="."+m(Z,B)}return F}O.ms2DateTime=function(F,U,R){if(typeof F!="number"||!(F>=M&&F<=A))return n;U||(U=0);var j,Z,B,q,V,ne,ee=Math.floor(10*p(F+.05,1)),$=Math.round(F-ee/10);if(d(R)){var J=Math.floor($/a)+u,K=Math.floor(p(F,a));try{j=c.getComponentMethod("calendars","getCal")(R).fromJD(J).formatDate("yyyy-mm-dd")}catch{j=g("G%Y-%m-%d")(new Date($))}if(j.charAt(0)==="-")for(;j.length<11;)j="-0"+j.substr(1);else for(;j.length<10;)j="0"+j;Z=U<x?Math.floor(K/r):0,B=U<x?Math.floor(K%r/i):0,q=U<y?Math.floor(K%i/l):0,V=U<T?K%l*10+ee:0}else ne=new Date($),j=g("%Y-%m-%d")(ne),Z=U<x?ne.getUTCHours():0,B=U<x?ne.getUTCMinutes():0,q=U<y?ne.getUTCSeconds():0,V=U<T?10*ne.getUTCMilliseconds()+ee:0;return h(j,Z,B,q,V)},O.ms2DateTimeLocal=function(F){if(!(F>=M+a&&F<=A-a))return n;var U=Math.floor(10*p(F+.05,1)),R=new Date(Math.round(F-U/10));return h(o("%Y-%m-%d")(R),R.getHours(),R.getMinutes(),R.getSeconds(),10*R.getUTCMilliseconds()+U)},O.cleanDate=function(F,U,R){if(F===n)return U;if(O.isJSDate(F)||typeof F=="number"&&isFinite(F)){if(d(R))return _.error("JS Dates and milliseconds are incompatible with world calendars",F),U;if(!(F=O.ms2DateTimeLocal(+F))&&U!==void 0)return U}else if(!O.isDateTime(F,R))return _.error("unrecognized date",F),U;return F};var E=/%\d?f/g,k=/%h/g,L={1:"1",2:"1",3:"2",4:"2"};function P(F,U,R,j){F=F.replace(E,function(B){var q=Math.min(+B.charAt(1)||6,6);return(U/1e3%1+2).toFixed(q).substr(2).replace(/0+$/,"")||"0"});var Z=new Date(Math.floor(U+.05));if(F=F.replace(k,function(){return L[R("%q")(Z)]}),d(j))try{F=c.getComponentMethod("calendars","worldCalFmt")(F,U,j)}catch{return"Invalid"}return R(F)(Z)}var I=[59,59.9,59.99,59.999,59.9999];O.formatDate=function(F,U,R,j,Z,B){if(Z=d(Z)&&Z,!U)if(R==="y")U=B.year;else if(R==="m")U=B.month;else{if(R!=="d")return function(q,V){var ne=p(q+.05,a),ee=m(Math.floor(ne/r),2)+":"+m(p(Math.floor(ne/i),60),2);if(V!=="M"){w(V)||(V=0);var $=(100+Math.min(p(q/l,60),I[V])).toFixed(V).substr(1);V>0&&($=$.replace(/0+$/,"").replace(/[\.]$/,"")),ee+=":"+$}return ee}(F,R)+`
`+P(B.dayMonthYear,F,j,Z);U=B.dayMonth+`
`+B.year}return P(U,F,j,Z)};var z=3*a;O.incrementMonth=function(F,U,R){R=d(R)&&R;var j=p(F,a);if(F=Math.round(F-j),R)try{var Z=Math.round(F/a)+u,B=c.getComponentMethod("calendars","getCal")(R),q=B.fromJD(Z);return U%12?B.add(q,U,"m"):B.add(q,U/12,"y"),(q.toJD()-u)*a+j}catch{_.error("invalid ms "+F+" in calendar "+R)}var V=new Date(F+z);return V.setUTCMonth(V.getUTCMonth()+U)+j-z},O.findExactDates=function(F,U){for(var R,j,Z=0,B=0,q=0,V=0,ne=d(U)&&c.getComponentMethod("calendars","getCal")(U),ee=0;ee<F.length;ee++)if(j=F[ee],w(j)){if(!(j%a))if(ne)try{(R=ne.fromJD(j/a+u)).day()===1?R.month()===1?Z++:B++:q++}catch{}else(R=new Date(j)).getUTCDate()===1?R.getUTCMonth()===0?Z++:B++:q++}else V++;q+=B+=Z;var $=F.length-V;return{exactYears:Z/$,exactMonths:B/$,exactDays:q/$}}},52200:function(Y,O,e){var M=e(33428),A=e(24248),o=e(52248),w=e(36524);function _(r){var i=r&&r.parentNode;i&&i.removeChild(r)}function p(r,i,l){var u="plotly.js-style-"+r,c=document.getElementById(u);c||((c=document.createElement("style")).setAttribute("id",u),c.appendChild(document.createTextNode("")),document.head.appendChild(c));var g=c.sheet;g.insertRule?g.insertRule(i+"{"+l+"}",0):g.addRule?g.addRule(i,l,0):A.warn("addStyleRule failed")}function s(r){var i=window.getComputedStyle(r,null),l=i.getPropertyValue("-webkit-transform")||i.getPropertyValue("-moz-transform")||i.getPropertyValue("-ms-transform")||i.getPropertyValue("-o-transform")||i.getPropertyValue("transform");return l==="none"?null:l.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(u){return+u})}function n(r){for(var i=[];a(r);)i.push(r),r=r.parentNode;return i}function a(r){return r&&(r instanceof Element||r instanceof HTMLElement)}Y.exports={getGraphDiv:function(r){var i;if(typeof r=="string"){if((i=document.getElementById(r))===null)throw new Error("No DOM element with id '"+r+"' exists on the page.");return i}if(r==null)throw new Error("DOM element provided is null or undefined");return r},isPlotDiv:function(r){var i=M.select(r);return i.node()instanceof HTMLElement&&i.size()&&i.classed("js-plotly-plot")},removeElement:_,addStyleRule:function(r,i){p("global",r,i)},addRelatedStyleRule:p,deleteRelatedStyleRule:function(r){var i="plotly.js-style-"+r,l=document.getElementById(i);l&&_(l)},getFullTransformMatrix:function(r){var i=n(r),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return i.forEach(function(u){var c=s(u);if(c){var g=o.convertCssMatrix(c);l=w.multiply(l,l,g)}}),l},getElementTransformMatrix:s,getElementAndAncestors:n,equalDomRects:function(r,i){return r&&i&&r.top===i.top&&r.left===i.left&&r.right===i.right&&r.bottom===i.bottom}}},95924:function(Y,O,e){var M=e(61252).EventEmitter,A={init:function(o){if(o._ev instanceof M)return o;var w=new M,_=new M;return o._ev=w,o._internalEv=_,o.on=w.on.bind(w),o.once=w.once.bind(w),o.removeListener=w.removeListener.bind(w),o.removeAllListeners=w.removeAllListeners.bind(w),o._internalOn=_.on.bind(_),o._internalOnce=_.once.bind(_),o._removeInternalListener=_.removeListener.bind(_),o._removeAllInternalListeners=_.removeAllListeners.bind(_),o.emit=function(p,s){typeof jQuery<"u"&&jQuery(o).trigger(p,s),w.emit(p,s),_.emit(p,s)},o},triggerHandler:function(o,w,_){var p,s;typeof jQuery<"u"&&(p=jQuery(o).triggerHandler(w,_));var n=o._ev;if(!n)return p;var a,r=n._events[w];if(!r)return p;function i(l){return l.listener?(n.removeListener(w,l.listener),l.fired?void 0:(l.fired=!0,l.listener.apply(n,[_]))):l.apply(n,[_])}for(r=Array.isArray(r)?r:[r],a=0;a<r.length-1;a++)i(r[a]);return s=i(r[a]),p!==void 0?p:s},purge:function(o){return delete o._ev,delete o.on,delete o.once,delete o.removeListener,delete o.removeAllListeners,delete o.emit,delete o._ev,delete o._internalEv,delete o._internalOn,delete o._internalOnce,delete o._removeInternalListener,delete o._removeAllInternalListeners,o}};Y.exports=A},92880:function(Y,O,e){var M=e(63620),A=Array.isArray;function o(w,_,p,s){var n,a,r,i,l,u,c,g=w[0],f=w.length;if(f===2&&A(g)&&A(w[1])&&g.length===0){if(c=function(v,d){var m,x;for(m=0;m<v.length;m++){if((x=v[m])!==null&&typeof x=="object")return!1;x!==void 0&&(d[m]=x)}return!0}(w[1],g),c)return g;g.splice(0,g.length)}for(var b=1;b<f;b++)for(a in n=w[b])r=g[a],i=n[a],s&&A(i)?g[a]=i:_&&i&&(M(i)||(l=A(i)))?(l?(l=!1,u=r&&A(r)?r:[]):u=r&&M(r)?r:{},g[a]=o([u,i],_,p,s)):(i!==void 0||p)&&(g[a]=i);return g}O.extendFlat=function(){return o(arguments,!1,!1,!1)},O.extendDeep=function(){return o(arguments,!0,!1,!1)},O.extendDeepAll=function(){return o(arguments,!0,!0,!1)},O.extendDeepNoArrays=function(){return o(arguments,!0,!1,!0)}},68944:function(Y){Y.exports=function(O){for(var e={},M=[],A=0,o=0;o<O.length;o++){var w=O[o];e[w]!==1&&(e[w]=1,M[A++]=w)}return M}},43880:function(Y){function O(M){return M.visible===!0}function e(M){var A=M[0].trace;return A.visible===!0&&A._length!==0}Y.exports=function(M){for(var A,o=(A=M,Array.isArray(A)&&Array.isArray(A[0])&&A[0][0]&&A[0][0].trace?e:O),w=[],_=0;_<M.length;_++){var p=M[_];o(p)&&w.push(p)}return w}},27144:function(Y,O,e){var M=e(33428),A=e(36116),o=e(40440),w=e(77844),_=e(42428),p=e(35536),s=e(24248),n=e(63620),a=e(22296),r=e(92065),i=Object.keys(A),l={"ISO-3":p,"USA-states":p,"country names":function(c){for(var g=0;g<i.length;g++){var f=i[g];if(new RegExp(A[f]).test(c.trim().toLowerCase()))return f}return s.log("Unrecognized country name: "+c+"."),!1}};function u(c){var g=c.geojson,f=window.PlotlyGeoAssets||{},b=typeof g=="string"?f[g]:g;return n(b)?b:(s.error("Oops ... something went wrong when fetching "+g),!1)}Y.exports={locationToFeature:function(c,g,f){if(!g||typeof g!="string")return!1;var b,v,d,m=l[c](g);if(m){if(c==="USA-states")for(b=[],d=0;d<f.length;d++)(v=f[d]).properties&&v.properties.gu&&v.properties.gu==="USA"&&b.push(v);else b=f;for(d=0;d<b.length;d++)if((v=b[d]).id===m)return v;s.log(["Location with id",m,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(c){var g,f,b,v,d=c.geometry,m=d.coordinates,x=c.id,y=[];function T(h){for(var E=0;E<h.length-1;E++)if(h[E][0]>0&&h[E+1][0]<0)return E;return null}switch(g=x==="RUS"||x==="FJI"?function(h){var E;if(T(h)===null)E=h;else for(E=new Array(h.length),v=0;v<h.length;v++)E[v]=[h[v][0]<0?h[v][0]+360:h[v][0],h[v][1]];y.push(r.tester(E))}:x==="ATA"?function(h){var E=T(h);if(E===null)return y.push(r.tester(h));var k=new Array(h.length+1),L=0;for(v=0;v<h.length;v++)v>E?k[L++]=[h[v][0]+360,h[v][1]]:v===E?(k[L++]=h[v],k[L++]=[h[v][0],-90]):k[L++]=h[v];var P=r.tester(k);P.pts.pop(),y.push(P)}:function(h){y.push(r.tester(h))},d.type){case"MultiPolygon":for(f=0;f<m.length;f++)for(b=0;b<m[f].length;b++)g(m[f][b]);break;case"Polygon":for(f=0;f<m.length;f++)g(m[f])}return y},getTraceGeojson:u,extractTraceFeature:function(c){var g=c[0].trace,f=u(g);if(!f)return!1;var b,v={},d=[];for(b=0;b<g._length;b++){var m=c[b];(m.loc||m.loc===0)&&(v[m.loc]=m)}function x(h){var E=a(h,g.featureidkey||"id").get(),k=v[E];if(k){var L=h.geometry;if(L.type==="Polygon"||L.type==="MultiPolygon"){var P={type:"Feature",id:E,geometry:L,properties:{}};P.properties.ct=function(I){var z,F=I.geometry;if(F.type==="MultiPolygon")for(var U=F.coordinates,R=0,j=0;j<U.length;j++){var Z={type:"Polygon",coordinates:U[j]},B=o.default(Z);B>R&&(R=B,z=Z)}else z=F;return w.default(z).geometry.coordinates}(P),k.fIn=h,k.fOut=P,d.push(P)}else s.log(["Location",k.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete v[E]}switch(f.type){case"FeatureCollection":var y=f.features;for(b=0;b<y.length;b++)x(y[b]);break;case"Feature":x(f);break;default:return s.warn(["Invalid GeoJSON type",(f.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var T in v)s.log(["Location *"+T+"*","does not have a matching feature with id-key","*"+g.featureidkey+"*."].join(" "));return d},fetchTraceGeoData:function(c){var g=window.PlotlyGeoAssets||{},f=[];function b(x){return new Promise(function(y,T){M.json(x,function(h,E){if(h){delete g[x];var k=h.status===404?'GeoJSON at URL "'+x+'" does not exist.':"Unexpected error while fetching from "+x;return T(new Error(k))}return g[x]=E,y(E)})})}function v(x){return new Promise(function(y,T){var h=0,E=setInterval(function(){return g[x]&&g[x]!=="pending"?(clearInterval(E),y(g[x])):h>100?(clearInterval(E),T("Unexpected error while fetching from "+x)):void h++},50)})}for(var d=0;d<c.length;d++){var m=c[d][0].trace.geojson;typeof m=="string"&&(g[m]?g[m]==="pending"&&f.push(v(m)):(g[m]="pending",f.push(b(m))))}return f},computeBbox:function(c){return _.default(c)}}},44808:function(Y,O,e){var M=e(39032).BADNUM;O.calcTraceToLineCoords=function(A){for(var o=A[0].trace.connectgaps,w=[],_=[],p=0;p<A.length;p++){var s=A[p].lonlat;s[0]!==M?_.push(s):!o&&_.length>0&&(w.push(_),_=[])}return _.length>0&&w.push(_),w},O.makeLine=function(A){return A.length===1?{type:"LineString",coordinates:A[0]}:{type:"MultiLineString",coordinates:A}},O.makePolygon=function(A){if(A.length===1)return{type:"Polygon",coordinates:A};for(var o=new Array(A.length),w=0;w<A.length;w++)o[w]=[A[w]];return{type:"MultiPolygon",coordinates:o}},O.makeBlank=function(){return{type:"Point",coordinates:[]}}},92348:function(Y,O,e){var M,A,o,w=e(20435).mod;function _(s,n,a,r,i,l,u,c){var g=a-s,f=i-s,b=u-i,v=r-n,d=l-n,m=c-l,x=g*m-b*v;if(x===0)return null;var y=(f*m-b*d)/x,T=(f*v-g*d)/x;return T<0||T>1||y<0||y>1?null:{x:s+g*y,y:n+v*y}}function p(s,n,a,r,i){var l=r*s+i*n;if(l<0)return r*r+i*i;if(l>a){var u=r-s,c=i-n;return u*u+c*c}var g=r*n-i*s;return g*g/a}O.segmentsIntersect=_,O.segmentDistance=function(s,n,a,r,i,l,u,c){if(_(s,n,a,r,i,l,u,c))return 0;var g=a-s,f=r-n,b=u-i,v=c-l,d=g*g+f*f,m=b*b+v*v,x=Math.min(p(g,f,d,i-s,l-n),p(g,f,d,u-s,c-n),p(b,v,m,s-i,n-l),p(b,v,m,a-i,r-l));return Math.sqrt(x)},O.getTextLocation=function(s,n,a,r){if(s===A&&r===o||(M={},A=s,o=r),M[a])return M[a];var i=s.getPointAtLength(w(a-r/2,n)),l=s.getPointAtLength(w(a+r/2,n)),u=Math.atan((l.y-i.y)/(l.x-i.x)),c=s.getPointAtLength(w(a,n)),g={x:(4*c.x+i.x+l.x)/6,y:(4*c.y+i.y+l.y)/6,theta:u};return M[a]=g,g},O.clearLocationCache=function(){A=null},O.getVisibleSegment=function(s,n,a){var r,i,l=n.left,u=n.right,c=n.top,g=n.bottom,f=0,b=s.getTotalLength(),v=b;function d(x){var y=s.getPointAtLength(x);x===0?r=y:x===b&&(i=y);var T=y.x<l?l-y.x:y.x>u?y.x-u:0,h=y.y<c?c-y.y:y.y>g?y.y-g:0;return Math.sqrt(T*T+h*h)}for(var m=d(f);m;){if((f+=m+a)>v)return;m=d(f)}for(m=d(v);m;){if(f>(v-=m+a))return;m=d(v)}return{min:f,max:v,len:v-f,total:b,isClosed:f===0&&v===b&&Math.abs(r.x-i.x)<.1&&Math.abs(r.y-i.y)<.1}},O.findPointOnPath=function(s,n,a,r){for(var i,l,u,c=(r=r||{}).pathLength||s.getTotalLength(),g=r.tolerance||.001,f=r.iterationLimit||30,b=s.getPointAtLength(0)[a]>s.getPointAtLength(c)[a]?-1:1,v=0,d=0,m=c;v<f;){if(i=(d+m)/2,u=(l=s.getPointAtLength(i))[a]-n,Math.abs(u)<g)return l;b*u>0?m=i:d=i,v++}return l}},33040:function(Y,O,e){var M=e(38248),A=e(49760),o=e(72160),w=e(8932),_=e(22548).defaultLine,p=e(38116).isArrayOrTypedArray,s=o(_);function n(i,l){var u=i;return u[3]*=l,u}function a(i){if(M(i))return s;var l=o(i);return l.length?l:s}function r(i){return M(i)?i:1}Y.exports={formatColor:function(i,l,u){var c=i.color;c&&c._inputArray&&(c=c._inputArray);var g,f,b,v,d,m=p(c),x=p(l),y=w.extractOpts(i),T=[];if(g=y.colorscale!==void 0?w.makeColorScaleFuncFromTrace(i):a,f=m?function(E,k){return E[k]===void 0?s:o(g(E[k]))}:a,b=x?function(E,k){return E[k]===void 0?1:r(E[k])}:r,m||x)for(var h=0;h<u;h++)v=f(c,h),d=b(l,h),T[h]=n(v,d);else T=n(o(c),l);return T},parseColorScale:function(i){var l=w.extractOpts(i),u=l.colorscale;return l.reversescale&&(u=w.flipScale(l.colorscale)),u.map(function(c){var g=c[0],f=A(c[1]).toRgb();return{index:g,rgb:[f.r,f.g,f.b,f.a]}})}}},71688:function(Y,O,e){var M=e(35536);function A(o){return[o]}Y.exports={keyFun:function(o){return o.key},repeat:A,descend:M,wrap:A,unwrap:function(o){return o[0]}}},35536:function(Y){Y.exports=function(O){return O}},1396:function(Y){Y.exports=function(O,e){if(!e)return O;var M=1/Math.abs(e),A=M>1?(M*O+M*e)/M:O+e,o=String(A).length;if(o>16){var w=String(e).length;if(o>=String(O).length+w){var _=parseFloat(A).toPrecision(12);_.indexOf("e+")===-1&&(A=+_)}}return A}},3400:function(Y,O,e){var M=e(33428),A=e(94336).E9,o=e(57624).E9,w=e(38248),_=e(39032),p=_.FP_SAFE,s=-p,n=_.BADNUM,a=Y.exports={};a.adjustFormat=function(K){return!K||/^\d[.]\df/.test(K)||/[.]\d%/.test(K)?K:K==="0.f"?"~f":/^\d%/.test(K)?"~%":/^\ds/.test(K)?"~s":!/^[~,.0$]/.test(K)&&/[&fps]/.test(K)?"~"+K:K};var r={};a.warnBadFormat=function(K){var te=String(K);r[te]||(r[te]=1,a.warn('encountered bad format: "'+te+'"'))},a.noFormat=function(K){return String(K)},a.numberFormat=function(K){var te;try{te=o(a.adjustFormat(K))}catch{return a.warnBadFormat(K),a.noFormat}return te},a.nestedProperty=e(22296),a.keyedContainer=e(37804),a.relativeAttr=e(23193),a.isPlainObject=e(63620),a.toLogRange=e(36896),a.relinkPrivateKeys=e(51528);var i=e(38116);a.isArrayBuffer=i.isArrayBuffer,a.isTypedArray=i.isTypedArray,a.isArrayOrTypedArray=i.isArrayOrTypedArray,a.isArray1D=i.isArray1D,a.ensureArray=i.ensureArray,a.concat=i.concat,a.maxRowLength=i.maxRowLength,a.minRowLength=i.minRowLength;var l=e(20435);a.mod=l.mod,a.modHalf=l.modHalf;var u=e(63064);a.valObjectMeta=u.valObjectMeta,a.coerce=u.coerce,a.coerce2=u.coerce2,a.coerceFont=u.coerceFont,a.coercePattern=u.coercePattern,a.coerceHoverinfo=u.coerceHoverinfo,a.coerceSelectionMarkerOpacity=u.coerceSelectionMarkerOpacity,a.validate=u.validate;var c=e(67555);a.dateTime2ms=c.dateTime2ms,a.isDateTime=c.isDateTime,a.ms2DateTime=c.ms2DateTime,a.ms2DateTimeLocal=c.ms2DateTimeLocal,a.cleanDate=c.cleanDate,a.isJSDate=c.isJSDate,a.formatDate=c.formatDate,a.incrementMonth=c.incrementMonth,a.dateTick0=c.dateTick0,a.dfltRange=c.dfltRange,a.findExactDates=c.findExactDates,a.MIN_MS=c.MIN_MS,a.MAX_MS=c.MAX_MS;var g=e(14952);a.findBin=g.findBin,a.sorterAsc=g.sorterAsc,a.sorterDes=g.sorterDes,a.distinctVals=g.distinctVals,a.roundUp=g.roundUp,a.sort=g.sort,a.findIndexOfMin=g.findIndexOfMin,a.sortObjectKeys=e(95376);var f=e(63084);a.aggNums=f.aggNums,a.len=f.len,a.mean=f.mean,a.median=f.median,a.midRange=f.midRange,a.variance=f.variance,a.stdev=f.stdev,a.interp=f.interp;var b=e(52248);a.init2dArray=b.init2dArray,a.transposeRagged=b.transposeRagged,a.dot=b.dot,a.translationMatrix=b.translationMatrix,a.rotationMatrix=b.rotationMatrix,a.rotationXYMatrix=b.rotationXYMatrix,a.apply3DTransform=b.apply3DTransform,a.apply2DTransform=b.apply2DTransform,a.apply2DTransform2=b.apply2DTransform2,a.convertCssMatrix=b.convertCssMatrix,a.inverseTransformMatrix=b.inverseTransformMatrix;var v=e(11864);a.deg2rad=v.deg2rad,a.rad2deg=v.rad2deg,a.angleDelta=v.angleDelta,a.angleDist=v.angleDist,a.isFullCircle=v.isFullCircle,a.isAngleInsideSector=v.isAngleInsideSector,a.isPtInsideSector=v.isPtInsideSector,a.pathArc=v.pathArc,a.pathSector=v.pathSector,a.pathAnnulus=v.pathAnnulus;var d=e(98308);a.isLeftAnchor=d.isLeftAnchor,a.isCenterAnchor=d.isCenterAnchor,a.isRightAnchor=d.isRightAnchor,a.isTopAnchor=d.isTopAnchor,a.isMiddleAnchor=d.isMiddleAnchor,a.isBottomAnchor=d.isBottomAnchor;var m=e(92348);a.segmentsIntersect=m.segmentsIntersect,a.segmentDistance=m.segmentDistance,a.getTextLocation=m.getTextLocation,a.clearLocationCache=m.clearLocationCache,a.getVisibleSegment=m.getVisibleSegment,a.findPointOnPath=m.findPointOnPath;var x=e(92880);a.extendFlat=x.extendFlat,a.extendDeep=x.extendDeep,a.extendDeepAll=x.extendDeepAll,a.extendDeepNoArrays=x.extendDeepNoArrays;var y=e(24248);a.log=y.log,a.warn=y.warn,a.error=y.error;var T=e(53756);a.counterRegex=T.counter;var h=e(91200);a.throttle=h.throttle,a.throttleDone=h.done,a.clearThrottle=h.clear;var E=e(52200);function k(K){var te={};for(var ie in K)for(var ae=K[ie],se=0;se<ae.length;se++)te[ae[se]]=+ie;return te}a.getGraphDiv=E.getGraphDiv,a.isPlotDiv=E.isPlotDiv,a.removeElement=E.removeElement,a.addStyleRule=E.addStyleRule,a.addRelatedStyleRule=E.addRelatedStyleRule,a.deleteRelatedStyleRule=E.deleteRelatedStyleRule,a.getFullTransformMatrix=E.getFullTransformMatrix,a.getElementTransformMatrix=E.getElementTransformMatrix,a.getElementAndAncestors=E.getElementAndAncestors,a.equalDomRects=E.equalDomRects,a.clearResponsive=e(75352),a.preserveDrawingBuffer=e(34296),a.makeTraceGroups=e(30988),a._=e(98356),a.notifier=e(41792),a.filterUnique=e(68944),a.filterVisible=e(43880),a.pushUnique=e(52416),a.increment=e(1396),a.cleanNumber=e(54037),a.ensureNumber=function(K){return w(K)?(K=Number(K))>p||K<s?n:K:n},a.isIndex=function(K,te){return!(te!==void 0&&K>=te)&&w(K)&&K>=0&&K%1==0},a.noop=e(16628),a.identity=e(35536),a.repeat=function(K,te){for(var ie=new Array(te),ae=0;ae<te;ae++)ie[ae]=K;return ie},a.swapAttrs=function(K,te,ie,ae){ie||(ie="x"),ae||(ae="y");for(var se=0;se<te.length;se++){var ce=te[se],de=a.nestedProperty(K,ce.replace("?",ie)),ge=a.nestedProperty(K,ce.replace("?",ae)),ve=de.get();de.set(ge.get()),ge.set(ve)}},a.raiseToTop=function(K){K.parentNode.appendChild(K)},a.cancelTransition=function(K){return K.transition().duration(0)},a.constrain=function(K,te,ie){return te>ie?Math.max(ie,Math.min(te,K)):Math.max(te,Math.min(ie,K))},a.bBoxIntersect=function(K,te,ie){return ie=ie||0,K.left<=te.right+ie&&te.left<=K.right+ie&&K.top<=te.bottom+ie&&te.top<=K.bottom+ie},a.simpleMap=function(K,te,ie,ae,se){for(var ce=K.length,de=new Array(ce),ge=0;ge<ce;ge++)de[ge]=te(K[ge],ie,ae,se);return de},a.randstr=function K(te,ie,ae,se){if(ae||(ae=16),ie===void 0&&(ie=24),ie<=0)return"0";var ce,de,ge=Math.log(Math.pow(2,ie))/Math.log(ae),ve="";for(ce=2;ge===1/0;ce*=2)ge=Math.log(Math.pow(2,ie/ce))/Math.log(ae)*ce;var be=ge-Math.floor(ge);for(ce=0;ce<Math.floor(ge);ce++)ve=Math.floor(Math.random()*ae).toString(ae)+ve;be&&(de=Math.pow(ae,be),ve=Math.floor(Math.random()*de).toString(ae)+ve);var me=parseInt(ve,ae);return te&&te[ve]||me!==1/0&&me>=Math.pow(2,ie)?se>10?(a.warn("randstr failed uniqueness"),ve):K(te,ie,ae,(se||0)+1):ve},a.OptionControl=function(K,te){K||(K={}),te||(te="opt");var ie={optionList:[],_newoption:function(ae){ae[te]=K,ie[ae.name]=ae,ie.optionList.push(ae)}};return ie["_"+te]=K,ie},a.smooth=function(K,te){if((te=Math.round(te)||0)<2)return K;var ie,ae,se,ce,de=K.length,ge=2*de,ve=2*te-1,be=new Array(ve),me=new Array(de);for(ie=0;ie<ve;ie++)be[ie]=(1-Math.cos(Math.PI*(ie+1)/te))/(2*te);for(ie=0;ie<de;ie++){for(ce=0,ae=0;ae<ve;ae++)(se=ie+ae+1-te)<-de?se-=ge*Math.round(se/ge):se>=ge&&(se-=ge*Math.floor(se/ge)),se<0?se=-1-se:se>=de&&(se=ge-1-se),ce+=K[se]*be[ae];me[ie]=ce}return me},a.syncOrAsync=function(K,te,ie){var ae;function se(){return a.syncOrAsync(K,te,ie)}for(;K.length;)if((ae=(0,K.splice(0,1)[0])(te))&&ae.then)return ae.then(se);return ie&&ie(te)},a.stripTrailingSlash=function(K){return K.substr(-1)==="/"?K.substr(0,K.length-1):K},a.noneOrAll=function(K,te,ie){if(K){var ae,se=!1,ce=!0;for(ae=0;ae<ie.length;ae++)K[ie[ae]]!=null?se=!0:ce=!1;if(se&&!ce)for(ae=0;ae<ie.length;ae++)K[ie[ae]]=te[ie[ae]]}},a.mergeArray=function(K,te,ie,ae){var se=typeof ae=="function";if(a.isArrayOrTypedArray(K))for(var ce=Math.min(K.length,te.length),de=0;de<ce;de++){var ge=K[de];te[de][ie]=se?ae(ge):ge}},a.mergeArrayCastPositive=function(K,te,ie){return a.mergeArray(K,te,ie,function(ae){var se=+ae;return isFinite(se)&&se>0?se:0})},a.fillArray=function(K,te,ie,ae){if(ae=ae||a.identity,a.isArrayOrTypedArray(K))for(var se=0;se<te.length;se++)te[se][ie]=ae(K[se])},a.castOption=function(K,te,ie,ae){ae=ae||a.identity;var se=a.nestedProperty(K,ie).get();return a.isArrayOrTypedArray(se)?Array.isArray(te)&&a.isArrayOrTypedArray(se[te[0]])?ae(se[te[0]][te[1]]):ae(se[te]):se},a.extractOption=function(K,te,ie,ae){if(ie in K)return K[ie];var se=a.nestedProperty(te,ae).get();return Array.isArray(se)?void 0:se},a.tagSelected=function(K,te,ie){var ae,se,ce=te.selectedpoints,de=te._indexToPoints;de&&(ae=k(de));for(var ge=0;ge<ce.length;ge++){var ve=ce[ge];if(a.isIndex(ve)||a.isArrayOrTypedArray(ve)&&a.isIndex(ve[0])&&a.isIndex(ve[1])){var be=ae?ae[ve]:ve,me=ie?ie[be]:be;(se=me)!==void 0&&se<K.length&&(K[me].selected=1)}}},a.selIndices2selPoints=function(K){var te=K.selectedpoints,ie=K._indexToPoints;if(ie){for(var ae=k(ie),se=[],ce=0;ce<te.length;ce++){var de=te[ce];if(a.isIndex(de)){var ge=ae[de];a.isIndex(ge)&&se.push(ge)}}return se}return te},a.getTargetArray=function(K,te){var ie=te.target;if(typeof ie=="string"&&ie){var ae=a.nestedProperty(K,ie).get();return!!a.isArrayOrTypedArray(ae)&&ae}return!!a.isArrayOrTypedArray(ie)&&ie},a.minExtend=function K(te,ie,ae){var se={};typeof ie!="object"&&(ie={});var ce,de,ge,ve=ae==="pieLike"?-1:3,be=Object.keys(te);for(ce=0;ce<be.length;ce++)ge=te[de=be[ce]],de.charAt(0)!=="_"&&typeof ge!="function"&&(de==="module"?se[de]=ge:Array.isArray(ge)?se[de]=de==="colorscale"||ve===-1?ge.slice():ge.slice(0,ve):a.isTypedArray(ge)?se[de]=ve===-1?ge.subarray():ge.subarray(0,ve):se[de]=ge&&typeof ge=="object"?K(te[de],ie[de],ae):ge);for(be=Object.keys(ie),ce=0;ce<be.length;ce++)typeof(ge=ie[de=be[ce]])=="object"&&de in se&&typeof se[de]=="object"||(se[de]=ge);return se},a.titleCase=function(K){return K.charAt(0).toUpperCase()+K.substr(1)},a.containsAny=function(K,te){for(var ie=0;ie<te.length;ie++)if(K.indexOf(te[ie])!==-1)return!0;return!1},a.isIE=function(){return window.navigator.msSaveBlob!==void 0};var L=/Version\/[\d\.]+.*Safari/;a.isSafari=function(){return L.test(window.navigator.userAgent)};var P=/iPad|iPhone|iPod/;a.isIOS=function(){return P.test(window.navigator.userAgent)};var I=/Firefox\/(\d+)\.\d+/;a.getFirefoxVersion=function(){var K=I.exec(window.navigator.userAgent);if(K&&K.length===2){var te=parseInt(K[1]);if(!isNaN(te))return te}return null},a.isD3Selection=function(K){return K instanceof M.selection},a.ensureSingle=function(K,te,ie,ae){var se=K.select(te+(ie?"."+ie:""));if(se.size())return se;var ce=K.append(te);return ie&&ce.classed(ie,!0),ae&&ce.call(ae),ce},a.ensureSingleById=function(K,te,ie,ae){var se=K.select(te+"#"+ie);if(se.size())return se;var ce=K.append(te).attr("id",ie);return ae&&ce.call(ae),ce},a.objectFromPath=function(K,te){for(var ie,ae=K.split("."),se=ie={},ce=0;ce<ae.length;ce++){var de=ae[ce],ge=null,ve=ae[ce].match(/(.*)\[([0-9]+)\]/);ve?(de=ve[1],ge=ve[2],ie=ie[de]=[],ce===ae.length-1?ie[ge]=te:ie[ge]={},ie=ie[ge]):(ce===ae.length-1?ie[de]=te:ie[de]={},ie=ie[de])}return se};var z=/^([^\[\.]+)\.(.+)?/,F=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function U(K){return K.slice(0,2)==="__"}a.expandObjectPaths=function(K){var te,ie,ae,se,ce,de,ge;if(typeof K=="object"&&!Array.isArray(K)){for(ie in K)if(K.hasOwnProperty(ie))if(te=ie.match(z)){if(se=K[ie],U(ae=te[1]))continue;delete K[ie],K[ae]=a.extendDeepNoArrays(K[ae]||{},a.objectFromPath(ie,a.expandObjectPaths(se))[ae])}else if(te=ie.match(F)){if(se=K[ie],U(ae=te[1]))continue;if(ce=parseInt(te[2]),delete K[ie],K[ae]=K[ae]||[],te[3]===".")ge=te[4],de=K[ae][ce]=K[ae][ce]||{},a.extendDeepNoArrays(de,a.objectFromPath(ge,a.expandObjectPaths(se)));else{if(U(ae))continue;K[ae][ce]=a.expandObjectPaths(se)}}else{if(U(ie))continue;K[ie]=a.expandObjectPaths(K[ie])}}return K},a.numSeparate=function(K,te,ie){if(ie||(ie=!1),typeof te!="string"||te.length===0)throw new Error("Separator string required for formatting!");typeof K=="number"&&(K=String(K));var ae=/(\d+)(\d{3})/,se=te.charAt(0),ce=te.charAt(1),de=K.split("."),ge=de[0],ve=de.length>1?se+de[1]:"";if(ce&&(de.length>1||ge.length>4||ie))for(;ae.test(ge);)ge=ge.replace(ae,"$1"+ce+"$2");return ge+ve},a.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var R=/^\w*$/;a.templateString=function(K,te){var ie={};return K.replace(a.TEMPLATE_STRING_REGEX,function(ae,se){var ce;return R.test(se)?ce=te[se]:(ie[se]=ie[se]||a.nestedProperty(te,se).get,ce=ie[se]()),a.isValidTextValue(ce)?ce:""})};var j={max:10,count:0,name:"hovertemplate"};a.hovertemplateString=function(){return ne.apply(j,arguments)};var Z={max:10,count:0,name:"texttemplate"};a.texttemplateString=function(){return ne.apply(Z,arguments)};var B=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/,q={max:10,count:0,name:"texttemplate",parseMultDiv:!0};a.texttemplateStringForShapes=function(){return ne.apply(q,arguments)};var V=/^[:|\|]/;function ne(K,te,ie){var ae=this,se=arguments;te||(te={});var ce={};return K.replace(a.TEMPLATE_STRING_REGEX,function(de,ge,ve){var be=ge==="_xother"||ge==="_yother",me=ge==="_xother_"||ge==="_yother_",Se=ge==="xother_"||ge==="yother_",we=ge==="xother"||ge==="yother"||be||Se||me,_e=ge;(be||me)&&(_e=_e.substring(1)),(Se||me)&&(_e=_e.substring(0,_e.length-1));var oe,le,pe,Ee=null,Te=null;if(ae.parseMultDiv){var Me=function(xe){var ke=xe.match(B);return ke?{key:ke[1],op:ke[2],number:Number(ke[3])}:{key:xe,op:null,number:null}}(_e);_e=Me.key,Ee=Me.op,Te=Me.number}if(we){if((oe=te[_e])===void 0)return""}else for(pe=3;pe<se.length;pe++)if(le=se[pe]){if(le.hasOwnProperty(_e)){oe=le[_e];break}if(R.test(_e)||(oe=a.nestedProperty(le,_e).get(),(oe=ce[_e]||a.nestedProperty(le,_e).get())&&(ce[_e]=oe)),oe!==void 0)break}if(oe!==void 0&&(Ee==="*"&&(oe*=Te),Ee==="/"&&(oe/=Te)),oe===void 0&&ae)return ae.count<ae.max&&(a.warn("Variable '"+_e+"' in "+ae.name+" could not be found!"),oe=de),ae.count===ae.max&&a.warn("Too many "+ae.name+" warnings - additional warnings will be suppressed"),ae.count++,de;if(ve){var Le;if(ve[0]===":"&&(oe=(Le=ie?ie.numberFormat:a.numberFormat)(ve.replace(V,""))(oe)),ve[0]==="|"){Le=ie?ie.timeFormat:A;var Ie=a.dateTime2ms(oe);oe=a.formatDate(Ie,ve.replace(V,""),!1,Le)}}else{var he=_e+"Label";te.hasOwnProperty(he)&&(oe=te[he])}return we&&(oe="("+oe+")",(be||me)&&(oe=" "+oe),(Se||me)&&(oe+=" ")),oe})}a.subplotSort=function(K,te){for(var ie=Math.min(K.length,te.length)+1,ae=0,se=0,ce=0;ce<ie;ce++){var de=K.charCodeAt(ce)||0,ge=te.charCodeAt(ce)||0,ve=de>=48&&de<=57,be=ge>=48&&ge<=57;if(ve&&(ae=10*ae+de-48),be&&(se=10*se+ge-48),!ve||!be){if(ae!==se)return ae-se;if(de!==ge)return de-ge}}return se-ae};var ee=2e9;a.seedPseudoRandom=function(){ee=2e9},a.pseudoRandom=function(){var K=ee;return ee=(69069*ee+1)%4294967296,Math.abs(ee-K)<429496729?a.pseudoRandom():ee/4294967296},a.fillText=function(K,te,ie){var ae=Array.isArray(ie)?function(de){ie.push(de)}:function(de){ie.text=de},se=a.extractOption(K,te,"htx","hovertext");if(a.isValidTextValue(se))return ae(se);var ce=a.extractOption(K,te,"tx","text");return a.isValidTextValue(ce)?ae(ce):void 0},a.isValidTextValue=function(K){return K||K===0},a.formatPercent=function(K,te){te=te||0;for(var ie=(Math.round(100*K*Math.pow(10,te))*Math.pow(.1,te)).toFixed(te)+"%",ae=0;ae<te;ae++)ie.indexOf(".")!==-1&&(ie=(ie=ie.replace("0%","%")).replace(".%","%"));return ie},a.isHidden=function(K){var te=window.getComputedStyle(K).display;return!te||te==="none"},a.strTranslate=function(K,te){return K||te?"translate("+K+","+te+")":""},a.strRotate=function(K){return K?"rotate("+K+")":""},a.strScale=function(K){return K!==1?"scale("+K+")":""},a.getTextTransform=function(K){var te=K.noCenter,ie=K.textX,ae=K.textY,se=K.targetX,ce=K.targetY,de=K.anchorX||0,ge=K.anchorY||0,ve=K.rotate,be=K.scale;return be?be>1&&(be=1):be=0,a.strTranslate(se-be*(ie+de),ce-be*(ae+ge))+a.strScale(be)+(ve?"rotate("+ve+(te?"":" "+ie+" "+ae)+")":"")},a.setTransormAndDisplay=function(K,te){K.attr("transform",a.getTextTransform(te)),K.style("display",te.scale?null:"none")},a.ensureUniformFontSize=function(K,te){var ie=a.extendFlat({},te);return ie.size=Math.max(te.size,K._fullLayout.uniformtext.minsize||0),ie},a.join2=function(K,te,ie){var ae=K.length;return ae>1?K.slice(0,-1).join(te)+ie+K[ae-1]:K.join(te)},a.bigFont=function(K){return Math.round(1.2*K)};var $=a.getFirefoxVersion(),J=$!==null&&$<86;a.getPositionFromD3Event=function(){return J?[M.event.layerX,M.event.layerY]:[M.event.offsetX,M.event.offsetY]}},63620:function(Y){Y.exports=function(O){return window&&window.process&&window.process.versions?Object.prototype.toString.call(O)==="[object Object]":Object.prototype.toString.call(O)==="[object Object]"&&Object.getPrototypeOf(O).hasOwnProperty("hasOwnProperty")}},37804:function(Y,O,e){var M=e(22296),A=/^\w*$/;Y.exports=function(o,w,_,p){var s,n,a;_=_||"name",p=p||"value";var r={};w&&w.length?(a=M(o,w),n=a.get()):n=o,w=w||"";var i={};if(n)for(s=0;s<n.length;s++)i[n[s][_]]=s;var l=A.test(p),u={set:function(c,g){var f=g===null?4:0;if(!n){if(!a||f===4)return;n=[],a.set(n)}var b=i[c];if(b===void 0){if(f===4)return;f|=3,b=n.length,i[c]=b}else g!==(l?n[b][p]:M(n[b],p).get())&&(f|=2);var v=n[b]=n[b]||{};return v[_]=c,l?v[p]=g:M(v,p).set(g),g!==null&&(f&=-5),r[b]=r[b]|f,u},get:function(c){if(n){var g=i[c];return g===void 0?void 0:l?n[g][p]:M(n[g],p).get()}},rename:function(c,g){var f=i[c];return f===void 0||(r[f]=1|r[f],i[g]=f,delete i[c],n[f][_]=g),u},remove:function(c){var g=i[c];if(g===void 0)return u;var f=n[g];if(Object.keys(f).length>2)return r[g]=2|r[g],u.set(c,null);if(l){for(s=g;s<n.length;s++)r[s]=3|r[s];for(s=g;s<n.length;s++)i[n[s][_]]--;n.splice(g,1),delete i[c]}else M(f,p).set(null),r[g]=6|r[g];return u},constructUpdate:function(){for(var c,g,f={},b=Object.keys(r),v=0;v<b.length;v++)g=b[v],c=w+"["+g+"]",n[g]?(1&r[g]&&(f[c+"."+_]=n[g][_]),2&r[g]&&(f[c+"."+p]=l?4&r[g]?null:n[g][p]:4&r[g]?null:M(n[g],p).get())):f[c]=null;return f}};return u}},98356:function(Y,O,e){var M=e(24040);Y.exports=function(A,o){for(var w=A._context.locale,_=0;_<2;_++){for(var p=A._context.locales,s=0;s<2;s++){var n=(p[w]||{}).dictionary;if(n){var a=n[o];if(a)return a}p=M.localeRegistry}var r=w.split("-")[0];if(r===w)break;w=r}return o}},24248:function(Y,O,e){var M=e(20556).dfltConfig,A=e(41792),o=Y.exports={};o.log=function(){var w;if(M.logging>1){var _=["LOG:"];for(w=0;w<arguments.length;w++)_.push(arguments[w]);console.trace.apply(console,_)}if(M.notifyOnLogging>1){var p=[];for(w=0;w<arguments.length;w++)p.push(arguments[w]);A(p.join("<br>"),"long")}},o.warn=function(){var w;if(M.logging>0){var _=["WARN:"];for(w=0;w<arguments.length;w++)_.push(arguments[w]);console.trace.apply(console,_)}if(M.notifyOnLogging>0){var p=[];for(w=0;w<arguments.length;w++)p.push(arguments[w]);A(p.join("<br>"),"stick")}},o.error=function(){var w;if(M.logging>0){var _=["ERROR:"];for(w=0;w<arguments.length;w++)_.push(arguments[w]);console.error.apply(console,_)}if(M.notifyOnLogging>0){var p=[];for(w=0;w<arguments.length;w++)p.push(arguments[w]);A(p.join("<br>"),"stick")}}},30988:function(Y,O,e){var M=e(33428);Y.exports=function(A,o,w){var _=A.selectAll("g."+w.replace(/\s/g,".")).data(o,function(s){return s[0].trace.uid});_.exit().remove(),_.enter().append("g").attr("class",w),_.order();var p=A.classed("rangeplot")?"nodeRangePlot3":"node3";return _.each(function(s){s[0][p]=M.select(this)}),_}},52248:function(Y,O,e){var M=e(36524);O.init2dArray=function(A,o){for(var w=new Array(A),_=0;_<A;_++)w[_]=new Array(o);return w},O.transposeRagged=function(A){var o,w,_=0,p=A.length;for(o=0;o<p;o++)_=Math.max(_,A[o].length);var s=new Array(_);for(o=0;o<_;o++)for(s[o]=new Array(p),w=0;w<p;w++)s[o][w]=A[w][o];return s},O.dot=function(A,o){if(!A.length||!o.length||A.length!==o.length)return null;var w,_,p=A.length;if(A[0].length)for(w=new Array(p),_=0;_<p;_++)w[_]=O.dot(A[_],o);else if(o[0].length){var s=O.transposeRagged(o);for(w=new Array(s.length),_=0;_<s.length;_++)w[_]=O.dot(A,s[_])}else for(w=0,_=0;_<p;_++)w+=A[_]*o[_];return w},O.translationMatrix=function(A,o){return[[1,0,A],[0,1,o],[0,0,1]]},O.rotationMatrix=function(A){var o=A*Math.PI/180;return[[Math.cos(o),-Math.sin(o),0],[Math.sin(o),Math.cos(o),0],[0,0,1]]},O.rotationXYMatrix=function(A,o,w){return O.dot(O.dot(O.translationMatrix(o,w),O.rotationMatrix(A)),O.translationMatrix(-o,-w))},O.apply3DTransform=function(A){return function(){var o=arguments,w=arguments.length===1?o[0]:[o[0],o[1],o[2]||0];return O.dot(A,[w[0],w[1],w[2],1]).slice(0,3)}},O.apply2DTransform=function(A){return function(){var o=arguments;o.length===3&&(o=o[0]);var w=arguments.length===1?o[0]:[o[0],o[1]];return O.dot(A,[w[0],w[1],1]).slice(0,2)}},O.apply2DTransform2=function(A){var o=O.apply2DTransform(A);return function(w){return o(w.slice(0,2)).concat(o(w.slice(2,4)))}},O.convertCssMatrix=function(A){if(A){var o=A.length;if(o===16)return A;if(o===6)return[A[0],A[1],0,0,A[2],A[3],0,0,0,0,1,0,A[4],A[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},O.inverseTransformMatrix=function(A){var o=[];return M.invert(o,A),[[o[0],o[1],o[2],o[3]],[o[4],o[5],o[6],o[7]],[o[8],o[9],o[10],o[11]],[o[12],o[13],o[14],o[15]]]}},20435:function(Y){Y.exports={mod:function(O,e){var M=O%e;return M<0?M+e:M},modHalf:function(O,e){return Math.abs(O)>e/2?O-Math.round(O/e)*e:O}}},22296:function(Y,O,e){var M=e(38248),A=e(38116).isArrayOrTypedArray;function o(r,i){return function(){var l,u,c,g,f,b=r;for(g=0;g<i.length-1;g++){if((l=i[g])===-1){for(u=!0,c=[],f=0;f<b.length;f++)c[f]=o(b[f],i.slice(g+1))(),c[f]!==c[0]&&(u=!1);return u?c[0]:c}if(typeof l=="number"&&!A(b)||typeof(b=b[l])!="object"||b===null)return}if(typeof b=="object"&&b!==null&&(c=b[i[g]])!==null)return c}}Y.exports=function(r,i){if(M(i))i=String(i);else if(typeof i!="string"||i.substr(i.length-4)==="[-1]")throw"bad property string";var l,u,c,g,f=i.split(".");for(g=0;g<f.length;g++)if(String(f[g]).slice(0,2)==="__")throw"bad property string";for(g=0;g<f.length;){if(l=String(f[g]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(l[1])f[g]=l[1];else{if(g!==0)throw"bad property string";f.splice(0,1)}for(u=l[2].substr(1,l[2].length-2).split("]["),c=0;c<u.length;c++)g++,f.splice(g,0,Number(u[c]))}g++}return typeof r!="object"?function(b,v,d){return{set:function(){throw"bad container"},get:function(){},astr:v,parts:d,obj:b}}(r,i,f):{set:p(r,f,i),get:o(r,f),astr:i,parts:f,obj:r}};var w=/(^|\.)args\[/;function _(r,i){return r===void 0||r===null&&!i.match(w)}function p(r,i,l){return function(u){var c,g,f=r,b="",v=_(u,l);for(g=0;g<i.length-1;g++){if(typeof(c=i[g])=="number"&&!A(f))throw"array index but container is not an array";if(c===-1){if(v=!n(f,i.slice(g+1),u,l))break;return}if(!a(f,c,i[g+1],v))break;if(typeof(f=f[c])!="object"||f===null)throw"container is not an object";b=s(b,c)}if(v){if(g===i.length-1&&(delete f[i[g]],Array.isArray(f)&&+i[g]==f.length-1))for(;f.length&&f[f.length-1]===void 0;)f.pop()}else f[i[g]]=u}}function s(r,i){var l=i;return M(i)?l="["+i+"]":r&&(l="."+i),r+l}function n(r,i,l,u){var c,g=A(l),f=!0,b=l,v=u.replace("-1",0),d=!g&&_(l,v),m=i[0];for(c=0;c<r.length;c++)v=u.replace("-1",c),g&&(d=_(b=l[c%l.length],v)),d&&(f=!1),a(r,c,m,d)&&p(r[c],i,u.replace("-1",c))(b);return f}function a(r,i,l,u){if(r[i]===void 0){if(u)return!1;r[i]=typeof l=="number"?[]:{}}return!0}},16628:function(Y){Y.exports=function(){}},41792:function(Y,O,e){var M=e(33428),A=e(38248),o=[];Y.exports=function(w,_){if(o.indexOf(w)===-1){o.push(w);var p=1e3;A(_)?p=_:_==="long"&&(p=3e3);var s=M.select("body").selectAll(".plotly-notifier").data([0]);s.enter().append("div").classed("plotly-notifier",!0),s.selectAll(".notifier-note").data(o).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(a){var r=M.select(this);r.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){r.transition().call(n)});for(var i=r.append("p"),l=a.split(/<br\s*\/?>/g),u=0;u<l.length;u++)u&&i.append("br"),i.append("span").text(l[u]);_==="stick"?r.transition().duration(350).style("opacity",1):r.transition().duration(700).style("opacity",1).transition().delay(p).call(n)})}function n(a){a.duration(700).style("opacity",0).each("end",function(r){var i=o.indexOf(r);i!==-1&&o.splice(i,1),M.select(this).remove()})}}},72213:function(Y,O,e){var M=e(93972),A="data-savedcursor";Y.exports=function(o,w){var _=o.attr(A);if(w){if(!_){for(var p=(o.attr("class")||"").split(" "),s=0;s<p.length;s++){var n=p[s];n.indexOf("cursor-")===0&&o.attr(A,n.substr(7)).classed(n,!1)}o.attr(A)||o.attr(A,"!!")}M(o,w)}else _&&(o.attr(A,null),_==="!!"?M(o):M(o,_))}},92065:function(Y,O,e){var M=e(52248).dot,A=e(39032).BADNUM,o=Y.exports={};o.tester=function(w){var _,p=w.slice(),s=p[0][0],n=s,a=p[0][1],r=a;for(p[p.length-1][0]===p[0][0]&&p[p.length-1][1]===p[0][1]||p.push(p[0]),_=1;_<p.length;_++)s=Math.min(s,p[_][0]),n=Math.max(n,p[_][0]),a=Math.min(a,p[_][1]),r=Math.max(r,p[_][1]);var i,l=!1;p.length===5&&(p[0][0]===p[1][0]?p[2][0]===p[3][0]&&p[0][1]===p[3][1]&&p[1][1]===p[2][1]&&(l=!0,i=function(g){return g[0]===p[0][0]}):p[0][1]===p[1][1]&&p[2][1]===p[3][1]&&p[0][0]===p[3][0]&&p[1][0]===p[2][0]&&(l=!0,i=function(g){return g[1]===p[0][1]}));var u=!0,c=p[0];for(_=1;_<p.length;_++)if(c[0]!==p[_][0]||c[1]!==p[_][1]){u=!1;break}return{xmin:s,xmax:n,ymin:a,ymax:r,pts:p,contains:l?function(g,f){var b=g[0],v=g[1];return!(b===A||b<s||b>n||v===A||v<a||v>r||f&&i(g))}:function(g,f){var b=g[0],v=g[1];if(b===A||b<s||b>n||v===A||v<a||v>r)return!1;var d,m,x,y,T,h=p.length,E=p[0][0],k=p[0][1],L=0;for(d=1;d<h;d++)if(m=E,x=k,E=p[d][0],k=p[d][1],!(b<(y=Math.min(m,E))||b>Math.max(m,E)||v>Math.max(x,k)))if(v<Math.min(x,k))b!==y&&L++;else{if(v===(T=E===m?v:x+(b-m)*(k-x)/(E-m)))return d!==1||!f;v<=T&&b!==y&&L++}return L%2==1},isRect:l,degenerate:u}},o.isSegmentBent=function(w,_,p,s){var n,a,r,i=w[_],l=[w[p][0]-i[0],w[p][1]-i[1]],u=M(l,l),c=Math.sqrt(u),g=[-l[1]/c,l[0]/c];for(n=_+1;n<p;n++)if(a=[w[n][0]-i[0],w[n][1]-i[1]],(r=M(a,l))<0||r>u||Math.abs(M(a,g))>s)return!0;return!1},o.filter=function(w,_){var p=[w[0]],s=0,n=0;function a(r){w.push(r);var i=p.length,l=s;p.splice(n+1);for(var u=l+1;u<w.length;u++)(u===w.length-1||o.isSegmentBent(w,l,u+1,_))&&(p.push(w[u]),p.length<i-2&&(s=u,n=p.length-1),l=u)}return w.length>1&&a(w.pop()),{addPt:a,raw:w,filtered:p}}},5048:function(Y,O,e){var M=e(16576),A=e(28624);Y.exports=function(o,w,_){var p=o._fullLayout,s=!0;return p._glcanvas.each(function(n){if(n.regl)n.regl.preloadCachedCode(_);else if(!n.pick||p._has("parcoords")){try{n.regl=A({canvas:this,attributes:{antialias:!n.pick,preserveDrawingBuffer:!0},pixelRatio:o._context.plotGlPixelRatio||e.g.devicePixelRatio,extensions:w||[],cachedCode:_||{}})}catch{s=!1}n.regl||(s=!1),s&&this.addEventListener("webglcontextlost",function(a){o&&o.emit&&o.emit("plotly_webglcontextlost",{event:a,layer:n.key})},!1)}}),s||M({container:p._glcontainer.node()}),s}},34296:function(Y,O,e){var M=e(38248),A=e(25928);Y.exports=function(o){var w;if(typeof(w=o&&o.hasOwnProperty("userAgent")?o.userAgent:function(){var i;return typeof navigator<"u"&&(i=navigator.userAgent),i&&i.headers&&typeof i.headers["user-agent"]=="string"&&(i=i.headers["user-agent"]),i}())!="string")return!0;var _=A({ua:{headers:{"user-agent":w}},tablet:!0,featureDetect:!1});if(!_){for(var p=w.split(" "),s=1;s<p.length;s++)if(p[s].indexOf("Safari")!==-1)for(var n=s-1;n>-1;n--){var a=p[n];if(a.substr(0,8)==="Version/"){var r=a.substr(8).split(".")[0];if(M(r)&&(r=+r),r>=13)return!0}}}return _}},52416:function(Y){Y.exports=function(O,e){if(e instanceof RegExp){for(var M=e.toString(),A=0;A<O.length;A++)if(O[A]instanceof RegExp&&O[A].toString()===M)return O;O.push(e)}else!e&&e!==0||O.indexOf(e)!==-1||O.push(e);return O}},94552:function(Y,O,e){var M=e(3400),A=e(20556).dfltConfig,o={add:function(w,_,p,s,n){var a,r;w.undoQueue=w.undoQueue||{index:0,queue:[],sequence:!1},r=w.undoQueue.index,w.autoplay?w.undoQueue.inSequence||(w.autoplay=!1):(!w.undoQueue.sequence||w.undoQueue.beginSequence?(a={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},w.undoQueue.queue.splice(r,w.undoQueue.queue.length-r,a),w.undoQueue.index+=1):a=w.undoQueue.queue[r-1],w.undoQueue.beginSequence=!1,a&&(a.undo.calls.unshift(_),a.undo.args.unshift(p),a.redo.calls.push(s),a.redo.args.push(n)),w.undoQueue.queue.length>A.queueLength&&(w.undoQueue.queue.shift(),w.undoQueue.index--))},startSequence:function(w){w.undoQueue=w.undoQueue||{index:0,queue:[],sequence:!1},w.undoQueue.sequence=!0,w.undoQueue.beginSequence=!0},stopSequence:function(w){w.undoQueue=w.undoQueue||{index:0,queue:[],sequence:!1},w.undoQueue.sequence=!1,w.undoQueue.beginSequence=!1},undo:function(w){var _,p;if(!(w.undoQueue===void 0||isNaN(w.undoQueue.index)||w.undoQueue.index<=0)){for(w.undoQueue.index--,_=w.undoQueue.queue[w.undoQueue.index],w.undoQueue.inSequence=!0,p=0;p<_.undo.calls.length;p++)o.plotDo(w,_.undo.calls[p],_.undo.args[p]);w.undoQueue.inSequence=!1,w.autoplay=!1}},redo:function(w){var _,p;if(!(w.undoQueue===void 0||isNaN(w.undoQueue.index)||w.undoQueue.index>=w.undoQueue.queue.length)){for(_=w.undoQueue.queue[w.undoQueue.index],w.undoQueue.inSequence=!0,p=0;p<_.redo.calls.length;p++)o.plotDo(w,_.redo.calls[p],_.redo.args[p]);w.undoQueue.inSequence=!1,w.autoplay=!1,w.undoQueue.index++}},plotDo:function(w,_,p){w.autoplay=!0,p=function(s,n){for(var a,r=[],i=0;i<n.length;i++)a=n[i],r[i]=a===s?a:typeof a=="object"?Array.isArray(a)?M.extendDeep([],a):M.extendDeepAll({},a):a;return r}(w,p),_.apply(null,p)}};Y.exports=o},53756:function(Y,O){O.counter=function(e,M,A,o){var w=(M||"")+(A?"":"$"),_=o===!1?"":"^";return e==="xy"?new RegExp(_+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+w):new RegExp(_+e+"([2-9]|[1-9][0-9]+)?"+w)}},23193:function(Y){var O=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,e=/^[^\.\[\]]+$/;Y.exports=function(M,A){for(;A;){var o=M.match(O);if(o)M=o[1];else{if(!M.match(e))throw new Error("bad relativeAttr call:"+[M,A]);M=""}if(A.charAt(0)!=="^")break;A=A.slice(1)}return M&&A.charAt(0)!=="["?M+"."+A:M+A}},51528:function(Y,O,e){var M=e(38116).isArrayOrTypedArray,A=e(63620);Y.exports=function o(w,_){for(var p in _){var s=_[p],n=w[p];if(n!==s)if(p.charAt(0)==="_"||typeof s=="function"){if(p in w)continue;w[p]=s}else if(M(s)&&M(n)&&A(s[0])){if(p==="customdata"||p==="ids")continue;for(var a=Math.min(s.length,n.length),r=0;r<a;r++)n[r]!==s[r]&&A(s[r])&&A(n[r])&&o(n[r],s[r])}else A(s)&&A(n)&&(o(n,s),Object.keys(n).length||delete w[p])}}},14952:function(Y,O,e){var M=e(38248),A=e(24248),o=e(35536),w=e(39032).BADNUM,_=1e-9;function p(r,i){return r<i}function s(r,i){return r<=i}function n(r,i){return r>i}function a(r,i){return r>=i}O.findBin=function(r,i,l){if(M(i.start))return l?Math.ceil((r-i.start)/i.size-_)-1:Math.floor((r-i.start)/i.size+_);var u,c,g=0,f=i.length,b=0,v=f>1?(i[f-1]-i[0])/(f-1):1;for(c=v>=0?l?p:s:l?a:n,r+=v*_*(l?-1:1)*(v>=0?1:-1);g<f&&b++<100;)c(i[u=Math.floor((g+f)/2)],r)?g=u+1:f=u;return b>90&&A.log("Long binary search..."),g-1},O.sorterAsc=function(r,i){return r-i},O.sorterDes=function(r,i){return i-r},O.distinctVals=function(r){var i,l=r.slice();for(l.sort(O.sorterAsc),i=l.length-1;i>-1&&l[i]===w;i--);for(var u,c=l[i]-l[0]||1,g=c/(i||1)/1e4,f=[],b=0;b<=i;b++){var v=l[b],d=v-u;u===void 0?(f.push(v),u=v):d>g&&(c=Math.min(c,d),f.push(v),u=v)}return{vals:f,minDiff:c}},O.roundUp=function(r,i,l){for(var u,c=0,g=i.length-1,f=0,b=l?0:1,v=l?1:0,d=l?Math.ceil:Math.floor;c<g&&f++<100;)i[u=d((c+g)/2)]<=r?c=u+b:g=u-v;return i[c]},O.sort=function(r,i){for(var l=0,u=0,c=1;c<r.length;c++){var g=i(r[c],r[c-1]);if(g<0?l=1:g>0&&(u=1),l&&u)return r.sort(i)}return u?r:r.reverse()},O.findIndexOfMin=function(r,i){i=i||o;for(var l,u=1/0,c=0;c<r.length;c++){var g=i(r[c]);g<u&&(u=g,l=c)}return l}},93972:function(Y){Y.exports=function(O,e){(O.attr("class")||"").split(" ").forEach(function(M){M.indexOf("cursor-")===0&&O.classed(M,!1)}),e&&O.classed("cursor-"+e,!0)}},16576:function(Y,O,e){var M=e(76308),A=function(){};Y.exports=function(o){for(var w in o)typeof o[w]=="function"&&(o[w]=A);o.destroy=function(){o.container.parentNode.removeChild(o.container)};var _=document.createElement("div");_.className="no-webgl",_.style.cursor="pointer",_.style.fontSize="24px",_.style.color=M.defaults[0],_.style.position="absolute",_.style.left=_.style.top="0px",_.style.width=_.style.height="100%",_.style["background-color"]=M.lightLine,_.style["z-index"]=30;var p=document.createElement("p");return p.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",p.style.position="relative",p.style.top="50%",p.style.left="50%",p.style.height="30%",p.style.width="50%",p.style.margin="-15% 0 0 -25%",_.appendChild(p),o.container.appendChild(_),o.container.style.background="#FFFFFF",o.container.onclick=function(){window.open("https://get.webgl.org")},!1}},95376:function(Y){Y.exports=function(O){return Object.keys(O).sort()}},63084:function(Y,O,e){var M=e(38248),A=e(38116).isArrayOrTypedArray;O.aggNums=function(o,w,_,p){var s,n;if((!p||p>_.length)&&(p=_.length),M(w)||(w=!1),A(_[0])){for(n=new Array(p),s=0;s<p;s++)n[s]=O.aggNums(o,w,_[s]);_=n}for(s=0;s<p;s++)M(w)?M(_[s])&&(w=o(+w,+_[s])):w=_[s];return w},O.len=function(o){return O.aggNums(function(w){return w+1},0,o)},O.mean=function(o,w){return w||(w=O.len(o)),O.aggNums(function(_,p){return _+p},0,o)/w},O.midRange=function(o){if(o!==void 0&&o.length!==0)return(O.aggNums(Math.max,null,o)+O.aggNums(Math.min,null,o))/2},O.variance=function(o,w,_){return w||(w=O.len(o)),M(_)||(_=O.mean(o,w)),O.aggNums(function(p,s){return p+Math.pow(s-_,2)},0,o)/w},O.stdev=function(o,w,_){return Math.sqrt(O.variance(o,w,_))},O.median=function(o){var w=o.slice().sort();return O.interp(w,.5)},O.interp=function(o,w){if(!M(w))throw"n should be a finite number";if((w=w*o.length-.5)<0)return o[0];if(w>o.length-1)return o[o.length-1];var _=w%1;return _*o[Math.ceil(w)]+(1-_)*o[Math.floor(w)]}},43080:function(Y,O,e){var M=e(72160);Y.exports=function(A){return A?M(A):[0,0,0,1]}},9188:function(Y,O,e){var M=e(2264),A=e(43616),o=e(3400),w=null;Y.exports=function(){if(w!==null)return w;w=!1;var _=o.isIE()||o.isSafari()||o.isIOS();if(window.navigator.userAgent&&!_){var p=Array.from(M.CSS_DECLARATIONS).reverse(),s=window.CSS&&window.CSS.supports||window.supportsCSS;if(typeof s=="function")w=p.some(function(r){return s.apply(null,r)});else{var n=A.tester.append("image").attr("style",M.STYLE),a=window.getComputedStyle(n.node()).imageRendering;w=p.some(function(r){var i=r[1];return a===i||a===i.toLowerCase()}),n.remove()}}return w}},72736:function(Y,O,e){var M=e(33428),A=e(3400),o=A.strTranslate,w=e(9616),_=e(84284).LINE_SPACING,p=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;O.convertToTspans=function(F,U,R){var j=F.text(),Z=!F.attr("data-notex")&&U&&U._context.typesetMath&&typeof MathJax<"u"&&j.match(p),B=M.select(F.node().parentNode);if(!B.empty()){var q=F.attr("class")?F.attr("class").split(" ")[0]:"text";return q+="-math",B.selectAll("svg."+q).remove(),B.selectAll("g."+q+"-group").remove(),F.style("display",null).attr({"data-unformatted":j,"data-math":"N"}),Z?(U&&U._promises||[]).push(new Promise(function(ne){F.style("display","none");var ee=parseInt(F.node().style.fontSize,10),$={fontSize:ee};(function(J,K,te){var ie,ae,se,ce,de=parseInt((MathJax.version||"").split(".")[0]);if(de===2||de===3){var ge=function(){var be="math-output-"+A.randstr({},64),me=(ce=M.select("body").append("div").attr({id:be}).style({visibility:"hidden",position:"absolute","font-size":K.fontSize+"px"}).text(J.replace(s,"\\lt ").replace(n,"\\gt "))).node();return de===2?MathJax.Hub.Typeset(me):MathJax.typeset([me])},ve=function(){var be=ce.select(de===2?".MathJax_SVG":".MathJax"),me=!be.empty()&&ce.select("svg").node();if(me){var Se,we=me.getBoundingClientRect();Se=de===2?M.select("body").select("#MathJax_SVG_glyphs"):be.select("defs"),te(be,Se,we)}else A.log("There was an error in the tex syntax.",J),te();ce.remove()};de===2?MathJax.Hub.Queue(function(){return ae=A.extendDeepAll({},MathJax.Hub.config),se=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:a},displayAlign:"left"})},function(){if((ie=MathJax.Hub.config.menuSettings.renderer)!=="SVG")return MathJax.Hub.setRenderer("SVG")},ge,ve,function(){if(ie!=="SVG")return MathJax.Hub.setRenderer(ie)},function(){return se!==void 0&&(MathJax.Hub.processSectionDelay=se),MathJax.Hub.Config(ae)}):de===3&&(ae=A.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=a,(ie=MathJax.config.startup.output)!=="svg"&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){ge(),ve(),ie!=="svg"&&(MathJax.config.startup.output=ie),MathJax.config=ae}))}else A.warn("No MathJax version:",MathJax.version)})(Z[2],$,function(J,K,te){B.selectAll("svg."+q).remove(),B.selectAll("g."+q+"-group").remove();var ie=J&&J.select("svg");if(!ie||!ie.node())return V(),void ne();var ae=B.append("g").classed(q+"-group",!0).attr({"pointer-events":"none","data-unformatted":j,"data-math":"Y"});ae.node().appendChild(ie.node()),K&&K.node()&&ie.node().insertBefore(K.node().cloneNode(!0),ie.node().firstChild);var se=te.width,ce=te.height;ie.attr({class:q,height:ce,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var de=F.node().style.fill||"black",ge=ie.select("g");ge.attr({fill:de,stroke:de});var ve=ge.node().getBoundingClientRect(),be=ve.width,me=ve.height;(be>se||me>ce)&&(ie.style("overflow","hidden"),be=(ve=ie.node().getBoundingClientRect()).width,me=ve.height);var Se=+F.attr("x"),we=+F.attr("y"),_e=-(ee||F.node().getBoundingClientRect().height)/4;if(q[0]==="y")ae.attr({transform:"rotate("+[-90,Se,we]+")"+o(-be/2,_e-me/2)});else if(q[0]==="l")we=_e-me/2;else if(q[0]==="a"&&q.indexOf("atitle")!==0)Se=0,we=_e;else{var oe=F.attr("text-anchor");Se-=be*(oe==="middle"?.5:oe==="end"?1:0),we=we+_e-me/2}ie.attr({x:Se,y:we}),R&&R.call(F,ae),ne(ae)})})):V(),F}function V(){B.empty()||(q=F.attr("class")+"-math",B.select("svg."+q).remove()),F.text("").style("white-space","pre");var ne=function(ee,$){$=$.replace(g," ");var J,K=!1,te=[],ie=-1;function ae(){ie++;var Te=document.createElementNS(w.svg,"tspan");M.select(Te).attr({class:"line",dy:ie*_+"em"}),ee.appendChild(Te),J=Te;var Me=te;if(te=[{node:Te}],Me.length>1)for(var Le=1;Le<Me.length;Le++)se(Me[Le])}function se(Te){var Me,Le=Te.type,Ie={};if(Le==="a"){Me="a";var he=Te.target,xe=Te.href,ke=Te.popup;xe&&(Ie={"xlink:xlink:show":he==="_blank"||he.charAt(0)!=="_"?"new":"replace",target:he,"xlink:xlink:href":xe},ke&&(Ie.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+ke+'");return false;'))}else Me="tspan";Te.style&&(Ie.style=Te.style);var ze=document.createElementNS(w.svg,Me);if(Le==="sup"||Le==="sub"){ce(J,u),J.appendChild(ze);var Re=document.createElementNS(w.svg,"tspan");ce(Re,u),M.select(Re).attr("dy",l[Le]),Ie.dy=i[Le],J.appendChild(ze),J.appendChild(Re)}else J.appendChild(ze);M.select(ze).attr(Ie),J=Te.node=ze,te.push(Te)}function ce(Te,Me){Te.appendChild(document.createTextNode(Me))}function de(Te){if(te.length!==1){var Me=te.pop();Te!==Me.type&&A.log("Start tag <"+Me.type+"> doesnt match end tag <"+Te+">. Pretending it did match.",$),J=te[te.length-1].node}else A.log("Ignoring unexpected end tag </"+Te+">.",$)}v.test($)?ae():(J=ee,te=[{node:ee}]);for(var ge=$.split(f),ve=0;ve<ge.length;ve++){var be=ge[ve],me=be.match(b),Se=me&&me[2].toLowerCase(),we=r[Se];if(Se==="br")ae();else if(we===void 0)ce(J,L(be));else if(me[1])de(Se);else{var _e=me[4],oe={type:Se},le=T(_e,d);if(le?(le=le.replace(h,"$1 fill:"),we&&(le+=";"+we)):we&&(le=we),le&&(oe.style=le),Se==="a"){K=!0;var pe=T(_e,m);if(pe){var Ee=P(pe);Ee&&(oe.href=Ee,oe.target=T(_e,x)||"_blank",oe.popup=T(_e,y))}}se(oe)}}return K}(F.node(),j);ne&&F.style("pointer-events","all"),O.positionText(F),R&&R.call(F)}};var s=/(<|&lt;|&#60;)/g,n=/(>|&gt;|&#62;)/g,a=[["$","$"],["\\(","\\)"]],r={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},i={sub:"0.3em",sup:"-0.6em"},l={sub:"-0.21em",sup:"0.42em"},u="",c=["http:","https:","mailto:","",void 0,":"],g=O.NEWLINES=/(\r\n?|\n)/g,f=/(<[^<>]*>)/,b=/<(\/?)([^ >]*)(\s+(.*))?>/i,v=/<br(\s+.*)?>/i;O.BR_TAG_ALL=/<br(\s+.*)?>/gi;var d=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,m=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,x=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,y=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function T(F,U){if(!F)return null;var R=F.match(U),j=R&&(R[3]||R[4]);return j&&L(j)}var h=/(^|;)\s*color:/;O.plainText=function(F,U){for(var R=(U=U||{}).len!==void 0&&U.len!==-1?U.len:1/0,j=U.allowedTags!==void 0?U.allowedTags:["br"],Z=F.split(f),B=[],q="",V=0,ne=0;ne<Z.length;ne++){var ee=Z[ne],$=ee.match(b),J=$&&$[2].toLowerCase();if(J)j.indexOf(J)!==-1&&(B.push(ee),q=J);else{var K=ee.length;if(V+K<R)B.push(ee),V+=K;else if(V<R){var te=R-V;q&&(q!=="br"||te<=3||K<=3)&&B.pop(),R>3?B.push(ee.substr(0,te-3)+"..."):B.push(ee.substr(0,te));break}q=""}}return B.join("")};var E={mu:"",amp:"&",lt:"<",gt:">",nbsp:"",times:"",plusmn:"",deg:""},k=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function L(F){return F.replace(k,function(U,R){return(R.charAt(0)==="#"?function(j){if(!(j>1114111)){var Z=String.fromCodePoint;if(Z)return Z(j);var B=String.fromCharCode;return j<=65535?B(j):B(55232+(j>>10),j%1024+56320)}}(R.charAt(1)==="x"?parseInt(R.substr(2),16):parseInt(R.substr(1),10)):E[R])||U})}function P(F){var U=encodeURI(decodeURI(F)),R=document.createElement("a"),j=document.createElement("a");R.href=F,j.href=U;var Z=R.protocol,B=j.protocol;return c.indexOf(Z)!==-1&&c.indexOf(B)!==-1?U:""}function I(F,U,R){var j,Z,B,q=R.horizontalAlign,V=R.verticalAlign||"top",ne=F.node().getBoundingClientRect(),ee=U.node().getBoundingClientRect();return Z=V==="bottom"?function(){return ne.bottom-j.height}:V==="middle"?function(){return ne.top+(ne.height-j.height)/2}:function(){return ne.top},B=q==="right"?function(){return ne.right-j.width}:q==="center"?function(){return ne.left+(ne.width-j.width)/2}:function(){return ne.left},function(){j=this.node().getBoundingClientRect();var $=B()-ee.left,J=Z()-ee.top,K=R.gd||{};if(R.gd){K._fullLayout._calcInverseTransform(K);var te=A.apply3DTransform(K._fullLayout._invTransform)($,J);$=te[0],J=te[1]}return this.style({top:J+"px",left:$+"px","z-index":1e3}),this}}O.convertEntities=L,O.sanitizeHTML=function(F){F=F.replace(g," ");for(var U=document.createElement("p"),R=U,j=[],Z=F.split(f),B=0;B<Z.length;B++){var q=Z[B],V=q.match(b),ne=V&&V[2].toLowerCase();if(ne in r)if(V[1])j.length&&(R=j.pop());else{var ee=V[4],$=T(ee,d),J=$?{style:$}:{};if(ne==="a"){var K=T(ee,m);if(K){var te=P(K);if(te){J.href=te;var ie=T(ee,x);ie&&(J.target=ie)}}}var ae=document.createElement(ne);R.appendChild(ae),M.select(ae).attr(J),R=ae,j.push(ae)}else R.appendChild(document.createTextNode(L(q)))}return U.innerHTML},O.lineCount=function(F){return F.selectAll("tspan.line").size()||1},O.positionText=function(F,U,R){return F.each(function(){var j=M.select(this);function Z(V,ne){return ne===void 0?(ne=j.attr(V))===null&&(j.attr(V,0),ne=0):j.attr(V,ne),ne}var B=Z("x",U),q=Z("y",R);this.nodeName==="text"&&j.selectAll("tspan.line").attr({x:B,y:q})})};var z="1px ";O.makeTextShadow=function(F){return z+z+z+F+", -"+z+"-"+z+z+F+", "+z+"-"+z+z+F+", -"+z+z+z+F},O.makeEditable=function(F,U){var R=U.gd,j=U.delegate,Z=M.dispatch("edit","input","cancel"),B=j||F;if(F.style({"pointer-events":j?"none":"all"}),F.size()!==1)throw new Error("boo");function q(){var ne,ee,$,J,K;ne=M.select(R).select(".svg-container"),ee=ne.append("div"),$=F.node().style,J=parseFloat($.fontSize||12),(K=U.text)===void 0&&(K=F.attr("data-unformatted")),ee.classed("plugin-editable editable",!0).style({position:"absolute","font-family":$.fontFamily||"Arial","font-size":J,color:U.fill||$.fill||"black",opacity:1,"background-color":U.background||"transparent",outline:"#ffffff33 1px solid",margin:[-J/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(K).call(I(F,ne,U)).on("blur",function(){R._editing=!1,F.text(this.textContent).style({opacity:1});var ae,se=M.select(this).attr("class");(ae=se?"."+se.split(" ")[0]+"-math-group":"[class*=-math-group]")&&M.select(F.node().parentNode).select(ae).style({opacity:0});var ce=this.textContent;M.select(this).transition().duration(0).remove(),M.select(document).on("mouseup",null),Z.edit.call(F,ce)}).on("focus",function(){var ae=this;R._editing=!0,M.select(document).on("mouseup",function(){if(M.event.target===ae)return!1;document.activeElement===ee.node()&&ee.node().blur()})}).on("keyup",function(){M.event.which===27?(R._editing=!1,F.style({opacity:1}),M.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),Z.cancel.call(F,this.textContent)):(Z.input.call(F,this.textContent),M.select(this).call(I(F,ne,U)))}).on("keydown",function(){M.event.which===13&&this.blur()}).call(V),F.style({opacity:0});var te,ie=B.attr("class");(te=ie?"."+ie.split(" ")[0]+"-math-group":"[class*=-math-group]")&&M.select(F.node().parentNode).select(te).style({opacity:0})}function V(ne){var ee=ne.node(),$=document.createRange();$.selectNodeContents(ee);var J=window.getSelection();J.removeAllRanges(),J.addRange($),ee.focus()}return U.immediate?q():B.on("click",q),M.rebind(F,Z,"on")}},91200:function(Y,O){var e={};function M(A){A&&A.timer!==null&&(clearTimeout(A.timer),A.timer=null)}O.throttle=function(A,o,w){var _=e[A],p=Date.now();if(!_){for(var s in e)e[s].ts<p-6e4&&delete e[s];_=e[A]={ts:0,timer:null}}function n(){w(),_.ts=Date.now(),_.onDone&&(_.onDone(),_.onDone=null)}M(_),p>_.ts+o?n():_.timer=setTimeout(function(){n(),_.timer=null},o)},O.done=function(A){var o=e[A];return o&&o.timer?new Promise(function(w){var _=o.onDone;o.onDone=function(){_&&_(),w(),o.onDone=null}}):Promise.resolve()},O.clear=function(A){if(A)M(e[A]),delete e[A];else for(var o in e)O.clear(o)}},36896:function(Y,O,e){var M=e(38248);Y.exports=function(A,o){if(A>0)return Math.log(A)/Math.LN10;var w=Math.log(Math.min(o[0],o[1]))/Math.LN10;return M(w)||(w=Math.log(Math.max(o[0],o[1]))/Math.LN10-6),w}},59972:function(Y,O,e){var M=Y.exports={},A=e(79552).locationmodeToLayer,o=e(55712).NO;M.getTopojsonName=function(w){return[w.scope.replace(/ /g,"-"),"_",w.resolution.toString(),"m"].join("")},M.getTopojsonPath=function(w,_){return w+_+".json"},M.getTopojsonFeatures=function(w,_){var p=A[w.locationmode],s=_.objects[p];return o(_,s).features}},11680:function(Y){Y.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},6580:function(Y){Y.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},69820:function(Y,O,e){var M=e(24040);Y.exports=function(A){for(var o,w,_=M.layoutArrayContainers,p=M.layoutArrayRegexes,s=A.split("[")[0],n=0;n<p.length;n++)if((w=A.match(p[n]))&&w.index===0){o=w[0];break}if(o||(o=_[_.indexOf(s)]),!o)return!1;var a=A.substr(o.length);return a?!!(w=a.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:o,index:Number(w[1]),property:w[3]||""}:{array:o,index:"",property:""}}},67824:function(Y,O,e){var M=e(92880).extendFlat,A=e(63620),o={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},w={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},_=o.flags.slice().concat(["fullReplot"]),p=w.flags.slice().concat("layoutReplot");function s(r){for(var i={},l=0;l<r.length;l++)i[r[l]]=!1;return i}function n(r,i,l){var u=M({},r);for(var c in u){var g=u[c];A(g)&&(u[c]=a(g,i,0,c))}return l==="from-root"&&(u.editType=i),u}function a(r,i,l,u){if(r.valType){var c=M({},r);if(c.editType=i,Array.isArray(r.items)){c.items=new Array(r.items.length);for(var g=0;g<r.items.length;g++)c.items[g]=a(r.items[g],i)}return c}return n(r,i,u.charAt(0)==="_"?"nested":"from-root")}Y.exports={traces:o,layout:w,traceFlags:function(){return s(_)},layoutFlags:function(){return s(p)},update:function(r,i){var l=i.editType;if(l&&l!=="none")for(var u=l.split("+"),c=0;c<u.length;c++)r[u[c]]=!0},overrideAll:n}},93404:function(Y,O,e){var M=e(38248),A=e(61784),o=e(24040),w=e(3400),_=e(7316),p=e(79811),s=e(76308),n=p.cleanId,a=p.getFromTrace,r=o.traceIs;function i(m,x){var y=m[x],T=x.charAt(0);y&&y!=="paper"&&(m[x]=n(y,T,!0))}function l(m){function x(y,T){var h=m[y],E=m.title&&m.title[T];h&&!E&&(m.title||(m.title={}),m.title[T]=m[y],delete m[y])}m&&(typeof m.title!="string"&&typeof m.title!="number"||(m.title={text:m.title}),x("titlefont","font"),x("titleposition","position"),x("titleside","side"),x("titleoffset","offset"))}function u(m){if(!w.isPlainObject(m))return!1;var x=m.name;return delete m.name,delete m.showlegend,(typeof x=="string"||typeof x=="number")&&String(x)}function c(m,x,y,T){if(y&&!T)return m;if(T&&!y||!m.trim())return x;if(!x.trim())return m;var h,E=Math.min(m.length,x.length);for(h=0;h<E&&m.charAt(h)===x.charAt(h);h++);return m.substr(0,h).trim()}function g(m){var x="middle",y="center";return typeof m=="string"&&(m.indexOf("top")!==-1?x="top":m.indexOf("bottom")!==-1&&(x="bottom"),m.indexOf("left")!==-1?y="left":m.indexOf("right")!==-1&&(y="right")),x+" "+y}function f(m,x){return x in m&&typeof m[x]=="object"&&Object.keys(m[x]).length===0}O.clearPromiseQueue=function(m){Array.isArray(m._promises)&&m._promises.length>0&&w.log("Clearing previous rejected promises from queue."),m._promises=[]},O.cleanLayout=function(m){var x,y;m||(m={}),m.xaxis1&&(m.xaxis||(m.xaxis=m.xaxis1),delete m.xaxis1),m.yaxis1&&(m.yaxis||(m.yaxis=m.yaxis1),delete m.yaxis1),m.scene1&&(m.scene||(m.scene=m.scene1),delete m.scene1);var T=(_.subplotsRegistry.cartesian||{}).attrRegex,h=(_.subplotsRegistry.polar||{}).attrRegex,E=(_.subplotsRegistry.ternary||{}).attrRegex,k=(_.subplotsRegistry.gl3d||{}).attrRegex,L=Object.keys(m);for(x=0;x<L.length;x++){var P=L[x];if(T&&T.test(P)){var I=m[P];I.anchor&&I.anchor!=="free"&&(I.anchor=n(I.anchor)),I.overlaying&&(I.overlaying=n(I.overlaying)),I.type||(I.isdate?I.type="date":I.islog?I.type="log":I.isdate===!1&&I.islog===!1&&(I.type="linear")),I.autorange!=="withzero"&&I.autorange!=="tozero"||(I.autorange=!0,I.rangemode="tozero"),I.insiderange&&delete I.range,delete I.islog,delete I.isdate,delete I.categories,f(I,"domain")&&delete I.domain,I.autotick!==void 0&&(I.tickmode===void 0&&(I.tickmode=I.autotick?"auto":"linear"),delete I.autotick),l(I)}else if(h&&h.test(P))l(m[P].radialaxis);else if(E&&E.test(P)){var z=m[P];l(z.aaxis),l(z.baxis),l(z.caxis)}else if(k&&k.test(P)){var F=m[P],U=F.cameraposition;if(Array.isArray(U)&&U[0].length===4){var R=U[0],j=U[1],Z=U[2],B=A([],R),q=[];for(y=0;y<3;++y)q[y]=j[y]+Z*B[2+4*y];F.camera={eye:{x:q[0],y:q[1],z:q[2]},center:{x:j[0],y:j[1],z:j[2]},up:{x:0,y:0,z:1}},delete F.cameraposition}l(F.xaxis),l(F.yaxis),l(F.zaxis)}}var V=Array.isArray(m.annotations)?m.annotations.length:0;for(x=0;x<V;x++){var ne=m.annotations[x];w.isPlainObject(ne)&&(ne.ref&&(ne.ref==="paper"?(ne.xref="paper",ne.yref="paper"):ne.ref==="data"&&(ne.xref="x",ne.yref="y"),delete ne.ref),i(ne,"xref"),i(ne,"yref"))}var ee=Array.isArray(m.shapes)?m.shapes.length:0;for(x=0;x<ee;x++){var $=m.shapes[x];w.isPlainObject($)&&(i($,"xref"),i($,"yref"))}var J=Array.isArray(m.images)?m.images.length:0;for(x=0;x<J;x++){var K=m.images[x];w.isPlainObject(K)&&(i(K,"xref"),i(K,"yref"))}var te=m.legend;return te&&(te.x>3?(te.x=1.02,te.xanchor="left"):te.x<-2&&(te.x=-.02,te.xanchor="right"),te.y>3?(te.y=1.02,te.yanchor="bottom"):te.y<-2&&(te.y=-.02,te.yanchor="top")),l(m),m.dragmode==="rotate"&&(m.dragmode="orbit"),s.clean(m),m.template&&m.template.layout&&O.cleanLayout(m.template.layout),m},O.cleanData=function(m){for(var x=0;x<m.length;x++){var y,T=m[x];if(T.type==="histogramy"&&"xbins"in T&&!("ybins"in T)&&(T.ybins=T.xbins,delete T.xbins),T.error_y&&"opacity"in T.error_y){var h=s.defaults,E=T.error_y.color||(r(T,"bar")?s.defaultLine:h[x%h.length]);T.error_y.color=s.addOpacity(s.rgb(E),s.opacity(E)*T.error_y.opacity),delete T.error_y.opacity}if("bardir"in T&&(T.bardir!=="h"||!r(T,"bar")&&T.type.substr(0,9)!=="histogram"||(T.orientation="h",O.swapXYData(T)),delete T.bardir),T.type==="histogramy"&&O.swapXYData(T),T.type!=="histogramx"&&T.type!=="histogramy"||(T.type="histogram"),"scl"in T&&!("colorscale"in T)&&(T.colorscale=T.scl,delete T.scl),"reversescl"in T&&!("reversescale"in T)&&(T.reversescale=T.reversescl,delete T.reversescl),T.xaxis&&(T.xaxis=n(T.xaxis,"x")),T.yaxis&&(T.yaxis=n(T.yaxis,"y")),r(T,"gl3d")&&T.scene&&(T.scene=_.subplotsRegistry.gl3d.cleanId(T.scene)),!r(T,"pie-like")&&!r(T,"bar-like"))if(Array.isArray(T.textposition))for(y=0;y<T.textposition.length;y++)T.textposition[y]=g(T.textposition[y]);else T.textposition&&(T.textposition=g(T.textposition));var k=o.getModule(T);if(k&&k.colorbar){var L=k.colorbar.container,P=L?T[L]:T;P&&P.colorscale&&(P.colorscale==="YIGnBu"&&(P.colorscale="YlGnBu"),P.colorscale==="YIOrRd"&&(P.colorscale="YlOrRd"))}if(T.type==="surface"&&w.isPlainObject(T.contours)){var I=["x","y","z"];for(y=0;y<I.length;y++){var z=T.contours[I[y]];w.isPlainObject(z)&&(z.highlightColor&&(z.highlightcolor=z.highlightColor,delete z.highlightColor),z.highlightWidth&&(z.highlightwidth=z.highlightWidth,delete z.highlightWidth))}}if(T.type==="candlestick"||T.type==="ohlc"){var F=(T.increasing||{}).showlegend!==!1,U=(T.decreasing||{}).showlegend!==!1,R=u(T.increasing),j=u(T.decreasing);if(R!==!1&&j!==!1){var Z=c(R,j,F,U);Z&&(T.name=Z)}else!R&&!j||T.name||(T.name=R||j)}if(Array.isArray(T.transforms)){var B=T.transforms;for(y=0;y<B.length;y++){var q=B[y];if(w.isPlainObject(q))switch(q.type){case"filter":q.filtersrc&&(q.target=q.filtersrc,delete q.filtersrc),q.calendar&&(q.valuecalendar||(q.valuecalendar=q.calendar),delete q.calendar);break;case"groupby":if(q.styles=q.styles||q.style,q.styles&&!Array.isArray(q.styles)){var V=q.styles,ne=Object.keys(V);q.styles=[];for(var ee=0;ee<ne.length;ee++)q.styles.push({target:ne[ee],value:V[ne[ee]]})}}}}f(T,"line")&&delete T.line,"marker"in T&&(f(T.marker,"line")&&delete T.marker.line,f(T,"marker")&&delete T.marker),s.clean(T),T.autobinx&&(delete T.autobinx,delete T.xbins),T.autobiny&&(delete T.autobiny,delete T.ybins),l(T),T.colorbar&&l(T.colorbar),T.marker&&T.marker.colorbar&&l(T.marker.colorbar),T.line&&T.line.colorbar&&l(T.line.colorbar),T.aaxis&&l(T.aaxis),T.baxis&&l(T.baxis)}},O.swapXYData=function(m){var x;if(w.swapAttrs(m,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(m.z)&&Array.isArray(m.z[0])&&(m.transpose?delete m.transpose:m.transpose=!0),m.error_x&&m.error_y){var y=m.error_y,T="copy_ystyle"in y?y.copy_ystyle:!(y.color||y.thickness||y.width);w.swapAttrs(m,["error_?.copy_ystyle"]),T&&w.swapAttrs(m,["error_?.color","error_?.thickness","error_?.width"])}if(typeof m.hoverinfo=="string"){var h=m.hoverinfo.split("+");for(x=0;x<h.length;x++)h[x]==="x"?h[x]="y":h[x]==="y"&&(h[x]="x");m.hoverinfo=h.join("+")}},O.coerceTraceIndices=function(m,x){if(M(x))return[x];if(!Array.isArray(x)||!x.length)return m.data.map(function(h,E){return E});if(Array.isArray(x)){for(var y=[],T=0;T<x.length;T++)w.isIndex(x[T],m.data.length)?y.push(x[T]):w.warn("trace index (",x[T],") is not a number or is out of bounds");return y}return x},O.manageArrayContainers=function(m,x,y){var T=m.obj,h=m.parts,E=h.length,k=h[E-1],L=M(k);if(L&&x===null){var P=h.slice(0,E-1).join(".");w.nestedProperty(T,P).get().splice(k,1)}else L&&m.get()===void 0&&m.get()===void 0&&(y[m.astr]=null),m.set(x)};var b=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function v(m){var x=m.search(b);if(x>0)return m.substr(0,x)}O.hasParent=function(m,x){for(var y=v(x);y;){if(y in m)return!0;y=v(y)}return!1};var d=["x","y","z"];O.clearAxisTypes=function(m,x,y){for(var T=0;T<x.length;T++)for(var h=m._fullData[T],E=0;E<3;E++){var k=a(m,h,d[E]);if(k&&k.type!=="log"){var L=k._name,P=k._id.substr(1);if(P.substr(0,5)==="scene"){if(y[P]!==void 0)continue;L=P+"."+L}var I=L+".type";y[L]===void 0&&y[I]===void 0&&w.nestedProperty(m.layout,I).set(null)}}}},22448:function(Y,O,e){var M=e(36424);O._doPlot=M._doPlot,O.newPlot=M.newPlot,O.restyle=M.restyle,O.relayout=M.relayout,O.redraw=M.redraw,O.update=M.update,O._guiRestyle=M._guiRestyle,O._guiRelayout=M._guiRelayout,O._guiUpdate=M._guiUpdate,O._storeDirectGUIEdit=M._storeDirectGUIEdit,O.react=M.react,O.extendTraces=M.extendTraces,O.prependTraces=M.prependTraces,O.addTraces=M.addTraces,O.deleteTraces=M.deleteTraces,O.moveTraces=M.moveTraces,O.purge=M.purge,O.addFrames=M.addFrames,O.deleteFrames=M.deleteFrames,O.animate=M.animate,O.setPlotConfig=M.setPlotConfig;var A=e(52200).getGraphDiv,o=e(4016).eraseActiveShape;O.deleteActiveShape=function(_){return o(A(_))},O.toImage=e(67024),O.validate=e(21480),O.downloadImage=e(39792);var w=e(94828);O.makeTemplate=w.makeTemplate,O.validateTemplate=w.validateTemplate},17680:function(Y,O,e){var M=e(63620),A=e(16628),o=e(24248),w=e(14952).sorterAsc,_=e(24040);O.containerArrayMatch=e(69820);var p=O.isAddVal=function(n){return n==="add"||M(n)},s=O.isRemoveVal=function(n){return n===null||n==="remove"};O.applyContainerArrayChanges=function(n,a,r,i,l){var u=a.astr,c=_.getComponentMethod(u,"supplyLayoutDefaults"),g=_.getComponentMethod(u,"draw"),f=_.getComponentMethod(u,"drawOne"),b=i.replot||i.recalc||c===A||g===A,v=n.layout,d=n._fullLayout;if(r[""]){Object.keys(r).length>1&&o.warn("Full array edits are incompatible with other edits",u);var m=r[""][""];if(s(m))a.set(null);else{if(!Array.isArray(m))return o.warn("Unrecognized full array edit value",u,m),!0;a.set(m)}return!b&&(c(v,d),g(n),!0)}var x,y,T,h,E,k,L,P,I=Object.keys(r).map(Number).sort(w),z=a.get(),F=z||[],U=l(d,u).get(),R=[],j=-1,Z=F.length;for(x=0;x<I.length;x++)if(h=r[T=I[x]],E=Object.keys(h),k=h[""],L=p(k),T<0||T>F.length-(L?0:1))o.warn("index out of range",u,T);else if(k!==void 0)E.length>1&&o.warn("Insertion & removal are incompatible with edits to the same index.",u,T),s(k)?R.push(T):L?(k==="add"&&(k={}),F.splice(T,0,k),U&&U.splice(T,0,{})):o.warn("Unrecognized full object edit value",u,T,k),j===-1&&(j=T);else for(y=0;y<E.length;y++)P=u+"["+T+"].",l(F[T],E[y],P).set(h[E[y]]);for(x=R.length-1;x>=0;x--)F.splice(R[x],1),U&&U.splice(R[x],1);if(F.length?z||a.set(F):a.set(null),b)return!1;if(c(v,d),f!==A){var B;if(j===-1)B=I;else{for(Z=Math.max(F.length,Z),B=[],x=0;x<I.length&&!((T=I[x])>=j);x++)B.push(T);for(x=j;x<Z;x++)B.push(x)}for(x=0;x<B.length;x++)f(n,B[x])}else g(n);return!0}},36424:function(Y,O,e){var M=e(33428),A=e(38248),o=e(52264),w=e(3400),_=w.nestedProperty,p=e(95924),s=e(94552),n=e(24040),a=e(73060),r=e(7316),i=e(54460),l=e(96312),u=e(94724),c=e(43616),g=e(76308),f=e(42464).initInteractions,b=e(9616),v=e(22676).clearOutline,d=e(20556).dfltConfig,m=e(17680),x=e(93404),y=e(39172),T=e(67824),h=e(33816).AX_NAME_PATTERN,E=0;function k(Te){var Me=Te._fullLayout;Me._redrawFromAutoMarginCount?Me._redrawFromAutoMarginCount--:Te.emit("plotly_afterplot")}function L(Te,Me){try{Te._fullLayout._paper.style("background",Me)}catch(Le){w.error(Le)}}function P(Te,Me){L(Te,g.combine(Me,"white"))}function I(Te,Me){if(!Te._context){Te._context=w.extendDeep({},d);var Le=M.select("base");Te._context._baseUrl=Le.size()&&Le.attr("href")?window.location.href.split("#")[0]:""}var Ie,he,xe,ke=Te._context;if(Me){for(he=Object.keys(Me),Ie=0;Ie<he.length;Ie++)(xe=he[Ie])!=="editable"&&xe!=="edits"&&xe in ke&&(xe==="setBackground"&&Me[xe]==="opaque"?ke[xe]=P:ke[xe]=Me[xe]);Me.plot3dPixelRatio&&!ke.plotGlPixelRatio&&(ke.plotGlPixelRatio=ke.plot3dPixelRatio);var ze=Me.editable;if(ze!==void 0)for(ke.editable=ze,he=Object.keys(ke.edits),Ie=0;Ie<he.length;Ie++)ke.edits[he[Ie]]=ze;if(Me.edits)for(he=Object.keys(Me.edits),Ie=0;Ie<he.length;Ie++)(xe=he[Ie])in ke.edits&&(ke.edits[xe]=Me.edits[xe]);ke._exportedPlot=Me._exportedPlot}ke.staticPlot&&(ke.editable=!1,ke.edits={},ke.autosizable=!1,ke.scrollZoom=!1,ke.doubleClick=!1,ke.showTips=!1,ke.showLink=!1,ke.displayModeBar=!1),ke.displayModeBar!=="hover"||o||(ke.displayModeBar=!0),ke.setBackground!=="transparent"&&typeof ke.setBackground=="function"||(ke.setBackground=L),ke._hasZeroHeight=ke._hasZeroHeight||Te.clientHeight===0,ke._hasZeroWidth=ke._hasZeroWidth||Te.clientWidth===0;var Re=ke.scrollZoom,Oe=ke._scrollZoom={};if(Re===!0)Oe.cartesian=1,Oe.gl3d=1,Oe.geo=1,Oe.mapbox=1;else if(typeof Re=="string"){var Ve=Re.split("+");for(Ie=0;Ie<Ve.length;Ie++)Oe[Ve[Ie]]=1}else Re!==!1&&(Oe.gl3d=1,Oe.geo=1,Oe.mapbox=1)}function z(Te,Me){var Le,Ie,he=Me+1,xe=[];for(Le=0;Le<Te.length;Le++)(Ie=Te[Le])<0?xe.push(he+Ie):xe.push(Ie);return xe}function F(Te,Me,Le){var Ie,he;for(Ie=0;Ie<Me.length;Ie++){if((he=Me[Ie])!==parseInt(he,10))throw new Error("all values in "+Le+" must be integers");if(he>=Te.data.length||he<-Te.data.length)throw new Error(Le+" must be valid indices for gd.data.");if(Me.indexOf(he,Ie+1)>-1||he>=0&&Me.indexOf(-Te.data.length+he)>-1||he<0&&Me.indexOf(Te.data.length+he)>-1)throw new Error("each index in "+Le+" must be unique.")}}function U(Te,Me,Le){if(!Array.isArray(Te.data))throw new Error("gd.data must be an array.");if(Me===void 0)throw new Error("currentIndices is a required argument.");if(Array.isArray(Me)||(Me=[Me]),F(Te,Me,"currentIndices"),Le===void 0||Array.isArray(Le)||(Le=[Le]),Le!==void 0&&F(Te,Le,"newIndices"),Le!==void 0&&Me.length!==Le.length)throw new Error("current and new indices must be of equal length.")}function R(Te,Me,Le,Ie,he){(function(Je,ot,rt,dt){var _t=w.isPlainObject(dt);if(!Array.isArray(Je.data))throw new Error("gd.data must be an array");if(!w.isPlainObject(ot))throw new Error("update must be a key:value object");if(rt===void 0)throw new Error("indices must be an integer or array of integers");for(var yt in F(Je,rt,"indices"),ot){if(!Array.isArray(ot[yt])||ot[yt].length!==rt.length)throw new Error("attribute "+yt+" must be an array of length equal to indices array length");if(_t&&(!(yt in dt)||!Array.isArray(dt[yt])||dt[yt].length!==ot[yt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}})(Te,Me,Le,Ie);for(var xe=function(Je,ot,rt,dt){var _t,yt,et,nt,At,Rt=w.isPlainObject(dt),Ft=[];for(var It in Array.isArray(rt)||(rt=[rt]),rt=z(rt,Je.data.length-1),ot)for(var Ge=0;Ge<rt.length;Ge++){if(_t=Je.data[rt[Ge]],yt=(et=_(_t,It)).get(),nt=ot[It][Ge],!w.isArrayOrTypedArray(nt))throw new Error("attribute: "+It+" index: "+Ge+" must be an array");if(!w.isArrayOrTypedArray(yt))throw new Error("cannot extend missing or non-array attribute: "+It);if(yt.constructor!==nt.constructor)throw new Error("cannot extend array with an array of a different type: "+It);At=Rt?dt[It][Ge]:dt,A(At)||(At=-1),Ft.push({prop:et,target:yt,insert:nt,maxp:Math.floor(At)})}return Ft}(Te,Me,Le,Ie),ke={},ze={},Re=0;Re<xe.length;Re++){var Oe=xe[Re].prop,Ve=xe[Re].maxp,qe=he(xe[Re].target,xe[Re].insert,Ve);Oe.set(qe[0]),Array.isArray(ke[Oe.astr])||(ke[Oe.astr]=[]),ke[Oe.astr].push(qe[1]),Array.isArray(ze[Oe.astr])||(ze[Oe.astr]=[]),ze[Oe.astr].push(xe[Re].target.length)}return{update:ke,maxPoints:ze}}function j(Te,Me){var Le=new Te.constructor(Te.length+Me.length);return Le.set(Te),Le.set(Me,Te.length),Le}function Z(Te,Me,Le,Ie){Te=w.getGraphDiv(Te),x.clearPromiseQueue(Te);var he={};if(typeof Me=="string")he[Me]=Le;else{if(!w.isPlainObject(Me))return w.warn("Restyle fail.",Me,Le,Ie),Promise.reject();he=w.extendFlat({},Me),Ie===void 0&&(Ie=Le)}Object.keys(he).length&&(Te.changed=!0);var xe=x.coerceTraceIndices(Te,Ie),ke=ne(Te,he,xe),ze=ke.flags;ze.calc&&(Te.calcdata=void 0),ze.clearAxisTypes&&x.clearAxisTypes(Te,xe,{});var Re=[];ze.fullReplot?Re.push(O._doPlot):(Re.push(r.previousPromises),r.supplyDefaults(Te),ze.markerSize&&(r.doCalcdata(Te),K(Re)),ze.style&&Re.push(y.doTraceStyle),ze.colorbars&&Re.push(y.doColorBars),Re.push(k)),Re.push(r.rehover,r.redrag,r.reselect),s.add(Te,Z,[Te,ke.undoit,ke.traces],Z,[Te,ke.redoit,ke.traces]);var Oe=w.syncOrAsync(Re,Te);return Oe&&Oe.then||(Oe=Promise.resolve()),Oe.then(function(){return Te.emit("plotly_restyle",ke.eventData),Te})}function B(Te){return Te===void 0?null:Te}function q(Te,Me){return Me?function(Le,Ie,he){var xe=_(Le,Ie),ke=xe.set;return xe.set=function(ze){V((he||"")+Ie,xe.get(),ze,Te),ke(ze)},xe}:_}function V(Te,Me,Le,Ie){if(Array.isArray(Me)||Array.isArray(Le))for(var he=Array.isArray(Me)?Me:[],xe=Array.isArray(Le)?Le:[],ke=Math.max(he.length,xe.length),ze=0;ze<ke;ze++)V(Te+"["+ze+"]",he[ze],xe[ze],Ie);else if(w.isPlainObject(Me)||w.isPlainObject(Le)){var Re=w.isPlainObject(Me)?Me:{},Oe=w.isPlainObject(Le)?Le:{},Ve=w.extendFlat({},Re,Oe);for(var qe in Ve)V(Te+"."+qe,Re[qe],Oe[qe],Ie)}else Ie[Te]===void 0&&(Ie[Te]=B(Me))}function ne(Te,Me,Le){var Ie,he=Te._fullLayout,xe=Te._fullData,ke=Te.data,ze=he._guiEditing,Re=q(he._preGUI,ze),Oe=w.extendDeepAll({},Me);ee(Me);var Ve,qe=T.traceFlags(),Je={},ot={};function rt(){return Le.map(function(){})}function dt(Gt){var Yt=i.id2name(Gt);Ve.indexOf(Yt)===-1&&Ve.push(Yt)}function _t(Gt){return"LAYOUT"+Gt+".autorange"}function yt(Gt){return"LAYOUT"+Gt+".range"}function et(Gt){for(var Yt=Gt;Yt<xe.length;Yt++)if(xe[Yt]._input===ke[Gt])return xe[Yt]}function nt(Gt,Yt,rn){if(Array.isArray(Gt))Gt.forEach(function(gn){nt(gn,Yt,rn)});else if(!(Gt in Me)&&!x.hasParent(Me,Gt)){var Ln;if(Gt.substr(0,6)==="LAYOUT")Ln=Re(Te.layout,Gt.replace("LAYOUT",""));else{var Sn=Le[rn];Ln=q(he._tracePreGUI[et(Sn)._fullInput.uid],ze)(ke[Sn],Gt)}Gt in ot||(ot[Gt]=rt()),ot[Gt][rn]===void 0&&(ot[Gt][rn]=B(Ln.get())),Yt!==void 0&&Ln.set(Yt)}}function At(Gt){return function(Yt){return xe[Yt][Gt]}}function Rt(Gt){return function(Yt,rn){return Yt===!1?xe[Le[rn]][Gt]:null}}for(var Ft in Me){if(x.hasParent(Me,Ft))throw new Error("cannot set "+Ft+" and a parent attribute simultaneously");var It,Ge,Ye,Ne,We,st,it=Me[Ft];if(Ft!=="autobinx"&&Ft!=="autobiny"||(Ft=Ft.charAt(Ft.length-1)+"bins",it=Array.isArray(it)?it.map(Rt(Ft)):it===!1?Le.map(At(Ft)):null),Je[Ft]=it,Ft.substr(0,6)!=="LAYOUT"){for(ot[Ft]=rt(),Ie=0;Ie<Le.length;Ie++)if(It=ke[Le[Ie]],Ge=et(Le[Ie]),Ne=(Ye=q(he._tracePreGUI[Ge._fullInput.uid],ze)(It,Ft)).get(),(We=Array.isArray(it)?it[Ie%it.length]:it)!==void 0){var Fe=Ye.parts[Ye.parts.length-1],Be=Ft.substr(0,Ft.length-Fe.length-1),at=Be?Be+".":"",Ze=Be?_(Ge,Be).get():Ge;if((st=a.getTraceValObject(Ge,Ye.parts))&&st.impliedEdits&&We!==null)for(var ht in st.impliedEdits)nt(w.relativeAttr(Ft,ht),st.impliedEdits[ht],Ie);else if(Fe!=="thicknessmode"&&Fe!=="lenmode"||Ne===We||We!=="fraction"&&We!=="pixels"||!Ze){if(Ft==="type"&&(We==="pie"!=(Ne==="pie")||We==="funnelarea"!=(Ne==="funnelarea"))){var vt="x",mt="y";We!=="bar"&&Ne!=="bar"||It.orientation!=="h"||(vt="y",mt="x"),w.swapAttrs(It,["?","?src"],"labels",vt),w.swapAttrs(It,["d?","?0"],"label",vt),w.swapAttrs(It,["?","?src"],"values",mt),Ne==="pie"||Ne==="funnelarea"?(_(It,"marker.color").set(_(It,"marker.colors").get()),he._pielayer.selectAll("g.trace").remove()):n.traceIs(It,"cartesian")&&_(It,"marker.colors").set(_(It,"marker.color").get())}}else{var ft=he._size,Et=Ze.orient,Tt=Et==="top"||Et==="bottom";if(Fe==="thicknessmode"){var xt=Tt?ft.h:ft.w;nt(at+"thickness",Ze.thickness*(We==="fraction"?1/xt:xt),Ie)}else{var Ct=Tt?ft.w:ft.h;nt(at+"len",Ze.len*(We==="fraction"?1/Ct:Ct),Ie)}}if(ot[Ft][Ie]=B(Ne),["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Ft)!==-1){if(Ft==="orientation"){Ye.set(We);var Pt=It.x&&!It.y?"h":"v";if((Ye.get()||Pt)===Ge.orientation)continue}else Ft==="orientationaxes"&&(It.orientation={v:"h",h:"v"}[Ge.orientation]);x.swapXYData(It),qe.calc=qe.clearAxisTypes=!0}else r.dataArrayContainers.indexOf(Ye.parts[0])!==-1?(x.manageArrayContainers(Ye,We,ot),qe.calc=!0):(st?st.arrayOk&&!n.traceIs(Ge,"regl")&&(w.isArrayOrTypedArray(We)||w.isArrayOrTypedArray(Ne))?qe.calc=!0:T.update(qe,st):qe.calc=!0,Ye.set(We))}if(["swapxyaxes","orientationaxes"].indexOf(Ft)!==-1&&i.swap(Te,Le),Ft==="orientationaxes"){var Bt=_(Te.layout,"hovermode"),Kt=Bt.get();Kt==="x"?Bt.set("y"):Kt==="y"?Bt.set("x"):Kt==="x unified"?Bt.set("y unified"):Kt==="y unified"&&Bt.set("x unified")}if(["orientation","type"].indexOf(Ft)!==-1){for(Ve=[],Ie=0;Ie<Le.length;Ie++){var sn=ke[Le[Ie]];n.traceIs(sn,"cartesian")&&(dt(sn.xaxis||"x"),dt(sn.yaxis||"y"))}nt(Ve.map(_t),!0,0),nt(Ve.map(yt),[0,1],0)}}else Ye=Re(Te.layout,Ft.replace("LAYOUT","")),ot[Ft]=[B(Ye.get())],Ye.set(Array.isArray(it)?it[0]:it),qe.calc=!0}return(qe.calc||qe.plot)&&(qe.fullReplot=!0),{flags:qe,undoit:ot,redoit:Je,traces:Le,eventData:w.extendDeepNoArrays([],[Oe,Le])}}function ee(Te){var Me,Le,Ie,he=w.counterRegex("axis",".title",!1,!1),xe=/colorbar\.title$/,ke=Object.keys(Te);for(Me=0;Me<ke.length;Me++)Le=ke[Me],Ie=Te[Le],Le!=="title"&&!he.test(Le)&&!xe.test(Le)||typeof Ie!="string"&&typeof Ie!="number"?Le.indexOf("titlefont")>-1&&Le.indexOf("grouptitlefont")===-1?ze(Le,Le.replace("titlefont","title.font")):Le.indexOf("titleposition")>-1?ze(Le,Le.replace("titleposition","title.position")):Le.indexOf("titleside")>-1?ze(Le,Le.replace("titleside","title.side")):Le.indexOf("titleoffset")>-1&&ze(Le,Le.replace("titleoffset","title.offset")):ze(Le,Le.replace("title","title.text"));function ze(Re,Oe){Te[Oe]=Te[Re],delete Te[Re]}}function $(Te,Me,Le){Te=w.getGraphDiv(Te),x.clearPromiseQueue(Te);var Ie={};if(typeof Me=="string")Ie[Me]=Le;else{if(!w.isPlainObject(Me))return w.warn("Relayout fail.",Me,Le),Promise.reject();Ie=w.extendFlat({},Me)}Object.keys(Ie).length&&(Te.changed=!0);var he=se(Te,Ie),xe=he.flags;xe.calc&&(Te.calcdata=void 0);var ke=[r.previousPromises];xe.layoutReplot?ke.push(y.layoutReplot):Object.keys(Ie).length&&(J(Te,xe,he)||r.supplyDefaults(Te),xe.legend&&ke.push(y.doLegend),xe.layoutstyle&&ke.push(y.layoutStyles),xe.axrange&&K(ke,he.rangesAltered),xe.ticks&&ke.push(y.doTicksRelayout),xe.modebar&&ke.push(y.doModeBar),xe.camera&&ke.push(y.doCamera),xe.colorbars&&ke.push(y.doColorBars),ke.push(k)),ke.push(r.rehover,r.redrag,r.reselect),s.add(Te,$,[Te,he.undoit],$,[Te,he.redoit]);var ze=w.syncOrAsync(ke,Te);return ze&&ze.then||(ze=Promise.resolve(Te)),ze.then(function(){return Te.emit("plotly_relayout",he.eventData),Te})}function J(Te,Me,Le){var Ie,he,xe=Te._fullLayout;if(!Me.axrange)return!1;for(var ke in Me)if(ke!=="axrange"&&Me[ke])return!1;var ze=function(ot,rt){return w.coerce(Ie,he,u,ot,rt)},Re={};for(var Oe in Le.rangesAltered){var Ve=i.id2name(Oe);if(Ie=Te.layout[Ve],he=xe[Ve],l(Ie,he,ze,Re),he._matchGroup){for(var qe in he._matchGroup)if(qe!==Oe){var Je=xe[i.id2name(qe)];Je.autorange=he.autorange,Je.range=he.range.slice(),Je._input.range=he.range.slice()}}}return!0}function K(Te,Me){var Le=Me?function(Ie){var he=[];for(var xe in Me){var ke=i.getFromId(Ie,xe);if(he.push(xe),(ke.ticklabelposition||"").indexOf("inside")!==-1&&ke._anchorAxis&&he.push(ke._anchorAxis._id),ke._matchGroup)for(var ze in ke._matchGroup)Me[ze]||he.push(ze)}return i.draw(Ie,he,{skipTitle:!0})}:function(Ie){return i.draw(Ie,"redraw")};Te.push(v,y.doAutoRangeAndConstraints,Le,y.drawData,y.finalDraw)}var te=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ie=/^[xyz]axis[0-9]*\.autorange$/,ae=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function se(Te,Me){var Le,Ie,he,xe=Te.layout,ke=Te._fullLayout,ze=ke._guiEditing,Re=q(ke._preGUI,ze),Oe=Object.keys(Me),Ve=i.list(Te),qe=w.extendDeepAll({},Me),Je={};for(ee(Me),Oe=Object.keys(Me),Ie=0;Ie<Oe.length;Ie++)if(Oe[Ie].indexOf("allaxes")===0){for(he=0;he<Ve.length;he++){var ot=Ve[he]._id.substr(1),rt=ot.indexOf("scene")!==-1?ot+".":"",dt=Oe[Ie].replace("allaxes",rt+Ve[he]._name);Me[dt]||(Me[dt]=Me[Oe[Ie]])}delete Me[Oe[Ie]]}var _t=T.layoutFlags(),yt={},et={};function nt(gn,$t){if(Array.isArray(gn))gn.forEach(function(an){nt(an,$t)});else if(!(gn in Me)&&!x.hasParent(Me,gn)){var cn=Re(xe,gn);gn in et||(et[gn]=B(cn.get())),$t!==void 0&&cn.set($t)}}var At,Rt={};function Ft(gn){var $t=i.name2id(gn.split(".")[0]);return Rt[$t]=1,$t}for(var It in Me){if(x.hasParent(Me,It))throw new Error("cannot set "+It+" and a parent attribute simultaneously");for(var Ge=Re(xe,It),Ye=Me[It],Ne=Ge.parts.length-1;Ne>0&&typeof Ge.parts[Ne]!="string";)Ne--;var We=Ge.parts[Ne],st=Ge.parts[Ne-1]+"."+We,it=Ge.parts.slice(0,Ne).join("."),Fe=_(Te.layout,it).get(),Be=_(ke,it).get(),at=Ge.get();if(Ye!==void 0){yt[It]=Ye,et[It]=We==="reverse"?Ye:B(at);var Ze=a.getLayoutValObject(ke,Ge.parts);if(Ze&&Ze.impliedEdits&&Ye!==null)for(var ht in Ze.impliedEdits)nt(w.relativeAttr(It,ht),Ze.impliedEdits[ht]);if(["width","height"].indexOf(It)!==-1)if(Ye){nt("autosize",null);var vt=It==="height"?"width":"height";nt(vt,ke[vt])}else ke[It]=Te._initialAutoSize[It];else if(It==="autosize")nt("width",Ye?null:ke.width),nt("height",Ye?null:ke.height);else if(st.match(te))Ft(st),_(ke,it+"._inputRange").set(null);else if(st.match(ie)){Ft(st),_(ke,it+"._inputRange").set(null);var mt=_(ke,it).get();mt._inputDomain&&(mt._input.domain=mt._inputDomain.slice())}else st.match(ae)&&_(ke,it+"._inputDomain").set(null);if(We==="type"){At=Fe;var ft=Be.type==="linear"&&Ye==="log",Et=Be.type==="log"&&Ye==="linear";if(ft||Et){if(At&&At.range)if(Be.autorange)ft&&(At.range=At.range[1]>At.range[0]?[1,2]:[2,1]);else{var Tt=At.range[0],xt=At.range[1];ft?(Tt<=0&&xt<=0&&nt(it+".autorange",!0),Tt<=0?Tt=xt/1e6:xt<=0&&(xt=Tt/1e6),nt(it+".range[0]",Math.log(Tt)/Math.LN10),nt(it+".range[1]",Math.log(xt)/Math.LN10)):(nt(it+".range[0]",Math.pow(10,Tt)),nt(it+".range[1]",Math.pow(10,xt)))}else nt(it+".autorange",!0);Array.isArray(ke._subplots.polar)&&ke._subplots.polar.length&&ke[Ge.parts[0]]&&Ge.parts[1]==="radialaxis"&&delete ke[Ge.parts[0]]._subplot.viewInitial["radialaxis.range"],n.getComponentMethod("annotations","convertCoords")(Te,Be,Ye,nt),n.getComponentMethod("images","convertCoords")(Te,Be,Ye,nt)}else nt(it+".autorange",!0),nt(it+".range",null);_(ke,it+"._inputRange").set(null)}else if(We.match(h)){var Ct=_(ke,It).get(),Pt=(Ye||{}).type;Pt&&Pt!=="-"||(Pt="linear"),n.getComponentMethod("annotations","convertCoords")(Te,Ct,Pt,nt),n.getComponentMethod("images","convertCoords")(Te,Ct,Pt,nt)}var Bt=m.containerArrayMatch(It);if(Bt){Le=Bt.array,Ie=Bt.index;var Kt=Bt.property,sn=Ze||{editType:"calc"};Ie!==""&&Kt===""&&(m.isAddVal(Ye)?et[It]=null:m.isRemoveVal(Ye)?et[It]=(_(xe,Le).get()||[])[Ie]:w.warn("unrecognized full object value",Me)),T.update(_t,sn),Je[Le]||(Je[Le]={});var Gt=Je[Le][Ie];Gt||(Gt=Je[Le][Ie]={}),Gt[Kt]=Ye,delete Me[It]}else We==="reverse"?(Fe.range?Fe.range.reverse():(nt(it+".autorange",!0),Fe.range=[1,0]),Be.autorange?_t.calc=!0:_t.plot=!0):(It==="dragmode"&&(Ye===!1&&at!==!1||Ye!==!1&&at===!1)||ke._has("scatter-like")&&ke._has("regl")&&It==="dragmode"&&(Ye==="lasso"||Ye==="select")&&at!=="lasso"&&at!=="select"||ke._has("gl2d")?_t.plot=!0:Ze?T.update(_t,Ze):_t.calc=!0,Ge.set(Ye))}}for(Le in Je)m.applyContainerArrayChanges(Te,Re(xe,Le),Je[Le],_t,Re)||(_t.plot=!0);for(var Yt in Rt){var rn=(At=i.getFromId(Te,Yt))&&At._constraintGroup;if(rn)for(var Ln in _t.calc=!0,rn)Rt[Ln]||(i.getFromId(Te,Ln)._constraintShrinkable=!0)}(ce(Te)||Me.height||Me.width)&&(_t.plot=!0);var Sn=ke.shapes;for(Ie=0;Ie<Sn.length;Ie++)if(Sn[Ie].showlegend){_t.calc=!0;break}return(_t.plot||_t.calc)&&(_t.layoutReplot=!0),{flags:_t,rangesAltered:Rt,undoit:et,redoit:yt,eventData:qe}}function ce(Te){var Me=Te._fullLayout,Le=Me.width,Ie=Me.height;return Te.layout.autosize&&r.plotAutoSize(Te,Te.layout,Me),Me.width!==Le||Me.height!==Ie}function de(Te,Me,Le,Ie){Te=w.getGraphDiv(Te),x.clearPromiseQueue(Te),w.isPlainObject(Me)||(Me={}),w.isPlainObject(Le)||(Le={}),Object.keys(Me).length&&(Te.changed=!0),Object.keys(Le).length&&(Te.changed=!0);var he=x.coerceTraceIndices(Te,Ie),xe=ne(Te,w.extendFlat({},Me),he),ke=xe.flags,ze=se(Te,w.extendFlat({},Le)),Re=ze.flags;(ke.calc||Re.calc)&&(Te.calcdata=void 0),ke.clearAxisTypes&&x.clearAxisTypes(Te,he,Le);var Oe=[];Re.layoutReplot?Oe.push(y.layoutReplot):ke.fullReplot?Oe.push(O._doPlot):(Oe.push(r.previousPromises),J(Te,Re,ze)||r.supplyDefaults(Te),ke.style&&Oe.push(y.doTraceStyle),(ke.colorbars||Re.colorbars)&&Oe.push(y.doColorBars),Re.legend&&Oe.push(y.doLegend),Re.layoutstyle&&Oe.push(y.layoutStyles),Re.axrange&&K(Oe,ze.rangesAltered),Re.ticks&&Oe.push(y.doTicksRelayout),Re.modebar&&Oe.push(y.doModeBar),Re.camera&&Oe.push(y.doCamera),Oe.push(k)),Oe.push(r.rehover,r.redrag,r.reselect),s.add(Te,de,[Te,xe.undoit,ze.undoit,xe.traces],de,[Te,xe.redoit,ze.redoit,xe.traces]);var Ve=w.syncOrAsync(Oe,Te);return Ve&&Ve.then||(Ve=Promise.resolve(Te)),Ve.then(function(){return Te.emit("plotly_update",{data:xe.eventData,layout:ze.eventData}),Te})}function ge(Te){return function(Me){Me._fullLayout._guiEditing=!0;var Le=Te.apply(null,arguments);return Me._fullLayout._guiEditing=!1,Le}}var ve=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],be=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function me(Te,Me){for(var Le=0;Le<Me.length;Le++){var Ie=Me[Le],he=Te.match(Ie.pattern);if(he){var xe=he[1]||"";return{head:xe,tail:Te.substr(xe.length+1),attr:Ie.attr}}}}function Se(Te,Me){var Le=_(Me,Te).get();if(Le!==void 0)return Le;var Ie=Te.split(".");for(Ie.pop();Ie.length>1;)if(Ie.pop(),(Le=_(Me,Ie.join(".")+".uirevision").get())!==void 0)return Le;return Me.uirevision}function we(Te,Me){for(var Le=0;Le<Me.length;Le++)if(Me[Le]._fullInput.uid===Te)return Le;return-1}function _e(Te,Me,Le){for(var Ie=0;Ie<Me.length;Ie++)if(Me[Ie].uid===Te)return Ie;return!Me[Le]||Me[Le].uid?-1:Le}function oe(Te,Me){var Le=w.isPlainObject(Te),Ie=Array.isArray(Te);return Le||Ie?(Le&&w.isPlainObject(Me)||Ie&&Array.isArray(Me))&&JSON.stringify(Te)===JSON.stringify(Me):Te===Me}function le(Te,Me,Le,Ie){var he,xe,ke,ze=Ie.getValObject,Re=Ie.flags,Oe=Ie.immutable,Ve=Ie.inArray,qe=Ie.arrayIndex;function Je(){var Fe=he.editType;Ve&&Fe.indexOf("arraydraw")!==-1?w.pushUnique(Re.arrays[Ve],qe):(T.update(Re,he),Fe!=="none"&&Re.nChanges++,Ie.transition&&he.anim&&Re.nChangesAnim++,(te.test(ke)||ie.test(ke))&&(Re.rangesAltered[Le[0]]=1),ae.test(ke)&&_(Me,"_inputDomain").set(null),xe==="datarevision"&&(Re.newDataRevision=1))}function ot(Fe){return Fe.valType==="data_array"||Fe.arrayOk}for(xe in Te){if(Re.calc&&!Ie.transition)return;var rt=Te[xe],dt=Me[xe],_t=Le.concat(xe);if(ke=_t.join("."),xe.charAt(0)!=="_"&&typeof rt!="function"&&rt!==dt){if((xe==="tick0"||xe==="dtick")&&Le[0]!=="geo"){var yt=Me.tickmode;if(yt==="auto"||yt==="array"||!yt)continue}if((xe!=="range"||!Me.autorange)&&(xe!=="zmin"&&xe!=="zmax"||Me.type!=="contourcarpet")&&(he=ze(_t))&&(!he._compareAsJSON||JSON.stringify(rt)!==JSON.stringify(dt))){var et,nt=he.valType,At=ot(he),Rt=Array.isArray(rt),Ft=Array.isArray(dt);if(Rt&&Ft){var It="_input_"+xe,Ge=Te[It],Ye=Me[It];if(Array.isArray(Ge)&&Ge===Ye)continue}if(dt===void 0)At&&Rt?Re.calc=!0:Je();else if(he._isLinkedToArray){var Ne=[],We=!1;Ve||(Re.arrays[xe]=Ne);var st=Math.min(rt.length,dt.length),it=Math.max(rt.length,dt.length);if(st!==it){if(he.editType!=="arraydraw"){Je();continue}We=!0}for(et=0;et<st;et++)le(rt[et],dt[et],_t.concat(et),w.extendFlat({inArray:xe,arrayIndex:et},Ie));if(We)for(et=st;et<it;et++)Ne.push(et)}else!nt&&w.isPlainObject(rt)?le(rt,dt,_t,Ie):At?Rt&&Ft?(Oe&&(Re.calc=!0),(Oe||Ie.newDataRevision)&&Je()):Rt!==Ft?Re.calc=!0:Je():Rt&&Ft&&rt.length===dt.length&&String(rt)===String(dt)||Je()}}}for(xe in Me)if(!(xe in Te)&&xe.charAt(0)!=="_"&&typeof Me[xe]!="function"){if(ot(he=ze(Le.concat(xe)))&&Array.isArray(Me[xe]))return void(Re.calc=!0);Je()}}function pe(Te,Me){var Le;for(Le in Te)if(Le.charAt(0)!=="_"){var Ie=Te[Le],he=Me[Le];if(Ie!==he)if(w.isPlainObject(Ie)&&w.isPlainObject(he)){if(pe(Ie,he))return!0}else{if(!Array.isArray(Ie)||!Array.isArray(he)||Ie.length!==he.length)return!0;for(var xe=0;xe<Ie.length;xe++)if(Ie[xe]!==he[xe]&&(!w.isPlainObject(Ie[xe])||!w.isPlainObject(he[xe])||pe(Ie[xe],he[xe])))return!0}}}function Ee(Te){var Me=Te._fullLayout,Le=Te.getBoundingClientRect();if(!w.equalDomRects(Le,Me._lastBBox)){var Ie=Me._invTransform=w.inverseTransformMatrix(w.getFullTransformMatrix(Te));Me._invScaleX=Math.sqrt(Ie[0][0]*Ie[0][0]+Ie[0][1]*Ie[0][1]+Ie[0][2]*Ie[0][2]),Me._invScaleY=Math.sqrt(Ie[1][0]*Ie[1][0]+Ie[1][1]*Ie[1][1]+Ie[1][2]*Ie[1][2]),Me._lastBBox=Le}}O.animate=function(Te,Me,Le){if(Te=w.getGraphDiv(Te),!w.isPlotDiv(Te))throw new Error("This element is not a Plotly plot: "+Te+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Ie=Te._transitionData;Ie._frameQueue||(Ie._frameQueue=[]);var he=(Le=r.supplyAnimationDefaults(Le)).transition,xe=Le.frame;function ke(Oe){return Array.isArray(he)?Oe>=he.length?he[0]:he[Oe]:he}function ze(Oe){return Array.isArray(xe)?Oe>=xe.length?xe[0]:xe[Oe]:xe}function Re(Oe,Ve){var qe=0;return function(){if(Oe&&++qe===Ve)return Oe()}}return Ie._frameWaitingCnt===void 0&&(Ie._frameWaitingCnt=0),new Promise(function(Oe,Ve){function qe(){Te.emit("plotly_animating"),Ie._lastFrameAt=-1/0,Ie._timeToNext=0,Ie._runningTransitions=0,Ie._currentFrame=null;var It=function(){Ie._animationRaf=window.requestAnimationFrame(It),Date.now()-Ie._lastFrameAt>Ie._timeToNext&&function(){Ie._currentFrame&&Ie._currentFrame.onComplete&&Ie._currentFrame.onComplete();var Ge=Ie._currentFrame=Ie._frameQueue.shift();if(Ge){var Ye=Ge.name?Ge.name.toString():null;Te._fullLayout._currentFrame=Ye,Ie._lastFrameAt=Date.now(),Ie._timeToNext=Ge.frameOpts.duration,r.transition(Te,Ge.frame.data,Ge.frame.layout,x.coerceTraceIndices(Te,Ge.frame.traces),Ge.frameOpts,Ge.transitionOpts).then(function(){Ge.onComplete&&Ge.onComplete()}),Te.emit("plotly_animatingframe",{name:Ye,frame:Ge.frame,animation:{frame:Ge.frameOpts,transition:Ge.transitionOpts}})}else Te.emit("plotly_animated"),window.cancelAnimationFrame(Ie._animationRaf),Ie._animationRaf=null}()};It()}var Je,ot,rt=0;function dt(It){return Array.isArray(he)?rt>=he.length?It.transitionOpts=he[rt]:It.transitionOpts=he[0]:It.transitionOpts=he,rt++,It}var _t=[],yt=Me==null,et=Array.isArray(Me);if(yt||et||!w.isPlainObject(Me)){if(yt||["string","number"].indexOf(typeof Me)!==-1)for(Je=0;Je<Ie._frames.length;Je++)(ot=Ie._frames[Je])&&(yt||String(ot.group)===String(Me))&&_t.push({type:"byname",name:String(ot.name),data:dt({name:ot.name})});else if(et)for(Je=0;Je<Me.length;Je++){var nt=Me[Je];["number","string"].indexOf(typeof nt)!==-1?(nt=String(nt),_t.push({type:"byname",name:nt,data:dt({name:nt})})):w.isPlainObject(nt)&&_t.push({type:"object",data:dt(w.extendFlat({},nt))})}}else _t.push({type:"object",data:dt(w.extendFlat({},Me))});for(Je=0;Je<_t.length;Je++)if((ot=_t[Je]).type==="byname"&&!Ie._frameHash[ot.data.name])return w.warn('animate failure: frame not found: "'+ot.data.name+'"'),void Ve();["next","immediate"].indexOf(Le.mode)!==-1&&function(){if(Ie._frameQueue.length!==0){for(;Ie._frameQueue.length;){var It=Ie._frameQueue.pop();It.onInterrupt&&It.onInterrupt()}Te.emit("plotly_animationinterrupted",[])}}(),Le.direction==="reverse"&&_t.reverse();var At=Te._fullLayout._currentFrame;if(At&&Le.fromcurrent){var Rt=-1;for(Je=0;Je<_t.length;Je++)if((ot=_t[Je]).type==="byname"&&ot.name===At){Rt=Je;break}if(Rt>0&&Rt<_t.length-1){var Ft=[];for(Je=0;Je<_t.length;Je++)ot=_t[Je],(_t[Je].type!=="byname"||Je>Rt)&&Ft.push(ot);_t=Ft}}_t.length>0?function(It){if(It.length!==0){for(var Ge=0;Ge<It.length;Ge++){var Ye;Ye=It[Ge].type==="byname"?r.computeFrame(Te,It[Ge].name):It[Ge].data;var Ne=ze(Ge),We=ke(Ge);We.duration=Math.min(We.duration,Ne.duration);var st={frame:Ye,name:It[Ge].name,frameOpts:Ne,transitionOpts:We};Ge===It.length-1&&(st.onComplete=Re(Oe,2),st.onInterrupt=Ve),Ie._frameQueue.push(st)}Le.mode==="immediate"&&(Ie._lastFrameAt=-1/0),Ie._animationRaf||qe()}}(_t):(Te.emit("plotly_animated"),Oe())})},O.addFrames=function(Te,Me,Le){if(Te=w.getGraphDiv(Te),Me==null)return Promise.resolve();if(!w.isPlotDiv(Te))throw new Error("This element is not a Plotly plot: "+Te+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Ie,he,xe,ke,ze=Te._transitionData._frames,Re=Te._transitionData._frameHash;if(!Array.isArray(Me))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Me);var Oe=ze.length+2*Me.length,Ve=[],qe={};for(Ie=Me.length-1;Ie>=0;Ie--)if(w.isPlainObject(Me[Ie])){var Je=Me[Ie].name,ot=(Re[Je]||qe[Je]||{}).name,rt=Me[Ie].name,dt=Re[ot]||qe[ot];ot&&rt&&typeof rt=="number"&&dt&&E<5&&(E++,w.warn('addFrames: overwriting frame "'+(Re[ot]||qe[ot]).name+'" with a frame whose name of type "number" also equates to "'+ot+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),E===5&&w.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),qe[Je]={name:Je},Ve.push({frame:r.supplyFrameDefaults(Me[Ie]),index:Le&&Le[Ie]!==void 0&&Le[Ie]!==null?Le[Ie]:Oe+Ie})}Ve.sort(function(It,Ge){return It.index>Ge.index?-1:It.index<Ge.index?1:0});var _t=[],yt=[],et=ze.length;for(Ie=Ve.length-1;Ie>=0;Ie--){if(typeof(he=Ve[Ie].frame).name=="number"&&w.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!he.name)for(;Re[he.name="frame "+Te._transitionData._counter++];);if(Re[he.name]){for(xe=0;xe<ze.length&&(ze[xe]||{}).name!==he.name;xe++);_t.push({type:"replace",index:xe,value:he}),yt.unshift({type:"replace",index:xe,value:ze[xe]})}else ke=Math.max(0,Math.min(Ve[Ie].index,et)),_t.push({type:"insert",index:ke,value:he}),yt.unshift({type:"delete",index:ke}),et++}var nt=r.modifyFrames,At=r.modifyFrames,Rt=[Te,yt],Ft=[Te,_t];return s&&s.add(Te,nt,Rt,At,Ft),r.modifyFrames(Te,_t)},O.deleteFrames=function(Te,Me){if(Te=w.getGraphDiv(Te),!w.isPlotDiv(Te))throw new Error("This element is not a Plotly plot: "+Te);var Le,Ie,he=Te._transitionData._frames,xe=[],ke=[];if(!Me)for(Me=[],Le=0;Le<he.length;Le++)Me.push(Le);for((Me=Me.slice()).sort(),Le=Me.length-1;Le>=0;Le--)Ie=Me[Le],xe.push({type:"delete",index:Ie}),ke.unshift({type:"insert",index:Ie,value:he[Ie]});var ze=r.modifyFrames,Re=r.modifyFrames,Oe=[Te,ke],Ve=[Te,xe];return s&&s.add(Te,ze,Oe,Re,Ve),r.modifyFrames(Te,xe)},O.addTraces=function Te(Me,Le,Ie){Me=w.getGraphDiv(Me);var he,xe,ke=[],ze=O.deleteTraces,Re=Te,Oe=[Me,ke],Ve=[Me,Le];for(function(qe,Je,ot){var rt,dt;if(!Array.isArray(qe.data))throw new Error("gd.data must be an array.");if(Je===void 0)throw new Error("traces must be defined.");for(Array.isArray(Je)||(Je=[Je]),rt=0;rt<Je.length;rt++)if(typeof(dt=Je[rt])!="object"||Array.isArray(dt)||dt===null)throw new Error("all values in traces array must be non-array objects");if(ot===void 0||Array.isArray(ot)||(ot=[ot]),ot!==void 0&&ot.length!==Je.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(Me,Le,Ie),Array.isArray(Le)||(Le=[Le]),Le=Le.map(function(qe){return w.extendFlat({},qe)}),x.cleanData(Le),he=0;he<Le.length;he++)Me.data.push(Le[he]);for(he=0;he<Le.length;he++)ke.push(-Le.length+he);if(Ie===void 0)return xe=O.redraw(Me),s.add(Me,ze,Oe,Re,Ve),xe;Array.isArray(Ie)||(Ie=[Ie]);try{U(Me,ke,Ie)}catch(qe){throw Me.data.splice(Me.data.length-Le.length,Le.length),qe}return s.startSequence(Me),s.add(Me,ze,Oe,Re,Ve),xe=O.moveTraces(Me,ke,Ie),s.stopSequence(Me),xe},O.deleteTraces=function Te(Me,Le){Me=w.getGraphDiv(Me);var Ie,he,xe=[],ke=O.addTraces,ze=Te,Re=[Me,xe,Le],Oe=[Me,Le];if(Le===void 0)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Le)||(Le=[Le]),F(Me,Le,"indices"),(Le=z(Le,Me.data.length-1)).sort(w.sorterDes),Ie=0;Ie<Le.length;Ie+=1)he=Me.data.splice(Le[Ie],1)[0],xe.push(he);var Ve=O.redraw(Me);return s.add(Me,ke,Re,ze,Oe),Ve},O.extendTraces=function Te(Me,Le,Ie,he){var xe=R(Me=w.getGraphDiv(Me),Le,Ie,he,function(Re,Oe,Ve){var qe,Je;if(w.isTypedArray(Re))if(Ve<0){var ot=new Re.constructor(0),rt=j(Re,Oe);Ve<0?(qe=rt,Je=ot):(qe=ot,Je=rt)}else if(qe=new Re.constructor(Ve),Je=new Re.constructor(Re.length+Oe.length-Ve),Ve===Oe.length)qe.set(Oe),Je.set(Re);else if(Ve<Oe.length){var dt=Oe.length-Ve;qe.set(Oe.subarray(dt)),Je.set(Re),Je.set(Oe.subarray(0,dt),Re.length)}else{var _t=Ve-Oe.length,yt=Re.length-_t;qe.set(Re.subarray(yt)),qe.set(Oe,_t),Je.set(Re.subarray(0,yt))}else qe=Re.concat(Oe),Je=Ve>=0&&Ve<qe.length?qe.splice(0,qe.length-Ve):[];return[qe,Je]}),ke=O.redraw(Me),ze=[Me,xe.update,Ie,xe.maxPoints];return s.add(Me,O.prependTraces,ze,Te,arguments),ke},O.moveTraces=function Te(Me,Le,Ie){var he,xe=[],ke=[],ze=Te,Re=Te,Oe=[Me=w.getGraphDiv(Me),Ie,Le],Ve=[Me,Le,Ie];if(U(Me,Le,Ie),Le=Array.isArray(Le)?Le:[Le],Ie===void 0)for(Ie=[],he=0;he<Le.length;he++)Ie.push(-Le.length+he);for(Ie=Array.isArray(Ie)?Ie:[Ie],Le=z(Le,Me.data.length-1),Ie=z(Ie,Me.data.length-1),he=0;he<Me.data.length;he++)Le.indexOf(he)===-1&&xe.push(Me.data[he]);for(he=0;he<Le.length;he++)ke.push({newIndex:Ie[he],trace:Me.data[Le[he]]});for(ke.sort(function(Je,ot){return Je.newIndex-ot.newIndex}),he=0;he<ke.length;he+=1)xe.splice(ke[he].newIndex,0,ke[he].trace);Me.data=xe;var qe=O.redraw(Me);return s.add(Me,ze,Oe,Re,Ve),qe},O.prependTraces=function Te(Me,Le,Ie,he){var xe=R(Me=w.getGraphDiv(Me),Le,Ie,he,function(Re,Oe,Ve){var qe,Je;if(w.isTypedArray(Re))if(Ve<=0){var ot=new Re.constructor(0),rt=j(Oe,Re);Ve<0?(qe=rt,Je=ot):(qe=ot,Je=rt)}else if(qe=new Re.constructor(Ve),Je=new Re.constructor(Re.length+Oe.length-Ve),Ve===Oe.length)qe.set(Oe),Je.set(Re);else if(Ve<Oe.length){var dt=Oe.length-Ve;qe.set(Oe.subarray(0,dt)),Je.set(Oe.subarray(dt)),Je.set(Re,dt)}else{var _t=Ve-Oe.length;qe.set(Oe),qe.set(Re.subarray(0,_t),Oe.length),Je.set(Re.subarray(_t))}else qe=Oe.concat(Re),Je=Ve>=0&&Ve<qe.length?qe.splice(Ve,qe.length):[];return[qe,Je]}),ke=O.redraw(Me),ze=[Me,xe.update,Ie,xe.maxPoints];return s.add(Me,O.extendTraces,ze,Te,arguments),ke},O.newPlot=function(Te,Me,Le,Ie){return Te=w.getGraphDiv(Te),r.cleanPlot([],{},Te._fullData||[],Te._fullLayout||{}),r.purge(Te),O._doPlot(Te,Me,Le,Ie)},O._doPlot=function(Te,Me,Le,Ie){var he;if(Te=w.getGraphDiv(Te),p.init(Te),w.isPlainObject(Me)){var xe=Me;Me=xe.data,Le=xe.layout,Ie=xe.config,he=xe.frames}if(p.triggerHandler(Te,"plotly_beforeplot",[Me,Le,Ie])===!1)return Promise.reject();Me||Le||w.isPlotDiv(Te)||w.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Te),I(Te,Ie),Le||(Le={}),M.select(Te).classed("js-plotly-plot",!0),c.makeTester(),Array.isArray(Te._promises)||(Te._promises=[]);var ke=(Te.data||[]).length===0&&Array.isArray(Me);Array.isArray(Me)&&(x.cleanData(Me),ke?Te.data=Me:Te.data.push.apply(Te.data,Me),Te.empty=!1),Te.layout&&!ke||(Te.layout=x.cleanLayout(Le)),r.supplyDefaults(Te);var ze=Te._fullLayout,Re=ze._has("cartesian");ze._replotting=!0,(ke||ze._shouldCreateBgLayer)&&(function(yt){var et=M.select(yt),nt=yt._fullLayout;if(nt._calcInverseTransform=Ee,nt._calcInverseTransform(yt),nt._container=et.selectAll(".plot-container").data([0]),nt._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),nt._paperdiv=nt._container.selectAll(".svg-container").data([0]),nt._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),nt._glcontainer=nt._paperdiv.selectAll(".gl-container").data([{}]),nt._glcontainer.enter().append("div").classed("gl-container",!0),nt._paperdiv.selectAll(".main-svg").remove(),nt._paperdiv.select(".modebar-container").remove(),nt._paper=nt._paperdiv.insert("svg",":first-child").classed("main-svg",!0),nt._toppaper=nt._paperdiv.append("svg").classed("main-svg",!0),nt._modebardiv=nt._paperdiv.append("div"),delete nt._modeBar,nt._hoverpaper=nt._paperdiv.append("svg").classed("main-svg",!0),!nt._uid){var At={};M.selectAll("defs").each(function(){this.id&&(At[this.id.split("-")[1]]=1)}),nt._uid=w.randstr(At)}nt._paperdiv.selectAll(".main-svg").attr(b.svgAttrs),nt._defs=nt._paper.append("defs").attr("id","defs-"+nt._uid),nt._clips=nt._defs.append("g").classed("clips",!0),nt._topdefs=nt._toppaper.append("defs").attr("id","topdefs-"+nt._uid),nt._topclips=nt._topdefs.append("g").classed("clips",!0),nt._bgLayer=nt._paper.append("g").classed("bglayer",!0),nt._draggers=nt._paper.append("g").classed("draglayer",!0);var Rt=nt._paper.append("g").classed("layer-below",!0);nt._imageLowerLayer=Rt.append("g").classed("imagelayer",!0),nt._shapeLowerLayer=Rt.append("g").classed("shapelayer",!0),nt._cartesianlayer=nt._paper.append("g").classed("cartesianlayer",!0),nt._polarlayer=nt._paper.append("g").classed("polarlayer",!0),nt._smithlayer=nt._paper.append("g").classed("smithlayer",!0),nt._ternarylayer=nt._paper.append("g").classed("ternarylayer",!0),nt._geolayer=nt._paper.append("g").classed("geolayer",!0),nt._funnelarealayer=nt._paper.append("g").classed("funnelarealayer",!0),nt._pielayer=nt._paper.append("g").classed("pielayer",!0),nt._iciclelayer=nt._paper.append("g").classed("iciclelayer",!0),nt._treemaplayer=nt._paper.append("g").classed("treemaplayer",!0),nt._sunburstlayer=nt._paper.append("g").classed("sunburstlayer",!0),nt._indicatorlayer=nt._toppaper.append("g").classed("indicatorlayer",!0),nt._glimages=nt._paper.append("g").classed("glimages",!0);var Ft=nt._toppaper.append("g").classed("layer-above",!0);nt._imageUpperLayer=Ft.append("g").classed("imagelayer",!0),nt._shapeUpperLayer=Ft.append("g").classed("shapelayer",!0),nt._selectionLayer=nt._toppaper.append("g").classed("selectionlayer",!0),nt._infolayer=nt._toppaper.append("g").classed("infolayer",!0),nt._menulayer=nt._toppaper.append("g").classed("menulayer",!0),nt._zoomlayer=nt._toppaper.append("g").classed("zoomlayer",!0),nt._hoverlayer=nt._hoverpaper.append("g").classed("hoverlayer",!0),nt._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),yt.emit("plotly_framework")}(Te),ze._shouldCreateBgLayer&&delete ze._shouldCreateBgLayer),c.initGradients(Te),c.initPatterns(Te),ke&&i.saveShowSpikeInitial(Te);var Oe=!Te.calcdata||Te.calcdata.length!==(Te._fullData||[]).length;Oe&&r.doCalcdata(Te);for(var Ve=0;Ve<Te.calcdata.length;Ve++)Te.calcdata[Ve][0].trace=Te._fullData[Ve];Te._context.responsive?Te._responsiveChartHandler||(Te._responsiveChartHandler=function(){w.isHidden(Te)||r.resize(Te)},window.addEventListener("resize",Te._responsiveChartHandler)):w.clearResponsive(Te);var qe=w.extendFlat({},ze._size),Je=0;function ot(){if(r.clearAutoMarginIds(Te),y.drawMarginPushers(Te),i.allowAutoMargin(Te),Te._fullLayout.title.text&&Te._fullLayout.title.automargin&&r.allowAutoMargin(Te,"title.automargin"),ze._has("pie"))for(var yt=Te._fullData,et=0;et<yt.length;et++){var nt=yt[et];nt.type==="pie"&&nt.automargin&&r.allowAutoMargin(Te,"pie."+nt.uid+".automargin")}return r.doAutoMargin(Te),r.previousPromises(Te)}function rt(){Te._transitioning||(y.doAutoRangeAndConstraints(Te),ke&&i.saveRangeInitial(Te),n.getComponentMethod("rangeslider","calcAutorange")(Te))}var dt=[r.previousPromises,function(){if(he)return O.addFrames(Te,he)},function yt(){for(var et=ze._basePlotModules,nt=0;nt<et.length;nt++)et[nt].drawFramework&&et[nt].drawFramework(Te);!ze._glcanvas&&ze._has("gl")&&(ze._glcanvas=ze._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(It){return It.key}),ze._glcanvas.enter().append("canvas").attr("class",function(It){return"gl-canvas gl-canvas-"+It.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var At=Te._context.plotGlPixelRatio;if(ze._glcanvas){ze._glcanvas.attr("width",ze.width*At).attr("height",ze.height*At).style("width",ze.width+"px").style("height",ze.height+"px");var Rt=ze._glcanvas.data()[0].regl;if(Rt&&(Math.floor(ze.width*At)!==Rt._gl.drawingBufferWidth||Math.floor(ze.height*At)!==Rt._gl.drawingBufferHeight)){var Ft="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!Je)return w.log(Ft+" Clearing graph and plotting again."),r.cleanPlot([],{},Te._fullData,ze),r.supplyDefaults(Te),ze=Te._fullLayout,r.doCalcdata(Te),Je++,yt();w.error(Ft)}}return ze.modebar.orientation==="h"?ze._modebardiv.style("height",null).style("width","100%"):ze._modebardiv.style("width",null).style("height",ze.height+"px"),r.previousPromises(Te)},ot,function(){if(r.didMarginChange(qe,ze._size))return w.syncOrAsync([ot,y.layoutStyles],Te)}];Re&&dt.push(function(){if(Oe)return w.syncOrAsync([n.getComponentMethod("shapes","calcAutorange"),n.getComponentMethod("annotations","calcAutorange"),rt],Te);rt()}),dt.push(y.layoutStyles),Re&&dt.push(function(){return i.draw(Te,ke?"":"redraw")},function(yt){var et=yt._fullLayout._insideTickLabelsUpdaterange;if(et)return yt._fullLayout._insideTickLabelsUpdaterange=void 0,$(yt,et).then(function(){i.saveRangeInitial(yt,!0)})}),dt.push(y.drawData,y.finalDraw,f,r.addLinks,r.rehover,r.redrag,r.reselect,r.doAutoMargin,r.previousPromises);var _t=w.syncOrAsync(dt,Te);return _t&&_t.then||(_t=Promise.resolve()),_t.then(function(){return k(Te),Te})},O.purge=function(Te){var Me=(Te=w.getGraphDiv(Te))._fullLayout||{},Le=Te._fullData||[];return r.cleanPlot([],{},Le,Me),r.purge(Te),p.purge(Te),Me._container&&Me._container.remove(),delete Te._context,Te},O.react=function(Te,Me,Le,Ie){var he,xe;Te=w.getGraphDiv(Te),x.clearPromiseQueue(Te);var ke=Te._fullData,ze=Te._fullLayout;if(w.isPlotDiv(Te)&&ke&&ze){if(w.isPlainObject(Me)){var Re=Me;Me=Re.data,Le=Re.layout,Ie=Re.config,he=Re.frames}var Oe=!1;if(Ie){var Ve=w.extendDeep({},Te._context);Te._context=void 0,I(Te,Ie),Oe=pe(Ve,Te._context)}Te.data=Me||[],x.cleanData(Te.data),Te.layout=Le||{},x.cleanLayout(Te.layout),function(it,Fe,Be,at){var Ze,ht,vt,mt,ft,Et,Tt,xt,Ct,Pt,Bt=at._preGUI,Kt=[],sn={},Gt={};for(Ze in Bt){if(ft=me(Ze,ve)){if(Ct=ft.head,Pt=ft.tail,ht=ft.attr||Ct+".uirevision",(mt=(vt=_(at,ht).get())&&Se(ht,Fe))&&mt===vt){if((Et=Bt[Ze])===null&&(Et=void 0),oe(xt=(Tt=_(Fe,Ze)).get(),Et)){xt===void 0&&Pt==="autorange"&&Kt.push(Ct),Tt.set(B(_(at,Ze).get()));continue}if(Pt==="autorange"||Pt.substr(0,6)==="range["){var Yt=Bt[Ct+".range[0]"],rn=Bt[Ct+".range[1]"],Ln=Bt[Ct+".autorange"];if(Ln||Ln===null&&Yt===null&&rn===null){if(!(Ct in sn)){var Sn=_(Fe,Ct).get();sn[Ct]=Sn&&(Sn.autorange||Sn.autorange!==!1&&(!Sn.range||Sn.range.length!==2))}if(sn[Ct]){Tt.set(B(_(at,Ze).get()));continue}}}}}else w.warn("unrecognized GUI edit: "+Ze);delete Bt[Ze],ft&&ft.tail.substr(0,6)==="range["&&(Gt[ft.head]=1)}for(var gn=0;gn<Kt.length;gn++){var $t=Kt[gn];if(Gt[$t]){var cn=_(Fe,$t).get();cn&&delete cn.autorange}}var an=at._tracePreGUI;for(var pn in an){var An,Cn=an[pn],Rn=null;for(Ze in Cn){if(!Rn){var Fn=we(pn,Be);if(Fn<0){delete an[pn];break}var In=_e(pn,it,(An=Be[Fn]._fullInput).index);if(In<0){delete an[pn];break}Rn=it[In]}if(ft=me(Ze,be)){if(ft.attr?mt=(vt=_(at,ft.attr).get())&&Se(ft.attr,Fe):(vt=An.uirevision,(mt=Rn.uirevision)===void 0&&(mt=Fe.uirevision)),mt&&mt===vt&&((Et=Cn[Ze])===null&&(Et=void 0),oe(xt=(Tt=_(Rn,Ze)).get(),Et))){Tt.set(B(_(An,Ze).get()));continue}}else w.warn("unrecognized GUI edit: "+Ze+" in trace uid "+pn);delete Cn[Ze]}}}(Te.data,Te.layout,ke,ze),r.supplyDefaults(Te,{skipUpdateCalc:!0});var qe=Te._fullData,Je=Te._fullLayout,ot=Je.datarevision===void 0,rt=Je.transition,dt=function(it,Fe,Be,at,Ze){var ht=T.layoutFlags();return ht.arrays={},ht.rangesAltered={},ht.nChanges=0,ht.nChangesAnim=0,le(Fe,Be,[],{getValObject:function(vt){return a.getLayoutValObject(Be,vt)},flags:ht,immutable:at,transition:Ze,gd:it}),(ht.plot||ht.calc)&&(ht.layoutReplot=!0),Ze&&ht.nChanges&&ht.nChangesAnim&&(ht.anim=ht.nChanges===ht.nChangesAnim?"all":"some"),ht}(Te,ze,Je,ot,rt),_t=dt.newDataRevision,yt=function(it,Fe,Be,at,Ze,ht){var vt=Fe.length===Be.length;if(!Ze&&!vt)return{fullReplot:!0,calc:!0};var mt,ft,Et=T.traceFlags();Et.arrays={},Et.nChanges=0,Et.nChangesAnim=0;var Tt={getValObject:function(Ct){var Pt=a.getTraceValObject(ft,Ct);return!ft._module.animatable&&Pt.anim&&(Pt.anim=!1),Pt},flags:Et,immutable:at,transition:Ze,newDataRevision:ht,gd:it},xt={};for(mt=0;mt<Fe.length;mt++)if(Be[mt]){if(ft=Be[mt]._fullInput,r.hasMakesDataTransform(ft)&&(ft=Be[mt]),xt[ft.uid])continue;xt[ft.uid]=1,le(Fe[mt]._fullInput,ft,[],Tt)}return(Et.calc||Et.plot)&&(Et.fullReplot=!0),Ze&&Et.nChanges&&Et.nChangesAnim&&(Et.anim=Et.nChanges===Et.nChangesAnim&&vt?"all":"some"),Et}(Te,ke,qe,ot,rt,_t);if(ce(Te)&&(dt.layoutReplot=!0),yt.calc||dt.calc){Te.calcdata=void 0;for(var et=Object.getOwnPropertyNames(Je),nt=0;nt<et.length;nt++){var At=et[nt],Rt=At.substring(0,5);if(Rt==="xaxis"||Rt==="yaxis"){var Ft=Je[At]._emptyCategories;Ft&&Ft()}}}else r.supplyDefaultsUpdateCalc(Te.calcdata,qe);var It=[];if(he&&(Te._transitionData={},r.createTransitionData(Te),It.push(function(){return O.addFrames(Te,he)})),Je.transition&&!Oe&&(yt.anim||dt.anim))dt.ticks&&It.push(y.doTicksRelayout),r.doCalcdata(Te),y.doAutoRangeAndConstraints(Te),It.push(function(){return r.transitionFromReact(Te,yt,dt,ze)});else if(yt.fullReplot||dt.layoutReplot||Oe)Te._fullLayout._skipDefaults=!0,It.push(O._doPlot);else{for(var Ge in dt.arrays){var Ye=dt.arrays[Ge];if(Ye.length){var Ne=n.getComponentMethod(Ge,"drawOne");if(Ne!==w.noop)for(var We=0;We<Ye.length;We++)Ne(Te,Ye[We]);else{var st=n.getComponentMethod(Ge,"draw");if(st===w.noop)throw new Error("cannot draw components: "+Ge);st(Te)}}}It.push(r.previousPromises),yt.style&&It.push(y.doTraceStyle),(yt.colorbars||dt.colorbars)&&It.push(y.doColorBars),dt.legend&&It.push(y.doLegend),dt.layoutstyle&&It.push(y.layoutStyles),dt.axrange&&K(It),dt.ticks&&It.push(y.doTicksRelayout),dt.modebar&&It.push(y.doModeBar),dt.camera&&It.push(y.doCamera),It.push(k)}It.push(r.rehover,r.redrag,r.reselect),(xe=w.syncOrAsync(It,Te))&&xe.then||(xe=Promise.resolve(Te))}else xe=O.newPlot(Te,Me,Le,Ie);return xe.then(function(){return Te.emit("plotly_react",{data:Me,layout:Le}),Te})},O.redraw=function(Te){if(Te=w.getGraphDiv(Te),!w.isPlotDiv(Te))throw new Error("This element is not a Plotly plot: "+Te);return x.cleanData(Te.data),x.cleanLayout(Te.layout),Te.calcdata=void 0,O._doPlot(Te).then(function(){return Te.emit("plotly_redraw"),Te})},O.relayout=$,O.restyle=Z,O.setPlotConfig=function(Te){return w.extendFlat(d,Te)},O.update=de,O._guiRelayout=ge($),O._guiRestyle=ge(Z),O._guiUpdate=ge(de),O._storeDirectGUIEdit=function(Te,Me,Le){for(var Ie in Le)V(Ie,_(Te,Ie).get(),Le[Ie],Me)}},20556:function(Y){var O={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},e={};(function M(A,o){for(var w in A){var _=A[w];_.valType?o[w]=_.dflt:(o[w]||(o[w]={}),M(_,o[w]))}})(O,e),Y.exports={configAttributes:O,dfltConfig:e}},73060:function(Y,O,e){var M=e(24040),A=e(3400),o=e(45464),w=e(64859),_=e(16672),p=e(85656),s=e(20556).configAttributes,n=e(67824),a=A.extendDeepAll,r=A.isPlainObject,i=A.isArrayOrTypedArray,l=A.nestedProperty,u=A.valObjectMeta,c="_isSubplotObj",g="_isLinkedToArray",f="_deprecated",b=[c,g,"_arrayAttrRegexps",f];function v(h,E,k){if(!h)return!1;if(h._isLinkedToArray){if(d(E[k]))k++;else if(k<E.length)return!1}for(;k<E.length;k++){var L=h[E[k]];if(!r(L)||(h=L,k===E.length-1))break;if(h._isLinkedToArray){if(!d(E[++k]))return!1}else if(h.valType==="info_array"){var P=E[++k];if(!d(P))return!1;var I=h.items;if(Array.isArray(I)){if(P>=I.length)return!1;if(h.dimensions===2){if(k++,E.length===k)return h;var z=E[k];if(!d(z))return!1;h=I[P][z]}else h=I[P]}else h=I}}return h}function d(h){return h===Math.round(h)&&h>=0}function m(){var h,E,k={};for(h in a(k,w),M.subplotsRegistry)if((E=M.subplotsRegistry[h]).layoutAttributes)if(Array.isArray(E.attr))for(var L=0;L<E.attr.length;L++)y(k,E,E.attr[L]);else y(k,E,E.attr==="subplot"?E.name:E.attr);for(h in M.componentsRegistry){var P=(E=M.componentsRegistry[h]).schema;if(P&&(P.subplots||P.layout)){var I=P.subplots;if(I&&I.xaxis&&!I.yaxis)for(var z in I.xaxis)delete k.yaxis[z];delete k.xaxis.shift,delete k.xaxis.autoshift}else E.name==="colorscale"?a(k,E.layoutAttributes):E.layoutAttributes&&T(k,E.layoutAttributes,E.name)}return{layoutAttributes:x(k)}}function x(h){return function(E){O.crawl(E,function(k,L,P){O.isValObject(k)?k.arrayOk!==!0&&k.valType!=="data_array"||(P[L+"src"]={valType:"string",editType:"none"}):r(k)&&(k.role="object")})}(h),function(E){O.crawl(E,function(k,L,P){if(k){var I=k[g];I&&(delete k[g],P[L]={items:{}},P[L].items[I]=k,P[L].role="object")}})}(h),function(E){(function k(L){for(var P in L)if(r(L[P]))k(L[P]);else if(Array.isArray(L[P]))for(var I=0;I<L[P].length;I++)k(L[P][I]);else L[P]instanceof RegExp&&(L[P]=L[P].toString())})(E)}(h),h}function y(h,E,k){var L=l(h,k),P=a({},E.layoutAttributes);P[c]=!0,L.set(P)}function T(h,E,k){var L=l(h,k);L.set(a(L.get()||{},E))}O.IS_SUBPLOT_OBJ=c,O.IS_LINKED_TO_ARRAY=g,O.DEPRECATED=f,O.UNDERSCORE_ATTRS=b,O.get=function(){var h={};M.allTypes.forEach(function(L){h[L]=function(P){var I,z;z=(I=M.modules[P]._module).basePlotModule;var F={type:null},U=a({},o),R=a({},I.attributes);O.crawl(R,function(B,q,V,ne,ee){l(U,ee).set(void 0),B===void 0&&l(R,ee).set(void 0)}),a(F,U),M.traceIs(P,"noOpacity")&&delete F.opacity,M.traceIs(P,"showLegend")||(delete F.showlegend,delete F.legendgroup),M.traceIs(P,"noHover")&&(delete F.hoverinfo,delete F.hoverlabel),I.selectPoints||delete F.selectedpoints,a(F,R),z.attributes&&a(F,z.attributes),F.type=P;var j={meta:I.meta||{},categories:I.categories||{},animatable:!!I.animatable,type:P,attributes:x(F)};if(I.layoutAttributes){var Z={};a(Z,I.layoutAttributes),j.layoutAttributes=x(Z)}return I.animatable||O.crawl(j,function(B){O.isValObject(B)&&"anim"in B&&delete B.anim}),j}(L)});var E,k={};return Object.keys(M.transformsRegistry).forEach(function(L){k[L]=function(P){var I=M.transformsRegistry[P],z=a({},I.attributes);return Object.keys(M.componentsRegistry).forEach(function(F){var U=M.componentsRegistry[F];U.schema&&U.schema.transforms&&U.schema.transforms[P]&&Object.keys(U.schema.transforms[P]).forEach(function(R){T(z,U.schema.transforms[P][R],R)})}),{attributes:x(z)}}(L)}),{defs:{valObjects:u,metaKeys:b.concat(["description","role","editType","impliedEdits"]),editType:{traces:n.traces,layout:n.layout},impliedEdits:{}},traces:h,layout:m(),transforms:k,frames:(E={frames:a({},_)},x(E),E.frames),animation:x(p),config:x(s)}},O.crawl=function(h,E,k,L){var P=k||0;L=L||"",Object.keys(h).forEach(function(I){var z=h[I];if(b.indexOf(I)===-1){var F=(L?L+".":"")+I;E(z,I,h,P,F),O.isValObject(z)||r(z)&&I!=="impliedEdits"&&O.crawl(z,E,P+1,F)}})},O.isValObject=function(h){return h&&h.valType!==void 0},O.findArrayAttributes=function(h){var E,k,L=[],P=[],I=[];function z(B,q,V,ne){P=P.slice(0,ne).concat([q]),I=I.slice(0,ne).concat([B&&B._isLinkedToArray]),B&&(B.valType==="data_array"||B.arrayOk===!0)&&(P[ne-1]!=="colorbar"||q!=="ticktext"&&q!=="tickvals")&&F(E,0,"")}function F(B,q,V){var ne=B[P[q]],ee=V+P[q];if(q===P.length-1)i(ne)&&L.push(k+ee);else if(I[q]){if(Array.isArray(ne))for(var $=0;$<ne.length;$++)r(ne[$])&&F(ne[$],q+1,ee+"["+$+"].")}else r(ne)&&F(ne,q+1,ee+".")}E=h,k="",O.crawl(o,z),h._module&&h._module.attributes&&O.crawl(h._module.attributes,z);var U=h.transforms;if(U)for(var R=0;R<U.length;R++){var j=U[R],Z=j._module;Z&&(k="transforms["+R+"].",E=j,O.crawl(Z.attributes,z))}return L},O.getTraceValObject=function(h,E){var k,L,P=E[0],I=1;if(P==="transforms"){if(E.length===1)return o.transforms;var z=h.transforms;if(!Array.isArray(z)||!z.length)return!1;var F=E[1];if(!d(F)||F>=z.length)return!1;L=(k=(M.transformsRegistry[z[F].type]||{}).attributes)&&k[E[2]],I=3}else{var U=h._module;if(U||(U=(M.modules[h.type||o.type.dflt]||{})._module),!U)return!1;if(!(L=(k=U.attributes)&&k[P])){var R=U.basePlotModule;R&&R.attributes&&(L=R.attributes[P])}L||(L=o[P])}return v(L,E,I)},O.getLayoutValObject=function(h,E){var k=function(L,P){var I,z,F,U,R=L._basePlotModules;if(R){var j;for(I=0;I<R.length;I++){if((F=R[I]).attrRegex&&F.attrRegex.test(P)){if(F.layoutAttrOverrides)return F.layoutAttrOverrides;!j&&F.layoutAttributes&&(j=F.layoutAttributes)}var Z=F.baseLayoutAttrOverrides;if(Z&&P in Z)return Z[P]}if(j)return j}var B=L._modules;if(B){for(I=0;I<B.length;I++)if((U=B[I].layoutAttributes)&&P in U)return U[P]}for(z in M.componentsRegistry){if((F=M.componentsRegistry[z]).name==="colorscale"&&P.indexOf("coloraxis")===0)return F.layoutAttributes[P];if(!F.schema&&P===F.name)return F.layoutAttributes}return P in w&&w[P]}(h,E[0]);return v(k,E,1)}},31780:function(Y,O,e){var M=e(3400),A=e(45464),o="templateitemname",w={name:{valType:"string",editType:"none"}};function _(s){return s&&typeof s=="string"}function p(s){var n=s.length-1;return s.charAt(n)!=="s"&&M.warn("bad argument to arrayDefaultKey: "+s),s.substr(0,s.length-1)+"defaults"}w[o]={valType:"string",editType:"calc"},O.templatedArray=function(s,n){return n._isLinkedToArray=s,n.name=w.name,n[o]=w[o],n},O.traceTemplater=function(s){var n,a,r={};for(n in s)a=s[n],Array.isArray(a)&&a.length&&(r[n]=0);return{newTrace:function(i){var l={type:n=M.coerce(i,{},A,"type"),_template:null};if(n in r){a=s[n];var u=r[n]%a.length;r[n]++,l._template=a[u]}return l}}},O.newContainer=function(s,n,a){var r=s._template,i=r&&(r[n]||a&&r[a]);return M.isPlainObject(i)||(i=null),s[n]={_template:i}},O.arrayTemplater=function(s,n,a){var r=s._template,i=r&&r[p(n)],l=r&&r[n];Array.isArray(l)&&l.length||(l=[]);var u={};return{newItem:function(c){var g={name:c.name,_input:c},f=g[o]=c[o];if(!_(f))return g._template=i,g;for(var b=0;b<l.length;b++){var v=l[b];if(v.name===f)return u[f]=1,g._template=v,g}return g[a]=c[a]||!1,g._template=!1,g},defaultItems:function(){for(var c=[],g=0;g<l.length;g++){var f=l[g],b=f.name;if(_(b)&&!u[b]){var v={_template:f,name:b,_input:{_templateitemname:b}};v[o]=f[o],c.push(v),u[b]=1}}return c}}},O.arrayDefaultKey=p,O.arrayEditor=function(s,n,a){var r=(M.nestedProperty(s,n).get()||[]).length,i=a._index,l=i>=r&&(a._input||{})._templateitemname;l&&(i=r);var u,c=n+"["+i+"]";function g(){u={},l&&(u[c]={},u[c][o]=l)}function f(v,d){l?M.nestedProperty(u[c],v).set(d):u[c+"."+v]=d}function b(){var v=u;return g(),v}return g(),{modifyBase:function(v,d){u[v]=d},modifyItem:f,getUpdateObj:b,applyUpdate:function(v,d){v&&f(v,d);var m=b();for(var x in m)M.nestedProperty(s,x).set(m[x])}}}},39172:function(Y,O,e){var M=e(33428),A=e(24040),o=e(7316),w=e(3400),_=e(72736),p=e(73696),s=e(76308),n=e(43616),a=e(81668),r=e(45460),i=e(54460),l=e(84284),u=e(71888),c=u.enforce,g=u.clean,f=e(19280).doAutoRange,b="start";function v(T,h,E){for(var k=0;k<E.length;k++){var L=E[k][0],P=E[k][1];if(!(L[0]>=T[1]||L[1]<=T[0])&&P[0]<h[1]&&P[1]>h[0])return!0}return!1}function d(T){var h,E,k,L,P,I,z=T._fullLayout,F=z._size,U=F.p,R=i.list(T,"",!0);if(z._paperdiv.style({width:T._context.responsive&&z.autosize&&!T._context._hasZeroWidth&&!T.layout.width?"100%":z.width+"px",height:T._context.responsive&&z.autosize&&!T._context._hasZeroHeight&&!T.layout.height?"100%":z.height+"px"}).selectAll(".main-svg").call(n.setSize,z.width,z.height),T._context.setBackground(T,z.paper_bgcolor),O.drawMainTitle(T),r.manage(T),!z._has("cartesian"))return o.previousPromises(T);function j(Oe,Ve,qe){var Je=Oe._lw/2;return Oe._id.charAt(0)==="x"?Ve?qe==="top"?Ve._offset-U-Je:Ve._offset+Ve._length+U+Je:F.t+F.h*(1-(Oe.position||0))+Je%1:Ve?qe==="right"?Ve._offset+Ve._length+U+Je:Ve._offset-U-Je:F.l+F.w*(Oe.position||0)+Je%1}for(h=0;h<R.length;h++){var Z=(L=R[h])._anchorAxis;L._linepositions={},L._lw=n.crispRound(T,L.linewidth,1),L._mainLinePosition=j(L,Z,L.side),L._mainMirrorPosition=L.mirror&&Z?j(L,Z,l.OPPOSITE_SIDE[L.side]):null}var B=[],q=[],V=[],ne=s.opacity(z.paper_bgcolor)===1&&s.opacity(z.plot_bgcolor)===1&&z.paper_bgcolor===z.plot_bgcolor;for(E in z._plots)if((k=z._plots[E]).mainplot)k.bg&&k.bg.remove(),k.bg=void 0;else{var ee=k.xaxis.domain,$=k.yaxis.domain,J=k.plotgroup;if(v(ee,$,V)){var K=J.node(),te=k.bg=w.ensureSingle(J,"rect","bg");K.insertBefore(te.node(),K.childNodes[0]),q.push(E)}else J.select("rect.bg").remove(),V.push([ee,$]),ne||(B.push(E),q.push(E))}var ie,ae,se,ce,de,ge,ve,be,me,Se,we,_e,oe,le=z._bgLayer.selectAll(".bg").data(B);for(le.enter().append("rect").classed("bg",!0),le.exit().remove(),le.each(function(Oe){z._plots[Oe].bg=M.select(this)}),h=0;h<q.length;h++)k=z._plots[q[h]],P=k.xaxis,I=k.yaxis,k.bg&&P._offset!==void 0&&I._offset!==void 0&&k.bg.call(n.setRect,P._offset-U,I._offset-U,P._length+2*U,I._length+2*U).call(s.fill,z.plot_bgcolor).style("stroke-width",0);if(!z._hasOnlyLargeSploms)for(E in z._plots){k=z._plots[E],P=k.xaxis,I=k.yaxis;var pe,Ee,Te=k.clipId="clip"+z._uid+E+"plot",Me=w.ensureSingleById(z._clips,"clipPath",Te,function(Oe){Oe.classed("plotclip",!0).append("rect")});k.clipRect=Me.select("rect").attr({width:P._length,height:I._length}),n.setTranslate(k.plot,P._offset,I._offset),k._hasClipOnAxisFalse?(pe=null,Ee=Te):(pe=Te,Ee=null),n.setClipUrl(k.plot,pe,T),k.layerClipId=Ee}function Le(Oe){return"M"+ie+","+Oe+"H"+ae}function Ie(Oe){return"M"+P._offset+","+Oe+"h"+P._length}function he(Oe){return"M"+Oe+","+be+"V"+ve}function xe(Oe){return I._shift!==void 0&&(Oe+=I._shift),"M"+Oe+","+I._offset+"v"+I._length}function ke(Oe,Ve,qe){if(!Oe.showline||E!==Oe._mainSubplot)return"";if(!Oe._anchorAxis)return qe(Oe._mainLinePosition);var Je=Ve(Oe._mainLinePosition);return Oe.mirror&&(Je+=Ve(Oe._mainMirrorPosition)),Je}for(E in z._plots){k=z._plots[E],P=k.xaxis,I=k.yaxis;var ze="M0,0";m(P,E)&&(de=y(P,"left",I,R),ie=P._offset-(de?U+de:0),ge=y(P,"right",I,R),ae=P._offset+P._length+(ge?U+ge:0),se=j(P,I,"bottom"),ce=j(P,I,"top"),!(oe=!P._anchorAxis||E!==P._mainSubplot)||P.mirror!=="allticks"&&P.mirror!=="all"||(P._linepositions[E]=[se,ce]),ze=ke(P,Le,Ie),oe&&P.showline&&(P.mirror==="all"||P.mirror==="allticks")&&(ze+=Le(se)+Le(ce)),k.xlines.style("stroke-width",P._lw+"px").call(s.stroke,P.showline?P.linecolor:"rgba(0,0,0,0)")),k.xlines.attr("d",ze);var Re="M0,0";m(I,E)&&(we=y(I,"bottom",P,R),ve=I._offset+I._length+(we?U:0),_e=y(I,"top",P,R),be=I._offset-(_e?U:0),me=j(I,P,"left"),Se=j(I,P,"right"),!(oe=!I._anchorAxis||E!==I._mainSubplot)||I.mirror!=="allticks"&&I.mirror!=="all"||(I._linepositions[E]=[me,Se]),Re=ke(I,he,xe),oe&&I.showline&&(I.mirror==="all"||I.mirror==="allticks")&&(Re+=he(me)+he(Se)),k.ylines.style("stroke-width",I._lw+"px").call(s.stroke,I.showline?I.linecolor:"rgba(0,0,0,0)")),k.ylines.attr("d",Re)}return i.makeClipPaths(T),o.previousPromises(T)}function m(T,h){return(T.ticks||T.showline)&&(h===T._mainSubplot||T.mirror==="all"||T.mirror==="allticks")}function x(T,h,E){if(!E.showline||!E._lw)return!1;if(E.mirror==="all"||E.mirror==="allticks")return!0;var k=E._anchorAxis;if(!k)return!1;var L=l.FROM_BL[h];return E.side===h?k.domain[L]===T.domain[L]:E.mirror&&k.domain[1-L]===T.domain[1-L]}function y(T,h,E,k){if(x(T,h,E))return E._lw;for(var L=0;L<k.length;L++){var P=k[L];if(P._mainAxis===E._mainAxis&&x(T,h,P))return P._lw}return 0}O.layoutStyles=function(T){return w.syncOrAsync([o.doAutoMargin,d],T)},O.drawMainTitle=function(T){var h,E=T._fullLayout.title,k=T._fullLayout,L=function(B){var q=B.title,V="middle";return w.isRightAnchor(q)?V="end":w.isLeftAnchor(q)&&(V=b),V}(k),P=function(B){var q=B.title,V="0em";return w.isTopAnchor(q)?V=l.CAP_SHIFT+"em":w.isMiddleAnchor(q)&&(V=l.MID_SHIFT+"em"),V}(k),I=function(B,q){var V=B.title,ne=B._size,ee=0;return q!=="0em"&&q?q===l.CAP_SHIFT+"em"&&(ee=V.pad.t):ee=-V.pad.b,V.y==="auto"?ne.t/2:V.yref==="paper"?ne.t+ne.h-ne.h*V.y+ee:B.height-B.height*V.y+ee}(k,P),z=function(B,q){var V=B.title,ne=B._size,ee=0;return q===b?ee=V.pad.l:q==="end"&&(ee=-V.pad.r),V.xref==="paper"?ne.l+ne.w*V.x+ee:B.width*V.x+ee}(k,L);if(a.draw(T,"gtitle",{propContainer:k,propName:"title.text",placeholder:k._dfltTitle.plot,attributes:{x:z,y:I,"text-anchor":L,dy:P}}),E.text&&E.automargin){var F=M.selectAll(".gtitle"),U=n.bBox(F.node()).height,R=function(B,q,V){var ne=q.y,ee=q.yanchor,$=ne>.5?"t":"b",J=B._fullLayout.margin[$],K=0;return q.yref==="paper"?K=V+q.pad.t+q.pad.b:q.yref==="container"&&(K=function(te,ie,ae,se,ce){var de=0;return ae==="middle"&&(de+=ce/2),te==="t"?(ae==="top"&&(de+=ce),de+=se-ie*se):(ae==="bottom"&&(de+=ce),de+=ie*se),de}($,ne,ee,B._fullLayout.height,V)+q.pad.t+q.pad.b),K>J?K:0}(T,E,U);if(R>0){(function(B,q,V,ne){var ee="title.automargin",$=B._fullLayout.title,J=$.y>.5?"t":"b",K={x:$.x,y:$.y,t:0,b:0},te={};$.yref==="paper"&&function(ie,ae,se,ce,de){var ge=ae.yref==="paper"?ie._fullLayout._size.h:ie._fullLayout.height,ve=w.isTopAnchor(ae)?ce:ce-de,be=se==="b"?ge-ve:ve;return!(w.isTopAnchor(ae)&&se==="t"||w.isBottomAnchor(ae)&&se==="b")&&be<de}(B,$,J,q,ne)?K[J]=V:$.yref==="container"&&(te[J]=V,B._fullLayout._reservedMargin[ee]=te),o.allowAutoMargin(B,ee),o.autoMargin(B,ee,K)})(T,I,R,U),F.attr({x:z,y:I,"text-anchor":L,dy:(h=E.yanchor,h==="top"?l.CAP_SHIFT+.3+"em":h==="bottom"?"-0.3em":l.MID_SHIFT+"em")}).call(_.positionText,z,I);var j=(E.text.match(_.BR_TAG_ALL)||[]).length;if(j){var Z=l.LINE_SPACING*j+l.MID_SHIFT;E.y===0&&(Z=-Z),F.selectAll(".line").each(function(){var B=+this.getAttribute("dy").slice(0,-2)-Z+"em";this.setAttribute("dy",B)})}}}},O.doTraceStyle=function(T){var h,E=T.calcdata,k=[];for(h=0;h<E.length;h++){var L=E[h],P=L[0]||{},I=P.trace||{},z=I._module||{},F=z.arraysToCalcdata;F&&F(L,I);var U=z.editStyle;U&&k.push({fn:U,cd0:P})}if(k.length){for(h=0;h<k.length;h++){var R=k[h];R.fn(T,R.cd0)}p(T),O.redrawReglTraces(T)}return o.style(T),A.getComponentMethod("legend","draw")(T),o.previousPromises(T)},O.doColorBars=function(T){return A.getComponentMethod("colorbar","draw")(T),o.previousPromises(T)},O.layoutReplot=function(T){var h=T.layout;return T.layout=void 0,A.call("_doPlot",T,"",h)},O.doLegend=function(T){return A.getComponentMethod("legend","draw")(T),o.previousPromises(T)},O.doTicksRelayout=function(T){return i.draw(T,"redraw"),T._fullLayout._hasOnlyLargeSploms&&(A.subplotsRegistry.splom.updateGrid(T),p(T),O.redrawReglTraces(T)),O.drawMainTitle(T),o.previousPromises(T)},O.doModeBar=function(T){var h=T._fullLayout;r.manage(T);for(var E=0;E<h._basePlotModules.length;E++){var k=h._basePlotModules[E].updateFx;k&&k(T)}return o.previousPromises(T)},O.doCamera=function(T){for(var h=T._fullLayout,E=h._subplots.gl3d,k=0;k<E.length;k++){var L=h[E[k]];L._scene.setViewport(L)}},O.drawData=function(T){var h=T._fullLayout;p(T);for(var E=h._basePlotModules,k=0;k<E.length;k++)E[k].plot(T);return O.redrawReglTraces(T),o.style(T),A.getComponentMethod("selections","draw")(T),A.getComponentMethod("shapes","draw")(T),A.getComponentMethod("annotations","draw")(T),A.getComponentMethod("images","draw")(T),h._replotting=!1,o.previousPromises(T)},O.redrawReglTraces=function(T){var h=T._fullLayout;if(h._has("regl")){var E,k,L=T._fullData,P=[],I=[];for(h._hasOnlyLargeSploms&&h._splomGrid.draw(),E=0;E<L.length;E++){var z=L[E];z.visible===!0&&z._length!==0&&(z.type==="splom"?h._splomScenes[z.uid].draw():z.type==="scattergl"?w.pushUnique(P,z.xaxis+z.yaxis):z.type==="scatterpolargl"&&w.pushUnique(I,z.subplot))}for(E=0;E<P.length;E++)(k=h._plots[P[E]])._scene&&k._scene.draw();for(E=0;E<I.length;E++)(k=h[I[E]]._subplot)._scene&&k._scene.draw()}},O.doAutoRangeAndConstraints=function(T){for(var h,E=i.list(T,"",!0),k={},L=0;L<E.length;L++)if(!k[(h=E[L])._id]){k[h._id]=1,g(T,h),f(T,h);var P=h._matchGroup;if(P)for(var I in P){var z=i.getFromId(T,I);f(T,z,h.range),k[I]=1}}c(T)},O.finalDraw=function(T){A.getComponentMethod("rangeslider","draw")(T),A.getComponentMethod("rangeselector","draw")(T)},O.drawMarginPushers=function(T){A.getComponentMethod("legend","draw")(T),A.getComponentMethod("rangeselector","draw")(T),A.getComponentMethod("sliders","draw")(T),A.getComponentMethod("updatemenus","draw")(T),A.getComponentMethod("colorbar","draw")(T)}},94828:function(Y,O,e){var M=e(3400),A=M.isPlainObject,o=e(73060),w=e(7316),_=e(45464),p=e(31780),s=e(20556).dfltConfig;function n(f,b){f=M.extendDeep({},f);var v,d,m=Object.keys(f).sort();function x(k,L,P){if(A(L)&&A(k))n(k,L);else if(Array.isArray(L)&&Array.isArray(k)){var I=p.arrayTemplater({_template:f},P);for(d=0;d<L.length;d++){var z=L[d],F=I.newItem(z)._template;F&&n(F,z)}var U=I.defaultItems();for(d=0;d<U.length;d++)L.push(U[d]._template);for(d=0;d<L.length;d++)delete L[d].templateitemname}}for(v=0;v<m.length;v++){var y=m[v],T=f[y];if(y in b?x(T,b[y],y):b[y]=T,a(y)===y)for(var h in b){var E=a(h);h===E||E!==y||h in f||x(T,b[h],y)}}}function a(f){return f.replace(/[0-9]+$/,"")}function r(f,b,v,d,m){var x=m&&v(m);for(var y in f){var T=f[y],h=u(f,y,d),E=u(f,y,m),k=v(E);if(!k){var L=a(y);L!==y&&(k=v(E=u(f,L,m)))}if(!(x&&x===k||!k||k._noTemplating||k.valType==="data_array"||k.arrayOk&&Array.isArray(T)))if(!k.valType&&A(T))r(T,b,v,h,E);else if(k._isLinkedToArray&&Array.isArray(T))for(var P=!1,I=0,z={},F=0;F<T.length;F++){var U=T[F];if(A(U)){var R=U.name;if(R)z[R]||(r(U,b,v,u(T,I,h),u(T,I,E)),I++,z[R]=1);else if(!P){var j=u(f,p.arrayDefaultKey(y),d),Z=u(T,I,h);r(U,b,v,Z,u(T,I,E));var B=M.nestedProperty(b,Z);M.nestedProperty(b,j).set(B.get()),B.set(null),P=!0}}}else M.nestedProperty(b,h).set(T)}}function i(f,b){return o.getLayoutValObject(f,M.nestedProperty({},b).parts)}function l(f,b){return o.getTraceValObject(f,M.nestedProperty({},b).parts)}function u(f,b,v){return v?Array.isArray(f)?v+"["+b+"]":v+"."+b:b}function c(f){for(var b=0;b<f.length;b++)if(A(f[b]))return!0}function g(f){var b;switch(f.code){case"data":b="The template has no key data.";break;case"layout":b="The template has no key layout.";break;case"missing":b=f.path?"There are no templates for item "+f.path+" with name "+f.templateitemname:"There are no templates for trace "+f.index+", of type "+f.traceType+".";break;case"unused":b=f.path?"The template item at "+f.path+" was not used in constructing the plot.":f.dataCount?"Some of the templates of type "+f.traceType+" were not used. The template has "+f.templateCount+" traces, the data only has "+f.dataCount+" of this type.":"The template has "+f.templateCount+" traces of type "+f.traceType+" but there are none in the data.";break;case"reused":b="Some of the templates of type "+f.traceType+" were used more than once. The template has "+f.templateCount+" traces, the data has "+f.dataCount+" of this type."}return f.msg=b,f}O.makeTemplate=function(f){f=M.isPlainObject(f)?f:M.getGraphDiv(f),f=M.extendDeep({_context:s},{data:f.data,layout:f.layout}),w.supplyDefaults(f);var b=f.data||[],v=f.layout||{};v._basePlotModules=f._fullLayout._basePlotModules,v._modules=f._fullLayout._modules;var d={data:{},layout:{}};b.forEach(function(I){var z={};r(I,z,l.bind(null,I));var F=M.coerce(I,{},_,"type"),U=d.data[F];U||(U=d.data[F]=[]),U.push(z)}),r(v,d.layout,i.bind(null,v)),delete d.layout.template;var m=v.template;if(A(m)){var x,y,T,h,E,k,L=m.layout;A(L)&&n(L,d.layout);var P=m.data;if(A(P)){for(y in d.data)if(T=P[y],Array.isArray(T)){for(k=(E=d.data[y]).length,h=T.length,x=0;x<k;x++)n(T[x%h],E[x]);for(x=k;x<h;x++)E.push(M.extendDeep({},T[x]))}for(y in P)y in d.data||(d.data[y]=M.extendDeep([],P[y]))}}return d},O.validateTemplate=function(f,b){var v=M.extendDeep({},{_context:s,data:f.data,layout:f.layout}),d=v.layout||{};A(b)||(b=d.template||{});var m=b.layout,x=b.data,y=[];v.layout=d,v.layout.template=b,w.supplyDefaults(v);var T=v._fullLayout,h=v._fullData,E={};if(A(m)?(function U(R,j){for(var Z in R)if(Z.charAt(0)!=="_"&&A(R[Z])){var B,q=a(Z),V=[];for(B=0;B<j.length;B++)V.push(u(R,Z,j[B])),q!==Z&&V.push(u(R,q,j[B]));for(B=0;B<V.length;B++)E[V[B]]=1;U(R[Z],V)}}(T,["layout"]),function U(R,j){for(var Z in R)if(Z.indexOf("defaults")===-1&&A(R[Z])){var B=u(R,Z,j);E[B]?U(R[Z],B):y.push({code:"unused",path:B})}}(m,"layout")):y.push({code:"layout"}),A(x)){for(var k,L={},P=0;P<h.length;P++){var I=h[P];L[k=I.type]=(L[k]||0)+1,I._fullInput._template||y.push({code:"missing",index:I._fullInput.index,traceType:k})}for(k in x){var z=x[k].length,F=L[k]||0;z>F?y.push({code:"unused",traceType:k,templateCount:z,dataCount:F}):F>z&&y.push({code:"reused",traceType:k,templateCount:z,dataCount:F})}}else y.push({code:"data"});if(function U(R,j){for(var Z in R)if(Z.charAt(0)!=="_"){var B=R[Z],q=u(R,Z,j);A(B)?(Array.isArray(R)&&B._template===!1&&B.templateitemname&&y.push({code:"missing",path:q,templateitemname:B.templateitemname}),U(B,q)):Array.isArray(B)&&c(B)&&U(B,q)}}({data:h,layout:T},""),y.length)return y.map(g)}},67024:function(Y,O,e){var M=e(38248),A=e(36424),o=e(7316),w=e(3400),_=e(81792),p=e(37164),s=e(63268),n=e(25788).version,a={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};Y.exports=function(r,i){var l,u,c,g;function f(F){return!(F in i)||w.validate(i[F],a[F])}if(i=i||{},w.isPlainObject(r)?(l=r.data||[],u=r.layout||{},c=r.config||{},g={}):(r=w.getGraphDiv(r),l=w.extendDeep([],r.data),u=w.extendDeep({},r.layout),c=r._context,g=r._fullLayout||{}),!f("width")&&i.width!==null||!f("height")&&i.height!==null)throw new Error("Height and width should be pixel values.");if(!f("format"))throw new Error("Export format is not "+w.join2(a.format.values,", "," or ")+".");var b={};function v(F,U){return w.coerce(i,b,a,F,U)}var d=v("format"),m=v("width"),x=v("height"),y=v("scale"),T=v("setBackground"),h=v("imageDataOnly"),E=document.createElement("div");E.style.position="absolute",E.style.left="-5000px",document.body.appendChild(E);var k=w.extendFlat({},u);m?k.width=m:i.width===null&&M(g.width)&&(k.width=g.width),x?k.height=x:i.height===null&&M(g.height)&&(k.height=g.height);var L=w.extendFlat({},c,{_exportedPlot:!0,staticPlot:!0,setBackground:T}),P=_.getRedrawFunc(E);function I(){return new Promise(function(F){setTimeout(F,_.getDelay(E._fullLayout))})}function z(){return new Promise(function(F,U){var R=p(E,d,y),j=E._fullLayout.width,Z=E._fullLayout.height;function B(){A.purge(E),document.body.removeChild(E)}if(d==="full-json"){var q=o.graphJson(E,!1,"keepdata","object",!0,!0);return q.version=n,q=JSON.stringify(q),B(),F(h?q:_.encodeJSON(q))}if(B(),d==="svg")return F(h?R:_.encodeSVG(R));var V=document.createElement("canvas");V.id=w.randstr(),s({format:d,width:j,height:Z,scale:y,canvas:V,svg:R,promise:!0}).then(F).catch(U)})}return new Promise(function(F,U){A.newPlot(E,l,k,L).then(P).then(I).then(z).then(function(R){F(function(j){return h?j.replace(_.IMAGE_URL_PREFIX,""):j}(R))}).catch(function(R){U(R)})})}},21480:function(Y,O,e){var M=e(3400),A=e(7316),o=e(73060),w=e(20556).dfltConfig,_=M.isPlainObject,p=Array.isArray,s=M.isArrayOrTypedArray;function n(f,b,v,d,m,x){x=x||[];for(var y=Object.keys(f),T=0;T<y.length;T++){var h=y[T];if(h!=="transforms"){var E=x.slice();E.push(h);var k=f[h],L=b[h],P=u(v,h),I=(P||{}).valType,z=I==="info_array",F=I==="colorscale",U=(P||{}).items;if(l(v,h))if(_(k)&&_(L)&&I!=="any")n(k,L,P,d,m,E);else if(z&&p(k)){k.length>L.length&&d.push(i("unused",m,E.concat(L.length)));var R,j,Z,B,q,V=L.length,ne=Array.isArray(U);if(ne&&(V=Math.min(V,U.length)),P.dimensions===2)for(j=0;j<V;j++)if(p(k[j])){k[j].length>L[j].length&&d.push(i("unused",m,E.concat(j,L[j].length)));var ee=L[j].length;for(R=0;R<(ne?Math.min(ee,U[j].length):ee);R++)Z=ne?U[j][R]:U,B=k[j][R],q=L[j][R],M.validate(B,Z)?q!==B&&q!==+B&&d.push(i("dynamic",m,E.concat(j,R),B,q)):d.push(i("value",m,E.concat(j,R),B))}else d.push(i("array",m,E.concat(j),k[j]));else for(j=0;j<V;j++)Z=ne?U[j]:U,B=k[j],q=L[j],M.validate(B,Z)?q!==B&&q!==+B&&d.push(i("dynamic",m,E.concat(j),B,q)):d.push(i("value",m,E.concat(j),B))}else if(P.items&&!z&&p(k)){var $,J,K=U[Object.keys(U)[0]],te=[];for($=0;$<L.length;$++){var ie=L[$]._index||$;if((J=E.slice()).push(ie),_(k[ie])&&_(L[$])){te.push(ie);var ae=k[ie],se=L[$];_(ae)&&ae.visible!==!1&&se.visible===!1?d.push(i("invisible",m,J)):n(ae,se,K,d,m,J)}}for($=0;$<k.length;$++)(J=E.slice()).push($),_(k[$])?te.indexOf($)===-1&&d.push(i("unused",m,J)):d.push(i("object",m,J,k[$]))}else!_(k)&&_(L)?d.push(i("object",m,E,k)):s(k)||!s(L)||z||F?h in b?M.validate(k,P)?P.valType==="enumerated"&&(P.coerceNumber&&k!==+L||k!==L)&&d.push(i("dynamic",m,E,k,L)):d.push(i("value",m,E,k)):d.push(i("unused",m,E,k)):d.push(i("array",m,E,k));else d.push(i("schema",m,E))}}return d}Y.exports=function(f,b){f===void 0&&(f=[]),b===void 0&&(b={});var v,d,m=o.get(),x=[],y={_context:M.extendFlat({},w)};p(f)?(y.data=M.extendDeep([],f),v=f):(y.data=[],v=[],x.push(i("array","data"))),_(b)?(y.layout=M.extendDeep({},b),d=b):(y.layout={},d={},arguments.length>1&&x.push(i("object","layout"))),A.supplyDefaults(y);for(var T=y._fullData,h=v.length,E=0;E<h;E++){var k=v[E],L=["data",E];if(_(k)){var P=T[E],I=P.type,z=m.traces[I].attributes;z.type={valType:"enumerated",values:[I]},P.visible===!1&&k.visible!==!1&&x.push(i("invisible",L)),n(k,P,z,x,L);var F=k.transforms,U=P.transforms;if(F){p(F)||x.push(i("array",L,["transforms"])),L.push("transforms");for(var R=0;R<F.length;R++){var j=["transforms",R],Z=F[R].type;if(_(F[R])){var B=m.transforms[Z]?m.transforms[Z].attributes:{};B.type={valType:"enumerated",values:Object.keys(m.transforms)},n(F[R],U[R],B,x,L,j)}else x.push(i("object",L,j))}}}else x.push(i("object",L))}var q=y._fullLayout,V=function(ne,ee){for(var $=ne.layout.layoutAttributes,J=0;J<ee.length;J++){var K=ee[J],te=ne.traces[K.type],ie=te.layoutAttributes;ie&&(K.subplot?M.extendFlat($[te.attributes.subplot.dflt],ie):M.extendFlat($,ie))}return $}(m,T);return n(d,q,V,x,"layout"),x.length===0?void 0:x};var a={object:function(f,b){return(f==="layout"&&b===""?"The layout argument":f[0]==="data"&&b===""?"Trace "+f[1]+" in the data argument":r(f)+"key "+b)+" must be linked to an object container"},array:function(f,b){return(f==="data"?"The data argument":r(f)+"key "+b)+" must be linked to an array container"},schema:function(f,b){return r(f)+"key "+b+" is not part of the schema"},unused:function(f,b,v){var d=_(v)?"container":"key";return r(f)+d+" "+b+" did not get coerced"},dynamic:function(f,b,v,d){return[r(f)+"key",b,"(set to '"+v+"')","got reset to","'"+d+"'","during defaults."].join(" ")},invisible:function(f,b){return(b?r(f)+"item "+b:"Trace "+f[1])+" got defaulted to be not visible"},value:function(f,b,v){return[r(f)+"key "+b,"is set to an invalid value ("+v+")"].join(" ")}};function r(f){return p(f)?"In data trace "+f[1]+", ":"In "+f+", "}function i(f,b,v,d,m){var x,y;v=v||"",p(b)?(x=b[0],y=b[1]):(x=b,y=null);var T=function(E){if(!p(E))return String(E);for(var k="",L=0;L<E.length;L++){var P=E[L];typeof P=="number"?k=k.substr(0,k.length-1)+"["+P+"]":k+=P,L<E.length-1&&(k+=".")}return k}(v),h=a[f](b,T,d,m);return M.log(h),{code:f,container:x,trace:y,path:v,astr:T,msg:h}}function l(f,b){var v=g(b),d=v.keyMinusId,m=v.id;return!!(d in f&&f[d]._isSubplotObj&&m)||b in f}function u(f,b){return b in f?f[b]:f[g(b).keyMinusId]}var c=M.counterRegex("([a-z]+)");function g(f){var b=f.match(c);return{keyMinusId:b&&b[1],id:b&&b[2]}}},85656:function(Y){Y.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},51272:function(Y,O,e){var M=e(3400),A=e(31780);Y.exports=function(o,w,_){var p,s,n=_.name,a=_.inclusionAttr||"visible",r=w[n],i=M.isArrayOrTypedArray(o[n])?o[n]:[],l=w[n]=[],u=A.arrayTemplater(w,n,a);for(p=0;p<i.length;p++){var c=i[p];M.isPlainObject(c)?s=u.newItem(c):(s=u.newItem({}))[a]=!1,s._index=p,s[a]!==!1&&_.handleItemDefaults(c,s,w,_),l.push(s)}var g=u.defaultItems();for(p=0;p<g.length;p++)(s=g[p])._index=l.length,_.handleItemDefaults({},s,w,_,{}),l.push(s);if(M.isArrayOrTypedArray(r)){var f=Math.min(r.length,l.length);for(p=0;p<f;p++)M.relinkPrivateKeys(l[p],r[p])}return l}},45464:function(Y,O,e){var M=e(25376),A=e(55756);Y.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:M({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:A.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},1220:function(Y,O,e){var M=e(38248),A=e(3400),o=A.dateTime2ms,w=A.incrementMonth,_=e(39032).ONEAVGMONTH;Y.exports=function(p,s,n,a){if(s.type!=="date")return{vals:a};var r=p[n+"periodalignment"];if(!r)return{vals:a};var i,l=p[n+"period"];if(M(l)){if((l=+l)<=0)return{vals:a}}else if(typeof l=="string"&&l.charAt(0)==="M"){var u=+l.substring(1);if(!(u>0&&Math.round(u)===u))return{vals:a};i=u}for(var c=s.calendar,g=r==="start",f=r==="end",b=p[n+"period0"],v=o(b,c)||0,d=[],m=[],x=[],y=a.length,T=0;T<y;T++){var h,E,k,L=a[T];if(i){for(h=Math.round((L-v)/(i*_)),k=w(v,i*h,c);k>L;)k=w(k,-i,c);for(;k<=L;)k=w(k,i,c);E=w(k,-i,c)}else{for(k=v+(h=Math.round((L-v)/l))*l;k>L;)k-=l;for(;k<=L;)k+=l;E=k-l}d[T]=g?E:f?k:(E+k)/2,m[T]=E,x[T]=k}return{vals:d,starts:m,ends:x}}},26720:function(Y){Y.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},19280:function(Y,O,e){var M=e(33428),A=e(38248),o=e(3400),w=e(39032).FP_SAFE,_=e(24040),p=e(43616),s=e(79811),n=s.getFromId,a=s.isLinked;function r(T,h){var E,k,L=[],P=T._fullLayout,I=l(P,h,0),z=l(P,h,1),F=c(T,h),U=F.min,R=F.max;if(U.length===0||R.length===0)return o.simpleMap(h.range,h.r2l);var j=U[0].val,Z=R[0].val;for(E=1;E<U.length&&j===Z;E++)j=Math.min(j,U[E].val);for(E=1;E<R.length&&j===Z;E++)Z=Math.max(Z,R[E].val);var B=h.autorange,q=B==="reversed"||B==="min reversed"||B==="max reversed";if(!q&&h.range){var V=o.simpleMap(h.range,h.r2l);q=V[1]<V[0]}h.autorange==="reversed"&&(h.autorange=!0);var ne,ee,$,J,K,te,ie=h.rangemode,ae=ie==="tozero",se=ie==="nonnegative",ce=h._length,de=ce/10,ge=0;for(E=0;E<U.length;E++)for(ne=U[E],k=0;k<R.length;k++)(te=(ee=R[k]).val-ne.val-i(h,ne.val,ee.val))>0&&((K=ce-I(ne)-z(ee))>de?te/K>ge&&($=ne,J=ee,ge=te/K):te/ce>ge&&($={val:ne.val,nopad:1},J={val:ee.val,nopad:1},ge=te/ce));if(j===Z){var ve=j-1,be=j+1;if(ae)if(j===0)L=[0,1];else{var me=(j>0?R:U).reduce(function(we,_e){return Math.max(we,z(_e))},0),Se=j/(1-Math.min(.5,me/ce));L=j>0?[0,Se]:[Se,0]}else L=se?[Math.max(0,ve),Math.max(1,be)]:[ve,be]}else ae?($.val>=0&&($={val:0,nopad:1}),J.val<=0&&(J={val:0,nopad:1})):se&&($.val-ge*I($)<0&&($={val:0,nopad:1}),J.val<=0&&(J={val:1,nopad:1})),ge=(J.val-$.val-i(h,ne.val,ee.val))/(ce-I($)-z(J)),L=[$.val-ge*I($),J.val+ge*z(J)];return L=y(L,h),h.limitRange&&h.limitRange(),q&&L.reverse(),o.simpleMap(L,h.l2r||Number)}function i(T,h,E){var k=0;if(T.rangebreaks)for(var L=T.locateBreaks(h,E),P=0;P<L.length;P++){var I=L[P];k+=I.max-I.min}return k}function l(T,h,E){var k=.05*h._length,L=h._anchorAxis||{};if((h.ticklabelposition||"").indexOf("inside")!==-1||(L.ticklabelposition||"").indexOf("inside")!==-1){var P=h.isReversed();if(!P){var I=o.simpleMap(h.range,h.r2l);P=I[1]<I[0]}P&&(E=!E)}var z=0;return a(T,h._id)||(z=function(F,U,R){var j=0,Z=U._id.charAt(0)==="x";for(var B in F._plots){var q=F._plots[B];if(U._id===q.xaxis._id||U._id===q.yaxis._id){var V=(Z?q.yaxis:q.xaxis)||{};if((V.ticklabelposition||"").indexOf("inside")!==-1&&(!R&&(V.side==="left"||V.side==="bottom")||R&&(V.side==="top"||V.side==="right"))){if(V._vals){var ne=o.deg2rad(V._tickAngles[V._id+"tick"]||0),ee=Math.abs(Math.cos(ne)),$=Math.abs(Math.sin(ne));if(!V._vals[0].bb){var J=V._id+"tick";V._selections[J].each(function(se){var ce=M.select(this);ce.select(".text-math-group").empty()&&(se.bb=p.bBox(ce.node()))})}for(var K=0;K<V._vals.length;K++){var te=V._vals[K].bb;if(te){var ie=2*u+te.width,ae=2*u+te.height;j=Math.max(j,Z?Math.max(ie*ee,ae*$):Math.max(ae*ee,ie*$))}}}V.ticks==="inside"&&V.ticklabelposition==="inside"&&(j+=V.ticklen||0)}}}return j}(T,h,E)),k=Math.max(z,k),h.constrain==="domain"&&h._inputDomain&&(k*=(h._inputDomain[1]-h._inputDomain[0])/(h.domain[1]-h.domain[0])),function(F){return F.nopad?0:F.pad+(F.extrapad?k:z)}}Y.exports={applyAutorangeOptions:y,getAutoRange:r,makePadFn:l,doAutoRange:function(T,h,E){if(h.setScale(),h.autorange){h.range=E?E.slice():r(T,h),h._r=h.range.slice(),h._rl=o.simpleMap(h._r,h.r2l);var k=h._input,L={};L[h._attr+".range"]=h.range,L[h._attr+".autorange"]=h.autorange,_.call("_storeDirectGUIEdit",T.layout,T._fullLayout._preGUI,L),k.range=h.range.slice(),k.autorange=h.autorange}var P=h._anchorAxis;if(P&&P.rangeslider){var I=P.rangeslider[h._name];I&&I.rangemode==="auto"&&(I.range=r(T,h)),P._input.rangeslider[h._name]=o.extendFlat({},I)}},findExtremes:function(T,h,E){E||(E={}),T._m||T.setScale();var k,L,P,I,z,F,U,R,j,Z=[],B=[],q=h.length,V=E.padded||!1,ne=E.tozero&&(T.type==="linear"||T.type==="-"),ee=T.type==="log",$=!1,J=E.vpadLinearized||!1;function K(ve){if(Array.isArray(ve))return $=!0,function(me){return Math.max(Number(ve[me]||0),0)};var be=Math.max(Number(ve||0),0);return function(){return be}}var te=K((T._m>0?E.ppadplus:E.ppadminus)||E.ppad||0),ie=K((T._m>0?E.ppadminus:E.ppadplus)||E.ppad||0),ae=K(E.vpadplus||E.vpad),se=K(E.vpadminus||E.vpad);if(!$){if(R=1/0,j=-1/0,ee)for(k=0;k<q;k++)(L=h[k])<R&&L>0&&(R=L),L>j&&L<w&&(j=L);else for(k=0;k<q;k++)(L=h[k])<R&&L>-w&&(R=L),L>j&&L<w&&(j=L);h=[R,j],q=2}var ce={tozero:ne,extrapad:V};function de(ve){P=h[ve],A(P)&&(F=te(ve),U=ie(ve),J?(I=T.c2l(P)-se(ve),z=T.c2l(P)+ae(ve)):(R=P-se(ve),j=P+ae(ve),ee&&R<j/10&&(R=j/10),I=T.c2l(R),z=T.c2l(j)),ne&&(I=Math.min(0,I),z=Math.max(0,z)),v(I)&&g(Z,I,U,ce),v(z)&&f(B,z,F,ce))}var ge=Math.min(6,q);for(k=0;k<ge;k++)de(k);for(k=q-1;k>=ge;k--)de(k);return{min:Z,max:B,opts:E}},concatExtremes:c};var u=3;function c(T,h,E){var k,L,P,I=h._id,z=T._fullData,F=T._fullLayout,U=[],R=[];function j(ne,ee){for(k=0;k<ee.length;k++){var $=ne[ee[k]],J=($._extremes||{})[I];if($.visible===!0&&J){for(L=0;L<J.min.length;L++)P=J.min[L],g(U,P.val,P.pad,{extrapad:P.extrapad});for(L=0;L<J.max.length;L++)P=J.max[L],f(R,P.val,P.pad,{extrapad:P.extrapad})}}}if(j(z,h._traceIndices),j(F.annotations||[],h._annIndices||[]),j(F.shapes||[],h._shapeIndices||[]),h._matchGroup&&!E){for(var Z in h._matchGroup)if(Z!==h._id){var B=n(T,Z),q=c(T,B,!0),V=h._length/B._length;for(L=0;L<q.min.length;L++)P=q.min[L],g(U,P.val,P.pad*V,{extrapad:P.extrapad});for(L=0;L<q.max.length;L++)P=q.max[L],f(R,P.val,P.pad*V,{extrapad:P.extrapad})}}return{min:U,max:R}}function g(T,h,E,k){b(T,h,E,k,d)}function f(T,h,E,k){b(T,h,E,k,m)}function b(T,h,E,k,L){for(var P=k.tozero,I=k.extrapad,z=!0,F=0;F<T.length&&z;F++){var U=T[F];if(L(U.val,h)&&U.pad>=E&&(U.extrapad||!I)){z=!1;break}L(h,U.val)&&U.pad<=E&&(I||!U.extrapad)&&(T.splice(F,1),F--)}if(z){var R=P&&h===0;T.push({val:h,pad:R?0:E,extrapad:!R&&I})}}function v(T){return A(T)&&Math.abs(T)<w}function d(T,h){return T<=h}function m(T,h){return T>=h}function x(T,h,E){return h===void 0||E===void 0||(h=T.d2l(h))<T.d2l(E)}function y(T,h){if(!h||!h.autorangeoptions)return T;var E=T[0],k=T[1],L=h.autorangeoptions.include;if(L!==void 0){var P=h.d2l(E),I=h.d2l(k);o.isArrayOrTypedArray(L)||(L=[L]);for(var z=0;z<L.length;z++){var F=h.d2l(L[z]);P>=F&&(P=F,E=F),I<=F&&(I=F,k=F)}}return E=function(U,R){var j=R.autorangeoptions;return j&&j.minallowed!==void 0&&x(R,j.minallowed,j.maxallowed)?j.minallowed:j&&j.clipmin!==void 0&&x(R,j.clipmin,j.clipmax)?Math.max(U,R.d2l(j.clipmin)):U}(E,h),k=function(U,R){var j=R.autorangeoptions;return j&&j.maxallowed!==void 0&&x(R,j.minallowed,j.maxallowed)?j.maxallowed:j&&j.clipmax!==void 0&&x(R,j.clipmin,j.clipmax)?Math.min(U,R.d2l(j.clipmax)):U}(k,h),[E,k]}},76808:function(Y){Y.exports=function(O,e,M){var A,o;if(M){var w=e==="reversed"||e==="min reversed"||e==="max reversed";A=M[w?1:0],o=M[w?0:1]}var _=O("autorangeoptions.minallowed",o===null?A:void 0),p=O("autorangeoptions.maxallowed",A===null?o:void 0);_===void 0&&O("autorangeoptions.clipmin"),p===void 0&&O("autorangeoptions.clipmax"),O("autorangeoptions.include")}},54460:function(Y,O,e){var M=e(33428),A=e(38248),o=e(7316),w=e(24040),_=e(3400),p=_.strTranslate,s=e(72736),n=e(81668),a=e(76308),r=e(43616),i=e(94724),l=e(98728),u=e(39032),c=u.ONEMAXYEAR,g=u.ONEAVGYEAR,f=u.ONEMINYEAR,b=u.ONEMAXQUARTER,v=u.ONEAVGQUARTER,d=u.ONEMINQUARTER,m=u.ONEMAXMONTH,x=u.ONEAVGMONTH,y=u.ONEMINMONTH,T=u.ONEWEEK,h=u.ONEDAY,E=h/2,k=u.ONEHOUR,L=u.ONEMIN,P=u.ONESEC,I=u.MINUS_SIGN,z=u.BADNUM,F={K:"zeroline"},U={K:"gridline",L:"path"},R={K:"minor-gridline",L:"path"},j={K:"tick",L:"path"},Z={K:"tick",L:"text"},B={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},q=e(84284),V=q.MID_SHIFT,ne=q.CAP_SHIFT,ee=q.LINE_SPACING,$=q.OPPOSITE_SIDE,J=Y.exports={};J.setConvert=e(78344);var K=e(52976),te=e(79811),ie=te.idSort,ae=te.isLinked;J.id2name=te.id2name,J.name2id=te.name2id,J.cleanId=te.cleanId,J.list=te.list,J.listIds=te.listIds,J.getFromId=te.getFromId,J.getFromTrace=te.getFromTrace;var se=e(19280);J.getAutoRange=se.getAutoRange,J.findExtremes=se.findExtremes;var ce=1e-4;function de(Fe){var Be=(Fe[1]-Fe[0])*ce;return[Fe[0]-Be,Fe[1]+Be]}J.coerceRef=function(Fe,Be,at,Ze,ht,vt){var mt=Ze.charAt(Ze.length-1),ft=at._fullLayout._subplots[mt+"axis"],Et=Ze+"ref",Tt={};return ht||(ht=ft[0]||(typeof vt=="string"?vt:vt[0])),vt||(vt=ht),ft=ft.concat(ft.map(function(xt){return xt+" domain"})),Tt[Et]={valType:"enumerated",values:ft.concat(vt?typeof vt=="string"?[vt]:vt:[]),dflt:ht},_.coerce(Fe,Be,Tt,Et)},J.getRefType=function(Fe){return Fe===void 0?Fe:Fe==="paper"?"paper":Fe==="pixel"?"pixel":/( domain)$/.test(Fe)?"domain":"range"},J.coercePosition=function(Fe,Be,at,Ze,ht,vt){var mt,ft;if(J.getRefType(Ze)!=="range")mt=_.ensureNumber,ft=at(ht,vt);else{var Et=J.getFromId(Be,Ze);ft=at(ht,vt=Et.fraction2r(vt)),mt=Et.cleanPos}Fe[ht]=mt(ft)},J.cleanPosition=function(Fe,Be,at){return(at==="paper"||at==="pixel"?_.ensureNumber:J.getFromId(Be,at).cleanPos)(Fe)},J.redrawComponents=function(Fe,Be){Be=Be||J.listIds(Fe);var at=Fe._fullLayout;function Ze(ht,vt,mt,ft){for(var Et=w.getComponentMethod(ht,vt),Tt={},xt=0;xt<Be.length;xt++)for(var Ct=at[J.id2name(Be[xt])][mt],Pt=0;Pt<Ct.length;Pt++){var Bt=Ct[Pt];if(!Tt[Bt]&&(Et(Fe,Bt),Tt[Bt]=1,ft))return}}Ze("annotations","drawOne","_annIndices"),Ze("shapes","drawOne","_shapeIndices"),Ze("images","draw","_imgIndices",!0),Ze("selections","drawOne","_selectionIndices")};var ge=J.getDataConversions=function(Fe,Be,at,Ze){var ht,vt=at==="x"||at==="y"||at==="z"?at:Ze;if(_.isArrayOrTypedArray(vt)){if(ht={type:K(Ze,void 0,{autotypenumbers:Fe._fullLayout.autotypenumbers}),_categories:[]},J.setConvert(ht),ht.type==="category")for(var mt=0;mt<Ze.length;mt++)ht.d2c(Ze[mt])}else ht=J.getFromTrace(Fe,Be,vt);return ht?{d2c:ht.d2c,c2d:ht.c2d}:vt==="ids"?{d2c:be,c2d:be}:{d2c:ve,c2d:ve}};function ve(Fe){return+Fe}function be(Fe){return String(Fe)}function me(Fe,Be){return Math.abs((Fe/Be+.5)%1-.5)<.001}function Se(Fe,Be){return Math.abs(Fe/Be-1)<.001}function we(Fe){return+Fe.substring(1)}function _e(Fe,Be){return Fe.rangebreaks&&(Be=Be.filter(function(at){return Fe.maskBreaks(at.x)!==z})),Be}function oe(Fe){var Be=Fe._mainAxis,at=[];if(Be._vals){for(var Ze=0;Ze<Be._vals.length;Ze++)if(!Be._vals[Ze].noTick){var ht=Be.l2p(Be._vals[Ze].x),vt=Fe.p2l(ht),mt=J.tickText(Fe,vt);Be._vals[Ze].minor&&(mt.minor=!0,mt.text=""),at.push(mt)}}return _e(Fe,at)}function le(Fe,Be){var at=de(_.simpleMap(Fe.range,Fe.r2l)),Ze=Math.min(at[0],at[1]),ht=Math.max(at[0],at[1]),vt=Fe.type==="category"?Fe.d2l_noadd:Fe.d2l;Fe.type==="log"&&String(Fe.dtick).charAt(0)!=="L"&&(Fe.dtick="L"+Math.pow(10,Math.floor(Math.min(Fe.range[0],Fe.range[1]))-1));for(var mt=[],ft=0;ft<=1;ft++)if((Be===void 0||!(Be&&ft||Be===!1&&!ft))&&(!ft||Fe.minor)){var Et=ft?Fe.minor.tickvals:Fe.tickvals,Tt=ft?[]:Fe.ticktext;if(Et){_.isArrayOrTypedArray(Tt)||(Tt=[]);for(var xt=0;xt<Et.length;xt++){var Ct=vt(Et[xt]);if(Ct>Ze&&Ct<ht){var Pt=Tt[xt]===void 0?J.tickText(Fe,Ct):ze(Fe,Ct,String(Tt[xt]));ft&&(Pt.minor=!0,Pt.text=""),mt.push(Pt)}}}}return _e(Fe,mt)}J.getDataToCoordFunc=function(Fe,Be,at,Ze){return ge(Fe,Be,at,Ze).d2c},J.counterLetter=function(Fe){var Be=Fe.charAt(0);return Be==="x"?"y":Be==="y"?"x":void 0},J.minDtick=function(Fe,Be,at,Ze){["log","category","multicategory"].indexOf(Fe.type)===-1&&Ze?Fe._minDtick===void 0?(Fe._minDtick=Be,Fe._forceTick0=at):Fe._minDtick&&((Fe._minDtick/Be+1e-6)%1<2e-6&&((at-Fe._forceTick0)/Be%1+1.000001)%1<2e-6?(Fe._minDtick=Be,Fe._forceTick0=at):((Be/Fe._minDtick+1e-6)%1>2e-6||((at-Fe._forceTick0)/Fe._minDtick%1+1.000001)%1>2e-6)&&(Fe._minDtick=0)):Fe._minDtick=0},J.saveRangeInitial=function(Fe,Be){for(var at=J.list(Fe,"",!0),Ze=!1,ht=0;ht<at.length;ht++){var vt=at[ht],mt=vt._rangeInitial0===void 0&&vt._rangeInitial1===void 0,ft=mt||vt.range[0]!==vt._rangeInitial0||vt.range[1]!==vt._rangeInitial1,Et=vt.autorange;(mt&&Et!==!0||Be&&ft)&&(vt._rangeInitial0=Et==="min"||Et==="max reversed"?void 0:vt.range[0],vt._rangeInitial1=Et==="max"||Et==="min reversed"?void 0:vt.range[1],vt._autorangeInitial=Et,Ze=!0)}return Ze},J.saveShowSpikeInitial=function(Fe,Be){for(var at=J.list(Fe,"",!0),Ze=!1,ht="on",vt=0;vt<at.length;vt++){var mt=at[vt],ft=mt._showSpikeInitial===void 0,Et=ft||mt.showspikes!==mt._showspikes;(ft||Be&&Et)&&(mt._showSpikeInitial=mt.showspikes,Ze=!0),ht!=="on"||mt.showspikes||(ht="off")}return Fe._fullLayout._cartesianSpikesEnabled=ht,Ze},J.autoBin=function(Fe,Be,at,Ze,ht,vt){var mt,ft=_.aggNums(Math.min,null,Fe),Et=_.aggNums(Math.max,null,Fe);if(Be.type==="category"||Be.type==="multicategory")return{start:ft-.5,end:Et+.5,size:Math.max(1,Math.round(vt)||1),_dataSpan:Et-ft};if(ht||(ht=Be.calendar),mt=Be.type==="log"?{type:"linear",range:[ft,Et]}:{type:Be.type,range:_.simpleMap([ft,Et],Be.c2r,0,ht),calendar:ht},J.setConvert(mt),vt=vt&&l.dtick(vt,mt.type))mt.dtick=vt,mt.tick0=l.tick0(void 0,mt.type,ht);else{var Tt;if(at)Tt=(Et-ft)/at;else{var xt=_.distinctVals(Fe),Ct=Math.pow(10,Math.floor(Math.log(xt.minDiff)/Math.LN10)),Pt=Ct*_.roundUp(xt.minDiff/Ct,[.9,1.9,4.9,9.9],!0);Tt=Math.max(Pt,2*_.stdev(Fe)/Math.pow(Fe.length,Ze?.25:.4)),A(Tt)||(Tt=1)}J.autoTicks(mt,Tt)}var Bt,Kt=mt.dtick,sn=J.tickIncrement(J.tickFirst(mt),Kt,"reverse",ht);if(typeof Kt=="number")sn=function(Gt,Yt,rn,Ln,Sn){var gn=0,$t=0,cn=0,an=0;function pn(Fn){return(1+100*(Fn-Gt)/rn.dtick)%100<2}for(var An=0;An<Yt.length;An++)Yt[An]%1==0?cn++:A(Yt[An])||an++,pn(Yt[An])&&gn++,pn(Yt[An]+rn.dtick/2)&&$t++;var Cn=Yt.length-an;if(cn===Cn&&rn.type!=="date")rn.dtick<1?Gt=Ln-.5*rn.dtick:(Gt-=.5)+rn.dtick<Ln&&(Gt+=rn.dtick);else if($t<.1*Cn&&(gn>.3*Cn||pn(Ln)||pn(Sn))){var Rn=rn.dtick/2;Gt+=Gt+Rn<Ln?Rn:-Rn}return Gt}(sn,Fe,mt,ft,Et),Bt=sn+(1+Math.floor((Et-sn)/Kt))*Kt;else for(mt.dtick.charAt(0)==="M"&&(sn=function(Gt,Yt,rn,Ln,Sn){var gn=_.findExactDates(Yt,Sn);if(gn.exactDays>.8){var $t=Number(rn.substr(1));gn.exactYears>.8&&$t%12==0?Gt=J.tickIncrement(Gt,"M6","reverse")+1.5*h:gn.exactMonths>.8?Gt=J.tickIncrement(Gt,"M1","reverse")+15.5*h:Gt-=E;var cn=J.tickIncrement(Gt,rn);if(cn<=Ln)return cn}return Gt}(sn,Fe,Kt,ft,ht)),Bt=sn;Bt<=Et;)Bt=J.tickIncrement(Bt,Kt,!1,ht);return{start:Be.c2r(sn,0,ht),end:Be.c2r(Bt,0,ht),size:Kt,_dataSpan:Et-ft}},J.prepMinorTicks=function(Fe,Be,at){if(!Be.minor.dtick){delete Fe.dtick;var Ze,ht=Be.dtick&&A(Be._tmin);if(ht){var vt=J.tickIncrement(Be._tmin,Be.dtick,!0);Ze=[Be._tmin,.99*vt+.01*Be._tmin]}else{var mt=_.simpleMap(Be.range,Be.r2l);Ze=[mt[0],.8*mt[0]+.2*mt[1]]}if(Fe.range=_.simpleMap(Ze,Be.l2r),Fe._isMinor=!0,J.prepTicks(Fe,at),ht){var ft=A(Be.dtick),Et=A(Fe.dtick),Tt=ft?Be.dtick:+Be.dtick.substring(1),xt=Et?Fe.dtick:+Fe.dtick.substring(1);ft&&Et?me(Tt,xt)?Tt===2*T&&xt===2*h&&(Fe.dtick=T):Tt===2*T&&xt===3*h?Fe.dtick=T:Tt!==T||(Be._input.minor||{}).nticks?Se(Tt/xt,2.5)?Fe.dtick=Tt/2:Fe.dtick=Tt:Fe.dtick=h:String(Be.dtick).charAt(0)==="M"?Et?Fe.dtick="M1":me(Tt,xt)?Tt>=12&&xt===2&&(Fe.dtick="M3"):Fe.dtick=Be.dtick:String(Fe.dtick).charAt(0)==="L"?String(Be.dtick).charAt(0)==="L"?me(Tt,xt)||(Fe.dtick=Se(Tt/xt,2.5)?Be.dtick/2:Be.dtick):Fe.dtick="D1":Fe.dtick==="D2"&&+Be.dtick>1&&(Fe.dtick=1)}Fe.range=Be.range}Be.minor._tick0Init===void 0&&(Fe.tick0=Be.tick0)},J.prepTicks=function(Fe,Be){var at=_.simpleMap(Fe.range,Fe.r2l,void 0,void 0,Be);if(Fe.tickmode==="auto"||!Fe.dtick){var Ze,ht=Fe.nticks;ht||(Fe.type==="category"||Fe.type==="multicategory"?(Ze=Fe.tickfont?_.bigFont(Fe.tickfont.size||12):15,ht=Fe._length/Ze):(Ze=Fe._id.charAt(0)==="y"?40:80,ht=_.constrain(Fe._length/Ze,4,9)+1),Fe._name==="radialaxis"&&(ht*=2)),Fe.minor&&Fe.minor.tickmode!=="array"||Fe.tickmode==="array"&&(ht*=100),Fe._roughDTick=Math.abs(at[1]-at[0])/ht,J.autoTicks(Fe,Fe._roughDTick),Fe._minDtick>0&&Fe.dtick<2*Fe._minDtick&&(Fe.dtick=Fe._minDtick,Fe.tick0=Fe.l2r(Fe._forceTick0))}Fe.ticklabelmode==="period"&&function(vt){var mt;function ft(){return!(A(vt.dtick)||vt.dtick.charAt(0)!=="M")}var Et=ft(),Tt=J.getTickFormat(vt);if(Tt){var xt=vt._dtickInit!==vt.dtick;/%[fLQsSMX]/.test(Tt)||(/%[HI]/.test(Tt)?(mt=k,xt&&!Et&&vt.dtick<k&&(vt.dtick=k)):/%p/.test(Tt)?(mt=E,xt&&!Et&&vt.dtick<E&&(vt.dtick=E)):/%[Aadejuwx]/.test(Tt)?(mt=h,xt&&!Et&&vt.dtick<h&&(vt.dtick=h)):/%[UVW]/.test(Tt)?(mt=T,xt&&!Et&&vt.dtick<T&&(vt.dtick=T)):/%[Bbm]/.test(Tt)?(mt=x,xt&&(Et?we(vt.dtick)<1:vt.dtick<y)&&(vt.dtick="M1")):/%[q]/.test(Tt)?(mt=v,xt&&(Et?we(vt.dtick)<3:vt.dtick<d)&&(vt.dtick="M3")):/%[Yy]/.test(Tt)&&(mt=g,xt&&(Et?we(vt.dtick)<12:vt.dtick<f)&&(vt.dtick="M12")))}(Et=ft())&&vt.tick0===vt._dowTick0&&(vt.tick0=vt._rawTick0),vt._definedDelta=mt}(Fe),Fe.tick0||(Fe.tick0=Fe.type==="date"?"2000-01-01":0),Fe.type==="date"&&Fe.dtick<.1&&(Fe.dtick=.1),ke(Fe)},J.calcTicks=function(Fe,Be){for(var at,Ze,ht=Fe.type,vt=Fe.calendar,mt=Fe.ticklabelstep,ft=Fe.ticklabelmode==="period",Et=_.simpleMap(Fe.range,Fe.r2l,void 0,void 0,Be),Tt=Et[1]<Et[0],xt=Math.min(Et[0],Et[1]),Ct=Math.max(Et[0],Et[1]),Pt=Math.max(1e3,Fe._length||0),Bt=[],Kt=[],sn=[],Gt=[],Yt=Fe.minor&&(Fe.minor.ticks||Fe.minor.showgrid),rn=1;rn>=(Yt?0:1);rn--){var Ln=!rn;rn?(Fe._dtickInit=Fe.dtick,Fe._tick0Init=Fe.tick0):(Fe.minor._dtickInit=Fe.minor.dtick,Fe.minor._tick0Init=Fe.minor.tick0);var Sn=rn?Fe:_.extendFlat({},Fe,Fe.minor);if(Ln?J.prepMinorTicks(Sn,Fe,Be):J.prepTicks(Sn,Be),Sn.tickmode!=="array")if(Sn.tickmode!=="sync"){var gn=de(Et),$t=gn[0],cn=gn[1],an=A(Sn.dtick),pn=ht==="log"&&!(an||Sn.dtick.charAt(0)==="L"),An=J.tickFirst(Sn,Be);if(rn){if(Fe._tmin=An,An<$t!==Tt)break;ht!=="category"&&ht!=="multicategory"||(cn=Tt?Math.max(-.5,cn):Math.min(Fe._categories.length-.5,cn))}var Cn,Rn,Fn=null,In=An;rn&&(an?Rn=Fe.dtick:ht==="date"?typeof Fe.dtick=="string"&&Fe.dtick.charAt(0)==="M"&&(Rn=x*Fe.dtick.substring(1)):Rn=Fe._roughDTick,Cn=Math.round((Fe.r2l(In)-Fe.r2l(Fe.tick0))/Rn)-1);var Hn=Sn.dtick;for(Sn.rangebreaks&&Sn._tick0Init!==Sn.tick0&&(In=Ne(In,Fe),Tt||(In=J.tickIncrement(In,Hn,!Tt,vt))),rn&&ft&&(In=J.tickIncrement(In,Hn,!Tt,vt),Cn--);Tt?In>=cn:In<=cn;In=J.tickIncrement(In,Hn,Tt,vt)){if(rn&&Cn++,Sn.rangebreaks&&!Tt){if(In<$t)continue;if(Sn.maskBreaks(In)===z&&Ne(In,Sn)>=Ct)break}if(sn.length>Pt||In===Fn)break;Fn=In;var Un={value:In};rn?(pn&&In!==(0|In)&&(Un.simpleLabel=!0),mt>1&&Cn%mt&&(Un.skipLabel=!0),sn.push(Un)):(Un.minor=!0,Gt.push(Un))}}else sn=[],Bt=oe(Fe);else rn?(sn=[],Bt=le(Fe,!Ln)):(Gt=[],Kt=le(Fe,!Ln))}if(Yt&&!(Fe.minor.ticks==="inside"&&Fe.ticks==="outside"||Fe.minor.ticks==="outside"&&Fe.ticks==="inside")){for(var ar=sn.map(function(Ot){return Ot.value}),ur=[],cr=0;cr<Gt.length;cr++){var er=Gt[cr],Tr=er.value;if(ar.indexOf(Tr)===-1){for(var Ht=!1,on=0;!Ht&&on<sn.length;on++)1e7+sn[on].value===1e7+Tr&&(Ht=!0);Ht||ur.push(er)}}Gt=ur}if(ft&&function(Ot,Jt,nn){for(var _n=0;_n<Ot.length;_n++){var xn=Ot[_n].value,kn=_n,hn=_n+1;_n<Ot.length-1?(kn=_n,hn=_n+1):_n>0?(kn=_n-1,hn=_n):(kn=_n,hn=_n);var en,tn=Ot[kn].value,un=Ot[hn].value,dn=Math.abs(un-tn),En=nn||dn,zn=0;En>=f?zn=dn>=f&&dn<=c?dn:g:nn===v&&En>=d?zn=dn>=d&&dn<=b?dn:v:En>=y?zn=dn>=y&&dn<=m?dn:x:nn===T&&En>=T?zn=T:En>=h?zn=h:nn===E&&En>=E?zn=E:nn===k&&En>=k&&(zn=k),zn>=dn&&(zn=dn,en=!0);var qn=xn+zn;if(Jt.rangebreaks&&zn>0){for(var Gn=0,$n=0;$n<84;$n++){var Xn=($n+.5)/84;Jt.maskBreaks(xn*(1-Xn)+Xn*qn)!==z&&Gn++}(zn*=Gn/84)||(Ot[_n].drop=!0),en&&dn>T&&(zn=dn)}(zn>0||_n===0)&&(Ot[_n].periodX=xn+zn/2)}}(sn,Fe,Fe._definedDelta),Fe.rangebreaks){var wn=Fe._id.charAt(0)==="y",mn=1;Fe.tickmode==="auto"&&(mn=Fe.tickfont?Fe.tickfont.size:12);var Pn=NaN;for(at=sn.length-1;at>-1;at--)if(sn[at].drop)sn.splice(at,1);else{sn[at].value=Ne(sn[at].value,Fe);var Wn=Fe.c2p(sn[at].value);(wn?Pn>Wn-mn:Pn<Wn+mn)?sn.splice(Tt?at+1:at,1):Pn=Wn}}Ye(Fe)&&Math.abs(Et[1]-Et[0])===360&&sn.pop(),Fe._tmax=(sn[sn.length-1]||{}).value,Fe._prevDateHead="",Fe._inCalcTicks=!0;var Bn,jn,rr=function(Ot){Ot.text="",Fe._prevDateHead=Ze};for(sn=sn.concat(Gt),at=0;at<sn.length;at++){var Xt=sn[at].minor,yn=sn[at].value;Xt?Kt.push({x:yn,minor:!0}):(Ze=Fe._prevDateHead,Bn=J.tickText(Fe,yn,!1,sn[at].simpleLabel),(jn=sn[at].periodX)!==void 0&&(Bn.periodX=jn,(jn>Ct||jn<xt)&&(jn>Ct&&(Bn.periodX=Ct),jn<xt&&(Bn.periodX=xt),rr(Bn))),sn[at].skipLabel&&rr(Bn),Bt.push(Bn))}return Bt=Bt.concat(Kt),Fe._inCalcTicks=!1,ft&&Bt.length&&(Bt[0].noTick=!0),Bt};var pe=[2,5,10],Ee=[1,2,3,6,12],Te=[1,2,5,10,15,30],Me=[1,2,3,7,14],Le=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ie=[-.301,0,.301,.699,1],he=[15,30,45,90,180];function xe(Fe,Be,at){return Be*_.roundUp(Fe/Be,at)}function ke(Fe){var Be=Fe.dtick;if(Fe._tickexponent=0,A(Be)||typeof Be=="string"||(Be=1),Fe.type!=="category"&&Fe.type!=="multicategory"||(Fe._tickround=null),Fe.type==="date"){var at=Fe.r2l(Fe.tick0),Ze=Fe.l2r(at).replace(/(^-|i)/g,""),ht=Ze.length;if(String(Be).charAt(0)==="M")ht>10||Ze.substr(5)!=="01-01"?Fe._tickround="d":Fe._tickround=+Be.substr(1)%12==0?"y":"m";else if(Be>=h&&ht<=10||Be>=15*h)Fe._tickround="d";else if(Be>=L&&ht<=16||Be>=k)Fe._tickround="M";else if(Be>=P&&ht<=19||Be>=L)Fe._tickround="S";else{var vt=Fe.l2r(at+Be).replace(/^-/,"").length;Fe._tickround=Math.max(ht,vt)-20,Fe._tickround<0&&(Fe._tickround=4)}}else if(A(Be)||Be.charAt(0)==="L"){var mt=Fe.range.map(Fe.r2d||Number);A(Be)||(Be=Number(Be.substr(1))),Fe._tickround=2-Math.floor(Math.log(Be)/Math.LN10+.01);var ft=Math.max(Math.abs(mt[0]),Math.abs(mt[1])),Et=Math.floor(Math.log(ft)/Math.LN10+.01),Tt=Fe.minexponent===void 0?3:Fe.minexponent;Math.abs(Et)>Tt&&(Oe(Fe.exponentformat)&&!Ve(Et)?Fe._tickexponent=3*Math.round((Et-1)/3):Fe._tickexponent=Et)}else Fe._tickround=null}function ze(Fe,Be,at){var Ze=Fe.tickfont||{};return{x:Be,dx:0,dy:0,text:at||"",fontSize:Ze.size,font:Ze.family,fontColor:Ze.color}}J.autoTicks=function(Fe,Be,at){var Ze;function ht(Ct){return Math.pow(Ct,Math.floor(Math.log(Be)/Math.LN10))}if(Fe.type==="date"){Fe.tick0=_.dateTick0(Fe.calendar,0);var vt=2*Be;if(vt>g)Be/=g,Ze=ht(10),Fe.dtick="M"+12*xe(Be,Ze,pe);else if(vt>x)Be/=x,Fe.dtick="M"+xe(Be,1,Ee);else if(vt>h){if(Fe.dtick=xe(Be,h,Fe._hasDayOfWeekBreaks?[1,2,7,14]:Me),!at){var mt=J.getTickFormat(Fe),ft=Fe.ticklabelmode==="period";ft&&(Fe._rawTick0=Fe.tick0),/%[uVW]/.test(mt)?Fe.tick0=_.dateTick0(Fe.calendar,2):Fe.tick0=_.dateTick0(Fe.calendar,1),ft&&(Fe._dowTick0=Fe.tick0)}}else vt>k?Fe.dtick=xe(Be,k,Ee):vt>L?Fe.dtick=xe(Be,L,Te):vt>P?Fe.dtick=xe(Be,P,Te):(Ze=ht(10),Fe.dtick=xe(Be,Ze,pe))}else if(Fe.type==="log"){Fe.tick0=0;var Et=_.simpleMap(Fe.range,Fe.r2l);if(Fe._isMinor&&(Be*=1.5),Be>.7)Fe.dtick=Math.ceil(Be);else if(Math.abs(Et[1]-Et[0])<1){var Tt=1.5*Math.abs((Et[1]-Et[0])/Be);Be=Math.abs(Math.pow(10,Et[1])-Math.pow(10,Et[0]))/Tt,Ze=ht(10),Fe.dtick="L"+xe(Be,Ze,pe)}else Fe.dtick=Be>.3?"D2":"D1"}else Fe.type==="category"||Fe.type==="multicategory"?(Fe.tick0=0,Fe.dtick=Math.ceil(Math.max(Be,1))):Ye(Fe)?(Fe.tick0=0,Ze=1,Fe.dtick=xe(Be,Ze,he)):(Fe.tick0=0,Ze=ht(10),Fe.dtick=xe(Be,Ze,pe));if(Fe.dtick===0&&(Fe.dtick=1),!A(Fe.dtick)&&typeof Fe.dtick!="string"){var xt=Fe.dtick;throw Fe.dtick=1,"ax.dtick error: "+String(xt)}},J.tickIncrement=function(Fe,Be,at,Ze){var ht=at?-1:1;if(A(Be))return _.increment(Fe,ht*Be);var vt=Be.charAt(0),mt=ht*Number(Be.substr(1));if(vt==="M")return _.incrementMonth(Fe,mt,Ze);if(vt==="L")return Math.log(Math.pow(10,Fe)+mt)/Math.LN10;if(vt==="D"){var ft=Be==="D2"?Ie:Le,Et=Fe+.01*ht,Tt=_.roundUp(_.mod(Et,1),ft,at);return Math.floor(Et)+Math.log(M.round(Math.pow(10,Tt),1))/Math.LN10}throw"unrecognized dtick "+String(Be)},J.tickFirst=function(Fe,Be){var at=Fe.r2l||Number,Ze=_.simpleMap(Fe.range,at,void 0,void 0,Be),ht=Ze[1]<Ze[0],vt=ht?Math.floor:Math.ceil,mt=de(Ze)[0],ft=Fe.dtick,Et=at(Fe.tick0);if(A(ft)){var Tt=vt((mt-Et)/ft)*ft+Et;return Fe.type!=="category"&&Fe.type!=="multicategory"||(Tt=_.constrain(Tt,0,Fe._categories.length-1)),Tt}var xt=ft.charAt(0),Ct=Number(ft.substr(1));if(xt==="M"){for(var Pt,Bt,Kt,sn=0,Gt=Et;sn<10;){if(((Pt=J.tickIncrement(Gt,ft,ht,Fe.calendar))-mt)*(Gt-mt)<=0)return ht?Math.min(Gt,Pt):Math.max(Gt,Pt);Bt=(mt-(Gt+Pt)/2)/(Pt-Gt),Kt=xt+(Math.abs(Math.round(Bt))||1)*Ct,Gt=J.tickIncrement(Gt,Kt,Bt<0?!ht:ht,Fe.calendar),sn++}return _.error("tickFirst did not converge",Fe),Gt}if(xt==="L")return Math.log(vt((Math.pow(10,mt)-Et)/Ct)*Ct+Et)/Math.LN10;if(xt==="D"){var Yt=ft==="D2"?Ie:Le,rn=_.roundUp(_.mod(mt,1),Yt,ht);return Math.floor(mt)+Math.log(M.round(Math.pow(10,rn),1))/Math.LN10}throw"unrecognized dtick "+String(ft)},J.tickText=function(Fe,Be,at,Ze){var ht,vt=ze(Fe,Be),mt=Fe.tickmode==="array",ft=at||mt,Et=Fe.type,Tt=Et==="category"?Fe.d2l_noadd:Fe.d2l;if(mt&&_.isArrayOrTypedArray(Fe.ticktext)){var xt=_.simpleMap(Fe.range,Fe.r2l),Ct=(Math.abs(xt[1]-xt[0])-(Fe._lBreaks||0))/1e4;for(ht=0;ht<Fe.ticktext.length&&!(Math.abs(Be-Tt(Fe.tickvals[ht]))<Ct);ht++);if(ht<Fe.ticktext.length)return vt.text=String(Fe.ticktext[ht]),vt}function Pt(Gt){if(Gt===void 0)return!0;if(at)return Gt==="none";var Yt={first:Fe._tmin,last:Fe._tmax}[Gt];return Gt!=="all"&&Be!==Yt}var Bt=at?"never":Fe.exponentformat!=="none"&&Pt(Fe.showexponent)?"hide":"";if(Et==="date"?function(Gt,Yt,rn,Ln){var Sn=Gt._tickround,gn=rn&&Gt.hoverformat||J.getTickFormat(Gt);(Ln=!gn&&Ln)&&(Sn=A(Sn)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Sn]);var $t,cn=_.formatDate(Yt.x,gn,Sn,Gt._dateFormat,Gt.calendar,Gt._extraFormat),an=cn.indexOf(`
`);if(an!==-1&&($t=cn.substr(an+1),cn=cn.substr(0,an)),Ln&&($t===void 0||cn!=="00:00:00"&&cn!=="00:00"?cn.length===8&&(cn=cn.replace(/:00$/,"")):(cn=$t,$t="")),$t)if(rn)Sn==="d"?cn+=", "+$t:cn=$t+(cn?", "+cn:"");else if(Gt._inCalcTicks&&Gt._prevDateHead===$t){var pn=We(Gt),An=Gt._trueSide||Gt.side;(!pn&&An==="top"||pn&&An==="bottom")&&(cn+="<br> ")}else Gt._prevDateHead=$t,cn+="<br>"+$t;Yt.text=cn}(Fe,vt,at,ft):Et==="log"?function(Gt,Yt,rn,Ln,Sn){var gn=Gt.dtick,$t=Yt.x,cn=Gt.tickformat,an=typeof gn=="string"&&gn.charAt(0);if(Sn==="never"&&(Sn=""),Ln&&an!=="L"&&(gn="L3",an="L"),cn||an==="L")Yt.text=qe(Math.pow(10,$t),Gt,Sn,Ln);else if(A(gn)||an==="D"&&_.mod($t+.01,1)<.1){var pn=Math.round($t),An=Math.abs(pn),Cn=Gt.exponentformat;Cn==="power"||Oe(Cn)&&Ve(pn)?(Yt.text=pn===0?1:pn===1?"10":"10<sup>"+(pn>1?"":I)+An+"</sup>",Yt.fontSize*=1.25):(Cn==="e"||Cn==="E")&&An>2?Yt.text="1"+Cn+(pn>0?"+":I)+An:(Yt.text=qe(Math.pow(10,$t),Gt,"","fakehover"),gn==="D1"&&Gt._id.charAt(0)==="y"&&(Yt.dy-=Yt.fontSize/6))}else{if(an!=="D")throw"unrecognized dtick "+String(gn);Yt.text=String(Math.round(Math.pow(10,_.mod($t,1)))),Yt.fontSize*=.75}if(Gt.dtick==="D1"){var Rn=String(Yt.text).charAt(0);Rn!=="0"&&Rn!=="1"||(Gt._id.charAt(0)==="y"?Yt.dx-=Yt.fontSize/4:(Yt.dy+=Yt.fontSize/2,Yt.dx+=(Gt.range[1]>Gt.range[0]?1:-1)*Yt.fontSize*($t<0?.5:.25)))}}(Fe,vt,0,ft,Bt):Et==="category"?function(Gt,Yt){var rn=Gt._categories[Math.round(Yt.x)];rn===void 0&&(rn=""),Yt.text=String(rn)}(Fe,vt):Et==="multicategory"?function(Gt,Yt,rn){var Ln=Math.round(Yt.x),Sn=Gt._categories[Ln]||[],gn=Sn[1]===void 0?"":String(Sn[1]),$t=Sn[0]===void 0?"":String(Sn[0]);rn?Yt.text=$t+" - "+gn:(Yt.text=gn,Yt.text2=$t)}(Fe,vt,at):Ye(Fe)?function(Gt,Yt,rn,Ln,Sn){if(Gt.thetaunit!=="radians"||rn)Yt.text=qe(Yt.x,Gt,Sn,Ln);else{var gn=Yt.x/180;if(gn===0)Yt.text="0";else{var $t=function(an){function pn(Fn,In){return Math.abs(Fn-In)<=1e-6}var An=function(Fn){for(var In=1;!pn(Math.round(Fn*In)/In,Fn);)In*=10;return In}(an),Cn=an*An,Rn=Math.abs(function Fn(In,Hn){return pn(Hn,0)?In:Fn(Hn,In%Hn)}(Cn,An));return[Math.round(Cn/Rn),Math.round(An/Rn)]}(gn);if($t[1]>=100)Yt.text=qe(_.deg2rad(Yt.x),Gt,Sn,Ln);else{var cn=Yt.x<0;$t[1]===1?$t[0]===1?Yt.text="":Yt.text=$t[0]+"":Yt.text=["<sup>",$t[0],"</sup>","","<sub>",$t[1],"</sub>",""].join(""),cn&&(Yt.text=I+Yt.text)}}}}(Fe,vt,at,ft,Bt):function(Gt,Yt,rn,Ln,Sn){Sn==="never"?Sn="":Gt.showexponent==="all"&&Math.abs(Yt.x/Gt.dtick)<1e-6&&(Sn="hide"),Yt.text=qe(Yt.x,Gt,Sn,Ln)}(Fe,vt,0,ft,Bt),Ze||(Fe.tickprefix&&!Pt(Fe.showtickprefix)&&(vt.text=Fe.tickprefix+vt.text),Fe.ticksuffix&&!Pt(Fe.showticksuffix)&&(vt.text+=Fe.ticksuffix)),Fe.labelalias&&Fe.labelalias.hasOwnProperty(vt.text)){var Kt=Fe.labelalias[vt.text];typeof Kt=="string"&&(vt.text=Kt)}if(Fe.tickson==="boundaries"||Fe.showdividers){var sn=function(Gt){var Yt=Fe.l2p(Gt);return Yt>=0&&Yt<=Fe._length?Gt:null};vt.xbnd=[sn(vt.x-.5),sn(vt.x+Fe.dtick-.5)]}return vt},J.hoverLabelText=function(Fe,Be,at){at&&(Fe=_.extendFlat({},Fe,{hoverformat:at}));var Ze=_.isArrayOrTypedArray(Be)?Be[0]:Be,ht=_.isArrayOrTypedArray(Be)?Be[1]:void 0;if(ht!==void 0&&ht!==Ze)return J.hoverLabelText(Fe,Ze,at)+" - "+J.hoverLabelText(Fe,ht,at);var vt=Fe.type==="log"&&Ze<=0,mt=J.tickText(Fe,Fe.c2l(vt?-Ze:Ze),"hover").text;return vt?Ze===0?"0":I+mt:mt};var Re=["f","p","n","","m","","k","M","G","T"];function Oe(Fe){return Fe==="SI"||Fe==="B"}function Ve(Fe){return Fe>14||Fe<-15}function qe(Fe,Be,at,Ze){var ht=Fe<0,vt=Be._tickround,mt=at||Be.exponentformat||"B",ft=Be._tickexponent,Et=J.getTickFormat(Be),Tt=Be.separatethousands;if(Ze){var xt={exponentformat:mt,minexponent:Be.minexponent,dtick:Be.showexponent==="none"?Be.dtick:A(Fe)&&Math.abs(Fe)||1,range:Be.showexponent==="none"?Be.range.map(Be.r2d):[0,Fe||1]};ke(xt),vt=(Number(xt._tickround)||0)+4,ft=xt._tickexponent,Be.hoverformat&&(Et=Be.hoverformat)}if(Et)return Be._numFormat(Et)(Fe).replace(/-/g,I);var Ct,Pt=Math.pow(10,-vt)/2;if(mt==="none"&&(ft=0),(Fe=Math.abs(Fe))<Pt)Fe="0",ht=!1;else{if(Fe+=Pt,ft&&(Fe*=Math.pow(10,-ft),vt+=ft),vt===0)Fe=String(Math.floor(Fe));else if(vt<0){Fe=(Fe=String(Math.round(Fe))).substr(0,Fe.length+vt);for(var Bt=vt;Bt<0;Bt++)Fe+="0"}else{var Kt=(Fe=String(Fe)).indexOf(".")+1;Kt&&(Fe=Fe.substr(0,Kt+vt).replace(/\.?0+$/,""))}Fe=_.numSeparate(Fe,Be._separators,Tt)}return ft&&mt!=="hide"&&(Oe(mt)&&Ve(ft)&&(mt="power"),Ct=ft<0?I+-ft:mt!=="power"?"+"+ft:String(ft),mt==="e"||mt==="E"?Fe+=mt+Ct:mt==="power"?Fe+="10<sup>"+Ct+"</sup>":mt==="B"&&ft===9?Fe+="B":Oe(mt)&&(Fe+=Re[ft/3+5])),ht?I+Fe:Fe}function Je(Fe,Be){if(Fe){var at=Object.keys(B).reduce(function(Ze,ht){return Be.indexOf(ht)!==-1&&B[ht].forEach(function(vt){Ze[vt]=1}),Ze},{});Object.keys(Fe).forEach(function(Ze){at[Ze]||(Ze.length===1?Fe[Ze]=0:delete Fe[Ze])})}}function ot(Fe,Be){for(var at=[],Ze={},ht=0;ht<Be.length;ht++){var vt=Be[ht];Ze[vt.text2]?Ze[vt.text2].push(vt.x):Ze[vt.text2]=[vt.x]}for(var mt in Ze)at.push(ze(Fe,_.interp(Ze[mt],.5),mt));return at}function rt(Fe){return Fe.periodX!==void 0?Fe.periodX:Fe.x}function dt(Fe){return[Fe.text,Fe.x,Fe.axInfo,Fe.font,Fe.fontSize,Fe.fontColor].join("_")}function _t(Fe){var Be=Fe.title.font.size,at=(Fe.title.text.match(s.BR_TAG_ALL)||[]).length;return Fe.title.hasOwnProperty("standoff")?at?Be*(ne+at*ee):Be*ne:at?Be*(at+1)*ee:Be}function yt(Fe,Be){var at=Fe.l2p(Be);return at>1&&at<Fe._length-1}function et(Fe){var Be=M.select(Fe),at=Be.select(".text-math-group");return at.empty()?Be.select("text"):at}function nt(Fe){return Fe._id+".automargin"}function At(Fe){return nt(Fe)+".mirror"}function Rt(Fe){return Fe._id+".rangeslider"}function Ft(Fe,Be){for(var at=0;at<Be.length;at++)Fe.indexOf(Be[at])===-1&&Fe.push(Be[at])}function It(Fe,Be,at){var Ze,ht,vt=[],mt=[],ft=Fe.layout;for(Ze=0;Ze<Be.length;Ze++)vt.push(J.getFromId(Fe,Be[Ze]));for(Ze=0;Ze<at.length;Ze++)mt.push(J.getFromId(Fe,at[Ze]));var Et=Object.keys(i),Tt=["anchor","domain","overlaying","position","side","tickangle","editType"],xt=["linear","log"];for(Ze=0;Ze<Et.length;Ze++){var Ct=Et[Ze],Pt=vt[0][Ct],Bt=mt[0][Ct],Kt=!0,sn=!1,Gt=!1;if(Ct.charAt(0)!=="_"&&typeof Pt!="function"&&Tt.indexOf(Ct)===-1){for(ht=1;ht<vt.length&&Kt;ht++){var Yt=vt[ht][Ct];Ct==="type"&&xt.indexOf(Pt)!==-1&&xt.indexOf(Yt)!==-1&&Pt!==Yt?sn=!0:Yt!==Pt&&(Kt=!1)}for(ht=1;ht<mt.length&&Kt;ht++){var rn=mt[ht][Ct];Ct==="type"&&xt.indexOf(Bt)!==-1&&xt.indexOf(rn)!==-1&&Bt!==rn?Gt=!0:mt[ht][Ct]!==Bt&&(Kt=!1)}Kt&&(sn&&(ft[vt[0]._name].type="linear"),Gt&&(ft[mt[0]._name].type="linear"),Ge(ft,Ct,vt,mt,Fe._fullLayout._dfltTitle))}}for(Ze=0;Ze<Fe._fullLayout.annotations.length;Ze++){var Ln=Fe._fullLayout.annotations[Ze];Be.indexOf(Ln.xref)!==-1&&at.indexOf(Ln.yref)!==-1&&_.swapAttrs(ft.annotations[Ze],["?"])}}function Ge(Fe,Be,at,Ze,ht){var vt,mt=_.nestedProperty,ft=mt(Fe[at[0]._name],Be).get(),Et=mt(Fe[Ze[0]._name],Be).get();for(Be==="title"&&(ft&&ft.text===ht.x&&(ft.text=ht.y),Et&&Et.text===ht.y&&(Et.text=ht.x)),vt=0;vt<at.length;vt++)mt(Fe,at[vt]._name+"."+Be).set(Et);for(vt=0;vt<Ze.length;vt++)mt(Fe,Ze[vt]._name+"."+Be).set(ft)}function Ye(Fe){return Fe._id==="angularaxis"}function Ne(Fe,Be){for(var at=Be._rangebreaks.length,Ze=0;Ze<at;Ze++){var ht=Be._rangebreaks[Ze];if(Fe>=ht.min&&Fe<ht.max)return ht.max}return Fe}function We(Fe){return(Fe.ticklabelposition||"").indexOf("inside")!==-1}function st(Fe,Be){We(Fe._anchorAxis||{})&&Fe._hideCounterAxisInsideTickLabels&&Fe._hideCounterAxisInsideTickLabels(Be)}function it(Fe,Be,at,Ze){var ht,vt=Fe.anchor==="free"||Fe.overlaying!==void 0&&Fe.overlaying!==!1?Fe.overlaying:Fe._id;ht=Ze?Fe.side==="right"?Be:-Be:Be,vt in at||(at[vt]={}),Fe.side in at[vt]||(at[vt][Fe.side]=0),at[vt][Fe.side]+=ht}J.getTickFormat=function(Fe){var Be,at,Ze,ht,vt,mt,ft,Et;function Tt(Pt){return typeof Pt!="string"?Pt:Number(Pt.replace("M",""))*x}function xt(Pt,Bt){var Kt=["L","D"];if(typeof Pt==typeof Bt){if(typeof Pt=="number")return Pt-Bt;var sn=Kt.indexOf(Pt.charAt(0)),Gt=Kt.indexOf(Bt.charAt(0));return sn===Gt?Number(Pt.replace(/(L|D)/g,""))-Number(Bt.replace(/(L|D)/g,"")):sn-Gt}return typeof Pt=="number"?1:-1}function Ct(Pt,Bt){var Kt=Bt[0]===null,sn=Bt[1]===null,Gt=xt(Pt,Bt[0])>=0,Yt=xt(Pt,Bt[1])<=0;return(Kt||Gt)&&(sn||Yt)}if(Fe.tickformatstops&&Fe.tickformatstops.length>0)switch(Fe.type){case"date":case"linear":for(Be=0;Be<Fe.tickformatstops.length;Be++)if((Ze=Fe.tickformatstops[Be]).enabled&&(ht=Fe.dtick,vt=Ze.dtickrange,mt=void 0,ft=void 0,Et=void 0,mt=Tt||function(Pt){return Pt},ft=vt[0],Et=vt[1],(!ft&&typeof ft!="number"||mt(ft)<=mt(ht))&&(!Et&&typeof Et!="number"||mt(Et)>=mt(ht)))){at=Ze;break}break;case"log":for(Be=0;Be<Fe.tickformatstops.length;Be++)if((Ze=Fe.tickformatstops[Be]).enabled&&Ct(Fe.dtick,Ze.dtickrange)){at=Ze;break}}return at?at.value:Fe.tickformat},J.getSubplots=function(Fe,Be){var at=Fe._fullLayout._subplots,Ze=at.cartesian.concat(at.gl2d||[]),ht=Be?J.findSubplotsWithAxis(Ze,Be):Ze;return ht.sort(function(vt,mt){var ft=vt.substr(1).split("y"),Et=mt.substr(1).split("y");return ft[0]===Et[0]?+ft[1]-+Et[1]:+ft[0]-+Et[0]}),ht},J.findSubplotsWithAxis=function(Fe,Be){for(var at=new RegExp(Be._id.charAt(0)==="x"?"^"+Be._id+"y":Be._id+"$"),Ze=[],ht=0;ht<Fe.length;ht++){var vt=Fe[ht];at.test(vt)&&Ze.push(vt)}return Ze},J.makeClipPaths=function(Fe){var Be=Fe._fullLayout;if(!Be._hasOnlyLargeSploms){var at,Ze,ht={_offset:0,_length:Be.width,_id:""},vt={_offset:0,_length:Be.height,_id:""},mt=J.list(Fe,"x",!0),ft=J.list(Fe,"y",!0),Et=[];for(at=0;at<mt.length;at++)for(Et.push({x:mt[at],y:vt}),Ze=0;Ze<ft.length;Ze++)at===0&&Et.push({x:ht,y:ft[Ze]}),Et.push({x:mt[at],y:ft[Ze]});var Tt=Be._clips.selectAll(".axesclip").data(Et,function(xt){return xt.x._id+xt.y._id});Tt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(xt){return"clip"+Be._uid+xt.x._id+xt.y._id}).append("rect"),Tt.exit().remove(),Tt.each(function(xt){M.select(this).select("rect").attr({x:xt.x._offset||0,y:xt.y._offset||0,width:xt.x._length||1,height:xt.y._length||1})})}},J.draw=function(Fe,Be,at){var Ze=Fe._fullLayout;Be==="redraw"&&Ze._paper.selectAll("g.subplot").each(function(ft){var Et=ft[0],Tt=Ze._plots[Et];if(Tt){var xt=Tt.xaxis,Ct=Tt.yaxis;Tt.xaxislayer.selectAll("."+xt._id+"tick").remove(),Tt.yaxislayer.selectAll("."+Ct._id+"tick").remove(),Tt.xaxislayer.selectAll("."+xt._id+"tick2").remove(),Tt.yaxislayer.selectAll("."+Ct._id+"tick2").remove(),Tt.xaxislayer.selectAll("."+xt._id+"divider").remove(),Tt.yaxislayer.selectAll("."+Ct._id+"divider").remove(),Tt.minorGridlayer&&Tt.minorGridlayer.selectAll("path").remove(),Tt.gridlayer&&Tt.gridlayer.selectAll("path").remove(),Tt.zerolinelayer&&Tt.zerolinelayer.selectAll("path").remove(),Ze._infolayer.select(".g-"+xt._id+"title").remove(),Ze._infolayer.select(".g-"+Ct._id+"title").remove()}});var ht=Be&&Be!=="redraw"?Be:J.listIds(Fe),vt=J.list(Fe).filter(function(ft){return ft.autoshift}).map(function(ft){return ft.overlaying});ht.map(function(ft){var Et=J.getFromId(Fe,ft);if(Et.tickmode==="sync"&&Et.overlaying){var Tt=ht.findIndex(function(xt){return xt===Et.overlaying});Tt>=0&&ht.unshift(ht.splice(Tt,1).shift())}});var mt={false:{left:0,right:0}};return _.syncOrAsync(ht.map(function(ft){return function(){if(ft){var Et=J.getFromId(Fe,ft);at||(at={}),at.axShifts=mt,at.overlayingShiftedAx=vt;var Tt=J.drawOne(Fe,Et,at);return Et._shiftPusher&&it(Et,Et._fullDepth||0,mt,!0),Et._r=Et.range.slice(),Et._rl=_.simpleMap(Et._r,Et.r2l),Tt}}}))},J.drawOne=function(Fe,Be,at){var Ze,ht,vt,mt=(at=at||{}).axShifts||{},ft=at.overlayingShiftedAx||[];Be.setScale();var Et=Fe._fullLayout,Tt=Be._id,xt=Tt.charAt(0),Ct=J.counterLetter(Tt),Pt=Et._plots[Be._mainSubplot];if(Pt){if(Be._shiftPusher=Be.autoshift||ft.indexOf(Be._id)!==-1||ft.indexOf(Be.overlaying)!==-1,Be._shiftPusher&Be.anchor==="free"){var Bt=Be.linewidth/2||0;Be.ticks==="inside"&&(Bt+=Be.ticklen),it(Be,Bt,mt,!0),it(Be,Be.shift||0,mt,!1)}at.skipTitle===!0&&Be._shift!==void 0||(Be._shift=function(hn,en){return hn.autoshift?en[hn.overlaying][hn.side]:hn.shift||0}(Be,mt));var Kt=Pt[xt+"axislayer"],sn=Be._mainLinePosition,Gt=sn+=Be._shift,Yt=Be._mainMirrorPosition,rn=Be._vals=J.calcTicks(Be),Ln=[Be.mirror,Gt,Yt].join("_");for(Ze=0;Ze<rn.length;Ze++)rn[Ze].axInfo=Ln;Be._selections={},Be._tickAngles&&(Be._prevTickAngles=Be._tickAngles),Be._tickAngles={},Be._depth=null;var Sn={};if(Be.visible){var gn,$t,cn=J.makeTransTickFn(Be),an=J.makeTransTickLabelFn(Be),pn=Be.ticks==="inside",An=Be.ticks==="outside";if(Be.tickson==="boundaries"){var Cn=function(hn,en){var tn,un=[],dn=function(En,zn){var qn=En.xbnd?En.xbnd[zn]:En.x;qn!==null&&un.push(_.extendFlat({},En,{x:qn}))};if(en.length){for(tn=0;tn<en.length;tn++)dn(en[tn],0);dn(en[tn-1],1)}return un}(0,rn);$t=J.clipEnds(Be,Cn),gn=pn?$t:Cn}else $t=J.clipEnds(Be,rn),gn=pn&&Be.ticklabelmode!=="period"?$t:rn;var Rn,Fn=Be._gridVals=$t,In=function(hn,en){var tn,un,dn=[],En=en.length&&en[en.length-1].x<en[0].x,zn=function(Gn,$n){var Xn=Gn.xbnd[$n];Xn!==null&&dn.push(_.extendFlat({},Gn,{x:Xn}))};if(hn.showdividers&&en.length){for(tn=0;tn<en.length;tn++){var qn=en[tn];qn.text2!==un&&zn(qn,En?1:0),un=qn.text2}zn(en[tn-1],En?0:1)}return dn}(Be,rn);if(!Et._hasOnlyLargeSploms){var Hn=Be._subplotsWith,Un={};for(Ze=0;Ze<Hn.length;Ze++){ht=Hn[Ze];var ar=(vt=Et._plots[ht])[Ct+"axis"],ur=ar._mainAxis._id;if(!Un[ur]){Un[ur]=1;var cr=xt==="x"?"M0,"+ar._offset+"v"+ar._length:"M"+ar._offset+",0h"+ar._length;J.drawGrid(Fe,Be,{vals:Fn,counterAxis:ar,layer:vt.gridlayer.select("."+Tt),minorLayer:vt.minorGridlayer.select("."+Tt),path:cr,transFn:cn}),J.drawZeroLine(Fe,Be,{counterAxis:ar,layer:vt.zerolinelayer,path:cr,transFn:cn})}}}var er=J.getTickSigns(Be),Tr=J.getTickSigns(Be,"minor");if(Be.ticks||Be.minor&&Be.minor.ticks){var Ht,on,wn,mn,Pn=J.makeTickPath(Be,Gt,er[2]),Wn=J.makeTickPath(Be,Gt,Tr[2],{minor:!0});if(Be._anchorAxis&&Be.mirror&&Be.mirror!==!0?(Ht=J.makeTickPath(Be,Yt,er[3]),on=J.makeTickPath(Be,Yt,Tr[3],{minor:!0}),wn=Pn+Ht,mn=Wn+on):(Ht="",on="",wn=Pn,mn=Wn),Be.showdividers&&An&&Be.tickson==="boundaries"){var Bn={};for(Ze=0;Ze<In.length;Ze++)Bn[In[Ze].x]=1;Rn=function(hn){return Bn[hn.x]?Ht:wn}}else Rn=function(hn){return hn.minor?mn:wn}}if(J.drawTicks(Fe,Be,{vals:gn,layer:Kt,path:Rn,transFn:cn}),Be.mirror==="allticks"){var jn=Object.keys(Be._linepositions||{});for(Ze=0;Ze<jn.length;Ze++){ht=jn[Ze],vt=Et._plots[ht];var rr=Be._linepositions[ht]||[],Xt=rr[0],yn=rr[1],Ot=rr[2],Jt=J.makeTickPath(Be,Xt,Ot?er[0]:Tr[0],{minor:Ot})+J.makeTickPath(Be,yn,Ot?er[1]:Tr[1],{minor:Ot});J.drawTicks(Fe,Be,{vals:gn,layer:vt[xt+"axislayer"],path:Jt,transFn:cn})}}var nn=[];if(nn.push(function(){return J.drawLabels(Fe,Be,{vals:rn,layer:Kt,plotinfo:vt,transFn:an,labelFns:J.makeLabelFns(Be,Gt)})}),Be.type==="multicategory"){var _n={x:2,y:10}[xt];nn.push(function(){var hn={x:"height",y:"width"}[xt],en=kn()[hn]+_n+(Be._tickAngles[Tt+"tick"]?Be.tickfont.size*ee:0);return J.drawLabels(Fe,Be,{vals:ot(Be,rn),layer:Kt,cls:Tt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:cn,labelFns:J.makeLabelFns(Be,Gt+en*er[4])})}),nn.push(function(){return Be._depth=er[4]*(kn("tick2")[Be.side]-Gt),function(hn,en,tn){var un=en._id+"divider",dn=tn.vals,En=tn.layer.selectAll("path."+un).data(dn,dt);En.exit().remove(),En.enter().insert("path",":first-child").classed(un,1).classed("crisp",1).call(a.stroke,en.dividercolor).style("stroke-width",r.crispRound(hn,en.dividerwidth,1)+"px"),En.attr("transform",tn.transFn).attr("d",tn.path)}(Fe,Be,{vals:In,layer:Kt,path:J.makeTickPath(Be,Gt,er[4],{len:Be._depth}),transFn:cn})})}else Be.title.hasOwnProperty("standoff")&&nn.push(function(){Be._depth=er[4]*(kn()[Be.side]-Gt)});var xn=w.getComponentMethod("rangeslider","isVisible")(Be);return at.skipTitle||xn&&Be.side==="bottom"||nn.push(function(){return function(hn,en){var tn,un=hn._fullLayout,dn=en._id,En=dn.charAt(0),zn=en.title.font.size;if(en.title.hasOwnProperty("standoff"))tn=en._depth+en.title.standoff+_t(en);else{var qn=We(en);if(en.type==="multicategory")tn=en._depth;else{var Gn=1.5*zn;qn&&(Gn=.5*zn,en.ticks==="outside"&&(Gn+=en.ticklen)),tn=10+Gn+(en.linewidth?en.linewidth-1:0)}qn||(tn+=En==="x"?en.side==="top"?zn*(en.showticklabels?1:0):zn*(en.showticklabels?1.5:.5):en.side==="right"?zn*(en.showticklabels?1:.5):zn*(en.showticklabels?.5:0))}var $n,Xn,or,tr,Qn=J.getPxPosition(hn,en);if(En==="x"?(Xn=en._offset+en._length/2,or=en.side==="top"?Qn-tn:Qn+tn):(or=en._offset+en._length/2,Xn=en.side==="right"?Qn+tn:Qn-tn,$n={rotate:"-90",offset:0}),en.type!=="multicategory"){var mr=en._selections[en._id+"tick"];if(tr={selection:mr,side:en.side},mr&&mr.node()&&mr.node().parentNode){var fr=r.getTranslate(mr.node().parentNode);tr.offsetLeft=fr.x,tr.offsetTop=fr.y}en.title.hasOwnProperty("standoff")&&(tr.pad=0)}return en._titleStandoff=tn,n.draw(hn,dn+"title",{propContainer:en,propName:en._name+".title.text",placeholder:un._dfltTitle[En],avoid:tr,transform:$n,attributes:{x:Xn,y:or,"text-anchor":"middle"}})}(Fe,Be)}),nn.push(function(){var hn,en,tn,un,dn=Be.side.charAt(0),En=$[Be.side].charAt(0),zn=J.getPxPosition(Fe,Be),qn=An?Be.ticklen:0;(Be.automargin||xn||Be._shiftPusher)&&(Be.type==="multicategory"?hn=kn("tick2"):(hn=kn(),xt==="x"&&dn==="b"&&(Be._depth=Math.max(hn.width>0?hn.bottom-zn:0,qn))));var Gn=0,$n=0;if(Be._shiftPusher&&(Gn=Math.max(qn,hn.height>0?dn==="l"?zn-hn.left:hn.right-zn:0),Be.title.text!==Et._dfltTitle[xt]&&($n=(Be._titleStandoff||0)+(Be._titleScoot||0),dn==="l"&&($n+=_t(Be))),Be._fullDepth=Math.max(Gn,$n)),Be.automargin){en={x:0,y:0,r:0,l:0,t:0,b:0};var Xn=[0,1],or=typeof Be._shift=="number"?Be._shift:0;if(xt==="x"){if(dn==="b"?en[dn]=Be._depth:(en[dn]=Be._depth=Math.max(hn.width>0?zn-hn.top:0,qn),Xn.reverse()),hn.width>0){var tr=hn.right-(Be._offset+Be._length);tr>0&&(en.xr=1,en.r=tr);var Qn=Be._offset-hn.left;Qn>0&&(en.xl=0,en.l=Qn)}}else if(dn==="l"?(Be._depth=Math.max(hn.height>0?zn-hn.left:0,qn),en[dn]=Be._depth-or):(Be._depth=Math.max(hn.height>0?hn.right-zn:0,qn),en[dn]=Be._depth+or,Xn.reverse()),hn.height>0){var mr=hn.bottom-(Be._offset+Be._length);mr>0&&(en.yb=0,en.b=mr);var fr=Be._offset-hn.top;fr>0&&(en.yt=1,en.t=fr)}en[Ct]=Be.anchor==="free"?Be.position:Be._anchorAxis.domain[Xn[0]],Be.title.text!==Et._dfltTitle[xt]&&(en[dn]+=_t(Be)+(Be.title.standoff||0)),Be.mirror&&Be.anchor!=="free"&&((tn={x:0,y:0,r:0,l:0,t:0,b:0})[En]=Be.linewidth,Be.mirror&&Be.mirror!==!0&&(tn[En]+=qn),Be.mirror===!0||Be.mirror==="ticks"?tn[Ct]=Be._anchorAxis.domain[Xn[1]]:Be.mirror!=="all"&&Be.mirror!=="allticks"||(tn[Ct]=[Be._counterDomainMin,Be._counterDomainMax][Xn[1]]))}xn&&(un=w.getComponentMethod("rangeslider","autoMarginOpts")(Fe,Be)),typeof Be.automargin=="string"&&(Je(en,Be.automargin),Je(tn,Be.automargin)),o.autoMargin(Fe,nt(Be),en),o.autoMargin(Fe,At(Be),tn),o.autoMargin(Fe,Rt(Be),un)}),_.syncOrAsync(nn)}}function kn(hn){var en=Tt+(hn||"tick");return Sn[en]||(Sn[en]=function(tn,un){var dn,En,zn,qn;return tn._selections[un].size()?(dn=1/0,En=-1/0,zn=1/0,qn=-1/0,tn._selections[un].each(function(){var Gn=et(this),$n=r.bBox(Gn.node().parentNode);dn=Math.min(dn,$n.top),En=Math.max(En,$n.bottom),zn=Math.min(zn,$n.left),qn=Math.max(qn,$n.right)})):(dn=0,En=0,zn=0,qn=0),{top:dn,bottom:En,left:zn,right:qn,height:En-dn,width:qn-zn}}(Be,en)),Sn[en]}},J.getTickSigns=function(Fe,Be){var at=Fe._id.charAt(0),Ze={x:"top",y:"right"}[at],ht=Fe.side===Ze?1:-1,vt=[-1,1,ht,-ht];return(Be?(Fe.minor||{}).ticks:Fe.ticks)!=="inside"==(at==="x")&&(vt=vt.map(function(mt){return-mt})),Fe.side&&vt.push({l:-1,t:-1,r:1,b:1}[Fe.side.charAt(0)]),vt},J.makeTransTickFn=function(Fe){return Fe._id.charAt(0)==="x"?function(Be){return p(Fe._offset+Fe.l2p(Be.x),0)}:function(Be){return p(0,Fe._offset+Fe.l2p(Be.x))}},J.makeTransTickLabelFn=function(Fe){var Be=function(ht){var vt=ht.ticklabelposition||"",mt=function(Yt){return vt.indexOf(Yt)!==-1},ft=mt("top"),Et=mt("left"),Tt=mt("right"),xt=mt("bottom"),Ct=mt("inside"),Pt=xt||Et||ft||Tt;if(!Pt&&!Ct)return[0,0];var Bt=ht.side,Kt=Pt?(ht.tickwidth||0)/2:0,sn=3,Gt=ht.tickfont?ht.tickfont.size:12;return(xt||ft)&&(Kt+=Gt*ne,sn+=(ht.linewidth||0)/2),(Et||Tt)&&(Kt+=(ht.linewidth||0)/2,sn+=3),Ct&&Bt==="top"&&(sn-=Gt*(1-ne)),(Et||ft)&&(Kt=-Kt),Bt!=="bottom"&&Bt!=="right"||(sn=-sn),[Pt?Kt:0,Ct?sn:0]}(Fe),at=Be[0],Ze=Be[1];return Fe._id.charAt(0)==="x"?function(ht){return p(at+Fe._offset+Fe.l2p(rt(ht)),Ze)}:function(ht){return p(Ze,at+Fe._offset+Fe.l2p(rt(ht)))}},J.makeTickPath=function(Fe,Be,at,Ze){Ze||(Ze={});var ht=Ze.minor;if(ht&&!Fe.minor)return"";var vt=Ze.len!==void 0?Ze.len:ht?Fe.minor.ticklen:Fe.ticklen,mt=Fe._id.charAt(0),ft=(Fe.linewidth||1)/2;return mt==="x"?"M0,"+(Be+ft*at)+"v"+vt*at:"M"+(Be+ft*at)+",0h"+vt*at},J.makeLabelFns=function(Fe,Be,at){var Ze=Fe.ticklabelposition||"",ht=function(Cn){return Ze.indexOf(Cn)!==-1},vt=ht("top"),mt=ht("left"),ft=ht("right"),Et=ht("bottom")||mt||vt||ft,Tt=ht("inside"),xt=Ze==="inside"&&Fe.ticks==="inside"||!Tt&&Fe.ticks==="outside"&&Fe.tickson!=="boundaries",Ct=0,Pt=0,Bt=xt?Fe.ticklen:0;if(Tt?Bt*=-1:Et&&(Bt=0),xt&&(Ct+=Bt,at)){var Kt=_.deg2rad(at);Ct=Bt*Math.cos(Kt)+1,Pt=Bt*Math.sin(Kt)}Fe.showticklabels&&(xt||Fe.showline)&&(Ct+=.2*Fe.tickfont.size);var sn,Gt,Yt,rn,Ln,Sn={labelStandoff:Ct+=(Fe.linewidth||1)/2*(Tt?-1:1),labelShift:Pt},gn=0,$t=Fe.side,cn=Fe._id.charAt(0),an=Fe.tickangle;if(cn==="x")rn=(Ln=!Tt&&$t==="bottom"||Tt&&$t==="top")?1:-1,Tt&&(rn*=-1),sn=Pt*rn,Gt=Be+Ct*rn,Yt=Ln?1:-.2,Math.abs(an)===90&&(Tt?Yt+=V:Yt=an===-90&&$t==="bottom"?ne:an===90&&$t==="top"?V:.5,gn=V/2*(an/90)),Sn.xFn=function(Cn){return Cn.dx+sn+gn*Cn.fontSize},Sn.yFn=function(Cn){return Cn.dy+Gt+Cn.fontSize*Yt},Sn.anchorFn=function(Cn,Rn){if(Et){if(mt)return"end";if(ft)return"start"}return A(Rn)&&Rn!==0&&Rn!==180?Rn*rn<0!==Tt?"end":"start":"middle"},Sn.heightFn=function(Cn,Rn,Fn){return Rn<-60||Rn>60?-.5*Fn:Fe.side==="top"!==Tt?-Fn:0};else if(cn==="y"){if(rn=(Ln=!Tt&&$t==="left"||Tt&&$t==="right")?1:-1,Tt&&(rn*=-1),sn=Ct,Gt=Pt*rn,Yt=0,Tt||Math.abs(an)!==90||(Yt=an===-90&&$t==="left"||an===90&&$t==="right"?ne:.5),Tt){var pn=A(an)?+an:0;if(pn!==0){var An=_.deg2rad(pn);gn=Math.abs(Math.sin(An))*ne*rn,Yt=0}}Sn.xFn=function(Cn){return Cn.dx+Be-(sn+Cn.fontSize*Yt)*rn+gn*Cn.fontSize},Sn.yFn=function(Cn){return Cn.dy+Gt+Cn.fontSize*V},Sn.anchorFn=function(Cn,Rn){return A(Rn)&&Math.abs(Rn)===90?"middle":Ln?"end":"start"},Sn.heightFn=function(Cn,Rn,Fn){return Fe.side==="right"&&(Rn*=-1),Rn<-30?-Fn:Rn<30?-.5*Fn:0}}return Sn},J.drawTicks=function(Fe,Be,at){at=at||{};var Ze=Be._id+"tick",ht=[].concat(Be.minor&&Be.minor.ticks?at.vals.filter(function(mt){return mt.minor&&!mt.noTick}):[]).concat(Be.ticks?at.vals.filter(function(mt){return!mt.minor&&!mt.noTick}):[]),vt=at.layer.selectAll("path."+Ze).data(ht,dt);vt.exit().remove(),vt.enter().append("path").classed(Ze,1).classed("ticks",1).classed("crisp",at.crisp!==!1).each(function(mt){return a.stroke(M.select(this),mt.minor?Be.minor.tickcolor:Be.tickcolor)}).style("stroke-width",function(mt){return r.crispRound(Fe,mt.minor?Be.minor.tickwidth:Be.tickwidth,1)+"px"}).attr("d",at.path).style("display",null),st(Be,[j]),vt.attr("transform",at.transFn)},J.drawGrid=function(Fe,Be,at){if(at=at||{},Be.tickmode!=="sync"){var Ze=Be._id+"grid",ht=Be.minor&&Be.minor.showgrid,vt=ht?at.vals.filter(function(Yt){return Yt.minor}):[],mt=Be.showgrid?at.vals.filter(function(Yt){return!Yt.minor}):[],ft=at.counterAxis;if(ft&&J.shouldShowZeroLine(Fe,Be,ft))for(var Et=Be.tickmode==="array",Tt=0;Tt<mt.length;Tt++){var xt=mt[Tt].x;if(Et?!xt:Math.abs(xt)<Be.dtick/100){if(mt=mt.slice(0,Tt).concat(mt.slice(Tt+1)),!Et)break;Tt--}}Be._gw=r.crispRound(Fe,Be.gridwidth,1);for(var Ct=ht?r.crispRound(Fe,Be.minor.gridwidth,1):0,Pt=at.layer,Bt=at.minorLayer,Kt=1;Kt>=0;Kt--){var sn=Kt?Pt:Bt;if(sn){var Gt=sn.selectAll("path."+Ze).data(Kt?mt:vt,dt);Gt.exit().remove(),Gt.enter().append("path").classed(Ze,1).classed("crisp",at.crisp!==!1),Gt.attr("transform",at.transFn).attr("d",at.path).each(function(Yt){return a.stroke(M.select(this),Yt.minor?Be.minor.gridcolor:Be.gridcolor||"#ddd")}).style("stroke-dasharray",function(Yt){return r.dashStyle(Yt.minor?Be.minor.griddash:Be.griddash,Yt.minor?Be.minor.gridwidth:Be.gridwidth)}).style("stroke-width",function(Yt){return(Yt.minor?Ct:Be._gw)+"px"}).style("display",null),typeof at.path=="function"&&Gt.attr("d",at.path)}}st(Be,[U,R])}},J.drawZeroLine=function(Fe,Be,at){at=at||at;var Ze=Be._id+"zl",ht=J.shouldShowZeroLine(Fe,Be,at.counterAxis),vt=at.layer.selectAll("path."+Ze).data(ht?[{x:0,id:Be._id}]:[]);vt.exit().remove(),vt.enter().append("path").classed(Ze,1).classed("zl",1).classed("crisp",at.crisp!==!1).each(function(){at.layer.selectAll("path").sort(function(mt,ft){return ie(mt.id,ft.id)})}),vt.attr("transform",at.transFn).attr("d",at.path).call(a.stroke,Be.zerolinecolor||a.defaultLine).style("stroke-width",r.crispRound(Fe,Be.zerolinewidth,Be._gw||1)+"px").style("display",null),st(Be,[F])},J.drawLabels=function(Fe,Be,at){at=at||{};var Ze=Fe._fullLayout,ht=Be._id,vt=at.cls||ht+"tick",mt=at.vals.filter(function(Un){return Un.text}),ft=at.labelFns,Et=at.secondary?0:Be.tickangle,Tt=(Be._prevTickAngles||{})[vt],xt=at.layer.selectAll("g."+vt).data(Be.showticklabels?mt:[],dt),Ct=[];function Pt(Un,ar){Un.each(function(ur){var cr=M.select(this),er=cr.select(".text-math-group"),Tr=ft.anchorFn(ur,ar),Ht=at.transFn.call(cr.node(),ur)+(A(ar)&&+ar!=0?" rotate("+ar+","+ft.xFn(ur)+","+(ft.yFn(ur)-ur.fontSize/2)+")":""),on=s.lineCount(cr),wn=ee*ur.fontSize,mn=ft.heightFn(ur,A(ar)?+ar:0,(on-1)*wn);if(mn&&(Ht+=p(0,mn)),er.empty()){var Pn=cr.select("text");Pn.attr({transform:Ht,"text-anchor":Tr}),Pn.style("opacity",1),Be._adjustTickLabelsOverflow&&Be._adjustTickLabelsOverflow()}else{var Wn=r.bBox(er.node()).width*{end:-.5,start:.5}[Tr];er.attr("transform",Ht+p(Wn,0))}})}xt.enter().append("g").classed(vt,1).append("text").attr("text-anchor","middle").each(function(Un){var ar=M.select(this),ur=Fe._promises.length;ar.call(s.positionText,ft.xFn(Un),ft.yFn(Un)).call(r.font,Un.font,Un.fontSize,Un.fontColor).text(Un.text).call(s.convertToTspans,Fe),Fe._promises[ur]?Ct.push(Fe._promises.pop().then(function(){Pt(ar,Et)})):Pt(ar,Et)}),st(Be,[Z]),xt.exit().remove(),at.repositionOnUpdate&&xt.each(function(Un){M.select(this).select("text").call(s.positionText,ft.xFn(Un),ft.yFn(Un))}),Be._adjustTickLabelsOverflow=function(){var Un=Be.ticklabeloverflow;if(Un&&Un!=="allow"){var ar=Un.indexOf("hide")!==-1,ur=Be._id.charAt(0)==="x",cr=0,er=ur?Fe._fullLayout.width:Fe._fullLayout.height;if(Un.indexOf("domain")!==-1){var Tr=_.simpleMap(Be.range,Be.r2l);cr=Be.l2p(Tr[0])+Be._offset,er=Be.l2p(Tr[1])+Be._offset}var Ht=Math.min(cr,er),on=Math.max(cr,er),wn=Be.side,mn=1/0,Pn=-1/0;for(var Wn in xt.each(function(rr){var Xt=M.select(this);if(Xt.select(".text-math-group").empty()){var yn=r.bBox(Xt.node()),Ot=0;ur?(yn.right>on||yn.left<Ht)&&(Ot=1):(yn.bottom>on||yn.top+(Be.tickangle?0:rr.fontSize/4)<Ht)&&(Ot=1);var Jt=Xt.select("text");Ot?ar&&Jt.style("opacity",0):(Jt.style("opacity",1),mn=wn==="bottom"||wn==="right"?Math.min(mn,ur?yn.top:yn.left):-1/0,Pn=wn==="top"||wn==="left"?Math.max(Pn,ur?yn.bottom:yn.right):1/0)}}),Ze._plots){var Bn=Ze._plots[Wn];if(Be._id===Bn.xaxis._id||Be._id===Bn.yaxis._id){var jn=ur?Bn.yaxis:Bn.xaxis;jn&&(jn["_visibleLabelMin_"+Be._id]=mn,jn["_visibleLabelMax_"+Be._id]=Pn)}}}},Be._hideCounterAxisInsideTickLabels=function(Un){var ar=Be._id.charAt(0)==="x",ur=[];for(var cr in Ze._plots){var er=Ze._plots[cr];Be._id!==er.xaxis._id&&Be._id!==er.yaxis._id||ur.push(ar?er.yaxis:er.xaxis)}ur.forEach(function(Tr,Ht){Tr&&We(Tr)&&(Un||[F,R,U,j,Z]).forEach(function(on){var wn=on.K==="tick"&&on.L==="text"&&Be.ticklabelmode==="period",mn=Ze._plots[Be._mainSubplot];(on.K===F.K?mn.zerolinelayer.selectAll("."+Be._id+"zl"):on.K===R.K?mn.minorGridlayer.selectAll("."+Be._id):on.K===U.K?mn.gridlayer.selectAll("."+Be._id):mn[Be._id.charAt(0)+"axislayer"]).each(function(){var Pn=M.select(this);on.L&&(Pn=Pn.selectAll(on.L)),Pn.each(function(Wn){var Bn=Be.l2p(wn?rt(Wn):Wn.x)+Be._offset,jn=M.select(this);Bn<Be["_visibleLabelMax_"+Tr._id]&&Bn>Be["_visibleLabelMin_"+Tr._id]?jn.style("display","none"):on.K!=="tick"||Ht||jn.style("display",null)})})})})},Pt(xt,Tt+1?Tt:Et);var Bt=null;Be._selections&&(Be._selections[vt]=xt);var Kt=[function(){return Ct.length&&Promise.all(Ct)}];Be.automargin&&Ze._redrawFromAutoMarginCount&&Tt===90?(Bt=Tt,Kt.push(function(){Pt(xt,Tt)})):Kt.push(function(){if(Pt(xt,Et),mt.length&&Be.autotickangles&&(Be.type!=="log"||String(Be.dtick).charAt(0)!=="D")){Bt=Be.autotickangles[0];var Un,ar=0,ur=[],cr=1;if(xt.each(function(xn){ar=Math.max(ar,xn.fontSize);var kn=Be.l2p(xn.x),hn=et(this),en=r.bBox(hn.node());cr=Math.max(cr,s.lineCount(hn)),ur.push({top:0,bottom:10,height:10,left:kn-en.width/2,right:kn+en.width/2+2,width:en.width+2})}),Be.tickson!=="boundaries"&&!Be.showdividers||at.secondary){var er=mt.length,Tr=Math.abs((mt[er-1].x-mt[0].x)*Be._m)/(er-1),Ht=Be.ticklabelposition||"",on=function(xn){return Ht.indexOf(xn)!==-1},wn=on("top"),mn=on("left"),Pn=on("right"),Wn=on("bottom")||mn||wn||Pn?(Be.tickwidth||0)+6:0,Bn=Tr,jn=1.25*ar*cr,rr=Bn/Math.sqrt(Math.pow(Bn,2)+Math.pow(jn,2)),Xt=Be.autotickangles.map(function(xn){return xn*Math.PI/180}),yn=Xt.find(function(xn){return Math.abs(Math.cos(xn))<=rr});yn===void 0&&(yn=Xt.reduce(function(xn,kn){return Math.abs(Math.cos(xn))<Math.abs(Math.cos(kn))?xn:kn},Xt[0]));var Ot=yn*(180/Math.PI);for(Un=0;Un<ur.length-1;Un++)if(_.bBoxIntersect(ur[Un],ur[Un+1],Wn)){Bt=Ot;break}}else{var Jt=2;for(Be.ticks&&(Jt+=Be.tickwidth/2),Un=0;Un<ur.length;Un++){var nn=mt&&mt[Un].xbnd?mt[Un].xbnd:[null,null],_n=ur[Un];if(nn[0]!==null&&_n.left-Be.l2p(nn[0])<Jt||nn[1]!==null&&Be.l2p(nn[1])-_n.right<Jt){Bt=90;break}}}Bt&&Pt(xt,Bt)}}),Be._tickAngles&&Kt.push(function(){Be._tickAngles[vt]=Bt===null?A(Et)?Et:0:Bt});var sn=function(){var Un=0,ar=0;return xt.each(function(ur,cr){var er,Tr=et(this);Tr.select(".text-math-group").empty()&&(Be._vals[cr]&&(er=Be._vals[cr].bb||r.bBox(Tr.node()),Be._vals[cr].bb=er),Un=Math.max(Un,er.width),ar=Math.max(ar,er.height))}),{labelsMaxW:Un,labelsMaxH:ar}},Gt=Be._anchorAxis;if(Gt&&(Gt.autorange||Gt.insiderange)&&We(Be)&&!ae(Ze,Be._id)&&(Ze._insideTickLabelsUpdaterange||(Ze._insideTickLabelsUpdaterange={}),Gt.autorange&&(Ze._insideTickLabelsUpdaterange[Gt._name+".autorange"]=Gt.autorange,Kt.push(sn)),Gt.insiderange)){var Yt=sn(),rn=Be._id.charAt(0)==="y"?Yt.labelsMaxW:Yt.labelsMaxH;rn+=6,Be.ticklabelposition==="inside"&&(rn+=Be.ticklen||0);var Ln=Be.side==="right"||Be.side==="top"?1:-1,Sn=Ln===1?1:0,gn=Ln===1?0:1,$t=[];$t[gn]=Gt.range[gn];var cn=Gt.range,an=Gt.d2p(cn[Sn]),pn=Gt.d2p(cn[gn]),An=Ze._insideTickLabelsUpdaterange[Gt._name+".range"];if(An){var Cn=Gt.d2p(An[Sn]),Rn=Gt.d2p(An[gn]),Fn=Ln*(Be._id.charAt(0)==="y"?1:-1);Fn*an<Fn*Cn&&(an=Cn,$t[Sn]=cn[Sn]=An[Sn]),Fn*pn>Fn*Rn&&(pn=Rn,$t[gn]=cn[gn]=An[gn])}var In=Math.abs(pn-an);In-rn>0?rn*=1+rn/(In-=rn):rn=0,Be._id.charAt(0)!=="y"&&(rn=-rn),$t[Sn]=Gt.p2d(Gt.d2p(cn[Sn])+Ln*rn),Gt.autorange==="min"||Gt.autorange==="max reversed"?($t[0]=null,Gt._rangeInitial0=void 0,Gt._rangeInitial1=void 0):Gt.autorange!=="max"&&Gt.autorange!=="min reversed"||($t[1]=null,Gt._rangeInitial0=void 0,Gt._rangeInitial1=void 0),Ze._insideTickLabelsUpdaterange[Gt._name+".range"]=$t}var Hn=_.syncOrAsync(Kt);return Hn&&Hn.then&&Fe._promises.push(Hn),Hn},J.getPxPosition=function(Fe,Be){var at,Ze=Fe._fullLayout._size,ht=Be._id.charAt(0),vt=Be.side;return Be.anchor!=="free"?at=Be._anchorAxis:ht==="x"?at={_offset:Ze.t+(1-(Be.position||0))*Ze.h,_length:0}:ht==="y"&&(at={_offset:Ze.l+(Be.position||0)*Ze.w+Be._shift,_length:0}),vt==="top"||vt==="left"?at._offset:vt==="bottom"||vt==="right"?at._offset+at._length:void 0},J.shouldShowZeroLine=function(Fe,Be,at){var Ze=_.simpleMap(Be.range,Be.r2l);return Ze[0]*Ze[1]<=0&&Be.zeroline&&(Be.type==="linear"||Be.type==="-")&&!(Be.rangebreaks&&Be.maskBreaks(0)===z)&&(yt(Be,0)||!function(ht,vt,mt,ft){var Et=mt._mainAxis;if(Et){var Tt=ht._fullLayout,xt=vt._id.charAt(0),Ct=J.counterLetter(vt._id),Pt=vt._offset+(Math.abs(ft[0])<Math.abs(ft[1])==(xt==="x")?0:vt._length),Bt=Tt._plots[mt._mainSubplot];if(!(Bt.mainplotinfo||Bt).overlays.length)return Yt(mt);for(var Kt=J.list(ht,Ct),sn=0;sn<Kt.length;sn++){var Gt=Kt[sn];if(Gt._mainAxis===Et&&Yt(Gt))return!0}}function Yt(rn){if(!rn.showline||!rn.linewidth)return!1;var Ln=Math.max((rn.linewidth+vt.zerolinewidth)/2,1);function Sn(cn){return typeof cn=="number"&&Math.abs(cn-Pt)<Ln}if(Sn(rn._mainLinePosition)||Sn(rn._mainMirrorPosition))return!0;var gn=rn._linepositions||{};for(var $t in gn)if(Sn(gn[$t][0])||Sn(gn[$t][1]))return!0}}(Fe,Be,at,Ze)||function(ht,vt){for(var mt=ht._fullData,ft=vt._mainSubplot,Et=vt._id.charAt(0),Tt=0;Tt<mt.length;Tt++){var xt=mt[Tt];if(xt.visible===!0&&xt.xaxis+xt.yaxis===ft&&(w.traceIs(xt,"bar-like")&&xt.orientation==={x:"h",y:"v"}[Et]||xt.fill&&xt.fill.charAt(xt.fill.length-1)===Et))return!0}return!1}(Fe,Be))},J.clipEnds=function(Fe,Be){return Be.filter(function(at){return yt(Fe,at.x)})},J.allowAutoMargin=function(Fe){for(var Be=J.list(Fe,"",!0),at=0;at<Be.length;at++){var Ze=Be[at];Ze.automargin&&(o.allowAutoMargin(Fe,nt(Ze)),Ze.mirror&&o.allowAutoMargin(Fe,At(Ze))),w.getComponentMethod("rangeslider","isVisible")(Ze)&&o.allowAutoMargin(Fe,Rt(Ze))}},J.swap=function(Fe,Be){for(var at=function(ht,vt){var mt,ft,Et=[];for(mt=0;mt<vt.length;mt++){var Tt=[],xt=ht._fullData[vt[mt]].xaxis,Ct=ht._fullData[vt[mt]].yaxis;if(xt&&Ct){for(ft=0;ft<Et.length;ft++)Et[ft].x.indexOf(xt)===-1&&Et[ft].y.indexOf(Ct)===-1||Tt.push(ft);if(Tt.length){var Pt,Bt=Et[Tt[0]];if(Tt.length>1)for(ft=1;ft<Tt.length;ft++)Pt=Et[Tt[ft]],Ft(Bt.x,Pt.x),Ft(Bt.y,Pt.y);Ft(Bt.x,[xt]),Ft(Bt.y,[Ct])}else Et.push({x:[xt],y:[Ct]})}}return Et}(Fe,Be),Ze=0;Ze<at.length;Ze++)It(Fe,at[Ze].x,at[Ze].y)}},52976:function(Y,O,e){var M=e(38248),A=e(3400),o=e(39032).BADNUM,w=A.isArrayOrTypedArray,_=A.isDateTime,p=A.cleanNumber,s=Math.round;function n(r,i){return i?M(r):typeof r=="number"}function a(r){return Math.max(1,(r-1)/1e3)}Y.exports=function(r,i,l){var u=r,c=l.noMultiCategory;if(w(u)&&!u.length)return"-";if(!c&&function(d){return w(d[0])&&w(d[1])}(u))return"multicategory";if(c&&Array.isArray(u[0])){for(var g=[],f=0;f<u.length;f++)if(w(u[f]))for(var b=0;b<u[f].length;b++)g.push(u[f][b]);u=g}if(function(d,m){for(var x=d.length,y=a(x),T=0,h=0,E={},k=0;k<x;k+=y){var L=d[s(k)],P=String(L);E[P]||(E[P]=1,_(L,m)&&T++,M(L)&&h++)}return T>2*h}(u,i))return"date";var v=l.autotypenumbers!=="strict";return function(d,m){for(var x=d.length,y=a(x),T=0,h=0,E={},k=0;k<x;k+=y){var L=d[s(k)],P=String(L);if(!E[P]){E[P]=1;var I=typeof L;I==="boolean"?h++:(m?p(L)!==o:I==="number")?T++:I==="string"&&h++}}return h>2*T}(u,v)?"category":function(d,m){for(var x=d.length,y=0;y<x;y++)if(n(d[y],m))return!0;return!1}(u,v)?"linear":"-"}},28336:function(Y,O,e){var M=e(38248),A=e(24040),o=e(3400),w=e(31780),_=e(51272),p=e(94724),s=e(26332),n=e(25404),a=e(95936),r=e(42568),i=e(22416),l=e(42136),u=e(96312),c=e(78344),g=e(33816).WEEKDAY_PATTERN,f=e(33816).HOUR_PATTERN;function b(m,x,y){function T(F,U){return o.coerce(m,x,p.rangebreaks,F,U)}if(T("enabled")){var h=T("bounds");if(h&&h.length>=2){var E,k,L="";if(h.length===2){for(E=0;E<2;E++)if(k=d(h[E])){L=g;break}}var P=T("pattern",L);if(P===g)for(E=0;E<2;E++)(k=d(h[E]))&&(x.bounds[E]=h[E]=k-1);if(P)for(E=0;E<2;E++)switch(k=h[E],P){case g:if(!M(k)||(k=+k)!==Math.floor(k)||k<0||k>=7)return void(x.enabled=!1);x.bounds[E]=h[E]=k;break;case f:if(!M(k)||(k=+k)<0||k>24)return void(x.enabled=!1);x.bounds[E]=h[E]=k}if(y.autorange===!1){var I=y.range;if(I[0]<I[1]){if(h[0]<I[0]&&h[1]>I[1])return void(x.enabled=!1)}else if(h[0]>I[0]&&h[1]<I[1])return void(x.enabled=!1)}}else{var z=T("values");if(!z||!z.length)return void(x.enabled=!1);T("dvalue")}}}Y.exports=function(m,x,y,T,h){var E,k=T.letter,L=T.font||{},P=T.splomStash||{},I=y("visible",!T.visibleDflt),z=x._template||{},F=x.type||z.type||"-";F==="date"&&(A.getComponentMethod("calendars","handleDefaults")(m,x,"calendar",T.calendar),T.noTicklabelmode||(E=y("ticklabelmode")));var U="";T.noTicklabelposition&&F!=="multicategory"||(U=o.coerce(m,x,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:E==="period"?["outside","inside"]:k==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),T.noTicklabeloverflow||y("ticklabeloverflow",U.indexOf("inside")!==-1?"hide past domain":F==="category"||F==="multicategory"?"allow":"hide past div"),c(x,h),u(m,x,y,T),i(m,x,y,T),F==="category"||T.noHover||y("hoverformat");var R=y("color"),j=R!==p.color.dflt?R:L.color,Z=P.label||h._dfltTitle[k];if(r(m,x,y,F,T),!I)return x;y("title.text",Z),o.coerceFont(y,"title.font",{family:L.family,size:o.bigFont(L.size),color:j}),s(m,x,y,F);var B=T.hasMinor;if(B&&(w.newContainer(x,"minor"),s(m,x,y,F,{isMinor:!0})),a(m,x,y,F,T),n(m,x,y,T),B){var q=T.isMinor;T.isMinor=!0,n(m,x,y,T),T.isMinor=q}l(m,x,y,{dfltColor:R,bgColor:T.bgColor,showGrid:T.showGrid,hasMinor:B,attributes:p}),!B||x.minor.ticks||x.minor.showgrid||delete x.minor,(x.showline||x.ticks)&&y("mirror");var V,ne=F==="multicategory";if(T.noTickson||F!=="category"&&!ne||!x.ticks&&!x.showgrid||(ne&&(V="boundaries"),y("tickson",V)==="boundaries"&&delete x.ticklabelposition),ne&&y("showdividers")&&(y("dividercolor"),y("dividerwidth")),F==="date")if(_(m,x,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:b}),x.rangebreaks.length){for(var ee=0;ee<x.rangebreaks.length;ee++)if(x.rangebreaks[ee].pattern===g){x._hasDayOfWeekBreaks=!0;break}if(c(x,h),h._has("scattergl")||h._has("splom"))for(var $=0;$<T.data.length;$++){var J=T.data[$];J.type!=="scattergl"&&J.type!=="splom"||(J.visible=!1,o.warn(J.type+" traces do not work on axes with rangebreaks. Setting trace "+J.index+" to `visible: false`."))}}else delete x.rangebreaks;return x};var v={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function d(m){if(typeof m=="string")return v[m.substr(0,3).toLowerCase()]}},29736:function(Y,O,e){var M=e(26880),A=M.FORMAT_LINK,o=M.DATE_FORMAT_LINK;function w(p,s){return["Sets the "+p+" formatting rule"+(s?"for `"+s+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+A+"."].join(" ")}function _(p,s){return w(p,s)+[" And for dates see: "+o+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}Y.exports={axisHoverFormat:function(p,s){return{valType:"string",dflt:"",editType:"none",description:(s?w:_)("hover text",p)+["By default the values are formatted using "+(s?"generic number format":"`"+p+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:w,descriptionWithDates:_}},79811:function(Y,O,e){var M=e(24040),A=e(33816);function o(w,_){if(_&&_.length){for(var p=0;p<_.length;p++)if(_[p][w])return!0}return!1}O.id2name=function(w){if(typeof w=="string"&&w.match(A.AX_ID_PATTERN)){var _=w.split(" ")[0].substr(1);return _==="1"&&(_=""),w.charAt(0)+"axis"+_}},O.name2id=function(w){if(w.match(A.AX_NAME_PATTERN)){var _=w.substr(5);return _==="1"&&(_=""),w.charAt(0)+_}},O.cleanId=function(w,_,p){var s=/( domain)$/.test(w);if(typeof w=="string"&&w.match(A.AX_ID_PATTERN)&&(!_||w.charAt(0)===_)&&(!s||p)){var n=w.split(" ")[0].substr(1).replace(/^0+/,"");return n==="1"&&(n=""),w.charAt(0)+n+(s&&p?" domain":"")}},O.list=function(w,_,p){var s=w._fullLayout;if(!s)return[];var n,a=O.listIds(w,_),r=new Array(a.length);for(n=0;n<a.length;n++){var i=a[n];r[n]=s[i.charAt(0)+"axis"+i.substr(1)]}if(!p){var l=s._subplots.gl3d||[];for(n=0;n<l.length;n++){var u=s[l[n]];_?r.push(u[_+"axis"]):r.push(u.xaxis,u.yaxis,u.zaxis)}}return r},O.listIds=function(w,_){var p=w._fullLayout;if(!p)return[];var s=p._subplots;return _?s[_+"axis"]:s.xaxis.concat(s.yaxis)},O.getFromId=function(w,_,p){var s=w._fullLayout;return _=_===void 0||typeof _!="string"?_:_.replace(" domain",""),p==="x"?_=_.replace(/y[0-9]*/,""):p==="y"&&(_=_.replace(/x[0-9]*/,"")),s[O.id2name(_)]},O.getFromTrace=function(w,_,p){var s=w._fullLayout,n=null;if(M.traceIs(_,"gl3d")){var a=_.scene;a.substr(0,5)==="scene"&&(n=s[a][p+"axis"])}else n=O.getFromId(w,_[p+"axis"]||p);return n},O.idSort=function(w,_){var p=w.charAt(0),s=_.charAt(0);return p!==s?p>s?1:-1:+(w.substr(1)||1)-+(_.substr(1)||1)},O.ref2id=function(w){return!!/^[xyz]/.test(w)&&w.split(" ")[0]},O.isLinked=function(w,_){return o(_,w._axisMatchGroups)||o(_,w._axisConstraintGroups)}},22416:function(Y,O,e){var M=e(38116).isTypedArraySpec;Y.exports=function(A,o,w,_){if(o.type==="category"){var p,s=A.categoryarray,n=Array.isArray(s)&&s.length>0||M(s);n&&(p="array");var a,r=w("categoryorder",p);r==="array"&&(a=w("categoryarray")),n||r!=="array"||(r=o.categoryorder="trace"),r==="trace"?o._initialCategories=[]:r==="array"?o._initialCategories=a.slice():(a=function(i,l){var u,c,g,f=l.dataAttr||i._id.charAt(0),b={};if(l.axData)u=l.axData;else for(u=[],c=0;c<l.data.length;c++){var v=l.data[c];v[f+"axis"]===i._id&&u.push(v)}for(c=0;c<u.length;c++){var d=u[c][f];for(g=0;g<d.length;g++){var m=d[g];m!=null&&(b[m]=1)}}return Object.keys(b)}(o,_).sort(),r==="category ascending"?o._initialCategories=a:r==="category descending"&&(o._initialCategories=a.reverse()))}}},98728:function(Y,O,e){var M=e(38248),A=e(3400),o=e(39032),w=o.ONEDAY,_=o.ONEWEEK;O.dtick=function(p,s){var n=s==="log",a=s==="date",r=s==="category",i=a?w:1;if(!p)return i;if(M(p))return(p=Number(p))<=0?i:r?Math.max(1,Math.round(p)):a?Math.max(.1,p):p;if(typeof p!="string"||!a&&!n)return i;var l=p.charAt(0),u=p.substr(1);return(u=M(u)?Number(u):0)<=0||!(a&&l==="M"&&u===Math.round(u)||n&&l==="L"||n&&l==="D"&&(u===1||u===2))?i:p},O.tick0=function(p,s,n,a){return s==="date"?A.cleanDate(p,A.dateTick0(n,a%_==0?1:0)):a!=="D1"&&a!=="D2"?M(p)?Number(p):0:void 0}},33816:function(Y,O,e){var M=e(53756).counter;Y.exports={idRegex:{x:M("x","( domain)?"),y:M("y","( domain)?")},attrRegex:M("[xy]axis"),xAxisMatch:M("xaxis"),yAxisMatch:M("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},71888:function(Y,O,e){var M=e(3400),A=e(19280),o=e(79811).id2name,w=e(94724),_=e(21160),p=e(78344),s=e(39032).ALMOST_EQUAL,n=e(84284).FROM_BL;function a(f,b,v){var d=v.axIds,m=v.layoutOut,x=v.hasImage,y=m._axisConstraintGroups,T=m._axisMatchGroups,h=b._id,E=h.charAt(0),k=((m._splomAxes||{})[E]||{})[h]||{},L=b._id,P=L.charAt(0)==="x";function I(K,te){return M.coerce(f,b,w,K,te)}b._matchGroup=null,b._constraintGroup=null,I("constrain",x?"domain":"range"),M.coerce(f,b,{constraintoward:{valType:"enumerated",values:P?["left","center","right"]:["bottom","middle","top"],dflt:P?"center":"middle"}},"constraintoward");var z,F,U=b.type,R=[];for(z=0;z<d.length;z++)(F=d[z])!==L&&m[o(F)].type===U&&R.push(F);var j=i(y,L);if(j){var Z=[];for(z=0;z<R.length;z++)j[F=R[z]]||Z.push(F);R=Z}var B,q,V=R.length;V&&(f.matches||k.matches)&&(B=M.coerce(f,b,{matches:{valType:"enumerated",values:R,dflt:R.indexOf(k.matches)!==-1?k.matches:void 0}},"matches"));var ne=x&&!P?b.anchor:void 0;if(V&&!B&&(f.scaleanchor||ne)&&(q=M.coerce(f,b,{scaleanchor:{valType:"enumerated",values:R.concat([!1])}},"scaleanchor",ne)),B){b._matchGroup=l(T,L,B,1);var ee=m[o(B)],$=r(m,b)/r(m,ee);P!==(B.charAt(0)==="x")&&($=(P?"x":"y")+$),l(y,L,B,$)}else f.matches&&d.indexOf(f.matches)!==-1&&M.warn("ignored "+b._name+'.matches: "'+f.matches+'" to avoid an infinite loop');if(q){var J=I("scaleratio");J||(J=b.scaleratio=1),l(y,L,q,J)}else f.scaleanchor&&d.indexOf(f.scaleanchor)!==-1&&M.warn("ignored "+b._name+'.scaleanchor: "'+f.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function r(f,b){var v=b.domain;return v||(v=f[o(b.overlaying)].domain),v[1]-v[0]}function i(f,b){for(var v=0;v<f.length;v++)if(f[v][b])return f[v];return null}function l(f,b,v,d){var m,x,y,T,h,E=i(f,b);E===null?((E={})[b]=1,h=f.length,f.push(E)):h=f.indexOf(E);var k=Object.keys(E);for(m=0;m<f.length;m++)if(y=f[m],m!==h&&y[v]){var L=y[v];for(x=0;x<k.length;x++)y[T=k[x]]=u(L,u(d,E[T]));return void f.splice(h,1)}if(d!==1)for(x=0;x<k.length;x++){var P=k[x];E[P]=u(d,E[P])}E[v]=1}function u(f,b){var v,d,m="",x="";typeof f=="string"&&(v=(m=f.match(/^[xy]*/)[0]).length,f=+f.substr(v)),typeof b=="string"&&(d=(x=b.match(/^[xy]*/)[0]).length,b=+b.substr(d));var y=f*b;return v||d?v&&d&&m.charAt(0)!==x.charAt(0)?v===d?y:(v>d?m.substr(d):x.substr(v))+y:m+x+f*b:y}function c(f,b){for(var v=b._size,d=v.h/v.w,m={},x=Object.keys(f),y=0;y<x.length;y++){var T=x[y],h=f[T];if(typeof h=="string"){var E=h.match(/^[xy]*/)[0],k=E.length;h=+h.substr(k);for(var L=E.charAt(0)==="y"?d:1/d,P=0;P<k;P++)h*=L}m[T]=h}return m}function g(f,b){var v=f._inputDomain,d=n[f.constraintoward],m=v[0]+(v[1]-v[0])*d;f.domain=f._input.domain=[m+(v[0]-m)/b,m+(v[1]-m)/b],f.setScale()}O.handleDefaults=function(f,b,v){var d,m,x,y,T,h,E,k,L=v.axIds,P=v.axHasImage,I=b._axisConstraintGroups=[],z=b._axisMatchGroups=[];for(d=0;d<L.length;d++)a(T=f[y=o(L[d])],h=b[y],{axIds:L,layoutOut:b,hasImage:P[y]});function F(ee,$){for(d=0;d<ee.length;d++)for(x in m=ee[d])b[o(x)][$]=m}for(F(z,"_matchGroup"),d=0;d<I.length;d++)for(x in m=I[d])if((h=b[o(x)]).fixedrange){for(var U in m){var R=o(U);(f[R]||{}).fixedrange===!1&&M.warn("fixedrange was specified as false for axis "+R+" but was overridden because another axis in its constraint group has fixedrange true"),b[R].fixedrange=!0}break}for(d=0;d<I.length;){for(x in m=I[d]){(h=b[o(x)])._matchGroup&&Object.keys(h._matchGroup).length===Object.keys(m).length&&(I.splice(d,1),d--);break}d++}F(I,"_constraintGroup");var j=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],Z=!1,B=!1;function q(){k=h[E],E==="rangebreaks"&&(B=h._hasDayOfWeekBreaks)}for(d=0;d<z.length;d++){m=z[d];for(var V=0;V<j.length;V++){var ne;for(x in E=j[V],k=null,m)if(T=f[y=o(x)],h=b[y],E in h){if(!h.matches&&(ne=h,E in T)){q();break}k===null&&E in T&&q()}if(E==="range"&&k&&T.range&&T.range.length===2&&T.range[0]!==null&&T.range[1]!==null&&(Z=!0),E==="autorange"&&k===null&&Z&&(k=!1),k===null&&E in ne&&(k=ne[E]),k!==null)for(x in m)(h=b[o(x)])[E]=E==="range"?k.slice():k,E==="rangebreaks"&&(h._hasDayOfWeekBreaks=B,p(h,b))}}},O.enforce=function(f){var b,v,d,m,x,y,T,h,E=f._fullLayout,k=E._axisConstraintGroups||[];for(b=0;b<k.length;b++){d=c(k[b],E);var L=Object.keys(d),P=1/0,I=0,z=1/0,F={},U={},R=!1;for(v=0;v<L.length;v++)U[m=L[v]]=x=E[o(m)],x._inputDomain?x.domain=x._inputDomain.slice():x._inputDomain=x.domain.slice(),x._inputRange||(x._inputRange=x.range.slice()),x.setScale(),F[m]=y=Math.abs(x._m)/d[m],P=Math.min(P,y),x.constrain!=="domain"&&x._constraintShrinkable||(z=Math.min(z,y)),delete x._constraintShrinkable,I=Math.max(I,y),x.constrain==="domain"&&(R=!0);if(!(P>s*I)||R){for(v=0;v<L.length;v++)if(y=F[m=L[v]],T=(x=U[m]).constrain,y!==z||T==="domain")if(h=y/z,T==="range")_(x,h);else{var j=x._inputDomain,Z=(x.domain[1]-x.domain[0])/(j[1]-j[0]),B=(x.r2l(x.range[1])-x.r2l(x.range[0]))/(x.r2l(x._inputRange[1])-x.r2l(x._inputRange[0]));if((h/=Z)*B<1){x.domain=x._input.domain=j.slice(),_(x,h);continue}if(B<1&&(x.range=x._input.range=x._inputRange.slice(),h*=B),x.autorange){var q=x.r2l(x.range[0]),V=x.r2l(x.range[1]),ne=(q+V)/2,ee=ne,$=ne,J=Math.abs(V-ne),K=ne-J*h*1.0001,te=ne+J*h*1.0001,ie=A.makePadFn(E,x,0),ae=A.makePadFn(E,x,1);g(x,h);var se,ce,de=Math.abs(x._m),ge=A.concatExtremes(f,x),ve=ge.min,be=ge.max;for(ce=0;ce<ve.length;ce++)(se=ve[ce].val-ie(ve[ce])/de)>K&&se<ee&&(ee=se);for(ce=0;ce<be.length;ce++)(se=be[ce].val+ae(be[ce])/de)<te&&se>$&&($=se);h/=($-ee)/(2*J),ee=x.l2r(ee),$=x.l2r($),x.range=x._input.range=q<V?[ee,$]:[$,ee]}g(x,h)}}}},O.getAxisGroup=function(f,b){for(var v=f._axisMatchGroups,d=0;d<v.length;d++)if(v[d][b])return"g"+d;return b},O.clean=function(f,b){if(b._inputDomain){for(var v=!1,d=b._id,m=f._fullLayout._axisConstraintGroups,x=0;x<m.length;x++)if(m[x][d]){v=!0;break}v&&b.constrain==="domain"||(b._input.domain=b.domain=b._inputDomain,delete b._inputDomain)}}},51184:function(Y,O,e){var M=e(33428),A=e(3400),o=A.numberFormat,w=e(49760),_=e(89184),p=e(24040),s=A.strTranslate,n=e(72736),a=e(76308),r=e(43616),i=e(93024),l=e(54460),u=e(93972),c=e(86476),g=e(72760),f=g.selectingOrDrawing,b=g.freeMode,v=e(84284).FROM_TL,d=e(73696),m=e(39172).redrawReglTraces,x=e(7316),y=e(79811).getFromId,T=e(22676).prepSelect,h=e(22676).clearOutline,E=e(22676).selectOnClick,k=e(21160),L=e(33816),P=L.MINDRAG,I=L.MINZOOM,z=!0;function F(se,ce,de,ge){var ve=A.ensureSingle(se.draglayer,ce,de,function(be){be.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",se.id)});return ve.call(u,ge),ve.node()}function U(se,ce,de,ge,ve,be,me){var Se=F(se,"rect",ce,de);return M.select(Se).call(r.setRect,ge,ve,be,me),Se}function R(se,ce){for(var de=0;de<se.length;de++)if(!se[de].fixedrange)return ce;return""}function j(se,ce,de,ge,ve){for(var be=0;be<se.length;be++){var me=se[be];if(!me.fixedrange)if(me.rangebreaks){var Se=me._id.charAt(0)==="y",we=Se?1-ce:ce,_e=Se?1-de:de;ge[me._name+".range[0]"]=me.l2r(me.p2l(we*me._length)),ge[me._name+".range[1]"]=me.l2r(me.p2l(_e*me._length))}else{var oe=me._rl[0],le=me._rl[1]-oe;ge[me._name+".range[0]"]=me.l2r(oe+le*ce),ge[me._name+".range[1]"]=me.l2r(oe+le*de)}}if(ve&&ve.length){var pe=(ce+(1-de))/2;j(ve,pe,1-pe,ge,[])}}function Z(se,ce){for(var de=0;de<se.length;de++){var ge=se[de];if(!ge.fixedrange){if(ge.rangebreaks){var ve=ge._length,be=(ge.p2l(0+ce)-ge.p2l(0)+(ge.p2l(ve+ce)-ge.p2l(ve)))/2;ge.range=[ge.l2r(ge._rl[0]-be),ge.l2r(ge._rl[1]-be)]}else ge.range=[ge.l2r(ge._rl[0]-ce/ge._m),ge.l2r(ge._rl[1]-ce/ge._m)];ge.limitRange&&ge.limitRange()}}}function B(se){return 1-(se>=0?Math.min(se,.9):1/(1/Math.max(se,-.3)+3.222))}function q(se,ce,de,ge,ve){return se.append("path").attr("class","zoombox").style({fill:ce>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",s(de,ge)).attr("d",ve+"Z")}function V(se,ce,de){return se.append("path").attr("class","zoombox-corners").style({fill:a.background,stroke:a.defaultLine,"stroke-width":1,opacity:0}).attr("transform",s(ce,de)).attr("d","M0,0Z")}function ne(se,ce,de,ge,ve,be){se.attr("d",ge+"M"+de.l+","+de.t+"v"+de.h+"h"+de.w+"v-"+de.h+"h-"+de.w+"Z"),ee(se,ce,ve,be)}function ee(se,ce,de,ge){de||(se.transition().style("fill",ge>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ce.transition().style("opacity",1).duration(200))}function $(se){M.select(se).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function J(se){z&&se.data&&se._context.showTips&&(A.notifier(A._(se,"Double-click to zoom back out"),"long"),z=!1)}function K(se){var ce=Math.floor(Math.min(se.b-se.t,se.r-se.l,I)/2);return"M"+(se.l-3.5)+","+(se.t-.5+ce)+"h3v"+-ce+"h"+ce+"v-3h-"+(ce+3)+"ZM"+(se.r+3.5)+","+(se.t-.5+ce)+"h-3v"+-ce+"h"+-ce+"v-3h"+(ce+3)+"ZM"+(se.r+3.5)+","+(se.b+.5-ce)+"h-3v"+ce+"h"+-ce+"v3h"+(ce+3)+"ZM"+(se.l-3.5)+","+(se.b+.5-ce)+"h3v"+ce+"h"+ce+"v3h-"+(ce+3)+"Z"}function te(se,ce,de,ge,ve){for(var be,me,Se,we,_e=!1,oe={},le={},pe=(ve||{}).xaHash,Ee=(ve||{}).yaHash,Te=0;Te<ce.length;Te++){var Me=ce[Te];for(be in de)if(Me[be]){for(Se in Me)ve&&(pe[Se]||Ee[Se])||(Se.charAt(0)==="x"?de:ge)[Se]||(oe[Se]=be);for(me in ge)ve&&(pe[me]||Ee[me])||!Me[me]||(_e=!0)}for(me in ge)if(Me[me])for(we in Me)ve&&(pe[we]||Ee[we])||(we.charAt(0)==="x"?de:ge)[we]||(le[we]=me)}_e&&(A.extendFlat(oe,le),le={});var Le={},Ie=[];for(Se in oe){var he=y(se,Se);Ie.push(he),Le[he._id]=he}var xe={},ke=[];for(we in le){var ze=y(se,we);ke.push(ze),xe[ze._id]=ze}return{xaHash:Le,yaHash:xe,xaxes:Ie,yaxes:ke,xLinks:oe,yLinks:le,isSubplotConstrained:_e}}function ie(se,ce){if(_){var de=se.onwheel!==void 0?"wheel":"mousewheel";se._onwheel&&se.removeEventListener(de,se._onwheel),se._onwheel=ce,se.addEventListener(de,ce,{passive:!1})}else se.onwheel!==void 0?se.onwheel=ce:se.onmousewheel!==void 0?se.onmousewheel=ce:se.isAddedWheelEvent||(se.isAddedWheelEvent=!0,se.addEventListener("wheel",ce,{passive:!1}))}function ae(se){var ce=[];for(var de in se)ce.push(se[de]);return ce}Y.exports={makeDragBox:function(se,ce,de,ge,ve,be,me,Se){var we,_e,oe,le,pe,Ee,Te,Me,Le,Ie,he,xe,ke,ze,Re,Oe,Ve,qe,Je,ot,rt,dt,_t,yt=se._fullLayout._zoomlayer,et=me+Se==="nsew",nt=(me+Se).length===1;function At(){if(we=ce.xaxis,_e=ce.yaxis,Le=we._length,Ie=_e._length,Te=we._offset,Me=_e._offset,(oe={})[we._id]=we,(le={})[_e._id]=_e,me&&Se)for(var $t=ce.overlays,cn=0;cn<$t.length;cn++){var an=$t[cn].xaxis;oe[an._id]=an;var pn=$t[cn].yaxis;le[pn._id]=pn}pe=ae(oe),Ee=ae(le),ke=R(pe,Se),ze=R(Ee,me),Re=!ze&&!ke,xe=te(se,se._fullLayout._axisMatchGroups,oe,le);var An=(he=te(se,se._fullLayout._axisConstraintGroups,oe,le,xe)).isSubplotConstrained||xe.isSubplotConstrained;Oe=Se||An,Ve=me||An;var Cn=se._fullLayout;qe=Cn._has("scattergl"),Je=Cn._has("splom"),ot=Cn._has("svg")}de+=ce.yaxis._shift,At();var Rt=function($t,cn,an){return $t?$t==="nsew"?an?"":cn==="pan"?"move":"crosshair":$t.toLowerCase()+"-resize":"pointer"}(ze+ke,se._fullLayout.dragmode,et),Ft=U(ce,me+Se+"drag",Rt,de,ge,ve,be);if(Re&&!et)return Ft.onmousedown=null,Ft.style.pointerEvents="none",Ft;var It,Ge,Ye,Ne,We,st,it,Fe,Be,at,Ze={element:Ft,gd:se,plotinfo:ce};function ht(){Ze.plotinfo.selection=!1,h(se)}function vt($t,cn){var an=Ze.gd;if(an._fullLayout._activeShapeIndex>=0)an._fullLayout._deactivateShape(an);else{var pn=an._fullLayout.clickmode;if($(an),$t!==2||nt||Gt(),et)pn.indexOf("select")>-1&&E(cn,an,pe,Ee,ce.id,Ze),pn.indexOf("event")>-1&&i.click(an,cn,ce.id);else if($t===1&&nt){var An=me?_e:we,Cn=me==="s"||Se==="w"?0:1,Rn=An._name+".range["+Cn+"]",Fn=function(Un,ar){var ur,cr=Un.range[ar],er=Math.abs(cr-Un.range[1-ar]);return Un.type==="date"?cr:Un.type==="log"?(ur=Math.ceil(Math.max(0,-Math.log(er)/Math.LN10))+3,o("."+ur+"g")(Math.pow(10,cr))):(ur=Math.floor(Math.log(Math.abs(cr))/Math.LN10)-Math.floor(Math.log(er)/Math.LN10)+4,o("."+String(ur)+"g")(cr))}(An,Cn),In="left",Hn="middle";if(An.fixedrange)return;me?(Hn=me==="n"?"top":"bottom",An.side==="right"&&(In="right")):Se==="e"&&(In="right"),an._context.showAxisRangeEntryBoxes&&M.select(Ft).call(n.makeEditable,{gd:an,immediate:!0,background:an._fullLayout.paper_bgcolor,text:String(Fn),fill:An.tickfont?An.tickfont.color:"#444",horizontalAlign:In,verticalAlign:Hn}).on("edit",function(Un){var ar=An.d2r(Un);ar!==void 0&&p.call("_guiRelayout",an,Rn,ar)})}}}function mt($t,cn){if(se._transitioningWithDuration)return!1;var an=Math.max(0,Math.min(Le,dt*$t+It)),pn=Math.max(0,Math.min(Ie,_t*cn+Ge)),An=Math.abs(an-It),Cn=Math.abs(pn-Ge);function Rn(){it="",Ye.r=Ye.l,Ye.t=Ye.b,Be.attr("d","M0,0Z")}if(Ye.l=Math.min(It,an),Ye.r=Math.max(It,an),Ye.t=Math.min(Ge,pn),Ye.b=Math.max(Ge,pn),he.isSubplotConstrained)An>I||Cn>I?(it="xy",An/Le>Cn/Ie?(Cn=An*Ie/Le,Ge>pn?Ye.t=Ge-Cn:Ye.b=Ge+Cn):(An=Cn*Le/Ie,It>an?Ye.l=It-An:Ye.r=It+An),Be.attr("d",K(Ye))):Rn();else if(xe.isSubplotConstrained)if(An>I||Cn>I){it="xy";var Fn=Math.min(Ye.l/Le,(Ie-Ye.b)/Ie),In=Math.max(Ye.r/Le,(Ie-Ye.t)/Ie);Ye.l=Fn*Le,Ye.r=In*Le,Ye.b=(1-Fn)*Ie,Ye.t=(1-In)*Ie,Be.attr("d",K(Ye))}else Rn();else!ze||Cn<Math.min(Math.max(.6*An,P),I)?An<P||!ke?Rn():(Ye.t=0,Ye.b=Ie,it="x",Be.attr("d",function(Hn,Un){return"M"+(Hn.l-.5)+","+(Un-I-.5)+"h-3v"+(2*I+1)+"h3ZM"+(Hn.r+.5)+","+(Un-I-.5)+"h3v"+(2*I+1)+"h-3Z"}(Ye,Ge))):!ke||An<Math.min(.6*Cn,I)?(Ye.l=0,Ye.r=Le,it="y",Be.attr("d",function(Hn,Un){return"M"+(Un-I-.5)+","+(Hn.t-.5)+"v-3h"+(2*I+1)+"v3ZM"+(Un-I-.5)+","+(Hn.b+.5)+"v3h"+(2*I+1)+"v-3Z"}(Ye,It))):(it="xy",Be.attr("d",K(Ye)));Ye.w=Ye.r-Ye.l,Ye.h=Ye.b-Ye.t,it&&(at=!0),se._dragged=at,ne(Fe,Be,Ye,We,st,Ne),ft(),se.emit("plotly_relayouting",rt),st=!0}function ft(){rt={},it!=="xy"&&it!=="x"||(j(pe,Ye.l/Le,Ye.r/Le,rt,he.xaxes),Kt("x",rt)),it!=="xy"&&it!=="y"||(j(Ee,(Ie-Ye.b)/Ie,(Ie-Ye.t)/Ie,rt,he.yaxes),Kt("y",rt))}function Et(){ft(),$(se),Yt(),J(se)}Ze.prepFn=function($t,cn,an){var pn=Ze.dragmode,An=se._fullLayout.dragmode;An!==pn&&(Ze.dragmode=An),At(),dt=se._fullLayout._invScaleX,_t=se._fullLayout._invScaleY,Re||(et?$t.shiftKey?An==="pan"?An="zoom":f(An)||(An="pan"):$t.ctrlKey&&(An="pan"):An="pan"),b(An)?Ze.minDrag=1:Ze.minDrag=void 0,f(An)?(Ze.xaxes=pe,Ze.yaxes=Ee,T($t,cn,an,Ze,An)):(Ze.clickFn=vt,f(pn)&&ht(),Re||(An==="zoom"?(Ze.moveFn=mt,Ze.doneFn=Et,Ze.minDrag=1,function(Cn,Rn,Fn){var In=Ft.getBoundingClientRect();It=Rn-In.left,Ge=Fn-In.top,se._fullLayout._calcInverseTransform(se);var Hn=A.apply3DTransform(se._fullLayout._invTransform)(It,Ge);It=Hn[0],Ge=Hn[1],Ye={l:It,r:It,w:0,t:Ge,b:Ge,h:0},Ne=se._hmpixcount?se._hmlumcount/se._hmpixcount:w(se._fullLayout.plot_bgcolor).getLuminance(),st=!1,it="xy",at=!1,Fe=q(yt,Ne,Te,Me,We="M0,0H"+Le+"V"+Ie+"H0V0"),Be=V(yt,Te,Me)}(0,cn,an)):An==="pan"&&(Ze.moveFn=Bt,Ze.doneFn=Yt))),se._fullLayout._redrag=function(){var Cn=se._dragdata;if(Cn&&Cn.element===Ft){var Rn=se._fullLayout.dragmode;f(Rn)||(At(),rn([0,0,Le,Ie]),Ze.moveFn(Cn.dx,Cn.dy))}}},c.init(Ze);var Tt=[0,0,Le,Ie],xt=null,Ct=L.REDRAWDELAY,Pt=ce.mainplot?se._fullLayout._plots[ce.mainplot]:ce;function Bt($t,cn){if($t*=dt,cn*=_t,!se._transitioningWithDuration){if(se._fullLayout._replotting=!0,ke==="ew"||ze==="ns"){var an=ke?-$t:0,pn=ze?-cn:0;if(xe.isSubplotConstrained){if(ke&&ze){var An=($t/Le-cn/Ie)/2;an=-($t=An*Le),pn=-(cn=-An*Ie)}ze?an=-pn*Le/Ie:pn=-an*Ie/Le}return ke&&(Z(pe,$t),Kt("x")),ze&&(Z(Ee,cn),Kt("y")),rn([an,pn,Le,Ie]),sn(),void se.emit("plotly_relayouting",rt)}var Cn,Rn,Fn=ke==="w"==(ze==="n")?1:-1;if(ke&&ze&&(he.isSubplotConstrained||xe.isSubplotConstrained)){var In=($t/Le+Fn*cn/Ie)/2;$t=In*Le,cn=Fn*In*Ie}if(ke==="w"?$t=ur(pe,0,$t):ke==="e"?$t=ur(pe,1,-$t):ke||($t=0),ze==="n"?cn=ur(Ee,1,cn):ze==="s"?cn=ur(Ee,0,-cn):ze||(cn=0),Cn=ke==="w"?$t:0,Rn=ze==="n"?cn:0,he.isSubplotConstrained&&!xe.isSubplotConstrained||xe.isSubplotConstrained&&ke&&ze&&Fn>0){var Hn;if(xe.isSubplotConstrained||!ke&&ze.length===1){for(Hn=0;Hn<pe.length;Hn++)pe[Hn].range=pe[Hn]._r.slice(),k(pe[Hn],1-cn/Ie);Cn=($t=cn*Le/Ie)/2}if(xe.isSubplotConstrained||!ze&&ke.length===1){for(Hn=0;Hn<Ee.length;Hn++)Ee[Hn].range=Ee[Hn]._r.slice(),k(Ee[Hn],1-$t/Le);Rn=(cn=$t*Ie/Le)/2}}xe.isSubplotConstrained&&ze||Kt("x"),xe.isSubplotConstrained&&ke||Kt("y");var Un=Le-$t,ar=Ie-cn;!xe.isSubplotConstrained||ke&&ze||(ke?(Rn=Cn?0:$t*Ie/Le,ar=Un*Ie/Le):(Cn=Rn?0:cn*Le/Ie,Un=ar*Le/Ie)),rn([Cn,Rn,Un,ar]),sn(),se.emit("plotly_relayouting",rt)}function ur(cr,er,Tr){for(var Ht,on,wn=1-er,mn=0;mn<cr.length;mn++){var Pn=cr[mn];if(!Pn.fixedrange){Ht=Pn,on=Pn._rl[wn]+(Pn._rl[er]-Pn._rl[wn])/B(Tr/Pn._length);var Wn=Pn.l2r(on);Wn!==!1&&Wn!==void 0&&(Pn.range[er]=Wn)}}return Ht._length*(Ht._rl[er]-on)/(Ht._rl[er]-Ht._rl[wn])}}function Kt($t,cn){for(var an=xe.isSubplotConstrained?{x:Ee,y:pe}[$t]:xe[$t+"axes"],pn=xe.isSubplotConstrained?{x:pe,y:Ee}[$t]:[],An=0;An<an.length;An++){var Cn=an[An],Rn=Cn._id,Fn=xe.xLinks[Rn]||xe.yLinks[Rn],In=pn[0]||oe[Fn]||le[Fn];In&&(cn?(cn[Cn._name+".range[0]"]=cn[In._name+".range[0]"],cn[Cn._name+".range[1]"]=cn[In._name+".range[1]"]):Cn.range=In.range.slice())}}function sn(){var $t,cn=[];function an(Rn){for($t=0;$t<Rn.length;$t++)Rn[$t].fixedrange||cn.push(Rn[$t]._id)}function pn(Rn,Fn){for($t=0;$t<Rn.length;$t++){var In=Rn[$t],Hn=In[Fn];In.fixedrange||Hn.tickmode!=="sync"||cn.push(Hn._id)}}for(Oe&&(an(pe),an(he.xaxes),an(xe.xaxes),pn(ce.overlays,"xaxis")),Ve&&(an(Ee),an(he.yaxes),an(xe.yaxes),pn(ce.overlays,"yaxis")),rt={},$t=0;$t<cn.length;$t++){var An=cn[$t],Cn=y(se,An);l.drawOne(se,Cn,{skipTitle:!0}),rt[Cn._name+".range[0]"]=Cn.range[0],rt[Cn._name+".range[1]"]=Cn.range[1]}l.redrawComponents(se,cn)}function Gt(){if(!se._transitioningWithDuration){var $t=se._context.doubleClick,cn=[];ke&&(cn=cn.concat(pe)),ze&&(cn=cn.concat(Ee)),xe.xaxes&&(cn=cn.concat(xe.xaxes)),xe.yaxes&&(cn=cn.concat(xe.yaxes));var an,pn,An={};if($t==="reset+autosize")for($t="autosize",pn=0;pn<cn.length;pn++){var Cn=(an=cn[pn])._rangeInitial0,Rn=an._rangeInitial1,Fn=Cn!==void 0||Rn!==void 0;if(Fn&&(Cn!==void 0&&Cn!==an.range[0]||Rn!==void 0&&Rn!==an.range[1])||!Fn&&an.autorange!==!0){$t="reset";break}}if($t==="autosize")for(pn=0;pn<cn.length;pn++)(an=cn[pn]).fixedrange||(An[an._name+".autorange"]=!0);else if($t==="reset"){for((ke||he.isSubplotConstrained)&&(cn=cn.concat(he.xaxes)),ze&&!he.isSubplotConstrained&&(cn=cn.concat(he.yaxes)),he.isSubplotConstrained&&(ke?ze||(cn=cn.concat(Ee)):cn=cn.concat(pe)),pn=0;pn<cn.length;pn++)if(!(an=cn[pn]).fixedrange){var In=an._name,Hn=an._autorangeInitial;an._rangeInitial0===void 0&&an._rangeInitial1===void 0?An[In+".autorange"]=!0:an._rangeInitial0===void 0?(An[In+".autorange"]=Hn,An[In+".range"]=[null,an._rangeInitial1]):an._rangeInitial1===void 0?(An[In+".range"]=[an._rangeInitial0,null],An[In+".autorange"]=Hn):An[In+".range"]=[an._rangeInitial0,an._rangeInitial1]}}se.emit("plotly_doubleclick",null),p.call("_guiRelayout",se,An)}}function Yt(){rn([0,0,Le,Ie]),A.syncOrAsync([x.previousPromises,function(){se._fullLayout._replotting=!1,p.call("_guiRelayout",se,rt)}],se)}function rn($t){var cn,an,pn,An,Cn=se._fullLayout,Rn=Cn._plots,Fn=Cn._subplots.cartesian;if(Je&&p.subplotsRegistry.splom.drag(se),qe){for(cn=0;cn<Fn.length;cn++)if(pn=(an=Rn[Fn[cn]]).xaxis,An=an.yaxis,an._scene){var In=A.simpleMap(pn.range,pn.r2l),Hn=A.simpleMap(An.range,An.r2l);pn.limitRange&&pn.limitRange(),An.limitRange&&An.limitRange(),In=pn.range,Hn=An.range,an._scene.update({range:[In[0],Hn[0],In[1],Hn[1]]})}}if((Je||qe)&&(d(se),m(se)),ot){var Un=$t[2]/we._length,ar=$t[3]/_e._length;for(cn=0;cn<Fn.length;cn++){pn=(an=Rn[Fn[cn]]).xaxis,An=an.yaxis;var ur,cr,er,Tr,Ht=(Oe||xe.isSubplotConstrained)&&!pn.fixedrange&&oe[pn._id],on=(Ve||xe.isSubplotConstrained)&&!An.fixedrange&&le[An._id];if(Ht?(ur=Un,er=Se||xe.isSubplotConstrained?$t[0]:gn(pn,ur)):xe.xaHash[pn._id]?(ur=Un,er=$t[0]*pn._length/we._length):xe.yaHash[pn._id]?(ur=ar,er=ze==="ns"?-$t[1]*pn._length/_e._length:gn(pn,ur,{n:"top",s:"bottom"}[ze])):er=Sn(pn,ur=Ln(pn,Un,ar)),ur>1&&(pn.maxallowed!==void 0&&Oe===(pn.range[0]<pn.range[1]?"e":"w")||pn.minallowed!==void 0&&Oe===(pn.range[0]<pn.range[1]?"w":"e"))&&(ur=1,er=0),on?(cr=ar,Tr=me||xe.isSubplotConstrained?$t[1]:gn(An,cr)):xe.yaHash[An._id]?(cr=ar,Tr=$t[1]*An._length/_e._length):xe.xaHash[An._id]?(cr=Un,Tr=ke==="ew"?-$t[0]*An._length/we._length:gn(An,cr,{e:"right",w:"left"}[ke])):Tr=Sn(An,cr=Ln(An,Un,ar)),cr>1&&(An.maxallowed!==void 0&&Ve===(An.range[0]<An.range[1]?"n":"s")||An.minallowed!==void 0&&Ve===(An.range[0]<An.range[1]?"s":"n"))&&(cr=1,Tr=0),ur||cr){ur||(ur=1),cr||(cr=1);var wn=pn._offset-er/ur,mn=An._offset-Tr/cr;an.clipRect.call(r.setTranslate,er,Tr).call(r.setScale,ur,cr),an.plot.call(r.setTranslate,wn,mn).call(r.setScale,1/ur,1/cr),ur===an.xScaleFactor&&cr===an.yScaleFactor||(r.setPointGroupScale(an.zoomScalePts,ur,cr),r.setTextPointsScale(an.zoomScaleTxt,ur,cr)),r.hideOutsideRangePoints(an.clipOnAxisFalseTraces,an),an.xScaleFactor=ur,an.yScaleFactor=cr}}}}function Ln($t,cn,an){return $t.fixedrange?0:Oe&&he.xaHash[$t._id]?cn:Ve&&(he.isSubplotConstrained?he.xaHash:he.yaHash)[$t._id]?an:0}function Sn($t,cn){return cn?($t.range=$t._r.slice(),k($t,cn),gn($t,cn)):0}function gn($t,cn,an){return $t._length*(1-cn)*v[an||$t.constraintoward||"middle"]}return me.length*Se.length!=1&&ie(Ft,function($t){if(se._context._scrollZoom.cartesian||se._fullLayout._enablescrollzoom){if(ht(),se._transitioningWithDuration)return $t.preventDefault(),void $t.stopPropagation();At(),clearTimeout(xt);var cn=-$t.deltaY;if(isFinite(cn)||(cn=$t.wheelDelta/10),isFinite(cn)){var an,pn=Math.exp(-Math.min(Math.max(cn,-20),20)/200),An=Pt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Cn=($t.clientX-An.left)/An.width,Rn=(An.bottom-$t.clientY)/An.height;if(Oe){for(Se||(Cn=.5),an=0;an<pe.length;an++)Fn(pe[an],Cn,pn);Kt("x"),Tt[2]*=pn,Tt[0]+=Tt[2]*Cn*(1/pn-1)}if(Ve){for(me||(Rn=.5),an=0;an<Ee.length;an++)Fn(Ee[an],Rn,pn);Kt("y"),Tt[3]*=pn,Tt[1]+=Tt[3]*(1-Rn)*(1/pn-1)}rn(Tt),sn(),se.emit("plotly_relayouting",rt),xt=setTimeout(function(){se._fullLayout&&(Tt=[0,0,Le,Ie],Yt())},Ct),$t.preventDefault()}else A.log("Did not find wheel motion attributes: ",$t)}function Fn(In,Hn,Un){if(!In.fixedrange){var ar=A.simpleMap(In.range,In.r2l),ur=ar[0]+(ar[1]-ar[0])*Hn;In.range=ar.map(function(cr){return In.l2r(ur+(cr-ur)*Un)})}}}),Ft},makeDragger:F,makeRectDragger:U,makeZoombox:q,makeCorners:V,updateZoombox:ne,xyCorners:K,transitionZoombox:ee,removeZoombox:$,showDoubleClickNotifier:J,attachWheelEventHandler:ie}},42464:function(Y,O,e){var M=e(33428),A=e(93024),o=e(86476),w=e(93972),_=e(51184).makeDragBox,p=e(33816).DRAGGERSIZE;O.initInteractions=function(s){var n=s._fullLayout;if(s._context.staticPlot)M.select(s).selectAll(".drag").remove();else if(n._has("cartesian")||n._has("splom")){Object.keys(n._plots||{}).sort(function(r,i){if((n._plots[r].mainplot&&!0)===(n._plots[i].mainplot&&!0)){var l=r.split("y"),u=i.split("y");return l[0]===u[0]?Number(l[1]||1)-Number(u[1]||1):Number(l[0]||1)-Number(u[0]||1)}return n._plots[r].mainplot?1:-1}).forEach(function(r){var i=n._plots[r],l=i.xaxis,u=i.yaxis;if(!i.mainplot){var c=_(s,i,l._offset,u._offset,l._length,u._length,"ns","ew");c.onmousemove=function(b){s._fullLayout._rehover=function(){s._fullLayout._hoversubplot===r&&s._fullLayout._plots[r]&&A.hover(s,b,r)},A.hover(s,b,r),s._fullLayout._lasthover=c,s._fullLayout._hoversubplot=r},c.onmouseout=function(b){s._dragging||(s._fullLayout._hoversubplot=null,o.unhover(s,b))},s._context.showAxisDragHandles&&(_(s,i,l._offset-p,u._offset-p,p,p,"n","w"),_(s,i,l._offset+l._length,u._offset-p,p,p,"n","e"),_(s,i,l._offset-p,u._offset+u._length,p,p,"s","w"),_(s,i,l._offset+l._length,u._offset+u._length,p,p,"s","e"))}if(s._context.showAxisDragHandles){if(r===l._mainSubplot){var g=l._mainLinePosition;l.side==="top"&&(g-=p),_(s,i,l._offset+.1*l._length,g,.8*l._length,p,"","ew"),_(s,i,l._offset,g,.1*l._length,p,"","w"),_(s,i,l._offset+.9*l._length,g,.1*l._length,p,"","e")}if(r===u._mainSubplot){var f=u._mainLinePosition;u.side!=="right"&&(f-=p),_(s,i,f,u._offset+.1*u._length,p,.8*u._length,"ns",""),_(s,i,f,u._offset+.9*u._length,p,.1*u._length,"s",""),_(s,i,f,u._offset,p,.1*u._length,"n","")}}});var a=n._hoverlayer.node();a.onmousemove=function(r){r.target=s._fullLayout._lasthover,A.hover(s,r,n._hoversubplot)},a.onclick=function(r){r.target=s._fullLayout._lasthover,A.click(s,r)},a.onmousedown=function(r){s._fullLayout._lasthover.onmousedown(r)},O.updateFx(s)}},O.updateFx=function(s){var n=s._fullLayout,a=n.dragmode==="pan"?"move":"crosshair";w(n._draggers,a)}},36632:function(Y,O,e){var M=e(24040),A=e(3400),o=e(79811);Y.exports=function(w){return function(_,p){var s=_[w];if(Array.isArray(s))for(var n=M.subplotsRegistry.cartesian,a=n.idRegex,r=p._subplots,i=r.xaxis,l=r.yaxis,u=r.cartesian,c=p._has("cartesian")||p._has("gl2d"),g=0;g<s.length;g++){var f=s[g];if(A.isPlainObject(f)){var b=o.cleanId(f.xref,"x",!1),v=o.cleanId(f.yref,"y",!1),d=a.x.test(b),m=a.y.test(v);if(d||m){c||A.pushUnique(p._basePlotModules,n);var x=!1;d&&i.indexOf(b)===-1&&(i.push(b),x=!0),m&&l.indexOf(v)===-1&&(l.push(v),x=!0),x&&d&&m&&u.push(b+v)}}}}}},57952:function(Y,O,e){var M=e(33428),A=e(24040),o=e(3400),w=e(7316),_=e(43616),p=e(84888)._M,s=e(79811),n=e(33816),a=e(9616),r=o.ensureSingle;function i(f,b,v){return o.ensureSingle(f,b,v,function(d){d.datum(v)})}function l(f,b,v,d,m){for(var x,y,T,h=n.traceLayerClasses,E=f._fullLayout,k=E._modules,L=[],P=[],I=0;I<k.length;I++){var z=(x=k[I]).name,F=A.modules[z].categories;if(F.svg){var U=x.layerName||z+"layer",R=x.plot;T=(y=p(v,R))[0],v=y[1],T.length&&L.push({i:h.indexOf(U),className:U,plotMethod:R,cdModule:T}),F.zoomScale&&P.push("."+U)}}L.sort(function(B,q){return B.i-q.i});var j=b.plot.selectAll("g.mlayer").data(L,function(B){return B.className});if(j.enter().append("g").attr("class",function(B){return B.className}).classed("mlayer",!0).classed("rangeplot",b.isRangePlot),j.exit().remove(),j.order(),j.each(function(B){var q=M.select(this),V=B.className;B.plotMethod(f,b,B.cdModule,q,d,m),n.clipOnAxisFalseQuery.indexOf("."+V)===-1&&_.setClipUrl(q,b.layerClipId,f)}),E._has("scattergl")&&(x=A.getModule("scattergl"),T=p(v,x)[0],x.plot(f,b,T)),!f._context.staticPlot&&(b._hasClipOnAxisFalse&&(b.clipOnAxisFalseTraces=b.plot.selectAll(n.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),P.length)){var Z=b.plot.selectAll(P.join(",")).selectAll(".trace");b.zoomScalePts=Z.selectAll("path.point"),b.zoomScaleTxt=Z.selectAll(".textpoint")}}function u(f,b){var v=b.plotgroup,d=b.id,m=n.layerValue2layerClass[b.xaxis.layer],x=n.layerValue2layerClass[b.yaxis.layer],y=f._fullLayout._hasOnlyLargeSploms;if(b.mainplot){var T=b.mainplotinfo,h=T.plotgroup,E=d+"-x",k=d+"-y";b.minorGridlayer=T.minorGridlayer,b.gridlayer=T.gridlayer,b.zerolinelayer=T.zerolinelayer,r(T.overlinesBelow,"path",E),r(T.overlinesBelow,"path",k),r(T.overaxesBelow,"g",E),r(T.overaxesBelow,"g",k),b.plot=r(T.overplot,"g",d),r(T.overlinesAbove,"path",E),r(T.overlinesAbove,"path",k),r(T.overaxesAbove,"g",E),r(T.overaxesAbove,"g",k),b.xlines=h.select(".overlines-"+m).select("."+E),b.ylines=h.select(".overlines-"+x).select("."+k),b.xaxislayer=h.select(".overaxes-"+m).select("."+E),b.yaxislayer=h.select(".overaxes-"+x).select("."+k)}else if(y)b.xlines=r(v,"path","xlines-above"),b.ylines=r(v,"path","ylines-above"),b.xaxislayer=r(v,"g","xaxislayer-above"),b.yaxislayer=r(v,"g","yaxislayer-above");else{var L=r(v,"g","layer-subplot");b.shapelayer=r(L,"g","shapelayer"),b.imagelayer=r(L,"g","imagelayer"),b.minorGridlayer=r(v,"g","minor-gridlayer"),b.gridlayer=r(v,"g","gridlayer"),b.zerolinelayer=r(v,"g","zerolinelayer"),r(v,"path","xlines-below"),r(v,"path","ylines-below"),b.overlinesBelow=r(v,"g","overlines-below"),r(v,"g","xaxislayer-below"),r(v,"g","yaxislayer-below"),b.overaxesBelow=r(v,"g","overaxes-below"),b.plot=r(v,"g","plot"),b.overplot=r(v,"g","overplot"),b.xlines=r(v,"path","xlines-above"),b.ylines=r(v,"path","ylines-above"),b.overlinesAbove=r(v,"g","overlines-above"),r(v,"g","xaxislayer-above"),r(v,"g","yaxislayer-above"),b.overaxesAbove=r(v,"g","overaxes-above"),b.xlines=v.select(".xlines-"+m),b.ylines=v.select(".ylines-"+x),b.xaxislayer=v.select(".xaxislayer-"+m),b.yaxislayer=v.select(".yaxislayer-"+x)}y||(i(b.minorGridlayer,"g",b.xaxis._id),i(b.minorGridlayer,"g",b.yaxis._id),b.minorGridlayer.selectAll("g").map(function(P){return P[0]}).sort(s.idSort),i(b.gridlayer,"g",b.xaxis._id),i(b.gridlayer,"g",b.yaxis._id),b.gridlayer.selectAll("g").map(function(P){return P[0]}).sort(s.idSort)),b.xlines.style("fill","none").classed("crisp",!0),b.ylines.style("fill","none").classed("crisp",!0)}function c(f,b){if(f){var v={};for(var d in f.each(function(T){var h=T[0];M.select(this).remove(),g(h,b),v[h]=!0}),b._plots)for(var m=b._plots[d].overlays||[],x=0;x<m.length;x++){var y=m[x];v[y.id]&&y.plot.selectAll(".trace").remove()}}}function g(f,b){b._draggers.selectAll("g."+f).remove(),b._defs.select("#clip"+b._uid+f+"plot").remove()}O.name="cartesian",O.attr=["xaxis","yaxis"],O.idRoot=["x","y"],O.idRegex=n.idRegex,O.attrRegex=n.attrRegex,O.attributes=e(26720),O.layoutAttributes=e(94724),O.supplyLayoutDefaults=e(67352),O.transitionAxes=e(73736),O.finalizeSubplots=function(f,b){var v,d,m,x=b._subplots,y=x.xaxis,T=x.yaxis,h=x.cartesian,E=h.concat(x.gl2d||[]),k={},L={};for(v=0;v<E.length;v++){var P=E[v].split("y");k[P[0]]=1,L["y"+P[1]]=1}for(v=0;v<y.length;v++)k[d=y[v]]||(m=(f[s.id2name(d)]||{}).anchor,n.idRegex.y.test(m)||(m="y"),h.push(d+m),E.push(d+m),L[m]||(L[m]=1,o.pushUnique(T,m)));for(v=0;v<T.length;v++)L[m=T[v]]||(d=(f[s.id2name(m)]||{}).anchor,n.idRegex.x.test(d)||(d="x"),h.push(d+m),E.push(d+m),k[d]||(k[d]=1,o.pushUnique(y,d)));if(!E.length){for(var I in d="",m="",f)n.attrRegex.test(I)&&(I.charAt(0)==="x"?(!d||+I.substr(5)<+d.substr(5))&&(d=I):(!m||+I.substr(5)<+m.substr(5))&&(m=I));d=d?s.name2id(d):"x",m=m?s.name2id(m):"y",y.push(d),T.push(m),h.push(d+m)}},O.plot=function(f,b,v,d){var m,x=f._fullLayout,y=x._subplots.cartesian,T=f.calcdata;if(!Array.isArray(b))for(b=[],m=0;m<T.length;m++)b.push(m);for(m=0;m<y.length;m++){for(var h,E=y[m],k=x._plots[E],L=[],P=0;P<T.length;P++){var I=T[P],z=I[0].trace;z.xaxis+z.yaxis===E&&((b.indexOf(z.index)!==-1||z.carpet)&&(h&&h[0].trace.xaxis+h[0].trace.yaxis===E&&["tonextx","tonexty","tonext"].indexOf(z.fill)!==-1&&L.indexOf(h)===-1&&L.push(h),L.push(I)),h=I)}l(f,k,L,v,d)}},O.clean=function(f,b,v,d){var m,x,y,T=d._plots||{},h=b._plots||{},E=d._subplots||{};if(d._hasOnlyLargeSploms&&!b._hasOnlyLargeSploms)for(y in T)(m=T[y]).plotgroup&&m.plotgroup.remove();var k=d._has&&d._has("gl"),L=b._has&&b._has("gl");if(k&&!L)for(y in T)(m=T[y])._scene&&m._scene.destroy();if(E.xaxis&&E.yaxis){var P=s.listIds({_fullLayout:d});for(x=0;x<P.length;x++){var I=P[x];b[s.id2name(I)]||d._infolayer.selectAll(".g-"+I+"title").remove()}}var z=d._has&&d._has("cartesian"),F=b._has&&b._has("cartesian");if(z&&!F)c(d._cartesianlayer.selectAll(".subplot"),d),d._defs.selectAll(".axesclip").remove(),delete d._axisConstraintGroups,delete d._axisMatchGroups;else if(E.cartesian)for(x=0;x<E.cartesian.length;x++){var U=E.cartesian[x];if(!h[U]){var R="."+U+",."+U+"-x,."+U+"-y";d._cartesianlayer.selectAll(R).remove(),g(U,d)}}},O.drawFramework=function(f){var b=f._fullLayout,v=function(m){var x,y,T,h,E,k,L=m._fullLayout,P=L._subplots.cartesian,I=P.length,z=[],F=[];for(x=0;x<I;x++){T=P[x],E=(h=L._plots[T]).xaxis,k=h.yaxis;var U=E._mainAxis,R=k._mainAxis,j=U._id+R._id,Z=L._plots[j];h.overlays=[],j!==T&&Z?(h.mainplot=j,h.mainplotinfo=Z,F.push(T)):(h.mainplot=void 0,h.mainplotinfo=void 0,z.push(T))}for(x=0;x<F.length;x++)T=F[x],(h=L._plots[T]).mainplotinfo.overlays.push(h);var B=z.concat(F),q=new Array(I);for(x=0;x<I;x++){T=B[x],E=(h=L._plots[T]).xaxis,k=h.yaxis;var V=[T,E.layer,k.layer,E.overlaying||"",k.overlaying||""];for(y=0;y<h.overlays.length;y++)V.push(h.overlays[y].id);q[x]=V}return q}(f),d=b._cartesianlayer.selectAll(".subplot").data(v,String);d.enter().append("g").attr("class",function(m){return"subplot "+m[0]}),d.order(),d.exit().call(c,b),d.each(function(m){var x=m[0],y=b._plots[x];y.plotgroup=M.select(this),u(f,y),y.draglayer=r(b._draggers,"g",x)})},O.rangePlot=function(f,b,v){u(f,b),l(f,b,v),w.style(f)},O.toSVG=function(f){var b=f._fullLayout._glimages,v=M.select(f).selectAll(".svg-container");v.filter(function(d,m){return m===v.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var d=this,m=d.toDataURL("image/png");b.append("svg:image").attr({xmlns:a.svg,"xlink:href":m,preserveAspectRatio:"none",x:0,y:0,width:d.style.width,height:d.style.height})})},O.updateFx=e(42464).updateFx},94724:function(Y,O,e){var M=e(25376),A=e(22548),o=e(98192).u,w=e(92880).extendFlat,_=e(31780).templatedArray,p=e(29736).descriptionWithDates,s=e(39032).ONEDAY,n=e(33816),a=n.HOUR_PATTERN,r=n.WEEKDAY_PATTERN,i={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},l=w({},i,{values:i.values.slice().concat(["sync"])});function u(E){return{valType:"integer",min:0,dflt:E?5:0,editType:"ticks"}}var c={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},g={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},f={valType:"data_array",editType:"ticks"},b={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function v(E){var k={valType:"number",min:0,editType:"ticks"};return E||(k.dflt=5),k}function d(E){var k={valType:"number",min:0,editType:"ticks"};return E||(k.dflt=1),k}var m={valType:"color",dflt:A.defaultLine,editType:"ticks"},x={valType:"color",dflt:A.lightLine,editType:"ticks"};function y(E){var k={valType:"number",min:0,editType:"ticks"};return E||(k.dflt=1),k}var T=w({},o,{editType:"ticks"}),h={valType:"boolean",editType:"ticks"};Y.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:A.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:M({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[n.idRegex.x.toString(),n.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"calc"},rangebreaks:_("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[r,a,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:s},editType:"calc"}),tickmode:l,nticks:u(),tick0:c,dtick:g,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:f,ticktext:{valType:"data_array",editType:"ticks"},ticks:b,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:v(),tickwidth:d(),tickcolor:m,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:w({},o,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:M({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:p("tick label")},tickformatstops:_("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:p("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:A.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:h,gridcolor:x,gridwidth:y(),griddash:T,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:A.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:A.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},minor:{tickmode:i,nticks:u("minor"),tick0:c,dtick:g,tickvals:f,ticks:b,ticklen:v("minor"),tickwidth:d("minor"),tickcolor:m,gridcolor:x,gridwidth:y("minor"),griddash:T,showgrid:h,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:M({editType:"ticks"})}}},67352:function(Y,O,e){var M=e(3400),A=e(76308),o=e(10624).isUnifiedHover,w=e(41008),_=e(31780),p=e(64859),s=e(94724),n=e(14944),a=e(28336),r=e(71888),i=e(37668),l=e(79811),u=l.id2name,c=l.name2id,g=e(33816).AX_ID_PATTERN,f=e(24040),b=f.traceIs,v=f.getComponentMethod;function d(m,x,y){Array.isArray(m[x])?m[x].push(y):m[x]=[y]}Y.exports=function(m,x,y){var T,h,E=x.autotypenumbers,k={},L={},P={},I={},z={},F={},U={},R={},j={},Z={};for(T=0;T<y.length;T++){var B=y[T];if(b(B,"cartesian")||b(B,"gl2d")){var q,V;if(B.xaxis)q=u(B.xaxis),d(k,q,B);else if(B.xaxes)for(h=0;h<B.xaxes.length;h++)d(k,u(B.xaxes[h]),B);if(B.yaxis)V=u(B.yaxis),d(k,V,B);else if(B.yaxes)for(h=0;h<B.yaxes.length;h++)d(k,u(B.yaxes[h]),B);B.type==="funnel"?B.orientation==="h"?(q&&(L[q]=!0),V&&(U[V]=!0)):V&&(P[V]=!0):B.type==="image"?(V&&(R[V]=!0),q&&(R[q]=!0)):(V&&(z[V]=!0,F[V]=!0),b(B,"carpet")&&(B.type!=="carpet"||B._cheater)||q&&(I[q]=!0)),B.type==="carpet"&&B._cheater&&q&&(L[q]=!0),b(B,"2dMap")&&(j[q]=!0,j[V]=!0),b(B,"oriented")&&(Z[B.orientation==="h"?V:q]=!0)}}var ne=x._subplots,ee=ne.xaxis,$=ne.yaxis,J=M.simpleMap(ee,u),K=M.simpleMap($,u),te=J.concat(K),ie=A.background;ee.length&&$.length&&(ie=M.coerce(m,x,p,"plot_bgcolor"));var ae,se,ce,de,ge,ve=A.combine(ie,x.paper_bgcolor);function be(){var nt=k[ae]||[];ge._traceIndices=nt.map(function(At){return At._expandedIndex}),ge._annIndices=[],ge._shapeIndices=[],ge._selectionIndices=[],ge._imgIndices=[],ge._subplotsWith=[],ge._counterAxes=[],ge._name=ge._attr=ae,ge._id=se}function me(nt,At){return M.coerce(de,ge,s,nt,At)}function Se(nt,At){return M.coerce2(de,ge,s,nt,At)}function we(nt){return nt==="x"?$:ee}function _e(nt,At){for(var Rt=nt==="x"?J:K,Ft=[],It=0;It<Rt.length;It++){var Ge=Rt[It];Ge===At||(m[Ge]||{}).overlaying||Ft.push(c(Ge))}return Ft}var oe={x:we("x"),y:we("y")},le=oe.x.concat(oe.y),pe={},Ee=[];function Te(){var nt=de.matches;g.test(nt)&&le.indexOf(nt)===-1&&(pe[nt]=de.type,Ee=Object.keys(pe))}var Me=w(m,x),Le=o(Me);for(T=0;T<te.length;T++){ae=te[T],se=c(ae),ce=ae.charAt(0),M.isPlainObject(m[ae])||(m[ae]={}),de=m[ae],ge=_.newContainer(x,ae,ce+"axis"),be();var Ie=ce==="x"&&!I[ae]&&L[ae]||ce==="y"&&!z[ae]&&P[ae],he=ce==="y"&&(!F[ae]&&U[ae]||R[ae]),xe={hasMinor:!0,letter:ce,font:x.font,outerTicks:j[ae],showGrid:!Z[ae],data:k[ae]||[],bgColor:ve,calendar:x.calendar,automargin:!0,visibleDflt:Ie,reverseDflt:he,autotypenumbersDflt:E,splomStash:((x._splomAxes||{})[ce]||{})[se],noAutotickangles:ce==="y"};me("uirevision",x.uirevision),n(de,ge,me,xe),a(de,ge,me,xe,x);var ke=Le&&ce===Me.charAt(0),ze=Se("spikecolor",Le?ge.color:void 0),Re=Se("spikethickness",Le?1.5:void 0),Oe=Se("spikedash",Le?"dot":void 0),Ve=Se("spikemode",Le?"across":void 0),qe=Se("spikesnap");me("showspikes",!!(ke||ze||Re||Oe||Ve||qe))||(delete ge.spikecolor,delete ge.spikethickness,delete ge.spikedash,delete ge.spikemode,delete ge.spikesnap);var Je=u(de.overlaying),ot=[0,1];if(x[Je]!==void 0){var rt=u(x[Je].anchor);x[rt]!==void 0&&(ot=x[rt].domain)}i(de,ge,me,{letter:ce,counterAxes:oe[ce],overlayableAxes:_e(ce,ae),grid:x.grid,overlayingDomain:ot}),me("title.standoff"),Te(),ge._input=de}for(T=0;T<Ee.length;){se=Ee[T++],ce=(ae=u(se)).charAt(0),M.isPlainObject(m[ae])||(m[ae]={}),de=m[ae],ge=_.newContainer(x,ae,ce+"axis"),be();var dt={letter:ce,font:x.font,outerTicks:j[ae],showGrid:!Z[ae],data:[],bgColor:ve,calendar:x.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:E,splomStash:((x._splomAxes||{})[ce]||{})[se]};me("uirevision",x.uirevision),ge.type=pe[se]||"linear",a(de,ge,me,dt,x),i(de,ge,me,{letter:ce,counterAxes:oe[ce],overlayableAxes:_e(ce,ae),grid:x.grid}),me("fixedrange"),Te(),ge._input=de}var _t=v("rangeslider","handleDefaults"),yt=v("rangeselector","handleDefaults");for(T=0;T<J.length;T++)ae=J[T],de=m[ae],ge=x[ae],_t(m,x,ae),ge.type==="date"&&yt(de,ge,x,K,ge.calendar),me("fixedrange");for(T=0;T<K.length;T++){ae=K[T],de=m[ae],ge=x[ae];var et=x[u(ge.anchor)];me("fixedrange",v("rangeslider","isVisible")(et))}r.handleDefaults(m,x,{axIds:le.concat(Ee).sort(l.idSort),axHasImage:R})}},42136:function(Y,O,e){var M=e(49760).mix,A=e(22548),o=e(3400);Y.exports=function(w,_,p,s){var n=(s=s||{}).dfltColor;function a(m,x){return o.coerce2(w,_,s.attributes,m,x)}var r=a("linecolor",n),i=a("linewidth");p("showline",s.showLine||!!r||!!i)||(delete _.linecolor,delete _.linewidth);var l=a("gridcolor",M(n,s.bgColor,s.blend||A.lightFraction).toRgbString()),u=a("gridwidth"),c=a("griddash");if(p("showgrid",s.showGrid||!!l||!!u||!!c)||(delete _.gridcolor,delete _.gridwidth,delete _.griddash),s.hasMinor){var g=a("minor.gridcolor",M(_.gridcolor,s.bgColor,67).toRgbString()),f=a("minor.gridwidth",_.gridwidth||1),b=a("minor.griddash",_.griddash||"solid");p("minor.showgrid",!!g||!!f||!!b)||(delete _.minor.gridcolor,delete _.minor.gridwidth,delete _.minor.griddash)}if(!s.noZeroLine){var v=a("zerolinecolor",n),d=a("zerolinewidth");p("zeroline",s.showGrid||!!v||!!d)||(delete _.zerolinecolor,delete _.zerolinewidth)}}},37668:function(Y,O,e){var M=e(38248),A=e(3400);Y.exports=function(o,w,_,p){var s,n,a,r,i,l,u=p.counterAxes||[],c=p.overlayableAxes||[],g=p.letter,f=p.grid,b=p.overlayingDomain;f&&(n=f._domains[g][f._axisMap[w._id]],s=f._anchors[w._id],n&&(a=f[g+"side"].split(" ")[0],r=f.domain[g][a==="right"||a==="top"?1:0])),n=n||[0,1],s=s||(M(o.position)?"free":u[0]||"free"),a=a||(g==="x"?"bottom":"left"),r=r||0,i=0,l=!1;var v=A.coerce(o,w,{anchor:{valType:"enumerated",values:["free"].concat(u),dflt:s}},"anchor"),d=A.coerce(o,w,{side:{valType:"enumerated",values:g==="x"?["bottom","top"]:["left","right"],dflt:a}},"side");v==="free"&&(g==="y"&&(_("autoshift")&&(r=d==="left"?b[0]:b[1],l=!w.automargin||w.automargin,i=d==="left"?-3:3),_("shift",i)),_("position",r)),_("automargin",l);var m=!1;if(c.length&&(m=A.coerce(o,w,{overlaying:{valType:"enumerated",values:[!1].concat(c),dflt:!1}},"overlaying")),!m){var x=_("domain",n);x[0]>x[1]-.000244140625&&(w.domain=n),A.noneOrAll(o.domain,w.domain,n),w.tickmode==="sync"&&(w.tickmode="auto")}return _("layer"),w}},42568:function(Y,O,e){var M=e(85024);Y.exports=function(A,o,w,_,p){p||(p={});var s=p.tickSuffixDflt,n=M(A);w("tickprefix")&&w("showtickprefix",n),w("ticksuffix",s)&&w("showticksuffix",n)}},96312:function(Y,O,e){var M=e(76808);Y.exports=function(A,o,w,_){var p=o._template||{},s=o.type||p.type||"-";w("minallowed"),w("maxallowed");var n,a=w("range");a||_.noInsiderange||s==="log"||(!(n=w("insiderange"))||n[0]!==null&&n[1]!==null||(o.insiderange=!1,n=void 0),n&&(a=w("range",n)));var r,i=o.getAutorangeDflt(a,_),l=w("autorange",i);!a||(a[0]!==null||a[1]!==null)&&(a[0]!==null&&a[1]!==null||l!=="reversed"&&l!==!0)&&(a[0]===null||l!=="min"&&l!=="max reversed")&&(a[1]===null||l!=="max"&&l!=="min reversed")||(a=void 0,delete o.range,o.autorange=!0,r=!0),r||(l=w("autorange",i=o.getAutorangeDflt(a,_))),l&&(M(w,l,a),s!=="linear"&&s!=="-"||w("rangemode")),o.cleanRange()}},21160:function(Y,O,e){var M=e(84284).FROM_BL;Y.exports=function(A,o,w){w===void 0&&(w=M[A.constraintoward||"center"]);var _=[A.r2l(A.range[0]),A.r2l(A.range[1])],p=_[0]+(_[1]-_[0])*w;A.range=A._input.range=[A.l2r(p+(_[0]-p)*o),A.l2r(p+(_[1]-p)*o)],A.setScale()}},78344:function(Y,O,e){var M=e(33428),A=e(94336).E9,o=e(3400),w=o.numberFormat,_=e(38248),p=o.cleanNumber,s=o.ms2DateTime,n=o.dateTime2ms,a=o.ensureNumber,r=o.isArrayOrTypedArray,i=e(39032),l=i.FP_SAFE,u=i.BADNUM,c=i.LOG_CLIP,g=i.ONEWEEK,f=i.ONEDAY,b=i.ONEHOUR,v=i.ONEMIN,d=i.ONESEC,m=e(79811),x=e(33816),y=x.HOUR_PATTERN,T=x.WEEKDAY_PATTERN;function h(k){return Math.pow(10,k)}function E(k){return k!=null}Y.exports=function(k,L){L=L||{};var P=k._id||"x",I=P.charAt(0);function z(te,ie){if(te>0)return Math.log(te)/Math.LN10;if(te<=0&&ie&&k.range&&k.range.length===2){var ae=k.range[0],se=k.range[1];return .5*(ae+se-2*c*Math.abs(ae-se))}return u}function F(te,ie,ae,se){if((se||{}).msUTC&&_(te))return+te;var ce=n(te,ae||k.calendar);if(ce===u){if(!_(te))return u;te=+te;var de=Math.floor(10*o.mod(te+.05,1)),ge=Math.round(te-de/10);ce=n(new Date(ge))+de/10}return ce}function U(te,ie,ae){return s(te,ie,ae||k.calendar)}function R(te){return k._categories[Math.round(te)]}function j(te){if(E(te)){if(k._categoriesMap===void 0&&(k._categoriesMap={}),k._categoriesMap[te]!==void 0)return k._categoriesMap[te];k._categories.push(typeof te=="number"?String(te):te);var ie=k._categories.length-1;return k._categoriesMap[te]=ie,ie}return u}function Z(te){if(k._categoriesMap)return k._categoriesMap[te]}function B(te){var ie=Z(te);return ie!==void 0?ie:_(te)?+te:void 0}function q(te){return _(te)?+te:Z(te)}function V(te,ie,ae){return M.round(ae+ie*te,2)}function ne(te,ie,ae){return(te-ae)/ie}var ee=function(te){return _(te)?V(te,k._m,k._b):u},$=function(te){return ne(te,k._m,k._b)};if(k.rangebreaks){var J=I==="y";ee=function(te){if(!_(te))return u;var ie=k._rangebreaks.length;if(!ie)return V(te,k._m,k._b);var ae=J;k.range[0]>k.range[1]&&(ae=!ae);for(var se=ae?-1:1,ce=se*te,de=0,ge=0;ge<ie;ge++){var ve=se*k._rangebreaks[ge].min,be=se*k._rangebreaks[ge].max;if(ce<ve)break;if(!(ce>be)){de=ce<(ve+be)/2?ge:ge+1;break}de=ge+1}var me=k._B[de]||0;return isFinite(me)?V(te,k._m2,me):0},$=function(te){var ie=k._rangebreaks.length;if(!ie)return ne(te,k._m,k._b);for(var ae=0,se=0;se<ie&&!(te<k._rangebreaks[se].pmin);se++)te>k._rangebreaks[se].pmax&&(ae=se+1);return ne(te,k._m2,k._B[ae])}}k.c2l=k.type==="log"?z:a,k.l2c=k.type==="log"?h:a,k.l2p=ee,k.p2l=$,k.c2p=k.type==="log"?function(te,ie){return ee(z(te,ie))}:ee,k.p2c=k.type==="log"?function(te){return h($(te))}:$,["linear","-"].indexOf(k.type)!==-1?(k.d2r=k.r2d=k.d2c=k.r2c=k.d2l=k.r2l=p,k.c2d=k.c2r=k.l2d=k.l2r=a,k.d2p=k.r2p=function(te){return k.l2p(p(te))},k.p2d=k.p2r=$,k.cleanPos=a):k.type==="log"?(k.d2r=k.d2l=function(te,ie){return z(p(te),ie)},k.r2d=k.r2c=function(te){return h(p(te))},k.d2c=k.r2l=p,k.c2d=k.l2r=a,k.c2r=z,k.l2d=h,k.d2p=function(te,ie){return k.l2p(k.d2r(te,ie))},k.p2d=function(te){return h($(te))},k.r2p=function(te){return k.l2p(p(te))},k.p2r=$,k.cleanPos=a):k.type==="date"?(k.d2r=k.r2d=o.identity,k.d2c=k.r2c=k.d2l=k.r2l=F,k.c2d=k.c2r=k.l2d=k.l2r=U,k.d2p=k.r2p=function(te,ie,ae){return k.l2p(F(te,0,ae))},k.p2d=k.p2r=function(te,ie,ae){return U($(te),ie,ae)},k.cleanPos=function(te){return o.cleanDate(te,u,k.calendar)}):k.type==="category"?(k.d2c=k.d2l=j,k.r2d=k.c2d=k.l2d=R,k.d2r=k.d2l_noadd=B,k.r2c=function(te){var ie=q(te);return ie!==void 0?ie:k.fraction2r(.5)},k.l2r=k.c2r=a,k.r2l=q,k.d2p=function(te){return k.l2p(k.r2c(te))},k.p2d=function(te){return R($(te))},k.r2p=k.d2p,k.p2r=$,k.cleanPos=function(te){return typeof te=="string"&&te!==""?te:a(te)}):k.type==="multicategory"&&(k.r2d=k.c2d=k.l2d=R,k.d2r=k.d2l_noadd=B,k.r2c=function(te){var ie=B(te);return ie!==void 0?ie:k.fraction2r(.5)},k.r2c_just_indices=Z,k.l2r=k.c2r=a,k.r2l=B,k.d2p=function(te){return k.l2p(k.r2c(te))},k.p2d=function(te){return R($(te))},k.r2p=k.d2p,k.p2r=$,k.cleanPos=function(te){return Array.isArray(te)||typeof te=="string"&&te!==""?te:a(te)},k.setupMultiCategory=function(te){var ie,ae,se=k._traceIndices,ce=k._matchGroup;if(ce&&k._categories.length===0){for(var de in ce)if(de!==P){var ge=L[m.id2name(de)];se=se.concat(ge._traceIndices)}}var ve=[[0,{}],[0,{}]],be=[];for(ie=0;ie<se.length;ie++){var me=te[se[ie]];if(I in me){var Se=me[I],we=me._length||o.minRowLength(Se);if(r(Se[0])&&r(Se[1]))for(ae=0;ae<we;ae++){var _e=Se[0][ae],oe=Se[1][ae];E(_e)&&E(oe)&&(be.push([_e,oe]),_e in ve[0][1]||(ve[0][1][_e]=ve[0][0]++),oe in ve[1][1]||(ve[1][1][oe]=ve[1][0]++))}}}for(be.sort(function(le,pe){var Ee=ve[0][1],Te=Ee[le[0]]-Ee[pe[0]];if(Te)return Te;var Me=ve[1][1];return Me[le[1]]-Me[pe[1]]}),ie=0;ie<be.length;ie++)j(be[ie])}),k.fraction2r=function(te){var ie=k.r2l(k.range[0]),ae=k.r2l(k.range[1]);return k.l2r(ie+te*(ae-ie))},k.r2fraction=function(te){var ie=k.r2l(k.range[0]),ae=k.r2l(k.range[1]);return(k.r2l(te)-ie)/(ae-ie)},k.limitRange=function(te){var ie=k.minallowed,ae=k.maxallowed;if(ie!==void 0||ae!==void 0){te||(te="range");var se=o.nestedProperty(k,te).get(),ce=o.simpleMap(se,k.r2l),de=ce[1]<ce[0];de&&ce.reverse();var ge=o.simpleMap([ie,ae],k.r2l);if(ie!==void 0&&ce[0]<ge[0]&&(se[de?1:0]=ie),ae!==void 0&&ce[1]>ge[1]&&(se[de?0:1]=ae),se[0]===se[1]){var ve=k.l2r(ie),be=k.l2r(ae);if(ie!==void 0){var me=ve+1;ae!==void 0&&(me=Math.min(me,be)),se[de?1:0]=me}if(ae!==void 0){var Se=be+1;ie!==void 0&&(Se=Math.max(Se,ve)),se[de?0:1]=Se}}}},k.cleanRange=function(te,ie){k._cleanRange(te,ie),k.limitRange(te)},k._cleanRange=function(te,ie){ie||(ie={}),te||(te="range");var ae,se,ce=o.nestedProperty(k,te).get();if(se=(se=k.type==="date"?o.dfltRange(k.calendar):I==="y"?x.DFLTRANGEY:k._name==="realaxis"?[0,1]:ie.dfltRange||x.DFLTRANGEX).slice(),k.rangemode!=="tozero"&&k.rangemode!=="nonnegative"||(se[0]=0),ce&&ce.length===2){var de=ce[0]===null,ge=ce[1]===null;for(k.type!=="date"||k.autorange||(ce[0]=o.cleanDate(ce[0],u,k.calendar),ce[1]=o.cleanDate(ce[1],u,k.calendar)),ae=0;ae<2;ae++)if(k.type==="date"){if(!o.isDateTime(ce[ae],k.calendar)){k[te]=se;break}if(k.r2l(ce[0])===k.r2l(ce[1])){var ve=o.constrain(k.r2l(ce[0]),o.MIN_MS+1e3,o.MAX_MS-1e3);ce[0]=k.l2r(ve-1e3),ce[1]=k.l2r(ve+1e3);break}}else{if(!_(ce[ae])){if(de||ge||!_(ce[1-ae])){k[te]=se;break}ce[ae]=ce[1-ae]*(ae?10:.1)}if(ce[ae]<-l?ce[ae]=-l:ce[ae]>l&&(ce[ae]=l),ce[0]===ce[1]){var be=Math.max(1,Math.abs(1e-6*ce[0]));ce[0]-=be,ce[1]+=be}}}else o.nestedProperty(k,te).set(se)},k.setScale=function(te){var ie=L._size;if(k.overlaying){var ae=m.getFromId({_fullLayout:L},k.overlaying);k.domain=ae.domain}var se=te&&k._r?"_r":"range",ce=k.calendar;k.cleanRange(se);var de,ge,ve=k.r2l(k[se][0],ce),be=k.r2l(k[se][1],ce),me=I==="y";if(me?(k._offset=ie.t+(1-k.domain[1])*ie.h,k._length=ie.h*(k.domain[1]-k.domain[0]),k._m=k._length/(ve-be),k._b=-k._m*be):(k._offset=ie.l+k.domain[0]*ie.w,k._length=ie.w*(k.domain[1]-k.domain[0]),k._m=k._length/(be-ve),k._b=-k._m*ve),k._rangebreaks=[],k._lBreaks=0,k._m2=0,k._B=[],k.rangebreaks&&(k._rangebreaks=k.locateBreaks(Math.min(ve,be),Math.max(ve,be)),k._rangebreaks.length)){for(de=0;de<k._rangebreaks.length;de++)ge=k._rangebreaks[de],k._lBreaks+=Math.abs(ge.max-ge.min);var Se=me;ve>be&&(Se=!Se),Se&&k._rangebreaks.reverse();var we=Se?-1:1;for(k._m2=we*k._length/(Math.abs(be-ve)-k._lBreaks),k._B.push(-k._m2*(me?be:ve)),de=0;de<k._rangebreaks.length;de++)ge=k._rangebreaks[de],k._B.push(k._B[k._B.length-1]-we*k._m2*(ge.max-ge.min));for(de=0;de<k._rangebreaks.length;de++)(ge=k._rangebreaks[de]).pmin=ee(ge.min),ge.pmax=ee(ge.max)}if(!isFinite(k._m)||!isFinite(k._b)||k._length<0)throw L._replotting=!1,new Error("Something went wrong with axis scaling")},k.maskBreaks=function(te){var ie,ae,se,ce,de,ge=k.rangebreaks||[];ge._cachedPatterns||(ge._cachedPatterns=ge.map(function(_e){return _e.enabled&&_e.bounds?o.simpleMap(_e.bounds,_e.pattern?p:k.d2c):null})),ge._cachedValues||(ge._cachedValues=ge.map(function(_e){return _e.enabled&&_e.values?o.simpleMap(_e.values,k.d2c).sort(o.sorterAsc):null}));for(var ve=0;ve<ge.length;ve++){var be=ge[ve];if(be.enabled){if(be.bounds){var me=be.pattern;switch(ae=(ie=ge._cachedPatterns[ve])[0],se=ie[1],me){case T:ce=(de=new Date(te)).getUTCDay(),ae>se&&(se+=7,ce<ae&&(ce+=7));break;case y:ce=(de=new Date(te)).getUTCHours()+(de.getUTCMinutes()/60+de.getUTCSeconds()/3600+de.getUTCMilliseconds()/36e5),ae>se&&(se+=24,ce<ae&&(ce+=24));break;case"":ce=te}if(ce>=ae&&ce<se)return u}else for(var Se=ge._cachedValues[ve],we=0;we<Se.length;we++)if(se=(ae=Se[we])+be.dvalue,te>=ae&&te<se)return u}}return te},k.locateBreaks=function(te,ie){var ae,se,ce,de,ge=[];if(!k.rangebreaks)return ge;var ve=k.rangebreaks.slice().sort(function(Me,Le){return Me.pattern===T&&Le.pattern===y?-1:Le.pattern===T&&Me.pattern===y?1:0}),be=function(Me,Le){if((Me=o.constrain(Me,te,ie))!==(Le=o.constrain(Le,te,ie))){for(var Ie=!0,he=0;he<ge.length;he++){var xe=ge[he];Me<xe.max&&Le>=xe.min&&(Me<xe.min&&(xe.min=Me),Le>xe.max&&(xe.max=Le),Ie=!1)}Ie&&ge.push({min:Me,max:Le})}};for(ae=0;ae<ve.length;ae++){var me=ve[ae];if(me.enabled)if(me.bounds){var Se=te,we=ie;me.pattern&&(Se=Math.floor(Se)),ce=(se=o.simpleMap(me.bounds,me.pattern?p:k.r2l))[0],de=se[1];var _e,oe,le=new Date(Se);switch(me.pattern){case T:oe=g,_e=(de-ce+(de<ce?7:0))*f,Se+=ce*f-(le.getUTCDay()*f+le.getUTCHours()*b+le.getUTCMinutes()*v+le.getUTCSeconds()*d+le.getUTCMilliseconds());break;case y:oe=f,_e=(de-ce+(de<ce?24:0))*b,Se+=ce*b-(le.getUTCHours()*b+le.getUTCMinutes()*v+le.getUTCSeconds()*d+le.getUTCMilliseconds());break;default:Se=Math.min(se[0],se[1]),_e=oe=(we=Math.max(se[0],se[1]))-Se}for(var pe=Se;pe<we;pe+=oe)be(pe,pe+_e)}else for(var Ee=o.simpleMap(me.values,k.d2c),Te=0;Te<Ee.length;Te++)be(ce=Ee[Te],de=ce+me.dvalue)}return ge.sort(function(Me,Le){return Me.min-Le.min}),ge},k.makeCalcdata=function(te,ie,ae){var se,ce,de,ge,ve=k.type,be=ve==="date"&&te[ie+"calendar"];if(ie in te){if(se=te[ie],ge=te._length||o.minRowLength(se),o.isTypedArray(se)&&(ve==="linear"||ve==="log")){if(ge===se.length)return se;if(se.subarray)return se.subarray(0,ge)}if(ve==="multicategory")return function(we,_e){for(var oe=new Array(_e),le=0;le<_e;le++){var pe=(we[0]||[])[le],Ee=(we[1]||[])[le];oe[le]=Z([pe,Ee])}return oe}(se,ge);for(ce=new Array(ge),de=0;de<ge;de++)ce[de]=k.d2c(se[de],0,be,ae)}else{var me=ie+"0"in te?k.d2c(te[ie+"0"],0,be):0,Se=te["d"+ie]?Number(te["d"+ie]):1;for(se=te[{x:"y",y:"x"}[ie]],ge=te._length||se.length,ce=new Array(ge),de=0;de<ge;de++)ce[de]=me+de*Se}if(k.rangebreaks)for(de=0;de<ge;de++)ce[de]=k.maskBreaks(ce[de]);return ce},k.isValidRange=function(te,ie){return Array.isArray(te)&&te.length===2&&(ie&&te[0]===null||_(k.r2l(te[0])))&&(ie&&te[1]===null||_(k.r2l(te[1])))},k.getAutorangeDflt=function(te,ie){var ae=!k.isValidRange(te,"nullOk");return ae&&ie&&ie.reverseDflt?ae="reversed":te&&(te[0]===null&&te[1]===null?ae=!0:te[0]===null&&te[1]!==null?ae="min":te[0]!==null&&te[1]===null&&(ae="max")),ae},k.isReversed=function(){var te=k.autorange;return te==="reversed"||te==="min reversed"||te==="max reversed"},k.isPtWithinRange=function(te,ie){var ae=k.c2l(te[I],null,ie),se=k.r2l(k.range[0]),ce=k.r2l(k.range[1]);return se<ce?se<=ae&&ae<=ce:ce<=ae&&ae<=se},k._emptyCategories=function(){k._categories=[],k._categoriesMap={}},k.clearCalc=function(){var te=k._matchGroup;if(te){var ie=null,ae=null;for(var se in te){var ce=L[m.id2name(se)];if(ce._categories){ie=ce._categories,ae=ce._categoriesMap;break}}ie&&ae?(k._categories=ie,k._categoriesMap=ae):k._emptyCategories()}else k._emptyCategories();if(k._initialCategories)for(var de=0;de<k._initialCategories.length;de++)j(k._initialCategories[de])},k.sortByInitialCategories=function(){var te=[];if(k._emptyCategories(),k._initialCategories)for(var ie=0;ie<k._initialCategories.length;ie++)j(k._initialCategories[ie]);te=te.concat(k._traceIndices);var ae=k._matchGroup;for(var se in ae)if(P!==se){var ce=L[m.id2name(se)];ce._categories=k._categories,ce._categoriesMap=k._categoriesMap,te=te.concat(ce._traceIndices)}return te};var K=L._d3locale;k.type==="date"&&(k._dateFormat=K?K.timeFormat:A,k._extraFormat=L._extraFormat),k._separators=L.separators,k._numFormat=K?K.numberFormat:w,delete k._minDtick,delete k._forceTick0}},85024:function(Y){Y.exports=function(O){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(M){return O[M]!==void 0});if(e.every(function(M){return O[M]===O[e[0]]})||e.length===1)return O[e[0]]}},95936:function(Y,O,e){var M=e(3400),A=e(76308).contrast,o=e(94724),w=e(85024),_=e(51272);function p(s,n){function a(r,i){return M.coerce(s,n,o.tickformatstops,r,i)}a("enabled")&&(a("dtickrange"),a("value"))}Y.exports=function(s,n,a,r,i){i||(i={});var l=a("labelalias");M.isPlainObject(l)||delete n.labelalias;var u=w(s);if(a("showticklabels")){var c=i.font||{},g=n.color,f=(n.ticklabelposition||"").indexOf("inside")!==-1?A(i.bgColor):g&&g!==o.color.dflt?g:c.color;if(M.coerceFont(a,"tickfont",{family:c.family,size:c.size,color:f}),i.noTicklabelstep||r==="multicategory"||r==="log"||a("ticklabelstep"),!i.noAng){var b=a("tickangle");i.noAutotickangles||b!=="auto"||a("autotickangles")}if(r!=="category"){var v=a("tickformat");_(s,n,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:p}),n.tickformatstops.length||delete n.tickformatstops,i.noExp||v||r==="date"||(a("showexponent",u),a("exponentformat"),a("minexponent"),a("separatethousands"))}}}},25404:function(Y,O,e){var M=e(3400),A=e(94724);Y.exports=function(o,w,_,p){var s=p.isMinor,n=s?o.minor||{}:o,a=s?w.minor:w,r=s?A.minor:A,i=s?"minor.":"",l=M.coerce2(n,a,r,"ticklen",s?.6*(w.ticklen||5):void 0),u=M.coerce2(n,a,r,"tickwidth",s?w.tickwidth||1:void 0),c=M.coerce2(n,a,r,"tickcolor",(s?w.tickcolor:void 0)||a.color);_(i+"ticks",!s&&p.outerTicks||l||u||c?"outside":"")||(delete a.ticklen,delete a.tickwidth,delete a.tickcolor)}},26332:function(Y,O,e){var M=e(98728),A=e(3400).isArrayOrTypedArray,o=e(38116).isTypedArraySpec,w=e(38116).decodeTypedArraySpec;Y.exports=function(_,p,s,n,a){a||(a={});var r=a.isMinor,i=r?_.minor||{}:_,l=r?p.minor:p,u=r?"minor.":"";function c(m){var x=i[m];return o(x)&&(x=w(x)),x!==void 0?x:(l._template||{})[m]}var g=c("tick0"),f=c("dtick"),b=c("tickvals"),v=s(u+"tickmode",A(b)?"array":f?"linear":"auto");if(v==="auto"||v==="sync")s(u+"nticks");else if(v==="linear"){var d=l.dtick=M.dtick(f,n);l.tick0=M.tick0(g,n,p.calendar,d)}else n!=="multicategory"&&(s(u+"tickvals")===void 0?l.tickmode="auto":r||s("ticktext"))}},73736:function(Y,O,e){var M=e(33428),A=e(24040),o=e(3400),w=e(43616),_=e(54460);Y.exports=function(p,s,n,a){var r=p._fullLayout;if(s.length!==0){var i,l,u,c;a&&(i=a());var g=M.ease(n.easing);return p._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(c),c=null,function(){for(var v={},d=0;d<s.length;d++){var m=s[d],x=m.plotinfo.xaxis,y=m.plotinfo.yaxis;m.xr0&&(v[x._name+".range"]=m.xr0.slice()),m.yr0&&(v[y._name+".range"]=m.yr0.slice())}return A.call("relayout",p,v).then(function(){for(var T=0;T<s.length;T++)f(s[T].plotinfo)})}()}),l=Date.now(),c=window.requestAnimationFrame(function v(){u=Date.now();for(var d=Math.min(1,(u-l)/n.duration),m=g(d),x=0;x<s.length;x++)b(s[x],m);u-l>n.duration?(function(){for(var y={},T=0;T<s.length;T++){var h=s[T],E=h.plotinfo.xaxis,k=h.plotinfo.yaxis;h.xr1&&(y[E._name+".range"]=h.xr1.slice()),h.yr1&&(y[k._name+".range"]=h.yr1.slice())}i&&i(),A.call("relayout",p,y).then(function(){for(var L=0;L<s.length;L++)f(s[L].plotinfo)})}(),c=window.cancelAnimationFrame(v)):c=window.requestAnimationFrame(v)}),Promise.resolve()}function f(v){var d=v.xaxis,m=v.yaxis;r._defs.select("#"+v.clipId+"> rect").call(w.setTranslate,0,0).call(w.setScale,1,1),v.plot.call(w.setTranslate,d._offset,m._offset).call(w.setScale,1,1);var x=v.plot.selectAll(".scatterlayer .trace");x.selectAll(".point").call(w.setPointGroupScale,1,1),x.selectAll(".textpoint").call(w.setTextPointsScale,1,1),x.call(w.hideOutsideRangePoints,v)}function b(v,d){var m=v.plotinfo,x=m.xaxis,y=m.yaxis,T=x._length,h=y._length,E=!!v.xr1,k=!!v.yr1,L=[];if(E){var P=o.simpleMap(v.xr0,x.r2l),I=o.simpleMap(v.xr1,x.r2l),z=P[1]-P[0],F=I[1]-I[0];L[0]=(P[0]*(1-d)+d*I[0]-P[0])/(P[1]-P[0])*T,L[2]=T*(1-d+d*F/z),x.range[0]=x.l2r(P[0]*(1-d)+d*I[0]),x.range[1]=x.l2r(P[1]*(1-d)+d*I[1])}else L[0]=0,L[2]=T;if(k){var U=o.simpleMap(v.yr0,y.r2l),R=o.simpleMap(v.yr1,y.r2l),j=U[1]-U[0],Z=R[1]-R[0];L[1]=(U[1]*(1-d)+d*R[1]-U[1])/(U[0]-U[1])*h,L[3]=h*(1-d+d*Z/j),y.range[0]=x.l2r(U[0]*(1-d)+d*R[0]),y.range[1]=y.l2r(U[1]*(1-d)+d*R[1])}else L[1]=0,L[3]=h;_.drawOne(p,x,{skipTitle:!0}),_.drawOne(p,y,{skipTitle:!0}),_.redrawComponents(p,[x._id,y._id]);var B=E?T/L[2]:1,q=k?h/L[3]:1,V=E?L[0]:0,ne=k?L[1]:0,ee=E?L[0]/L[2]*T:0,$=k?L[1]/L[3]*h:0,J=x._offset-ee,K=y._offset-$;m.clipRect.call(w.setTranslate,V,ne).call(w.setScale,1/B,1/q),m.plot.call(w.setTranslate,J,K).call(w.setScale,B,q),w.setPointGroupScale(m.zoomScalePts,1/B,1/q),w.setTextPointsScale(m.zoomScaleTxt,1/B,1/q)}_.redrawComponents(p)}},14944:function(Y,O,e){var M=e(24040).traceIs,A=e(52976);function o(_){return{v:"x",h:"y"}[_.orientation||"v"]}function w(_,p){var s=o(_),n=M(_,"box-violin"),a=M(_._fullInput||{},"candlestick");return n&&!a&&p===s&&_[s]===void 0&&_[s+"0"]===void 0}Y.exports=function(_,p,s,n){s("autotypenumbers",n.autotypenumbersDflt),s("type",(n.splomStash||{}).type)==="-"&&(function(a,r){if(a.type==="-"){var i,l=a._id,u=l.charAt(0);l.indexOf("scene")!==-1&&(l=u);var c=function(y,T,h){for(var E=0;E<y.length;E++){var k=y[E];if(k.type==="splom"&&k._length>0&&(k["_"+h+"axes"]||{})[T]||(k[h+"axis"]||h)===T&&(w(k,h)||(k[h]||[]).length||k[h+"0"]))return k}}(r,l,u);if(c)if(c.type!=="histogram"||u!=={v:"y",h:"x"}[c.orientation||"v"]){var g=u+"calendar",f=c[g],b={noMultiCategory:!M(c,"cartesian")||M(c,"noMultiCategory")};if(c.type==="box"&&c._hasPreCompStats&&u==={h:"x",v:"y"}[c.orientation||"v"]&&(b.noMultiCategory=!0),b.autotypenumbers=a.autotypenumbers,w(c,u)){var v=o(c),d=[];for(i=0;i<r.length;i++){var m=r[i];M(m,"box-violin")&&(m[u+"axis"]||u)===l&&(m[v]!==void 0?d.push(m[v][0]):m.name!==void 0?d.push(m.name):d.push("text"),m[g]!==f&&(f=void 0))}a.type=A(d,f,b)}else if(c.type==="splom"){var x=c.dimensions[c._axesDim[l]];x.visible&&(a.type=A(x.values,f,b))}else a.type=A(c[u]||[c[u+"0"]],f,b)}else a.type="linear"}}(p,n.data),p.type==="-"?p.type="linear":_.type=p.type)}},62460:function(Y,O,e){var M=e(24040),A=e(3400);function o(s,n,a){var r,i,l,u=!1;if(n.type==="data")r=s._fullData[n.traces!==null?n.traces[0]:0];else{if(n.type!=="layout")return!1;r=s._fullLayout}return i=A.nestedProperty(r,n.prop).get(),(l=a[n.type]=a[n.type]||{}).hasOwnProperty(n.prop)&&l[n.prop]!==i&&(u=!0),l[n.prop]=i,{changed:u,value:i}}function w(s,n){var a=[],r=n[0],i={};if(typeof r=="string")i[r]=n[1];else{if(!A.isPlainObject(r))return a;i=r}return p(i,function(l,u,c){a.push({type:"layout",prop:l,value:c})},"",0),a}function _(s,n){var a,r,i,l,u=[];if(r=n[0],i=n[1],a=n[2],l={},typeof r=="string")l[r]=i;else{if(!A.isPlainObject(r))return u;l=r,a===void 0&&(a=i)}return a===void 0&&(a=null),p(l,function(c,g,f){var b,v;if(Array.isArray(f)){v=f.slice();var d=Math.min(v.length,s.data.length);a&&(d=Math.min(d,a.length)),b=[];for(var m=0;m<d;m++)b[m]=a?a[m]:m}else v=f,b=a?a.slice():null;if(b===null)Array.isArray(v)&&(v=v[0]);else if(Array.isArray(b)){if(!Array.isArray(v)){var x=v;v=[];for(var y=0;y<b.length;y++)v[y]=x}v.length=Math.min(b.length,v.length)}u.push({type:"data",prop:c,traces:b,value:v})},"",0),u}function p(s,n,a,r){Object.keys(s).forEach(function(i){var l=s[i];if(i[0]!=="_"){var u=a+(r>0?".":"")+i;A.isPlainObject(l)?p(l,n,u,r+1):n(u,i,l)}})}O.manageCommandObserver=function(s,n,a,r){var i={},l=!0;n&&n._commandObserver&&(i=n._commandObserver),i.cache||(i.cache={}),i.lookupTable={};var u=O.hasSimpleAPICommandBindings(s,a,i.lookupTable);if(n&&n._commandObserver){if(u)return i;if(n._commandObserver.remove)return n._commandObserver.remove(),n._commandObserver=null,i}if(u){o(s,u,i.cache),i.check=function(){if(l){var f=o(s,u,i.cache);return f.changed&&r&&i.lookupTable[f.value]!==void 0&&(i.disable(),Promise.resolve(r({value:f.value,type:u.type,prop:u.prop,traces:u.traces,index:i.lookupTable[f.value]})).then(i.enable,i.enable)),f.changed}};for(var c=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],g=0;g<c.length;g++)s._internalOn(c[g],i.check);i.remove=function(){for(var f=0;f<c.length;f++)s._removeInternalListener(c[f],i.check)}}else A.log("Unable to automatically bind plot updates to API command"),i.lookupTable={},i.remove=function(){};return i.disable=function(){l=!1},i.enable=function(){l=!0},n&&(n._commandObserver=i),i},O.hasSimpleAPICommandBindings=function(s,n,a){var r,i,l=n.length;for(r=0;r<l;r++){var u,c=n[r],g=c.method,f=c.args;if(Array.isArray(f)||(f=[]),!g)return!1;var b=O.computeAPICommandBindings(s,g,f);if(b.length!==1)return!1;if(i){if((u=b[0]).type!==i.type||u.prop!==i.prop)return!1;if(Array.isArray(i.traces)){if(!Array.isArray(u.traces))return!1;u.traces.sort();for(var v=0;v<i.traces.length;v++)if(i.traces[v]!==u.traces[v])return!1}else if(u.prop!==i.prop)return!1}else i=b[0],Array.isArray(i.traces)&&i.traces.sort();var d=(u=b[0]).value;if(Array.isArray(d)){if(d.length!==1)return!1;d=d[0]}a&&(a[d]=r)}return i},O.executeAPICommand=function(s,n,a){if(n==="skip")return Promise.resolve();var r=M.apiMethodRegistry[n],i=[s];Array.isArray(a)||(a=[]);for(var l=0;l<a.length;l++)i.push(a[l]);return r.apply(null,i).catch(function(u){return A.warn("API call to Plotly."+n+" rejected.",u),Promise.reject(u)})},O.computeAPICommandBindings=function(s,n,a){var r;switch(Array.isArray(a)||(a=[]),n){case"restyle":r=_(s,a);break;case"relayout":r=w(0,a);break;case"update":r=_(s,[a[0],a[2]]).concat(w(0,[a[1]]));break;case"animate":r=function(i,l){return Array.isArray(l[0])&&l[0].length===1&&["string","number"].indexOf(typeof l[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:l[0][0].toString()}]:[]}(0,a);break;default:r=[]}return r}},86968:function(Y,O,e){var M=e(92880).extendFlat;O.u=function(A,o){o=o||{};var w={valType:"info_array",editType:(A=A||{}).editType,items:[{valType:"number",min:0,max:1,editType:A.editType},{valType:"number",min:0,max:1,editType:A.editType}],dflt:[0,1]},_=(A.name&&A.name,A.trace,o.description&&o.description,{x:M({},w,{}),y:M({},w,{}),editType:A.editType});return A.noGridCell||(_.row={valType:"integer",min:0,dflt:0,editType:A.editType},_.column={valType:"integer",min:0,dflt:0,editType:A.editType}),_},O.Q=function(A,o,w,_){var p=_&&_.x||[0,1],s=_&&_.y||[0,1],n=o.grid;if(n){var a=w("domain.column");a!==void 0&&(a<n.columns?p=n._domains.x[a]:delete A.domain.column);var r=w("domain.row");r!==void 0&&(r<n.rows?s=n._domains.y[r]:delete A.domain.row)}var i=w("domain.x",p),l=w("domain.y",s);i[0]<i[1]||(A.domain.x=p.slice()),l[0]<l[1]||(A.domain.y=s.slice())}},25376:function(Y){Y.exports=function(O){var e=O.editType,M=O.colorEditType;M===void 0&&(M=e);var A={family:{valType:"string",noBlank:!0,strict:!0,editType:e},size:{valType:"number",min:1,editType:e},color:{valType:"color",editType:M},editType:e};return O.autoSize&&(A.size.dflt="auto"),O.autoColor&&(A.color.dflt="auto"),O.arrayOk&&(A.family.arrayOk=!0,A.size.arrayOk=!0,A.color.arrayOk=!0),A}},16672:function(Y){Y.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},79552:function(Y,O){O.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},O.axesNames=["lonaxis","lataxis"],O.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},O.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},O.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},O.clipPad=.001,O.precision=.1,O.landColor="#F0DC82",O.waterColor="#3399FF",O.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},O.sphereSVG={type:"Sphere"},O.fillLayers={ocean:1,land:1,lakes:1},O.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},O.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],O.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],O.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},43520:function(Y,O,e){var M=e(33428),A=e(83356),o=A.geoPath,w=A.geoDistance,_=e(87108),p=e(24040),s=e(3400),n=s.strTranslate,a=e(76308),r=e(43616),i=e(93024),l=e(7316),u=e(54460),c=e(19280).getAutoRange,g=e(86476),f=e(22676).prepSelect,b=e(22676).clearOutline,v=e(22676).selectOnClick,d=e(79248),m=e(79552),x=e(27144),y=e(59972),T=e(55712).NO;function h(L){this.id=L.id,this.graphDiv=L.graphDiv,this.container=L.container,this.topojsonURL=L.topojsonURL,this.isStatic=L.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var E=h.prototype;function k(L,P){var I=m.clipPad,z=L[0]+I,F=L[1]-I,U=P[0]+I,R=P[1]-I;z>0&&F<0&&(F+=360);var j=(F-z)/4;return{type:"Polygon",coordinates:[[[z,U],[z,R],[z+j,R],[z+2*j,R],[z+3*j,R],[F,R],[F,U],[F-j,U],[F-2*j,U],[F-3*j,U],[z,U]]]}}Y.exports=function(L){return new h(L)},E.plot=function(L,P,I,z){var F=this;if(z)return F.update(L,P,!0);F._geoCalcData=L,F._fullLayout=P;var U=P[this.id],R=[],j=!1;for(var Z in m.layerNameToAdjective)if(Z!=="frame"&&U["show"+Z]){j=!0;break}for(var B=!1,q=0;q<L.length;q++){var V=L[0][0].trace;V._geo=F,V.locationmode&&(j=!0);var ne=V.marker;if(ne){var ee=ne.angle,$=ne.angleref;(ee||$==="north"||$==="previous")&&(B=!0)}}if(this._hasMarkerAngles=B,j){var J=y.getTopojsonName(U);F.topojson!==null&&J===F.topojsonName||(F.topojsonName=J,PlotlyGeoAssets.topojson[F.topojsonName]===void 0&&R.push(F.fetchTopojson()))}R=R.concat(x.fetchTraceGeoData(L)),I.push(new Promise(function(K,te){Promise.all(R).then(function(){F.topojson=PlotlyGeoAssets.topojson[F.topojsonName],F.update(L,P),K()}).catch(te)}))},E.fetchTopojson=function(){var L=this,P=y.getTopojsonPath(L.topojsonURL,L.topojsonName);return new Promise(function(I,z){M.json(P,function(F,U){if(F)return F.status===404?z(new Error(["plotly.js could not find topojson file at",P+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):z(new Error(["unexpected error while fetching topojson file at",P].join(" ")));PlotlyGeoAssets.topojson[L.topojsonName]=U,I()})})},E.update=function(L,P,I){var z=P[this.id];this.hasChoropleth=!1;for(var F=0;F<L.length;F++){var U=L[F],R=U[0].trace;R.type==="choropleth"&&(this.hasChoropleth=!0),R.visible===!0&&R._length>0&&R._module.calcGeoJSON(U,P)}if(!I){if(this.updateProjection(L,P))return;this.viewInitial&&this.scope===z.scope||this.saveViewInitial(z)}this.scope=z.scope,this.updateBaseLayers(P,z),this.updateDims(P,z),this.updateFx(P,z),l.generalUpdatePerTraceModule(this.graphDiv,this,L,z);var j=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=j.selectAll(".point"),this.dataPoints.text=j.selectAll("text"),this.dataPaths.line=j.selectAll(".js-line");var Z=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=Z.selectAll("path"),this._render()},E.updateProjection=function(L,P){var I=this.graphDiv,z=P[this.id],F=P._size,U=z.domain,R=z.projection,j=z.lonaxis,Z=z.lataxis,B=j._ax,q=Z._ax,V=this.projection=function(le){var pe=le.projection,Ee=pe.type,Te=m.projNames[Ee];Te="geo"+s.titleCase(Te);for(var Me=(A[Te]||_[Te])(),Le=le._isSatellite?180*Math.acos(1/pe.distance)/Math.PI:le._isClipped?m.lonaxisSpan[Ee]/2:null,Ie=["center","rotate","parallels","clipExtent"],he=function(ze){return ze?Me:[]},xe=0;xe<Ie.length;xe++){var ke=Ie[xe];typeof Me[ke]!="function"&&(Me[ke]=he)}return Me.isLonLatOverEdges=function(ze){if(Me(ze)===null)return!0;if(Le){var Re=Me.rotate();return w(ze,[-Re[0],-Re[1]])>Le*Math.PI/180}return!1},Me.getPath=function(){return o().projection(Me)},Me.getBounds=function(ze){return Me.getPath().bounds(ze)},Me.precision(m.precision),le._isSatellite&&Me.tilt(pe.tilt).distance(pe.distance),Le&&Me.clipAngle(Le-m.clipPad),Me}(z),ne=[[F.l+F.w*U.x[0],F.t+F.h*(1-U.y[1])],[F.l+F.w*U.x[1],F.t+F.h*(1-U.y[0])]],ee=z.center||{},$=R.rotation||{},J=j.range||[],K=Z.range||[];if(z.fitbounds){B._length=ne[1][0]-ne[0][0],q._length=ne[1][1]-ne[0][1],B.range=c(I,B),q.range=c(I,q);var te=(B.range[0]+B.range[1])/2,ie=(q.range[0]+q.range[1])/2;if(z._isScoped)ee={lon:te,lat:ie};else if(z._isClipped){ee={lon:te,lat:ie},$={lon:te,lat:ie,roll:$.roll};var ae=R.type,se=m.lonaxisSpan[ae]/2||180,ce=m.lataxisSpan[ae]/2||90;J=[te-se,te+se],K=[ie-ce,ie+ce]}else ee={lon:te,lat:ie},$={lon:te,lat:$.lat,roll:$.roll}}V.center([ee.lon-$.lon,ee.lat-$.lat]).rotate([-$.lon,-$.lat,$.roll]).parallels(R.parallels);var de=k(J,K);V.fitExtent(ne,de);var ge=this.bounds=V.getBounds(de),ve=this.fitScale=V.scale(),be=V.translate();if(z.fitbounds){var me=V.getBounds(k(B.range,q.range)),Se=Math.min((ge[1][0]-ge[0][0])/(me[1][0]-me[0][0]),(ge[1][1]-ge[0][1])/(me[1][1]-me[0][1]));isFinite(Se)?V.scale(Se*ve):s.warn("Something went wrong during"+this.id+"fitbounds computations.")}else V.scale(R.scale*ve);var we=this.midPt=[(ge[0][0]+ge[1][0])/2,(ge[0][1]+ge[1][1])/2];if(V.translate([be[0]+(we[0]-be[0]),be[1]+(we[1]-be[1])]).clipExtent(ge),z._isAlbersUsa){var _e=V([ee.lon,ee.lat]),oe=V.translate();V.translate([oe[0]-(_e[0]-oe[0]),oe[1]-(_e[1]-oe[1])])}},E.updateBaseLayers=function(L,P){var I=this,z=I.topojson,F=I.layers,U=I.basePaths;function R(V){return V==="lonaxis"||V==="lataxis"}function j(V){return!!m.lineLayers[V]}function Z(V){return!!m.fillLayers[V]}var B=(this.hasChoropleth?m.layersForChoropleth:m.layers).filter(function(V){return j(V)||Z(V)?P["show"+V]:!R(V)||P[V].showgrid}),q=I.framework.selectAll(".layer").data(B,String);q.exit().each(function(V){delete F[V],delete U[V],M.select(this).remove()}),q.enter().append("g").attr("class",function(V){return"layer "+V}).each(function(V){var ne=F[V]=M.select(this);V==="bg"?I.bgRect=ne.append("rect").style("pointer-events","all"):R(V)?U[V]=ne.append("path").style("fill","none"):V==="backplot"?ne.append("g").classed("choroplethlayer",!0):V==="frontplot"?ne.append("g").classed("scatterlayer",!0):j(V)?U[V]=ne.append("path").style("fill","none").style("stroke-miterlimit",2):Z(V)&&(U[V]=ne.append("path").style("stroke","none"))}),q.order(),q.each(function(V){var ne=U[V],ee=m.layerNameToAdjective[V];V==="frame"?ne.datum(m.sphereSVG):j(V)||Z(V)?ne.datum(T(z,z.objects[V])):R(V)&&ne.datum(function($,J,K){var te,ie,ae,se=J[$],ce=m.scopeDefaults[J.scope];$==="lonaxis"?(te=ce.lonaxisRange,ie=ce.lataxisRange,ae=function(oe,le){return[oe,le]}):$==="lataxis"&&(te=ce.lataxisRange,ie=ce.lonaxisRange,ae=function(oe,le){return[le,oe]});var de={type:"linear",range:[te[0],te[1]-1e-6],tick0:se.tick0,dtick:se.dtick};u.setConvert(de,K);var ge=u.calcTicks(de);J.isScoped||$!=="lonaxis"||ge.pop();for(var ve=ge.length,be=new Array(ve),me=0;me<ve;me++)for(var Se=ge[me].x,we=be[me]=[],_e=ie[0];_e<ie[1]+2.5;_e+=2.5)we.push(ae(Se,_e));return{type:"MultiLineString",coordinates:be}}(V,P,L)).call(a.stroke,P[V].gridcolor).call(r.dashLine,P[V].griddash,P[V].gridwidth),j(V)?ne.call(a.stroke,P[ee+"color"]).call(r.dashLine,"",P[ee+"width"]):Z(V)&&ne.call(a.fill,P[ee+"color"])})},E.updateDims=function(L,P){var I=this.bounds,z=(P.framewidth||0)/2,F=I[0][0]-z,U=I[0][1]-z,R=I[1][0]-F+z,j=I[1][1]-U+z;r.setRect(this.clipRect,F,U,R,j),this.bgRect.call(r.setRect,F,U,R,j).call(a.fill,P.bgcolor),this.xaxis._offset=F,this.xaxis._length=R,this.yaxis._offset=U,this.yaxis._length=j},E.updateFx=function(L,P){var I=this,z=I.graphDiv,F=I.bgRect,U=L.dragmode,R=L.clickmode;if(!I.isStatic){var j={element:I.bgRect.node(),gd:z,plotinfo:{id:I.id,xaxis:I.xaxis,yaxis:I.yaxis,fillRangeItems:function(B,q){q.isRect?(B.range={})[I.id]=[Z([q.xmin,q.ymin]),Z([q.xmax,q.ymax])]:(B.lassoPoints={})[I.id]=q.map(Z)}},xaxes:[I.xaxis],yaxes:[I.yaxis],subplot:I.id,clickFn:function(B){B===2&&b(z)}};U==="pan"?(F.node().onmousedown=null,F.call(d(I,P)),F.on("dblclick.zoom",function(){var B=I.viewInitial,q={};for(var V in B)q[I.id+"."+V]=B[V];p.call("_guiRelayout",z,q),z.emit("plotly_doubleclick",null)}),z._context._scrollZoom.geo||F.on("wheel.zoom",null)):U!=="select"&&U!=="lasso"||(F.on(".zoom",null),j.prepFn=function(B,q,V){f(B,q,V,j,U)},g.init(j)),F.on("mousemove",function(){var B=I.projection.invert(s.getPositionFromD3Event());if(!B)return g.unhover(z,M.event);I.xaxis.p2c=function(){return B[0]},I.yaxis.p2c=function(){return B[1]},i.hover(z,M.event,I.id)}),F.on("mouseout",function(){z._dragging||g.unhover(z,M.event)}),F.on("click",function(){U!=="select"&&U!=="lasso"&&(R.indexOf("select")>-1&&v(M.event,z,[I.xaxis],[I.yaxis],I.id,j),R.indexOf("event")>-1&&i.click(z,M.event))})}function Z(B){return I.projection.invert([B[0]+I.xaxis._offset,B[1]+I.yaxis._offset])}},E.makeFramework=function(){var L=this,P=L.graphDiv,I=P._fullLayout,z="clip"+I._uid+L.id;L.clipDef=I._clips.append("clipPath").attr("id",z),L.clipRect=L.clipDef.append("rect"),L.framework=M.select(L.container).append("g").attr("class","geo "+L.id).call(r.setClipUrl,z,P),L.project=function(F){var U=L.projection(F);return U?[U[0]-L.xaxis._offset,U[1]-L.yaxis._offset]:[null,null]},L.xaxis={_id:"x",c2p:function(F){return L.project(F)[0]}},L.yaxis={_id:"y",c2p:function(F){return L.project(F)[1]}},L.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},u.setConvert(L.mockAxis,I)},E.saveViewInitial=function(L){var P,I=L.center||{},z=L.projection,F=z.rotation||{};this.viewInitial={fitbounds:L.fitbounds,"projection.scale":z.scale},P=L._isScoped?{"center.lon":I.lon,"center.lat":I.lat}:L._isClipped?{"projection.rotation.lon":F.lon,"projection.rotation.lat":F.lat}:{"center.lon":I.lon,"center.lat":I.lat,"projection.rotation.lon":F.lon},s.extendFlat(this.viewInitial,P)},E.render=function(L){this._hasMarkerAngles&&L?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},E._render=function(){var L,P=this.projection,I=P.getPath();function z(U){var R=P(U.lonlat);return R?n(R[0],R[1]):null}function F(U){return P.isLonLatOverEdges(U.lonlat)?"none":null}for(L in this.basePaths)this.basePaths[L].attr("d",I);for(L in this.dataPaths)this.dataPaths[L].attr("d",function(U){return I(U.geojson)});for(L in this.dataPoints)this.dataPoints[L].attr("display",F).attr("transform",z)}},10816:function(Y,O,e){var M=e(84888).KY,A=e(3400).counterRegex,o=e(43520),w="geo",_=A(w),p={};p[w]={valType:"subplotid",dflt:w,editType:"calc"},Y.exports={attr:w,name:w,idRoot:w,idRegex:_,attrRegex:_,attributes:p,layoutAttributes:e(40384),supplyLayoutDefaults:e(86920),plot:function(s){for(var n=s._fullLayout,a=s.calcdata,r=n._subplots[w],i=0;i<r.length;i++){var l=r[i],u=M(a,w,l),c=n[l]._subplot;c||(c=o({id:l,graphDiv:s,container:n._geolayer.node(),topojsonURL:s._context.topojsonURL,staticPlot:s._context.staticPlot}),n[l]._subplot=c),c.plot(u,n,s._promises)}},updateFx:function(s){for(var n=s._fullLayout,a=n._subplots[w],r=0;r<a.length;r++){var i=n[a[r]];i._subplot.updateFx(n,i)}},clean:function(s,n,a,r){for(var i=r._subplots[w]||[],l=0;l<i.length;l++){var u=i[l],c=r[u]._subplot;!n[u]&&c&&(c.framework.remove(),c.clipDef.remove())}}}},40384:function(Y,O,e){var M=e(22548),A=e(86968).u,o=e(98192).u,w=e(79552),_=e(67824).overrideAll,p=e(95376),s={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:M.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:o};(Y.exports=_({domain:A({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:p(w.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:p(w.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:M.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:w.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:w.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:w.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:w.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:M.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:M.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:M.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:M.background},lonaxis:s,lataxis:s},"plot","from-root")).uirevision={valType:"any",editType:"none"}},86920:function(Y,O,e){var M=e(3400),A=e(168),o=e(84888).op,w=e(79552),_=e(40384),p=w.axesNames;function s(n,a,r,i){var l=o(i.fullData,"geo",i.id).map(function($){return $._expandedIndex}),u=r("resolution"),c=r("scope"),g=w.scopeDefaults[c],f=r("projection.type",g.projType),b=a._isAlbersUsa=f==="albers usa";b&&(c=a.scope="usa");var v=a._isScoped=c!=="world",d=a._isSatellite=f==="satellite",m=a._isConic=f.indexOf("conic")!==-1||f==="albers",x=a._isClipped=!!w.lonaxisSpan[f];if(n.visible===!1){var y=M.extendDeep({},a._template);y.showcoastlines=!1,y.showcountries=!1,y.showframe=!1,y.showlakes=!1,y.showland=!1,y.showocean=!1,y.showrivers=!1,y.showsubunits=!1,y.lonaxis&&(y.lonaxis.showgrid=!1),y.lataxis&&(y.lataxis.showgrid=!1),a._template=y}for(var T=r("visible"),h=0;h<p.length;h++){var E,k=p[h],L=[30,10][h];if(v)E=g[k+"Range"];else{var P=w[k+"Span"],I=(P[f]||P["*"])/2,z=r("projection.rotation."+k.substr(0,3),g.projRotate[h]);E=[z-I,z+I]}var F=r(k+".range",E);r(k+".tick0"),r(k+".dtick",L),r(k+".showgrid",!!T&&void 0)&&(r(k+".gridcolor"),r(k+".gridwidth"),r(k+".griddash")),a[k]._ax={type:"linear",_id:k.slice(0,3),_traceIndices:l,setScale:M.identity,c2l:M.identity,r2l:M.identity,autorange:!0,range:F.slice(),_m:1,_input:{}}}var U=a.lonaxis.range,R=a.lataxis.range,j=U[0],Z=U[1];j>0&&Z<0&&(Z+=360);var B,q,V,ne=(j+Z)/2;if(!b){var ee=v?g.projRotate:[ne,0,0];B=r("projection.rotation.lon",ee[0]),r("projection.rotation.lat",ee[1]),r("projection.rotation.roll",ee[2]),r("showcoastlines",!v&&T)&&(r("coastlinecolor"),r("coastlinewidth")),r("showocean",!!T&&void 0)&&r("oceancolor")}b?(q=-96.6,V=38.7):(q=v?ne:B,V=(R[0]+R[1])/2),r("center.lon",q),r("center.lat",V),d&&(r("projection.tilt"),r("projection.distance")),m&&r("projection.parallels",g.projParallels||[0,60]),r("projection.scale"),r("showland",!!T&&void 0)&&r("landcolor"),r("showlakes",!!T&&void 0)&&r("lakecolor"),r("showrivers",!!T&&void 0)&&(r("rivercolor"),r("riverwidth")),r("showcountries",v&&c!=="usa"&&T)&&(r("countrycolor"),r("countrywidth")),(c==="usa"||c==="north america"&&u===50)&&(r("showsubunits",T),r("subunitcolor"),r("subunitwidth")),v||r("showframe",T)&&(r("framecolor"),r("framewidth")),r("bgcolor"),r("fitbounds")&&(delete a.projection.scale,v?(delete a.center.lon,delete a.center.lat):x?(delete a.center.lon,delete a.center.lat,delete a.projection.rotation.lon,delete a.projection.rotation.lat,delete a.lonaxis.range,delete a.lataxis.range):(delete a.center.lon,delete a.center.lat,delete a.projection.rotation.lon))}Y.exports=function(n,a,r){A(n,a,r,{type:"geo",attributes:_,handleDefaults:s,fullData:r,partition:"y"})}},79248:function(Y,O,e){var M=e(33428),A=e(3400),o=e(24040),w=Math.PI/180,_=180/Math.PI,p={cursor:"pointer"},s={cursor:"auto"};function n(v,d){return M.behavior.zoom().translate(d.translate()).scale(d.scale())}function a(v,d,m){var x=v.id,y=v.graphDiv,T=y.layout,h=T[x],E=y._fullLayout,k=E[x],L={},P={};function I(z,F){L[x+"."+z]=A.nestedProperty(h,z).get(),o.call("_storeDirectGUIEdit",T,E._preGUI,L);var U=A.nestedProperty(k,z);U.get()!==F&&(U.set(F),A.nestedProperty(h,z).set(F),P[x+"."+z]=F)}m(I),I("projection.scale",d.scale()/v.fitScale),I("fitbounds",!1),y.emit("plotly_relayout",P)}function r(v,d){var m=n(0,d);function x(y){var T=d.invert(v.midPt);y("center.lon",T[0]),y("center.lat",T[1])}return m.on("zoomstart",function(){M.select(this).style(p)}).on("zoom",function(){d.scale(M.event.scale).translate(M.event.translate),v.render(!0);var y=d.invert(v.midPt);v.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":d.scale()/v.fitScale,"geo.center.lon":y[0],"geo.center.lat":y[1]})}).on("zoomend",function(){M.select(this).style(s),a(v,d,x)}),m}function i(v,d){var m,x,y,T,h,E,k,L,P,I=n(0,d);function z(U){return d.invert(U)}function F(U){var R=d.rotate(),j=d.invert(v.midPt);U("projection.rotation.lon",-R[0]),U("center.lon",j[0]),U("center.lat",j[1])}return I.on("zoomstart",function(){M.select(this).style(p),m=M.mouse(this),x=d.rotate(),y=d.translate(),T=x,h=z(m)}).on("zoom",function(){if(E=M.mouse(this),function(j){var Z=z(j);if(!Z)return!0;var B=d(Z);return Math.abs(B[0]-j[0])>2||Math.abs(B[1]-j[1])>2}(m))return I.scale(d.scale()),void I.translate(d.translate());d.scale(M.event.scale),d.translate([y[0],M.event.translate[1]]),h?z(E)&&(L=z(E),k=[T[0]+(L[0]-h[0]),x[1],x[2]],d.rotate(k),T=k):h=z(m=E),P=!0,v.render(!0);var U=d.rotate(),R=d.invert(v.midPt);v.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":d.scale()/v.fitScale,"geo.center.lon":R[0],"geo.center.lat":R[1],"geo.projection.rotation.lon":-U[0]})}).on("zoomend",function(){M.select(this).style(s),P&&a(v,d,F)}),I}function l(v,d){var m;d.rotate(),d.scale();var x=n(0,d),y=function(k){for(var L=0,P=arguments.length,I=[];++L<P;)I.push(arguments[L]);var z=M.dispatch.apply(null,I);return z.of=function(F,U){return function(R){var j;try{j=R.sourceEvent=M.event,R.target=k,M.event=R,z[R.type].apply(F,U)}finally{M.event=j}}},z}(x,"zoomstart","zoom","zoomend"),T=0,h=x.on;function E(k){var L=d.rotate();k("projection.rotation.lon",-L[0]),k("projection.rotation.lat",-L[1])}return x.on("zoomstart",function(){M.select(this).style(p);var k,L,P,I,z,F,U,R,j,Z,B,q=M.mouse(this),V=d.rotate(),ne=V,ee=d.translate(),$=(L=.5*(k=V)[0]*w,P=.5*k[1]*w,I=.5*k[2]*w,z=Math.sin(L),F=Math.cos(L),U=Math.sin(P),R=Math.cos(P),j=Math.sin(I),[F*R*(Z=Math.cos(I))+z*U*j,z*R*Z-F*U*j,F*U*Z+z*R*j,F*R*j-z*U*Z]);m=u(d,q),h.call(x,"zoom",function(){var J,K,te,ie,ae,se,ce,de,ge,ve,be=M.mouse(this);if(d.scale(M.event.scale),m){if(u(d,be)){d.rotate(V).translate(ee);var me=u(d,be),Se=function(oe,le){if(oe&&le){var pe=function(Le,Ie){return[Le[1]*Ie[2]-Le[2]*Ie[1],Le[2]*Ie[0]-Le[0]*Ie[2],Le[0]*Ie[1]-Le[1]*Ie[0]]}(oe,le),Ee=Math.sqrt(b(pe,pe)),Te=.5*Math.acos(Math.max(-1,Math.min(1,b(oe,le)))),Me=Math.sin(Te)/Ee;return Ee&&[Math.cos(Te),pe[2]*Me,-pe[1]*Me,pe[0]*Me]}}(m,me),we=function(oe){return[Math.atan2(2*(oe[0]*oe[1]+oe[2]*oe[3]),1-2*(oe[1]*oe[1]+oe[2]*oe[2]))*_,Math.asin(Math.max(-1,Math.min(1,2*(oe[0]*oe[2]-oe[3]*oe[1]))))*_,Math.atan2(2*(oe[0]*oe[3]+oe[1]*oe[2]),1-2*(oe[2]*oe[2]+oe[3]*oe[3]))*_]}((te=(J=$)[0],ie=J[1],ae=J[2],se=J[3],[te*(ce=(K=Se)[0])-ie*(de=K[1])-ae*(ge=K[2])-se*(ve=K[3]),te*de+ie*ce+ae*ve-se*ge,te*ge-ie*ve+ae*ce+se*de,te*ve+ie*ge-ae*de+se*ce])),_e=function(oe,le,pe){var Ee=f(le,2,oe[0]);Ee=f(Ee,1,oe[1]),Ee=f(Ee,0,oe[2]-pe[2]);var Te,Me,Le=le[0],Ie=le[1],he=le[2],xe=Ee[0],ke=Ee[1],ze=Ee[2],Re=Math.atan2(Ie,Le)*_,Oe=Math.sqrt(Le*Le+Ie*Ie);Math.abs(ke)>Oe?(Me=(ke>0?90:-90)-Re,Te=0):(Me=Math.asin(ke/Oe)*_-Re,Te=Math.sqrt(Oe*Oe-ke*ke));var Ve=180-Me-2*Re,qe=(Math.atan2(ze,xe)-Math.atan2(he,Te))*_,Je=(Math.atan2(ze,xe)-Math.atan2(he,-Te))*_;return c(pe[0],pe[1],Me,qe)<=c(pe[0],pe[1],Ve,Je)?[Me,qe,pe[2]]:[Ve,Je,pe[2]]}(we,m,ne);isFinite(_e[0])&&isFinite(_e[1])&&isFinite(_e[2])||(_e=ne),d.rotate(_e),ne=_e}}else m=u(d,q=be);y.of(this,arguments)({type:"zoom"})}),B=y.of(this,arguments),T++||B({type:"zoomstart"})}).on("zoomend",function(){var k;M.select(this).style(s),h.call(x,"zoom",null),k=y.of(this,arguments),--T||k({type:"zoomend"}),a(v,d,E)}).on("zoom.redraw",function(){v.render(!0);var k=d.rotate();v.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":d.scale()/v.fitScale,"geo.projection.rotation.lon":-k[0],"geo.projection.rotation.lat":-k[1]})}),M.rebind(x,y,"on")}function u(v,d){var m=v.invert(d);return m&&isFinite(m[0])&&isFinite(m[1])&&function(x){var y=x[0]*w,T=x[1]*w,h=Math.cos(T);return[h*Math.cos(y),h*Math.sin(y),Math.sin(T)]}(m)}function c(v,d,m,x){var y=g(m-v),T=g(x-d);return Math.sqrt(y*y+T*T)}function g(v){return(v%360+540)%360-180}function f(v,d,m){var x=m*w,y=v.slice(),T=d===0?1:0,h=d===2?1:2,E=Math.cos(x),k=Math.sin(x);return y[T]=v[T]*E-v[h]*k,y[h]=v[h]*E+v[T]*k,y}function b(v,d){for(var m=0,x=0,y=v.length;x<y;++x)m+=v[x]*d[x];return m}Y.exports=function(v,d){var m=v.projection;return(d._isScoped?r:d._isClipped?l:i)(v,m)}},84888:function(Y,O,e){var M=e(24040),A=e(33816).SUBPLOT_PATTERN;O.KY=function(o,w,_){var p=M.subplotsRegistry[w];if(!p)return[];for(var s=p.attr,n=[],a=0;a<o.length;a++){var r=o[a];r[0].trace[s]===_&&n.push(r)}return n},O._M=function(o,w){var _,p=[],s=[];if(!(_=typeof w=="string"?M.getModule(w).plot:typeof w=="function"?w:w.plot))return[p,o];for(var n=0;n<o.length;n++){var a=o[n],r=a[0].trace;r.visible===!0&&r._length!==0&&(r._module&&r._module.plot===_?p.push(a):s.push(a))}return[p,s]},O.op=function(o,w,_){if(!M.subplotsRegistry[w])return[];var p,s,n,a=M.subplotsRegistry[w].attr,r=[];if(w==="gl2d"){var i=_.match(A);s="x"+i[1],n="y"+i[2]}for(var l=0;l<o.length;l++)p=o[l],w==="gl2d"&&M.traceIs(p,"gl2d")?p[a[0]]===s&&p[a[1]]===n&&r.push(p):p[a]===_&&r.push(p);return r}},2428:function(Y,O,e){var M=e(62644),A=e(97264),o=e(29128),w=e(33816),_=e(89184);function p(s,n){this.element=s,this.plot=n,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}Y.exports=function(s){var n=s.mouseContainer,a=s.glplot,r=new p(n,a);function i(){s.xaxis.autorange=!1,s.yaxis.autorange=!1}function l(u,c,g){var f,b,v=s.calcDataBox(),d=a.viewBox,m=r.lastPos[0],x=r.lastPos[1],y=w.MINDRAG*a.pixelRatio,T=w.MINZOOM*a.pixelRatio;function h(z,F,U){var R=Math.min(F,U),j=Math.max(F,U);R!==j?(v[z]=R,v[z+2]=j,r.dataBox=v,s.setRanges(v)):(s.selectBox.selectBox=[0,0,1,1],s.glplot.setDirty())}switch(c*=a.pixelRatio,g*=a.pixelRatio,g=d[3]-d[1]-g,s.fullLayout.dragmode){case"zoom":if(u){var E=c/(d[2]-d[0])*(v[2]-v[0])+v[0],k=g/(d[3]-d[1])*(v[3]-v[1])+v[1];r.boxInited||(r.boxStart[0]=E,r.boxStart[1]=k,r.dragStart[0]=c,r.dragStart[1]=g),r.boxEnd[0]=E,r.boxEnd[1]=k,r.boxInited=!0,r.boxEnabled||r.boxStart[0]===r.boxEnd[0]&&r.boxStart[1]===r.boxEnd[1]||(r.boxEnabled=!0);var L=Math.abs(r.dragStart[0]-c)<T,P=Math.abs(r.dragStart[1]-g)<T;if(!function(){for(var z=s.graphDiv._fullLayout._axisConstraintGroups,F=s.xaxis._id,U=s.yaxis._id,R=0;R<z.length;R++)if(z[R][F]!==-1){if(z[R][U]!==-1)return!0;break}return!1}()||L&&P)L&&(r.boxEnd[0]=r.boxStart[0]),P&&(r.boxEnd[1]=r.boxStart[1]);else{f=r.boxEnd[0]-r.boxStart[0],b=r.boxEnd[1]-r.boxStart[1];var I=(v[3]-v[1])/(v[2]-v[0]);Math.abs(f*I)>Math.abs(b)?(r.boxEnd[1]=r.boxStart[1]+Math.abs(f)*I*(b>=0?1:-1),r.boxEnd[1]<v[1]?(r.boxEnd[1]=v[1],r.boxEnd[0]=r.boxStart[0]+(v[1]-r.boxStart[1])/Math.abs(I)):r.boxEnd[1]>v[3]&&(r.boxEnd[1]=v[3],r.boxEnd[0]=r.boxStart[0]+(v[3]-r.boxStart[1])/Math.abs(I))):(r.boxEnd[0]=r.boxStart[0]+Math.abs(b)/I*(f>=0?1:-1),r.boxEnd[0]<v[0]?(r.boxEnd[0]=v[0],r.boxEnd[1]=r.boxStart[1]+(v[0]-r.boxStart[0])*Math.abs(I)):r.boxEnd[0]>v[2]&&(r.boxEnd[0]=v[2],r.boxEnd[1]=r.boxStart[1]+(v[2]-r.boxStart[0])*Math.abs(I)))}}else r.boxEnabled?(f=r.boxStart[0]!==r.boxEnd[0],b=r.boxStart[1]!==r.boxEnd[1],f||b?(f&&(h(0,r.boxStart[0],r.boxEnd[0]),s.xaxis.autorange=!1),b&&(h(1,r.boxStart[1],r.boxEnd[1]),s.yaxis.autorange=!1),s.relayoutCallback()):s.glplot.setDirty(),r.boxEnabled=!1,r.boxInited=!1):r.boxInited&&(r.boxInited=!1);break;case"pan":r.boxEnabled=!1,r.boxInited=!1,u?(r.panning||(r.dragStart[0]=c,r.dragStart[1]=g),Math.abs(r.dragStart[0]-c)<y&&(c=r.dragStart[0]),Math.abs(r.dragStart[1]-g)<y&&(g=r.dragStart[1]),f=(m-c)*(v[2]-v[0])/(a.viewBox[2]-a.viewBox[0]),b=(x-g)*(v[3]-v[1])/(a.viewBox[3]-a.viewBox[1]),v[0]+=f,v[2]+=f,v[1]+=b,v[3]+=b,s.setRanges(v),r.panning=!0,r.lastInputTime=Date.now(),i(),s.cameraChanged(),s.handleAnnotations()):r.panning&&(r.panning=!1,s.relayoutCallback())}r.lastPos[0]=c,r.lastPos[1]=g}return r.mouseListener=M(n,l),n.addEventListener("touchstart",function(u){var c=o(u.changedTouches[0],n);l(0,c[0],c[1]),l(1,c[0],c[1]),u.preventDefault()},!!_&&{passive:!1}),n.addEventListener("touchmove",function(u){u.preventDefault();var c=o(u.changedTouches[0],n);l(1,c[0],c[1]),u.preventDefault()},!!_&&{passive:!1}),n.addEventListener("touchend",function(u){l(0,r.lastPos[0],r.lastPos[1]),u.preventDefault()},!!_&&{passive:!1}),r.wheelListener=A(n,function(u,c){if(!s.scrollZoom)return!1;var g=s.calcDataBox(),f=a.viewBox,b=r.lastPos[0],v=r.lastPos[1],d=Math.exp(5*c/(f[3]-f[1])),m=b/(f[2]-f[0])*(g[2]-g[0])+g[0],x=v/(f[3]-f[1])*(g[3]-g[1])+g[1];return g[0]=(g[0]-m)*d+m,g[2]=(g[2]-m)*d+m,g[1]=(g[1]-x)*d+x,g[3]=(g[3]-x)*d+x,s.setRanges(g),r.lastInputTime=Date.now(),i(),s.cameraChanged(),s.handleAnnotations(),s.relayoutCallback(),!0},!0),r}},92568:function(Y,O,e){var M=e(54460),A=e(43080);function o(p){this.scene=p,this.gl=p.gl,this.pixelRatio=p.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var w=o.prototype,_=["xaxis","yaxis"];w.merge=function(p){var s,n,a,r,i,l,u,c,g,f,b;for(this.titleEnable=!1,this.backgroundColor=A(p.plot_bgcolor),f=0;f<2;++f){var v=(s=_[f]).charAt(0);for(a=(n=p[this.scene[s]._name]).title.text===this.scene.fullLayout._dfltTitle[v]?"":n.title.text,b=0;b<=2;b+=2)this.labelEnable[f+b]=!1,this.labels[f+b]=a,this.labelColor[f+b]=A(n.title.font.color),this.labelFont[f+b]=n.title.font.family,this.labelSize[f+b]=n.title.font.size,this.labelPad[f+b]=this.getLabelPad(s,n),this.tickEnable[f+b]=!1,this.tickColor[f+b]=A((n.tickfont||{}).color),this.tickAngle[f+b]=n.tickangle==="auto"?0:Math.PI*-n.tickangle/180,this.tickPad[f+b]=this.getTickPad(n),this.tickMarkLength[f+b]=0,this.tickMarkWidth[f+b]=n.tickwidth||0,this.tickMarkColor[f+b]=A(n.tickcolor),this.borderLineEnable[f+b]=!1,this.borderLineColor[f+b]=A(n.linecolor),this.borderLineWidth[f+b]=n.linewidth||0;u=this.hasSharedAxis(n),i=this.hasAxisInDfltPos(s,n)&&!u,l=this.hasAxisInAltrPos(s,n)&&!u,r=n.mirror||!1,c=u?String(r).indexOf("all")!==-1:!!r,g=u?r==="allticks":String(r).indexOf("ticks")!==-1,i?this.labelEnable[f]=!0:l&&(this.labelEnable[f+2]=!0),i?this.tickEnable[f]=n.showticklabels:l&&(this.tickEnable[f+2]=n.showticklabels),(i||c)&&(this.borderLineEnable[f]=n.showline),(l||c)&&(this.borderLineEnable[f+2]=n.showline),(i||g)&&(this.tickMarkLength[f]=this.getTickMarkLength(n)),(l||g)&&(this.tickMarkLength[f+2]=this.getTickMarkLength(n)),this.gridLineEnable[f]=n.showgrid,this.gridLineColor[f]=A(n.gridcolor),this.gridLineWidth[f]=n.gridwidth,this.zeroLineEnable[f]=n.zeroline,this.zeroLineColor[f]=A(n.zerolinecolor),this.zeroLineWidth[f]=n.zerolinewidth}},w.hasSharedAxis=function(p){var s=this.scene,n=s.fullLayout._subplots.gl2d;return M.findSubplotsWithAxis(n,p).indexOf(s.id)!==0},w.hasAxisInDfltPos=function(p,s){var n=s.side;return p==="xaxis"?n==="bottom":p==="yaxis"?n==="left":void 0},w.hasAxisInAltrPos=function(p,s){var n=s.side;return p==="xaxis"?n==="top":p==="yaxis"?n==="right":void 0},w.getLabelPad=function(p,s){var n=1.5,a=s.title.font.size,r=s.showticklabels;return p==="xaxis"?s.side==="top"?a*(n+(r?1:0))-10:a*(n+(r?.5:0))-10:p==="yaxis"?s.side==="right"?10+a*(n+(r?1:.5)):10+a*(n+(r?.5:0)):void 0},w.getTickPad=function(p){return p.ticks==="outside"?10+p.ticklen:15},w.getTickMarkLength=function(p){if(!p.ticks)return 0;var s=p.ticklen;return p.ticks==="inside"?-s:s},Y.exports=function(p){return new o(p)}},39952:function(Y,O,e){var M=e(67824).overrideAll,A=e(17188),o=e(64859),w=e(9616),_=e(33816),p=e(57952),s=e(65460),n=e(84888).op;O.name="gl2d",O.attr=["xaxis","yaxis"],O.idRoot=["x","y"],O.idRegex=_.idRegex,O.attrRegex=_.attrRegex,O.attributes=e(26720),O.supplyLayoutDefaults=function(a,r,i){r._has("cartesian")||p.supplyLayoutDefaults(a,r,i)},O.layoutAttrOverrides=M(p.layoutAttributes,"plot","from-root"),O.baseLayoutAttrOverrides=M({plot_bgcolor:o.plot_bgcolor,hoverlabel:s.hoverlabel},"plot","nested"),O.plot=function(a){for(var r=a._fullLayout,i=a._fullData,l=r._subplots.gl2d,u=0;u<l.length;u++){var c=l[u],g=r._plots[c],f=n(i,"gl2d",c),b=g._scene2d;b===void 0&&(b=new A({id:c,graphDiv:a,container:a.querySelector(".gl-container"),staticPlot:a._context.staticPlot,plotGlPixelRatio:a._context.plotGlPixelRatio},r),g._scene2d=b),b.plot(f,a.calcdata,r,a.layout)}},O.clean=function(a,r,i,l){for(var u=l._subplots.gl2d||[],c=0;c<u.length;c++){var g=u[c],f=l._plots[g];f._scene2d&&n(a,"gl2d",g).length===0&&(f._scene2d.destroy(),delete l._plots[g])}p.clean.apply(this,arguments)},O.drawFramework=function(a){a._context.staticPlot||p.drawFramework(a)},O.toSVG=function(a){for(var r=a._fullLayout,i=r._subplots.gl2d,l=0;l<i.length;l++){var u=r._plots[i[l]]._scene2d,c=u.toImage("png");r._glimages.append("svg:image").attr({xmlns:w.svg,"xlink:href":c,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),u.destroy()}},O.updateFx=function(a){for(var r=a._fullLayout,i=r._subplots.gl2d,l=0;l<i.length;l++)r._plots[i[l]]._scene2d.updateFx(r.dragmode)}},17188:function(Y,O,e){var M,A,o=e(24040),w=e(54460),_=e(93024),p=e(67792).gl_plot2d,s=e(67792).gl_spikes2d,n=e(67792).gl_select_box,a=e(5408),r=e(92568),i=e(2428),l=e(16576),u=e(71888),c=u.enforce,g=u.clean,f=e(19280).doAutoRange,b=e(72760),v=b.drawMode,d=b.selectMode,m=["xaxis","yaxis"],x=e(33816).SUBPLOT_PATTERN;function y(h,E){this.container=h.container,this.graphDiv=h.graphDiv,this.pixelRatio=h.plotGlPixelRatio||window.devicePixelRatio,this.id=h.id,this.staticPlot=!!h.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(E),this.makeFramework(),this.stopped||(this.glplotOptions=r(this),this.glplotOptions.merge(E),this.glplot=p(this.glplotOptions),this.camera=i(this),this.traces={},this.spikes=s(this.glplot),this.selectBox=n(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}Y.exports=y;var T=y.prototype;T.makeFramework=function(){if(this.staticPlot){if(!(A||(M=document.createElement("canvas"),A=a({canvas:M,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=M,this.gl=A}else{var h=this.container.querySelector(".gl-canvas-focus"),E=a({canvas:h,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!E)return l(this),void(this.stopped=!0);this.canvas=h,this.gl=E}var k=this.canvas;k.style.width="100%",k.style.height="100%",k.style.position="absolute",k.style.top="0px",k.style.left="0px",k.style["pointer-events"]="none",this.updateSize(k);var L=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");L.style.position="absolute",L.style.top=L.style.left="0px",L.style.width=L.style.height="100%",L.style["z-index"]=20,L.style["pointer-events"]="none";var P=this.mouseContainer=document.createElement("div");P.style.position="absolute",P.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var I=this.container;I.appendChild(L),I.appendChild(P);var z=this;P.addEventListener("mouseout",function(){z.isMouseOver=!1,z.unhover()}),P.addEventListener("mouseover",function(){z.isMouseOver=!0})},T.toImage=function(h){h||(h="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(M),this.updateSize(this.canvas);var E=this.glplot.gl,k=E.drawingBufferWidth,L=E.drawingBufferHeight;E.clearColor(1,1,1,0),E.clear(E.COLOR_BUFFER_BIT|E.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),E.bindFramebuffer(E.FRAMEBUFFER,null);var P=new Uint8Array(k*L*4);E.readPixels(0,0,k,L,E.RGBA,E.UNSIGNED_BYTE,P);for(var I=0,z=L-1;I<z;++I,--z)for(var F=0;F<k;++F)for(var U=0;U<4;++U){var R=P[4*(k*I+F)+U];P[4*(k*I+F)+U]=P[4*(k*z+F)+U],P[4*(k*z+F)+U]=R}var j=document.createElement("canvas");j.width=k,j.height=L;var Z,B=j.getContext("2d",{willReadFrequently:!0}),q=B.createImageData(k,L);switch(q.data.set(P),B.putImageData(q,0,0),h){case"jpeg":Z=j.toDataURL("image/jpeg");break;case"webp":Z=j.toDataURL("image/webp");break;default:Z=j.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(M),Z},T.updateSize=function(h){h||(h=this.canvas);var E=this.pixelRatio,k=this.fullLayout,L=k.width,P=k.height,I=0|Math.ceil(E*L),z=0|Math.ceil(E*P);return h.width===I&&h.height===z||(h.width=I,h.height=z),h},T.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var h=[w.calcTicks(this.xaxis),w.calcTicks(this.yaxis)],E=0;E<2;++E)for(var k=0;k<h[E].length;++k)h[E][k].text=h[E][k].text+"";return h},T.updateRefs=function(h){this.fullLayout=h;var E=this.id.match(x),k="xaxis"+E[1],L="yaxis"+E[2];this.xaxis=this.fullLayout[k],this.yaxis=this.fullLayout[L]},T.relayoutCallback=function(){var h=this.graphDiv,E=this.xaxis,k=this.yaxis,L=h.layout,P={},I=P[E._name+".range"]=E.range.slice(),z=P[k._name+".range"]=k.range.slice();P[E._name+".autorange"]=E.autorange,P[k._name+".autorange"]=k.autorange,o.call("_storeDirectGUIEdit",h.layout,h._fullLayout._preGUI,P);var F=L[E._name];F.range=I,F.autorange=E.autorange;var U=L[k._name];U.range=z,U.autorange=k.autorange,P.lastInputTime=this.camera.lastInputTime,h.emit("plotly_relayout",P)},T.cameraChanged=function(){var h=this.camera;this.glplot.setDataBox(this.calcDataBox());var E=this.computeTickMarks();(function(k,L){for(var P=0;P<2;++P){var I=k[P],z=L[P];if(I.length!==z.length)return!0;for(var F=0;F<I.length;++F)if(I[F].x!==z[F].x)return!0}return!1})(E,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=E,this.glplotOptions.dataBox=h.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},T.handleAnnotations=function(){for(var h=this.graphDiv,E=this.fullLayout.annotations,k=0;k<E.length;k++){var L=E[k];L.xref===this.xaxis._id&&L.yref===this.yaxis._id&&o.getComponentMethod("annotations","drawOne")(h,k)}},T.destroy=function(){if(this.glplot){var h=this.traces;h&&Object.keys(h).map(function(E){h[E].dispose(),delete h[E]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},T.plot=function(h,E,k){var L=this.glplot;this.updateRefs(k),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(h,E),this.updateFx(k.dragmode);var P=k.width,I=k.height;this.updateSize(this.canvas);var z=this.glplotOptions;z.merge(k),z.screenBox=[0,0,P,I];var F={_fullLayout:{_axisConstraintGroups:k._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:k._size}};g(F,this.xaxis),g(F,this.yaxis);var U,R,j=k._size,Z=this.xaxis.domain,B=this.yaxis.domain;for(z.viewBox=[j.l+Z[0]*j.w,j.b+B[0]*j.h,P-j.r-(1-Z[1])*j.w,I-j.t-(1-B[1])*j.h],this.mouseContainer.style.width=j.w*(Z[1]-Z[0])+"px",this.mouseContainer.style.height=j.h*(B[1]-B[0])+"px",this.mouseContainer.height=j.h*(B[1]-B[0]),this.mouseContainer.style.left=j.l+Z[0]*j.w+"px",this.mouseContainer.style.top=j.t+(1-B[1])*j.h+"px",R=0;R<2;++R)(U=this[m[R]])._length=z.viewBox[R+2]-z.viewBox[R],f(this.graphDiv,U),U.setScale();c(F),z.ticks=this.computeTickMarks(),z.dataBox=this.calcDataBox(),z.merge(k),L.update(z),this.glplot.draw()},T.calcDataBox=function(){var h=this.xaxis,E=this.yaxis,k=h.range,L=E.range,P=h.r2l,I=E.r2l;return[P(k[0]),I(L[0]),P(k[1]),I(L[1])]},T.setRanges=function(h){var E=this.xaxis,k=this.yaxis,L=E.l2r,P=k.l2r;E.range=[L(h[0]),L(h[2])],k.range=[P(h[1]),P(h[3])]},T.updateTraces=function(h,E){var k,L,P,I=Object.keys(this.traces);this.fullData=h;e:for(k=0;k<I.length;k++){var z=I[k],F=this.traces[z];for(L=0;L<h.length;L++)if((P=h[L]).uid===z&&P.type===F.type)continue e;F.dispose(),delete this.traces[z]}for(k=0;k<h.length;k++){P=h[k];var U=E[k],R=this.traces[P.uid];R?R.update(P,U):(R=P._module.plot(this,P,U),this.traces[P.uid]=R)}this.glplot.objects.sort(function(j,Z){return j._trace.index-Z._trace.index})},T.updateFx=function(h){d(h)||v(h)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor=h==="pan"?"move":h==="zoom"?"crosshair":null},T.emitPointAction=function(h,E){for(var k,L=h.trace.uid,P=h.pointIndex,I=0;I<this.fullData.length;I++)this.fullData[I].uid===L&&(k=this.fullData[I]);var z={x:h.traceCoord[0],y:h.traceCoord[1],curveNumber:k.index,pointNumber:P,data:k._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};_.appendArrayPointValue(z,k,P),this.graphDiv.emit(E,{points:[z]})},T.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var h=this.glplot,E=this.camera,k=E.mouseListener,L=this.lastButtonState===1&&k.buttons===0,P=this.fullLayout;this.lastButtonState=k.buttons,this.cameraChanged();var I,z=k.x*h.pixelRatio,F=this.canvas.height-h.pixelRatio*k.y;if(E.boxEnabled&&P.dragmode==="zoom"){this.selectBox.enabled=!0;for(var U=this.selectBox.selectBox=[Math.min(E.boxStart[0],E.boxEnd[0]),Math.min(E.boxStart[1],E.boxEnd[1]),Math.max(E.boxStart[0],E.boxEnd[0]),Math.max(E.boxStart[1],E.boxEnd[1])],R=0;R<2;R++)E.boxStart[R]===E.boxEnd[R]&&(U[R]=h.dataBox[R],U[R+2]=h.dataBox[R+2]);h.setDirty()}else if(!E.panning&&this.isMouseOver){this.selectBox.enabled=!1;var j=P._size,Z=this.xaxis.domain,B=this.yaxis.domain,q=(I=h.pick(z/h.pixelRatio+j.l+Z[0]*j.w,F/h.pixelRatio-(j.t+(1-B[1])*j.h)))&&I.object._trace.handlePick(I);if(q&&L&&this.emitPointAction(q,"plotly_click"),I&&I.object._trace.hoverinfo!=="skip"&&P.hovermode&&q&&(!this.lastPickResult||this.lastPickResult.traceUid!==q.trace.uid||this.lastPickResult.dataCoord[0]!==q.dataCoord[0]||this.lastPickResult.dataCoord[1]!==q.dataCoord[1])){var V=q;this.lastPickResult={traceUid:q.trace?q.trace.uid:null,dataCoord:q.dataCoord.slice()},this.spikes.update({center:I.dataCoord}),V.screenCoord=[((h.viewBox[2]-h.viewBox[0])*(I.dataCoord[0]-h.dataBox[0])/(h.dataBox[2]-h.dataBox[0])+h.viewBox[0])/h.pixelRatio,(this.canvas.height-(h.viewBox[3]-h.viewBox[1])*(I.dataCoord[1]-h.dataBox[1])/(h.dataBox[3]-h.dataBox[1])-h.viewBox[1])/h.pixelRatio],this.emitPointAction(q,"plotly_hover");var ne=this.fullData[V.trace.index]||{},ee=V.pointIndex,$=_.castHoverinfo(ne,P,ee);if($&&$!=="all"){var J=$.split("+");J.indexOf("x")===-1&&(V.traceCoord[0]=void 0),J.indexOf("y")===-1&&(V.traceCoord[1]=void 0),J.indexOf("z")===-1&&(V.traceCoord[2]=void 0),J.indexOf("text")===-1&&(V.textLabel=void 0),J.indexOf("name")===-1&&(V.name=void 0)}_.loneHover({x:V.screenCoord[0],y:V.screenCoord[1],xLabel:this.hoverFormatter("xaxis",V.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",V.traceCoord[1]),zLabel:V.traceCoord[2],text:V.textLabel,name:V.name,color:_.castHoverOption(ne,ee,"bgcolor")||V.color,borderColor:_.castHoverOption(ne,ee,"bordercolor"),fontFamily:_.castHoverOption(ne,ee,"font.family"),fontSize:_.castHoverOption(ne,ee,"font.size"),fontColor:_.castHoverOption(ne,ee,"font.color"),nameLength:_.castHoverOption(ne,ee,"namelength"),textAlign:_.castHoverOption(ne,ee,"align")},{container:this.svgContainer,gd:this.graphDiv})}}I||this.unhover(),h.draw()}},T.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),_.loneUnhover(this.svgContainer))},T.hoverFormatter=function(h,E){if(E!==void 0){var k=this[h];return w.tickText(k,k.c2l(E),"hover").text}}},12536:function(Y,O,e){var M=e(67824).overrideAll,A=e(65460),o=e(98432),w=e(84888).op,_=e(3400),p=e(9616),s="gl3d",n="scene";O.name=s,O.attr=n,O.idRoot=n,O.idRegex=O.attrRegex=_.counterRegex("scene"),O.attributes=e(6636),O.layoutAttributes=e(346),O.baseLayoutAttrOverrides=M({hoverlabel:A.hoverlabel},"plot","nested"),O.supplyLayoutDefaults=e(5208),O.plot=function(a){for(var r=a._fullLayout,i=a._fullData,l=r._subplots[s],u=0;u<l.length;u++){var c=l[u],g=w(i,s,c),f=r[c],b=f.camera,v=f._scene;v||(v=new o({id:c,graphDiv:a,container:a.querySelector(".gl-container"),staticPlot:a._context.staticPlot,plotGlPixelRatio:a._context.plotGlPixelRatio,camera:b},r),f._scene=v),v.viewInitial||(v.viewInitial={up:{x:b.up.x,y:b.up.y,z:b.up.z},eye:{x:b.eye.x,y:b.eye.y,z:b.eye.z},center:{x:b.center.x,y:b.center.y,z:b.center.z}}),v.plot(g,r,a.layout)}},O.clean=function(a,r,i,l){for(var u=l._subplots[s]||[],c=0;c<u.length;c++){var g=u[c];!r[g]&&l[g]._scene&&(l[g]._scene.destroy(),l._infolayer&&l._infolayer.selectAll(".annotation-"+g).remove())}},O.toSVG=function(a){for(var r=a._fullLayout,i=r._subplots[s],l=r._size,u=0;u<i.length;u++){var c=r[i[u]],g=c.domain,f=c._scene,b=f.toImage("png");r._glimages.append("svg:image").attr({xmlns:p.svg,"xlink:href":b,x:l.l+l.w*g.x[0],y:l.t+l.h*(1-g.y[1]),width:l.w*(g.x[1]-g.x[0]),height:l.h*(g.y[1]-g.y[0]),preserveAspectRatio:"none"}),f.destroy()}},O.cleanId=function(a){if(a.match(/^scene[0-9]*$/)){var r=a.substr(5);return r==="1"&&(r=""),n+r}},O.updateFx=function(a){for(var r=a._fullLayout,i=r._subplots[s],l=0;l<i.length;l++)r[i[l]]._scene.updateFx(r.dragmode,r.hovermode)}},6636:function(Y){Y.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},86140:function(Y,O,e){var M=e(76308),A=e(94724),o=e(92880).extendFlat,w=e(67824).overrideAll;Y.exports=w({visible:A.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:M.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:A.color,categoryorder:A.categoryorder,categoryarray:A.categoryarray,title:{text:A.title.text,font:A.title.font},type:o({},A.type,{values:["-","linear","log","date","category"]}),autotypenumbers:A.autotypenumbers,autorange:A.autorange,autorangeoptions:{minallowed:A.autorangeoptions.minallowed,maxallowed:A.autorangeoptions.maxallowed,clipmin:A.autorangeoptions.clipmin,clipmax:A.autorangeoptions.clipmax,include:A.autorangeoptions.include,editType:"plot"},rangemode:A.rangemode,minallowed:A.minallowed,maxallowed:A.maxallowed,range:o({},A.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:A.minor.tickmode,nticks:A.nticks,tick0:A.tick0,dtick:A.dtick,tickvals:A.tickvals,ticktext:A.ticktext,ticks:A.ticks,mirror:A.mirror,ticklen:A.ticklen,tickwidth:A.tickwidth,tickcolor:A.tickcolor,showticklabels:A.showticklabels,labelalias:A.labelalias,tickfont:A.tickfont,tickangle:A.tickangle,tickprefix:A.tickprefix,showtickprefix:A.showtickprefix,ticksuffix:A.ticksuffix,showticksuffix:A.showticksuffix,showexponent:A.showexponent,exponentformat:A.exponentformat,minexponent:A.minexponent,separatethousands:A.separatethousands,tickformat:A.tickformat,tickformatstops:A.tickformatstops,hoverformat:A.hoverformat,showline:A.showline,linecolor:A.linecolor,linewidth:A.linewidth,showgrid:A.showgrid,gridcolor:o({},A.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:A.gridwidth,zeroline:A.zeroline,zerolinecolor:A.zerolinecolor,zerolinewidth:A.zerolinewidth,_deprecated:{title:A._deprecated.title,titlefont:A._deprecated.titlefont}},"plot","from-root")},64380:function(Y,O,e){var M=e(49760).mix,A=e(3400),o=e(31780),w=e(86140),_=e(14944),p=e(28336),s=["xaxis","yaxis","zaxis"];Y.exports=function(n,a,r){var i,l;function u(f,b){return A.coerce(i,l,w,f,b)}for(var c=0;c<s.length;c++){var g=s[c];i=n[g]||{},(l=o.newContainer(a,g))._id=g[0]+r.scene,l._name=g,_(i,l,u,r),p(i,l,u,{font:r.font,letter:g[0],data:r.data,showGrid:!0,noAutotickangles:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:r.bgColor,calendar:r.calendar},r.fullLayout),u("gridcolor",M(l.color,r.bgColor,72.72727272727273).toRgbString()),u("title.text",g[0]),l.setScale=A.noop,u("showspikes")&&(u("spikesides"),u("spikethickness"),u("spikecolor",l.color)),u("showaxeslabels"),u("showbackground")&&u("backgroundcolor")}}},44728:function(Y,O,e){var M=e(43080),A=e(3400),o=["xaxis","yaxis","zaxis"];function w(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}w.prototype.merge=function(_,p){for(var s=this,n=0;n<3;++n){var a=p[o[n]];a.visible?(s.labels[n]=_._meta?A.templateString(a.title.text,_._meta):a.title.text,"font"in a.title&&(a.title.font.color&&(s.labelColor[n]=M(a.title.font.color)),a.title.font.family&&(s.labelFont[n]=a.title.font.family),a.title.font.size&&(s.labelSize[n]=a.title.font.size)),"showline"in a&&(s.lineEnable[n]=a.showline),"linecolor"in a&&(s.lineColor[n]=M(a.linecolor)),"linewidth"in a&&(s.lineWidth[n]=a.linewidth),"showgrid"in a&&(s.gridEnable[n]=a.showgrid),"gridcolor"in a&&(s.gridColor[n]=M(a.gridcolor)),"gridwidth"in a&&(s.gridWidth[n]=a.gridwidth),a.type==="log"?s.zeroEnable[n]=!1:"zeroline"in a&&(s.zeroEnable[n]=a.zeroline),"zerolinecolor"in a&&(s.zeroLineColor[n]=M(a.zerolinecolor)),"zerolinewidth"in a&&(s.zeroLineWidth[n]=a.zerolinewidth),"ticks"in a&&a.ticks?s.lineTickEnable[n]=!0:s.lineTickEnable[n]=!1,"ticklen"in a&&(s.lineTickLength[n]=s._defaultLineTickLength[n]=a.ticklen),"tickcolor"in a&&(s.lineTickColor[n]=M(a.tickcolor)),"tickwidth"in a&&(s.lineTickWidth[n]=a.tickwidth),"tickangle"in a&&(s.tickAngle[n]=a.tickangle==="auto"?-3600:Math.PI*-a.tickangle/180),"showticklabels"in a&&(s.tickEnable[n]=a.showticklabels),"tickfont"in a&&(a.tickfont.color&&(s.tickColor[n]=M(a.tickfont.color)),a.tickfont.family&&(s.tickFont[n]=a.tickfont.family),a.tickfont.size&&(s.tickSize[n]=a.tickfont.size)),"mirror"in a?["ticks","all","allticks"].indexOf(a.mirror)!==-1?(s.lineTickMirror[n]=!0,s.lineMirror[n]=!0):a.mirror===!0?(s.lineTickMirror[n]=!1,s.lineMirror[n]=!0):(s.lineTickMirror[n]=!1,s.lineMirror[n]=!1):s.lineMirror[n]=!1,"showbackground"in a&&a.showbackground!==!1?(s.backgroundEnable[n]=!0,s.backgroundColor[n]=M(a.backgroundcolor)):s.backgroundEnable[n]=!1):(s.tickEnable[n]=!1,s.labelEnable[n]=!1,s.lineEnable[n]=!1,s.lineTickEnable[n]=!1,s.gridEnable[n]=!1,s.zeroEnable[n]=!1,s.backgroundEnable[n]=!1)}},Y.exports=function(_,p){var s=new w;return s.merge(_,p),s}},5208:function(Y,O,e){var M=e(3400),A=e(76308),o=e(24040),w=e(168),_=e(64380),p=e(346),s=e(84888).op,n="gl3d";function a(r,i,l,u){for(var c=l("bgcolor"),g=A.combine(c,u.paper_bgcolor),f=["up","center","eye"],b=0;b<f.length;b++)l("camera."+f[b]+".x"),l("camera."+f[b]+".y"),l("camera."+f[b]+".z");l("camera.projection.type");var v=!!l("aspectratio.x")&&!!l("aspectratio.y")&&!!l("aspectratio.z"),d=l("aspectmode",v?"manual":"auto");v||(r.aspectratio=i.aspectratio={x:1,y:1,z:1},d==="manual"&&(i.aspectmode="auto"),r.aspectmode=i.aspectmode);var m=s(u.fullData,n,u.id);_(r,i,{font:u.font,scene:u.id,data:m,bgColor:g,calendar:u.calendar,autotypenumbersDflt:u.autotypenumbersDflt,fullLayout:u.fullLayout}),o.getComponentMethod("annotations3d","handleDefaults")(r,i,u);var x=u.getDfltFromLayout("dragmode");if(x!==!1&&!x)if(x="orbit",r.camera&&r.camera.up){var y=r.camera.up.x,T=r.camera.up.y,h=r.camera.up.z;h!==0&&(y&&T&&h?h/Math.sqrt(y*y+T*T+h*h)>.999&&(x="turntable"):x="turntable")}else x="turntable";l("dragmode",x),l("hovermode",u.getDfltFromLayout("hovermode"))}Y.exports=function(r,i,l){var u=i._basePlotModules.length>1;w(r,i,l,{type:n,attributes:p,handleDefaults:a,fullLayout:i,font:i.font,fullData:l,getDfltFromLayout:function(c){if(!u)return M.validate(r[c],p[c])?r[c]:void 0},autotypenumbersDflt:i.autotypenumbers,paper_bgcolor:i.paper_bgcolor,calendar:i.calendar})}},346:function(Y,O,e){var M=e(86140),A=e(86968).u,o=e(92880).extendFlat,w=e(3400).counterRegex;function _(p,s,n){return{x:{valType:"number",dflt:p,editType:"camera"},y:{valType:"number",dflt:s,editType:"camera"},z:{valType:"number",dflt:n,editType:"camera"},editType:"camera"}}Y.exports={_arrayAttrRegexps:[w("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:o(_(0,0,1),{}),center:o(_(0,0,0),{}),eye:o(_(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:A({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:M,yaxis:M,zaxis:M,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},9020:function(Y,O,e){var M=e(43080),A=["xaxis","yaxis","zaxis"];function o(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}o.prototype.merge=function(w){for(var _=0;_<3;++_){var p=w[A[_]];p.visible?(this.enabled[_]=p.showspikes,this.colors[_]=M(p.spikecolor),this.drawSides[_]=p.spikesides,this.lineWidth[_]=p.spikethickness):(this.enabled[_]=!1,this.drawSides[_]=!1)}},Y.exports=function(w){var _=new o;return _.merge(w),_}},87152:function(Y,O,e){Y.exports=function(_){for(var p=_.axesOptions,s=_.glplot.axesPixels,n=_.fullSceneLayout,a=[[],[],[]],r=0;r<3;++r){var i=n[o[r]];if(i._length=(s[r].hi-s[r].lo)*s[r].pixelsPerDataUnit/_.dataScale[r],Math.abs(i._length)===1/0||isNaN(i._length))a[r]=[];else{i._input_range=i.range.slice(),i.range[0]=s[r].lo/_.dataScale[r],i.range[1]=s[r].hi/_.dataScale[r],i._m=1/(_.dataScale[r]*s[r].pixelsPerDataUnit),i.range[0]===i.range[1]&&(i.range[0]-=1,i.range[1]+=1);var l=i.tickmode;if(i.tickmode==="auto"){i.tickmode="linear";var u=i.nticks||A.constrain(i._length/40,4,9);M.autoTicks(i,Math.abs(i.range[1]-i.range[0])/u)}for(var c=M.calcTicks(i,{msUTC:!0}),g=0;g<c.length;++g)c[g].x=c[g].x*_.dataScale[r],i.type==="date"&&(c[g].text=c[g].text.replace(/\<br\>/g," "));a[r]=c,i.tickmode=l}}for(p.ticks=a,r=0;r<3;++r)for(w[r]=.5*(_.glplot.bounds[0][r]+_.glplot.bounds[1][r]),g=0;g<2;++g)p.bounds[g][r]=_.glplot.bounds[g][r];_.contourLevels=function(f){for(var b=new Array(3),v=0;v<3;++v){for(var d=f[v],m=new Array(d.length),x=0;x<d.length;++x)m[x]=d[x].x;b[v]=m}return b}(a)};var M=e(54460),A=e(3400),o=["xaxis","yaxis","zaxis"],w=[0,0,0]},94424:function(Y){function O(e,M){var A,o,w=[0,0,0,0];for(A=0;A<4;++A)for(o=0;o<4;++o)w[o]+=e[4*A+o]*M[A];return w}Y.exports=function(e,M){return O(e.projection,O(e.view,O(e.model,[M[0],M[1],M[2],1])))}},98432:function(Y,O,e){var M,A,o=e(67792).gl_plot3d,w=o.createCamera,_=o.createScene,p=e(5408),s=e(89184),n=e(24040),a=e(3400),r=a.preserveDrawingBuffer(),i=e(54460),l=e(93024),u=e(43080),c=e(16576),g=e(94424),f=e(44728),b=e(9020),v=e(87152),d=e(19280).applyAutorangeOptions,m=!1;function x(k,L){var P=document.createElement("div"),I=k.container;this.graphDiv=k.graphDiv;var z=document.createElementNS("http://www.w3.org/2000/svg","svg");z.style.position="absolute",z.style.top=z.style.left="0px",z.style.width=z.style.height="100%",z.style["z-index"]=20,z.style["pointer-events"]="none",P.appendChild(z),this.svgContainer=z,P.id=k.id,P.style.position="absolute",P.style.top=P.style.left="0px",P.style.width=P.style.height="100%",I.appendChild(P),this.fullLayout=L,this.id=k.id||"scene",this.fullSceneLayout=L[this.id],this.plotArgs=[[],{},{}],this.axesOptions=f(L,L[this.id]),this.spikeOptions=b(L[this.id]),this.container=P,this.staticMode=!!k.staticPlot,this.pixelRatio=this.pixelRatio||k.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=n.getComponentMethod("annotations3d","convert"),this.drawAnnotations=n.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var y=x.prototype;y.prepareOptions=function(){var k=this,L={canvas:k.canvas,gl:k.gl,glOptions:{preserveDrawingBuffer:r,premultipliedAlpha:!0,antialias:!0},container:k.container,axes:k.axesOptions,spikes:k.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:k.camera,pixelRatio:k.pixelRatio};if(k.staticMode){if(!(A||(M=document.createElement("canvas"),A=p({canvas:M,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");L.gl=A,L.canvas=M}return L};var T=!0;y.tryCreatePlot=function(){var k=this,L=k.prepareOptions(),P=!0;try{k.glplot=_(L)}catch{if(k.staticMode||!T||r)P=!1;else{a.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{r=L.glOptions.preserveDrawingBuffer=!0,k.glplot=_(L)}catch{r=L.glOptions.preserveDrawingBuffer=!1,P=!1}}}return T=!1,P},y.initializeGLCamera=function(){var k=this,L=k.fullSceneLayout.camera,P=L.projection.type==="orthographic";k.camera=w(k.container,{center:[L.center.x,L.center.y,L.center.z],eye:[L.eye.x,L.eye.y,L.eye.z],up:[L.up.x,L.up.y,L.up.z],_ortho:P,zoomMin:.01,zoomMax:100,mode:"orbit"})},y.initializeGLPlot=function(){var k=this;if(k.initializeGLCamera(),!k.tryCreatePlot())return c(k);k.traces={},k.make4thDimension();var L=k.graphDiv,P=L.layout,I=function(){var F={};return k.isCameraChanged(P)&&(F[k.id+".camera"]=k.getCamera()),k.isAspectChanged(P)&&(F[k.id+".aspectratio"]=k.glplot.getAspectratio(),P[k.id].aspectmode!=="manual"&&(k.fullSceneLayout.aspectmode=P[k.id].aspectmode=F[k.id+".aspectmode"]="manual")),F},z=function(F){if(F.fullSceneLayout.dragmode!==!1){var U=I();F.saveLayout(P),F.graphDiv.emit("plotly_relayout",U)}};return k.glplot.canvas&&(k.glplot.canvas.addEventListener("mouseup",function(){z(k)}),k.glplot.canvas.addEventListener("touchstart",function(){m=!0}),k.glplot.canvas.addEventListener("wheel",function(F){if(L._context._scrollZoom.gl3d){if(k.camera._ortho){var U=F.deltaX>F.deltaY?1.1:.9090909090909091,R=k.glplot.getAspectratio();k.glplot.setAspectratio({x:U*R.x,y:U*R.y,z:U*R.z})}z(k)}},!!s&&{passive:!1}),k.glplot.canvas.addEventListener("mousemove",function(){if(k.fullSceneLayout.dragmode!==!1&&k.camera.mouseListener.buttons!==0){var F=I();k.graphDiv.emit("plotly_relayouting",F)}}),k.staticMode||k.glplot.canvas.addEventListener("webglcontextlost",function(F){L&&L.emit&&L.emit("plotly_webglcontextlost",{event:F,layer:k.id})},!1)),k.glplot.oncontextloss=function(){k.recoverContext()},k.glplot.onrender=function(){k.render()},!0},y.render=function(){var k,L=this,P=L.graphDiv,I=L.svgContainer,z=L.container.getBoundingClientRect();P._fullLayout._calcInverseTransform(P);var F=P._fullLayout._invScaleX,U=P._fullLayout._invScaleY,R=z.width*F,j=z.height*U;I.setAttributeNS(null,"viewBox","0 0 "+R+" "+j),I.setAttributeNS(null,"width",R),I.setAttributeNS(null,"height",j),v(L),L.glplot.axes.update(L.axesOptions);for(var Z=Object.keys(L.traces),B=null,q=L.glplot.selection,V=0;V<Z.length;++V)(k=L.traces[Z[V]]).data.hoverinfo!=="skip"&&k.handlePick(q)&&(B=k),k.setContourLevels&&k.setContourLevels();function ne(be,me,Se){var we=L.fullSceneLayout[be+"axis"];return we.type!=="log"&&(me=we.d2l(me)),i.hoverLabelText(we,me,Se)}if(B!==null){var ee=g(L.glplot.cameraParams,q.dataCoordinate);k=B.data;var $,J=P._fullData[k.index],K=q.index,te={xLabel:ne("x",q.traceCoordinate[0],k.xhoverformat),yLabel:ne("y",q.traceCoordinate[1],k.yhoverformat),zLabel:ne("z",q.traceCoordinate[2],k.zhoverformat)},ie=l.castHoverinfo(J,L.fullLayout,K),ae=(ie||"").split("+"),se=ie&&ie==="all";J.hovertemplate||se||(ae.indexOf("x")===-1&&(te.xLabel=void 0),ae.indexOf("y")===-1&&(te.yLabel=void 0),ae.indexOf("z")===-1&&(te.zLabel=void 0),ae.indexOf("text")===-1&&(q.textLabel=void 0),ae.indexOf("name")===-1&&(B.name=void 0));var ce=[];k.type==="cone"||k.type==="streamtube"?(te.uLabel=ne("x",q.traceCoordinate[3],k.uhoverformat),(se||ae.indexOf("u")!==-1)&&ce.push("u: "+te.uLabel),te.vLabel=ne("y",q.traceCoordinate[4],k.vhoverformat),(se||ae.indexOf("v")!==-1)&&ce.push("v: "+te.vLabel),te.wLabel=ne("z",q.traceCoordinate[5],k.whoverformat),(se||ae.indexOf("w")!==-1)&&ce.push("w: "+te.wLabel),te.normLabel=q.traceCoordinate[6].toPrecision(3),(se||ae.indexOf("norm")!==-1)&&ce.push("norm: "+te.normLabel),k.type==="streamtube"&&(te.divergenceLabel=q.traceCoordinate[7].toPrecision(3),(se||ae.indexOf("divergence")!==-1)&&ce.push("divergence: "+te.divergenceLabel)),q.textLabel&&ce.push(q.textLabel),$=ce.join("<br>")):k.type==="isosurface"||k.type==="volume"?(te.valueLabel=i.hoverLabelText(L._mockAxis,L._mockAxis.d2l(q.traceCoordinate[3]),k.valuehoverformat),ce.push("value: "+te.valueLabel),q.textLabel&&ce.push(q.textLabel),$=ce.join("<br>")):$=q.textLabel;var de={x:q.traceCoordinate[0],y:q.traceCoordinate[1],z:q.traceCoordinate[2],data:J._input,fullData:J,curveNumber:J.index,pointNumber:K};l.appendArrayPointValue(de,J,K),k._module.eventData&&(de=J._module.eventData(de,q,J,{},K));var ge={points:[de]};if(L.fullSceneLayout.hovermode){var ve=[];l.loneHover({trace:J,x:(.5+.5*ee[0]/ee[3])*R,y:(.5-.5*ee[1]/ee[3])*j,xLabel:te.xLabel,yLabel:te.yLabel,zLabel:te.zLabel,text:$,name:B.name,color:l.castHoverOption(J,K,"bgcolor")||B.color,borderColor:l.castHoverOption(J,K,"bordercolor"),fontFamily:l.castHoverOption(J,K,"font.family"),fontSize:l.castHoverOption(J,K,"font.size"),fontColor:l.castHoverOption(J,K,"font.color"),nameLength:l.castHoverOption(J,K,"namelength"),textAlign:l.castHoverOption(J,K,"align"),hovertemplate:a.castOption(J,K,"hovertemplate"),hovertemplateLabels:a.extendFlat({},de,te),eventData:[de]},{container:I,gd:P,inOut_bbox:ve}),de.bbox=ve[0]}q.distance<5&&(q.buttons||m)?P.emit("plotly_click",ge):P.emit("plotly_hover",ge),this.oldEventData=ge}else l.loneUnhover(I),this.oldEventData&&P.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;L.drawAnnotations(L)},y.recoverContext=function(){var k=this;k.glplot.dispose();var L=function(){k.glplot.gl.isContextLost()?requestAnimationFrame(L):k.initializeGLPlot()?k.plot.apply(k,k.plotArgs):a.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(L)};var h=["xaxis","yaxis","zaxis"];function E(k,L,P){for(var I=k.fullSceneLayout,z=0;z<3;z++){var F=h[z],U=F.charAt(0),R=I[F],j=L[U],Z=L[U+"calendar"],B=L["_"+U+"length"];if(a.isArrayOrTypedArray(j))for(var q,V=0;V<(B||j.length);V++)if(a.isArrayOrTypedArray(j[V]))for(var ne=0;ne<j[V].length;++ne)q=R.d2l(j[V][ne],0,Z),!isNaN(q)&&isFinite(q)&&(P[0][z]=Math.min(P[0][z],q),P[1][z]=Math.max(P[1][z],q));else q=R.d2l(j[V],0,Z),!isNaN(q)&&isFinite(q)&&(P[0][z]=Math.min(P[0][z],q),P[1][z]=Math.max(P[1][z],q));else P[0][z]=Math.min(P[0][z],0),P[1][z]=Math.max(P[1][z],B-1)}}y.plot=function(k,L,P){var I=this;if(I.plotArgs=[k,L,P],!I.glplot.contextLost){var z,F,U,R,j,Z,B=L[I.id],q=P[I.id];I.fullLayout=L,I.fullSceneLayout=B,I.axesOptions.merge(L,B),I.spikeOptions.merge(B),I.setViewport(B),I.updateFx(B.dragmode,B.hovermode),I.camera.enableWheel=I.graphDiv._context._scrollZoom.gl3d,I.glplot.setClearColor(u(B.bgcolor)),I.setConvert(j),k?Array.isArray(k)||(k=[k]):k=[];var V=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(U=0;U<k.length;++U)(z=k[U]).visible===!0&&z._length!==0&&E(this,z,V);(function(Le,Ie){for(var he=Le.fullSceneLayout,xe=he.annotations||[],ke=0;ke<3;ke++)for(var ze=h[ke],Re=ze.charAt(0),Oe=he[ze],Ve=0;Ve<xe.length;Ve++){var qe=xe[Ve];if(qe.visible){var Je=Oe.r2l(qe[Re]);!isNaN(Je)&&isFinite(Je)&&(Ie[0][ke]=Math.min(Ie[0][ke],Je),Ie[1][ke]=Math.max(Ie[1][ke],Je))}}})(this,V);var ne=[1,1,1];for(R=0;R<3;++R)V[1][R]===V[0][R]?ne[R]=1:ne[R]=1/(V[1][R]-V[0][R]);for(I.dataScale=ne,I.convertAnnotations(this),U=0;U<k.length;++U)(z=k[U]).visible===!0&&z._length!==0&&((F=I.traces[z.uid])?F.data.type===z.type?F.update(z):(F.dispose(),F=z._module.plot(this,z),I.traces[z.uid]=F):(F=z._module.plot(this,z),I.traces[z.uid]=F),F.name=z.name);var ee=Object.keys(I.traces);e:for(U=0;U<ee.length;++U){for(R=0;R<k.length;++R)if(k[R].uid===ee[U]&&k[R].visible===!0&&k[R]._length!==0)continue e;(F=I.traces[ee[U]]).dispose(),delete I.traces[ee[U]]}I.glplot.objects.sort(function(Le,Ie){return Le._trace.data.index-Ie._trace.data.index});var $,J=[[0,0,0],[0,0,0]],K=[],te={};for(U=0;U<3;++U){var ie;if((Z=(j=B[h[U]]).type)in te?(te[Z].acc*=ne[U],te[Z].count+=1):te[Z]={acc:ne[U],count:1},j.autorange){J[0][U]=1/0,J[1][U]=-1/0;var ae=I.glplot.objects,se=I.fullSceneLayout.annotations||[],ce=j._name.charAt(0);for(R=0;R<ae.length;R++){var de=ae[R],ge=de.bounds,ve=de._trace.data._pad||0;de.constructor.name==="ErrorBars"&&j._lowerLogErrorBound?J[0][U]=Math.min(J[0][U],j._lowerLogErrorBound):J[0][U]=Math.min(J[0][U],ge[0][U]/ne[U]-ve),J[1][U]=Math.max(J[1][U],ge[1][U]/ne[U]+ve)}for(R=0;R<se.length;R++){var be=se[R];if(be.visible){var me=j.r2l(be[ce]);J[0][U]=Math.min(J[0][U],me),J[1][U]=Math.max(J[1][U],me)}}if("rangemode"in j&&j.rangemode==="tozero"&&(J[0][U]=Math.min(J[0][U],0),J[1][U]=Math.max(J[1][U],0)),J[0][U]>J[1][U])J[0][U]=-1,J[1][U]=1;else{var Se=J[1][U]-J[0][U];J[0][U]-=Se/32,J[1][U]+=Se/32}if(ie=[J[0][U],J[1][U]],ie=d(ie,j),J[0][U]=ie[0],J[1][U]=ie[1],j.isReversed()){var we=J[0][U];J[0][U]=J[1][U],J[1][U]=we}}else ie=j.range,J[0][U]=j.r2l(ie[0]),J[1][U]=j.r2l(ie[1]);J[0][U]===J[1][U]&&(J[0][U]-=1,J[1][U]+=1),K[U]=J[1][U]-J[0][U],j.range=[J[0][U],J[1][U]],j.limitRange(),I.glplot.setBounds(U,{min:j.range[0]*ne[U],max:j.range[1]*ne[U]})}var _e=B.aspectmode;if(_e==="cube")$=[1,1,1];else if(_e==="manual"){var oe=B.aspectratio;$=[oe.x,oe.y,oe.z]}else{if(_e!=="auto"&&_e!=="data")throw new Error("scene.js aspectRatio was not one of the enumerated types");var le=[1,1,1];for(U=0;U<3;++U){var pe=te[Z=(j=B[h[U]]).type];le[U]=Math.pow(pe.acc,1/pe.count)/ne[U]}$=_e==="data"||Math.max.apply(null,le)/Math.min.apply(null,le)<=4?le:[1,1,1]}B.aspectratio.x=q.aspectratio.x=$[0],B.aspectratio.y=q.aspectratio.y=$[1],B.aspectratio.z=q.aspectratio.z=$[2],I.glplot.setAspectratio(B.aspectratio),I.viewInitial.aspectratio||(I.viewInitial.aspectratio={x:B.aspectratio.x,y:B.aspectratio.y,z:B.aspectratio.z}),I.viewInitial.aspectmode||(I.viewInitial.aspectmode=B.aspectmode);var Ee=B.domain||null,Te=L._size||null;if(Ee&&Te){var Me=I.container.style;Me.position="absolute",Me.left=Te.l+Ee.x[0]*Te.w+"px",Me.top=Te.t+(1-Ee.y[1])*Te.h+"px",Me.width=Te.w*(Ee.x[1]-Ee.x[0])+"px",Me.height=Te.h*(Ee.y[1]-Ee.y[0])+"px"}I.glplot.redraw()}},y.destroy=function(){var k=this;k.glplot&&(k.camera.mouseListener.enabled=!1,k.container.removeEventListener("wheel",k.camera.wheelListener),k.camera=null,k.glplot.dispose(),k.container.parentNode.removeChild(k.container),k.glplot=null)},y.getCamera=function(){var k,L=this;return L.camera.view.recalcMatrix(L.camera.view.lastT()),{up:{x:(k=L.camera).up[0],y:k.up[1],z:k.up[2]},center:{x:k.center[0],y:k.center[1],z:k.center[2]},eye:{x:k.eye[0],y:k.eye[1],z:k.eye[2]},projection:{type:k._ortho===!0?"orthographic":"perspective"}}},y.setViewport=function(k){var L,P=this,I=k.camera;P.camera.lookAt.apply(this,[[(L=I).eye.x,L.eye.y,L.eye.z],[L.center.x,L.center.y,L.center.z],[L.up.x,L.up.y,L.up.z]]),P.glplot.setAspectratio(k.aspectratio),I.projection.type==="orthographic"!==P.camera._ortho&&(P.glplot.redraw(),P.glplot.clearRGBA(),P.glplot.dispose(),P.initializeGLPlot())},y.isCameraChanged=function(k){var L=this.getCamera(),P=a.nestedProperty(k,this.id+".camera").get();function I(R,j,Z,B){var q=["up","center","eye"],V=["x","y","z"];return j[q[Z]]&&R[q[Z]][V[B]]===j[q[Z]][V[B]]}var z=!1;if(P===void 0)z=!0;else{for(var F=0;F<3;F++)for(var U=0;U<3;U++)if(!I(L,P,F,U)){z=!0;break}(!P.projection||L.projection&&L.projection.type!==P.projection.type)&&(z=!0)}return z},y.isAspectChanged=function(k){var L=this.glplot.getAspectratio(),P=a.nestedProperty(k,this.id+".aspectratio").get();return P===void 0||P.x!==L.x||P.y!==L.y||P.z!==L.z},y.saveLayout=function(k){var L,P,I,z,F,U,R=this,j=R.fullLayout,Z=R.isCameraChanged(k),B=R.isAspectChanged(k),q=Z||B;if(q){var V={};Z&&(L=R.getCamera(),I=(P=a.nestedProperty(k,R.id+".camera")).get(),V[R.id+".camera"]=I),B&&(z=R.glplot.getAspectratio(),U=(F=a.nestedProperty(k,R.id+".aspectratio")).get(),V[R.id+".aspectratio"]=U),n.call("_storeDirectGUIEdit",k,j._preGUI,V),Z&&(P.set(L),a.nestedProperty(j,R.id+".camera").set(L)),B&&(F.set(z),a.nestedProperty(j,R.id+".aspectratio").set(z),R.glplot.redraw())}return q},y.updateFx=function(k,L){var P=this,I=P.camera;if(I)if(k==="orbit")I.mode="orbit",I.keyBindingMode="rotate";else if(k==="turntable"){I.up=[0,0,1],I.mode="turntable",I.keyBindingMode="rotate";var z=P.graphDiv,F=z._fullLayout,U=P.fullSceneLayout.camera,R=U.up.x,j=U.up.y,Z=U.up.z;if(Z/Math.sqrt(R*R+j*j+Z*Z)<.999){var B=P.id+".camera.up",q={x:0,y:0,z:1},V={};V[B]=q;var ne=z.layout;n.call("_storeDirectGUIEdit",ne,F._preGUI,V),U.up=q,a.nestedProperty(ne,B).set(q)}}else I.keyBindingMode=k;P.fullSceneLayout.hovermode=L},y.toImage=function(k){var L=this;k||(k="png"),L.staticMode&&L.container.appendChild(M),L.glplot.redraw();var P=L.glplot.gl,I=P.drawingBufferWidth,z=P.drawingBufferHeight;P.bindFramebuffer(P.FRAMEBUFFER,null);var F=new Uint8Array(I*z*4);P.readPixels(0,0,I,z,P.RGBA,P.UNSIGNED_BYTE,F),function(B,q,V){for(var ne=0,ee=V-1;ne<ee;++ne,--ee)for(var $=0;$<q;++$)for(var J=0;J<4;++J){var K=4*(q*ne+$)+J,te=4*(q*ee+$)+J,ie=B[K];B[K]=B[te],B[te]=ie}}(F,I,z),function(B,q,V){for(var ne=0;ne<V;++ne)for(var ee=0;ee<q;++ee){var $=4*(q*ne+ee),J=B[$+3];if(J>0)for(var K=255/J,te=0;te<3;++te)B[$+te]=Math.min(K*B[$+te],255)}}(F,I,z);var U=document.createElement("canvas");U.width=I,U.height=z;var R,j=U.getContext("2d",{willReadFrequently:!0}),Z=j.createImageData(I,z);switch(Z.data.set(F),j.putImageData(Z,0,0),k){case"jpeg":R=U.toDataURL("image/jpeg");break;case"webp":R=U.toDataURL("image/webp");break;default:R=U.toDataURL("image/png")}return L.staticMode&&L.container.removeChild(M),R},y.setConvert=function(){for(var k=0;k<3;k++){var L=this.fullSceneLayout[h[k]];i.setConvert(L,this.fullLayout),L.setScale=a.noop}},y.make4thDimension=function(){var k=this,L=k.graphDiv._fullLayout;k._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},i.setConvert(k._mockAxis,L)},Y.exports=x},52094:function(Y){Y.exports=function(O,e,M,A){A=A||O.length;for(var o=new Array(A),w=0;w<A;w++)o[w]=[O[w],e[w],M[w]];return o}},64859:function(Y,O,e){var M=e(25376),A=e(85656),o=e(22548),w=e(92872),_=e(34200),p=e(66741),s=e(92880).extendFlat,n=M({editType:"calc"});n.family.dflt='"Open Sans", verdana, arial, sans-serif',n.size.dflt=12,n.color.dflt=o.defaultLine,Y.exports={font:n,title:{text:{valType:"string",editType:"layoutstyle"},font:M({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:s(p({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:o.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:o.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:o.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:w.newshape,activeshape:w.activeshape,newselection:_.newselection,activeselection:_.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:s({},A.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:M({editType:"layoutstyle"})}}},47552:function(Y,O,e){var M=e(95376),A="1.13.4",o=' <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',w=[' <a target="_blank" href="https://carto.com/">Carto</a>',o].join(" "),_=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),p={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:o,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:w,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:w,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:_,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:_,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},s=M(p);Y.exports={requiredVersion:A,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:p,styleValuesNonMapbox:s,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install @plotly/mapbox-gl@"+A+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",s.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},89032:function(Y,O,e){var M=e(3400);Y.exports=function(A,o){var w=A.split(" "),_=w[0],p=w[1],s=M.isArrayOrTypedArray(o)?M.mean(o):o,n=.5+s/100,a=1.5+s/100,r=["",""],i=[0,0];switch(_){case"top":r[0]="top",i[1]=-a;break;case"bottom":r[0]="bottom",i[1]=a}switch(p){case"left":r[1]="right",i[0]=-n;break;case"right":r[1]="left",i[0]=n}return{anchor:r[0]&&r[1]?r.join("-"):r[0]?r[0]:r[1]?r[1]:"center",offset:i}}},33688:function(Y,O,e){var M=e(3480),A=e(3400),o=A.strTranslate,w=A.strScale,_=e(84888).KY,p=e(9616),s=e(33428),n=e(43616),a=e(72736),r=e(14440),i="mapbox",l=O.constants=e(47552);function u(c){return typeof c=="string"&&(l.styleValuesMapbox.indexOf(c)!==-1||c.indexOf("mapbox://")===0||c.indexOf("stamen")===0)}O.name=i,O.attr="subplot",O.idRoot=i,O.idRegex=O.attrRegex=A.counterRegex(i),O.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},O.layoutAttributes=e(5232),O.supplyLayoutDefaults=e(5976),O.plot=function(c){var g=c._fullLayout,f=c.calcdata,b=g._subplots[i];if(M.version!==l.requiredVersion)throw new Error(l.wrongVersionErrorMsg);var v=function(h,E){var k=h._fullLayout;if(h._context.mapboxAccessToken==="")return"";for(var L=[],P=[],I=!1,z=!1,F=0;F<E.length;F++){var U=k[E[F]],R=U.accesstoken;u(U.style)&&(R?A.pushUnique(L,R):(u(U._input.style)&&(A.error("Uses Mapbox map style, but did not set an access token."),I=!0),z=!0)),R&&A.pushUnique(P,R)}if(z){var j=I?l.noAccessTokenErrorMsg:l.missingStyleErrorMsg;throw A.error(j),new Error(j)}return L.length?(L.length>1&&A.warn(l.multipleTokensErrorMsg),L[0]):(P.length&&A.log(["Listed mapbox access token(s)",P.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(c,b);M.accessToken=v;for(var d=0;d<b.length;d++){var m=b[d],x=_(f,i,m),y=g[m],T=y._subplot;T||(T=new r(c,m),g[m]._subplot=T),T.viewInitial||(T.viewInitial={center:A.extendFlat({},y.center),zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),T.plot(x,g,c._promises)}},O.clean=function(c,g,f,b){for(var v=b._subplots[i]||[],d=0;d<v.length;d++){var m=v[d];!g[m]&&b[m]._subplot&&b[m]._subplot.destroy()}},O.toSVG=function(c){for(var g=c._fullLayout,f=g._subplots[i],b=g._size,v=0;v<f.length;v++){var d=g[f[v]],m=d.domain,x=d._subplot.toImage("png");g._glimages.append("svg:image").attr({xmlns:p.svg,"xlink:href":x,x:b.l+b.w*m.x[0],y:b.t+b.h*(1-m.y[1]),width:b.w*(m.x[1]-m.x[0]),height:b.h*(m.y[1]-m.y[0]),preserveAspectRatio:"none"});var y=s.select(d._subplot.div);if(y.select(".mapboxgl-ctrl-logo").node().offsetParent!==null){var T=g._glimages.append("g");T.attr("transform",o(b.l+b.w*m.x[0]+10,b.t+b.h*(1-m.y[0])-31)),T.append("path").attr("d",l.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),T.append("path").attr("d",l.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),T.append("path").attr("d",l.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),T.append("polygon").attr("points",l.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var h=y.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),E=g._glimages.append("g"),k=E.append("text");k.text(h).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":h});var L=n.bBox(k.node()),P=b.w*(m.x[1]-m.x[0]);if(L.width>P/2){var I=h.split("|").join("<br>");k.text(I).attr("data-unformatted",I).call(a.convertToTspans,c),L=n.bBox(k.node())}k.attr("transform",o(-3,8-L.height)),E.insert("rect",".static-attribution").attr({x:-L.width-6,y:-L.height-3,width:L.width+6,height:L.height+3,fill:"rgba(255, 255, 255, 0.75)"});var z=1;L.width+6>P&&(z=P/(L.width+6));var F=[b.l+b.w*m.x[1],b.t+b.h*(1-m.y[0])];E.attr("transform",o(F[0],F[1])+w(z))}},O.updateFx=function(c){for(var g=c._fullLayout,f=g._subplots[i],b=0;b<f.length;b++)g[f[b]]._subplot.updateFx(g)}},22360:function(Y,O,e){var M=e(3400),A=e(72736).sanitizeHTML,o=e(89032),w=e(47552);function _(a,r){this.subplot=a,this.uid=a.uid+"-"+r,this.index=r,this.idSource="source-"+this.uid,this.idLayer=w.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var p=_.prototype;function s(a){if(!a.visible)return!1;var r=a.source;if(Array.isArray(r)&&r.length>0){for(var i=0;i<r.length;i++)if(typeof r[i]!="string"||r[i].length===0)return!1;return!0}return M.isPlainObject(r)||typeof r=="string"&&r.length>0}function n(a){var r={},i={};switch(a.type){case"circle":M.extendFlat(i,{"circle-radius":a.circle.radius,"circle-color":a.color,"circle-opacity":a.opacity});break;case"line":M.extendFlat(i,{"line-width":a.line.width,"line-color":a.color,"line-opacity":a.opacity,"line-dasharray":a.line.dash});break;case"fill":M.extendFlat(i,{"fill-color":a.color,"fill-outline-color":a.fill.outlinecolor,"fill-opacity":a.opacity});break;case"symbol":var l=a.symbol,u=o(l.textposition,l.iconsize);M.extendFlat(r,{"icon-image":l.icon+"-15","icon-size":l.iconsize/10,"text-field":l.text,"text-size":l.textfont.size,"text-anchor":u.anchor,"text-offset":u.offset,"symbol-placement":l.placement}),M.extendFlat(i,{"icon-color":a.color,"text-color":l.textfont.color,"text-opacity":a.opacity});break;case"raster":M.extendFlat(i,{"raster-fade-duration":0,"raster-opacity":a.opacity})}return{layout:r,paint:i}}p.update=function(a){this.visible?this.needsNewImage(a)?this.updateImage(a):this.needsNewSource(a)?(this.removeLayer(),this.updateSource(a),this.updateLayer(a)):this.needsNewLayer(a)?this.updateLayer(a):this.updateStyle(a):(this.updateSource(a),this.updateLayer(a)),this.visible=s(a)},p.needsNewImage=function(a){return this.subplot.map.getSource(this.idSource)&&this.sourceType==="image"&&a.sourcetype==="image"&&(this.source!==a.source||JSON.stringify(this.coordinates)!==JSON.stringify(a.coordinates))},p.needsNewSource=function(a){return this.sourceType!==a.sourcetype||JSON.stringify(this.source)!==JSON.stringify(a.source)||this.layerType!==a.type},p.needsNewLayer=function(a){return this.layerType!==a.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},p.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},p.updateImage=function(a){this.subplot.map.getSource(this.idSource).updateImage({url:a.source,coordinates:a.coordinates});var r=this.findFollowingMapboxLayerId(this.lookupBelow());r!==null&&this.subplot.map.moveLayer(this.idLayer,r)},p.updateSource=function(a){var r=this.subplot.map;if(r.getSource(this.idSource)&&r.removeSource(this.idSource),this.sourceType=a.sourcetype,this.source=a.source,s(a)){var i=function(l){var u,c=l.sourcetype,g=l.source,f={type:c};return c==="geojson"?u="data":c==="vector"?u=typeof g=="string"?"url":"tiles":c==="raster"?(u="tiles",f.tileSize=256):c==="image"&&(u="url",f.coordinates=l.coordinates),f[u]=g,l.sourceattribution&&(f.attribution=A(l.sourceattribution)),f}(a);r.addSource(this.idSource,i)}},p.findFollowingMapboxLayerId=function(a){if(a==="traces")for(var r=this.subplot.getMapLayers(),i=0;i<r.length;i++){var l=r[i].id;if(typeof l=="string"&&l.indexOf(w.traceLayerPrefix)===0){a=l;break}}return a},p.updateLayer=function(a){var r=this.subplot,i=n(a),l=this.lookupBelow(),u=this.findFollowingMapboxLayerId(l);this.removeLayer(),s(a)&&r.addLayer({id:this.idLayer,source:this.idSource,"source-layer":a.sourcelayer||"",type:a.type,minzoom:a.minzoom,maxzoom:a.maxzoom,layout:i.layout,paint:i.paint},u),this.layerType=a.type,this.below=l},p.updateStyle=function(a){if(s(a)){var r=n(a);this.subplot.setOptions(this.idLayer,"setLayoutProperty",r.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",r.paint)}},p.removeLayer=function(){var a=this.subplot.map;a.getLayer(this.idLayer)&&a.removeLayer(this.idLayer)},p.dispose=function(){var a=this.subplot.map;a.getLayer(this.idLayer)&&a.removeLayer(this.idLayer),a.getSource(this.idSource)&&a.removeSource(this.idSource)},Y.exports=function(a,r,i){var l=new _(a,r);return l.update(i),l}},5232:function(Y,O,e){var M=e(3400),A=e(76308).defaultLine,o=e(86968).u,w=e(25376),_=e(52904).textposition,p=e(67824).overrideAll,s=e(31780).templatedArray,n=e(47552),a=w({});a.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(Y.exports=p({_arrayAttrRegexps:[M.counterRegex("mapbox",".layers",!0)],domain:o({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:n.styleValuesMapbox.concat(n.styleValuesNonMapbox),dflt:n.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:s("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:A},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:A}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:a,textposition:M.extendFlat({},_,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},5976:function(Y,O,e){var M=e(3400),A=e(168),o=e(51272),w=e(5232);function _(s,n,a,r){a("accesstoken",r.accessToken),a("style"),a("center.lon"),a("center.lat"),a("zoom"),a("bearing"),a("pitch");var i=a("bounds.west"),l=a("bounds.east"),u=a("bounds.south"),c=a("bounds.north");i!==void 0&&l!==void 0&&u!==void 0&&c!==void 0||delete n.bounds,o(s,n,{name:"layers",handleItemDefaults:p}),n._input=s}function p(s,n){function a(c,g){return M.coerce(s,n,w.layers,c,g)}if(a("visible")){var r,i=a("sourcetype"),l=i==="raster"||i==="image";a("source"),a("sourceattribution"),i==="vector"&&a("sourcelayer"),i==="image"&&a("coordinates"),l&&(r="raster");var u=a("type",r);l&&u!=="raster"&&(u=n.type="raster",M.log("Source types *raster* and *image* must drawn *raster* layer type.")),a("below"),a("color"),a("opacity"),a("minzoom"),a("maxzoom"),u==="circle"&&a("circle.radius"),u==="line"&&(a("line.width"),a("line.dash")),u==="fill"&&a("fill.outlinecolor"),u==="symbol"&&(a("symbol.icon"),a("symbol.iconsize"),a("symbol.text"),M.coerceFont(a,"symbol.textfont"),a("symbol.textposition"),a("symbol.placement"))}}Y.exports=function(s,n,a){A(s,n,a,{type:"mapbox",attributes:w,handleDefaults:_,partition:"y",accessToken:n._mapboxAccessToken})}},14440:function(Y,O,e){var M=e(3480),A=e(3400),o=e(27144),w=e(24040),_=e(54460),p=e(86476),s=e(93024),n=e(72760),a=n.drawMode,r=n.selectMode,i=e(22676).prepSelect,l=e(22676).clearOutline,u=e(22676).clearSelectionsCache,c=e(22676).selectOnClick,g=e(47552),f=e(22360);function b(T,h){this.id=h,this.gd=T;var E=T._fullLayout,k=T._context;this.container=E._glcontainer.node(),this.isStatic=k.staticPlot,this.uid=E._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(E),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var v=b.prototype;v.plot=function(T,h,E){var k,L=this,P=h[L.id];L.map&&P.accesstoken!==L.accessToken&&(L.map.remove(),L.map=null,L.styleObj=null,L.traceHash={},L.layerList=[]),k=L.map?new Promise(function(I,z){L.updateMap(T,h,I,z)}):new Promise(function(I,z){L.createMap(T,h,I,z)}),E.push(k)},v.createMap=function(T,h,E,k){var L=this,P=h[L.id],I=L.styleObj=m(P.style,h);L.accessToken=P.accesstoken;var z=P.bounds,F=z?[[z.west,z.south],[z.east,z.north]]:null,U=L.map=new M.Map({container:L.div,style:I.style,center:y(P.center),zoom:P.zoom,bearing:P.bearing,pitch:P.pitch,maxBounds:F,interactive:!L.isStatic,preserveDrawingBuffer:L.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new M.AttributionControl({compact:!0}));U._canvas.style.left="0px",U._canvas.style.top="0px",L.rejectOnError(k),L.isStatic||L.initFx(T,h);var R=[];R.push(new Promise(function(j){U.once("load",j)})),R=R.concat(o.fetchTraceGeoData(T)),Promise.all(R).then(function(){L.fillBelowLookup(T,h),L.updateData(T),L.updateLayout(h),L.resolveOnRender(E)}).catch(k)},v.updateMap=function(T,h,E,k){var L=this,P=L.map,I=h[this.id];L.rejectOnError(k);var z=[],F=m(I.style,h);JSON.stringify(L.styleObj)!==JSON.stringify(F)&&(L.styleObj=F,P.setStyle(F.style),L.traceHash={},z.push(new Promise(function(U){P.once("styledata",U)}))),z=z.concat(o.fetchTraceGeoData(T)),Promise.all(z).then(function(){L.fillBelowLookup(T,h),L.updateData(T),L.updateLayout(h),L.resolveOnRender(E)}).catch(k)},v.fillBelowLookup=function(T,h){var E,k,L=h[this.id].layers,P=this.belowLookup={},I=!1;for(E=0;E<T.length;E++){var z=T[E][0].trace,F=z._module;typeof z.below=="string"?k=z.below:F.getBelow&&(k=F.getBelow(z,this)),k===""&&(I=!0),P["trace-"+z.uid]=k||""}for(E=0;E<L.length;E++){var U=L[E];k=typeof U.below=="string"?U.below:I?"traces":"",P["layout-"+E]=k}var R,j,Z={};for(R in P)Z[k=P[R]]?Z[k].push(R):Z[k]=[R];for(k in Z){var B=Z[k];if(B.length>1)for(E=0;E<B.length;E++)(R=B[E]).indexOf("trace-")===0?(j=R.split("trace-")[1],this.traceHash[j]&&(this.traceHash[j].below=null)):R.indexOf("layout-")===0&&(j=R.split("layout-")[1],this.layerList[j]&&(this.layerList[j].below=null))}};var d={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function m(T,h){var E={};if(A.isPlainObject(T))E.id=T.id,E.style=T;else if(typeof T=="string")if(E.id=T,g.styleValuesMapbox.indexOf(T)!==-1)E.style=x(T);else if(g.stylesNonMapbox[T]){E.style=g.stylesNonMapbox[T];var k=E.style.sources["plotly-"+T],L=k?k.tiles:void 0;L&&L[0]&&L[0].slice(-9)==="?api_key="&&(L[0]+=h._mapboxAccessToken)}else E.style=T;else E.id=g.styleValueDflt,E.style=x(g.styleValueDflt);return E.transition={duration:0,delay:0},E}function x(T){return g.styleUrlPrefix+T+"-"+g.styleUrlSuffix}function y(T){return[T.lon,T.lat]}v.updateData=function(T){var h,E,k,L,P=this.traceHash,I=T.slice().sort(function(j,Z){return d[j[0].trace.type]-d[Z[0].trace.type]});for(k=0;k<I.length;k++){var z=I[k],F=!1;(h=P[(E=z[0].trace).uid])&&(h.type===E.type?(h.update(z),F=!0):h.dispose()),!F&&E._module&&(P[E.uid]=E._module.plot(this,z))}var U=Object.keys(P);e:for(k=0;k<U.length;k++){var R=U[k];for(L=0;L<T.length;L++)if(R===(E=T[L][0].trace).uid)continue e;(h=P[R]).dispose(),delete P[R]}},v.updateLayout=function(T){var h=this.map,E=T[this.id];this.dragging||this.wheeling||(h.setCenter(y(E.center)),h.setZoom(E.zoom),h.setBearing(E.bearing),h.setPitch(E.pitch)),this.updateLayers(T),this.updateFramework(T),this.updateFx(T),this.map.resize(),this.gd._context._scrollZoom.mapbox?h.scrollZoom.enable():h.scrollZoom.disable()},v.resolveOnRender=function(T){var h=this.map;h.on("render",function E(){h.loaded()&&(h.off("render",E),setTimeout(T,10))})},v.rejectOnError=function(T){var h=this.map;function E(){T(new Error(g.mapOnErrorMsg))}h.once("error",E),h.once("style.error",E),h.once("source.error",E),h.once("tile.error",E),h.once("layer.error",E)},v.createFramework=function(T){var h=this,E=h.div=document.createElement("div");E.id=h.uid,E.style.position="absolute",h.container.appendChild(E),h.xaxis={_id:"x",c2p:function(k){return h.project(k).x}},h.yaxis={_id:"y",c2p:function(k){return h.project(k).y}},h.updateFramework(T),h.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},_.setConvert(h.mockAxis,T)},v.initFx=function(T,h){var E=this,k=E.gd,L=E.map;function P(){s.loneUnhover(h._hoverlayer)}function I(){var z=E.getView();k.emit("plotly_relayouting",E.getViewEditsWithDerived(z))}L.on("moveend",function(z){if(E.map){var F=k._fullLayout;if(z.originalEvent||E.wheeling){var U=F[E.id];w.call("_storeDirectGUIEdit",k.layout,F._preGUI,E.getViewEdits(U));var R=E.getView();U._input.center=U.center=R.center,U._input.zoom=U.zoom=R.zoom,U._input.bearing=U.bearing=R.bearing,U._input.pitch=U.pitch=R.pitch,k.emit("plotly_relayout",E.getViewEditsWithDerived(R))}z.originalEvent&&z.originalEvent.type==="mouseup"?E.dragging=!1:E.wheeling&&(E.wheeling=!1),F._rehover&&F._rehover()}}),L.on("wheel",function(){E.wheeling=!0}),L.on("mousemove",function(z){var F=E.div.getBoundingClientRect(),U=[z.originalEvent.offsetX,z.originalEvent.offsetY];z.target.getBoundingClientRect=function(){return F},E.xaxis.p2c=function(){return L.unproject(U).lng},E.yaxis.p2c=function(){return L.unproject(U).lat},k._fullLayout._rehover=function(){k._fullLayout._hoversubplot===E.id&&k._fullLayout[E.id]&&s.hover(k,z,E.id)},s.hover(k,z,E.id),k._fullLayout._hoversubplot=E.id}),L.on("dragstart",function(){E.dragging=!0,P()}),L.on("zoomstart",P),L.on("mouseout",function(){k._fullLayout._hoversubplot=null}),L.on("drag",I),L.on("zoom",I),L.on("dblclick",function(){var z=k._fullLayout[E.id];w.call("_storeDirectGUIEdit",k.layout,k._fullLayout._preGUI,E.getViewEdits(z));var F=E.viewInitial;L.setCenter(y(F.center)),L.setZoom(F.zoom),L.setBearing(F.bearing),L.setPitch(F.pitch);var U=E.getView();z._input.center=z.center=U.center,z._input.zoom=z.zoom=U.zoom,z._input.bearing=z.bearing=U.bearing,z._input.pitch=z.pitch=U.pitch,k.emit("plotly_doubleclick",null),k.emit("plotly_relayout",E.getViewEditsWithDerived(U))}),E.clearOutline=function(){u(E.dragOptions),l(E.dragOptions.gd)},E.onClickInPanFn=function(z){return function(F){var U=k._fullLayout.clickmode;U.indexOf("select")>-1&&c(F.originalEvent,k,[E.xaxis],[E.yaxis],E.id,z),U.indexOf("event")>-1&&s.click(k,F.originalEvent)}}},v.updateFx=function(T){var h=this,E=h.map,k=h.gd;if(!h.isStatic){var L,P=T.dragmode;L=function(F,U){U.isRect?(F.range={})[h.id]=[z([U.xmin,U.ymin]),z([U.xmax,U.ymax])]:(F.lassoPoints={})[h.id]=U.map(z)};var I=h.dragOptions;h.dragOptions=A.extendDeep(I||{},{dragmode:T.dragmode,element:h.div,gd:k,plotinfo:{id:h.id,domain:T[h.id].domain,xaxis:h.xaxis,yaxis:h.yaxis,fillRangeItems:L},xaxes:[h.xaxis],yaxes:[h.yaxis],subplot:h.id}),E.off("click",h.onClickInPanHandler),r(P)||a(P)?(E.dragPan.disable(),E.on("zoomstart",h.clearOutline),h.dragOptions.prepFn=function(F,U,R){i(F,U,R,h.dragOptions,P)},p.init(h.dragOptions)):(E.dragPan.enable(),E.off("zoomstart",h.clearOutline),h.div.onmousedown=null,h.div.ontouchstart=null,h.div.removeEventListener("touchstart",h.div._ontouchstart),h.onClickInPanHandler=h.onClickInPanFn(h.dragOptions),E.on("click",h.onClickInPanHandler))}function z(F){var U=h.map.unproject(F);return[U.lng,U.lat]}},v.updateFramework=function(T){var h=T[this.id].domain,E=T._size,k=this.div.style;k.width=E.w*(h.x[1]-h.x[0])+"px",k.height=E.h*(h.y[1]-h.y[0])+"px",k.left=E.l+h.x[0]*E.w+"px",k.top=E.t+(1-h.y[1])*E.h+"px",this.xaxis._offset=E.l+h.x[0]*E.w,this.xaxis._length=E.w*(h.x[1]-h.x[0]),this.yaxis._offset=E.t+(1-h.y[1])*E.h,this.yaxis._length=E.h*(h.y[1]-h.y[0])},v.updateLayers=function(T){var h,E=T[this.id].layers,k=this.layerList;if(E.length!==k.length){for(h=0;h<k.length;h++)k[h].dispose();for(k=this.layerList=[],h=0;h<E.length;h++)k.push(f(this,h,E[h]))}else for(h=0;h<E.length;h++)k[h].update(E[h])},v.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},v.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},v.setOptions=function(T,h,E){for(var k in E)this.map[h](T,k,E[k])},v.getMapLayers=function(){return this.map.getStyle().layers},v.addLayer=function(T,h){var E=this.map;if(typeof h=="string"){if(h==="")return void E.addLayer(T,h);for(var k=this.getMapLayers(),L=0;L<k.length;L++)if(h===k[L].id)return void E.addLayer(T,h);A.warn(["Trying to add layer with *below* value",h,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}E.addLayer(T)},v.project=function(T){return this.map.project(new M.LngLat(T[0],T[1]))},v.getView=function(){var T=this.map,h=T.getCenter(),E={lon:h.lng,lat:h.lat},k=T.getCanvas(),L=parseInt(k.style.width),P=parseInt(k.style.height);return{center:E,zoom:T.getZoom(),bearing:T.getBearing(),pitch:T.getPitch(),_derived:{coordinates:[T.unproject([0,0]).toArray(),T.unproject([L,0]).toArray(),T.unproject([L,P]).toArray(),T.unproject([0,P]).toArray()]}}},v.getViewEdits=function(T){for(var h=this.id,E=["center","zoom","bearing","pitch"],k={},L=0;L<E.length;L++){var P=E[L];k[h+"."+P]=T[P]}return k},v.getViewEditsWithDerived=function(T){var h=this.id,E=this.getViewEdits(T);return E[h+"._derived"]=T._derived,E},Y.exports=b},66741:function(Y){Y.exports=function(O){var e=O.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},7316:function(Y,O,e){var M=e(33428),A=e(94336).m_,o=e(57624).SO,w=e(38248),_=e(83160),p=e(24040),s=e(73060),n=e(31780),a=e(3400),r=e(76308),i=e(39032).BADNUM,l=e(79811),u=e(1936).clearOutline,c=e(55308),g=e(85656),f=e(16672),b=e(84888)._M,v=a.relinkPrivateKeys,d=a._,m=Y.exports={};a.extendFlat(m,p),m.attributes=e(45464),m.attributes.type.values=m.allTypes,m.fontAttrs=e(25376),m.layoutAttributes=e(64859),m.fontWeight="normal";var x=m.transformsRegistry,y=e(62460);m.executeAPICommand=y.executeAPICommand,m.computeAPICommandBindings=y.computeAPICommandBindings,m.manageCommandObserver=y.manageCommandObserver,m.hasSimpleAPICommandBindings=y.hasSimpleAPICommandBindings,m.redrawText=function(B){return B=a.getGraphDiv(B),new Promise(function(q){setTimeout(function(){B._fullLayout&&(p.getComponentMethod("annotations","draw")(B),p.getComponentMethod("legend","draw")(B),p.getComponentMethod("colorbar","draw")(B),q(m.previousPromises(B)))},300)})},m.resize=function(B){var q;B=a.getGraphDiv(B);var V=new Promise(function(ne,ee){B&&!a.isHidden(B)||ee(new Error("Resize must be passed a displayed plot div element.")),B._redrawTimer&&clearTimeout(B._redrawTimer),B._resolveResize&&(q=B._resolveResize),B._resolveResize=ne,B._redrawTimer=setTimeout(function(){if(!B.layout||B.layout.width&&B.layout.height||a.isHidden(B))ne(B);else{delete B.layout.width,delete B.layout.height;var $=B.changed;B.autoplay=!0,p.call("relayout",B,{autosize:!0}).then(function(){B.changed=$,B._resolveResize===ne&&(delete B._resolveResize,ne(B))})}},100)});return q&&q(V),V},m.previousPromises=function(B){if((B._promises||[]).length)return Promise.all(B._promises).then(function(){B._promises=[]})},m.addLinks=function(B){if(B._context.showLink||B._context.showSources){var q=B._fullLayout,V=a.ensureSingle(q._paper,"text","js-plot-link-container",function(te){te.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:r.defaultLine,"pointer-events":"all"}).each(function(){var ie=M.select(this);ie.append("tspan").classed("js-link-to-tool",!0),ie.append("tspan").classed("js-link-spacer",!0),ie.append("tspan").classed("js-sourcelinks",!0)})}),ne=V.node(),ee={y:q._paper.attr("height")-9};document.body.contains(ne)&&ne.getComputedTextLength()>=q.width-20?(ee["text-anchor"]="start",ee.x=5):(ee["text-anchor"]="end",ee.x=q._paper.attr("width")-7),V.attr(ee);var $=V.select(".js-link-to-tool"),J=V.select(".js-link-spacer"),K=V.select(".js-sourcelinks");B._context.showSources&&B._context.showSources(B),B._context.showLink&&function(te,ie){ie.text("");var ae=ie.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(te._context.linkText+" ");if(te._context.sendData)ae.on("click",function(){m.sendDataToCloud(te)});else{var se=window.location.pathname.split("/"),ce=window.location.search;ae.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+se[2].split(".")[0]+"/"+se[1]+ce})}}(B,$),J.text($.text()&&K.text()?" - ":"")}},m.sendDataToCloud=function(B){var q=(window.PLOTLYENV||{}).BASE_URL||B._context.plotlyServerURL;if(q){B.emit("plotly_beforeexport");var V=M.select(B).append("div").attr("id","hiddenform").style("display","none"),ne=V.append("form").attr({action:q+"/external",method:"post",target:"_blank"});return ne.append("input").attr({type:"text",name:"data"}).node().value=m.graphJson(B,!1,"keepdata"),ne.node().submit(),V.remove(),B.emit("plotly_afterexport"),!1}};var T=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],h=["year","month","dayMonth","dayMonthYear"];function E(B,q){var V=B._context.locale;V||(V="en-US");var ne=!1,ee={};function $(se){for(var ce=!0,de=0;de<q.length;de++){var ge=q[de];ee[ge]||(se[ge]?ee[ge]=se[ge]:ce=!1)}ce&&(ne=!0)}for(var J=0;J<2;J++){for(var K=B._context.locales,te=0;te<2;te++){var ie=(K[V]||{}).format;if(ie&&($(ie),ne))break;K=p.localeRegistry}var ae=V.split("-")[0];if(ne||ae===V)break;V=ae}return ne||$(p.localeRegistry.en.format),ee}function k(B,q){var V={_fullLayout:q},ne=B._id.charAt(0)==="x",ee=B._mainAxis._anchorAxis,$="",J="",K="";if(ee&&(K=ee._mainAxis._id,$=ne?B._id+K:K+B._id),!$||!q._plots[$]){$="";for(var te=B._counterAxes,ie=0;ie<te.length;ie++){var ae=te[ie],se=ne?B._id+ae:ae+B._id;J||(J=se);var ce=l.getFromId(V,ae);if(K&&ce.overlaying===K){$=se;break}}}return $||J}function L(B){var q=B.transforms;if(Array.isArray(q)&&q.length)for(var V=0;V<q.length;V++){var ne=q[V],ee=ne._module||x[ne.type];if(ee&&ee.makesData)return!0}return!1}function P(B,q,V,ne){for(var ee=B.transforms,$=[B],J=0;J<ee.length;J++){var K=ee[J],te=x[K.type];te&&te.transform&&($=te.transform($,{transform:K,fullTrace:B,fullData:q,layout:V,fullLayout:ne,transformIndex:J}))}return $}function I(B){return typeof B=="string"&&B.substr(B.length-2)==="px"&&parseFloat(B)}function z(B){var q=B.margin;if(!B._size){var V=B._size={l:Math.round(q.l),r:Math.round(q.r),t:Math.round(q.t),b:Math.round(q.b),p:Math.round(q.pad)};V.w=Math.round(B.width)-V.l-V.r,V.h=Math.round(B.height)-V.t-V.b}B._pushmargin||(B._pushmargin={}),B._pushmarginIds||(B._pushmarginIds={}),B._reservedMargin||(B._reservedMargin={})}m.supplyDefaults=function(B,q){var V=q&&q.skipUpdateCalc,ne=B._fullLayout||{};if(ne._skipDefaults)delete ne._skipDefaults;else{var ee,$=B._fullLayout={},J=B.layout||{},K=B._fullData||[],te=B._fullData=[],ie=B.data||[],ae=B.calcdata||[],se=B._context||{};B._transitionData||m.createTransitionData(B),$._dfltTitle={plot:d(B,"Click to enter Plot title"),x:d(B,"Click to enter X axis title"),y:d(B,"Click to enter Y axis title"),colorbar:d(B,"Click to enter Colorscale title"),annotation:d(B,"new text")},$._traceWord=d(B,"trace");var ce=E(B,T);if($._mapboxAccessToken=se.mapboxAccessToken,ne._initialAutoSizeIsDone){var de=ne.width,ge=ne.height;m.supplyLayoutGlobalDefaults(J,$,ce),J.width||($.width=de),J.height||($.height=ge),m.sanitizeMargins($)}else{m.supplyLayoutGlobalDefaults(J,$,ce);var ve=!J.width||!J.height,be=$.autosize,me=se.autosizable;ve&&(be||me)?m.plotAutoSize(B,J,$):ve&&m.sanitizeMargins($),!be&&ve&&(J.width=$.width,J.height=$.height)}$._d3locale=function(Oe,Ve){return Oe.decimal=Ve.charAt(0),Oe.thousands=Ve.charAt(1),{numberFormat:function(qe){try{qe=o(Oe).format(a.adjustFormat(qe))}catch{return a.warnBadFormat(qe),a.noFormat}return qe},timeFormat:A(Oe).utcFormat}}(ce,$.separators),$._extraFormat=E(B,h),$._initialAutoSizeIsDone=!0,$._dataLength=ie.length,$._modules=[],$._visibleModules=[],$._basePlotModules=[];var Se=$._subplots=function(){var Oe,Ve,qe=p.collectableSubplotTypes,Je={};if(!qe){qe=[];var ot=p.subplotsRegistry;for(var rt in ot){var dt=ot[rt].attr;if(dt&&(qe.push(rt),Array.isArray(dt)))for(Ve=0;Ve<dt.length;Ve++)a.pushUnique(qe,dt[Ve])}}for(Oe=0;Oe<qe.length;Oe++)Je[qe[Oe]]=[];return Je}(),we=$._splomAxes={x:{},y:{}},_e=$._splomSubplots={};$._splomGridDflt={},$._scatterStackOpts={},$._firstScatter={},$._alignmentOpts={},$._colorAxes={},$._requestRangeslider={},$._traceUids=function(Oe,Ve){var qe,Je,ot=Ve.length,rt=[];for(qe=0;qe<Oe.length;qe++){var dt=Oe[qe]._fullInput;dt!==Je&&rt.push(dt),Je=dt}var _t=rt.length,yt=new Array(ot),et={};function nt(Ft,It){yt[It]=Ft,et[Ft]=1}function At(Ft,It){if(Ft&&typeof Ft=="string"&&!et[Ft])return nt(Ft,It),!0}for(qe=0;qe<ot;qe++){var Rt=Ve[qe].uid;typeof Rt=="number"&&(Rt=String(Rt)),At(Rt,qe)||qe<_t&&At(rt[qe].uid,qe)||nt(a.randstr(et),qe)}return yt}(K,ie),$._globalTransforms=(B._context||{}).globalTransforms,m.supplyDataDefaults(ie,te,J,$);var oe=Object.keys(we.x),le=Object.keys(we.y);if(oe.length>1&&le.length>1){for(p.getComponentMethod("grid","sizeDefaults")(J,$),ee=0;ee<oe.length;ee++)a.pushUnique(Se.xaxis,oe[ee]);for(ee=0;ee<le.length;ee++)a.pushUnique(Se.yaxis,le[ee]);for(var pe in _e)a.pushUnique(Se.cartesian,pe)}if($._has=m._hasPlotType.bind($),K.length===te.length)for(ee=0;ee<te.length;ee++)v(te[ee],K[ee]);m.supplyLayoutModuleDefaults(J,$,te,B._transitionData);var Ee=$._visibleModules,Te=[];for(ee=0;ee<Ee.length;ee++){var Me=Ee[ee].crossTraceDefaults;Me&&a.pushUnique(Te,Me)}for(ee=0;ee<Te.length;ee++)Te[ee](te,$);$._hasOnlyLargeSploms=$._basePlotModules.length===1&&$._basePlotModules[0].name==="splom"&&oe.length>15&&le.length>15&&$.shapes.length===0&&$.images.length===0,m.linkSubplots(te,$,K,ne),m.cleanPlot(te,$,K,ne);var Le=!(!ne._has||!ne._has("gl2d")),Ie=!(!$._has||!$._has("gl2d")),he=!(!ne._has||!ne._has("cartesian"))||Le,xe=!(!$._has||!$._has("cartesian"))||Ie;he&&!xe?ne._bgLayer.remove():xe&&!he&&($._shouldCreateBgLayer=!0),ne._zoomlayer&&!B._dragging&&u({_fullLayout:ne}),function(Oe,Ve){var qe,Je=[];Ve.meta&&(qe=Ve._meta={meta:Ve.meta,layout:{meta:Ve.meta}});for(var ot=0;ot<Oe.length;ot++){var rt=Oe[ot];rt.meta?Je[rt.index]=rt._meta={meta:rt.meta}:Ve.meta&&(rt._meta={meta:Ve.meta}),Ve.meta&&(rt._meta.layout={meta:Ve.meta})}Je.length&&(qe||(qe=Ve._meta={}),qe.data=Je)}(te,$),v($,ne),p.getComponentMethod("colorscale","crossTraceDefaults")(te,$),$._preGUI||($._preGUI={}),$._tracePreGUI||($._tracePreGUI={});var ke,ze=$._tracePreGUI,Re={};for(ke in ze)Re[ke]="old";for(ee=0;ee<te.length;ee++)Re[ke=te[ee]._fullInput.uid]||(ze[ke]={}),Re[ke]="new";for(ke in Re)Re[ke]==="old"&&delete ze[ke];z($),p.getComponentMethod("rangeslider","makeData")($),V||ae.length!==te.length||m.supplyDefaultsUpdateCalc(ae,te)}},m.supplyDefaultsUpdateCalc=function(B,q){for(var V=0;V<q.length;V++){var ne=q[V],ee=(B[V]||[])[0];if(ee&&ee.trace){var $=ee.trace;if($._hasCalcTransform){var J,K,te,ie=$._arrayAttrs;for(J=0;J<ie.length;J++)K=ie[J],te=a.nestedProperty($,K).get().slice(),a.nestedProperty(ne,K).set(te)}ee.trace=ne}}},m.createTransitionData=function(B){B._transitionData||(B._transitionData={}),B._transitionData._frames||(B._transitionData._frames=[]),B._transitionData._frameHash||(B._transitionData._frameHash={}),B._transitionData._counter||(B._transitionData._counter=0),B._transitionData._interruptCallbacks||(B._transitionData._interruptCallbacks=[])},m._hasPlotType=function(B){var q,V=this._basePlotModules||[];for(q=0;q<V.length;q++)if(V[q].name===B)return!0;var ne=this._modules||[];for(q=0;q<ne.length;q++){var ee=ne[q].name;if(ee===B)return!0;var $=p.modules[ee];if($&&$.categories[B])return!0}return!1},m.cleanPlot=function(B,q,V,ne){var ee,$,J=ne._basePlotModules||[];for(ee=0;ee<J.length;ee++){var K=J[ee];K.clean&&K.clean(B,q,V,ne)}var te=ne._has&&ne._has("gl"),ie=q._has&&q._has("gl");te&&!ie&&ne._glcontainer!==void 0&&(ne._glcontainer.selectAll(".gl-canvas").remove(),ne._glcontainer.selectAll(".no-webgl").remove(),ne._glcanvas=null);var ae=!!ne._infolayer;e:for(ee=0;ee<V.length;ee++){var se=V[ee].uid;for($=0;$<B.length;$++)if(se===B[$].uid)continue e;ae&&ne._infolayer.select(".cb"+se).remove()}},m.linkSubplots=function(B,q,V,ne){var ee,$,J=ne._plots||{},K=q._plots={},te=q._subplots,ie={_fullData:B,_fullLayout:q},ae=te.cartesian.concat(te.gl2d||[]);for(ee=0;ee<ae.length;ee++){var se,ce=ae[ee],de=J[ce],ge=l.getFromId(ie,ce,"x"),ve=l.getFromId(ie,ce,"y");for(de?se=K[ce]=de:(se=K[ce]={}).id=ce,ge._counterAxes.push(ve._id),ve._counterAxes.push(ge._id),ge._subplotsWith.push(ce),ve._subplotsWith.push(ce),se.xaxis=ge,se.yaxis=ve,se._hasClipOnAxisFalse=!1,$=0;$<B.length;$++){var be=B[$];if(be.xaxis===se.xaxis._id&&be.yaxis===se.yaxis._id&&be.cliponaxis===!1){se._hasClipOnAxisFalse=!0;break}}}var me,Se=l.list(ie,null,!0);for(ee=0;ee<Se.length;ee++){var we=null;(me=Se[ee]).overlaying&&(we=l.getFromId(ie,me.overlaying))&&we.overlaying&&(me.overlaying=!1,we=null),me._mainAxis=we||me,we&&(me.domain=we.domain.slice()),me._anchorAxis=me.anchor==="free"?null:l.getFromId(ie,me.anchor)}for(ee=0;ee<Se.length;ee++)if((me=Se[ee])._counterAxes.sort(l.idSort),me._subplotsWith.sort(a.subplotSort),me._mainSubplot=k(me,q),me._counterAxes.length&&(me.spikemode&&me.spikemode.indexOf("across")!==-1||me.automargin&&me.mirror&&me.anchor!=="free"||p.getComponentMethod("rangeslider","isVisible")(me))){var _e=1,oe=0;for($=0;$<me._counterAxes.length;$++){var le=l.getFromId(ie,me._counterAxes[$]);_e=Math.min(_e,le.domain[0]),oe=Math.max(oe,le.domain[1])}_e<oe&&(me._counterDomainMin=_e,me._counterDomainMax=oe)}},m.clearExpandedTraceDefaultColors=function(B){var q,V,ne;for(V=[],(q=B._module._colorAttrs)||(B._module._colorAttrs=q=[],s.crawl(B._module.attributes,function(ee,$,J,K){V[K]=$,V.length=K+1,ee.valType==="color"&&ee.dflt===void 0&&q.push(V.join("."))})),ne=0;ne<q.length;ne++)a.nestedProperty(B,"_input."+q[ne]).get()||a.nestedProperty(B,q[ne]).set(null)},m.supplyDataDefaults=function(B,q,V,ne){var ee,$,J,K=ne._modules,te=ne._visibleModules,ie=ne._basePlotModules,ae=0,se=0;function ce(pe){q.push(pe);var Ee=pe._module;Ee&&(a.pushUnique(K,Ee),pe.visible===!0&&a.pushUnique(te,Ee),a.pushUnique(ie,pe._module.basePlotModule),ae++,pe._input.visible!==!1&&se++)}ne._transformModules=[];var de={},ge=[],ve=(V.template||{}).data||{},be=n.traceTemplater(ve);for(ee=0;ee<B.length;ee++){if(J=B[ee],($=be.newTrace(J)).uid=ne._traceUids[ee],m.supplyTraceDefaults(J,$,se,ne,ee),$.index=ee,$._input=J,$._expandedIndex=ae,$.transforms&&$.transforms.length)for(var me=J.visible!==!1&&$.visible===!1,Se=P($,q,V,ne),we=0;we<Se.length;we++){var _e=Se[we],oe={_template:$._template,type:$.type,uid:$.uid+we};me&&_e.visible===!1&&delete _e.visible,m.supplyTraceDefaults(_e,oe,ae,ne,ee),v(oe,_e),oe.index=ee,oe._input=J,oe._fullInput=$,oe._expandedIndex=ae,oe._expandedInput=_e,ce(oe)}else $._fullInput=$,$._expandedInput=$,ce($);p.traceIs($,"carpetAxis")&&(de[$.carpet]=$),p.traceIs($,"carpetDependent")&&ge.push(ee)}for(ee=0;ee<ge.length;ee++)if(($=q[ge[ee]]).visible){var le=de[$.carpet];$._carpet=le,le&&le.visible?($.xaxis=le.xaxis,$.yaxis=le.yaxis):$.visible=!1}},m.supplyAnimationDefaults=function(B){var q;B=B||{};var V={};function ne(ee,$){return a.coerce(B||{},V,g,ee,$)}if(ne("mode"),ne("direction"),ne("fromcurrent"),Array.isArray(B.frame))for(V.frame=[],q=0;q<B.frame.length;q++)V.frame[q]=m.supplyAnimationFrameDefaults(B.frame[q]||{});else V.frame=m.supplyAnimationFrameDefaults(B.frame||{});if(Array.isArray(B.transition))for(V.transition=[],q=0;q<B.transition.length;q++)V.transition[q]=m.supplyAnimationTransitionDefaults(B.transition[q]||{});else V.transition=m.supplyAnimationTransitionDefaults(B.transition||{});return V},m.supplyAnimationFrameDefaults=function(B){var q={};function V(ne,ee){return a.coerce(B||{},q,g.frame,ne,ee)}return V("duration"),V("redraw"),q},m.supplyAnimationTransitionDefaults=function(B){var q={};function V(ne,ee){return a.coerce(B||{},q,g.transition,ne,ee)}return V("duration"),V("easing"),q},m.supplyFrameDefaults=function(B){var q={};function V(ne,ee){return a.coerce(B,q,f,ne,ee)}return V("group"),V("name"),V("traces"),V("baseframe"),V("data"),V("layout"),q},m.supplyTraceDefaults=function(B,q,V,ne,ee){var $,J=ne.colorway||r.defaults,K=J[V%J.length];function te(we,_e){return a.coerce(B,q,m.attributes,we,_e)}var ie=te("visible");te("type"),te("name",ne._traceWord+" "+ee),te("uirevision",ne.uirevision);var ae=m.getModule(q);if(q._module=ae,ae){var se=ae.basePlotModule,ce=se.attr,de=se.attributes;if(ce&&de){var ge=ne._subplots,ve="";if(ie||se.name!=="gl2d"){if(Array.isArray(ce))for($=0;$<ce.length;$++){var be=ce[$],me=a.coerce(B,q,de,be);ge[be]&&a.pushUnique(ge[be],me),ve+=me}else ve=a.coerce(B,q,de,ce);ge[se.name]&&a.pushUnique(ge[se.name],ve)}}}if(ie){if(te("customdata"),te("ids"),te("meta"),p.traceIs(q,"showLegend")?(a.coerce(B,q,ae.attributes.showlegend?ae.attributes:m.attributes,"showlegend"),te("legend"),te("legendwidth"),te("legendgroup"),te("legendgrouptitle.text"),te("legendrank"),q._dfltShowLegend=!0):q._dfltShowLegend=!1,ae&&ae.supplyDefaults(B,q,K,ne),p.traceIs(q,"noOpacity")||te("opacity"),p.traceIs(q,"notLegendIsolatable")&&(q.visible=!!q.visible),p.traceIs(q,"noHover")||(q.hovertemplate||a.coerceHoverinfo(B,q,ne),q.type!=="parcats"&&p.getComponentMethod("fx","supplyDefaults")(B,q,K,ne)),ae&&ae.selectPoints){var Se=te("selectedpoints");a.isTypedArray(Se)&&(q.selectedpoints=Array.from(Se))}m.supplyTransformDefaults(B,q,ne)}return q},m.hasMakesDataTransform=L,m.supplyTransformDefaults=function(B,q,V){if(q._length||L(B)){var ne=V._globalTransforms||[],ee=V._transformModules||[];if(Array.isArray(B.transforms)||ne.length!==0)for(var $=B.transforms||[],J=ne.concat($),K=q.transforms=[],te=0;te<J.length;te++){var ie,ae=J[te],se=ae.type,ce=x[se],de=!(ae._module&&ae._module===ce),ge=ce&&typeof ce.transform=="function";ce||a.warn("Unrecognized transform type "+se+"."),ce&&ce.supplyDefaults&&(de||ge)?((ie=ce.supplyDefaults(ae,q,V,B)).type=se,ie._module=ce,a.pushUnique(ee,ce)):ie=a.extendFlat({},ae),K.push(ie)}}},m.supplyLayoutGlobalDefaults=function(B,q,V){function ne(ae,se){return a.coerce(B,q,m.layoutAttributes,ae,se)}var ee=B.template;a.isPlainObject(ee)&&(q.template=ee,q._template=ee.layout,q._dataTemplate=ee.data),ne("autotypenumbers");var $=a.coerceFont(ne,"font"),J=$.size;a.coerceFont(ne,"title.font",a.extendFlat({},$,{size:Math.round(1.4*J)})),ne("title.text",q._dfltTitle.plot),ne("title.xref");var K=ne("title.yref");ne("title.pad.t"),ne("title.pad.r"),ne("title.pad.b"),ne("title.pad.l");var te=ne("title.automargin");ne("title.x"),ne("title.xanchor"),ne("title.y"),ne("title.yanchor"),te&&(K==="paper"&&(q.title.y!==0&&(q.title.y=1),q.title.yanchor==="auto"&&(q.title.yanchor=q.title.y===0?"top":"bottom")),K==="container"&&(q.title.y==="auto"&&(q.title.y=1),q.title.yanchor==="auto"&&(q.title.yanchor=q.title.y<.5?"bottom":"top"))),ne("uniformtext.mode")&&ne("uniformtext.minsize"),ne("autosize",!(B.width&&B.height)),ne("width"),ne("height"),ne("minreducedwidth"),ne("minreducedheight"),ne("margin.l"),ne("margin.r"),ne("margin.t"),ne("margin.b"),ne("margin.pad"),ne("margin.autoexpand"),B.width&&B.height&&m.sanitizeMargins(q),p.getComponentMethod("grid","sizeDefaults")(B,q),ne("paper_bgcolor"),ne("separators",V.decimal+V.thousands),ne("hidesources"),ne("colorway"),ne("datarevision");var ie=ne("uirevision");ne("editrevision",ie),ne("selectionrevision",ie),p.getComponentMethod("modebar","supplyLayoutDefaults")(B,q),p.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(B,q,ne),p.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(B,q,ne),ne("meta"),a.isPlainObject(B.transition)&&(ne("transition.duration"),ne("transition.easing"),ne("transition.ordering")),p.getComponentMethod("calendars","handleDefaults")(B,q,"calendar"),p.getComponentMethod("fx","supplyLayoutGlobalDefaults")(B,q,ne),a.coerce(B,q,c,"scattermode")},m.plotAutoSize=function(B,q,V){var ne,ee,$=B._context||{},J=$.frameMargins,K=a.isPlotDiv(B);if(K&&B.emit("plotly_autosize"),$.fillFrame)ne=window.innerWidth,ee=window.innerHeight,document.body.style.overflow="hidden";else{var te=K?window.getComputedStyle(B):{};if(ne=I(te.width)||I(te.maxWidth)||V.width,ee=I(te.height)||I(te.maxHeight)||V.height,w(J)&&J>0){var ie=1-2*J;ne=Math.round(ie*ne),ee=Math.round(ie*ee)}}var ae=m.layoutAttributes.width.min,se=m.layoutAttributes.height.min;ne<ae&&(ne=ae),ee<se&&(ee=se);var ce=!q.width&&Math.abs(V.width-ne)>1,de=!q.height&&Math.abs(V.height-ee)>1;(de||ce)&&(ce&&(V.width=ne),de&&(V.height=ee)),B._initialAutoSize||(B._initialAutoSize={width:ne,height:ee}),m.sanitizeMargins(V)},m.supplyLayoutModuleDefaults=function(B,q,V,ne){var ee,$,J,K=p.componentsRegistry,te=q._basePlotModules,ie=p.subplotsRegistry.cartesian;for(ee in K)(J=K[ee]).includeBasePlot&&J.includeBasePlot(B,q);for(var ae in te.length||te.push(ie),q._has("cartesian")&&(p.getComponentMethod("grid","contentDefaults")(B,q),ie.finalizeSubplots(B,q)),q._subplots)q._subplots[ae].sort(a.subplotSort);for($=0;$<te.length;$++)(J=te[$]).supplyLayoutDefaults&&J.supplyLayoutDefaults(B,q,V);var se=q._modules;for($=0;$<se.length;$++)(J=se[$]).supplyLayoutDefaults&&J.supplyLayoutDefaults(B,q,V);var ce=q._transformModules;for($=0;$<ce.length;$++)(J=ce[$]).supplyLayoutDefaults&&J.supplyLayoutDefaults(B,q,V,ne);for(ee in K)(J=K[ee]).supplyLayoutDefaults&&J.supplyLayoutDefaults(B,q,V)},m.purge=function(B){var q=B._fullLayout||{};q._glcontainer!==void 0&&(q._glcontainer.selectAll(".gl-canvas").remove(),q._glcontainer.remove(),q._glcanvas=null),q._modeBar&&q._modeBar.destroy(),B._transitionData&&(B._transitionData._interruptCallbacks&&(B._transitionData._interruptCallbacks.length=0),B._transitionData._animationRaf&&window.cancelAnimationFrame(B._transitionData._animationRaf)),a.clearThrottle(),a.clearResponsive(B),delete B.data,delete B.layout,delete B._fullData,delete B._fullLayout,delete B.calcdata,delete B.empty,delete B.fid,delete B.undoqueue,delete B.undonum,delete B.autoplay,delete B.changed,delete B._promises,delete B._redrawTimer,delete B._hmlumcount,delete B._hmpixcount,delete B._transitionData,delete B._transitioning,delete B._initialAutoSize,delete B._transitioningWithDuration,delete B._dragging,delete B._dragged,delete B._dragdata,delete B._hoverdata,delete B._snapshotInProgress,delete B._editing,delete B._mouseDownTime,delete B._legendMouseDownTime,B.removeAllListeners&&B.removeAllListeners()},m.style=function(B){var q,V=B._fullLayout._visibleModules,ne=[];for(q=0;q<V.length;q++){var ee=V[q];ee.style&&a.pushUnique(ne,ee.style)}for(q=0;q<ne.length;q++)ne[q](B)},m.sanitizeMargins=function(B){if(B&&B.margin){var q,V=B.width,ne=B.height,ee=B.margin,$=V-(ee.l+ee.r),J=ne-(ee.t+ee.b);$<0&&(q=(V-1)/(ee.l+ee.r),ee.l=Math.floor(q*ee.l),ee.r=Math.floor(q*ee.r)),J<0&&(q=(ne-1)/(ee.t+ee.b),ee.t=Math.floor(q*ee.t),ee.b=Math.floor(q*ee.b))}},m.clearAutoMarginIds=function(B){B._fullLayout._pushmarginIds={}},m.allowAutoMargin=function(B,q){B._fullLayout._pushmarginIds[q]=1},m.autoMargin=function(B,q,V){var ne=B._fullLayout,ee=ne.width,$=ne.height,J=ne.margin,K=ne.minreducedwidth,te=ne.minreducedheight,ie=a.constrain(ee-J.l-J.r,2,K),ae=a.constrain($-J.t-J.b,2,te),se=Math.max(0,ee-ie),ce=Math.max(0,$-ae),de=ne._pushmargin,ge=ne._pushmarginIds;if(J.autoexpand!==!1){if(V){var ve=V.pad;if(ve===void 0&&(ve=Math.min(12,J.l,J.r,J.t,J.b)),se){var be=(V.l+V.r)/se;be>1&&(V.l/=be,V.r/=be)}if(ce){var me=(V.t+V.b)/ce;me>1&&(V.t/=me,V.b/=me)}var Se=V.xl!==void 0?V.xl:V.x,we=V.xr!==void 0?V.xr:V.x,_e=V.yt!==void 0?V.yt:V.y,oe=V.yb!==void 0?V.yb:V.y;de[q]={l:{val:Se,size:V.l+ve},r:{val:we,size:V.r+ve},b:{val:oe,size:V.b+ve},t:{val:_e,size:V.t+ve}},ge[q]=1}else delete de[q],delete ge[q];if(!ne._replotting)return m.doAutoMargin(B)}},m.doAutoMargin=function(B){var q=B._fullLayout,V=q.width,ne=q.height;q._size||(q._size={}),z(q);var ee=q._size,$=q.margin,J={t:0,b:0,l:0,r:0},K=a.extendFlat({},ee),te=$.l,ie=$.r,ae=$.t,se=$.b,ce=q._pushmargin,de=q._pushmarginIds,ge=q.minreducedwidth,ve=q.minreducedheight;if($.autoexpand!==!1){for(var be in ce)de[be]||delete ce[be];var me=B._fullLayout._reservedMargin;for(var Se in me)for(var we in me[Se]){var _e=me[Se][we];J[we]=Math.max(J[we],_e)}for(var oe in ce.base={l:{val:0,size:te},r:{val:1,size:ie},t:{val:1,size:ae},b:{val:0,size:se}},J){var le=0;for(var pe in ce)pe!=="base"&&w(ce[pe][oe].size)&&(le=ce[pe][oe].size>le?ce[pe][oe].size:le);var Ee=Math.max(0,$[oe]-le);J[oe]=Math.max(0,J[oe]-Ee)}for(var Te in ce){var Me=ce[Te].l||{},Le=ce[Te].b||{},Ie=Me.val,he=Me.size,xe=Le.val,ke=Le.size,ze=V-J.r-J.l,Re=ne-J.t-J.b;for(var Oe in ce){if(w(he)&&ce[Oe].r){var Ve=ce[Oe].r.val,qe=ce[Oe].r.size;if(Ve>Ie){var Je=(he*Ve+(qe-ze)*Ie)/(Ve-Ie),ot=(qe*(1-Ie)+(he-ze)*(1-Ve))/(Ve-Ie);Je+ot>te+ie&&(te=Je,ie=ot)}}if(w(ke)&&ce[Oe].t){var rt=ce[Oe].t.val,dt=ce[Oe].t.size;if(rt>xe){var _t=(ke*rt+(dt-Re)*xe)/(rt-xe),yt=(dt*(1-xe)+(ke-Re)*(1-rt))/(rt-xe);_t+yt>se+ae&&(se=_t,ae=yt)}}}}}var et=a.constrain(V-$.l-$.r,2,ge),nt=a.constrain(ne-$.t-$.b,2,ve),At=Math.max(0,V-et),Rt=Math.max(0,ne-nt);if(At){var Ft=(te+ie)/At;Ft>1&&(te/=Ft,ie/=Ft)}if(Rt){var It=(se+ae)/Rt;It>1&&(se/=It,ae/=It)}if(ee.l=Math.round(te)+J.l,ee.r=Math.round(ie)+J.r,ee.t=Math.round(ae)+J.t,ee.b=Math.round(se)+J.b,ee.p=Math.round($.pad),ee.w=Math.round(V)-ee.l-ee.r,ee.h=Math.round(ne)-ee.t-ee.b,!q._replotting&&(m.didMarginChange(K,ee)||function(Ye){if("_redrawFromAutoMarginCount"in Ye._fullLayout)return!1;var Ne=l.list(Ye,"",!0);for(var We in Ne)if(Ne[We].autoshift||Ne[We].shift)return!0;return!1}(B))){"_redrawFromAutoMarginCount"in q?q._redrawFromAutoMarginCount++:q._redrawFromAutoMarginCount=1;var Ge=3*(1+Object.keys(de).length);if(q._redrawFromAutoMarginCount<Ge)return p.call("_doPlot",B);q._size=K,a.warn("Too many auto-margin redraws.")}(function(Ye){var Ne=l.list(Ye,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(We){for(var st=0;st<Ne.length;st++){var it=Ne[st][We];it&&it()}})})(B)};var F=["l","r","t","b","p","w","h"];function U(B,q,V){var ne=!1,ee=[m.previousPromises,function(){if(B._transitionData)return B._transitioning=!1,function(J){var K=Promise.resolve();if(!J)return K;for(;J.length;)K=K.then(J.shift());return K}(B._transitionData._interruptCallbacks)},V.prepareFn,m.rehover,m.reselect,function(){return B.emit("plotly_transitioning",[]),new Promise(function(J){B._transitioning=!0,q.duration>0&&(B._transitioningWithDuration=!0),B._transitionData._interruptCallbacks.push(function(){ne=!0}),V.redraw&&B._transitionData._interruptCallbacks.push(function(){return p.call("redraw",B)}),B._transitionData._interruptCallbacks.push(function(){B.emit("plotly_transitioninterrupted",[])});var K=0,te=0;function ie(){return K++,function(){var ae;te++,ne||te!==K||(ae=J,B._transitionData&&(function(se){if(se)for(;se.length;)se.shift()}(B._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(V.redraw)return p.call("redraw",B)}).then(function(){B._transitioning=!1,B._transitioningWithDuration=!1,B.emit("plotly_transitioned",[])}).then(ae)))}}V.runFn(ie),setTimeout(ie())})}],$=a.syncOrAsync(ee,B);return $&&$.then||($=Promise.resolve()),$.then(function(){return B})}m.didMarginChange=function(B,q){for(var V=0;V<F.length;V++){var ne=F[V],ee=B[ne],$=q[ne];if(!w(ee)||Math.abs($-ee)>1)return!0}return!1},m.graphJson=function(B,q,V,ne,ee,$){(ee&&q&&!B._fullData||ee&&!q&&!B._fullLayout)&&m.supplyDefaults(B);var J=ee?B._fullData:B.data,K=ee?B._fullLayout:B.layout,te=(B._transitionData||{})._frames;function ie(ce,de){if(typeof ce=="function")return de?"_function_":null;if(a.isPlainObject(ce)){var ge,ve={};return Object.keys(ce).sort().forEach(function(we){if(["_","["].indexOf(we.charAt(0))===-1)if(typeof ce[we]!="function"){if(V==="keepdata"){if(we.substr(we.length-3)==="src")return}else if(V==="keepstream"){if(typeof(ge=ce[we+"src"])=="string"&&ge.indexOf(":")>0&&!a.isPlainObject(ce.stream))return}else if(V!=="keepall"&&typeof(ge=ce[we+"src"])=="string"&&ge.indexOf(":")>0)return;ve[we]=ie(ce[we],de)}else de&&(ve[we]="_function")}),ve}var be=Array.isArray(ce),me=a.isTypedArray(ce);if((be||me)&&ce.dtype&&ce.shape){var Se=ce.bdata;return ie({dtype:ce.dtype,shape:ce.shape,bdata:a.isArrayBuffer(Se)?_.encode(Se):Se},de)}return be?ce.map(function(we){return ie(we,de)}):me?a.simpleMap(ce,a.identity):a.isJSDate(ce)?a.ms2DateTimeLocal(+ce):ce}var ae={data:(J||[]).map(function(ce){var de=ie(ce);return q&&delete de.fit,de})};if(!q&&(ae.layout=ie(K),ee)){var se=K._size;ae.layout.computed={margin:{b:se.b,l:se.l,r:se.r,t:se.t}}}return te&&(ae.frames=ie(te)),$&&(ae.config=ie(B._context,!0)),ne==="object"?ae:JSON.stringify(ae)},m.modifyFrames=function(B,q){var V,ne,ee,$=B._transitionData._frames,J=B._transitionData._frameHash;for(V=0;V<q.length;V++)switch((ne=q[V]).type){case"replace":ee=ne.value;var K=($[ne.index]||{}).name,te=ee.name;$[ne.index]=J[te]=ee,te!==K&&(delete J[K],J[te]=ee);break;case"insert":J[(ee=ne.value).name]=ee,$.splice(ne.index,0,ee);break;case"delete":delete J[(ee=$[ne.index]).name],$.splice(ne.index,1)}return Promise.resolve()},m.computeFrame=function(B,q){var V,ne,ee,$,J=B._transitionData._frameHash;if(!q)throw new Error("computeFrame must be given a string frame name");var K=J[q.toString()];if(!K)return!1;for(var te=[K],ie=[K.name];K.baseframe&&(K=J[K.baseframe.toString()])&&ie.indexOf(K.name)===-1;)te.push(K),ie.push(K.name);for(var ae={};K=te.pop();)if(K.layout&&(ae.layout=m.extendLayout(ae.layout,K.layout)),K.data){if(ae.data||(ae.data=[]),!(ne=K.traces))for(ne=[],V=0;V<K.data.length;V++)ne[V]=V;for(ae.traces||(ae.traces=[]),V=0;V<K.data.length;V++)(ee=ne[V])!=null&&(($=ae.traces.indexOf(ee))===-1&&($=ae.data.length,ae.traces[$]=ee),ae.data[$]=m.extendTrace(ae.data[$],K.data[V]))}return ae},m.recomputeFrameHash=function(B){for(var q=B._transitionData._frameHash={},V=B._transitionData._frames,ne=0;ne<V.length;ne++){var ee=V[ne];ee&&ee.name&&(q[ee.name]=ee)}},m.extendObjectWithContainers=function(B,q,V){var ne,ee,$,J,K,te,ie,ae=a.extendDeepNoArrays({},q||{}),se=a.expandObjectPaths(ae),ce={};if(V&&V.length)for($=0;$<V.length;$++)(ee=(ne=a.nestedProperty(se,V[$])).get())===void 0?a.nestedProperty(ce,V[$]).set(null):(ne.set(null),a.nestedProperty(ce,V[$]).set(ee));if(B=a.extendDeepNoArrays(B||{},se),V&&V.length){for($=0;$<V.length;$++)if(te=a.nestedProperty(ce,V[$]).get()){for(ie=(K=a.nestedProperty(B,V[$])).get(),Array.isArray(ie)||(ie=[],K.set(ie)),J=0;J<te.length;J++){var de=te[J];ie[J]=de===null?null:m.extendObjectWithContainers(ie[J],de)}K.set(ie)}}return B},m.dataArrayContainers=["transforms","dimensions"],m.layoutArrayContainers=p.layoutArrayContainers,m.extendTrace=function(B,q){return m.extendObjectWithContainers(B,q,m.dataArrayContainers)},m.extendLayout=function(B,q){return m.extendObjectWithContainers(B,q,m.layoutArrayContainers)},m.transition=function(B,q,V,ne,ee,$){var J={redraw:ee.redraw},K={},te=[];return J.prepareFn=function(){for(var ie=Array.isArray(q)?q.length:0,ae=ne.slice(0,ie),se=0;se<ae.length;se++){var ce=ae[se],de=B._fullData[ce]._module;if(de){if(de.animatable){var ge=de.basePlotModule.name;K[ge]||(K[ge]=[]),K[ge].push(ce)}B.data[ae[se]]=m.extendTrace(B.data[ae[se]],q[se])}}var ve=a.expandObjectPaths(a.extendDeepNoArrays({},V)),be=/^[xy]axis[0-9]*$/;for(var me in ve)be.test(me)&&delete ve[me].range;m.extendLayout(B.layout,ve),delete B.calcdata,m.supplyDefaults(B),m.doCalcdata(B);var Se=a.expandObjectPaths(V);if(Se){var we=B._fullLayout._plots;for(var _e in we){var oe=we[_e],le=oe.xaxis,pe=oe.yaxis,Ee=le.range.slice(),Te=pe.range.slice(),Me=null,Le=null,Ie=null,he=null;Array.isArray(Se[le._name+".range"])?Me=Se[le._name+".range"].slice():Array.isArray((Se[le._name]||{}).range)&&(Me=Se[le._name].range.slice()),Array.isArray(Se[pe._name+".range"])?Le=Se[pe._name+".range"].slice():Array.isArray((Se[pe._name]||{}).range)&&(Le=Se[pe._name].range.slice()),Ee&&Me&&(le.r2l(Ee[0])!==le.r2l(Me[0])||le.r2l(Ee[1])!==le.r2l(Me[1]))&&(Ie={xr0:Ee,xr1:Me}),Te&&Le&&(pe.r2l(Te[0])!==pe.r2l(Le[0])||pe.r2l(Te[1])!==pe.r2l(Le[1]))&&(he={yr0:Te,yr1:Le}),(Ie||he)&&te.push(a.extendFlat({plotinfo:oe},Ie,he))}}return Promise.resolve()},J.runFn=function(ie){var ae,se,ce=B._fullLayout._basePlotModules,de=te.length;if(V)for(se=0;se<ce.length;se++)ce[se].transitionAxes&&ce[se].transitionAxes(B,te,$,ie);for(var ge in de?((ae=a.extendFlat({},$)).duration=0,delete K.cartesian):ae=$,K){var ve=K[ge];B._fullData[ve[0]]._module.basePlotModule.plot(B,ve,ae,ie)}},U(B,$,J)},m.transitionFromReact=function(B,q,V,ne){var ee=B._fullLayout,$=ee.transition,J={},K=[];return J.prepareFn=function(){var te=ee._plots;for(var ie in J.redraw=!1,q.anim==="some"&&(J.redraw=!0),V.anim==="some"&&(J.redraw=!0),te){var ae=te[ie],se=ae.xaxis,ce=ae.yaxis,de=ne[se._name].range.slice(),ge=ne[ce._name].range.slice(),ve=se.range.slice(),be=ce.range.slice();se.setScale(),ce.setScale();var me=null,Se=null;se.r2l(de[0])===se.r2l(ve[0])&&se.r2l(de[1])===se.r2l(ve[1])||(me={xr0:de,xr1:ve}),ce.r2l(ge[0])===ce.r2l(be[0])&&ce.r2l(ge[1])===ce.r2l(be[1])||(Se={yr0:ge,yr1:be}),(me||Se)&&K.push(a.extendFlat({plotinfo:ae},me,Se))}return Promise.resolve()},J.runFn=function(te){for(var ie,ae,se,ce=B._fullData,de=B._fullLayout._basePlotModules,ge=[],ve=0;ve<ce.length;ve++)ge.push(ve);function be(){if(B._fullLayout)for(var Se=0;Se<de.length;Se++)de[Se].transitionAxes&&de[Se].transitionAxes(B,K,ie,te)}function me(){if(B._fullLayout)for(var Se=0;Se<de.length;Se++)de[Se].plot(B,se,ae,te)}K.length&&q.anim?$.ordering==="traces first"?(ie=a.extendFlat({},$,{duration:0}),se=ge,ae=$,setTimeout(be,$.duration),me()):(ie=$,se=null,ae=a.extendFlat({},$,{duration:0}),setTimeout(me,ie.duration),be()):K.length?(ie=$,be()):q.anim&&(se=ge,ae=$,me())},U(B,$,J)},m.doCalcdata=function(B,q){var V,ne,ee,$,J=l.list(B),K=B._fullData,te=B._fullLayout,ie=new Array(K.length),ae=(B.calcdata||[]).slice();for(B.calcdata=ie,te._numBoxes=0,te._numViolins=0,te._violinScaleGroupStats={},B._hmpixcount=0,B._hmlumcount=0,te._piecolormap={},te._sunburstcolormap={},te._treemapcolormap={},te._iciclecolormap={},te._funnelareacolormap={},ee=0;ee<K.length;ee++)Array.isArray(q)&&q.indexOf(ee)===-1&&(ie[ee]=ae[ee]);for(ee=0;ee<K.length;ee++)(V=K[ee])._arrayAttrs=s.findArrayAttributes(V),V._extremes={};var se=te._subplots.polar||[];for(ee=0;ee<se.length;ee++)J.push(te[se[ee]].radialaxis,te[se[ee]].angularaxis);for(var ce in te._colorAxes){var de=te[ce];de.cauto!==!1&&(delete de.cmin,delete de.cmax)}var ge=!1;function ve(Se){if(V=K[Se],ne=V._module,V.visible===!0&&V.transforms){if(ne&&ne.calc){var we=ne.calc(B,V);we[0]&&we[0].t&&we[0].t._scene&&delete we[0].t._scene.dirty}for($=0;$<V.transforms.length;$++){var _e=V.transforms[$];(ne=x[_e.type])&&ne.calcTransform&&(V._hasCalcTransform=!0,ge=!0,ne.calcTransform(B,V,_e))}}}function be(Se,we){if(V=K[Se],!!(ne=V._module).isContainer===we){var _e=[];if(V.visible===!0&&V._length!==0){delete V._indexToPoints;var oe=V.transforms||[];for($=oe.length-1;$>=0;$--)if(oe[$].enabled){V._indexToPoints=oe[$]._indexToPoints;break}ne&&ne.calc&&(_e=ne.calc(B,V))}Array.isArray(_e)&&_e[0]||(_e=[{x:i,y:i}]),_e[0].t||(_e[0].t={}),_e[0].trace=V,ie[Se]=_e}}for(j(J,K,te),ee=0;ee<K.length;ee++)be(ee,!0);for(ee=0;ee<K.length;ee++)ve(ee);for(ge&&j(J,K,te),ee=0;ee<K.length;ee++)be(ee,!0);for(ee=0;ee<K.length;ee++)be(ee,!1);Z(B);var me=function(Se,we){var _e,oe,le,pe,Ee,Te=[];function Me(We,st,it){var Fe=st._id.charAt(0);if(We==="histogram2dcontour"){var Be=st._counterAxes[0],at=l.getFromId(we,Be),Ze=Fe==="x"||Be==="x"&&at.type==="category",ht=Fe==="y"||Be==="y"&&at.type==="category";return function(vt,mt){return vt===0||mt===0||Ze&&vt===it[mt].length-1||ht&&mt===it.length-1?-1:(Fe==="y"?mt:vt)-1}}return function(vt,mt){return Fe==="y"?mt:vt}}var Le={min:function(We){return a.aggNums(Math.min,null,We)},max:function(We){return a.aggNums(Math.max,null,We)},sum:function(We){return a.aggNums(function(st,it){return st+it},null,We)},total:function(We){return a.aggNums(function(st,it){return st+it},null,We)},mean:function(We){return a.mean(We)},median:function(We){return a.median(We)}};function Ie(We,st){return We[1]-st[1]}function he(We,st){return st[1]-We[1]}for(_e=0;_e<Se.length;_e++){var xe=Se[_e];if(xe.type==="category"){var ke=xe.categoryorder.match(R);if(ke){var ze=ke[1],Re=ke[2],Oe=xe._id.charAt(0),Ve=Oe==="x",qe=[];for(oe=0;oe<xe._categories.length;oe++)qe.push([xe._categories[oe],[]]);for(oe=0;oe<xe._traceIndices.length;oe++){var Je=xe._traceIndices[oe],ot=we._fullData[Je];if(ot.visible===!0){var rt=ot.type;p.traceIs(ot,"histogram")&&(delete ot._xautoBinFinished,delete ot._yautoBinFinished);var dt=rt==="splom",_t=rt==="scattergl",yt=we.calcdata[Je];for(le=0;le<yt.length;le++){var et,nt,At=yt[le];if(dt){var Rt=ot._axesDim[xe._id];if(!Ve){var Ft=ot._diag[Rt][0];Ft&&(xe=we._fullLayout[l.id2name(Ft)])}var It=At.trace.dimensions[Rt].values;for(pe=0;pe<It.length;pe++)for(et=xe._categoriesMap[It[pe]],Ee=0;Ee<At.trace.dimensions.length;Ee++)if(Ee!==Rt){var Ge=At.trace.dimensions[Ee];qe[et][1].push(Ge.values[pe])}}else if(_t){for(pe=0;pe<At.t.x.length;pe++)Ve?(et=At.t.x[pe],nt=At.t.y[pe]):(et=At.t.y[pe],nt=At.t.x[pe]),qe[et][1].push(nt);At.t&&At.t._scene&&delete At.t._scene.dirty}else if(At.hasOwnProperty("z")){nt=At.z;var Ye=Me(ot.type,xe,nt);for(pe=0;pe<nt.length;pe++)for(Ee=0;Ee<nt[pe].length;Ee++)(et=Ye(Ee,pe))+1&&qe[et][1].push(nt[pe][Ee])}else for((et=At.p)===void 0&&(et=At[Oe]),(nt=At.s)===void 0&&(nt=At.v),nt===void 0&&(nt=Ve?At.y:At.x),Array.isArray(nt)||(nt=nt===void 0?[]:[nt]),pe=0;pe<nt.length;pe++)qe[et][1].push(nt[pe])}}}xe._categoriesValue=qe;var Ne=[];for(oe=0;oe<qe.length;oe++)Ne.push([qe[oe][0],Le[ze](qe[oe][1])]);Ne.sort(Re==="descending"?he:Ie),xe._categoriesAggregatedValue=Ne,xe._initialCategories=Ne.map(function(We){return We[0]}),Te=Te.concat(xe.sortByInitialCategories())}}}return Te}(J,B);if(me.length){for(te._numBoxes=0,te._numViolins=0,ee=0;ee<me.length;ee++)be(me[ee],!0);for(ee=0;ee<me.length;ee++)be(me[ee],!1);Z(B)}p.getComponentMethod("fx","calc")(B),p.getComponentMethod("errorbars","calc")(B)};var R=/(total|sum|min|max|mean|median) (ascending|descending)/;function j(B,q,V){var ne={};function ee(te){te.clearCalc(),te.type==="multicategory"&&te.setupMultiCategory(q),ne[te._id]=1}a.simpleMap(B,ee);for(var $=V._axisMatchGroups||[],J=0;J<$.length;J++)for(var K in $[J])ne[K]||ee(V[l.id2name(K)])}function Z(B){var q,V,ne,ee=B._fullLayout,$=ee._visibleModules,J={};for(V=0;V<$.length;V++){var K=$[V],te=K.crossTraceCalc;if(te){var ie=K.basePlotModule.name;J[ie]?a.pushUnique(J[ie],te):J[ie]=[te]}}for(ne in J){var ae=J[ne],se=ee._subplots[ne];if(Array.isArray(se))for(q=0;q<se.length;q++){var ce=se[q],de=ne==="cartesian"?ee._plots[ce]:ee[ce];for(V=0;V<ae.length;V++)ae[V](B,de,ce)}else for(V=0;V<ae.length;V++)ae[V](B)}}m.rehover=function(B){B._fullLayout._rehover&&B._fullLayout._rehover()},m.redrag=function(B){B._fullLayout._redrag&&B._fullLayout._redrag()},m.reselect=function(B){var q=B._fullLayout,V=(B.layout||{}).selections,ne=q._previousSelections;q._previousSelections=V;var ee=q._reselect||JSON.stringify(V)!==JSON.stringify(ne);p.getComponentMethod("selections","reselect")(B,ee)},m.generalUpdatePerTraceModule=function(B,q,V,ne){var ee,$=q.traceHash,J={};for(ee=0;ee<V.length;ee++){var K=V[ee],te=K[0].trace;te.visible&&(J[te.type]=J[te.type]||[],J[te.type].push(K))}for(var ie in $)if(!J[ie]){var ae=$[ie][0];ae[0].trace.visible=!1,J[ie]=[ae]}for(var se in J){var ce=J[se];ce[0][0].trace._module.plot(B,q,a.filterVisible(ce),ne)}q.traceHash=J},m.plotBasePlot=function(B,q,V,ne,ee){var $=p.getModule(B),J=b(q.calcdata,$)[0];$.plot(q,J,ne,ee)},m.cleanBasePlot=function(B,q,V,ne,ee){var $=ee._has&&ee._has(B),J=V._has&&V._has(B);$&&!J&&ee["_"+B+"layer"].selectAll("g.trace").remove()}},39360:function(Y){Y.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},57384:function(Y,O,e){var M=e(3400),A=e(92065).tester,o=M.findIndexOfMin,w=M.isAngleInsideSector,_=M.angleDelta,p=M.angleDist;function s(i,l,u,c){var g,f,b=c[0],v=c[1],d=a(Math.sin(l)-Math.sin(i)),m=a(Math.cos(l)-Math.cos(i)),x=Math.tan(u),y=a(1/x),T=d/m,h=v-T*b;return y?d&&m?f=x*(g=h/(x-T)):m?(g=v*y,f=v):(g=b,f=b*x):d&&m?(g=0,f=h):m?(g=0,f=v):g=f=NaN,[g,f]}function n(i,l,u,c){return M.isFullCircle([l,u])?function(g,f){var b,v=f.length,d=new Array(v+1);for(b=0;b<v;b++){var m=f[b];d[b]=[g*Math.cos(m),g*Math.sin(m)]}return d[b]=d[0].slice(),d}(i,c):function(g,f,b,v){var d,m,x=v.length,y=[];function T(U){return[g*Math.cos(U),g*Math.sin(U)]}function h(U,R,j){return s(U,R,j,T(U))}function E(U){return M.mod(U,x)}function k(U){return w(U,[f,b])}var L=o(v,function(U){return k(U)?p(U,f):1/0}),P=h(v[L],v[E(L-1)],f);for(y.push(P),d=L,m=0;m<x;d++,m++){var I=v[E(d)];if(!k(I))break;y.push(T(I))}var z=o(v,function(U){return k(U)?p(U,b):1/0}),F=h(v[z],v[E(z+1)],b);return y.push(F),y.push([0,0]),y.push(y[0].slice()),y}(i,l,u,c)}function a(i){return Math.abs(i)>1e-10?i:0}function r(i,l,u){l=l||0,u=u||0;for(var c=i.length,g=new Array(c),f=0;f<c;f++){var b=i[f];g[f]=[l+b[0],u-b[1]]}return g}Y.exports={isPtInsidePolygon:function(i,l,u,c,g){if(!w(l,c))return!1;var f,b;u[0]<u[1]?(f=u[0],b=u[1]):(f=u[1],b=u[0]);var v=A(n(f,c[0],c[1],g)),d=A(n(b,c[0],c[1],g)),m=[i*Math.cos(l),i*Math.sin(l)];return d.contains(m)&&!v.contains(m)},findPolygonOffset:function(i,l,u,c){for(var g=1/0,f=1/0,b=n(i,l,u,c),v=0;v<b.length;v++){var d=b[v];g=Math.min(g,d[0]),f=Math.min(f,-d[1])}return[g,f]},findEnclosingVertexAngles:function(i,l){var u=o(l,function(g){var f=_(g,i);return f>0?f:1/0}),c=M.mod(u+1,l.length);return[l[u],l[c]]},findIntersectionXY:s,findXYatLength:function(i,l,u,c){var g=-l*u,f=l*l+1,b=2*(l*g-u),v=g*g+u*u-i*i,d=Math.sqrt(b*b-4*f*v),m=(-b+d)/(2*f),x=(-b-d)/(2*f);return[[m,l*m+g+c],[x,l*x+g+c]]},clampTiny:a,pathPolygon:function(i,l,u,c,g,f){return"M"+r(n(i,l,u,c),g,f).join("L")},pathPolygonAnnulus:function(i,l,u,c,g,f,b){var v,d;i<l?(v=i,d=l):(v=l,d=i);var m=r(n(v,u,c,g),f,b);return"M"+r(n(d,u,c,g),f,b).reverse().join("L")+"M"+m.join("L")}}},40872:function(Y,O,e){var M=e(84888).KY,A=e(3400).counterRegex,o=e(62400),w=e(39360),_=w.attr,p=w.name,s=A(p),n={};n[_]={valType:"subplotid",dflt:p,editType:"calc"},Y.exports={attr:_,name:p,idRoot:p,idRegex:s,attrRegex:s,attributes:n,layoutAttributes:e(95300),supplyLayoutDefaults:e(84380),plot:function(a){for(var r=a._fullLayout,i=a.calcdata,l=r._subplots[p],u=0;u<l.length;u++){var c=l[u],g=M(i,p,c),f=r[c]._subplot;f||(f=o(a,c),r[c]._subplot=f),f.plot(g,r,a._promises)}},clean:function(a,r,i,l){for(var u=l._subplots[p]||[],c=l._has&&l._has("gl"),g=r._has&&r._has("gl"),f=c&&!g,b=0;b<u.length;b++){var v=u[b],d=l[v]._subplot;if(!r[v]&&d)for(var m in d.framework.remove(),d.layers["radial-axis-title"].remove(),d.clipPaths)d.clipPaths[m].remove();f&&d._scene&&(d._scene.destroy(),d._scene=null)}},toSVG:e(57952).toSVG}},95300:function(Y,O,e){var M=e(22548),A=e(94724),o=e(86968).u,w=e(3400).extendFlat,_=e(67824).overrideAll,p=_({color:A.color,showline:w({},A.showline,{dflt:!0}),linecolor:A.linecolor,linewidth:A.linewidth,showgrid:w({},A.showgrid,{dflt:!0}),gridcolor:A.gridcolor,gridwidth:A.gridwidth,griddash:A.griddash},"plot","from-root"),s=_({tickmode:A.minor.tickmode,nticks:A.nticks,tick0:A.tick0,dtick:A.dtick,tickvals:A.tickvals,ticktext:A.ticktext,ticks:A.ticks,ticklen:A.ticklen,tickwidth:A.tickwidth,tickcolor:A.tickcolor,ticklabelstep:A.ticklabelstep,showticklabels:A.showticklabels,labelalias:A.labelalias,showtickprefix:A.showtickprefix,tickprefix:A.tickprefix,showticksuffix:A.showticksuffix,ticksuffix:A.ticksuffix,showexponent:A.showexponent,exponentformat:A.exponentformat,minexponent:A.minexponent,separatethousands:A.separatethousands,tickfont:A.tickfont,tickangle:A.tickangle,tickformat:A.tickformat,tickformatstops:A.tickformatstops,layer:A.layer},"plot","from-root"),n={visible:w({},A.visible,{dflt:!0}),type:w({},A.type,{values:["-","linear","log","date","category"]}),autotypenumbers:A.autotypenumbers,autorangeoptions:{minallowed:A.autorangeoptions.minallowed,maxallowed:A.autorangeoptions.maxallowed,clipmin:A.autorangeoptions.clipmin,clipmax:A.autorangeoptions.clipmax,include:A.autorangeoptions.include,editType:"plot"},autorange:w({},A.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:w({},A.minallowed,{editType:"plot"}),maxallowed:w({},A.maxallowed,{editType:"plot"}),range:w({},A.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:A.categoryorder,categoryarray:A.categoryarray,angle:{valType:"angle",editType:"plot"},autotickangles:A.autotickangles,side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:w({},A.title.text,{editType:"plot",dflt:""}),font:w({},A.title.font,{editType:"plot"}),editType:"plot"},hoverformat:A.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:A._deprecated.title,titlefont:A._deprecated.titlefont}};w(n,p,s);var a={visible:w({},A.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:A.autotypenumbers,categoryorder:A.categoryorder,categoryarray:A.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:A.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};w(a,p,s),Y.exports={domain:o({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:M.background},radialaxis:n,angularaxis:a,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},84380:function(Y,O,e){var M=e(3400),A=e(76308),o=e(31780),w=e(168),_=e(84888).op,p=e(26332),s=e(25404),n=e(95936),a=e(42568),r=e(22416),i=e(42136),l=e(76808),u=e(52976),c=e(95300),g=e(57696),f=e(39360),b=f.axisNames;function v(m,x,y,T){var h=y("bgcolor");T.bgColor=A.combine(h,T.paper_bgcolor);var E=y("sector");y("hole");var k,L=_(T.fullData,f.name,T.id),P=T.layoutOut;function I(se,ce){return y(k+"."+se,ce)}for(var z=0;z<b.length;z++){k=b[z],M.isPlainObject(m[k])||(m[k]={});var F=m[k],U=o.newContainer(x,k);U._id=U._name=k,U._attr=T.id+"."+k,U._traceIndices=L.map(function(se){return se._expandedIndex});var R=f.axisName2dataArray[k],j=d(F,U,I,L,R,T);r(F,U,I,{axData:L,dataAttr:R});var Z=I("visible");switch(g(U,x,P),I("uirevision",x.uirevision),U._m=1,k){case"radialaxis":I("minallowed"),I("maxallowed");var B,q=I("range"),V=U.getAutorangeDflt(q),ne=I("autorange",V);!q||(q[0]!==null||q[1]!==null)&&(q[0]!==null&&q[1]!==null||ne!=="reversed"&&ne!==!0)&&(q[0]===null||ne!=="min"&&ne!=="max reversed")&&(q[1]===null||ne!=="max"&&ne!=="min reversed")||(q=void 0,delete U.range,U.autorange=!0,B=!0),B||(ne=I("autorange",V=U.getAutorangeDflt(q))),F.autorange=ne,ne&&(l(I,ne,q),j!=="linear"&&j!=="-"||I("rangemode"),U.isReversed()&&(U._m=-1)),U.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(j==="date"){M.log("Polar plots do not support date angular axes yet.");for(var ee=0;ee<L.length;ee++)L[ee].visible=!1;j=F.type=U.type="linear"}I(j==="linear"?"thetaunit":"period");var $=I("direction");I("rotation",{counterclockwise:0,clockwise:90}[$])}if(a(F,U,I,U.type,{tickSuffixDflt:U.thetaunit==="degrees"?"":void 0}),Z){var J,K,te,ie,ae=T.font||{};K=(J=I("color"))===F.color?J:ae.color,te=ae.size,ie=ae.family,p(F,U,I,U.type),n(F,U,I,U.type,{font:{color:K,size:te,family:ie},noAutotickangles:k==="angularaxis"}),s(F,U,I,{outerTicks:!0}),i(F,U,I,{dfltColor:J,bgColor:T.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:c[k]}),I("layer"),k==="radialaxis"&&(I("side"),I("angle",E[0]),I("title.text"),M.coerceFont(I,"title.font",{color:K,size:M.bigFont(te),family:ie}))}j!=="category"&&I("hoverformat"),U._input=F}x.angularaxis.type==="category"&&y("gridshape")}function d(m,x,y,T,h,E){var k=y("autotypenumbers",E.autotypenumbersDflt);if(y("type")==="-"){for(var L,P=0;P<T.length;P++)if(T[P].visible){L=T[P];break}L&&L[h]&&(x.type=u(L[h],"gregorian",{noMultiCategory:!0,autotypenumbers:k})),x.type==="-"?x.type="linear":m.type=x.type}return x.type}Y.exports=function(m,x,y){w(m,x,y,{type:f.name,attributes:c,handleDefaults:v,font:x.font,autotypenumbersDflt:x.autotypenumbers,paper_bgcolor:x.paper_bgcolor,fullData:y,layoutOut:x})}},62400:function(Y,O,e){var M=e(33428),A=e(49760),o=e(24040),w=e(3400),_=w.strRotate,p=w.strTranslate,s=e(76308),n=e(43616),a=e(7316),r=e(54460),i=e(78344),l=e(57696),u=e(19280).doAutoRange,c=e(51184),g=e(86476),f=e(93024),b=e(81668),v=e(22676).prepSelect,d=e(22676).selectOnClick,m=e(22676).clearOutline,x=e(93972),y=e(73696),T=e(39172).redrawReglTraces,h=e(84284).MID_SHIFT,E=e(39360),k=e(57384),L=e(36416),P=L.smith,I=L.reactanceArc,z=L.resistanceArc,F=L.smithTransform,U=w._,R=w.mod,j=w.deg2rad,Z=w.rad2deg;function B($,J,K){this.isSmith=K||!1,this.id=J,this.gd=$,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var te=$._fullLayout,ie="clip"+te._uid+J;this.clipIds.forTraces=ie+"-for-traces",this.clipPaths.forTraces=te._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=te["_"+(K?"smith":"polar")+"layer"].append("g").attr("class",J),this.getHole=function(ae){return this.isSmith?0:ae.hole},this.getSector=function(ae){return this.isSmith?[0,360]:ae.sector},this.getRadial=function(ae){return this.isSmith?ae.realaxis:ae.radialaxis},this.getAngular=function(ae){return this.isSmith?ae.imaginaryaxis:ae.angularaxis},K||(this.radialTickLayout=null,this.angularTickLayout=null)}var q=B.prototype;function V($){var J=$.ticks+String($.ticklen)+String($.showticklabels);return"side"in $&&(J+=$.side),J}function ne($,J){return J[w.findIndexOfMin(J,function(K){return w.angleDist($,K)})]}function ee($,J,K){return J?($.attr("display",null),$.attr(K)):$&&$.attr("display","none"),$}Y.exports=function($,J,K){return new B($,J,K)},q.plot=function($,J){for(var K=this,te=J[K.id],ie=!1,ae=0;ae<$.length;ae++)if($[ae][0].trace.cliponaxis===!1){ie=!0;break}K._hasClipOnAxisFalse=ie,K.updateLayers(J,te),K.updateLayout(J,te),a.generalUpdatePerTraceModule(K.gd,K,$,te),K.updateFx(J,te),K.isSmith&&(delete te.realaxis.range,delete te.imaginaryaxis.range)},q.updateLayers=function($,J){var K=this,te=K.isSmith,ie=K.layers,ae=K.getRadial(J),se=K.getAngular(J),ce=E.layerNames,de=ce.indexOf("frontplot"),ge=ce.slice(0,de),ve=se.layer==="below traces",be=ae.layer==="below traces";ve&&ge.push("angular-line"),be&&ge.push("radial-line"),ve&&ge.push("angular-axis"),be&&ge.push("radial-axis"),ge.push("frontplot"),ve||ge.push("angular-line"),be||ge.push("radial-line"),ve||ge.push("angular-axis"),be||ge.push("radial-axis");var me=(te?"smith":"polar")+"sublayer",Se=K.framework.selectAll("."+me).data(ge,String);Se.enter().append("g").attr("class",function(we){return me+" "+we}).each(function(we){var _e=ie[we]=M.select(this);switch(we){case"frontplot":te||_e.append("g").classed("barlayer",!0),_e.append("g").classed("scatterlayer",!0);break;case"backplot":_e.append("g").classed("maplayer",!0);break;case"plotbg":ie.bg=_e.append("path");break;case"radial-grid":case"angular-grid":_e.style("fill","none");break;case"radial-line":_e.append("line").style("fill","none");break;case"angular-line":_e.append("path").style("fill","none")}}),Se.order()},q.updateLayout=function($,J){var K=this,te=K.layers,ie=$._size,ae=K.getRadial(J),se=K.getAngular(J),ce=J.domain.x,de=J.domain.y;K.xOffset=ie.l+ie.w*ce[0],K.yOffset=ie.t+ie.h*(1-de[1]);var ge=K.xLength=ie.w*(ce[1]-ce[0]),ve=K.yLength=ie.h*(de[1]-de[0]),be=K.getSector(J);K.sectorInRad=be.map(j);var me,Se,we,_e,oe,le=K.sectorBBox=function(ot){var rt,dt=ot[0],_t=ot[1]-dt,yt=R(dt,360),et=yt+_t,nt=Math.cos(j(yt)),At=Math.sin(j(yt)),Rt=Math.cos(j(et)),Ft=Math.sin(j(et));return rt=yt<=90&&et>=90||yt>90&&et>=450?1:At<=0&&Ft<=0?0:Math.max(At,Ft),[yt<=180&&et>=180||yt>180&&et>=540?-1:nt>=0&&Rt>=0?0:Math.min(nt,Rt),yt<=270&&et>=270||yt>270&&et>=630?-1:At>=0&&Ft>=0?0:Math.min(At,Ft),et>=360?1:nt<=0&&Rt<=0?0:Math.max(nt,Rt),rt]}(be),pe=le[2]-le[0],Ee=le[3]-le[1],Te=ve/ge,Me=Math.abs(Ee/pe);Te>Me?(me=ge,oe=(ve-(Se=ge*Me))/ie.h/2,we=[ce[0],ce[1]],_e=[de[0]+oe,de[1]-oe]):(Se=ve,oe=(ge-(me=ve/Me))/ie.w/2,we=[ce[0]+oe,ce[1]-oe],_e=[de[0],de[1]]),K.xLength2=me,K.yLength2=Se,K.xDomain2=we,K.yDomain2=_e;var Le,Ie=K.xOffset2=ie.l+ie.w*we[0],he=K.yOffset2=ie.t+ie.h*(1-_e[1]),xe=K.radius=me/pe,ke=K.innerRadius=K.getHole(J)*xe,ze=K.cx=Ie-xe*le[0],Re=K.cy=he+xe*le[3],Oe=K.cxx=ze-Ie,Ve=K.cyy=Re-he,qe=ae.side;qe==="counterclockwise"?(Le=qe,qe="top"):qe==="clockwise"&&(Le=qe,qe="bottom"),K.radialAxis=K.mockAxis($,J,ae,{_id:"x",side:qe,_trueSide:Le,domain:[ke/ie.w,xe/ie.w]}),K.angularAxis=K.mockAxis($,J,se,{side:"right",domain:[0,Math.PI],autorange:!1}),K.doAutoRange($,J),K.updateAngularAxis($,J),K.updateRadialAxis($,J),K.updateRadialAxisTitle($,J),K.xaxis=K.mockCartesianAxis($,J,{_id:"x",domain:we}),K.yaxis=K.mockCartesianAxis($,J,{_id:"y",domain:_e});var Je=K.pathSubplot();K.clipPaths.forTraces.select("path").attr("d",Je).attr("transform",p(Oe,Ve)),te.frontplot.attr("transform",p(Ie,he)).call(n.setClipUrl,K._hasClipOnAxisFalse?null:K.clipIds.forTraces,K.gd),te.bg.attr("d",Je).attr("transform",p(ze,Re)).call(s.fill,J.bgcolor)},q.mockAxis=function($,J,K,te){var ie=w.extendFlat({},K,te);return l(ie,J,$),ie},q.mockCartesianAxis=function($,J,K){var te=this,ie=te.isSmith,ae=K._id,se=w.extendFlat({type:"linear"},K);i(se,$);var ce={x:[0,2],y:[1,3]};return se.setRange=function(){var de=te.sectorBBox,ge=ce[ae],ve=te.radialAxis._rl,be=(ve[1]-ve[0])/(1-te.getHole(J));se.range=[de[ge[0]]*be,de[ge[1]]*be]},se.isPtWithinRange=ae!=="x"||ie?function(){return!0}:function(de){return te.isPtInside(de)},se.setRange(),se.setScale(),se},q.doAutoRange=function($,J){var K=this,te=K.gd,ie=K.radialAxis,ae=K.getRadial(J);u(te,ie);var se=ie.range;if(ae.range=se.slice(),ae._input.range=se.slice(),ie._rl=[ie.r2l(se[0],null,"gregorian"),ie.r2l(se[1],null,"gregorian")],ie.minallowed!==void 0){var ce=ie.r2l(ie.minallowed);ie._rl[0]>ie._rl[1]?ie._rl[1]=Math.max(ie._rl[1],ce):ie._rl[0]=Math.max(ie._rl[0],ce)}if(ie.maxallowed!==void 0){var de=ie.r2l(ie.maxallowed);ie._rl[0]<ie._rl[1]?ie._rl[1]=Math.min(ie._rl[1],de):ie._rl[0]=Math.min(ie._rl[0],de)}},q.updateRadialAxis=function($,J){var K=this,te=K.gd,ie=K.layers,ae=K.radius,se=K.innerRadius,ce=K.cx,de=K.cy,ge=K.getRadial(J),ve=R(K.getSector(J)[0],360),be=K.radialAxis,me=se<ae,Se=K.isSmith;Se||(K.fillViewInitialKey("radialaxis.angle",ge.angle),K.fillViewInitialKey("radialaxis.range",be.range.slice()),be.setGeometry()),be.tickangle==="auto"&&ve>90&&ve<=270&&(be.tickangle=180);var we=Se?function(he){var xe=F(K,P([he.x,0]));return p(xe[0]-ce,xe[1]-de)}:function(he){return p(be.l2p(he.x)+se,0)},_e=Se?function(he){return z(K,he.x,-1/0,1/0)}:function(he){return K.pathArc(be.r2p(he.x)+se)},oe=V(ge);if(K.radialTickLayout!==oe&&(ie["radial-axis"].selectAll(".xtick").remove(),K.radialTickLayout=oe),me){be.setScale();var le=0,pe=Se?(be.tickvals||[]).filter(function(he){return he>=0}).map(function(he){return r.tickText(be,he,!0,!1)}):r.calcTicks(be),Ee=Se?pe:r.clipEnds(be,pe),Te=r.getTickSigns(be)[2];Se&&((be.ticks==="top"&&be.side==="bottom"||be.ticks==="bottom"&&be.side==="top")&&(Te=-Te),be.ticks==="top"&&be.side==="top"&&(le=-be.ticklen),be.ticks==="bottom"&&be.side==="bottom"&&(le=be.ticklen)),r.drawTicks(te,be,{vals:pe,layer:ie["radial-axis"],path:r.makeTickPath(be,0,Te),transFn:we,crisp:!1}),r.drawGrid(te,be,{vals:Ee,layer:ie["radial-grid"],path:_e,transFn:w.noop,crisp:!1}),r.drawLabels(te,be,{vals:pe,layer:ie["radial-axis"],transFn:we,labelFns:r.makeLabelFns(be,le)})}var Me=K.radialAxisAngle=K.vangles?Z(ne(j(ge.angle),K.vangles)):ge.angle,Le=p(ce,de),Ie=Le+_(-Me);ee(ie["radial-axis"],me&&(ge.showticklabels||ge.ticks),{transform:Ie}),ee(ie["radial-grid"],me&&ge.showgrid,{transform:Se?"":Le}),ee(ie["radial-line"].select("line"),me&&ge.showline,{x1:Se?-ae:se,y1:0,x2:ae,y2:0,transform:Ie}).attr("stroke-width",ge.linewidth).call(s.stroke,ge.linecolor)},q.updateRadialAxisTitle=function($,J,K){if(!this.isSmith){var te=this,ie=te.gd,ae=te.radius,se=te.cx,ce=te.cy,de=te.getRadial(J),ge=te.id+"title",ve=0;if(de.title){var be=n.bBox(te.layers["radial-axis"].node()).height,me=de.title.font.size,Se=de.side;ve=Se==="top"?me:Se==="counterclockwise"?-(be+.4*me):be+.8*me}var we=K!==void 0?K:te.radialAxisAngle,_e=j(we),oe=Math.cos(_e),le=Math.sin(_e),pe=se+ae/2*oe+ve*le,Ee=ce-ae/2*le+ve*oe;te.layers["radial-axis-title"]=b.draw(ie,ge,{propContainer:de,propName:te.id+".radialaxis.title",placeholder:U(ie,"Click to enter radial axis title"),attributes:{x:pe,y:Ee,"text-anchor":"middle"},transform:{rotate:-we}})}},q.updateAngularAxis=function($,J){var K=this,te=K.gd,ie=K.layers,ae=K.radius,se=K.innerRadius,ce=K.cx,de=K.cy,ge=K.getAngular(J),ve=K.angularAxis,be=K.isSmith;be||(K.fillViewInitialKey("angularaxis.rotation",ge.rotation),ve.setGeometry(),ve.setScale());var me=be?function(he){var xe=F(K,P([0,he.x]));return Math.atan2(xe[0]-ce,xe[1]-de)-Math.PI/2}:function(he){return ve.t2g(he.x)};ve.type==="linear"&&ve.thetaunit==="radians"&&(ve.tick0=Z(ve.tick0),ve.dtick=Z(ve.dtick));var Se=function(he){return p(ce+ae*Math.cos(he),de-ae*Math.sin(he))},we=be?function(he){var xe=F(K,P([0,he.x]));return p(xe[0],xe[1])}:function(he){return Se(me(he))},_e=be?function(he){var xe=F(K,P([0,he.x])),ke=Math.atan2(xe[0]-ce,xe[1]-de)-Math.PI/2;return p(xe[0],xe[1])+_(-Z(ke))}:function(he){var xe=me(he);return Se(xe)+_(-Z(xe))},oe=be?function(he){return I(K,he.x,0,1/0)}:function(he){var xe=me(he),ke=Math.cos(xe),ze=Math.sin(xe);return"M"+[ce+se*ke,de-se*ze]+"L"+[ce+ae*ke,de-ae*ze]},le=r.makeLabelFns(ve,0).labelStandoff,pe={xFn:function(he){var xe=me(he);return Math.cos(xe)*le},yFn:function(he){var xe=me(he),ke=Math.sin(xe)>0?.2:1;return-Math.sin(xe)*(le+he.fontSize*ke)+Math.abs(Math.cos(xe))*(he.fontSize*h)},anchorFn:function(he){var xe=me(he),ke=Math.cos(xe);return Math.abs(ke)<.1?"middle":ke>0?"start":"end"},heightFn:function(he,xe,ke){var ze=me(he);return-.5*(1+Math.sin(ze))*ke}},Ee=V(ge);K.angularTickLayout!==Ee&&(ie["angular-axis"].selectAll("."+ve._id+"tick").remove(),K.angularTickLayout=Ee);var Te,Me=be?[1/0].concat(ve.tickvals||[]).map(function(he){return r.tickText(ve,he,!0,!1)}):r.calcTicks(ve);if(be&&(Me[0].text="",Me[0].fontSize*=1.75),J.gridshape==="linear"?(Te=Me.map(me),w.angleDelta(Te[0],Te[1])<0&&(Te=Te.slice().reverse())):Te=null,K.vangles=Te,ve.type==="category"&&(Me=Me.filter(function(he){return w.isAngleInsideSector(me(he),K.sectorInRad)})),ve.visible){var Le=ve.ticks==="inside"?-1:1,Ie=(ve.linewidth||1)/2;r.drawTicks(te,ve,{vals:Me,layer:ie["angular-axis"],path:"M"+Le*Ie+",0h"+Le*ve.ticklen,transFn:_e,crisp:!1}),r.drawGrid(te,ve,{vals:Me,layer:ie["angular-grid"],path:oe,transFn:w.noop,crisp:!1}),r.drawLabels(te,ve,{vals:Me,layer:ie["angular-axis"],repositionOnUpdate:!0,transFn:we,labelFns:pe})}ee(ie["angular-line"].select("path"),ge.showline,{d:K.pathSubplot(),transform:p(ce,de)}).attr("stroke-width",ge.linewidth).call(s.stroke,ge.linecolor)},q.updateFx=function($,J){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag($),this.updateRadialDrag($,J,0),this.updateRadialDrag($,J,1)),this.updateHoverAndMainDrag($))},q.updateHoverAndMainDrag=function($){var J,K,te=this,ie=te.isSmith,ae=te.gd,se=te.layers,ce=$._zoomlayer,de=E.MINZOOM,ge=E.OFFEDGE,ve=te.radius,be=te.innerRadius,me=te.cx,Se=te.cy,we=te.cxx,_e=te.cyy,oe=te.sectorInRad,le=te.vangles,pe=te.radialAxis,Ee=k.clampTiny,Te=k.findXYatLength,Me=k.findEnclosingVertexAngles,Le=E.cornerHalfWidth,Ie=E.cornerLen/2,he=c.makeDragger(se,"path","maindrag",$.dragmode===!1?"none":"crosshair");M.select(he).attr("d",te.pathSubplot()).attr("transform",p(me,Se)),he.onmousemove=function(it){f.hover(ae,it,te.id),ae._fullLayout._lasthover=he,ae._fullLayout._hoversubplot=te.id},he.onmouseout=function(it){ae._dragging||g.unhover(ae,it)};var xe,ke,ze,Re,Oe,Ve,qe,Je,ot,rt={element:he,gd:ae,subplot:te.id,plotinfo:{id:te.id,xaxis:te.xaxis,yaxis:te.yaxis},xaxes:[te.xaxis],yaxes:[te.yaxis]};function dt(it,Fe){return Math.sqrt(it*it+Fe*Fe)}function _t(it,Fe){return dt(it-we,Fe-_e)}function yt(it,Fe){return Math.atan2(_e-Fe,it-we)}function et(it,Fe){return[it*Math.cos(Fe),it*Math.sin(-Fe)]}function nt(it,Fe){if(it===0)return te.pathSector(2*Le);var Be=Ie/it,at=Fe-Be,Ze=Fe+Be,ht=Math.max(0,Math.min(it,ve)),vt=ht-Le,mt=ht+Le;return"M"+et(vt,at)+"A"+[vt,vt]+" 0,0,0 "+et(vt,Ze)+"L"+et(mt,Ze)+"A"+[mt,mt]+" 0,0,1 "+et(mt,at)+"Z"}function At(it,Fe,Be){if(it===0)return te.pathSector(2*Le);var at,Ze,ht=et(it,Fe),vt=et(it,Be),mt=Ee((ht[0]+vt[0])/2),ft=Ee((ht[1]+vt[1])/2);if(mt&&ft){var Et=ft/mt,Tt=-1/Et,xt=Te(Le,Et,mt,ft);at=Te(Ie,Tt,xt[0][0],xt[0][1]),Ze=Te(Ie,Tt,xt[1][0],xt[1][1])}else{var Ct,Pt;ft?(Ct=Ie,Pt=Le):(Ct=Le,Pt=Ie),at=[[mt-Ct,ft-Pt],[mt+Ct,ft-Pt]],Ze=[[mt-Ct,ft+Pt],[mt+Ct,ft+Pt]]}return"M"+at.join("L")+"L"+Ze.reverse().join("L")+"Z"}function Rt(it,Fe){return Fe=Math.max(Math.min(Fe,ve),be),it<ge?it=0:ve-it<ge?it=ve:Fe<ge?Fe=0:ve-Fe<ge&&(Fe=ve),Math.abs(Fe-it)>de?(it<Fe?(ze=it,Re=Fe):(ze=Fe,Re=it),!0):(ze=null,Re=null,!1)}function Ft(it,Fe){it=it||Oe,Fe=Fe||"M0,0Z",Je.attr("d",it),ot.attr("d",Fe),c.transitionZoombox(Je,ot,Ve,qe),Ve=!0;var Be={};We(Be),ae.emit("plotly_relayouting",Be)}function It(it,Fe){var Be,at,Ze=xe+(it*=J),ht=ke+(Fe*=K),vt=_t(xe,ke),mt=Math.min(_t(Ze,ht),ve),ft=yt(xe,ke);Rt(vt,mt)&&(Be=Oe+te.pathSector(Re),ze&&(Be+=te.pathSector(ze)),at=nt(ze,ft)+nt(Re,ft)),Ft(Be,at)}function Ge(it,Fe,Be,at){var Ze=k.findIntersectionXY(Be,at,Be,[it-we,_e-Fe]);return dt(Ze[0],Ze[1])}function Ye(it,Fe){var Be,at,Ze=xe+it,ht=ke+Fe,vt=yt(xe,ke),mt=yt(Ze,ht),ft=Me(vt,le),Et=Me(mt,le);Rt(Ge(xe,ke,ft[0],ft[1]),Math.min(Ge(Ze,ht,Et[0],Et[1]),ve))&&(Be=Oe+te.pathSector(Re),ze&&(Be+=te.pathSector(ze)),at=[At(ze,ft[0],ft[1]),At(Re,ft[0],ft[1])].join(" ")),Ft(Be,at)}function Ne(){if(c.removeZoombox(ae),ze!==null&&Re!==null){var it={};We(it),c.showDoubleClickNotifier(ae),o.call("_guiRelayout",ae,it)}}function We(it){var Fe=pe._rl,Be=(Fe[1]-Fe[0])/(1-be/ve)/ve,at=[Fe[0]+(ze-be)*Be,Fe[0]+(Re-be)*Be];it[te.id+".radialaxis.range"]=at}function st(it,Fe){var Be=ae._fullLayout.clickmode;if(c.removeZoombox(ae),it===2){var at={};for(var Ze in te.viewInitial)at[te.id+"."+Ze]=te.viewInitial[Ze];ae.emit("plotly_doubleclick",null),o.call("_guiRelayout",ae,at)}Be.indexOf("select")>-1&&it===1&&d(Fe,ae,[te.xaxis],[te.yaxis],te.id,rt),Be.indexOf("event")>-1&&f.click(ae,Fe,te.id)}rt.prepFn=function(it,Fe,Be){var at=ae._fullLayout.dragmode,Ze=he.getBoundingClientRect();ae._fullLayout._calcInverseTransform(ae);var ht=ae._fullLayout._invTransform;J=ae._fullLayout._invScaleX,K=ae._fullLayout._invScaleY;var vt=w.apply3DTransform(ht)(Fe-Ze.left,Be-Ze.top);if(xe=vt[0],ke=vt[1],le){var mt=k.findPolygonOffset(ve,oe[0],oe[1],le);xe+=we+mt[0],ke+=_e+mt[1]}switch(at){case"zoom":rt.clickFn=st,ie||(rt.moveFn=le?Ye:It,rt.doneFn=Ne,function(){ze=null,Re=null,Oe=te.pathSubplot(),Ve=!1;var ft=ae._fullLayout[te.id];qe=A(ft.bgcolor).getLuminance(),(Je=c.makeZoombox(ce,qe,me,Se,Oe)).attr("fill-rule","evenodd"),ot=c.makeCorners(ce,me,Se),m(ae)}());break;case"select":case"lasso":v(it,Fe,Be,rt,at)}},g.init(rt)},q.updateRadialDrag=function($,J,K){var te=this,ie=te.gd,ae=te.layers,se=te.radius,ce=te.innerRadius,de=te.cx,ge=te.cy,ve=te.radialAxis,be=E.radialDragBoxSize,me=be/2;if(ve.visible){var Se,we,_e,oe=j(te.radialAxisAngle),le=ve._rl,pe=le[0],Ee=le[1],Te=le[K],Me=.75*(le[1]-le[0])/(1-te.getHole(J))/se;K?(Se=de+(se+me)*Math.cos(oe),we=ge-(se+me)*Math.sin(oe),_e="radialdrag"):(Se=de+(ce-me)*Math.cos(oe),we=ge-(ce-me)*Math.sin(oe),_e="radialdrag-inner");var Le,Ie,he,xe=c.makeRectDragger(ae,_e,"crosshair",-me,-me,be,be),ke={element:xe,gd:ie};$.dragmode===!1&&(ke.dragmode=!1),ee(M.select(xe),ve.visible&&ce<se,{transform:p(Se,we)}),ke.prepFn=function(){Le=null,Ie=null,he=null,ke.moveFn=ze,ke.doneFn=Re,m(ie)},ke.clampFn=function(qe,Je){return Math.sqrt(qe*qe+Je*Je)<E.MINDRAG&&(qe=0,Je=0),[qe,Je]},g.init(ke)}function ze(qe,Je){if(Le)Le(qe,Je);else{var ot=[qe,-Je],rt=[Math.cos(oe),Math.sin(oe)],dt=Math.abs(w.dot(ot,rt)/Math.sqrt(w.dot(ot,ot)));isNaN(dt)||(Le=dt<.5?Oe:Ve)}var _t={};(function(yt){Ie!==null?yt[te.id+".radialaxis.angle"]=Ie:he!==null&&(yt[te.id+".radialaxis.range["+K+"]"]=he)})(_t),ie.emit("plotly_relayouting",_t)}function Re(){Ie!==null?o.call("_guiRelayout",ie,te.id+".radialaxis.angle",Ie):he!==null&&o.call("_guiRelayout",ie,te.id+".radialaxis.range["+K+"]",he)}function Oe(qe,Je){if(K!==0){var ot=Se+qe,rt=we+Je;Ie=Math.atan2(ge-rt,ot-de),te.vangles&&(Ie=ne(Ie,te.vangles)),Ie=Z(Ie);var dt=p(de,ge)+_(-Ie);ae["radial-axis"].attr("transform",dt),ae["radial-line"].select("line").attr("transform",dt);var _t=te.gd._fullLayout,yt=_t[te.id];te.updateRadialAxisTitle(_t,yt,Ie)}}function Ve(qe,Je){var ot=w.dot([qe,-Je],[Math.cos(oe),Math.sin(oe)]);if(he=Te-Me*ot,Me>0==(K?he>pe:he<Ee)){var rt=ie._fullLayout,dt=rt[te.id];ve.range[K]=he,ve._rl[K]=he,te.updateRadialAxis(rt,dt),te.xaxis.setRange(),te.xaxis.setScale(),te.yaxis.setRange(),te.yaxis.setScale();var _t=!1;for(var yt in te.traceHash){var et=te.traceHash[yt],nt=w.filterVisible(et);et[0][0].trace._module.plot(ie,te,nt,dt),o.traceIs(yt,"gl")&&nt.length&&(_t=!0)}_t&&(y(ie),T(ie))}else he=null}},q.updateAngularDrag=function($){var J=this,K=J.gd,te=J.layers,ie=J.radius,ae=J.angularAxis,se=J.cx,ce=J.cy,de=J.cxx,ge=J.cyy,ve=E.angularDragBoxSize,be=c.makeDragger(te,"path","angulardrag",$.dragmode===!1?"none":"move"),me={element:be,gd:K};function Se(ke,ze){return Math.atan2(ge+ve-ze,ke-de-ve)}$.dragmode===!1?me.dragmode=!1:M.select(be).attr("d",J.pathAnnulus(ie,ie+ve)).attr("transform",p(se,ce)).call(x,"move");var we,_e,oe,le,pe,Ee,Te=te.frontplot.select(".scatterlayer").selectAll(".trace"),Me=Te.selectAll(".point"),Le=Te.selectAll(".textpoint");function Ie(ke,ze){var Re=J.gd._fullLayout,Oe=Re[J.id],Ve=Se(we+ke*$._invScaleX,_e+ze*$._invScaleY),qe=Z(Ve-Ee);if(le=oe+qe,te.frontplot.attr("transform",p(J.xOffset2,J.yOffset2)+_([-qe,de,ge])),J.vangles){pe=J.radialAxisAngle+qe;var Je=p(se,ce)+_(-qe),ot=p(se,ce)+_(-pe);te.bg.attr("transform",Je),te["radial-grid"].attr("transform",Je),te["radial-axis"].attr("transform",ot),te["radial-line"].select("line").attr("transform",ot),J.updateRadialAxisTitle(Re,Oe,pe)}else J.clipPaths.forTraces.select("path").attr("transform",p(de,ge)+_(qe));Me.each(function(){var nt=M.select(this),At=n.getTranslate(nt);nt.attr("transform",p(At.x,At.y)+_([qe]))}),Le.each(function(){var nt=M.select(this),At=nt.select("text"),Rt=n.getTranslate(nt);nt.attr("transform",_([qe,At.attr("x"),At.attr("y")])+p(Rt.x,Rt.y))}),ae.rotation=w.modHalf(le,360),J.updateAngularAxis(Re,Oe),J._hasClipOnAxisFalse&&!w.isFullCircle(J.sectorInRad)&&Te.call(n.hideOutsideRangePoints,J);var rt=!1;for(var dt in J.traceHash)if(o.traceIs(dt,"gl")){var _t=J.traceHash[dt],yt=w.filterVisible(_t);_t[0][0].trace._module.plot(K,J,yt,Oe),yt.length&&(rt=!0)}rt&&(y(K),T(K));var et={};he(et),K.emit("plotly_relayouting",et)}function he(ke){ke[J.id+".angularaxis.rotation"]=le,J.vangles&&(ke[J.id+".radialaxis.angle"]=pe)}function xe(){Le.select("text").attr("transform",null);var ke={};he(ke),o.call("_guiRelayout",K,ke)}me.prepFn=function(ke,ze,Re){var Oe=$[J.id];oe=Oe.angularaxis.rotation;var Ve=be.getBoundingClientRect();we=ze-Ve.left,_e=Re-Ve.top,K._fullLayout._calcInverseTransform(K);var qe=w.apply3DTransform($._invTransform)(we,_e);we=qe[0],_e=qe[1],Ee=Se(we,_e),me.moveFn=Ie,me.doneFn=xe,m(K)},J.vangles&&!w.isFullCircle(J.sectorInRad)&&(me.prepFn=w.noop,x(M.select(be),null)),g.init(me)},q.isPtInside=function($){if(this.isSmith)return!0;var J=this.sectorInRad,K=this.vangles,te=this.angularAxis.c2g($.theta),ie=this.radialAxis,ae=ie.c2l($.r),se=ie._rl;return(K?k.isPtInsidePolygon:w.isPtInsideSector)(ae,te,se,J,K)},q.pathArc=function($){var J=this.sectorInRad,K=this.vangles;return(K?k.pathPolygon:w.pathArc)($,J[0],J[1],K)},q.pathSector=function($){var J=this.sectorInRad,K=this.vangles;return(K?k.pathPolygon:w.pathSector)($,J[0],J[1],K)},q.pathAnnulus=function($,J){var K=this.sectorInRad,te=this.vangles;return(te?k.pathPolygonAnnulus:w.pathAnnulus)($,J,K[0],K[1],te)},q.pathSubplot=function(){var $=this.innerRadius,J=this.radius;return $?this.pathAnnulus($,J):this.pathSector(J)},q.fillViewInitialKey=function($,J){$ in this.viewInitial||(this.viewInitial[$]=J)}},57696:function(Y,O,e){var M=e(3400),A=e(78344),o=M.deg2rad,w=M.rad2deg;Y.exports=function(_,p,s){switch(A(_,s),_._id){case"x":case"radialaxis":(function(n,a){var r=a._subplot;n.setGeometry=function(){var i=n._rl[0],l=n._rl[1],u=r.innerRadius,c=(r.radius-u)/(l-i),g=u/c,f=i>l?function(b){return b<=0}:function(b){return b>=0};n.c2g=function(b){var v=n.c2l(b)-i;return(f(v)?v:0)+g},n.g2c=function(b){return n.l2c(b+i-g)},n.g2p=function(b){return b*c},n.c2p=function(b){return n.g2p(n.c2g(b))}}})(_,p);break;case"angularaxis":(function(n,a){var r=n.type;if(r==="linear"){var i=n.d2c,l=n.c2d;n.d2c=function(u,c){return function(g,f){return f==="degrees"?o(g):g}(i(u),c)},n.c2d=function(u,c){return l(function(g,f){return f==="degrees"?w(g):g}(u,c))}}n.makeCalcdata=function(u,c){var g,f,b=u[c],v=u._length,d=function(h){return n.d2c(h,u.thetaunit)};if(b)for(g=new Array(v),f=0;f<v;f++)g[f]=d(b[f]);else{var m=c+"0",x="d"+c,y=m in u?d(u[m]):0,T=u[x]?d(u[x]):(n.period||2*Math.PI)/v;for(g=new Array(v),f=0;f<v;f++)g[f]=y+f*T}return g},n.setGeometry=function(){var u,c,g,f,b=a.sector,v=b.map(o),d={clockwise:-1,counterclockwise:1}[n.direction],m=o(n.rotation),x=function(E){return d*E+m},y=function(E){return(E-m)/d};switch(r){case"linear":c=u=M.identity,f=o,g=w,n.range=M.isFullCircle(v)?[b[0],b[0]+360]:v.map(y).map(w);break;case"category":var T=n._categories.length,h=n.period?Math.max(n.period,T):T;h===0&&(h=1),c=f=function(E){return 2*E*Math.PI/h},u=g=function(E){return E*h/Math.PI/2},n.range=[0,h]}n.c2g=function(E){return x(c(E))},n.g2c=function(E){return u(y(E))},n.t2g=function(E){return x(f(E))},n.g2t=function(E){return g(y(E))}}})(_,p)}}},55012:function(Y){Y.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},36416:function(Y){function O(o){return o<0?-1:o>0?1:0}function e(o){var w=o[0],_=o[1];if(!isFinite(w)||!isFinite(_))return[1,0];var p=(w+1)*(w+1)+_*_;return[(w*w+_*_-1)/p,2*_/p]}function M(o,w){var _=w[0],p=w[1];return[_*o.radius+o.cx,-p*o.radius+o.cy]}function A(o,w){return w*o.radius}Y.exports={smith:e,reactanceArc:function(o,w,_,p){var s=M(o,e([_,w])),n=s[0],a=s[1],r=M(o,e([p,w])),i=r[0],l=r[1];if(w===0)return["M"+n+","+a,"L"+i+","+l].join(" ");var u=A(o,1/Math.abs(w));return["M"+n+","+a,"A"+u+","+u+" 0 0,"+(w<0?1:0)+" "+i+","+l].join(" ")},resistanceArc:function(o,w,_,p){var s=A(o,1/(w+1)),n=M(o,e([w,_])),a=n[0],r=n[1],i=M(o,e([w,p])),l=i[0],u=i[1];if(O(_)!==O(p)){var c=M(o,e([w,0]));return["M"+a+","+r,"A"+s+","+s+" 0 0,"+(0<_?0:1)+" "+c[0]+","+c[1],"A"+s+","+s+" 0 0,"+(p<0?0:1)+l+","+u].join(" ")}return["M"+a+","+r,"A"+s+","+s+" 0 0,"+(p<_?0:1)+" "+l+","+u].join(" ")},smithTransform:M}},47788:function(Y,O,e){var M=e(84888).KY,A=e(3400).counterRegex,o=e(62400),w=e(55012),_=w.attr,p=w.name,s=A(p),n={};n[_]={valType:"subplotid",dflt:p,editType:"calc"},Y.exports={attr:_,name:p,idRoot:p,idRegex:s,attrRegex:s,attributes:n,layoutAttributes:e(6183),supplyLayoutDefaults:e(22836),plot:function(a){for(var r=a._fullLayout,i=a.calcdata,l=r._subplots[p],u=0;u<l.length;u++){var c=l[u],g=M(i,p,c),f=r[c]._subplot;f||(f=o(a,c,!0),r[c]._subplot=f),f.plot(g,r,a._promises)}},clean:function(a,r,i,l){for(var u=l._subplots[p]||[],c=0;c<u.length;c++){var g=u[c],f=l[g]._subplot;if(!r[g]&&f)for(var b in f.framework.remove(),f.clipPaths)f.clipPaths[b].remove()}},toSVG:e(57952).toSVG}},6183:function(Y,O,e){var M=e(22548),A=e(94724),o=e(86968).u,w=e(3400).extendFlat,_=e(67824).overrideAll,p=_({color:A.color,showline:w({},A.showline,{dflt:!0}),linecolor:A.linecolor,linewidth:A.linewidth,showgrid:w({},A.showgrid,{dflt:!0}),gridcolor:A.gridcolor,gridwidth:A.gridwidth,griddash:A.griddash},"plot","from-root"),s=_({ticklen:A.ticklen,tickwidth:w({},A.tickwidth,{dflt:2}),tickcolor:A.tickcolor,showticklabels:A.showticklabels,labelalias:A.labelalias,showtickprefix:A.showtickprefix,tickprefix:A.tickprefix,showticksuffix:A.showticksuffix,ticksuffix:A.ticksuffix,tickfont:A.tickfont,tickformat:A.tickformat,hoverformat:A.hoverformat,layer:A.layer},"plot","from-root"),n=w({visible:w({},A.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:w({},A.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},p,s),a=w({visible:w({},A.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:A.ticks,editType:"calc"},p,s);Y.exports={domain:o({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:M.background},realaxis:n,imaginaryaxis:a,editType:"calc"}},22836:function(Y,O,e){var M,A,o,w=e(3400),_=e(76308),p=e(31780),s=e(168),n=e(84888).op,a=e(42568),r=e(95936),i=e(42136),l=e(78344),u=e(6183),c=e(55012),g=c.axisNames,f=(M=function(v){return w.isTypedArray(v)&&(v=Array.from(v)),v.slice().reverse().map(function(d){return-d}).concat([0]).concat(v)},A=String,o={},function(v){var d=A?A(v):v;if(d in o)return o[d];var m=M(v);return o[d]=m,m});function b(v,d,m,x){var y=m("bgcolor");x.bgColor=_.combine(y,x.paper_bgcolor);var T,h=n(x.fullData,c.name,x.id),E=x.layoutOut;function k(q,V){return m(T+"."+q,V)}for(var L=0;L<g.length;L++){T=g[L],w.isPlainObject(v[T])||(v[T]={});var P=v[T],I=p.newContainer(d,T);I._id=I._name=T,I._attr=x.id+"."+T,I._traceIndices=h.map(function(q){return q._expandedIndex});var z=k("visible");if(I.type="linear",l(I,E),a(P,I,k,I.type),z){var F,U,R,j,Z=T==="realaxis";Z&&k("side"),Z?k("tickvals"):k("tickvals",f(d.realaxis.tickvals||u.realaxis.tickvals.dflt)),w.isTypedArray(I.tickvals)&&(I.tickvals=Array.from(I.tickvals));var B=x.font||{};z&&(U=(F=k("color"))===P.color?F:B.color,R=B.size,j=B.family),r(P,I,k,I.type,{noAutotickangles:!0,noTicklabelstep:!0,noAng:!Z,noExp:!0,font:{color:U,size:R,family:j}}),w.coerce2(v,d,u,T+".ticklen"),w.coerce2(v,d,u,T+".tickwidth"),w.coerce2(v,d,u,T+".tickcolor",d.color),k("ticks")||(delete d[T].ticklen,delete d[T].tickwidth,delete d[T].tickcolor),i(P,I,k,{dfltColor:F,bgColor:x.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:u[T]}),k("layer")}k("hoverformat"),delete I.type,I._input=P}}Y.exports=function(v,d,m){s(v,d,m,{noUirevision:!0,type:c.name,attributes:u,handleDefaults:b,font:d.font,paper_bgcolor:d.paper_bgcolor,fullData:m,layoutOut:d})}},168:function(Y,O,e){var M=e(3400),A=e(31780),o=e(86968).Q;Y.exports=function(w,_,p,s){var n,a,r=s.type,i=s.attributes,l=s.handleDefaults,u=s.partition||"x",c=_._subplots[r],g=c.length,f=g&&c[0].replace(/\d+$/,"");function b(x,y){return M.coerce(n,a,i,x,y)}for(var v=0;v<g;v++){var d=c[v];n=w[d]?w[d]:w[d]={},a=A.newContainer(_,d,f),s.noUirevision||b("uirevision",_.uirevision);var m={};m[u]=[v/g,(v+1)/g],o(a,_,b,m),s.id=d,l(n,a,b,s)}}},21776:function(Y,O,e){var M=e(26880);function A(o){var w=o.description?" "+o.description:"",_=o.keys||[];if(_.length>0){for(var p=[],s=0;s<_.length;s++)p[s]="`"+_[s]+"`";w+="Finally, the template string has access to ",w=_.length===1?w+"variable "+p[0]:w+"variables "+p.slice(0,-1).join(", ")+" and "+p.slice(-1)+"."}return w}M.FORMAT_LINK,M.DATE_FORMAT_LINK,O.Ks=function(o,w){o=o||{},A(w=w||{});var _={valType:"string",dflt:"",editType:o.editType||"none"};return o.arrayOk!==!1&&(_.arrayOk=!0),_},O.Gw=function(o,w){o=o||{},A(w=w||{});var _={valType:"string",dflt:"",editType:o.editType||"calc"};return o.arrayOk!==!1&&(_.arrayOk=!0),_},O.ye=function(o,w){return w=w||{},(o=o||{}).newshape,A(w),{valType:"string",dflt:"",editType:o.editType||"arraydraw"}}},19352:function(Y,O,e){var M=e(24696),A=e(84888).KY,o=e(3400).counterRegex,w="ternary";O.name=w;var _=O.attr="subplot";O.idRoot=w,O.idRegex=O.attrRegex=o(w),(O.attributes={})[_]={valType:"subplotid",dflt:"ternary",editType:"calc"},O.layoutAttributes=e(86379),O.supplyLayoutDefaults=e(38536),O.plot=function(p){for(var s=p._fullLayout,n=p.calcdata,a=s._subplots[w],r=0;r<a.length;r++){var i=a[r],l=A(n,w,i),u=s[i]._subplot;u||(u=new M({id:i,graphDiv:p,container:s._ternarylayer.node()},s),s[i]._subplot=u),u.plot(l,s,p._promises)}},O.clean=function(p,s,n,a){for(var r=a._subplots[w]||[],i=0;i<r.length;i++){var l=r[i],u=a[l]._subplot;!s[l]&&u&&(u.plotContainer.remove(),u.clipDef.remove(),u.clipDefRelative.remove(),u.layers["a-title"].remove(),u.layers["b-title"].remove(),u.layers["c-title"].remove())}}},86379:function(Y,O,e){var M=e(22548),A=e(86968).u,o=e(94724),w=e(67824).overrideAll,_=e(92880).extendFlat,p={title:{text:o.title.text,font:o.title.font},color:o.color,tickmode:o.minor.tickmode,nticks:_({},o.nticks,{dflt:6,min:1}),tick0:o.tick0,dtick:o.dtick,tickvals:o.tickvals,ticktext:o.ticktext,ticks:o.ticks,ticklen:o.ticklen,tickwidth:o.tickwidth,tickcolor:o.tickcolor,ticklabelstep:o.ticklabelstep,showticklabels:o.showticklabels,labelalias:o.labelalias,showtickprefix:o.showtickprefix,tickprefix:o.tickprefix,showticksuffix:o.showticksuffix,ticksuffix:o.ticksuffix,showexponent:o.showexponent,exponentformat:o.exponentformat,minexponent:o.minexponent,separatethousands:o.separatethousands,tickfont:o.tickfont,tickangle:o.tickangle,tickformat:o.tickformat,tickformatstops:o.tickformatstops,hoverformat:o.hoverformat,showline:_({},o.showline,{dflt:!0}),linecolor:o.linecolor,linewidth:o.linewidth,showgrid:_({},o.showgrid,{dflt:!0}),gridcolor:o.gridcolor,gridwidth:o.gridwidth,griddash:o.griddash,layer:o.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:o._deprecated.title,titlefont:o._deprecated.titlefont}},s=Y.exports=w({domain:A({name:"ternary"}),bgcolor:{valType:"color",dflt:M.background},sum:{valType:"number",dflt:1,min:0},aaxis:p,baxis:p,caxis:p},"plot","from-root");s.uirevision={valType:"any",editType:"none"},s.aaxis.uirevision=s.baxis.uirevision=s.caxis.uirevision={valType:"any",editType:"none"}},38536:function(Y,O,e){var M=e(76308),A=e(31780),o=e(3400),w=e(168),_=e(95936),p=e(42568),s=e(25404),n=e(26332),a=e(42136),r=e(86379),i=["aaxis","baxis","caxis"];function l(c,g,f,b){var v,d,m,x=f("bgcolor"),y=f("sum");b.bgColor=M.combine(x,b.paper_bgcolor);for(var T=0;T<i.length;T++)d=c[v=i[T]]||{},(m=A.newContainer(g,v))._name=v,u(d,m,b,g);var h=g.aaxis,E=g.baxis,k=g.caxis;h.min+E.min+k.min>=y&&(h.min=0,E.min=0,k.min=0,c.aaxis&&delete c.aaxis.min,c.baxis&&delete c.baxis.min,c.caxis&&delete c.caxis.min)}function u(c,g,f,b){var v=r[g._name];function d(E,k){return o.coerce(c,g,v,E,k)}d("uirevision",b.uirevision),g.type="linear";var m=d("color"),x=m!==v.color.dflt?m:f.font.color,y=g._name.charAt(0).toUpperCase(),T="Component "+y,h=d("title.text",T);g._hovertitle=h===T?h:y,o.coerceFont(d,"title.font",{family:f.font.family,size:o.bigFont(f.font.size),color:x}),d("min"),n(c,g,d,"linear"),p(c,g,d,"linear"),_(c,g,d,"linear",{noAutotickangles:!0}),s(c,g,d,{outerTicks:!0}),d("showticklabels")&&(o.coerceFont(d,"tickfont",{family:f.font.family,size:f.font.size,color:x}),d("tickangle"),d("tickformat")),a(c,g,d,{dfltColor:m,bgColor:f.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:v}),d("hoverformat"),d("layer")}Y.exports=function(c,g,f){w(c,g,f,{type:"ternary",attributes:r,handleDefaults:l,font:g.font,paper_bgcolor:g.paper_bgcolor})}},24696:function(Y,O,e){var M=e(33428),A=e(49760),o=e(24040),w=e(3400),_=w.strTranslate,p=w._,s=e(76308),n=e(43616),a=e(78344),r=e(92880).extendFlat,i=e(7316),l=e(54460),u=e(86476),c=e(93024),g=e(72760),f=g.freeMode,b=g.rectMode,v=e(81668),d=e(22676).prepSelect,m=e(22676).selectOnClick,x=e(22676).clearOutline,y=e(22676).clearSelectionsCache,T=e(33816);function h(R,j){this.id=R.id,this.graphDiv=R.graphDiv,this.init(j),this.makeFramework(j),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}Y.exports=h;var E=h.prototype;E.init=function(R){this.container=R._ternarylayer,this.defs=R._defs,this.layoutId=R._uid,this.traceHash={},this.layers={}},E.plot=function(R,j){var Z=this,B=j[Z.id],q=j._size;Z._hasClipOnAxisFalse=!1;for(var V=0;V<R.length;V++)if(R[V][0].trace.cliponaxis===!1){Z._hasClipOnAxisFalse=!0;break}Z.updateLayers(B),Z.adjustLayout(B,q),i.generalUpdatePerTraceModule(Z.graphDiv,Z,R,B),Z.layers.plotbg.select("path").call(s.fill,B.bgcolor)},E.makeFramework=function(R){var j=this,Z=j.graphDiv,B=R[j.id],q=j.clipId="clip"+j.layoutId+j.id,V=j.clipIdRelative="clip-relative"+j.layoutId+j.id;j.clipDef=w.ensureSingleById(R._clips,"clipPath",q,function(ne){ne.append("path").attr("d","M0,0Z")}),j.clipDefRelative=w.ensureSingleById(R._clips,"clipPath",V,function(ne){ne.append("path").attr("d","M0,0Z")}),j.plotContainer=w.ensureSingle(j.container,"g",j.id),j.updateLayers(B),n.setClipUrl(j.layers.backplot,q,Z),n.setClipUrl(j.layers.grids,q,Z)},E.updateLayers=function(R){var j=this.layers,Z=["draglayer","plotbg","backplot","grids"];R.aaxis.layer==="below traces"&&Z.push("aaxis","aline"),R.baxis.layer==="below traces"&&Z.push("baxis","bline"),R.caxis.layer==="below traces"&&Z.push("caxis","cline"),Z.push("frontplot"),R.aaxis.layer==="above traces"&&Z.push("aaxis","aline"),R.baxis.layer==="above traces"&&Z.push("baxis","bline"),R.caxis.layer==="above traces"&&Z.push("caxis","cline");var B=this.plotContainer.selectAll("g.toplevel").data(Z,String),q=["agrid","bgrid","cgrid"];B.enter().append("g").attr("class",function(V){return"toplevel "+V}).each(function(V){var ne=M.select(this);j[V]=ne,V==="frontplot"?ne.append("g").classed("scatterlayer",!0):V==="backplot"?ne.append("g").classed("maplayer",!0):V==="plotbg"?ne.append("path").attr("d","M0,0Z"):V==="aline"||V==="bline"||V==="cline"?ne.append("path"):V==="grids"&&q.forEach(function(ee){j[ee]=ne.append("g").classed("grid "+ee,!0)})}),B.order()};var k=Math.sqrt(4/3);E.adjustLayout=function(R,j){var Z,B,q,V,ne,ee,$=this,J=R.domain,K=(J.x[0]+J.x[1])/2,te=(J.y[0]+J.y[1])/2,ie=J.x[1]-J.x[0],ae=J.y[1]-J.y[0],se=ie*j.w,ce=ae*j.h,de=R.sum,ge=R.aaxis.min,ve=R.baxis.min,be=R.caxis.min;se>k*ce?q=(V=ce)*k:V=(q=se)/k,ne=ie*q/se,ee=ae*V/ce,Z=j.l+j.w*K-q/2,B=j.t+j.h*(1-te)-V/2,$.x0=Z,$.y0=B,$.w=q,$.h=V,$.sum=de,$.xaxis={type:"linear",range:[ge+2*be-de,de-ge-2*ve],domain:[K-ne/2,K+ne/2],_id:"x"},a($.xaxis,$.graphDiv._fullLayout),$.xaxis.setScale(),$.xaxis.isPtWithinRange=function(Le){return Le.a>=$.aaxis.range[0]&&Le.a<=$.aaxis.range[1]&&Le.b>=$.baxis.range[1]&&Le.b<=$.baxis.range[0]&&Le.c>=$.caxis.range[1]&&Le.c<=$.caxis.range[0]},$.yaxis={type:"linear",range:[ge,de-ve-be],domain:[te-ee/2,te+ee/2],_id:"y"},a($.yaxis,$.graphDiv._fullLayout),$.yaxis.setScale(),$.yaxis.isPtWithinRange=function(){return!0};var me=$.yaxis.domain[0],Se=$.aaxis=r({},R.aaxis,{range:[ge,de-ve-be],side:"left",tickangle:(+R.aaxis.tickangle||0)-30,domain:[me,me+ee*k],anchor:"free",position:0,_id:"y",_length:q});a(Se,$.graphDiv._fullLayout),Se.setScale();var we=$.baxis=r({},R.baxis,{range:[de-ge-be,ve],side:"bottom",domain:$.xaxis.domain,anchor:"free",position:0,_id:"x",_length:q});a(we,$.graphDiv._fullLayout),we.setScale();var _e=$.caxis=r({},R.caxis,{range:[de-ge-ve,be],side:"right",tickangle:(+R.caxis.tickangle||0)+30,domain:[me,me+ee*k],anchor:"free",position:0,_id:"y",_length:q});a(_e,$.graphDiv._fullLayout),_e.setScale();var oe="M"+Z+","+(B+V)+"h"+q+"l-"+q/2+",-"+V+"Z";$.clipDef.select("path").attr("d",oe),$.layers.plotbg.select("path").attr("d",oe);var le="M0,"+V+"h"+q+"l-"+q/2+",-"+V+"Z";$.clipDefRelative.select("path").attr("d",le);var pe=_(Z,B);$.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",pe),$.clipDefRelative.select("path").attr("transform",null);var Ee=_(Z-we._offset,B+V);$.layers.baxis.attr("transform",Ee),$.layers.bgrid.attr("transform",Ee);var Te=_(Z+q/2,B)+"rotate(30)"+_(0,-Se._offset);$.layers.aaxis.attr("transform",Te),$.layers.agrid.attr("transform",Te);var Me=_(Z+q/2,B)+"rotate(-30)"+_(0,-_e._offset);$.layers.caxis.attr("transform",Me),$.layers.cgrid.attr("transform",Me),$.drawAxes(!0),$.layers.aline.select("path").attr("d",Se.showline?"M"+Z+","+(B+V)+"l"+q/2+",-"+V:"M0,0").call(s.stroke,Se.linecolor||"#000").style("stroke-width",(Se.linewidth||0)+"px"),$.layers.bline.select("path").attr("d",we.showline?"M"+Z+","+(B+V)+"h"+q:"M0,0").call(s.stroke,we.linecolor||"#000").style("stroke-width",(we.linewidth||0)+"px"),$.layers.cline.select("path").attr("d",_e.showline?"M"+(Z+q/2)+","+B+"l"+q/2+","+V:"M0,0").call(s.stroke,_e.linecolor||"#000").style("stroke-width",(_e.linewidth||0)+"px"),$.graphDiv._context.staticPlot||$.initInteractions(),n.setClipUrl($.layers.frontplot,$._hasClipOnAxisFalse?null:$.clipId,$.graphDiv)},E.drawAxes=function(R){var j=this,Z=j.graphDiv,B=j.id.substr(7)+"title",q=j.layers,V=j.aaxis,ne=j.baxis,ee=j.caxis;if(j.drawAx(V),j.drawAx(ne),j.drawAx(ee),R){var $=Math.max(V.showticklabels?V.tickfont.size/2:0,(ee.showticklabels?.75*ee.tickfont.size:0)+(ee.ticks==="outside"?.87*ee.ticklen:0)),J=(ne.showticklabels?ne.tickfont.size:0)+(ne.ticks==="outside"?ne.ticklen:0)+3;q["a-title"]=v.draw(Z,"a"+B,{propContainer:V,propName:j.id+".aaxis.title",placeholder:p(Z,"Click to enter Component A title"),attributes:{x:j.x0+j.w/2,y:j.y0-V.title.font.size/3-$,"text-anchor":"middle"}}),q["b-title"]=v.draw(Z,"b"+B,{propContainer:ne,propName:j.id+".baxis.title",placeholder:p(Z,"Click to enter Component B title"),attributes:{x:j.x0-J,y:j.y0+j.h+.83*ne.title.font.size+J,"text-anchor":"middle"}}),q["c-title"]=v.draw(Z,"c"+B,{propContainer:ee,propName:j.id+".caxis.title",placeholder:p(Z,"Click to enter Component C title"),attributes:{x:j.x0+j.w+J,y:j.y0+j.h+.83*ee.title.font.size+J,"text-anchor":"middle"}})}},E.drawAx=function(R){var j,Z=this,B=Z.graphDiv,q=R._name,V=q.charAt(0),ne=R._id,ee=Z.layers[q],$=V+"tickLayout",J=(j=R).ticks+String(j.ticklen)+String(j.showticklabels);Z[$]!==J&&(ee.selectAll("."+ne+"tick").remove(),Z[$]=J),R.setScale();var K=l.calcTicks(R),te=l.clipEnds(R,K),ie=l.makeTransTickFn(R),ae=l.getTickSigns(R)[2],se=w.deg2rad(30),ce=ae*(R.linewidth||1)/2,de=ae*R.ticklen,ge=Z.w,ve=Z.h,be=V==="b"?"M0,"+ce+"l"+Math.sin(se)*de+","+Math.cos(se)*de:"M"+ce+",0l"+Math.cos(se)*de+","+-Math.sin(se)*de,me={a:"M0,0l"+ve+",-"+ge/2,b:"M0,0l-"+ge/2+",-"+ve,c:"M0,0l-"+ve+","+ge/2}[V];l.drawTicks(B,R,{vals:R.ticks==="inside"?te:K,layer:ee,path:be,transFn:ie,crisp:!1}),l.drawGrid(B,R,{vals:te,layer:Z.layers[V+"grid"],path:me,transFn:ie,crisp:!1}),l.drawLabels(B,R,{vals:K,layer:ee,transFn:ie,labelFns:l.makeLabelFns(R,0,30)})};var L=T.MINZOOM/2+.87,P="m-0.87,.5h"+L+"v3h-"+(L+5.2)+"l"+(L/2+2.6)+",-"+(.87*L+4.5)+"l2.6,1.5l-"+L/2+","+.87*L+"Z",I="m0.87,.5h-"+L+"v3h"+(L+5.2)+"l-"+(L/2+2.6)+",-"+(.87*L+4.5)+"l-2.6,1.5l"+L/2+","+.87*L+"Z",z="m0,1l"+L/2+","+.87*L+"l2.6,-1.5l-"+(L/2+2.6)+",-"+(.87*L+4.5)+"l-"+(L/2+2.6)+","+(.87*L+4.5)+"l2.6,1.5l"+L/2+",-"+.87*L+"Z",F=!0;function U(R){M.select(R).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}E.clearOutline=function(){y(this.dragOptions),x(this.dragOptions.gd)},E.initInteractions=function(){var R,j,Z,B,q,V,ne,ee,$,J,K,te,ie=this,ae=ie.layers.plotbg.select("path").node(),se=ie.graphDiv,ce=se._fullLayout._zoomlayer;function de(le){var pe={};return pe[ie.id+".aaxis.min"]=le.a,pe[ie.id+".baxis.min"]=le.b,pe[ie.id+".caxis.min"]=le.c,pe}function ge(le,pe){var Ee=se._fullLayout.clickmode;U(se),le===2&&(se.emit("plotly_doubleclick",null),o.call("_guiRelayout",se,de({a:0,b:0,c:0}))),Ee.indexOf("select")>-1&&le===1&&m(pe,se,[ie.xaxis],[ie.yaxis],ie.id,ie.dragOptions),Ee.indexOf("event")>-1&&c.click(se,pe,ie.id)}function ve(le,pe){return 1-pe/ie.h}function be(le,pe){return 1-(le+(ie.h-pe)/Math.sqrt(3))/ie.w}function me(le,pe){return(le-(ie.h-pe)/Math.sqrt(3))/ie.w}function Se(le,pe){var Ee=Z+le*R,Te=B+pe*j,Me=Math.max(0,Math.min(1,ve(0,B),ve(0,Te))),Le=Math.max(0,Math.min(1,be(Z,B),be(Ee,Te))),Ie=Math.max(0,Math.min(1,me(Z,B),me(Ee,Te))),he=(Me/2+Ie)*ie.w,xe=(1-Me/2-Le)*ie.w,ke=(he+xe)/2,ze=xe-he,Re=(1-Me)*ie.h,Oe=Re-ze/k;ze<T.MINZOOM?(ne=q,K.attr("d",$),te.attr("d","M0,0Z")):(ne={a:q.a+Me*V,b:q.b+Le*V,c:q.c+Ie*V},K.attr("d",$+"M"+he+","+Re+"H"+xe+"L"+ke+","+Oe+"L"+he+","+Re+"Z"),te.attr("d","M"+Z+","+B+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+he+","+Re+P+"M"+xe+","+Re+I+"M"+ke+","+Oe+z)),J||(K.transition().style("fill",ee>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),te.transition().style("opacity",1).duration(200),J=!0),se.emit("plotly_relayouting",de(ne))}function we(){U(se),ne!==q&&(o.call("_guiRelayout",se,de(ne)),F&&se.data&&se._context.showTips&&(w.notifier(p(se,"Double-click to zoom back out"),"long"),F=!1))}function _e(le,pe){var Ee=le/ie.xaxis._m,Te=pe/ie.yaxis._m,Me=[(ne={a:q.a-Te,b:q.b+(Ee+Te)/2,c:q.c-(Ee-Te)/2}).a,ne.b,ne.c].sort(w.sorterAsc),Le=Me.indexOf(ne.a),Ie=Me.indexOf(ne.b),he=Me.indexOf(ne.c);Me[0]<0&&(Me[1]+Me[0]/2<0?(Me[2]+=Me[0]+Me[1],Me[0]=Me[1]=0):(Me[2]+=Me[0]/2,Me[1]+=Me[0]/2,Me[0]=0),ne={a:Me[Le],b:Me[Ie],c:Me[he]},pe=(q.a-ne.a)*ie.yaxis._m,le=(q.c-ne.c-q.b+ne.b)*ie.xaxis._m);var xe=_(ie.x0+le,ie.y0+pe);ie.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",xe);var ke=_(-le,-pe);ie.clipDefRelative.select("path").attr("transform",ke),ie.aaxis.range=[ne.a,ie.sum-ne.b-ne.c],ie.baxis.range=[ie.sum-ne.a-ne.c,ne.b],ie.caxis.range=[ie.sum-ne.a-ne.b,ne.c],ie.drawAxes(!1),ie._hasClipOnAxisFalse&&ie.plotContainer.select(".scatterlayer").selectAll(".trace").call(n.hideOutsideRangePoints,ie),se.emit("plotly_relayouting",de(ne))}function oe(){o.call("_guiRelayout",se,de(ne))}this.dragOptions={element:ae,gd:se,plotinfo:{id:ie.id,domain:se._fullLayout[ie.id].domain,xaxis:ie.xaxis,yaxis:ie.yaxis},subplot:ie.id,prepFn:function(le,pe,Ee){ie.dragOptions.xaxes=[ie.xaxis],ie.dragOptions.yaxes=[ie.yaxis],R=se._fullLayout._invScaleX,j=se._fullLayout._invScaleY;var Te=ie.dragOptions.dragmode=se._fullLayout.dragmode;f(Te)?ie.dragOptions.minDrag=1:ie.dragOptions.minDrag=void 0,Te==="zoom"?(ie.dragOptions.moveFn=Se,ie.dragOptions.clickFn=ge,ie.dragOptions.doneFn=we,function(Me,Le,Ie){var he=ae.getBoundingClientRect();Z=Le-he.left,B=Ie-he.top,se._fullLayout._calcInverseTransform(se);var xe=se._fullLayout._invTransform,ke=w.apply3DTransform(xe)(Z,B);Z=ke[0],B=ke[1],q={a:ie.aaxis.range[0],b:ie.baxis.range[1],c:ie.caxis.range[1]},ne=q,V=ie.aaxis.range[1]-q.a,ee=A(ie.graphDiv._fullLayout[ie.id].bgcolor).getLuminance(),$="M0,"+ie.h+"L"+ie.w/2+", 0L"+ie.w+","+ie.h+"Z",J=!1,K=ce.append("path").attr("class","zoombox").attr("transform",_(ie.x0,ie.y0)).style({fill:ee>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",$),te=ce.append("path").attr("class","zoombox-corners").attr("transform",_(ie.x0,ie.y0)).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),ie.clearOutline(se)}(0,pe,Ee)):Te==="pan"?(ie.dragOptions.moveFn=_e,ie.dragOptions.clickFn=ge,ie.dragOptions.doneFn=oe,q={a:ie.aaxis.range[0],b:ie.baxis.range[1],c:ie.caxis.range[1]},ne=q,ie.clearOutline(se)):(b(Te)||f(Te))&&d(le,pe,Ee,ie.dragOptions,Te)}},ae.onmousemove=function(le){c.hover(se,le,ie.id),se._fullLayout._lasthover=ae,se._fullLayout._hoversubplot=ie.id},ae.onmouseout=function(le){se._dragging||u.unhover(se,le)},u.init(this.dragOptions)}},24040:function(Y,O,e){var M=e(24248),A=e(16628),o=e(52416),w=e(63620),_=e(52200).addStyleRule,p=e(92880),s=e(45464),n=e(64859),a=p.extendFlat,r=p.extendDeepAll;function i(m){var x=m.name,y=m.categories,T=m.meta;if(O.modules[x])M.log("Type "+x+" already registered");else{O.subplotsRegistry[m.basePlotModule.name]||function(F){var U=F.name;if(O.subplotsRegistry[U])M.log("Plot type "+U+" already registered.");else for(var R in g(F),O.subplotsRegistry[U]=F,O.componentsRegistry)v(R,F.name)}(m.basePlotModule);for(var h={},E=0;E<y.length;E++)h[y[E]]=!0,O.allCategories[y[E]]=!0;for(var k in O.modules[x]={_module:m,categories:h},T&&Object.keys(T).length&&(O.modules[x].meta=T),O.allTypes.push(x),O.componentsRegistry)f(k,x);m.layoutAttributes&&a(O.traceLayoutAttributes,m.layoutAttributes);var L=m.basePlotModule,P=L.name;if(P==="mapbox"){var I=L.constants.styleRules;for(var z in I)_(".js-plotly-plot .plotly .mapboxgl-"+z,I[z])}P!=="geo"&&P!=="mapbox"||window.PlotlyGeoAssets!==void 0||(window.PlotlyGeoAssets={topojson:{}})}}function l(m){if(typeof m.name!="string")throw new Error("Component module *name* must be a string.");var x=m.name;for(var y in O.componentsRegistry[x]=m,m.layoutAttributes&&(m.layoutAttributes._isLinkedToArray&&o(O.layoutArrayContainers,x),g(m)),O.modules)f(x,y);for(var T in O.subplotsRegistry)v(x,T);for(var h in O.transformsRegistry)b(x,h);m.schema&&m.schema.layout&&r(n,m.schema.layout)}function u(m){if(typeof m.name!="string")throw new Error("Transform module *name* must be a string.");var x="Transform module "+m.name,y=typeof m.transform=="function",T=typeof m.calcTransform=="function";if(!y&&!T)throw new Error(x+" is missing a *transform* or *calcTransform* method.");for(var h in y&&T&&M.log([x+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),w(m.attributes)||M.log(x+" registered without an *attributes* object."),typeof m.supplyDefaults!="function"&&M.log(x+" registered without a *supplyDefaults* method."),O.transformsRegistry[m.name]=m,O.componentsRegistry)b(h,m.name)}function c(m){var x=m.name,y=x.split("-")[0],T=m.dictionary,h=m.format,E=T&&Object.keys(T).length,k=h&&Object.keys(h).length,L=O.localeRegistry,P=L[x];if(P||(L[x]=P={}),y!==x){var I=L[y];I||(L[y]=I={}),E&&I.dictionary===P.dictionary&&(I.dictionary=T),k&&I.format===P.format&&(I.format=h)}E&&(P.dictionary=T),k&&(P.format=h)}function g(m){if(m.layoutAttributes){var x=m.layoutAttributes._arrayAttrRegexps;if(x)for(var y=0;y<x.length;y++)o(O.layoutArrayRegexes,x[y])}}function f(m,x){var y=O.componentsRegistry[m].schema;if(y&&y.traces){var T=y.traces[x];T&&r(O.modules[x]._module.attributes,T)}}function b(m,x){var y=O.componentsRegistry[m].schema;if(y&&y.transforms){var T=y.transforms[x];T&&r(O.transformsRegistry[x].attributes,T)}}function v(m,x){var y=O.componentsRegistry[m].schema;if(y&&y.subplots){var T=O.subplotsRegistry[x],h=T.layoutAttributes,E=T.attr==="subplot"?T.name:T.attr;Array.isArray(E)&&(E=E[0]);var k=y.subplots[E];h&&k&&r(h,k)}}function d(m){return typeof m=="object"&&(m=m.type),m}O.modules={},O.allCategories={},O.allTypes=[],O.subplotsRegistry={},O.transformsRegistry={},O.componentsRegistry={},O.layoutArrayContainers=[],O.layoutArrayRegexes=[],O.traceLayoutAttributes={},O.localeRegistry={},O.apiMethodRegistry={},O.collectableSubplotTypes=null,O.register=function(m){if(O.collectableSubplotTypes=null,!m)throw new Error("No argument passed to Plotly.register.");m&&!Array.isArray(m)&&(m=[m]);for(var x=0;x<m.length;x++){var y=m[x];if(!y)throw new Error("Invalid module was attempted to be registered!");switch(y.moduleType){case"trace":i(y);break;case"transform":u(y);break;case"component":l(y);break;case"locale":c(y);break;case"apiMethod":var T=y.name;O.apiMethodRegistry[T]=y.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},O.getModule=function(m){var x=O.modules[d(m)];return!!x&&x._module},O.traceIs=function(m,x){if((m=d(m))==="various")return!1;var y=O.modules[m];return y||(m&&M.log("Unrecognized trace type "+m+"."),y=O.modules[s.type.dflt]),!!y.categories[x]},O.getTransformIndices=function(m,x){for(var y=[],T=m.transforms||[],h=0;h<T.length;h++)T[h].type===x&&y.push(h);return y},O.hasTransform=function(m,x){for(var y=m.transforms||[],T=0;T<y.length;T++)if(y[T].type===x)return!0;return!1},O.getComponentMethod=function(m,x){var y=O.componentsRegistry[m];return y&&y[x]||A},O.call=function(){var m=arguments[0],x=[].slice.call(arguments,1);return O.apiMethodRegistry[m].apply(null,x)}},91536:function(Y,O,e){var M=e(24040),A=e(3400),o=A.extendFlat,w=A.extendDeep;function _(p){var s;switch(p){case"themes__thumb":s={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":s={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:s={}}return s}Y.exports=function(p,s){var n,a,r=p.data,i=p.layout,l=w([],r),u=w({},i,_(s.tileClass)),c=p._context||{};if(s.width&&(u.width=s.width),s.height&&(u.height=s.height),s.tileClass==="thumbnail"||s.tileClass==="themes__thumb"){u.annotations=[];var g=Object.keys(u);for(n=0;n<g.length;n++)a=g[n],["xaxis","yaxis","zaxis"].indexOf(a.slice(0,5))>-1&&(u[g[n]].title={text:""});for(n=0;n<l.length;n++){var f=l[n];f.showscale=!1,f.marker&&(f.marker.showscale=!1),M.traceIs(f,"pie-like")&&(f.textposition="none")}}if(Array.isArray(s.annotations))for(n=0;n<s.annotations.length;n++)u.annotations.push(s.annotations[n]);var b=Object.keys(u).filter(function(y){return y.match(/^scene\d*$/)});if(b.length){var v={};for(s.tileClass==="thumbnail"&&(v={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),n=0;n<b.length;n++){var d=u[b[n]];d.xaxis||(d.xaxis={}),d.yaxis||(d.yaxis={}),d.zaxis||(d.zaxis={}),o(d.xaxis,v),o(d.yaxis,v),o(d.zaxis,v),d._scene=null}}var m=document.createElement("div");s.tileClass&&(m.className=s.tileClass);var x={gd:m,td:m,layout:u,data:l,config:{staticPlot:s.staticPlot===void 0||s.staticPlot,plotGlPixelRatio:s.plotGlPixelRatio===void 0?2:s.plotGlPixelRatio,displaylogo:s.displaylogo||!1,showLink:s.showLink||!1,showTips:s.showTips||!1,mapboxAccessToken:c.mapboxAccessToken}};return s.setBackground!=="transparent"&&(x.config.setBackground=s.setBackground||"opaque"),x.gd.defaultLayout=_(s.tileClass),x}},39792:function(Y,O,e){var M=e(3400),A=e(67024),o=e(48616),w=e(81792);Y.exports=function(_,p){var s;return M.isPlainObject(_)||(s=M.getGraphDiv(_)),(p=p||{}).format=p.format||"png",p.width=p.width||null,p.height=p.height||null,p.imageDataOnly=!0,new Promise(function(n,a){s&&s._snapshotInProgress&&a(new Error("Snapshotting already in progress.")),M.isIE()&&p.format!=="svg"&&a(new Error(w.MSG_IE_BAD_FORMAT)),s&&(s._snapshotInProgress=!0);var r=A(_,p),i=p.filename||_.fn||"newplot";i+="."+p.format.replace("-","."),r.then(function(l){return s&&(s._snapshotInProgress=!1),o(l,i,p.format)}).then(function(l){n(l)}).catch(function(l){s&&(s._snapshotInProgress=!1),a(l)})})}},48616:function(Y,O,e){var M=e(3400),A=e(81792);Y.exports=function(o,w,_){var p=document.createElement("a"),s="download"in p;return new Promise(function(n,a){var r,i;if(M.isIE())return r=A.createBlob(o,"svg"),window.navigator.msSaveBlob(r,w),r=null,n(w);if(s)return r=A.createBlob(o,_),i=A.createObjectURL(r),p.href=i,p.download=w,document.body.appendChild(p),p.click(),document.body.removeChild(p),A.revokeObjectURL(i),r=null,n(w);if(M.isSafari()){var l=_==="svg"?",":";base64,";return A.octetStream(l+encodeURIComponent(o)),n(w)}a(new Error("download error"))})}},81792:function(Y,O,e){var M=e(24040);O.getDelay=function(o){return o._has&&(o._has("gl3d")||o._has("gl2d")||o._has("mapbox"))?500:0},O.getRedrawFunc=function(o){return function(){M.getComponentMethod("colorbar","draw")(o)}},O.encodeSVG=function(o){return"data:image/svg+xml,"+encodeURIComponent(o)},O.encodeJSON=function(o){return"data:application/json,"+encodeURIComponent(o)};var A=window.URL||window.webkitURL;O.createObjectURL=function(o){return A.createObjectURL(o)},O.revokeObjectURL=function(o){return A.revokeObjectURL(o)},O.createBlob=function(o,w){if(w==="svg")return new window.Blob([o],{type:"image/svg+xml;charset=utf-8"});if(w==="full-json")return new window.Blob([o],{type:"application/json;charset=utf-8"});var _=function(p){for(var s=p.length,n=new ArrayBuffer(s),a=new Uint8Array(n),r=0;r<s;r++)a[r]=p.charCodeAt(r);return n}(window.atob(o));return new window.Blob([_],{type:"image/"+w})},O.octetStream=function(o){document.location.href="data:application/octet-stream"+o},O.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,O.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},78904:function(Y,O,e){var M=e(81792),A={getDelay:M.getDelay,getRedrawFunc:M.getRedrawFunc,clone:e(91536),toSVG:e(37164),svgToImg:e(63268),toImage:e(61808),downloadImage:e(39792)};Y.exports=A},63268:function(Y,O,e){var M=e(3400),A=e(61252).EventEmitter,o=e(81792);Y.exports=function(w){var _=w.emitter||new A,p=new Promise(function(s,n){var a=window.Image,r=w.svg,i=w.format||"png";if(M.isIE()&&i!=="svg"){var l=new Error(o.MSG_IE_BAD_FORMAT);return n(l),w.promise?p:_.emit("error",l)}var u,c,g=w.canvas,f=w.scale||1,b=w.width||300,v=w.height||150,d=f*b,m=f*v,x=g.getContext("2d",{willReadFrequently:!0}),y=new a;i==="svg"||M.isSafari()?c=o.encodeSVG(r):(u=o.createBlob(r,"svg"),c=o.createObjectURL(u)),g.width=d,g.height=m,y.onload=function(){var T;switch(u=null,o.revokeObjectURL(c),i!=="svg"&&x.drawImage(y,0,0,d,m),i){case"jpeg":T=g.toDataURL("image/jpeg");break;case"png":T=g.toDataURL("image/png");break;case"webp":T=g.toDataURL("image/webp");break;case"svg":T=c;break;default:var h="Image format is not jpeg, png, svg or webp.";if(n(new Error(h)),!w.promise)return _.emit("error",h)}s(T),w.promise||_.emit("success",T)},y.onerror=function(T){if(u=null,o.revokeObjectURL(c),n(T),!w.promise)return _.emit("error",T)},y.src=c});return w.promise?p:_}},61808:function(Y,O,e){var M=e(61252).EventEmitter,A=e(24040),o=e(3400),w=e(81792),_=e(91536),p=e(37164),s=e(63268);Y.exports=function(n,a){var r=new M,i=_(n,{format:"png"}),l=i.gd;l.style.position="absolute",l.style.left="-5000px",document.body.appendChild(l);var u=w.getRedrawFunc(l);return A.call("_doPlot",l,i.data,i.layout,i.config).then(u).then(function(){var c=w.getDelay(l._fullLayout);setTimeout(function(){var g=p(l),f=document.createElement("canvas");f.id=o.randstr(),(r=s({format:a.format,width:l._fullLayout.width,height:l._fullLayout.height,canvas:f,emitter:r,svg:g})).clean=function(){l&&document.body.removeChild(l)}},c)}).catch(function(c){r.emit("error",c)}),r}},37164:function(Y,O,e){var M=e(33428),A=e(3400),o=e(43616),w=e(76308),_=e(9616),p=/"/g,s="TOBESTRIPPED",n=new RegExp('("'+s+")|("+s+'")',"g");Y.exports=function(a,r,i){var l,u=a._fullLayout,c=u._paper,g=u._toppaper,f=u.width,b=u.height;c.insert("rect",":first-child").call(o.setRect,0,0,f,b).call(w.fill,u.paper_bgcolor);var v=u._basePlotModules||[];for(l=0;l<v.length;l++){var d=v[l];d.toSVG&&d.toSVG(a)}if(g){var m=g.node().childNodes,x=Array.prototype.slice.call(m);for(l=0;l<x.length;l++){var y=x[l];y.childNodes.length&&c.node().appendChild(y)}}u._draggers&&u._draggers.remove(),c.node().style.background="",c.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var h=M.select(this);if(this.style.visibility!=="hidden"&&this.style.display!=="none"){h.style({visibility:null,display:null});var E=this.style.fontFamily;E&&E.indexOf('"')!==-1&&h.style("font-family",E.replace(p,s))}else h.remove()}),c.selectAll(".gradient_filled,.pattern_filled").each(function(){var h=M.select(this),E=this.style.fill;E&&E.indexOf("url(")!==-1&&h.style("fill",E.replace(p,s));var k=this.style.stroke;k&&k.indexOf("url(")!==-1&&h.style("stroke",k.replace(p,s))}),r!=="pdf"&&r!=="eps"||c.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),c.node().setAttributeNS(_.xmlns,"xmlns",_.svg),c.node().setAttributeNS(_.xmlns,"xmlns:xlink",_.xlink),r==="svg"&&i&&(c.attr("width",i*f),c.attr("height",i*b),c.attr("viewBox","0 0 "+f+" "+b));var T=new window.XMLSerializer().serializeToString(c.node());return T=(T=(T=function(h){var E=M.select("body").append("div").style({display:"none"}).html(""),k=h.replace(/(&[^;]*;)/gi,function(L){return L==="&lt;"?"&#60;":L==="&rt;"?"&#62;":L.indexOf("<")!==-1||L.indexOf(">")!==-1?"":E.html(L).text()});return E.remove(),k}(T)).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(n,"'"),A.isIE()&&(T=(T=(T=T.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),T}},84664:function(Y,O,e){var M=e(3400);Y.exports=function(A,o){for(var w=0;w<A.length;w++)A[w].i=w;M.mergeArray(o.text,A,"tx"),M.mergeArray(o.hovertext,A,"htx");var _=o.marker;if(_){M.mergeArray(_.opacity,A,"mo",!0),M.mergeArray(_.color,A,"mc");var p=_.line;p&&(M.mergeArray(p.color,A,"mlc"),M.mergeArrayCastPositive(p.width,A,"mlw"))}}},20832:function(Y,O,e){var M=e(52904),A=e(29736).axisHoverFormat,o=e(21776).Ks,w=e(21776).Gw,_=e(49084),p=e(25376),s=e(78048),n=e(98192).c,a=e(92880).extendFlat,r=p({editType:"calc",arrayOk:!0,colorEditType:"style"}),i=a({},M.marker.line.width,{dflt:0}),l=a({width:i,editType:"calc"},_("marker.line")),u=a({line:l,editType:"calc"},_("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:n,cornerradius:{valType:"any",editType:"calc"}});Y.exports={x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:A("x"),yhoverformat:A("y"),text:M.text,texttemplate:w({editType:"plot"},{keys:s.eventDataKeys}),hovertext:M.hovertext,hovertemplate:o({},{keys:s.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:a({},r,{}),insidetextfont:a({},r,{}),outsidetextfont:a({},r,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:a({},M.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:u,offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:{marker:{opacity:M.selected.marker.opacity,color:M.selected.marker.color,editType:"style"},textfont:M.selected.textfont,editType:"style"},unselected:{marker:{opacity:M.unselected.marker.opacity,color:M.unselected.marker.color,editType:"style"},textfont:M.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},71820:function(Y,O,e){var M=e(54460),A=e(1220),o=e(94288).hasColorscale,w=e(47128),_=e(84664),p=e(4500);Y.exports=function(s,n){var a,r,i,l,u,c,g=M.getFromId(s,n.xaxis||"x"),f=M.getFromId(s,n.yaxis||"y"),b={msUTC:!(!n.base&&n.base!==0)};n.orientation==="h"?(a=g.makeCalcdata(n,"x",b),i=f.makeCalcdata(n,"y"),l=A(n,f,"y",i),u=!!n.yperiodalignment,c="y"):(a=f.makeCalcdata(n,"y",b),i=g.makeCalcdata(n,"x"),l=A(n,g,"x",i),u=!!n.xperiodalignment,c="x"),r=l.vals;for(var v=Math.min(r.length,a.length),d=new Array(v),m=0;m<v;m++)d[m]={p:r[m],s:a[m]},u&&(d[m].orig_p=i[m],d[m][c+"End"]=l.ends[m],d[m][c+"Start"]=l.starts[m]),n.ids&&(d[m].id=String(n.ids[m]));return o(n,"marker")&&w(s,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),o(n,"marker.line")&&w(s,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}),_(d,n),p(d,n),d}},78048:function(Y){Y.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},96376:function(Y,O,e){var M=e(38248),A=e(3400).isArrayOrTypedArray,o=e(39032).BADNUM,w=e(24040),_=e(54460),p=e(71888).getAxisGroup,s=e(72592);function n(v,d,m,x,y){if(x.length){var T,h,E,k;switch(function(L,P){var I,z;for(I=0;I<P.length;I++){var F,U=P[I],R=U[0].trace,j=R.type==="funnel"?R._base:R.base,Z=R.orientation==="h"?R.xcalendar:R.ycalendar,B=L.type==="category"||L.type==="multicategory"?function(){return null}:L.d2c;if(A(j)){for(z=0;z<Math.min(j.length,U.length);z++)F=B(j[z],0,Z),M(F)?(U[z].b=+F,U[z].hasB=1):U[z].b=0;for(;z<U.length;z++)U[z].b=0}else{F=B(j,0,Z);var q=M(F);for(F=q?F:0,z=0;z<U.length;z++)U[z].b=F,q&&(U[z].hasB=1)}}}(m,x),y.mode){case"overlay":a(d,m,x,y);break;case"group":for(T=[],h=[],E=0;E<x.length;E++)(k=x[E])[0].trace.offset===void 0?h.push(k):T.push(k);h.length&&function(L,P,I,z,F){var U=new s(z,{posAxis:P,sepNegVal:!1,overlapNoMerge:!F.norm});(function(R,j,Z,B){for(var q=R._fullLayout,V=Z.positions,ne=Z.distinctPositions,ee=Z.minDiff,$=Z.traces,J=$.length,K=V.length!==ne.length,te=ee*(1-B.gap),ie=p(q,j._id)+$[0][0].trace.orientation,ae=q._alignmentOpts[ie]||{},se=0;se<J;se++){var ce,de,ge=$[se],ve=ge[0].trace,be=ae[ve.alignmentgroup]||{},me=Object.keys(be.offsetGroups||{}).length,Se=(ce=me?te/me:K?te/J:te)*(1-(B.groupgap||0));de=me?((2*ve._offsetIndex+1-me)*ce-Se)/2:K?((2*se+1-J)*ce-Se)/2:-Se/2;var we=ge[0].t;we.barwidth=Se,we.poffset=de,we.bargroupwidth=te,we.bardelta=ee}Z.binWidth=$[0][0].t.barwidth/100,i(Z),l(j,Z),u(j,Z,K)})(L,P,U,F),function(R,j){for(var Z=R.traces,B=0;B<Z.length;B++){var q=Z[B];if(q[0].trace.base===void 0)for(var V=new s([q],{posAxis:j,sepNegVal:!0,overlapNoMerge:!0}),ne=0;ne<q.length;ne++){var ee=q[ne];if(ee.p!==o){var $=V.put(ee.p,ee.b+ee.s);$&&(ee.b=$)}}}}(U,P),F.norm?(g(U),f(I,U,F)):c(I,U)}(v,d,m,h,y),T.length&&a(d,m,T,y);break;case"stack":case"relative":for(T=[],h=[],E=0;E<x.length;E++)(k=x[E])[0].trace.base===void 0?h.push(k):T.push(k);(function(L){if(!(L.length<2)){var P,I,z,F,U,R;for(P=0;P<L.length&&(F=(I=L[P][0].trace).marker?I.marker.cornerradius:void 0)===void 0;P++);if(F!==void 0)for(U=M(F)?+F:+F.slice(0,-1),R=M(F)?"px":"%",P=0;P<L.length;P++)(z=L[P][0].t).cornerradiusvalue=U,z.cornerradiusform=R}})(h),h.length&&function(L,P,I,z,F){var U=new s(z,{posAxis:P,sepNegVal:F.mode==="relative",overlapNoMerge:!(F.norm||F.mode==="stack"||F.mode==="relative")});r(P,U,F),function(q,V,ne){var ee,$,J,K,te,ie,ae=b(q),se=V.traces;for(K=0;K<se.length;K++)if(($=(ee=se[K])[0].trace).type==="funnel")for(te=0;te<ee.length;te++)(ie=ee[te]).s!==o&&V.put(ie.p,-.5*ie.s);for(K=0;K<se.length;K++){J=($=(ee=se[K])[0].trace).type==="funnel";var ce=[];for(te=0;te<ee.length;te++)if((ie=ee[te]).s!==o){var de;de=J?ie.s:ie.s+ie.b;var ge=V.put(ie.p,de),ve=ge+de;ie.b=ge,ie[ae]=ve,ne.norm||(ce.push(ve),ie.hasB&&ce.push(ge))}ne.norm||($._extremes[q._id]=_.findExtremes(q,ce,{tozero:!0,padded:!0}))}}(I,U,F);for(var R=0;R<z.length;R++)for(var j=z[R],Z=0;Z<j.length;Z++){var B=j[Z];B.s!==o&&B.b+B.s===U.get(B.p,B.s)&&(B._outmost=!0)}F.norm&&f(I,U,F)}(0,d,m,h,y),T.length&&a(d,m,T,y)}(function(L){var P,I,z,F,U,R,j;for(P=0;P<L.length;P++)z=(I=L[P])[0].trace,(F=I[0].t).cornerradiusvalue===void 0&&(U=z.marker?z.marker.cornerradius:void 0)!==void 0&&(R=M(U)?+U:+U.slice(0,-1),j=M(U)?"px":"%",F.cornerradiusvalue=R,F.cornerradiusform=j)})(x),function(L,P){var I,z,F,U=b(P),R={},j=1/0,Z=-1/0;for(I=0;I<L.length;I++)for(F=L[I],z=0;z<F.length;z++){var B=F[z].p;M(B)&&(j=Math.min(j,B),Z=Math.max(Z,B))}var q=1e4/(Z-j),V=R.round=function(ve){return String(Math.round(q*(ve-j)))},ne={},ee={},$=L.some(function(ve){var be=ve[0].trace;return"marker"in be&&be.marker.cornerradius});for(I=0;I<L.length;I++){(F=L[I])[0].t.extents=R;var J=F[0].t.poffset,K=A(J);for(z=0;z<F.length;z++){var te=F[z],ie=te[U]-te.w/2;if(M(ie)){var ae=te[U]+te.w/2,se=V(te.p);R[se]?R[se]=[Math.min(ie,R[se][0]),Math.max(ae,R[se][1])]:R[se]=[ie,ae]}if(te.p0=te.p+(K?J[z]:J),te.p1=te.p0+te.w,te.s0=te.b,te.s1=te.s0+te.s,$){var ce=Math.min(te.s0,te.s1)||0,de=Math.max(te.s0,te.s1)||0,ge=te[U];ne[ge]=ge in ne?Math.min(ne[ge],ce):ce,ee[ge]=ge in ee?Math.max(ee[ge],de):de}}}$&&function(ve,be,me,Se){for(var we=b(Se),_e=0;_e<ve.length;_e++)for(var oe=ve[_e],le=0;le<oe.length;le++){var pe=oe[le],Ee=pe[we];pe._sMin=be[Ee],pe._sMax=me[Ee]}}(L,ne,ee,P)}(x,d)}}function a(v,d,m,x){for(var y=0;y<m.length;y++){var T=m[y],h=new s([T],{posAxis:v,sepNegVal:!1,overlapNoMerge:!x.norm});r(v,h,x),x.norm?(g(h),f(d,h,x)):c(d,h)}}function r(v,d,m){for(var x=d.minDiff,y=d.traces,T=x*(1-m.gap),h=T*(1-(m.groupgap||0)),E=-h/2,k=0;k<y.length;k++){var L=y[k][0].t;L.barwidth=h,L.poffset=E,L.bargroupwidth=T,L.bardelta=x}d.binWidth=y[0][0].t.barwidth/100,i(d),l(v,d),u(v,d)}function i(v){var d,m,x=v.traces;for(d=0;d<x.length;d++){var y,T=x[d],h=T[0],E=h.trace,k=h.t,L=E._offset||E.offset,P=k.poffset;if(A(L)){for(y=Array.prototype.slice.call(L,0,T.length),m=0;m<y.length;m++)M(y[m])||(y[m]=P);for(m=y.length;m<T.length;m++)y.push(P);k.poffset=y}else L!==void 0&&(k.poffset=L);var I=E._width||E.width,z=k.barwidth;if(A(I)){var F=Array.prototype.slice.call(I,0,T.length);for(m=0;m<F.length;m++)M(F[m])||(F[m]=z);for(m=F.length;m<T.length;m++)F.push(z);if(k.barwidth=F,L===void 0){for(y=[],m=0;m<T.length;m++)y.push(P+(z-F[m])/2);k.poffset=y}}else I!==void 0&&(k.barwidth=I,L===void 0&&(k.poffset=P+(z-I)/2))}}function l(v,d){for(var m=d.traces,x=b(v),y=0;y<m.length;y++)for(var T=m[y],h=T[0].t,E=h.poffset,k=A(E),L=h.barwidth,P=A(L),I=0;I<T.length;I++){var z=T[I],F=z.w=P?L[I]:L;z.p===void 0&&(z.p=z[x],z["orig_"+x]=z[x]);var U=(k?E[I]:E)+F/2;z[x]=z.p+U}}function u(v,d,m){var x=d.traces,y=d.minDiff/2;_.minDtick(v,d.minDiff,d.distinctPositions[0],m);for(var T=0;T<x.length;T++){var h,E,k,L,P=x[T],I=P[0],z=I.trace,F=[];for(L=0;L<P.length;L++)E=(h=P[L]).p-y,k=h.p+y,F.push(E,k);if(z.width||z.offset){var U=I.t,R=U.poffset,j=U.barwidth,Z=A(R),B=A(j);for(L=0;L<P.length;L++){h=P[L];var q=Z?R[L]:R,V=B?j[L]:j;k=(E=h.p+q)+V,F.push(E,k)}}z._extremes[v._id]=_.findExtremes(v,F,{padded:!1})}}function c(v,d){for(var m=d.traces,x=b(v),y=0;y<m.length;y++){for(var T=m[y],h=T[0].trace,E=h.type==="scatter",k=h.orientation==="v",L=[],P=!1,I=0;I<T.length;I++){var z=T[I],F=E?0:z.b,U=E?k?z.y:z.x:F+z.s;z[x]=U,L.push(U),z.hasB&&L.push(F),z.hasB&&z.b||(P=!0)}h._extremes[v._id]=_.findExtremes(v,L,{tozero:P,padded:!0})}}function g(v){for(var d=v.traces,m=0;m<d.length;m++)for(var x=d[m],y=0;y<x.length;y++){var T=x[y];T.s!==o&&v.put(T.p,T.b+T.s)}}function f(v,d,m){var x=d.traces,y=b(v),T=m.norm==="fraction"?1:100,h=T/1e9,E=v.l2c(v.c2l(0)),k=m.mode==="stack"?T:E;function L(ne){return M(v.c2l(ne))&&(ne<E-h||ne>k+h||!M(E))}for(var P=0;P<x.length;P++){for(var I=x[P],z=I[0].trace,F=[],U=!1,R=!1,j=0;j<I.length;j++){var Z=I[j];if(Z.s!==o){var B=Math.abs(T/d.get(Z.p,Z.s));Z.b*=B,Z.s*=B;var q=Z.b,V=q+Z.s;Z[y]=V,F.push(V),R=R||L(V),Z.hasB&&(F.push(q),R=R||L(q)),Z.hasB&&Z.b||(U=!0)}}z._extremes[v._id]=_.findExtremes(v,F,{tozero:U,padded:R})}}function b(v){return v._id.charAt(0)}Y.exports={crossTraceCalc:function(v,d){for(var m=d.xaxis,x=d.yaxis,y=v._fullLayout,T=v._fullData,h=v.calcdata,E=[],k=[],L=0;L<T.length;L++){var P=T[L];if(P.visible===!0&&w.traceIs(P,"bar")&&P.xaxis===m._id&&P.yaxis===x._id&&(P.orientation==="h"?E.push(h[L]):k.push(h[L]),P._computePh))for(var I=v.calcdata[L],z=0;z<I.length;z++)typeof I[z].ph0=="function"&&(I[z].ph0=I[z].ph0()),typeof I[z].ph1=="function"&&(I[z].ph1=I[z].ph1())}var F={xCat:m.type==="category"||m.type==="multicategory",yCat:x.type==="category"||x.type==="multicategory",mode:y.barmode,norm:y.barnorm,gap:y.bargap,groupgap:y.bargroupgap};n(v,m,x,k,F),n(v,x,m,E,F)},setGroupPositions:n}},31508:function(Y,O,e){var M=e(38248),A=e(3400),o=e(76308),w=e(24040),_=e(43980),p=e(31147),s=e(55592),n=e(20011),a=e(20832),r=A.coerceFont;function i(u){if(M(u)){if((u=+u)>=0)return u}else if(typeof u=="string"&&(u=u.trim()).slice(-1)==="%"&&M(u.slice(0,-1))&&(u=+u.slice(0,-1))>=0)return u+"%"}function l(u,c,g,f,b,v){var d=(v=v||{}).moduleHasSelected!==!1,m=v.moduleHasUnselected!==!1,x=v.moduleHasConstrain!==!1,y=v.moduleHasCliponaxis!==!1,T=v.moduleHasTextangle!==!1,h=v.moduleHasInsideanchor!==!1,E=!!v.hasPathbar,k=Array.isArray(b)||b==="auto",L=k||b==="inside",P=k||b==="outside";if(L||P){var I=r(f,"textfont",g.font),z=A.extendFlat({},I),F=!(u.textfont&&u.textfont.color);if(F&&delete z.color,r(f,"insidetextfont",z),E){var U=A.extendFlat({},I);F&&delete U.color,r(f,"pathbar.textfont",U)}P&&r(f,"outsidetextfont",I),d&&f("selected.textfont.color"),m&&f("unselected.textfont.color"),x&&f("constraintext"),y&&f("cliponaxis"),T&&f("textangle"),f("texttemplate")}L&&h&&f("insidetextanchor")}Y.exports={supplyDefaults:function(u,c,g,f){function b(x,y){return A.coerce(u,c,a,x,y)}if(_(u,c,f,b)){p(u,c,f,b),b("xhoverformat"),b("yhoverformat"),b("orientation",c.x&&!c.y?"h":"v"),b("base"),b("offset"),b("width"),b("text"),b("hovertext"),b("hovertemplate");var v=b("textposition");l(u,0,f,b,v,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s(u,c,b,g,f);var d=(c.marker.line||{}).color,m=w.getComponentMethod("errorbars","supplyDefaults");m(u,c,d||o.defaultLine,{axis:"y"}),m(u,c,d||o.defaultLine,{axis:"x",inherit:"y"}),A.coerceSelectionMarkerOpacity(c,b)}else c.visible=!1},crossTraceDefaults:function(u,c){var g,f;function b(m,x){return A.coerce(f._input,f,a,m,x)}for(var v=0;v<u.length;v++)if((f=u[v]).type==="bar"){g=f._input;var d=b("marker.cornerradius",c.barcornerradius);f.marker&&(f.marker.cornerradius=i(d)),c.barmode==="group"&&n(g,f,c,b)}},handleText:l,validateCornerradius:i}},52160:function(Y){Y.exports=function(O,e,M){return O.x="xVal"in e?e.xVal:e.x,O.y="yVal"in e?e.yVal:e.y,e.xa&&(O.xaxis=e.xa),e.ya&&(O.yaxis=e.ya),M.orientation==="h"?(O.label=O.y,O.value=O.x):(O.label=O.x,O.value=O.y),O}},60444:function(Y,O,e){var M=e(38248),A=e(49760),o=e(3400).isArrayOrTypedArray;O.coerceString=function(w,_,p){if(typeof _=="string"){if(_||!w.noBlank)return _}else if((typeof _=="number"||_===!0)&&!w.strict)return String(_);return p!==void 0?p:w.dflt},O.coerceNumber=function(w,_,p){if(M(_)){_=+_;var s=w.min,n=w.max;if(!(s!==void 0&&_<s||n!==void 0&&_>n))return _}return p!==void 0?p:w.dflt},O.coerceColor=function(w,_,p){return A(_).isValid()?_:p!==void 0?p:w.dflt},O.coerceEnumerated=function(w,_,p){return w.coerceNumber&&(_=+_),w.values.indexOf(_)!==-1?_:p!==void 0?p:w.dflt},O.getValue=function(w,_){var p;return o(w)?_<w.length&&(p=w[_]):p=w,p},O.getLineWidth=function(w,_){return 0<_.mlw?_.mlw:o(w.marker.line.width)?0:w.marker.line.width}},63400:function(Y,O,e){var M=e(93024),A=e(24040),o=e(76308),w=e(3400).fillText,_=e(60444).getLineWidth,p=e(54460).hoverLabelText,s=e(39032).BADNUM;function n(r,i,l,u,c){var g,f,b,v,d,m,x,y=r.cd,T=y[0].trace,h=y[0].t,E=u==="closest",k=T.type==="waterfall",L=r.maxHoverDistance,P=r.maxSpikeDistance;T.orientation==="h"?(g=l,f=i,b="y",v="x",d=ee,m=V):(g=i,f=l,b="x",v="y",m=ee,d=V);var I=T[b+"period"],z=E||I;function F(ce){return R(ce,-1)}function U(ce){return R(ce,1)}function R(ce,de){var ge=ce.w;return ce[b]+de*ge/2}function j(ce){return ce[b+"End"]-ce[b+"Start"]}var Z=E?F:I?function(ce){return ce.p-j(ce)/2}:function(ce){return Math.min(F(ce),ce.p-h.bardelta/2)},B=E?U:I?function(ce){return ce.p+j(ce)/2}:function(ce){return Math.max(U(ce),ce.p+h.bardelta/2)};function q(ce,de,ge){return c.finiteRange&&(ge=0),M.inbox(ce-g,de-g,ge+Math.min(1,Math.abs(de-ce)/x)-1)}function V(ce){return q(Z(ce),B(ce),L)}function ne(ce){var de=ce[v];if(k){var ge=Math.abs(ce.rawS)||0;f>0?de+=ge:f<0&&(de-=ge)}return de}function ee(ce){var de=f,ge=ce.b,ve=ne(ce);return M.inbox(ge-de,ve-de,L+(ve-de)/(ve-ge)-1)}var $=r[b+"a"],J=r[v+"a"];x=Math.abs($.r2c($.range[1])-$.r2c($.range[0]));var K=M.getDistanceFunction(u,d,m,function(ce){return(d(ce)+m(ce))/2});if(M.getClosest(y,K,r),r.index!==!1&&y[r.index].p!==s){z||(Z=function(ce){return Math.min(F(ce),ce.p-h.bargroupwidth/2)},B=function(ce){return Math.max(U(ce),ce.p+h.bargroupwidth/2)});var te=y[r.index],ie=T.base?te.b+te.s:te.s;r[v+"0"]=r[v+"1"]=J.c2p(te[v],!0),r[v+"LabelVal"]=ie;var ae=h.extents[h.extents.round(te.p)];r[b+"0"]=$.c2p(E?Z(te):ae[0],!0),r[b+"1"]=$.c2p(E?B(te):ae[1],!0);var se=te.orig_p!==void 0;return r[b+"LabelVal"]=se?te.orig_p:te.p,r.labelLabel=p($,r[b+"LabelVal"],T[b+"hoverformat"]),r.valueLabel=p(J,r[v+"LabelVal"],T[v+"hoverformat"]),r.baseLabel=p(J,te.b,T[v+"hoverformat"]),r.spikeDistance=(function(ce){var de=f,ge=ce.b,ve=ne(ce);return M.inbox(ge-de,ve-de,P+(ve-de)/(ve-ge)-1)}(te)+function(ce){return q(F(ce),U(ce),P)}(te))/2,r[b+"Spike"]=$.c2p(te.p,!0),w(te,T,r),r.hovertemplate=T.hovertemplate,r}}function a(r,i){var l=i.mcc||r.marker.color,u=i.mlcc||r.marker.line.color,c=_(r,i);return o.opacity(l)?l:o.opacity(u)&&c?u:void 0}Y.exports={hoverPoints:function(r,i,l,u,c){var g=n(r,i,l,u,c);if(g){var f=g.cd,b=f[0].trace,v=f[g.index];return g.color=a(b,v),A.getComponentMethod("errorbars","hoverInfo")(v,b,g),[g]}},hoverOnBars:n,getTraceColor:a}},51132:function(Y,O,e){Y.exports={attributes:e(20832),layoutAttributes:e(39324),supplyDefaults:e(31508).supplyDefaults,crossTraceDefaults:e(31508).crossTraceDefaults,supplyLayoutDefaults:e(37156),calc:e(71820),crossTraceCalc:e(96376).crossTraceCalc,colorbar:e(5528),arraysToCalcdata:e(84664),plot:e(98184).plot,style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,hoverPoints:e(63400).hoverPoints,eventData:e(52160),selectPoints:e(45784),moduleType:"trace",name:"bar",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},39324:function(Y){Y.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}},37156:function(Y,O,e){var M=e(24040),A=e(54460),o=e(3400),w=e(39324),_=e(31508).validateCornerradius;Y.exports=function(p,s,n){function a(d,m){return o.coerce(p,s,w,d,m)}for(var r=!1,i=!1,l=!1,u={},c=a("barmode"),g=0;g<n.length;g++){var f=n[g];if(M.traceIs(f,"bar")&&f.visible){if(r=!0,c==="group"){var b=f.xaxis+f.yaxis;u[b]&&(l=!0),u[b]=!0}f.visible&&f.type==="histogram"&&A.getFromId({_fullLayout:s},f[f.orientation==="v"?"xaxis":"yaxis"]).type!=="category"&&(i=!0)}}if(r){c!=="overlay"&&a("barnorm"),a("bargap",i&&!l?0:.2),a("bargroupgap");var v=a("barcornerradius");s.barcornerradius=_(v)}else delete s.barmode}},98184:function(Y,O,e){var M=e(33428),A=e(38248),o=e(3400),w=e(72736),_=e(76308),p=e(43616),s=e(24040),n=e(54460).tickText,a=e(82744),r=a.recordMinTextSize,i=a.clearMinTextSize,l=e(60100),u=e(60444),c=e(78048),g=e(20832),f=g.text,b=g.textposition,v=e(10624).appendArrayPointValue,d=c.TEXTPAD;function m(z){return z.id}function x(z){if(z.ids)return m}function y(z){return(z>0)-(z<0)}function T(z,F){return z<F?1:-1}function h(z,F,U,R){var j;return!F.uniformtext.mode&&E(U)?(R&&(j=R()),z.transition().duration(U.duration).ease(U.easing).each("end",function(){j&&j()}).each("interrupt",function(){j&&j()})):z}function E(z){return z&&z.duration>0}function k(z,F,U,R,j){return!(z<0||F<0)&&(U<=z&&R<=F||U<=F&&R<=z||(j?z>=U*(F/R):F>=R*(z/U)))}function L(z){return z==="auto"?0:z}function P(z,F){var U=Math.PI/180*F,R=Math.abs(Math.sin(U)),j=Math.abs(Math.cos(U));return{x:z.width*j+z.height*R,y:z.width*R+z.height*j}}function I(z,F,U,R,j,Z){var B=!!Z.isHorizontal,q=!!Z.constrained,V=Z.angle||0,ne=Z.anchor,ee=ne==="end",$=ne==="start",J=((Z.leftToRight||0)+1)/2,K=1-J,te=Z.hasB,ie=Z.r,ae=Z.overhead,se=j.width,ce=j.height,de=Math.abs(F-z),ge=Math.abs(R-U),ve=de>2*d&&ge>2*d?d:0;de-=2*ve,ge-=2*ve;var be=L(V);V!=="auto"||se<=de&&ce<=ge||!(se>de||ce>ge)||(se>ge||ce>de)&&se<ce==de<ge||(be+=90);var me,Se,we=P(j,be);if(ie&&ie-ae>d){var _e=function(he,xe,ke,ze,Re,Oe,Ve,qe,Je){var ot,rt,dt,_t,yt=Math.max(0,Math.abs(xe-he)-2*d),et=Math.max(0,Math.abs(ze-ke)-2*d),nt=Oe-d,At=Ve?nt-Math.sqrt(nt*nt-(nt-Ve)*(nt-Ve)):nt,Rt=Je?2*nt:qe?nt-Ve:2*At,Ft=Je?2*nt:qe?2*At:nt-Ve;return Re.y/Re.x>=et/(yt-Rt)?_t=et/Re.y:Re.y/Re.x<=(et-Ft)/yt?_t=yt/Re.x:!Je&&qe?(ot=Re.x*Re.x+Re.y*Re.y/4,dt=(yt-nt)*(yt-nt)+(et/2-nt)*(et/2-nt)-nt*nt,_t=(-(rt=-2*Re.x*(yt-nt)-Re.y*(et/2-nt))+Math.sqrt(rt*rt-4*ot*dt))/(2*ot)):Je?(ot=(Re.x*Re.x+Re.y*Re.y)/4,dt=(yt/2-nt)*(yt/2-nt)+(et/2-nt)*(et/2-nt)-nt*nt,_t=(-(rt=-Re.x*(yt/2-nt)-Re.y*(et/2-nt))+Math.sqrt(rt*rt-4*ot*dt))/(2*ot)):(ot=Re.x*Re.x/4+Re.y*Re.y,dt=(yt/2-nt)*(yt/2-nt)+(et-nt)*(et-nt)-nt*nt,_t=(-(rt=-Re.x*(yt/2-nt)-2*Re.y*(et-nt))+Math.sqrt(rt*rt-4*ot*dt))/(2*ot)),{scale:_t=Math.min(1,_t),pad:qe?Math.max(0,nt-Math.sqrt(Math.max(0,nt*nt-(nt-(et-Re.y*_t)/2)*(nt-(et-Re.y*_t)/2)))-Ve):Math.max(0,nt-Math.sqrt(Math.max(0,nt*nt-(nt-(yt-Re.x*_t)/2)*(nt-(yt-Re.x*_t)/2)))-Ve)}}(z,F,U,R,we,ie,ae,B,te);me=_e.scale,Se=_e.pad}else me=1,q&&(me=Math.min(1,de/we.x,ge/we.y)),Se=0;var oe=j.left*K+j.right*J,le=(j.top+j.bottom)/2,pe=(z+d)*K+(F-d)*J,Ee=(U+R)/2,Te=0,Me=0;if($||ee){var Le=(B?we.x:we.y)/2;ie&&(ee||te)&&(ve+=Se);var Ie=B?T(z,F):T(U,R);B?$?(pe=z+Ie*ve,Te=-Ie*Le):(pe=F-Ie*ve,Te=Ie*Le):$?(Ee=U+Ie*ve,Me=-Ie*Le):(Ee=R-Ie*ve,Me=Ie*Le)}return{textX:oe,textY:le,targetX:pe,targetY:Ee,anchorX:Te,anchorY:Me,scale:me,rotate:be}}Y.exports={plot:function(z,F,U,R,j,Z){var B=F.xaxis,q=F.yaxis,V=z._fullLayout,ne=z._context.staticPlot;j||(j={mode:V.barmode,norm:V.barmode,gap:V.bargap,groupgap:V.bargroupgap},i("bar",V));var ee=o.makeTraceGroups(R,U,"trace bars").each(function($){var J=M.select(this),K=$[0].trace,te=$[0].t,ie=K.type==="waterfall",ae=K.type==="funnel",se=K.type==="histogram",ce=K.type==="bar",de=ce||ae,ge=0;ie&&K.connector.visible&&K.connector.mode==="between"&&(ge=K.connector.line.width/2);var ve=K.orientation==="h",be=E(j),me=o.ensureSingle(J,"g","points"),Se=x(K),we=me.selectAll("g.point").data(o.identity,Se);we.enter().append("g").classed("point",!0),we.exit().remove(),we.each(function(oe,le){var pe,Ee,Te=M.select(this),Me=function(it,Fe,Be,at){var Ze=[],ht=[],vt=at?Fe:Be,mt=at?Be:Fe;return Ze[0]=vt.c2p(it.s0,!0),ht[0]=mt.c2p(it.p0,!0),Ze[1]=vt.c2p(it.s1,!0),ht[1]=mt.c2p(it.p1,!0),at?[Ze,ht]:[ht,Ze]}(oe,B,q,ve),Le=Me[0][0],Ie=Me[0][1],he=Me[1][0],xe=Me[1][1],ke=(ve?Ie-Le:xe-he)==0;if(ke&&de&&u.getLineWidth(K,oe)&&(ke=!1),ke||(ke=!(A(Le)&&A(Ie)&&A(he)&&A(xe))),oe.isBlank=ke,ke&&(ve?Ie=Le:xe=he),ge&&!ke&&(ve?(Le-=T(Le,Ie)*ge,Ie+=T(Le,Ie)*ge):(he-=T(he,xe)*ge,xe+=T(he,xe)*ge)),K.type==="waterfall"){if(!ke){var ze=K[oe.dir].marker;pe=ze.line.width,Ee=ze.color}}else pe=u.getLineWidth(K,oe),Ee=oe.mc||K.marker.color;function Re(it){var Fe=M.round(pe/2%1,2);return j.gap===0&&j.groupgap===0?M.round(Math.round(it)-Fe,2):it}var Oe=_.opacity(Ee)<1||pe>.01?Re:function(it,Fe,Be){return Be&&it===Fe?it:Math.abs(it-Fe)>=2?Re(it):it>Fe?Math.ceil(it):Math.floor(it)};z._context.staticPlot||(Le=Oe(Le,Ie,ve),Ie=Oe(Ie,Le,ve),he=Oe(he,xe,!ve),xe=Oe(xe,he,!ve));var Ve,qe=ve?B.c2p:q.c2p;Ve=oe.s0>0?oe._sMax:oe.s0<0?oe._sMin:oe.s1>0?oe._sMax:oe._sMin;var Je,ot,rt=ce||se?function(it,Fe){if(!it)return 0;var Be,at=Math.abs(ve?xe-he:Ie-Le),Ze=Math.abs(ve?Ie-Le:xe-he),ht=Oe(Math.abs(qe(Ve,!0)-qe(0,!0))),vt=oe.hasB?Math.min(at/2,Ze/2):Math.min(at/2,ht);return Be=Fe==="%"?at*(Math.min(50,it)/100):it,Oe(Math.max(Math.min(Be,vt),0))}(te.cornerradiusvalue,te.cornerradiusform):0,dt="M"+Le+","+he+"V"+xe+"H"+Ie+"V"+he+"Z",_t=0;if(rt&&oe.s){var yt=y(oe.s0)===0||y(oe.s)===y(oe.s0)?oe.s1:oe.s0;if((_t=Oe(oe.hasB?0:Math.abs(qe(Ve,!0)-qe(yt,!0))))<rt){var et=T(Le,Ie),nt=T(he,xe),At=et===-nt?1:0;if(ve)if(oe.hasB)Je="M"+(Le+rt*et)+","+he+"A "+rt+","+rt+" 0 0 "+At+" "+Le+","+(he+rt*nt)+"V"+(xe-rt*nt)+"A "+rt+","+rt+" 0 0 "+At+" "+(Le+rt*et)+","+xe+"H"+(Ie-rt*et)+"A "+rt+","+rt+" 0 0 "+At+" "+Ie+","+(xe-rt*nt)+"V"+(he+rt*nt)+"A "+rt+","+rt+" 0 0 "+At+" "+(Ie-rt*et)+","+he+"Z";else{var Rt=(ot=Math.abs(Ie-Le)+_t)<rt?rt-Math.sqrt(ot*(2*rt-ot)):0,Ft=_t>0?Math.sqrt(_t*(2*rt-_t)):0,It=et>0?Math.max:Math.min;Je="M"+Le+","+he+"V"+(xe-Rt*nt)+"H"+It(Ie-(rt-_t)*et,Le)+"A "+rt+","+rt+" 0 0 "+At+" "+Ie+","+(xe-rt*nt-Ft)+"V"+(he+rt*nt+Ft)+"A "+rt+","+rt+" 0 0 "+At+" "+It(Ie-(rt-_t)*et,Le)+","+(he+Rt*nt)+"Z"}else if(oe.hasB)Je="M"+(Le+rt*et)+","+he+"A "+rt+","+rt+" 0 0 "+At+" "+Le+","+(he+rt*nt)+"V"+(xe-rt*nt)+"A "+rt+","+rt+" 0 0 "+At+" "+(Le+rt*et)+","+xe+"H"+(Ie-rt*et)+"A "+rt+","+rt+" 0 0 "+At+" "+Ie+","+(xe-rt*nt)+"V"+(he+rt*nt)+"A "+rt+","+rt+" 0 0 "+At+" "+(Ie-rt*et)+","+he+"Z";else{var Ge=(ot=Math.abs(xe-he)+_t)<rt?rt-Math.sqrt(ot*(2*rt-ot)):0,Ye=_t>0?Math.sqrt(_t*(2*rt-_t)):0,Ne=nt>0?Math.max:Math.min;Je="M"+(Le+Ge*et)+","+he+"V"+Ne(xe-(rt-_t)*nt,he)+"A "+rt+","+rt+" 0 0 "+At+" "+(Le+rt*et-Ye)+","+xe+"H"+(Ie-rt*et+Ye)+"A "+rt+","+rt+" 0 0 "+At+" "+(Ie-Ge*et)+","+Ne(xe-(rt-_t)*nt,he)+"V"+he+"Z"}}else Je=dt}else Je=dt;var We=h(o.ensureSingle(Te,"path"),V,j,Z);if(We.style("vector-effect",ne?"none":"non-scaling-stroke").attr("d",isNaN((Ie-Le)*(xe-he))||ke&&z._context.staticPlot?"M0,0Z":Je).call(p.setClipUrl,F.layerClipId,z),!V.uniformtext.mode&&be){var st=p.makePointStyleFns(K);p.singlePointStyle(oe,We,K,st,z)}(function(it,Fe,Be,at,Ze,ht,vt,mt,ft,Et,Tt,xt,Ct){var Pt,Bt=Fe.xaxis,Kt=Fe.yaxis,sn=it._fullLayout;function Gt(rr,Xt,yn){return o.ensureSingle(rr,"text").text(Xt).attr({class:"bartext bartext-"+Pt,"text-anchor":"middle","data-notex":1}).call(p.font,yn).call(w.convertToTspans,it)}var Yt=at[0].trace,rn=Yt.orientation==="h",Ln=function(rr,Xt,yn,Ot,Jt){var nn,_n=Xt[0].trace;return nn=_n.texttemplate?function(xn,kn,hn,en,tn){var un=kn[0].trace,dn=o.castOption(un,hn,"texttemplate");if(!dn)return"";var En,zn,qn,Gn,$n=un.type==="histogram",Xn=un.type==="waterfall",or=un.type==="funnel",tr=un.orientation==="h";function Qn(jr){return n(Gn,Gn.c2l(jr),!0).text}tr?(En="y",zn=tn,qn="x",Gn=en):(En="x",zn=en,qn="y",Gn=tn);var mr,fr=kn[hn],dr={};dr.label=fr.p,dr.labelLabel=dr[En+"Label"]=(mr=fr.p,n(zn,zn.c2l(mr),!0).text);var sr=o.castOption(un,fr.i,"text");(sr===0||sr)&&(dr.text=sr),dr.value=fr.s,dr.valueLabel=dr[qn+"Label"]=Qn(fr.s);var xr={};v(xr,un,fr.i),($n||xr.x===void 0)&&(xr.x=tr?dr.value:dr.label),($n||xr.y===void 0)&&(xr.y=tr?dr.label:dr.value),($n||xr.xLabel===void 0)&&(xr.xLabel=tr?dr.valueLabel:dr.labelLabel),($n||xr.yLabel===void 0)&&(xr.yLabel=tr?dr.labelLabel:dr.valueLabel),Xn&&(dr.delta=+fr.rawS||fr.s,dr.deltaLabel=Qn(dr.delta),dr.final=fr.v,dr.finalLabel=Qn(dr.final),dr.initial=dr.final-dr.delta,dr.initialLabel=Qn(dr.initial)),or&&(dr.value=fr.s,dr.valueLabel=Qn(dr.value),dr.percentInitial=fr.begR,dr.percentInitialLabel=o.formatPercent(fr.begR),dr.percentPrevious=fr.difR,dr.percentPreviousLabel=o.formatPercent(fr.difR),dr.percentTotal=fr.sumR,dr.percenTotalLabel=o.formatPercent(fr.sumR));var Er=o.castOption(un,fr.i,"customdata");return Er&&(dr.customdata=Er),o.texttemplateString(dn,dr,xn._d3locale,xr,dr,un._meta||{})}(rr,Xt,yn,Ot,Jt):_n.textinfo?function(xn,kn,hn,en){var tn=xn[0].trace,un=tn.orientation==="h",dn=tn.type==="waterfall",En=tn.type==="funnel";function zn(Er){return n(un?hn:en,+Er,!0).text}var qn,Gn,$n=tn.textinfo,Xn=xn[kn],or=$n.split("+"),tr=[],Qn=function(Er){return or.indexOf(Er)!==-1};if(Qn("label")&&tr.push((Gn=xn[kn].p,n(un?en:hn,Gn,!0).text)),Qn("text")&&((qn=o.castOption(tn,Xn.i,"text"))===0||qn)&&tr.push(qn),dn){var mr=+Xn.rawS||Xn.s,fr=Xn.v,dr=fr-mr;Qn("initial")&&tr.push(zn(dr)),Qn("delta")&&tr.push(zn(mr)),Qn("final")&&tr.push(zn(fr))}if(En){Qn("value")&&tr.push(zn(Xn.s));var sr=0;Qn("percent initial")&&sr++,Qn("percent previous")&&sr++,Qn("percent total")&&sr++;var xr=sr>1;Qn("percent initial")&&(qn=o.formatPercent(Xn.begR),xr&&(qn+=" of initial"),tr.push(qn)),Qn("percent previous")&&(qn=o.formatPercent(Xn.difR),xr&&(qn+=" of previous"),tr.push(qn)),Qn("percent total")&&(qn=o.formatPercent(Xn.sumR),xr&&(qn+=" of total"),tr.push(qn))}return tr.join("<br>")}(Xt,yn,Ot,Jt):u.getValue(_n.text,yn),u.coerceString(f,nn)}(sn,at,Ze,Bt,Kt);Pt=function(rr,Xt){var yn=u.getValue(rr.textposition,Xt);return u.coerceEnumerated(b,yn)}(Yt,Ze);var Sn=xt.mode==="stack"||xt.mode==="relative",gn=at[Ze],$t=!Sn||gn._outmost,cn=gn.hasB,an=Et&&Et-Tt>d;if(Ln&&Pt!=="none"&&(!gn.isBlank&&ht!==vt&&mt!==ft||Pt!=="auto"&&Pt!=="inside")){var pn=sn.font,An=l.getBarColor(at[Ze],Yt),Cn=l.getInsideTextFont(Yt,Ze,pn,An),Rn=l.getOutsideTextFont(Yt,Ze,pn),Fn=Yt.insidetextanchor||"end",In=Be.datum();rn?Bt.type==="log"&&In.s0<=0&&(ht=Bt.range[0]<Bt.range[1]?0:Bt._length):Kt.type==="log"&&In.s0<=0&&(mt=Kt.range[0]<Kt.range[1]?Kt._length:0);var Hn,Un,ar,ur,cr,er=Math.abs(vt-ht),Tr=Math.abs(ft-mt),Ht=er-2*d,on=Tr-2*d;if(Pt==="outside"&&($t||gn.hasB||(Pt="inside")),Pt==="auto")if($t){Pt="inside",Hn=Gt(Be,Ln,cr=o.ensureUniformFontSize(it,Cn)),ar=(Un=p.bBox(Hn.node())).width,ur=Un.height;var wn,mn=ar>0&&ur>0;wn=an?cn?k(Ht-2*Et,on,ar,ur,rn)||k(Ht,on-2*Et,ar,ur,rn):rn?k(Ht-(Et-Tt),on,ar,ur,rn)||k(Ht,on-2*(Et-Tt),ar,ur,rn):k(Ht,on-(Et-Tt),ar,ur,rn)||k(Ht-2*(Et-Tt),on,ar,ur,rn):k(Ht,on,ar,ur,rn),mn&&wn?Pt="inside":(Pt="outside",Hn.remove(),Hn=null)}else Pt="inside";if(!Hn){var Pn=(Hn=Gt(Be,Ln,cr=o.ensureUniformFontSize(it,Pt==="outside"?Rn:Cn))).attr("transform");if(Hn.attr("transform",""),ar=(Un=p.bBox(Hn.node())).width,ur=Un.height,Hn.attr("transform",Pn),ar<=0||ur<=0)return void Hn.remove()}var Wn,Bn=Yt.textangle;Wn=Pt==="outside"?function(rr,Xt,yn,Ot,Jt,nn){var _n,xn=!!nn.isHorizontal,kn=!!nn.constrained,hn=nn.angle||0,en=Jt.width,tn=Jt.height,un=Math.abs(Xt-rr),dn=Math.abs(Ot-yn);_n=xn?dn>2*d?d:0:un>2*d?d:0;var En=1;kn&&(En=xn?Math.min(1,dn/tn):Math.min(1,un/en));var zn=L(hn),qn=P(Jt,zn),Gn=(xn?qn.x:qn.y)/2,$n=(Jt.left+Jt.right)/2,Xn=(Jt.top+Jt.bottom)/2,or=(rr+Xt)/2,tr=(yn+Ot)/2,Qn=0,mr=0,fr=xn?T(Xt,rr):T(yn,Ot);return xn?(or=Xt-fr*_n,Qn=fr*Gn):(tr=Ot+fr*_n,mr=-fr*Gn),{textX:$n,textY:Xn,targetX:or,targetY:tr,anchorX:Qn,anchorY:mr,scale:En,rotate:zn}}(ht,vt,mt,ft,Un,{isHorizontal:rn,constrained:Yt.constraintext==="both"||Yt.constraintext==="outside",angle:Bn}):I(ht,vt,mt,ft,Un,{isHorizontal:rn,constrained:Yt.constraintext==="both"||Yt.constraintext==="inside",angle:Bn,anchor:Fn,hasB:cn,r:Et,overhead:Tt}),Wn.fontSize=cr.size,r(Yt.type==="histogram"?"bar":Yt.type,Wn,sn),gn.transform=Wn;var jn=h(Hn,sn,xt,Ct);o.setTransormAndDisplay(jn,Wn)}else Be.select("text").remove()})(z,F,Te,$,le,Le,Ie,he,xe,rt,_t,j,Z),F.layerClipId&&p.hideOutsideRangePoint(oe,Te.select("text"),B,q,K.xcalendar,K.ycalendar)});var _e=K.cliponaxis===!1;p.setClipUrl(J,_e?null:F.layerClipId,z)});s.getComponentMethod("errorbars","plot")(z,ee,F,j)},toMoveInsideBar:I}},45784:function(Y){function O(e,M,A,o,w){var _=M.c2p(o?e.s0:e.p0,!0),p=M.c2p(o?e.s1:e.p1,!0),s=A.c2p(o?e.p0:e.s0,!0),n=A.c2p(o?e.p1:e.s1,!0);return w?[(_+p)/2,(s+n)/2]:o?[p,(s+n)/2]:[(_+p)/2,n]}Y.exports=function(e,M){var A,o=e.cd,w=e.xaxis,_=e.yaxis,p=o[0].trace,s=p.type==="funnel",n=p.orientation==="h",a=[];if(M===!1)for(A=0;A<o.length;A++)o[A].selected=0;else for(A=0;A<o.length;A++){var r=o[A],i="ct"in r?r.ct:O(r,w,_,n,s);M.contains(i,!1,A,e)?(a.push({pointNumber:A,x:w.c2d(r.x),y:_.c2d(r.y)}),r.selected=1):r.selected=0}return a}},72592:function(Y,O,e){Y.exports=A;var M=e(3400).distinctVals;function A(o,w){this.traces=o,this.sepNegVal=w.sepNegVal,this.overlapNoMerge=w.overlapNoMerge;for(var _=1/0,p=w.posAxis._id.charAt(0),s=[],n=0;n<o.length;n++){for(var a=o[n],r=0;r<a.length;r++){var i=a[r],l=i.p;l===void 0&&(l=i[p]),l!==void 0&&s.push(l)}a[0]&&a[0].width1&&(_=Math.min(a[0].width1,_))}this.positions=s;var u=M(s);this.distinctPositions=u.vals,u.vals.length===1&&_!==1/0?this.minDiff=_:this.minDiff=Math.min(u.minDiff,_);var c=(w.posAxis||{}).type;c!=="category"&&c!=="multicategory"||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}A.prototype.put=function(o,w){var _=this.getLabel(o,w),p=this.bins[_]||0;return this.bins[_]=p+w,p},A.prototype.get=function(o,w){var _=this.getLabel(o,w);return this.bins[_]||0},A.prototype.getLabel=function(o,w){return(w<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?o:Math.round(o/this.binWidth))}},60100:function(Y,O,e){var M=e(33428),A=e(76308),o=e(43616),w=e(3400),_=e(24040),p=e(82744).resizeText,s=e(20832),n=s.textfont,a=s.insidetextfont,r=s.outsidetextfont,i=e(60444);function l(m,x,y){o.pointStyle(m.selectAll("path"),x,y),u(m,x,y)}function u(m,x,y){m.selectAll("text").each(function(T){var h=M.select(this),E=w.ensureUniformFontSize(y,c(h,T,x,y));o.font(h,E)})}function c(m,x,y,T){var h=T._fullLayout.font,E=y.textfont;if(m.classed("bartext-inside")){var k=d(x,y);E=f(y,x.i,h,k)}else m.classed("bartext-outside")&&(E=b(y,x.i,h));return E}function g(m,x,y){return v(n,m.textfont,x,y)}function f(m,x,y,T){var h=g(m,x,y);return(m._input.textfont===void 0||m._input.textfont.color===void 0||Array.isArray(m.textfont.color)&&m.textfont.color[x]===void 0)&&(h={color:A.contrast(T),family:h.family,size:h.size}),v(a,m.insidetextfont,x,h)}function b(m,x,y){var T=g(m,x,y);return v(r,m.outsidetextfont,x,T)}function v(m,x,y,T){x=x||{};var h=i.getValue(x.family,y),E=i.getValue(x.size,y),k=i.getValue(x.color,y);return{family:i.coerceString(m.family,h,T.family),size:i.coerceNumber(m.size,E,T.size),color:i.coerceColor(m.color,k,T.color)}}function d(m,x){return x.type==="waterfall"?x[m.dir].marker.color:m.mcc||m.mc||x.marker.color}Y.exports={style:function(m){var x=M.select(m).selectAll("g.barlayer").selectAll("g.trace");p(m,x,"bar");var y=x.size(),T=m._fullLayout;x.style("opacity",function(h){return h[0].trace.opacity}).each(function(h){(T.barmode==="stack"&&y>1||T.bargap===0&&T.bargroupgap===0&&!h[0].trace.marker.line.width)&&M.select(this).attr("shape-rendering","crispEdges")}),x.selectAll("g.points").each(function(h){l(M.select(this),h[0].trace,m)}),_.getComponentMethod("errorbars","style")(x)},styleTextPoints:u,styleOnSelect:function(m,x,y){var T=x[0].trace;T.selectedpoints?function(h,E,k){o.selectedPointStyle(h.selectAll("path"),E),function(L,P,I){L.each(function(z){var F,U=M.select(this);if(z.selected){F=w.ensureUniformFontSize(I,c(U,z,P,I));var R=P.selected.textfont&&P.selected.textfont.color;R&&(F.color=R),o.font(U,F)}else o.selectedTextStyle(U,P)})}(h.selectAll("text"),E,k)}(y,T,m):(l(y,T,m),_.getComponentMethod("errorbars","style")(y))},getInsideTextFont:f,getOutsideTextFont:b,getBarColor:d,resizeText:p}},55592:function(Y,O,e){var M=e(76308),A=e(94288).hasColorscale,o=e(27260),w=e(3400).coercePattern;Y.exports=function(_,p,s,n,a){var r=s("marker.color",n),i=A(_,"marker");i&&o(_,p,a,s,{prefix:"marker.",cLetter:"c"}),s("marker.line.color",M.defaultLine),A(_,"marker.line")&&o(_,p,a,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width"),s("marker.opacity"),w(s,"marker.pattern",r,i),s("selected.marker.color"),s("unselected.marker.color")}},82744:function(Y,O,e){var M=e(33428),A=e(3400);function o(w){return"_"+w+"Text_minsize"}Y.exports={recordMinTextSize:function(w,_,p){if(p.uniformtext.mode){var s=o(w),n=p.uniformtext.minsize,a=_.scale*_.fontSize;_.hide=a<n,p[s]=p[s]||1/0,_.hide||(p[s]=Math.min(p[s],Math.max(a,n)))}},clearMinTextSize:function(w,_){_[o(w)]=void 0},resizeText:function(w,_,p){var s=w._fullLayout,n=s["_"+p+"Text_minsize"];if(n){var a,r=s.uniformtext.mode==="hide";switch(p){case"funnelarea":case"pie":case"sunburst":a="g.slice";break;case"treemap":case"icicle":a="g.slice, g.pathbar";break;default:a="g.points > g.point"}_.selectAll(a).each(function(i){var l=i.transform;if(l){l.scale=r&&l.hide?0:n/l.fontSize;var u=M.select(this).select("text");A.setTransormAndDisplay(u,l)}})}}}},78100:function(Y,O,e){var M,A=e(21776).Ks,o=e(92880).extendFlat,w=e(8319),_=e(20832);Y.exports={r:w.r,theta:w.theta,r0:w.r0,dr:w.dr,theta0:w.theta0,dtheta:w.dtheta,thetaunit:w.thetaunit,base:o({},_.base,{}),offset:o({},_.offset,{}),width:o({},_.width,{}),text:o({},_.text,{}),hovertext:o({},_.hovertext,{}),marker:(M=o({},_.marker),delete M.cornerradius,M),hoverinfo:w.hoverinfo,hovertemplate:A(),selected:_.selected,unselected:_.unselected}},47056:function(Y,O,e){var M=e(94288).hasColorscale,A=e(47128),o=e(3400).isArrayOrTypedArray,w=e(84664),_=e(96376).setGroupPositions,p=e(4500),s=e(24040).traceIs,n=e(3400).extendFlat;Y.exports={calc:function(a,r){for(var i=a._fullLayout,l=r.subplot,u=i[l].radialaxis,c=i[l].angularaxis,g=u.makeCalcdata(r,"r"),f=c.makeCalcdata(r,"theta"),b=r._length,v=new Array(b),d=g,m=f,x=0;x<b;x++)v[x]={p:m[x],s:d[x]};function y(T){var h=r[T];h!==void 0&&(r["_"+T]=o(h)?c.makeCalcdata(r,T):c.d2c(h,r.thetaunit))}return c.type==="linear"&&(y("width"),y("offset")),M(r,"marker")&&A(a,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),M(r,"marker.line")&&A(a,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}),w(v,r),p(v,r),v},crossTraceCalc:function(a,r,i){for(var l=a.calcdata,u=[],c=0;c<l.length;c++){var g=l[c],f=g[0].trace;f.visible===!0&&s(f,"bar")&&f.subplot===i&&u.push(g)}var b=n({},r.radialaxis,{_id:"x"}),v=r.angularaxis;_(a,v,b,u,{mode:r.barmode,norm:r.barnorm,gap:r.bargap,groupgap:r.bargroupgap})}}},70384:function(Y,O,e){var M=e(3400),A=e(85968).handleRThetaDefaults,o=e(55592),w=e(78100);Y.exports=function(_,p,s,n){function a(r,i){return M.coerce(_,p,w,r,i)}A(_,p,n,a)?(a("thetaunit"),a("base"),a("offset"),a("width"),a("text"),a("hovertext"),a("hovertemplate"),o(_,p,a,s,n),M.coerceSelectionMarkerOpacity(p,a)):p.visible=!1}},68896:function(Y,O,e){var M=e(93024),A=e(3400),o=e(63400).getTraceColor,w=A.fillText,_=e(8504).makeHoverPointText,p=e(57384).isPtInsidePolygon;Y.exports=function(s,n,a){var r=s.cd,i=r[0].trace,l=s.subplot,u=l.radialAxis,c=l.angularAxis,g=l.vangles,f=g?p:A.isPtInsideSector,b=s.maxHoverDistance,v=c._period||2*Math.PI,d=Math.abs(u.g2p(Math.sqrt(n*n+a*a))),m=Math.atan2(a,n);if(u.range[0]>u.range[1]&&(m+=Math.PI),M.getClosest(r,function(T){return f(d,m,[T.rp0,T.rp1],[T.thetag0,T.thetag1],g)?b+Math.min(1,Math.abs(T.thetag1-T.thetag0)/v)-1+(T.rp1-d)/(T.rp1-T.rp0)-1:1/0},s),s.index!==!1){var x=r[s.index];s.x0=s.x1=x.ct[0],s.y0=s.y1=x.ct[1];var y=A.extendFlat({},x,{r:x.s,theta:x.p});return w(x,i,s),_(y,i,l,s),s.hovertemplate=i.hovertemplate,s.color=o(i,x),s.xLabelVal=s.yLabelVal=void 0,x.s<0&&(s.idealAlign="left"),[s]}}},94456:function(Y,O,e){Y.exports={moduleType:"trace",name:"barpolar",basePlotModule:e(40872),categories:["polar","bar","showLegend"],attributes:e(78100),layoutAttributes:e(9320),supplyDefaults:e(70384),supplyLayoutDefaults:e(89580),calc:e(47056).calc,crossTraceCalc:e(47056).crossTraceCalc,plot:e(42040),colorbar:e(5528),formatLabels:e(22852),style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,hoverPoints:e(68896),selectPoints:e(45784),meta:{}}},9320:function(Y){Y.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},89580:function(Y,O,e){var M=e(3400),A=e(9320);Y.exports=function(o,w,_){var p,s={};function n(i,l){return M.coerce(o[p]||{},w[p],A,i,l)}for(var a=0;a<_.length;a++){var r=_[a];r.type==="barpolar"&&r.visible===!0&&(s[p=r.subplot]||(n("barmode"),n("bargap"),s[p]=1))}}},42040:function(Y,O,e){var M=e(33428),A=e(38248),o=e(3400),w=e(43616),_=e(57384);Y.exports=function(p,s,n){var a=p._context.staticPlot,r=s.xaxis,i=s.yaxis,l=s.radialAxis,u=s.angularAxis,c=function(f){var b=f.cxx,v=f.cyy;return f.vangles?function(d,m,x,y){var T,h;o.angleDelta(x,y)>0?(T=x,h=y):(T=y,h=x);var E=[_.findEnclosingVertexAngles(T,f.vangles)[0],(T+h)/2,_.findEnclosingVertexAngles(h,f.vangles)[1]];return _.pathPolygonAnnulus(d,m,T,h,E,b,v)}:function(d,m,x,y){return o.pathAnnulus(d,m,x,y,b,v)}}(s),g=s.layers.frontplot.select("g.barlayer");o.makeTraceGroups(g,n,"trace bars").each(function(){var f=M.select(this),b=o.ensureSingle(f,"g","points").selectAll("g.point").data(o.identity);b.enter().append("g").style("vector-effect",a?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),b.exit().remove(),b.each(function(v){var d,m=M.select(this),x=v.rp0=l.c2p(v.s0),y=v.rp1=l.c2p(v.s1),T=v.thetag0=u.c2g(v.p0),h=v.thetag1=u.c2g(v.p1);if(A(x)&&A(y)&&A(T)&&A(h)&&x!==y&&T!==h){var E=l.c2g(v.s1),k=(T+h)/2;v.ct=[r.c2p(E*Math.cos(k)),i.c2p(E*Math.sin(k))],d=c(x,y,T,h)}else d="M0,0Z";o.ensureSingle(m,"path").attr("d",d)}),w.setClipUrl(f,s._hasClipOnAxisFalse?s.clipIds.forTraces:null,p)})}},63188:function(Y,O,e){var M=e(52904),A=e(20832),o=e(22548),w=e(29736).axisHoverFormat,_=e(21776).Ks,p=e(92880).extendFlat,s=M.marker,n=s.line;Y.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:w("x"),yhoverformat:w("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:p({},s.symbol,{arrayOk:!1,editType:"plot"}),opacity:p({},s.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:p({},s.angle,{arrayOk:!1,editType:"calc"}),size:p({},s.size,{arrayOk:!1,editType:"calc"}),color:p({},s.color,{arrayOk:!1,editType:"style"}),line:{color:p({},n.color,{arrayOk:!1,dflt:o.defaultLine,editType:"style"}),width:p({},n.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:M.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:A.offsetgroup,alignmentgroup:A.alignmentgroup,selected:{marker:M.selected.marker,editType:"style"},unselected:{marker:M.unselected.marker,editType:"style"},text:p({},M.text,{}),hovertext:p({},M.hovertext,{}),hovertemplate:_({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},62555:function(Y,O,e){var M=e(38248),A=e(54460),o=e(1220),w=e(3400),_=e(39032).BADNUM,p=w._;Y.exports=function(f,b){var v,d,m,x,y,T,h,E=f._fullLayout,k=A.getFromId(f,b.xaxis||"x"),L=A.getFromId(f,b.yaxis||"y"),P=[],I=b.type==="violin"?"_numViolins":"_numBoxes";b.orientation==="h"?(m=k,x="x",y=L,T="y",h=!!b.yperiodalignment):(m=L,x="y",y=k,T="x",h=!!b.xperiodalignment);var z,F,U,R,j,Z,B=function(Re,Oe,Ve,qe){var Je,ot=Oe+"0"in Re;if(Oe in Re||ot&&"d"+Oe in Re){var rt=Ve.makeCalcdata(Re,Oe);return[o(Re,Ve,Oe,rt).vals,rt]}Je=ot?Re[Oe+"0"]:"name"in Re&&(Ve.type==="category"||M(Re.name)&&["linear","log"].indexOf(Ve.type)!==-1||w.isDateTime(Re.name)&&Ve.type==="date")?Re.name:qe;for(var dt=Ve.type==="multicategory"?Ve.r2c_just_indices(Je):Ve.d2c(Je,0,Re[Oe+"calendar"]),_t=Re._length,yt=new Array(_t),et=0;et<_t;et++)yt[et]=dt;return[yt]}(b,T,y,E[I]),q=B[0],V=B[1],ne=w.distinctVals(q,y),ee=ne.vals,$=ne.minDiff/2,J=(b.boxpoints||b.points)==="all"?w.identity:function(Re){return Re.v<z.lf||Re.v>z.uf};if(b._hasPreCompStats){var K=b[x],te=function(Re){return m.d2c((b[Re]||[])[v])},ie=1/0,ae=-1/0;for(v=0;v<b._length;v++){var se=q[v];if(M(se)){if((z={}).pos=z[T]=se,h&&V&&(z.orig_p=V[v]),z.q1=te("q1"),z.med=te("median"),z.q3=te("q3"),F=[],K&&w.isArrayOrTypedArray(K[v]))for(d=0;d<K[v].length;d++)(Z=m.d2c(K[v][d]))!==_&&(n(j={v:Z,i:[v,d]},b,[v,d]),F.push(j));if(z.pts=F.sort(a),R=(U=z[x]=F.map(r)).length,z.med!==_&&z.q1!==_&&z.q3!==_&&z.med>=z.q1&&z.q3>=z.med){var ce=te("lowerfence");z.lf=ce!==_&&ce<=z.q1?ce:i(z,U,R);var de=te("upperfence");z.uf=de!==_&&de>=z.q3?de:l(z,U,R);var ge=te("mean");z.mean=ge!==_?ge:R?w.mean(U,R):(z.q1+z.q3)/2;var ve=te("sd");z.sd=ge!==_&&ve>=0?ve:R?w.stdev(U,R,z.mean):z.q3-z.q1,z.lo=u(z),z.uo=c(z);var be=te("notchspan");be=be!==_&&be>0?be:g(z,R),z.ln=z.med-be,z.un=z.med+be;var me=z.lf,Se=z.uf;b.boxpoints&&U.length&&(me=Math.min(me,U[0]),Se=Math.max(Se,U[R-1])),b.notched&&(me=Math.min(me,z.ln),Se=Math.max(Se,z.un)),z.min=me,z.max=Se}else{var we;w.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+z.q1,"median = "+z.med,"q3 = "+z.q3].join(`
`)),we=z.med!==_?z.med:z.q1!==_?z.q3!==_?(z.q1+z.q3)/2:z.q1:z.q3!==_?z.q3:0,z.med=we,z.q1=z.q3=we,z.lf=z.uf=we,z.mean=z.sd=we,z.ln=z.un=we,z.min=z.max=we}ie=Math.min(ie,z.min),ae=Math.max(ae,z.max),z.pts2=F.filter(J),P.push(z)}}b._extremes[m._id]=A.findExtremes(m,[ie,ae],{padded:!0})}else{var _e=m.makeCalcdata(b,x),oe=function(Re,Oe){for(var Ve=Re.length,qe=new Array(Ve+1),Je=0;Je<Ve;Je++)qe[Je]=Re[Je]-Oe;return qe[Ve]=Re[Ve-1]+Oe,qe}(ee,$),le=ee.length,pe=function(Re){for(var Oe=new Array(Re),Ve=0;Ve<Re;Ve++)Oe[Ve]=[];return Oe}(le);for(v=0;v<b._length;v++)if(Z=_e[v],M(Z)){var Ee=w.findBin(q[v],oe);Ee>=0&&Ee<le&&(n(j={v:Z,i:v},b,v),pe[Ee].push(j))}var Te=1/0,Me=-1/0,Le=b.quartilemethod,Ie=Le==="exclusive",he=Le==="inclusive";for(v=0;v<le;v++)if(pe[v].length>0){var xe,ke;(z={}).pos=z[T]=ee[v],F=z.pts=pe[v].sort(a),R=(U=z[x]=F.map(r)).length,z.min=U[0],z.max=U[R-1],z.mean=w.mean(U,R),z.sd=w.stdev(U,R,z.mean)*b.sdmultiple,z.med=w.interp(U,.5),R%2&&(Ie||he)?(Ie?(xe=U.slice(0,R/2),ke=U.slice(R/2+1)):he&&(xe=U.slice(0,R/2+1),ke=U.slice(R/2)),z.q1=w.interp(xe,.5),z.q3=w.interp(ke,.5)):(z.q1=w.interp(U,.25),z.q3=w.interp(U,.75)),z.lf=i(z,U,R),z.uf=l(z,U,R),z.lo=u(z),z.uo=c(z);var ze=g(z,R);z.ln=z.med-ze,z.un=z.med+ze,Te=Math.min(Te,z.ln),Me=Math.max(Me,z.un),z.pts2=F.filter(J),P.push(z)}b.notched&&w.isTypedArray(_e)&&(_e=Array.from(_e)),b._extremes[m._id]=A.findExtremes(m,b.notched?_e.concat([Te,Me]):_e,{padded:!0})}return function(Re,Oe){if(w.isArrayOrTypedArray(Oe.selectedpoints))for(var Ve=0;Ve<Re.length;Ve++){for(var qe=Re[Ve].pts||[],Je={},ot=0;ot<qe.length;ot++)Je[qe[ot].i]=ot;w.tagSelected(qe,Oe,Je)}}(P,b),P.length>0?(P[0].t={num:E[I],dPos:$,posLetter:T,valLetter:x,labels:{med:p(f,"median:"),min:p(f,"min:"),q1:p(f,"q1:"),q3:p(f,"q3:"),max:p(f,"max:"),mean:b.boxmean==="sd"||b.sizemode==="sd"?p(f,"mean  :").replace("",b.sdmultiple===1?"":b.sdmultiple+""):p(f,"mean:"),lf:p(f,"lower fence:"),uf:p(f,"upper fence:")}},E[I]++,P):[{t:{empty:!0}}]};var s={text:"tx",hovertext:"htx"};function n(f,b,v){for(var d in s)w.isArrayOrTypedArray(b[d])&&(Array.isArray(v)?w.isArrayOrTypedArray(b[d][v[0]])&&(f[s[d]]=b[d][v[0]][v[1]]):f[s[d]]=b[d][v])}function a(f,b){return f.v-b.v}function r(f){return f.v}function i(f,b,v){return v===0?f.q1:Math.min(f.q1,b[Math.min(w.findBin(2.5*f.q1-1.5*f.q3,b,!0)+1,v-1)])}function l(f,b,v){return v===0?f.q3:Math.max(f.q3,b[Math.max(w.findBin(2.5*f.q3-1.5*f.q1,b),0)])}function u(f){return 4*f.q1-3*f.q3}function c(f){return 4*f.q3-3*f.q1}function g(f,b){return b===0?0:1.57*(f.q3-f.q1)/Math.sqrt(b)}},96404:function(Y,O,e){var M=e(54460),A=e(3400),o=e(71888).getAxisGroup,w=["v","h"];function _(p,s,n,a){var r,i,l,u=s.calcdata,c=s._fullLayout,g=a._id,f=g.charAt(0),b=[],v=0;for(r=0;r<n.length;r++)for(l=u[n[r]],i=0;i<l.length;i++)b.push(a.c2l(l[i].pos,!0)),v+=(l[i].pts2||[]).length;if(b.length){var d=A.distinctVals(b);a.type!=="category"&&a.type!=="multicategory"||(d.minDiff=1);var m=d.minDiff/2;M.minDtick(a,d.minDiff,d.vals[0],!0);var x=c[p==="violin"?"_numViolins":"_numBoxes"],y=c[p+"mode"]==="group"&&x>1,T=1-c[p+"gap"],h=1-c[p+"groupgap"];for(r=0;r<n.length;r++){var E,k,L,P,I,z,F=(l=u[n[r]])[0].trace,U=l[0].t,R=F.width,j=F.side;if(R)E=k=P=R/2,L=0;else if(E=m,y){var Z=o(c,a._id)+F.orientation,B=(c._alignmentOpts[Z]||{})[F.alignmentgroup]||{},q=Object.keys(B.offsetGroups||{}).length,V=q||x;k=E*T*h/V,L=2*E*(((q?F._offsetIndex:U.num)+.5)/V-.5)*T,P=E*T/V}else k=E*T*h,L=0,P=E;U.dPos=E,U.bPos=L,U.bdPos=k,U.wHover=P;var ne,ee,$,J,K,te,ie=L+k,ae=!!R;if(j==="positive"?(I=E*(R?1:.5),ne=ie,z=ne=L):j==="negative"?(I=ne=L,z=E*(R?1:.5),ee=ie):(I=z=E,ne=ee=ie),(F.boxpoints||F.points)&&v>0){var se=F.pointpos,ce=F.jitter,de=F.marker.size/2,ge=0;se+ce>=0&&((ge=ie*(se+ce))>I?(ae=!0,K=de,$=ge):ge>ne&&(K=de,$=I)),ge<=I&&($=I);var ve=0;se-ce<=0&&((ve=-ie*(se-ce))>z?(ae=!0,te=de,J=ve):ve>ee&&(te=de,J=z)),ve<=z&&(J=z)}else $=I,J=z;var be=new Array(l.length);for(i=0;i<l.length;i++)be[i]=l[i].pos;F._extremes[g]=M.findExtremes(a,be,{padded:ae,vpadminus:J,vpadplus:$,vpadLinearized:!0,ppadminus:{x:te,y:K}[f],ppadplus:{x:K,y:te}[f]})}}}Y.exports={crossTraceCalc:function(p,s){for(var n=p.calcdata,a=s.xaxis,r=s.yaxis,i=0;i<w.length;i++){for(var l=w[i],u=l==="h"?r:a,c=[],g=0;g<n.length;g++){var f=n[g],b=f[0].t,v=f[0].trace;v.visible!==!0||v.type!=="box"&&v.type!=="candlestick"||b.empty||(v.orientation||"v")!==l||v.xaxis!==a._id||v.yaxis!==r._id||c.push(g)}_("box",p,c,u)}},setPositionOffset:_}},90624:function(Y,O,e){var M=e(3400),A=e(24040),o=e(76308),w=e(31147),_=e(20011),p=e(52976),s=e(63188);function n(r,i,l,u){function c(j){var Z=0;return j&&j.length&&(Z+=1,M.isArrayOrTypedArray(j[0])&&j[0].length&&(Z+=1)),Z}function g(j){return M.validate(r[j],s[j])}var f,b=l("y"),v=l("x");if(i.type==="box"){var d=l("q1"),m=l("median"),x=l("q3");i._hasPreCompStats=d&&d.length&&m&&m.length&&x&&x.length,f=Math.min(M.minRowLength(d),M.minRowLength(m),M.minRowLength(x))}var y,T,h=c(b),E=c(v),k=h&&M.minRowLength(b),L=E&&M.minRowLength(v),P=u.calendar,I={autotypenumbers:u.autotypenumbers};if(i._hasPreCompStats)switch(String(E)+String(h)){case"00":var z=g("x0")||g("dx");y=!g("y0")&&!g("dy")||z?"v":"h",T=f;break;case"10":y="v",T=Math.min(f,L);break;case"20":y="h",T=Math.min(f,v.length);break;case"01":y="h",T=Math.min(f,k);break;case"02":y="v",T=Math.min(f,b.length);break;case"12":y="v",T=Math.min(f,L,b.length);break;case"21":y="h",T=Math.min(f,v.length,k);break;case"11":T=0;break;case"22":var F,U=!1;for(F=0;F<v.length;F++)if(p(v[F],P,I)==="category"){U=!0;break}if(U)y="v",T=Math.min(f,L,b.length);else{for(F=0;F<b.length;F++)if(p(b[F],P,I)==="category"){U=!0;break}U?(y="h",T=Math.min(f,v.length,k)):(y="v",T=Math.min(f,L,b.length))}}else h>0?(y="v",T=E>0?Math.min(L,k):Math.min(k)):E>0?(y="h",T=Math.min(L)):T=0;if(T){i._length=T;var R=l("orientation",y);i._hasPreCompStats?R==="v"&&E===0?(l("x0",0),l("dx",1)):R==="h"&&h===0&&(l("y0",0),l("dy",1)):R==="v"&&E===0?l("x0"):R==="h"&&h===0&&l("y0"),A.getComponentMethod("calendars","handleTraceDefaults")(r,i,["x","y"],u)}else i.visible=!1}function a(r,i,l,u){var c=u.prefix,g=M.coerce2(r,i,s,"marker.outliercolor"),f=l("marker.line.outliercolor"),b="outliers";i._hasPreCompStats?b="all":(g||f)&&(b="suspectedoutliers");var v=l(c+"points",b);v?(l("jitter",v==="all"?.3:0),l("pointpos",v==="all"?-1.5:0),l("marker.symbol"),l("marker.opacity"),l("marker.size"),l("marker.angle"),l("marker.color",i.line.color),l("marker.line.color"),l("marker.line.width"),v==="suspectedoutliers"&&(l("marker.line.outliercolor",i.marker.color),l("marker.line.outlierwidth")),l("selected.marker.color"),l("unselected.marker.color"),l("selected.marker.size"),l("unselected.marker.size"),l("text"),l("hovertext")):delete i.marker;var d=l("hoveron");d!=="all"&&d.indexOf("points")===-1||l("hovertemplate"),M.coerceSelectionMarkerOpacity(i,l)}Y.exports={supplyDefaults:function(r,i,l,u){function c(T,h){return M.coerce(r,i,s,T,h)}if(n(r,i,c,u),i.visible!==!1){w(r,i,u,c),c("xhoverformat"),c("yhoverformat");var g=i._hasPreCompStats;g&&(c("lowerfence"),c("upperfence")),c("line.color",(r.marker||{}).color||l),c("line.width"),c("fillcolor",o.addOpacity(i.line.color,.5));var f=!1;if(g){var b=c("mean"),v=c("sd");b&&b.length&&(f=!0,v&&v.length&&(f="sd"))}c("whiskerwidth");var d,m=c("sizemode");m==="quartiles"&&(d=c("boxmean",f)),c("showwhiskers",m==="quartiles"),m!=="sd"&&d!=="sd"||c("sdmultiple"),c("width"),c("quartilemethod");var x=!1;if(g){var y=c("notchspan");y&&y.length&&(x=!0)}else M.validate(r.notchwidth,s.notchwidth)&&(x=!0);c("notched",x)&&c("notchwidth"),a(r,i,c,{prefix:"box"})}},crossTraceDefaults:function(r,i){var l,u;function c(b){return M.coerce(u._input,u,s,b)}for(var g=0;g<r.length;g++){var f=(u=r[g]).type;f!=="box"&&f!=="violin"||(l=u._input,i[f+"mode"]==="group"&&_(l,u,i,c))}},handleSampleDefaults:n,handlePointsDefaults:a}},10392:function(Y){Y.exports=function(O,e){return e.hoverOnBox&&(O.hoverOnBox=e.hoverOnBox),"xVal"in e&&(O.x=e.xVal),"yVal"in e&&(O.y=e.yVal),e.xa&&(O.xaxis=e.xa),e.ya&&(O.yaxis=e.ya),O}},27576:function(Y,O,e){var M=e(54460),A=e(3400),o=e(93024),w=e(76308),_=A.fillText;function p(n,a,r,i){var l,u,c,g,f,b,v,d,m,x,y,T,h,E,k=n.cd,L=n.xa,P=n.ya,I=k[0].trace,z=k[0].t,F=I.type==="violin",U=z.bdPos,R=z.wHover,j=function(we){return c.c2l(we.pos)+z.bPos-c.c2l(b)};F&&I.side!=="both"?(I.side==="positive"&&(m=function(we){var _e=j(we);return o.inbox(_e,_e+R,x)},T=U,h=0),I.side==="negative"&&(m=function(we){var _e=j(we);return o.inbox(_e-R,_e,x)},T=0,h=U)):(m=function(we){var _e=j(we);return o.inbox(_e-R,_e+R,x)},T=h=U),E=F?function(we){return o.inbox(we.span[0]-f,we.span[1]-f,x)}:function(we){return o.inbox(we.min-f,we.max-f,x)},I.orientation==="h"?(f=a,b=r,v=E,d=m,l="y",c=P,u="x",g=L):(f=r,b=a,v=m,d=E,l="x",c=L,u="y",g=P);var Z=Math.min(1,U/Math.abs(c.r2c(c.range[1])-c.r2c(c.range[0])));function B(we){return(v(we)+d(we))/2}x=n.maxHoverDistance-Z,y=n.maxSpikeDistance-Z;var q=o.getDistanceFunction(i,v,d,B);if(o.getClosest(k,q,n),n.index===!1)return[];var V=k[n.index],ne=I.line.color,ee=(I.marker||{}).color;w.opacity(ne)&&I.line.width?n.color=ne:w.opacity(ee)&&I.boxpoints?n.color=ee:n.color=I.fillcolor,n[l+"0"]=c.c2p(V.pos+z.bPos-h,!0),n[l+"1"]=c.c2p(V.pos+z.bPos+T,!0),n[l+"LabelVal"]=V.orig_p!==void 0?V.orig_p:V.pos;var $=l+"Spike";n.spikeDistance=B(V)*y/x,n[$]=c.c2p(V.pos,!0);var J=I.boxmean||I.sizemode==="sd"||(I.meanline||{}).visible,K=I.boxpoints||I.points,te=K&&J?["max","uf","q3","med","mean","q1","lf","min"]:K&&!J?["max","uf","q3","med","q1","lf","min"]:!K&&J?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],ie=g.range[1]<g.range[0];I.orientation===(ie?"v":"h")&&te.reverse();for(var ae=n.spikeDistance,se=n[$],ce=[],de=0;de<te.length;de++){var ge=te[de];if(ge in V){var ve=V[ge],be=g.c2p(ve,!0),me=A.extendFlat({},n);me.attr=ge,me[u+"0"]=me[u+"1"]=be,me[u+"LabelVal"]=ve,me[u+"Label"]=(z.labels?z.labels[ge]+" ":"")+M.hoverLabelText(g,ve,I[u+"hoverformat"]),me.hoverOnBox=!0,ge!=="mean"||!("sd"in V)||I.boxmean!=="sd"&&I.sizemode!=="sd"||(me[u+"err"]=V.sd),me.hovertemplate=!1,ce.push(me)}}n.name="",n.spikeDistance=void 0,n[$]=void 0;for(var Se=0;Se<ce.length;Se++)ce[Se].attr!=="med"?(ce[Se].name="",ce[Se].spikeDistance=void 0,ce[Se][$]=void 0):(ce[Se].spikeDistance=ae,ce[Se][$]=se);return ce}function s(n,a,r){for(var i,l,u,c=n.cd,g=n.xa,f=n.ya,b=c[0].trace,v=g.c2p(a),d=f.c2p(r),m=o.quadrature(function(F){var U=Math.max(3,F.mrc||0);return Math.max(Math.abs(g.c2p(F.x)-v)-U,1-3/U)},function(F){var U=Math.max(3,F.mrc||0);return Math.max(Math.abs(f.c2p(F.y)-d)-U,1-3/U)}),x=!1,y=0;y<c.length;y++){l=c[y];for(var T=0;T<(l.pts||[]).length;T++){var h=m(u=l.pts[T]);h<=n.distance&&(n.distance=h,x=[y,T])}}if(!x)return!1;u=(l=c[x[0]]).pts[x[1]];var E=g.c2p(u.x,!0),k=f.c2p(u.y,!0),L=u.mrc||1;i=A.extendFlat({},n,{index:u.i,color:(b.marker||{}).color,name:b.name,x0:E-L,x1:E+L,y0:k-L,y1:k+L,spikeDistance:n.distance,hovertemplate:b.hovertemplate});var P,I=l.orig_p,z=I!==void 0?I:l.pos;return b.orientation==="h"?(P=f,i.xLabelVal=u.x,i.yLabelVal=z):(P=g,i.xLabelVal=z,i.yLabelVal=u.y),i[P._id.charAt(0)+"Spike"]=P.c2p(l.pos,!0),_(u,b,i),i}Y.exports={hoverPoints:function(n,a,r,i){var l,u=n.cd[0].trace.hoveron,c=[];return u.indexOf("boxes")!==-1&&(c=c.concat(p(n,a,r,i))),u.indexOf("points")!==-1&&(l=s(n,a,r)),i==="closest"?l?[l]:c:(l&&c.push(l),c)},hoverOnBoxes:p,hoverOnPoints:s}},67244:function(Y,O,e){Y.exports={attributes:e(63188),layoutAttributes:e(16560),supplyDefaults:e(90624).supplyDefaults,crossTraceDefaults:e(90624).crossTraceDefaults,supplyLayoutDefaults:e(68832).supplyLayoutDefaults,calc:e(62555),crossTraceCalc:e(96404).crossTraceCalc,plot:e(18728).plot,style:e(25776).style,styleOnSelect:e(25776).styleOnSelect,hoverPoints:e(27576).hoverPoints,eventData:e(10392),selectPoints:e(8264),moduleType:"trace",name:"box",basePlotModule:e(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},16560:function(Y){Y.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},68832:function(Y,O,e){var M=e(24040),A=e(3400),o=e(16560);function w(_,p,s,n,a){for(var r=a+"Layout",i=!1,l=0;l<s.length;l++){var u=s[l];if(M.traceIs(u,r)){i=!0;break}}i&&(n(a+"mode"),n(a+"gap"),n(a+"groupgap"))}Y.exports={supplyLayoutDefaults:function(_,p,s){w(0,0,s,function(n,a){return A.coerce(_,p,o,n,a)},"box")},_supply:w}},18728:function(Y,O,e){var M=e(33428),A=e(3400),o=e(43616);function w(s,n,a,r,i){var l,u,c=a.orientation==="h",g=n.val,f=n.pos,b=!!f.rangebreaks,v=r.bPos,d=r.wdPos||0,m=r.bPosPxOffset||0,x=a.whiskerwidth||0,y=a.showwhiskers!==!1,T=a.notched||!1,h=T?1-2*a.notchwidth:1;Array.isArray(r.bdPos)?(l=r.bdPos[0],u=r.bdPos[1]):(l=r.bdPos,u=r.bdPos);var E=s.selectAll("path.box").data(a.type!=="violin"||a.box.visible?A.identity:[]);E.enter().append("path").style("vector-effect",i?"none":"non-scaling-stroke").attr("class","box"),E.exit().remove(),E.each(function(k){if(k.empty)return M.select(this).attr("d","M0,0Z");var L=f.c2l(k.pos+v,!0),P=f.l2p(L-l)+m,I=f.l2p(L+u)+m,z=b?(P+I)/2:f.l2p(L)+m,F=a.whiskerwidth,U=b?P*F+(1-F)*z:f.l2p(L-d)+m,R=b?I*F+(1-F)*z:f.l2p(L+d)+m,j=f.l2p(L-l*h)+m,Z=f.l2p(L+u*h)+m,B=a.sizemode==="sd",q=g.c2p(B?k.mean-k.sd:k.q1,!0),V=B?g.c2p(k.mean+k.sd,!0):g.c2p(k.q3,!0),ne=A.constrain(B?g.c2p(k.mean,!0):g.c2p(k.med,!0),Math.min(q,V)+1,Math.max(q,V)-1),ee=k.lf===void 0||a.boxpoints===!1||B,$=g.c2p(ee?k.min:k.lf,!0),J=g.c2p(ee?k.max:k.uf,!0),K=g.c2p(k.ln,!0),te=g.c2p(k.un,!0);c?M.select(this).attr("d","M"+ne+","+j+"V"+Z+"M"+q+","+P+"V"+I+(T?"H"+K+"L"+ne+","+Z+"L"+te+","+I:"")+"H"+V+"V"+P+(T?"H"+te+"L"+ne+","+j+"L"+K+","+P:"")+"Z"+(y?"M"+q+","+z+"H"+$+"M"+V+","+z+"H"+J+(x===0?"":"M"+$+","+U+"V"+R+"M"+J+","+U+"V"+R):"")):M.select(this).attr("d","M"+j+","+ne+"H"+Z+"M"+P+","+q+"H"+I+(T?"V"+K+"L"+Z+","+ne+"L"+I+","+te:"")+"V"+V+"H"+P+(T?"V"+te+"L"+j+","+ne+"L"+P+","+K:"")+"Z"+(y?"M"+z+","+q+"V"+$+"M"+z+","+V+"V"+J+(x===0?"":"M"+U+","+$+"H"+R+"M"+U+","+J+"H"+R):""))})}function _(s,n,a,r){var i=n.x,l=n.y,u=r.bdPos,c=r.bPos,g=a.boxpoints||a.points;A.seedPseudoRandom();var f=s.selectAll("g.points").data(g?function(v){return v.forEach(function(d){d.t=r,d.trace=a}),v}:[]);f.enter().append("g").attr("class","points"),f.exit().remove();var b=f.selectAll("path").data(function(v){var d,m,x=v.pts2,y=Math.max((v.max-v.min)/10,v.q3-v.q1),T=1e-9*y,h=.01*y,E=[],k=0;if(a.jitter){if(y===0)for(k=1,E=new Array(x.length),d=0;d<x.length;d++)E[d]=1;else for(d=0;d<x.length;d++){var L=Math.max(0,d-5),P=x[L].v,I=Math.min(x.length-1,d+5),z=x[I].v;g!=="all"&&(x[d].v<v.lf?z=Math.min(z,v.lf):P=Math.max(P,v.uf));var F=Math.sqrt(h*(I-L)/(z-P+T))||0;F=A.constrain(Math.abs(F),0,1),E.push(F),k=Math.max(F,k)}m=2*a.jitter/(k||1)}for(d=0;d<x.length;d++){var U=x[d],R=U.v,j=a.jitter?m*E[d]*(A.pseudoRandom()-.5):0,Z=v.pos+c+u*(a.pointpos+j);a.orientation==="h"?(U.y=Z,U.x=R):(U.x=Z,U.y=R),g==="suspectedoutliers"&&R<v.uo&&R>v.lo&&(U.so=!0)}return x});b.enter().append("path").classed("point",!0),b.exit().remove(),b.call(o.translatePoints,i,l)}function p(s,n,a,r){var i,l,u=n.val,c=n.pos,g=!!c.rangebreaks,f=r.bPos,b=r.bPosPxOffset||0,v=a.boxmean||(a.meanline||{}).visible;Array.isArray(r.bdPos)?(i=r.bdPos[0],l=r.bdPos[1]):(i=r.bdPos,l=r.bdPos);var d=s.selectAll("path.mean").data(a.type==="box"&&a.boxmean||a.type==="violin"&&a.box.visible&&a.meanline.visible?A.identity:[]);d.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),d.exit().remove(),d.each(function(m){var x=c.c2l(m.pos+f,!0),y=c.l2p(x-i)+b,T=c.l2p(x+l)+b,h=g?(y+T)/2:c.l2p(x)+b,E=u.c2p(m.mean,!0),k=u.c2p(m.mean-m.sd,!0),L=u.c2p(m.mean+m.sd,!0);a.orientation==="h"?M.select(this).attr("d","M"+E+","+y+"V"+T+(v==="sd"?"m0,0L"+k+","+h+"L"+E+","+y+"L"+L+","+h+"Z":"")):M.select(this).attr("d","M"+y+","+E+"H"+T+(v==="sd"?"m0,0L"+h+","+k+"L"+y+","+E+"L"+h+","+L+"Z":""))})}Y.exports={plot:function(s,n,a,r){var i=s._context.staticPlot,l=n.xaxis,u=n.yaxis;A.makeTraceGroups(r,a,"trace boxes").each(function(c){var g,f,b=M.select(this),v=c[0],d=v.t,m=v.trace;d.wdPos=d.bdPos*m.whiskerwidth,m.visible!==!0||d.empty?b.remove():(m.orientation==="h"?(g=u,f=l):(g=l,f=u),w(b,{pos:g,val:f},m,d,i),_(b,{x:l,y:u},m,d),p(b,{pos:g,val:f},m,d))})},plotBoxAndWhiskers:w,plotPoints:_,plotBoxMean:p}},8264:function(Y){Y.exports=function(O,e){var M,A,o=O.cd,w=O.xaxis,_=O.yaxis,p=[];if(e===!1)for(M=0;M<o.length;M++)for(A=0;A<(o[M].pts||[]).length;A++)o[M].pts[A].selected=0;else for(M=0;M<o.length;M++)for(A=0;A<(o[M].pts||[]).length;A++){var s=o[M].pts[A],n=w.c2p(s.x),a=_.c2p(s.y);e.contains([n,a],null,s.i,O)?(p.push({pointNumber:s.i,x:w.c2d(s.x),y:_.c2d(s.y)}),s.selected=1):s.selected=0}return p}},25776:function(Y,O,e){var M=e(33428),A=e(76308),o=e(43616);Y.exports={style:function(w,_,p){var s=p||M.select(w).selectAll("g.trace.boxes");s.style("opacity",function(n){return n[0].trace.opacity}),s.each(function(n){var a=M.select(this),r=n[0].trace,i=r.line.width;function l(g,f,b,v){g.style("stroke-width",f+"px").call(A.stroke,b).call(A.fill,v)}var u=a.selectAll("path.box");if(r.type==="candlestick")u.each(function(g){if(!g.empty){var f=M.select(this),b=r[g.dir];l(f,b.line.width,b.line.color,b.fillcolor),f.style("opacity",r.selectedpoints&&!g.selected?.3:1)}});else{l(u,i,r.line.color,r.fillcolor),a.selectAll("path.mean").style({"stroke-width":i,"stroke-dasharray":2*i+"px,"+i+"px"}).call(A.stroke,r.line.color);var c=a.selectAll("path.point");o.pointStyle(c,r,w)}})},styleOnSelect:function(w,_,p){var s=_[0].trace,n=p.selectAll("path.point");s.selectedpoints?o.selectedPointStyle(n,s):o.pointStyle(n,s,w)}}},64216:function(Y,O,e){var M=e(3400).extendFlat,A=e(29736).axisHoverFormat,o=e(20279),w=e(63188);function _(p){return{line:{color:M({},w.line.color,{dflt:p}),width:w.line.width,editType:"style"},fillcolor:w.fillcolor,editType:"style"}}Y.exports={xperiod:o.xperiod,xperiod0:o.xperiod0,xperiodalignment:o.xperiodalignment,xhoverformat:A("x"),yhoverformat:A("y"),x:o.x,open:o.open,high:o.high,low:o.low,close:o.close,line:{width:M({},w.line.width,{}),editType:"style"},increasing:_(o.increasing.line.color.dflt),decreasing:_(o.decreasing.line.color.dflt),text:o.text,hovertext:o.hovertext,whiskerwidth:M({},w.whiskerwidth,{dflt:0}),hoverlabel:o.hoverlabel}},46283:function(Y,O,e){var M=e(3400),A=e(54460),o=e(1220),w=e(42812).calcCommon;function _(p,s,n,a){return{min:n,q1:Math.min(p,a),med:a,q3:Math.max(p,a),max:s}}Y.exports=function(p,s){var n=p._fullLayout,a=A.getFromId(p,s.xaxis),r=A.getFromId(p,s.yaxis),i=a.makeCalcdata(s,"x"),l=o(s,a,"x",i).vals,u=w(p,s,i,l,r,_);return u.length?(M.extendFlat(u[0].t,{num:n._numBoxes,dPos:M.distinctVals(l).minDiff/2,posLetter:"x",valLetter:"y"}),n._numBoxes++,u):[{t:{empty:!0}}]}},64588:function(Y,O,e){var M=e(3400),A=e(76308),o=e(52744),w=e(31147),_=e(64216);function p(s,n,a,r){var i=a(r+".line.color");a(r+".line.width",n.line.width),a(r+".fillcolor",A.addOpacity(i,.5))}Y.exports=function(s,n,a,r){function i(l,u){return M.coerce(s,n,_,l,u)}o(s,n,i,r)?(w(s,n,r,i,{x:!0}),i("xhoverformat"),i("yhoverformat"),i("line.width"),p(0,n,i,"increasing"),p(0,n,i,"decreasing"),i("text"),i("hovertext"),i("whiskerwidth"),r._requestRangeslider[n.xaxis]=!0):n.visible=!1}},61712:function(Y,O,e){Y.exports={moduleType:"trace",name:"candlestick",basePlotModule:e(57952),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e(64216),layoutAttributes:e(16560),supplyLayoutDefaults:e(68832).supplyLayoutDefaults,crossTraceCalc:e(96404).crossTraceCalc,supplyDefaults:e(64588),calc:e(46283),plot:e(18728).plot,layerName:"boxlayer",style:e(25776).style,hoverPoints:e(18720).hoverPoints,selectPoints:e(97384)}},93504:function(Y,O,e){var M=e(63856),A=e(31780);Y.exports=function(o,w,_,p,s){p("a")||(p("da"),p("a0")),p("b")||(p("db"),p("b0")),function(n,a,r,i){["aaxis","baxis"].forEach(function(l){var u=l.charAt(0),c=n[l]||{},g=A.newContainer(a,l),f={noAutotickangles:!0,noTicklabelstep:!0,tickfont:"x",id:u+"axis",letter:u,font:a.font,name:l,data:n[u],calendar:a.calendar,dfltColor:i,bgColor:r.paper_bgcolor,autotypenumbersDflt:r.autotypenumbers,fullLayout:r};M(c,g,f),g._categories=g._categories||[],n[l]||c.type==="-"||(n[l]={type:c.type})})}(o,w,_,s)}},51676:function(Y,O,e){var M=e(3400).isArrayOrTypedArray;function A(o,w){if(!M(o)||w>=10)return null;for(var _=1/0,p=-1/0,s=o.length,n=0;n<s;n++){var a=o[n];if(M(a)){var r=A(a,w+1);r&&(_=Math.min(r[0],_),p=Math.max(r[1],p))}else _=Math.min(a,_),p=Math.max(a,p)}return[_,p]}Y.exports=function(o){return A(o,0)}},85720:function(Y,O,e){var M=e(25376),A=e(98692),o=e(22548),w=M({editType:"calc"});w.family.dflt='"Open Sans", verdana, arial, sans-serif',w.size.dflt=12,w.color.dflt=o.defaultLine,Y.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:A,baxis:A,font:w,color:{valType:"color",dflt:o.defaultLine,editType:"plot"},transforms:void 0}},77712:function(Y,O,e){var M=e(3400).isArrayOrTypedArray;Y.exports=function(A,o,w,_){var p,s,n,a,r,i,l,u,c,g,f,b,v,d=M(w)?"a":"b",m=(d==="a"?A.aaxis:A.baxis).smoothing,x=d==="a"?A.a2i:A.b2j,y=d==="a"?w:_,T=d==="a"?_:w,h=d==="a"?o.a.length:o.b.length,E=d==="a"?o.b.length:o.a.length,k=Math.floor(d==="a"?A.b2j(T):A.a2i(T)),L=d==="a"?function(ne){return A.evalxy([],ne,k)}:function(ne){return A.evalxy([],k,ne)};m&&(n=Math.max(0,Math.min(E-2,k)),a=k-n,s=d==="a"?function(ne,ee){return A.dxydi([],ne,n,ee,a)}:function(ne,ee){return A.dxydj([],n,ne,a,ee)});var P=x(y[0]),I=x(y[1]),z=P<I?1:-1,F=1e-8*(I-P),U=z>0?Math.floor:Math.ceil,R=z>0?Math.ceil:Math.floor,j=z>0?Math.min:Math.max,Z=z>0?Math.max:Math.min,B=U(P+F),q=R(I-F),V=[[l=L(P)]];for(p=B;p*z<q*z;p+=z)r=[],f=Z(P,p),v=(b=j(I,p+z))-f,i=Math.max(0,Math.min(h-2,Math.floor(.5*(f+b)))),u=L(b),m&&(c=s(i,f-i),g=s(i,b-i),r.push([l[0]+c[0]/3*v,l[1]+c[1]/3*v]),r.push([u[0]-g[0]/3*v,u[1]-g[1]/3*v])),r.push(u),V.push(r),l=u;return V}},98692:function(Y,O,e){var M=e(25376),A=e(22548),o=e(94724),w=e(29736).descriptionWithDates,_=e(67824).overrideAll,p=e(98192).u,s=e(92880).extendFlat;Y.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:M({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:o.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:s({},o.labelalias,{editType:"calc"}),tickfont:M({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:w("tick label")},tickformatstops:_(o.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:A.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:s({},p,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:s({},p,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:A.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:M({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},63856:function(Y,O,e){var M=e(85720),A=e(76308).addOpacity,o=e(24040),w=e(3400),_=e(26332),p=e(95936),s=e(42568),n=e(22416),a=e(78344),r=e(52976);Y.exports=function(i,l,u){var c=u.letter,g=u.font||{},f=M[c+"axis"];function b(z,F){return w.coerce(i,l,f,z,F)}function v(z,F){return w.coerce2(i,l,f,z,F)}u.name&&(l._name=u.name,l._id=u.name),b("autotypenumbers",u.autotypenumbersDflt);var d=b("type");d==="-"&&(u.data&&function(z,F){if(z.type==="-"){var U=z._id.charAt(0),R=z[U+"calendar"];z.type=r(F,R,{autotypenumbers:z.autotypenumbers})}}(l,u.data),l.type==="-"?l.type="linear":d=i.type=l.type),b("smoothing"),b("cheatertype"),b("showticklabels"),b("labelprefix",c+" = "),b("labelsuffix"),b("showtickprefix"),b("showticksuffix"),b("separatethousands"),b("tickformat"),b("exponentformat"),b("minexponent"),b("showexponent"),b("categoryorder"),b("tickmode"),b("tickvals"),b("ticktext"),b("tick0"),b("dtick"),l.tickmode==="array"&&(b("arraytick0"),b("arraydtick")),b("labelpadding"),l._hovertitle=c,d==="date"&&o.getComponentMethod("calendars","handleDefaults")(i,l,"calendar",u.calendar),a(l,u.fullLayout),l.c2p=w.identity;var m=b("color",u.dfltColor),x=m===i.color?m:g.color;b("title.text")&&(w.coerceFont(b,"title.font",{family:g.family,size:w.bigFont(g.size),color:x}),b("title.offset")),b("tickangle"),b("autorange",!l.isValidRange(i.range))&&b("rangemode"),b("range"),l.cleanRange(),b("fixedrange"),_(i,l,b,d),s(i,l,b,d,u),p(i,l,b,d,u),n(i,l,b,{data:u.data,dataAttr:c});var y=v("gridcolor",A(m,.3)),T=v("gridwidth"),h=v("griddash"),E=b("showgrid");E||(delete l.gridcolor,delete l.gridwidth,delete l.griddash);var k=v("startlinecolor",m),L=v("startlinewidth",T);b("startline",l.showgrid||!!k||!!L)||(delete l.startlinecolor,delete l.startlinewidth);var P=v("endlinecolor",m),I=v("endlinewidth",T);return b("endline",l.showgrid||!!P||!!I)||(delete l.endlinecolor,delete l.endlinewidth),E?(b("minorgridcount"),b("minorgridwidth",T),b("minorgriddash",h),b("minorgridcolor",A(y,.06)),l.minorgridcount||(delete l.minorgridwidth,delete l.minorgriddash,delete l.minorgridcolor)):(delete l.gridcolor,delete l.gridwidth,delete l.griddash),l.showticklabels==="none"&&(delete l.tickfont,delete l.tickangle,delete l.showexponent,delete l.exponentformat,delete l.minexponent,delete l.tickformat,delete l.showticksuffix,delete l.showtickprefix),l.showticksuffix||delete l.ticksuffix,l.showtickprefix||delete l.tickprefix,b("tickmode"),l}},58744:function(Y,O,e){var M=e(54460),A=e(3400).isArray1D,o=e(60776),w=e(51676),_=e(19216),p=e(14724),s=e(24944),n=e(26136),a=e(51512),r=e(2872),i=e(81e3);Y.exports=function(l,u){var c=M.getFromId(l,u.xaxis),g=M.getFromId(l,u.yaxis),f=u.aaxis,b=u.baxis,v=u.x,d=u.y,m=[];v&&A(v)&&m.push("x"),d&&A(d)&&m.push("y"),m.length&&r(u,f,b,"a","b",m);var x=u._a=u._a||u.a,y=u._b=u._b||u.b;v=u._x||u.x,d=u._y||u.y;var T={};if(u._cheater){var h=f.cheatertype==="index"?x.length:x,E=b.cheatertype==="index"?y.length:y;v=o(h,E,u.cheaterslope)}u._x=v=n(v),u._y=d=n(d),a(v,x,y),a(d,x,y),i(u),u.setScale();var k=w(v),L=w(d),P=.5*(k[1]-k[0]),I=.5*(k[1]+k[0]),z=.5*(L[1]-L[0]),F=.5*(L[1]+L[0]),U=1.3;return k=[I-P*U,I+P*U],L=[F-z*U,F+z*U],u._extremes[c._id]=M.findExtremes(c,k,{padded:!0}),u._extremes[g._id]=M.findExtremes(g,L,{padded:!0}),_(u,"a","b"),_(u,"b","a"),p(u,f),p(u,b),T.clipsegments=s(u._xctrl,u._yctrl,f,b),T.x=v,T.y=d,T.a=x,T.b=y,[T]}},24944:function(Y){Y.exports=function(O,e,M,A){var o,w,_,p=[],s=!!M.smoothing,n=!!A.smoothing,a=O[0].length-1,r=O.length-1;for(o=0,w=[],_=[];o<=a;o++)w[o]=O[0][o],_[o]=e[0][o];for(p.push({x:w,y:_,bicubic:s}),o=0,w=[],_=[];o<=r;o++)w[o]=O[o][a],_[o]=e[o][a];for(p.push({x:w,y:_,bicubic:n}),o=a,w=[],_=[];o>=0;o--)w[a-o]=O[r][o],_[a-o]=e[r][o];for(p.push({x:w,y:_,bicubic:s}),o=r,w=[],_=[];o>=0;o--)w[r-o]=O[o][0],_[r-o]=e[o][0];return p.push({x:w,y:_,bicubic:n}),p}},19216:function(Y,O,e){var M=e(54460),A=e(92880).extendFlat;Y.exports=function(o,w,_){var p,s,n,a,r,i,l,u,c,g,f,b,v,d,m=o["_"+w],x=o[w+"axis"],y=x._gridlines=[],T=x._minorgridlines=[],h=x._boundarylines=[],E=o["_"+_],k=o[_+"axis"];x.tickmode==="array"&&(x.tickvals=m.slice());var L=o._xctrl,P=o._yctrl,I=L[0].length,z=L.length,F=o._a.length,U=o._b.length;M.prepTicks(x),x.tickmode==="array"&&delete x.tickvals;var R=x.smoothing?3:1;function j(B){var q,V,ne,ee,$,J,K,te,ie,ae,se,ce,de=[],ge=[],ve={};if(w==="b")for(V=o.b2j(B),ne=Math.floor(Math.max(0,Math.min(U-2,V))),ee=V-ne,ve.length=U,ve.crossLength=F,ve.xy=function(be){return o.evalxy([],be,V)},ve.dxy=function(be,me){return o.dxydi([],be,ne,me,ee)},q=0;q<F;q++)J=Math.min(F-2,q),K=q-J,te=o.evalxy([],q,V),k.smoothing&&q>0&&(ie=o.dxydi([],q-1,ne,0,ee),de.push($[0]+ie[0]/3),ge.push($[1]+ie[1]/3),ae=o.dxydi([],q-1,ne,1,ee),de.push(te[0]-ae[0]/3),ge.push(te[1]-ae[1]/3)),de.push(te[0]),ge.push(te[1]),$=te;else for(q=o.a2i(B),J=Math.floor(Math.max(0,Math.min(F-2,q))),K=q-J,ve.length=F,ve.crossLength=U,ve.xy=function(be){return o.evalxy([],q,be)},ve.dxy=function(be,me){return o.dxydj([],J,be,K,me)},V=0;V<U;V++)ne=Math.min(U-2,V),ee=V-ne,te=o.evalxy([],q,V),k.smoothing&&V>0&&(se=o.dxydj([],J,V-1,K,0),de.push($[0]+se[0]/3),ge.push($[1]+se[1]/3),ce=o.dxydj([],J,V-1,K,1),de.push(te[0]-ce[0]/3),ge.push(te[1]-ce[1]/3)),de.push(te[0]),ge.push(te[1]),$=te;return ve.axisLetter=w,ve.axis=x,ve.crossAxis=k,ve.value=B,ve.constvar=_,ve.index=u,ve.x=de,ve.y=ge,ve.smoothing=k.smoothing,ve}function Z(B){var q,V,ne,ee,$,J=[],K=[],te={};if(te.length=m.length,te.crossLength=E.length,w==="b")for(ne=Math.max(0,Math.min(U-2,B)),$=Math.min(1,Math.max(0,B-ne)),te.xy=function(ie){return o.evalxy([],ie,B)},te.dxy=function(ie,ae){return o.dxydi([],ie,ne,ae,$)},q=0;q<I;q++)J[q]=L[B*R][q],K[q]=P[B*R][q];else for(V=Math.max(0,Math.min(F-2,B)),ee=Math.min(1,Math.max(0,B-V)),te.xy=function(ie){return o.evalxy([],B,ie)},te.dxy=function(ie,ae){return o.dxydj([],V,ie,ee,ae)},q=0;q<z;q++)J[q]=L[q][B*R],K[q]=P[q][B*R];return te.axisLetter=w,te.axis=x,te.crossAxis=k,te.value=m[B],te.constvar=_,te.index=B,te.x=J,te.y=K,te.smoothing=k.smoothing,te}if(x.tickmode==="array"){for(a=5e-15,i=(r=[Math.floor((m.length-1-x.arraytick0)/x.arraydtick*(1+a)),Math.ceil(-x.arraytick0/x.arraydtick/(1+a))].sort(function(B,q){return B-q}))[0]-1,l=r[1]+1,u=i;u<l;u++)(s=x.arraytick0+x.arraydtick*u)<0||s>m.length-1||y.push(A(Z(s),{color:x.gridcolor,width:x.gridwidth,dash:x.griddash}));for(u=i;u<l;u++)if(n=x.arraytick0+x.arraydtick*u,f=Math.min(n+x.arraydtick,m.length-1),!(n<0||n>m.length-1||f<0||f>m.length-1))for(b=m[n],v=m[f],p=0;p<x.minorgridcount;p++)(d=f-n)<=0||(g=b+(v-b)*(p+1)/(x.minorgridcount+1)*(x.arraydtick/d))<m[0]||g>m[m.length-1]||T.push(A(j(g),{color:x.minorgridcolor,width:x.minorgridwidth,dash:x.minorgriddash}));x.startline&&h.push(A(Z(0),{color:x.startlinecolor,width:x.startlinewidth})),x.endline&&h.push(A(Z(m.length-1),{color:x.endlinecolor,width:x.endlinewidth}))}else{for(a=5e-15,i=(r=[Math.floor((m[m.length-1]-x.tick0)/x.dtick*(1+a)),Math.ceil((m[0]-x.tick0)/x.dtick/(1+a))].sort(function(B,q){return B-q}))[0],l=r[1],u=i;u<=l;u++)c=x.tick0+x.dtick*u,y.push(A(j(c),{color:x.gridcolor,width:x.gridwidth,dash:x.griddash}));for(u=i-1;u<l+1;u++)for(c=x.tick0+x.dtick*u,p=0;p<x.minorgridcount;p++)(g=c+x.dtick*(p+1)/(x.minorgridcount+1))<m[0]||g>m[m.length-1]||T.push(A(j(g),{color:x.minorgridcolor,width:x.minorgridwidth,dash:x.minorgriddash}));x.startline&&h.push(A(j(m[0]),{color:x.startlinecolor,width:x.startlinewidth})),x.endline&&h.push(A(j(m[m.length-1]),{color:x.endlinecolor,width:x.endlinewidth}))}}},14724:function(Y,O,e){var M=e(54460),A=e(92880).extendFlat;Y.exports=function(o,w){var _,p,s,n=w._labels=[],a=w._gridlines;for(_=0;_<a.length;_++)s=a[_],["start","both"].indexOf(w.showticklabels)!==-1&&(p=M.tickText(w,s.value),A(p,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:s.xy(0),dxy:s.dxy(0,0),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:_===0,isLast:_===a.length-1}),n.push(p)),["end","both"].indexOf(w.showticklabels)!==-1&&(p=M.tickText(w,s.value),A(p,{endAnchor:!1,xy:s.xy(s.crossLength-1),dxy:s.dxy(s.crossLength-2,1),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:_===0,isLast:_===a.length-1}),n.push(p))}},62284:function(Y){Y.exports=function(O,e,M,A){var o=O[0]-e[0],w=O[1]-e[1],_=M[0]-e[0],p=M[1]-e[1],s=Math.pow(o*o+w*w,.25),n=Math.pow(_*_+p*p,.25),a=(n*n*o-s*s*_)*A,r=(n*n*w-s*s*p)*A,i=n*(s+n)*3,l=s*(s+n)*3;return[[e[0]+(i&&a/i),e[1]+(i&&r/i)],[e[0]-(l&&a/l),e[1]-(l&&r/l)]]}},60776:function(Y,O,e){var M=e(3400).isArrayOrTypedArray;Y.exports=function(A,o,w){var _,p,s,n,a,r,i=[],l=M(A)?A.length:A,u=M(o)?o.length:o,c=M(A)?A:null,g=M(o)?o:null;c&&(s=(c.length-1)/(c[c.length-1]-c[0])/(l-1)),g&&(n=(g.length-1)/(g[g.length-1]-g[0])/(u-1));var f=1/0,b=-1/0;for(p=0;p<u;p++)for(i[p]=[],a=g?(g[p]-g[0])*n:p/(u-1),_=0;_<l;_++)r=(c?(c[_]-c[0])*s:_/(l-1))-a*w,f=Math.min(r,f),b=Math.max(r,b),i[p][_]=r;var v=1/(b-f),d=-f*v;for(p=0;p<u;p++)for(_=0;_<l;_++)i[p][_]=v*i[p][_]+d;return i}},30180:function(Y,O,e){var M=e(62284),A=e(3400).ensureArray;function o(w,_,p){var s=-.5*p[0]+1.5*_[0],n=-.5*p[1]+1.5*_[1];return[(2*s+w[0])/3,(2*n+w[1])/3]}Y.exports=function(w,_,p,s,n,a){var r,i,l,u,c,g,f,b,v,d,m=p[0].length,x=p.length,y=n?3*m-2:m,T=a?3*x-2:x;for(w=A(w,T),_=A(_,T),l=0;l<T;l++)w[l]=A(w[l],y),_[l]=A(_[l],y);for(i=0,u=0;i<x;i++,u+=a?3:1)for(c=w[u],g=_[u],f=p[i],b=s[i],r=0,l=0;r<m;r++,l+=n?3:1)c[l]=f[r],g[l]=b[r];if(n)for(i=0,u=0;i<x;i++,u+=a?3:1){for(r=1,l=3;r<m-1;r++,l+=3)v=M([p[i][r-1],s[i][r-1]],[p[i][r],s[i][r]],[p[i][r+1],s[i][r+1]],n),w[u][l-1]=v[0][0],_[u][l-1]=v[0][1],w[u][l+1]=v[1][0],_[u][l+1]=v[1][1];d=o([w[u][0],_[u][0]],[w[u][2],_[u][2]],[w[u][3],_[u][3]]),w[u][1]=d[0],_[u][1]=d[1],d=o([w[u][y-1],_[u][y-1]],[w[u][y-3],_[u][y-3]],[w[u][y-4],_[u][y-4]]),w[u][y-2]=d[0],_[u][y-2]=d[1]}if(a)for(l=0;l<y;l++){for(u=3;u<T-3;u+=3)v=M([w[u-3][l],_[u-3][l]],[w[u][l],_[u][l]],[w[u+3][l],_[u+3][l]],a),w[u-1][l]=v[0][0],_[u-1][l]=v[0][1],w[u+1][l]=v[1][0],_[u+1][l]=v[1][1];d=o([w[0][l],_[0][l]],[w[2][l],_[2][l]],[w[3][l],_[3][l]]),w[1][l]=d[0],_[1][l]=d[1],d=o([w[T-1][l],_[T-1][l]],[w[T-3][l],_[T-3][l]],[w[T-4][l],_[T-4][l]]),w[T-2][l]=d[0],_[T-2][l]=d[1]}if(n&&a)for(u=1;u<T;u+=(u+1)%3==0?2:1){for(l=3;l<y-3;l+=3)v=M([w[u][l-3],_[u][l-3]],[w[u][l],_[u][l]],[w[u][l+3],_[u][l+3]],n),w[u][l-1]=.5*(w[u][l-1]+v[0][0]),_[u][l-1]=.5*(_[u][l-1]+v[0][1]),w[u][l+1]=.5*(w[u][l+1]+v[1][0]),_[u][l+1]=.5*(_[u][l+1]+v[1][1]);d=o([w[u][0],_[u][0]],[w[u][2],_[u][2]],[w[u][3],_[u][3]]),w[u][1]=.5*(w[u][1]+d[0]),_[u][1]=.5*(_[u][1]+d[1]),d=o([w[u][y-1],_[u][y-1]],[w[u][y-3],_[u][y-3]],[w[u][y-4],_[u][y-4]]),w[u][y-2]=.5*(w[u][y-2]+d[0]),_[u][y-2]=.5*(_[u][y-2]+d[1])}return[w,_]}},24588:function(Y){Y.exports={RELATIVE_CULL_TOLERANCE:1e-6}},26435:function(Y){Y.exports=function(O,e,M){return e&&M?function(A,o,w,_,p){var s,n,a,r,i,l;A||(A=[]),o*=3,w*=3;var u=_*_,c=1-_,g=c*c,f=c*_*2,b=-3*g,v=3*(g-f),d=3*(f-u),m=3*u,x=p*p,y=x*p,T=1-p,h=T*T,E=h*T;for(l=0;l<O.length;l++)s=b*(i=O[l])[w][o]+v*i[w][o+1]+d*i[w][o+2]+m*i[w][o+3],n=b*i[w+1][o]+v*i[w+1][o+1]+d*i[w+1][o+2]+m*i[w+1][o+3],a=b*i[w+2][o]+v*i[w+2][o+1]+d*i[w+2][o+2]+m*i[w+2][o+3],r=b*i[w+3][o]+v*i[w+3][o+1]+d*i[w+3][o+2]+m*i[w+3][o+3],A[l]=E*s+3*(h*p*n+T*x*a)+y*r;return A}:e?function(A,o,w,_,p){var s,n,a,r;A||(A=[]),o*=3;var i=_*_,l=1-_,u=l*l,c=l*_*2,g=-3*u,f=3*(u-c),b=3*(c-i),v=3*i,d=1-p;for(a=0;a<O.length;a++)s=g*(r=O[a])[w][o]+f*r[w][o+1]+b*r[w][o+2]+v*r[w][o+3],n=g*r[w+1][o]+f*r[w+1][o+1]+b*r[w+1][o+2]+v*r[w+1][o+3],A[a]=d*s+p*n;return A}:M?function(A,o,w,_,p){var s,n,a,r,i,l;A||(A=[]),w*=3;var u=p*p,c=u*p,g=1-p,f=g*g,b=f*g;for(i=0;i<O.length;i++)s=(l=O[i])[w][o+1]-l[w][o],n=l[w+1][o+1]-l[w+1][o],a=l[w+2][o+1]-l[w+2][o],r=l[w+3][o+1]-l[w+3][o],A[i]=b*s+3*(f*p*n+g*u*a)+c*r;return A}:function(A,o,w,_,p){var s,n,a,r;A||(A=[]);var i=1-p;for(a=0;a<O.length;a++)s=(r=O[a])[w][o+1]-r[w][o],n=r[w+1][o+1]-r[w+1][o],A[a]=i*s+p*n;return A}}},24464:function(Y){Y.exports=function(O,e,M){return e&&M?function(A,o,w,_,p){var s,n,a,r,i,l;A||(A=[]),o*=3,w*=3;var u=_*_,c=u*_,g=1-_,f=g*g,b=f*g,v=p*p,d=1-p,m=d*d,x=d*p*2,y=-3*m,T=3*(m-x),h=3*(x-v),E=3*v;for(l=0;l<O.length;l++)s=y*(i=O[l])[w][o]+T*i[w+1][o]+h*i[w+2][o]+E*i[w+3][o],n=y*i[w][o+1]+T*i[w+1][o+1]+h*i[w+2][o+1]+E*i[w+3][o+1],a=y*i[w][o+2]+T*i[w+1][o+2]+h*i[w+2][o+2]+E*i[w+3][o+2],r=y*i[w][o+3]+T*i[w+1][o+3]+h*i[w+2][o+3]+E*i[w+3][o+3],A[l]=b*s+3*(f*_*n+g*u*a)+c*r;return A}:e?function(A,o,w,_,p){var s,n,a,r,i,l;A||(A=[]),o*=3;var u=p*p,c=u*p,g=1-p,f=g*g,b=f*g;for(i=0;i<O.length;i++)s=(l=O[i])[w+1][o]-l[w][o],n=l[w+1][o+1]-l[w][o+1],a=l[w+1][o+2]-l[w][o+2],r=l[w+1][o+3]-l[w][o+3],A[i]=b*s+3*(f*p*n+g*u*a)+c*r;return A}:M?function(A,o,w,_,p){var s,n,a,r;A||(A=[]),w*=3;var i=1-_,l=p*p,u=1-p,c=u*u,g=u*p*2,f=-3*c,b=3*(c-g),v=3*(g-l),d=3*l;for(a=0;a<O.length;a++)s=f*(r=O[a])[w][o]+b*r[w+1][o]+v*r[w+2][o]+d*r[w+3][o],n=f*r[w][o+1]+b*r[w+1][o+1]+v*r[w+2][o+1]+d*r[w+3][o+1],A[a]=i*s+_*n;return A}:function(A,o,w,_,p){var s,n,a,r;A||(A=[]);var i=1-_;for(a=0;a<O.length;a++)s=(r=O[a])[w+1][o]-r[w][o],n=r[w+1][o+1]-r[w][o+1],A[a]=i*s+_*n;return A}}},29056:function(Y){Y.exports=function(O,e,M,A,o){var w=e-2,_=M-2;return A&&o?function(p,s,n){var a,r,i,l,u,c;p||(p=[]);var g=Math.max(0,Math.min(Math.floor(s),w)),f=Math.max(0,Math.min(Math.floor(n),_)),b=Math.max(0,Math.min(1,s-g)),v=Math.max(0,Math.min(1,n-f));g*=3,f*=3;var d=b*b,m=d*b,x=1-b,y=x*x,T=y*x,h=v*v,E=h*v,k=1-v,L=k*k,P=L*k;for(c=0;c<O.length;c++)a=T*(u=O[c])[f][g]+3*(y*b*u[f][g+1]+x*d*u[f][g+2])+m*u[f][g+3],r=T*u[f+1][g]+3*(y*b*u[f+1][g+1]+x*d*u[f+1][g+2])+m*u[f+1][g+3],i=T*u[f+2][g]+3*(y*b*u[f+2][g+1]+x*d*u[f+2][g+2])+m*u[f+2][g+3],l=T*u[f+3][g]+3*(y*b*u[f+3][g+1]+x*d*u[f+3][g+2])+m*u[f+3][g+3],p[c]=P*a+3*(L*v*r+k*h*i)+E*l;return p}:A?function(p,s,n){p||(p=[]);var a,r,i,l,u,c,g=Math.max(0,Math.min(Math.floor(s),w)),f=Math.max(0,Math.min(Math.floor(n),_)),b=Math.max(0,Math.min(1,s-g)),v=Math.max(0,Math.min(1,n-f));g*=3;var d=b*b,m=d*b,x=1-b,y=x*x,T=y*x,h=1-v;for(u=0;u<O.length;u++)a=h*(c=O[u])[f][g]+v*c[f+1][g],r=h*c[f][g+1]+v*c[f+1][g+1],i=h*c[f][g+2]+v*c[f+1][g+1],l=h*c[f][g+3]+v*c[f+1][g+1],p[u]=T*a+3*(y*b*r+x*d*i)+m*l;return p}:o?function(p,s,n){p||(p=[]);var a,r,i,l,u,c,g=Math.max(0,Math.min(Math.floor(s),w)),f=Math.max(0,Math.min(Math.floor(n),_)),b=Math.max(0,Math.min(1,s-g)),v=Math.max(0,Math.min(1,n-f));f*=3;var d=v*v,m=d*v,x=1-v,y=x*x,T=y*x,h=1-b;for(u=0;u<O.length;u++)a=h*(c=O[u])[f][g]+b*c[f][g+1],r=h*c[f+1][g]+b*c[f+1][g+1],i=h*c[f+2][g]+b*c[f+2][g+1],l=h*c[f+3][g]+b*c[f+3][g+1],p[u]=T*a+3*(y*v*r+x*d*i)+m*l;return p}:function(p,s,n){p||(p=[]);var a,r,i,l,u=Math.max(0,Math.min(Math.floor(s),w)),c=Math.max(0,Math.min(Math.floor(n),_)),g=Math.max(0,Math.min(1,s-u)),f=Math.max(0,Math.min(1,n-c)),b=1-f,v=1-g;for(i=0;i<O.length;i++)a=v*(l=O[i])[c][u]+g*l[c][u+1],r=v*l[c+1][u]+g*l[c+1][u+1],p[i]=b*a+f*r;return p}}},38356:function(Y,O,e){var M=e(3400),A=e(86411),o=e(93504),w=e(85720),_=e(22548);Y.exports=function(p,s,n,a){function r(l,u){return M.coerce(p,s,w,l,u)}s._clipPathId="clip"+s.uid+"carpet";var i=r("color",_.defaultLine);M.coerceFont(r,"font"),r("carpet"),o(p,s,a,r,i),s.a&&s.b?(s.a.length<3&&(s.aaxis.smoothing=0),s.b.length<3&&(s.baxis.smoothing=0),A(p,s,r)||(s.visible=!1),s._cheater&&r("cheaterslope")):s.visible=!1}},95856:function(Y,O,e){Y.exports={attributes:e(85720),supplyDefaults:e(38356),plot:e(164),calc:e(58744),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e(57952),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},50948:function(Y){Y.exports=function(O,e){for(var M,A=O._fullData.length,o=0;o<A;o++){var w=O._fullData[o];if(w.index!==e.index&&w.type==="carpet"&&(M||(M=w),w.carpet===e.carpet))return w}return M}},53416:function(Y){Y.exports=function(O,e,M){if(O.length===0)return"";var A,o=[],w=M?3:1;for(A=0;A<O.length;A+=w)o.push(O[A]+","+e[A]),M&&A<O.length-w&&(o.push("C"),o.push([O[A+1]+","+e[A+1],O[A+2]+","+e[A+2]+" "].join(" ")));return o.join(M?"":"L")}},87072:function(Y,O,e){var M=e(3400).isArrayOrTypedArray;Y.exports=function(A,o,w){var _;for(M(A)?A.length>o.length&&(A=A.slice(0,o.length)):A=[],_=0;_<o.length;_++)A[_]=w(o[_]);return A}},15584:function(Y){Y.exports=function(O,e,M,A,o,w){var _=o[0]*O.dpdx(e),p=o[1]*O.dpdy(M),s=1,n=1;if(w){var a=Math.sqrt(o[0]*o[0]+o[1]*o[1]),r=Math.sqrt(w[0]*w[0]+w[1]*w[1]),i=(o[0]*w[0]+o[1]*w[1])/a/r;n=Math.max(0,i)}var l=180*Math.atan2(p,_)/Math.PI;return l<-90?(l+=180,s=-s):l>90&&(l-=180,s=-s),{angle:l,flip:s,p:O.c2p(A,e,M),offsetMultplier:n}}},164:function(Y,O,e){var M=e(33428),A=e(43616),o=e(87072),w=e(53416),_=e(15584),p=e(72736),s=e(3400),n=s.strRotate,a=s.strTranslate,r=e(84284);function i(f,b,v,d,m,x,y){var T="const-"+m+"-lines",h=v.selectAll("."+T).data(x);h.enter().append("path").classed(T,!0).style("vector-effect",y?"none":"non-scaling-stroke"),h.each(function(E){var k=E,L=k.x,P=k.y,I=o([],L,f.c2p),z=o([],P,b.c2p),F="M"+w(I,z,k.smoothing);M.select(this).attr("d",F).style("stroke-width",k.width).style("stroke",k.color).style("stroke-dasharray",A.dashStyle(k.dash,k.width)).style("fill","none")}),h.exit().remove()}function l(f,b,v,d,m,x,y,T){var h=x.selectAll("text."+T).data(y);h.enter().append("text").classed(T,!0);var E=0,k={};return h.each(function(L,P){var I;if(L.axis.tickangle==="auto")I=_(d,b,v,L.xy,L.dxy);else{var z=(L.axis.tickangle+180)*Math.PI/180;I=_(d,b,v,L.xy,[Math.cos(z),Math.sin(z)])}P||(k={angle:I.angle,flip:I.flip});var F=(L.endAnchor?-1:1)*I.flip,U=M.select(this).attr({"text-anchor":F>0?"start":"end","data-notex":1}).call(A.font,L.font).text(L.text).call(p.convertToTspans,f),R=A.bBox(this);U.attr("transform",a(I.p[0],I.p[1])+n(I.angle)+a(L.axis.labelpadding*F,.3*R.height)),E=Math.max(E,R.width+L.axis.labelpadding)}),h.exit().remove(),k.maxExtent=E,k}Y.exports=function(f,b,v,d){var m=f._context.staticPlot,x=b.xaxis,y=b.yaxis,T=f._fullLayout._clips;s.makeTraceGroups(d,v,"trace").each(function(h){var E=M.select(this),k=h[0],L=k.trace,P=L.aaxis,I=L.baxis,z=s.ensureSingle(E,"g","minorlayer"),F=s.ensureSingle(E,"g","majorlayer"),U=s.ensureSingle(E,"g","boundarylayer"),R=s.ensureSingle(E,"g","labellayer");E.style("opacity",L.opacity),i(x,y,F,0,"a",P._gridlines,!0),i(x,y,F,0,"b",I._gridlines,!0),i(x,y,z,0,"a",P._minorgridlines,!0),i(x,y,z,0,"b",I._minorgridlines,!0),i(x,y,U,0,"a-boundary",P._boundarylines,m),i(x,y,U,0,"b-boundary",I._boundarylines,m);var j=l(f,x,y,L,0,R,P._labels,"a-label"),Z=l(f,x,y,L,0,R,I._labels,"b-label");(function(B,q,V,ne,ee,$,J,K){var te,ie,ae,se,ce=s.aggNums(Math.min,null,V.a),de=s.aggNums(Math.max,null,V.a),ge=s.aggNums(Math.min,null,V.b),ve=s.aggNums(Math.max,null,V.b);te=.5*(ce+de),ie=ge,ae=V.ab2xy(te,ie,!0),se=V.dxyda_rough(te,ie),J.angle===void 0&&s.extendFlat(J,_(V,ee,$,ae,V.dxydb_rough(te,ie))),g(B,q,V,0,ae,se,V.aaxis,ee,$,J,"a-title"),te=ce,ie=.5*(ge+ve),ae=V.ab2xy(te,ie,!0),se=V.dxydb_rough(te,ie),K.angle===void 0&&s.extendFlat(K,_(V,ee,$,ae,V.dxyda_rough(te,ie))),g(B,q,V,0,ae,se,V.baxis,ee,$,K,"b-title")})(f,R,L,0,x,y,j,Z),function(B,q,V,ne,ee){var $,J,K,te,ie=V.select("#"+B._clipPathId);ie.size()||(ie=V.append("clipPath").classed("carpetclip",!0));var ae=s.ensureSingle(ie,"path","carpetboundary"),se=q.clipsegments,ce=[];for(te=0;te<se.length;te++)$=se[te],J=o([],$.x,ne.c2p),K=o([],$.y,ee.c2p),ce.push(w(J,K,$.bicubic));var de="M"+ce.join("L")+"Z";ie.attr("id",B._clipPathId),ae.attr("d",de)}(L,k,T,x,y)})};var u=r.LINE_SPACING,c=(1-r.MID_SHIFT)/u+1;function g(f,b,v,d,m,x,y,T,h,E,k){var L=[];y.title.text&&L.push(y.title.text);var P=b.selectAll("text."+k).data(L),I=E.maxExtent;P.enter().append("text").classed(k,!0),P.each(function(){var z=_(v,T,h,m,x);["start","both"].indexOf(y.showticklabels)===-1&&(I=0);var F=y.title.font.size;I+=F+y.title.offset;var U=(E.angle+(E.flip<0?180:0)-z.angle+450)%360,R=U>90&&U<270,j=M.select(this);j.text(y.title.text).call(p.convertToTspans,f),R&&(I=(-p.lineCount(j)+c)*u*F-I),j.attr("transform",a(z.p[0],z.p[1])+n(z.angle)+a(0,I)).attr("text-anchor","middle").call(A.font,y.title.font)}),P.exit().remove()}},81e3:function(Y,O,e){var M=e(24588),A=e(14952).findBin,o=e(30180),w=e(29056),_=e(26435),p=e(24464);Y.exports=function(s){var n=s._a,a=s._b,r=n.length,i=a.length,l=s.aaxis,u=s.baxis,c=n[0],g=n[r-1],f=a[0],b=a[i-1],v=n[n.length-1]-n[0],d=a[a.length-1]-a[0],m=v*M.RELATIVE_CULL_TOLERANCE,x=d*M.RELATIVE_CULL_TOLERANCE;c-=m,g+=m,f-=x,b+=x,s.isVisible=function(y,T){return y>c&&y<g&&T>f&&T<b},s.isOccluded=function(y,T){return y<c||y>g||T<f||T>b},s.setScale=function(){var y=s._x,T=s._y,h=o(s._xctrl,s._yctrl,y,T,l.smoothing,u.smoothing);s._xctrl=h[0],s._yctrl=h[1],s.evalxy=w([s._xctrl,s._yctrl],r,i,l.smoothing,u.smoothing),s.dxydi=_([s._xctrl,s._yctrl],l.smoothing,u.smoothing),s.dxydj=p([s._xctrl,s._yctrl],l.smoothing,u.smoothing)},s.i2a=function(y){var T=Math.max(0,Math.floor(y[0]),r-2),h=y[0]-T;return(1-h)*n[T]+h*n[T+1]},s.j2b=function(y){var T=Math.max(0,Math.floor(y[1]),r-2),h=y[1]-T;return(1-h)*a[T]+h*a[T+1]},s.ij2ab=function(y){return[s.i2a(y[0]),s.j2b(y[1])]},s.a2i=function(y){var T=Math.max(0,Math.min(A(y,n),r-2)),h=n[T],E=n[T+1];return Math.max(0,Math.min(r-1,T+(y-h)/(E-h)))},s.b2j=function(y){var T=Math.max(0,Math.min(A(y,a),i-2)),h=a[T],E=a[T+1];return Math.max(0,Math.min(i-1,T+(y-h)/(E-h)))},s.ab2ij=function(y){return[s.a2i(y[0]),s.b2j(y[1])]},s.i2c=function(y,T){return s.evalxy([],y,T)},s.ab2xy=function(y,T,h){if(!h&&(y<n[0]||y>n[r-1]|T<a[0]||T>a[i-1]))return[!1,!1];var E=s.a2i(y),k=s.b2j(T),L=s.evalxy([],E,k);if(h){var P,I,z,F,U=0,R=0,j=[];y<n[0]?(P=0,I=0,U=(y-n[0])/(n[1]-n[0])):y>n[r-1]?(P=r-2,I=1,U=(y-n[r-1])/(n[r-1]-n[r-2])):I=E-(P=Math.max(0,Math.min(r-2,Math.floor(E)))),T<a[0]?(z=0,F=0,R=(T-a[0])/(a[1]-a[0])):T>a[i-1]?(z=i-2,F=1,R=(T-a[i-1])/(a[i-1]-a[i-2])):F=k-(z=Math.max(0,Math.min(i-2,Math.floor(k)))),U&&(s.dxydi(j,P,z,I,F),L[0]+=j[0]*U,L[1]+=j[1]*U),R&&(s.dxydj(j,P,z,I,F),L[0]+=j[0]*R,L[1]+=j[1]*R)}return L},s.c2p=function(y,T,h){return[T.c2p(y[0]),h.c2p(y[1])]},s.p2x=function(y,T,h){return[T.p2c(y[0]),h.p2c(y[1])]},s.dadi=function(y){var T=Math.max(0,Math.min(n.length-2,y));return n[T+1]-n[T]},s.dbdj=function(y){var T=Math.max(0,Math.min(a.length-2,y));return a[T+1]-a[T]},s.dxyda=function(y,T,h,E){var k=s.dxydi(null,y,T,h,E),L=s.dadi(y,h);return[k[0]/L,k[1]/L]},s.dxydb=function(y,T,h,E){var k=s.dxydj(null,y,T,h,E),L=s.dbdj(T,E);return[k[0]/L,k[1]/L]},s.dxyda_rough=function(y,T,h){var E=v*(h||.1),k=s.ab2xy(y+E,T,!0),L=s.ab2xy(y-E,T,!0);return[.5*(k[0]-L[0])/E,.5*(k[1]-L[1])/E]},s.dxydb_rough=function(y,T,h){var E=d*(h||.1),k=s.ab2xy(y,T+E,!0),L=s.ab2xy(y,T-E,!0);return[.5*(k[0]-L[0])/E,.5*(k[1]-L[1])/E]},s.dpdx=function(y){return y._m},s.dpdy=function(y){return y._m}}},51512:function(Y,O,e){var M=e(3400);Y.exports=function(A,o,w){var _,p,s,n=[],a=[],r=A[0].length,i=A.length;function l(B,q){var V,ne=0,ee=0;return B>0&&(V=A[q][B-1])!==void 0&&(ee++,ne+=V),B<r-1&&(V=A[q][B+1])!==void 0&&(ee++,ne+=V),q>0&&(V=A[q-1][B])!==void 0&&(ee++,ne+=V),q<i-1&&(V=A[q+1][B])!==void 0&&(ee++,ne+=V),ne/Math.max(1,ee)}var u,c,g,f,b,v,d,m,x,y,T,h=0;for(_=0;_<r;_++)for(p=0;p<i;p++)A[p][_]===void 0&&(n.push(_),a.push(p),A[p][_]=l(_,p)),h=Math.max(h,Math.abs(A[p][_]));if(!n.length)return A;var E=0,k=0,L=n.length;do{for(E=0,s=0;s<L;s++){_=n[s],p=a[s];var P,I,z,F,U,R,j=0,Z=0;_===0?(z=o[U=Math.min(r-1,2)],F=o[1],P=A[p][U],Z+=(I=A[p][1])+(I-P)*(o[0]-F)/(F-z),j++):_===r-1&&(z=o[U=Math.max(0,r-3)],F=o[r-2],P=A[p][U],Z+=(I=A[p][r-2])+(I-P)*(o[r-1]-F)/(F-z),j++),(_===0||_===r-1)&&p>0&&p<i-1&&(u=w[p+1]-w[p],Z+=((c=w[p]-w[p-1])*A[p+1][_]+u*A[p-1][_])/(c+u),j++),p===0?(z=w[R=Math.min(i-1,2)],F=w[1],P=A[R][_],Z+=(I=A[1][_])+(I-P)*(w[0]-F)/(F-z),j++):p===i-1&&(z=w[R=Math.max(0,i-3)],F=w[i-2],P=A[R][_],Z+=(I=A[i-2][_])+(I-P)*(w[i-1]-F)/(F-z),j++),(p===0||p===i-1)&&_>0&&_<r-1&&(u=o[_+1]-o[_],Z+=((c=o[_]-o[_-1])*A[p][_+1]+u*A[p][_-1])/(c+u),j++),j?Z/=j:(g=o[_+1]-o[_],f=o[_]-o[_-1],m=(b=w[p+1]-w[p])*(v=w[p]-w[p-1])*(b+v),Z=((d=g*f*(g+f))*(v*A[p+1][_]+b*A[p-1][_])+m*(f*A[p][_+1]+g*A[p][_-1]))/(m*(f+g)+d*(v+b))),E+=(y=(x=Z-A[p][_])/h)*y,T=j?0:.85,A[p][_]+=x*(1+T)}E=Math.sqrt(E)}while(k++<100&&E>1e-5);return M.log("Smoother converged to",E,"after",k,"iterations"),A}},86411:function(Y,O,e){var M=e(3400).isArray1D;Y.exports=function(A,o,w){var _=w("x"),p=_&&_.length,s=w("y"),n=s&&s.length;if(!p&&!n)return!1;if(o._cheater=!_,p&&!M(_)||n&&!M(s))o._length=null;else{var a=p?_.length:1/0;n&&(a=Math.min(a,s.length)),o.a&&o.a.length&&(a=Math.min(a,o.a.length)),o.b&&o.b.length&&(a=Math.min(a,o.b.length)),o._length=a}return!0}},83372:function(Y,O,e){var M=e(21776).Ks,A=e(6096),o=e(49084),w=e(45464),_=e(22548).defaultLine,p=e(92880).extendFlat,s=A.marker.line;Y.exports=p({locations:{valType:"data_array",editType:"calc"},locationmode:A.locationmode,z:{valType:"data_array",editType:"calc"},geojson:p({},A.geojson,{}),featureidkey:A.featureidkey,text:p({},A.text,{}),hovertext:p({},A.hovertext,{}),marker:{line:{color:p({},s.color,{dflt:_}),width:p({},s.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:A.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:A.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:p({},w.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:M(),showlegend:p({},w.showlegend,{dflt:!1})},o("",{cLetter:"z",editTypeOverride:"calc"}))},7924:function(Y,O,e){var M=e(38248),A=e(39032).BADNUM,o=e(47128),w=e(20148),_=e(4500);function p(s){return s&&typeof s=="string"}Y.exports=function(s,n){var a,r=n._length,i=new Array(r);a=n.geojson?function(f){return p(f)||M(f)}:p;for(var l=0;l<r;l++){var u=i[l]={},c=n.locations[l],g=n.z[l];a(c)&&M(g)?(u.loc=c,u.z=g):(u.loc=null,u.z=A),u.index=l}return w(i,n),o(s,n,{vals:n.z,containerStr:"",cLetter:"z"}),_(i,n),i}},30972:function(Y,O,e){var M=e(3400),A=e(27260),o=e(83372);Y.exports=function(w,_,p,s){function n(u,c){return M.coerce(w,_,o,u,c)}var a=n("locations"),r=n("z");if(a&&a.length&&M.isArrayOrTypedArray(r)&&r.length){_._length=Math.min(a.length,r.length);var i,l=n("geojson");(typeof l=="string"&&l!==""||M.isPlainObject(l))&&(i="geojson-id"),n("locationmode",i)==="geojson-id"&&n("featureidkey"),n("text"),n("hovertext"),n("hovertemplate"),n("marker.line.width")&&n("marker.line.color"),n("marker.opacity"),A(w,_,s,n,{prefix:"",cLetter:"z"}),M.coerceSelectionMarkerOpacity(_,n)}else _.visible=!1}},52428:function(Y){Y.exports=function(O,e,M,A,o){O.location=e.location,O.z=e.z;var w=A[o];return w.fIn&&w.fIn.properties&&(O.properties=w.fIn.properties),O.ct=w.ct,O}},69224:function(Y,O,e){var M=e(54460),A=e(83372),o=e(3400).fillText;Y.exports=function(w,_,p){var s,n,a,r,i=w.cd,l=i[0].trace,u=w.subplot,c=[_,p],g=[_+360,p];for(n=0;n<i.length;n++)if(r=!1,(s=i[n])._polygons){for(a=0;a<s._polygons.length;a++)s._polygons[a].contains(c)&&(r=!r),s._polygons[a].contains(g)&&(r=!r);if(r)break}if(r&&s)return w.x0=w.x1=w.xa.c2p(s.ct),w.y0=w.y1=w.ya.c2p(s.ct),w.index=s.index,w.location=s.loc,w.z=s.z,w.zLabel=M.tickText(u.mockAxis,u.mockAxis.c2l(s.z),"hover").text,w.hovertemplate=s.hovertemplate,function(f,b,v){if(!b.hovertemplate){var d=v.hi||b.hoverinfo,m=String(v.loc),x=d==="all"?A.hoverinfo.flags:d.split("+"),y=x.indexOf("name")!==-1,T=x.indexOf("location")!==-1,h=x.indexOf("z")!==-1,E=x.indexOf("text")!==-1,k=[];!y&&T?f.nameOverride=m:(y&&(f.nameOverride=b.name),T&&k.push(m)),h&&k.push(f.zLabel),E&&o(v,b,k),f.extraText=k.join("<br>")}}(w,l,s),[w]}},54272:function(Y,O,e){Y.exports={attributes:e(83372),supplyDefaults:e(30972),colorbar:e(96288),calc:e(7924),calcGeoJSON:e(88364).calcGeoJSON,plot:e(88364).plot,style:e(7947).style,styleOnSelect:e(7947).styleOnSelect,hoverPoints:e(69224),eventData:e(52428),selectPoints:e(17328),moduleType:"trace",name:"choropleth",basePlotModule:e(10816),categories:["geo","noOpacity","showLegend"],meta:{}}},88364:function(Y,O,e){var M=e(33428),A=e(3400),o=e(27144),w=e(59972).getTopojsonFeatures,_=e(19280).findExtremes,p=e(7947).style;Y.exports={calcGeoJSON:function(s,n){for(var a=s[0].trace,r=n[a.geo],i=r._subplot,l=a.locationmode,u=a._length,c=l==="geojson-id"?o.extractTraceFeature(s):w(a,i.topojson),g=[],f=[],b=0;b<u;b++){var v=s[b],d=l==="geojson-id"?v.fOut:o.locationToFeature(l,v.loc,c);if(d){v.geojson=d,v.ct=d.properties.ct,v._polygons=o.feature2polygons(d);var m=o.computeBbox(d);g.push(m[0],m[2]),f.push(m[1],m[3])}else v.geojson=null}if(r.fitbounds==="geojson"&&l==="geojson-id"){var x=o.computeBbox(o.getTraceGeojson(a));g=[x[0],x[2]],f=[x[1],x[3]]}var y={padded:!0};a._extremes.lon=_(r.lonaxis._ax,g,y),a._extremes.lat=_(r.lataxis._ax,f,y)},plot:function(s,n,a){var r=n.layers.backplot.select(".choroplethlayer");A.makeTraceGroups(r,a,"trace choropleth").each(function(i){var l=M.select(this).selectAll("path.choroplethlocation").data(A.identity);l.enter().append("path").classed("choroplethlocation",!0),l.exit().remove(),p(s,i)})}}},17328:function(Y){Y.exports=function(O,e){var M,A,o,w,_,p=O.cd,s=O.xaxis,n=O.yaxis,a=[];if(e===!1)for(M=0;M<p.length;M++)p[M].selected=0;else for(M=0;M<p.length;M++)(o=(A=p[M]).ct)&&(w=s.c2p(o),_=n.c2p(o),e.contains([w,_],null,M,O)?(a.push({pointNumber:M,lon:o[0],lat:o[1]}),A.selected=1):A.selected=0);return a}},7947:function(Y,O,e){var M=e(33428),A=e(76308),o=e(43616),w=e(8932);function _(p,s){var n=s[0].trace,a=s[0].node3.selectAll(".choroplethlocation"),r=n.marker||{},i=r.line||{},l=w.makeColorScaleFuncFromTrace(n);a.each(function(u){M.select(this).attr("fill",l(u.z)).call(A.stroke,u.mlc||i.color).call(o.dashLine,"",u.mlw||i.width||0).style("opacity",r.opacity)}),o.selectedPointStyle(a,n)}Y.exports={style:function(p,s){s&&_(0,s)},styleOnSelect:function(p,s){var n=s[0].node3,a=s[0].trace;a.selectedpoints?o.selectedPointStyle(n.selectAll(".choroplethlocation"),a):_(0,s)}}},45608:function(Y,O,e){var M=e(83372),A=e(49084),o=e(21776).Ks,w=e(45464),_=e(92880).extendFlat;Y.exports=_({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:_({},M.featureidkey,{}),below:{valType:"string",editType:"plot"},text:M.text,hovertext:M.hovertext,marker:{line:{color:_({},M.marker.line.color,{editType:"plot"}),width:_({},M.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:_({},M.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:_({},M.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:_({},M.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:M.hoverinfo,hovertemplate:o({},{keys:["properties"]}),showlegend:_({},w.showlegend,{dflt:!1})},A("",{cLetter:"z",editTypeOverride:"calc"}))},13504:function(Y,O,e){var M=e(38248),A=e(3400),o=e(8932),w=e(43616),_=e(44808).makeBlank,p=e(27144);function s(n){var a,r=n[0].trace,i=r._opts;if(r.selectedpoints){for(var l=w.makeSelectedPointStyleFns(r),u=0;u<n.length;u++){var c=n[u];c.fOut&&(c.fOut.properties.mo2=l.selectedOpacityFn(c))}a={type:"identity",property:"mo2"}}else a=A.isArrayOrTypedArray(r.marker.opacity)?{type:"identity",property:"mo"}:r.marker.opacity;return A.extendFlat(i.fill.paint,{"fill-opacity":a}),A.extendFlat(i.line.paint,{"line-opacity":a}),i}Y.exports={convert:function(n){var a=n[0].trace,r=a.visible===!0&&a._length!==0,i={layout:{visibility:"none"},paint:{}},l={layout:{visibility:"none"},paint:{}},u=a._opts={fill:i,line:l,geojson:_()};if(!r)return u;var c=p.extractTraceFeature(n);if(!c)return u;var g,f,b,v=o.makeColorScaleFuncFromTrace(a),d=a.marker,m=d.line||{};A.isArrayOrTypedArray(d.opacity)&&(g=function(k){var L=k.mo;return M(L)?+A.constrain(L,0,1):0}),A.isArrayOrTypedArray(m.color)&&(f=function(k){return k.mlc}),A.isArrayOrTypedArray(m.width)&&(b=function(k){return k.mlw});for(var x=0;x<n.length;x++){var y=n[x],T=y.fOut;if(T){var h=T.properties;h.fc=v(y.z),g&&(h.mo=g(y)),f&&(h.mlc=f(y)),b&&(h.mlw=b(y)),y.ct=h.ct,y._polygons=p.feature2polygons(T)}}var E=g?{type:"identity",property:"mo"}:d.opacity;return A.extendFlat(i.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":E}),A.extendFlat(l.paint,{"line-color":f?{type:"identity",property:"mlc"}:m.color,"line-width":b?{type:"identity",property:"mlw"}:m.width,"line-opacity":E}),i.layout.visibility="visible",l.layout.visibility="visible",u.geojson={type:"FeatureCollection",features:c},s(n),u},convertOnSelect:s}},9352:function(Y,O,e){var M=e(3400),A=e(27260),o=e(45608);Y.exports=function(w,_,p,s){function n(l,u){return M.coerce(w,_,o,l,u)}var a=n("locations"),r=n("z"),i=n("geojson");M.isArrayOrTypedArray(a)&&a.length&&M.isArrayOrTypedArray(r)&&r.length&&(typeof i=="string"&&i!==""||M.isPlainObject(i))?(n("featureidkey"),_._length=Math.min(a.length,r.length),n("below"),n("text"),n("hovertext"),n("hovertemplate"),n("marker.line.width")&&n("marker.line.color"),n("marker.opacity"),A(w,_,s,n,{prefix:"",cLetter:"z"}),M.coerceSelectionMarkerOpacity(_,n)):_.visible=!1}},85404:function(Y,O,e){Y.exports={attributes:e(45608),supplyDefaults:e(9352),colorbar:e(96288),calc:e(7924),plot:e(61288),hoverPoints:e(69224),eventData:e(52428),selectPoints:e(17328),styleOnSelect:function(M,A){A&&A[0].trace._glTrace.updateOnSelect(A)},getBelow:function(M,A){for(var o=A.getMapLayers(),w=o.length-2;w>=0;w--){var _=o[w].id;if(typeof _=="string"&&_.indexOf("water")===0){for(var p=w+1;p<o.length;p++)if(typeof(_=o[p].id)=="string"&&_.indexOf("plotly-")===-1)return _}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e(33688),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},61288:function(Y,O,e){var M=e(13504).convert,A=e(13504).convertOnSelect,o=e(47552).traceLayerPrefix;function w(p,s){this.type="choroplethmapbox",this.subplot=p,this.uid=s,this.sourceId="source-"+s,this.layerList=[["fill",o+s+"-fill"],["line",o+s+"-line"]],this.below=null}var _=w.prototype;_.update=function(p){this._update(M(p)),p[0].trace._glTrace=this},_.updateOnSelect=function(p){this._update(A(p))},_._update=function(p){var s=this.subplot,n=this.layerList,a=s.belowLookup["trace-"+this.uid];s.map.getSource(this.sourceId).setData(p.geojson),a!==this.below&&(this._removeLayers(),this._addLayers(p,a),this.below=a);for(var r=0;r<n.length;r++){var i=n[r],l=i[0],u=i[1],c=p[l];s.setOptions(u,"setLayoutProperty",c.layout),c.layout.visibility==="visible"&&s.setOptions(u,"setPaintProperty",c.paint)}},_._addLayers=function(p,s){for(var n=this.subplot,a=this.layerList,r=this.sourceId,i=0;i<a.length;i++){var l=a[i],u=l[0],c=p[u];n.addLayer({type:u,id:l[1],source:r,layout:c.layout,paint:c.paint},s)}},_._removeLayers=function(){for(var p=this.subplot.map,s=this.layerList,n=s.length-1;n>=0;n--)p.removeLayer(s[n][1])},_.dispose=function(){var p=this.subplot.map;this._removeLayers(),p.removeSource(this.sourceId)},Y.exports=function(p,s){var n=s[0].trace,a=new w(p,n.uid),r=a.sourceId,i=M(s),l=a.below=p.belowLookup["trace-"+n.uid];return p.map.addSource(r,{type:"geojson",data:i.geojson}),a._addLayers(i,l),s[0].trace._glTrace=a,a}},86040:function(Y,O,e){var M=e(49084),A=e(29736).axisHoverFormat,o=e(21776).Ks,w=e(52948),_=e(45464),p=e(92880).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:o({editType:"calc"},{keys:["norm"]}),uhoverformat:A("u",1),vhoverformat:A("v",1),whoverformat:A("w",1),xhoverformat:A("x"),yhoverformat:A("y"),zhoverformat:A("z"),showlegend:p({},_.showlegend,{dflt:!1})};p(s,M("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(n){s[n]=w[n]}),s.hoverinfo=p({},_.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,Y.exports=s},83344:function(Y,O,e){var M=e(47128);Y.exports=function(A,o){for(var w=o.u,_=o.v,p=o.w,s=Math.min(o.x.length,o.y.length,o.z.length,w.length,_.length,p.length),n=-1/0,a=1/0,r=0;r<s;r++){var i=w[r],l=_[r],u=p[r],c=Math.sqrt(i*i+l*l+u*u);n=Math.max(n,c),a=Math.min(a,c)}o._len=s,o._normMax=n,M(A,o,{vals:[a,n],containerStr:"",cLetter:"c"})}},6648:function(Y,O,e){var M=e(67792).gl_cone3d,A=e(67792).gl_cone3d.createConeMesh,o=e(3400).simpleMap,w=e(33040).parseColorScale,_=e(8932).extractOpts,p=e(3400).isArrayOrTypedArray,s=e(52094);function n(c,g){this.scene=c,this.uid=g,this.mesh=null,this.data=null}var a=n.prototype;a.handlePick=function(c){if(c.object===this.mesh){var g=c.index=c.data.index,f=this.data.x[g],b=this.data.y[g],v=this.data.z[g],d=this.data.u[g],m=this.data.v[g],x=this.data.w[g];c.traceCoordinate=[f,b,v,d,m,x,Math.sqrt(d*d+m*m+x*x)];var y=this.data.hovertext||this.data.text;return p(y)&&y[g]!==void 0?c.textLabel=y[g]:y&&(c.textLabel=y),!0}};var r={xaxis:0,yaxis:1,zaxis:2},i={tip:1,tail:0,cm:.25,center:.5},l={tip:1,tail:1,cm:.75,center:.5};function u(c,g){var f=c.fullSceneLayout,b=c.dataScale,v={};function d(T,h){var E=f[h],k=b[r[h]];return o(T,function(L){return E.d2l(L)*k})}v.vectors=s(d(g.u,"xaxis"),d(g.v,"yaxis"),d(g.w,"zaxis"),g._len),v.positions=s(d(g.x,"xaxis"),d(g.y,"yaxis"),d(g.z,"zaxis"),g._len);var m=_(g);v.colormap=w(g),v.vertexIntensityBounds=[m.min/g._normMax,m.max/g._normMax],v.coneOffset=i[g.anchor],g.sizemode==="scaled"?v.coneSize=g.sizeref||.5:v.coneSize=g.sizeref&&g._normMax?g.sizeref/g._normMax:.5;var x=M(v),y=g.lightposition;return x.lightPosition=[y.x,y.y,y.z],x.ambient=g.lighting.ambient,x.diffuse=g.lighting.diffuse,x.specular=g.lighting.specular,x.roughness=g.lighting.roughness,x.fresnel=g.lighting.fresnel,x.opacity=g.opacity,g._pad=l[g.anchor]*x.vectorScale*x.coneScale*g._normMax,x}a.update=function(c){this.data=c;var g=u(this.scene,c);this.mesh.update(g)},a.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},Y.exports=function(c,g){var f=c.glplot.gl,b=u(c,g),v=A(f,b),d=new n(c,g.uid);return d.mesh=v,d.data=g,v._trace=d,c.glplot.add(v),d}},86096:function(Y,O,e){var M=e(3400),A=e(27260),o=e(86040);Y.exports=function(w,_,p,s){function n(g,f){return M.coerce(w,_,o,g,f)}var a=n("u"),r=n("v"),i=n("w"),l=n("x"),u=n("y"),c=n("z");a&&a.length&&r&&r.length&&i&&i.length&&l&&l.length&&u&&u.length&&c&&c.length?(n("sizeref"),n("sizemode"),n("anchor"),n("lighting.ambient"),n("lighting.diffuse"),n("lighting.specular"),n("lighting.roughness"),n("lighting.fresnel"),n("lightposition.x"),n("lightposition.y"),n("lightposition.z"),A(w,_,s,n,{prefix:"",cLetter:"c"}),n("text"),n("hovertext"),n("hovertemplate"),n("uhoverformat"),n("vhoverformat"),n("whoverformat"),n("xhoverformat"),n("yhoverformat"),n("zhoverformat"),_._length=null):_.visible=!1}},26048:function(Y,O,e){Y.exports={moduleType:"trace",name:"cone",basePlotModule:e(12536),categories:["gl3d","showLegend"],attributes:e(86040),supplyDefaults:e(86096),colorbar:{min:"cmin",max:"cmax"},calc:e(83344),plot:e(6648),eventData:function(M,A){return M.norm=A.traceCoordinate[6],M},meta:{}}},67104:function(Y,O,e){var M=e(83328),A=e(52904),o=e(29736),w=o.axisHoverFormat,_=o.descriptionOnlyNumbers,p=e(49084),s=e(98192).u,n=e(25376),a=e(92880).extendFlat,r=e(69104),i=r.COMPARISON_OPS2,l=r.INTERVAL_OPS,u=A.line;Y.exports=a({z:M.z,x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:A.xperiod0,yperiod0:A.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,text:M.text,hovertext:M.hovertext,transpose:M.transpose,xtype:M.xtype,ytype:M.ytype,xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z",1),hovertemplate:M.hovertemplate,texttemplate:a({},M.texttemplate,{}),textfont:a({},M.textfont,{}),hoverongaps:M.hoverongaps,connectgaps:a({},M.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:n({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:_("contour label")},operation:{valType:"enumerated",values:[].concat(i).concat(l),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:a({},u.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:s,smoothing:a({},u.smoothing,{}),editType:"plot"}},p("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},20688:function(Y,O,e){var M=e(8932),A=e(19512),o=e(54444),w=e(46960);Y.exports=function(_,p){var s=A(_,p),n=s[0].z;o(p,n);var a,r=p.contours,i=M.extractOpts(p);if(r.coloring==="heatmap"&&i.auto&&p.autocontour===!1){var l=r.start,u=w(r),c=r.size||1,g=Math.floor((u-l)/c)+1;isFinite(c)||(c=1,g=1);var f=l-c/2;a=[f,f+g*c]}else a=n;return M.calc(_,p,{vals:a,cLetter:"z"}),s}},56008:function(Y){Y.exports=function(O,e){var M,A=O[0],o=A.z;switch(e.type){case"levels":var w=Math.min(o[0][0],o[0][1]);for(M=0;M<O.length;M++){var _=O[M];_.prefixBoundary=!_.edgepaths.length&&(w>_.level||_.starts.length&&w===_.level)}break;case"constraint":if(A.prefixBoundary=!1,A.edgepaths.length)return;var p=A.x.length,s=A.y.length,n=-1/0,a=1/0;for(M=0;M<s;M++)a=Math.min(a,o[M][0]),a=Math.min(a,o[M][p-1]),n=Math.max(n,o[M][0]),n=Math.max(n,o[M][p-1]);for(M=1;M<p-1;M++)a=Math.min(a,o[0][M]),a=Math.min(a,o[s-1][M]),n=Math.max(n,o[0][M]),n=Math.max(n,o[s-1][M]);var r,i,l=e.value;switch(e._operation){case">":l>n&&(A.prefixBoundary=!0);break;case"<":(l<a||A.starts.length&&l===a)&&(A.prefixBoundary=!0);break;case"[]":r=Math.min(l[0],l[1]),((i=Math.max(l[0],l[1]))<a||r>n||A.starts.length&&i===a)&&(A.prefixBoundary=!0);break;case"][":r=Math.min(l[0],l[1]),i=Math.max(l[0],l[1]),r<a&&i>n&&(A.prefixBoundary=!0)}}}},55296:function(Y,O,e){var M=e(8932),A=e(41076),o=e(46960);Y.exports={min:"zmin",max:"zmax",calc:function(w,_,p){var s=_.contours,n=_.line,a=s.size||1,r=s.coloring,i=A(_,{isColorbar:!0});if(r==="heatmap"){var l=M.extractOpts(_);p._fillgradient=l.reversescale?M.flipScale(l.colorscale):l.colorscale,p._zrange=[l.min,l.max]}else r==="fill"&&(p._fillcolor=i);p._line={color:r==="lines"?i:n.color,width:s.showlines!==!1?n.width:0,dash:n.dash},p._levels={start:s.start,end:o(s),size:a}}}},93252:function(Y){Y.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},95536:function(Y,O,e){var M=e(38248),A=e(17428),o=e(76308),w=o.addOpacity,_=o.opacity,p=e(69104),s=e(3400).isArrayOrTypedArray,n=p.CONSTRAINT_REDUCTION,a=p.COMPARISON_OPS2;Y.exports=function(r,i,l,u,c,g){var f,b,v,d=i.contours,m=l("contours.operation");d._operation=n[m],function(x,y){var T;a.indexOf(y.operation)===-1?(x("contours.value",[0,1]),s(y.value)?y.value.length>2?y.value=y.value.slice(2):y.length===0?y.value=[0,1]:y.length<2?(T=parseFloat(y.value[0]),y.value=[T,T+1]):y.value=[parseFloat(y.value[0]),parseFloat(y.value[1])]:M(y.value)&&(T=parseFloat(y.value),y.value=[T,T+1])):(x("contours.value",0),M(y.value)||(s(y.value)?y.value=parseFloat(y.value[0]):y.value=0))}(l,d),m==="="?f=d.showlines=!0:(f=l("contours.showlines"),v=l("fillcolor",w((r.line||{}).color||c,.5))),f&&(b=l("line.color",v&&_(v)?w(i.fillcolor,1):c),l("line.width",2),l("line.dash")),l("line.smoothing"),A(l,u,b,g)}},3212:function(Y,O,e){var M=e(69104),A=e(38248);function o(p,s){var n,a=Array.isArray(s);function r(i){return A(i)?+i:null}return M.COMPARISON_OPS2.indexOf(p)!==-1?n=r(a?s[0]:s):M.INTERVAL_OPS.indexOf(p)!==-1?n=a?[r(s[0]),r(s[1])]:[r(s),r(s)]:M.SET_OPS.indexOf(p)!==-1&&(n=a?s.map(r):[r(s)]),n}function w(p){return function(s){s=o(p,s);var n=Math.min(s[0],s[1]),a=Math.max(s[0],s[1]);return{start:n,end:a,size:a-n}}}function _(p){return function(s){return{start:s=o(p,s),end:1/0,size:1/0}}}Y.exports={"[]":w("[]"),"][":w("]["),">":_(">"),"<":_("<"),"=":_("=")}},84952:function(Y){Y.exports=function(O,e,M,A){var o=A("contours.start"),w=A("contours.end"),_=o===!1||w===!1,p=M("contours.size");!(_?e.autocontour=!0:M("autocontour",!1))&&p||M("ncontours")}},82172:function(Y,O,e){var M=e(3400);function A(o){return M.extendFlat({},o,{edgepaths:M.extendDeep([],o.edgepaths),paths:M.extendDeep([],o.paths),starts:M.extendDeep([],o.starts)})}Y.exports=function(o,w){var _,p,s,n=function(i){return i.reverse()},a=function(i){return i};switch(w){case"=":case"<":return o;case">":for(o.length!==1&&M.warn("Contour data invalid for the specified inequality operation."),p=o[0],_=0;_<p.edgepaths.length;_++)p.edgepaths[_]=n(p.edgepaths[_]);for(_=0;_<p.paths.length;_++)p.paths[_]=n(p.paths[_]);for(_=0;_<p.starts.length;_++)p.starts[_]=n(p.starts[_]);return o;case"][":var r=n;n=a,a=r;case"[]":for(o.length!==2&&M.warn("Contour data invalid for the specified inequality range operation."),p=A(o[0]),s=A(o[1]),_=0;_<p.edgepaths.length;_++)p.edgepaths[_]=n(p.edgepaths[_]);for(_=0;_<p.paths.length;_++)p.paths[_]=n(p.paths[_]);for(_=0;_<p.starts.length;_++)p.starts[_]=n(p.starts[_]);for(;s.edgepaths.length;)p.edgepaths.push(a(s.edgepaths.shift()));for(;s.paths.length;)p.paths.push(a(s.paths.shift()));for(;s.starts.length;)p.starts.push(a(s.starts.shift()));return[p]}}},57004:function(Y,O,e){var M=e(3400),A=e(51264),o=e(31147),w=e(95536),_=e(84952),p=e(97680),s=e(39096),n=e(67104);Y.exports=function(a,r,i,l){function u(g,f){return M.coerce(a,r,n,g,f)}if(A(a,r,u,l)){o(a,r,l,u),u("xhoverformat"),u("yhoverformat"),u("text"),u("hovertext"),u("hoverongaps"),u("hovertemplate");var c=u("contours.type")==="constraint";u("connectgaps",M.isArray1D(r.z)),c?w(a,r,u,l,i):(_(a,r,u,function(g){return M.coerce2(a,r,n,g)}),p(a,r,u,l)),r.contours&&r.contours.coloring==="heatmap"&&s(u,l)}else r.visible=!1}},61512:function(Y,O,e){var M=e(3400),A=e(3212),o=e(46960);Y.exports=function(w,_,p){for(var s=w.type==="constraint"?A[w._operation](w.value):w,n=s.size,a=[],r=o(s),i=p.trace._carpetTrace,l=i?{xaxis:i.aaxis,yaxis:i.baxis,x:p.a,y:p.b}:{xaxis:_.xaxis,yaxis:_.yaxis,x:p.x,y:p.y},u=s.start;u<r;u+=n)if(a.push(M.extendFlat({level:u,crossings:{},starts:[],edgepaths:[],paths:[],z:p.z,smoothing:p.trace.line.smoothing},l)),a.length>1e3){M.warn("Too many contours, clipping at 1000",w);break}return a}},46960:function(Y){Y.exports=function(O){return O.end+O.size/1e6}},88748:function(Y,O,e){var M=e(3400),A=e(93252);function o(p,s,n,a){return Math.abs(p[0]-s[0])<n&&Math.abs(p[1]-s[1])<a}function w(p,s,n,a,r){var i,l=s.join(","),u=p.crossings[l],c=function(ie,ae,se){var ce=0,de=0;return ie>20&&ae?ie===208||ie===1114?ce=se[0]===0?1:-1:de=se[1]===0?1:-1:A.BOTTOMSTART.indexOf(ie)!==-1?de=1:A.LEFTSTART.indexOf(ie)!==-1?ce=1:A.TOPSTART.indexOf(ie)!==-1?de=-1:ce=-1,[ce,de]}(u,n,s),g=[_(p,s,[-c[0],-c[1]])],f=p.z.length,b=p.z[0].length,v=s.slice(),d=c.slice();for(i=0;i<1e4;i++){if(u>20?(u=A.CHOOSESADDLE[u][(c[0]||c[1])<0?0:1],p.crossings[l]=A.SADDLEREMAINDER[u]):delete p.crossings[l],!(c=A.NEWDELTA[u])){M.log("Found bad marching index:",u,s,p.level);break}g.push(_(p,s,c)),s[0]+=c[0],s[1]+=c[1],l=s.join(","),o(g[g.length-1],g[g.length-2],a,r)&&g.pop();var m=c[0]&&(s[0]<0||s[0]>b-2)||c[1]&&(s[1]<0||s[1]>f-2);if(s[0]===v[0]&&s[1]===v[1]&&c[0]===d[0]&&c[1]===d[1]||n&&m)break;u=p.crossings[l]}i===1e4&&M.log("Infinite loop in contour?");var x,y,T,h,E,k,L,P,I,z,F,U,R,j,Z,B=o(g[0],g[g.length-1],a,r),q=0,V=.2*p.smoothing,ne=[],ee=0;for(i=1;i<g.length;i++)U=g[i],R=g[i-1],j=U[2]-R[2],Z=U[3]-R[3],q+=L=Math.sqrt(j*j+Z*Z),ne.push(L);var $=q/ne.length*V;function J(ie){return g[ie%g.length]}for(i=g.length-2;i>=ee;i--)if((x=ne[i])<$){for(T=0,y=i-1;y>=ee&&x+ne[y]<$;y--)x+=ne[y];if(B&&i===g.length-2)for(T=0;T<y&&x+ne[T]<$;T++)x+=ne[T];E=i-y+T+1,k=Math.floor((i+y+T+2)/2),h=B||i!==g.length-2?B||y!==-1?E%2?J(k):[(J(k)[0]+J(k+1)[0])/2,(J(k)[1]+J(k+1)[1])/2]:g[0]:g[g.length-1],g.splice(y+1,i-y+1,h),i=y+1,T&&(ee=T),B&&(i===g.length-2?g[T]=g[g.length-1]:i===0&&(g[g.length-1]=g[0]))}for(g.splice(0,ee),i=0;i<g.length;i++)g[i].length=2;if(!(g.length<2))if(B)g.pop(),p.paths.push(g);else{n||M.log("Unclosed interior contour?",p.level,v.join(","),g.join("L"));var K=!1;for(P=0;P<p.edgepaths.length;P++)if(z=p.edgepaths[P],!K&&o(z[0],g[g.length-1],a,r)){g.pop(),K=!0;var te=!1;for(I=0;I<p.edgepaths.length;I++)if(o((F=p.edgepaths[I])[F.length-1],g[0],a,r)){te=!0,g.shift(),p.edgepaths.splice(P,1),I===P?p.paths.push(g.concat(F)):(I>P&&I--,p.edgepaths[I]=F.concat(g,z));break}te||(p.edgepaths[P]=g.concat(z))}for(P=0;P<p.edgepaths.length&&!K;P++)o((z=p.edgepaths[P])[z.length-1],g[0],a,r)&&(g.shift(),p.edgepaths[P]=z.concat(g),K=!0);K||p.edgepaths.push(g)}}function _(p,s,n){var a=s[0]+Math.max(n[0],0),r=s[1]+Math.max(n[1],0),i=p.z[r][a],l=p.xaxis,u=p.yaxis;if(n[1]){var c=(p.level-i)/(p.z[r][a+1]-i),g=(c!==1?(1-c)*l.c2l(p.x[a]):0)+(c!==0?c*l.c2l(p.x[a+1]):0);return[l.c2p(l.l2c(g),!0),u.c2p(p.y[r],!0),a+c,r]}var f=(p.level-i)/(p.z[r+1][a]-i),b=(f!==1?(1-f)*u.c2l(p.y[r]):0)+(f!==0?f*u.c2l(p.y[r+1]):0);return[l.c2p(p.x[a],!0),u.c2p(u.l2c(b),!0),a,r+f]}Y.exports=function(p,s,n){var a,r,i,l;for(s=s||.01,n=n||.01,r=0;r<p.length;r++){for(i=p[r],l=0;l<i.starts.length;l++)w(i,i.starts[l],"edge",s,n);for(a=0;Object.keys(i.crossings).length&&a<1e4;)a++,w(i,Object.keys(i.crossings)[0].split(",").map(Number),void 0,s,n);a===1e4&&M.log("Infinite loop in contour?")}}},38200:function(Y,O,e){var M=e(76308),A=e(55512);Y.exports=function(o,w,_,p,s){s||(s={}),s.isContour=!0;var n=A(o,w,_,p,s);return n&&n.forEach(function(a){var r=a.trace;r.contours.type==="constraint"&&(r.fillcolor&&M.opacity(r.fillcolor)?a.color=M.addOpacity(r.fillcolor,1):r.contours.showlines&&M.opacity(r.line.color)&&(a.color=M.addOpacity(r.line.color,1)))}),n}},66240:function(Y,O,e){Y.exports={attributes:e(67104),supplyDefaults:e(57004),calc:e(20688),plot:e(23676).plot,style:e(52440),colorbar:e(55296),hoverPoints:e(38200),moduleType:"trace",name:"contour",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},17428:function(Y,O,e){var M=e(3400);Y.exports=function(A,o,w,_){if(_||(_={}),A("contours.showlabels")){var p=o.font;M.coerceFont(A,"contours.labelfont",{family:p.family,size:p.size,color:w}),A("contours.labelformat")}_.hasHover!==!1&&A("zhoverformat")}},41076:function(Y,O,e){var M=e(33428),A=e(8932),o=e(46960);Y.exports=function(w){var _=w.contours,p=_.start,s=o(_),n=_.size||1,a=Math.floor((s-p)/n)+1,r=_.coloring==="lines"?0:1,i=A.extractOpts(w);isFinite(n)||(n=1,a=1);var l,u,c=i.reversescale?A.flipScale(i.colorscale):i.colorscale,g=c.length,f=new Array(g),b=new Array(g),v=i.min,d=i.max;if(_.coloring==="heatmap"){for(u=0;u<g;u++)l=c[u],f[u]=l[0]*(d-v)+v,b[u]=l[1];var m=M.extent([v,d,_.start,_.start+n*(a-1)]),x=m[v<d?0:1],y=m[v<d?1:0];x!==v&&(f.splice(0,0,x),b.splice(0,0,b[0])),y!==d&&(f.push(y),b.push(b[b.length-1]))}else{var T=w._input&&typeof w._input.zmin=="number"&&typeof w._input.zmax=="number";for(T&&(p<=v||s>=d)&&(p<=v&&(p=v),s>=d&&(s=d),a=Math.floor((s-p)/n)+1,r=0),u=0;u<g;u++)l=c[u],f[u]=(l[0]*(a+r-1)-r/2)*n+p,b[u]=l[1];(T||w.autocontour)&&(f[0]>v&&(f.unshift(v),b.unshift(b[0])),f[f.length-1]<d&&(f.push(d),b.push(b[b.length-1])))}return A.makeColorScaleFunc({domain:f,range:b},{noNumericCheck:!0})}},72424:function(Y,O,e){var M=e(93252);function A(o,w){var _=(w[0][0]>o?0:1)+(w[0][1]>o?0:2)+(w[1][1]>o?0:4)+(w[1][0]>o?0:8);return _===5||_===10?o>(w[0][0]+w[0][1]+w[1][0]+w[1][1])/4?_===5?713:1114:_===5?104:208:_===15?0:_}Y.exports=function(o){var w,_,p,s,n,a,r,i,l,u=o[0].z,c=u.length,g=u[0].length,f=c===2||g===2;for(_=0;_<c-1;_++)for(s=[],_===0&&(s=s.concat(M.BOTTOMSTART)),_===c-2&&(s=s.concat(M.TOPSTART)),w=0;w<g-1;w++)for(p=s.slice(),w===0&&(p=p.concat(M.LEFTSTART)),w===g-2&&(p=p.concat(M.RIGHTSTART)),n=w+","+_,a=[[u[_][w],u[_][w+1]],[u[_+1][w],u[_+1][w+1]]],l=0;l<o.length;l++)(r=A((i=o[l]).level,a))&&(i.crossings[n]=r,p.indexOf(r)!==-1&&(i.starts.push([w,_]),f&&p.indexOf(r,p.indexOf(r)+1)!==-1&&i.starts.push([w,_])))}},23676:function(Y,O,e){var M=e(33428),A=e(3400),o=e(43616),w=e(8932),_=e(72736),p=e(54460),s=e(78344),n=e(41420),a=e(72424),r=e(88748),i=e(61512),l=e(82172),u=e(56008),c=e(93252),g=c.LABELOPTIMIZER;function f(d,m){var x,y,T,h,E,k,L,P="",I=0,z=d.edgepaths.map(function(B,q){return q}),F=!0;function U(B){return Math.abs(B[1]-m[2][1])<.01}function R(B){return Math.abs(B[0]-m[0][0])<.01}function j(B){return Math.abs(B[0]-m[2][0])<.01}for(;z.length;){for(k=o.smoothopen(d.edgepaths[I],d.smoothing),P+=F?k:k.replace(/^M/,"L"),z.splice(z.indexOf(I),1),x=d.edgepaths[I][d.edgepaths[I].length-1],h=-1,T=0;T<4;T++){if(!x){A.log("Missing end?",I,d);break}for(L=x,Math.abs(L[1]-m[0][1])<.01&&!j(x)?y=m[1]:R(x)?y=m[0]:U(x)?y=m[3]:j(x)&&(y=m[2]),E=0;E<d.edgepaths.length;E++){var Z=d.edgepaths[E][0];Math.abs(x[0]-y[0])<.01?Math.abs(x[0]-Z[0])<.01&&(Z[1]-x[1])*(y[1]-Z[1])>=0&&(y=Z,h=E):Math.abs(x[1]-y[1])<.01?Math.abs(x[1]-Z[1])<.01&&(Z[0]-x[0])*(y[0]-Z[0])>=0&&(y=Z,h=E):A.log("endpt to newendpt is not vert. or horz.",x,y,Z)}if(x=y,h>=0)break;P+="L"+y}if(h===d.edgepaths.length){A.log("unclosed perimeter path");break}I=h,(F=z.indexOf(I)===-1)&&(I=z[0],P+="Z")}for(I=0;I<d.paths.length;I++)P+=o.smoothclosed(d.paths[I],d.smoothing);return P}function b(d,m,x,y){var T=m.width/2,h=m.height/2,E=d.x,k=d.y,L=d.theta,P=Math.cos(L)*T,I=Math.sin(L)*T,z=(E>y.center?y.right-E:E-y.left)/(P+Math.abs(Math.sin(L)*h)),F=(k>y.middle?y.bottom-k:k-y.top)/(Math.abs(I)+Math.cos(L)*h);if(z<1||F<1)return 1/0;var U=g.EDGECOST*(1/(z-1)+1/(F-1));U+=g.ANGLECOST*L*L;for(var R=E-P,j=k-I,Z=E+P,B=k+I,q=0;q<x.length;q++){var V=x[q],ne=Math.cos(V.theta)*V.width/2,ee=Math.sin(V.theta)*V.width/2,$=2*A.segmentDistance(R,j,Z,B,V.x-ne,V.y-ee,V.x+ne,V.y+ee)/(m.height+V.height),J=V.level===m.level,K=J?g.SAMELEVELDISTANCE:1;if($<=K)return 1/0;U+=g.NEIGHBORCOST*(J?g.SAMELEVELFACTOR:1)/($-K)}return U}function v(d){var m,x,y=d.trace._emptypoints,T=[],h=d.z.length,E=d.z[0].length,k=[];for(m=0;m<E;m++)k.push(1);for(m=0;m<h;m++)T.push(k.slice());for(m=0;m<y.length;m++)T[(x=y[m])[0]][x[1]]=0;return d.zmask=T,T}O.plot=function(d,m,x,y){var T=m.xaxis,h=m.yaxis;A.makeTraceGroups(y,x,"contour").each(function(E){var k=M.select(this),L=E[0],P=L.trace,I=L.x,z=L.y,F=P.contours,U=i(F,m,L),R=A.ensureSingle(k,"g","heatmapcoloring"),j=[];F.coloring==="heatmap"&&(j=[E]),n(d,m,j,R),a(U),r(U);var Z=T.c2p(I[0],!0),B=T.c2p(I[I.length-1],!0),q=h.c2p(z[0],!0),V=h.c2p(z[z.length-1],!0),ne=[[Z,V],[B,V],[B,q],[Z,q]],ee=U;F.type==="constraint"&&(ee=l(U,F._operation)),function($,J,K){var te=A.ensureSingle($,"g","contourbg").selectAll("path").data(K.coloring==="fill"?[0]:[]);te.enter().append("path"),te.exit().remove(),te.attr("d","M"+J.join("L")+"Z").style("stroke","none")}(k,ne,F),function($,J,K,te){var ie=te.coloring==="fill"||te.type==="constraint"&&te._operation!=="=",ae="M"+K.join("L")+"Z";ie&&u(J,te);var se=A.ensureSingle($,"g","contourfill").selectAll("path").data(ie?J:[]);se.enter().append("path"),se.exit().remove(),se.each(function(ce){var de=(ce.prefixBoundary?ae:"")+f(ce,K);de?M.select(this).attr("d",de).style("stroke","none"):M.select(this).remove()})}(k,ee,ne,F),function($,J,K,te,ie){var ae=K._context.staticPlot,se=A.ensureSingle($,"g","contourlines"),ce=ie.showlines!==!1,de=ie.showlabels,ge=ce&&de,ve=O.createLines(se,ce||de,J,ae),be=O.createLineClip(se,ge,K,te.trace.uid),me=$.selectAll("g.contourlabels").data(de?[0]:[]);if(me.exit().remove(),me.enter().append("g").classed("contourlabels",!0),de){var Se=[],we=[];A.clearLocationCache();var _e=O.labelFormatter(K,te),oe=o.tester.append("text").attr("data-notex",1).call(o.font,ie.labelfont),le=J[0].xaxis,pe=J[0].yaxis,Ee=le._length,Te=pe._length,Me=le.range,Le=pe.range,Ie=A.aggNums(Math.min,null,te.x),he=A.aggNums(Math.max,null,te.x),xe=A.aggNums(Math.min,null,te.y),ke=A.aggNums(Math.max,null,te.y),ze=Math.max(le.c2p(Ie,!0),0),Re=Math.min(le.c2p(he,!0),Ee),Oe=Math.max(pe.c2p(ke,!0),0),Ve=Math.min(pe.c2p(xe,!0),Te),qe={};Me[0]<Me[1]?(qe.left=ze,qe.right=Re):(qe.left=Re,qe.right=ze),Le[0]<Le[1]?(qe.top=Oe,qe.bottom=Ve):(qe.top=Ve,qe.bottom=Oe),qe.middle=(qe.top+qe.bottom)/2,qe.center=(qe.left+qe.right)/2,Se.push([[qe.left,qe.top],[qe.right,qe.top],[qe.right,qe.bottom],[qe.left,qe.bottom]]);var Je=Math.sqrt(Ee*Ee+Te*Te),ot=c.LABELDISTANCE*Je/Math.max(1,J.length/c.LABELINCREASE);ve.each(function(rt){var dt=O.calcTextOpts(rt.level,_e,oe,K);M.select(this).selectAll("path").each(function(){var _t=A.getVisibleSegment(this,qe,dt.height/2);if(_t&&!(_t.len<(dt.width+dt.height)*c.LABELMIN))for(var yt=Math.min(Math.ceil(_t.len/ot),c.LABELMAX),et=0;et<yt;et++){var nt=O.findBestTextLocation(this,_t,dt,we,qe);if(!nt)break;O.addLabelData(nt,dt,we,Se)}})}),oe.remove(),O.drawLabels(me,we,K,be,ge?Se:null)}de&&!ce&&ve.remove()}(k,U,d,L,F),function($,J,K,te,ie){var ae=te.trace,se=K._fullLayout._clips,ce="clip"+ae.uid,de=se.selectAll("#"+ce).data(ae.connectgaps?[]:[0]);if(de.enter().append("clipPath").classed("contourclip",!0).attr("id",ce),de.exit().remove(),ae.connectgaps===!1){var ge={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:J.xaxis,yaxis:J.yaxis,x:te.x,y:te.y,z:v(te),smoothing:0};a([ge]),r([ge]),u([ge],{type:"levels"}),A.ensureSingle(de,"path","").attr("d",(ge.prefixBoundary?"M"+ie.join("L")+"Z":"")+f(ge,ie))}else ce=null;o.setClipUrl($,ce,K)}(k,m,d,L,ne)})},O.createLines=function(d,m,x,y){var T=x[0].smoothing,h=d.selectAll("g.contourlevel").data(m?x:[]);if(h.exit().remove(),h.enter().append("g").classed("contourlevel",!0),m){var E=h.selectAll("path.openline").data(function(L){return L.pedgepaths||L.edgepaths});E.exit().remove(),E.enter().append("path").classed("openline",!0),E.attr("d",function(L){return o.smoothopen(L,T)}).style("stroke-miterlimit",1).style("vector-effect",y?"none":"non-scaling-stroke");var k=h.selectAll("path.closedline").data(function(L){return L.ppaths||L.paths});k.exit().remove(),k.enter().append("path").classed("closedline",!0),k.attr("d",function(L){return o.smoothclosed(L,T)}).style("stroke-miterlimit",1).style("vector-effect",y?"none":"non-scaling-stroke")}return h},O.createLineClip=function(d,m,x,y){var T=m?"clipline"+y:null,h=x._fullLayout._clips.selectAll("#"+T).data(m?[0]:[]);return h.exit().remove(),h.enter().append("clipPath").classed("contourlineclip",!0).attr("id",T),o.setClipUrl(d,T,x),h},O.labelFormatter=function(d,m){var x=d._fullLayout,y=m.trace,T=y.contours,h={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(T.labelformat)h.tickformat=T.labelformat,s(h,x);else{var E=w.extractOpts(y);if(E&&E.colorbar&&E.colorbar._axis)h=E.colorbar._axis;else{if(T.type==="constraint"){var k=T.value;A.isArrayOrTypedArray(k)?h.range=[k[0],k[k.length-1]]:h.range=[k,k]}else h.range=[T.start,T.end],h.nticks=(T.end-T.start)/T.size;h.range[0]===h.range[1]&&(h.range[1]+=h.range[0]||1),h.nticks||(h.nticks=1e3),s(h,x),p.prepTicks(h),h._tmin=null,h._tmax=null}}return function(L){return p.tickText(h,L).text}},O.calcTextOpts=function(d,m,x,y){var T=m(d);x.text(T).call(_.convertToTspans,y);var h=x.node(),E=o.bBox(h,!0);return{text:T,width:E.width,height:E.height,fontSize:+h.style["font-size"].replace("px",""),level:d,dy:(E.top+E.bottom)/2}},O.findBestTextLocation=function(d,m,x,y,T){var h,E,k,L,P,I=x.width;m.isClosed?(E=m.len/g.INITIALSEARCHPOINTS,h=m.min+E/2,k=m.max):(E=(m.len-I)/(g.INITIALSEARCHPOINTS+1),h=m.min+E+I/2,k=m.max-(E+I)/2);for(var z=1/0,F=0;F<g.ITERATIONS;F++){for(var U=h;U<k;U+=E){var R=A.getTextLocation(d,m.total,U,I),j=b(R,x,y,T);j<z&&(z=j,P=R,L=U)}if(z>2*g.MAXCOST)break;F&&(E/=2),k=(h=L-E/2)+1.5*E}if(z<=g.MAXCOST)return P},O.addLabelData=function(d,m,x,y){var T=m.fontSize,h=m.width+T/3,E=Math.max(0,m.height-T/3),k=d.x,L=d.y,P=d.theta,I=Math.sin(P),z=Math.cos(P),F=function(R,j){return[k+R*z-j*I,L+R*I+j*z]},U=[F(-h/2,-E/2),F(-h/2,E/2),F(h/2,E/2),F(h/2,-E/2)];x.push({text:m.text,x:k,y:L,dy:m.dy,theta:P,level:m.level,width:h,height:E}),y.push(U)},O.drawLabels=function(d,m,x,y,T){var h=d.selectAll("text").data(m,function(L){return L.text+","+L.x+","+L.y+","+L.theta});if(h.exit().remove(),h.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(L){var P=L.x+Math.sin(L.theta)*L.dy,I=L.y-Math.cos(L.theta)*L.dy;M.select(this).text(L.text).attr({x:P,y:I,transform:"rotate("+180*L.theta/Math.PI+" "+P+" "+I+")"}).call(_.convertToTspans,x)}),T){for(var E="",k=0;k<T.length;k++)E+="M"+T[k].join("L")+"Z";A.ensureSingle(y,"path","").attr("d",E)}}},54444:function(Y,O,e){var M=e(54460),A=e(3400);function o(w,_,p){var s={type:"linear",range:[w,_]};return M.autoTicks(s,(_-w)/(p||15)),s}Y.exports=function(w,_){var p=w.contours;if(w.autocontour){var s=w.zmin,n=w.zmax;(w.zauto||s===void 0)&&(s=A.aggNums(Math.min,null,_)),(w.zauto||n===void 0)&&(n=A.aggNums(Math.max,null,_));var a=o(s,n,w.ncontours);p.size=a.dtick,p.start=M.tickFirst(a),a.range.reverse(),p.end=M.tickFirst(a),p.start===s&&(p.start+=p.size),p.end===n&&(p.end-=p.size),p.start>p.end&&(p.start=p.end=(p.start+p.end)/2),w._input.contours||(w._input.contours={}),A.extendFlat(w._input.contours,{start:p.start,end:p.end,size:p.size}),w._input.autocontour=!0}else if(p.type!=="constraint"){var r,i=p.start,l=p.end,u=w._input.contours;i>l&&(p.start=u.start=l,l=p.end=u.end=i,i=p.start),p.size>0||(r=i===l?1:o(i,l,w.ncontours).dtick,u.size=p.size=r)}}},52440:function(Y,O,e){var M=e(33428),A=e(43616),o=e(41648),w=e(41076);Y.exports=function(_){var p=M.select(_).selectAll("g.contour");p.style("opacity",function(s){return s[0].trace.opacity}),p.each(function(s){var n=M.select(this),a=s[0].trace,r=a.contours,i=a.line,l=r.size||1,u=r.start,c=r.type==="constraint",g=!c&&r.coloring==="lines",f=!c&&r.coloring==="fill",b=g||f?w(a):null;n.selectAll("g.contourlevel").each(function(m){M.select(this).selectAll("path").call(A.lineGroupStyle,i.width,g?b(m.level):i.color,i.dash)});var v=r.labelfont;if(n.selectAll("g.contourlabels text").each(function(m){A.font(M.select(this),{family:v.family,size:v.size,color:v.color||(g?b(m.level):i.color)})}),c)n.selectAll("g.contourfill path").style("fill",a.fillcolor);else if(f){var d;n.selectAll("g.contourfill path").style("fill",function(m){return d===void 0&&(d=m.level),b(m.level+.5*l)}),d===void 0&&(d=u),n.selectAll("g.contourbg path").style("fill",b(d-.5*l))}}),o(_)}},97680:function(Y,O,e){var M=e(27260),A=e(17428);Y.exports=function(o,w,_,p,s){var n,a=_("contours.coloring"),r="";a==="fill"&&(n=_("contours.showlines")),n!==!1&&(a!=="lines"&&(r=_("line.color","#000")),_("line.width",.5),_("line.dash")),a!=="none"&&(o.showlegend!==!0&&(w.showlegend=!1),w._dfltShowLegend=!1,M(o,w,p,_,{prefix:"",cLetter:"z"})),_("line.smoothing"),A(_,p,r,s)}},37960:function(Y,O,e){var M=e(83328),A=e(67104),o=e(49084),w=e(92880).extendFlat,_=A.contours;Y.exports=w({carpet:{valType:"string",editType:"calc"},z:M.z,a:M.x,a0:M.x0,da:M.dx,b:M.y,b0:M.y0,db:M.dy,text:M.text,hovertext:M.hovertext,transpose:M.transpose,atype:M.xtype,btype:M.ytype,fillcolor:A.fillcolor,autocontour:A.autocontour,ncontours:A.ncontours,contours:{type:_.type,start:_.start,end:_.end,size:_.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:_.showlines,showlabels:_.showlabels,labelfont:_.labelfont,labelformat:_.labelformat,operation:_.operation,value:_.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:A.line.color,width:A.line.width,dash:A.line.dash,smoothing:A.line.smoothing,editType:"plot"},transforms:void 0},o("",{cLetter:"z",autoColorDflt:!1}))},30572:function(Y,O,e){var M=e(47128),A=e(3400),o=e(2872),w=e(26136),_=e(70448),p=e(11240),s=e(35744),n=e(3252),a=e(50948),r=e(54444);Y.exports=function(i,l){var u=l._carpetTrace=a(i,l);if(u&&u.visible&&u.visible!=="legendonly"){if(!l.a||!l.b){var c=i.data[u.index],g=i.data[l.index];g.a||(g.a=c.a),g.b||(g.b=c.b),n(g,l,l._defaultColor,i._fullLayout)}var f=function(b,v){var d,m,x,y,T,h,E,k=v._carpetTrace,L=k.aaxis,P=k.baxis;L._minDtick=0,P._minDtick=0,A.isArray1D(v.z)&&o(v,L,P,"a","b",["z"]),d=v._a=v._a||v.a,y=v._b=v._b||v.b,d=d?L.makeCalcdata(v,"_a"):[],y=y?P.makeCalcdata(v,"_b"):[],m=v.a0||0,x=v.da||1,T=v.b0||0,h=v.db||1,E=v._z=w(v._z||v.z,v.transpose),v._emptypoints=p(E),_(E,v._emptypoints);var I=A.maxRowLength(E),z=v.xtype==="scaled"?"":d,F=s(v,z,m,x,I,L),U=v.ytype==="scaled"?"":y,R={a:F,b:s(v,U,T,h,E.length,P),z:E};return v.contours.type==="levels"&&v.contours.coloring!=="none"&&M(b,v,{vals:E,containerStr:"",cLetter:"z"}),[R]}(i,l);return r(l,l._z),f}}},3252:function(Y,O,e){var M=e(3400),A=e(51264),o=e(37960),w=e(95536),_=e(84952),p=e(97680);Y.exports=function(s,n,a,r){function i(l,u){return M.coerce(s,n,o,l,u)}if(i("carpet"),s.a&&s.b){if(!A(s,n,i,r,"a","b"))return void(n.visible=!1);i("text"),i("contours.type")==="constraint"?w(s,n,i,r,a,{hasHover:!1}):(_(s,n,i,function(l){return M.coerce2(s,n,o,l)}),p(s,n,i,r,{hasHover:!1}))}else n._defaultColor=a,n._length=null}},40448:function(Y,O,e){Y.exports={attributes:e(37960),supplyDefaults:e(3252),colorbar:e(55296),calc:e(30572),plot:e(94440),style:e(52440),moduleType:"trace",name:"contourcarpet",basePlotModule:e(57952),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},94440:function(Y,O,e){var M=e(33428),A=e(87072),o=e(53416),w=e(43616),_=e(3400),p=e(72424),s=e(88748),n=e(23676),a=e(93252),r=e(82172),i=e(61512),l=e(56008),u=e(50948),c=e(77712);function g(v,d,m){var x=v.getPointAtLength(d),y=v.getPointAtLength(m),T=y.x-x.x,h=y.y-x.y,E=Math.sqrt(T*T+h*h);return[T/E,h/E]}function f(v){var d=Math.sqrt(v[0]*v[0]+v[1]*v[1]);return[v[0]/d,v[1]/d]}function b(v,d){var m=Math.abs(v[0]*d[0]+v[1]*d[1]);return Math.sqrt(1-m*m)/m}Y.exports=function(v,d,m,x){var y=d.xaxis,T=d.yaxis;_.makeTraceGroups(x,m,"contour").each(function(h){var E=M.select(this),k=h[0],L=k.trace,P=L._carpetTrace=u(v,L),I=v.calcdata[P.index][0];if(P.visible&&P.visible!=="legendonly"){var z=k.a,F=k.b,U=L.contours,R=i(U,d,k),j=U.type==="constraint",Z=U._operation,B=j?Z==="="?"lines":"fill":U.coloring,q=[[z[0],F[F.length-1]],[z[z.length-1],F[F.length-1]],[z[z.length-1],F[0]],[z[0],F[0]]];p(R);var V=1e-8*(z[z.length-1]-z[0]),ne=1e-8*(F[F.length-1]-F[0]);s(R,V,ne);var ee,$,J,K,te=R;U.type==="constraint"&&(te=r(R,Z)),function(ce,de){var ge,ve,be,me,Se,we,_e,oe,le;for(ge=0;ge<ce.length;ge++){for(Se=(me=ce[ge]).pedgepaths=[],we=me.ppaths=[],ve=0;ve<me.edgepaths.length;ve++){for(le=me.edgepaths[ve],_e=[],be=0;be<le.length;be++)_e[be]=de(le[be]);Se.push(_e)}for(ve=0;ve<me.paths.length;ve++){for(le=me.paths[ve],oe=[],be=0;be<le.length;be++)oe[be]=de(le[be]);we.push(oe)}}}(R,se);var ie=[];for(K=I.clipsegments.length-1;K>=0;K--)ee=I.clipsegments[K],$=A([],ee.x,y.c2p),J=A([],ee.y,T.c2p),$.reverse(),J.reverse(),ie.push(o($,J,ee.bicubic));var ae="M"+ie.join("L")+"Z";(function(ce,de,ge,ve,be,me){var Se,we,_e,oe,le=_.ensureSingle(ce,"g","contourbg").selectAll("path").data(me!=="fill"||be?[]:[0]);le.enter().append("path"),le.exit().remove();var pe=[];for(oe=0;oe<de.length;oe++)Se=de[oe],we=A([],Se.x,ge.c2p),_e=A([],Se.y,ve.c2p),pe.push(o(we,_e,Se.bicubic));le.attr("d","M"+pe.join("L")+"Z").style("stroke","none")})(E,I.clipsegments,y,T,j,B),function(ce,de,ge,ve,be,me,Se,we,_e,oe,le){var pe=oe==="fill";pe&&l(be,ce.contours);var Ee=_.ensureSingle(de,"g","contourfill").selectAll("path").data(pe?be:[]);Ee.enter().append("path"),Ee.exit().remove(),Ee.each(function(Te){var Me=(Te.prefixBoundary?le:"")+function(Le,Ie,he,xe,ke,ze,Re,Oe){var Ve,qe,Je,ot,rt,dt,_t,yt="",et=Ie.edgepaths.map(function(it,Fe){return Fe}),nt=!0,At=1e-4*Math.abs(he[0][0]-he[2][0]),Rt=1e-4*Math.abs(he[0][1]-he[2][1]);function Ft(it){return Math.abs(it[1]-he[0][1])<Rt}function It(it){return Math.abs(it[1]-he[2][1])<Rt}function Ge(it){return Math.abs(it[0]-he[0][0])<At}function Ye(it){return Math.abs(it[0]-he[2][0])<At}function Ne(it,Fe){var Be,at,Ze,ht,vt="";for(Ft(it)&&!Ye(it)||It(it)&&!Ge(it)?(ht=ke.aaxis,Ze=c(ke,ze,[it[0],Fe[0]],.5*(it[1]+Fe[1]))):(ht=ke.baxis,Ze=c(ke,ze,.5*(it[0]+Fe[0]),[it[1],Fe[1]])),Be=1;Be<Ze.length;Be++)for(vt+=ht.smoothing?"C":"L",at=0;at<Ze[Be].length;at++){var mt=Ze[Be][at];vt+=[Re.c2p(mt[0]),Oe.c2p(mt[1])]+" "}return vt}for(Ve=0,qe=null;et.length;){var We=Ie.edgepaths[Ve][0];for(qe&&(yt+=Ne(qe,We)),_t=w.smoothopen(Ie.edgepaths[Ve].map(xe),Ie.smoothing),yt+=nt?_t:_t.replace(/^M/,"L"),et.splice(et.indexOf(Ve),1),qe=Ie.edgepaths[Ve][Ie.edgepaths[Ve].length-1],rt=-1,ot=0;ot<4;ot++){if(!qe){_.log("Missing end?",Ve,Ie);break}for(Ft(qe)&&!Ye(qe)?Je=he[1]:Ge(qe)?Je=he[0]:It(qe)?Je=he[3]:Ye(qe)&&(Je=he[2]),dt=0;dt<Ie.edgepaths.length;dt++){var st=Ie.edgepaths[dt][0];Math.abs(qe[0]-Je[0])<At?Math.abs(qe[0]-st[0])<At&&(st[1]-qe[1])*(Je[1]-st[1])>=0&&(Je=st,rt=dt):Math.abs(qe[1]-Je[1])<Rt?Math.abs(qe[1]-st[1])<Rt&&(st[0]-qe[0])*(Je[0]-st[0])>=0&&(Je=st,rt=dt):_.log("endpt to newendpt is not vert. or horz.",qe,Je,st)}if(rt>=0)break;yt+=Ne(qe,Je),qe=Je}if(rt===Ie.edgepaths.length){_.log("unclosed perimeter path");break}Ve=rt,(nt=et.indexOf(Ve)===-1)&&(Ve=et[0],yt+=Ne(qe,Je)+"Z",qe=null)}for(Ve=0;Ve<Ie.paths.length;Ve++)yt+=w.smoothclosed(Ie.paths[Ve].map(xe),Ie.smoothing);return yt}(0,Te,me,Se,we,_e,ge,ve);Me?M.select(this).attr("d",Me).style("stroke","none"):M.select(this).remove()})}(L,E,y,T,te,q,se,P,I,B,ae),function(ce,de,ge,ve,be,me,Se){var we=ge._context.staticPlot,_e=_.ensureSingle(ce,"g","contourlines"),oe=be.showlines!==!1,le=be.showlabels,pe=oe&&le,Ee=n.createLines(_e,oe||le,de,we),Te=n.createLineClip(_e,pe,ge,ve.trace.uid),Me=ce.selectAll("g.contourlabels").data(le?[0]:[]);if(Me.exit().remove(),Me.enter().append("g").classed("contourlabels",!0),le){var Le=me.xaxis,Ie=me.yaxis,he=Le._length,xe=Ie._length,ke=[[[0,0],[he,0],[he,xe],[0,xe]]],ze=[];_.clearLocationCache();var Re=n.labelFormatter(ge,ve),Oe=w.tester.append("text").attr("data-notex",1).call(w.font,be.labelfont),Ve={left:0,right:he,center:he/2,top:0,bottom:xe,middle:xe/2},qe=Math.sqrt(he*he+xe*xe),Je=a.LABELDISTANCE*qe/Math.max(1,de.length/a.LABELINCREASE);Ee.each(function(ot){var rt=n.calcTextOpts(ot.level,Re,Oe,ge);M.select(this).selectAll("path").each(function(dt){var _t=this,yt=_.getVisibleSegment(_t,Ve,rt.height/2);if(yt&&(function(Rt,Ft,It,Ge,Ye,Ne){for(var We,st=0;st<It.pedgepaths.length;st++)Ft===It.pedgepaths[st]&&(We=It.edgepaths[st]);if(We){var it=Ye.a[0],Fe=Ye.a[Ye.a.length-1],Be=Ye.b[0],at=Ye.b[Ye.b.length-1],Ze=g(Rt,0,1),ht=g(Rt,Ge.total,Ge.total-1),vt=ft(We[0],Ze),mt=Ge.total-ft(We[We.length-1],ht);Ge.min<vt&&(Ge.min=vt),Ge.max>mt&&(Ge.max=mt),Ge.len=Ge.max-Ge.min}function ft(Et,Tt){var xt,Ct=0,Pt=.1;return(Math.abs(Et[0]-it)<Pt||Math.abs(Et[0]-Fe)<Pt)&&(xt=f(Ye.dxydb_rough(Et[0],Et[1],Pt)),Ct=Math.max(Ct,Ne*b(Tt,xt)/2)),(Math.abs(Et[1]-Be)<Pt||Math.abs(Et[1]-at)<Pt)&&(xt=f(Ye.dxyda_rough(Et[0],Et[1],Pt)),Ct=Math.max(Ct,Ne*b(Tt,xt)/2)),Ct}}(_t,dt,ot,yt,Se,rt.height),!(yt.len<(rt.width+rt.height)*a.LABELMIN)))for(var et=Math.min(Math.ceil(yt.len/Je),a.LABELMAX),nt=0;nt<et;nt++){var At=n.findBestTextLocation(_t,yt,rt,ze,Ve);if(!At)break;n.addLabelData(At,rt,ze,ke)}})}),Oe.remove(),n.drawLabels(Me,ze,ge,Te,pe?ke:null)}le&&!oe&&Ee.remove()}(E,R,v,k,U,d,P),w.setClipUrl(E,P._clipPathId,v)}function se(ce){var de=P.ab2xy(ce[0],ce[1],!0);return[y.c2p(de[0]),T.c2p(de[1])]}})}},33928:function(Y,O,e){var M=e(49084),A=e(21776).Ks,o=e(45464),w=e(31512),_=e(92880).extendFlat;Y.exports=_({lon:w.lon,lat:w.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:w.text,hovertext:w.hovertext,hoverinfo:_({},o.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:A(),showlegend:_({},o.showlegend,{dflt:!1})},M("",{cLetter:"z",editTypeOverride:"calc"}))},90876:function(Y,O,e){var M=e(38248),A=e(3400).isArrayOrTypedArray,o=e(39032).BADNUM,w=e(47128),_=e(3400)._;Y.exports=function(p,s){for(var n=s._length,a=new Array(n),r=s.z,i=A(r)&&r.length,l=0;l<n;l++){var u=a[l]={},c=s.lon[l],g=s.lat[l];if(u.lonlat=M(c)&&M(g)?[+c,+g]:[o,o],i){var f=r[l];u.z=M(f)?f:o}}return w(p,s,{vals:i?r:[0,1],containerStr:"",cLetter:"z"}),n&&(a[0].t={labels:{lat:_(p,"lat:")+" ",lon:_(p,"lon:")+" "}}),a}},4629:function(Y,O,e){var M=e(38248),A=e(3400),o=e(76308),w=e(8932),_=e(39032).BADNUM,p=e(44808).makeBlank;Y.exports=function(s){var n=s[0].trace,a=n.visible===!0&&n._length!==0,r=n._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:p()};if(!a)return r;var i,l=[],u=n.z,c=n.radius,g=A.isArrayOrTypedArray(u)&&u.length,f=A.isArrayOrTypedArray(c);for(i=0;i<s.length;i++){var b=s[i],v=b.lonlat;if(v[0]!==_){var d={};if(g){var m=b.z;d.z=m!==_?m:0}f&&(d.r=M(c[i])&&c[i]>0?+c[i]:0),l.push({type:"Feature",geometry:{type:"Point",coordinates:v},properties:d})}}var x=w.extractOpts(n),y=x.reversescale?w.flipScale(x.colorscale):x.colorscale,T=y[0][1],h=["interpolate",["linear"],["heatmap-density"],0,o.opacity(T)<1?T:o.addOpacity(T,0)];for(i=1;i<y.length;i++)h.push(y[i][0],y[i][1]);var E=["interpolate",["linear"],["get","z"],x.min,0,x.max,1];return A.extendFlat(r.heatmap.paint,{"heatmap-weight":g?E:1/(x.max-x.min),"heatmap-color":h,"heatmap-radius":f?{type:"identity",property:"r"}:n.radius,"heatmap-opacity":n.opacity}),r.geojson={type:"FeatureCollection",features:l},r.heatmap.layout.visibility="visible",r}},97664:function(Y,O,e){var M=e(3400),A=e(27260),o=e(33928);Y.exports=function(w,_,p,s){function n(l,u){return M.coerce(w,_,o,l,u)}var a=n("lon")||[],r=n("lat")||[],i=Math.min(a.length,r.length);i?(_._length=i,n("z"),n("radius"),n("below"),n("text"),n("hovertext"),n("hovertemplate"),A(w,_,s,n,{prefix:"",cLetter:"z"})):_.visible=!1}},96176:function(Y){Y.exports=function(O,e){return O.lon=e.lon,O.lat=e.lat,O.z=e.z,O}},25336:function(Y,O,e){var M=e(54460),A=e(63312).hoverPoints,o=e(63312).getExtraText;Y.exports=function(w,_,p){var s=A(w,_,p);if(s){var n=s[0],a=n.cd,r=a[0].trace,i=a[n.index];if(delete n.color,"z"in i){var l=n.subplot.mockAxis;n.z=i.z,n.zLabel=M.tickText(l,l.c2l(i.z),"hover").text}return n.extraText=o(r,i,a[0].t.labels),[n]}}},15088:function(Y,O,e){Y.exports={attributes:e(33928),supplyDefaults:e(97664),colorbar:e(96288),formatLabels:e(11960),calc:e(90876),plot:e(35256),hoverPoints:e(25336),eventData:e(96176),getBelow:function(M,A){for(var o=A.getMapLayers(),w=0;w<o.length;w++){var _=o[w],p=_.id;if(_.type==="symbol"&&typeof p=="string"&&p.indexOf("plotly-")===-1)return p}},moduleType:"trace",name:"densitymapbox",basePlotModule:e(33688),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},35256:function(Y,O,e){var M=e(4629),A=e(47552).traceLayerPrefix;function o(_,p){this.type="densitymapbox",this.subplot=_,this.uid=p,this.sourceId="source-"+p,this.layerList=[["heatmap",A+p+"-heatmap"]],this.below=null}var w=o.prototype;w.update=function(_){var p=this.subplot,s=this.layerList,n=M(_),a=p.belowLookup["trace-"+this.uid];p.map.getSource(this.sourceId).setData(n.geojson),a!==this.below&&(this._removeLayers(),this._addLayers(n,a),this.below=a);for(var r=0;r<s.length;r++){var i=s[r],l=i[0],u=i[1],c=n[l];p.setOptions(u,"setLayoutProperty",c.layout),c.layout.visibility==="visible"&&p.setOptions(u,"setPaintProperty",c.paint)}},w._addLayers=function(_,p){for(var s=this.subplot,n=this.layerList,a=this.sourceId,r=0;r<n.length;r++){var i=n[r],l=i[0],u=_[l];s.addLayer({type:l,id:i[1],source:a,layout:u.layout,paint:u.paint},p)}},w._removeLayers=function(){for(var _=this.subplot.map,p=this.layerList,s=p.length-1;s>=0;s--)_.removeLayer(p[s][1])},w.dispose=function(){var _=this.subplot.map;this._removeLayers(),_.removeSource(this.sourceId)},Y.exports=function(_,p){var s=p[0].trace,n=new o(_,s.uid),a=n.sourceId,r=M(p),i=n.below=_.belowLookup["trace-"+s.uid];return _.map.addSource(a,{type:"geojson",data:r.geojson}),n._addLayers(r,i),n}},74248:function(Y,O,e){var M=e(3400);Y.exports=function(A,o){for(var w=0;w<A.length;w++)A[w].i=w;M.mergeArray(o.text,A,"tx"),M.mergeArray(o.hovertext,A,"htx");var _=o.marker;if(_){M.mergeArray(_.opacity,A,"mo"),M.mergeArray(_.color,A,"mc");var p=_.line;p&&(M.mergeArray(p.color,A,"mlc"),M.mergeArrayCastPositive(p.width,A,"mlw"))}}},20088:function(Y,O,e){var M,A=e(20832),o=e(52904).line,w=e(45464),_=e(29736).axisHoverFormat,p=e(21776).Ks,s=e(21776).Gw,n=e(74732),a=e(92880).extendFlat,r=e(76308);Y.exports={x:A.x,x0:A.x0,dx:A.dx,y:A.y,y0:A.y0,dy:A.dy,xperiod:A.xperiod,yperiod:A.yperiod,xperiod0:A.xperiod0,yperiod0:A.yperiod0,xperiodalignment:A.xperiodalignment,yperiodalignment:A.yperiodalignment,xhoverformat:_("x"),yhoverformat:_("y"),hovertext:A.hovertext,hovertemplate:p({},{keys:n.eventDataKeys}),hoverinfo:a({},w.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:s({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),text:A.text,textposition:A.textposition,insidetextanchor:a({},A.insidetextanchor,{dflt:"middle"}),textangle:a({},A.textangle,{dflt:0}),textfont:A.textfont,insidetextfont:A.insidetextfont,outsidetextfont:A.outsidetextfont,constraintext:A.constraintext,cliponaxis:A.cliponaxis,orientation:a({},A.orientation,{}),offset:a({},A.offset,{arrayOk:!1}),width:a({},A.width,{arrayOk:!1}),marker:(M=a({},A.marker),delete M.pattern,delete M.cornerradius,M),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:a({},o.color,{dflt:r.defaultLine}),width:a({},o.width,{dflt:0,editType:"plot"}),dash:o.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:A.offsetgroup,alignmentgroup:A.alignmentgroup}},23096:function(Y,O,e){var M=e(54460),A=e(1220),o=e(74248),w=e(4500),_=e(39032).BADNUM;function p(s){return s===_?0:s}Y.exports=function(s,n){var a,r,i,l,u,c,g,f,b=M.getFromId(s,n.xaxis||"x"),v=M.getFromId(s,n.yaxis||"y");n.orientation==="h"?(a=b.makeCalcdata(n,"x"),i=v.makeCalcdata(n,"y"),l=A(n,v,"y",i),u=!!n.yperiodalignment,c="y"):(a=v.makeCalcdata(n,"y"),i=b.makeCalcdata(n,"x"),l=A(n,b,"x",i),u=!!n.xperiodalignment,c="x"),r=l.vals;var d,m=Math.min(r.length,a.length),x=new Array(m);for(n._base=[],g=0;g<m;g++){a[g]<0&&(a[g]=_);var y=!1;a[g]!==_&&g+1<m&&a[g+1]!==_&&(y=!0),f=x[g]={p:r[g],s:a[g],cNext:y},n._base[g]=-.5*f.s,u&&(x[g].orig_p=i[g],x[g][c+"End"]=l.ends[g],x[g][c+"Start"]=l.starts[g]),n.ids&&(f.id=String(n.ids[g])),g===0&&(x[0].vTotal=0),x[0].vTotal+=p(f.s),f.begR=p(f.s)/p(x[0].s)}for(g=0;g<m;g++)(f=x[g]).s!==_&&(f.sumR=f.s/x[0].vTotal,f.difR=d!==void 0?f.s/d:1,d=f.s);return o(x,n),w(x,n),x}},74732:function(Y){Y.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},4804:function(Y,O,e){var M=e(96376).setGroupPositions;Y.exports=function(A,o){var w,_,p=A._fullLayout,s=A._fullData,n=A.calcdata,a=o.xaxis,r=o.yaxis,i=[],l=[],u=[];for(_=0;_<s.length;_++){var c=s[_],g=c.orientation==="h";c.visible===!0&&c.xaxis===a._id&&c.yaxis===r._id&&c.type==="funnel"&&(w=n[_],g?u.push(w):l.push(w),i.push(w))}var f={mode:p.funnelmode,norm:p.funnelnorm,gap:p.funnelgap,groupgap:p.funnelgroupgap};for(M(A,a,r,l,f),M(A,r,a,u,f),_=0;_<i.length;_++){w=i[_];for(var b=0;b<w.length;b++)b+1<w.length&&(w[b].nextP0=w[b+1].p0,w[b].nextS0=w[b+1].s0,w[b].nextP1=w[b+1].p1,w[b].nextS1=w[b+1].s1)}}},45432:function(Y,O,e){var M=e(3400),A=e(20011),o=e(31508).handleText,w=e(43980),_=e(31147),p=e(20088),s=e(76308);Y.exports={supplyDefaults:function(n,a,r,i){function l(f,b){return M.coerce(n,a,p,f,b)}if(w(n,a,i,l)){_(n,a,i,l),l("xhoverformat"),l("yhoverformat"),l("orientation",a.y&&!a.x?"v":"h"),l("offset"),l("width");var u=l("text");l("hovertext"),l("hovertemplate");var c=l("textposition");o(n,a,i,l,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),a.textposition==="none"||a.texttemplate||l("textinfo",M.isArrayOrTypedArray(u)?"text+value":"value");var g=l("marker.color",r);l("marker.line.color",s.defaultLine),l("marker.line.width"),l("connector.visible")&&(l("connector.fillcolor",function(f){var b=M.isArrayOrTypedArray(f)?"#000":f;return s.addOpacity(b,.5*s.opacity(b))}(g)),l("connector.line.width")&&(l("connector.line.color"),l("connector.line.dash")))}else a.visible=!1},crossTraceDefaults:function(n,a){var r,i;function l(c){return M.coerce(i._input,i,p,c)}if(a.funnelmode==="group")for(var u=0;u<n.length;u++)r=(i=n[u])._input,A(r,i,a,l)}}},34580:function(Y){Y.exports=function(O,e){return O.x="xVal"in e?e.xVal:e.x,O.y="yVal"in e?e.yVal:e.y,"percentInitial"in e&&(O.percentInitial=e.percentInitial),"percentPrevious"in e&&(O.percentPrevious=e.percentPrevious),"percentTotal"in e&&(O.percentTotal=e.percentTotal),e.xa&&(O.xaxis=e.xa),e.ya&&(O.yaxis=e.ya),O}},31488:function(Y,O,e){var M=e(76308).opacity,A=e(63400).hoverOnBars,o=e(3400).formatPercent;Y.exports=function(w,_,p,s,n){var a=A(w,_,p,s,n);if(a){var r=a.cd,i=r[0].trace,l=i.orientation==="h",u=r[a.index];a[(l?"x":"y")+"LabelVal"]=u.s,a.percentInitial=u.begR,a.percentInitialLabel=o(u.begR,1),a.percentPrevious=u.difR,a.percentPreviousLabel=o(u.difR,1),a.percentTotal=u.sumR,a.percentTotalLabel=o(u.sumR,1);var c=u.hi||i.hoverinfo,g=[];if(c&&c!=="none"&&c!=="skip"){var f=c==="all",b=c.split("+"),v=function(d){return f||b.indexOf(d)!==-1};v("percent initial")&&g.push(a.percentInitialLabel+" of initial"),v("percent previous")&&g.push(a.percentPreviousLabel+" of previous"),v("percent total")&&g.push(a.percentTotalLabel+" of total")}return a.extraText=g.join("<br>"),a.color=function(d,m){var x=d.marker,y=m.mc||x.color,T=m.mlc||x.line.color,h=m.mlw||x.line.width;return M(y)?y:M(T)&&h?T:void 0}(i,u),[a]}}},94704:function(Y,O,e){Y.exports={attributes:e(20088),layoutAttributes:e(7076),supplyDefaults:e(45432).supplyDefaults,crossTraceDefaults:e(45432).crossTraceDefaults,supplyLayoutDefaults:e(11631),calc:e(23096),crossTraceCalc:e(4804),plot:e(42200),style:e(44544).style,hoverPoints:e(31488),eventData:e(34580),selectPoints:e(45784),moduleType:"trace",name:"funnel",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},7076:function(Y){Y.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},11631:function(Y,O,e){var M=e(3400),A=e(7076);Y.exports=function(o,w,_){var p=!1;function s(r,i){return M.coerce(o,w,A,r,i)}for(var n=0;n<_.length;n++){var a=_[n];if(a.visible&&a.type==="funnel"){p=!0;break}}p&&(s("funnelmode"),s("funnelgap",.2),s("funnelgroupgap"))}},42200:function(Y,O,e){var M=e(33428),A=e(3400),o=e(43616),w=e(39032).BADNUM,_=e(98184),p=e(82744).clearMinTextSize;function s(n,a,r,i){var l=[],u=[],c=i?a:r,g=i?r:a;return l[0]=c.c2p(n.s0,!0),u[0]=g.c2p(n.p0,!0),l[1]=c.c2p(n.s1,!0),u[1]=g.c2p(n.p1,!0),l[2]=c.c2p(n.nextS0,!0),u[2]=g.c2p(n.nextP0,!0),l[3]=c.c2p(n.nextS1,!0),u[3]=g.c2p(n.nextP1,!0),i?[l,u]:[u,l]}Y.exports=function(n,a,r,i){var l=n._fullLayout;p("funnel",l),function(u,c,g,f){var b=c.xaxis,v=c.yaxis;A.makeTraceGroups(f,g,"trace bars").each(function(d){var m=M.select(this),x=d[0].trace,y=A.ensureSingle(m,"g","regions");if(x.connector&&x.connector.visible){var T=x.orientation==="h",h=y.selectAll("g.region").data(A.identity);h.enter().append("g").classed("region",!0),h.exit().remove();var E=h.size();h.each(function(k,L){if(L===E-1||k.cNext){var P=s(k,b,v,T),I=P[0],z=P[1],F="";I[0]!==w&&z[0]!==w&&I[1]!==w&&z[1]!==w&&I[2]!==w&&z[2]!==w&&I[3]!==w&&z[3]!==w&&(F+=T?"M"+I[0]+","+z[1]+"L"+I[2]+","+z[2]+"H"+I[3]+"L"+I[1]+","+z[1]+"Z":"M"+I[1]+","+z[1]+"L"+I[2]+","+z[3]+"V"+z[2]+"L"+I[1]+","+z[0]+"Z"),F===""&&(F="M0,0Z"),A.ensureSingle(M.select(this),"path").attr("d",F).call(o.setClipUrl,c.layerClipId,u)}})}else y.remove()})}(n,a,r,i),function(u,c,g,f){var b=c.xaxis,v=c.yaxis;A.makeTraceGroups(f,g,"trace bars").each(function(d){var m=M.select(this),x=d[0].trace,y=A.ensureSingle(m,"g","lines");if(x.connector&&x.connector.visible&&x.connector.line.width){var T=x.orientation==="h",h=y.selectAll("g.line").data(A.identity);h.enter().append("g").classed("line",!0),h.exit().remove();var E=h.size();h.each(function(k,L){if(L===E-1||k.cNext){var P=s(k,b,v,T),I=P[0],z=P[1],F="";I[3]!==void 0&&z[3]!==void 0&&(T?(F+="M"+I[0]+","+z[1]+"L"+I[2]+","+z[2],F+="M"+I[1]+","+z[1]+"L"+I[3]+","+z[2]):(F+="M"+I[1]+","+z[1]+"L"+I[2]+","+z[3],F+="M"+I[1]+","+z[0]+"L"+I[2]+","+z[2])),F===""&&(F="M0,0Z"),A.ensureSingle(M.select(this),"path").attr("d",F).call(o.setClipUrl,c.layerClipId,u)}})}else y.remove()})}(n,a,r,i),_.plot(n,a,r,i,{mode:l.funnelmode,norm:l.funnelmode,gap:l.funnelgap,groupgap:l.funnelgroupgap})}},44544:function(Y,O,e){var M=e(33428),A=e(43616),o=e(76308),w=e(13448).DESELECTDIM,_=e(60100),p=e(82744).resizeText,s=_.styleTextPoints;Y.exports={style:function(n,a,r){var i=r||M.select(n).selectAll("g.funnellayer").selectAll("g.trace");p(n,i,"funnel"),i.style("opacity",function(l){return l[0].trace.opacity}),i.each(function(l){var u=M.select(this),c=l[0].trace;u.selectAll(".point > path").each(function(g){if(!g.isBlank){var f=c.marker;M.select(this).call(o.fill,g.mc||f.color).call(o.stroke,g.mlc||f.line.color).call(A.dashLine,f.line.dash,g.mlw||f.line.width).style("opacity",c.selectedpoints&&!g.selected?w:1)}}),s(u,c,n),u.selectAll(".regions").each(function(){M.select(this).selectAll("path").style("stroke-width",0).call(o.fill,c.connector.fillcolor)}),u.selectAll(".lines").each(function(){var g=c.connector.line;A.lineGroupStyle(M.select(this).selectAll("path"),g.width,g.color,g.dash)})})}}},22332:function(Y,O,e){var M=e(74996),A=e(45464),o=e(86968).u,w=e(21776).Ks,_=e(21776).Gw,p=e(92880).extendFlat;Y.exports={labels:M.labels,label0:M.label0,dlabel:M.dlabel,values:M.values,marker:{colors:M.marker.colors,line:{color:p({},M.marker.line.color,{dflt:null}),width:p({},M.marker.line.width,{dflt:1}),editType:"calc"},pattern:M.marker.pattern,editType:"calc"},text:M.text,hovertext:M.hovertext,scalegroup:p({},M.scalegroup,{}),textinfo:p({},M.textinfo,{flags:["label","text","value","percent"]}),texttemplate:_({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:p({},A.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:w({},{keys:["label","color","value","text","percent"]}),textposition:p({},M.textposition,{values:["inside","none"],dflt:"inside"}),textfont:M.textfont,insidetextfont:M.insidetextfont,title:{text:M.title.text,font:M.title.font,position:p({},M.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:o({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},91248:function(Y,O,e){var M=e(7316);O.name="funnelarea",O.plot=function(A,o,w,_){M.plotBasePlot(O.name,A,o,w,_)},O.clean=function(A,o,w,_){M.cleanBasePlot(O.name,A,o,w,_)}},54e3:function(Y,O,e){var M=e(45768);Y.exports={calc:function(A,o){return M.calc(A,o)},crossTraceCalc:function(A){M.crossTraceCalc(A,{type:"funnelarea"})}}},92688:function(Y,O,e){var M=e(3400),A=e(22332),o=e(86968).Q,w=e(31508).handleText,_=e(74174).handleLabelsAndValues,p=e(74174).handleMarkerDefaults;Y.exports=function(s,n,a,r){function i(m,x){return M.coerce(s,n,A,m,x)}var l=i("labels"),u=i("values"),c=_(l,u),g=c.len;if(n._hasLabels=c.hasLabels,n._hasValues=c.hasValues,!n._hasLabels&&n._hasValues&&(i("label0"),i("dlabel")),g){n._length=g,p(s,n,r,i),i("scalegroup");var f,b=i("text"),v=i("texttemplate");if(v||(f=i("textinfo",Array.isArray(b)?"text+percent":"percent")),i("hovertext"),i("hovertemplate"),v||f&&f!=="none"){var d=i("textposition");w(s,n,r,i,d,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}o(n,r,i),i("title.text")&&(i("title.position"),M.coerceFont(i,"title.font",r.font)),i("aspectratio"),i("baseratio")}else n.visible=!1}},62396:function(Y,O,e){Y.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e(91248),categories:["pie-like","funnelarea","showLegend"],attributes:e(22332),layoutAttributes:e(61280),supplyDefaults:e(92688),supplyLayoutDefaults:e(35384),calc:e(54e3).calc,crossTraceCalc:e(54e3).crossTraceCalc,plot:e(39472),style:e(62096),styleOne:e(10528),meta:{}}},61280:function(Y,O,e){var M=e(85204).hiddenlabels;Y.exports={hiddenlabels:M,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},35384:function(Y,O,e){var M=e(3400),A=e(61280);Y.exports=function(o,w){function _(p,s){return M.coerce(o,w,A,p,s)}_("hiddenlabels"),_("funnelareacolorway",w.colorway),_("extendfunnelareacolors")}},39472:function(Y,O,e){var M=e(33428),A=e(43616),o=e(3400),w=o.strScale,_=o.strTranslate,p=e(72736),s=e(98184).toMoveInsideBar,n=e(82744),a=n.recordMinTextSize,r=n.clearMinTextSize,i=e(69656),l=e(37820),u=l.attachFxHandlers,c=l.determineInsideTextFont,g=l.layoutAreas,f=l.prerenderTitles,b=l.positionTitleOutside,v=l.formatSliceLabel;function d(m,x){return"l"+(x[0]-m[0])+","+(x[1]-m[1])}Y.exports=function(m,x){var y=m._context.staticPlot,T=m._fullLayout;r("funnelarea",T),f(x,m),g(x,T._size),o.makeTraceGroups(T._funnelarealayer,x,"trace").each(function(h){var E=M.select(this),k=h[0],L=k.trace;(function(P){if(P.length){var I=P[0],z=I.trace,F=z.aspectratio,U=z.baseratio;U>.999&&(U=.999);var R,j,Z,B=Math.pow(U,2),q=I.vTotal,V=q,ne=q*B/(1-B)/q,ee=[];for(ee.push(_e()),j=P.length-1;j>-1;j--)if(!(Z=P[j]).hidden){var $=Z.v/V;ne+=$,ee.push(_e())}var J=1/0,K=-1/0;for(j=0;j<ee.length;j++)R=ee[j],J=Math.min(J,R[1]),K=Math.max(K,R[1]);for(j=0;j<ee.length;j++)ee[j][1]-=(K+J)/2;var te=ee[ee.length-1][0],ie=I.r,ae=(K-J)/2,se=ie/te,ce=ie/ae*F;for(I.r=ce*ae,j=0;j<ee.length;j++)ee[j][0]*=se,ee[j][1]*=ce;var de,ge,ve=[-(R=ee[0])[0],R[1]],be=[R[0],R[1]],me=0;for(j=P.length-1;j>-1;j--)if(!(Z=P[j]).hidden){var Se=ee[me+=1][0],we=ee[me][1];Z.TL=[-Se,we],Z.TR=[Se,we],Z.BL=ve,Z.BR=be,Z.pxmid=(de=Z.TR,ge=Z.BR,[.5*(de[0]+ge[0]),.5*(de[1]+ge[1])]),ve=Z.TL,be=Z.TR}}function _e(){var oe,le={x:oe=Math.sqrt(ne),y:-oe};return[le.x,le.y]}})(h),E.each(function(){var P=M.select(this).selectAll("g.slice").data(h);P.enter().append("g").classed("slice",!0),P.exit().remove(),P.each(function(z,F){if(z.hidden)M.select(this).selectAll("path,g").remove();else{z.pointNumber=z.i,z.curveNumber=L.index;var U=k.cx,R=k.cy,j=M.select(this),Z=j.selectAll("path.surface").data([z]);Z.enter().append("path").classed("surface",!0).style({"pointer-events":y?"none":"all"}),j.call(u,m,h);var B="M"+(U+z.TR[0])+","+(R+z.TR[1])+d(z.TR,z.BR)+d(z.BR,z.BL)+d(z.BL,z.TL)+"Z";Z.attr("d",B),v(m,z,k);var q=i.castOption(L.textposition,z.pts),V=j.selectAll("g.slicetext").data(z.text&&q!=="none"?[0]:[]);V.enter().append("g").classed("slicetext",!0),V.exit().remove(),V.each(function(){var ne=o.ensureSingle(M.select(this),"text","",function(se){se.attr("data-notex",1)}),ee=o.ensureUniformFontSize(m,c(L,z,T.font));ne.text(z.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(A.font,ee).call(p.convertToTspans,m);var $,J,K,te=A.bBox(ne.node()),ie=Math.min(z.BL[1],z.BR[1])+R,ae=Math.max(z.TL[1],z.TR[1])+R;J=Math.max(z.TL[0],z.BL[0])+U,K=Math.min(z.TR[0],z.BR[0])+U,($=s(J,K,ie,ae,te,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=ee.size,a(L.type,$,T),h[F].transform=$,o.setTransormAndDisplay(ne,$)})}});var I=M.select(this).selectAll("g.titletext").data(L.title.text?[0]:[]);I.enter().append("g").classed("titletext",!0),I.exit().remove(),I.each(function(){var z=o.ensureSingle(M.select(this),"text","",function(R){R.attr("data-notex",1)}),F=L.title.text;L._meta&&(F=o.templateString(F,L._meta)),z.text(F).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(A.font,L.title.font).call(p.convertToTspans,m);var U=b(k,T._size);z.attr("transform",_(U.x,U.y)+w(Math.min(1,U.scale))+_(U.tx,U.ty))})})})}},62096:function(Y,O,e){var M=e(33428),A=e(10528),o=e(82744).resizeText;Y.exports=function(w){var _=w._fullLayout._funnelarealayer.selectAll(".trace");o(w,_,"funnelarea"),_.each(function(p){var s=p[0].trace,n=M.select(this);n.style({opacity:s.opacity}),n.selectAll("path.surface").each(function(a){M.select(this).call(A,a,s,w)})})}},83328:function(Y,O,e){var M=e(52904),A=e(45464),o=e(25376),w=e(29736).axisHoverFormat,_=e(21776).Ks,p=e(21776).Gw,s=e(49084),n=e(92880).extendFlat;Y.exports=n({z:{valType:"data_array",editType:"calc"},x:n({},M.x,{impliedEdits:{xtype:"array"}}),x0:n({},M.x0,{impliedEdits:{xtype:"scaled"}}),dx:n({},M.dx,{impliedEdits:{xtype:"scaled"}}),y:n({},M.y,{impliedEdits:{ytype:"array"}}),y0:n({},M.y0,{impliedEdits:{ytype:"scaled"}}),dy:n({},M.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:n({},M.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:n({},M.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:n({},M.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:n({},M.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:n({},M.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:n({},M.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z",1),hovertemplate:_(),texttemplate:p({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:o({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:n({},A.showlegend,{dflt:!1})},{transforms:void 0},s("",{cLetter:"z",autoColorDflt:!1}))},19512:function(Y,O,e){var M=e(24040),A=e(3400),o=e(54460),w=e(1220),_=e(55480),p=e(47128),s=e(2872),n=e(26136),a=e(70448),r=e(11240),i=e(35744),l=e(39032).BADNUM;function u(c){for(var g=[],f=c.length,b=0;b<f;b++){var v=c[b];v!==l&&g.push(v)}return g}Y.exports=function(c,g){var f,b,v,d,m,x,y,T,h,E,k,L=o.getFromId(c,g.xaxis||"x"),P=o.getFromId(c,g.yaxis||"y"),I=M.traceIs(g,"contour"),z=M.traceIs(g,"histogram"),F=M.traceIs(g,"gl2d"),U=I?"best":g.zsmooth;if(L._minDtick=0,P._minDtick=0,z)d=(k=_(c,g)).orig_x,f=k.x,b=k.x0,v=k.dx,T=k.orig_y,m=k.y,x=k.y0,y=k.dy,h=k.z;else{var R=g.z;A.isArray1D(R)?(s(g,L,P,"x","y",["z"]),f=g._x,m=g._y,R=g._z):(d=g.x?L.makeCalcdata(g,"x"):[],T=g.y?P.makeCalcdata(g,"y"):[],f=w(g,L,"x",d).vals,m=w(g,P,"y",T).vals,g._x=f,g._y=m),b=g.x0,v=g.dx,x=g.y0,y=g.dy,h=n(R,g,L,P)}function j(K){U=g._input.zsmooth=g.zsmooth=!1,A.warn('cannot use zsmooth: "fast": '+K)}function Z(K){if(K.length>1){var te=(K[K.length-1]-K[0])/(K.length-1),ie=Math.abs(te/100);for(E=0;E<K.length-1;E++)if(Math.abs(K[E+1]-K[E]-te)>ie)return!1}return!0}(L.rangebreaks||P.rangebreaks)&&(h=function(K,te,ie){for(var ae=[],se=-1,ce=0;ce<ie.length;ce++)if(te[ce]!==l){ae[++se]=[];for(var de=0;de<ie[ce].length;de++)K[de]!==l&&ae[se].push(ie[ce][de])}return ae}(f,m,h),z||(f=u(f),m=u(m),g._x=f,g._y=m)),z||!I&&!g.connectgaps||(g._emptypoints=r(h),a(h,g._emptypoints)),g._islinear=!1,L.type==="log"||P.type==="log"?U==="fast"&&j("log axis found"):Z(f)?Z(m)?g._islinear=!0:U==="fast"&&j("y scale is not linear"):U==="fast"&&j("x scale is not linear");var B=A.maxRowLength(h),q=g.xtype==="scaled"?"":f,V=i(g,q,b,v,B,L),ne=g.ytype==="scaled"?"":m,ee=i(g,ne,x,y,h.length,P);F||(g._extremes[L._id]=o.findExtremes(L,V),g._extremes[P._id]=o.findExtremes(P,ee));var $={x:V,y:ee,z:h,text:g._text||g.text,hovertext:g._hovertext||g.hovertext};if(g.xperiodalignment&&d&&($.orig_x=d),g.yperiodalignment&&T&&($.orig_y=T),q&&q.length===V.length-1&&($.xCenter=q),ne&&ne.length===ee.length-1&&($.yCenter=ne),z&&($.xRanges=k.xRanges,$.yRanges=k.yRanges,$.pts=k.pts),I||p(c,g,{vals:h,cLetter:"z"}),I&&g.contours&&g.contours.coloring==="heatmap"){var J={type:g.type==="contour"?"heatmap":"histogram2d",xcalendar:g.xcalendar,ycalendar:g.ycalendar};$.xfill=i(J,q,b,v,B,L),$.yfill=i(J,ne,x,y,h.length,P)}return[$]}},26136:function(Y,O,e){var M=e(38248),A=e(3400),o=e(39032).BADNUM;Y.exports=function(w,_,p,s){var n,a,r,i,l,u;function c(m){if(M(m))return+m}if(_&&_.transpose){for(n=0,l=0;l<w.length;l++)n=Math.max(n,w[l].length);if(n===0)return!1;r=function(m){return m.length},i=function(m,x,y){return(m[y]||[])[x]}}else n=w.length,r=function(m,x){return m[x].length},i=function(m,x,y){return(m[x]||[])[y]};var g=function(m,x,y){return x===o||y===o?o:i(m,x,y)};function f(m){if(_&&_.type!=="carpet"&&_.type!=="contourcarpet"&&m&&m.type==="category"&&_["_"+m._id.charAt(0)].length){var x=m._id.charAt(0),y={},T=_["_"+x+"CategoryMap"]||_[x];for(l=0;l<T.length;l++)y[T[l]]=l;return function(h){var E=y[m._categories[h]];return E+1?E:o}}return A.identity}var b=f(p),v=f(s);s&&s.type==="category"&&(n=s._categories.length);var d=new Array(n);for(l=0;l<n;l++)for(a=p&&p.type==="category"?p._categories.length:r(w,l),d[l]=new Array(a),u=0;u<a;u++)d[l][u]=c(g(w,v(l),b(u)));return d}},96288:function(Y){Y.exports={min:"zmin",max:"zmax"}},2872:function(Y,O,e){var M=e(3400),A=e(39032).BADNUM,o=e(1220);Y.exports=function(w,_,p,s,n,a){var r=w._length,i=_.makeCalcdata(w,s),l=p.makeCalcdata(w,n);i=o(w,_,s,i).vals,l=o(w,p,n,l).vals;var u,c,g,f,b=w.text,v=b!==void 0&&M.isArray1D(b),d=w.hovertext,m=d!==void 0&&M.isArray1D(d),x=M.distinctVals(i),y=x.vals,T=M.distinctVals(l),h=T.vals,E=[],k=h.length,L=y.length;for(u=0;u<a.length;u++)E[u]=M.init2dArray(k,L);v&&(g=M.init2dArray(k,L)),m&&(f=M.init2dArray(k,L));var P=M.init2dArray(k,L);for(u=0;u<r;u++)if(i[u]!==A&&l[u]!==A){var I=M.findBin(i[u]+x.minDiff/2,y),z=M.findBin(l[u]+T.minDiff/2,h);for(c=0;c<a.length;c++){var F=w[a[c]];E[c][z][I]=F[u],P[z][I]=u}v&&(g[z][I]=b[u]),m&&(f[z][I]=d[u])}for(w["_"+s]=y,w["_"+n]=h,c=0;c<a.length;c++)w["_"+a[c]]=E[c];v&&(w._text=g),m&&(w._hovertext=f),_&&_.type==="category"&&(w["_"+s+"CategoryMap"]=y.map(function(U){return _._categories[U]})),p&&p.type==="category"&&(w["_"+n+"CategoryMap"]=h.map(function(U){return p._categories[U]})),w._after2before=P}},24480:function(Y,O,e){var M=e(3400),A=e(51264),o=e(39096),w=e(31147),_=e(82748),p=e(27260),s=e(83328);Y.exports=function(n,a,r,i){function l(u,c){return M.coerce(n,a,s,u,c)}A(n,a,l,i)?(w(n,a,i,l),l("xhoverformat"),l("yhoverformat"),l("text"),l("hovertext"),l("hovertemplate"),o(l,i),_(n,a,l,i),l("hoverongaps"),l("connectgaps",M.isArray1D(a.z)&&a.zsmooth!==!1),p(n,a,i,l,{prefix:"",cLetter:"z"})):a.visible=!1}},11240:function(Y,O,e){var M=e(3400).maxRowLength;Y.exports=function(A){var o,w,_,p,s,n,a,r,i=[],l={},u=[],c=A[0],g=[],f=[0,0,0],b=M(A);for(w=0;w<A.length;w++)for(o=g,g=c,c=A[w+1]||[],_=0;_<b;_++)g[_]===void 0&&((n=(g[_-1]!==void 0?1:0)+(g[_+1]!==void 0?1:0)+(o[_]!==void 0?1:0)+(c[_]!==void 0?1:0))?(w===0&&n++,_===0&&n++,w===A.length-1&&n++,_===g.length-1&&n++,n<4&&(l[[w,_]]=[w,_,n]),i.push([w,_,n])):u.push([w,_]));for(;u.length;){for(a={},r=!1,s=u.length-1;s>=0;s--)(n=((l[[(w=(p=u[s])[0])-1,_=p[1]]]||f)[2]+(l[[w+1,_]]||f)[2]+(l[[w,_-1]]||f)[2]+(l[[w,_+1]]||f)[2])/20)&&(a[p]=[w,_,n],u.splice(s,1),r=!0);if(!r)throw"findEmpties iterated with no new neighbors";for(p in a)l[p]=a[p],i.push(a[p])}return i.sort(function(v,d){return d[2]-v[2]})}},55512:function(Y,O,e){var M=e(93024),A=e(3400),o=A.isArrayOrTypedArray,w=e(54460),_=e(8932).extractOpts;Y.exports=function(p,s,n,a,r){r||(r={});var i,l,u,c,g=r.isContour,f=p.cd[0],b=f.trace,v=p.xa,d=p.ya,m=f.x,x=f.y,y=f.z,T=f.xCenter,h=f.yCenter,E=f.zmask,k=b.zhoverformat,L=m,P=x;if(p.index!==!1){try{u=Math.round(p.index[1]),c=Math.round(p.index[0])}catch{return void A.error("Error hovering on heatmap, pointNumber must be [row,col], found:",p.index)}if(u<0||u>=y[0].length||c<0||c>y.length)return}else{if(M.inbox(s-m[0],s-m[m.length-1],0)>0||M.inbox(n-x[0],n-x[x.length-1],0)>0)return;if(g){var I;for(L=[2*m[0]-m[1]],I=1;I<m.length;I++)L.push((m[I]+m[I-1])/2);for(L.push([2*m[m.length-1]-m[m.length-2]]),P=[2*x[0]-x[1]],I=1;I<x.length;I++)P.push((x[I]+x[I-1])/2);P.push([2*x[x.length-1]-x[x.length-2]])}u=Math.max(0,Math.min(L.length-2,A.findBin(s,L))),c=Math.max(0,Math.min(P.length-2,A.findBin(n,P)))}var z,F,U=v.c2p(m[u]),R=v.c2p(m[u+1]),j=d.c2p(x[c]),Z=d.c2p(x[c+1]);g?(z=f.orig_x||m,F=f.orig_y||x,R=U,i=z[u],Z=j,l=F[c]):(z=f.orig_x||T||m,F=f.orig_y||h||x,i=T?z[u]:(z[u]+z[u+1])/2,l=h?F[c]:(F[c]+F[c+1])/2,v&&v.type==="category"&&(i=m[u]),d&&d.type==="category"&&(l=x[c]),b.zsmooth&&(U=R=v.c2p(i),j=Z=d.c2p(l)));var B=y[c][u];if(E&&!E[c][u]&&(B=void 0),B!==void 0||b.hoverongaps){var q;o(f.hovertext)&&o(f.hovertext[c])?q=f.hovertext[c][u]:o(f.text)&&o(f.text[c])&&(q=f.text[c][u]);var V=_(b),ne={type:"linear",range:[V.min,V.max],hoverformat:k,_separators:v._separators,_numFormat:v._numFormat},ee=w.tickText(ne,B,"hover").text;return[A.extendFlat(p,{index:b._after2before?b._after2before[c][u]:[c,u],distance:p.maxHoverDistance,spikeDistance:p.maxSpikeDistance,x0:U,x1:R,y0:j,y1:Z,xLabelVal:i,yLabelVal:l,zLabelVal:B,zLabel:ee,text:q})]}}},81932:function(Y,O,e){Y.exports={attributes:e(83328),supplyDefaults:e(24480),calc:e(19512),plot:e(41420),colorbar:e(96288),style:e(41648),hoverPoints:e(55512),moduleType:"trace",name:"heatmap",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},70448:function(Y,O,e){var M=e(3400),A=[[-1,0],[1,0],[0,-1],[0,1]];function o(_){return .5-.25*Math.min(1,.5*_)}function w(_,p,s){var n,a,r,i,l,u,c,g,f,b,v,d,m,x=0;for(i=0;i<p.length;i++){for(a=(n=p[i])[0],r=n[1],v=_[a][r],b=0,f=0,l=0;l<4;l++)(c=_[a+(u=A[l])[0]])&&(g=c[r+u[1]])!==void 0&&(b===0?d=m=g:(d=Math.min(d,g),m=Math.max(m,g)),f++,b+=g);if(f===0)throw"iterateInterp2d order is wrong: no defined neighbors";_[a][r]=b/f,v===void 0?f<4&&(x=1):(_[a][r]=(1+s)*_[a][r]-s*v,m>d&&(x=Math.max(x,Math.abs(_[a][r]-v)/(m-d))))}return x}Y.exports=function(_,p){var s,n=1;for(w(_,p),s=0;s<p.length&&!(p[s][2]<4);s++);for(p=p.slice(s),s=0;s<100&&n>.01;s++)n=w(_,p,o(n));return n>.01&&M.log("interp2d didn't converge quickly",n),_}},39096:function(Y,O,e){var M=e(3400);Y.exports=function(A,o){A("texttemplate");var w=M.extendFlat({},o.font,{color:"auto",size:"auto"});M.coerceFont(A,"textfont",w)}},35744:function(Y,O,e){var M=e(24040),A=e(3400).isArrayOrTypedArray;Y.exports=function(o,w,_,p,s,n){var a,r,i,l=[],u=M.traceIs(o,"contour"),c=M.traceIs(o,"histogram"),g=M.traceIs(o,"gl2d");if(A(w)&&w.length>1&&!c&&n.type!=="category"){var f=w.length;if(!(f<=s))return u?w.slice(0,s):w.slice(0,s+1);if(u||g)l=Array.from(w).slice(0,s);else if(s===1)l=n.type==="log"?[.5*w[0],2*w[0]]:[w[0]-.5,w[0]+.5];else if(n.type==="log"){for(l=[Math.pow(w[0],1.5)/Math.pow(w[1],.5)],i=1;i<f;i++)l.push(Math.sqrt(w[i-1]*w[i]));l.push(Math.pow(w[f-1],1.5)/Math.pow(w[f-2],.5))}else{for(l=[1.5*w[0]-.5*w[1]],i=1;i<f;i++)l.push(.5*(w[i-1]+w[i]));l.push(1.5*w[f-1]-.5*w[f-2])}if(f<s){var b,v=l[l.length-1];if(n.type==="log")for(b=v/l[l.length-2],i=f;i<s;i++)v*=b,l.push(v);else for(b=v-l[l.length-2],i=f;i<s;i++)v+=b,l.push(v)}}else{var d=o[n._id.charAt(0)+"calendar"];for(a=c?n.r2c(_,0,d):A(w)&&w.length===1?w[0]:_===void 0?0:(n.type==="log"?n.d2c:n.r2c)(_,0,d),r=p||1,i=u||g?0:-.5;i<s;i++)l.push(a+r*i)}return l}},41420:function(Y,O,e){var M=e(33428),A=e(49760),o=e(24040),w=e(43616),_=e(54460),p=e(3400),s=e(72736),n=e(76688),a=e(76308),r=e(8932).extractOpts,i=e(8932).makeColorScaleFuncFromTrace,l=e(9616),u=e(84284).LINE_SPACING,c=e(9188),g=e(2264).STYLE,f="heatmap-label";function b(y){return y.selectAll("g."+f)}function v(y){b(y).remove()}function d(y,T){var h=T.length-2,E=p.constrain(p.findBin(y,T),0,h),k=T[E],L=T[E+1],P=p.constrain(E+(y-k)/(L-k)-.5,0,h),I=Math.round(P),z=Math.abs(P-I);return P&&P!==h&&z?{bin0:I,frac:z,bin1:Math.round(I+z/(P-I))}:{bin0:I,bin1:I,frac:0}}function m(y,T){var h=T.length-1,E=p.constrain(p.findBin(y,T),0,h),k=T[E],L=(y-k)/(T[E+1]-k)||0;return L<=0?{bin0:E,bin1:E,frac:0}:L<.5?{bin0:E,bin1:E+1,frac:L}:{bin0:E+1,bin1:E,frac:1-L}}function x(y,T,h){y[T]=h[0],y[T+1]=h[1],y[T+2]=h[2],y[T+3]=Math.round(255*h[3])}Y.exports=function(y,T,h,E){var k=T.xaxis,L=T.yaxis;p.makeTraceGroups(E,h,"hm").each(function(P){var I,z,F,U,R,j,Z,B,q=M.select(this),V=P[0],ne=V.trace,ee=ne.xgap||0,$=ne.ygap||0,J=V.z,K=V.x,te=V.y,ie=V.xCenter,ae=V.yCenter,se=o.traceIs(ne,"contour"),ce=se?"best":ne.zsmooth,de=J.length,ge=p.maxRowLength(J),ve=!1,be=!1;for(j=0;I===void 0&&j<K.length-1;)I=k.c2p(K[j]),j++;for(j=K.length-1;z===void 0&&j>0;)z=k.c2p(K[j]),j--;for(z<I&&(F=z,z=I,I=F,ve=!0),j=0;U===void 0&&j<te.length-1;)U=L.c2p(te[j]),j++;for(j=te.length-1;R===void 0&&j>0;)R=L.c2p(te[j]),j--;R<U&&(F=U,U=R,R=F,be=!0),se&&(ie=K,ae=te,K=V.xfill,te=V.yfill);var me="default";if(ce?me=ce==="best"?"smooth":"fast":ne._islinear&&ee===0&&$===0&&c()&&(me="fast"),me!=="fast"){var Se=ce==="best"?0:.5;I=Math.max(-Se*k._length,I),z=Math.min((1+Se)*k._length,z),U=Math.max(-Se*L._length,U),R=Math.min((1+Se)*L._length,R)}var we,_e,oe=Math.round(z-I),le=Math.round(R-U);if(I>=k._length||z<=0||U>=L._length||R<=0)return q.selectAll("image").data([]).exit().remove(),void v(q);me==="fast"?(we=ge,_e=de):(we=oe,_e=le);var pe=document.createElement("canvas");pe.width=we,pe.height=_e;var Ee,Te,Me=pe.getContext("2d",{willReadFrequently:!0}),Le=i(ne,{noNumericCheck:!0,returnArray:!0});me==="fast"?(Ee=ve?function(Ht){return ge-1-Ht}:p.identity,Te=be?function(Ht){return de-1-Ht}:p.identity):(Ee=function(Ht){return p.constrain(Math.round(k.c2p(K[Ht])-I),0,oe)},Te=function(Ht){return p.constrain(Math.round(L.c2p(te[Ht])-U),0,le)});var Ie,he,xe,ke,ze=Te(0),Re=[ze,ze],Oe=ve?0:1,Ve=be?0:1,qe=0,Je=0,ot=0,rt=0;function dt(Ht,on){if(Ht!==void 0){var wn=Le(Ht);return wn[0]=Math.round(wn[0]),wn[1]=Math.round(wn[1]),wn[2]=Math.round(wn[2]),qe+=on,Je+=wn[0]*on,ot+=wn[1]*on,rt+=wn[2]*on,wn}return[0,0,0,0]}function _t(Ht,on,wn,mn){var Pn=Ht[wn.bin0];if(Pn===void 0)return dt(void 0,1);var Wn,Bn=Ht[wn.bin1],jn=on[wn.bin0],rr=on[wn.bin1],Xt=Bn-Pn||0,yn=jn-Pn||0;return Wn=Bn===void 0?rr===void 0?0:jn===void 0?2*(rr-Pn):2*(2*rr-jn-Pn)/3:rr===void 0?jn===void 0?0:2*(2*Pn-Bn-jn)/3:jn===void 0?2*(2*rr-Bn-Pn)/3:rr+Pn-Bn-jn,dt(Pn+wn.frac*Xt+mn.frac*(yn+wn.frac*Wn))}if(me!=="default"){var yt,et=0;try{yt=new Uint8Array(we*_e*4)}catch{yt=new Array(we*_e*4)}if(me==="smooth"){var nt,At,Rt,Ft=ie||K,It=ae||te,Ge=new Array(Ft.length),Ye=new Array(It.length),Ne=new Array(oe),We=ie?m:d,st=ae?m:d;for(j=0;j<Ft.length;j++)Ge[j]=Math.round(k.c2p(Ft[j])-I);for(j=0;j<It.length;j++)Ye[j]=Math.round(L.c2p(It[j])-U);for(j=0;j<oe;j++)Ne[j]=We(j,Ge);for(Z=0;Z<le;Z++)for(At=J[(nt=st(Z,Ye)).bin0],Rt=J[nt.bin1],j=0;j<oe;j++,et+=4)x(yt,et,ke=_t(At,Rt,Ne[j],nt))}else for(Z=0;Z<de;Z++)for(xe=J[Z],Re=Te(Z),j=0;j<ge;j++)ke=dt(xe[j],1),x(yt,et=4*(Re*ge+Ee(j)),ke);var it=Me.createImageData(we,_e);try{it.data.set(yt)}catch{var Fe=it.data,Be=Fe.length;for(Z=0;Z<Be;Z++)Fe[Z]=yt[Z]}Me.putImageData(it,0,0)}else{var at=Math.floor(ee/2),Ze=Math.floor($/2);for(Z=0;Z<de;Z++)if(xe=J[Z],Re.reverse(),Re[Ve]=Te(Z+1),Re[0]!==Re[1]&&Re[0]!==void 0&&Re[1]!==void 0)for(Ie=[he=Ee(0),he],j=0;j<ge;j++)Ie.reverse(),Ie[Oe]=Ee(j+1),Ie[0]!==Ie[1]&&Ie[0]!==void 0&&Ie[1]!==void 0&&(ke=dt(xe[j],(Ie[1]-Ie[0])*(Re[1]-Re[0])),Me.fillStyle="rgba("+ke.join(",")+")",Me.fillRect(Ie[0]+at,Re[0]+Ze,Ie[1]-Ie[0]-ee,Re[1]-Re[0]-$))}Je=Math.round(Je/qe),ot=Math.round(ot/qe),rt=Math.round(rt/qe);var ht=A("rgb("+Je+","+ot+","+rt+")");y._hmpixcount=(y._hmpixcount||0)+qe,y._hmlumcount=(y._hmlumcount||0)+qe*ht.getLuminance();var vt=q.selectAll("image").data(P);vt.enter().append("svg:image").attr({xmlns:l.svg,preserveAspectRatio:"none"}),vt.attr({height:le,width:oe,x:I,y:U,"xlink:href":pe.toDataURL("image/png")}),me!=="fast"||ce||vt.attr("style",g),v(q);var mt=ne.texttemplate;if(mt){var ft=r(ne),Et={type:"linear",range:[ft.min,ft.max],_separators:k._separators,_numFormat:k._numFormat},Tt=ne.type==="histogram2dcontour",xt=ne.type==="contour",Ct=xt?de-1:de,Pt=xt?1:0,Bt=xt?ge-1:ge,Kt=[];for(j=xt?1:0;j<Ct;j++){var sn;if(xt)sn=V.y[j];else if(Tt){if(j===0||j===de-1)continue;sn=V.y[j]}else if(V.yCenter)sn=V.yCenter[j];else{if(j+1===de&&V.y[j+1]===void 0)continue;sn=(V.y[j]+V.y[j+1])/2}var Gt=Math.round(L.c2p(sn));if(!(0>Gt||Gt>L._length))for(Z=Pt;Z<Bt;Z++){var Yt;if(xt)Yt=V.x[Z];else if(Tt){if(Z===0||Z===ge-1)continue;Yt=V.x[Z]}else if(V.xCenter)Yt=V.xCenter[Z];else{if(Z+1===ge&&V.x[Z+1]===void 0)continue;Yt=(V.x[Z]+V.x[Z+1])/2}var rn=Math.round(k.c2p(Yt));if(!(0>rn||rn>k._length)){var Ln=n({x:Yt,y:sn},ne,y._fullLayout);Ln.x=Yt,Ln.y=sn;var Sn=V.z[j][Z];Sn===void 0?(Ln.z="",Ln.zLabel=""):(Ln.z=Sn,Ln.zLabel=_.tickText(Et,Sn,"hover").text);var gn=V.text&&V.text[j]&&V.text[j][Z];gn!==void 0&&gn!==!1||(gn=""),Ln.text=gn;var $t=p.texttemplateString(mt,Ln,y._fullLayout._d3locale,Ln,ne._meta||{});if($t){var cn=$t.split("<br>"),an=cn.length,pn=0;for(B=0;B<an;B++)pn=Math.max(pn,cn[B].length);Kt.push({l:an,c:pn,t:$t,x:rn,y:Gt,z:Sn})}}}}var An=ne.textfont,Cn=An.family,Rn=An.size,Fn=y._fullLayout.font.size;if(!Rn||Rn==="auto"){var In=1/0,Hn=1/0,Un=0,ar=0;for(B=0;B<Kt.length;B++){var ur=Kt[B];if(Un=Math.max(Un,ur.l),ar=Math.max(ar,ur.c),B<Kt.length-1){var cr=Kt[B+1],er=Math.abs(cr.x-ur.x),Tr=Math.abs(cr.y-ur.y);er&&(In=Math.min(In,er)),Tr&&(Hn=Math.min(Hn,Tr))}}isFinite(In)&&isFinite(Hn)?(In-=ee,Hn-=$,In/=ar,Hn/=Un,In/=u/2,Hn/=u,Rn=Math.min(Math.floor(In),Math.floor(Hn),Fn)):Rn=Fn}if(Rn<=0||!isFinite(Rn))return;b(q).data(Kt).enter().append("g").classed(f,1).append("text").attr("text-anchor","middle").each(function(Ht){var on=M.select(this),wn=An.color;wn&&wn!=="auto"||(wn=a.contrast("rgba("+Le(Ht.z).join()+")")),on.attr("data-notex",1).call(s.positionText,function(mn){return mn.x}(Ht),function(mn){return mn.y-Rn*(mn.l*u/2-1)}(Ht)).call(w.font,Cn,Rn,wn).text(Ht.t).call(s.convertToTspans,y)})}})}},41648:function(Y,O,e){var M=e(33428);Y.exports=function(A){M.select(A).selectAll(".hm image").style("opacity",function(o){return o.trace.opacity})}},82748:function(Y){Y.exports=function(O,e,M){M("zsmooth")===!1&&(M("xgap"),M("ygap")),M("zhoverformat")}},51264:function(Y,O,e){var M=e(38248),A=e(3400),o=e(24040);function w(_,p){var s=p(_);return(s?p(_+"type","array"):"scaled")==="scaled"&&(p(_+"0"),p("d"+_)),s}Y.exports=function(_,p,s,n,a,r){var i,l,u=s("z");if(a=a||"x",r=r||"y",u===void 0||!u.length)return 0;if(A.isArray1D(u)){i=s(a),l=s(r);var c=A.minRowLength(i),g=A.minRowLength(l);if(c===0||g===0)return 0;p._length=Math.min(c,g,u.length)}else{if(i=w(a,s),l=w(r,s),!function(f){for(var b,v=!0,d=!1,m=!1,x=0;x<f.length;x++){if(b=f[x],!A.isArrayOrTypedArray(b)){v=!1;break}b.length>0&&(d=!0);for(var y=0;y<b.length;y++)if(M(b[y])){m=!0;break}}return v&&d&&m}(u))return 0;s("transpose"),p._length=null}return _.type==="heatmapgl"||o.getComponentMethod("calendars","handleTraceDefaults")(_,p,[a,r],n),!0}},74512:function(Y,O,e){for(var M=e(83328),A=e(49084),o=e(92880).extendFlat,w=e(67824).overrideAll,_=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],p={},s=0;s<_.length;s++){var n=_[s];p[n]=M[n]}p.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},o(p,A("",{cLetter:"z",autoColorDflt:!1})),Y.exports=w(p,"calc","nested")},84656:function(Y,O,e){var M=e(67792).gl_heatmap2d,A=e(54460),o=e(43080);function w(p,s){this.scene=p,this.uid=s,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=M(p.glplot,this.options),this.heatmap._trace=this}var _=w.prototype;_.handlePick=function(p){var s=this.options,n=s.shape,a=p.pointId,r=a%n[0],i=Math.floor(a/n[0]),l=a;return{trace:this,dataCoord:p.dataCoord,traceCoord:[s.x[r],s.y[i],s.z[l]],textLabel:this.textLabels[a],name:this.name,pointIndex:[i,r],hoverinfo:this.hoverinfo}},_.update=function(p,s){var n=s[0];this.index=p.index,this.name=p.name,this.hoverinfo=p.hoverinfo;var a=n.z;this.options.z=[].concat.apply([],a);var r=a[0].length,i=a.length;this.options.shape=[r,i],this.options.x=n.x,this.options.y=n.y,this.options.zsmooth=p.zsmooth;var l=function(b){for(var v=b.colorscale,d=b.zmin,m=b.zmax,x=v.length,y=new Array(x),T=new Array(4*x),h=0;h<x;h++){var E=v[h],k=o(E[1]);y[h]=d+E[0]*(m-d);for(var L=0;L<4;L++)T[4*h+L]=k[L]}return{colorLevels:y,colorValues:T}}(p);this.options.colorLevels=l.colorLevels,this.options.colorValues=l.colorValues,this.textLabels=[].concat.apply([],p.text),this.heatmap.update(this.options);var u,c,g=this.scene.xaxis,f=this.scene.yaxis;p.zsmooth===!1&&(u={ppad:n.x[1]-n.x[0]},c={ppad:n.y[1]-n.y[0]}),p._extremes[g._id]=A.findExtremes(g,n.x,u),p._extremes[f._id]=A.findExtremes(f,n.y,c)},_.dispose=function(){this.heatmap.dispose()},Y.exports=function(p,s,n){var a=new w(p,s.uid);return a.update(s,n),a}},86464:function(Y,O,e){var M=e(3400),A=e(51264),o=e(27260),w=e(74512);Y.exports=function(_,p,s,n){function a(r,i){return M.coerce(_,p,w,r,i)}A(_,p,a,n)?(a("text"),a("zsmooth"),o(_,p,n,a,{prefix:"",cLetter:"z"})):p.visible=!1}},45536:function(Y,O,e){Y.exports={attributes:e(74512),supplyDefaults:e(86464),colorbar:e(96288),calc:e(19512),plot:e(84656),moduleType:"trace",name:"heatmapgl",basePlotModule:e(39952),categories:["gl","gl2d","2dMap"],meta:{}}},40196:function(Y,O,e){var M=e(20832),A=e(29736).axisHoverFormat,o=e(21776).Ks,w=e(21776).Gw,_=e(25376),p=e(11120),s=e(73316),n=e(92880).extendFlat;Y.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:A("x"),yhoverformat:A("y"),text:n({},M.text,{}),hovertext:n({},M.hovertext,{}),orientation:M.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:p("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:p("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:o({},{keys:s.eventDataKeys}),texttemplate:w({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:n({},M.textposition,{arrayOk:!1}),textfont:_({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:_({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:_({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:M.insidetextanchor,textangle:M.textangle,cliponaxis:M.cliponaxis,constraintext:M.constraintext,marker:M.marker,offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:M.selected,unselected:M.unselected,_deprecated:{bardir:M._deprecated.bardir}}},2e3:function(Y){Y.exports=function(O,e){for(var M=O.length,A=0,o=0;o<M;o++)e[o]?(O[o]/=e[o],A+=O[o]):O[o]=null;return A}},11120:function(Y){Y.exports=function(O,e){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},16964:function(Y,O,e){var M=e(38248);Y.exports={count:function(A,o,w){return w[A]++,1},sum:function(A,o,w,_){var p=_[o];return M(p)?(p=Number(p),w[A]+=p,p):0},avg:function(A,o,w,_,p){var s=_[o];return M(s)&&(s=Number(s),w[A]+=s,p[A]++),0},min:function(A,o,w,_){var p=_[o];if(M(p)){if(p=Number(p),!M(w[A]))return w[A]=p,p;if(w[A]>p){var s=p-w[A];return w[A]=p,s}}return 0},max:function(A,o,w,_){var p=_[o];if(M(p)){if(p=Number(p),!M(w[A]))return w[A]=p,p;if(w[A]<p){var s=p-w[A];return w[A]=p,s}}return 0}}},67712:function(Y,O,e){var M=e(39032),A=M.ONEAVGYEAR,o=M.ONEAVGMONTH,w=M.ONEDAY,_=M.ONEHOUR,p=M.ONEMIN,s=M.ONESEC,n=e(54460).tickIncrement;function a(u,c,g,f){if(u*c<=0)return 1/0;for(var b=Math.abs(c-u),v=g.type==="date",d=r(b,v),m=0;m<10;m++){var x=r(80*d,v);if(d===x||!i(x,u,c,v,g,f))break;d=x}return d}function r(u,c){return c&&u>s?u>w?u>1.1*A?A:u>1.1*o?o:w:u>_?_:u>p?p:s:Math.pow(10,Math.floor(Math.log(u)/Math.LN10))}function i(u,c,g,f,b,v){if(f&&u>w){var d=l(c,b,v),m=l(g,b,v),x=u===A?0:1;return d[x]!==m[x]}return Math.floor(g/u)-Math.floor(c/u)>.1}function l(u,c,g){var f=c.c2d(u,A,g).split("-");return f[0]===""&&(f.unshift(),f[0]="-"+f[0]),f}Y.exports=function(u,c,g,f,b){var v,d,m=-1.1*c,x=-.1*c,y=u-x,T=g[0],h=g[1],E=Math.min(a(T+x,T+y,f,b),a(h+x,h+y,f,b)),k=Math.min(a(T+m,T+x,f,b),a(h+m,h+x,f,b));if(E>k&&k<Math.abs(h-T)/4e3?(v=E,d=!1):(v=Math.min(E,k),d=!0),f.type==="date"&&v>w){var L=v===A?1:6,P=v===A?"M12":"M1";return function(I,z){var F=f.c2d(I,A,b),U=F.indexOf("-",L);U>0&&(F=F.substr(0,U));var R=f.d2c(F,0,b);if(R<I){var j=n(R,P,!1,b);(R+j)/2<I+u&&(R=j)}return z&&d?n(R,P,!0,b):R}}return function(I,z){var F=v*Math.round(I/v);return F+v/10<I&&F+.9*v<I+u&&(F+=v),z&&d&&(F-=v),F}}},35852:function(Y,O,e){var M=e(38248),A=e(3400),o=e(24040),w=e(54460),_=e(84664),p=e(16964),s=e(10648),n=e(2e3),a=e(67712);function r(i,l,u,c,g){var f,b,v,d,m,x,y,T=c+"bins",h=i._fullLayout,E=l["_"+c+"bingroup"],k=h._histogramBinOpts[E],L=h.barmode==="overlay",P=function(be){return u.r2c(be,0,d)},I=function(be){return u.c2r(be,0,d)},z=u.type==="date"?function(be){return be||be===0?A.cleanDate(be,null,d):null}:function(be){return M(be)?Number(be):null};function F(be,me,Se){me[be+"Found"]?(me[be]=z(me[be]),me[be]===null&&(me[be]=Se[be])):(x[be]=me[be]=Se[be],A.nestedProperty(b[0],T+"."+be).set(Se[be]))}if(l["_"+c+"autoBinFinished"])delete l["_"+c+"autoBinFinished"];else{b=k.traces;var U=[],R=!0,j=!1,Z=!1;for(f=0;f<b.length;f++)if((v=b[f]).visible){var B=k.dirs[f];m=v["_"+B+"pos0"]=u.makeCalcdata(v,B),U=A.concat(U,m),delete v["_"+c+"autoBinFinished"],l.visible===!0&&(R?R=!1:(delete v._autoBin,v["_"+c+"autoBinFinished"]=1),o.traceIs(v,"2dMap")&&(j=!0),v.type==="histogram2dcontour"&&(Z=!0))}d=b[0][c+"calendar"];var q=w.autoBin(U,u,k.nbins,j,d,k.sizeFound&&k.size),V=b[0]._autoBin={};if(x=V[k.dirs[0]]={},Z&&(k.size||(q.start=I(w.tickIncrement(P(q.start),q.size,!0,d))),k.end===void 0&&(q.end=I(w.tickIncrement(P(q.end),q.size,!1,d)))),L&&!o.traceIs(l,"2dMap")&&q._dataSpan===0&&u.type!=="category"&&u.type!=="multicategory"&&l.bingroup===""&&l.xbins===void 0){if(g)return[q,m,!0];q=function(be,me,Se,we,_e){var oe,le,pe,Ee=be._fullLayout,Te=function(Je,ot){for(var rt=ot.xaxis,dt=ot.yaxis,_t=ot.orientation,yt=[],et=Je._fullData,nt=0;nt<et.length;nt++){var At=et[nt];At.type==="histogram"&&At.visible===!0&&At.orientation===_t&&At.xaxis===rt&&At.yaxis===dt&&yt.push(At)}return yt}(be,me),Me=!1,Le=1/0,Ie=[me];for(oe=0;oe<Te.length;oe++)if((le=Te[oe])===me)Me=!0;else if(Me){var he=r(be,le,Se,we,!0),xe=he[0],ke=he[2];le["_"+we+"autoBinFinished"]=1,le["_"+we+"pos0"]=he[1],ke?Ie.push(le):Le=Math.min(Le,xe.size)}else pe=Ee._histogramBinOpts[le["_"+we+"bingroup"]],Le=Math.min(Le,pe.size||le[_e].size);var ze=new Array(Ie.length);for(oe=0;oe<Ie.length;oe++)for(var Re=Ie[oe]["_"+we+"pos0"],Oe=0;Oe<Re.length;Oe++)if(Re[Oe]!==void 0){ze[oe]=Re[Oe];break}for(isFinite(Le)||(Le=A.distinctVals(ze).minDiff),oe=0;oe<Ie.length;oe++){var Ve=(le=Ie[oe])[we+"calendar"],qe={start:Se.c2r(ze[oe]-Le/2,0,Ve),end:Se.c2r(ze[oe]+Le/2,0,Ve),size:Le};le._input[_e]=le[_e]=qe,(pe=Ee._histogramBinOpts[le["_"+we+"bingroup"]])&&A.extendFlat(pe,qe)}return me[_e]}(i,l,u,c,T)}(y=v.cumulative||{}).enabled&&y.currentbin!=="include"&&(y.direction==="decreasing"?q.start=I(w.tickIncrement(P(q.start),q.size,!0,d)):q.end=I(w.tickIncrement(P(q.end),q.size,!1,d))),k.size=q.size,k.sizeFound||(x.size=q.size,A.nestedProperty(b[0],T+".size").set(q.size)),F("start",k,q),F("end",k,q)}m=l["_"+c+"pos0"],delete l["_"+c+"pos0"];var ne=l._input[T]||{},ee=A.extendFlat({},k),$=k.start,J=u.r2l(ne.start),K=J!==void 0;if((k.startFound||K)&&J!==u.r2l($)){var te=K?J:A.aggNums(Math.min,null,m),ie={type:u.type==="category"||u.type==="multicategory"?"linear":u.type,r2l:u.r2l,dtick:k.size,tick0:$,calendar:d,range:[te,w.tickIncrement(te,k.size,!1,d)].map(u.l2r)},ae=w.tickFirst(ie);ae>u.r2l(te)&&(ae=w.tickIncrement(ae,k.size,!0,d)),ee.start=u.l2r(ae),K||A.nestedProperty(l,T+".start").set(ee.start)}var se=k.end,ce=u.r2l(ne.end),de=ce!==void 0;if((k.endFound||de)&&ce!==u.r2l(se)){var ge=de?ce:A.aggNums(Math.max,null,m);ee.end=u.l2r(ge),de||A.nestedProperty(l,T+".start").set(ee.end)}var ve="autobin"+c;return l._input[ve]===!1&&(l._input[T]=A.extendFlat({},l[T]||{}),delete l._input[ve],delete l[ve]),[ee,m]}Y.exports={calc:function(i,l){var u,c,g,f,b=[],v=[],d=l.orientation==="h",m=w.getFromId(i,d?l.yaxis:l.xaxis),x=d?"y":"x",y={x:"y",y:"x"}[x],T=l[x+"calendar"],h=l.cumulative,E=r(i,l,m,x),k=E[0],L=E[1],P=typeof k.size=="string",I=[],z=P?I:k,F=[],U=[],R=[],j=0,Z=l.histnorm,B=l.histfunc,q=Z.indexOf("density")!==-1;h.enabled&&q&&(Z=Z.replace(/ ?density$/,""),q=!1);var V,ne=B==="max"||B==="min"?null:0,ee=p.count,$=s[Z],J=!1,K=function(le){return m.r2c(le,0,T)};for(A.isArrayOrTypedArray(l[y])&&B!=="count"&&(V=l[y],J=B==="avg",ee=p[B]),u=K(k.start),g=K(k.end)+(u-w.tickIncrement(u,k.size,!1,T))/1e6;u<g&&b.length<1e6&&(c=w.tickIncrement(u,k.size,!1,T),b.push((u+c)/2),v.push(ne),R.push([]),I.push(u),q&&F.push(1/(c-u)),J&&U.push(0),!(c<=u));)u=c;I.push(u),P||m.type!=="date"||(z={start:K(z.start),end:K(z.end),size:z.size}),i._fullLayout._roundFnOpts||(i._fullLayout._roundFnOpts={});var te=l["_"+x+"bingroup"],ie={leftGap:1/0,rightGap:1/0};te&&(i._fullLayout._roundFnOpts[te]||(i._fullLayout._roundFnOpts[te]=ie),ie=i._fullLayout._roundFnOpts[te]);var ae,se=v.length,ce=!0,de=ie.leftGap,ge=ie.rightGap,ve={};for(u=0;u<L.length;u++){var be=L[u];(f=A.findBin(be,z))>=0&&f<se&&(j+=ee(f,u,v,V,U),ce&&R[f].length&&be!==L[R[f][0]]&&(ce=!1),R[f].push(u),ve[u]=f,de=Math.min(de,be-I[f]),ge=Math.min(ge,I[f+1]-be))}ie.leftGap=de,ie.rightGap=ge,ce||(ae=function(le,pe){return function(){var Ee=i._fullLayout._roundFnOpts[te];return a(Ee.leftGap,Ee.rightGap,I,m,T)(le,pe)}}),J&&(j=n(v,U)),$&&$(v,j,F),h.enabled&&function(le,pe,Ee){var Te,Me,Le;function Ie(xe){Le=le[xe],le[xe]/=2}function he(xe){Me=le[xe],le[xe]=Le+Me/2,Le+=Me}if(Ee==="half")if(pe==="increasing")for(Ie(0),Te=1;Te<le.length;Te++)he(Te);else for(Ie(le.length-1),Te=le.length-2;Te>=0;Te--)he(Te);else if(pe==="increasing"){for(Te=1;Te<le.length;Te++)le[Te]+=le[Te-1];Ee==="exclude"&&(le.unshift(0),le.pop())}else{for(Te=le.length-2;Te>=0;Te--)le[Te]+=le[Te+1];Ee==="exclude"&&(le.push(0),le.shift())}}(v,h.direction,h.currentbin);var me=Math.min(b.length,v.length),Se=[],we=0,_e=me-1;for(u=0;u<me;u++)if(v[u]){we=u;break}for(u=me-1;u>=we;u--)if(v[u]){_e=u;break}for(u=we;u<=_e;u++)if(M(b[u])&&M(v[u])){var oe={p:b[u],s:v[u],b:0};h.enabled||(oe.pts=R[u],ce?oe.ph0=oe.ph1=R[u].length?L[R[u][0]]:b[u]:(l._computePh=!0,oe.ph0=ae(I[u]),oe.ph1=ae(I[u+1],!0))),Se.push(oe)}return Se.length===1&&(Se[0].width1=w.tickIncrement(Se[0].p,k.size,!1,T)-Se[0].p),_(Se,l),A.isArrayOrTypedArray(l.selectedpoints)&&A.tagSelected(Se,l,ve),Se},calcAllAutoBins:r}},73316:function(Y){Y.exports={eventDataKeys:["binNumber"]}},80536:function(Y,O,e){var M=e(3400),A=e(79811),o=e(24040).traceIs,w=e(20011),_=e(31508).validateCornerradius,p=M.nestedProperty,s=e(71888).getAxisGroup,n=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],a=["x","y"];Y.exports=function(r,i){var l,u,c,g,f,b,v,d=i._histogramBinOpts={},m=[],x={},y=[];function T(ne,ee){return M.coerce(l._input,l,l._module.attributes,ne,ee)}function h(ne){return ne.orientation==="v"?"x":"y"}function E(ne,ee,$){var J=ne.uid+"__"+$;ee||(ee=J);var K=function(se,ce){return A.getFromTrace({_fullLayout:i},se,ce).type}(ne,$),te=ne[$+"calendar"]||"",ie=d[ee],ae=!0;ie&&(K===ie.axType&&te===ie.calendar?(ae=!1,ie.traces.push(ne),ie.dirs.push($)):(ee=J,K!==ie.axType&&M.warn(["Attempted to group the bins of trace",ne.index,"set on a","type:"+K,"axis","with bins on","type:"+ie.axType,"axis."].join(" ")),te!==ie.calendar&&M.warn(["Attempted to group the bins of trace",ne.index,"set with a",te,"calendar","with bins",ie.calendar?"on a "+ie.calendar+" calendar":"w/o a set calendar"].join(" ")))),ae&&(d[ee]={traces:[ne],dirs:[$],axType:K,calendar:ne[$+"calendar"]||""}),ne["_"+$+"bingroup"]=ee}for(f=0;f<r.length;f++)if(l=r[f],o(l,"histogram")){if(m.push(l),delete l._xautoBinFinished,delete l._yautoBinFinished,l.type==="histogram"){var k=T("marker.cornerradius",i.barcornerradius);l.marker&&(l.marker.cornerradius=_(k))}o(l,"2dMap")||w(l._input,l,i,T)}var L=i._alignmentOpts||{};for(f=0;f<m.length;f++){if(l=m[f],c="",!o(l,"2dMap")){if(g=h(l),i.barmode==="group"&&l.alignmentgroup){var P=l[g+"axis"],I=s(i,P)+l.orientation;(L[I]||{})[l.alignmentgroup]&&(c=I)}c||i.barmode==="overlay"||(c=s(i,l.xaxis)+s(i,l.yaxis)+h(l))}c?(x[c]||(x[c]=[]),x[c].push(l)):y.push(l)}for(c in x)if((u=x[c]).length!==1){var z=!1;for(u.length&&(l=u[0],z=T("bingroup")),c=z||c,f=0;f<u.length;f++){var F=(l=u[f])._input.bingroup;F&&F!==c&&M.warn(["Trace",l.index,"must match","within bingroup",c+".","Ignoring its bingroup:",F,"setting."].join(" ")),l.bingroup=c,E(l,c,h(l))}}else y.push(u[0]);for(f=0;f<y.length;f++){l=y[f];var U=T("bingroup");if(o(l,"2dMap"))for(v=0;v<2;v++){var R=T((g=a[v])+"bingroup",U?U+"__"+g:null);E(l,R,g)}else E(l,U,h(l))}for(c in d){var j=d[c];for(u=j.traces,b=0;b<n.length;b++){var Z,B,q=n[b],V=q.name;if(V!=="nbins"||!j.sizeFound){for(f=0;f<u.length;f++){if(l=u[f],g=j.dirs[f],Z=q.aStr[g],p(l._input,Z).get()!==void 0){j[V]=T(Z),j[V+"Found"]=!0;break}(B=(l._autoBin||{})[g]||{})[V]&&p(l,Z).set(B[V])}if(V==="start"||V==="end")for(;f<u.length;f++)(l=u[f])["_"+g+"bingroup"]&&T(Z,(B=(l._autoBin||{})[g]||{})[V]);V!=="nbins"||j.sizeFound||j.nbinsFound||(l=u[0],j[V]=T(Z))}}}}},6616:function(Y,O,e){var M=e(24040),A=e(3400),o=e(76308),w=e(31508).handleText,_=e(55592),p=e(40196);Y.exports=function(s,n,a,r){function i(x,y){return A.coerce(s,n,p,x,y)}var l=i("x"),u=i("y");i("cumulative.enabled")&&(i("cumulative.direction"),i("cumulative.currentbin")),i("text");var c=i("textposition");w(s,n,r,i,c,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat");var g=i("orientation",u&&!l?"h":"v"),f=g==="v"?"x":"y",b=g==="v"?"y":"x",v=l&&u?Math.min(A.minRowLength(l)&&A.minRowLength(u)):A.minRowLength(n[f]||[]);if(v){n._length=v,M.getComponentMethod("calendars","handleTraceDefaults")(s,n,["x","y"],r),n[b]&&i("histfunc"),i("histnorm"),i("autobin"+f),_(s,n,i,a,r),A.coerceSelectionMarkerOpacity(n,i);var d=(n.marker.line||{}).color,m=M.getComponentMethod("errorbars","supplyDefaults");m(s,n,d||o.defaultLine,{axis:"y"}),m(s,n,d||o.defaultLine,{axis:"x",inherit:"y"})}else n.visible=!1}},84980:function(Y){Y.exports=function(O,e,M,A,o){if(O.x="xVal"in e?e.xVal:e.x,O.y="yVal"in e?e.yVal:e.y,"zLabelVal"in e&&(O.z=e.zLabelVal),e.xa&&(O.xaxis=e.xa),e.ya&&(O.yaxis=e.ya),!(M.cumulative||{}).enabled){var w,_=Array.isArray(o)?A[0].pts[o[0]][o[1]]:A[o].pts;if(O.pointNumbers=_,O.binNumber=O.pointNumber,delete O.pointNumber,delete O.pointIndex,M._indexToPoints){w=[];for(var p=0;p<_.length;p++)w=w.concat(M._indexToPoints[_[p]])}else w=_;O.pointIndices=w}return O}},43339:function(Y,O,e){var M=e(63400).hoverPoints,A=e(54460).hoverLabelText;Y.exports=function(o,w,_,p,s){var n=M(o,w,_,p,s);if(n){var a=(o=n[0]).cd[o.index],r=o.cd[0].trace;if(!r.cumulative.enabled){var i=r.orientation==="h"?"y":"x";o[i+"Label"]=A(o[i+"a"],[a.ph0,a.ph1],r[i+"hoverformat"])}return n}}},42600:function(Y,O,e){Y.exports={attributes:e(40196),layoutAttributes:e(39324),supplyDefaults:e(6616),crossTraceDefaults:e(80536),supplyLayoutDefaults:e(37156),calc:e(35852).calc,crossTraceCalc:e(96376).crossTraceCalc,plot:e(98184).plot,layerName:"barlayer",style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,colorbar:e(5528),hoverPoints:e(43339),selectPoints:e(45784),eventData:e(84980),moduleType:"trace",name:"histogram",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},10648:function(Y){Y.exports={percent:function(O,e){for(var M=O.length,A=100/e,o=0;o<M;o++)O[o]*=A},probability:function(O,e){for(var M=O.length,A=0;A<M;A++)O[A]/=e},density:function(O,e,M,A){var o=O.length;A=A||1;for(var w=0;w<o;w++)O[w]*=M[w]*A},"probability density":function(O,e,M,A){var o=O.length;A&&(e/=A);for(var w=0;w<o;w++)O[w]*=M[w]/e}}},37008:function(Y,O,e){var M=e(40196),A=e(11120),o=e(83328),w=e(45464),_=e(29736).axisHoverFormat,p=e(21776).Ks,s=e(21776).Gw,n=e(49084),a=e(92880).extendFlat;Y.exports=a({x:M.x,y:M.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:M.histnorm,histfunc:M.histfunc,nbinsx:M.nbinsx,xbins:A("x"),nbinsy:M.nbinsy,ybins:A("y"),autobinx:M.autobinx,autobiny:M.autobiny,bingroup:a({},M.bingroup,{}),xbingroup:a({},M.bingroup,{}),ybingroup:a({},M.bingroup,{}),xgap:o.xgap,ygap:o.ygap,zsmooth:o.zsmooth,xhoverformat:_("x"),yhoverformat:_("y"),zhoverformat:_("z",1),hovertemplate:p({},{keys:"z"}),texttemplate:s({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:o.textfont,showlegend:a({},w.showlegend,{dflt:!1})},n("",{cLetter:"z",autoColorDflt:!1}))},55480:function(Y,O,e){var M=e(3400),A=e(54460),o=e(16964),w=e(10648),_=e(2e3),p=e(67712),s=e(35852).calcAllAutoBins;function n(i,l,u,c){var g,f=new Array(i);if(c)for(g=0;g<i;g++)f[g]=1/(l[g+1]-l[g]);else{var b=1/u;for(g=0;g<i;g++)f[g]=b}return f}function a(i,l){return{start:i(l.start),end:i(l.end),size:l.size}}function r(i,l,u,c,g,f){var b,v=i.length-1,d=new Array(v),m=p(u,c,i,g,f);for(b=0;b<v;b++){var x=(l||[])[b];d[b]=x===void 0?[m(i[b]),m(i[b+1],!0)]:[x,x]}return d}Y.exports=function(i,l){var u,c,g,f,b=A.getFromId(i,l.xaxis),v=A.getFromId(i,l.yaxis),d=l.xcalendar,m=l.ycalendar,x=function(dt){return b.r2c(dt,0,d)},y=function(dt){return v.r2c(dt,0,m)},T=s(i,l,b,"x"),h=T[0],E=T[1],k=s(i,l,v,"y"),L=k[0],P=k[1],I=l._length;E.length>I&&E.splice(I,E.length-I),P.length>I&&P.splice(I,P.length-I);var z=[],F=[],U=[],R=typeof h.size=="string",j=typeof L.size=="string",Z=[],B=[],q=R?Z:h,V=j?B:L,ne=0,ee=[],$=[],J=l.histnorm,K=l.histfunc,te=J.indexOf("density")!==-1,ie=K==="max"||K==="min"?null:0,ae=o.count,se=w[J],ce=!1,de=[],ge=[],ve="z"in l?l.z:"marker"in l&&Array.isArray(l.marker.color)?l.marker.color:"";ve&&K!=="count"&&(ce=K==="avg",ae=o[K]);var be=h.size,me=x(h.start),Se=x(h.end)+(me-A.tickIncrement(me,be,!1,d))/1e6;for(u=me;u<Se;u=A.tickIncrement(u,be,!1,d))F.push(ie),Z.push(u),ce&&U.push(0);Z.push(u);var we,_e=F.length,oe=(u-me)/_e,le=(we=me+oe/2,b.c2r(we,0,d)),pe=L.size,Ee=y(L.start),Te=y(L.end)+(Ee-A.tickIncrement(Ee,pe,!1,m))/1e6;for(u=Ee;u<Te;u=A.tickIncrement(u,pe,!1,m)){z.push(F.slice()),B.push(u);var Me=new Array(_e);for(c=0;c<_e;c++)Me[c]=[];$.push(Me),ce&&ee.push(U.slice())}B.push(u);var Le=z.length,Ie=(u-Ee)/Le,he=function(dt){return v.c2r(dt,0,m)}(Ee+Ie/2);te&&(de=n(F.length,q,oe,R),ge=n(z.length,V,Ie,j)),R||b.type!=="date"||(q=a(x,q)),j||v.type!=="date"||(V=a(y,V));var xe=!0,ke=!0,ze=new Array(_e),Re=new Array(Le),Oe=1/0,Ve=1/0,qe=1/0,Je=1/0;for(u=0;u<I;u++){var ot=E[u],rt=P[u];g=M.findBin(ot,q),f=M.findBin(rt,V),g>=0&&g<_e&&f>=0&&f<Le&&(ne+=ae(g,u,z[f],ve,ee[f]),$[f][g].push(u),xe&&(ze[g]===void 0?ze[g]=ot:ze[g]!==ot&&(xe=!1)),ke&&(Re[f]===void 0?Re[f]=rt:Re[f]!==rt&&(ke=!1)),Oe=Math.min(Oe,ot-Z[g]),Ve=Math.min(Ve,Z[g+1]-ot),qe=Math.min(qe,rt-B[f]),Je=Math.min(Je,B[f+1]-rt))}if(ce)for(f=0;f<Le;f++)ne+=_(z[f],ee[f]);if(se)for(f=0;f<Le;f++)se(z[f],ne,de,ge[f]);return{x:E,xRanges:r(Z,xe&&ze,Oe,Ve,b,d),x0:le,dx:oe,y:P,yRanges:r(B,ke&&Re,qe,Je,v,m),y0:he,dy:Ie,z,pts:$}}},99784:function(Y,O,e){var M=e(3400),A=e(56408),o=e(82748),w=e(27260),_=e(39096),p=e(37008);Y.exports=function(s,n,a,r){function i(l,u){return M.coerce(s,n,p,l,u)}A(s,n,i,r),n.visible!==!1&&(o(s,n,i,r),w(s,n,r,i,{prefix:"",cLetter:"z"}),i("hovertemplate"),_(i,r),i("xhoverformat"),i("yhoverformat"))}},59576:function(Y,O,e){var M=e(55512),A=e(54460).hoverLabelText;Y.exports=function(o,w,_,p,s){var n=M(o,w,_,p,s);if(n){var a=(o=n[0]).index,r=a[0],i=a[1],l=o.cd[0],u=l.trace,c=l.xRanges[i],g=l.yRanges[r];return o.xLabel=A(o.xa,[c[0],c[1]],u.xhoverformat),o.yLabel=A(o.ya,[g[0],g[1]],u.yhoverformat),n}}},21536:function(Y,O,e){Y.exports={attributes:e(37008),supplyDefaults:e(99784),crossTraceDefaults:e(80536),calc:e(19512),plot:e(41420),layerName:"heatmaplayer",colorbar:e(96288),style:e(41648),hoverPoints:e(59576),eventData:e(84980),moduleType:"trace",name:"histogram2d",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},56408:function(Y,O,e){var M=e(24040),A=e(3400);Y.exports=function(o,w,_,p){var s=_("x"),n=_("y"),a=A.minRowLength(s),r=A.minRowLength(n);a&&r?(w._length=Math.min(a,r),M.getComponentMethod("calendars","handleTraceDefaults")(o,w,["x","y"],p),(_("z")||_("marker.color"))&&_("histfunc"),_("histnorm"),_("autobinx"),_("autobiny")):w.visible=!1}},81220:function(Y,O,e){var M=e(37008),A=e(67104),o=e(49084),w=e(29736).axisHoverFormat,_=e(92880).extendFlat;Y.exports=_({x:M.x,y:M.y,z:M.z,marker:M.marker,histnorm:M.histnorm,histfunc:M.histfunc,nbinsx:M.nbinsx,xbins:M.xbins,nbinsy:M.nbinsy,ybins:M.ybins,autobinx:M.autobinx,autobiny:M.autobiny,bingroup:M.bingroup,xbingroup:M.xbingroup,ybingroup:M.ybingroup,autocontour:A.autocontour,ncontours:A.ncontours,contours:A.contours,line:{color:A.line.color,width:_({},A.line.width,{dflt:.5}),dash:A.line.dash,smoothing:A.line.smoothing,editType:"plot"},xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z",1),hovertemplate:M.hovertemplate,texttemplate:A.texttemplate,textfont:A.textfont},o("",{cLetter:"z",editTypeOverride:"calc"}))},3704:function(Y,O,e){var M=e(3400),A=e(56408),o=e(84952),w=e(97680),_=e(39096),p=e(81220);Y.exports=function(s,n,a,r){function i(l,u){return M.coerce(s,n,p,l,u)}A(s,n,i,r),n.visible!==!1&&(o(s,n,i,function(l){return M.coerce2(s,n,p,l)}),w(s,n,i,r),i("xhoverformat"),i("yhoverformat"),i("hovertemplate"),n.contours&&n.contours.coloring==="heatmap"&&_(i,r))}},65664:function(Y,O,e){Y.exports={attributes:e(81220),supplyDefaults:e(3704),crossTraceDefaults:e(80536),calc:e(20688),plot:e(23676).plot,layerName:"contourlayer",style:e(52440),colorbar:e(55296),hoverPoints:e(38200),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},97376:function(Y,O,e){var M=e(21776).Ks,A=e(21776).Gw,o=e(49084),w=e(86968).u,_=e(74996),p=e(424),s=e(40516),n=e(32984),a=e(92880).extendFlat,r=e(98192).c;Y.exports={labels:p.labels,parents:p.parents,values:p.values,branchvalues:p.branchvalues,count:p.count,level:p.level,maxdepth:p.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:s.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:a({colors:p.marker.colors,line:p.marker.line,pattern:r,editType:"calc"},o("marker",{colorAttr:"colors",anim:!1})),leaf:p.leaf,pathbar:s.pathbar,text:_.text,textinfo:p.textinfo,texttemplate:A({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),hovertext:_.hovertext,hoverinfo:p.hoverinfo,hovertemplate:M({},{keys:n.eventDataKeys}),textfont:_.textfont,insidetextfont:_.insidetextfont,outsidetextfont:s.outsidetextfont,textposition:s.textposition,sort:_.sort,root:p.root,domain:w({name:"icicle",trace:!0,editType:"calc"})}},59564:function(Y,O,e){var M=e(7316);O.name="icicle",O.plot=function(A,o,w,_){M.plotBasePlot(O.name,A,o,w,_)},O.clean=function(A,o,w,_){M.cleanBasePlot(O.name,A,o,w,_)}},73876:function(Y,O,e){var M=e(3776);O.r=function(A,o){return M.calc(A,o)},O.q=function(A){return M._runCrossTraceCalc("icicle",A)}},7045:function(Y,O,e){var M=e(3400),A=e(97376),o=e(76308),w=e(86968).Q,_=e(31508).handleText,p=e(78048).TEXTPAD,s=e(74174).handleMarkerDefaults,n=e(8932),a=n.hasColorscale,r=n.handleDefaults;Y.exports=function(i,l,u,c){function g(y,T){return M.coerce(i,l,A,y,T)}var f=g("labels"),b=g("parents");if(f&&f.length&&b&&b.length){var v=g("values");v&&v.length?g("branchvalues"):g("count"),g("level"),g("maxdepth"),g("tiling.orientation"),g("tiling.flip"),g("tiling.pad");var d=g("text");g("texttemplate"),l.texttemplate||g("textinfo",M.isArrayOrTypedArray(d)?"text+label":"label"),g("hovertext"),g("hovertemplate");var m=g("pathbar.visible");_(i,l,c,g,"auto",{hasPathbar:m,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),g("textposition"),s(i,l,c,g);var x=l._hasColorscale=a(i,"marker","colors")||(i.marker||{}).coloraxis;x&&r(i,l,c,g,{prefix:"marker.",cLetter:"c"}),g("leaf.opacity",x?1:.7),l._hovered={marker:{line:{width:2,color:o.contrast(c.paper_bgcolor)}}},m&&(g("pathbar.thickness",l.pathbar.textfont.size+2*p),g("pathbar.side"),g("pathbar.edgeshape")),g("sort"),g("root.color"),w(l,c,g),l._length=null}else l.visible=!1}},67880:function(Y,O,e){var M=e(33428),A=e(3400),o=e(43616),w=e(72736),_=e(25132),p=e(47192).styleOne,s=e(32984),n=e(78176),a=e(45716),r=e(96488).formatSliceLabel,i=!1;Y.exports=function(l,u,c,g,f){var b=f.width,v=f.height,d=f.viewX,m=f.viewY,x=f.pathSlice,y=f.toMoveInsideSlice,T=f.strTransform,h=f.hasTransition,E=f.handleSlicesExit,k=f.makeUpdateSliceInterpolator,L=f.makeUpdateTextInterpolator,P=f.prevEntry,I=l._context.staticPlot,z=l._fullLayout,F=u[0].trace,U=F.textposition.indexOf("left")!==-1,R=F.textposition.indexOf("right")!==-1,j=F.textposition.indexOf("bottom")!==-1,Z=_(c,[b,v],{flipX:F.tiling.flip.indexOf("x")>-1,flipY:F.tiling.flip.indexOf("y")>-1,orientation:F.tiling.orientation,pad:{inner:F.tiling.pad},maxDepth:F._maxDepth}).descendants(),B=1/0,q=-1/0;Z.forEach(function(J){var K=J.depth;K>=F._maxDepth?(J.x0=J.x1=(J.x0+J.x1)/2,J.y0=J.y1=(J.y0+J.y1)/2):(B=Math.min(B,K),q=Math.max(q,K))}),g=g.data(Z,n.getPtId),F._maxVisibleLayers=isFinite(q)?q-B+1:0,g.enter().append("g").classed("slice",!0),E(g,i,{},[b,v],x),g.order();var V=null;if(h&&P){var ne=n.getPtId(P);g.each(function(J){V===null&&n.getPtId(J)===ne&&(V={x0:J.x0,x1:J.x1,y0:J.y0,y1:J.y1})})}var ee=function(){return V||{x0:0,x1:b,y0:0,y1:v}},$=g;return h&&($=$.transition().each("end",function(){var J=M.select(this);n.setSliceCursor(J,l,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),$.each(function(J){J._x0=d(J.x0),J._x1=d(J.x1),J._y0=m(J.y0),J._y1=m(J.y1),J._hoverX=d(J.x1-F.tiling.pad),J._hoverY=m(j?J.y1-F.tiling.pad/2:J.y0+F.tiling.pad/2);var K=M.select(this),te=A.ensureSingle(K,"path","surface",function(ce){ce.style("pointer-events",I?"none":"all")});h?te.transition().attrTween("d",function(ce){var de=k(ce,i,ee(),[b,v],{orientation:F.tiling.orientation,flipX:F.tiling.flip.indexOf("x")>-1,flipY:F.tiling.flip.indexOf("y")>-1});return function(ge){return x(de(ge))}}):te.attr("d",x),K.call(a,c,l,u,{styleOne:p,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,l,{isTransitioning:l._transitioning}),te.call(p,J,F,l,{hovered:!1}),J.x0===J.x1||J.y0===J.y1?J._text="":J._text=r(J,c,F,u,z)||"";var ie=A.ensureSingle(K,"g","slicetext"),ae=A.ensureSingle(ie,"text","",function(ce){ce.attr("data-notex",1)}),se=A.ensureUniformFontSize(l,n.determineTextFont(F,J,z.font));ae.text(J._text||" ").classed("slicetext",!0).attr("text-anchor",R?"end":U?"start":"middle").call(o.font,se).call(w.convertToTspans,l),J.textBB=o.bBox(ae.node()),J.transform=y(J,{fontSize:se.size}),J.transform.fontSize=se.size,h?ae.transition().attrTween("transform",function(ce){var de=L(ce,i,ee(),[b,v]);return function(ge){return T(de(ge))}}):ae.attr("transform",T(J))}),V}},29044:function(Y,O,e){Y.exports={moduleType:"trace",name:"icicle",basePlotModule:e(59564),categories:[],animatable:!0,attributes:e(97376),layoutAttributes:e(90676),supplyDefaults:e(7045),supplyLayoutDefaults:e(4304),calc:e(73876).r,crossTraceCalc:e(73876).q,plot:e(38364),style:e(47192).style,colorbar:e(5528),meta:{}}},90676:function(Y){Y.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},4304:function(Y,O,e){var M=e(3400),A=e(90676);Y.exports=function(o,w){function _(p,s){return M.coerce(o,w,A,p,s)}_("iciclecolorway",w.colorway),_("extendiciclecolors")}},25132:function(Y,O,e){var M=e(74148),A=e(83024);Y.exports=function(o,w,_){var p=_.flipX,s=_.flipY,n=_.orientation==="h",a=_.maxDepth,r=w[0],i=w[1];a&&(r=(o.height+1)*w[0]/Math.min(o.height+1,a),i=(o.height+1)*w[1]/Math.min(o.height+1,a));var l=M.partition().padding(_.pad.inner).size(n?[w[1],r]:[w[0],i])(o);return(n||p||s)&&A(l,w,{swapXY:n,flipX:p,flipY:s}),l}},38364:function(Y,O,e){var M=e(95808),A=e(67880);Y.exports=function(o,w,_,p){return M(o,w,_,p,{type:"icicle",drawDescendants:A})}},47192:function(Y,O,e){var M=e(33428),A=e(76308),o=e(3400),w=e(82744).resizeText,_=e(60404);function p(s,n,a,r){var i=n.data.data,l=!n.children,u=i.i,c=o.castOption(a,u,"marker.line.color")||A.defaultLine,g=o.castOption(a,u,"marker.line.width")||0;s.call(_,n,a,r).style("stroke-width",g).call(A.stroke,c).style("opacity",l?a.leaf.opacity:null)}Y.exports={style:function(s){var n=s._fullLayout._iciclelayer.selectAll(".trace");w(s,n,"icicle"),n.each(function(a){var r=M.select(this),i=a[0].trace;r.style("opacity",i.opacity),r.selectAll("path.surface").each(function(l){M.select(this).call(p,l,i,s)})})},styleOne:p}},95188:function(Y,O,e){for(var M=e(45464),A=e(21776).Ks,o=e(92880).extendFlat,w=e(47797).colormodel,_=["rgb","rgba","rgba256","hsl","hsla"],p=[],s=[],n=0;n<_.length;n++){var a=w[_[n]];p.push("For the `"+_[n]+"` colormodel, it is ["+(a.zminDflt||a.min).join(", ")+"]."),s.push("For the `"+_[n]+"` colormodel, it is ["+(a.zmaxDflt||a.max).join(", ")+"].")}Y.exports=o({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:_,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:o({},M.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:A({},{keys:["z","color","colormodel"]}),transforms:void 0})},93336:function(Y,O,e){var M=e(3400),A=e(47797),o=e(38248),w=e(54460),_=e(3400).maxRowLength,p=e(18712).i;function s(a,r,i,l){return function(u){return M.constrain((u-a)*r,i,l)}}function n(a,r){return function(i){return M.constrain(i,a,r)}}Y.exports=function(a,r){var i,l;if(r._hasZ)i=r.z.length,l=_(r.z);else if(r._hasSource){var u=p(r.source);i=u.height,l=u.width}var c,g=w.getFromId(a,r.xaxis||"x"),f=w.getFromId(a,r.yaxis||"y"),b=g.d2c(r.x0)-r.dx/2,v=f.d2c(r.y0)-r.dy/2,d=[b,b+l*r.dx],m=[v,v+i*r.dy];if(g&&g.type==="log")for(c=0;c<l;c++)d.push(b+c*r.dx);if(f&&f.type==="log")for(c=0;c<i;c++)m.push(v+c*r.dy);return r._extremes[g._id]=w.findExtremes(g,d),r._extremes[f._id]=w.findExtremes(f,m),r._scaler=function(x){var y=A.colormodel[x.colormodel],T=(y.colormodel||x.colormodel).length;x._sArray=[];for(var h=0;h<T;h++)y.min[h]!==x.zmin[h]||y.max[h]!==x.zmax[h]?x._sArray.push(s(x.zmin[h],(y.max[h]-y.min[h])/(x.zmax[h]-x.zmin[h]),y.min[h],y.max[h])):x._sArray.push(n(y.min[h],y.max[h]));return function(E){for(var k=E.slice(0,T),L=0;L<T;L++){var P=k[L];if(!o(P))return!1;k[L]=x._sArray[L](P)}return k}}(r),[{x0:b,y0:v,z:r.z,w:l,h:i}]}},47797:function(Y){Y.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(O){return O.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(O){return O.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(O){return O.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(O){var e=O.slice(0,3);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(O){var e=O.slice(0,4);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["","%","%",""]}}}},13188:function(Y,O,e){var M=e(3400),A=e(95188),o=e(47797),w=e(81792).IMAGE_URL_PREFIX;Y.exports=function(_,p){function s(r,i){return M.coerce(_,p,A,r,i)}s("source"),p.source&&!p.source.match(w)&&delete p.source,p._hasSource=!!p.source;var n,a=s("z");p._hasZ=!(a===void 0||!a.length||!a[0]||!a[0].length),p._hasZ||p._hasSource?(s("x0"),s("y0"),s("dx"),s("dy"),p._hasZ?(s("colormodel","rgb"),s("zmin",(n=o.colormodel[p.colormodel]).zminDflt||n.min),s("zmax",n.zmaxDflt||n.max)):p._hasSource&&(p.colormodel="rgba256",n=o.colormodel[p.colormodel],p.zmin=n.zminDflt,p.zmax=n.zmaxDflt),s("zsmooth"),s("text"),s("hovertext"),s("hovertemplate"),p._length=null):p.visible=!1}},79972:function(Y){Y.exports=function(O,e){return"xVal"in e&&(O.x=e.xVal),"yVal"in e&&(O.y=e.yVal),e.xa&&(O.xaxis=e.xa),e.ya&&(O.yaxis=e.ya),O.color=e.color,O.colormodel=e.trace.colormodel,O.z||(O.z=e.color),O}},18712:function(Y,O,e){var M=e(19480),A=e(81792).IMAGE_URL_PREFIX,o=e(33576).Buffer;O.i=function(w){var _=w.replace(A,""),p=new o(_,"base64");return M(p)}},24892:function(Y,O,e){var M=e(93024),A=e(3400),o=A.isArrayOrTypedArray,w=e(47797);Y.exports=function(_,p,s){var n=_.cd[0],a=n.trace,r=_.xa,i=_.ya;if(!(M.inbox(p-n.x0,p-(n.x0+n.w*a.dx),0)>0||M.inbox(s-n.y0,s-(n.y0+n.h*a.dy),0)>0)){var l,u=Math.floor((p-n.x0)/a.dx),c=Math.floor(Math.abs(s-n.y0)/a.dy);if(a._hasZ?l=n.z[c][u]:a._hasSource&&(l=a._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(u,c,1,1).data),l){var g,f=n.hi||a.hoverinfo;if(f){var b=f.split("+");b.indexOf("all")!==-1&&(b=["color"]),b.indexOf("color")!==-1&&(g=!0)}var v,d=w.colormodel[a.colormodel],m=d.colormodel||a.colormodel,x=m.length,y=a._scaler(l),T=d.suffix,h=[];(a.hovertemplate||g)&&(h.push("["+[y[0]+T[0],y[1]+T[1],y[2]+T[2]].join(", ")),x===4&&h.push(", "+y[3]+T[3]),h.push("]"),h=h.join(""),_.extraText=m.toUpperCase()+": "+h),o(a.hovertext)&&o(a.hovertext[c])?v=a.hovertext[c][u]:o(a.text)&&o(a.text[c])&&(v=a.text[c][u]);var E=i.c2p(n.y0+(c+.5)*a.dy),k=n.x0+(u+.5)*a.dx,L=n.y0+(c+.5)*a.dy,P="["+l.slice(0,a.colormodel.length).join(", ")+"]";return[A.extendFlat(_,{index:[c,u],x0:r.c2p(n.x0+u*a.dx),x1:r.c2p(n.x0+(u+1)*a.dx),y0:E,y1:E,color:y,xVal:k,xLabelVal:k,yVal:L,yLabelVal:L,zLabelVal:P,text:v,hovertemplateLabels:{zLabel:P,colorLabel:h,"color[0]Label":y[0]+T[0],"color[1]Label":y[1]+T[1],"color[2]Label":y[2]+T[2],"color[3]Label":y[3]+T[3]}})]}}}},48928:function(Y,O,e){Y.exports={attributes:e(95188),supplyDefaults:e(13188),calc:e(93336),plot:e(63715),style:e(28576),hoverPoints:e(24892),eventData:e(79972),moduleType:"trace",name:"image",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},63715:function(Y,O,e){var M=e(33428),A=e(3400),o=A.strTranslate,w=e(9616),_=e(47797),p=e(9188),s=e(2264).STYLE;Y.exports=function(n,a,r,i){var l=a.xaxis,u=a.yaxis,c=!n._context._exportedPlot&&p();A.makeTraceGroups(i,r,"im").each(function(g){var f=M.select(this),b=g[0],v=b.trace,d=(v.zsmooth==="fast"||v.zsmooth===!1&&c)&&!v._hasZ&&v._hasSource&&l.type==="linear"&&u.type==="linear";v._realImage=d;var m,x,y,T,h,E,k=b.z,L=b.x0,P=b.y0,I=b.w,z=b.h,F=v.dx,U=v.dy;for(E=0;m===void 0&&E<I;)m=l.c2p(L+E*F),E++;for(E=I;x===void 0&&E>0;)x=l.c2p(L+E*F),E--;for(E=0;T===void 0&&E<z;)T=u.c2p(P+E*U),E++;for(E=z;h===void 0&&E>0;)h=u.c2p(P+E*U),E--;x<m&&(y=x,x=m,m=y),h<T&&(y=T,T=h,h=y),d||(m=Math.max(-.5*l._length,m),x=Math.min(1.5*l._length,x),T=Math.max(-.5*u._length,T),h=Math.min(1.5*u._length,h));var R=Math.round(x-m),j=Math.round(h-T);if(R<=0||j<=0)f.selectAll("image").data([]).exit().remove();else{var Z=f.selectAll("image").data([g]);Z.enter().append("svg:image").attr({xmlns:w.svg,preserveAspectRatio:"none"}),Z.exit().remove();var B=v.zsmooth===!1?s:"";if(d){var q=A.simpleMap(l.range,l.r2l),V=A.simpleMap(u.range,u.r2l),ne=q[1]<q[0],ee=V[1]>V[0];if(ne||ee){var $=m+R/2,J=T+j/2;B+="transform:"+o($+"px",J+"px")+"scale("+(ne?-1:1)+","+(ee?-1:1)+")"+o(-$+"px",-J+"px")+";"}}Z.attr("style",B);var K=new Promise(function(ie){if(v._hasZ)ie();else if(v._hasSource)if(v._canvas&&v._canvas.el.width===I&&v._canvas.el.height===z&&v._canvas.source===v.source)ie();else{var ae=document.createElement("canvas");ae.width=I,ae.height=z;var se=ae.getContext("2d",{willReadFrequently:!0});v._image=v._image||new Image;var ce=v._image;ce.onload=function(){se.drawImage(ce,0,0),v._canvas={el:ae,source:v.source},ie()},ce.setAttribute("src",v.source)}}).then(function(){var ie,ae;if(v._hasZ)ae=te(function(ce,de){var ge=k[de][ce];return A.isTypedArray(ge)&&(ge=Array.from(ge)),ge}),ie=ae.toDataURL("image/png");else if(v._hasSource)if(d)ie=v.source;else{var se=v._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,I,z).data;ae=te(function(ce,de){var ge=4*(de*I+ce);return[se[ge],se[ge+1],se[ge+2],se[ge+3]]}),ie=ae.toDataURL("image/png")}Z.attr({"xlink:href":ie,height:j,width:R,x:m,y:T})});n._promises.push(K)}function te(ie){var ae=document.createElement("canvas");ae.width=R,ae.height=j;var se,ce=ae.getContext("2d",{willReadFrequently:!0}),de=function(pe){return A.constrain(Math.round(l.c2p(L+pe*F)-m),0,R)},ge=function(pe){return A.constrain(Math.round(u.c2p(P+pe*U)-T),0,j)},ve=_.colormodel[v.colormodel],be=ve.colormodel||v.colormodel,me=ve.fmt;for(E=0;E<b.w;E++){var Se=de(E),we=de(E+1);if(we!==Se&&!isNaN(we)&&!isNaN(Se))for(var _e=0;_e<b.h;_e++){var oe=ge(_e),le=ge(_e+1);le===oe||isNaN(le)||isNaN(oe)||!ie(E,_e)||(se=v._scaler(ie(E,_e)),ce.fillStyle=se?be+"("+me(se).join(",")+")":"rgba(0,0,0,0)",ce.fillRect(Se,oe,we-Se,le-oe))}}return ae}})}},28576:function(Y,O,e){var M=e(33428);Y.exports=function(A){M.select(A).selectAll(".im image").style("opacity",function(o){return o[0].trace.opacity})}},89864:function(Y,O,e){var M=e(92880).extendFlat,A=e(92880).extendDeep,o=e(67824).overrideAll,w=e(25376),_=e(22548),p=e(86968).u,s=e(94724),n=e(31780).templatedArray,a=e(48164),r=e(29736).descriptionOnlyNumbers,i=w({editType:"plot",colorEditType:"plot"}),l={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:_.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},u={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},c=n("step",A({},l,{range:u}));Y.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:p({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:M({},i,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:r("value")},font:M({},i,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:r("value")},increasing:{symbol:{valType:"string",dflt:a.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:a.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:a.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:a.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:M({},i,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:A({},l,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:_.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:o({range:u,visible:M({},s.visible,{dflt:!0}),tickmode:s.minor.tickmode,nticks:s.nticks,tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:M({},s.ticks,{dflt:"outside"}),ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,ticklabelstep:s.ticklabelstep,showticklabels:s.showticklabels,labelalias:s.labelalias,tickfont:w({}),tickangle:s.tickangle,tickformat:s.tickformat,tickformatstops:s.tickformatstops,tickprefix:s.tickprefix,showtickprefix:s.showtickprefix,ticksuffix:s.ticksuffix,showticksuffix:s.showticksuffix,separatethousands:s.separatethousands,exponentformat:s.exponentformat,minexponent:s.minexponent,showexponent:s.showexponent,editType:"plot"},"plot"),steps:c,threshold:{line:{color:M({},l.line.color,{}),width:M({},l.line.width,{dflt:1}),editType:"plot"},thickness:M({},l.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},92728:function(Y,O,e){var M=e(7316);O.name="indicator",O.plot=function(A,o,w,_){M.plotBasePlot(O.name,A,o,w,_)},O.clean=function(A,o,w,_){M.cleanBasePlot(O.name,A,o,w,_)}},79136:function(Y){Y.exports={calc:function(O,e){var M=[],A=e.value;typeof e._lastValue!="number"&&(e._lastValue=e.value);var o=e._lastValue,w=o;return e._hasDelta&&typeof e.delta.reference=="number"&&(w=e.delta.reference),M[0]={y:A,lastY:o,delta:A-w,relativeDelta:(A-w)/w},M}}},12096:function(Y){Y.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},20424:function(Y,O,e){var M=e(3400),A=e(89864),o=e(86968).Q,w=e(31780),_=e(51272),p=e(12096),s=e(26332),n=e(25404),a=e(95936),r=e(42568);function i(l,u){function c(g,f){return M.coerce(l,u,A.gauge.steps,g,f)}c("color"),c("line.color"),c("line.width"),c("range"),c("thickness")}Y.exports={supplyDefaults:function(l,u,c,g){function f(P,I){return M.coerce(l,u,A,P,I)}o(u,g,f),f("mode"),u._hasNumber=u.mode.indexOf("number")!==-1,u._hasDelta=u.mode.indexOf("delta")!==-1,u._hasGauge=u.mode.indexOf("gauge")!==-1;var b=f("value");u._range=[0,typeof b=="number"?1.5*b:1];var v,d,m,x,y,T,h=new Array(2);function E(P,I){return M.coerce(m,x,A.gauge,P,I)}function k(P,I){return M.coerce(y,T,A.gauge.axis,P,I)}if(u._hasNumber&&(f("number.valueformat"),f("number.font.color",g.font.color),f("number.font.family",g.font.family),f("number.font.size"),u.number.font.size===void 0&&(u.number.font.size=p.defaultNumberFontSize,h[0]=!0),f("number.prefix"),f("number.suffix"),v=u.number.font.size),u._hasDelta&&(f("delta.font.color",g.font.color),f("delta.font.family",g.font.family),f("delta.font.size"),u.delta.font.size===void 0&&(u.delta.font.size=(u._hasNumber?.5:1)*(v||p.defaultNumberFontSize),h[1]=!0),f("delta.reference",u.value),f("delta.relative"),f("delta.valueformat",u.delta.relative?"2%":""),f("delta.increasing.symbol"),f("delta.increasing.color"),f("delta.decreasing.symbol"),f("delta.decreasing.color"),f("delta.position"),f("delta.prefix"),f("delta.suffix"),d=u.delta.font.size),u._scaleNumbers=(!u._hasNumber||h[0])&&(!u._hasDelta||h[1])||!1,f("title.font.color",g.font.color),f("title.font.family",g.font.family),f("title.font.size",.25*(v||d||p.defaultNumberFontSize)),f("title.text"),u._hasGauge){(m=l.gauge)||(m={}),x=w.newContainer(u,"gauge"),E("shape"),(u._isBullet=u.gauge.shape==="bullet")||f("title.align","center"),(u._isAngular=u.gauge.shape==="angular")||f("align","center"),E("bgcolor",g.paper_bgcolor),E("borderwidth"),E("bordercolor"),E("bar.color"),E("bar.line.color"),E("bar.line.width"),E("bar.thickness",p.valueThickness*(u.gauge.shape==="bullet"?.5:1)),_(m,x,{name:"steps",handleItemDefaults:i}),E("threshold.value"),E("threshold.thickness"),E("threshold.line.width"),E("threshold.line.color"),y={},m&&(y=m.axis||{}),T=w.newContainer(x,"axis"),k("visible"),u._range=k("range",u._range);var L={noAutotickangles:!0,outerTicks:!0};s(y,T,k,"linear"),r(y,T,k,"linear",L),a(y,T,k,"linear",L),n(y,T,k,L)}else f("title.align","center"),f("align","center"),u._isAngular=u._isBullet=!1;u._length=null}}},43480:function(Y,O,e){Y.exports={moduleType:"trace",name:"indicator",basePlotModule:e(92728),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e(89864),supplyDefaults:e(20424).supplyDefaults,calc:e(79136).calc,plot:e(97864),meta:{}}},97864:function(Y,O,e){var M=e(33428),A=e(67756).qy,o=e(67756).Gz,w=e(3400),_=w.strScale,p=w.strTranslate,s=w.rad2deg,n=e(84284).MID_SHIFT,a=e(43616),r=e(12096),i=e(72736),l=e(54460),u=e(28336),c=e(37668),g=e(94724),f=e(76308),b={left:"start",center:"middle",right:"end"},v={left:0,center:.5,right:1},d=/[yzafpnmkMGTPEZY]/;function m(k){return k&&k.duration>0}function x(k){k.each(function(L){f.stroke(M.select(this),L.line.color)}).each(function(L){f.fill(M.select(this),L.color)}).style("stroke-width",function(L){return L.line.width})}function y(k,L,P){var I=k._fullLayout,z=w.extendFlat({type:"linear",ticks:"outside",range:P,showline:!0},L),F={type:"linear",_id:"x"+L._id},U={letter:"x",font:I.font,noAutotickangles:!0,noHover:!0,noTickson:!0};function R(j,Z){return w.coerce(z,F,g,j,Z)}return u(z,F,R,U,I),c(z,F,R,U),F}function T(k,L,P){return[Math.min(L/k.width,P/k.height),k,L+"x"+P]}function h(k,L,P,I){var z=document.createElementNS("http://www.w3.org/2000/svg","text"),F=M.select(z);return F.text(k).attr("x",0).attr("y",0).attr("text-anchor",P).attr("data-unformatted",k).call(i.convertToTspans,I).call(a.font,L),a.bBox(F.node())}function E(k,L,P,I,z,F){var U="_cache"+L;k[U]&&k[U].key===z||(k[U]={key:z,value:P});var R=w.aggNums(F,null,[k[U].value,I],2);return k[U].value=R,R}Y.exports=function(k,L,P,I){var z,F=k._fullLayout;m(P)&&I&&(z=I()),w.makeTraceGroups(F._indicatorlayer,L,"trace").each(function(U){var R,j,Z,B,q,V=U[0].trace,ne=M.select(this),ee=V._hasGauge,$=V._isAngular,J=V._isBullet,K=V.domain,te={w:F._size.w*(K.x[1]-K.x[0]),h:F._size.h*(K.y[1]-K.y[0]),l:F._size.l+F._size.w*K.x[0],r:F._size.r+F._size.w*(1-K.x[1]),t:F._size.t+F._size.h*(1-K.y[1]),b:F._size.b+F._size.h*K.y[0]},ie=te.l+te.w/2,ae=te.t+te.h/2,se=Math.min(te.w/2,te.h),ce=r.innerRadius*se,de=V.align||"center";if(j=ae,ee){if($&&(R=ie,j=ae+se/2,Z=function(oe){return function(le,pe){return[pe/Math.sqrt(le.width/2*(le.width/2)+le.height*le.height),le,pe]}(oe,.9*ce)}),J){var ge=r.bulletPadding,ve=1-r.bulletNumberDomainSize+ge;R=te.l+(ve+(1-ve)*v[de])*te.w,Z=function(oe){return T(oe,(r.bulletNumberDomainSize-ge)*te.w,te.h)}}}else R=te.l+v[de]*te.w,Z=function(oe){return T(oe,te.w,te.h)};(function(oe,le,pe,Ee){var Te,Me,Le,Ie=pe[0].trace,he=Ee.numbersX,xe=Ee.numbersY,ke=Ie.align||"center",ze=b[ke],Re=Ee.transitionOpts,Oe=Ee.onComplete,Ve=w.ensureSingle(le,"g","numbers"),qe=[];Ie._hasNumber&&qe.push("number"),Ie._hasDelta&&(qe.push("delta"),Ie.delta.position==="left"&&qe.reverse());var Je=Ve.selectAll("text").data(qe);function ot(Rt,Ft,It,Ge){if(!Rt.match("s")||It>=0==Ge>=0||Ft(It).slice(-1).match(d)||Ft(Ge).slice(-1).match(d))return Ft;var Ye=Rt.slice().replace("s","f").replace(/\d+/,function(We){return parseInt(We)-1}),Ne=y(oe,{tickformat:Ye});return function(We){return Math.abs(We)<1?l.tickText(Ne,We).text:Ft(We)}}Je.enter().append("text"),Je.attr("text-anchor",function(){return ze}).attr("class",function(Rt){return Rt}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),Je.exit().remove();var rt,dt=Ie.mode+Ie.align;if(Ie._hasDelta&&(rt=function(){var Rt=y(oe,{tickformat:Ie.delta.valueformat},Ie._range);Rt.setScale(),l.prepTicks(Rt);var Ft=function(Fe){return l.tickText(Rt,Fe).text},It=Ie.delta.suffix,Ge=Ie.delta.prefix,Ye=function(Fe){return Ie.delta.relative?Fe.relativeDelta:Fe.delta},Ne=function(Fe,Be){return Fe===0||typeof Fe!="number"||isNaN(Fe)?"-":(Fe>0?Ie.delta.increasing.symbol:Ie.delta.decreasing.symbol)+Ge+Be(Fe)+It},We=function(Fe){return Fe.delta>=0?Ie.delta.increasing.color:Ie.delta.decreasing.color};Ie._deltaLastValue===void 0&&(Ie._deltaLastValue=Ye(pe[0]));var st=Ve.select("text.delta");function it(){st.text(Ne(Ye(pe[0]),Ft)).call(f.fill,We(pe[0])).call(i.convertToTspans,oe)}return st.call(a.font,Ie.delta.font).call(f.fill,We({delta:Ie._deltaLastValue})),m(Re)?st.transition().duration(Re.duration).ease(Re.easing).tween("text",function(){var Fe=M.select(this),Be=Ye(pe[0]),at=Ie._deltaLastValue,Ze=ot(Ie.delta.valueformat,Ft,at,Be),ht=o(at,Be);return Ie._deltaLastValue=Be,function(vt){Fe.text(Ne(ht(vt),Ze)),Fe.call(f.fill,We({delta:ht(vt)}))}}).each("end",function(){it(),Oe&&Oe()}).each("interrupt",function(){it(),Oe&&Oe()}):it(),Me=h(Ne(Ye(pe[0]),Ft),Ie.delta.font,ze,oe),st}(),dt+=Ie.delta.position+Ie.delta.font.size+Ie.delta.font.family+Ie.delta.valueformat,dt+=Ie.delta.increasing.symbol+Ie.delta.decreasing.symbol,Le=Me),Ie._hasNumber&&(function(){var Rt=y(oe,{tickformat:Ie.number.valueformat},Ie._range);Rt.setScale(),l.prepTicks(Rt);var Ft=function(We){return l.tickText(Rt,We).text},It=Ie.number.suffix,Ge=Ie.number.prefix,Ye=Ve.select("text.number");function Ne(){var We=typeof pe[0].y=="number"?Ge+Ft(pe[0].y)+It:"-";Ye.text(We).call(a.font,Ie.number.font).call(i.convertToTspans,oe)}m(Re)?Ye.transition().duration(Re.duration).ease(Re.easing).each("end",function(){Ne(),Oe&&Oe()}).each("interrupt",function(){Ne(),Oe&&Oe()}).attrTween("text",function(){var We=M.select(this),st=o(pe[0].lastY,pe[0].y);Ie._lastValue=pe[0].y;var it=ot(Ie.number.valueformat,Ft,pe[0].lastY,pe[0].y);return function(Fe){We.text(Ge+it(st(Fe))+It)}}):Ne(),Te=h(Ge+Ft(pe[0].y)+It,Ie.number.font,ze,oe)}(),dt+=Ie.number.font.size+Ie.number.font.family+Ie.number.valueformat+Ie.number.suffix+Ie.number.prefix,Le=Te),Ie._hasDelta&&Ie._hasNumber){var _t,yt,et=[(Te.left+Te.right)/2,(Te.top+Te.bottom)/2],nt=[(Me.left+Me.right)/2,(Me.top+Me.bottom)/2],At=.75*Ie.delta.font.size;Ie.delta.position==="left"&&(_t=E(Ie,"deltaPos",0,-1*(Te.width*v[Ie.align]+Me.width*(1-v[Ie.align])+At),dt,Math.min),yt=et[1]-nt[1],Le={width:Te.width+Me.width+At,height:Math.max(Te.height,Me.height),left:Me.left+_t,right:Te.right,top:Math.min(Te.top,Me.top+yt),bottom:Math.max(Te.bottom,Me.bottom+yt)}),Ie.delta.position==="right"&&(_t=E(Ie,"deltaPos",0,Te.width*(1-v[Ie.align])+Me.width*v[Ie.align]+At,dt,Math.max),yt=et[1]-nt[1],Le={width:Te.width+Me.width+At,height:Math.max(Te.height,Me.height),left:Te.left,right:Me.right+_t,top:Math.min(Te.top,Me.top+yt),bottom:Math.max(Te.bottom,Me.bottom+yt)}),Ie.delta.position==="bottom"&&(_t=null,yt=Me.height,Le={width:Math.max(Te.width,Me.width),height:Te.height+Me.height,left:Math.min(Te.left,Me.left),right:Math.max(Te.right,Me.right),top:Te.bottom-Te.height,bottom:Te.bottom+Me.height}),Ie.delta.position==="top"&&(_t=null,yt=Te.top,Le={width:Math.max(Te.width,Me.width),height:Te.height+Me.height,left:Math.min(Te.left,Me.left),right:Math.max(Te.right,Me.right),top:Te.bottom-Te.height-Me.height,bottom:Te.bottom}),rt.attr({dx:_t,dy:yt})}(Ie._hasNumber||Ie._hasDelta)&&Ve.attr("transform",function(){var Rt=Ee.numbersScaler(Le);dt+=Rt[2];var Ft,It=E(Ie,"numbersScale",1,Rt[0],dt,Math.min);Ie._scaleNumbers||(It=1),Ft=Ie._isAngular?xe-It*Le.bottom:xe-It*(Le.top+Le.bottom)/2,Ie._numbersTop=It*Le.top+Ft;var Ge=Le[ke];ke==="center"&&(Ge=(Le.left+Le.right)/2);var Ye=he-It*Ge;return Ye=E(Ie,"numbersTranslate",0,Ye,dt,Math.max),p(Ye,Ft)+_(It)})})(k,ne,U,{numbersX:R,numbersY:j,numbersScaler:Z,transitionOpts:P,onComplete:z}),ee&&(B={range:V.gauge.axis.range,color:V.gauge.bgcolor,line:{color:V.gauge.bordercolor,width:0},thickness:1},q={range:V.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:V.gauge.bordercolor,width:V.gauge.borderwidth},thickness:1});var be=ne.selectAll("g.angular").data($?U:[]);be.exit().remove();var me=ne.selectAll("g.angularaxis").data($?U:[]);me.exit().remove(),$&&function(oe,le,pe,Ee){var Te,Me,Le,Ie,he=pe[0].trace,xe=Ee.size,ke=Ee.radius,ze=Ee.innerRadius,Re=Ee.gaugeBg,Oe=Ee.gaugeOutline,Ve=[xe.l+xe.w/2,xe.t+xe.h/2+ke/2],qe=Ee.gauge,Je=Ee.layer,ot=Ee.transitionOpts,rt=Ee.onComplete,dt=Math.PI/2;function _t(vt){var mt=he.gauge.axis.range[0],ft=(vt-mt)/(he.gauge.axis.range[1]-mt)*Math.PI-dt;return ft<-dt?-dt:ft>dt?dt:ft}function yt(vt){return M.svg.arc().innerRadius((ze+ke)/2-vt/2*(ke-ze)).outerRadius((ze+ke)/2+vt/2*(ke-ze)).startAngle(-dt)}function et(vt){vt.attr("d",function(mt){return yt(mt.thickness).startAngle(_t(mt.range[0])).endAngle(_t(mt.range[1]))()})}qe.enter().append("g").classed("angular",!0),qe.attr("transform",p(Ve[0],Ve[1])),Je.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),Je.selectAll("g.xangularaxistick,path,text").remove(),(Te=y(oe,he.gauge.axis)).type="linear",Te.range=he.gauge.axis.range,Te._id="xangularaxis",Te.ticklabeloverflow="allow",Te.setScale();var nt=function(vt){return(Te.range[0]-vt.x)/(Te.range[1]-Te.range[0])*Math.PI+Math.PI},At={},Rt=l.makeLabelFns(Te,0).labelStandoff;At.xFn=function(vt){var mt=nt(vt);return Math.cos(mt)*Rt},At.yFn=function(vt){var mt=nt(vt),ft=Math.sin(mt)>0?.2:1;return-Math.sin(mt)*(Rt+vt.fontSize*ft)+Math.abs(Math.cos(mt))*(vt.fontSize*n)},At.anchorFn=function(vt){var mt=nt(vt),ft=Math.cos(mt);return Math.abs(ft)<.1?"middle":ft>0?"start":"end"},At.heightFn=function(vt,mt,ft){var Et=nt(vt);return-.5*(1+Math.sin(Et))*ft};var Ft=function(vt){return p(Ve[0]+ke*Math.cos(vt),Ve[1]-ke*Math.sin(vt))};if(Le=function(vt){return Ft(nt(vt))},Me=l.calcTicks(Te),Ie=l.getTickSigns(Te)[2],Te.visible){Ie=Te.ticks==="inside"?-1:1;var It=(Te.linewidth||1)/2;l.drawTicks(oe,Te,{vals:Me,layer:Je,path:"M"+Ie*It+",0h"+Ie*Te.ticklen,transFn:function(vt){var mt=nt(vt);return Ft(mt)+"rotate("+-s(mt)+")"}}),l.drawLabels(oe,Te,{vals:Me,layer:Je,transFn:Le,labelFns:At})}var Ge=[Re].concat(he.gauge.steps),Ye=qe.selectAll("g.bg-arc").data(Ge);Ye.enter().append("g").classed("bg-arc",!0).append("path"),Ye.select("path").call(et).call(x),Ye.exit().remove();var Ne=yt(he.gauge.bar.thickness),We=qe.selectAll("g.value-arc").data([he.gauge.bar]);We.enter().append("g").classed("value-arc",!0).append("path");var st,it,Fe,Be=We.select("path");m(ot)?(Be.transition().duration(ot.duration).ease(ot.easing).each("end",function(){rt&&rt()}).each("interrupt",function(){rt&&rt()}).attrTween("d",(st=Ne,it=_t(pe[0].lastY),Fe=_t(pe[0].y),function(){var vt=A(it,Fe);return function(mt){return st.endAngle(vt(mt))()}})),he._lastValue=pe[0].y):Be.attr("d",typeof pe[0].y=="number"?Ne.endAngle(_t(pe[0].y)):"M0,0Z"),Be.call(x),We.exit().remove(),Ge=[];var at=he.gauge.threshold.value;(at||at===0)&&Ge.push({range:[at,at],color:he.gauge.threshold.color,line:{color:he.gauge.threshold.line.color,width:he.gauge.threshold.line.width},thickness:he.gauge.threshold.thickness});var Ze=qe.selectAll("g.threshold-arc").data(Ge);Ze.enter().append("g").classed("threshold-arc",!0).append("path"),Ze.select("path").call(et).call(x),Ze.exit().remove();var ht=qe.selectAll("g.gauge-outline").data([Oe]);ht.enter().append("g").classed("gauge-outline",!0).append("path"),ht.select("path").call(et).call(x),ht.exit().remove()}(k,0,U,{radius:se,innerRadius:ce,gauge:be,layer:me,size:te,gaugeBg:B,gaugeOutline:q,transitionOpts:P,onComplete:z});var Se=ne.selectAll("g.bullet").data(J?U:[]);Se.exit().remove();var we=ne.selectAll("g.bulletaxis").data(J?U:[]);we.exit().remove(),J&&function(oe,le,pe,Ee){var Te,Me,Le,Ie,he,xe=pe[0].trace,ke=Ee.gauge,ze=Ee.layer,Re=Ee.gaugeBg,Oe=Ee.gaugeOutline,Ve=Ee.size,qe=xe.domain,Je=Ee.transitionOpts,ot=Ee.onComplete;ke.enter().append("g").classed("bullet",!0),ke.attr("transform",p(Ve.l,Ve.t)),ze.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),ze.selectAll("g.xbulletaxistick,path,text").remove();var rt=Ve.h,dt=xe.gauge.bar.thickness*rt,_t=qe.x[0],yt=qe.x[0]+(qe.x[1]-qe.x[0])*(xe._hasNumber||xe._hasDelta?1-r.bulletNumberDomainSize:1);function et(Ye){Ye.attr("width",function(Ne){return Math.max(0,Te.c2p(Ne.range[1])-Te.c2p(Ne.range[0]))}).attr("x",function(Ne){return Te.c2p(Ne.range[0])}).attr("y",function(Ne){return .5*(1-Ne.thickness)*rt}).attr("height",function(Ne){return Ne.thickness*rt})}(Te=y(oe,xe.gauge.axis))._id="xbulletaxis",Te.domain=[_t,yt],Te.setScale(),Me=l.calcTicks(Te),Le=l.makeTransTickFn(Te),Ie=l.getTickSigns(Te)[2],he=Ve.t+Ve.h,Te.visible&&(l.drawTicks(oe,Te,{vals:Te.ticks==="inside"?l.clipEnds(Te,Me):Me,layer:ze,path:l.makeTickPath(Te,he,Ie),transFn:Le}),l.drawLabels(oe,Te,{vals:Me,layer:ze,transFn:Le,labelFns:l.makeLabelFns(Te,he)}));var nt=[Re].concat(xe.gauge.steps),At=ke.selectAll("g.bg-bullet").data(nt);At.enter().append("g").classed("bg-bullet",!0).append("rect"),At.select("rect").call(et).call(x),At.exit().remove();var Rt=ke.selectAll("g.value-bullet").data([xe.gauge.bar]);Rt.enter().append("g").classed("value-bullet",!0).append("rect"),Rt.select("rect").attr("height",dt).attr("y",(rt-dt)/2).call(x),m(Je)?Rt.select("rect").transition().duration(Je.duration).ease(Je.easing).each("end",function(){ot&&ot()}).each("interrupt",function(){ot&&ot()}).attr("width",Math.max(0,Te.c2p(Math.min(xe.gauge.axis.range[1],pe[0].y)))):Rt.select("rect").attr("width",typeof pe[0].y=="number"?Math.max(0,Te.c2p(Math.min(xe.gauge.axis.range[1],pe[0].y))):0),Rt.exit().remove();var Ft=pe.filter(function(){return xe.gauge.threshold.value||xe.gauge.threshold.value===0}),It=ke.selectAll("g.threshold-bullet").data(Ft);It.enter().append("g").classed("threshold-bullet",!0).append("line"),It.select("line").attr("x1",Te.c2p(xe.gauge.threshold.value)).attr("x2",Te.c2p(xe.gauge.threshold.value)).attr("y1",(1-xe.gauge.threshold.thickness)/2*rt).attr("y2",(1-(1-xe.gauge.threshold.thickness)/2)*rt).call(f.stroke,xe.gauge.threshold.line.color).style("stroke-width",xe.gauge.threshold.line.width),It.exit().remove();var Ge=ke.selectAll("g.gauge-outline").data([Oe]);Ge.enter().append("g").classed("gauge-outline",!0).append("rect"),Ge.select("rect").call(et).call(x),Ge.exit().remove()}(k,0,U,{gauge:Se,layer:we,size:te,gaugeBg:B,gaugeOutline:q,transitionOpts:P,onComplete:z});var _e=ne.selectAll("text.title").data(U);_e.exit().remove(),_e.enter().append("text").classed("title",!0),_e.attr("text-anchor",function(){return J?b.right:b[V.title.align]}).text(V.title.text).call(a.font,V.title.font).call(i.convertToTspans,k),_e.attr("transform",function(){var oe,le=te.l+te.w*v[V.title.align],pe=r.titlePadding,Ee=a.bBox(_e.node());return ee?($&&(oe=V.gauge.axis.visible?a.bBox(me.node()).top-pe-Ee.bottom:te.t+te.h/2-se/2-Ee.bottom-pe),J&&(oe=j-(Ee.top+Ee.bottom)/2,le=te.l-r.bulletPadding*te.w)):oe=V._numbersTop-pe-Ee.bottom,p(le,oe)})})}},50048:function(Y,O,e){var M=e(49084),A=e(29736).axisHoverFormat,o=e(21776).Ks,w=e(52948),_=e(45464),p=e(92880).extendFlat,s=e(67824).overrideAll,n=Y.exports=s(p({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:o(),xhoverformat:A("x"),yhoverformat:A("y"),zhoverformat:A("z"),valuehoverformat:A("value",1),showlegend:p({},_.showlegend,{dflt:!1})},M("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:w.opacity,lightposition:w.lightposition,lighting:w.lighting,flatshading:w.flatshading,contour:w.contour,hoverinfo:p({},_.hoverinfo)}),"calc","nested");n.flatshading.dflt=!0,n.lighting.facenormalsepsilon.dflt=0,n.x.editType=n.y.editType=n.z.editType=n.value.editType="calc+clearAxisTypes",n.transforms=void 0},62624:function(Y,O,e){var M=e(47128),A=e(3832).processGrid,o=e(3832).filter;Y.exports=function(w,_){_._len=Math.min(_.x.length,_.y.length,_.z.length,_.value.length),_._x=o(_.x,_._len),_._y=o(_.y,_._len),_._z=o(_.z,_._len),_._value=o(_.value,_._len);var p=A(_);_._gridFill=p.fill,_._Xs=p.Xs,_._Ys=p.Ys,_._Zs=p.Zs,_._len=p.len;for(var s=1/0,n=-1/0,a=0;a<_._len;a++){var r=_._value[a];s=Math.min(s,r),n=Math.max(n,r)}_._minValues=s,_._maxValues=n,_._vMin=_.isomin===void 0||_.isomin===null?s:_.isomin,_._vMax=_.isomax===void 0||_.isomin===null?n:_.isomax,M(w,_,{vals:[_._vMin,_._vMax],containerStr:"",cLetter:"c"})}},31460:function(Y,O,e){var M=e(67792).gl_mesh3d,A=e(33040).parseColorScale,o=e(3400).isArrayOrTypedArray,w=e(43080),_=e(8932).extractOpts,p=e(52094),s=function(l,u){for(var c=u.length-1;c>0;c--){var g=Math.min(u[c],u[c-1]),f=Math.max(u[c],u[c-1]);if(f>g&&g<l&&l<=f)return{id:c,distRatio:(f-l)/(f-g)}}return{id:0,distRatio:0}};function n(l,u,c){this.scene=l,this.uid=c,this.mesh=u,this.name="",this.data=null,this.showContour=!1}var a=n.prototype;a.handlePick=function(l){if(l.object===this.mesh){var u=l.data.index,c=this.data._meshX[u],g=this.data._meshY[u],f=this.data._meshZ[u],b=this.data._Ys.length,v=this.data._Zs.length,d=s(c,this.data._Xs).id,m=s(g,this.data._Ys).id,x=s(f,this.data._Zs).id,y=l.index=x+v*m+v*b*d;l.traceCoordinate=[this.data._meshX[y],this.data._meshY[y],this.data._meshZ[y],this.data._value[y]];var T=this.data.hovertext||this.data.text;return o(T)&&T[y]!==void 0?l.textLabel=T[y]:T&&(l.textLabel=T),!0}},a.update=function(l){var u=this.scene,c=u.fullSceneLayout;function g(v,d,m,x){return d.map(function(y){return v.d2l(y,0,x)*m})}this.data=i(l);var f={positions:p(g(c.xaxis,l._meshX,u.dataScale[0],l.xcalendar),g(c.yaxis,l._meshY,u.dataScale[1],l.ycalendar),g(c.zaxis,l._meshZ,u.dataScale[2],l.zcalendar)),cells:p(l._meshI,l._meshJ,l._meshK),lightPosition:[l.lightposition.x,l.lightposition.y,l.lightposition.z],ambient:l.lighting.ambient,diffuse:l.lighting.diffuse,specular:l.lighting.specular,roughness:l.lighting.roughness,fresnel:l.lighting.fresnel,vertexNormalsEpsilon:l.lighting.vertexnormalsepsilon,faceNormalsEpsilon:l.lighting.facenormalsepsilon,opacity:l.opacity,contourEnable:l.contour.show,contourColor:w(l.contour.color).slice(0,3),contourWidth:l.contour.width,useFacetNormals:l.flatshading},b=_(l);f.vertexIntensity=l._meshIntensity,f.vertexIntensityBounds=[b.min,b.max],f.colormap=A(l),this.mesh.update(f)},a.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var r=["xyz","xzy","yxz","yzx","zxy","zyx"];function i(l){l._meshI=[],l._meshJ=[],l._meshK=[];var u,c,g,f,b,v,d,m=l.surface.show,x=l.spaceframe.show,y=l.surface.fill,T=l.spaceframe.fill,h=!1,E=!1,k=0,L=l._Xs,P=l._Ys,I=l._Zs,z=L.length,F=P.length,U=I.length,R=r.indexOf(l._gridFill.replace(/-/g,"").replace(/\+/g,"")),j=function(ze,Re,Oe){switch(R){case 5:return Oe+U*Re+U*F*ze;case 4:return Oe+U*ze+U*z*Re;case 3:return Re+F*Oe+F*U*ze;case 2:return Re+F*ze+F*z*Oe;case 1:return ze+z*Oe+z*U*Re;default:return ze+z*Re+z*F*Oe}},Z=l._minValues,B=l._maxValues,q=l._vMin,V=l._vMax;function ne(ze,Re,Oe){for(var Ve=v.length,qe=c;qe<Ve;qe++)if(ze===g[qe]&&Re===f[qe]&&Oe===b[qe])return qe;return-1}function ee(){c=u}function $(){g=[],f=[],b=[],v=[],u=0,ee()}function J(ze,Re,Oe,Ve){return g.push(ze),f.push(Re),b.push(Oe),v.push(Ve),++u-1}function K(ze,Re,Oe){for(var Ve=[],qe=0;qe<ze.length;qe++)Ve[qe]=ze[qe]*(1-Oe)+Oe*Re[qe];return Ve}function te(ze){d=ze}function ie(ze,Re){return ze==="all"||ze===null||ze.indexOf(Re)>-1}function ae(ze,Re){return ze===null?Re:ze}function se(ze,Re,Oe){ee();var Ve,qe,Je,ot=[Re],rt=[Oe];if(d>=1)ot=[Re],rt=[Oe];else if(d>0){var dt=function(Ge,Ye){var Ne=Ge[0],We=Ge[1],st=Ge[2],it=function(ft,Et,Tt){for(var xt=[],Ct=0;Ct<ft.length;Ct++)xt[Ct]=(ft[Ct]+Et[Ct]+Tt[Ct])/3;return xt}(Ne,We,st),Fe=Math.sqrt(1-d),Be=K(it,Ne,Fe),at=K(it,We,Fe),Ze=K(it,st,Fe),ht=Ye[0],vt=Ye[1],mt=Ye[2];return{xyzv:[[Ne,We,at],[at,Be,Ne],[We,st,Ze],[Ze,at,We],[st,Ne,Be],[Be,Ze,st]],abc:[[ht,vt,-1],[-1,-1,ht],[vt,mt,-1],[-1,-1,vt],[mt,ht,-1],[-1,-1,mt]]}}(Re,Oe);ot=dt.xyzv,rt=dt.abc}for(var _t=0;_t<ot.length;_t++){Re=ot[_t],Oe=rt[_t];for(var yt=[],et=0;et<3;et++){var nt=Re[et][0],At=Re[et][1],Rt=Re[et][2],Ft=Re[et][3],It=Oe[et]>-1?Oe[et]:ne(nt,At,Rt);yt[et]=It>-1?It:J(nt,At,Rt,ae(ze,Ft))}Ve=yt[0],qe=yt[1],Je=yt[2],l._meshI.push(Ve),l._meshJ.push(qe),l._meshK.push(Je),++k}}function ce(ze,Re,Oe,Ve){var qe=ze[3];qe<Oe&&(qe=Oe),qe>Ve&&(qe=Ve);for(var Je=(ze[3]-qe)/(ze[3]-Re[3]+1e-9),ot=[],rt=0;rt<4;rt++)ot[rt]=(1-Je)*ze[rt]+Je*Re[rt];return ot}function de(ze,Re,Oe){return ze>=Re&&ze<=Oe}function ge(ze){var Re=.001*(V-q);return ze>=q-Re&&ze<=V+Re}function ve(ze){for(var Re=[],Oe=0;Oe<4;Oe++){var Ve=ze[Oe];Re.push([l._x[Ve],l._y[Ve],l._z[Ve],l._value[Ve]])}return Re}var be=3;function me(ze,Re,Oe,Ve,qe,Je){Je||(Je=1),Oe=[-1,-1,-1];var ot=!1,rt=[de(Re[0][3],Ve,qe),de(Re[1][3],Ve,qe),de(Re[2][3],Ve,qe)];if(!rt[0]&&!rt[1]&&!rt[2])return!1;var dt=function(yt,et,nt){return ge(et[0][3])&&ge(et[1][3])&&ge(et[2][3])?(se(yt,et,nt),!0):Je<be&&me(yt,et,nt,q,V,++Je)};if(rt[0]&&rt[1]&&rt[2])return dt(ze,Re,Oe)||ot;var _t=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(yt){if(rt[yt[0]]&&rt[yt[1]]&&!rt[yt[2]]){var et=Re[yt[0]],nt=Re[yt[1]],At=Re[yt[2]],Rt=ce(At,et,Ve,qe),Ft=ce(At,nt,Ve,qe);ot=dt(ze,[Ft,Rt,et],[-1,-1,Oe[yt[0]]])||ot,ot=dt(ze,[et,nt,Ft],[Oe[yt[0]],Oe[yt[1]],-1])||ot,_t=!0}}),_t||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(yt){if(rt[yt[0]]&&!rt[yt[1]]&&!rt[yt[2]]){var et=Re[yt[0]],nt=Re[yt[1]],At=Re[yt[2]],Rt=ce(nt,et,Ve,qe),Ft=ce(At,et,Ve,qe);ot=dt(ze,[Ft,Rt,et],[-1,-1,Oe[yt[0]]])||ot,_t=!0}}),ot}function Se(ze,Re,Oe,Ve){var qe=!1,Je=ve(Re),ot=[de(Je[0][3],Oe,Ve),de(Je[1][3],Oe,Ve),de(Je[2][3],Oe,Ve),de(Je[3][3],Oe,Ve)];if(!(ot[0]||ot[1]||ot[2]||ot[3]))return qe;if(ot[0]&&ot[1]&&ot[2]&&ot[3])return E&&(qe=function(dt,_t,yt){var et=function(nt,At,Rt){se(dt,[_t[nt],_t[At],_t[Rt]],[yt[nt],yt[At],yt[Rt]])};et(0,1,2),et(3,0,1),et(2,3,0),et(1,2,3)}(ze,Je,Re)||qe),qe;var rt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(dt){if(ot[dt[0]]&&ot[dt[1]]&&ot[dt[2]]&&!ot[dt[3]]){var _t=Je[dt[0]],yt=Je[dt[1]],et=Je[dt[2]],nt=Je[dt[3]];if(E)qe=se(ze,[_t,yt,et],[Re[dt[0]],Re[dt[1]],Re[dt[2]]])||qe;else{var At=ce(nt,_t,Oe,Ve),Rt=ce(nt,yt,Oe,Ve),Ft=ce(nt,et,Oe,Ve);qe=se(null,[At,Rt,Ft],[-1,-1,-1])||qe}rt=!0}}),rt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(dt){if(ot[dt[0]]&&ot[dt[1]]&&!ot[dt[2]]&&!ot[dt[3]]){var _t=Je[dt[0]],yt=Je[dt[1]],et=Je[dt[2]],nt=Je[dt[3]],At=ce(et,_t,Oe,Ve),Rt=ce(et,yt,Oe,Ve),Ft=ce(nt,yt,Oe,Ve),It=ce(nt,_t,Oe,Ve);E?(qe=se(ze,[_t,It,At],[Re[dt[0]],-1,-1])||qe,qe=se(ze,[yt,Rt,Ft],[Re[dt[1]],-1,-1])||qe):qe=function(Ge,Ye,Ne){var We=function(st,it,Fe){se(null,[Ye[st],Ye[it],Ye[Fe]],[Ne[st],Ne[it],Ne[Fe]])};We(0,1,2),We(2,3,0)}(0,[At,Rt,Ft,It],[-1,-1,-1,-1])||qe,rt=!0}}),rt||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(dt){if(ot[dt[0]]&&!ot[dt[1]]&&!ot[dt[2]]&&!ot[dt[3]]){var _t=Je[dt[0]],yt=Je[dt[1]],et=Je[dt[2]],nt=Je[dt[3]],At=ce(yt,_t,Oe,Ve),Rt=ce(et,_t,Oe,Ve),Ft=ce(nt,_t,Oe,Ve);E?(qe=se(ze,[_t,At,Rt],[Re[dt[0]],-1,-1])||qe,qe=se(ze,[_t,Rt,Ft],[Re[dt[0]],-1,-1])||qe,qe=se(ze,[_t,Ft,At],[Re[dt[0]],-1,-1])||qe):qe=se(null,[At,Rt,Ft],[-1,-1,-1])||qe,rt=!0}})),qe}function we(ze,Re,Oe,Ve,qe,Je,ot,rt,dt,_t,yt){var et=!1;return h&&(ie(ze,"A")&&(et=Se(null,[Re,Oe,Ve,Je],_t,yt)||et),ie(ze,"B")&&(et=Se(null,[Oe,Ve,qe,dt],_t,yt)||et),ie(ze,"C")&&(et=Se(null,[Oe,Je,ot,dt],_t,yt)||et),ie(ze,"D")&&(et=Se(null,[Ve,Je,rt,dt],_t,yt)||et),ie(ze,"E")&&(et=Se(null,[Oe,Ve,Je,dt],_t,yt)||et)),E&&(et=Se(ze,[Oe,Ve,Je,dt],_t,yt)||et),et}function _e(ze,Re,Oe,Ve,qe,Je,ot,rt){return[rt[0]===!0||me(ze,ve([Re,Oe,Ve]),[Re,Oe,Ve],Je,ot),rt[1]===!0||me(ze,ve([Ve,qe,Re]),[Ve,qe,Re],Je,ot)]}function oe(ze,Re,Oe,Ve,qe,Je,ot,rt,dt){return rt?_e(ze,Re,Oe,qe,Ve,Je,ot,dt):_e(ze,Oe,qe,Ve,Re,Je,ot,dt)}function le(ze,Re,Oe,Ve,qe,Je,ot){var rt,dt,_t,yt,et=!1,nt=function(){et=me(ze,[rt,dt,_t],[-1,-1,-1],qe,Je)||et,et=me(ze,[_t,yt,rt],[-1,-1,-1],qe,Je)||et},At=ot[0],Rt=ot[1],Ft=ot[2];return At&&(rt=K(ve([j(Re,Oe-0,Ve-0)])[0],ve([j(Re-1,Oe-0,Ve-0)])[0],At),dt=K(ve([j(Re,Oe-0,Ve-1)])[0],ve([j(Re-1,Oe-0,Ve-1)])[0],At),_t=K(ve([j(Re,Oe-1,Ve-1)])[0],ve([j(Re-1,Oe-1,Ve-1)])[0],At),yt=K(ve([j(Re,Oe-1,Ve-0)])[0],ve([j(Re-1,Oe-1,Ve-0)])[0],At),nt()),Rt&&(rt=K(ve([j(Re-0,Oe,Ve-0)])[0],ve([j(Re-0,Oe-1,Ve-0)])[0],Rt),dt=K(ve([j(Re-0,Oe,Ve-1)])[0],ve([j(Re-0,Oe-1,Ve-1)])[0],Rt),_t=K(ve([j(Re-1,Oe,Ve-1)])[0],ve([j(Re-1,Oe-1,Ve-1)])[0],Rt),yt=K(ve([j(Re-1,Oe,Ve-0)])[0],ve([j(Re-1,Oe-1,Ve-0)])[0],Rt),nt()),Ft&&(rt=K(ve([j(Re-0,Oe-0,Ve)])[0],ve([j(Re-0,Oe-0,Ve-1)])[0],Ft),dt=K(ve([j(Re-0,Oe-1,Ve)])[0],ve([j(Re-0,Oe-1,Ve-1)])[0],Ft),_t=K(ve([j(Re-1,Oe-1,Ve)])[0],ve([j(Re-1,Oe-1,Ve-1)])[0],Ft),yt=K(ve([j(Re-1,Oe-0,Ve)])[0],ve([j(Re-1,Oe-0,Ve-1)])[0],Ft),nt()),et}function pe(ze,Re,Oe,Ve,qe,Je,ot,rt,dt,_t,yt,et){var nt=ze;return et?(h&&ze==="even"&&(nt=null),we(nt,Re,Oe,Ve,qe,Je,ot,rt,dt,_t,yt)):(h&&ze==="odd"&&(nt=null),we(nt,dt,rt,ot,Je,qe,Ve,Oe,Re,_t,yt))}function Ee(ze,Re,Oe,Ve,qe){for(var Je=[],ot=0,rt=0;rt<Re.length;rt++)for(var dt=Re[rt],_t=1;_t<U;_t++)for(var yt=1;yt<F;yt++)Je.push(oe(ze,j(dt,yt-1,_t-1),j(dt,yt-1,_t),j(dt,yt,_t-1),j(dt,yt,_t),Oe,Ve,(dt+yt+_t)%2,qe&&qe[ot]?qe[ot]:[])),ot++;return Je}function Te(ze,Re,Oe,Ve,qe){for(var Je=[],ot=0,rt=0;rt<Re.length;rt++)for(var dt=Re[rt],_t=1;_t<z;_t++)for(var yt=1;yt<U;yt++)Je.push(oe(ze,j(_t-1,dt,yt-1),j(_t,dt,yt-1),j(_t-1,dt,yt),j(_t,dt,yt),Oe,Ve,(_t+dt+yt)%2,qe&&qe[ot]?qe[ot]:[])),ot++;return Je}function Me(ze,Re,Oe,Ve,qe){for(var Je=[],ot=0,rt=0;rt<Re.length;rt++)for(var dt=Re[rt],_t=1;_t<F;_t++)for(var yt=1;yt<z;yt++)Je.push(oe(ze,j(yt-1,_t-1,dt),j(yt-1,_t,dt),j(yt,_t-1,dt),j(yt,_t,dt),Oe,Ve,(yt+_t+dt)%2,qe&&qe[ot]?qe[ot]:[])),ot++;return Je}function Le(ze,Re,Oe){for(var Ve=1;Ve<U;Ve++)for(var qe=1;qe<F;qe++)for(var Je=1;Je<z;Je++)pe(ze,j(Je-1,qe-1,Ve-1),j(Je-1,qe-1,Ve),j(Je-1,qe,Ve-1),j(Je-1,qe,Ve),j(Je,qe-1,Ve-1),j(Je,qe-1,Ve),j(Je,qe,Ve-1),j(Je,qe,Ve),Re,Oe,(Je+qe+Ve)%2)}function Ie(ze,Re,Oe,Ve,qe,Je){for(var ot=[],rt=0,dt=0;dt<Re.length;dt++)for(var _t=Re[dt],yt=1;yt<U;yt++)for(var et=1;et<F;et++)ot.push(le(ze,_t,et,yt,Oe,Ve,qe[dt],Je&&Je[rt]&&Je[rt])),rt++;return ot}function he(ze,Re,Oe,Ve,qe,Je){for(var ot=[],rt=0,dt=0;dt<Re.length;dt++)for(var _t=Re[dt],yt=1;yt<z;yt++)for(var et=1;et<U;et++)ot.push(le(ze,yt,_t,et,Oe,Ve,qe[dt],Je&&Je[rt]&&Je[rt])),rt++;return ot}function xe(ze,Re,Oe,Ve,qe,Je){for(var ot=[],rt=0,dt=0;dt<Re.length;dt++)for(var _t=Re[dt],yt=1;yt<F;yt++)for(var et=1;et<z;et++)ot.push(le(ze,et,yt,_t,Oe,Ve,qe[dt],Je&&Je[rt]&&Je[rt])),rt++;return ot}function ke(ze,Re){for(var Oe=[],Ve=ze;Ve<Re;Ve++)Oe.push(Ve);return Oe}return function(){$(),function(){for(var dt=0;dt<z;dt++)for(var _t=0;_t<F;_t++)for(var yt=0;yt<U;yt++){var et=j(dt,_t,yt);J(l._x[et],l._y[et],l._z[et],l._value[et])}}();var ze=null;if(x&&T&&(te(T),E=!0,Le(ze,q,V),E=!1),m&&y){te(y);for(var Re=l.surface.pattern,Oe=l.surface.count,Ve=0;Ve<Oe;Ve++){var qe=Oe===1?.5:Ve/(Oe-1),Je=(1-qe)*q+qe*V,ot=Math.abs(Je-Z)>Math.abs(Je-B)?[Z,Je]:[Je,B];h=!0,Le(Re,ot[0],ot[1]),h=!1}}var rt=[[Math.min(q,B),Math.max(q,B)],[Math.min(Z,V),Math.max(Z,V)]];["x","y","z"].forEach(function(dt){for(var _t=[],yt=0;yt<rt.length;yt++){var et=0,nt=rt[yt][0],At=rt[yt][1],Rt=l.slices[dt];if(Rt.show&&Rt.fill){te(Rt.fill);var Ft=[],It=[],Ge=[];if(Rt.locations.length)for(var Ye=0;Ye<Rt.locations.length;Ye++){var Ne=s(Rt.locations[Ye],dt==="x"?L:dt==="y"?P:I);Ne.distRatio===0?Ft.push(Ne.id):Ne.id>0&&(It.push(Ne.id),dt==="x"?Ge.push([Ne.distRatio,0,0]):dt==="y"?Ge.push([0,Ne.distRatio,0]):Ge.push([0,0,Ne.distRatio]))}else Ft=ke(1,dt==="x"?z-1:dt==="y"?F-1:U-1);It.length>0&&(_t[et]=dt==="x"?Ie(ze,It,nt,At,Ge,_t[et]):dt==="y"?he(ze,It,nt,At,Ge,_t[et]):xe(ze,It,nt,At,Ge,_t[et]),et++),Ft.length>0&&(_t[et]=dt==="x"?Ee(ze,Ft,nt,At,_t[et]):dt==="y"?Te(ze,Ft,nt,At,_t[et]):Me(ze,Ft,nt,At,_t[et]),et++)}var We=l.caps[dt];We.show&&We.fill&&(te(We.fill),_t[et]=dt==="x"?Ee(ze,[0,z-1],nt,At,_t[et]):dt==="y"?Te(ze,[0,F-1],nt,At,_t[et]):Me(ze,[0,U-1],nt,At,_t[et]),et++)}}),k===0&&$(),l._meshX=g,l._meshY=f,l._meshZ=b,l._meshIntensity=v,l._Xs=L,l._Ys=P,l._Zs=I}(),l}Y.exports={findNearestOnAxis:s,generateIsoMeshes:i,createIsosurfaceTrace:function(l,u){var c=l.glplot.gl,g=M({gl:c}),f=new n(l,g,u.uid);return g._trace=f,f.update(u),l.glplot.add(g),f}}},70548:function(Y,O,e){var M=e(3400),A=e(24040),o=e(50048),w=e(27260);function _(p,s,n,a,r){var i=r("isomin"),l=r("isomax");l!=null&&i!=null&&i>l&&(s.isomin=null,s.isomax=null);var u=r("x"),c=r("y"),g=r("z"),f=r("value");u&&u.length&&c&&c.length&&g&&g.length&&f&&f.length?(A.getComponentMethod("calendars","handleTraceDefaults")(p,s,["x","y","z"],a),r("valuehoverformat"),["x","y","z"].forEach(function(b){r(b+"hoverformat");var v="caps."+b;r(v+".show")&&r(v+".fill");var d="slices."+b;r(d+".show")&&(r(d+".fill"),r(d+".locations"))}),r("spaceframe.show")&&r("spaceframe.fill"),r("surface.show")&&(r("surface.count"),r("surface.fill"),r("surface.pattern")),r("contour.show")&&(r("contour.color"),r("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(b){r(b)}),w(p,s,a,r,{prefix:"",cLetter:"c"}),s._length=null):s.visible=!1}Y.exports={supplyDefaults:function(p,s,n,a){_(p,s,0,a,function(r,i){return M.coerce(p,s,o,r,i)})},supplyIsoDefaults:_}},6296:function(Y,O,e){Y.exports={attributes:e(50048),supplyDefaults:e(70548).supplyDefaults,calc:e(62624),colorbar:{min:"cmin",max:"cmax"},plot:e(31460).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},52948:function(Y,O,e){var M=e(49084),A=e(29736).axisHoverFormat,o=e(21776).Ks,w=e(16716),_=e(45464),p=e(92880).extendFlat;Y.exports=p({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:o({editType:"calc"}),xhoverformat:A("x"),yhoverformat:A("y"),zhoverformat:A("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},M("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:w.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:p({},w.contours.x.show,{}),color:w.contours.x.color,width:w.contours.x.width,editType:"calc"},lightposition:{x:p({},w.lightposition.x,{dflt:1e5}),y:p({},w.lightposition.y,{dflt:1e5}),z:p({},w.lightposition.z,{dflt:0}),editType:"calc"},lighting:p({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},w.lighting),hoverinfo:p({},_.hoverinfo,{editType:"calc"}),showlegend:p({},_.showlegend,{dflt:!1})})},1876:function(Y,O,e){var M=e(47128);Y.exports=function(A,o){o.intensity&&M(A,o,{vals:o.intensity,containerStr:"",cLetter:"c"})}},576:function(Y,O,e){var M=e(67792).gl_mesh3d,A=e(67792).delaunay_triangulate,o=e(67792).alpha_shape,w=e(67792).convex_hull,_=e(33040).parseColorScale,p=e(3400).isArrayOrTypedArray,s=e(43080),n=e(8932).extractOpts,a=e(52094);function r(f,b,v){this.scene=f,this.uid=v,this.mesh=b,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var i=r.prototype;function l(f){for(var b=[],v=f.length,d=0;d<v;d++)b[d]=s(f[d]);return b}function u(f,b,v,d){for(var m=[],x=b.length,y=0;y<x;y++)m[y]=f.d2l(b[y],0,d)*v;return m}function c(f){for(var b=[],v=f.length,d=0;d<v;d++)b[d]=Math.round(f[d]);return b}function g(f,b){for(var v=f.length,d=0;d<v;d++)if(f[d]<=-.5||f[d]>=b-.5)return!1;return!0}i.handlePick=function(f){if(f.object===this.mesh){var b=f.index=f.data.index;f.data._cellCenter?f.traceCoordinate=f.data.dataCoordinate:f.traceCoordinate=[this.data.x[b],this.data.y[b],this.data.z[b]];var v=this.data.hovertext||this.data.text;return p(v)&&v[b]!==void 0?f.textLabel=v[b]:v&&(f.textLabel=v),!0}},i.update=function(f){var b=this.scene,v=b.fullSceneLayout;this.data=f;var d,m=f.x.length,x=a(u(v.xaxis,f.x,b.dataScale[0],f.xcalendar),u(v.yaxis,f.y,b.dataScale[1],f.ycalendar),u(v.zaxis,f.z,b.dataScale[2],f.zcalendar));if(f.i&&f.j&&f.k){if(f.i.length!==f.j.length||f.j.length!==f.k.length||!g(f.i,m)||!g(f.j,m)||!g(f.k,m))return;d=a(c(f.i),c(f.j),c(f.k))}else d=f.alphahull===0?w(x):f.alphahull>0?o(f.alphahull,x):function(E,k){for(var L=["x","y","z"].indexOf(E),P=[],I=k.length,z=0;z<I;z++)P[z]=[k[z][(L+1)%3],k[z][(L+2)%3]];return A(P)}(f.delaunayaxis,x);var y={positions:x,cells:d,lightPosition:[f.lightposition.x,f.lightposition.y,f.lightposition.z],ambient:f.lighting.ambient,diffuse:f.lighting.diffuse,specular:f.lighting.specular,roughness:f.lighting.roughness,fresnel:f.lighting.fresnel,vertexNormalsEpsilon:f.lighting.vertexnormalsepsilon,faceNormalsEpsilon:f.lighting.facenormalsepsilon,opacity:f.opacity,contourEnable:f.contour.show,contourColor:s(f.contour.color).slice(0,3),contourWidth:f.contour.width,useFacetNormals:f.flatshading};if(f.intensity){var T=n(f);this.color="#fff";var h=f.intensitymode;y[h+"Intensity"]=f.intensity,y[h+"IntensityBounds"]=[T.min,T.max],y.colormap=_(f)}else f.vertexcolor?(this.color=f.vertexcolor[0],y.vertexColors=l(f.vertexcolor)):f.facecolor?(this.color=f.facecolor[0],y.cellColors=l(f.facecolor)):(this.color=f.color,y.meshColor=s(f.color));this.mesh.update(y)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},Y.exports=function(f,b){var v=f.glplot.gl,d=M({gl:v}),m=new r(f,d,b.uid);return d._trace=m,m.update(b),f.glplot.add(d),m}},74212:function(Y,O,e){var M=e(24040),A=e(3400),o=e(27260),w=e(52948);Y.exports=function(_,p,s,n){function a(i,l){return A.coerce(_,p,w,i,l)}function r(i){var l=i.map(function(u){var c=a(u);return c&&A.isArrayOrTypedArray(c)?c:null});return l.every(function(u){return u&&u.length===l[0].length})&&l}r(["x","y","z"])?(r(["i","j","k"]),(!p.i||p.j&&p.k)&&(!p.j||p.k&&p.i)&&(!p.k||p.i&&p.j)?(M.getComponentMethod("calendars","handleTraceDefaults")(_,p,["x","y","z"],n),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(i){a(i)}),a("contour.show")&&(a("contour.color"),a("contour.width")),"intensity"in _?(a("intensity"),a("intensitymode"),o(_,p,n,a,{prefix:"",cLetter:"c"})):(p.showscale=!1,"facecolor"in _?a("facecolor"):"vertexcolor"in _?a("vertexcolor"):a("color",s)),a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),p._length=null):p.visible=!1):p.visible=!1}},7404:function(Y,O,e){Y.exports={attributes:e(52948),supplyDefaults:e(74212),calc:e(1876),colorbar:{min:"cmin",max:"cmax"},plot:e(576),moduleType:"trace",name:"mesh3d",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},20279:function(Y,O,e){var M=e(3400).extendFlat,A=e(52904),o=e(29736).axisHoverFormat,w=e(98192).u,_=e(55756),p=e(48164),s=p.INCREASING.COLOR,n=p.DECREASING.COLOR,a=A.line;function r(i){return{line:{color:M({},a.color,{dflt:i}),width:a.width,dash:w,editType:"style"},editType:"style"}}Y.exports={xperiod:A.xperiod,xperiod0:A.xperiod0,xperiodalignment:A.xperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:M({},a.width,{}),dash:M({},w,{}),editType:"style"},increasing:r(s),decreasing:r(n),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:M({},_.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},42812:function(Y,O,e){var M=e(3400),A=M._,o=e(54460),w=e(1220),_=e(39032).BADNUM;function p(n,a,r,i){return{o:n,h:a,l:r,c:i}}function s(n,a,r,i,l,u){for(var c=l.makeCalcdata(a,"open"),g=l.makeCalcdata(a,"high"),f=l.makeCalcdata(a,"low"),b=l.makeCalcdata(a,"close"),v=M.isArrayOrTypedArray(a.text),d=M.isArrayOrTypedArray(a.hovertext),m=!0,x=null,y=!!a.xperiodalignment,T=[],h=0;h<i.length;h++){var E=i[h],k=c[h],L=g[h],P=f[h],I=b[h];if(E!==_&&k!==_&&L!==_&&P!==_&&I!==_){I===k?x!==null&&I!==x&&(m=I>x):m=I>k,x=I;var z=u(k,L,P,I);z.pos=E,z.yc=(k+I)/2,z.i=h,z.dir=m?"increasing":"decreasing",z.x=z.pos,z.y=[P,L],y&&(z.orig_p=r[h]),v&&(z.tx=a.text[h]),d&&(z.htx=a.hovertext[h]),T.push(z)}else T.push({pos:E,empty:!0})}return a._extremes[l._id]=o.findExtremes(l,M.concat(f,g),{padded:!0}),T.length&&(T[0].t={labels:{open:A(n,"open:")+" ",high:A(n,"high:")+" ",low:A(n,"low:")+" ",close:A(n,"close:")+" "}}),T}Y.exports={calc:function(n,a){var r=o.getFromId(n,a.xaxis),i=o.getFromId(n,a.yaxis),l=function(b,v,d){var m=d._minDiff;if(!m){var x,y=b._fullData,T=[];for(m=1/0,x=0;x<y.length;x++){var h=y[x];if(h.type==="ohlc"&&h.visible===!0&&h.xaxis===v._id){T.push(h);var E=v.makeCalcdata(h,"x");h._origX=E;var k=w(d,v,"x",E).vals;h._xcalc=k;var L=M.distinctVals(k).minDiff;L&&isFinite(L)&&(m=Math.min(m,L))}}for(m===1/0&&(m=1),x=0;x<T.length;x++)T[x]._minDiff=m}return m*d.tickwidth}(n,r,a),u=a._minDiff;a._minDiff=null;var c=a._origX;a._origX=null;var g=a._xcalc;a._xcalc=null;var f=s(n,a,c,g,i,p);return a._extremes[r._id]=o.findExtremes(r,g,{vpad:u/2}),f.length?(M.extendFlat(f[0].t,{wHover:u/2,tickLen:l}),f):[{t:{empty:!0}}]},calcCommon:s}},23860:function(Y,O,e){var M=e(3400),A=e(52744),o=e(31147),w=e(20279);function _(p,s,n,a){n(a+".line.color"),n(a+".line.width",s.line.width),n(a+".line.dash",s.line.dash)}Y.exports=function(p,s,n,a){function r(i,l){return M.coerce(p,s,w,i,l)}A(p,s,r,a)?(o(p,s,a,r,{x:!0}),r("xhoverformat"),r("yhoverformat"),r("line.width"),r("line.dash"),_(0,s,r,"increasing"),_(0,s,r,"decreasing"),r("text"),r("hovertext"),r("tickwidth"),a._requestRangeslider[s.xaxis]=!0):s.visible=!1}},18720:function(Y,O,e){var M=e(54460),A=e(3400),o=e(93024),w=e(76308),_=e(3400).fillText,p=e(48164),s={increasing:p.INCREASING.SYMBOL,decreasing:p.DECREASING.SYMBOL};function n(i,l,u,c){var g,f,b=i.cd,v=i.xa,d=b[0].trace,m=b[0].t,x=d.type,y=x==="ohlc"?"l":"min",T=x==="ohlc"?"h":"max",h=m.bPos||0,E=function(B){return B.pos+h-l},k=m.bdPos||m.tickLen,L=m.wHover,P=Math.min(1,k/Math.abs(v.r2c(v.range[1])-v.r2c(v.range[0])));function I(B){var q=E(B);return o.inbox(q-L,q+L,g)}function z(B){var q=B[y],V=B[T];return q===V||o.inbox(q-u,V-u,g)}function F(B){return(I(B)+z(B))/2}g=i.maxHoverDistance-P,f=i.maxSpikeDistance-P;var U=o.getDistanceFunction(c,I,z,F);if(o.getClosest(b,U,i),i.index===!1)return null;var R=b[i.index];if(R.empty)return null;var j=d[R.dir],Z=j.line.color;return w.opacity(Z)&&j.line.width?i.color=Z:i.color=j.fillcolor,i.x0=v.c2p(R.pos+h-k,!0),i.x1=v.c2p(R.pos+h+k,!0),i.xLabelVal=R.orig_p!==void 0?R.orig_p:R.pos,i.spikeDistance=F(R)*f/g,i.xSpike=v.c2p(R.pos,!0),i}function a(i,l,u,c){var g=i.cd,f=i.ya,b=g[0].trace,v=g[0].t,d=[],m=n(i,l,u,c);if(!m)return[];var x=g[m.index].hi||b.hoverinfo,y=x.split("+");if(x!=="all"&&y.indexOf("y")===-1)return[];for(var T=["high","open","close","low"],h={},E=0;E<T.length;E++){var k,L=T[E],P=b[L][m.index],I=f.c2p(P,!0);P in h?(k=h[P]).yLabel+="<br>"+v.labels[L]+M.hoverLabelText(f,P,b.yhoverformat):((k=A.extendFlat({},m)).y0=k.y1=I,k.yLabelVal=P,k.yLabel=v.labels[L]+M.hoverLabelText(f,P,b.yhoverformat),k.name="",d.push(k),h[P]=k)}return d}function r(i,l,u,c){var g=i.cd,f=i.ya,b=g[0].trace,v=g[0].t,d=n(i,l,u,c);if(!d)return[];var m=g[d.index],x=d.index=m.i,y=m.dir;function T(z){return v.labels[z]+M.hoverLabelText(f,b[z][x],b.yhoverformat)}var h=m.hi||b.hoverinfo,E=h.split("+"),k=h==="all",L=k||E.indexOf("y")!==-1,P=k||E.indexOf("text")!==-1,I=L?[T("open"),T("high"),T("low"),T("close")+"  "+s[y]]:[];return P&&_(m,b,I),d.extraText=I.join("<br>"),d.y0=d.y1=f.c2p(m.yc,!0),[d]}Y.exports={hoverPoints:function(i,l,u,c){return i.cd[0].trace.hoverlabel.split?a(i,l,u,c):r(i,l,u,c)},hoverSplit:a,hoverOnPoints:r}},65456:function(Y,O,e){Y.exports={moduleType:"trace",name:"ohlc",basePlotModule:e(57952),categories:["cartesian","svg","showLegend"],meta:{},attributes:e(20279),supplyDefaults:e(23860),calc:e(42812).calc,plot:e(36664),style:e(14008),hoverPoints:e(18720).hoverPoints,selectPoints:e(97384)}},52744:function(Y,O,e){var M=e(24040),A=e(3400);Y.exports=function(o,w,_,p){var s=_("x"),n=_("open"),a=_("high"),r=_("low"),i=_("close");if(_("hoverlabel.split"),M.getComponentMethod("calendars","handleTraceDefaults")(o,w,["x"],p),n&&a&&r&&i){var l=Math.min(n.length,a.length,r.length,i.length);return s&&(l=Math.min(l,A.minRowLength(s))),w._length=l,l}}},36664:function(Y,O,e){var M=e(33428),A=e(3400);Y.exports=function(o,w,_,p){var s=w.yaxis,n=w.xaxis,a=!!n.rangebreaks;A.makeTraceGroups(p,_,"trace ohlc").each(function(r){var i=M.select(this),l=r[0],u=l.t;if(l.trace.visible!==!0||u.empty)i.remove();else{var c=u.tickLen,g=i.selectAll("path").data(A.identity);g.enter().append("path"),g.exit().remove(),g.attr("d",function(f){if(f.empty)return"M0,0Z";var b=n.c2p(f.pos-c,!0),v=n.c2p(f.pos+c,!0),d=a?(b+v)/2:n.c2p(f.pos,!0);return"M"+b+","+s.c2p(f.o,!0)+"H"+d+"M"+d+","+s.c2p(f.h,!0)+"V"+s.c2p(f.l,!0)+"M"+v+","+s.c2p(f.c,!0)+"H"+d})}})}},97384:function(Y){Y.exports=function(O,e){var M,A=O.cd,o=O.xaxis,w=O.yaxis,_=[],p=A[0].t.bPos||0;if(e===!1)for(M=0;M<A.length;M++)A[M].selected=0;else for(M=0;M<A.length;M++){var s=A[M];e.contains([o.c2p(s.pos+p),w.c2p(s.yc)],null,s.i,O)?(_.push({pointNumber:s.i,x:o.c2d(s.pos),y:w.c2d(s.yc)}),s.selected=1):s.selected=0}return _}},14008:function(Y,O,e){var M=e(33428),A=e(43616),o=e(76308);Y.exports=function(w,_,p){var s=p||M.select(w).selectAll("g.ohlclayer").selectAll("g.trace");s.style("opacity",function(n){return n[0].trace.opacity}),s.each(function(n){var a=n[0].trace;M.select(this).selectAll("path").each(function(r){if(!r.empty){var i=a[r.dir].line;M.select(this).style("fill","none").call(o.stroke,i.color).call(A.dashLine,i.dash,i.width).style("opacity",a.selectedpoints&&!r.selected?.3:1)}})})}},72140:function(Y,O,e){var M=e(92880).extendFlat,A=e(45464),o=e(25376),w=e(49084),_=e(21776).Ks,p=e(86968).u,s=M({editType:"calc"},w("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:_({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});Y.exports={domain:p({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:M({},A.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:_({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:o({editType:"calc"}),tickfont:o({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:s,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},91800:function(Y,O,e){var M=e(84888)._M,A=e(60268),o="parcats";O.name=o,O.plot=function(w,_,p,s){var n=M(w.calcdata,o);if(n.length){var a=n[0];A(w,a,p,s)}},O.clean=function(w,_,p,s){var n=s._has&&s._has("parcats"),a=_._has&&_._has("parcats");n&&!a&&s._paperdiv.selectAll(".parcats").remove()}},69136:function(Y,O,e){var M=e(71688).wrap,A=e(94288).hasColorscale,o=e(47128),w=e(68944),_=e(43616),p=e(3400),s=e(38248);function n(i,l,u){i.valueInds.push(l),i.count+=u}function a(i,l,u){return{categoryInds:i,color:l,rawColor:u,valueInds:[],count:0}}function r(i,l,u){i.valueInds.push(l),i.count+=u}Y.exports=function(i,l){var u=p.filterVisible(l.dimensions);if(u.length===0)return[];var c,g,f,b=u.map(function(V){var ne;if(V.categoryorder==="trace")ne=null;else if(V.categoryorder==="array")ne=V.categoryarray;else{ne=w(V.values);for(var ee=!0,$=0;$<ne.length;$++)if(!s(ne[$])){ee=!1;break}ne.sort(ee?p.sorterAsc:void 0),V.categoryorder==="category descending"&&(ne=ne.reverse())}return function(J,K){K=K==null?[]:K.map(function(ve){return ve});var te={},ie={},ae=[];K.forEach(function(ve,be){te[ve]=0,ie[ve]=be});for(var se=0;se<J.length;se++){var ce,de=J[se];te[de]===void 0?(te[de]=1,ce=K.push(de)-1,ie[de]=ce):(te[de]++,ce=ie[de]),ae.push(ce)}var ge=K.map(function(ve){return te[ve]});return{uniqueValues:K,uniqueCounts:ge,inds:ae}}(V.values,ne)});c=p.isArrayOrTypedArray(l.counts)?l.counts:[l.counts],function(V){var ne,ee=V.map(function($){return $.displayindex});if(function($){for(var J=new Array($.length),K=0;K<$.length;K++){if($[K]<0||$[K]>=$.length||J[$[K]]!==void 0)return!1;J[$[K]]=!0}return!0}(ee))for(ne=0;ne<V.length;ne++)V[ne]._displayindex=V[ne].displayindex;else for(ne=0;ne<V.length;ne++)V[ne]._displayindex=ne}(u),u.forEach(function(V,ne){(function(ee,$){ee._categoryarray=$.uniqueValues,ee.ticktext===null||ee.ticktext===void 0?ee._ticktext=[]:ee._ticktext=ee.ticktext.slice();for(var J=ee._ticktext.length;J<$.uniqueValues.length;J++)ee._ticktext.push($.uniqueValues[J])})(V,b[ne])});var v,d=l.line;d?(A(l,"line")&&o(i,l,{vals:l.line.color,containerStr:"line",cLetter:"c"}),v=_.tryColorscale(d)):v=p.identity;var m,x,y,T,h,E=u[0].values.length,k={},L=b.map(function(V){return V.inds});for(f=0,m=0;m<E;m++){var P=[];for(x=0;x<L.length;x++)P.push(L[x][m]);g=c[m%c.length],f+=g;var I=(y=m,T=void 0,h=void 0,p.isArrayOrTypedArray(d.color)?h=T=d.color[y%d.color.length]:T=d.color,{color:v(T),rawColor:h}),z=P+"-"+I.rawColor;k[z]===void 0&&(k[z]=a(P,I.color,I.rawColor)),r(k[z],m,g)}var F,U=u.map(function(V,ne){return function(ee,$,J,K,te){return{dimensionInd:ee,containerInd:$,displayInd:J,dimensionLabel:K,count:te,categories:[],dragX:null}}(ne,V._index,V._displayindex,V.label,f)});for(m=0;m<E;m++)for(g=c[m%c.length],x=0;x<U.length;x++){var R=U[x].containerInd,j=b[x].inds[m],Z=U[x].categories;if(Z[j]===void 0){var B=l.dimensions[R]._categoryarray[j],q=l.dimensions[R]._ticktext[j];Z[j]={dimensionInd:x,categoryInd:F=j,categoryValue:B,displayInd:F,categoryLabel:q,valueInds:[],count:0,dragY:null}}n(Z[j],m,g)}return M(function(V,ne,ee){var $=V.map(function(J){return J.categories.length}).reduce(function(J,K){return Math.max(J,K)});return{dimensions:V,paths:ne,trace:void 0,maxCats:$,count:ee}}(U,k,f))}},76671:function(Y,O,e){var M=e(3400),A=e(94288).hasColorscale,o=e(27260),w=e(86968).Q,_=e(51272),p=e(72140),s=e(26284),n=e(38116).isTypedArraySpec;function a(r,i){function l(d,m){return M.coerce(r,i,p.dimensions,d,m)}var u=l("values"),c=l("visible");if(u&&u.length||(c=i.visible=!1),c){l("label"),l("displayindex",i._index);var g,f=r.categoryarray,b=M.isArrayOrTypedArray(f)&&f.length>0||n(f);b&&(g="array");var v=l("categoryorder",g);v==="array"?(l("categoryarray"),l("ticktext")):(delete r.categoryarray,delete r.ticktext),b||v!=="array"||(i.categoryorder="trace")}}Y.exports=function(r,i,l,u){function c(d,m){return M.coerce(r,i,p,d,m)}var g=_(r,i,{name:"dimensions",handleItemDefaults:a}),f=function(d,m,x,y,T){T("line.shape"),T("line.hovertemplate");var h=T("line.color",y.colorway[0]);if(A(d,"line")&&M.isArrayOrTypedArray(h)){if(h.length)return T("line.colorscale"),o(d,m,y,T,{prefix:"line.",cLetter:"c"}),h.length;m.line.color=x}return 1/0}(r,i,l,u,c);w(i,u,c),Array.isArray(g)&&g.length||(i.visible=!1),s(i,g,"values",f),c("hoveron"),c("hovertemplate"),c("arrangement"),c("bundlecolors"),c("sortpaths"),c("counts");var b={family:u.font.family,size:Math.round(u.font.size),color:u.font.color};M.coerceFont(c,"labelfont",b);var v={family:u.font.family,size:Math.round(u.font.size/1.2),color:u.font.color};M.coerceFont(c,"tickfont",v)}},22020:function(Y,O,e){Y.exports={attributes:e(72140),supplyDefaults:e(76671),calc:e(69136),plot:e(60268),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e(91800),categories:["noOpacity"],meta:{}}},51036:function(Y,O,e){var M=e(33428),A=e(67756).Gz,o=e(36424),w=e(93024),_=e(3400),p=_.strTranslate,s=e(43616),n=e(49760),a=e(72736);function r(ee,$,J,K){var te=$._context.staticPlot,ie=ee.map(Z.bind(0,$,J)),ae=K.selectAll("g.parcatslayer").data([null]);ae.enter().append("g").attr("class","parcatslayer").style("pointer-events",te?"none":"all");var se=ae.selectAll("g.trace.parcats").data(ie,i),ce=se.enter().append("g").attr("class","trace parcats");se.attr("transform",function(oe){return p(oe.x,oe.y)}),ce.append("g").attr("class","paths");var de=se.select("g.paths").selectAll("path.path").data(function(oe){return oe.paths},i);de.attr("fill",function(oe){return oe.model.color});var ge=de.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(oe){return oe.model.color}).attr("fill-opacity",0);d(ge),de.attr("d",function(oe){return oe.svgD}),ge.empty()||de.sort(u),de.exit().remove(),de.on("mouseover",c).on("mouseout",g).on("click",v),ce.append("g").attr("class","dimensions");var ve=se.select("g.dimensions").selectAll("g.dimension").data(function(oe){return oe.dimensions},i);ve.enter().append("g").attr("class","dimension"),ve.attr("transform",function(oe){return p(oe.x,0)}),ve.exit().remove();var be=ve.selectAll("g.category").data(function(oe){return oe.categories},i),me=be.enter().append("g").attr("class","category");be.attr("transform",function(oe){return p(0,oe.y)}),me.append("rect").attr("class","catrect").attr("pointer-events","none"),be.select("rect.catrect").attr("fill","none").attr("width",function(oe){return oe.width}).attr("height",function(oe){return oe.height}),x(me);var Se=be.selectAll("rect.bandrect").data(function(oe){return oe.bands},i);Se.each(function(){_.raiseToTop(this)}),Se.attr("fill",function(oe){return oe.color});var we=Se.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(oe){return oe.color}).attr("fill-opacity",0);Se.attr("fill",function(oe){return oe.color}).attr("width",function(oe){return oe.width}).attr("height",function(oe){return oe.height}).attr("y",function(oe){return oe.y}).attr("cursor",function(oe){return oe.parcatsViewModel.arrangement==="fixed"?"default":oe.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),y(we),Se.exit().remove(),me.append("text").attr("class","catlabel").attr("pointer-events","none");var _e=$._fullLayout.paper_bgcolor;be.select("text.catlabel").attr("text-anchor",function(oe){return l(oe)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",a.makeTextShadow(_e)).style("fill","rgb(0, 0, 0)").attr("x",function(oe){return l(oe)?oe.width+5:-5}).attr("y",function(oe){return oe.height/2}).text(function(oe){return oe.model.categoryLabel}).each(function(oe){s.font(M.select(this),oe.parcatsViewModel.categorylabelfont),a.convertToTspans(M.select(this),$)}),me.append("text").attr("class","dimlabel"),be.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(oe){return oe.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(oe){return oe.width/2}).attr("y",-5).text(function(oe,le){return le===0?oe.parcatsViewModel.model.dimensions[oe.model.dimensionInd].dimensionLabel:null}).each(function(oe){s.font(M.select(this),oe.parcatsViewModel.labelfont)}),be.selectAll("rect.bandrect").on("mouseover",L).on("mouseout",P),be.exit().remove(),ve.call(M.behavior.drag().origin(function(oe){return{x:oe.x,y:0}}).on("dragstart",I).on("drag",z).on("dragend",F)),se.each(function(oe){oe.traceSelection=M.select(this),oe.pathSelection=M.select(this).selectAll("g.paths").selectAll("path.path"),oe.dimensionSelection=M.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),se.exit().remove()}function i(ee){return ee.key}function l(ee){var $=ee.parcatsViewModel.dimensions.length,J=ee.parcatsViewModel.dimensions[$-1].model.dimensionInd;return ee.model.dimensionInd===J}function u(ee,$){return ee.model.rawColor>$.model.rawColor?1:ee.model.rawColor<$.model.rawColor?-1:0}function c(ee){if(!ee.parcatsViewModel.dragDimension&&ee.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){_.raiseToTop(this),m(M.select(this));var $=f(ee),J=b(ee);if(ee.parcatsViewModel.graphDiv.emit("plotly_hover",{points:$,event:M.event,constraints:J}),ee.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var K,te,ie,ae=M.mouse(this)[0],se=ee.parcatsViewModel.graphDiv,ce=ee.parcatsViewModel.trace,de=se._fullLayout,ge=de._paperdiv.node().getBoundingClientRect(),ve=ee.parcatsViewModel.graphDiv.getBoundingClientRect();for(ie=0;ie<ee.leftXs.length-1;ie++)if(ee.leftXs[ie]+ee.dimWidths[ie]-2<=ae&&ae<=ee.leftXs[ie+1]+2){var be=ee.parcatsViewModel.dimensions[ie],me=ee.parcatsViewModel.dimensions[ie+1];K=(be.x+be.width+me.x)/2,te=(ee.topYs[ie]+ee.topYs[ie+1]+ee.height)/2;break}var Se=ee.parcatsViewModel.x+K,we=ee.parcatsViewModel.y+te,_e=n.mostReadable(ee.model.color,["black","white"]),oe=ee.model.count,le=oe/ee.parcatsViewModel.model.count,pe={countLabel:oe,probabilityLabel:le.toFixed(3)},Ee=[];ee.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ee.push(["Count:",pe.countLabel].join(" ")),ee.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Ee.push(["P:",pe.probabilityLabel].join(" "));var Te=Ee.join("<br>"),Me=M.mouse(se)[0];w.loneHover({trace:ce,x:Se-ge.left+ve.left,y:we-ge.top+ve.top,text:Te,color:ee.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:_e,idealAlign:Me<Se?"right":"left",hovertemplate:(ce.line||{}).hovertemplate,hovertemplateLabels:pe,eventData:[{data:ce._input,fullData:ce,count:oe,probability:le}]},{container:de._hoverlayer.node(),outerContainer:de._paper.node(),gd:se})}}}function g(ee){if(!ee.parcatsViewModel.dragDimension&&(d(M.select(this)),w.loneUnhover(ee.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),ee.parcatsViewModel.pathSelection.sort(u),ee.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var $=f(ee),J=b(ee);ee.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:$,event:M.event,constraints:J})}}function f(ee){for(var $=[],J=U(ee.parcatsViewModel),K=0;K<ee.model.valueInds.length;K++){var te=ee.model.valueInds[K];$.push({curveNumber:J,pointNumber:te})}return $}function b(ee){for(var $={},J=ee.parcatsViewModel.model.dimensions,K=0;K<J.length;K++){var te=J[K],ie=te.categories[ee.model.categoryInds[K]];$[te.containerInd]=ie.categoryValue}return ee.model.rawColor!==void 0&&($.color=ee.model.rawColor),$}function v(ee){if(ee.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var $=f(ee),J=b(ee);ee.parcatsViewModel.graphDiv.emit("plotly_click",{points:$,event:M.event,constraints:J})}}function d(ee){ee.attr("fill",function($){return $.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function m(ee){ee.attr("fill-opacity",.8).attr("stroke",function($){return n.mostReadable($.model.color,["black","white"])}).attr("stroke-width",.3)}function x(ee){ee.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function y(ee){ee.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function T(ee){var $=ee.parcatsViewModel.pathSelection,J=ee.categoryViewModel.model.dimensionInd,K=ee.categoryViewModel.model.categoryInd;return $.filter(function(te){return te.model.categoryInds[J]===K&&te.model.color===ee.color})}function h(ee,$,J){var K=M.select(ee).datum(),te=K.categoryViewModel.model,ie=K.parcatsViewModel.graphDiv,ae=M.select(ee.parentNode).selectAll("rect.bandrect"),se=[];ae.each(function(de){T(de).each(function(ge){Array.prototype.push.apply(se,f(ge))})});var ce={};ce[te.dimensionInd]=te.categoryValue,ie.emit($,{points:se,event:J,constraints:ce})}function E(ee,$,J){var K=M.select(ee).datum(),te=K.categoryViewModel.model,ie=K.parcatsViewModel.graphDiv,ae=T(K),se=[];ae.each(function(de){Array.prototype.push.apply(se,f(de))});var ce={};ce[te.dimensionInd]=te.categoryValue,K.rawColor!==void 0&&(ce.color=K.rawColor),ie.emit($,{points:se,event:J,constraints:ce})}function k(ee,$,J){ee._fullLayout._calcInverseTransform(ee);var K,te,ie=ee._fullLayout._invScaleX,ae=ee._fullLayout._invScaleY,se=M.select(J.parentNode).select("rect.catrect"),ce=se.node().getBoundingClientRect(),de=se.datum(),ge=de.parcatsViewModel,ve=ge.model.dimensions[de.model.dimensionInd],be=ge.trace,me=ce.top+ce.height/2;ge.dimensions.length>1&&ve.displayInd===ge.dimensions.length-1?(K=ce.left,te="left"):(K=ce.left+ce.width,te="right");var Se=de.model.count,we=de.model.categoryLabel,_e=Se/de.parcatsViewModel.model.count,oe={countLabel:Se,categoryLabel:we,probabilityLabel:_e.toFixed(3)},le=[];de.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&le.push(["Count:",oe.countLabel].join(" ")),de.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&le.push(["P("+oe.categoryLabel+"):",oe.probabilityLabel].join(" "));var pe=le.join("<br>");return{trace:be,x:ie*(K-$.left),y:ae*(me-$.top),text:pe,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:te,hovertemplate:be.hovertemplate,hovertemplateLabels:oe,eventData:[{data:be._input,fullData:be,count:Se,category:we,probability:_e}]}}function L(ee){if(!ee.parcatsViewModel.dragDimension&&ee.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){if(M.mouse(this)[1]<-1)return;var $,J=ee.parcatsViewModel.graphDiv,K=J._fullLayout,te=K._paperdiv.node().getBoundingClientRect(),ie=ee.parcatsViewModel.hoveron,ae=this;ie==="color"?(function(se){var ce=M.select(se).datum(),de=T(ce);m(de),de.each(function(){_.raiseToTop(this)}),M.select(se.parentNode).selectAll("rect.bandrect").filter(function(ge){return ge.color===ce.color}).each(function(){_.raiseToTop(this),M.select(this).attr("stroke","black").attr("stroke-width",1.5)})}(ae),E(ae,"plotly_hover",M.event)):(function(se){M.select(se.parentNode).selectAll("rect.bandrect").each(function(ce){var de=T(ce);m(de),de.each(function(){_.raiseToTop(this)})}),M.select(se.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(ae),h(ae,"plotly_hover",M.event)),ee.parcatsViewModel.hoverinfoItems.indexOf("none")===-1&&(ie==="category"?$=k(J,te,ae):ie==="color"?$=function(se,ce,de){se._fullLayout._calcInverseTransform(se);var ge,ve,be=se._fullLayout._invScaleX,me=se._fullLayout._invScaleY,Se=de.getBoundingClientRect(),we=M.select(de).datum(),_e=we.categoryViewModel,oe=_e.parcatsViewModel,le=oe.model.dimensions[_e.model.dimensionInd],pe=oe.trace,Ee=Se.y+Se.height/2;oe.dimensions.length>1&&le.displayInd===oe.dimensions.length-1?(ge=Se.left,ve="left"):(ge=Se.left+Se.width,ve="right");var Te=_e.model.categoryLabel,Me=we.parcatsViewModel.model.count,Le=0;we.categoryViewModel.bands.forEach(function(Je){Je.color===we.color&&(Le+=Je.count)});var Ie=_e.model.count,he=0;oe.pathSelection.each(function(Je){Je.model.color===we.color&&(he+=Je.model.count)});var xe=Le/Me,ke=Le/he,ze=Le/Ie,Re={countLabel:Me,categoryLabel:Te,probabilityLabel:xe.toFixed(3)},Oe=[];_e.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Oe.push(["Count:",Re.countLabel].join(" ")),_e.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Oe.push("P(color  "+Te+"): "+Re.probabilityLabel),Oe.push("P("+Te+" | color): "+ke.toFixed(3)),Oe.push("P(color | "+Te+"): "+ze.toFixed(3)));var Ve=Oe.join("<br>"),qe=n.mostReadable(we.color,["black","white"]);return{trace:pe,x:be*(ge-ce.left),y:me*(Ee-ce.top),text:Ve,color:we.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:qe,fontSize:10,idealAlign:ve,hovertemplate:pe.hovertemplate,hovertemplateLabels:Re,eventData:[{data:pe._input,fullData:pe,category:Te,count:Me,probability:xe,categorycount:Ie,colorcount:he,bandcolorcount:Le}]}}(J,te,ae):ie==="dimension"&&($=function(se,ce,de){var ge=[];return M.select(de.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){ge.push(k(se,ce,this))}),ge}(J,te,ae)),$&&w.loneHover($,{container:K._hoverlayer.node(),outerContainer:K._paper.node(),gd:J}))}}function P(ee){var $=ee.parcatsViewModel;$.dragDimension||(d($.pathSelection),x($.dimensionSelection.selectAll("g.category")),y($.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),w.loneUnhover($.graphDiv._fullLayout._hoverlayer.node()),$.pathSelection.sort(u),$.hoverinfoItems.indexOf("skip")!==-1)||(ee.parcatsViewModel.hoveron==="color"?E(this,"plotly_unhover",M.event):h(this,"plotly_unhover",M.event))}function I(ee){ee.parcatsViewModel.arrangement!=="fixed"&&(ee.dragDimensionDisplayInd=ee.model.displayInd,ee.initialDragDimensionDisplayInds=ee.parcatsViewModel.model.dimensions.map(function($){return $.displayInd}),ee.dragHasMoved=!1,ee.dragCategoryDisplayInd=null,M.select(this).selectAll("g.category").select("rect.catrect").each(function($){var J=M.mouse(this)[0],K=M.mouse(this)[1];-2<=J&&J<=$.width+2&&-2<=K&&K<=$.height+2&&(ee.dragCategoryDisplayInd=$.model.displayInd,ee.initialDragCategoryDisplayInds=ee.model.categories.map(function(te){return te.displayInd}),$.model.dragY=$.y,_.raiseToTop(this.parentNode),M.select(this.parentNode).selectAll("rect.bandrect").each(function(te){te.y<K&&K<=te.y+te.height&&(ee.potentialClickBand=this)}))}),ee.parcatsViewModel.dragDimension=ee,w.loneUnhover(ee.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function z(ee){if(ee.parcatsViewModel.arrangement!=="fixed"&&(ee.dragHasMoved=!0,ee.dragDimensionDisplayInd!==null)){var $=ee.dragDimensionDisplayInd,J=$-1,K=$+1,te=ee.parcatsViewModel.dimensions[$];if(ee.dragCategoryDisplayInd!==null){var ie=te.categories[ee.dragCategoryDisplayInd];ie.model.dragY+=M.event.dy;var ae=ie.model.dragY,se=ie.model.displayInd,ce=te.categories,de=ce[se-1],ge=ce[se+1];de!==void 0&&ae<de.y+de.height/2&&(ie.model.displayInd=de.model.displayInd,de.model.displayInd=se),ge!==void 0&&ae+ie.height>ge.y+ge.height/2&&(ie.model.displayInd=ge.model.displayInd,ge.model.displayInd=se),ee.dragCategoryDisplayInd=ie.model.displayInd}if(ee.dragCategoryDisplayInd===null||ee.parcatsViewModel.arrangement==="freeform"){te.model.dragX=M.event.x;var ve=ee.parcatsViewModel.dimensions[J],be=ee.parcatsViewModel.dimensions[K];ve!==void 0&&te.model.dragX<ve.x+ve.width&&(te.model.displayInd=ve.model.displayInd,ve.model.displayInd=$),be!==void 0&&te.model.dragX+te.width>be.x&&(te.model.displayInd=be.model.displayInd,be.model.displayInd=ee.dragDimensionDisplayInd),ee.dragDimensionDisplayInd=te.model.displayInd}V(ee.parcatsViewModel),q(ee.parcatsViewModel),j(ee.parcatsViewModel),R(ee.parcatsViewModel)}}function F(ee){if(ee.parcatsViewModel.arrangement!=="fixed"&&ee.dragDimensionDisplayInd!==null){M.select(this).selectAll("text").attr("font-weight","normal");var $={},J=U(ee.parcatsViewModel),K=ee.parcatsViewModel.model.dimensions.map(function(ge){return ge.displayInd}),te=ee.initialDragDimensionDisplayInds.some(function(ge,ve){return ge!==K[ve]});te&&K.forEach(function(ge,ve){var be=ee.parcatsViewModel.model.dimensions[ve].containerInd;$["dimensions["+be+"].displayindex"]=ge});var ie=!1;if(ee.dragCategoryDisplayInd!==null){var ae=ee.model.categories.map(function(ge){return ge.displayInd});if(ie=ee.initialDragCategoryDisplayInds.some(function(ge,ve){return ge!==ae[ve]})){var se=ee.model.categories.slice().sort(function(ge,ve){return ge.displayInd-ve.displayInd}),ce=se.map(function(ge){return ge.categoryValue}),de=se.map(function(ge){return ge.categoryLabel});$["dimensions["+ee.model.containerInd+"].categoryarray"]=[ce],$["dimensions["+ee.model.containerInd+"].ticktext"]=[de],$["dimensions["+ee.model.containerInd+"].categoryorder"]="array"}}ee.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!ee.dragHasMoved&&ee.potentialClickBand&&(ee.parcatsViewModel.hoveron==="color"?E(ee.potentialClickBand,"plotly_click",M.event.sourceEvent):h(ee.potentialClickBand,"plotly_click",M.event.sourceEvent)),ee.model.dragX=null,ee.dragCategoryDisplayInd!==null&&(ee.parcatsViewModel.dimensions[ee.dragDimensionDisplayInd].categories[ee.dragCategoryDisplayInd].model.dragY=null,ee.dragCategoryDisplayInd=null),ee.dragDimensionDisplayInd=null,ee.parcatsViewModel.dragDimension=null,ee.dragHasMoved=null,ee.potentialClickBand=null,V(ee.parcatsViewModel),q(ee.parcatsViewModel),M.transition().duration(300).ease("cubic-in-out").each(function(){j(ee.parcatsViewModel,!0),R(ee.parcatsViewModel,!0)}).each("end",function(){(te||ie)&&o.restyle(ee.parcatsViewModel.graphDiv,$,[J])})}}function U(ee){for(var $,J=ee.graphDiv._fullData,K=0;K<J.length;K++)if(ee.key===J[K].uid){$=K;break}return $}function R(ee,$){var J;$===void 0&&($=!1),ee.pathSelection.data(function(K){return K.paths},i),(J=ee.pathSelection,$?J.transition():J).attr("d",function(K){return K.svgD})}function j(ee,$){function J(ae){return $?ae.transition():ae}$===void 0&&($=!1),ee.dimensionSelection.data(function(ae){return ae.dimensions},i);var K=ee.dimensionSelection.selectAll("g.category").data(function(ae){return ae.categories},i);J(ee.dimensionSelection).attr("transform",function(ae){return p(ae.x,0)}),J(K).attr("transform",function(ae){return p(0,ae.y)}),K.select(".dimlabel").text(function(ae,se){return se===0?ae.parcatsViewModel.model.dimensions[ae.model.dimensionInd].dimensionLabel:null}),K.select(".catlabel").attr("text-anchor",function(ae){return l(ae)?"start":"end"}).attr("x",function(ae){return l(ae)?ae.width+5:-5}).each(function(ae){var se,ce;l(ae)?(se=ae.width+5,ce="start"):(se=-5,ce="end"),M.select(this).selectAll("tspan").attr("x",se).attr("text-anchor",ce)});var te=K.selectAll("rect.bandrect").data(function(ae){return ae.bands},i),ie=te.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(ae){return ae.color}).attr("fill-opacity",0);te.attr("fill",function(ae){return ae.color}).attr("width",function(ae){return ae.width}).attr("height",function(ae){return ae.height}).attr("y",function(ae){return ae.y}),y(ie),te.each(function(){_.raiseToTop(this)}),te.exit().remove()}function Z(ee,$,J){var K,te=J[0],ie=$.margin||{l:80,r:80,t:100,b:80},ae=te.trace,se=ae.domain,ce=$.width,de=$.height,ge=Math.floor(ce*(se.x[1]-se.x[0])),ve=Math.floor(de*(se.y[1]-se.y[0])),be=se.x[0]*ce+ie.l,me=$.height-se.y[1]*$.height+ie.t,Se=ae.line.shape;K=ae.hoverinfo==="all"?["count","probability"]:(ae.hoverinfo||"").split("+");var we={trace:ae,key:ae.uid,model:te,x:be,y:me,width:ge,height:ve,hoveron:ae.hoveron,hoverinfoItems:K,arrangement:ae.arrangement,bundlecolors:ae.bundlecolors,sortpaths:ae.sortpaths,labelfont:ae.labelfont,categorylabelfont:ae.tickfont,pathShape:Se,dragDimension:null,margin:ie,paths:[],dimensions:[],graphDiv:ee,traceSelection:null,pathSelection:null,dimensionSelection:null};return te.dimensions&&(V(we),q(we)),we}function B(ee,$,J,K,te){var ie,ae,se=[],ce=[];for(ae=0;ae<J.length-1;ae++)ie=A(J[ae]+ee[ae],ee[ae+1]),se.push(ie(te)),ce.push(ie(1-te));var de="M "+ee[0]+","+$[0];for(de+="l"+J[0]+",0 ",ae=1;ae<J.length;ae++)de+="C"+se[ae-1]+","+$[ae-1]+" "+ce[ae-1]+","+$[ae]+" "+ee[ae]+","+$[ae],de+="l"+J[ae]+",0 ";for(de+="l0,"+K+" ",de+="l -"+J[J.length-1]+",0 ",ae=J.length-2;ae>=0;ae--)de+="C"+ce[ae]+","+($[ae+1]+K)+" "+se[ae]+","+($[ae]+K)+" "+(ee[ae]+J[ae])+","+($[ae]+K),de+="l-"+J[ae]+",0 ";return de+"Z"}function q(ee){var $=ee.dimensions,J=ee.model,K=$.map(function(Re){return Re.categories.map(function(Oe){return Oe.y})}),te=ee.model.dimensions.map(function(Re){return Re.categories.map(function(Oe){return Oe.displayInd})}),ie=ee.model.dimensions.map(function(Re){return Re.displayInd}),ae=ee.dimensions.map(function(Re){return Re.model.dimensionInd}),se=$.map(function(Re){return Re.x}),ce=$.map(function(Re){return Re.width}),de=[];for(var ge in J.paths)J.paths.hasOwnProperty(ge)&&de.push(J.paths[ge]);function ve(Re){var Oe=Re.categoryInds.map(function(Ve,qe){return te[qe][Ve]});return ae.map(function(Ve){return Oe[Ve]})}de.sort(function(Re,Oe){var Ve=ve(Re),qe=ve(Oe);return ee.sortpaths==="backward"&&(Ve.reverse(),qe.reverse()),Ve.push(Re.valueInds[0]),qe.push(Oe.valueInds[0]),ee.bundlecolors&&(Ve.unshift(Re.rawColor),qe.unshift(Oe.rawColor)),Ve<qe?-1:Ve>qe?1:0});for(var be=new Array(de.length),me=$[0].model.count,Se=$[0].categories.map(function(Re){return Re.height}).reduce(function(Re,Oe){return Re+Oe}),we=0;we<de.length;we++){var _e,oe=de[we];_e=me>0?Se*(oe.count/me):0;for(var le,pe=new Array(K.length),Ee=0;Ee<oe.categoryInds.length;Ee++){var Te=oe.categoryInds[Ee],Me=te[Ee][Te],Le=ie[Ee];pe[Le]=K[Le][Me],K[Le][Me]+=_e;var Ie=ee.dimensions[Le].categories[Me],he=Ie.bands.length,xe=Ie.bands[he-1];if(xe===void 0||oe.rawColor!==xe.rawColor){var ke=xe===void 0?0:xe.y+xe.height;Ie.bands.push({key:ke,color:oe.color,rawColor:oe.rawColor,height:_e,width:Ie.width,count:oe.count,y:ke,categoryViewModel:Ie,parcatsViewModel:ee})}else{var ze=Ie.bands[he-1];ze.height+=_e,ze.count+=oe.count}}le=ee.pathShape==="hspline"?B(se,pe,ce,_e,.5):B(se,pe,ce,_e,0),be[we]={key:oe.valueInds[0],model:oe,height:_e,leftXs:se,topYs:pe,dimWidths:ce,svgD:le,parcatsViewModel:ee}}ee.paths=be}function V(ee){var $=ee.model.dimensions.map(function(ae){return{displayInd:ae.displayInd,dimensionInd:ae.dimensionInd}});$.sort(function(ae,se){return ae.displayInd-se.displayInd});var J=[];for(var K in $){var te=$[K].dimensionInd,ie=ee.model.dimensions[te];J.push(ne(ee,ie))}ee.dimensions=J}function ne(ee,$){var J,K=ee.model.dimensions.length,te=$.displayInd;J=40+(K>1?(ee.width-80-16)/(K-1):0)*te;var ie,ae,se,ce,de,ge=[],ve=ee.model.maxCats,be=$.categories.length,me=$.count,Se=ee.height-8*(ve-1),we=8*(ve-be)/2,_e=$.categories.map(function(oe){return{displayInd:oe.displayInd,categoryInd:oe.categoryInd}});for(_e.sort(function(oe,le){return oe.displayInd-le.displayInd}),de=0;de<be;de++)ce=_e[de].categoryInd,ae=$.categories[ce],ie=me>0?ae.count/me*Se:0,se={key:ae.valueInds[0],model:ae,width:16,height:ie,y:ae.dragY!==null?ae.dragY:we,bands:[],parcatsViewModel:ee},we=we+ie+8,ge.push(se);return{key:$.dimensionInd,x:$.dragX!==null?$.dragX:J,y:0,width:16,model:$,categories:ge,parcatsViewModel:ee,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}Y.exports=function(ee,$,J,K){r(J,ee,K,$)}},60268:function(Y,O,e){var M=e(51036);Y.exports=function(A,o,w,_){var p=A._fullLayout,s=p._paper,n=p._size;M(A,s,o,{width:n.w,height:n.h,margin:{t:n.t,r:n.r,b:n.b,l:n.l}},w,_)}},82296:function(Y,O,e){var M=e(49084),A=e(94724),o=e(25376),w=e(86968).u,_=e(92880).extendFlat,p=e(31780).templatedArray;Y.exports={domain:w({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:o({editType:"plot"}),tickfont:o({editType:"plot"}),rangefont:o({editType:"plot"}),dimensions:p("dimension",{label:{valType:"string",editType:"plot"},tickvals:_({},A.tickvals,{editType:"plot"}),ticktext:_({},A.ticktext,{editType:"plot"}),tickformat:_({},A.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:_({editType:"calc"},M("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},71864:function(Y,O,e){var M=e(30140),A=e(33428),o=e(71688).keyFun,w=e(71688).repeat,_=e(3400).sorterAsc,p=e(3400).strTranslate,s=M.bar.snapRatio;function n(k,L){return k*(1-s)+L*s}var a=M.bar.snapClose;function r(k,L){return k*(1-a)+L*a}function i(k,L,P,I){if(function(ne,ee){for(var $=0;$<ee.length;$++)if(ne>=ee[$][0]&&ne<=ee[$][1])return!0;return!1}(P,I))return P;var z=k?-1:1,F=0,U=L.length-1;if(z<0){var R=F;F=U,U=R}for(var j=L[F],Z=j,B=F;z*B<z*U;B+=z){var q=B+z,V=L[q];if(z*P<z*r(j,V))return n(j,Z);if(z*P<z*V||q===U)return n(V,j);Z=j,j=V}}function l(k){k.attr("x",-M.bar.captureWidth/2).attr("width",M.bar.captureWidth)}function u(k){k.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function c(k){if(!k.brush.filterSpecified)return"0,"+k.height;for(var L,P,I,z=g(k.brush.filter.getConsolidated(),k.height),F=[0],U=z.length?z[0][0]:null,R=0;R<z.length;R++)P=(L=z[R])[1]-L[0],F.push(U),F.push(P),(I=R+1)<z.length&&(U=z[I][0]-L[1]);return F.push(k.height),F}function g(k,L){return k.map(function(P){return P.map(function(I){return Math.max(0,I*L)}).sort(_)})}function f(){A.select(document.body).style("cursor",null)}function b(k){k.attr("stroke-dasharray",c)}function v(k,L){var P=A.select(k).selectAll(".highlight, .highlight-shadow");b(L?P.transition().duration(M.bar.snapDuration).each("end",L):P)}function d(k,L){var P,I=k.brush,z=NaN,F={};if(I.filterSpecified){var U=k.height,R=I.filter.getConsolidated(),j=g(R,U),Z=NaN,B=NaN,q=NaN;for(P=0;P<=j.length;P++){var V=j[P];if(V&&V[0]<=L&&L<=V[1]){Z=P;break}if(B=P?P-1:NaN,V&&V[0]>L){q=P;break}}if(z=Z,isNaN(z)&&(z=isNaN(B)||isNaN(q)?isNaN(B)?q:B:L-j[B][1]<j[q][0]-L?B:q),!isNaN(z)){var ne=j[z],ee=function(te,ie){var ae=M.bar.handleHeight;if(!(ie>te[1]+ae||ie<te[0]-ae))return ie>=.9*te[1]+.1*te[0]?"n":ie<=.9*te[0]+.1*te[1]?"s":"ns"}(ne,L);ee&&(F.interval=R[z],F.intervalPix=ne,F.region=ee)}}if(k.ordinal&&!F.region){var $=k.unitTickvals,J=k.unitToPaddedPx.invert(L);for(P=0;P<$.length;P++){var K=[.25*$[Math.max(P-1,0)]+.75*$[P],.25*$[Math.min(P+1,$.length-1)]+.75*$[P]];if(J>=K[0]&&J<=K[1]){F.clickableOrdinalRange=K;break}}}return F}function m(k,L){A.event.sourceEvent.stopPropagation();var P=L.height-A.mouse(k)[1]-2*M.verticalPadding,I=L.brush.svgBrush;I.wasDragged=!0,I._dragging=!0,I.grabbingBar?I.newExtent=[P-I.grabPoint,P+I.barLength-I.grabPoint].map(L.unitToPaddedPx.invert):I.newExtent=[I.startExtent,L.unitToPaddedPx.invert(P)].sort(_),L.brush.filterSpecified=!0,I.extent=I.stayingIntervals.concat([I.newExtent]),I.brushCallback(L),v(k.parentNode)}function x(k,L){var P=d(L,L.height-A.mouse(k)[1]-2*M.verticalPadding),I="crosshair";P.clickableOrdinalRange?I="pointer":P.region&&(I=P.region+"-resize"),A.select(document.body).style("cursor",I)}function y(k){k.on("mousemove",function(L){A.event.preventDefault(),L.parent.inBrushDrag||x(this,L)}).on("mouseleave",function(L){L.parent.inBrushDrag||f()}).call(A.behavior.drag().on("dragstart",function(L){(function(P,I){A.event.sourceEvent.stopPropagation();var z=I.height-A.mouse(P)[1]-2*M.verticalPadding,F=I.unitToPaddedPx.invert(z),U=I.brush,R=d(I,z),j=R.interval,Z=U.svgBrush;if(Z.wasDragged=!1,Z.grabbingBar=R.region==="ns",Z.grabbingBar){var B=j.map(I.unitToPaddedPx);Z.grabPoint=z-B[0]-M.verticalPadding,Z.barLength=B[1]-B[0]}Z.clickableOrdinalRange=R.clickableOrdinalRange,Z.stayingIntervals=I.multiselect&&U.filterSpecified?U.filter.getConsolidated():[],j&&(Z.stayingIntervals=Z.stayingIntervals.filter(function(q){return q[0]!==j[0]&&q[1]!==j[1]})),Z.startExtent=R.region?j[R.region==="s"?1:0]:F,I.parent.inBrushDrag=!0,Z.brushStartCallback()})(this,L)}).on("drag",function(L){m(this,L)}).on("dragend",function(L){(function(P,I){var z=I.brush,F=z.filter,U=z.svgBrush;U._dragging||(x(P,I),m(P,I),I.brush.svgBrush.wasDragged=!1),U._dragging=!1,A.event.sourceEvent.stopPropagation();var R=U.grabbingBar;if(U.grabbingBar=!1,U.grabLocation=void 0,I.parent.inBrushDrag=!1,f(),!U.wasDragged)return U.wasDragged=void 0,U.clickableOrdinalRange?z.filterSpecified&&I.multiselect?U.extent.push(U.clickableOrdinalRange):(U.extent=[U.clickableOrdinalRange],z.filterSpecified=!0):R?(U.extent=U.stayingIntervals,U.extent.length===0&&h(z)):h(z),U.brushCallback(I),v(P.parentNode),void U.brushEndCallback(z.filterSpecified?F.getConsolidated():[]);var j=function(){F.set(F.getConsolidated())};if(I.ordinal){var Z=I.unitTickvals;Z[Z.length-1]<Z[0]&&Z.reverse(),U.newExtent=[i(0,Z,U.newExtent[0],U.stayingIntervals),i(1,Z,U.newExtent[1],U.stayingIntervals)];var B=U.newExtent[1]>U.newExtent[0];U.extent=U.stayingIntervals.concat(B?[U.newExtent]:[]),U.extent.length||h(z),U.brushCallback(I),B?v(P.parentNode,j):(j(),v(P.parentNode))}else j();U.brushEndCallback(z.filterSpecified?F.getConsolidated():[])})(this,L)}))}function T(k,L){return k[0]-L[0]}function h(k){k.filterSpecified=!1,k.svgBrush.extent=[[-1/0,1/0]]}function E(k){for(var L,P=k.slice(),I=[],z=P.shift();z;){for(L=z.slice();(z=P.shift())&&z[0]<=L[1];)L[1]=Math.max(L[1],z[1]);I.push(L)}return I.length===1&&I[0][0]>I[0][1]&&(I=[]),I}Y.exports={makeBrush:function(k,L,P,I,z,F){var U,R=function(){var j,Z,B=[];return{set:function(q){(B=q.map(function(V){return V.slice().sort(_)}).sort(T)).length===1&&B[0][0]===-1/0&&B[0][1]===1/0&&(B=[[0,-1]]),j=E(B),Z=B.reduce(function(V,ne){return[Math.min(V[0],ne[0]),Math.max(V[1],ne[1])]},[1/0,-1/0])},get:function(){return B.slice()},getConsolidated:function(){return j},getBounds:function(){return Z}}}();return R.set(P),{filter:R,filterSpecified:L,svgBrush:{extent:[],brushStartCallback:I,brushCallback:(U=z,function(j){var Z=j.brush,B=function(V){return V.svgBrush.extent.map(function(ne){return ne.slice()})}(Z),q=B.slice();Z.filter.set(q),U()}),brushEndCallback:F}}},ensureAxisBrush:function(k,L,P){var I=k.selectAll("."+M.cn.axisBrush).data(w,o);I.enter().append("g").classed(M.cn.axisBrush,!0),function(z,F,U){var R=U._context.staticPlot,j=z.selectAll(".background").data(w);j.enter().append("rect").classed("background",!0).call(l).call(u).style("pointer-events",R?"none":"auto").attr("transform",p(0,M.verticalPadding)),j.call(y).attr("height",function(q){return q.height-M.verticalPadding});var Z=z.selectAll(".highlight-shadow").data(w);Z.enter().append("line").classed("highlight-shadow",!0).attr("x",-M.bar.width/2).attr("stroke-width",M.bar.width+M.bar.strokeWidth).attr("stroke",F).attr("opacity",M.bar.strokeOpacity).attr("stroke-linecap","butt"),Z.attr("y1",function(q){return q.height}).call(b);var B=z.selectAll(".highlight").data(w);B.enter().append("line").classed("highlight",!0).attr("x",-M.bar.width/2).attr("stroke-width",M.bar.width-M.bar.strokeWidth).attr("stroke",M.bar.fillColor).attr("opacity",M.bar.fillOpacity).attr("stroke-linecap","butt"),B.attr("y1",function(q){return q.height}).call(b)}(I,L,P)},cleanRanges:function(k,L){if(Array.isArray(k[0])?(k=k.map(function(I){return I.sort(_)}),k=L.multiselect?E(k.sort(T)):[k[0]]):k=[k.sort(_)],L.tickvals){var P=L.tickvals.slice().sort(_);if(!(k=k.map(function(I){var z=[i(0,P,I[0],[]),i(1,P,I[1],[])];if(z[1]>z[0])return z}).filter(function(I){return I})).length)return}return k.length>1?k:k[0]}}},61664:function(Y,O,e){Y.exports={attributes:e(82296),supplyDefaults:e(60664),calc:e(95044),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e(19976),categories:["gl","regl","noOpacity","noHover"],meta:{}}},19976:function(Y,O,e){var M=e(33428),A=e(84888)._M,o=e(24196),w=e(9616);O.name="parcoords",O.plot=function(_){var p=A(_.calcdata,"parcoords")[0];p.length&&o(_,p)},O.clean=function(_,p,s,n){var a=n._has&&n._has("parcoords"),r=p._has&&p._has("parcoords");a&&!r&&(n._paperdiv.selectAll(".parcoords").remove(),n._glimages.selectAll("*").remove())},O.toSVG=function(_){var p=_._fullLayout._glimages,s=M.select(_).selectAll(".svg-container");s.filter(function(n,a){return a===s.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var n=this,a=n.toDataURL("image/png");p.append("svg:image").attr({xmlns:w.svg,"xlink:href":a,preserveAspectRatio:"none",x:0,y:0,width:n.style.width,height:n.style.height})}),window.setTimeout(function(){M.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},95044:function(Y,O,e){var M=e(3400).isArrayOrTypedArray,A=e(8932),o=e(71688).wrap;Y.exports=function(w,_){var p,s;return A.hasColorscale(_,"line")&&M(_.line.color)?(p=_.line.color,s=A.extractOpts(_.line).colorscale,A.calc(w,_,{vals:p,containerStr:"line",cLetter:"c"})):(p=function(n){for(var a=new Array(n),r=0;r<n;r++)a[r]=.5;return a}(_._length),s=[[0,_.line.color],[1,_.line.color]]),o({lineColor:p,cscale:s})}},30140:function(Y){Y.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},60664:function(Y,O,e){var M=e(3400),A=e(94288).hasColorscale,o=e(27260),w=e(86968).Q,_=e(51272),p=e(54460),s=e(82296),n=e(71864),a=e(30140).maxDimensionCount,r=e(26284);function i(l,u,c,g){function f(x,y){return M.coerce(l,u,s.dimensions,x,y)}var b=f("values"),v=f("visible");if(b&&b.length||(v=u.visible=!1),v){f("label"),f("tickvals"),f("ticktext"),f("tickformat");var d=f("range");u._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:d},p.setConvert(u._ax,g.layout),f("multiselect");var m=f("constraintrange");m&&(u.constraintrange=n.cleanRanges(m,u))}}Y.exports=function(l,u,c,g){function f(x,y){return M.coerce(l,u,s,x,y)}var b=l.dimensions;Array.isArray(b)&&b.length>a&&(M.log("parcoords traces support up to "+a+" dimensions at the moment"),b.splice(a));var v=_(l,u,{name:"dimensions",layout:g,handleItemDefaults:i}),d=function(x,y,T,h,E){var k=E("line.color",T);if(A(x,"line")&&M.isArrayOrTypedArray(k)){if(k.length)return E("line.colorscale"),o(x,y,h,E,{prefix:"line.",cLetter:"c"}),k.length;y.line.color=T}return 1/0}(l,u,c,g,f);w(u,g,f),Array.isArray(v)&&v.length||(u.visible=!1),r(u,v,"values",d);var m={family:g.font.family,size:Math.round(g.font.size/1.2),color:g.font.color};M.coerceFont(f,"labelfont",m),M.coerceFont(f,"tickfont",m),M.coerceFont(f,"rangefont",m),f("labelangle"),f("labelside"),f("unselected.line.color"),f("unselected.line.opacity")}},95724:function(Y,O,e){var M=e(3400).isTypedArray;O.convertTypedArray=function(A){return M(A)?Array.prototype.slice.call(A):A},O.isOrdinal=function(A){return!!A.tickvals},O.isVisible=function(A){return A.visible||!("visible"in A)}},29928:function(Y,O,e){var M=e(61664);M.plot=e(24196),Y.exports=M},51352:function(Y,O,e){var M=e(26444),A=M([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),o=M([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),w=e(30140).maxDimensionCount,_=e(3400),p=1e-6,s=new Uint8Array(4),n=new Uint8Array(4),a={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function r(d,m,x,y,T){var h=d._gl;h.enable(h.SCISSOR_TEST),h.scissor(m,x,y,T),d.clear({color:[0,0,0,0],depth:1})}function i(d,m,x,y,T,h){var E=h.key;x.drawCompleted||(function(k){k.read({x:0,y:0,width:1,height:1,data:s})}(d),x.drawCompleted=!0),function k(L){var P=Math.min(y,T-L*y);L===0&&(window.cancelAnimationFrame(x.currentRafs[E]),delete x.currentRafs[E],r(d,h.scissorX,h.scissorY,h.scissorWidth,h.viewBoxSize[1])),x.clearOnly||(h.count=2*P,h.offset=2*L*y,m(h),L*y+P<T&&(x.currentRafs[E]=window.requestAnimationFrame(function(){k(L+1)})),x.drawCompleted=!1)}(0)}function l(d,m){for(var x=new Array(256),y=0;y<256;y++)x[y]=d(y/255).concat(m);return x}function u(d,m){return(d>>>8*m)%256/255}function c(d,m,x){for(var y=new Array(8*m),T=0,h=0;h<m;h++)for(var E=0;E<2;E++)for(var k=0;k<4;k++){var L=4*d+k,P=x[64*h+L];L===63&&E===0&&(P*=-1),y[T++]=P}return y}function g(d){var m="0"+d;return m.substr(m.length-2)}function f(d){return d<w?"p"+g(d+1)+"_"+g(d+4):"colors"}function b(d,m,x,y,T,h,E,k,L,P,I,z,F,U){for(var R=[[],[]],j=0;j<64;j++)R[0][j]=j===T?1:0,R[1][j]=j===h?1:0;E*=U,k*=U,L*=U,P*=U;var Z=d.lines.canvasOverdrag*U,B=d.domain,q=d.canvasWidth*U,V=d.canvasHeight*U,ne=d.pad.l*U,ee=d.pad.b*U,$=d.layoutHeight*U,J=d.layoutWidth*U,K=d.deselectedLines.color,te=d.deselectedLines.opacity;return _.extendFlat({key:I,resolution:[q,V],viewBoxPos:[E+Z,k],viewBoxSize:[L,P],i0:T,i1:h,dim0A:R[0].slice(0,16),dim0B:R[0].slice(16,32),dim0C:R[0].slice(32,48),dim0D:R[0].slice(48,64),dim1A:R[1].slice(0,16),dim1B:R[1].slice(16,32),dim1C:R[1].slice(32,48),dim1D:R[1].slice(48,64),drwLayer:z,contextColor:[K[0]/255,K[1]/255,K[2]/255,te!=="auto"?K[3]*te:Math.max(.00392156862745098,Math.pow(1/d.lines.color.length,.3333333333333333))],scissorX:(y===m?0:E+Z)+(ne-Z)+J*B.x[0],scissorWidth:(y===x?q-E+Z:L+.5)+(y===m?E+Z:0),scissorY:k+ee+$*B.y[0],scissorHeight:P,viewportX:ne-Z+J*B.x[0],viewportY:ee+$*B.y[0],viewportWidth:q,viewportHeight:V},F)}function v(d){var m=2047,x=Math.max(0,Math.floor(d[0]*m),0),y=Math.min(m,Math.ceil(d[1]*m),m);return[Math.min(x,y),Math.max(x,y)]}Y.exports=function(d,m){var x,y,T,h,E,k=m.context,L=m.pick,P=m.regl,I=P._gl,z=I.getParameter(I.ALIASED_LINE_WIDTH_RANGE),F=Math.max(z[0],Math.min(z[1],m.viewModel.plotGlPixelRatio)),U={currentRafs:{},drawCompleted:!0,clearOnly:!1},R=function(V){for(var ne={},ee=0;ee<=w;ee+=4)ne[f(ee)]=V.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return ne}(P),j=P.texture(a),Z=[];q(m);var B=P({profile:!1,blend:{enable:k,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!k,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:P.prop("scissorX"),y:P.prop("scissorY"),width:P.prop("scissorWidth"),height:P.prop("scissorHeight")}},viewport:{x:P.prop("viewportX"),y:P.prop("viewportY"),width:P.prop("viewportWidth"),height:P.prop("viewportHeight")},dither:!1,vert:A,frag:o,primitive:"lines",lineWidth:F,attributes:R,uniforms:{resolution:P.prop("resolution"),viewBoxPos:P.prop("viewBoxPos"),viewBoxSize:P.prop("viewBoxSize"),dim0A:P.prop("dim0A"),dim1A:P.prop("dim1A"),dim0B:P.prop("dim0B"),dim1B:P.prop("dim1B"),dim0C:P.prop("dim0C"),dim1C:P.prop("dim1C"),dim0D:P.prop("dim0D"),dim1D:P.prop("dim1D"),loA:P.prop("loA"),hiA:P.prop("hiA"),loB:P.prop("loB"),hiB:P.prop("hiB"),loC:P.prop("loC"),hiC:P.prop("hiC"),loD:P.prop("loD"),hiD:P.prop("hiD"),palette:j,contextColor:P.prop("contextColor"),maskTexture:P.prop("maskTexture"),drwLayer:P.prop("drwLayer"),maskHeight:P.prop("maskHeight")},offset:P.prop("offset"),count:P.prop("count")});function q(V){x=V.model,y=V.viewModel,T=y.dimensions.slice(),h=T[0]?T[0].values.length:0;var ne=x.lines,ee=L?ne.color.map(function(J,K){return K/ne.color.length}):ne.color,$=function(J,K,te){for(var ie,ae=new Array(J*(w+4)),se=0,ce=0;ce<J;ce++){for(var de=0;de<w;de++)ae[se++]=de<K.length?K[de].paddedUnitValues[ce]:.5;ae[se++]=u(ce,2),ae[se++]=u(ce,1),ae[se++]=u(ce,0),ae[se++]=(ie=te[ce],Math.max(p,Math.min(.999999,ie)))}return ae}(h,T,ee);(function(J,K,te){for(var ie=0;ie<=w;ie+=4)J[f(ie)](c(ie/4,K,te))})(R,h,$),k||L||(j=P.texture(_.extendFlat({data:l(x.unitToColor,255)},a)))}return{render:function(V,ne,ee){var $,J,K,te=V.length,ie=1/0,ae=-1/0;for($=0;$<te;$++)V[$].dim0.canvasX<ie&&(ie=V[$].dim0.canvasX,J=$),V[$].dim1.canvasX>ae&&(ae=V[$].dim1.canvasX,K=$);te===0&&r(P,0,0,x.canvasWidth,x.canvasHeight);var se=function(oe){var le,pe,Ee,Te=[[],[]];for(Ee=0;Ee<64;Ee++){var Me=!oe&&Ee<T.length?T[Ee].brush.filter.getBounds():[-1/0,1/0];Te[0][Ee]=Me[0],Te[1][Ee]=Me[1]}var Le=new Array(16384);for(le=0;le<16384;le++)Le[le]=255;if(!oe)for(le=0;le<T.length;le++){var Ie=le%8,he=(le-Ie)/8,xe=Math.pow(2,Ie),ke=T[le].brush.filter.get();if(!(ke.length<2)){var ze=v(ke[0])[1];for(pe=1;pe<ke.length;pe++){var Re=v(ke[pe]);for(Ee=ze+1;Ee<Re[0];Ee++)Le[8*Ee+he]&=~xe;ze=Math.max(ze,Re[1])}}}var Oe={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Le};return E?E(Oe):E=P.texture(Oe),{maskTexture:E,maskHeight:2048,loA:Te[0].slice(0,16),loB:Te[0].slice(16,32),loC:Te[0].slice(32,48),loD:Te[0].slice(48,64),hiA:Te[1].slice(0,16),hiB:Te[1].slice(16,32),hiC:Te[1].slice(32,48),hiD:Te[1].slice(48,64)}}(k);for($=0;$<te;$++){var ce=V[$],de=ce.dim0.crossfilterDimensionIndex,ge=ce.dim1.crossfilterDimensionIndex,ve=ce.canvasX,be=ce.canvasY,me=ve+ce.panelSizeX,Se=ce.plotGlPixelRatio;if(ne||!Z[de]||Z[de][0]!==ve||Z[de][1]!==me){Z[de]=[ve,me];var we=b(x,J,K,$,de,ge,ve,be,ce.panelSizeX,ce.panelSizeY,ce.dim0.crossfilterDimensionIndex,k?0:L?2:1,se,Se);U.clearOnly=ee;var _e=ne?x.lines.blockLineCount:h;i(P,B,U,_e,h,we)}}},readPixel:function(V,ne){return P.read({x:V,y:ne,width:1,height:1,data:n}),n},readPixels:function(V,ne,ee,$){var J=new Uint8Array(4*ee*$);return P.read({x:V,y:ne,width:ee,height:$,data:J}),J},destroy:function(){for(var V in d.style["pointer-events"]="none",j.destroy(),E&&E.destroy(),R)R[V].destroy()},update:q}}},26284:function(Y){Y.exports=function(O,e,M,A){var o,w;for(A||(A=1/0),o=0;o<e.length;o++)(w=e[o]).visible&&(A=Math.min(A,w[M].length));for(A===1/0&&(A=0),O._length=A,o=0;o<e.length;o++)(w=e[o]).visible&&(w._length=A);return A}},36336:function(Y,O,e){var M=e(33428),A=e(3400),o=A.isArrayOrTypedArray,w=A.numberFormat,_=e(96824),p=e(54460),s=A.strRotate,n=A.strTranslate,a=e(72736),r=e(43616),i=e(8932),l=e(71688),u=l.keyFun,c=l.repeat,g=l.unwrap,f=e(95724),b=e(30140),v=e(71864),d=e(51352);function m(Z,B,q){return A.aggNums(Z,null,B,q)}function x(Z,B){return T(m(Math.min,Z,B),m(Math.max,Z,B))}function y(Z){var B=Z.range;return B?T(B[0],B[1]):x(Z.values,Z._length)}function T(Z,B){return!isNaN(Z)&&isFinite(Z)||(Z=0),!isNaN(B)&&isFinite(B)||(B=0),Z===B&&(Z===0?(Z-=1,B+=1):(Z*=.9,B*=1.1)),[Z,B]}function h(Z,B,q,V,ne){var ee,$,J=y(q);return V?M.scale.ordinal().domain(V.map((ee=w(q.tickformat),$=ne,$?function(K,te){var ie=$[te];return ie??ee(K)}:ee))).range(V.map(function(K){var te=(K-J[0])/(J[1]-J[0]);return Z-B+te*(2*B-Z)})):M.scale.linear().domain(J).range([Z-B,B])}function E(Z){if(Z.tickvals){var B=y(Z);return M.scale.ordinal().domain(Z.tickvals).range(Z.tickvals.map(function(q){return(q-B[0])/(B[1]-B[0])}))}}function k(Z){var B=Z.map(function(ne){return ne[0]}),q=Z.map(function(ne){var ee=_(ne[1]);return M.rgb("rgb("+ee[0]+","+ee[1]+","+ee[2]+")")}),V="rgb".split("").map(function(ne){return M.scale.linear().clamp(!0).domain(B).range(q.map((ee=ne,function($){return $[ee]})));var ee});return function(ne){return V.map(function(ee){return ee(ne)})}}function L(Z){return Z.dimensions.some(function(B){return B.brush.filterSpecified})}function P(Z,B,q){var V=g(B),ne=V.trace,ee=f.convertTypedArray(V.lineColor),$=ne.line,J={color:_(ne.unselected.line.color),opacity:ne.unselected.line.opacity},K=i.extractOpts($),te=K.reversescale?i.flipScale(V.cscale):V.cscale,ie=ne.domain,ae=ne.dimensions,se=Z.width,ce=ne.labelangle,de=ne.labelside,ge=ne.labelfont,ve=ne.tickfont,be=ne.rangefont,me=A.extendDeepNoArrays({},$,{color:ee.map(M.scale.linear().domain(y({values:ee,range:[K.min,K.max],_length:ne._length}))),blockLineCount:b.blockLineCount,canvasOverdrag:b.overdrag*b.canvasPixelRatio}),Se=Math.floor(se*(ie.x[1]-ie.x[0])),we=Math.floor(Z.height*(ie.y[1]-ie.y[0])),_e=Z.margin||{l:80,r:80,t:100,b:80},oe=Se,le=we;return{key:q,colCount:ae.filter(f.isVisible).length,dimensions:ae,tickDistance:b.tickDistance,unitToColor:k(te),lines:me,deselectedLines:J,labelAngle:ce,labelSide:de,labelFont:ge,tickFont:ve,rangeFont:be,layoutWidth:se,layoutHeight:Z.height,domain:ie,translateX:ie.x[0]*se,translateY:Z.height-ie.y[1]*Z.height,pad:_e,canvasWidth:oe*b.canvasPixelRatio+2*me.canvasOverdrag,canvasHeight:le*b.canvasPixelRatio,width:oe,height:le,canvasPixelRatio:b.canvasPixelRatio}}function I(Z,B,q){var V=q.width,ne=q.height,ee=q.dimensions,$=q.canvasPixelRatio,J=function(se){return V*se/Math.max(1,q.colCount-1)},K=b.verticalPadding/ne,te=function(se,ce){return M.scale.linear().range([ce,se-ce])}(ne,b.verticalPadding),ie={key:q.key,xScale:J,model:q,inBrushDrag:!1},ae={};return ie.dimensions=ee.filter(f.isVisible).map(function(se,ce){var de=function(Le,Ie){return M.scale.linear().domain(y(Le)).range([Ie,1-Ie])}(se,K),ge=ae[se.label];ae[se.label]=(ge||0)+1;var ve=se.label+(ge?"__"+ge:""),be=se.constraintrange,me=be&&be.length;me&&!o(be[0])&&(be=[be]);var Se=me?be.map(function(Le){return Le.map(de)}):[[-1/0,1/0]],we=se.values;we.length>se._length&&(we=we.slice(0,se._length));var _e,oe=se.tickvals;function le(Le,Ie){return{val:Le,text:_e[Ie]}}function pe(Le,Ie){return Le.val-Ie.val}if(o(oe)&&oe.length){A.isTypedArray(oe)&&(oe=Array.from(oe)),_e=se.ticktext,o(_e)&&_e.length?_e.length>oe.length?_e=_e.slice(0,oe.length):oe.length>_e.length&&(oe=oe.slice(0,_e.length)):_e=oe.map(w(se.tickformat));for(var Ee=1;Ee<oe.length;Ee++)if(oe[Ee]<oe[Ee-1]){for(var Te=oe.map(le).sort(pe),Me=0;Me<oe.length;Me++)oe[Me]=Te[Me].val,_e[Me]=Te[Me].text;break}}else oe=void 0;return we=f.convertTypedArray(we),{key:ve,label:se.label,tickFormat:se.tickformat,tickvals:oe,ticktext:_e,ordinal:f.isOrdinal(se),multiselect:se.multiselect,xIndex:ce,crossfilterDimensionIndex:ce,visibleIndex:se._index,height:ne,values:we,paddedUnitValues:we.map(de),unitTickvals:oe&&oe.map(de),xScale:J,x:J(ce),canvasX:J(ce)*$,unitToPaddedPx:te,domainScale:h(ne,b.verticalPadding,se,oe,_e),ordinalScale:E(se),parent:ie,model:q,brush:v.makeBrush(Z,me,Se,function(){Z.linePickActive(!1)},function(){var Le=ie;Le.focusLayer&&Le.focusLayer.render(Le.panels,!0);var Ie=L(Le);!Z.contextShown()&&Ie?(Le.contextLayer&&Le.contextLayer.render(Le.panels,!0),Z.contextShown(!0)):Z.contextShown()&&!Ie&&(Le.contextLayer&&Le.contextLayer.render(Le.panels,!0,!0),Z.contextShown(!1))},function(Le){if(ie.focusLayer.render(ie.panels,!0),ie.pickLayer&&ie.pickLayer.render(ie.panels,!0),Z.linePickActive(!0),B&&B.filterChanged){var Ie=de.invert,he=Le.map(function(xe){return xe.map(Ie).sort(A.sorterAsc)}).sort(function(xe,ke){return xe[0]-ke[0]});B.filterChanged(ie.key,se._index,he)}})}}),ie}function z(Z){Z.classed(b.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function F(Z,B){var q=B==="top"?1:-1,V=Z*Math.PI/180;return{dir:q,dx:Math.sin(V),dy:Math.cos(V),degrees:Z}}function U(Z,B,q){for(var V=B.panels||(B.panels=[]),ne=Z.data(),ee=0;ee<ne.length-1;ee++){var $=V[ee]||(V[ee]={}),J=ne[ee],K=ne[ee+1];$.dim0=J,$.dim1=K,$.canvasX=J.canvasX,$.panelSizeX=K.canvasX-J.canvasX,$.panelSizeY=B.model.canvasHeight,$.y=0,$.canvasY=0,$.plotGlPixelRatio=q}}function R(Z,B){return p.tickText(Z._ax,B,!1).text}function j(Z,B){if(Z.ordinal)return"";var q=Z.domainScale.domain(),V=q[B?q.length-1:0];return R(Z.model.dimensions[Z.visibleIndex],V)}Y.exports=function(Z,B,q,V){var ne=Z._context.staticPlot,ee=Z._fullLayout,$=ee._toppaper,J=ee._glcontainer,K=Z._context.plotGlPixelRatio,te=Z._fullLayout.paper_bgcolor;(function(Le){for(var Ie=0;Ie<Le.length;Ie++)for(var he=0;he<Le[Ie].length;he++)for(var xe=Le[Ie][he].trace,ke=xe.dimensions,ze=0;ze<ke.length;ze++){var Re=ke[ze].values,Oe=ke[ze]._ax;Oe&&(Oe.range?Oe.range=T(Oe.range[0],Oe.range[1]):Oe.range=x(Re,xe._length),Oe.dtick||(Oe.dtick=.01*(Math.abs(Oe.range[1]-Oe.range[0])||1)),Oe.tickformat=ke[ze].tickformat,p.calcTicks(Oe),Oe.cleanRange())}})(B);var ie,ae,se=(ie=!0,ae=!1,{linePickActive:function(Le){return arguments.length?ie=!!Le:ie},contextShown:function(Le){return arguments.length?ae=!!Le:ae}}),ce=B.filter(function(Le){return g(Le).trace.visible}).map(P.bind(0,q)).map(I.bind(0,se,V));J.each(function(Le,Ie){return A.extendFlat(Le,ce[Ie])});var de=J.selectAll(".gl-canvas").each(function(Le){Le.viewModel=ce[0],Le.viewModel.plotGlPixelRatio=K,Le.viewModel.paperColor=te,Le.model=Le.viewModel?Le.viewModel.model:null}),ge=null;de.filter(function(Le){return Le.pick}).style("pointer-events",ne?"none":"auto").on("mousemove",function(Le){if(se.linePickActive()&&Le.lineLayer&&V&&V.hover){var Ie=M.event,he=this.width,xe=this.height,ke=M.mouse(this),ze=ke[0],Re=ke[1];if(ze<0||Re<0||ze>=he||Re>=xe)return;var Oe=Le.lineLayer.readPixel(ze,xe-1-Re),Ve=Oe[3]!==0,qe=Ve?Oe[2]+256*(Oe[1]+256*Oe[0]):null,Je={x:ze,y:Re,clientX:Ie.clientX,clientY:Ie.clientY,dataIndex:Le.model.key,curveNumber:qe};qe!==ge&&(Ve?V.hover(Je):V.unhover&&V.unhover(Je),ge=qe)}}),de.style("opacity",function(Le){return Le.pick?0:1}),$.style("background","rgba(255, 255, 255, 0)");var ve=$.selectAll("."+b.cn.parcoords).data(ce,u);ve.exit().remove(),ve.enter().append("g").classed(b.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),ve.attr("transform",function(Le){return n(Le.model.translateX,Le.model.translateY)});var be=ve.selectAll("."+b.cn.parcoordsControlView).data(c,u);be.enter().append("g").classed(b.cn.parcoordsControlView,!0),be.attr("transform",function(Le){return n(Le.model.pad.l,Le.model.pad.t)});var me=be.selectAll("."+b.cn.yAxis).data(function(Le){return Le.dimensions},u);me.enter().append("g").classed(b.cn.yAxis,!0),be.each(function(Le){U(me,Le,K)}),de.each(function(Le){if(Le.viewModel){!Le.lineLayer||V?Le.lineLayer=d(this,Le):Le.lineLayer.update(Le),(Le.key||Le.key===0)&&(Le.viewModel[Le.key]=Le.lineLayer);var Ie=!Le.context||V;Le.lineLayer.render(Le.viewModel.panels,Ie)}}),me.attr("transform",function(Le){return n(Le.xScale(Le.xIndex),0)}),me.call(M.behavior.drag().origin(function(Le){return Le}).on("drag",function(Le){var Ie=Le.parent;se.linePickActive(!1),Le.x=Math.max(-b.overdrag,Math.min(Le.model.width+b.overdrag,M.event.x)),Le.canvasX=Le.x*Le.model.canvasPixelRatio,me.sort(function(he,xe){return he.x-xe.x}).each(function(he,xe){he.xIndex=xe,he.x=Le===he?he.x:he.xScale(he.xIndex),he.canvasX=he.x*he.model.canvasPixelRatio}),U(me,Ie,K),me.filter(function(he){return Math.abs(Le.xIndex-he.xIndex)!==0}).attr("transform",function(he){return n(he.xScale(he.xIndex),0)}),M.select(this).attr("transform",n(Le.x,0)),me.each(function(he,xe,ke){ke===Le.parent.key&&(Ie.dimensions[xe]=he)}),Ie.contextLayer&&Ie.contextLayer.render(Ie.panels,!1,!L(Ie)),Ie.focusLayer.render&&Ie.focusLayer.render(Ie.panels)}).on("dragend",function(Le){var Ie=Le.parent;Le.x=Le.xScale(Le.xIndex),Le.canvasX=Le.x*Le.model.canvasPixelRatio,U(me,Ie,K),M.select(this).attr("transform",function(he){return n(he.x,0)}),Ie.contextLayer&&Ie.contextLayer.render(Ie.panels,!1,!L(Ie)),Ie.focusLayer&&Ie.focusLayer.render(Ie.panels),Ie.pickLayer&&Ie.pickLayer.render(Ie.panels,!0),se.linePickActive(!0),V&&V.axesMoved&&V.axesMoved(Ie.key,Ie.dimensions.map(function(he){return he.crossfilterDimensionIndex}))})),me.exit().remove();var Se=me.selectAll("."+b.cn.axisOverlays).data(c,u);Se.enter().append("g").classed(b.cn.axisOverlays,!0),Se.selectAll("."+b.cn.axis).remove();var we=Se.selectAll("."+b.cn.axis).data(c,u);we.enter().append("g").classed(b.cn.axis,!0),we.each(function(Le){var Ie=Le.model.height/Le.model.tickDistance,he=Le.domainScale,xe=he.domain();M.select(this).call(M.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Ie,Le.tickFormat).tickValues(Le.ordinal?xe:null).tickFormat(function(ke){return f.isOrdinal(Le)?ke:R(Le.model.dimensions[Le.visibleIndex],ke)}).scale(he)),r.font(we.selectAll("text"),Le.model.tickFont)}),we.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),we.selectAll("text").style("text-shadow",a.makeTextShadow(te)).style("cursor","default");var _e=Se.selectAll("."+b.cn.axisHeading).data(c,u);_e.enter().append("g").classed(b.cn.axisHeading,!0);var oe=_e.selectAll("."+b.cn.axisTitle).data(c,u);oe.enter().append("text").classed(b.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",ne?"none":"auto"),oe.text(function(Le){return Le.label}).each(function(Le){var Ie=M.select(this);r.font(Ie,Le.model.labelFont),a.convertToTspans(Ie,Z)}).attr("transform",function(Le){var Ie=F(Le.model.labelAngle,Le.model.labelSide),he=b.axisTitleOffset;return(Ie.dir>0?"":n(0,2*he+Le.model.height))+s(Ie.degrees)+n(-he*Ie.dx,-he*Ie.dy)}).attr("text-anchor",function(Le){var Ie=F(Le.model.labelAngle,Le.model.labelSide);return 2*Math.abs(Ie.dx)>Math.abs(Ie.dy)?Ie.dir*Ie.dx<0?"start":"end":"middle"});var le=Se.selectAll("."+b.cn.axisExtent).data(c,u);le.enter().append("g").classed(b.cn.axisExtent,!0);var pe=le.selectAll("."+b.cn.axisExtentTop).data(c,u);pe.enter().append("g").classed(b.cn.axisExtentTop,!0),pe.attr("transform",n(0,-b.axisExtentOffset));var Ee=pe.selectAll("."+b.cn.axisExtentTopText).data(c,u);Ee.enter().append("text").classed(b.cn.axisExtentTopText,!0).call(z),Ee.text(function(Le){return j(Le,!0)}).each(function(Le){r.font(M.select(this),Le.model.rangeFont)});var Te=le.selectAll("."+b.cn.axisExtentBottom).data(c,u);Te.enter().append("g").classed(b.cn.axisExtentBottom,!0),Te.attr("transform",function(Le){return n(0,Le.model.height+b.axisExtentOffset)});var Me=Te.selectAll("."+b.cn.axisExtentBottomText).data(c,u);Me.enter().append("text").classed(b.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(z),Me.text(function(Le){return j(Le,!1)}).each(function(Le){r.font(M.select(this),Le.model.rangeFont)}),v.ensureAxisBrush(Se,te,Z)}},24196:function(Y,O,e){var M=e(36336),A=e(5048),o=e(95724).isVisible,w={};function _(p,s,n){var a=s.indexOf(n),r=p.indexOf(a);return r===-1&&(r+=s.length),r}(Y.exports=function(p,s){var n=p._fullLayout;if(A(p,[],w)){var a={},r={},i={},l={},u=n._size;s.forEach(function(c,g){var f=c[0].trace;i[g]=f.index;var b=l[g]=f._fullInput.index;a[g]=p.data[b].dimensions,r[g]=p.data[b].dimensions.slice()}),M(p,s,{width:u.w,height:u.h,margin:{t:u.t,r:u.r,b:u.b,l:u.l}},{filterChanged:function(c,g,f){var b=r[c][g],v=f.map(function(h){return h.slice()}),d="dimensions["+g+"].constraintrange",m=n._tracePreGUI[p._fullData[i[c]]._fullInput.uid];if(m[d]===void 0){var x=b.constraintrange;m[d]=x||null}var y=p._fullData[i[c]].dimensions[g];v.length?(v.length===1&&(v=v[0]),b.constraintrange=v,y.constraintrange=v.slice(),v=[v]):(delete b.constraintrange,delete y.constraintrange,v=null);var T={};T[d]=v,p.emit("plotly_restyle",[T,[l[c]]])},hover:function(c){p.emit("plotly_hover",c)},unhover:function(c){p.emit("plotly_unhover",c)},axesMoved:function(c,g){var f=function(b,v){return function(d,m){return _(b,v,d)-_(b,v,m)}}(g,r[c].filter(o));a[c].sort(f),r[c].filter(function(b){return!o(b)}).sort(function(b){return r[c].indexOf(b)}).forEach(function(b){a[c].splice(a[c].indexOf(b),1),a[c].splice(r[c].indexOf(b),0,b)}),p.emit("plotly_restyle",[{dimensions:[a[c]]},[l[c]]])}})}}).reglPrecompiled=w},74996:function(Y,O,e){var M=e(45464),A=e(86968).u,o=e(25376),w=e(22548),_=e(21776).Ks,p=e(21776).Gw,s=e(92880).extendFlat,n=e(98192).c,a=o({editType:"plot",arrayOk:!0,colorEditType:"plot"});Y.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:w.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:n,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:s({},M.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:_({},{keys:["label","color","value","percent","text"]}),texttemplate:p({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:s({},a,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:s({},a,{}),outsidetextfont:s({},a,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:s({},a,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:A({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:s({},a,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},80036:function(Y,O,e){var M=e(7316);O.name="pie",O.plot=function(A,o,w,_){M.plotBasePlot(O.name,A,o,w,_)},O.clean=function(A,o,w,_){M.cleanBasePlot(O.name,A,o,w,_)}},45768:function(Y,O,e){var M=e(38248),A=e(49760),o=e(76308),w={};function _(s){return function(n,a){return!!n&&!!(n=A(n)).isValid()&&(n=o.addOpacity(n,n.getAlpha()),s[a]||(s[a]=n),n)}}function p(s,n){var a,r=JSON.stringify(s),i=n[r];if(!i){for(i=s.slice(),a=0;a<s.length;a++)i.push(A(s[a]).lighten(20).toHexString());for(a=0;a<s.length;a++)i.push(A(s[a]).darken(20).toHexString());n[r]=i}return i}Y.exports={calc:function(s,n){var a,r,i=[],l=s._fullLayout,u=l.hiddenlabels||[],c=n.labels,g=n.marker.colors||[],f=n.values,b=n._length,v=n._hasValues&&b;if(n.dlabel)for(c=new Array(b),a=0;a<b;a++)c[a]=String(n.label0+a*n.dlabel);var d={},m=_(l["_"+n.type+"colormap"]),x=0,y=!1;for(a=0;a<b;a++){var T,h,E;if(v){if(T=f[a],!M(T))continue;T=+T}else T=1;(h=c[a])!==void 0&&h!==""||(h=a);var k=d[h=String(h)];k===void 0?(d[h]=i.length,(E=u.indexOf(h)!==-1)||(x+=T),i.push({v:T,label:h,color:m(g[a],h),i:a,pts:[a],hidden:E})):(y=!0,(r=i[k]).v+=T,r.pts.push(a),r.hidden||(x+=T),r.color===!1&&g[a]&&(r.color=m(g[a],h)))}return i=i.filter(function(L){return L.v>=0}),(n.type==="funnelarea"?y:n.sort)&&i.sort(function(L,P){return P.v-L.v}),i[0]&&(i[0].vTotal=x),i},crossTraceCalc:function(s,n){var a=(n||{}).type;a||(a="pie");var r=s._fullLayout,i=s.calcdata,l=r[a+"colorway"],u=r["_"+a+"colormap"];r["extend"+a+"colors"]&&(l=p(l,w));for(var c=0,g=0;g<i.length;g++){var f=i[g];if(f[0].trace.type===a)for(var b=0;b<f.length;b++){var v=f[b];v.color===!1&&(u[v.label]?v.color=u[v.label]:(u[v.label]=v.color=l[c%l.length],c++))}}},makePullColorFn:_,generateExtendedColors:p}},74174:function(Y,O,e){var M=e(38248),A=e(3400),o=e(74996),w=e(86968).Q,_=e(31508).handleText,p=e(3400).coercePattern;function s(a,r){var i=A.isArrayOrTypedArray(a),l=A.isArrayOrTypedArray(r),u=Math.min(i?a.length:1/0,l?r.length:1/0);if(isFinite(u)||(u=0),u&&l){for(var c,g=0;g<u;g++){var f=r[g];if(M(f)&&f>0){c=!0;break}}c||(u=0)}return{hasLabels:i,hasValues:l,len:u}}function n(a,r,i,l,u){l("marker.line.width")&&l("marker.line.color",u?void 0:i.paper_bgcolor);var c=l("marker.colors");p(l,"marker.pattern",c),a.marker&&!r.marker.pattern.fgcolor&&(r.marker.pattern.fgcolor=a.marker.colors),r.marker.pattern.bgcolor||(r.marker.pattern.bgcolor=i.paper_bgcolor)}Y.exports={handleLabelsAndValues:s,handleMarkerDefaults:n,supplyDefaults:function(a,r,i,l){function u(y,T){return A.coerce(a,r,o,y,T)}var c=s(u("labels"),u("values")),g=c.len;if(r._hasLabels=c.hasLabels,r._hasValues=c.hasValues,!r._hasLabels&&r._hasValues&&(u("label0"),u("dlabel")),g){r._length=g,n(a,r,l,u,!0),u("scalegroup");var f,b=u("text"),v=u("texttemplate");if(v||(f=u("textinfo",A.isArrayOrTypedArray(b)?"text+percent":"percent")),u("hovertext"),u("hovertemplate"),v||f&&f!=="none"){var d=u("textposition");_(a,r,l,u,d,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(d)||d==="auto"||d==="outside")&&u("automargin"),(d==="inside"||d==="auto"||Array.isArray(d))&&u("insidetextorientation")}w(r,l,u);var m=u("hole");if(u("title.text")){var x=u("title.position",m?"middle center":"top center");m||x!=="middle center"||(r.title.position="top center"),A.coerceFont(u,"title.font",l.font)}u("sort"),u("direction"),u("rotation"),u("pull")}else r.visible=!1}}},53644:function(Y,O,e){var M=e(10624).appendArrayMultiPointValues;Y.exports=function(A,o){var w={curveNumber:o.index,pointNumbers:A.pts,data:o._input,fullData:o,label:A.label,color:A.color,value:A.v,percent:A.percent,text:A.text,bbox:A.bbox,v:A.v};return A.pts.length===1&&(w.pointNumber=w.i=A.pts[0]),M(w,o,A.pts),o.type==="funnelarea"&&(delete w.v,delete w.i),w}},21552:function(Y,O,e){var M=e(43616),A=e(76308);Y.exports=function(o,w,_,p){var s=_.marker.pattern;s&&s.shape?M.pointStyle(o,_,p,w):A.fill(o,w.color)}},69656:function(Y,O,e){var M=e(3400);function A(o){return o.indexOf("e")!==-1?o.replace(/[.]?0+e/,"e"):o.indexOf(".")!==-1?o.replace(/[.]?0+$/,""):o}O.formatPiePercent=function(o,w){var _=A((100*o).toPrecision(3));return M.numSeparate(_,w)+"%"},O.formatPieValue=function(o,w){var _=A(o.toPrecision(10));return M.numSeparate(_,w)},O.getFirstFilled=function(o,w){if(M.isArrayOrTypedArray(o))for(var _=0;_<w.length;_++){var p=o[w[_]];if(p||p===0||p==="")return p}},O.castOption=function(o,w){return M.isArrayOrTypedArray(o)?O.getFirstFilled(o,w):o||void 0},O.getRotationAngle=function(o){return(o==="auto"?0:o)*Math.PI/180}},75792:function(Y,O,e){Y.exports={attributes:e(74996),supplyDefaults:e(74174).supplyDefaults,supplyLayoutDefaults:e(90248),layoutAttributes:e(85204),calc:e(45768).calc,crossTraceCalc:e(45768).crossTraceCalc,plot:e(37820).plot,style:e(22152),styleOne:e(10528),moduleType:"trace",name:"pie",basePlotModule:e(80036),categories:["pie-like","pie","showLegend"],meta:{}}},85204:function(Y){Y.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},90248:function(Y,O,e){var M=e(3400),A=e(85204);Y.exports=function(o,w){function _(p,s){return M.coerce(o,w,A,p,s)}_("hiddenlabels"),_("piecolorway",w.colorway),_("extendpiecolors")}},37820:function(Y,O,e){var M=e(33428),A=e(7316),o=e(93024),w=e(76308),_=e(43616),p=e(3400),s=p.strScale,n=p.strTranslate,a=e(72736),r=e(82744),i=r.recordMinTextSize,l=r.clearMinTextSize,u=e(78048).TEXTPAD,c=e(69656),g=e(53644),f=e(3400).isValidTextValue;function b(Z,B,q){var V=q[0],ne=V.cx,ee=V.cy,$=V.trace,J=$.type==="funnelarea";"_hasHoverLabel"in $||($._hasHoverLabel=!1),"_hasHoverEvent"in $||($._hasHoverEvent=!1),Z.on("mouseover",function(K){var te=B._fullLayout,ie=B._fullData[$.index];if(!B._dragging&&te.hovermode!==!1){var ae=ie.hoverinfo;if(Array.isArray(ae)&&(ae=o.castHoverinfo({hoverinfo:[c.castOption(ae,K.pts)],_module:$._module},te,0)),ae==="all"&&(ae="label+text+value+percent+name"),ie.hovertemplate||ae!=="none"&&ae!=="skip"&&ae){var se=K.rInscribed||0,ce=ne+K.pxmid[0]*(1-se),de=ee+K.pxmid[1]*(1-se),ge=te.separators,ve=[];if(ae&&ae.indexOf("label")!==-1&&ve.push(K.label),K.text=c.castOption(ie.hovertext||ie.text,K.pts),ae&&ae.indexOf("text")!==-1){var be=K.text;p.isValidTextValue(be)&&ve.push(be)}K.value=K.v,K.valueLabel=c.formatPieValue(K.v,ge),ae&&ae.indexOf("value")!==-1&&ve.push(K.valueLabel),K.percent=K.v/V.vTotal,K.percentLabel=c.formatPiePercent(K.percent,ge),ae&&ae.indexOf("percent")!==-1&&ve.push(K.percentLabel);var me=ie.hoverlabel,Se=me.font,we=[];o.loneHover({trace:$,x0:ce-se*V.r,x1:ce+se*V.r,y:de,_x0:J?ne+K.TL[0]:ce-se*V.r,_x1:J?ne+K.TR[0]:ce+se*V.r,_y0:J?ee+K.TL[1]:de-se*V.r,_y1:J?ee+K.BL[1]:de+se*V.r,text:ve.join("<br>"),name:ie.hovertemplate||ae.indexOf("name")!==-1?ie.name:void 0,idealAlign:K.pxmid[0]<0?"left":"right",color:c.castOption(me.bgcolor,K.pts)||K.color,borderColor:c.castOption(me.bordercolor,K.pts),fontFamily:c.castOption(Se.family,K.pts),fontSize:c.castOption(Se.size,K.pts),fontColor:c.castOption(Se.color,K.pts),nameLength:c.castOption(me.namelength,K.pts),textAlign:c.castOption(me.align,K.pts),hovertemplate:c.castOption(ie.hovertemplate,K.pts),hovertemplateLabels:K,eventData:[g(K,ie)]},{container:te._hoverlayer.node(),outerContainer:te._paper.node(),gd:B,inOut_bbox:we}),K.bbox=we[0],$._hasHoverLabel=!0}$._hasHoverEvent=!0,B.emit("plotly_hover",{points:[g(K,ie)],event:M.event})}}),Z.on("mouseout",function(K){var te=B._fullLayout,ie=B._fullData[$.index],ae=M.select(this).datum();$._hasHoverEvent&&(K.originalEvent=M.event,B.emit("plotly_unhover",{points:[g(ae,ie)],event:M.event}),$._hasHoverEvent=!1),$._hasHoverLabel&&(o.loneUnhover(te._hoverlayer.node()),$._hasHoverLabel=!1)}),Z.on("click",function(K){var te=B._fullLayout,ie=B._fullData[$.index];B._dragging||te.hovermode===!1||(B._hoverdata=[g(K,ie)],o.click(B,M.event))})}function v(Z,B,q){var V=c.castOption(Z.insidetextfont.color,B.pts);!V&&Z._input.textfont&&(V=c.castOption(Z._input.textfont.color,B.pts));var ne=c.castOption(Z.insidetextfont.family,B.pts)||c.castOption(Z.textfont.family,B.pts)||q.family,ee=c.castOption(Z.insidetextfont.size,B.pts)||c.castOption(Z.textfont.size,B.pts)||q.size;return{color:V||w.contrast(B.color),family:ne,size:ee}}function d(Z,B){for(var q,V,ne=0;ne<Z.length;ne++)if((V=(q=Z[ne][0]).trace).title.text){var ee=V.title.text;V._meta&&(ee=p.templateString(ee,V._meta));var $=_.tester.append("text").attr("data-notex",1).text(ee).call(_.font,V.title.font).call(a.convertToTspans,B),J=_.bBox($.node(),!0);q.titleBox={width:J.width,height:J.height},$.remove()}}function m(Z,B,q){var V=q.r||B.rpx1,ne=B.rInscribed;if(B.startangle===B.stopangle)return{rCenter:1-ne,scale:0,rotate:0,textPosAngle:0};var ee,$=B.ring,J=$===1&&Math.abs(B.startangle-B.stopangle)===2*Math.PI,K=B.halfangle,te=B.midangle,ie=q.trace.insidetextorientation,ae=ie==="horizontal",se=ie==="tangential",ce=ie==="radial",de=ie==="auto",ge=[];if(!de){var ve,be=function(le,pe){if(function(Le,Ie){var he=Le.startangle,xe=Le.stopangle;return he>Ie&&Ie>xe||he<Ie&&Ie<xe}(B,le)){var Ee=Math.abs(le-B.startangle),Te=Math.abs(le-B.stopangle),Me=Ee<Te?Ee:Te;(ee=pe==="tan"?y(Z,V,$,Me,0):x(Z,V,$,Me,Math.PI/2)).textPosAngle=le,ge.push(ee)}};if(ae||se){for(ve=4;ve>=-4;ve-=2)be(Math.PI*ve,"tan");for(ve=4;ve>=-4;ve-=2)be(Math.PI*(ve+1),"tan")}if(ae||ce){for(ve=4;ve>=-4;ve-=2)be(Math.PI*(ve+1.5),"rad");for(ve=4;ve>=-4;ve-=2)be(Math.PI*(ve+.5),"rad")}}if(J||de||ae){var me=Math.sqrt(Z.width*Z.width+Z.height*Z.height);if((ee={scale:ne*V*2/me,rCenter:1-ne,rotate:0}).textPosAngle=(B.startangle+B.stopangle)/2,ee.scale>=1)return ee;ge.push(ee)}(de||ce)&&((ee=x(Z,V,$,K,te)).textPosAngle=(B.startangle+B.stopangle)/2,ge.push(ee)),(de||se)&&((ee=y(Z,V,$,K,te)).textPosAngle=(B.startangle+B.stopangle)/2,ge.push(ee));for(var Se=0,we=0,_e=0;_e<ge.length;_e++){var oe=ge[_e].scale;if(we<oe&&(we=oe,Se=_e),!de&&we>=1)break}return ge[Se]}function x(Z,B,q,V,ne){B=Math.max(0,B-2*u);var ee=Z.width/Z.height,$=E(ee,V,B,q);return{scale:2*$/Z.height,rCenter:T(ee,$/B),rotate:h(ne)}}function y(Z,B,q,V,ne){B=Math.max(0,B-2*u);var ee=Z.height/Z.width,$=E(ee,V,B,q);return{scale:2*$/Z.width,rCenter:T(ee,$/B),rotate:h(ne+Math.PI/2)}}function T(Z,B){return Math.cos(B)-Z*B}function h(Z){return(180/Math.PI*Z+720)%180-90}function E(Z,B,q,V){var ne=Z+1/(2*Math.tan(B));return q*Math.min(1/(Math.sqrt(ne*ne+.5)+ne),V/(Math.sqrt(Z*Z+V/2)+Z))}function k(Z,B){return Z.v!==B.vTotal||B.trace.hole?Math.min(1/(1+1/Math.sin(Z.halfangle)),Z.ring/2):1}function L(Z,B){var q=B.pxmid[0],V=B.pxmid[1],ne=Z.width/2,ee=Z.height/2;return q<0&&(ne*=-1),V<0&&(ee*=-1),{scale:1,rCenter:1,rotate:0,x:ne+Math.abs(ee)*(ne>0?1:-1)/2,y:ee/(1+q*q/(V*V)),outside:!0}}function P(Z,B){var q,V,ne,ee=Z.trace,$={x:Z.cx,y:Z.cy},J={tx:0,ty:0};J.ty+=ee.title.font.size,ne=z(ee),ee.title.position.indexOf("top")!==-1?($.y-=(1+ne)*Z.r,J.ty-=Z.titleBox.height):ee.title.position.indexOf("bottom")!==-1&&($.y+=(1+ne)*Z.r);var K,te=Z.r/((K=Z.trace.aspectratio)===void 0?1:K),ie=B.w*(ee.domain.x[1]-ee.domain.x[0])/2;return ee.title.position.indexOf("left")!==-1?(ie+=te,$.x-=(1+ne)*te,J.tx+=Z.titleBox.width/2):ee.title.position.indexOf("center")!==-1?ie*=2:ee.title.position.indexOf("right")!==-1&&(ie+=te,$.x+=(1+ne)*te,J.tx-=Z.titleBox.width/2),q=ie/Z.titleBox.width,V=I(Z,B)/Z.titleBox.height,{x:$.x,y:$.y,scale:Math.min(q,V),tx:J.tx,ty:J.ty}}function I(Z,B){var q=Z.trace,V=B.h*(q.domain.y[1]-q.domain.y[0]);return Math.min(Z.titleBox.height,V/2)}function z(Z){var B,q=Z.pull;if(!q)return 0;if(p.isArrayOrTypedArray(q))for(q=0,B=0;B<Z.pull.length;B++)Z.pull[B]>q&&(q=Z.pull[B]);return q}function F(Z,B){for(var q=[],V=0;V<Z.length;V++){var ne=Z[V][0],ee=ne.trace,$=ee.domain,J=B.w*($.x[1]-$.x[0]),K=B.h*($.y[1]-$.y[0]);ee.title.text&&ee.title.position!=="middle center"&&(K-=I(ne,B));var te=J/2,ie=K/2;ee.type!=="funnelarea"||ee.scalegroup||(ie/=ee.aspectratio),ne.r=Math.min(te,ie)/(1+z(ee)),ne.cx=B.l+B.w*(ee.domain.x[1]+ee.domain.x[0])/2,ne.cy=B.t+B.h*(1-ee.domain.y[0])-K/2,ee.title.text&&ee.title.position.indexOf("bottom")!==-1&&(ne.cy-=I(ne,B)),ee.scalegroup&&q.indexOf(ee.scalegroup)===-1&&q.push(ee.scalegroup)}(function(ae,se){for(var ce,de,ge,ve=0;ve<se.length;ve++){var be=1/0,me=se[ve];for(de=0;de<ae.length;de++)if((ge=(ce=ae[de][0]).trace).scalegroup===me){var Se;if(ge.type==="pie")Se=ce.r*ce.r;else if(ge.type==="funnelarea"){var we,_e;ge.aspectratio>1?_e=(we=ce.r)/ge.aspectratio:we=(_e=ce.r)*ge.aspectratio,Se=(we*=(1+ge.baseratio)/2)*_e}be=Math.min(be,Se/ce.vTotal)}for(de=0;de<ae.length;de++)if((ge=(ce=ae[de][0]).trace).scalegroup===me){var oe=be*ce.vTotal;ge.type==="funnelarea"&&(oe/=(1+ge.baseratio)/2,oe/=ge.aspectratio),ce.r=Math.sqrt(oe)}}})(Z,q)}function U(Z,B){return[Z*Math.sin(B),-Z*Math.cos(B)]}function R(Z,B,q){var V=Z._fullLayout,ne=q.trace,ee=ne.texttemplate,$=ne.textinfo;if(!ee&&$&&$!=="none"){var J,K=$.split("+"),te=function(Se){return K.indexOf(Se)!==-1},ie=te("label"),ae=te("text"),se=te("value"),ce=te("percent"),de=V.separators;if(J=ie?[B.label]:[],ae){var ge=c.getFirstFilled(ne.text,B.pts);f(ge)&&J.push(ge)}se&&J.push(c.formatPieValue(B.v,de)),ce&&J.push(c.formatPiePercent(B.v/q.vTotal,de)),B.text=J.join("<br>")}if(ee){var ve=p.castOption(ne,B.i,"texttemplate");if(ve){var be=function(Se){return{label:Se.label,value:Se.v,valueLabel:c.formatPieValue(Se.v,V.separators),percent:Se.v/q.vTotal,percentLabel:c.formatPiePercent(Se.v/q.vTotal,V.separators),color:Se.color,text:Se.text,customdata:p.castOption(ne,Se.i,"customdata")}}(B),me=c.getFirstFilled(ne.text,B.pts);(f(me)||me==="")&&(be.text=me),B.text=p.texttemplateString(ve,be,Z._fullLayout._d3locale,be,ne._meta||{})}else B.text=""}}function j(Z,B){var q=Z.rotate*Math.PI/180,V=Math.cos(q),ne=Math.sin(q),ee=(B.left+B.right)/2,$=(B.top+B.bottom)/2;Z.textX=ee*V-$*ne,Z.textY=ee*ne+$*V,Z.noCenter=!0}Y.exports={plot:function(Z,B){var q=Z._context.staticPlot,V=Z._fullLayout,ne=V._size;l("pie",V),d(B,Z),F(B,ne);var ee=p.makeTraceGroups(V._pielayer,B,"trace").each(function($){var J=M.select(this),K=$[0],te=K.trace;(function(ie){var ae,se,ce,de=ie[0],ge=de.r,ve=de.trace,be=c.getRotationAngle(ve.rotation),me=2*Math.PI/de.vTotal,Se="px0",we="px1";if(ve.direction==="counterclockwise"){for(ae=0;ae<ie.length&&ie[ae].hidden;ae++);if(ae===ie.length)return;be+=me*ie[ae].v,me*=-1,Se="px1",we="px0"}for(ce=U(ge,be),ae=0;ae<ie.length;ae++)(se=ie[ae]).hidden||(se[Se]=ce,se.startangle=be,be+=me*se.v/2,se.pxmid=U(ge,be),se.midangle=be,ce=U(ge,be+=me*se.v/2),se.stopangle=be,se[we]=ce,se.largeArc=se.v>de.vTotal/2?1:0,se.halfangle=Math.PI*Math.min(se.v/de.vTotal,.5),se.ring=1-ve.hole,se.rInscribed=k(se,de))})($),J.attr("stroke-linejoin","round"),J.each(function(){var ie=M.select(this).selectAll("g.slice").data($);ie.enter().append("g").classed("slice",!0),ie.exit().remove();var ae=[[[],[]],[[],[]]],se=!1;ie.each(function(we,_e){if(we.hidden)M.select(this).selectAll("path,g").remove();else{we.pointNumber=we.i,we.curveNumber=te.index,ae[we.pxmid[1]<0?0:1][we.pxmid[0]<0?0:1].push(we);var oe=K.cx,le=K.cy,pe=M.select(this),Ee=pe.selectAll("path.surface").data([we]);if(Ee.enter().append("path").classed("surface",!0).style({"pointer-events":q?"none":"all"}),pe.call(b,Z,$),te.pull){var Te=+c.castOption(te.pull,we.pts)||0;Te>0&&(oe+=Te*we.pxmid[0],le+=Te*we.pxmid[1])}we.cxFinal=oe,we.cyFinal=le;var Me=te.hole;if(we.v===K.vTotal){var Le="M"+(oe+we.px0[0])+","+(le+we.px0[1])+ze(we.px0,we.pxmid,!0,1)+ze(we.pxmid,we.px0,!0,1)+"Z";Me?Ee.attr("d","M"+(oe+Me*we.px0[0])+","+(le+Me*we.px0[1])+ze(we.px0,we.pxmid,!1,Me)+ze(we.pxmid,we.px0,!1,Me)+"Z"+Le):Ee.attr("d",Le)}else{var Ie=ze(we.px0,we.px1,!0,1);if(Me){var he=1-Me;Ee.attr("d","M"+(oe+Me*we.px1[0])+","+(le+Me*we.px1[1])+ze(we.px1,we.px0,!1,Me)+"l"+he*we.px0[0]+","+he*we.px0[1]+Ie+"Z")}else Ee.attr("d","M"+oe+","+le+"l"+we.px0[0]+","+we.px0[1]+Ie+"Z")}R(Z,we,K);var xe=c.castOption(te.textposition,we.pts),ke=pe.selectAll("g.slicetext").data(we.text&&xe!=="none"?[0]:[]);ke.enter().append("g").classed("slicetext",!0),ke.exit().remove(),ke.each(function(){var Re=p.ensureSingle(M.select(this),"text","",function(_t){_t.attr("data-notex",1)}),Oe=p.ensureUniformFontSize(Z,xe==="outside"?function(_t,yt,et){return{color:c.castOption(_t.outsidetextfont.color,yt.pts)||c.castOption(_t.textfont.color,yt.pts)||et.color,family:c.castOption(_t.outsidetextfont.family,yt.pts)||c.castOption(_t.textfont.family,yt.pts)||et.family,size:c.castOption(_t.outsidetextfont.size,yt.pts)||c.castOption(_t.textfont.size,yt.pts)||et.size}}(te,we,V.font):v(te,we,V.font));Re.text(we.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(_.font,Oe).call(a.convertToTspans,Z);var Ve,qe=_.bBox(Re.node());if(xe==="outside")Ve=L(qe,we);else if(Ve=m(qe,we,K),xe==="auto"&&Ve.scale<1){var Je=p.ensureUniformFontSize(Z,te.outsidetextfont);Re.call(_.font,Je),Ve=L(qe=_.bBox(Re.node()),we)}var ot=Ve.textPosAngle,rt=ot===void 0?we.pxmid:U(K.r,ot);if(Ve.targetX=oe+rt[0]*Ve.rCenter+(Ve.x||0),Ve.targetY=le+rt[1]*Ve.rCenter+(Ve.y||0),j(Ve,qe),Ve.outside){var dt=Ve.targetY;we.yLabelMin=dt-qe.height/2,we.yLabelMid=dt,we.yLabelMax=dt+qe.height/2,we.labelExtraX=0,we.labelExtraY=0,se=!0}Ve.fontSize=Oe.size,i(te.type,Ve,V),$[_e].transform=Ve,p.setTransormAndDisplay(Re,Ve)})}function ze(Re,Oe,Ve,qe){var Je=qe*(Oe[0]-Re[0]),ot=qe*(Oe[1]-Re[1]);return"a"+qe*K.r+","+qe*K.r+" 0 "+we.largeArc+(Ve?" 1 ":" 0 ")+Je+","+ot}});var ce=M.select(this).selectAll("g.titletext").data(te.title.text?[0]:[]);if(ce.enter().append("g").classed("titletext",!0),ce.exit().remove(),ce.each(function(){var we,_e=p.ensureSingle(M.select(this),"text","",function(le){le.attr("data-notex",1)}),oe=te.title.text;te._meta&&(oe=p.templateString(oe,te._meta)),_e.text(oe).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(_.font,te.title.font).call(a.convertToTspans,Z),we=te.title.position==="middle center"?function(le){var pe=Math.sqrt(le.titleBox.width*le.titleBox.width+le.titleBox.height*le.titleBox.height);return{x:le.cx,y:le.cy,scale:le.trace.hole*le.r*2/pe,tx:0,ty:-le.titleBox.height/2+le.trace.title.font.size}}(K):P(K,ne),_e.attr("transform",n(we.x,we.y)+s(Math.min(1,we.scale))+n(we.tx,we.ty))}),se&&function(we,_e){var oe,le,pe,Ee,Te,Me,Le,Ie,he,xe,ke,ze,Re;function Oe(ot,rt){return ot.pxmid[1]-rt.pxmid[1]}function Ve(ot,rt){return rt.pxmid[1]-ot.pxmid[1]}function qe(ot,rt){rt||(rt={});var dt,_t,yt,et,nt=rt.labelExtraY+(le?rt.yLabelMax:rt.yLabelMin),At=le?ot.yLabelMin:ot.yLabelMax,Rt=le?ot.yLabelMax:ot.yLabelMin,Ft=ot.cyFinal+Te(ot.px0[1],ot.px1[1]),It=nt-At;if(It*Le>0&&(ot.labelExtraY=It),p.isArrayOrTypedArray(_e.pull))for(_t=0;_t<xe.length;_t++)(yt=xe[_t])===ot||(c.castOption(_e.pull,ot.pts)||0)>=(c.castOption(_e.pull,yt.pts)||0)||((ot.pxmid[1]-yt.pxmid[1])*Le>0?(It=yt.cyFinal+Te(yt.px0[1],yt.px1[1])-At-ot.labelExtraY)*Le>0&&(ot.labelExtraY+=It):(Rt+ot.labelExtraY-Ft)*Le>0&&(dt=3*Me*Math.abs(_t-xe.indexOf(ot)),(et=yt.cxFinal+Ee(yt.px0[0],yt.px1[0])+dt-(ot.cxFinal+ot.pxmid[0])-ot.labelExtraX)*Me>0&&(ot.labelExtraX+=et)))}for(le=0;le<2;le++)for(pe=le?Oe:Ve,Te=le?Math.max:Math.min,Le=le?1:-1,oe=0;oe<2;oe++){for(Ee=oe?Math.max:Math.min,Me=oe?1:-1,(Ie=we[le][oe]).sort(pe),he=we[1-le][oe],xe=he.concat(Ie),ze=[],ke=0;ke<Ie.length;ke++)Ie[ke].yLabelMid!==void 0&&ze.push(Ie[ke]);for(Re=!1,ke=0;le&&ke<he.length;ke++)if(he[ke].yLabelMid!==void 0){Re=he[ke];break}for(ke=0;ke<ze.length;ke++){var Je=ke&&ze[ke-1];Re&&!ke&&(Je=Re),qe(ze[ke],Je)}}}(ae,te),function(we,_e){we.each(function(oe){var le=M.select(this);if(oe.labelExtraX||oe.labelExtraY){var pe=le.select("g.slicetext text");oe.transform.targetX+=oe.labelExtraX,oe.transform.targetY+=oe.labelExtraY,p.setTransormAndDisplay(pe,oe.transform);var Ee=oe.cxFinal+oe.pxmid[0],Te="M"+Ee+","+(oe.cyFinal+oe.pxmid[1]),Me=(oe.yLabelMax-oe.yLabelMin)*(oe.pxmid[0]<0?-1:1)/4;if(oe.labelExtraX){var Le=oe.labelExtraX*oe.pxmid[1]/oe.pxmid[0],Ie=oe.yLabelMid+oe.labelExtraY-(oe.cyFinal+oe.pxmid[1]);Math.abs(Le)>Math.abs(Ie)?Te+="l"+Ie*oe.pxmid[0]/oe.pxmid[1]+","+Ie+"H"+(Ee+oe.labelExtraX+Me):Te+="l"+oe.labelExtraX+","+Le+"v"+(Ie-Le)+"h"+Me}else Te+="V"+(oe.yLabelMid+oe.labelExtraY)+"h"+Me;p.ensureSingle(le,"path","textline").call(w.stroke,_e.outsidetextfont.color).attr({"stroke-width":Math.min(2,_e.outsidetextfont.size/8),d:Te,fill:"none"})}else le.select("path.textline").remove()})}(ie,te),se&&te.automargin){var de=_.bBox(J.node()),ge=te.domain,ve=ne.w*(ge.x[1]-ge.x[0]),be=ne.h*(ge.y[1]-ge.y[0]),me=(.5*ve-K.r)/ne.w,Se=(.5*be-K.r)/ne.h;A.autoMargin(Z,"pie."+te.uid+".automargin",{xl:ge.x[0]-me,xr:ge.x[1]+me,yb:ge.y[0]-Se,yt:ge.y[1]+Se,l:Math.max(K.cx-K.r-de.left,0),r:Math.max(de.right-(K.cx+K.r),0),b:Math.max(de.bottom-(K.cy+K.r),0),t:Math.max(K.cy-K.r-de.top,0),pad:5})}})});setTimeout(function(){ee.selectAll("tspan").each(function(){var $=M.select(this);$.attr("dy")&&$.attr("dy",$.attr("dy"))})},0)},formatSliceLabel:R,transformInsideText:m,determineInsideTextFont:v,positionTitleOutside:P,prerenderTitles:d,layoutAreas:F,attachFxHandlers:b,computeTransform:j}},22152:function(Y,O,e){var M=e(33428),A=e(10528),o=e(82744).resizeText;Y.exports=function(w){var _=w._fullLayout._pielayer.selectAll(".trace");o(w,_,"pie"),_.each(function(p){var s=p[0].trace,n=M.select(this);n.style({opacity:s.opacity}),n.selectAll("path.surface").each(function(a){M.select(this).call(A,a,s,w)})})}},10528:function(Y,O,e){var M=e(76308),A=e(69656).castOption,o=e(21552);Y.exports=function(w,_,p,s){var n=p.marker.line,a=A(n.color,_.pts)||M.defaultLine,r=A(n.width,_.pts)||0;w.call(o,_,p,s).style("stroke-width",r).call(M.stroke,a)}},35484:function(Y,O,e){var M=e(52904);Y.exports={x:M.x,y:M.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:M.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},11072:function(Y,O,e){var M=e(67792).gl_pointcloud2d,A=e(3400).isArrayOrTypedArray,o=e(43080),w=e(19280).findExtremes,_=e(44928);function p(n,a){this.scene=n,this.uid=a,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=M(n.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var s=p.prototype;s.handlePick=function(n){var a=this.idToIndex[n.pointId];return{trace:this,dataCoord:n.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*a],this.pickXYData[2*a+1]]:[this.pickXData[a],this.pickYData[a]],textLabel:A(this.textLabels)?this.textLabels[a]:this.textLabels,color:this.color,name:this.name,pointIndex:a,hoverinfo:this.hoverinfo}},s.update=function(n){this.index=n.index,this.textLabels=n.text,this.name=n.name,this.hoverinfo=n.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(n),this.color=_(n,{})},s.updateFast=function(n){var a,r,i,l,u,c,g=this.xData=this.pickXData=n.x,f=this.yData=this.pickYData=n.y,b=this.pickXYData=n.xy,v=n.xbounds&&n.ybounds,d=n.indices,m=this.bounds;if(b){if(i=b,a=b.length>>>1,v)m[0]=n.xbounds[0],m[2]=n.xbounds[1],m[1]=n.ybounds[0],m[3]=n.ybounds[1];else for(c=0;c<a;c++)l=i[2*c],u=i[2*c+1],l<m[0]&&(m[0]=l),l>m[2]&&(m[2]=l),u<m[1]&&(m[1]=u),u>m[3]&&(m[3]=u);if(d)r=d;else for(r=new Int32Array(a),c=0;c<a;c++)r[c]=c}else for(a=g.length,i=new Float32Array(2*a),r=new Int32Array(a),c=0;c<a;c++)l=g[c],u=f[c],r[c]=c,i[2*c]=l,i[2*c+1]=u,l<m[0]&&(m[0]=l),l>m[2]&&(m[2]=l),u<m[1]&&(m[1]=u),u>m[3]&&(m[3]=u);this.idToIndex=r,this.pointcloudOptions.idToIndex=r,this.pointcloudOptions.positions=i;var x=o(n.marker.color),y=o(n.marker.border.color),T=n.opacity*n.marker.opacity;x[3]*=T,this.pointcloudOptions.color=x;var h=n.marker.blend;h===null&&(h=g.length<100||f.length<100),this.pointcloudOptions.blend=h,y[3]*=T,this.pointcloudOptions.borderColor=y;var E=n.marker.sizemin,k=Math.max(n.marker.sizemax,n.marker.sizemin);this.pointcloudOptions.sizeMin=E,this.pointcloudOptions.sizeMax=k,this.pointcloudOptions.areaRatio=n.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var L=this.scene.xaxis,P=this.scene.yaxis,I=k/2||.5;n._extremes[L._id]=w(L,[m[0],m[2]],{ppad:I}),n._extremes[P._id]=w(P,[m[1],m[3]],{ppad:I})},s.dispose=function(){this.pointcloud.dispose()},Y.exports=function(n,a){var r=new p(n,a.uid);return r.update(a),r}},41904:function(Y,O,e){var M=e(3400),A=e(35484);Y.exports=function(o,w,_){function p(s,n){return M.coerce(o,w,A,s,n)}p("x"),p("y"),p("xbounds"),p("ybounds"),o.xy&&o.xy instanceof Float32Array&&(w.xy=o.xy),o.indices&&o.indices instanceof Int32Array&&(w.indices=o.indices),p("text"),p("marker.color",_),p("marker.opacity"),p("marker.blend"),p("marker.sizemin"),p("marker.sizemax"),p("marker.border.color",_),p("marker.border.arearatio"),w._length=null}},156:function(Y,O,e){Y.exports={attributes:e(35484),supplyDefaults:e(41904),calc:e(41484),plot:e(11072),moduleType:"trace",name:"pointcloud",basePlotModule:e(39952),categories:["gl","gl2d","showLegend"],meta:{}}},41440:function(Y,O,e){var M=e(25376),A=e(45464),o=e(22548),w=e(55756),_=e(86968).u,p=e(21776).Ks,s=e(49084),n=e(31780).templatedArray,a=e(29736).descriptionOnlyNumbers,r=e(92880).extendFlat,i=e(67824).overrideAll;(Y.exports=i({hoverinfo:r({},A.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:w.hoverlabel,domain:_({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:a("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:M({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:w.hoverlabel,hovertemplate:p({},{keys:["value","label"]}),align:{valType:"enumerated",values:["justify","left","right","center"],dflt:"justify"}},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},hovercolor:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:w.hoverlabel,hovertemplate:p({},{keys:["value","label"]}),colorscales:n("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:r(s().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},10760:function(Y,O,e){var M=e(67824).overrideAll,A=e(84888)._M,o=e(59596),w=e(65460),_=e(93972),p=e(86476),s=e(22676).prepSelect,n=e(3400),a=e(24040),r="sankey";function i(l,u){var c=l._fullData[u],g=l._fullLayout,f=g.dragmode,b=g.dragmode==="pan"?"move":"crosshair",v=c._bgRect;if(v&&f!=="pan"&&f!=="zoom"){_(v,b);var d={_id:"x",c2p:n.identity,_offset:c._sankey.translateX,_length:c._sankey.width},m={_id:"y",c2p:n.identity,_offset:c._sankey.translateY,_length:c._sankey.height},x={gd:l,element:v.node(),plotinfo:{id:u,xaxis:d,yaxis:m,fillRangeItems:n.noop},subplot:u,xaxes:[d],yaxes:[m],doneFnCompleted:function(y){var T,h=l._fullData[u],E=h.node.groups.slice(),k=[];function L(F){for(var U=h._sankey.graph.nodes,R=0;R<U.length;R++)if(U[R].pointNumber===F)return U[R]}for(var P=0;P<y.length;P++){var I=L(y[P].pointNumber);if(I)if(I.group){for(var z=0;z<I.childrenNodes.length;z++)k.push(I.childrenNodes[z].pointNumber);E[I.pointNumber-h.node._count]=!1}else k.push(I.pointNumber)}T=E.filter(Boolean).concat([k]),a.call("_guiRestyle",l,{"node.groups":[T]},u)},prepFn:function(y,T,h){s(y,T,h,x,f)}};p.init(x)}}O.name=r,O.baseLayoutAttrOverrides=M({hoverlabel:w.hoverlabel},"plot","nested"),O.plot=function(l){var u=A(l.calcdata,r)[0];o(l,u),O.updateFx(l)},O.clean=function(l,u,c,g){var f=g._has&&g._has(r),b=u._has&&u._has(r);f&&!b&&(g._paperdiv.selectAll(".sankey").remove(),g._paperdiv.selectAll(".bgsankey").remove())},O.updateFx=function(l){for(var u=0;u<l._fullData.length;u++)i(l,u)}},48068:function(Y,O,e){var M=e(78484),A=e(3400),o=e(71688).wrap,w=A.isArrayOrTypedArray,_=A.isIndex,p=e(8932);Y.exports=function(s,n){var a=function(r){var i,l=r.node,u=r.link,c=[],g=w(u.color),f=w(u.hovercolor),b=w(u.customdata),v={},d={},m=u.colorscales.length;for(i=0;i<m;i++){var x=u.colorscales[i],y=p.extractScale(x,{cLetter:"c"}),T=p.makeColorScaleFunc(y);d[x.label]=T}var h=0;for(i=0;i<u.value.length;i++)u.source[i]>h&&(h=u.source[i]),u.target[i]>h&&(h=u.target[i]);var E,k=h+1;r.node._count=k;var L=r.node.groups,P={};for(i=0;i<L.length;i++){var I=L[i];for(E=0;E<I.length;E++){var z=I[E],F=k+i;P.hasOwnProperty(z)?A.warn("Node "+z+" is already part of a group."):P[z]=F}}var U={source:[],target:[]};for(i=0;i<u.value.length;i++){var R=u.value[i],j=u.source[i],Z=u.target[i];if(R>0&&_(j,k)&&_(Z,k)&&(!P.hasOwnProperty(j)||!P.hasOwnProperty(Z)||P[j]!==P[Z])){P.hasOwnProperty(Z)&&(Z=P[Z]),P.hasOwnProperty(j)&&(j=P[j]),Z=+Z,v[j=+j]=v[Z]=!0;var B="";u.label&&u.label[i]&&(B=u.label[i]);var q=null;B&&d.hasOwnProperty(B)&&(q=d[B]),c.push({pointNumber:i,label:B,color:g?u.color[i]:u.color,hovercolor:f?u.hovercolor[i]:u.hovercolor,customdata:b?u.customdata[i]:u.customdata,concentrationscale:q,source:j,target:Z,value:+R}),U.source.push(j),U.target.push(Z)}}var V=k+L.length,ne=w(l.color),ee=w(l.customdata),$=[];for(i=0;i<V;i++)if(v[i]){var J=l.label[i];$.push({group:i>k-1,childrenNodes:[],pointNumber:i,label:J,color:ne?l.color[i]:l.color,customdata:ee?l.customdata[i]:l.customdata})}var K=!1;return function(te,ie,ae){for(var se=A.init2dArray(te,0),ce=0;ce<Math.min(ie.length,ae.length);ce++)if(A.isIndex(ie[ce],te)&&A.isIndex(ae[ce],te)){if(ie[ce]===ae[ce])return!0;se[ie[ce]].push(ae[ce])}return M(se).components.some(function(de){return de.length>1})}(V,U.source,U.target)&&(K=!0),{circular:K,links:c,nodes:$,groups:L,groupLookup:P}}(n);return o({circular:a.circular,_nodes:a.nodes,_links:a.links,_groups:a.groups,_groupLookup:a.groupLookup})}},11820:function(Y){Y.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},47140:function(Y,O,e){var M=e(3400),A=e(41440),o=e(76308),w=e(49760),_=e(86968).Q,p=e(16132),s=e(31780),n=e(51272);function a(r,i){function l(u,c){return M.coerce(r,i,A.link.colorscales,u,c)}l("label"),l("cmin"),l("cmax"),l("colorscale")}Y.exports=function(r,i,l,u){function c(L,P){return M.coerce(r,i,A,L,P)}var g=M.extendDeep(u.hoverlabel,r.hoverlabel),f=r.node,b=s.newContainer(i,"node");function v(L,P){return M.coerce(f,b,A.node,L,P)}v("label"),v("groups"),v("x"),v("y"),v("pad"),v("thickness"),v("line.color"),v("line.width"),v("hoverinfo",r.hoverinfo),p(f,b,v,g),v("hovertemplate"),v("align");var d=u.colorway;v("color",b.label.map(function(L,P){return o.addOpacity(function(I){return d[I%d.length]}(P),.8)})),v("customdata");var m=r.link||{},x=s.newContainer(i,"link");function y(L,P){return M.coerce(m,x,A.link,L,P)}y("label"),y("arrowlen"),y("source"),y("target"),y("value"),y("line.color"),y("line.width"),y("hoverinfo",r.hoverinfo),p(m,x,y,g),y("hovertemplate");var T,h=w(u.paper_bgcolor).getLuminance()<.333,E=y("color",h?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)");function k(L){var P=w(L);if(!P.isValid())return L;var I=P.getAlpha();return I<=.8?P.setAlpha(I+.2):P=h?P.brighten():P.darken(),P.toRgbString()}y("hovercolor",Array.isArray(E)?E.map(k):k(E)),y("customdata"),n(m,x,{name:"colorscales",handleItemDefaults:a}),_(i,u,c),c("orientation"),c("valueformat"),c("valuesuffix"),b.x.length&&b.y.length&&(T="freeform"),c("arrangement",T),M.coerceFont(c,"textfont",M.extendFlat({},u.font)),i._length=null}},45499:function(Y,O,e){Y.exports={attributes:e(41440),supplyDefaults:e(47140),calc:e(48068),plot:e(59596),moduleType:"trace",name:"sankey",basePlotModule:e(10760),selectPoints:e(81128),categories:["noOpacity"],meta:{}}},59596:function(Y,O,e){var M=e(33428),A=e(3400),o=A.numberFormat,w=e(83248),_=e(93024),p=e(76308),s=e(11820).cn,n=A._;function a(m){return m!==""}function r(m,x){return m.filter(function(y){return y.key===x.traceId})}function i(m,x){M.select(m).select("path").style("fill-opacity",x),M.select(m).select("rect").style("fill-opacity",x)}function l(m){M.select(m).select("text.name").style("fill","black")}function u(m){return function(x){return m.node.sourceLinks.indexOf(x.link)!==-1||m.node.targetLinks.indexOf(x.link)!==-1}}function c(m){return function(x){return x.node.sourceLinks.indexOf(m.link)!==-1||x.node.targetLinks.indexOf(m.link)!==-1}}function g(m,x,y){x&&y&&r(y,x).selectAll("."+s.sankeyLink).filter(u(x)).call(b.bind(0,x,y,!1))}function f(m,x,y){x&&y&&r(y,x).selectAll("."+s.sankeyLink).filter(u(x)).call(v.bind(0,x,y,!1))}function b(m,x,y,T){T.style("fill",function(h){if(!h.link.concentrationscale)return h.tinyColorHoverHue}).style("fill-opacity",function(h){if(!h.link.concentrationscale)return h.tinyColorHoverAlpha}),T.each(function(h){var E=h.link.label;E!==""&&r(x,m).selectAll("."+s.sankeyLink).filter(function(k){return k.link.label===E}).style("fill",function(k){if(!k.link.concentrationscale)return k.tinyColorHoverHue}).style("fill-opacity",function(k){if(!k.link.concentrationscale)return k.tinyColorHoverAlpha})}),y&&r(x,m).selectAll("."+s.sankeyNode).filter(c(m)).call(g)}function v(m,x,y,T){T.style("fill",function(h){return h.tinyColorHue}).style("fill-opacity",function(h){return h.tinyColorAlpha}),T.each(function(h){var E=h.link.label;E!==""&&r(x,m).selectAll("."+s.sankeyLink).filter(function(k){return k.link.label===E}).style("fill",function(k){return k.tinyColorHue}).style("fill-opacity",function(k){return k.tinyColorAlpha})}),y&&r(x,m).selectAll(s.sankeyNode).filter(c(m)).call(f)}function d(m,x){var y=m.hoverlabel||{},T=A.nestedProperty(y,x).get();return!Array.isArray(T)&&T}Y.exports=function(m,x){for(var y=m._fullLayout,T=y._paper,h=y._size,E=0;E<m._fullData.length;E++)if(m._fullData[E].visible&&m._fullData[E].type===s.sankey&&!m._fullData[E]._viewInitial){var k=m._fullData[E].node;m._fullData[E]._viewInitial={node:{groups:k.groups.slice(),x:k.x.slice(),y:k.y.slice()}}}var L=n(m,"source:")+" ",P=n(m,"target:")+" ",I=n(m,"concentration:")+" ",z=n(m,"incoming flow count:")+" ",F=n(m,"outgoing flow count:")+" ";w(m,T,x,{width:h.w,height:h.h,margin:{t:h.t,r:h.r,b:h.b,l:h.l}},{linkEvents:{hover:function(U,R,j){m._fullLayout.hovermode!==!1&&(M.select(U).call(b.bind(0,R,j,!0)),R.link.trace.link.hoverinfo!=="skip"&&(R.link.fullData=R.link.trace,m.emit("plotly_hover",{event:M.event,points:[R.link]})))},follow:function(U,R){if(m._fullLayout.hovermode!==!1){var j=R.link.trace.link;if(j.hoverinfo!=="none"&&j.hoverinfo!=="skip"){for(var Z=[],B=0,q=0;q<R.flow.links.length;q++){var V=R.flow.links[q];if(m._fullLayout.hovermode!=="closest"||R.link.pointNumber===V.pointNumber){R.link.pointNumber===V.pointNumber&&(B=q),V.fullData=V.trace,j=R.link.trace.link;var ne=$(V),ee={valueLabel:o(R.valueFormat)(V.value)+R.valueSuffix};Z.push({x:ne[0],y:ne[1],name:ee.valueLabel,text:[V.label||"",L+V.source.label,P+V.target.label,V.concentrationscale?I+o("%0.2f")(V.flow.labelConcentration):""].filter(a).join("<br>"),color:d(j,"bgcolor")||p.addOpacity(V.color,1),borderColor:d(j,"bordercolor"),fontFamily:d(j,"font.family"),fontSize:d(j,"font.size"),fontColor:d(j,"font.color"),nameLength:d(j,"namelength"),textAlign:d(j,"align"),idealAlign:M.event.x<ne[0]?"right":"left",hovertemplate:j.hovertemplate,hovertemplateLabels:ee,eventData:[V]})}}_.loneHover(Z,{container:y._hoverlayer.node(),outerContainer:y._paper.node(),gd:m,anchorIndex:B}).each(function(){R.link.concentrationscale||i(this,.65),l(this)})}}function $(J){var K,te;J.circular?(K=(J.circularPathData.leftInnerExtent+J.circularPathData.rightInnerExtent)/2,te=J.circularPathData.verticalFullExtent):(K=(J.source.x1+J.target.x0)/2,te=(J.y0+J.y1)/2);var ie=[K,te];return J.trace.orientation==="v"&&ie.reverse(),ie[0]+=R.parent.translateX,ie[1]+=R.parent.translateY,ie}},unhover:function(U,R,j){m._fullLayout.hovermode!==!1&&(M.select(U).call(v.bind(0,R,j,!0)),R.link.trace.link.hoverinfo!=="skip"&&(R.link.fullData=R.link.trace,m.emit("plotly_unhover",{event:M.event,points:[R.link]})),_.loneUnhover(y._hoverlayer.node()))},select:function(U,R){var j=R.link;j.originalEvent=M.event,m._hoverdata=[j],_.click(m,{target:!0})}},nodeEvents:{hover:function(U,R,j){m._fullLayout.hovermode!==!1&&(M.select(U).call(g,R,j),R.node.trace.node.hoverinfo!=="skip"&&(R.node.fullData=R.node.trace,m.emit("plotly_hover",{event:M.event,points:[R.node]})))},follow:function(U,R){if(m._fullLayout.hovermode!==!1){var j=R.node.trace.node;if(j.hoverinfo!=="none"&&j.hoverinfo!=="skip"){var Z=M.select(U).select("."+s.nodeRect),B=m._fullLayout._paperdiv.node().getBoundingClientRect(),q=Z.node().getBoundingClientRect(),V=q.left-2-B.left,ne=q.right+2-B.left,ee=q.top+q.height/4-B.top,$={valueLabel:o(R.valueFormat)(R.node.value)+R.valueSuffix};R.node.fullData=R.node.trace,m._fullLayout._calcInverseTransform(m);var J=m._fullLayout._invScaleX,K=m._fullLayout._invScaleY,te=_.loneHover({x0:J*V,x1:J*ne,y:K*ee,name:o(R.valueFormat)(R.node.value)+R.valueSuffix,text:[R.node.label,z+R.node.targetLinks.length,F+R.node.sourceLinks.length].filter(a).join("<br>"),color:d(j,"bgcolor")||R.tinyColorHue,borderColor:d(j,"bordercolor"),fontFamily:d(j,"font.family"),fontSize:d(j,"font.size"),fontColor:d(j,"font.color"),nameLength:d(j,"namelength"),textAlign:d(j,"align"),idealAlign:"left",hovertemplate:j.hovertemplate,hovertemplateLabels:$,eventData:[R.node]},{container:y._hoverlayer.node(),outerContainer:y._paper.node(),gd:m});i(te,.85),l(te)}}},unhover:function(U,R,j){m._fullLayout.hovermode!==!1&&(M.select(U).call(f,R,j),R.node.trace.node.hoverinfo!=="skip"&&(R.node.fullData=R.node.trace,m.emit("plotly_unhover",{event:M.event,points:[R.node]})),_.loneUnhover(y._hoverlayer.node()))},select:function(U,R,j){var Z=R.node;Z.originalEvent=M.event,m._hoverdata=[Z],M.select(U).call(f,R,j),_.click(m,{target:!0})}}})}},83248:function(Y,O,e){var M=e(49812),A=e(67756).Gz,o=e(33428),w=e(26800),_=e(48932),p=e(11820),s=e(49760),n=e(76308),a=e(43616),r=e(3400),i=r.strTranslate,l=r.strRotate,u=e(71688),c=u.keyFun,g=u.repeat,f=u.unwrap,b=e(72736),v=e(24040),d=e(84284),m=d.CAP_SHIFT,x=d.LINE_SPACING;function y(q,V,ne){var ee,$=f(V),J=$.trace,K=J.domain,te=J.orientation==="h",ie=J.node.pad,ae=J.node.thickness,se={justify:w.sankeyJustify,left:w.sankeyLeft,right:w.sankeyRight,center:w.sankeyCenter}[J.node.align],ce=q.width*(K.x[1]-K.x[0]),de=q.height*(K.y[1]-K.y[0]),ge=$._nodes,ve=$._links,be=$.circular;(ee=be?_.sankeyCircular().circularLinkGap(0):w.sankey()).iterations(p.sankeyIterations).size(te?[ce,de]:[de,ce]).nodeWidth(ae).nodePadding(ie).nodeId(function(Le){return Le.pointNumber}).nodeAlign(se).nodes(ge).links(ve);var me,Se,we,_e=ee();for(var oe in ee.nodePadding()<ie&&r.warn("node.pad was reduced to ",ee.nodePadding()," to fit within the figure."),$._groupLookup){var le,pe=parseInt($._groupLookup[oe]);for(me=0;me<_e.nodes.length;me++)if(_e.nodes[me].pointNumber===pe){le=_e.nodes[me];break}if(le){var Ee={pointNumber:parseInt(oe),x0:le.x0,x1:le.x1,y0:le.y0,y1:le.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};_e.nodes.unshift(Ee),le.childrenNodes.unshift(Ee)}}if(function(){for(me=0;me<_e.nodes.length;me++){var Le,Ie,he=_e.nodes[me],xe={};for(Se=0;Se<he.targetLinks.length;Se++)Le=(Ie=he.targetLinks[Se]).source.pointNumber+":"+Ie.target.pointNumber,xe.hasOwnProperty(Le)||(xe[Le]=[]),xe[Le].push(Ie);var ke=Object.keys(xe);for(Se=0;Se<ke.length;Se++){var ze=xe[Le=ke[Se]],Re=0,Oe={};for(we=0;we<ze.length;we++)Oe[(Ie=ze[we]).label]||(Oe[Ie.label]=0),Oe[Ie.label]+=Ie.value,Re+=Ie.value;for(we=0;we<ze.length;we++)(Ie=ze[we]).flow={value:Re,labelConcentration:Oe[Ie.label]/Re,concentration:Ie.value/Re,links:ze},Ie.concentrationscale&&(Ie.color=s(Ie.concentrationscale(Ie.flow.labelConcentration)))}var Ve=0;for(Se=0;Se<he.sourceLinks.length;Se++)Ve+=he.sourceLinks[Se].value;for(Se=0;Se<he.sourceLinks.length;Se++)(Ie=he.sourceLinks[Se]).concentrationOut=Ie.value/Ve;var qe=0;for(Se=0;Se<he.targetLinks.length;Se++)qe+=he.targetLinks[Se].value;for(Se=0;Se<he.targetLinks.length;Se++)(Ie=he.targetLinks[Se]).concenrationIn=Ie.value/qe}}(),J.node.x.length&&J.node.y.length){for(me=0;me<Math.min(J.node.x.length,J.node.y.length,_e.nodes.length);me++)if(J.node.x[me]&&J.node.y[me]){var Te=[J.node.x[me]*ce,J.node.y[me]*de];_e.nodes[me].x0=Te[0]-ae/2,_e.nodes[me].x1=Te[0]+ae/2;var Me=_e.nodes[me].y1-_e.nodes[me].y0;_e.nodes[me].y0=Te[1]-Me/2,_e.nodes[me].y1=Te[1]+Me/2}J.arrangement==="snap"&&function(Le){var Ie,he,xe=Le.map(function(Ve,qe){return{x0:Ve.x0,index:qe}}).sort(function(Ve,qe){return Ve.x0-qe.x0}),ke=[],ze=-1,Re=-1/0;for(me=0;me<xe.length;me++){var Oe=Le[xe[me].index];Oe.x0>Re+ae&&(ze+=1,Ie=Oe.x0),Re=Oe.x0,ke[ze]||(ke[ze]=[]),ke[ze].push(Oe),he=Ie-Oe.x0,Oe.x0+=he,Oe.x1+=he}return ke}(ge=_e.nodes).forEach(function(Le){var Ie,he,xe,ke=0,ze=Le.length;for(Le.sort(function(Re,Oe){return Re.y0-Oe.y0}),xe=0;xe<ze;++xe)(Ie=Le[xe]).y0>=ke||(he=ke-Ie.y0)>1e-6&&(Ie.y0+=he,Ie.y1+=he),ke=Ie.y1+ie}),ee.update(_e)}return{circular:be,key:ne,trace:J,guid:r.randstr(),horizontal:te,width:ce,height:de,nodePad:J.node.pad,nodeLineColor:J.node.line.color,nodeLineWidth:J.node.line.width,linkLineColor:J.link.line.color,linkLineWidth:J.link.line.width,linkArrowLength:J.link.arrowlen,valueFormat:J.valueformat,valueSuffix:J.valuesuffix,textFont:J.textfont,translateX:K.x[0]*q.width+q.margin.l,translateY:q.height-K.y[1]*q.height+q.margin.t,dragParallel:te?de:ce,dragPerpendicular:te?ce:de,arrangement:J.arrangement,sankey:ee,graph:_e,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function T(q,V,ne){var ee=s(V.color),$=s(V.hovercolor),J=V.source.label+"|"+V.target.label+"__"+ne;return V.trace=q.trace,V.curveNumber=q.trace.index,{circular:q.circular,key:J,traceId:q.key,pointNumber:V.pointNumber,link:V,tinyColorHue:n.tinyRGB(ee),tinyColorAlpha:ee.getAlpha(),tinyColorHoverHue:n.tinyRGB($),tinyColorHoverAlpha:$.getAlpha(),linkPath:h,linkLineColor:q.linkLineColor,linkLineWidth:q.linkLineWidth,linkArrowLength:q.linkArrowLength,valueFormat:q.valueFormat,valueSuffix:q.valueSuffix,sankey:q.sankey,parent:q,interactionState:q.interactionState,flow:V.flow}}function h(){return function(q){var V=q.linkArrowLength;if(q.link.circular)return function(me,Se){var we=me.width/2,_e=me.circularPathData;return me.circularLinkType==="top"?"M "+(_e.targetX-Se)+" "+(_e.targetY+we)+" L"+(_e.rightInnerExtent-Se)+" "+(_e.targetY+we)+"A"+(_e.rightLargeArcRadius+we)+" "+(_e.rightSmallArcRadius+we)+" 0 0 1 "+(_e.rightFullExtent-we-Se)+" "+(_e.targetY-_e.rightSmallArcRadius)+"L"+(_e.rightFullExtent-we-Se)+" "+_e.verticalRightInnerExtent+"A"+(_e.rightLargeArcRadius+we)+" "+(_e.rightLargeArcRadius+we)+" 0 0 1 "+(_e.rightInnerExtent-Se)+" "+(_e.verticalFullExtent-we)+"L"+_e.leftInnerExtent+" "+(_e.verticalFullExtent-we)+"A"+(_e.leftLargeArcRadius+we)+" "+(_e.leftLargeArcRadius+we)+" 0 0 1 "+(_e.leftFullExtent+we)+" "+_e.verticalLeftInnerExtent+"L"+(_e.leftFullExtent+we)+" "+(_e.sourceY-_e.leftSmallArcRadius)+"A"+(_e.leftLargeArcRadius+we)+" "+(_e.leftSmallArcRadius+we)+" 0 0 1 "+_e.leftInnerExtent+" "+(_e.sourceY+we)+"L"+_e.sourceX+" "+(_e.sourceY+we)+"L"+_e.sourceX+" "+(_e.sourceY-we)+"L"+_e.leftInnerExtent+" "+(_e.sourceY-we)+"A"+(_e.leftLargeArcRadius-we)+" "+(_e.leftSmallArcRadius-we)+" 0 0 0 "+(_e.leftFullExtent-we)+" "+(_e.sourceY-_e.leftSmallArcRadius)+"L"+(_e.leftFullExtent-we)+" "+_e.verticalLeftInnerExtent+"A"+(_e.leftLargeArcRadius-we)+" "+(_e.leftLargeArcRadius-we)+" 0 0 0 "+_e.leftInnerExtent+" "+(_e.verticalFullExtent+we)+"L"+(_e.rightInnerExtent-Se)+" "+(_e.verticalFullExtent+we)+"A"+(_e.rightLargeArcRadius-we)+" "+(_e.rightLargeArcRadius-we)+" 0 0 0 "+(_e.rightFullExtent+we-Se)+" "+_e.verticalRightInnerExtent+"L"+(_e.rightFullExtent+we-Se)+" "+(_e.targetY-_e.rightSmallArcRadius)+"A"+(_e.rightLargeArcRadius-we)+" "+(_e.rightSmallArcRadius-we)+" 0 0 0 "+(_e.rightInnerExtent-Se)+" "+(_e.targetY-we)+"L"+(_e.targetX-Se)+" "+(_e.targetY-we)+(Se>0?"L"+_e.targetX+" "+_e.targetY:"")+"Z":"M "+(_e.targetX-Se)+" "+(_e.targetY-we)+" L"+(_e.rightInnerExtent-Se)+" "+(_e.targetY-we)+"A"+(_e.rightLargeArcRadius+we)+" "+(_e.rightSmallArcRadius+we)+" 0 0 0 "+(_e.rightFullExtent-we-Se)+" "+(_e.targetY+_e.rightSmallArcRadius)+"L"+(_e.rightFullExtent-we-Se)+" "+_e.verticalRightInnerExtent+"A"+(_e.rightLargeArcRadius+we)+" "+(_e.rightLargeArcRadius+we)+" 0 0 0 "+(_e.rightInnerExtent-Se)+" "+(_e.verticalFullExtent+we)+"L"+_e.leftInnerExtent+" "+(_e.verticalFullExtent+we)+"A"+(_e.leftLargeArcRadius+we)+" "+(_e.leftLargeArcRadius+we)+" 0 0 0 "+(_e.leftFullExtent+we)+" "+_e.verticalLeftInnerExtent+"L"+(_e.leftFullExtent+we)+" "+(_e.sourceY+_e.leftSmallArcRadius)+"A"+(_e.leftLargeArcRadius+we)+" "+(_e.leftSmallArcRadius+we)+" 0 0 0 "+_e.leftInnerExtent+" "+(_e.sourceY-we)+"L"+_e.sourceX+" "+(_e.sourceY-we)+"L"+_e.sourceX+" "+(_e.sourceY+we)+"L"+_e.leftInnerExtent+" "+(_e.sourceY+we)+"A"+(_e.leftLargeArcRadius-we)+" "+(_e.leftSmallArcRadius-we)+" 0 0 1 "+(_e.leftFullExtent-we)+" "+(_e.sourceY+_e.leftSmallArcRadius)+"L"+(_e.leftFullExtent-we)+" "+_e.verticalLeftInnerExtent+"A"+(_e.leftLargeArcRadius-we)+" "+(_e.leftLargeArcRadius-we)+" 0 0 1 "+_e.leftInnerExtent+" "+(_e.verticalFullExtent-we)+"L"+(_e.rightInnerExtent-Se)+" "+(_e.verticalFullExtent-we)+"A"+(_e.rightLargeArcRadius-we)+" "+(_e.rightLargeArcRadius-we)+" 0 0 1 "+(_e.rightFullExtent+we-Se)+" "+_e.verticalRightInnerExtent+"L"+(_e.rightFullExtent+we-Se)+" "+(_e.targetY+_e.rightSmallArcRadius)+"A"+(_e.rightLargeArcRadius-we)+" "+(_e.rightSmallArcRadius-we)+" 0 0 1 "+(_e.rightInnerExtent-Se)+" "+(_e.targetY+we)+"L"+(_e.targetX-Se)+" "+(_e.targetY+we)+(Se>0?"L"+_e.targetX+" "+_e.targetY:"")+"Z"}(q.link,V);var ne=Math.abs((q.link.target.x0-q.link.source.x1)/2);V>ne&&(V=ne);var ee=q.link.source.x1,$=q.link.target.x0-V,J=A(ee,$),K=J(.5),te=J(.5),ie=q.link.y0-q.link.width/2,ae=q.link.y0+q.link.width/2,se=q.link.y1-q.link.width/2,ce=q.link.y1+q.link.width/2,de="M"+ee+","+ie,ge="C"+K+","+ie+" "+te+","+se+" "+$+","+se,ve="C"+te+","+ce+" "+K+","+ae+" "+ee+","+ae,be=V>0?"L"+($+V)+","+(se+q.link.width/2):"";return de+ge+(be+="L"+$+","+ce)+ve+"Z"}}function E(q,V){var ne=s(V.color),ee=p.nodePadAcross,$=q.nodePad/2;V.dx=V.x1-V.x0,V.dy=V.y1-V.y0;var J=V.dx,K=Math.max(.5,V.dy),te="node_"+V.pointNumber;return V.group&&(te=r.randstr()),V.trace=q.trace,V.curveNumber=q.trace.index,{index:V.pointNumber,key:te,partOfGroup:V.partOfGroup||!1,group:V.group,traceId:q.key,trace:q.trace,node:V,nodePad:q.nodePad,nodeLineColor:q.nodeLineColor,nodeLineWidth:q.nodeLineWidth,textFont:q.textFont,size:q.horizontal?q.height:q.width,visibleWidth:Math.ceil(J),visibleHeight:K,zoneX:-ee,zoneY:-$,zoneWidth:J+2*ee,zoneHeight:K+2*$,labelY:q.horizontal?V.dy/2+1:V.dx/2+1,left:V.originalLayer===1,sizeAcross:q.width,forceLayouts:q.forceLayouts,horizontal:q.horizontal,darkBackground:ne.getBrightness()<=128,tinyColorHue:n.tinyRGB(ne),tinyColorAlpha:ne.getAlpha(),valueFormat:q.valueFormat,valueSuffix:q.valueSuffix,sankey:q.sankey,graph:q.graph,arrangement:q.arrangement,uniqueNodeLabelPathId:[q.guid,q.key,te].join("_"),interactionState:q.interactionState,figure:q}}function k(q){q.attr("transform",function(V){return i(V.node.x0.toFixed(3),V.node.y0.toFixed(3))})}function L(q){q.call(k)}function P(q,V){q.call(L),V.attr("d",h())}function I(q){q.attr("width",function(V){return V.node.x1-V.node.x0}).attr("height",function(V){return V.visibleHeight})}function z(q){return q.link.width>1||q.linkLineWidth>0}function F(q){return i(q.translateX,q.translateY)+(q.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function U(q,V,ne){q.on(".basic",null).on("mouseover.basic",function(ee){ee.interactionState.dragInProgress||ee.partOfGroup||(ne.hover(this,ee,V),ee.interactionState.hovered=[this,ee])}).on("mousemove.basic",function(ee){ee.interactionState.dragInProgress||ee.partOfGroup||(ne.follow(this,ee),ee.interactionState.hovered=[this,ee])}).on("mouseout.basic",function(ee){ee.interactionState.dragInProgress||ee.partOfGroup||(ne.unhover(this,ee,V),ee.interactionState.hovered=!1)}).on("click.basic",function(ee){ee.interactionState.hovered&&(ne.unhover(this,ee,V),ee.interactionState.hovered=!1),ee.interactionState.dragInProgress||ee.partOfGroup||ne.select(this,ee,V)})}function R(q,V,ne,ee){var $=o.behavior.drag().origin(function(J){return{x:J.node.x0+J.visibleWidth/2,y:J.node.y0+J.visibleHeight/2}}).on("dragstart",function(J){if(J.arrangement!=="fixed"&&(r.ensureSingle(ee._fullLayout._infolayer,"g","dragcover",function(te){ee._fullLayout._dragCover=te}),r.raiseToTop(this),J.interactionState.dragInProgress=J.node,Z(J.node),J.interactionState.hovered&&(ne.nodeEvents.unhover.apply(0,J.interactionState.hovered),J.interactionState.hovered=!1),J.arrangement==="snap")){var K=J.traceId+"|"+J.key;J.forceLayouts[K]?J.forceLayouts[K].alpha(1):function(te,ie,ae,se){(function(de){for(var ge=0;ge<de.length;ge++)de[ge].y=(de[ge].y0+de[ge].y1)/2,de[ge].x=(de[ge].x0+de[ge].x1)/2})(ae.graph.nodes);var ce=ae.graph.nodes.filter(function(de){return de.originalX===ae.node.originalX}).filter(function(de){return!de.partOfGroup});ae.forceLayouts[ie]=M.forceSimulation(ce).alphaDecay(0).force("collide",M.forceCollide().radius(function(de){return de.dy/2+ae.nodePad/2}).strength(1).iterations(p.forceIterations)).force("constrain",function(de,ge,ve,be){return function(){for(var me=0,Se=0;Se<ve.length;Se++){var we=ve[Se];we===be.interactionState.dragInProgress?(we.x=we.lastDraggedX,we.y=we.lastDraggedY):(we.vx=(we.originalX-we.x)/p.forceTicksPerFrame,we.y=Math.min(be.size-we.dy/2,Math.max(we.dy/2,we.y))),me=Math.max(me,Math.abs(we.vx),Math.abs(we.vy))}!be.interactionState.dragInProgress&&me<.1&&be.forceLayouts[ge].alpha()>0&&be.forceLayouts[ge].alpha(0)}}(0,ie,ce,ae)).stop()}(0,K,J),function(te,ie,ae,se,ce){window.requestAnimationFrame(function de(){var ge;for(ge=0;ge<p.forceTicksPerFrame;ge++)ae.forceLayouts[se].tick();if(function(be){for(var me=0;me<be.length;me++)be[me].y0=be[me].y-be[me].dy/2,be[me].y1=be[me].y0+be[me].dy,be[me].x0=be[me].x-be[me].dx/2,be[me].x1=be[me].x0+be[me].dx}(ae.graph.nodes),ae.sankey.update(ae.graph),P(te.filter(B(ae)),ie),ae.forceLayouts[se].alpha()>0)window.requestAnimationFrame(de);else{var ve=ae.node.originalX;ae.node.x0=ve-ae.visibleWidth/2,ae.node.x1=ve+ae.visibleWidth/2,j(ae,ce)}})}(q,V,J,K,ee)}}).on("drag",function(J){if(J.arrangement!=="fixed"){var K=o.event.x,te=o.event.y;J.arrangement==="snap"?(J.node.x0=K-J.visibleWidth/2,J.node.x1=K+J.visibleWidth/2,J.node.y0=te-J.visibleHeight/2,J.node.y1=te+J.visibleHeight/2):(J.arrangement==="freeform"&&(J.node.x0=K-J.visibleWidth/2,J.node.x1=K+J.visibleWidth/2),te=Math.max(0,Math.min(J.size-J.visibleHeight/2,te)),J.node.y0=te-J.visibleHeight/2,J.node.y1=te+J.visibleHeight/2),Z(J.node),J.arrangement!=="snap"&&(J.sankey.update(J.graph),P(q.filter(B(J)),V))}}).on("dragend",function(J){if(J.arrangement!=="fixed"){J.interactionState.dragInProgress=!1;for(var K=0;K<J.node.childrenNodes.length;K++)J.node.childrenNodes[K].x=J.node.x,J.node.childrenNodes[K].y=J.node.y;J.arrangement!=="snap"&&j(J,ee)}});q.on(".drag",null).call($)}function j(q,V){for(var ne=[],ee=[],$=0;$<q.graph.nodes.length;$++){var J=(q.graph.nodes[$].x0+q.graph.nodes[$].x1)/2,K=(q.graph.nodes[$].y0+q.graph.nodes[$].y1)/2;ne.push(J/q.figure.width),ee.push(K/q.figure.height)}v.call("_guiRestyle",V,{"node.x":[ne],"node.y":[ee]},q.trace.index).then(function(){V._fullLayout._dragCover&&V._fullLayout._dragCover.remove()})}function Z(q){q.lastDraggedX=q.x0+q.dx/2,q.lastDraggedY=q.y0+q.dy/2}function B(q){return function(V){return V.node.originalX===q.node.originalX}}Y.exports=function(q,V,ne,ee,$){var J=q._context.staticPlot,K=!1;r.ensureSingle(q._fullLayout._infolayer,"g","first-render",function(){K=!0});var te=q._fullLayout._dragCover,ie=ne.filter(function(me){return f(me).trace.visible}).map(y.bind(null,ee)),ae=V.selectAll("."+p.cn.sankey).data(ie,c);ae.exit().remove(),ae.enter().append("g").classed(p.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",J?"none":"auto").attr("transform",F),ae.each(function(me,Se){q._fullData[Se]._sankey=me;var we="bgsankey-"+me.trace.uid+"-"+Se;r.ensureSingle(q._fullLayout._draggers,"rect",we),q._fullData[Se]._bgRect=o.select("."+we),q._fullData[Se]._bgRect.style("pointer-events",J?"none":"all").attr("width",me.width).attr("height",me.height).attr("x",me.translateX).attr("y",me.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),ae.transition().ease(p.ease).duration(p.duration).attr("transform",F);var se=ae.selectAll("."+p.cn.sankeyLinks).data(g,c);se.enter().append("g").classed(p.cn.sankeyLinks,!0).style("fill","none");var ce=se.selectAll("."+p.cn.sankeyLink).data(function(me){return me.graph.links.filter(function(Se){return Se.value}).map(T.bind(null,me))},c);ce.enter().append("path").classed(p.cn.sankeyLink,!0).call(U,ae,$.linkEvents),ce.style("stroke",function(me){return z(me)?n.tinyRGB(s(me.linkLineColor)):me.tinyColorHue}).style("stroke-opacity",function(me){return z(me)?n.opacity(me.linkLineColor):me.tinyColorAlpha}).style("fill",function(me){return me.tinyColorHue}).style("fill-opacity",function(me){return me.tinyColorAlpha}).style("stroke-width",function(me){return z(me)?me.linkLineWidth:1}).attr("d",h()),ce.style("opacity",function(){return q._context.staticPlot||K||te?1:0}).transition().ease(p.ease).duration(p.duration).style("opacity",1),ce.exit().transition().ease(p.ease).duration(p.duration).style("opacity",0).remove();var de=ae.selectAll("."+p.cn.sankeyNodeSet).data(g,c);de.enter().append("g").classed(p.cn.sankeyNodeSet,!0),de.style("cursor",function(me){switch(me.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var ge=de.selectAll("."+p.cn.sankeyNode).data(function(me){var Se=me.graph.nodes;return function(we){var _e,oe=[];for(_e=0;_e<we.length;_e++)we[_e].originalX=(we[_e].x0+we[_e].x1)/2,we[_e].originalY=(we[_e].y0+we[_e].y1)/2,oe.indexOf(we[_e].originalX)===-1&&oe.push(we[_e].originalX);for(oe.sort(function(le,pe){return le-pe}),_e=0;_e<we.length;_e++)we[_e].originalLayerIndex=oe.indexOf(we[_e].originalX),we[_e].originalLayer=we[_e].originalLayerIndex/(oe.length-1)}(Se),Se.map(E.bind(null,me))},c);ge.enter().append("g").classed(p.cn.sankeyNode,!0).call(k).style("opacity",function(me){return!q._context.staticPlot&&!K||me.partOfGroup?0:1}),ge.call(U,ae,$.nodeEvents).call(R,ce,$,q),ge.transition().ease(p.ease).duration(p.duration).call(k).style("opacity",function(me){return me.partOfGroup?0:1}),ge.exit().transition().ease(p.ease).duration(p.duration).style("opacity",0).remove();var ve=ge.selectAll("."+p.cn.nodeRect).data(g);ve.enter().append("rect").classed(p.cn.nodeRect,!0).call(I),ve.style("stroke-width",function(me){return me.nodeLineWidth}).style("stroke",function(me){return n.tinyRGB(s(me.nodeLineColor))}).style("stroke-opacity",function(me){return n.opacity(me.nodeLineColor)}).style("fill",function(me){return me.tinyColorHue}).style("fill-opacity",function(me){return me.tinyColorAlpha}),ve.transition().ease(p.ease).duration(p.duration).call(I);var be=ge.selectAll("."+p.cn.nodeLabel).data(g);be.enter().append("text").classed(p.cn.nodeLabel,!0).style("cursor","default"),be.attr("data-notex",1).text(function(me){return me.node.label}).each(function(me){var Se=o.select(this);a.font(Se,me.textFont),b.convertToTspans(Se,q)}).style("text-shadow",b.makeTextShadow(q._fullLayout.paper_bgcolor)).attr("text-anchor",function(me){return me.horizontal&&me.left?"end":"start"}).attr("transform",function(me){var Se=o.select(this),we=b.lineCount(Se),_e=me.textFont.size*((we-1)*x-m),oe=me.nodeLineWidth/2+3,le=((me.horizontal?me.visibleHeight:me.visibleWidth)-_e)/2;me.horizontal&&(me.left?oe=-oe:oe+=me.visibleWidth);var pe=me.horizontal?"":"scale(-1,1)"+l(90);return i(me.horizontal?oe:le,me.horizontal?le:oe)+pe}),be.transition().ease(p.ease).duration(p.duration)}},81128:function(Y){Y.exports=function(O,e){for(var M=[],A=O.cd[0].trace,o=A._sankey.graph.nodes,w=0;w<o.length;w++){var _=o[w];if(!_.partOfGroup){var p=[(_.x0+_.x1)/2,(_.y0+_.y1)/2];A.orientation==="v"&&p.reverse(),e&&e.contains(p,!1,w,O)&&M.push({pointNumber:_.pointNumber})}}return M}},20148:function(Y,O,e){var M=e(3400);Y.exports=function(A,o){for(var w=0;w<A.length;w++)A[w].i=w;M.mergeArray(o.text,A,"tx"),M.mergeArray(o.texttemplate,A,"txt"),M.mergeArray(o.hovertext,A,"htx"),M.mergeArray(o.customdata,A,"data"),M.mergeArray(o.textposition,A,"tp"),o.textfont&&(M.mergeArrayCastPositive(o.textfont.size,A,"ts"),M.mergeArray(o.textfont.color,A,"tc"),M.mergeArray(o.textfont.family,A,"tf"));var _=o.marker;if(_){M.mergeArrayCastPositive(_.size,A,"ms"),M.mergeArrayCastPositive(_.opacity,A,"mo"),M.mergeArray(_.symbol,A,"mx"),M.mergeArray(_.angle,A,"ma"),M.mergeArray(_.standoff,A,"mf"),M.mergeArray(_.color,A,"mc");var p=_.line;_.line&&(M.mergeArray(p.color,A,"mlc"),M.mergeArrayCastPositive(p.width,A,"mlw"));var s=_.gradient;s&&s.type!=="none"&&(M.mergeArray(s.type,A,"mgt"),M.mergeArray(s.color,A,"mgc"))}}},52904:function(Y,O,e){var M=e(29736).axisHoverFormat,A=e(21776).Gw,o=e(21776).Ks,w=e(49084),_=e(25376),p=e(98192).u,s=e(98192).c,n=e(43616),a=e(88200),r=e(92880).extendFlat;Y.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:M("x"),yhoverformat:M("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:A({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:o({},{keys:a.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:r({},p,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:s,marker:r({symbol:{valType:"enumerated",values:n.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:r({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},w("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},w("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:_({editType:"calc",colorEditType:"style",arrayOk:!0})}},16356:function(Y,O,e){var M=e(38248),A=e(3400),o=e(54460),w=e(1220),_=e(39032).BADNUM,p=e(43028),s=e(90136),n=e(20148),a=e(4500);function r(g,f,b,v,d,m,x){var y=f._length,T=g._fullLayout,h=b._id,E=v._id,k=T._firstScatter[u(f)]===f.uid,L=(c(f,T,b,v)||{}).orientation,P=f.fill;b._minDtick=0,v._minDtick=0;var I={padded:!0},z={padded:!0};x&&(I.ppad=z.ppad=x);var F=y<2||d[0]!==d[y-1]||m[0]!==m[y-1];F&&(P==="tozerox"||P==="tonextx"&&(k||L==="h"))?I.tozero=!0:(f.error_y||{}).visible||P!=="tonexty"&&P!=="tozeroy"&&(p.hasMarkers(f)||p.hasText(f))||(I.padded=!1,I.ppad=0),F&&(P==="tozeroy"||P==="tonexty"&&(k||L==="v"))?z.tozero=!0:P!=="tonextx"&&P!=="tozerox"||(z.padded=!1),h&&(f._extremes[h]=o.findExtremes(b,d,I)),E&&(f._extremes[E]=o.findExtremes(v,m,z))}function i(g,f){if(p.hasMarkers(g)){var b,v=g.marker,d=1.6*(g.marker.sizeref||1);if(b=g.marker.sizemode==="area"?function(h){return Math.max(Math.sqrt((h||0)/d),3)}:function(h){return Math.max((h||0)/d,3)},A.isArrayOrTypedArray(v.size)){var m={type:"linear"};o.setConvert(m);for(var x=m.makeCalcdata(g.marker,"size"),y=new Array(f),T=0;T<f;T++)y[T]=b(x[T]);return y}return b(v.size)}}function l(g,f){var b=u(f),v=g._firstScatter;v[b]||(v[b]=f.uid)}function u(g){var f=g.stackgroup;return g.xaxis+g.yaxis+g.type+(f?"-"+f:"")}function c(g,f,b,v){var d=g.stackgroup;if(d){var m=f._scatterStackOpts[b._id+v._id][d],x=m.orientation==="v"?v:b;return x.type==="linear"||x.type==="log"?m:void 0}}Y.exports={calc:function(g,f){var b,v,d,m,x,y,T=g._fullLayout,h=f._xA=o.getFromId(g,f.xaxis||"x","x"),E=f._yA=o.getFromId(g,f.yaxis||"y","y"),k=h.makeCalcdata(f,"x"),L=E.makeCalcdata(f,"y"),P=w(f,h,"x",k),I=w(f,E,"y",L),z=P.vals,F=I.vals,U=f._length,R=new Array(U),j=f.ids,Z=c(f,T,h,E),B=!1;l(T,f);var q,V="x",ne="y";Z?(A.pushUnique(Z.traceIndices,f._expandedIndex),(b=Z.orientation==="v")?(ne="s",q="x"):(V="s",q="y"),x=Z.stackgaps==="interpolate"):r(g,f,h,E,z,F,i(f,U));var ee=!!f.xperiodalignment,$=!!f.yperiodalignment;for(v=0;v<U;v++){var J=R[v]={},K=M(z[v]),te=M(F[v]);K&&te?(J[V]=z[v],J[ne]=F[v],ee&&(J.orig_x=k[v],J.xEnd=P.ends[v],J.xStart=P.starts[v]),$&&(J.orig_y=L[v],J.yEnd=I.ends[v],J.yStart=I.starts[v])):Z&&(b?K:te)?(J[q]=b?z[v]:F[v],J.gap=!0,x?(J.s=_,B=!0):J.s=0):J[V]=J[ne]=_,j&&(J.id=String(j[v]))}if(n(R,f),s(g,f),a(R,f),Z){for(v=0;v<R.length;)R[v][q]===_?R.splice(v,1):v++;if(A.sort(R,function(ce,de){return ce[q]-de[q]||ce.i-de.i}),B){for(v=0;v<R.length-1&&R[v].gap;)v++;for((y=R[v].s)||(y=R[v].s=0),d=0;d<v;d++)R[d].s=y;for(m=R.length-1;m>v&&R[m].gap;)m--;for(y=R[m].s,d=R.length-1;d>m;d--)R[d].s=y;for(;v<m;)if(R[++v].gap){for(d=v+1;R[d].gap;)d++;for(var ie=R[v-1][q],ae=R[v-1].s,se=(R[d].s-ae)/(R[d][q]-ie);v<d;)R[v].s=ae+(R[v][q]-ie)*se,v++}}}return R},calcMarkerSize:i,calcAxisExpansion:r,setFirstScatter:l,getStackOpts:c}},4500:function(Y,O,e){var M=e(3400);Y.exports=function(A,o){M.isArrayOrTypedArray(o.selectedpoints)&&M.tagSelected(A,o)}},90136:function(Y,O,e){var M=e(94288).hasColorscale,A=e(47128),o=e(43028);Y.exports=function(w,_){o.hasLines(_)&&M(_,"line")&&A(w,_,{vals:_.line.color,containerStr:"line",cLetter:"c"}),o.hasMarkers(_)&&(M(_,"marker")&&A(w,_,{vals:_.marker.color,containerStr:"marker",cLetter:"c"}),M(_,"marker.line")&&A(w,_,{vals:_.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},88200:function(Y){Y.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},96664:function(Y,O,e){var M=e(16356),A=e(96376).setGroupPositions;function o(w,_,p,s,n,a,r){n[s]=!0;var i={i:null,gap:!0,s:0};if(i[r]=p,w.splice(_,0,i),_&&p===w[_-1][r]){var l=w[_-1];i.s=l.s,i.i=l.i,i.gap=l.gap}else a&&(i.s=function(u,c,g,f){var b=u[c-1],v=u[c+1];return v?b?b.s+(v.s-b.s)*(g-b[f])/(v[f]-b[f]):v.s:b.s}(w,_,p,r));_||(w[0].t=w[1].t,w[0].trace=w[1].trace,delete w[1].t,delete w[1].trace)}Y.exports=function(w,_){w._fullLayout.scattermode==="group"&&function(q,V){for(var ne=V.xaxis,ee=V.yaxis,$=q._fullLayout,J=q._fullData,K=q.calcdata,te=[],ie=[],ae=0;ae<J.length;ae++){var se=J[ae];se.visible===!0&&se.type==="scatter"&&se.xaxis===ne._id&&se.yaxis===ee._id&&(se.orientation==="h"?te.push(K[ae]):se.orientation==="v"&&ie.push(K[ae]))}var ce={mode:$.scattermode,gap:$.scattergap};A(q,ne,ee,ie,ce),A(q,ee,ne,te,ce)}(w,_);var p=_.xaxis,s=_.yaxis,n=p._id+s._id,a=w._fullLayout._scatterStackOpts[n];if(a){var r,i,l,u,c,g,f,b,v,d,m,x,y,T,h,E=w.calcdata;for(var k in a){var L=(d=a[k]).traceIndices;if(L.length){for(m=d.stackgaps==="interpolate",x=d.groupnorm,d.orientation==="v"?(y="x",T="y"):(y="y",T="x"),h=new Array(L.length),r=0;r<h.length;r++)h[r]=!1;g=E[L[0]];var P=new Array(g.length);for(r=0;r<g.length;r++)P[r]=g[r][y];for(r=1;r<L.length;r++){for(c=E[L[r]],i=l=0;i<c.length;i++){for(f=c[i][y];f>P[l]&&l<P.length;l++)o(c,i,P[l],r,h,m,y),i++;if(f!==P[l]){for(u=0;u<r;u++)o(E[L[u]],l,f,u,h,m,y);P.splice(l,0,f)}l++}for(;l<P.length;l++)o(c,i,P[l],r,h,m,y),i++}var I=P.length;for(i=0;i<g.length;i++){for(b=g[i][T]=g[i].s,r=1;r<L.length;r++)(c=E[L[r]])[0].trace._rawLength=c[0].trace._length,c[0].trace._length=I,b+=c[i].s,c[i][T]=b;if(x)for(v=(x==="fraction"?b:b/100)||1,r=0;r<L.length;r++){var z=E[L[r]][i];z[T]/=v,z.sNorm=z.s/v}}for(r=0;r<L.length;r++){var F=(c=E[L[r]])[0].trace,U=M.calcMarkerSize(F,F._rawLength),R=Array.isArray(U);if(U&&h[r]||R){var j=U;for(U=new Array(I),i=0;i<I;i++)U[i]=c[i].gap?0:R?j[c[i].i]:j}var Z=new Array(I),B=new Array(I);for(i=0;i<I;i++)Z[i]=c[i].x,B[i]=c[i].y;M.calcAxisExpansion(w,F,p,s,Z,B,U),c[0].t.orientation=d.orientation}}}}}},35036:function(Y,O,e){var M=e(3400),A=e(20011),o=e(52904);Y.exports=function(w,_){var p,s,n;function a(c){return M.coerce(s._input,s,o,c)}if(_.scattermode==="group")for(n=0;n<w.length;n++)(s=w[n]).type==="scatter"&&(p=s._input,A(p,s,_,a));for(n=0;n<w.length;n++){var r=w[n];if(r.type==="scatter"){var i=r.fill;if(i!=="none"&&i!=="toself"&&(r.opacity=void 0,i==="tonexty"||i==="tonextx"))for(var l=n-1;l>=0;l--){var u=w[l];if(u.type==="scatter"&&u.xaxis===r.xaxis&&u.yaxis===r.yaxis){u.opacity=void 0;break}}}}}},18800:function(Y,O,e){var M=e(3400),A=e(24040),o=e(52904),w=e(88200),_=e(43028),p=e(43980),s=e(31147),n=e(43912),a=e(74428),r=e(66828),i=e(11731),l=e(124),u=e(70840),c=e(3400).coercePattern;Y.exports=function(g,f,b,v){function d(L,P){return M.coerce(g,f,o,L,P)}var m=p(g,f,v,d);if(m||(f.visible=!1),f.visible){s(g,f,v,d),d("xhoverformat"),d("yhoverformat");var x=n(g,f,v,d);v.scattermode==="group"&&f.orientation===void 0&&d("orientation","v");var y=!x&&m<w.PTS_LINESONLY?"lines+markers":"lines";d("text"),d("hovertext"),d("mode",y),_.hasMarkers(f)&&a(g,f,b,v,d,{gradient:!0}),_.hasLines(f)&&(r(g,f,b,v,d,{backoff:!0}),i(g,f,d),d("connectgaps"),d("line.simplify")),_.hasText(f)&&(d("texttemplate"),l(g,f,v,d));var T=[];(_.hasMarkers(f)||_.hasText(f))&&(d("cliponaxis"),d("marker.maxdisplayed"),T.push("points")),d("fill",x?x.fillDflt:"none"),f.fill!=="none"&&(u(g,f,b,d),_.hasLines(f)||i(g,f,d),c(d,"fillpattern",f.fillcolor,!1));var h=(f.line||{}).color,E=(f.marker||{}).color;f.fill!=="tonext"&&f.fill!=="toself"||T.push("fills"),d("hoveron",T.join("+")||"points"),f.hoveron!=="fills"&&d("hovertemplate");var k=A.getComponentMethod("errorbars","supplyDefaults");k(g,f,h||E||b,{axis:"y"}),k(g,f,h||E||b,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(f,d)}}},70840:function(Y,O,e){var M=e(76308),A=e(3400).isArrayOrTypedArray;Y.exports=function(o,w,_,p){var s=!1;if(w.marker){var n=w.marker.color,a=(w.marker.line||{}).color;n&&!A(n)?s=n:a&&!A(a)&&(s=a)}p("fillcolor",M.addOpacity((w.line||{}).color||s||_,.5))}},76688:function(Y,O,e){var M=e(54460);Y.exports=function(A,o,w){var _={},p={_fullLayout:w},s=M.getFromTrace(p,o,"x"),n=M.getFromTrace(p,o,"y"),a=A.orig_x;a===void 0&&(a=A.x);var r=A.orig_y;return r===void 0&&(r=A.y),_.xLabel=M.tickText(s,s.c2l(a),!0).text,_.yLabel=M.tickText(n,n.c2l(r),!0).text,_}},44928:function(Y,O,e){var M=e(76308),A=e(43028);Y.exports=function(o,w){var _,p;if(o.mode==="lines")return(_=o.line.color)&&M.opacity(_)?_:o.fillcolor;if(o.mode==="none")return o.fill?o.fillcolor:"";var s=w.mcc||(o.marker||{}).color,n=w.mlcc||((o.marker||{}).line||{}).color;return(p=s&&M.opacity(s)?s:n&&M.opacity(n)&&(w.mlw||((o.marker||{}).line||{}).width)?n:"")?M.opacity(p)<.3?M.addOpacity(p,.3):p:(_=(o.line||{}).color)&&M.opacity(_)&&A.hasLines(o)&&o.line.width?_:o.fillcolor}},20011:function(Y,O,e){var M=e(71888).getAxisGroup;Y.exports=function(A,o,w,_){var p=o.orientation,s=o[{v:"x",h:"y"}[p]+"axis"],n=M(w,s)+p,a=w._alignmentOpts||{},r=_("alignmentgroup"),i=a[n];i||(i=a[n]={});var l=i[r];l?l.traces.push(o):l=i[r]={traces:[o],alignmentIndex:Object.keys(i).length,offsetGroups:{}};var u=_("offsetgroup"),c=l.offsetGroups,g=c[u];u&&(g||(g=c[u]={offsetIndex:Object.keys(c).length}),o._offsetIndex=g.offsetIndex)}},98723:function(Y,O,e){var M=e(3400),A=e(93024),o=e(24040),w=e(44928),_=e(76308),p=M.fillText;Y.exports=function(s,n,a,r){var i=s.cd,l=i[0].trace,u=s.xa,c=s.ya,g=u.c2p(n),f=c.c2p(a),b=[g,f],v=l.hoveron||"",d=l.mode.indexOf("markers")!==-1?3:.5,m=!!l.xperiodalignment,x=!!l.yperiodalignment;if(v.indexOf("points")!==-1){var y=function(Z){var B=Math.max(d,Z.mrc||0),q=u.c2p(Z.x)-g,V=c.c2p(Z.y)-f;return Math.max(Math.sqrt(q*q+V*V)-B,1-d/B)},T=A.getDistanceFunction(r,function(Z){if(m){var B=u.c2p(Z.xStart),q=u.c2p(Z.xEnd);return g>=Math.min(B,q)&&g<=Math.max(B,q)?0:1/0}var V=Math.max(3,Z.mrc||0),ne=1-1/V,ee=Math.abs(u.c2p(Z.x)-g);return ee<V?ne*ee/V:ee-V+ne},function(Z){if(x){var B=c.c2p(Z.yStart),q=c.c2p(Z.yEnd);return f>=Math.min(B,q)&&f<=Math.max(B,q)?0:1/0}var V=Math.max(3,Z.mrc||0),ne=1-1/V,ee=Math.abs(c.c2p(Z.y)-f);return ee<V?ne*ee/V:ee-V+ne},y);if(A.getClosest(i,T,s),s.index!==!1){var h=i[s.index],E=u.c2p(h.x,!0),k=c.c2p(h.y,!0),L=h.mrc||1;s.index=h.i;var P=i[0].t.orientation,I=P&&(h.sNorm||h.s),z=P==="h"?I:h.orig_x!==void 0?h.orig_x:h.x,F=P==="v"?I:h.orig_y!==void 0?h.orig_y:h.y;return M.extendFlat(s,{color:w(l,h),x0:E-L,x1:E+L,xLabelVal:z,y0:k-L,y1:k+L,yLabelVal:F,spikeDistance:y(h),hovertemplate:l.hovertemplate}),p(h,l,s),o.getComponentMethod("errorbars","hoverInfo")(h,l,s),[s]}}function U(Z){if(!Z)return!1;var B=Z.node();try{var q=new DOMPoint(b[0],b[1]);return B.isPointInFill(q)}catch{var V=B.ownerSVGElement.createSVGPoint();return V.x=b[0],V.y=b[1],B.isPointInFill(V)}}if(v.indexOf("fills")!==-1&&l._fillElement&&U(l._fillElement)&&!U(l._fillExclusionElement)){var R=function(Z){var B,q,V,ne,ee,$,J,K,te,ie=[],ae=1/0,se=-1/0,ce=1/0,de=-1/0;for(B=0;B<Z.length;B++){var ge=Z[B];ge.contains(b)&&(ie.push(ge),ce=Math.min(ce,ge.ymin),de=Math.max(de,ge.ymax))}if(ie.length===0)return null;for(q=((ce=Math.max(ce,0))+(de=Math.min(de,c._length)))/2,B=0;B<ie.length;B++)for(ne=ie[B].pts,V=1;V<ne.length;V++)(K=ne[V-1][1])>q!=(te=ne[V][1])>=q&&($=ne[V-1][0],J=ne[V][0],te-K&&(ee=$+(J-$)*(q-K)/(te-K),ae=Math.min(ae,ee),se=Math.max(se,ee)));return{x0:ae=Math.max(ae,0),x1:se=Math.min(se,u._length),y0:q,y1:q}}(l._polygons);R===null&&(R={x0:b[0],x1:b[0],y0:b[1],y1:b[1]});var j=_.defaultLine;return _.opacity(l.fillcolor)?j=l.fillcolor:_.opacity((l.line||{}).color)&&(j=l.line.color),M.extendFlat(s,{distance:s.maxHoverDistance,x0:R.x0,x1:R.x1,y0:R.y0,y1:R.y1,color:j,hovertemplate:!1}),delete s.index,l.text&&!M.isArrayOrTypedArray(l.text)?s.text=String(l.text):s.text=l.name,[s]}}},65875:function(Y,O,e){var M=e(43028);Y.exports={hasLines:M.hasLines,hasMarkers:M.hasMarkers,hasText:M.hasText,isBubble:M.isBubble,attributes:e(52904),layoutAttributes:e(55308),supplyDefaults:e(18800),crossTraceDefaults:e(35036),supplyLayoutDefaults:e(59748),calc:e(16356).calc,crossTraceCalc:e(96664),arraysToCalcdata:e(20148),plot:e(96504),colorbar:e(5528),formatLabels:e(76688),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(98723),selectPoints:e(91560),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e(57952),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},55308:function(Y){Y.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},59748:function(Y,O,e){var M=e(3400),A=e(55308);Y.exports=function(o,w){var _,p=w.barmode==="group";w.scattermode==="group"&&(_=p?w.bargap:.2,M.coerce(o,w,A,"scattergap",_))}},66828:function(Y,O,e){var M=e(3400).isArrayOrTypedArray,A=e(94288).hasColorscale,o=e(27260);Y.exports=function(w,_,p,s,n,a){a||(a={});var r=(w.marker||{}).color;r&&r._inputArray&&(r=r._inputArray),n("line.color",p),A(w,"line")?o(w,_,s,n,{prefix:"line.",cLetter:"c"}):n("line.color",!M(r)&&r||p),n("line.width"),a.noDash||n("line.dash"),a.backoff&&n("line.backoff")}},52340:function(Y,O,e){var M=e(43616),A=e(39032),o=A.BADNUM,w=A.LOG_CLIP,_=w+.5,p=w-.5,s=e(3400),n=s.segmentsIntersect,a=s.constrain,r=e(88200);Y.exports=function(i,l){var u,c,g,f,b,v,d,m,x,y,T,h,E,k,L,P,I,z,F=l.trace||{},U=l.xaxis,R=l.yaxis,j=U.type==="log",Z=R.type==="log",B=U._length,q=R._length,V=l.backoff,ne=F.marker,ee=l.connectGaps,$=l.baseTolerance,J=l.shape,K=J==="linear",te=F.fill&&F.fill!=="none",ie=[],ae=r.minTolerance,se=i.length,ce=new Array(se),de=0;function ge(It){var Ge=i[It];if(!Ge)return!1;var Ye=l.linearized?U.l2p(Ge.x):U.c2p(Ge.x),Ne=l.linearized?R.l2p(Ge.y):R.c2p(Ge.y);if(Ye===o){if(j&&(Ye=U.c2p(Ge.x,!0)),Ye===o)return!1;Z&&Ne===o&&(Ye*=Math.abs(U._m*q*(U._m>0?_:p)/(R._m*B*(R._m>0?_:p)))),Ye*=1e3}if(Ne===o){if(Z&&(Ne=R.c2p(Ge.y,!0)),Ne===o)return!1;Ne*=1e3}return[Ye,Ne]}function ve(It,Ge,Ye,Ne){var We=Ye-It,st=Ne-Ge,it=.5-It,Fe=.5-Ge,Be=We*We+st*st,at=We*it+st*Fe;if(at>0&&at<Be){var Ze=it*st-Fe*We;if(Ze*Ze<Be)return!0}}function be(It,Ge){var Ye=It[0]/B,Ne=It[1]/q,We=Math.max(0,-Ye,Ye-1,-Ne,Ne-1);return We&&I!==void 0&&ve(Ye,Ne,I,z)&&(We=0),We&&Ge&&ve(Ye,Ne,Ge[0]/B,Ge[1]/q)&&(We=0),(1+r.toleranceGrowth*We)*$}function me(It,Ge){var Ye=It[0]-Ge[0],Ne=It[1]-Ge[1];return Math.sqrt(Ye*Ye+Ne*Ne)}var Se,we,_e,oe,le,pe,Ee,Te=r.maxScreensAway,Me=-B*Te,Le=B*(1+Te),Ie=-q*Te,he=q*(1+Te),xe=[[Me,Ie,Le,Ie],[Le,Ie,Le,he],[Le,he,Me,he],[Me,he,Me,Ie]];function ke(It){if(It[0]<Me||It[0]>Le||It[1]<Ie||It[1]>he)return[a(It[0],Me,Le),a(It[1],Ie,he)]}function ze(It,Ge){return It[0]===Ge[0]&&(It[0]===Me||It[0]===Le)||It[1]===Ge[1]&&(It[1]===Ie||It[1]===he)||void 0}function Re(It,Ge,Ye){return function(Ne,We){var st=ke(Ne),it=ke(We),Fe=[];if(st&&it&&ze(st,it))return Fe;st&&Fe.push(st),it&&Fe.push(it);var Be=2*s.constrain((Ne[It]+We[It])/2,Ge,Ye)-((st||Ne)[It]+(it||We)[It]);return Be&&((st&&it?Be>0==st[It]>it[It]?st:it:st||it)[It]+=Be),Fe}}function Oe(It){var Ge=It[0],Ye=It[1],Ne=Ge===ce[de-1][0],We=Ye===ce[de-1][1];if(!Ne||!We)if(de>1){var st=Ge===ce[de-2][0],it=Ye===ce[de-2][1];Ne&&(Ge===Me||Ge===Le)&&st?it?de--:ce[de-1]=It:We&&(Ye===Ie||Ye===he)&&it?st?de--:ce[de-1]=It:ce[de++]=It}else ce[de++]=It}function Ve(It){ce[de-1][0]!==It[0]&&ce[de-1][1]!==It[1]&&Oe([_e,oe]),Oe(It),le=null,_e=oe=0}J==="linear"||J==="spline"?Ee=function(It,Ge){for(var Ye=[],Ne=0,We=0;We<4;We++){var st=xe[We],it=n(It[0],It[1],Ge[0],Ge[1],st[0],st[1],st[2],st[3]);it&&(!Ne||Math.abs(it.x-Ye[0][0])>1||Math.abs(it.y-Ye[0][1])>1)&&(it=[it.x,it.y],Ne&&me(it,It)<me(Ye[0],It)?Ye.unshift(it):Ye.push(it),Ne++)}return Ye}:J==="hv"||J==="vh"?Ee=function(It,Ge){var Ye=[],Ne=ke(It),We=ke(Ge);return Ne&&We&&ze(Ne,We)||(Ne&&Ye.push(Ne),We&&Ye.push(We)),Ye}:J==="hvh"?Ee=Re(0,Me,Le):J==="vhv"&&(Ee=Re(1,Ie,he));var qe=s.isArrayOrTypedArray(ne);function Je(It){if(It&&V&&(It.i=u,It.d=i,It.trace=F,It.marker=qe?ne[It.i]:ne,It.backoff=V),I=It[0]/B,z=It[1]/q,Se=It[0]<Me?Me:It[0]>Le?Le:0,we=It[1]<Ie?Ie:It[1]>he?he:0,Se||we){if(de)if(le){var Ge=Ee(le,It);Ge.length>1&&(Ve(Ge[0]),ce[de++]=Ge[1])}else pe=Ee(ce[de-1],It)[0],ce[de++]=pe;else ce[de++]=[Se||It[0],we||It[1]];var Ye=ce[de-1];Se&&we&&(Ye[0]!==Se||Ye[1]!==we)?(le&&(_e!==Se&&oe!==we?Oe(_e&&oe?(Ne=le,st=(We=It)[0]-Ne[0],it=(We[1]-Ne[1])/st,(Ne[1]*We[0]-We[1]*Ne[0])/st>0?[it>0?Me:Le,he]:[it>0?Le:Me,Ie]):[_e||Se,oe||we]):_e&&oe&&Oe([_e,oe])),Oe([Se,we])):_e-Se&&oe-we&&Oe([Se||_e,we||oe]),le=It,_e=Se,oe=we}else le&&Ve(Ee(le,It)[0]),ce[de++]=It;var Ne,We,st,it}for(u=0;u<se;u++)if(c=ge(u)){for(de=0,le=null,Je(c),u++;u<se;u++){if(!(f=ge(u))){if(ee)continue;break}if(K&&l.simplify){var ot=ge(u+1);if(y=me(f,c),te&&(de===0||de===se-1)||!(y<be(f,ot)*ae)){for(m=[(f[0]-c[0])/y,(f[1]-c[1])/y],b=c,T=y,h=k=L=0,d=!1,g=f,u++;u<i.length;u++){if(v=ot,ot=ge(u+1),!v){if(ee)continue;break}if(P=(x=[v[0]-c[0],v[1]-c[1]])[0]*m[1]-x[1]*m[0],k=Math.min(k,P),(L=Math.max(L,P))-k>be(v,ot))break;g=v,(E=x[0]*m[0]+x[1]*m[1])>T?(T=E,f=v,d=!1):E<h&&(h=E,b=v,d=!0)}if(d?(Je(f),g!==b&&Je(b)):(b!==c&&Je(b),g!==f&&Je(f)),Je(g),u>=i.length||!v)break;Je(v),c=v}}else Je(f)}le&&Oe([_e||le[0],oe||le[1]]),ie.push(ce.slice(0,de))}var rt=J.slice(J.length-1);if(V&&rt!=="h"&&rt!=="v"){for(var dt=!1,_t=-1,yt=[],et=0;et<ie.length;et++)for(var nt=0;nt<ie[et].length-1;nt++){var At=ie[et][nt],Rt=ie[et][nt+1],Ft=M.applyBackoff(Rt,At);Ft[0]===Rt[0]&&Ft[1]===Rt[1]||(dt=!0),yt[_t+1]||(yt[++_t]=[At,[Ft[0],Ft[1]]])}return dt?yt:ie}return ie}},11731:function(Y){Y.exports=function(O,e,M){M("line.shape")==="spline"&&M("line.smoothing")}},14328:function(Y){var O={tonextx:1,tonexty:1,tonext:1};Y.exports=function(e,M,A){var o,w,_,p,s,n={},a=!1,r=-1,i=0,l=-1;for(w=0;w<A.length;w++)(_=(o=A[w][0].trace).stackgroup||"")?_ in n?s=n[_]:(s=n[_]=i,i++):o.fill in O&&l>=0?s=l:(s=l=i,i++),s<r&&(a=!0),o._groupIndex=r=s;var u=A.slice();a&&u.sort(function(g,f){var b=g[0].trace,v=f[0].trace;return b._groupIndex-v._groupIndex||b.index-v.index});var c={};for(w=0;w<u.length;w++)_=(o=u[w][0].trace).stackgroup||"",o.visible===!0?(o._nexttrace=null,o.fill in O&&(p=c[_],o._prevtrace=p||null,p&&(p._nexttrace=o)),o._ownfill=o.fill&&(o.fill.substr(0,6)==="tozero"||o.fill==="toself"||o.fill.substr(0,2)==="to"&&!o._prevtrace),c[_]=o):o._prevtrace=o._nexttrace=o._ownfill=null;return u}},7152:function(Y,O,e){var M=e(38248);Y.exports=function(A,o){o||(o=2);var w=A.marker,_=w.sizeref||1,p=w.sizemin||0,s=w.sizemode==="area"?function(n){return Math.sqrt(n/_)}:function(n){return n/_};return function(n){var a=s(n/o);return M(a)&&a>0?Math.max(a,p):0}}},5528:function(Y){Y.exports={container:"marker",min:"cmin",max:"cmax"}},74428:function(Y,O,e){var M=e(76308),A=e(94288).hasColorscale,o=e(27260),w=e(43028);Y.exports=function(_,p,s,n,a,r){var i=w.isBubble(_),l=(_.line||{}).color;r=r||{},l&&(s=l),a("marker.symbol"),a("marker.opacity",i?.7:1),a("marker.size"),r.noAngle||(a("marker.angle"),r.noAngleRef||a("marker.angleref"),r.noStandOff||a("marker.standoff")),a("marker.color",s),A(_,"marker")&&o(_,p,n,a,{prefix:"marker.",cLetter:"c"}),r.noSelect||(a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size")),r.noLine||(a("marker.line.color",l&&!Array.isArray(l)&&p.marker.color!==l?l:i?M.background:M.defaultLine),A(_,"marker.line")&&o(_,p,n,a,{prefix:"marker.line.",cLetter:"c"}),a("marker.line.width",i?1:0)),i&&(a("marker.sizeref"),a("marker.sizemin"),a("marker.sizemode")),r.gradient&&a("marker.gradient.type")!=="none"&&a("marker.gradient.color")}},31147:function(Y,O,e){var M=e(3400).dateTick0,A=e(39032).ONEWEEK;function o(w,_){return M(_,w%A==0?1:0)}Y.exports=function(w,_,p,s,n){if(n||(n={x:!0,y:!0}),n.x){var a=s("xperiod");a&&(s("xperiod0",o(a,_.xcalendar)),s("xperiodalignment"))}if(n.y){var r=s("yperiod");r&&(s("yperiod0",o(r,_.ycalendar)),s("yperiodalignment"))}}},96504:function(Y,O,e){var M=e(33428),A=e(24040),o=e(3400),w=o.ensureSingle,_=o.identity,p=e(43616),s=e(43028),n=e(52340),a=e(14328),r=e(92065).tester;function i(l,u,c,g,f,b,v){var d,m=l._context.staticPlot;(function(Oe,Ve,qe,Je,ot){var rt=qe.xaxis,dt=qe.yaxis,_t=M.extent(o.simpleMap(rt.range,rt.r2c)),yt=M.extent(o.simpleMap(dt.range,dt.r2c)),et=Je[0].trace;if(s.hasMarkers(et)){var nt=et.marker.maxdisplayed;if(nt!==0){var At=Je.filter(function(Ge){return Ge.x>=_t[0]&&Ge.x<=_t[1]&&Ge.y>=yt[0]&&Ge.y<=yt[1]}),Rt=Math.ceil(At.length/nt),Ft=0;ot.forEach(function(Ge,Ye){var Ne=Ge[0].trace;s.hasMarkers(Ne)&&Ne.marker.maxdisplayed>0&&Ye<Ve&&Ft++});var It=Math.round(Ft*Rt/3+Math.floor(Ft/3)*Rt/7.1);Je.forEach(function(Ge){delete Ge.vis}),At.forEach(function(Ge,Ye){Math.round((Ye+It)%Rt)===0&&(Ge.vis=!0)})}}})(0,u,c,g,f);var x=!!v&&v.duration>0;function y(Oe){return x?Oe.transition():Oe}var T=c.xaxis,h=c.yaxis,E=g[0].trace,k=E.line,L=M.select(b),P=w(L,"g","errorbars"),I=w(L,"g","lines"),z=w(L,"g","points"),F=w(L,"g","text");if(A.getComponentMethod("errorbars","plot")(l,P,c,v),E.visible===!0){var U,R;y(L).style("opacity",E.opacity);var j,Z,B=E.fill.charAt(E.fill.length-1);B!=="x"&&B!=="y"&&(B=""),B==="y"?(j=1,Z=h.c2p(0,!0)):B==="x"&&(j=0,Z=T.c2p(0,!0)),g[0][c.isRangePlot?"nodeRangePlot3":"node3"]=L;var q,V,ne="",ee=[],$=E._prevtrace,J=null,K=null;$&&(ne=$._prevRevpath||"",R=$._nextFill,ee=$._ownPolygons,J=$._fillsegments,K=$._fillElement);var te,ie,ae,se,ce,de,ge="",ve="",be=[];E._polygons=[];var me=[],Se=[],we=o.noop;if(U=E._ownFill,s.hasLines(E)||E.fill!=="none"){R&&R.datum(g),["hv","vh","hvh","vhv"].indexOf(k.shape)!==-1?(te=p.steps(k.shape),ie=p.steps(k.shape.split("").reverse().join(""))):te=ie=k.shape==="spline"?function(Oe){var Ve=Oe[Oe.length-1];return Oe.length>1&&Oe[0][0]===Ve[0]&&Oe[0][1]===Ve[1]?p.smoothclosed(Oe.slice(1),k.smoothing):p.smoothopen(Oe,k.smoothing)}:function(Oe){return"M"+Oe.join("L")},ae=function(Oe){return ie(Oe.reverse())},Se=n(g,{xaxis:T,yaxis:h,trace:E,connectGaps:E.connectgaps,baseTolerance:Math.max(k.width||1,3)/4,shape:k.shape,backoff:k.backoff,simplify:k.simplify,fill:E.fill}),me=new Array(Se.length);var _e=0;for(d=0;d<Se.length;d++){var oe,le=Se[d];oe&&B?oe.push.apply(oe,le):(oe=le.slice(),me[_e]=oe,_e++)}E._fillElement=null,E._fillExclusionElement=K,E._fillsegments=me.slice(0,_e),me=E._fillsegments,Se.length&&(se=Se[0][0].slice(),de=(ce=Se[Se.length-1])[ce.length-1].slice()),we=function(Oe){return function(Ve){if(q=te(Ve),V=ae(Ve),ge?B?(ge+="L"+q.substr(1),ve=V+"L"+ve.substr(1)):(ge+="Z"+q,ve=V+"Z"+ve):(ge=q,ve=V),s.hasLines(E)){var qe=M.select(this);if(qe.datum(g),Oe)y(qe.style("opacity",0).attr("d",q).call(p.lineGroupStyle)).style("opacity",1);else{var Je=y(qe);Je.attr("d",q),p.singleLineStyle(g,Je)}}}}}var pe=I.selectAll(".js-line").data(Se);y(pe.exit()).style("opacity",0).remove(),pe.each(we(!1)),pe.enter().append("path").classed("js-line",!0).style("vector-effect",m?"none":"non-scaling-stroke").call(p.lineGroupStyle).each(we(!0)),p.setClipUrl(pe,c.layerClipId,l);var Ee=function(){var Oe=new Array(me.length);for(d=0;d<me.length;d++)Oe[d]=r(me[d]);return Oe},Te=function(Oe){var Ve,qe;if(Oe&&Oe.length!==0){for(Ve=new Array(Oe.length-1+me.length),qe=0;qe<Oe.length-1;qe++)Ve[qe]=r(Oe[qe]);var Je=Oe[Oe.length-1].slice();for(Je.reverse(),qe=0;qe<me.length;qe++)Ve[Oe.length-1+qe]=r(me[qe].concat(Je))}else for(Ve=new Array(me.length),qe=0;qe<me.length;qe++){var ot=me[qe][0].slice(),rt=me[qe][me[qe].length-1].slice();ot[j]=rt[j]=Z;var dt=[rt,ot].concat(me[qe]);Ve[qe]=r(dt)}return Ve};Se.length?(U?(U.datum(g),se&&de&&(B?(se[j]=de[j]=Z,y(U).attr("d","M"+de+"L"+se+"L"+ge.substr(1)).call(p.singleFillStyle,l),be=Te(null)):(y(U).attr("d",ge+"Z").call(p.singleFillStyle,l),be=Ee())),E._polygons=be,E._fillElement=U):R&&(E.fill.substr(0,6)==="tonext"&&ge&&ne?(E.fill==="tonext"?(y(R).attr("d",ge+"Z"+ne+"Z").call(p.singleFillStyle,l),be=Ee(),E._polygons=be.concat(ee)):(y(R).attr("d",ge+"L"+ne.substr(1)+"Z").call(p.singleFillStyle,l),be=Te(J),E._polygons=be),E._fillElement=R):Le(R)),E._prevRevpath=ve):(U?Le(U):R&&Le(R),E._prevRevpath=null),E._ownPolygons=be,z.datum(g),F.datum(g),function(Oe,Ve,qe){var Je,ot=qe[0].trace,rt=s.hasMarkers(ot),dt=s.hasText(ot),_t=ze(ot),yt=Re,et=Re;if(rt||dt){var nt=_,At=ot.stackgroup,Rt=At&&l._fullLayout._scatterStackOpts[T._id+h._id][At].stackgaps==="infer zero";ot.marker.maxdisplayed||ot._needsCull?nt=Rt?he:Ie:At&&!Rt&&(nt=xe),rt&&(yt=nt),dt&&(et=nt)}var Ft,It=(Je=Oe.selectAll("path.point").data(yt,_t)).enter().append("path").classed("point",!0);x&&It.call(p.pointStyle,ot,l).call(p.translatePoints,T,h).style("opacity",0).transition().style("opacity",1),Je.order(),rt&&(Ft=p.makePointStyleFns(ot)),Je.each(function(Ge){var Ye=M.select(this),Ne=y(Ye);p.translatePoint(Ge,Ne,T,h)?(p.singlePointStyle(Ge,Ne,ot,Ft,l),c.layerClipId&&p.hideOutsideRangePoint(Ge,Ne,T,h,ot.xcalendar,ot.ycalendar),ot.customdata&&Ye.classed("plotly-customdata",Ge.data!==null&&Ge.data!==void 0)):Ne.remove()}),x?Je.exit().transition().style("opacity",0).remove():Je.exit().remove(),(Je=Ve.selectAll("g").data(et,_t)).enter().append("g").classed("textpoint",!0).append("text"),Je.order(),Je.each(function(Ge){var Ye=M.select(this),Ne=y(Ye.select("text"));p.translatePoint(Ge,Ne,T,h)?c.layerClipId&&p.hideOutsideRangePoint(Ge,Ye,T,h,ot.xcalendar,ot.ycalendar):Ye.remove()}),Je.selectAll("text").call(p.textPointStyle,ot,l).each(function(Ge){var Ye=T.c2p(Ge.x),Ne=h.c2p(Ge.y);M.select(this).selectAll("tspan.line").each(function(){y(M.select(this)).attr({x:Ye,y:Ne})})}),Je.exit().remove()}(z,F,g);var Me=E.cliponaxis===!1?null:c.layerClipId;p.setClipUrl(z,Me,l),p.setClipUrl(F,Me,l)}function Le(Oe){y(Oe).attr("d","M0,0Z")}function Ie(Oe){return Oe.filter(function(Ve){return!Ve.gap&&Ve.vis})}function he(Oe){return Oe.filter(function(Ve){return Ve.vis})}function xe(Oe){return Oe.filter(function(Ve){return!Ve.gap})}function ke(Oe){return Oe.id}function ze(Oe){if(Oe.ids)return ke}function Re(){return!1}}Y.exports=function(l,u,c,g,f,b){var v,d,m=!f,x=!!f&&f.duration>0,y=a(l,u,c);(v=g.selectAll("g.trace").data(y,function(T){return T[0].trace.uid})).enter().append("g").attr("class",function(T){return"trace scatter trace"+T[0].trace.uid}).style("stroke-miterlimit",2),v.order(),function(T,h,E){h.each(function(k){var L=w(M.select(this),"g","fills");p.setClipUrl(L,E.layerClipId,T);var P=k[0].trace,I=[];P._ownfill&&I.push("_ownFill"),P._nexttrace&&I.push("_nextFill");var z=L.selectAll("g").data(I,_);z.enter().append("g"),z.exit().each(function(F){P[F]=null}).remove(),z.order().each(function(F){P[F]=w(M.select(this),"path","js-fill")})})}(l,v,u),x?(b&&(d=b()),M.transition().duration(f.duration).ease(f.easing).each("end",function(){d&&d()}).each("interrupt",function(){d&&d()}).each(function(){g.selectAll("g.trace").each(function(T,h){i(l,h,u,T,y,this,f)})})):v.each(function(T,h){i(l,h,u,T,y,this,f)}),m&&v.exit().remove(),g.selectAll("path:not([d])").remove()}},91560:function(Y,O,e){var M=e(43028);Y.exports=function(A,o){var w,_,p,s,n=A.cd,a=A.xaxis,r=A.yaxis,i=[],l=n[0].trace;if(!M.hasMarkers(l)&&!M.hasText(l))return[];if(o===!1)for(w=0;w<n.length;w++)n[w].selected=0;else for(w=0;w<n.length;w++)_=n[w],p=a.c2p(_.x),s=r.c2p(_.y),_.i!==null&&o.contains([p,s],!1,w,A)?(i.push({pointNumber:_.i,x:a.c2d(_.x),y:r.c2d(_.y)}),_.selected=1):_.selected=0;return i}},43912:function(Y){var O=["orientation","groupnorm","stackgaps"];Y.exports=function(e,M,A,o){var w=A._scatterStackOpts,_=o("stackgroup");if(_){var p=M.xaxis+M.yaxis,s=w[p];s||(s=w[p]={});var n=s[_],a=!1;n?n.traces.push(M):(n=s[_]={traceIndices:[],traces:[M]},a=!0);for(var r={orientation:M.x&&!M.y?"h":"v"},i=0;i<O.length;i++){var l=O[i],u=l+"Found";if(!n[u]){var c=e[l]!==void 0,g=l==="orientation";if((c||a)&&(n[l]=o(l,r[l]),g&&(n.fillDflt=n[l]==="h"?"tonextx":"tonexty"),c&&(n[u]=!0,!a&&(delete n.traces[0][l],g))))for(var f=0;f<n.traces.length-1;f++){var b=n.traces[f];b._input.fill!==b.fill&&(b.fill=n.fillDflt)}}}return n}}},49224:function(Y,O,e){var M=e(33428),A=e(43616),o=e(24040);function w(p,s,n){A.pointStyle(p.selectAll("path.point"),s,n)}function _(p,s,n){A.textPointStyle(p.selectAll("text"),s,n)}Y.exports={style:function(p){var s=M.select(p).selectAll("g.trace.scatter");s.style("opacity",function(n){return n[0].trace.opacity}),s.selectAll("g.points").each(function(n){w(M.select(this),n.trace||n[0].trace,p)}),s.selectAll("g.text").each(function(n){_(M.select(this),n.trace||n[0].trace,p)}),s.selectAll("g.trace path.js-line").call(A.lineGroupStyle),s.selectAll("g.trace path.js-fill").call(A.fillGroupStyle,p),o.getComponentMethod("errorbars","style")(s)},stylePoints:w,styleText:_,styleOnSelect:function(p,s,n){var a=s[0].trace;a.selectedpoints?(A.selectedPointStyle(n.selectAll("path.point"),a),A.selectedTextStyle(n.selectAll("text"),a)):(w(n,a,p),_(n,a,p))}}},43028:function(Y,O,e){var M=e(3400),A=e(38116).isTypedArraySpec;Y.exports={hasLines:function(o){return o.visible&&o.mode&&o.mode.indexOf("lines")!==-1},hasMarkers:function(o){return o.visible&&(o.mode&&o.mode.indexOf("markers")!==-1||o.type==="splom")},hasText:function(o){return o.visible&&o.mode&&o.mode.indexOf("text")!==-1},isBubble:function(o){var w=o.marker;return M.isPlainObject(w)&&(M.isArrayOrTypedArray(w.size)||A(w.size))}}},124:function(Y,O,e){var M=e(3400);Y.exports=function(A,o,w,_,p){p=p||{},_("textposition"),M.coerceFont(_,"textfont",p.font||w.font),p.noSelect||(_("selected.textfont.color"),_("unselected.textfont.color"))}},43980:function(Y,O,e){var M=e(3400),A=e(24040);Y.exports=function(o,w,_,p){var s,n=p("x"),a=p("y");if(A.getComponentMethod("calendars","handleTraceDefaults")(o,w,["x","y"],_),n){var r=M.minRowLength(n);a?s=Math.min(r,M.minRowLength(a)):(s=r,p("y0"),p("dy"))}else{if(!a)return 0;s=M.minRowLength(a),p("x0"),p("dx")}return w._length=s,s}},91592:function(Y,O,e){var M=e(52904),A=e(49084),o=e(29736).axisHoverFormat,w=e(21776).Ks,_=e(21776).Gw,p=e(45464),s=e(99168),n=e(87792),a=e(92880).extendFlat,r=e(67824).overrideAll,i=e(95376),l=M.line,u=M.marker,c=u.line,g=a({width:l.width,dash:{valType:"enumerated",values:i(s),dflt:"solid"}},A("line")),f=Y.exports=r({x:M.x,y:M.y,z:{valType:"data_array"},text:a({},M.text,{}),texttemplate:_({},{}),hovertext:a({},M.hovertext,{}),hovertemplate:w(),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),mode:a({},M.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:M.connectgaps,line:g,marker:a({symbol:{valType:"enumerated",values:i(n),dflt:"circle",arrayOk:!0},size:a({},u.size,{dflt:8}),sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,opacity:a({},u.opacity,{arrayOk:!1}),colorbar:u.colorbar,line:a({width:a({},c.width,{arrayOk:!1})},A("marker.line"))},A("marker")),textposition:a({},M.textposition,{dflt:"top center"}),textfont:{color:M.textfont.color,size:M.textfont.size,family:a({},M.textfont.family,{arrayOk:!1})},opacity:p.opacity,hoverinfo:a({},p.hoverinfo)},"calc","nested");f.x.editType=f.y.editType=f.z.editType="calc+clearAxisTypes"},41484:function(Y,O,e){var M=e(20148),A=e(90136);Y.exports=function(o,w){var _=[{x:!1,y:!1,trace:w,t:{}}];return M(_,w),A(o,w),_}},45156:function(Y,O,e){var M=e(24040);function A(o,w,_,p){if(!w||!w.visible)return null;for(var s=M.getComponentMethod("errorbars","makeComputeError")(w),n=new Array(o.length),a=0;a<o.length;a++){var r=s(+o[a],a);if(p.type==="log"){var i=p.c2l(o[a]),l=o[a]-r[0],u=o[a]+r[1];if(n[a]=[(p.c2l(l,!0)-i)*_,(p.c2l(u,!0)-i)*_],l>0){var c=p.c2l(l);p._lowerLogErrorBound||(p._lowerLogErrorBound=c),p._lowerErrorBound=Math.min(p._lowerLogErrorBound,c)}}else n[a]=[-r[0]*_,r[1]*_]}return n}Y.exports=function(o,w,_){var p=[A(o.x,o.error_x,w[0],_.xaxis),A(o.y,o.error_y,w[1],_.yaxis),A(o.z,o.error_z,w[2],_.zaxis)],s=function(u){for(var c=0;c<u.length;c++)if(u[c])return u[c].length;return 0}(p);if(s===0)return null;for(var n=new Array(s),a=0;a<s;a++){for(var r=[[0,0,0],[0,0,0]],i=0;i<3;i++)if(p[i])for(var l=0;l<2;l++)r[l][i]=p[i][a][l];n[a]=r}return n}},41064:function(Y,O,e){var M=e(67792).gl_line3d,A=e(67792).gl_scatter3d,o=e(67792).gl_error3d,w=e(67792).gl_mesh3d,_=e(67792).delaunay_triangulate,p=e(3400),s=e(43080),n=e(33040).formatColor,a=e(7152),r=e(99168),i=e(87792),l=e(54460),u=e(10624).appendArrayPointValue,c=e(45156);function g(h,E){this.scene=h,this.uid=E,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var f=g.prototype;function b(h){return h==null?0:h.indexOf("left")>-1?-1:h.indexOf("right")>-1?1:0}function v(h){return h==null?0:h.indexOf("top")>-1?-1:h.indexOf("bottom")>-1?1:0}function d(h,E){return E(4*h)}function m(h){return i[h]}function x(h,E,k,L,P){var I=null;if(p.isArrayOrTypedArray(h)){I=[];for(var z=0;z<E;z++)h[z]===void 0?I[z]=L:I[z]=k(h[z],P)}else I=k(h,p.identity);return I}function y(h){if(p.isArrayOrTypedArray(h)){var E=h[0];return p.isArrayOrTypedArray(E)&&(h=E),"rgb("+h.slice(0,3).map(function(k){return Math.round(255*k)})+")"}return null}function T(h){return p.isArrayOrTypedArray(h)?h.length===4&&typeof h[0]=="number"?y(h):h.map(y):null}f.handlePick=function(h){if(h.object&&(h.object===this.linePlot||h.object===this.delaunayMesh||h.object===this.textMarkers||h.object===this.scatterPlot)){var E=h.index=h.data.index;return h.object.highlight&&h.object.highlight(null),this.scatterPlot&&(h.object=this.scatterPlot,this.scatterPlot.highlight(h.data)),h.textLabel="",this.textLabels&&(p.isArrayOrTypedArray(this.textLabels)?(this.textLabels[E]||this.textLabels[E]===0)&&(h.textLabel=this.textLabels[E]):h.textLabel=this.textLabels),h.traceCoordinate=[this.data.x[E],this.data.y[E],this.data.z[E]],!0}},f.update=function(h){var E,k,L,P,I=this.scene.glplot.gl,z=r.solid;this.data=h;var F=function(j,Z){var B,q,V,ne,ee,$,J=[],K=j.fullSceneLayout,te=j.dataScale,ie=K.xaxis,ae=K.yaxis,se=K.zaxis,ce=Z.marker,de=Z.line,ge=Z.x||[],ve=Z.y||[],be=Z.z||[],me=ge.length,Se=Z.xcalendar,we=Z.ycalendar,_e=Z.zcalendar;for(ee=0;ee<me;ee++)B=ie.d2l(ge[ee],0,Se)*te[0],q=ae.d2l(ve[ee],0,we)*te[1],V=se.d2l(be[ee],0,_e)*te[2],J[ee]=[B,q,V];if(Array.isArray(Z.text))$=Z.text;else if(p.isTypedArray(Z.text))$=Array.from(Z.text);else if(Z.text!==void 0)for($=new Array(me),ee=0;ee<me;ee++)$[ee]=Z.text;function oe(Ve,qe){var Je=K[Ve];return l.tickText(Je,Je.d2l(qe),!0).text}var le=Z.texttemplate;if(le){var pe=j.fullLayout._d3locale,Ee=Array.isArray(le),Te=Ee?Math.min(le.length,me):me,Me=Ee?function(Ve){return le[Ve]}:function(){return le};for($=new Array(Te),ee=0;ee<Te;ee++){var Le={x:ge[ee],y:ve[ee],z:be[ee]},Ie={xLabel:oe("xaxis",ge[ee]),yLabel:oe("yaxis",ve[ee]),zLabel:oe("zaxis",be[ee])},he={};u(he,Z,ee);var xe=Z._meta||{};$[ee]=p.texttemplateString(Me(ee),Ie,pe,he,Le,xe)}}if(ne={position:J,mode:Z.mode,text:$},"line"in Z&&(ne.lineColor=n(de,1,me),ne.lineWidth=de.width,ne.lineDashes=de.dash),"marker"in Z){var ke=a(Z);ne.scatterColor=n(ce,1,me),ne.scatterSize=x(ce.size,me,d,20,ke),ne.scatterMarker=x(ce.symbol,me,m,""),ne.scatterLineWidth=ce.line.width,ne.scatterLineColor=n(ce.line,1,me),ne.scatterAngle=0}"textposition"in Z&&(ne.textOffset=function(Ve){var qe=[0,0];if(Array.isArray(Ve))for(var Je=0;Je<Ve.length;Je++)qe[Je]=[0,0],Ve[Je]&&(qe[Je][0]=b(Ve[Je]),qe[Je][1]=v(Ve[Je]));else qe[0]=b(Ve),qe[1]=v(Ve);return qe}(Z.textposition),ne.textColor=n(Z.textfont,1,me),ne.textSize=x(Z.textfont.size,me,p.identity,12),ne.textFont=Z.textfont.family,ne.textAngle=0);var ze=["x","y","z"];for(ne.project=[!1,!1,!1],ne.projectScale=[1,1,1],ne.projectOpacity=[1,1,1],ee=0;ee<3;++ee){var Re=Z.projection[ze[ee]];(ne.project[ee]=Re.show)&&(ne.projectOpacity[ee]=Re.opacity,ne.projectScale[ee]=Re.scale)}ne.errorBounds=c(Z,te,K);var Oe=function(Ve){for(var qe=[0,0,0],Je=[[0,0,0],[0,0,0],[0,0,0]],ot=[1,1,1],rt=0;rt<3;rt++){var dt=Ve[rt];dt&&dt.copy_zstyle!==!1&&Ve[2].visible!==!1&&(dt=Ve[2]),dt&&dt.visible&&(qe[rt]=dt.width/2,Je[rt]=s(dt.color),ot[rt]=dt.thickness)}return{capSize:qe,color:Je,lineWidth:ot}}([Z.error_x,Z.error_y,Z.error_z]);return ne.errorColor=Oe.color,ne.errorLineWidth=Oe.lineWidth,ne.errorCapSize=Oe.capSize,ne.delaunayAxis=Z.surfaceaxis,ne.delaunayColor=s(Z.surfacecolor),ne}(this.scene,h);"mode"in F&&(this.mode=F.mode),"lineDashes"in F&&F.lineDashes in r&&(z=r[F.lineDashes]),this.color=T(F.scatterColor)||T(F.lineColor),this.dataPoints=F.position,E={gl:this.scene.glplot.gl,position:F.position,color:F.lineColor,lineWidth:F.lineWidth||1,dashes:z[0],dashScale:z[1],opacity:h.opacity,connectGaps:h.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(E):(this.linePlot=M(E),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var U=h.opacity;if(h.marker&&h.marker.opacity!==void 0&&(U*=h.marker.opacity),k={gl:this.scene.glplot.gl,position:F.position,color:F.scatterColor,size:F.scatterSize,glyph:F.scatterMarker,opacity:U,orthographic:!0,lineWidth:F.scatterLineWidth,lineColor:F.scatterLineColor,project:F.project,projectScale:F.projectScale,projectOpacity:F.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(k):(this.scatterPlot=A(k),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),P={gl:this.scene.glplot.gl,position:F.position,glyph:F.text,color:F.textColor,size:F.textSize,angle:F.textAngle,alignment:F.textOffset,font:F.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:h.opacity},this.textLabels=h.hovertext||h.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(P):(this.textMarkers=A(P),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),L={gl:this.scene.glplot.gl,position:F.position,color:F.errorColor,error:F.errorBounds,lineWidth:F.errorLineWidth,capSize:F.errorCapSize,opacity:h.opacity},this.errorBars?F.errorBounds?this.errorBars.update(L):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):F.errorBounds&&(this.errorBars=o(L),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),F.delaunayAxis>=0){var R=function(j,Z,B){var q,V=(B+1)%3,ne=(B+2)%3,ee=[],$=[];for(q=0;q<j.length;++q){var J=j[q];!isNaN(J[V])&&isFinite(J[V])&&!isNaN(J[ne])&&isFinite(J[ne])&&(ee.push([J[V],J[ne]]),$.push(q))}var K=_(ee);for(q=0;q<K.length;++q)for(var te=K[q],ie=0;ie<te.length;++ie)te[ie]=$[te[ie]];return{positions:j,cells:K,meshColor:Z}}(F.position,F.delaunayColor,F.delaunayAxis);R.opacity=h.opacity,this.delaunayMesh?this.delaunayMesh.update(R):(R.gl=I,this.delaunayMesh=w(R),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},f.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},Y.exports=function(h,E){var k=new g(h,E.uid);return k.update(E),k}},83484:function(Y,O,e){var M=e(24040),A=e(3400),o=e(43028),w=e(74428),_=e(66828),p=e(124),s=e(91592);Y.exports=function(n,a,r,i){function l(m,x){return A.coerce(n,a,s,m,x)}var u=function(m,x,y,T){var h=0,E=y("x"),k=y("y"),L=y("z");return M.getComponentMethod("calendars","handleTraceDefaults")(m,x,["x","y","z"],T),E&&k&&L&&(h=Math.min(E.length,k.length,L.length),x._length=x._xlength=x._ylength=x._zlength=h),h}(n,a,l,i);if(u){l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),l("mode"),o.hasMarkers(a)&&w(n,a,r,i,l,{noSelect:!0,noAngle:!0}),o.hasLines(a)&&(l("connectgaps"),_(n,a,r,i,l)),o.hasText(a)&&(l("texttemplate"),p(n,a,i,l,{noSelect:!0}));var c=(a.line||{}).color,g=(a.marker||{}).color;l("surfaceaxis")>=0&&l("surfacecolor",c||g);for(var f=["x","y","z"],b=0;b<3;++b){var v="projection."+f[b];l(v+".show")&&(l(v+".opacity"),l(v+".scale"))}var d=M.getComponentMethod("errorbars","supplyDefaults");d(n,a,c||g||r,{axis:"z"}),d(n,a,c||g||r,{axis:"y",inherit:"z"}),d(n,a,c||g||r,{axis:"x",inherit:"z"})}else a.visible=!1}},3296:function(Y,O,e){Y.exports={plot:e(41064),attributes:e(91592),markerSymbols:e(87792),supplyDefaults:e(83484),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e(41484),moduleType:"trace",name:"scatter3d",basePlotModule:e(12536),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},90372:function(Y,O,e){var M=e(52904),A=e(45464),o=e(21776).Ks,w=e(21776).Gw,_=e(49084),p=e(92880).extendFlat,s=M.marker,n=M.line,a=s.line;Y.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:p({},M.mode,{dflt:"markers"}),text:p({},M.text,{}),texttemplate:w({editType:"plot"},{keys:["a","b","text"]}),hovertext:p({},M.hovertext,{}),line:{color:n.color,width:n.width,dash:n.dash,backoff:n.backoff,shape:p({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:M.connectgaps,fill:p({},M.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:M.fillcolor,marker:p({symbol:s.symbol,opacity:s.opacity,maxdisplayed:s.maxdisplayed,angle:s.angle,angleref:s.angleref,standoff:s.standoff,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode,line:p({width:a.width,editType:"calc"},_("marker.line")),gradient:s.gradient,editType:"calc"},_("marker")),textfont:M.textfont,textposition:M.textposition,selected:M.selected,unselected:M.unselected,hoverinfo:p({},A.hoverinfo,{flags:["a","b","text","name"]}),hoveron:M.hoveron,hovertemplate:o()}},48228:function(Y,O,e){var M=e(38248),A=e(90136),o=e(20148),w=e(4500),_=e(16356).calcMarkerSize,p=e(50948);Y.exports=function(s,n){var a=n._carpetTrace=p(s,n);if(a&&a.visible&&a.visible!=="legendonly"){var r;n.xaxis=a.xaxis,n.yaxis=a.yaxis;var i,l,u=n._length,c=new Array(u),g=!1;for(r=0;r<u;r++)if(i=n.a[r],l=n.b[r],M(i)&&M(l)){var f=a.ab2xy(+i,+l,!0),b=a.isVisible(+i,+l);b||(g=!0),c[r]={x:f[0],y:f[1],a:i,b:l,vis:b}}else c[r]={x:!1,y:!1};return n._needsCull=g,c[0].carpet=a,c[0].trace=n,_(n,u),A(s,n),o(c,n),w(c,n),c}}},6176:function(Y,O,e){var M=e(3400),A=e(88200),o=e(43028),w=e(74428),_=e(66828),p=e(11731),s=e(124),n=e(70840),a=e(90372);Y.exports=function(r,i,l,u){function c(d,m){return M.coerce(r,i,a,d,m)}c("carpet"),i.xaxis="x",i.yaxis="y";var g=c("a"),f=c("b"),b=Math.min(g.length,f.length);if(b){i._length=b,c("text"),c("texttemplate"),c("hovertext"),c("mode",b<A.PTS_LINESONLY?"lines+markers":"lines"),o.hasMarkers(i)&&w(r,i,l,u,c,{gradient:!0}),o.hasLines(i)&&(_(r,i,l,u,c,{backoff:!0}),p(r,i,c),c("connectgaps")),o.hasText(i)&&s(r,i,u,c);var v=[];(o.hasMarkers(i)||o.hasText(i))&&(c("marker.maxdisplayed"),v.push("points")),c("fill"),i.fill!=="none"&&(n(r,i,l,c),o.hasLines(i)||p(r,i,c)),i.fill!=="tonext"&&i.fill!=="toself"||v.push("fills"),c("hoveron",v.join("+")||"points")!=="fills"&&c("hovertemplate"),M.coerceSelectionMarkerOpacity(i,c)}else i.visible=!1}},89307:function(Y){Y.exports=function(O,e,M,A,o){var w=A[o];return O.a=w.a,O.b=w.b,O.y=w.y,O}},52364:function(Y){Y.exports=function(O,e){var M={},A=e._carpet,o=A.ab2ij([O.a,O.b]),w=Math.floor(o[0]),_=o[0]-w,p=Math.floor(o[1]),s=o[1]-p,n=A.evalxy([],w,p,_,s);return M.yLabel=n[1].toFixed(3),M}},58960:function(Y,O,e){var M=e(98723),A=e(3400).fillText;Y.exports=function(o,w,_,p){var s=M(o,w,_,p);if(s&&s[0].index!==!1){var n=s[0];if(n.index===void 0){var a=1-n.y0/o.ya._length,r=o.xa._length,i=r*a/2,l=r-i;return n.x0=Math.max(Math.min(n.x0,l),i),n.x1=Math.max(Math.min(n.x1,l),i),s}var u=n.cd[n.index];n.a=u.a,n.b=u.b,n.xLabelVal=void 0,n.yLabelVal=void 0;var c=n.trace,g=c._carpet,f=c._module.formatLabels(u,c);n.yLabel=f.yLabel,delete n.text;var b=[];if(!c.hovertemplate){var v=(u.hi||c.hoverinfo).split("+");v.indexOf("all")!==-1&&(v=["a","b","text"]),v.indexOf("a")!==-1&&d(g.aaxis,u.a),v.indexOf("b")!==-1&&d(g.baxis,u.b),b.push("y: "+n.yLabel),v.indexOf("text")!==-1&&A(u,c,b),n.extraText=b.join("<br>")}return s}function d(m,x){var y;y=m.labelprefix&&m.labelprefix.length>0?m.labelprefix.replace(/ = $/,""):m._hovertitle,b.push(y+": "+x.toFixed(3)+m.labelsuffix)}}},4184:function(Y,O,e){Y.exports={attributes:e(90372),supplyDefaults:e(6176),colorbar:e(5528),formatLabels:e(52364),calc:e(48228),plot:e(20036),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(58960),selectPoints:e(91560),eventData:e(89307),moduleType:"trace",name:"scattercarpet",basePlotModule:e(57952),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},20036:function(Y,O,e){var M=e(96504),A=e(54460),o=e(43616);Y.exports=function(w,_,p,s){var n,a,r,i=p[0][0].carpet,l=A.getFromId(w,i.xaxis||"x"),u=A.getFromId(w,i.yaxis||"y"),c={xaxis:l,yaxis:u,plot:_.plot};for(n=0;n<p.length;n++)(a=p[n][0].trace)._xA=l,a._yA=u;for(M(w,c,p,s),n=0;n<p.length;n++)a=p[n][0].trace,r=s.selectAll("g.trace"+a.uid+" .js-line"),o.setClipUrl(r,p[n][0].carpet._clipPathId,w)}},6096:function(Y,O,e){var M=e(21776).Ks,A=e(21776).Gw,o=e(52904),w=e(45464),_=e(49084),p=e(98192).u,s=e(92880).extendFlat,n=e(67824).overrideAll,a=o.marker,r=o.line,i=a.line;Y.exports=n({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:s({},o.mode,{dflt:"markers"}),text:s({},o.text,{}),texttemplate:A({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:s({},o.hovertext,{}),textfont:o.textfont,textposition:o.textposition,line:{color:r.color,width:r.width,dash:p},connectgaps:o.connectgaps,marker:s({symbol:a.symbol,opacity:a.opacity,angle:a.angle,angleref:s({},a.angleref,{values:["previous","up","north"]}),standoff:a.standoff,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,colorbar:a.colorbar,line:s({width:i.width},_("marker.line")),gradient:a.gradient},_("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:o.fillcolor,selected:o.selected,unselected:o.unselected,hoverinfo:s({},w.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:M()},"calc","nested")},25212:function(Y,O,e){var M=e(38248),A=e(39032).BADNUM,o=e(90136),w=e(20148),_=e(4500),p=e(3400).isArrayOrTypedArray,s=e(3400)._;function n(a){return a&&typeof a=="string"}Y.exports=function(a,r){var i,l=p(r.locations),u=l?r.locations.length:r._length,c=new Array(u);i=r.geojson?function(m){return n(m)||M(m)}:n;for(var g=0;g<u;g++){var f=c[g]={};if(l){var b=r.locations[g];f.loc=i(b)?b:null}else{var v=r.lon[g],d=r.lat[g];M(v)&&M(d)?f.lonlat=[+v,+d]:f.lonlat=[A,A]}}return w(c,r),o(a,r),_(c,r),u&&(c[0].t={labels:{lat:s(a,"lat:")+" ",lon:s(a,"lon:")+" "}}),c}},86188:function(Y,O,e){var M=e(3400),A=e(43028),o=e(74428),w=e(66828),_=e(124),p=e(70840),s=e(6096);Y.exports=function(n,a,r,i){function l(d,m){return M.coerce(n,a,s,d,m)}var u,c=l("locations");if(c&&c.length){var g,f=l("geojson");(typeof f=="string"&&f!==""||M.isPlainObject(f))&&(g="geojson-id"),l("locationmode",g)==="geojson-id"&&l("featureidkey"),u=c.length}else{var b=l("lon")||[],v=l("lat")||[];u=Math.min(b.length,v.length)}u?(a._length=u,l("text"),l("hovertext"),l("hovertemplate"),l("mode"),A.hasMarkers(a)&&o(n,a,r,i,l,{gradient:!0}),A.hasLines(a)&&(w(n,a,r,i,l),l("connectgaps")),A.hasText(a)&&(l("texttemplate"),_(n,a,i,l)),l("fill"),a.fill!=="none"&&p(n,a,r,l),M.coerceSelectionMarkerOpacity(a,l)):a.visible=!1}},58544:function(Y){Y.exports=function(O,e,M,A,o){O.lon=e.lon,O.lat=e.lat,O.location=e.loc?e.loc:null;var w=A[o];return w.fIn&&w.fIn.properties&&(O.properties=w.fIn.properties),O}},56696:function(Y,O,e){var M=e(54460);Y.exports=function(A,o,w){var _={},p=w[o.geo]._subplot.mockAxis,s=A.lonlat;return _.lonLabel=M.tickText(p,p.c2l(s[0]),!0).text,_.latLabel=M.tickText(p,p.c2l(s[1]),!0).text,_}},64292:function(Y,O,e){var M=e(93024),A=e(39032).BADNUM,o=e(44928),w=e(3400).fillText,_=e(6096);Y.exports=function(p,s,n){var a=p.cd,r=a[0].trace,i=p.xa,l=p.ya,u=p.subplot,c=u.projection.isLonLatOverEdges,g=u.project;if(M.getClosest(a,function(y){var T=y.lonlat;if(T[0]===A||c(T))return 1/0;var h=g(T),E=g([s,n]),k=Math.abs(h[0]-E[0]),L=Math.abs(h[1]-E[1]),P=Math.max(3,y.mrc||0);return Math.max(Math.sqrt(k*k+L*L)-P,1-3/P)},p),p.index!==!1){var f=a[p.index],b=f.lonlat,v=[i.c2p(b),l.c2p(b)],d=f.mrc||1;p.x0=v[0]-d,p.x1=v[0]+d,p.y0=v[1]-d,p.y1=v[1]+d,p.loc=f.loc,p.lon=b[0],p.lat=b[1];var m={};m[r.geo]={_subplot:u};var x=r._module.formatLabels(f,r,m);return p.lonLabel=x.lonLabel,p.latLabel=x.latLabel,p.color=o(r,f),p.extraText=function(y,T,h,E){if(!y.hovertemplate){var k=T.hi||y.hoverinfo,L=k==="all"?_.hoverinfo.flags:k.split("+"),P=L.indexOf("location")!==-1&&Array.isArray(y.locations),I=L.indexOf("lon")!==-1,z=L.indexOf("lat")!==-1,F=L.indexOf("text")!==-1,U=[];return P?U.push(T.loc):I&&z?U.push("("+R(h.latLabel)+", "+R(h.lonLabel)+")"):I?U.push(E.lon+R(h.lonLabel)):z&&U.push(E.lat+R(h.latLabel)),F&&w(T,y,U),U.join("<br>")}function R(j){return j+""}}(r,f,p,a[0].t.labels),p.hovertemplate=r.hovertemplate,[p]}}},36952:function(Y,O,e){Y.exports={attributes:e(6096),supplyDefaults:e(86188),colorbar:e(5528),formatLabels:e(56696),calc:e(25212),calcGeoJSON:e(48691).calcGeoJSON,plot:e(48691).plot,style:e(25064),styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(64292),eventData:e(58544),selectPoints:e(8796),moduleType:"trace",name:"scattergeo",basePlotModule:e(10816),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},48691:function(Y,O,e){var M=e(33428),A=e(3400),o=e(59972).getTopojsonFeatures,w=e(44808),_=e(27144),p=e(19280).findExtremes,s=e(39032).BADNUM,n=e(16356).calcMarkerSize,a=e(43028),r=e(25064);Y.exports={calcGeoJSON:function(i,l){var u,c,g=i[0].trace,f=l[g.geo],b=f._subplot,v=g._length;if(A.isArrayOrTypedArray(g.locations)){var d=g.locationmode,m=d==="geojson-id"?_.extractTraceFeature(i):o(g,b.topojson);for(u=0;u<v;u++){c=i[u];var x=d==="geojson-id"?c.fOut:_.locationToFeature(d,c.loc,m);c.lonlat=x?x.properties.ct:[s,s]}}var y,T,h={padded:!0};if(f.fitbounds==="geojson"&&g.locationmode==="geojson-id"){var E=_.computeBbox(_.getTraceGeojson(g));y=[E[0],E[2]],T=[E[1],E[3]]}else{for(y=new Array(v),T=new Array(v),u=0;u<v;u++)c=i[u],y[u]=c.lonlat[0],T[u]=c.lonlat[1];h.ppad=n(g,v)}g._extremes.lon=p(f.lonaxis._ax,y,h),g._extremes.lat=p(f.lataxis._ax,T,h)},plot:function(i,l,u){var c=l.layers.frontplot.select(".scatterlayer"),g=A.makeTraceGroups(c,u,"trace scattergeo");function f(b,v){b.lonlat[0]===s&&M.select(v).remove()}g.selectAll("*").remove(),g.each(function(b){var v=M.select(this),d=b[0].trace;if(a.hasLines(d)||d.fill!=="none"){var m=w.calcTraceToLineCoords(b),x=d.fill!=="none"?w.makePolygon(m):w.makeLine(m);v.selectAll("path.js-line").data([{geojson:x,trace:d}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}a.hasMarkers(d)&&v.selectAll("path.point").data(A.identity).enter().append("path").classed("point",!0).each(function(y){f(y,this)}),a.hasText(d)&&v.selectAll("g").data(A.identity).enter().append("g").append("text").each(function(y){f(y,this)}),r(i,b)})}}},8796:function(Y,O,e){var M=e(43028),A=e(39032).BADNUM;Y.exports=function(o,w){var _,p,s,n,a,r=o.cd,i=o.xaxis,l=o.yaxis,u=[],c=r[0].trace;if(!M.hasMarkers(c)&&!M.hasText(c))return[];if(w===!1)for(a=0;a<r.length;a++)r[a].selected=0;else for(a=0;a<r.length;a++)(p=(_=r[a]).lonlat)[0]!==A&&(s=i.c2p(p),n=l.c2p(p),w.contains([s,n],null,a,o)?(u.push({pointNumber:a,lon:p[0],lat:p[1]}),_.selected=1):_.selected=0);return u}},25064:function(Y,O,e){var M=e(33428),A=e(43616),o=e(76308),w=e(49224),_=w.stylePoints,p=w.styleText;Y.exports=function(s,n){n&&function(a,r){var i=r[0].trace,l=r[0].node3;l.style("opacity",r[0].trace.opacity),_(l,i,a),p(l,i,a),l.selectAll("path.js-line").style("fill","none").each(function(u){var c=M.select(this),g=u.trace,f=g.line||{};c.call(o.stroke,f.color).call(A.dashLine,f.dash||"",f.width||0),g.fill!=="none"&&c.call(o.fill,g.fillcolor)})}(s,n)}},2876:function(Y,O,e){var M=e(45464),A=e(52904),o=e(29736).axisHoverFormat,w=e(49084),_=e(95376),p=e(92880).extendFlat,s=e(67824).overrideAll,n=e(67072).DASHES,a=A.line,r=A.marker,i=r.line,l=Y.exports=s({x:A.x,x0:A.x0,dx:A.dx,y:A.y,y0:A.y0,dy:A.dy,xperiod:A.xperiod,yperiod:A.yperiod,xperiod0:A.xperiod0,yperiod0:A.yperiod0,xperiodalignment:A.xperiodalignment,yperiodalignment:A.yperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),text:A.text,hovertext:A.hovertext,textposition:A.textposition,textfont:A.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:a.color,width:a.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:_(n),dflt:"solid"}},marker:p({},w("marker"),{symbol:r.symbol,angle:r.angle,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:p({},w("marker.line"),{width:i.width})}),connectgaps:A.connectgaps,fill:p({},A.fill,{dflt:"none"}),fillcolor:A.fillcolor,selected:{marker:A.selected.marker,textfont:A.selected.textfont},unselected:{marker:A.unselected.marker,textfont:A.unselected.textfont},opacity:M.opacity},"calc","nested");l.x.editType=l.y.editType=l.x0.editType=l.y0.editType="calc+clearAxisTypes",l.hovertemplate=A.hovertemplate,l.texttemplate=A.texttemplate},64628:function(Y,O,e){var M=e(41272);Y.exports={moduleType:"trace",name:"scattergl",basePlotModule:e(57952),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e(2876),supplyDefaults:e(80220),crossTraceDefaults:e(35036),colorbar:e(5528),formatLabels:e(99396),calc:e(24856),hoverPoints:M.hoverPoints,selectPoints:e(73224),meta:{}}},24856:function(Y,O,e){var M=e(3108),A=e(3400),o=e(79811),w=e(19280).findExtremes,_=e(1220),p=e(16356),s=p.calcMarkerSize,n=p.calcAxisExpansion,a=p.setFirstScatter,r=e(90136),i=e(84236),l=e(74588),u=e(39032).BADNUM,c=e(67072).TOO_MANY_POINTS;function g(f,b,v){var d=f._extremes[b._id],m=w(b,v._bnds,{padded:!0});d.min=d.min.concat(m.min),d.max=d.max.concat(m.max)}Y.exports=function(f,b){var v,d=f._fullLayout,m=b._xA=o.getFromId(f,b.xaxis,"x"),x=b._yA=o.getFromId(f,b.yaxis,"y"),y=d._plots[b.xaxis+b.yaxis],T=b._length,h=T>=c,E=2*T,k={},L=m.makeCalcdata(b,"x"),P=x.makeCalcdata(b,"y"),I=_(b,m,"x",L),z=_(b,x,"y",P),F=I.vals,U=z.vals;b._x=F,b._y=U,b.xperiodalignment&&(b._origX=L,b._xStarts=I.starts,b._xEnds=I.ends),b.yperiodalignment&&(b._origY=P,b._yStarts=z.starts,b._yEnds=z.ends);var R=new Array(E),j=new Array(T);for(v=0;v<T;v++)R[2*v]=F[v]===u?NaN:F[v],R[2*v+1]=U[v]===u?NaN:U[v],j[v]=v;if(m.type==="log")for(v=0;v<E;v+=2)R[v]=m.c2l(R[v]);if(x.type==="log")for(v=1;v<E;v+=2)R[v]=x.c2l(R[v]);h&&m.type!=="log"&&x.type!=="log"?k.tree=M(R):k.ids=j,r(f,b);var Z,B=function(V,ne,ee,$,J,K){var te=i.style(V,ee);if(te.marker&&(te.marker.positions=$),te.line&&$.length>1&&A.extendFlat(te.line,i.linePositions(V,ee,$)),te.errorX||te.errorY){var ie=i.errorBarPositions(V,ee,$,J,K);te.errorX&&A.extendFlat(te.errorX,ie.x),te.errorY&&A.extendFlat(te.errorY,ie.y)}return te.text&&(A.extendFlat(te.text,{positions:$},i.textPosition(V,ee,te.text,te.marker)),A.extendFlat(te.textSel,{positions:$},i.textPosition(V,ee,te.text,te.markerSel)),A.extendFlat(te.textUnsel,{positions:$},i.textPosition(V,ee,te.text,te.markerUnsel))),te}(f,0,b,R,F,U),q=l(f,y);return a(d,b),h?B.marker&&(Z=B.marker.sizeAvg||Math.max(B.marker.size,3)):Z=s(b,T),n(f,b,m,x,F,U,Z),B.errorX&&g(b,m,B.errorX),B.errorY&&g(b,x,B.errorY),B.fill&&!q.fill2d&&(q.fill2d=!0),B.marker&&!q.scatter2d&&(q.scatter2d=!0),B.line&&!q.line2d&&(q.line2d=!0),!B.errorX&&!B.errorY||q.error2d||(q.error2d=!0),B.text&&!q.glText&&(q.glText=!0),B.marker&&(B.marker.snap=T),q.lineOptions.push(B.line),q.errorXOptions.push(B.errorX),q.errorYOptions.push(B.errorY),q.fillOptions.push(B.fill),q.markerOptions.push(B.marker),q.markerSelectedOptions.push(B.markerSel),q.markerUnselectedOptions.push(B.markerUnsel),q.textOptions.push(B.text),q.textSelectedOptions.push(B.textSel),q.textUnselectedOptions.push(B.textUnsel),q.selectBatch.push([]),q.unselectBatch.push([]),k._scene=q,k.index=q.count,k.x=F,k.y=U,k.positions=R,q.count++,[{x:!1,y:!1,t:k,trace:b}]}},67072:function(Y){Y.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},84236:function(Y,O,e){var M=e(38248),A=e(20472),o=e(72160),w=e(24040),_=e(3400),p=_.isArrayOrTypedArray,s=e(43616),n=e(79811),a=e(33040).formatColor,r=e(43028),i=e(7152),l=e(80088),u=e(67072),c=e(13448).DESELECTDIM,g={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},f=e(10624).appendArrayPointValue;function b(P,I){var z,F=P._fullLayout,U=I._length,R=I.textfont,j=I.textposition,Z=p(j)?j:[j],B=R.color,q=R.size,V=R.family,ne={},ee=P._context.plotGlPixelRatio,$=I.texttemplate;if($){ne.text=[];var J=F._d3locale,K=Array.isArray($),te=K?Math.min($.length,U):U,ie=K?function(be){return $[be]}:function(){return $};for(z=0;z<te;z++){var ae={i:z},se=I._module.formatLabels(ae,I,F),ce={};f(ce,I,z);var de=I._meta||{};ne.text.push(_.texttemplateString(ie(z),se,J,ce,ae,de))}}else p(I.text)&&I.text.length<U?ne.text=I.text.slice():ne.text=I.text;if(p(ne.text))for(z=ne.text.length;z<U;z++)ne.text[z]="";for(ne.opacity=I.opacity,ne.font={},ne.align=[],ne.baseline=[],z=0;z<Z.length;z++){var ge=Z[z].split(/\s+/);switch(ge[1]){case"left":ne.align.push("right");break;case"right":ne.align.push("left");break;default:ne.align.push(ge[1])}switch(ge[0]){case"top":ne.baseline.push("bottom");break;case"bottom":ne.baseline.push("top");break;default:ne.baseline.push(ge[0])}}if(p(B))for(ne.color=new Array(U),z=0;z<U;z++)ne.color[z]=B[z];else ne.color=B;if(p(q)||p(V))for(ne.font=new Array(U),z=0;z<U;z++){var ve=ne.font[z]={};ve.size=(_.isTypedArray(q)?q[z]:p(q)?M(q[z])?q[z]:0:q)*ee,ve.family=p(V)?V[z]:V}else ne.font={size:q*ee,family:V};return ne}function v(P,I){var z,F,U=I._length,R=I.marker,j={},Z=p(R.symbol),B=p(R.angle),q=p(R.color),V=p(R.line.color),ne=p(R.opacity),ee=p(R.size),$=p(R.line.width);if(Z||(F=l.isOpenSymbol(R.symbol)),Z||q||V||ne||B){j.symbols=new Array(U),j.angles=new Array(U),j.colors=new Array(U),j.borderColors=new Array(U);var J=R.symbol,K=R.angle,te=a(R,R.opacity,U),ie=a(R.line,R.opacity,U);if(!p(ie[0])){var ae=ie;for(ie=Array(U),z=0;z<U;z++)ie[z]=ae}if(!p(te[0])){var se=te;for(te=Array(U),z=0;z<U;z++)te[z]=se}if(!p(J)){var ce=J;for(J=Array(U),z=0;z<U;z++)J[z]=ce}if(!p(K)){var de=K;for(K=Array(U),z=0;z<U;z++)K[z]=de}for(j.symbols=J,j.angles=K,j.colors=te,j.borderColors=ie,z=0;z<U;z++)Z&&(F=l.isOpenSymbol(R.symbol[z])),F&&(ie[z]=te[z].slice(),te[z]=te[z].slice(),te[z][3]=0);for(j.opacity=I.opacity,j.markers=new Array(U),z=0;z<U;z++)j.markers[z]=L({mx:j.symbols[z],ma:j.angles[z]},I)}else F?(j.color=o(R.color,"uint8"),j.color[3]=0,j.borderColor=o(R.color,"uint8")):(j.color=o(R.color,"uint8"),j.borderColor=o(R.line.color,"uint8")),j.opacity=I.opacity*R.opacity,j.marker=L({mx:R.symbol,ma:R.angle},I);var ge,ve=i(I,1);if(ee||$){var be,me=j.sizes=new Array(U),Se=j.borderSizes=new Array(U),we=0;if(ee){for(z=0;z<U;z++)me[z]=ve(R.size[z]),we+=me[z];be=we/U}else for(ge=ve(R.size),z=0;z<U;z++)me[z]=ge;if($)for(z=0;z<U;z++)Se[z]=R.line.width[z];else for(ge=R.line.width,z=0;z<U;z++)Se[z]=ge;j.sizeAvg=be}else j.size=ve(R&&R.size||10),j.borderSizes=ve(R.line.width);return j}function d(P,I,z){var F=I.marker,U={};return z&&(z.marker&&z.marker.symbol?U=v(0,_.extendFlat({},F,z.marker)):z.marker&&(z.marker.size&&(U.size=z.marker.size),z.marker.color&&(U.colors=z.marker.color),z.marker.opacity!==void 0&&(U.opacity=z.marker.opacity))),U}function m(P,I,z){var F={};if(!z)return F;if(z.textfont){var U={opacity:1,text:I.text,texttemplate:I.texttemplate,textposition:I.textposition,textfont:_.extendFlat({},I.textfont)};z.textfont&&_.extendFlat(U.textfont,z.textfont),F=b(P,U)}return F}function x(P,I,z){var F={capSize:2*I.width*z,lineWidth:I.thickness*z,color:I.color};return I.copy_ystyle&&(F=P.error_y),F}var y=u.SYMBOL_SDF_SIZE,T=u.SYMBOL_SIZE,h=u.SYMBOL_STROKE,E={},k=s.symbolFuncs[0](.05*T);function L(P,I){var z,F,U=P.mx;if(U==="circle")return null;var R=s.symbolNumber(U),j=s.symbolFuncs[R%100],Z=!!s.symbolNoDot[R%100],B=!!s.symbolNoFill[R%100],q=l.isDotSymbol(U);if(P.ma&&(U+="_"+P.ma),E[U])return E[U];var V=s.getMarkerAngle(P,I);return z=q&&!Z?j(1.1*T,V)+k:j(T,V),F=A(z,{w:y,h:y,viewBox:[-T,-T,T,T],stroke:B?h:-h}),E[U]=F,F||null}Y.exports={style:function(P,I){var z,F={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},U=P._context.plotGlPixelRatio;if(I.visible!==!0)return F;if(r.hasText(I)&&(F.text=b(P,I),F.textSel=m(P,I,I.selected),F.textUnsel=m(P,I,I.unselected)),r.hasMarkers(I)&&(F.marker=v(0,I),F.markerSel=d(0,I,I.selected),F.markerUnsel=d(0,I,I.unselected),!I.unselected&&p(I.marker.opacity))){var R=I.marker.opacity;for(F.markerUnsel.opacity=new Array(R.length),z=0;z<R.length;z++)F.markerUnsel.opacity[z]=c*R[z]}if(r.hasLines(I)){F.line={overlay:!0,thickness:I.line.width*U,color:I.line.color,opacity:I.opacity};var j=(u.DASHES[I.line.dash]||[1]).slice();for(z=0;z<j.length;++z)j[z]*=I.line.width*U;F.line.dashes=j}return I.error_x&&I.error_x.visible&&(F.errorX=x(I,I.error_x,U)),I.error_y&&I.error_y.visible&&(F.errorY=x(I,I.error_y,U)),I.fill&&I.fill!=="none"&&(F.fill={closed:!0,fill:I.fillcolor,thickness:0}),F},markerStyle:v,markerSelection:d,linePositions:function(P,I,z){var F,U,R=z.length,j=R/2;if(r.hasLines(I)&&j)if(I.line.shape==="hv"){for(F=[],U=0;U<j-1;U++)isNaN(z[2*U])||isNaN(z[2*U+1])?F.push(NaN,NaN,NaN,NaN):(F.push(z[2*U],z[2*U+1]),isNaN(z[2*U+2])||isNaN(z[2*U+3])?F.push(NaN,NaN):F.push(z[2*U+2],z[2*U+1]));F.push(z[R-2],z[R-1])}else if(I.line.shape==="hvh"){for(F=[],U=0;U<j-1;U++)if(isNaN(z[2*U])||isNaN(z[2*U+1])||isNaN(z[2*U+2])||isNaN(z[2*U+3]))isNaN(z[2*U])||isNaN(z[2*U+1])?F.push(NaN,NaN):F.push(z[2*U],z[2*U+1]),F.push(NaN,NaN);else{var Z=(z[2*U]+z[2*U+2])/2;F.push(z[2*U],z[2*U+1],Z,z[2*U+1],Z,z[2*U+3])}F.push(z[R-2],z[R-1])}else if(I.line.shape==="vhv"){for(F=[],U=0;U<j-1;U++)if(isNaN(z[2*U])||isNaN(z[2*U+1])||isNaN(z[2*U+2])||isNaN(z[2*U+3]))isNaN(z[2*U])||isNaN(z[2*U+1])?F.push(NaN,NaN):F.push(z[2*U],z[2*U+1]),F.push(NaN,NaN);else{var B=(z[2*U+1]+z[2*U+3])/2;F.push(z[2*U],z[2*U+1],z[2*U],B,z[2*U+2],B)}F.push(z[R-2],z[R-1])}else if(I.line.shape==="vh"){for(F=[],U=0;U<j-1;U++)isNaN(z[2*U])||isNaN(z[2*U+1])?F.push(NaN,NaN,NaN,NaN):(F.push(z[2*U],z[2*U+1]),isNaN(z[2*U+2])||isNaN(z[2*U+3])?F.push(NaN,NaN):F.push(z[2*U],z[2*U+3]));F.push(z[R-2],z[R-1])}else F=z;var q=!1;for(U=0;U<F.length;U++)if(isNaN(F[U])){q=!0;break}var V=q||F.length>u.TOO_MANY_POINTS||r.hasMarkers(I)?"rect":"round";if(q&&I.connectgaps){var ne=F[0],ee=F[1];for(U=0;U<F.length;U+=2)isNaN(F[U])||isNaN(F[U+1])?(F[U]=ne,F[U+1]=ee):(ne=F[U],ee=F[U+1])}return{join:V,positions:F}},errorBarPositions:function(P,I,z,F,U){var R=w.getComponentMethod("errorbars","makeComputeError"),j=n.getFromId(P,I.xaxis,"x"),Z=n.getFromId(P,I.yaxis,"y"),B=z.length/2,q={};function V(ne,ee){var $=ee._id.charAt(0),J=I["error_"+$];if(J&&J.visible&&(ee.type==="linear"||ee.type==="log")){for(var K=R(J),te={x:0,y:1}[$],ie={x:[0,1,2,3],y:[2,3,0,1]}[$],ae=new Float64Array(4*B),se=1/0,ce=-1/0,de=0,ge=0;de<B;de++,ge+=4){var ve=ne[de];if(M(ve)){var be=z[2*de+te],me=K(ve,de),Se=me[0],we=me[1];if(M(Se)&&M(we)){var _e=ve-Se,oe=ve+we;ae[ge+ie[0]]=be-ee.c2l(_e),ae[ge+ie[1]]=ee.c2l(oe)-be,ae[ge+ie[2]]=0,ae[ge+ie[3]]=0,se=Math.min(se,ve-Se),ce=Math.max(ce,ve+we)}}}q[$]={positions:z,errors:ae,_bnds:[se,ce]}}}return V(F,j),V(U,Z),q},textPosition:function(P,I,z,F){var U,R=I._length,j={};if(r.hasMarkers(I)){var Z=z.font,B=z.align,q=z.baseline;for(j.offset=new Array(R),U=0;U<R;U++){var V=F.sizes?F.sizes[U]:F.size,ne=p(Z)?Z[U].size:Z.size,ee=p(B)?B.length>1?B[U]:B[0]:B,$=p(q)?q.length>1?q[U]:q[0]:q,J=g[ee],K=g[$],te=V?V/.8+1:0,ie=-K*te-.5*K;j.offset[U]=[J*te/ne,ie/ne]}}return j}}},80220:function(Y,O,e){var M=e(3400),A=e(24040),o=e(80088),w=e(2876),_=e(88200),p=e(43028),s=e(43980),n=e(31147),a=e(74428),r=e(66828),i=e(70840),l=e(124);Y.exports=function(u,c,g,f){function b(E,k){return M.coerce(u,c,w,E,k)}var v=!!u.marker&&o.isOpenSymbol(u.marker.symbol),d=p.isBubble(u),m=s(u,c,f,b);if(m){n(u,c,f,b),b("xhoverformat"),b("yhoverformat");var x=m<_.PTS_LINESONLY?"lines+markers":"lines";b("text"),b("hovertext"),b("hovertemplate"),b("mode",x),p.hasMarkers(c)&&(a(u,c,g,f,b,{noAngleRef:!0,noStandOff:!0}),b("marker.line.width",v||d?1:0)),p.hasLines(c)&&(b("connectgaps"),r(u,c,g,f,b),b("line.shape")),p.hasText(c)&&(b("texttemplate"),l(u,c,f,b));var y=(c.line||{}).color,T=(c.marker||{}).color;b("fill"),c.fill!=="none"&&i(u,c,g,b);var h=A.getComponentMethod("errorbars","supplyDefaults");h(u,c,y||T||g,{axis:"y"}),h(u,c,y||T||g,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(c,b)}else c.visible=!1}},26768:function(Y,O,e){var M=e(3400),A=e(76308),o=e(13448).DESELECTDIM;Y.exports={styleTextSelection:function(w){var _,p,s=w[0],n=s.trace,a=s.t,r=a._scene,i=a.index,l=r.selectBatch[i],u=r.unselectBatch[i],c=r.textOptions[i],g=r.textSelectedOptions[i]||{},f=r.textUnselectedOptions[i]||{},b=M.extendFlat({},c);if(l.length||u.length){var v=g.color,d=f.color,m=c.color,x=M.isArrayOrTypedArray(m);for(b.color=new Array(n._length),_=0;_<l.length;_++)p=l[_],b.color[p]=v||(x?m[p]:m);for(_=0;_<u.length;_++){p=u[_];var y=x?m[p]:m;b.color[p]=d||(v?y:A.addOpacity(y,o))}}r.glText[i].update(b)}}},99396:function(Y,O,e){var M=e(76688);Y.exports=function(A,o,w){var _=A.i;return"x"in A||(A.x=o._x[_]),"y"in A||(A.y=o._y[_]),M(A,o,w)}},80088:function(Y,O,e){var M=e(67072);O.isOpenSymbol=function(A){return typeof A=="string"?M.OPEN_RE.test(A):A%200>100},O.isDotSymbol=function(A){return typeof A=="string"?M.DOT_RE.test(A):A>200}},41272:function(Y,O,e){var M=e(24040),A=e(3400),o=e(44928);function w(_,p,s,n){var a=_.xa,r=_.ya,i=_.distance,l=_.dxy,u=_.index,c={pointNumber:u,x:p[u],y:s[u]};c.tx=A.isArrayOrTypedArray(n.text)?n.text[u]:n.text,c.htx=Array.isArray(n.hovertext)?n.hovertext[u]:n.hovertext,c.data=Array.isArray(n.customdata)?n.customdata[u]:n.customdata,c.tp=Array.isArray(n.textposition)?n.textposition[u]:n.textposition;var g=n.textfont;g&&(c.ts=A.isArrayOrTypedArray(g.size)?g.size[u]:g.size,c.tc=Array.isArray(g.color)?g.color[u]:g.color,c.tf=Array.isArray(g.family)?g.family[u]:g.family);var f=n.marker;f&&(c.ms=A.isArrayOrTypedArray(f.size)?f.size[u]:f.size,c.mo=A.isArrayOrTypedArray(f.opacity)?f.opacity[u]:f.opacity,c.mx=A.isArrayOrTypedArray(f.symbol)?f.symbol[u]:f.symbol,c.ma=A.isArrayOrTypedArray(f.angle)?f.angle[u]:f.angle,c.mc=A.isArrayOrTypedArray(f.color)?f.color[u]:f.color);var b=f&&f.line;b&&(c.mlc=Array.isArray(b.color)?b.color[u]:b.color,c.mlw=A.isArrayOrTypedArray(b.width)?b.width[u]:b.width);var v=f&&f.gradient;v&&v.type!=="none"&&(c.mgt=Array.isArray(v.type)?v.type[u]:v.type,c.mgc=Array.isArray(v.color)?v.color[u]:v.color);var d=a.c2p(c.x,!0),m=r.c2p(c.y,!0),x=c.mrc||1,y=n.hoverlabel;y&&(c.hbg=Array.isArray(y.bgcolor)?y.bgcolor[u]:y.bgcolor,c.hbc=Array.isArray(y.bordercolor)?y.bordercolor[u]:y.bordercolor,c.hts=A.isArrayOrTypedArray(y.font.size)?y.font.size[u]:y.font.size,c.htc=Array.isArray(y.font.color)?y.font.color[u]:y.font.color,c.htf=Array.isArray(y.font.family)?y.font.family[u]:y.font.family,c.hnl=A.isArrayOrTypedArray(y.namelength)?y.namelength[u]:y.namelength);var T=n.hoverinfo;T&&(c.hi=Array.isArray(T)?T[u]:T);var h=n.hovertemplate;h&&(c.ht=Array.isArray(h)?h[u]:h);var E={};E[_.index]=c;var k=n._origX,L=n._origY,P=A.extendFlat({},_,{color:o(n,c),x0:d-x,x1:d+x,xLabelVal:k?k[u]:c.x,y0:m-x,y1:m+x,yLabelVal:L?L[u]:c.y,cd:E,distance:i,spikeDistance:l,hovertemplate:c.ht});return c.htx?P.text=c.htx:c.tx?P.text=c.tx:n.text&&(P.text=n.text),A.fillText(c,n,P),M.getComponentMethod("errorbars","hoverInfo")(c,n,P),P}Y.exports={hoverPoints:function(_,p,s,n){var a,r,i,l,u,c,g,f,b,v,d=_.cd,m=d[0].t,x=d[0].trace,y=_.xa,T=_.ya,h=m.x,E=m.y,k=y.c2p(p),L=T.c2p(s),P=_.distance;if(m.tree){var I=y.p2c(k-P),z=y.p2c(k+P),F=T.p2c(L-P),U=T.p2c(L+P);a=n==="x"?m.tree.range(Math.min(I,z),Math.min(T._rl[0],T._rl[1]),Math.max(I,z),Math.max(T._rl[0],T._rl[1])):m.tree.range(Math.min(I,z),Math.min(F,U),Math.max(I,z),Math.max(F,U))}else a=m.ids;var R=P;if(n==="x"){var j=!!x.xperiodalignment,Z=!!x.yperiodalignment;for(c=0;c<a.length;c++){if(l=h[r=a[c]],g=Math.abs(y.c2p(l)-k),j){var B=y.c2p(x._xStarts[r]),q=y.c2p(x._xEnds[r]);g=k>=Math.min(B,q)&&k<=Math.max(B,q)?0:1/0}if(g<R){if(R=g,u=E[r],f=T.c2p(u)-L,Z){var V=T.c2p(x._yStarts[r]),ne=T.c2p(x._yEnds[r]);f=L>=Math.min(V,ne)&&L<=Math.max(V,ne)?0:1/0}v=Math.sqrt(g*g+f*f),i=a[c]}}}else for(c=a.length-1;c>-1;c--)l=h[r=a[c]],u=E[r],g=y.c2p(l)-k,f=T.c2p(u)-L,(b=Math.sqrt(g*g+f*f))<R&&(R=v=b,i=r);return _.index=i,_.distance=R,_.dxy=v,i===void 0?[_]:[w(_,h,E,x)]},calcHover:w}},38983:function(Y,O,e){var M=e(64628);M.plot=e(89876),Y.exports=M},89876:function(Y,O,e){var M=e(38540),A=e(13472),o=e(24544),w=e(23352),_=e(3400),p=e(72760).selectMode,s=e(5048),n=e(43028),a=e(14328),r=e(26768).styleTextSelection,i={};function l(u,c,g,f){var b=u._size,v=u.width*f,d=u.height*f,m=b.l*f,x=b.b*f,y=b.r*f,T=b.t*f,h=b.w*f,E=b.h*f;return[m+c.domain[0]*h,x+g.domain[0]*E,v-y-(1-c.domain[1])*h,d-T-(1-g.domain[1])*E]}(Y.exports=function(u,c,g){if(g.length){var f,b,v=u._fullLayout,d=c._scene,m=c.xaxis,x=c.yaxis;if(d)if(s(u,["ANGLE_instanced_arrays","OES_element_index_uint"],i)){var y=d.count,T=v._glcanvas.data()[0].regl;if(a(u,c,g),d.dirty){if(!d.line2d&&!d.error2d||d.scatter2d||d.fill2d||d.glText||T.clear({}),d.error2d===!0&&(d.error2d=o(T)),d.line2d===!0&&(d.line2d=A(T)),d.scatter2d===!0&&(d.scatter2d=M(T)),d.fill2d===!0&&(d.fill2d=A(T)),d.glText===!0)for(d.glText=new Array(y),f=0;f<y;f++)d.glText[f]=new w(T);if(d.glText){if(y>d.glText.length){var h=y-d.glText.length;for(f=0;f<h;f++)d.glText.push(new w(T))}else if(y<d.glText.length){var E=d.glText.length-y;d.glText.splice(y,E).forEach(function(ie){ie.destroy()})}for(f=0;f<y;f++)d.glText[f].update(d.textOptions[f])}if(d.line2d&&(d.line2d.update(d.lineOptions),d.lineOptions=d.lineOptions.map(function(ie){if(ie&&ie.positions){for(var ae=ie.positions,se=0;se<ae.length&&(isNaN(ae[se])||isNaN(ae[se+1]));)se+=2;for(var ce=ae.length-2;ce>se&&(isNaN(ae[ce])||isNaN(ae[ce+1]));)ce-=2;ie.positions=ae.slice(se,ce+2)}return ie}),d.line2d.update(d.lineOptions)),d.error2d){var k=(d.errorXOptions||[]).concat(d.errorYOptions||[]);d.error2d.update(k)}d.scatter2d&&d.scatter2d.update(d.markerOptions),d.fillOrder=_.repeat(null,y),d.fill2d&&(d.fillOptions=d.fillOptions.map(function(ie,ae){var se=g[ae];if(ie&&se&&se[0]&&se[0].trace){var ce,de,ge=se[0],ve=ge.trace,be=ge.t,me=d.lineOptions[ae],Se=[];ve._ownfill&&Se.push(ae),ve._nexttrace&&Se.push(ae+1),Se.length&&(d.fillOrder[ae]=Se);var we,_e,oe=[],le=me&&me.positions||be.positions;if(ve.fill==="tozeroy"){for(we=0;we<le.length&&isNaN(le[we+1]);)we+=2;for(_e=le.length-2;_e>we&&isNaN(le[_e+1]);)_e-=2;le[we+1]!==0&&(oe=[le[we],0]),oe=oe.concat(le.slice(we,_e+2)),le[_e+1]!==0&&(oe=oe.concat([le[_e],0]))}else if(ve.fill==="tozerox"){for(we=0;we<le.length&&isNaN(le[we]);)we+=2;for(_e=le.length-2;_e>we&&isNaN(le[_e]);)_e-=2;le[we]!==0&&(oe=[0,le[we+1]]),oe=oe.concat(le.slice(we,_e+2)),le[_e]!==0&&(oe=oe.concat([0,le[_e+1]]))}else if(ve.fill==="toself"||ve.fill==="tonext"){for(oe=[],ce=0,ie.splitNull=!0,de=0;de<le.length;de+=2)(isNaN(le[de])||isNaN(le[de+1]))&&((oe=oe.concat(le.slice(ce,de))).push(le[ce],le[ce+1]),oe.push(null,null),ce=de+2);oe=oe.concat(le.slice(ce)),ce&&oe.push(le[ce],le[ce+1])}else{var pe=ve._nexttrace;if(pe){var Ee=d.lineOptions[ae+1];if(Ee){var Te=Ee.positions;if(ve.fill==="tonexty"){for(oe=le.slice(),ae=Math.floor(Te.length/2);ae--;){var Me=Te[2*ae],Le=Te[2*ae+1];isNaN(Me)||isNaN(Le)||oe.push(Me,Le)}ie.fill=pe.fillcolor}}}}if(ve._prevtrace&&ve._prevtrace.fill==="tonext"){var Ie=d.lineOptions[ae-1].positions,he=oe.length/2,xe=[ce=he];for(de=0;de<Ie.length;de+=2)(isNaN(Ie[de])||isNaN(Ie[de+1]))&&(xe.push(de/2+he+1),ce=de+2);oe=oe.concat(Ie),ie.hole=xe}return ie.fillmode=ve.fill,ie.opacity=ve.opacity,ie.positions=oe,ie}}),d.fill2d.update(d.fillOptions))}var L=v.dragmode,P=p(L),I=v.clickmode.indexOf("select")>-1;for(f=0;f<y;f++){var z=g[f][0],F=z.trace,U=z.t,R=U.index,j=F._length,Z=U.x,B=U.y;if(F.selectedpoints||P||I){if(P||(P=!0),F.selectedpoints){var q=d.selectBatch[R]=_.selIndices2selPoints(F),V={};for(b=0;b<q.length;b++)V[q[b]]=1;var ne=[];for(b=0;b<j;b++)V[b]||ne.push(b);d.unselectBatch[R]=ne}var ee=U.xpx=new Array(j),$=U.ypx=new Array(j);for(b=0;b<j;b++)ee[b]=m.c2p(Z[b]),$[b]=x.c2p(B[b])}else U.xpx=U.ypx=null}if(P){if(d.select2d||(d.select2d=M(v._glcanvas.data()[1].regl)),d.scatter2d){var J=new Array(y);for(f=0;f<y;f++)J[f]=d.selectBatch[f].length||d.unselectBatch[f].length?d.markerUnselectedOptions[f]:{};d.scatter2d.update(J)}d.select2d&&(d.select2d.update(d.markerOptions),d.select2d.update(d.markerSelectedOptions)),d.glText&&g.forEach(function(ie){var ae=((ie||[])[0]||{}).trace||{};n.hasText(ae)&&r(ie)})}else d.scatter2d&&d.scatter2d.update(d.markerOptions);var K={viewport:l(v,m,x,u._context.plotGlPixelRatio),range:[(m._rl||m.range)[0],(x._rl||x.range)[0],(m._rl||m.range)[1],(x._rl||x.range)[1]]},te=_.repeat(K,d.count);d.fill2d&&d.fill2d.update(te),d.line2d&&d.line2d.update(te),d.error2d&&d.error2d.update(te.concat(te)),d.scatter2d&&d.scatter2d.update(te),d.select2d&&d.select2d.update(te),d.glText&&d.glText.forEach(function(ie){ie.update(K)})}else d.init()}}).reglPrecompiled=i},74588:function(Y,O,e){var M=e(3400);Y.exports=function(A,o){var w=o._scene,_={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},p={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return o._scene||((w=o._scene={}).init=function(){M.extendFlat(w,p,_)},w.init(),w.update=function(s){var n=M.repeat(s,w.count);if(w.fill2d&&w.fill2d.update(n),w.scatter2d&&w.scatter2d.update(n),w.line2d&&w.line2d.update(n),w.error2d&&w.error2d.update(n.concat(n)),w.select2d&&w.select2d.update(n),w.glText)for(var a=0;a<w.count;a++)w.glText[a].update(s)},w.draw=function(){for(var s=w.count,n=w.fill2d,a=w.error2d,r=w.line2d,i=w.scatter2d,l=w.glText,u=w.select2d,c=w.selectBatch,g=w.unselectBatch,f=0;f<s;f++){if(n&&w.fillOrder[f]&&n.draw(w.fillOrder[f]),r&&w.lineOptions[f]&&r.draw(f),a&&(w.errorXOptions[f]&&a.draw(f),w.errorYOptions[f]&&a.draw(f+s)),i&&w.markerOptions[f])if(g[f].length){var b=M.repeat([],w.count);b[f]=g[f],i.draw(b)}else c[f].length||i.draw(f);l[f]&&w.textOptions[f]&&l[f].render()}u&&u.draw(c),w.dirty=!1},w.destroy=function(){w.fill2d&&w.fill2d.destroy&&w.fill2d.destroy(),w.scatter2d&&w.scatter2d.destroy&&w.scatter2d.destroy(),w.error2d&&w.error2d.destroy&&w.error2d.destroy(),w.line2d&&w.line2d.destroy&&w.line2d.destroy(),w.select2d&&w.select2d.destroy&&w.select2d.destroy(),w.glText&&w.glText.forEach(function(s){s.destroy&&s.destroy()}),w.lineOptions=null,w.fillOptions=null,w.markerOptions=null,w.markerSelectedOptions=null,w.markerUnselectedOptions=null,w.errorXOptions=null,w.errorYOptions=null,w.textOptions=null,w.textSelectedOptions=null,w.textUnselectedOptions=null,w.selectBatch=null,w.unselectBatch=null,o._scene=null}),w.dirty||M.extendFlat(w,_),w}},73224:function(Y,O,e){var M=e(43028),A=e(26768).styleTextSelection;Y.exports=function(o,w){var _=o.cd,p=o.xaxis,s=o.yaxis,n=[],a=_[0].trace,r=_[0].t,i=a._length,l=r.x,u=r.y,c=r._scene,g=r.index;if(!c)return n;var f=M.hasText(a),b=M.hasMarkers(a),v=!b&&!f;if(a.visible!==!0||v)return n;var d=[],m=[];if(w!==!1&&!w.degenerate)for(var x=0;x<i;x++)w.contains([r.xpx[x],r.ypx[x]],!1,x,o)?(d.push(x),n.push({pointNumber:x,x:p.c2d(l[x]),y:s.c2d(u[x])})):m.push(x);if(b){var y=c.scatter2d;if(d.length||m.length){if(!c.selectBatch[g].length&&!c.unselectBatch[g].length){var T=new Array(c.count);T[g]=c.markerUnselectedOptions[g],y.update.apply(y,T)}}else{var h=new Array(c.count);h[g]=c.markerOptions[g],y.update.apply(y,h)}}return c.selectBatch[g]=d,c.unselectBatch[g]=m,f&&A(_),n}},31512:function(Y,O,e){var M=e(21776).Ks,A=e(21776).Gw,o=e(6096),w=e(52904),_=e(5232),p=e(45464),s=e(49084),n=e(92880).extendFlat,a=e(67824).overrideAll,r=e(5232),i=o.line,l=o.marker;Y.exports=a({lon:o.lon,lat:o.lat,cluster:{enabled:{valType:"boolean"},maxzoom:n({},r.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:n({},l.opacity,{dflt:1})},mode:n({},w.mode,{dflt:"markers"}),text:n({},w.text,{}),texttemplate:A({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:n({},w.hovertext,{}),line:{color:i.color,width:i.width},connectgaps:w.connectgaps,marker:n({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:l.opacity,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode},s("marker")),fill:o.fill,fillcolor:w.fillcolor,textfont:_.layers.symbol.textfont,textposition:_.layers.symbol.textposition,below:{valType:"string"},selected:{marker:w.selected.marker},unselected:{marker:w.unselected.marker},hoverinfo:n({},p.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:M()},"calc","nested")},59392:function(Y,O,e){var M=e(38248),A=e(3400),o=e(39032).BADNUM,w=e(44808),_=e(8932),p=e(43616),s=e(7152),n=e(43028),a=e(89032),r=e(10624).appendArrayPointValue,i=e(72736).NEWLINES,l=e(72736).BR_TAG_ALL;function u(v){return{type:v,geojson:w.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function c(v,d){return A.isArrayOrTypedArray(v)?d?function(m){return M(v[m])?+v[m]:0}:function(m){return v[m]}:v?function(){return v}:g}function g(){return""}function f(v){return v[0]===o}function b(v,d){var m;if(A.isArrayOrTypedArray(v)&&A.isArrayOrTypedArray(d)){m=["step",["get","point_count"],v[0]];for(var x=1;x<v.length;x++)m.push(d[x-1],v[x])}else m=v;return m}Y.exports=function(v,d){var m,x=d[0].trace,y=x.visible===!0&&x._length!==0,T=x.fill!=="none",h=n.hasLines(x),E=n.hasMarkers(x),k=n.hasText(x),L=E&&x.marker.symbol==="circle",P=E&&x.marker.symbol!=="circle",I=x.cluster&&x.cluster.enabled,z=u("fill"),F=u("line"),U=u("circle"),R=u("symbol"),j={fill:z,line:F,circle:U,symbol:R};if(!y)return j;if((T||h)&&(m=w.calcTraceToLineCoords(d)),T&&(z.geojson=w.makePolygon(m),z.layout.visibility="visible",A.extendFlat(z.paint,{"fill-color":x.fillcolor})),h&&(F.geojson=w.makeLine(m),F.layout.visibility="visible",A.extendFlat(F.paint,{"line-width":x.line.width,"line-color":x.line.color,"line-opacity":x.opacity})),L){var Z=function(V){var ne,ee,$,J,K=V[0].trace,te=K.marker,ie=K.selectedpoints,ae=A.isArrayOrTypedArray(te.color),se=A.isArrayOrTypedArray(te.size),ce=A.isArrayOrTypedArray(te.opacity);function de(oe){return K.opacity*oe}ae&&(ee=_.hasColorscale(K,"marker")?_.makeColorScaleFuncFromTrace(te):A.identity),se&&($=s(K)),ce&&(J=function(oe){return de(M(oe)?+A.constrain(oe,0,1):0)});var ge,ve,be=[];for(ne=0;ne<V.length;ne++){var me=V[ne],Se=me.lonlat;if(!f(Se)){var we={};ee&&(we.mcc=me.mcc=ee(me.mc)),$&&(we.mrc=me.mrc=$(me.ms)),J&&(we.mo=J(me.mo)),ie&&(we.selected=me.selected||0),be.push({type:"Feature",id:ne+1,geometry:{type:"Point",coordinates:Se},properties:we})}}if(ie)for(ge=p.makeSelectedPointStyleFns(K),ne=0;ne<be.length;ne++){var _e=be[ne].properties;ge.selectedOpacityFn&&(_e.mo=de(ge.selectedOpacityFn(_e))),ge.selectedColorFn&&(_e.mcc=ge.selectedColorFn(_e)),ge.selectedSizeFn&&(_e.mrc=ge.selectedSizeFn(_e))}return{geojson:{type:"FeatureCollection",features:be},mcc:ae||ge&&ge.selectedColorFn?{type:"identity",property:"mcc"}:te.color,mrc:se||ge&&ge.selectedSizeFn?{type:"identity",property:"mrc"}:(ve=te.size,ve/2),mo:ce||ge&&ge.selectedOpacityFn?{type:"identity",property:"mo"}:de(te.opacity)}}(d);U.geojson=Z.geojson,U.layout.visibility="visible",I&&(U.filter=["!",["has","point_count"]],j.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":b(x.cluster.color,x.cluster.step),"circle-radius":b(x.cluster.size,x.cluster.step),"circle-opacity":b(x.cluster.opacity,x.cluster.step)}},j.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),A.extendFlat(U.paint,{"circle-color":Z.mcc,"circle-radius":Z.mrc,"circle-opacity":Z.mo})}if(L&&I&&(U.filter=["!",["has","point_count"]]),(P||k)&&(R.geojson=function(V,ne){for(var ee=ne._fullLayout,$=V[0].trace,J=$.marker||{},K=J.symbol,te=J.angle,ie=K!=="circle"?c(K):g,ae=te!=="auto"?c(te,!0):g,se=n.hasText($)?c($.text):g,ce=[],de=0;de<V.length;de++){var ge=V[de];if(!f(ge.lonlat)){var ve,be=$.texttemplate;if(be){var me=Array.isArray(be)?be[de]||"":be,Se=$._module.formatLabels(ge,$,ee),we={};r(we,$,ge.i);var _e=$._meta||{};ve=A.texttemplateString(me,Se,ee._d3locale,we,ge,_e)}else ve=se(de);ve&&(ve=ve.replace(i,"").replace(l,`
`)),ce.push({type:"Feature",geometry:{type:"Point",coordinates:ge.lonlat},properties:{symbol:ie(de),angle:ae(de),text:ve}})}}return{type:"FeatureCollection",features:ce}}(d,v),A.extendFlat(R.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),P&&(A.extendFlat(R.layout,{"icon-size":x.marker.size/10}),"angle"in x.marker&&x.marker.angle!=="auto"&&A.extendFlat(R.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),R.layout["icon-allow-overlap"]=x.marker.allowoverlap,A.extendFlat(R.paint,{"icon-opacity":x.opacity*x.marker.opacity,"icon-color":x.marker.color})),k)){var B=(x.marker||{}).size,q=a(x.textposition,B);A.extendFlat(R.layout,{"text-size":x.textfont.size,"text-anchor":q.anchor,"text-offset":q.offset,"text-font":x.textfont.family.split(", ")}),A.extendFlat(R.paint,{"text-color":x.textfont.color,"text-opacity":x.opacity})}return j}},15752:function(Y,O,e){var M=e(3400),A=e(43028),o=e(74428),w=e(66828),_=e(124),p=e(70840),s=e(31512),n=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extra Bold Italic","Open Sans Extra Bold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];Y.exports=function(a,r,i,l){function u(y,T){return M.coerce(a,r,s,y,T)}function c(y,T){return M.coerce2(a,r,s,y,T)}var g=function(y,T,h){var E=h("lon")||[],k=h("lat")||[],L=Math.min(E.length,k.length);return T._length=L,L}(0,r,u);if(g){if(u("text"),u("texttemplate"),u("hovertext"),u("hovertemplate"),u("mode"),u("below"),A.hasMarkers(r)){o(a,r,i,l,u,{noLine:!0,noAngle:!0}),u("marker.allowoverlap"),u("marker.angle");var f=r.marker;f.symbol!=="circle"&&(M.isArrayOrTypedArray(f.size)&&(f.size=f.size[0]),M.isArrayOrTypedArray(f.color)&&(f.color=f.color[0]))}A.hasLines(r)&&(w(a,r,i,l,u,{noDash:!0}),u("connectgaps"));var b=c("cluster.maxzoom"),v=c("cluster.step"),d=c("cluster.color",r.marker&&r.marker.color||i),m=c("cluster.size"),x=c("cluster.opacity");u("cluster.enabled",b!==!1||v!==!1||d!==!1||m!==!1||x!==!1),A.hasText(r)&&_(a,r,l,u,{noSelect:!0,font:{family:n.indexOf(l.font.family)!==-1?l.font.family:"Open Sans Regular",size:l.font.size,color:l.font.color}}),u("fill"),r.fill!=="none"&&p(a,r,i,u),M.coerceSelectionMarkerOpacity(r,u)}else r.visible=!1}},37920:function(Y){Y.exports=function(O,e){return O.lon=e.lon,O.lat=e.lat,O}},11960:function(Y,O,e){var M=e(54460);Y.exports=function(A,o,w){var _={},p=w[o.subplot]._subplot.mockAxis,s=A.lonlat;return _.lonLabel=M.tickText(p,p.c2l(s[0]),!0).text,_.latLabel=M.tickText(p,p.c2l(s[1]),!0).text,_}},63312:function(Y,O,e){var M=e(93024),A=e(3400),o=e(44928),w=A.fillText,_=e(39032).BADNUM,p=e(47552).traceLayerPrefix;function s(n,a,r){if(!n.hovertemplate){var i=(a.hi||n.hoverinfo).split("+"),l=i.indexOf("all")!==-1,u=i.indexOf("lon")!==-1,c=i.indexOf("lat")!==-1,g=a.lonlat,f=[];return l||u&&c?f.push("("+b(g[1])+", "+b(g[0])+")"):u?f.push(r.lon+b(g[0])):c&&f.push(r.lat+b(g[1])),(l||i.indexOf("text")!==-1)&&w(a,n,f),f.join("<br>")}function b(v){return v+""}}Y.exports={hoverPoints:function(n,a,r){var i=n.cd,l=i[0].trace,u=n.xa,c=n.ya,g=n.subplot,f=[],b=p+l.uid+"-circle",v=l.cluster&&l.cluster.enabled;if(v){var d=g.map.queryRenderedFeatures(null,{layers:[b]});f=d.map(function(z){return z.id})}var m=360*(a>=0?Math.floor((a+180)/360):Math.ceil((a-180)/360)),x=a-m;if(M.getClosest(i,function(z){var F=z.lonlat;if(F[0]===_||v&&f.indexOf(z.i+1)===-1)return 1/0;var U=A.modHalf(F[0],360),R=F[1],j=g.project([U,R]),Z=j.x-u.c2p([x,R]),B=j.y-c.c2p([U,r]),q=Math.max(3,z.mrc||0);return Math.max(Math.sqrt(Z*Z+B*B)-q,1-3/q)},n),n.index!==!1){var y=i[n.index],T=y.lonlat,h=[A.modHalf(T[0],360)+m,T[1]],E=u.c2p(h),k=c.c2p(h),L=y.mrc||1;n.x0=E-L,n.x1=E+L,n.y0=k-L,n.y1=k+L;var P={};P[l.subplot]={_subplot:g};var I=l._module.formatLabels(y,l,P);return n.lonLabel=I.lonLabel,n.latLabel=I.latLabel,n.color=o(l,y),n.extraText=s(l,y,i[0].t.labels),n.hovertemplate=l.hovertemplate,[n]}},getExtraText:s}},11572:function(Y,O,e){Y.exports={attributes:e(31512),supplyDefaults:e(15752),colorbar:e(5528),formatLabels:e(11960),calc:e(25212),plot:e(9660),hoverPoints:e(63312).hoverPoints,eventData:e(37920),selectPoints:e(404),styleOnSelect:function(M,A){A&&A[0].trace._glTrace.update(A)},moduleType:"trace",name:"scattermapbox",basePlotModule:e(33688),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},9660:function(Y,O,e){var M=e(3400),A=e(59392),o=e(47552).traceLayerPrefix,w={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function _(s,n,a,r){this.type="scattermapbox",this.subplot=s,this.uid=n,this.clusterEnabled=a,this.isHidden=r,this.sourceIds={fill:"source-"+n+"-fill",line:"source-"+n+"-line",circle:"source-"+n+"-circle",symbol:"source-"+n+"-symbol",cluster:"source-"+n+"-circle",clusterCount:"source-"+n+"-circle"},this.layerIds={fill:o+n+"-fill",line:o+n+"-line",circle:o+n+"-circle",symbol:o+n+"-symbol",cluster:o+n+"-cluster",clusterCount:o+n+"-cluster-count"},this.below=null}var p=_.prototype;p.addSource=function(s,n,a){var r={type:"geojson",data:n.geojson};a&&a.enabled&&M.extendFlat(r,{cluster:!0,clusterMaxZoom:a.maxzoom});var i=this.subplot.map.getSource(this.sourceIds[s]);i?i.setData(n.geojson):this.subplot.map.addSource(this.sourceIds[s],r)},p.setSourceData=function(s,n){this.subplot.map.getSource(this.sourceIds[s]).setData(n.geojson)},p.addLayer=function(s,n,a){var r={type:n.type,id:this.layerIds[s],source:this.sourceIds[s],layout:n.layout,paint:n.paint};n.filter&&(r.filter=n.filter);for(var i,l=this.layerIds[s],u=this.subplot.getMapLayers(),c=0;c<u.length;c++)if(u[c].id===l){i=!0;break}i?(this.subplot.setOptions(l,"setLayoutProperty",r.layout),r.layout.visibility==="visible"&&this.subplot.setOptions(l,"setPaintProperty",r.paint)):this.subplot.addLayer(r,a)},p.update=function(s){var n=s[0].trace,a=this.subplot,r=a.map,i=A(a.gd,s),l=a.belowLookup["trace-"+this.uid],u=!(!n.cluster||!n.cluster.enabled),c=!!this.clusterEnabled,g=this;function f(x){c?function(y){for(var T=w.cluster,h=T.length-1;h>=0;h--){var E=T[h];r.removeLayer(g.layerIds[E])}y||r.removeSource(g.sourceIds.circle)}(x):function(y){for(var T=w.nonCluster,h=T.length-1;h>=0;h--){var E=T[h];r.removeLayer(g.layerIds[E]),y||r.removeSource(g.sourceIds[E])}}(x)}function b(x){u?function(y){y||g.addSource("circle",i.circle,n.cluster);for(var T=w.cluster,h=0;h<T.length;h++){var E=T[h],k=i[E];g.addLayer(E,k,l)}}(x):function(y){for(var T=w.nonCluster,h=0;h<T.length;h++){var E=T[h],k=i[E];y||g.addSource(E,k),g.addLayer(E,k,l)}}(x)}function v(){for(var x=u?w.cluster:w.nonCluster,y=0;y<x.length;y++){var T=x[y],h=i[T];h&&(a.setOptions(g.layerIds[T],"setLayoutProperty",h.layout),h.layout.visibility==="visible"&&(T!=="cluster"&&g.setSourceData(T,h),a.setOptions(g.layerIds[T],"setPaintProperty",h.paint)))}}var d=this.isHidden,m=n.visible!==!0;m?d||f():d?m||b():c!==u?(f(),b()):(this.below!==l&&(f(!0),b(!0)),v()),this.clusterEnabled=u,this.isHidden=m,this.below=l,s[0].trace._glTrace=this},p.dispose=function(){for(var s=this.subplot.map,n=this.clusterEnabled?w.cluster:w.nonCluster,a=n.length-1;a>=0;a--){var r=n[a];s.removeLayer(this.layerIds[r]),s.removeSource(this.sourceIds[r])}},Y.exports=function(s,n){var a,r,i,l=n[0].trace,u=l.cluster&&l.cluster.enabled,c=l.visible!==!0,g=new _(s,l.uid,u,c),f=A(s.gd,n),b=g.below=s.belowLookup["trace-"+l.uid];if(u)for(g.addSource("circle",f.circle,l.cluster),a=0;a<w.cluster.length;a++)i=f[r=w.cluster[a]],g.addLayer(r,i,b);else for(a=0;a<w.nonCluster.length;a++)i=f[r=w.nonCluster[a]],g.addSource(r,i,l.cluster),g.addLayer(r,i,b);return n[0].trace._glTrace=g,g}},404:function(Y,O,e){var M=e(3400),A=e(43028),o=e(39032).BADNUM;Y.exports=function(w,_){var p,s=w.cd,n=w.xaxis,a=w.yaxis,r=[],i=s[0].trace;if(!A.hasMarkers(i))return[];if(_===!1)for(p=0;p<s.length;p++)s[p].selected=0;else for(p=0;p<s.length;p++){var l=s[p],u=l.lonlat;if(u[0]!==o){var c=[M.modHalf(u[0],360),u[1]],g=[n.c2p(c),a.c2p(c)];_.contains(g,null,p,w)?(r.push({pointNumber:p,lon:u[0],lat:u[1]}),l.selected=1):l.selected=0}}return r}},8319:function(Y,O,e){var M=e(21776).Ks,A=e(21776).Gw,o=e(92880).extendFlat,w=e(52904),_=e(45464),p=w.line;Y.exports={mode:w.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:w.text,texttemplate:A({editType:"plot"},{keys:["r","theta","text"]}),hovertext:w.hovertext,line:{color:p.color,width:p.width,dash:p.dash,backoff:p.backoff,shape:o({},p.shape,{values:["linear","spline"]}),smoothing:p.smoothing,editType:"calc"},connectgaps:w.connectgaps,marker:w.marker,cliponaxis:o({},w.cliponaxis,{dflt:!1}),textposition:w.textposition,textfont:w.textfont,fill:o({},w.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:w.fillcolor,hoverinfo:o({},_.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:w.hoveron,hovertemplate:M(),selected:w.selected,unselected:w.unselected}},58320:function(Y,O,e){var M=e(38248),A=e(39032).BADNUM,o=e(54460),w=e(90136),_=e(20148),p=e(4500),s=e(16356).calcMarkerSize;Y.exports=function(n,a){for(var r=n._fullLayout,i=a.subplot,l=r[i].radialaxis,u=r[i].angularaxis,c=l.makeCalcdata(a,"r"),g=u.makeCalcdata(a,"theta"),f=a._length,b=new Array(f),v=0;v<f;v++){var d=c[v],m=g[v],x=b[v]={};M(d)&&M(m)?(x.r=d,x.theta=m):x.r=A}var y=s(a,f);return a._extremes.x=o.findExtremes(l,c,{ppad:y}),w(n,a),_(b,a),p(b,a),b}},85968:function(Y,O,e){var M=e(3400),A=e(43028),o=e(74428),w=e(66828),_=e(11731),p=e(124),s=e(70840),n=e(88200).PTS_LINESONLY,a=e(8319);function r(i,l,u,c){var g,f=c("r"),b=c("theta");if(M.isTypedArray(f)&&(l.r=f=Array.from(f)),M.isTypedArray(b)&&(l.theta=b=Array.from(b)),f)b?g=Math.min(f.length,b.length):(g=f.length,c("theta0"),c("dtheta"));else{if(!b)return 0;g=l.theta.length,c("r0"),c("dr")}return l._length=g,g}Y.exports={handleRThetaDefaults:r,supplyDefaults:function(i,l,u,c){function g(v,d){return M.coerce(i,l,a,v,d)}var f=r(0,l,0,g);if(f){g("thetaunit"),g("mode",f<n?"lines+markers":"lines"),g("text"),g("hovertext"),l.hoveron!=="fills"&&g("hovertemplate"),A.hasMarkers(l)&&o(i,l,u,c,g,{gradient:!0}),A.hasLines(l)&&(w(i,l,u,c,g,{backoff:!0}),_(i,l,g),g("connectgaps")),A.hasText(l)&&(g("texttemplate"),p(i,l,c,g));var b=[];(A.hasMarkers(l)||A.hasText(l))&&(g("cliponaxis"),g("marker.maxdisplayed"),b.push("points")),g("fill"),l.fill!=="none"&&(s(i,l,u,g),A.hasLines(l)||_(i,l,g)),l.fill!=="tonext"&&l.fill!=="toself"||b.push("fills"),g("hoveron",b.join("+")||"points"),M.coerceSelectionMarkerOpacity(l,g)}else l.visible=!1}}},22852:function(Y,O,e){var M=e(3400),A=e(54460);Y.exports=function(o,w,_){var p,s,n={},a=_[w.subplot]._subplot;a?(p=a.radialAxis,s=a.angularAxis):(p=(a=_[w.subplot]).radialaxis,s=a.angularaxis);var r=p.c2l(o.r);n.rLabel=A.tickText(p,r,!0).text;var i=s.thetaunit==="degrees"?M.rad2deg(o.theta):o.theta;return n.thetaLabel=A.tickText(s,i,!0).text,n}},8504:function(Y,O,e){var M=e(98723);function A(o,w,_,p){var s=_.radialAxis,n=_.angularAxis;s._hovertitle="r",n._hovertitle="";var a={};a[w.subplot]={_subplot:_};var r=w._module.formatLabels(o,w,a);p.rLabel=r.rLabel,p.thetaLabel=r.thetaLabel;var i=o.hi||w.hoverinfo,l=[];function u(g,f){l.push(g._hovertitle+": "+f)}if(!w.hovertemplate){var c=i.split("+");c.indexOf("all")!==-1&&(c=["r","theta","text"]),c.indexOf("r")!==-1&&u(s,p.rLabel),c.indexOf("theta")!==-1&&u(n,p.thetaLabel),c.indexOf("text")!==-1&&p.text&&(l.push(p.text),delete p.text),p.extraText=l.join("<br>")}}Y.exports={hoverPoints:function(o,w,_,p){var s=M(o,w,_,p);if(s&&s[0].index!==!1){var n=s[0];if(n.index===void 0)return s;var a=o.subplot,r=n.cd[n.index],i=n.trace;if(a.isPtInside(r))return n.xLabelVal=void 0,n.yLabelVal=void 0,A(r,i,a,n),n.hovertemplate=i.hovertemplate,s}},makeHoverPointText:A}},76924:function(Y,O,e){Y.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e(40872),categories:["polar","symbols","showLegend","scatter-like"],attributes:e(8319),supplyDefaults:e(85968).supplyDefaults,colorbar:e(5528),formatLabels:e(22852),calc:e(58320),plot:e(43456),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(8504).hoverPoints,selectPoints:e(91560),meta:{}}},43456:function(Y,O,e){var M=e(96504),A=e(39032).BADNUM;Y.exports=function(o,w,_){for(var p=w.layers.frontplot.select("g.scatterlayer"),s=w.xaxis,n=w.yaxis,a={xaxis:s,yaxis:n,plot:w.framework,layerClipId:w._hasClipOnAxisFalse?w.clipIds.forTraces:null},r=w.radialAxis,i=w.angularAxis,l=0;l<_.length;l++)for(var u=_[l],c=0;c<u.length;c++){c===0&&(u[0].trace._xA=s,u[0].trace._yA=n);var g=u[c],f=g.r;if(f===A)g.x=g.y=A;else{var b=r.c2g(f),v=i.c2g(g.theta);g.x=b*Math.cos(v),g.y=b*Math.sin(v)}}M(o,a,_,p)}},24396:function(Y,O,e){var M=e(8319),A=e(2876),o=e(21776).Gw;Y.exports={mode:M.mode,r:M.r,theta:M.theta,r0:M.r0,dr:M.dr,theta0:M.theta0,dtheta:M.dtheta,thetaunit:M.thetaunit,text:M.text,texttemplate:o({editType:"plot"},{keys:["r","theta","text"]}),hovertext:M.hovertext,hovertemplate:M.hovertemplate,line:{color:A.line.color,width:A.line.width,dash:A.line.dash,editType:"calc"},connectgaps:A.connectgaps,marker:A.marker,fill:A.fill,fillcolor:A.fillcolor,textposition:A.textposition,textfont:A.textfont,hoverinfo:M.hoverinfo,selected:M.selected,unselected:M.unselected}},27160:function(Y,O,e){Y.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e(40872),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e(24396),supplyDefaults:e(98608),colorbar:e(5528),formatLabels:e(94120),calc:e(66720),hoverPoints:e(1600).hoverPoints,selectPoints:e(73224),meta:{}}},66720:function(Y,O,e){var M=e(90136),A=e(16356).calcMarkerSize,o=e(84236),w=e(54460),_=e(67072).TOO_MANY_POINTS;Y.exports=function(p,s){var n=p._fullLayout,a=s.subplot,r=n[a].radialaxis,i=n[a].angularaxis,l=s._r=r.makeCalcdata(s,"r"),u=s._theta=i.makeCalcdata(s,"theta"),c=s._length,g={};c<l.length&&(l=l.slice(0,c)),c<u.length&&(u=u.slice(0,c)),g.r=l,g.theta=u,M(p,s);var f,b=g.opts=o.style(p,s);return c<_?f=A(s,c):b.marker&&(f=2*(b.marker.sizeAvg||Math.max(b.marker.size,3))),s._extremes.x=w.findExtremes(r,l,{ppad:f}),[{x:!1,y:!1,t:g,trace:s}]}},98608:function(Y,O,e){var M=e(3400),A=e(43028),o=e(85968).handleRThetaDefaults,w=e(74428),_=e(66828),p=e(124),s=e(70840),n=e(88200).PTS_LINESONLY,a=e(24396);Y.exports=function(r,i,l,u){function c(f,b){return M.coerce(r,i,a,f,b)}var g=o(r,i,u,c);g?(c("thetaunit"),c("mode",g<n?"lines+markers":"lines"),c("text"),c("hovertext"),i.hoveron!=="fills"&&c("hovertemplate"),A.hasMarkers(i)&&w(r,i,l,u,c,{noAngleRef:!0,noStandOff:!0}),A.hasLines(i)&&(_(r,i,l,u,c),c("connectgaps")),A.hasText(i)&&(c("texttemplate"),p(r,i,u,c)),c("fill"),i.fill!=="none"&&s(r,i,l,c),M.coerceSelectionMarkerOpacity(i,c)):i.visible=!1}},94120:function(Y,O,e){var M=e(22852);Y.exports=function(A,o,w){var _=A.i;return"r"in A||(A.r=o._r[_]),"theta"in A||(A.theta=o._theta[_]),M(A,o,w)}},1600:function(Y,O,e){var M=e(41272),A=e(8504).makeHoverPointText;Y.exports={hoverPoints:function(o,w,_,p){var s=o.cd[0].t,n=s.r,a=s.theta,r=M.hoverPoints(o,w,_,p);if(r&&r[0].index!==!1){var i=r[0];if(i.index===void 0)return r;var l=o.subplot,u=i.cd[i.index],c=i.trace;if(u.r=n[i.index],u.theta=a[i.index],l.isPtInside(u))return i.xLabelVal=void 0,i.yLabelVal=void 0,A(u,c,l,i),r}}}},62944:function(Y,O,e){var M=e(27160);M.plot=e(56512),Y.exports=M},56512:function(Y,O,e){var M=e(3108),A=e(38248),o=e(89876),w=e(74588),_=e(84236),p=e(3400),s=e(67072).TOO_MANY_POINTS;Y.exports=function(n,a,r){if(r.length){var i=a.radialAxis,l=a.angularAxis,u=w(n,a);return r.forEach(function(c){if(c&&c[0]&&c[0].trace){var g,f=c[0],b=f.trace,v=f.t,d=b._length,m=v.r,x=v.theta,y=v.opts,T=m.slice(),h=x.slice();for(g=0;g<m.length;g++)a.isPtInside({r:m[g],theta:x[g]})||(T[g]=NaN,h[g]=NaN);var E=new Array(2*d),k=Array(d),L=Array(d);for(g=0;g<d;g++){var P,I,z=T[g];if(A(z)){var F=i.c2g(z),U=l.c2g(h[g],b.thetaunit);P=F*Math.cos(U),I=F*Math.sin(U)}else P=I=NaN;k[g]=E[2*g]=P,L[g]=E[2*g+1]=I}v.tree=M(E),y.marker&&d>=s&&(y.marker.cluster=v.tree),y.marker&&(y.markerSel.positions=y.markerUnsel.positions=y.marker.positions=E),y.line&&E.length>1&&p.extendFlat(y.line,_.linePositions(n,b,E)),y.text&&(p.extendFlat(y.text,{positions:E},_.textPosition(n,b,y.text,y.marker)),p.extendFlat(y.textSel,{positions:E},_.textPosition(n,b,y.text,y.markerSel)),p.extendFlat(y.textUnsel,{positions:E},_.textPosition(n,b,y.text,y.markerUnsel))),y.fill&&!u.fill2d&&(u.fill2d=!0),y.marker&&!u.scatter2d&&(u.scatter2d=!0),y.line&&!u.line2d&&(u.line2d=!0),y.text&&!u.glText&&(u.glText=!0),u.lineOptions.push(y.line),u.fillOptions.push(y.fill),u.markerOptions.push(y.marker),u.markerSelectedOptions.push(y.markerSel),u.markerUnselectedOptions.push(y.markerUnsel),u.textOptions.push(y.text),u.textSelectedOptions.push(y.textSel),u.textUnselectedOptions.push(y.textUnsel),u.selectBatch.push([]),u.unselectBatch.push([]),v.x=k,v.y=L,v.rawx=k,v.rawy=L,v.r=m,v.theta=x,v.positions=E,v._scene=u,v.index=u.count,u.count++}}),o(n,a,r)}},Y.exports.reglPrecompiled={}},69496:function(Y,O,e){var M=e(21776).Ks,A=e(21776).Gw,o=e(92880).extendFlat,w=e(52904),_=e(45464),p=w.line;Y.exports={mode:w.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:w.text,texttemplate:A({editType:"plot"},{keys:["real","imag","text"]}),hovertext:w.hovertext,line:{color:p.color,width:p.width,dash:p.dash,backoff:p.backoff,shape:o({},p.shape,{values:["linear","spline"]}),smoothing:p.smoothing,editType:"calc"},connectgaps:w.connectgaps,marker:w.marker,cliponaxis:o({},w.cliponaxis,{dflt:!1}),textposition:w.textposition,textfont:w.textfont,fill:o({},w.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:w.fillcolor,hoverinfo:o({},_.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:w.hoveron,hovertemplate:M(),selected:w.selected,unselected:w.unselected}},47507:function(Y,O,e){var M=e(38248),A=e(39032).BADNUM,o=e(90136),w=e(20148),_=e(4500),p=e(16356).calcMarkerSize;Y.exports=function(s,n){for(var a=s._fullLayout,r=n.subplot,i=a[r].realaxis,l=a[r].imaginaryaxis,u=i.makeCalcdata(n,"real"),c=l.makeCalcdata(n,"imag"),g=n._length,f=new Array(g),b=0;b<g;b++){var v=u[b],d=c[b],m=f[b]={};M(v)&&M(d)?(m.real=v,m.imag=d):m.real=A}return p(n,g),o(s,n),w(f,n),_(f,n),f}},76716:function(Y,O,e){var M=e(3400),A=e(43028),o=e(74428),w=e(66828),_=e(11731),p=e(124),s=e(70840),n=e(88200).PTS_LINESONLY,a=e(69496);Y.exports=function(r,i,l,u){function c(b,v){return M.coerce(r,i,a,b,v)}var g=function(b,v,d,m){var x,y=m("real"),T=m("imag");return y&&T&&(x=Math.min(y.length,T.length)),M.isTypedArray(y)&&(v.real=y=Array.from(y)),M.isTypedArray(T)&&(v.imag=T=Array.from(T)),v._length=x,x}(0,i,0,c);if(g){c("mode",g<n?"lines+markers":"lines"),c("text"),c("hovertext"),i.hoveron!=="fills"&&c("hovertemplate"),A.hasMarkers(i)&&o(r,i,l,u,c,{gradient:!0}),A.hasLines(i)&&(w(r,i,l,u,c,{backoff:!0}),_(r,i,c),c("connectgaps")),A.hasText(i)&&(c("texttemplate"),p(r,i,u,c));var f=[];(A.hasMarkers(i)||A.hasText(i))&&(c("cliponaxis"),c("marker.maxdisplayed"),f.push("points")),c("fill"),i.fill!=="none"&&(s(r,i,l,c),A.hasLines(i)||_(r,i,c)),i.fill!=="tonext"&&i.fill!=="toself"||f.push("fills"),c("hoveron",f.join("+")||"points"),M.coerceSelectionMarkerOpacity(i,c)}else i.visible=!1}},49504:function(Y,O,e){var M=e(54460);Y.exports=function(A,o,w){var _={},p=w[o.subplot]._subplot;return _.realLabel=M.tickText(p.radialAxis,A.real,!0).text,_.imagLabel=M.tickText(p.angularAxis,A.imag,!0).text,_}},25292:function(Y,O,e){var M=e(98723);function A(o,w,_,p){var s=_.radialAxis,n=_.angularAxis;s._hovertitle="real",n._hovertitle="imag";var a={};a[w.subplot]={_subplot:_};var r=w._module.formatLabels(o,w,a);p.realLabel=r.realLabel,p.imagLabel=r.imagLabel;var i=o.hi||w.hoverinfo,l=[];function u(g,f){l.push(g._hovertitle+": "+f)}if(!w.hovertemplate){var c=i.split("+");c.indexOf("all")!==-1&&(c=["real","imag","text"]),c.indexOf("real")!==-1&&u(s,p.realLabel),c.indexOf("imag")!==-1&&u(n,p.imagLabel),c.indexOf("text")!==-1&&p.text&&(l.push(p.text),delete p.text),p.extraText=l.join("<br>")}}Y.exports={hoverPoints:function(o,w,_,p){var s=M(o,w,_,p);if(s&&s[0].index!==!1){var n=s[0];if(n.index===void 0)return s;var a=o.subplot,r=n.cd[n.index],i=n.trace;if(a.isPtInside(r))return n.xLabelVal=void 0,n.yLabelVal=void 0,A(r,i,a,n),n.hovertemplate=i.hovertemplate,s}},makeHoverPointText:A}},95443:function(Y,O,e){Y.exports={moduleType:"trace",name:"scattersmith",basePlotModule:e(47788),categories:["smith","symbols","showLegend","scatter-like"],attributes:e(69496),supplyDefaults:e(76716),colorbar:e(5528),formatLabels:e(49504),calc:e(47507),plot:e(34927),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(25292).hoverPoints,selectPoints:e(91560),meta:{}}},34927:function(Y,O,e){var M=e(96504),A=e(39032).BADNUM,o=e(36416).smith;Y.exports=function(w,_,p){for(var s=_.layers.frontplot.select("g.scatterlayer"),n=_.xaxis,a=_.yaxis,r={xaxis:n,yaxis:a,plot:_.framework,layerClipId:_._hasClipOnAxisFalse?_.clipIds.forTraces:null},i=0;i<p.length;i++)for(var l=p[i],u=0;u<l.length;u++){u===0&&(l[0].trace._xA=n,l[0].trace._yA=a);var c=l[u],g=c.real;if(g===A)c.x=c.y=A;else{var f=o([g,c.imag]);c.x=f[0],c.y=f[1]}}M(w,r,p,s)}},5896:function(Y,O,e){var M=e(21776).Ks,A=e(21776).Gw,o=e(52904),w=e(45464),_=e(49084),p=e(98192).u,s=e(92880).extendFlat,n=o.marker,a=o.line,r=n.line;Y.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:s({},o.mode,{dflt:"markers"}),text:s({},o.text,{}),texttemplate:A({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:s({},o.hovertext,{}),line:{color:a.color,width:a.width,dash:p,backoff:a.backoff,shape:s({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:o.connectgaps,cliponaxis:o.cliponaxis,fill:s({},o.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:o.fillcolor,marker:s({symbol:n.symbol,opacity:n.opacity,angle:n.angle,angleref:n.angleref,standoff:n.standoff,maxdisplayed:n.maxdisplayed,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,line:s({width:r.width,editType:"calc"},_("marker.line")),gradient:n.gradient,editType:"calc"},_("marker")),textfont:o.textfont,textposition:o.textposition,selected:o.selected,unselected:o.unselected,hoverinfo:s({},w.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:o.hoveron,hovertemplate:M()}},34335:function(Y,O,e){var M=e(38248),A=e(90136),o=e(20148),w=e(4500),_=e(16356).calcMarkerSize,p=["a","b","c"],s={a:["b","c"],b:["a","c"],c:["a","b"]};Y.exports=function(n,a){var r,i,l,u,c,g,f=n._fullLayout[a.subplot].sum,b=a.sum||f,v={a:a.a,b:a.b,c:a.c};for(r=0;r<p.length;r++)if(!v[l=p[r]]){for(c=v[s[l][0]],g=v[s[l][1]],u=new Array(c.length),i=0;i<c.length;i++)u[i]=b-c[i]-g[i];v[l]=u}var d,m,x,y,T,h,E=a._length,k=new Array(E);for(r=0;r<E;r++)d=v.a[r],m=v.b[r],x=v.c[r],M(d)&&M(m)&&M(x)?((y=f/((d=+d)+(m=+m)+(x=+x)))!=1&&(d*=y,m*=y,x*=y),h=d,T=x-m,k[r]={x:T,y:h,a:d,b:m,c:x}):k[r]={x:!1,y:!1};return _(a,E),A(n,a),o(k,a),w(k,a),k}},84256:function(Y,O,e){var M=e(3400),A=e(88200),o=e(43028),w=e(74428),_=e(66828),p=e(11731),s=e(124),n=e(70840),a=e(5896);Y.exports=function(r,i,l,u){function c(m,x){return M.coerce(r,i,a,m,x)}var g,f=c("a"),b=c("b"),v=c("c");if(f?(g=f.length,b?(g=Math.min(g,b.length),v&&(g=Math.min(g,v.length))):g=v?Math.min(g,v.length):0):b&&v&&(g=Math.min(b.length,v.length)),g){i._length=g,c("sum"),c("text"),c("hovertext"),i.hoveron!=="fills"&&c("hovertemplate"),c("mode",g<A.PTS_LINESONLY?"lines+markers":"lines"),o.hasMarkers(i)&&w(r,i,l,u,c,{gradient:!0}),o.hasLines(i)&&(_(r,i,l,u,c,{backoff:!0}),p(r,i,c),c("connectgaps")),o.hasText(i)&&(c("texttemplate"),s(r,i,u,c));var d=[];(o.hasMarkers(i)||o.hasText(i))&&(c("cliponaxis"),c("marker.maxdisplayed"),d.push("points")),c("fill"),i.fill!=="none"&&(n(r,i,l,c),o.hasLines(i)||p(r,i,c)),i.fill!=="tonext"&&i.fill!=="toself"||d.push("fills"),c("hoveron",d.join("+")||"points"),M.coerceSelectionMarkerOpacity(i,c)}else i.visible=!1}},97476:function(Y){Y.exports=function(O,e,M,A,o){if(e.xa&&(O.xaxis=e.xa),e.ya&&(O.yaxis=e.ya),A[o]){var w=A[o];O.a=w.a,O.b=w.b,O.c=w.c}else O.a=e.a,O.b=e.b,O.c=e.c;return O}},90404:function(Y,O,e){var M=e(54460);Y.exports=function(A,o,w){var _={},p=w[o.subplot]._subplot;return _.aLabel=M.tickText(p.aaxis,A.a,!0).text,_.bLabel=M.tickText(p.baxis,A.b,!0).text,_.cLabel=M.tickText(p.caxis,A.c,!0).text,_}},26596:function(Y,O,e){var M=e(98723);Y.exports=function(A,o,w,_){var p=M(A,o,w,_);if(p&&p[0].index!==!1){var s=p[0];if(s.index===void 0){var n=1-s.y0/A.ya._length,a=A.xa._length,r=a*n/2,i=a-r;return s.x0=Math.max(Math.min(s.x0,i),r),s.x1=Math.max(Math.min(s.x1,i),r),p}var l=s.cd[s.index],u=s.trace,c=s.subplot;s.a=l.a,s.b=l.b,s.c=l.c,s.xLabelVal=void 0,s.yLabelVal=void 0;var g={};g[u.subplot]={_subplot:c};var f=u._module.formatLabels(l,u,g);s.aLabel=f.aLabel,s.bLabel=f.bLabel,s.cLabel=f.cLabel;var b=l.hi||u.hoverinfo,v=[];if(!u.hovertemplate){var d=b.split("+");d.indexOf("all")!==-1&&(d=["a","b","c"]),d.indexOf("a")!==-1&&m(c.aaxis,s.aLabel),d.indexOf("b")!==-1&&m(c.baxis,s.bLabel),d.indexOf("c")!==-1&&m(c.caxis,s.cLabel)}return s.extraText=v.join("<br>"),s.hovertemplate=u.hovertemplate,p}function m(x,y){v.push(x._hovertitle+": "+y)}}},34864:function(Y,O,e){Y.exports={attributes:e(5896),supplyDefaults:e(84256),colorbar:e(5528),formatLabels:e(90404),calc:e(34335),plot:e(88776),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(26596),selectPoints:e(91560),eventData:e(97476),moduleType:"trace",name:"scatterternary",basePlotModule:e(19352),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},88776:function(Y,O,e){var M=e(96504);Y.exports=function(A,o,w){var _=o.plotContainer;_.select(".scatterlayer").selectAll("*").remove();for(var p=o.xaxis,s=o.yaxis,n={xaxis:p,yaxis:s,plot:_,layerClipId:o._hasClipOnAxisFalse?o.clipIdRelative:null},a=o.layers.frontplot.select("g.scatterlayer"),r=0;r<w.length;r++){var i=w[r];i.length&&(i[0].trace._xA=p,i[0].trace._yA=s)}M(A,n,w,a)}},44524:function(Y,O,e){var M=e(52904),A=e(49084),o=e(29736).axisHoverFormat,w=e(21776).Ks,_=e(2876),p=e(33816).idRegex,s=e(31780).templatedArray,n=e(92880).extendFlat,a=M.marker,r=a.line,i=n(A("marker.line",{editTypeOverride:"calc"}),{width:n({},r.width,{editType:"calc"}),editType:"calc"}),l=n(A("marker"),{symbol:a.symbol,angle:a.angle,size:n({},a.size,{editType:"markerSize"}),sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,opacity:a.opacity,colorbar:a.colorbar,line:i,editType:"calc"});function u(c){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:p[c],editType:"plot"}}}l.color.editType=l.cmin.editType=l.cmax.editType="style",Y.exports={dimensions:s("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:n({},_.text,{}),hovertext:n({},_.hovertext,{}),hovertemplate:w(),xhoverformat:o("x"),yhoverformat:o("y"),marker:l,xaxes:u("x"),yaxes:u("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:_.selected.marker,editType:"calc"},unselected:{marker:_.unselected.marker,editType:"calc"},opacity:_.opacity}},28888:function(Y,O,e){var M=e(24040),A=e(12704);Y.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e(44524),supplyDefaults:e(69544),colorbar:e(5528),calc:e(66821),plot:e(54840),hoverPoints:e(72248).hoverPoints,selectPoints:e(62500),editStyle:e(83156),meta:{}},M.register(A)},99332:function(Y,O,e){var M=e(13472),A=e(24040),o=e(5048),w=e(84888)._M,_=e(57952),p=e(79811).getFromId,s=e(54460).shouldShowZeroLine,n="splom",a={};function r(l,u,c){for(var g=c.matrixOptions.data.length,f=u._visibleDims,b=c.viewOpts.ranges=new Array(g),v=0;v<f.length;v++){var d=f[v],m=b[v]=new Array(4),x=p(l,u._diag[d][0]);x&&(m[0]=x.r2l(x.range[0]),m[2]=x.r2l(x.range[1]));var y=p(l,u._diag[d][1]);y&&(m[1]=y.r2l(y.range[0]),m[3]=y.r2l(y.range[1]))}c.selectBatch.length||c.unselectBatch.length?c.matrix.update({ranges:b},{ranges:b}):c.matrix.update({ranges:b})}function i(l){var u=l._fullLayout,c=u._glcanvas.data()[0].regl,g=u._splomGrid;g||(g=u._splomGrid=M(c)),g.update(function(f){var b,v=f._context.plotGlPixelRatio,d=f._fullLayout,m=d._size,x=[0,0,d.width*v,d.height*v],y={};function T(V,ne,ee,$,J,K){ee*=v,$*=v,J*=v,K*=v;var te=ne[V+"color"],ie=ne[V+"width"],ae=String(te+ie);ae in y?y[ae].data.push(NaN,NaN,ee,$,J,K):y[ae]={data:[ee,$,J,K],join:"rect",thickness:ie*v,color:te,viewport:x,range:x,overlay:!1}}for(b in d._splomSubplots){var h,E,k=d._plots[b],L=k.xaxis,P=k.yaxis,I=L._gridVals,z=P._gridVals,F=L._offset,U=L._length,R=P._length,j=m.b+P.domain[0]*m.h,Z=-P._m,B=-Z*P.r2l(P.range[0],P.calendar);if(L.showgrid)for(b=0;b<I.length;b++)h=F+L.l2p(I[b].x),T("grid",L,h,j,h,j+R);if(P.showgrid)for(b=0;b<z.length;b++)T("grid",P,F,E=j+B+Z*z[b].x,F+U,E);s(f,L,P)&&(h=F+L.l2p(0),T("zeroline",L,h,j,h,j+R)),s(f,P,L)&&T("zeroline",P,F,E=j+B+0,F+U,E)}var q=[];for(b in y)q.push(y[b]);return q}(l))}Y.exports={name:n,attr:_.attr,attrRegex:_.attrRegex,layoutAttributes:_.layoutAttributes,supplyLayoutDefaults:_.supplyLayoutDefaults,drawFramework:_.drawFramework,plot:function(l){var u=l._fullLayout,c=A.getModule(n),g=w(l.calcdata,c)[0];o(l,["ANGLE_instanced_arrays","OES_element_index_uint"],a)&&(u._hasOnlyLargeSploms&&i(l),c.plot(l,{},g))},drag:function(l){var u=l.calcdata,c=l._fullLayout;c._hasOnlyLargeSploms&&i(l);for(var g=0;g<u.length;g++){var f=u[g][0].trace,b=c._splomScenes[f.uid];f.type==="splom"&&b&&b.matrix&&r(l,f,b)}},updateGrid:i,clean:function(l,u,c,g){var f,b={};if(g._splomScenes){for(f=0;f<l.length;f++){var v=l[f];v.type==="splom"&&(b[v.uid]=1)}for(f=0;f<c.length;f++){var d=c[f];if(!b[d.uid]){var m=g._splomScenes[d.uid];m&&m.destroy&&m.destroy(),g._splomScenes[d.uid]=null,delete g._splomScenes[d.uid]}}}Object.keys(g._splomScenes||{}).length===0&&delete g._splomScenes,g._splomGrid&&!u._hasOnlyLargeSploms&&g._hasOnlyLargeSploms&&(g._splomGrid.destroy(),g._splomGrid=null,delete g._splomGrid),_.clean(l,u,c,g)},updateFx:_.updateFx,toSVG:_.toSVG,reglPrecompiled:a}},66821:function(Y,O,e){var M=e(3400),A=e(79811),o=e(16356).calcMarkerSize,w=e(16356).calcAxisExpansion,_=e(90136),p=e(84236).markerSelection,s=e(84236).markerStyle,n=e(72308),a=e(39032).BADNUM,r=e(67072).TOO_MANY_POINTS;Y.exports=function(i,l){var u,c,g,f,b,v,d=l.dimensions,m=l._length,x={},y=x.cdata=[],T=x.data=[],h=l._visibleDims=[];function E(L,P){for(var I=L.makeCalcdata({v:P.values,vcalendar:l.calendar},"v"),z=0;z<I.length;z++)I[z]=I[z]===a?NaN:I[z];y.push(I),T.push(L.type==="log"?M.simpleMap(I,L.c2l):I)}for(u=0;u<d.length;u++)if((g=d[u]).visible){if(f=A.getFromId(i,l._diag[u][0]),b=A.getFromId(i,l._diag[u][1]),f&&b&&f.type!==b.type){M.log("Skipping splom dimension "+u+" with conflicting axis types");continue}f?(E(f,g),b&&b.type==="category"&&(b._categories=f._categories.slice())):E(b,g),h.push(u)}for(_(i,l),M.extendFlat(x,s(i,l)),v=y.length*m>r?x.sizeAvg||Math.max(x.size,3):o(l,m),c=0;c<h.length;c++)g=d[u=h[c]],f=A.getFromId(i,l._diag[u][0])||{},b=A.getFromId(i,l._diag[u][1])||{},w(i,l,f,b,y[c],y[c],v);var k=n(i,l);return k.matrix||(k.matrix=!0),k.matrixOptions=x,k.selectedOptions=p(i,l,l.selected),k.unselectedOptions=p(i,l,l.unselected),[{x:!1,y:!1,t:{},trace:l}]}},69544:function(Y,O,e){var M=e(3400),A=e(51272),o=e(44524),w=e(43028),_=e(74428),p=e(26284),s=e(80088).isOpenSymbol;function n(a,r){function i(u,c){return M.coerce(a,r,o.dimensions,u,c)}i("label");var l=i("values");l&&l.length?i("visible"):r.visible=!1,i("axis.type"),i("axis.matches")}Y.exports=function(a,r,i,l){function u(m,x){return M.coerce(a,r,o,m,x)}var c=A(a,r,{name:"dimensions",handleItemDefaults:n}),g=u("diagonal.visible"),f=u("showupperhalf"),b=u("showlowerhalf");if(p(r,c,"values")&&(g||f||b)){u("text"),u("hovertext"),u("hovertemplate"),u("xhoverformat"),u("yhoverformat"),_(a,r,i,l,u,{noAngleRef:!0,noStandOff:!0});var v=s(r.marker.symbol),d=w.isBubble(r);u("marker.line.width",v||d?1:0),function(m,x,y,T){var h,E,k=x.dimensions,L=k.length,P=x.showupperhalf,I=x.showlowerhalf,z=x.diagonal.visible,F=new Array(L),U=new Array(L);for(h=0;h<L;h++){var R=h?h+1:"";F[h]="x"+R,U[h]="y"+R}var j=T("xaxes",F),Z=T("yaxes",U),B=x._diag=new Array(L);x._xaxes={},x._yaxes={};var q=[],V=[];function ne(ce,de,ge,ve){if(ce){var be=ce.charAt(0),me=y._splomAxes[be];if(x["_"+be+"axes"][ce]=1,ve.push(ce),!(ce in me)){var Se=me[ce]={};ge&&(Se.label=ge.label||"",ge.visible&&ge.axis&&(ge.axis.type&&(Se.type=ge.axis.type),ge.axis.matches&&(Se.matches=de)))}}}var ee=!z&&!I,$=!z&&!P;for(x._axesDim={},h=0;h<L;h++){var J=k[h],K=h===0,te=h===L-1,ie=K&&ee||te&&$?void 0:j[h],ae=K&&$||te&&ee?void 0:Z[h];ne(ie,ae,J,q),ne(ae,ie,J,V),B[h]=[ie,ae],x._axesDim[ie]=h,x._axesDim[ae]=h}for(h=0;h<q.length;h++)for(E=0;E<V.length;E++){var se=q[h]+V[E];h>E&&P||h<E&&I?y._splomSubplots[se]=1:h!==E||!z&&I&&P||(y._splomSubplots[se]=1)}(!I||!z&&P&&I)&&(y._splomGridDflt.xside="bottom",y._splomGridDflt.yside="left")}(0,r,l,u),M.coerceSelectionMarkerOpacity(r,u)}else r.visible=!1}},83156:function(Y,O,e){var M=e(3400),A=e(90136),o=e(84236).markerStyle;Y.exports=function(w,_){var p=_.trace,s=w._fullLayout._splomScenes[p.uid];if(s){A(w,p),M.extendFlat(s.matrixOptions,o(w,p));var n=M.extendFlat({},s.matrixOptions,s.viewOpts);s.matrix.update(n,null)}}},50328:function(Y,O){O.getDimIndex=function(e,M){for(var A=M._id,o={x:0,y:1}[A.charAt(0)],w=e._visibleDims,_=0;_<w.length;_++){var p=w[_];if(e._diag[p][o]===A)return _}return!1}},72248:function(Y,O,e){var M=e(50328),A=e(41272).calcHover;Y.exports={hoverPoints:function(o,w,_){var p=o.cd[0].trace,s=o.scene.matrixOptions.cdata,n=o.xa,a=o.ya,r=n.c2p(w),i=a.c2p(_),l=o.distance,u=M.getDimIndex(p,n),c=M.getDimIndex(p,a);if(u===!1||c===!1)return[o];for(var g,f,b=s[u],v=s[c],d=l,m=0;m<b.length;m++){var x=b[m],y=v[m],T=n.c2p(x)-r,h=a.c2p(y)-i,E=Math.sqrt(T*T+h*h);E<d&&(d=f=E,g=m)}return o.index=g,o.distance=d,o.dxy=f,g===void 0?[o]:[A(o,b,v,p)]}}},97924:function(Y,O,e){var M=e(28888);M.basePlotModule=e(99332),Y.exports=M},54840:function(Y,O,e){var M=e(55795),A=e(3400),o=e(79811),w=e(72760).selectMode;function _(p,s){var n,a,r,i,l,u=p._fullLayout,c=u._size,g=s.trace,f=s.t,b=u._splomScenes[g.uid],v=b.matrixOptions,d=v.cdata,m=u._glcanvas.data()[0].regl,x=u.dragmode;if(d.length!==0){v.lower=g.showupperhalf,v.upper=g.showlowerhalf,v.diagonal=g.diagonal.visible;var y=g._visibleDims,T=d.length,h=b.viewOpts={};for(h.ranges=new Array(T),h.domains=new Array(T),l=0;l<y.length;l++){r=y[l];var E=h.ranges[l]=new Array(4),k=h.domains[l]=new Array(4);(n=o.getFromId(p,g._diag[r][0]))&&(E[0]=n._rl[0],E[2]=n._rl[1],k[0]=n.domain[0],k[2]=n.domain[1]),(a=o.getFromId(p,g._diag[r][1]))&&(E[1]=a._rl[0],E[3]=a._rl[1],k[1]=a.domain[0],k[3]=a.domain[1])}var L=p._context.plotGlPixelRatio,P=c.l*L,I=c.b*L,z=c.w*L,F=c.h*L;h.viewport=[P,I,z+P,F+I],b.matrix===!0&&(b.matrix=M(m));var U=u.clickmode.indexOf("select")>-1,R=!0;if(w(x)||g.selectedpoints||U){var j=g._length;if(g.selectedpoints){b.selectBatch=g.selectedpoints;var Z=g.selectedpoints,B={};for(r=0;r<Z.length;r++)B[Z[r]]=!0;var q=[];for(r=0;r<j;r++)B[r]||q.push(r);b.unselectBatch=q}var V=f.xpx=new Array(T),ne=f.ypx=new Array(T);for(l=0;l<y.length;l++){if(r=y[l],n=o.getFromId(p,g._diag[r][0]))for(V[l]=new Array(j),i=0;i<j;i++)V[l][i]=n.c2p(d[l][i]);if(a=o.getFromId(p,g._diag[r][1]))for(ne[l]=new Array(j),i=0;i<j;i++)ne[l][i]=a.c2p(d[l][i])}if(b.selectBatch.length||b.unselectBatch.length){var ee=A.extendFlat({},v,b.unselectedOptions,h),$=A.extendFlat({},v,b.selectedOptions,h);b.matrix.update(ee,$),R=!1}}else f.xpx=f.ypx=null;if(R){var J=A.extendFlat({},v,h);b.matrix.update(J,null)}}}Y.exports=function(p,s,n){if(n.length)for(var a=0;a<n.length;a++)_(p,n[a][0])}},72308:function(Y,O,e){var M=e(3400);Y.exports=function(A,o){var w=A._fullLayout,_=o.uid,p=w._splomScenes;p||(p=w._splomScenes={});var s={dirty:!0,selectBatch:[],unselectBatch:[]},n=p[o.uid];return n||((n=p[_]=M.extendFlat({},s,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){n.matrix&&n.matrix.draw&&(n.selectBatch.length||n.unselectBatch.length?n.matrix.draw(n.unselectBatch,n.selectBatch):n.matrix.draw()),n.dirty=!1},n.destroy=function(){n.matrix&&n.matrix.destroy&&n.matrix.destroy(),n.matrixOptions=null,n.selectBatch=null,n.unselectBatch=null,n=null}),n.dirty||M.extendFlat(n,s),n}},62500:function(Y,O,e){var M=e(3400),A=M.pushUnique,o=e(43028),w=e(50328);Y.exports=function(_,p){var s=_.cd,n=s[0].trace,a=s[0].t,r=_.scene,i=r.matrixOptions.cdata,l=_.xaxis,u=_.yaxis,c=[];if(!r)return c;var g=!o.hasMarkers(n)&&!o.hasText(n);if(n.visible!==!0||g)return c;var f=w.getDimIndex(n,l),b=w.getDimIndex(n,u);if(f===!1||b===!1)return c;var v=a.xpx[f],d=a.ypx[b],m=i[f],x=i[b],y=(_.scene.selectBatch||[]).slice(),T=[];if(p!==!1&&!p.degenerate)for(var h=0;h<m.length;h++)p.contains([v[h],d[h]],null,h,_)?(c.push({pointNumber:h,x:m[h],y:x[h]}),A(y,h)):y.indexOf(h)!==-1?A(y,h):T.push(h);var E=r.matrixOptions;return y.length||T.length?r.selectBatch.length||r.unselectBatch.length||r.matrix.update(r.unselectedOptions,M.extendFlat({},E,r.selectedOptions,r.viewOpts)):r.matrix.update(E,null),r.selectBatch=y,r.unselectBatch=T,c}},90167:function(Y,O,e){var M=e(49084),A=e(29736).axisHoverFormat,o=e(21776).Ks,w=e(52948),_=e(45464),p=e(92880).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:o({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:A("u",1),vhoverformat:A("v",1),whoverformat:A("w",1),xhoverformat:A("x"),yhoverformat:A("y"),zhoverformat:A("z"),showlegend:p({},_.showlegend,{dflt:!1})};p(s,M("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(n){s[n]=w[n]}),s.hoverinfo=p({},_.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,Y.exports=s},3832:function(Y,O,e){var M=e(3400),A=e(47128);function o(p){var s,n,a,r,i,l,u,c,g,f,b,v,d=p._x,m=p._y,x=p._z,y=p._len,T=-1/0,h=1/0,E=-1/0,k=1/0,L=-1/0,P=1/0,I="";for(y&&(u=d[0],g=m[0],b=x[0]),y>1&&(c=d[y-1],f=m[y-1],v=x[y-1]),s=0;s<y;s++)T=Math.max(T,d[s]),h=Math.min(h,d[s]),E=Math.max(E,m[s]),k=Math.min(k,m[s]),L=Math.max(L,x[s]),P=Math.min(P,x[s]),r||d[s]===u||(r=!0,I+="x"),i||m[s]===g||(i=!0,I+="y"),l||x[s]===b||(l=!0,I+="z");r||(I+="x"),i||(I+="y"),l||(I+="z");var z=w(p._x),F=w(p._y),U=w(p._z);I=(I=(I=I.replace("x",(u>c?"-":"+")+"x")).replace("y",(g>f?"-":"+")+"y")).replace("z",(b>v?"-":"+")+"z");var R=function(){y=0,z=[],F=[],U=[]};(!y||y<z.length*F.length*U.length)&&R();var j=function(be){return be==="x"?d:be==="y"?m:x},Z=function(be){return be==="x"?z:be==="y"?F:U},B=function(be){return be[y-1]<be[0]?-1:1},q=j(I[1]),V=j(I[3]),ne=j(I[5]),ee=Z(I[1]).length,$=Z(I[3]).length,J=Z(I[5]).length,K=!1,te=function(be,me,Se){return ee*($*be+me)+Se},ie=B(j(I[1])),ae=B(j(I[3])),se=B(j(I[5]));for(s=0;s<J-1;s++){for(n=0;n<$-1;n++){for(a=0;a<ee-1;a++){var ce=te(s,n,a),de=te(s,n,a+1),ge=te(s,n+1,a),ve=te(s+1,n,a);if(q[ce]*ie<q[de]*ie&&V[ce]*ae<V[ge]*ae&&ne[ce]*se<ne[ve]*se||(K=!0),K)break}if(K)break}if(K)break}return K&&(M.warn("Encountered arbitrary coordinates! Unable to input data grid."),R()),{xMin:h,yMin:k,zMin:P,xMax:T,yMax:E,zMax:L,Xs:z,Ys:F,Zs:U,len:y,fill:I}}function w(p){return M.distinctVals(p).vals}function _(p,s){if(s===void 0&&(s=p.length),M.isTypedArray(p))return p.subarray(0,s);for(var n=[],a=0;a<s;a++)n[a]=+p[a];return n}Y.exports={calc:function(p,s){s._len=Math.min(s.u.length,s.v.length,s.w.length,s.x.length,s.y.length,s.z.length),s._u=_(s.u,s._len),s._v=_(s.v,s._len),s._w=_(s.w,s._len),s._x=_(s.x,s._len),s._y=_(s.y,s._len),s._z=_(s.z,s._len);var n=o(s);s._gridFill=n.fill,s._Xs=n.Xs,s._Ys=n.Ys,s._Zs=n.Zs,s._len=n.len;var a,r,i,l=0;s.starts&&(a=_(s.starts.x||[]),r=_(s.starts.y||[]),i=_(s.starts.z||[]),l=Math.min(a.length,r.length,i.length)),s._startsX=a||[],s._startsY=r||[],s._startsZ=i||[];var u,c=0,g=1/0;for(u=0;u<s._len;u++){var f=s._u[u],b=s._v[u],v=s._w[u],d=Math.sqrt(f*f+b*b+v*v);c=Math.max(c,d),g=Math.min(g,d)}for(A(p,s,{vals:[g,c],containerStr:"",cLetter:"c"}),u=0;u<l;u++){var m=a[u];n.xMax=Math.max(n.xMax,m),n.xMin=Math.min(n.xMin,m);var x=r[u];n.yMax=Math.max(n.yMax,x),n.yMin=Math.min(n.yMin,x);var y=i[u];n.zMax=Math.max(n.zMax,y),n.zMin=Math.min(n.zMin,y)}s._slen=l,s._normMax=c,s._xbnds=[n.xMin,n.xMax],s._ybnds=[n.yMin,n.yMax],s._zbnds=[n.zMin,n.zMax]},filter:_,processGrid:o}},25668:function(Y,O,e){var M=e(67792).gl_streamtube3d,A=M.createTubeMesh,o=e(3400),w=e(33040).parseColorScale,_=e(8932).extractOpts,p=e(52094),s={xaxis:0,yaxis:1,zaxis:2};function n(u,c){this.scene=u,this.uid=c,this.mesh=null,this.data=null}var a=n.prototype;function r(u){var c=u.length;return c>2?u.slice(1,c-1):c===2?[(u[0]+u[1])/2]:u}function i(u){var c=u.length;return c===1?[.5,.5]:[u[1]-u[0],u[c-1]-u[c-2]]}function l(u,c){var g=u.fullSceneLayout,f=u.dataScale,b=c._len,v={};function d(ee,$){var J=g[$],K=f[s[$]];return o.simpleMap(ee,function(te){return J.d2l(te)*K})}if(v.vectors=p(d(c._u,"xaxis"),d(c._v,"yaxis"),d(c._w,"zaxis"),b),!b)return{positions:[],cells:[]};var m=d(c._Xs,"xaxis"),x=d(c._Ys,"yaxis"),y=d(c._Zs,"zaxis");if(v.meshgrid=[m,x,y],v.gridFill=c._gridFill,c._slen)v.startingPositions=p(d(c._startsX,"xaxis"),d(c._startsY,"yaxis"),d(c._startsZ,"zaxis"));else{for(var T=x[0],h=r(m),E=r(y),k=new Array(h.length*E.length),L=0,P=0;P<h.length;P++)for(var I=0;I<E.length;I++)k[L++]=[h[P],T,E[I]];v.startingPositions=k}v.colormap=w(c),v.tubeSize=c.sizeref,v.maxLength=c.maxdisplayed;var z=d(c._xbnds,"xaxis"),F=d(c._ybnds,"yaxis"),U=d(c._zbnds,"zaxis"),R=i(m),j=i(x),Z=i(y),B=[[z[0]-R[0],F[0]-j[0],U[0]-Z[0]],[z[1]+R[1],F[1]+j[1],U[1]+Z[1]]],q=M(v,B),V=_(c);q.vertexIntensityBounds=[V.min/c._normMax,V.max/c._normMax];var ne=c.lightposition;return q.lightPosition=[ne.x,ne.y,ne.z],q.ambient=c.lighting.ambient,q.diffuse=c.lighting.diffuse,q.specular=c.lighting.specular,q.roughness=c.lighting.roughness,q.fresnel=c.lighting.fresnel,q.opacity=c.opacity,c._pad=q.tubeScale*c.sizeref*2,q}a.handlePick=function(u){var c=this.scene.fullSceneLayout,g=this.scene.dataScale;function f(d,m){var x=c[m],y=g[s[m]];return x.l2c(d)/y}if(u.object===this.mesh){var b=u.data.position,v=u.data.velocity;return u.traceCoordinate=[f(b[0],"xaxis"),f(b[1],"yaxis"),f(b[2],"zaxis"),f(v[0],"xaxis"),f(v[1],"yaxis"),f(v[2],"zaxis"),u.data.intensity*this.data._normMax,u.data.divergence],u.textLabel=this.data.hovertext||this.data.text,!0}},a.update=function(u){this.data=u;var c=l(this.scene,u);this.mesh.update(c)},a.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},Y.exports=function(u,c){var g=u.glplot.gl,f=l(u,c),b=A(g,f),v=new n(u,c.uid);return v.mesh=b,v.data=c,b._trace=v,u.glplot.add(b),v}},54304:function(Y,O,e){var M=e(3400),A=e(27260),o=e(90167);Y.exports=function(w,_,p,s){function n(g,f){return M.coerce(w,_,o,g,f)}var a=n("u"),r=n("v"),i=n("w"),l=n("x"),u=n("y"),c=n("z");a&&a.length&&r&&r.length&&i&&i.length&&l&&l.length&&u&&u.length&&c&&c.length?(n("starts.x"),n("starts.y"),n("starts.z"),n("maxdisplayed"),n("sizeref"),n("lighting.ambient"),n("lighting.diffuse"),n("lighting.specular"),n("lighting.roughness"),n("lighting.fresnel"),n("lightposition.x"),n("lightposition.y"),n("lightposition.z"),A(w,_,s,n,{prefix:"",cLetter:"c"}),n("text"),n("hovertext"),n("hovertemplate"),n("uhoverformat"),n("vhoverformat"),n("whoverformat"),n("xhoverformat"),n("yhoverformat"),n("zhoverformat"),_._length=null):_.visible=!1}},15436:function(Y,O,e){Y.exports={moduleType:"trace",name:"streamtube",basePlotModule:e(12536),categories:["gl3d","showLegend"],attributes:e(90167),supplyDefaults:e(54304),colorbar:{min:"cmin",max:"cmax"},calc:e(3832).calc,plot:e(25668),eventData:function(M,A){return M.tubex=M.x,M.tubey=M.y,M.tubez=M.z,M.tubeu=A.traceCoordinate[3],M.tubev=A.traceCoordinate[4],M.tubew=A.traceCoordinate[5],M.norm=A.traceCoordinate[6],M.divergence=A.traceCoordinate[7],delete M.x,delete M.y,delete M.z,M},meta:{}}},424:function(Y,O,e){var M=e(45464),A=e(21776).Ks,o=e(21776).Gw,w=e(49084),_=e(86968).u,p=e(74996),s=e(27328),n=e(92880).extendFlat,a=e(98192).c;Y.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:n({colors:{valType:"data_array",editType:"calc"},line:{color:n({},p.marker.line.color,{dflt:null}),width:n({},p.marker.line.width,{dflt:1}),editType:"calc"},pattern:a,editType:"calc"},w("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:p.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:o({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:p.hovertext,hoverinfo:n({},M.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:A({},{keys:s.eventDataKeys}),textfont:p.textfont,insidetextorientation:p.insidetextorientation,insidetextfont:p.insidetextfont,outsidetextfont:n({},p.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:p.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:_({name:"sunburst",trace:!0,editType:"calc"})}},54904:function(Y,O,e){var M=e(7316);O.name="sunburst",O.plot=function(A,o,w,_){M.plotBasePlot(O.name,A,o,w,_)},O.clean=function(A,o,w,_){M.cleanBasePlot(O.name,A,o,w,_)}},3776:function(Y,O,e){var M=e(74148),A=e(38248),o=e(3400),w=e(8932).makeColorScaleFuncFromTrace,_=e(45768).makePullColorFn,p=e(45768).generateExtendedColors,s=e(8932).calc,n=e(39032).ALMOST_EQUAL,a={},r={},i={};function l(u,c,g){var f=0,b=u.children;if(b){for(var v=b.length,d=0;d<v;d++)f+=l(b[d],c,g);g.branches&&f++}else g.leaves&&f++;return u.value=u.data.data.value=f,c._values||(c._values=[]),c._values[u.data.data.i]=f,f}O.calc=function(u,c){var g,f,b,v,d,m,x=u._fullLayout,y=c.ids,T=o.isArrayOrTypedArray(y),h=c.labels,E=c.parents,k=c.values,L=o.isArrayOrTypedArray(k),P=[],I={},z={},F=function(se){return se||typeof se=="number"},U=function(se){return!L||A(k[se])&&k[se]>=0};T?(g=Math.min(y.length,E.length),f=function(se){return F(y[se])&&U(se)},b=function(se){return String(y[se])}):(g=Math.min(h.length,E.length),f=function(se){return F(h[se])&&U(se)},b=function(se){return String(h[se])}),L&&(g=Math.min(g,k.length));for(var R=0;R<g;R++)if(f(R)){var j=b(R),Z=F(E[R])?String(E[R]):"",B={i:R,id:j,pid:Z,label:F(h[R])?String(h[R]):""};L&&(B.v=+k[R]),P.push(B),d=j,I[v=Z]?I[v].push(d):I[v]=[d],z[d]=1}if(I[""]){if(I[""].length>1){for(var q=o.randstr(),V=0;V<P.length;V++)P[V].pid===""&&(P[V].pid=q);P.unshift({hasMultipleRoots:!0,id:q,pid:"",label:""})}}else{var ne,ee=[];for(ne in I)z[ne]||ee.push(ne);if(ee.length!==1)return o.warn(["Multiple implied roots, cannot build",c.type,"hierarchy of",c.name+".","These roots include:",ee.join(", ")].join(" "));ne=ee[0],P.unshift({hasImpliedRoot:!0,id:ne,pid:"",label:ne})}try{m=M.stratify().id(function(se){return se.id}).parentId(function(se){return se.pid})(P)}catch(se){return o.warn(["Failed to build",c.type,"hierarchy of",c.name+".","Error:",se.message].join(" "))}var $=M.hierarchy(m),J=!1;if(L)switch(c.branchvalues){case"remainder":$.sum(function(se){return se.data.v});break;case"total":$.each(function(se){var ce=se.data.data,de=ce.v;if(se.children){var ge=se.children.reduce(function(ve,be){return ve+be.data.data.v},0);if((ce.hasImpliedRoot||ce.hasMultipleRoots)&&(de=ge),de<ge*n)return J=!0,o.warn(["Total value for node",se.data.data.id,"of",c.name,"is smaller than the sum of its children.",`
parent value =`,de,`
children sum =`,ge].join(" "))}se.value=de})}else l($,c,{branches:c.count.indexOf("branches")!==-1,leaves:c.count.indexOf("leaves")!==-1});if(!J){var K,te;c.sort&&$.sort(function(se,ce){return ce.value-se.value});var ie=c.marker.colors||[],ae=!!ie.length;return c._hasColorscale?(ae||(ie=L?c.values:c._values),s(u,c,{vals:ie,containerStr:"marker",cLetter:"c"}),te=w(c.marker)):K=_(x["_"+c.type+"colormap"]),$.each(function(se){var ce=se.data.data;ce.color=c._hasColorscale?te(ie[ce.i]):K(ie[ce.i],ce.id)}),P[0].hierarchy=$,P}},O._runCrossTraceCalc=function(u,c){var g=c._fullLayout,f=c.calcdata,b=g[u+"colorway"],v=g["_"+u+"colormap"];g["extend"+u+"colors"]&&(b=p(b,u==="icicle"?i:u==="treemap"?r:a));var d,m=0;function x(h){var E=h.data.data,k=E.id;E.color===!1&&(v[k]?E.color=v[k]:h.parent?h.parent.parent?E.color=h.parent.data.data.color:(v[k]=E.color=b[m%b.length],m++):E.color=d)}for(var y=0;y<f.length;y++){var T=f[y][0];T.trace.type===u&&T.hierarchy&&(d=T.trace.root.color,T.hierarchy.each(x))}},O.crossTraceCalc=function(u){return O._runCrossTraceCalc("sunburst",u)}},27328:function(Y){Y.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},25244:function(Y,O,e){var M=e(3400),A=e(424),o=e(86968).Q,w=e(31508).handleText,_=e(74174).handleMarkerDefaults,p=e(8932),s=p.hasColorscale,n=p.handleDefaults;Y.exports=function(a,r,i,l){function u(d,m){return M.coerce(a,r,A,d,m)}var c=u("labels"),g=u("parents");if(c&&c.length&&g&&g.length){var f=u("values");f&&f.length?u("branchvalues"):u("count"),u("level"),u("maxdepth"),_(a,r,l,u);var b=r._hasColorscale=s(a,"marker","colors")||(a.marker||{}).coloraxis;b&&n(a,r,l,u,{prefix:"marker.",cLetter:"c"}),u("leaf.opacity",b?1:.7);var v=u("text");u("texttemplate"),r.texttemplate||u("textinfo",M.isArrayOrTypedArray(v)?"text+label":"label"),u("hovertext"),u("hovertemplate"),w(a,r,l,u,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),u("insidetextorientation"),u("sort"),u("rotation"),u("root.color"),o(r,l,u),r._length=null}else r.visible=!1}},60404:function(Y,O,e){var M=e(43616),A=e(76308);Y.exports=function(o,w,_,p,s){var n=w.data.data,a=n.i,r=s||n.color;if(a>=0){w.i=n.i;var i=_.marker;i.pattern&&i.colors&&i.pattern.shape||(i.color=r,w.color=r),M.pointStyle(o,_,p,w)}else A.fill(o,r)}},45716:function(Y,O,e){var M=e(33428),A=e(24040),o=e(10624).appendArrayPointValue,w=e(93024),_=e(3400),p=e(95924),s=e(78176),n=e(69656).formatPieValue;function a(r,i,l){for(var u=r.data.data,c={curveNumber:i.index,pointNumber:u.i,data:i._input,fullData:i},g=0;g<l.length;g++){var f=l[g];f in r&&(c[f]=r[f])}return"parentString"in r&&!s.isHierarchyRoot(r)&&(c.parent=r.parentString),o(c,i,u.i),c}Y.exports=function(r,i,l,u,c){var g=u[0],f=g.trace,b=g.hierarchy,v=f.type==="sunburst",d=f.type==="treemap"||f.type==="icicle";"_hasHoverLabel"in f||(f._hasHoverLabel=!1),"_hasHoverEvent"in f||(f._hasHoverEvent=!1),r.on("mouseover",function(m){var x=l._fullLayout;if(!l._dragging&&x.hovermode!==!1){var y,T=l._fullData[f.index],h=m.data.data,E=h.i,k=s.isHierarchyRoot(m),L=s.getParent(b,m),P=s.getValue(m),I=function(ie){return _.castOption(T,E,ie)},z=I("hovertemplate"),F=w.castHoverinfo(T,x,E),U=x.separators;if(z||F&&F!=="none"&&F!=="skip"){var R,j;v&&(R=g.cx+m.pxmid[0]*(1-m.rInscribed),j=g.cy+m.pxmid[1]*(1-m.rInscribed)),d&&(R=m._hoverX,j=m._hoverY);var Z,B={},q=[],V=[],ne=function(ie){return q.indexOf(ie)!==-1};F&&(q=F==="all"?T._module.attributes.hoverinfo.flags:F.split("+")),B.label=h.label,ne("label")&&B.label&&V.push(B.label),h.hasOwnProperty("v")&&(B.value=h.v,B.valueLabel=n(B.value,U),ne("value")&&V.push(B.valueLabel)),B.currentPath=m.currentPath=s.getPath(m.data),ne("current path")&&!k&&V.push(B.currentPath);var ee=[],$=function(){ee.indexOf(Z)===-1&&(V.push(Z),ee.push(Z))};B.percentParent=m.percentParent=P/s.getValue(L),B.parent=m.parentString=s.getPtLabel(L),ne("percent parent")&&(Z=s.formatPercent(B.percentParent,U)+" of "+B.parent,$()),B.percentEntry=m.percentEntry=P/s.getValue(i),B.entry=m.entry=s.getPtLabel(i),!ne("percent entry")||k||m.onPathbar||(Z=s.formatPercent(B.percentEntry,U)+" of "+B.entry,$()),B.percentRoot=m.percentRoot=P/s.getValue(b),B.root=m.root=s.getPtLabel(b),ne("percent root")&&!k&&(Z=s.formatPercent(B.percentRoot,U)+" of "+B.root,$()),B.text=I("hovertext")||I("text"),ne("text")&&(Z=B.text,_.isValidTextValue(Z)&&V.push(Z)),y=[a(m,T,c.eventDataKeys)];var J={trace:T,y:j,_x0:m._x0,_x1:m._x1,_y0:m._y0,_y1:m._y1,text:V.join("<br>"),name:z||ne("name")?T.name:void 0,color:I("hoverlabel.bgcolor")||h.color,borderColor:I("hoverlabel.bordercolor"),fontFamily:I("hoverlabel.font.family"),fontSize:I("hoverlabel.font.size"),fontColor:I("hoverlabel.font.color"),nameLength:I("hoverlabel.namelength"),textAlign:I("hoverlabel.align"),hovertemplate:z,hovertemplateLabels:B,eventData:y};v&&(J.x0=R-m.rInscribed*m.rpx1,J.x1=R+m.rInscribed*m.rpx1,J.idealAlign=m.pxmid[0]<0?"left":"right"),d&&(J.x=R,J.idealAlign=R<0?"left":"right");var K=[];w.loneHover(J,{container:x._hoverlayer.node(),outerContainer:x._paper.node(),gd:l,inOut_bbox:K}),y[0].bbox=K[0],f._hasHoverLabel=!0}if(d){var te=r.select("path.surface");c.styleOne(te,m,T,l,{hovered:!0})}f._hasHoverEvent=!0,l.emit("plotly_hover",{points:y||[a(m,T,c.eventDataKeys)],event:M.event})}}),r.on("mouseout",function(m){var x=l._fullLayout,y=l._fullData[f.index],T=M.select(this).datum();if(f._hasHoverEvent&&(m.originalEvent=M.event,l.emit("plotly_unhover",{points:[a(T,y,c.eventDataKeys)],event:M.event}),f._hasHoverEvent=!1),f._hasHoverLabel&&(w.loneUnhover(x._hoverlayer.node()),f._hasHoverLabel=!1),d){var h=r.select("path.surface");c.styleOne(h,T,y,l,{hovered:!1})}}),r.on("click",function(m){var x=l._fullLayout,y=l._fullData[f.index],T=v&&(s.isHierarchyRoot(m)||s.isLeaf(m)),h=s.getPtId(m),E=s.isEntry(m)?s.findEntryWithChild(b,h):s.findEntryWithLevel(b,h),k=s.getPtId(E),L={points:[a(m,y,c.eventDataKeys)],event:M.event};T||(L.nextLevel=k);var P=p.triggerHandler(l,"plotly_"+f.type+"click",L);if(P!==!1&&x.hovermode&&(l._hoverdata=[a(m,y,c.eventDataKeys)],w.click(l,M.event)),!T&&P!==!1&&!l._dragging&&!l._transitioning){A.call("_storeDirectGUIEdit",y,x._tracePreGUI[y.uid],{level:y.level});var I={data:[{level:k}],traces:[f.index]},z={frame:{redraw:!1,duration:c.transitionTime},transition:{duration:c.transitionTime,easing:c.transitionEasing},mode:"immediate",fromcurrent:!0};w.loneUnhover(x._hoverlayer.node()),A.call("animate",l,I,z)}})}},78176:function(Y,O,e){var M=e(3400),A=e(76308),o=e(93972),w=e(69656);function _(p){return p.data.data.pid}O.findEntryWithLevel=function(p,s){var n;return s&&p.eachAfter(function(a){if(O.getPtId(a)===s)return n=a.copy()}),n||p},O.findEntryWithChild=function(p,s){var n;return p.eachAfter(function(a){for(var r=a.children||[],i=0;i<r.length;i++){var l=r[i];if(O.getPtId(l)===s)return n=a.copy()}}),n||p},O.isEntry=function(p){return!p.parent},O.isLeaf=function(p){return!p.children},O.getPtId=function(p){return p.data.data.id},O.getPtLabel=function(p){return p.data.data.label},O.getValue=function(p){return p.value},O.isHierarchyRoot=function(p){return _(p)===""},O.setSliceCursor=function(p,s,n){var a=n.isTransitioning;if(!a){var r=p.datum();a=n.hideOnRoot&&O.isHierarchyRoot(r)||n.hideOnLeaves&&O.isLeaf(r)}o(p,a?null:"pointer")},O.getInsideTextFontKey=function(p,s,n,a,r){var i=(r||{}).onPathbar?"pathbar.textfont":"insidetextfont",l=n.data.data.i;return M.castOption(s,l,i+"."+p)||M.castOption(s,l,"textfont."+p)||a.size},O.getOutsideTextFontKey=function(p,s,n,a){var r=n.data.data.i;return M.castOption(s,r,"outsidetextfont."+p)||M.castOption(s,r,"textfont."+p)||a.size},O.isOutsideText=function(p,s){return!p._hasColorscale&&O.isHierarchyRoot(s)},O.determineTextFont=function(p,s,n,a){return O.isOutsideText(p,s)?function(r,i,l){return{color:O.getOutsideTextFontKey("color",r,i,l),family:O.getOutsideTextFontKey("family",r,i,l),size:O.getOutsideTextFontKey("size",r,i,l)}}(p,s,n):function(r,i,l,u){var c=(u||{}).onPathbar,g=i.data.data,f=g.i,b=M.castOption(r,f,(c?"pathbar.textfont":"insidetextfont")+".color");return!b&&r._input.textfont&&(b=M.castOption(r._input,f,"textfont.color")),{color:b||A.contrast(g.color),family:O.getInsideTextFontKey("family",r,i,l,u),size:O.getInsideTextFontKey("size",r,i,l,u)}}(p,s,n,a)},O.hasTransition=function(p){return!!(p&&p.duration>0)},O.getMaxDepth=function(p){return p.maxdepth>=0?p.maxdepth:1/0},O.isHeader=function(p,s){return!(O.isLeaf(p)||p.depth===s._maxDepth-1)},O.getParent=function(p,s){return O.findEntryWithLevel(p,_(s))},O.listPath=function(p,s){var n=p.parent;if(!n)return[];var a=s?[n.data[s]]:[n];return O.listPath(n,s).concat(a)},O.getPath=function(p){return O.listPath(p,"label").join("/")+"/"},O.formatValue=w.formatPieValue,O.formatPercent=function(p,s){var n=M.formatPercent(p,0);return n==="0%"&&(n=w.formatPiePercent(p,s)),n}},5621:function(Y,O,e){Y.exports={moduleType:"trace",name:"sunburst",basePlotModule:e(54904),categories:[],animatable:!0,attributes:e(424),layoutAttributes:e(84920),supplyDefaults:e(25244),supplyLayoutDefaults:e(28732),calc:e(3776).calc,crossTraceCalc:e(3776).crossTraceCalc,plot:e(96488).plot,style:e(85676).style,colorbar:e(5528),meta:{}}},84920:function(Y){Y.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},28732:function(Y,O,e){var M=e(3400),A=e(84920);Y.exports=function(o,w){function _(p,s){return M.coerce(o,w,A,p,s)}_("sunburstcolorway",w.colorway),_("extendsunburstcolors")}},96488:function(Y,O,e){var M=e(33428),A=e(74148),o=e(67756).qy,w=e(43616),_=e(3400),p=e(72736),s=e(82744),n=s.recordMinTextSize,a=s.clearMinTextSize,r=e(37820),i=e(69656).getRotationAngle,l=r.computeTransform,u=r.transformInsideText,c=e(85676).styleOne,g=e(60100).resizeText,f=e(45716),b=e(27328),v=e(78176);function d(x,y,T,h){var E=x._context.staticPlot,k=x._fullLayout,L=!k.uniformtext.mode&&v.hasTransition(h),P=M.select(T).selectAll("g.slice"),I=y[0],z=I.trace,F=I.hierarchy,U=v.findEntryWithLevel(F,z.level),R=v.getMaxDepth(z),j=k._size,Z=z.domain,B=j.w*(Z.x[1]-Z.x[0]),q=j.h*(Z.y[1]-Z.y[0]),V=.5*Math.min(B,q),ne=I.cx=j.l+j.w*(Z.x[1]+Z.x[0])/2,ee=I.cy=j.t+j.h*(1-Z.y[0])-q/2;if(!U)return P.remove();var $=null,J={};L&&P.each(function(le){J[v.getPtId(le)]={rpx0:le.rpx0,rpx1:le.rpx1,x0:le.x0,x1:le.x1,transform:le.transform},!$&&v.isEntry(le)&&($=le)});var K=function(le){return A.partition().size([2*Math.PI,le.height+1])(le)}(U).descendants(),te=U.height+1,ie=0,ae=R;I.hasMultipleRoots&&v.isHierarchyRoot(U)&&(K=K.slice(1),te-=1,ie=1,ae+=1),K=K.filter(function(le){return le.y1<=ae});var se=i(z.rotation);se&&K.forEach(function(le){le.x0+=se,le.x1+=se});var ce=Math.min(te,R),de=function(le){return(le-ie)/ce*V},ge=function(le,pe){return[le*Math.cos(pe),-le*Math.sin(pe)]},ve=function(le){return _.pathAnnulus(le.rpx0,le.rpx1,le.x0,le.x1,ne,ee)},be=function(le){return ne+m(le)[0]*(le.transform.rCenter||0)+(le.transform.x||0)},me=function(le){return ee+m(le)[1]*(le.transform.rCenter||0)+(le.transform.y||0)};(P=P.data(K,v.getPtId)).enter().append("g").classed("slice",!0),L?P.exit().transition().each(function(){var le=M.select(this);le.select("path.surface").transition().attrTween("d",function(pe){var Ee=function(Te){var Me,Le=v.getPtId(Te),Ie=J[Le],he=J[v.getPtId(U)];if(he){var xe=(Te.x1>he.x1?2*Math.PI:0)+se;Me=Te.rpx1<he.rpx1?{x0:Te.x0,x1:Te.x1,rpx0:0,rpx1:0}:{x0:xe,x1:xe,rpx0:Te.rpx0,rpx1:Te.rpx1}}else{var ke,ze=v.getPtId(Te.parent);P.each(function(Je){if(v.getPtId(Je)===ze)return ke=Je});var Re,Oe=ke.children;Oe.forEach(function(Je,ot){if(v.getPtId(Je)===Le)return Re=ot});var Ve=Oe.length,qe=o(ke.x0,ke.x1);Me={rpx0:V,rpx1:V,x0:qe(Re/Ve),x1:qe((Re+1)/Ve)}}return o(Ie,Me)}(pe);return function(Te){return ve(Ee(Te))}}),le.select("g.slicetext").attr("opacity",0)}).remove():P.exit().remove(),P.order();var Se=null;if(L&&$){var we=v.getPtId($);P.each(function(le){Se===null&&v.getPtId(le)===we&&(Se=le.x1)})}var _e=P;function oe(le){var pe=le.parent,Ee=J[v.getPtId(pe)],Te={};if(Ee){var Me=pe.children,Le=Me.indexOf(le),Ie=Me.length,he=o(Ee.x0,Ee.x1);Te.x0=he(Le/Ie),Te.x1=he(Le/Ie)}else Te.x0=Te.x1=0;return Te}L&&(_e=_e.transition().each("end",function(){var le=M.select(this);v.setSliceCursor(le,x,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),_e.each(function(le){var pe=M.select(this),Ee=_.ensureSingle(pe,"path","surface",function(xe){xe.style("pointer-events",E?"none":"all")});le.rpx0=de(le.y0),le.rpx1=de(le.y1),le.xmid=(le.x0+le.x1)/2,le.pxmid=ge(le.rpx1,le.xmid),le.midangle=-(le.xmid-Math.PI/2),le.startangle=-(le.x0-Math.PI/2),le.stopangle=-(le.x1-Math.PI/2),le.halfangle=.5*Math.min(_.angleDelta(le.x0,le.x1)||Math.PI,Math.PI),le.ring=1-le.rpx0/le.rpx1,le.rInscribed=function(xe){return xe.rpx0===0&&_.isFullCircle([xe.x0,xe.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(xe.halfangle)),xe.ring/2))}(le),L?Ee.transition().attrTween("d",function(xe){var ke=function(ze){var Re,Oe=J[v.getPtId(ze)],Ve={x0:ze.x0,x1:ze.x1,rpx0:ze.rpx0,rpx1:ze.rpx1};if(Oe)Re=Oe;else if($)if(ze.parent)if(Se){var qe=(ze.x1>Se?2*Math.PI:0)+se;Re={x0:qe,x1:qe}}else Re={rpx0:V,rpx1:V},_.extendFlat(Re,oe(ze));else Re={rpx0:0,rpx1:0};else Re={x0:se,x1:se};return o(Re,Ve)}(xe);return function(ze){return ve(ke(ze))}}):Ee.attr("d",ve),pe.call(f,U,x,y,{eventDataKeys:b.eventDataKeys,transitionTime:b.CLICK_TRANSITION_TIME,transitionEasing:b.CLICK_TRANSITION_EASING}).call(v.setSliceCursor,x,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:x._transitioning}),Ee.call(c,le,z,x);var Te=_.ensureSingle(pe,"g","slicetext"),Me=_.ensureSingle(Te,"text","",function(xe){xe.attr("data-notex",1)}),Le=_.ensureUniformFontSize(x,v.determineTextFont(z,le,k.font));Me.text(O.formatSliceLabel(le,U,z,y,k)).classed("slicetext",!0).attr("text-anchor","middle").call(w.font,Le).call(p.convertToTspans,x);var Ie=w.bBox(Me.node());le.transform=u(Ie,le,I),le.transform.targetX=be(le),le.transform.targetY=me(le);var he=function(xe,ke){var ze=xe.transform;return l(ze,ke),ze.fontSize=Le.size,n(z.type,ze,k),_.getTextTransform(ze)};L?Me.transition().attrTween("transform",function(xe){var ke=function(ze){var Re,Oe=J[v.getPtId(ze)],Ve=ze.transform;if(Oe)Re=Oe;else if(Re={rpx1:ze.rpx1,transform:{textPosAngle:Ve.textPosAngle,scale:0,rotate:Ve.rotate,rCenter:Ve.rCenter,x:Ve.x,y:Ve.y}},$)if(ze.parent)if(Se){var qe=ze.x1>Se?2*Math.PI:0;Re.x0=Re.x1=qe}else _.extendFlat(Re,oe(ze));else Re.x0=Re.x1=se;else Re.x0=Re.x1=se;var Je=o(Re.transform.textPosAngle,ze.transform.textPosAngle),ot=o(Re.rpx1,ze.rpx1),rt=o(Re.x0,ze.x0),dt=o(Re.x1,ze.x1),_t=o(Re.transform.scale,Ve.scale),yt=o(Re.transform.rotate,Ve.rotate),et=Ve.rCenter===0?3:Re.transform.rCenter===0?1/3:1,nt=o(Re.transform.rCenter,Ve.rCenter);return function(At){var Rt=ot(At),Ft=rt(At),It=dt(At),Ge=function(Ne){return nt(Math.pow(Ne,et))}(At),Ye={pxmid:ge(Rt,(Ft+It)/2),rpx1:Rt,transform:{textPosAngle:Je(At),rCenter:Ge,x:Ve.x,y:Ve.y}};return n(z.type,Ve,k),{transform:{targetX:be(Ye),targetY:me(Ye),scale:_t(At),rotate:yt(At),rCenter:Ge}}}}(xe);return function(ze){return he(ke(ze),Ie)}}):Me.attr("transform",he(le,Ie))})}function m(x){return y=x.rpx1,T=x.transform.textPosAngle,[y*Math.sin(T),-y*Math.cos(T)];var y,T}O.plot=function(x,y,T,h){var E,k,L=x._fullLayout,P=L._sunburstlayer,I=!T,z=!L.uniformtext.mode&&v.hasTransition(T);a("sunburst",L),(E=P.selectAll("g.trace.sunburst").data(y,function(F){return F[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),E.order(),z?(h&&(k=h()),M.transition().duration(T.duration).ease(T.easing).each("end",function(){k&&k()}).each("interrupt",function(){k&&k()}).each(function(){P.selectAll("g.trace").each(function(F){d(x,F,this,T)})})):(E.each(function(F){d(x,F,this,T)}),L.uniformtext.mode&&g(x,L._sunburstlayer.selectAll(".trace"),"sunburst")),I&&E.exit().remove()},O.formatSliceLabel=function(x,y,T,h,E){var k=T.texttemplate,L=T.textinfo;if(!(k||L&&L!=="none"))return"";var P=E.separators,I=h[0],z=x.data.data,F=I.hierarchy,U=v.isHierarchyRoot(x),R=v.getParent(F,x),j=v.getValue(x);if(!k){var Z,B=L.split("+"),q=function(ae){return B.indexOf(ae)!==-1},V=[];if(q("label")&&z.label&&V.push(z.label),z.hasOwnProperty("v")&&q("value")&&V.push(v.formatValue(z.v,P)),!U){q("current path")&&V.push(v.getPath(x.data));var ne=0;q("percent parent")&&ne++,q("percent entry")&&ne++,q("percent root")&&ne++;var ee=ne>1;if(ne){var $,J=function(ae){Z=v.formatPercent($,P),ee&&(Z+=" of "+ae),V.push(Z)};q("percent parent")&&!U&&($=j/v.getValue(R),J("parent")),q("percent entry")&&($=j/v.getValue(y),J("entry")),q("percent root")&&($=j/v.getValue(F),J("root"))}}return q("text")&&(Z=_.castOption(T,z.i,"text"),_.isValidTextValue(Z)&&V.push(Z)),V.join("<br>")}var K=_.castOption(T,z.i,"texttemplate");if(!K)return"";var te={};z.label&&(te.label=z.label),z.hasOwnProperty("v")&&(te.value=z.v,te.valueLabel=v.formatValue(z.v,P)),te.currentPath=v.getPath(x.data),U||(te.percentParent=j/v.getValue(R),te.percentParentLabel=v.formatPercent(te.percentParent,P),te.parent=v.getPtLabel(R)),te.percentEntry=j/v.getValue(y),te.percentEntryLabel=v.formatPercent(te.percentEntry,P),te.entry=v.getPtLabel(y),te.percentRoot=j/v.getValue(F),te.percentRootLabel=v.formatPercent(te.percentRoot,P),te.root=v.getPtLabel(F),z.hasOwnProperty("color")&&(te.color=z.color);var ie=_.castOption(T,z.i,"text");return(_.isValidTextValue(ie)||ie==="")&&(te.text=ie),te.customdata=_.castOption(T,z.i,"customdata"),_.texttemplateString(K,te,E._d3locale,te,T._meta||{})}},85676:function(Y,O,e){var M=e(33428),A=e(76308),o=e(3400),w=e(82744).resizeText,_=e(60404);function p(s,n,a,r){var i=n.data.data,l=!n.children,u=i.i,c=o.castOption(a,u,"marker.line.color")||A.defaultLine,g=o.castOption(a,u,"marker.line.width")||0;s.call(_,n,a,r).style("stroke-width",g).call(A.stroke,c).style("opacity",l?a.leaf.opacity:null)}Y.exports={style:function(s){var n=s._fullLayout._sunburstlayer.selectAll(".trace");w(s,n,"sunburst"),n.each(function(a){var r=M.select(this),i=a[0].trace;r.style("opacity",i.opacity),r.selectAll("path.surface").each(function(l){M.select(this).call(p,l,i,s)})})},styleOne:p}},16716:function(Y,O,e){var M=e(76308),A=e(49084),o=e(29736).axisHoverFormat,w=e(21776).Ks,_=e(45464),p=e(92880).extendFlat,s=e(67824).overrideAll;function n(r){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:M.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:M.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var a=Y.exports=s(p({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:w(),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},A("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:n(),y:n(),z:n()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:p({},A.zauto,{}),zmin:p({},A.zmin,{}),zmax:p({},A.zmax,{})},hoverinfo:p({},_.hoverinfo),showlegend:p({},_.showlegend,{dflt:!1})}),"calc","nested");a.x.editType=a.y.editType=a.z.editType="calc+clearAxisTypes",a.transforms=void 0},56576:function(Y,O,e){var M=e(47128);Y.exports=function(A,o){o.surfacecolor?M(A,o,{vals:o.surfacecolor,containerStr:"",cLetter:"c"}):M(A,o,{vals:o.z,containerStr:"",cLetter:"c"})}},79164:function(Y,O,e){var M=e(67792).gl_surface3d,A=e(67792).ndarray,o=e(67792).ndarray_linear_interpolate.d2,w=e(70448),_=e(11240),p=e(3400).isArrayOrTypedArray,s=e(33040).parseColorScale,n=e(43080),a=e(8932).extractOpts;function r(T,h,E){this.scene=T,this.uid=E,this.surface=h,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var i=r.prototype;i.getXat=function(T,h,E,k){var L=p(this.data.x)?p(this.data.x[0])?this.data.x[h][T]:this.data.x[T]:T;return E===void 0?L:k.d2l(L,0,E)},i.getYat=function(T,h,E,k){var L=p(this.data.y)?p(this.data.y[0])?this.data.y[h][T]:this.data.y[h]:h;return E===void 0?L:k.d2l(L,0,E)},i.getZat=function(T,h,E,k){var L=this.data.z[h][T];return L===null&&this.data.connectgaps&&this.data._interpolatedZ&&(L=this.data._interpolatedZ[h][T]),E===void 0?L:k.d2l(L,0,E)},i.handlePick=function(T){if(T.object===this.surface){var h=(T.data.index[0]-1)/this.dataScaleX-1,E=(T.data.index[1]-1)/this.dataScaleY-1,k=Math.max(Math.min(Math.round(h),this.data.z[0].length-1),0),L=Math.max(Math.min(Math.round(E),this.data._ylength-1),0);T.index=[k,L],T.traceCoordinate=[this.getXat(k,L),this.getYat(k,L),this.getZat(k,L)],T.dataCoordinate=[this.getXat(k,L,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(k,L,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(k,L,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var P=0;P<3;P++)T.dataCoordinate[P]!=null&&(T.dataCoordinate[P]*=this.scene.dataScale[P]);var I=this.data.hovertext||this.data.text;return p(I)&&I[L]&&I[L][k]!==void 0?T.textLabel=I[L][k]:T.textLabel=I||"",T.data.dataCoordinate=T.dataCoordinate.slice(),this.surface.highlight(T.data),this.scene.glplot.spikes.position=T.dataCoordinate,!0}};var l=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function u(T,h){if(T<h)return 0;for(var E=0;Math.floor(T%h)===0;)T/=h,E++;return E}function c(T){for(var h=[],E=0;E<l.length;E++){var k=l[E];h.push(u(T,k))}return h}function g(T){for(var h=c(T),E=T,k=0;k<l.length;k++)if(h[k]>0){E=l[k];break}return E}function f(T,h){if(!(T<1||h<1)){for(var E=c(T),k=c(h),L=1,P=0;P<l.length;P++)L*=Math.pow(l[P],Math.max(E[P],k[P]));return L}}i.calcXnums=function(T){var h,E=[];for(h=1;h<T;h++){var k=this.getXat(h-1,0),L=this.getXat(h,0);E[h-1]=L!==k&&k!=null&&L!=null?Math.abs(L-k):0}var P=0;for(h=1;h<T;h++)P+=E[h-1];for(h=1;h<T;h++)E[h-1]===0?E[h-1]=1:E[h-1]=Math.round(P/E[h-1]);return E},i.calcYnums=function(T){var h,E=[];for(h=1;h<T;h++){var k=this.getYat(0,h-1),L=this.getYat(0,h);E[h-1]=L!==k&&k!=null&&L!=null?Math.abs(L-k):0}var P=0;for(h=1;h<T;h++)P+=E[h-1];for(h=1;h<T;h++)E[h-1]===0?E[h-1]=1:E[h-1]=Math.round(P/E[h-1]);return E};var b=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],v=b[9],d=b[13];function m(T,h,E){var k=E[8]+E[2]*h[0]+E[5]*h[1];return T[0]=(E[6]+E[0]*h[0]+E[3]*h[1])/k,T[1]=(E[7]+E[1]*h[0]+E[4]*h[1])/k,T}function x(T,h,E){return function(k,L,P,I){for(var z=[0,0],F=k.shape[0],U=k.shape[1],R=0;R<F;R++)for(var j=0;j<U;j++)P(z,[R,j],I),k.set(R,j,o(L,z[0],z[1]))}(T,h,m,E),T}function y(T,h){for(var E=!1,k=0;k<T.length;k++)if(h===T[k]){E=!0;break}E===!1&&T.push(h)}i.estimateScale=function(T,h){for(var E=1+function(L){if(L.length!==0){for(var P=1,I=0;I<L.length;I++)P=f(P,L[I]);return P}}(h===0?this.calcXnums(T):this.calcYnums(T));E<v;)E*=2;for(;E>d;)E--,E/=g(E),++E<v&&(E=d);var k=Math.round(E/T);return k>1?k:1},i.refineCoords=function(T){for(var h=this.dataScaleX,E=this.dataScaleY,k=T[0].shape[0],L=T[0].shape[1],P=0|Math.floor(T[0].shape[0]*h+1),I=0|Math.floor(T[0].shape[1]*E+1),z=1+k+1,F=1+L+1,U=A(new Float32Array(z*F),[z,F]),R=[1/h,0,0,0,1/E,0,0,0,1],j=0;j<T.length;++j){this.surface.padField(U,T[j]);var Z=A(new Float32Array(P*I),[P,I]);x(Z,U,R),T[j]=Z}},i.setContourLevels=function(){var T,h,E,k=[[],[],[]],L=[!1,!1,!1],P=!1;for(T=0;T<3;++T)if(this.showContour[T]&&(P=!0,this.contourSize[T]>0&&this.contourStart[T]!==null&&this.contourEnd[T]!==null&&this.contourEnd[T]>this.contourStart[T]))for(L[T]=!0,h=this.contourStart[T];h<this.contourEnd[T];h+=this.contourSize[T])E=h*this.scene.dataScale[T],y(k[T],E);if(P){var I=[[],[],[]];for(T=0;T<3;++T)this.showContour[T]&&(I[T]=L[T]?k[T]:this.scene.contourLevels[T]);this.surface.update({levels:I})}},i.update=function(T){var h,E,k,L,P=this.scene,I=P.fullSceneLayout,z=this.surface,F=s(T),U=P.dataScale,R=T.z[0].length,j=T._ylength,Z=P.contourLevels;this.data=T;var B=[];for(h=0;h<3;h++)for(B[h]=[],E=0;E<R;E++)B[h][E]=[];for(E=0;E<R;E++)for(k=0;k<j;k++)B[0][E][k]=this.getXat(E,k,T.xcalendar,I.xaxis),B[1][E][k]=this.getYat(E,k,T.ycalendar,I.yaxis),B[2][E][k]=this.getZat(E,k,T.zcalendar,I.zaxis);if(T.connectgaps)for(T._emptypoints=_(B[2]),w(B[2],T._emptypoints),T._interpolatedZ=[],E=0;E<R;E++)for(T._interpolatedZ[E]=[],k=0;k<j;k++)T._interpolatedZ[E][k]=B[2][E][k];for(h=0;h<3;h++)for(E=0;E<R;E++)for(k=0;k<j;k++)(L=B[h][E][k])==null?B[h][E][k]=NaN:L=B[h][E][k]*=U[h];for(h=0;h<3;h++)for(E=0;E<R;E++)for(k=0;k<j;k++)(L=B[h][E][k])!=null&&(this.minValues[h]>L&&(this.minValues[h]=L),this.maxValues[h]<L&&(this.maxValues[h]=L));for(h=0;h<3;h++)this.objectOffset[h]=.5*(this.minValues[h]+this.maxValues[h]);for(h=0;h<3;h++)for(E=0;E<R;E++)for(k=0;k<j;k++)(L=B[h][E][k])!=null&&(B[h][E][k]-=this.objectOffset[h]);var q=[A(new Float32Array(R*j),[R,j]),A(new Float32Array(R*j),[R,j]),A(new Float32Array(R*j),[R,j])];for(h=0;h<3;h++)for(E=0;E<R;E++)for(k=0;k<j;k++)q[h].set(E,k,B[h][E][k]);B=[];var V={colormap:F,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!T.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:T.opacityscale,opacity:T.opacity},ne=a(T);if(V.intensityBounds=[ne.min,ne.max],T.surfacecolor){var ee=A(new Float32Array(R*j),[R,j]);for(E=0;E<R;E++)for(k=0;k<j;k++)ee.set(E,k,T.surfacecolor[k][E]);q.push(ee)}else V.intensityBounds[0]*=U[2],V.intensityBounds[1]*=U[2];(d<q[0].shape[0]||d<q[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(q[0].shape[0],0),this.dataScaleY=this.estimateScale(q[0].shape[1],1),this.dataScaleX===1&&this.dataScaleY===1||this.refineCoords(q)),T.surfacecolor&&(V.intensity=q.pop());var $=[!0,!0,!0],J=["x","y","z"];for(h=0;h<3;++h){var K=T.contours[J[h]];$[h]=K.highlight,V.showContour[h]=K.show||K.highlight,V.showContour[h]&&(V.contourProject[h]=[K.project.x,K.project.y,K.project.z],K.show?(this.showContour[h]=!0,V.levels[h]=Z[h],z.highlightColor[h]=V.contourColor[h]=n(K.color),K.usecolormap?z.highlightTint[h]=V.contourTint[h]=0:z.highlightTint[h]=V.contourTint[h]=1,V.contourWidth[h]=K.width,this.contourStart[h]=K.start,this.contourEnd[h]=K.end,this.contourSize[h]=K.size):(this.showContour[h]=!1,this.contourStart[h]=null,this.contourEnd[h]=null,this.contourSize[h]=0),K.highlight&&(V.dynamicColor[h]=n(K.highlightcolor),V.dynamicWidth[h]=K.highlightwidth))}(function(te){var ie=te[0].rgb,ae=te[te.length-1].rgb;return ie[0]===ae[0]&&ie[1]===ae[1]&&ie[2]===ae[2]&&ie[3]===ae[3]})(F)&&(V.vertexColor=!0),V.objectOffset=this.objectOffset,V.coords=q,z.update(V),z.visible=T.visible,z.enableDynamic=$,z.enableHighlight=$,z.snapToData=!0,"lighting"in T&&(z.ambientLight=T.lighting.ambient,z.diffuseLight=T.lighting.diffuse,z.specularLight=T.lighting.specular,z.roughness=T.lighting.roughness,z.fresnel=T.lighting.fresnel),"lightposition"in T&&(z.lightPosition=[T.lightposition.x,T.lightposition.y,T.lightposition.z])},i.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},Y.exports=function(T,h){var E=T.glplot.gl,k=M({gl:E}),L=new r(T,k,h.uid);return k._trace=L,L.update(h),T.glplot.add(k),L}},60192:function(Y,O,e){var M=e(24040),A=e(3400),o=e(27260),w=e(16716);function _(s,n,a,r){var i=r("opacityscale");i==="max"?n.opacityscale=[[0,.1],[1,1]]:i==="min"?n.opacityscale=[[0,1],[1,.1]]:i==="extremes"?n.opacityscale=function(l,u){for(var c=[],g=0;g<32;g++){var f=g/31,b=.1+.9*(1-Math.pow(Math.sin(1*f*Math.PI),2));c.push([f,Math.max(0,Math.min(1,b))])}return c}():function(l){var u=0;if(!Array.isArray(l)||l.length<2||!l[0]||!l[l.length-1]||+l[0][0]!=0||+l[l.length-1][0]!=1)return!1;for(var c=0;c<l.length;c++){var g=l[c];if(g.length!==2||+g[0]<u)return!1;u=+g[0]}return!0}(i)||(n.opacityscale=void 0)}function p(s,n,a){n in s&&!(a in s)&&(s[a]=s[n])}Y.exports={supplyDefaults:function(s,n,a,r){var i,l;function u(y,T){return A.coerce(s,n,w,y,T)}var c=u("x"),g=u("y"),f=u("z");if(!f||!f.length||c&&c.length<1||g&&g.length<1)n.visible=!1;else{n._xlength=Array.isArray(c)&&A.isArrayOrTypedArray(c[0])?f.length:f[0].length,n._ylength=f.length,M.getComponentMethod("calendars","handleTraceDefaults")(s,n,["x","y","z"],r),u("text"),u("hovertext"),u("hovertemplate"),u("xhoverformat"),u("yhoverformat"),u("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(y){u(y)});var b=u("surfacecolor"),v=["x","y","z"];for(i=0;i<3;++i){var d="contours."+v[i],m=u(d+".show"),x=u(d+".highlight");if(m||x)for(l=0;l<3;++l)u(d+".project."+v[l]);m&&(u(d+".color"),u(d+".width"),u(d+".usecolormap")),x&&(u(d+".highlightcolor"),u(d+".highlightwidth")),u(d+".start"),u(d+".end"),u(d+".size")}b||(p(s,"zmin","cmin"),p(s,"zmax","cmax"),p(s,"zauto","cauto")),o(s,n,r,u,{prefix:"",cLetter:"c"}),_(0,n,0,u),n._length=null}},opacityscaleDefaults:_}},91304:function(Y,O,e){Y.exports={attributes:e(16716),supplyDefaults:e(60192).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e(56576),plot:e(79164),moduleType:"trace",name:"surface",basePlotModule:e(12536),categories:["gl3d","2dMap","showLegend"],meta:{}}},60520:function(Y,O,e){var M=e(13916),A=e(92880).extendFlat,o=e(67824).overrideAll,w=e(25376),_=e(86968).u,p=e(29736).descriptionOnlyNumbers;(Y.exports=o({domain:_({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:p("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:A({},M.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:A({},w({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:p("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:A({},M.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:A({},w({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},85852:function(Y,O,e){var M=e(84888)._M,A=e(24752),o="table";O.name=o,O.plot=function(w){var _=M(w.calcdata,o)[0];_.length&&A(w,_)},O.clean=function(w,_,p,s){var n=s._has&&s._has(o),a=_._has&&_._has(o);n&&!a&&s._paperdiv.selectAll(".table").remove()}},39312:function(Y,O,e){var M=e(71688).wrap;Y.exports=function(){return M({})}},23536:function(Y){Y.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},55992:function(Y,O,e){var M=e(23536),A=e(92880).extendFlat,o=e(38248),w=e(38116).isTypedArray,_=e(38116).isArrayOrTypedArray;function p(u){if(_(u)){for(var c=0,g=0;g<u.length;g++)c=Math.max(c,p(u[g]));return c}return u}function s(u,c){return u+c}function n(u){var c,g=u.slice(),f=1/0,b=0;for(c=0;c<g.length;c++)w(g[c])?g[c]=Array.from(g[c]):_(g[c])||(g[c]=[g[c]]),f=Math.min(f,g[c].length),b=Math.max(b,g[c].length);if(f!==b)for(c=0;c<g.length;c++){var v=b-g[c].length;v&&(g[c]=g[c].concat(a(v)))}return g}function a(u){for(var c=new Array(u),g=0;g<u;g++)c[g]="";return c}function r(u){return u.calcdata.columns.reduce(function(c,g){return g.xIndex<u.xIndex?c+g.columnWidth:c},0)}function i(u,c){return Object.keys(u).map(function(g){return A({},u[g],{auxiliaryBlocks:c})})}function l(u,c){for(var g,f={},b=0,v=0,d={firstRowIndex:null,lastRowIndex:null,rows:[]},m=0,x=0,y=0;y<u.length;y++)g=u[y],d.rows.push({rowIndex:y,rowHeight:g}),((v+=g)>=c||y===u.length-1)&&(f[b]=d,d.key=x++,d.firstRowIndex=m,d.lastRowIndex=y,d={firstRowIndex:null,lastRowIndex:null,rows:[]},b+=v,m=y+1,v=0);return f}Y.exports=function(u,c){var g=n(c.cells.values),f=function(j){return j.slice(c.header.values.length,j.length)},b=n(c.header.values);b.length&&!b[0].length&&(b[0]=[""],b=n(b));var v=b.concat(f(g).map(function(){return a((b[0]||[""]).length)})),d=c.domain,m=Math.floor(u._fullLayout._size.w*(d.x[1]-d.x[0])),x=Math.floor(u._fullLayout._size.h*(d.y[1]-d.y[0])),y=c.header.values.length?v[0].map(function(){return c.header.height}):[M.emptyHeaderHeight],T=g.length?g[0].map(function(){return c.cells.height}):[],h=y.reduce(s,0),E=l(T,x-h+M.uplift),k=i(l(y,h),[]),L=i(E,k),P={},I=c._fullInput.columnorder;_(I)&&(I=Array.from(I)),I=I.concat(f(g.map(function(j,Z){return Z})));var z=v.map(function(j,Z){var B=_(c.columnwidth)?c.columnwidth[Math.min(Z,c.columnwidth.length-1)]:c.columnwidth;return o(B)?Number(B):1}),F=z.reduce(s,0);z=z.map(function(j){return j/F*m});var U=Math.max(p(c.header.line.width),p(c.cells.line.width)),R={key:c.uid+u._context.staticPlot,translateX:d.x[0]*u._fullLayout._size.w,translateY:u._fullLayout._size.h*(1-d.y[1]),size:u._fullLayout._size,width:m,maxLineWidth:U,height:x,columnOrder:I,groupHeight:x,rowBlocks:L,headerRowBlocks:k,scrollY:0,cells:A({},c.cells,{values:g}),headerCells:A({},c.header,{values:v}),gdColumns:v.map(function(j){return j[0]}),gdColumnsOriginalOrder:v.map(function(j){return j[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:v.map(function(j,Z){var B=P[j];return P[j]=(B||0)+1,{key:j+"__"+P[j],label:j,specIndex:Z,xIndex:I[Z],xScale:r,x:void 0,calcdata:void 0,columnWidth:z[Z]}})};return R.columns.forEach(function(j){j.calcdata=R,j.x=r(j)}),R}},53056:function(Y,O,e){var M=e(92880).extendFlat;O.splitToPanels=function(A){var o=[0,0],w=M({},A,{key:"header",type:"header",page:0,prevPages:o,currentRepaint:[null,null],dragHandle:!0,values:A.calcdata.headerCells.values[A.specIndex],rowBlocks:A.calcdata.headerRowBlocks,calcdata:M({},A.calcdata,{cells:A.calcdata.headerCells})});return[M({},A,{key:"cells1",type:"cells",page:0,prevPages:o,currentRepaint:[null,null],dragHandle:!1,values:A.calcdata.cells.values[A.specIndex],rowBlocks:A.calcdata.rowBlocks}),M({},A,{key:"cells2",type:"cells",page:1,prevPages:o,currentRepaint:[null,null],dragHandle:!1,values:A.calcdata.cells.values[A.specIndex],rowBlocks:A.calcdata.rowBlocks}),w]},O.splitToCells=function(A){var o=function(w){var _=w.rowBlocks[w.page],p=_?_.rows[0].rowIndex:0;return[p,_?p+_.rows.length:0]}(A);return(A.values||[]).slice(o[0],o[1]).map(function(w,_){return{keyWithinBlock:_+(typeof w=="string"&&w.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:o[0]+_,column:A,calcdata:A.calcdata,page:A.page,rowBlocks:A.rowBlocks,value:w}})}},53212:function(Y,O,e){var M=e(3400),A=e(60520),o=e(86968).Q;Y.exports=function(w,_,p,s){function n(a,r){return M.coerce(w,_,A,a,r)}o(_,s,n),n("columnwidth"),n("header.values"),n("header.format"),n("header.align"),n("header.prefix"),n("header.suffix"),n("header.height"),n("header.line.width"),n("header.line.color"),n("header.fill.color"),M.coerceFont(n,"header.font",M.extendFlat({},s.font)),function(a,r){for(var i=a.columnorder||[],l=a.header.values.length,u=i.slice(0,l),c=u.slice().sort(function(b,v){return b-v}),g=u.map(function(b){return c.indexOf(b)}),f=g.length;f<l;f++)g.push(f);r("columnorder",g)}(_,n),n("cells.values"),n("cells.format"),n("cells.align"),n("cells.prefix"),n("cells.suffix"),n("cells.height"),n("cells.line.width"),n("cells.line.color"),n("cells.fill.color"),M.coerceFont(n,"cells.font",M.extendFlat({},s.font)),_._length=null}},41724:function(Y,O,e){Y.exports={attributes:e(60520),supplyDefaults:e(53212),calc:e(39312),plot:e(24752),moduleType:"trace",name:"table",basePlotModule:e(85852),categories:["noOpacity"],meta:{}}},24752:function(Y,O,e){var M=e(23536),A=e(33428),o=e(3400),w=o.numberFormat,_=e(71688),p=e(43616),s=e(72736),n=e(3400).raiseToTop,a=e(3400).strTranslate,r=e(3400).cancelTransition,i=e(55992),l=e(53056),u=e(76308);function c(V){return Math.ceil(V.calcdata.maxLineWidth/2)}function g(V,ne){return"clip"+V._fullLayout._uid+"_scrollAreaBottomClip_"+ne.key}function f(V,ne){return"clip"+V._fullLayout._uid+"_columnBoundaryClippath_"+ne.calcdata.key+"_"+ne.specIndex}function b(V){return[].concat.apply([],V.map(function(ne){return ne})).map(function(ne){return ne.__data__})}function v(V,ne,ee){var $=V.selectAll("."+M.cn.scrollbarKit).data(_.repeat,_.keyFun);$.enter().append("g").classed(M.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),$.each(function(ae){var se=ae.scrollbarState;se.totalHeight=function(ce){var de=ce.rowBlocks;return j(de,de.length-1)+(de.length?Z(de[de.length-1],1/0):1)}(ae),se.scrollableAreaHeight=ae.groupHeight-k(ae),se.currentlyVisibleHeight=Math.min(se.totalHeight,se.scrollableAreaHeight),se.ratio=se.currentlyVisibleHeight/se.totalHeight,se.barLength=Math.max(se.ratio*se.currentlyVisibleHeight,M.goldenRatio*M.scrollbarWidth),se.barWiggleRoom=se.currentlyVisibleHeight-se.barLength,se.wiggleRoom=Math.max(0,se.totalHeight-se.scrollableAreaHeight),se.topY=se.barWiggleRoom===0?0:ae.scrollY/se.wiggleRoom*se.barWiggleRoom,se.bottomY=se.topY+se.barLength,se.dragMultiplier=se.wiggleRoom/se.barWiggleRoom}).attr("transform",function(ae){var se=ae.width+M.scrollbarWidth/2+M.scrollbarOffset;return a(se,k(ae))});var J=$.selectAll("."+M.cn.scrollbar).data(_.repeat,_.keyFun);J.enter().append("g").classed(M.cn.scrollbar,!0);var K=J.selectAll("."+M.cn.scrollbarSlider).data(_.repeat,_.keyFun);K.enter().append("g").classed(M.cn.scrollbarSlider,!0),K.attr("transform",function(ae){return a(0,ae.scrollbarState.topY||0)});var te=K.selectAll("."+M.cn.scrollbarGlyph).data(_.repeat,_.keyFun);te.enter().append("line").classed(M.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",M.scrollbarWidth).attr("stroke-linecap","round").attr("y1",M.scrollbarWidth/2),te.attr("y2",function(ae){return ae.scrollbarState.barLength-M.scrollbarWidth/2}).attr("stroke-opacity",function(ae){return ae.columnDragInProgress||!ae.scrollbarState.barWiggleRoom||ee?0:.4}),te.transition().delay(0).duration(0),te.transition().delay(M.scrollbarHideDelay).duration(M.scrollbarHideDuration).attr("stroke-opacity",0);var ie=J.selectAll("."+M.cn.scrollbarCaptureZone).data(_.repeat,_.keyFun);ie.enter().append("line").classed(M.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",M.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ae){var se=A.event.y,ce=this.getBoundingClientRect(),de=ae.scrollbarState,ge=se-ce.top,ve=A.scale.linear().domain([0,de.scrollableAreaHeight]).range([0,de.totalHeight]).clamp(!0);de.topY<=ge&&ge<=de.bottomY||P(ne,V,null,ve(ge-de.barLength/2))(ae)}).call(A.behavior.drag().origin(function(ae){return A.event.stopPropagation(),ae.scrollbarState.scrollbarScrollInProgress=!0,ae}).on("drag",P(ne,V)).on("dragend",function(){})),ie.attr("y2",function(ae){return ae.scrollbarState.scrollableAreaHeight}),ne._context.staticPlot&&(te.remove(),ie.remove())}function d(V,ne,ee,$){var J=function(se){var ce=se.selectAll("."+M.cn.columnCells).data(_.repeat,_.keyFun);return ce.enter().append("g").classed(M.cn.columnCells,!0),ce.exit().remove(),ce}(ee),K=function(se){var ce=se.selectAll("."+M.cn.columnCell).data(l.splitToCells,function(de){return de.keyWithinBlock});return ce.enter().append("g").classed(M.cn.columnCell,!0),ce.exit().remove(),ce}(J);(function(se){se.each(function(ce,de){var ge=ce.calcdata.cells.font,ve=ce.column.specIndex,be={size:y(ge.size,ve,de),color:y(ge.color,ve,de),family:y(ge.family,ve,de)};ce.rowNumber=ce.key,ce.align=y(ce.calcdata.cells.align,ve,de),ce.cellBorderWidth=y(ce.calcdata.cells.line.width,ve,de),ce.font=be})})(K);var te=function(se){var ce=se.selectAll("."+M.cn.cellRect).data(_.repeat,function(de){return de.keyWithinBlock});return ce.enter().append("rect").classed(M.cn.cellRect,!0),ce}(K);(function(se){se.attr("width",function(ce){return ce.column.columnWidth}).attr("stroke-width",function(ce){return ce.cellBorderWidth}).each(function(ce){var de=A.select(this);u.stroke(de,y(ce.calcdata.cells.line.color,ce.column.specIndex,ce.rowNumber)),u.fill(de,y(ce.calcdata.cells.fill.color,ce.column.specIndex,ce.rowNumber))})})(te);var ie=function(se){var ce=se.selectAll("."+M.cn.cellTextHolder).data(_.repeat,function(de){return de.keyWithinBlock});return ce.enter().append("g").classed(M.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ce}(K),ae=function(se){var ce=se.selectAll("."+M.cn.cellText).data(_.repeat,function(de){return de.keyWithinBlock});return ce.enter().append("text").classed(M.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){A.event.stopPropagation()}),ce}(ie);(function(se){se.each(function(ce){p.font(A.select(this),ce.font)})})(ae),m(ae,ne,$,V),R(K)}function m(V,ne,ee,$){V.text(function(J){var K=J.column.specIndex,te=J.rowNumber,ie=J.value,ae=typeof ie=="string",se=ae&&ie.match(/<br>/i),ce=!ae||se;J.mayHaveMarkup=ae&&ie.match(/[<&>]/);var de,ge=typeof(de=ie)=="string"&&de.match(M.latexCheck);J.latex=ge;var ve,be,me=ge?"":y(J.calcdata.cells.prefix,K,te)||"",Se=ge?"":y(J.calcdata.cells.suffix,K,te)||"",we=ge?null:y(J.calcdata.cells.format,K,te)||null,_e=me+(we?w(we)(J.value):J.value)+Se;if(J.wrappingNeeded=!J.wrapped&&!ce&&!ge&&(ve=x(_e)),J.cellHeightMayIncrease=se||ge||J.mayHaveMarkup||(ve===void 0?x(_e):ve),J.needsConvertToTspans=J.mayHaveMarkup||J.wrappingNeeded||J.latex,J.wrappingNeeded){var oe=(M.wrapSplitCharacter===" "?_e.replace(/<a href=/gi,"<a_href="):_e).split(M.wrapSplitCharacter),le=M.wrapSplitCharacter===" "?oe.map(function(pe){return pe.replace(/<a_href=/gi,"<a href=")}):oe;J.fragments=le.map(function(pe){return{text:pe,width:null}}),J.fragments.push({fragment:M.wrapSpacer,width:null}),be=le.join(M.lineBreaker)+M.lineBreaker+M.wrapSpacer}else delete J.fragments,be=_e;return be}).attr("dy",function(J){return J.needsConvertToTspans?0:"0.75em"}).each(function(J){var K=this,te=A.select(K),ie=J.wrappingNeeded?z:F;J.needsConvertToTspans?s.convertToTspans(te,$,ie(ee,K,ne,$,J)):A.select(K.parentNode).attr("transform",function(ae){return a(U(ae),M.cellPad)}).attr("text-anchor",function(ae){return{left:"start",center:"middle",right:"end"}[ae.align]})})}function x(V){return V.indexOf(M.wrapSplitCharacter)!==-1}function y(V,ne,ee){if(o.isArrayOrTypedArray(V)){var $=V[Math.min(ne,V.length-1)];return o.isArrayOrTypedArray($)?$[Math.min(ee,$.length-1)]:$}return V}function T(V,ne,ee){V.transition().ease(M.releaseTransitionEase).duration(M.releaseTransitionDuration).attr("transform",a(ne.x,ee))}function h(V){return V.type==="cells"}function E(V){return V.type==="header"}function k(V){return(V.rowBlocks.length?V.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(ne,ee){return ne+Z(ee,1/0)},0)}function L(V,ne,ee){var $=b(ne)[0];if($!==void 0){var J=$.rowBlocks,K=$.calcdata,te=j(J,J.length),ie=$.calcdata.groupHeight-k($),ae=K.scrollY=Math.max(0,Math.min(te-ie,K.scrollY)),se=function(ce,de,ge){for(var ve=[],be=0,me=0;me<ce.length;me++){for(var Se=ce[me],we=Se.rows,_e=0,oe=0;oe<we.length;oe++)_e+=we[oe].rowHeight;Se.allRowsHeight=_e,de<be+_e&&de+ge>be&&ve.push(me),be+=_e}return ve}(J,ae,ie);se.length===1&&(se[0]===J.length-1?se.unshift(se[0]-1):se.push(se[0]+1)),se[0]%2&&se.reverse(),ne.each(function(ce,de){ce.page=se[de],ce.scrollY=ae}),ne.attr("transform",function(ce){var de=j(ce.rowBlocks,ce.page)-ce.scrollY;return a(0,de)}),V&&(I(V,ee,ne,se,$.prevPages,$,0),I(V,ee,ne,se,$.prevPages,$,1),v(ee,V))}}function P(V,ne,ee,$){return function(J){var K=J.calcdata?J.calcdata:J,te=ne.filter(function(ce){return K.key===ce.key}),ie=ee||K.scrollbarState.dragMultiplier,ae=K.scrollY;K.scrollY=$===void 0?K.scrollY+ie*A.event.dy:$;var se=te.selectAll("."+M.cn.yColumn).selectAll("."+M.cn.columnBlock).filter(h);return L(V,se,te),K.scrollY===ae}}function I(V,ne,ee,$,J,K,te){$[te]!==J[te]&&(clearTimeout(K.currentRepaint[te]),K.currentRepaint[te]=setTimeout(function(){var ie=ee.filter(function(ae,se){return se===te&&$[se]!==J[se]});d(V,ne,ie,ee),J[te]=$[te]}))}function z(V,ne,ee,$){return function(){var J=A.select(ne.parentNode);J.each(function(K){var te=K.fragments;J.selectAll("tspan.line").each(function(be,me){te[me].width=this.getComputedTextLength()});var ie,ae,se=te[te.length-1].width,ce=te.slice(0,-1),de=[],ge=0,ve=K.column.columnWidth-2*M.cellPad;for(K.value="";ce.length;)ge+(ae=(ie=ce.shift()).width+se)>ve&&(K.value+=de.join(M.wrapSpacer)+M.lineBreaker,de=[],ge=0),de.push(ie.text),ge+=ae;ge&&(K.value+=de.join(M.wrapSpacer)),K.wrapped=!0}),J.selectAll("tspan.line").remove(),m(J.select("."+M.cn.cellText),ee,V,$),A.select(ne.parentNode.parentNode).call(R)}}function F(V,ne,ee,$,J){return function(){if(!J.settledY){var K=A.select(ne.parentNode),te=q(J),ie=J.key-te.firstRowIndex,ae=te.rows[ie].rowHeight,se=J.cellHeightMayIncrease?ne.parentNode.getBoundingClientRect().height+2*M.cellPad:ae,ce=Math.max(se,ae);ce-te.rows[ie].rowHeight&&(te.rows[ie].rowHeight=ce,V.selectAll("."+M.cn.columnCell).call(R),L(null,V.filter(h),0),v(ee,$,!0)),K.attr("transform",function(){var de=this,ge=de.parentNode.getBoundingClientRect(),ve=A.select(de.parentNode).select("."+M.cn.cellRect).node().getBoundingClientRect(),be=de.transform.baseVal.consolidate(),me=ve.top-ge.top+(be?be.matrix.f:M.cellPad);return a(U(J,A.select(de.parentNode).select("."+M.cn.cellTextHolder).node().getBoundingClientRect().width),me)}),J.settledY=!0}}}function U(V,ne){switch(V.align){case"left":default:return M.cellPad;case"right":return V.column.columnWidth-(ne||0)-M.cellPad;case"center":return(V.column.columnWidth-(ne||0))/2}}function R(V){V.attr("transform",function(ne){var ee=ne.rowBlocks[0].auxiliaryBlocks.reduce(function(J,K){return J+Z(K,1/0)},0),$=Z(q(ne),ne.key);return a(0,$+ee)}).selectAll("."+M.cn.cellRect).attr("height",function(ne){return(ee=q(ne),$=ne.key,ee.rows[$-ee.firstRowIndex]).rowHeight;var ee,$})}function j(V,ne){for(var ee=0,$=ne-1;$>=0;$--)ee+=B(V[$]);return ee}function Z(V,ne){for(var ee=0,$=0;$<V.rows.length&&V.rows[$].rowIndex<ne;$++)ee+=V.rows[$].rowHeight;return ee}function B(V){var ne=V.allRowsHeight;if(ne!==void 0)return ne;for(var ee=0,$=0;$<V.rows.length;$++)ee+=V.rows[$].rowHeight;return V.allRowsHeight=ee,ee}function q(V){return V.rowBlocks[V.page]}Y.exports=function(V,ne){var ee=!V._context.staticPlot,$=V._fullLayout._paper.selectAll("."+M.cn.table).data(ne.map(function(Se){var we=_.unwrap(Se).trace;return i(V,we)}),_.keyFun);$.exit().remove(),$.enter().append("g").classed(M.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),$.attr("width",function(Se){return Se.width+Se.size.l+Se.size.r}).attr("height",function(Se){return Se.height+Se.size.t+Se.size.b}).attr("transform",function(Se){return a(Se.translateX,Se.translateY)});var J=$.selectAll("."+M.cn.tableControlView).data(_.repeat,_.keyFun),K=J.enter().append("g").classed(M.cn.tableControlView,!0).style("box-sizing","content-box");if(ee){var te="onwheel"in document?"wheel":"mousewheel";K.on("mousemove",function(Se){J.filter(function(we){return Se===we}).call(v,V)}).on(te,function(Se){if(!Se.scrollbarState.wheeling){Se.scrollbarState.wheeling=!0;var we=Se.scrollY+A.event.deltaY;P(V,J,null,we)(Se)||(A.event.stopPropagation(),A.event.preventDefault()),Se.scrollbarState.wheeling=!1}}).call(v,V,!0)}J.attr("transform",function(Se){return a(Se.size.l,Se.size.t)});var ie=J.selectAll("."+M.cn.scrollBackground).data(_.repeat,_.keyFun);ie.enter().append("rect").classed(M.cn.scrollBackground,!0).attr("fill","none"),ie.attr("width",function(Se){return Se.width}).attr("height",function(Se){return Se.height}),J.each(function(Se){p.setClipUrl(A.select(this),g(V,Se),V)});var ae=J.selectAll("."+M.cn.yColumn).data(function(Se){return Se.columns},_.keyFun);ae.enter().append("g").classed(M.cn.yColumn,!0),ae.exit().remove(),ae.attr("transform",function(Se){return a(Se.x,0)}),ee&&ae.call(A.behavior.drag().origin(function(Se){return T(A.select(this),Se,-M.uplift),n(this),Se.calcdata.columnDragInProgress=!0,v(J.filter(function(we){return Se.calcdata.key===we.key}),V),Se}).on("drag",function(Se){var we=A.select(this),_e=function(oe){return(Se===oe?A.event.x:oe.x)+oe.columnWidth/2};Se.x=Math.max(-M.overdrag,Math.min(Se.calcdata.width+M.overdrag-Se.columnWidth,A.event.x)),b(ae).filter(function(oe){return oe.calcdata.key===Se.calcdata.key}).sort(function(oe,le){return _e(oe)-_e(le)}).forEach(function(oe,le){oe.xIndex=le,oe.x=Se===oe?oe.x:oe.xScale(oe)}),ae.filter(function(oe){return Se!==oe}).transition().ease(M.transitionEase).duration(M.transitionDuration).attr("transform",function(oe){return a(oe.x,0)}),we.call(r).attr("transform",a(Se.x,-M.uplift))}).on("dragend",function(Se){var we=A.select(this),_e=Se.calcdata;Se.x=Se.xScale(Se),Se.calcdata.columnDragInProgress=!1,T(we,Se,0),function(oe,le,pe){var Ee=le.gdColumnsOriginalOrder;le.gdColumns.sort(function(Te,Me){return pe[Ee.indexOf(Te)]-pe[Ee.indexOf(Me)]}),le.columnorder=pe,oe.emit("plotly_restyle")}(V,_e,_e.columns.map(function(oe){return oe.xIndex}))})),ae.each(function(Se){p.setClipUrl(A.select(this),f(V,Se),V)});var se=ae.selectAll("."+M.cn.columnBlock).data(l.splitToPanels,_.keyFun);se.enter().append("g").classed(M.cn.columnBlock,!0).attr("id",function(Se){return Se.key}),se.style("cursor",function(Se){return Se.dragHandle?"ew-resize":Se.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ce=se.filter(E),de=se.filter(h);ee&&de.call(A.behavior.drag().origin(function(Se){return A.event.stopPropagation(),Se}).on("drag",P(V,J,-1)).on("dragend",function(){})),d(V,J,ce,se),d(V,J,de,se);var ge=J.selectAll("."+M.cn.scrollAreaClip).data(_.repeat,_.keyFun);ge.enter().append("clipPath").classed(M.cn.scrollAreaClip,!0).attr("id",function(Se){return g(V,Se)});var ve=ge.selectAll("."+M.cn.scrollAreaClipRect).data(_.repeat,_.keyFun);ve.enter().append("rect").classed(M.cn.scrollAreaClipRect,!0).attr("x",-M.overdrag).attr("y",-M.uplift).attr("fill","none"),ve.attr("width",function(Se){return Se.width+2*M.overdrag}).attr("height",function(Se){return Se.height+M.uplift}),ae.selectAll("."+M.cn.columnBoundary).data(_.repeat,_.keyFun).enter().append("g").classed(M.cn.columnBoundary,!0);var be=ae.selectAll("."+M.cn.columnBoundaryClippath).data(_.repeat,_.keyFun);be.enter().append("clipPath").classed(M.cn.columnBoundaryClippath,!0),be.attr("id",function(Se){return f(V,Se)});var me=be.selectAll("."+M.cn.columnBoundaryRect).data(_.repeat,_.keyFun);me.enter().append("rect").classed(M.cn.columnBoundaryRect,!0).attr("fill","none"),me.attr("width",function(Se){return Se.columnWidth+2*c(Se)}).attr("height",function(Se){return Se.calcdata.height+2*c(Se)+M.uplift}).attr("x",function(Se){return-c(Se)}).attr("y",function(Se){return-c(Se)}),L(null,de,J)}},40516:function(Y,O,e){var M=e(21776).Ks,A=e(21776).Gw,o=e(49084),w=e(86968).u,_=e(74996),p=e(424),s=e(32984),n=e(92880).extendFlat,a=e(98192).c;Y.exports={labels:p.labels,parents:p.parents,values:p.values,branchvalues:p.branchvalues,count:p.count,level:p.level,maxdepth:p.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:n({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:p.marker.colors,pattern:a,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:p.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},o("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:n({},_.textfont,{}),editType:"calc"},text:_.text,textinfo:p.textinfo,texttemplate:A({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:_.hovertext,hoverinfo:p.hoverinfo,hovertemplate:M({},{keys:s.eventDataKeys}),textfont:_.textfont,insidetextfont:_.insidetextfont,outsidetextfont:n({},_.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:_.sort,root:p.root,domain:w({name:"treemap",trace:!0,editType:"calc"})}},79516:function(Y,O,e){var M=e(7316);O.name="treemap",O.plot=function(A,o,w,_){M.plotBasePlot(O.name,A,o,w,_)},O.clean=function(A,o,w,_){M.cleanBasePlot(O.name,A,o,w,_)}},97840:function(Y,O,e){var M=e(3776);O.r=function(A,o){return M.calc(A,o)},O.q=function(A){return M._runCrossTraceCalc("treemap",A)}},32984:function(Y){Y.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},34092:function(Y,O,e){var M=e(3400),A=e(40516),o=e(76308),w=e(86968).Q,_=e(31508).handleText,p=e(78048).TEXTPAD,s=e(74174).handleMarkerDefaults,n=e(8932),a=n.hasColorscale,r=n.handleDefaults;Y.exports=function(i,l,u,c){function g(T,h){return M.coerce(i,l,A,T,h)}var f=g("labels"),b=g("parents");if(f&&f.length&&b&&b.length){var v=g("values");v&&v.length?g("branchvalues"):g("count"),g("level"),g("maxdepth"),g("tiling.packing")==="squarify"&&g("tiling.squarifyratio"),g("tiling.flip"),g("tiling.pad");var d=g("text");g("texttemplate"),l.texttemplate||g("textinfo",M.isArrayOrTypedArray(d)?"text+label":"label"),g("hovertext"),g("hovertemplate");var m=g("pathbar.visible");_(i,l,c,g,"auto",{hasPathbar:m,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),g("textposition");var x=l.textposition.indexOf("bottom")!==-1;s(i,l,c,g),(l._hasColorscale=a(i,"marker","colors")||(i.marker||{}).coloraxis)?r(i,l,c,g,{prefix:"marker.",cLetter:"c"}):g("marker.depthfade",!(l.marker.colors||[]).length);var y=2*l.textfont.size;g("marker.pad.t",x?y/4:y),g("marker.pad.l",y/4),g("marker.pad.r",y/4),g("marker.pad.b",x?y:y/4),g("marker.cornerradius"),l._hovered={marker:{line:{width:2,color:o.contrast(c.paper_bgcolor)}}},m&&(g("pathbar.thickness",l.pathbar.textfont.size+2*p),g("pathbar.side"),g("pathbar.edgeshape")),g("sort"),g("root.color"),w(l,c,g),l._length=null}else l.visible=!1}},95808:function(Y,O,e){var M=e(33428),A=e(78176),o=e(82744).clearMinTextSize,w=e(60100).resizeText,_=e(52960);Y.exports=function(p,s,n,a,r){var i,l,u=r.type,c=r.drawDescendants,g=p._fullLayout,f=g["_"+u+"layer"],b=!n;o(u,g),(i=f.selectAll("g.trace."+u).data(s,function(v){return v[0].trace.uid})).enter().append("g").classed("trace",!0).classed(u,!0),i.order(),!g.uniformtext.mode&&A.hasTransition(n)?(a&&(l=a()),M.transition().duration(n.duration).ease(n.easing).each("end",function(){l&&l()}).each("interrupt",function(){l&&l()}).each(function(){f.selectAll("g.trace").each(function(v){_(p,v,this,n,c)})})):(i.each(function(v){_(p,v,this,n,c)}),g.uniformtext.mode&&w(p,f.selectAll(".trace"),u)),b&&i.exit().remove()}},27336:function(Y,O,e){var M=e(33428),A=e(3400),o=e(43616),w=e(72736),_=e(13832),p=e(66192).styleOne,s=e(32984),n=e(78176),a=e(45716),r=!0;Y.exports=function(i,l,u,c,g){var f=g.barDifY,b=g.width,v=g.height,d=g.viewX,m=g.viewY,x=g.pathSlice,y=g.toMoveInsideSlice,T=g.strTransform,h=g.hasTransition,E=g.handleSlicesExit,k=g.makeUpdateSliceInterpolator,L=g.makeUpdateTextInterpolator,P={},I=i._context.staticPlot,z=i._fullLayout,F=l[0],U=F.trace,R=F.hierarchy,j=b/U._entryDepth,Z=n.listPath(u.data,"id"),B=_(R.copy(),[b,v],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(B=B.filter(function(V){var ne=Z.indexOf(V.data.id);return ne!==-1&&(V.x0=j*ne,V.x1=j*(ne+1),V.y0=f,V.y1=f+v,V.onPathbar=!0,!0)})).reverse(),(c=c.data(B,n.getPtId)).enter().append("g").classed("pathbar",!0),E(c,r,P,[b,v],x),c.order();var q=c;h&&(q=q.transition().each("end",function(){var V=M.select(this);n.setSliceCursor(V,i,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),q.each(function(V){V._x0=d(V.x0),V._x1=d(V.x1),V._y0=m(V.y0),V._y1=m(V.y1),V._hoverX=d(V.x1-Math.min(b,v)/2),V._hoverY=m(V.y1-v/2);var ne=M.select(this),ee=A.ensureSingle(ne,"path","surface",function(te){te.style("pointer-events",I?"none":"all")});h?ee.transition().attrTween("d",function(te){var ie=k(te,r,P,[b,v]);return function(ae){return x(ie(ae))}}):ee.attr("d",x),ne.call(a,u,i,l,{styleOne:p,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,i,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:i._transitioning}),ee.call(p,V,U,i,{hovered:!1}),V._text=(n.getPtLabel(V)||"").split("<br>").join(" ")||"";var $=A.ensureSingle(ne,"g","slicetext"),J=A.ensureSingle($,"text","",function(te){te.attr("data-notex",1)}),K=A.ensureUniformFontSize(i,n.determineTextFont(U,V,z.font,{onPathbar:!0}));J.text(V._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(o.font,K).call(w.convertToTspans,i),V.textBB=o.bBox(J.node()),V.transform=y(V,{fontSize:K.size,onPathbar:!0}),V.transform.fontSize=K.size,h?J.transition().attrTween("transform",function(te){var ie=L(te,r,P,[b,v]);return function(ae){return T(ie(ae))}}):J.attr("transform",T(V))})}},76477:function(Y,O,e){var M=e(33428),A=e(3400),o=e(43616),w=e(72736),_=e(13832),p=e(66192).styleOne,s=e(32984),n=e(78176),a=e(45716),r=e(96488).formatSliceLabel,i=!1;Y.exports=function(l,u,c,g,f){var b=f.width,v=f.height,d=f.viewX,m=f.viewY,x=f.pathSlice,y=f.toMoveInsideSlice,T=f.strTransform,h=f.hasTransition,E=f.handleSlicesExit,k=f.makeUpdateSliceInterpolator,L=f.makeUpdateTextInterpolator,P=f.prevEntry,I=l._context.staticPlot,z=l._fullLayout,F=u[0].trace,U=F.textposition.indexOf("left")!==-1,R=F.textposition.indexOf("right")!==-1,j=F.textposition.indexOf("bottom")!==-1,Z=!j&&!F.marker.pad.t||j&&!F.marker.pad.b,B=_(c,[b,v],{packing:F.tiling.packing,squarifyratio:F.tiling.squarifyratio,flipX:F.tiling.flip.indexOf("x")>-1,flipY:F.tiling.flip.indexOf("y")>-1,pad:{inner:F.tiling.pad,top:F.marker.pad.t,left:F.marker.pad.l,right:F.marker.pad.r,bottom:F.marker.pad.b}}).descendants(),q=1/0,V=-1/0;B.forEach(function(K){var te=K.depth;te>=F._maxDepth?(K.x0=K.x1=(K.x0+K.x1)/2,K.y0=K.y1=(K.y0+K.y1)/2):(q=Math.min(q,te),V=Math.max(V,te))}),g=g.data(B,n.getPtId),F._maxVisibleLayers=isFinite(V)?V-q+1:0,g.enter().append("g").classed("slice",!0),E(g,i,{},[b,v],x),g.order();var ne=null;if(h&&P){var ee=n.getPtId(P);g.each(function(K){ne===null&&n.getPtId(K)===ee&&(ne={x0:K.x0,x1:K.x1,y0:K.y0,y1:K.y1})})}var $=function(){return ne||{x0:0,x1:b,y0:0,y1:v}},J=g;return h&&(J=J.transition().each("end",function(){var K=M.select(this);n.setSliceCursor(K,l,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),J.each(function(K){var te=n.isHeader(K,F);K._x0=d(K.x0),K._x1=d(K.x1),K._y0=m(K.y0),K._y1=m(K.y1),K._hoverX=d(K.x1-F.marker.pad.r),K._hoverY=m(j?K.y1-F.marker.pad.b/2:K.y0+F.marker.pad.t/2);var ie=M.select(this),ae=A.ensureSingle(ie,"path","surface",function(ge){ge.style("pointer-events",I?"none":"all")});h?ae.transition().attrTween("d",function(ge){var ve=k(ge,i,$(),[b,v]);return function(be){return x(ve(be))}}):ae.attr("d",x),ie.call(a,c,l,u,{styleOne:p,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,l,{isTransitioning:l._transitioning}),ae.call(p,K,F,l,{hovered:!1}),K.x0===K.x1||K.y0===K.y1?K._text="":K._text=te?Z?"":n.getPtLabel(K)||"":r(K,c,F,u,z)||"";var se=A.ensureSingle(ie,"g","slicetext"),ce=A.ensureSingle(se,"text","",function(ge){ge.attr("data-notex",1)}),de=A.ensureUniformFontSize(l,n.determineTextFont(F,K,z.font));ce.text(K._text||" ").classed("slicetext",!0).attr("text-anchor",R?"end":U||te?"start":"middle").call(o.font,de).call(w.convertToTspans,l),K.textBB=o.bBox(ce.node()),K.transform=y(K,{fontSize:de.size,isHeader:te}),K.transform.fontSize=de.size,h?ce.transition().attrTween("transform",function(ge){var ve=L(ge,i,$(),[b,v]);return function(be){return T(ve(be))}}):ce.attr("transform",T(K))}),ne}},83024:function(Y){Y.exports=function O(e,M,A){var o;A.swapXY&&(o=e.x0,e.x0=e.y0,e.y0=o,o=e.x1,e.x1=e.y1,e.y1=o),A.flipX&&(o=e.x0,e.x0=M[0]-e.x1,e.x1=M[0]-o),A.flipY&&(o=e.y0,e.y0=M[1]-e.y1,e.y1=M[1]-o);var w=e.children;if(w)for(var _=0;_<w.length;_++)O(w[_],M,A)}},31991:function(Y,O,e){Y.exports={moduleType:"trace",name:"treemap",basePlotModule:e(79516),categories:[],animatable:!0,attributes:e(40516),layoutAttributes:e(45392),supplyDefaults:e(34092),supplyLayoutDefaults:e(77480),calc:e(97840).r,crossTraceCalc:e(97840).q,plot:e(53264),style:e(66192).style,colorbar:e(5528),meta:{}}},45392:function(Y){Y.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77480:function(Y,O,e){var M=e(3400),A=e(45392);Y.exports=function(o,w){function _(p,s){return M.coerce(o,w,A,p,s)}_("treemapcolorway",w.colorway),_("extendtreemapcolors")}},13832:function(Y,O,e){var M=e(74148),A=e(83024);Y.exports=function(o,w,_){var p,s=_.flipX,n=_.flipY,a=_.packing==="dice-slice",r=_.pad[n?"bottom":"top"],i=_.pad[s?"right":"left"],l=_.pad[s?"left":"right"],u=_.pad[n?"top":"bottom"];a&&(p=i,i=r,r=p,p=l,l=u,u=p);var c=M.treemap().tile(function(g,f){switch(g){case"squarify":return M.treemapSquarify.ratio(f);case"binary":return M.treemapBinary;case"dice":return M.treemapDice;case"slice":return M.treemapSlice;default:return M.treemapSliceDice}}(_.packing,_.squarifyratio)).paddingInner(_.pad.inner).paddingLeft(i).paddingRight(l).paddingTop(r).paddingBottom(u).size(a?[w[1],w[0]]:w)(o);return(a||s||n)&&A(c,w,{swapXY:a,flipX:s,flipY:n}),c}},53264:function(Y,O,e){var M=e(95808),A=e(76477);Y.exports=function(o,w,_,p){return M(o,w,_,p,{type:"treemap",drawDescendants:A})}},52960:function(Y,O,e){var M=e(33428),A=e(67756).qy,o=e(78176),w=e(3400),_=e(78048).TEXTPAD,p=e(98184).toMoveInsideBar,s=e(82744).recordMinTextSize,n=e(32984),a=e(27336);function r(i){return o.isHierarchyRoot(i)?"":o.getPtId(i)}Y.exports=function(i,l,u,c,g){var f=i._fullLayout,b=l[0],v=b.trace,d=v.type==="icicle",m=b.hierarchy,x=o.findEntryWithLevel(m,v.level),y=M.select(u),T=y.selectAll("g.pathbar"),h=y.selectAll("g.slice");if(!x)return T.remove(),void h.remove();var E=o.isHierarchyRoot(x),k=!f.uniformtext.mode&&o.hasTransition(c),L=o.getMaxDepth(v),P=f._size,I=v.domain,z=P.w*(I.x[1]-I.x[0]),F=P.h*(I.y[1]-I.y[0]),U=z,R=v.pathbar.thickness,j=v.marker.line.width+n.gapWithPathbar,Z=v.pathbar.visible?v.pathbar.side.indexOf("bottom")>-1?F+j:-(R+j):0,B={x0:U,x1:U,y0:Z,y1:Z+R},q=function(ke,ze,Re){var Oe=v.tiling.pad,Ve=function(rt){return rt-Oe<=ze.x0},qe=function(rt){return rt+Oe>=ze.x1},Je=function(rt){return rt-Oe<=ze.y0},ot=function(rt){return rt+Oe>=ze.y1};return ke.x0===ze.x0&&ke.x1===ze.x1&&ke.y0===ze.y0&&ke.y1===ze.y1?{x0:ke.x0,x1:ke.x1,y0:ke.y0,y1:ke.y1}:{x0:Ve(ke.x0-Oe)?0:qe(ke.x0-Oe)?Re[0]:ke.x0,x1:Ve(ke.x1+Oe)?0:qe(ke.x1+Oe)?Re[0]:ke.x1,y0:Je(ke.y0-Oe)?0:ot(ke.y0-Oe)?Re[1]:ke.y0,y1:Je(ke.y1+Oe)?0:ot(ke.y1+Oe)?Re[1]:ke.y1}},V=null,ne={},ee={},$=null,J=function(ke,ze){return ze?ne[r(ke)]:ee[r(ke)]};b.hasMultipleRoots&&E&&L++,v._maxDepth=L,v._backgroundColor=f.paper_bgcolor,v._entryDepth=x.data.depth,v._atRootLevel=E;var K=-z/2+P.l+P.w*(I.x[1]+I.x[0])/2,te=-F/2+P.t+P.h*(1-(I.y[1]+I.y[0])/2),ie=function(ke){return K+ke},ae=function(ke){return te+ke},se=ae(0),ce=ie(0),de=function(ke){return ce+ke},ge=function(ke){return se+ke};function ve(ke,ze){return ke+","+ze}var be=de(0),me=function(ke){ke.x=Math.max(be,ke.x)},Se=v.pathbar.edgeshape,we=v[d?"tiling":"marker"].pad,_e=function(ke){return v.textposition.indexOf(ke)!==-1},oe=_e("top"),le=_e("left"),pe=_e("right"),Ee=_e("bottom"),Te=function(ke,ze){var Re=ke.x0,Oe=ke.x1,Ve=ke.y0,qe=ke.y1,Je=ke.textBB,ot=oe||ze.isHeader&&!Ee?"start":Ee?"end":"middle",rt=_e("right"),dt=_e("left")||ze.onPathbar?-1:rt?1:0;if(ze.isHeader){if((Re+=(d?we:we.l)-_)>=(Oe-=(d?we:we.r)-_)){var _t=(Re+Oe)/2;Re=_t,Oe=_t}var yt;Ee?Ve<(yt=qe-(d?we:we.b))&&yt<qe&&(Ve=yt):Ve<(yt=Ve+(d?we:we.t))&&yt<qe&&(qe=yt)}var et=p(Re,Oe,Ve,qe,Je,{isHorizontal:!1,constrained:!0,angle:0,anchor:ot,leftToRight:dt});return et.fontSize=ze.fontSize,et.targetX=ie(et.targetX),et.targetY=ae(et.targetY),isNaN(et.targetX)||isNaN(et.targetY)?{}:(Re!==Oe&&Ve!==qe&&s(v.type,et,f),{scale:et.scale,rotate:et.rotate,textX:et.textX,textY:et.textY,anchorX:et.anchorX,anchorY:et.anchorY,targetX:et.targetX,targetY:et.targetY})},Me=function(ke,ze){for(var Re,Oe=0,Ve=ke;!Re&&Oe<L;)Oe++,(Ve=Ve.parent)?Re=J(Ve,ze):Oe=L;return Re||{}},Le=function(ke,ze,Re,Oe,Ve){var qe,Je=J(ke,ze);if(Je)qe=Je;else if(ze)qe=B;else if(V)if(ke.parent){var ot=$||Re;ot&&!ze?qe=q(ke,ot,Oe):(qe={},w.extendFlat(qe,Me(ke,ze)))}else qe=w.extendFlat({},ke),d&&(Ve.orientation==="h"?Ve.flipX?qe.x0=ke.x1:qe.x1=0:Ve.flipY?qe.y0=ke.y1:qe.y1=0);else qe={};return A(qe,{x0:ke.x0,x1:ke.x1,y0:ke.y0,y1:ke.y1})},Ie=function(ke,ze,Re,Oe){var Ve=J(ke,ze),qe={},Je=function(rt,dt,_t,yt){if(dt)return ne[r(m)]||B;var et=ee[v.level]||_t;return function(nt){return nt.data.depth-x.data.depth<L}(rt)?q(rt,et,yt):{}}(ke,ze,Re,Oe);w.extendFlat(qe,{transform:Te({x0:Je.x0,x1:Je.x1,y0:Je.y0,y1:Je.y1,textBB:ke.textBB,_text:ke._text},{isHeader:o.isHeader(ke,v)})}),Ve?qe=Ve:ke.parent&&w.extendFlat(qe,Me(ke,ze));var ot=ke.transform;return ke.x0!==ke.x1&&ke.y0!==ke.y1&&s(v.type,ot,f),A(qe,{transform:{scale:ot.scale,rotate:ot.rotate,textX:ot.textX,textY:ot.textY,anchorX:ot.anchorX,anchorY:ot.anchorY,targetX:ot.targetX,targetY:ot.targetY}})},he=function(ke,ze,Re,Oe,Ve){var qe=Oe[0],Je=Oe[1];k?ke.exit().transition().each(function(){var ot=M.select(this);ot.select("path.surface").transition().attrTween("d",function(rt){var dt=function(_t,yt,et,nt){var At,Rt=J(_t,yt);if(yt)At=B;else{var Ft=J(x,yt);At=Ft?q(_t,Ft,nt):{}}return A(Rt,At)}(rt,ze,0,[qe,Je]);return function(_t){return Ve(dt(_t))}}),ot.select("g.slicetext").attr("opacity",0)}).remove():ke.exit().remove()},xe=function(ke){var ze=ke.transform;return ke.x0!==ke.x1&&ke.y0!==ke.y1&&s(v.type,ze,f),w.getTextTransform({textX:ze.textX,textY:ze.textY,anchorX:ze.anchorX,anchorY:ze.anchorY,targetX:ze.targetX,targetY:ze.targetY,scale:ze.scale,rotate:ze.rotate})};k&&(T.each(function(ke){ne[r(ke)]={x0:ke.x0,x1:ke.x1,y0:ke.y0,y1:ke.y1},ke.transform&&(ne[r(ke)].transform={textX:ke.transform.textX,textY:ke.transform.textY,anchorX:ke.transform.anchorX,anchorY:ke.transform.anchorY,targetX:ke.transform.targetX,targetY:ke.transform.targetY,scale:ke.transform.scale,rotate:ke.transform.rotate})}),h.each(function(ke){ee[r(ke)]={x0:ke.x0,x1:ke.x1,y0:ke.y0,y1:ke.y1},ke.transform&&(ee[r(ke)].transform={textX:ke.transform.textX,textY:ke.transform.textY,anchorX:ke.transform.anchorX,anchorY:ke.transform.anchorY,targetX:ke.transform.targetX,targetY:ke.transform.targetY,scale:ke.transform.scale,rotate:ke.transform.rotate}),!V&&o.isEntry(ke)&&(V=ke)})),$=g(i,l,x,h,{width:z,height:F,viewX:ie,viewY:ae,pathSlice:function(ke){var ze=ie(ke.x0),Re=ie(ke.x1),Oe=ae(ke.y0),Ve=ae(ke.y1),qe=Re-ze,Je=Ve-Oe;if(!qe||!Je)return"";var ot=v.marker.cornerradius||0,rt=Math.min(ot,qe/2,Je/2);rt&&ke.data&&ke.data.data&&ke.data.data.label&&(oe&&(rt=Math.min(rt,we.t)),le&&(rt=Math.min(rt,we.l)),pe&&(rt=Math.min(rt,we.r)),Ee&&(rt=Math.min(rt,we.b)));var dt=function(_t,yt){return rt?"a"+ve(rt,rt)+" 0 0 1 "+ve(_t,yt):""};return"M"+ve(ze,Oe+rt)+dt(rt,-rt)+"L"+ve(Re-rt,Oe)+dt(rt,rt)+"L"+ve(Re,Ve-rt)+dt(-rt,rt)+"L"+ve(ze+rt,Ve)+dt(-rt,-rt)+"Z"},toMoveInsideSlice:Te,prevEntry:V,makeUpdateSliceInterpolator:Le,makeUpdateTextInterpolator:Ie,handleSlicesExit:he,hasTransition:k,strTransform:xe}),v.pathbar.visible?a(i,l,x,T,{barDifY:Z,width:U,height:R,viewX:de,viewY:ge,pathSlice:function(ke){var ze=de(Math.max(Math.min(ke.x0,ke.x0),0)),Re=de(Math.min(Math.max(ke.x1,ke.x1),U)),Oe=ge(ke.y0),Ve=ge(ke.y1),qe=R/2,Je={},ot={};Je.x=ze,ot.x=Re,Je.y=ot.y=(Oe+Ve)/2;var rt={x:ze,y:Oe},dt={x:Re,y:Oe},_t={x:Re,y:Ve},yt={x:ze,y:Ve};return Se===">"?(rt.x-=qe,dt.x-=qe,_t.x-=qe,yt.x-=qe):Se==="/"?(_t.x-=qe,yt.x-=qe,Je.x-=qe/2,ot.x-=qe/2):Se==="\\"?(rt.x-=qe,dt.x-=qe,Je.x-=qe/2,ot.x-=qe/2):Se==="<"&&(Je.x-=qe,ot.x-=qe),me(rt),me(yt),me(Je),me(dt),me(_t),me(ot),"M"+ve(rt.x,rt.y)+"L"+ve(dt.x,dt.y)+"L"+ve(ot.x,ot.y)+"L"+ve(_t.x,_t.y)+"L"+ve(yt.x,yt.y)+"L"+ve(Je.x,Je.y)+"Z"},toMoveInsideSlice:Te,makeUpdateSliceInterpolator:Le,makeUpdateTextInterpolator:Ie,handleSlicesExit:he,hasTransition:k,strTransform:xe}):T.remove()}},66192:function(Y,O,e){var M=e(33428),A=e(76308),o=e(3400),w=e(78176),_=e(82744).resizeText,p=e(60404);function s(n,a,r,i,l){var u,c,g=(l||{}).hovered,f=a.data.data,b=f.i,v=f.color,d=w.isHierarchyRoot(a),m=1;if(g)u=r._hovered.marker.line.color,c=r._hovered.marker.line.width;else if(d&&v===r.root.color)m=100,u="rgba(0,0,0,0)",c=0;else if(u=o.castOption(r,b,"marker.line.color")||A.defaultLine,c=o.castOption(r,b,"marker.line.width")||0,!r._hasColorscale&&!a.onPathbar){var x=r.marker.depthfade;if(x){var y,T=A.combine(A.addOpacity(r._backgroundColor,.75),v);if(x===!0){var h=w.getMaxDepth(r);y=isFinite(h)?w.isLeaf(a)?0:r._maxVisibleLayers-(a.data.depth-r._entryDepth):a.data.height+1}else y=a.data.depth-r._entryDepth,r._atRootLevel||y++;if(y>0)for(var E=0;E<y;E++){var k=.5*E/y;v=A.combine(A.addOpacity(T,k),v)}}}n.call(p,a,r,i,v).style("stroke-width",c).call(A.stroke,u).style("opacity",m)}Y.exports={style:function(n){var a=n._fullLayout._treemaplayer.selectAll(".trace");_(n,a,"treemap"),a.each(function(r){var i=M.select(this),l=r[0].trace;i.style("opacity",l.opacity),i.selectAll("path.surface").each(function(u){M.select(this).call(s,u,l,n,{hovered:!1})})})},styleOne:s}},13988:function(Y,O,e){var M=e(63188),A=e(92880).extendFlat,o=e(29736).axisHoverFormat;Y.exports={y:M.y,x:M.x,x0:M.x0,y0:M.y0,xhoverformat:o("x"),yhoverformat:o("y"),name:A({},M.name,{}),orientation:A({},M.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:M.fillcolor,points:A({},M.boxpoints,{}),jitter:A({},M.jitter,{}),pointpos:A({},M.pointpos,{}),width:A({},M.width,{}),marker:M.marker,text:M.text,hovertext:M.hovertext,hovertemplate:M.hovertemplate,quartilemethod:M.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:M.selected,unselected:M.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},67064:function(Y,O,e){var M=e(3400),A=e(54460),o=e(62555),w=e(63800),_=e(39032).BADNUM;function p(n,a,r){var i=a.max-a.min;if(!i)return n.bandwidth?n.bandwidth:0;if(n.bandwidth)return Math.max(n.bandwidth,i/1e4);var l=r.length,u=M.stdev(r,l-1,a.mean);return Math.max(function(c,g,f){return 1.059*Math.min(g,f/1.349)*Math.pow(c,-.2)}(l,u,a.q3-a.q1),i/100)}function s(n,a,r,i){var l,u=n.spanmode,c=n.span||[],g=[a.min,a.max],f=[a.min-2*i,a.max+2*i];function b(d){var m=c[d],x=r.type==="multicategory"?r.r2c(m):r.d2c(m,0,n[a.valLetter+"calendar"]);return x===_?f[d]:x}var v={type:"linear",range:l=u==="soft"?f:u==="hard"?g:[b(0),b(1)]};return A.setConvert(v),v.cleanRange(),l}Y.exports=function(n,a){var r=o(n,a);if(r[0].t.empty)return r;for(var i=n._fullLayout,l=A.getFromId(n,a[a.orientation==="h"?"xaxis":"yaxis"]),u=1/0,c=-1/0,g=0,f=0,b=0;b<r.length;b++){var v=r[b],d=v.pts.map(w.extractVal),m=v.bandwidth=p(a,v,d),x=v.span=s(a,v,l,m);if(v.min===v.max&&m===0)x=v.span=[v.min,v.max],v.density=[{v:1,t:x[0]}],v.bandwidth=m,g=Math.max(g,1);else{var y=x[1]-x[0],T=Math.ceil(y/(m/3)),h=y/T;if(!isFinite(h)||!isFinite(T))return M.error("Something went wrong with computing the violin span"),r[0].t.empty=!0,r;var E=w.makeKDE(v,a,d);v.density=new Array(T);for(var k=0,L=x[0];L<x[1]+h/2;k++,L+=h){var P=E(L);v.density[k]={v:P,t:L},g=Math.max(g,P)}}f=Math.max(f,d.length),u=Math.min(u,x[0]),c=Math.max(c,x[1])}var I=A.findExtremes(l,[u,c],{padded:!0});if(a._extremes[l._id]=I,a.width)r[0].t.maxKDE=g;else{var z=i._violinScaleGroupStats,F=a.scalegroup,U=z[F];U?(U.maxKDE=Math.max(U.maxKDE,g),U.maxCount=Math.max(U.maxCount,f)):z[F]={maxKDE:g,maxCount:f}}return r[0].t.labels.kde=M._(n,"kde:"),r}},14348:function(Y,O,e){var M=e(96404).setPositionOffset,A=["v","h"];Y.exports=function(o,w){for(var _=o.calcdata,p=w.xaxis,s=w.yaxis,n=0;n<A.length;n++){for(var a=A[n],r=a==="h"?s:p,i=[],l=0;l<_.length;l++){var u=_[l],c=u[0].t,g=u[0].trace;g.visible!==!0||g.type!=="violin"||c.empty||g.orientation!==a||g.xaxis!==p._id||g.yaxis!==s._id||i.push(l)}M("violin",o,i,r)}}},36240:function(Y,O,e){var M=e(3400),A=e(76308),o=e(90624),w=e(13988);Y.exports=function(_,p,s,n){function a(y,T){return M.coerce(_,p,w,y,T)}function r(y,T){return M.coerce2(_,p,w,y,T)}if(o.handleSampleDefaults(_,p,a,n),p.visible!==!1){a("bandwidth"),a("side"),a("width")||(a("scalegroup",p.name),a("scalemode"));var i,l=a("span");Array.isArray(l)&&(i="manual"),a("spanmode",i);var u=a("line.color",(_.marker||{}).color||s),c=a("line.width"),g=a("fillcolor",A.addOpacity(p.line.color,.5));o.handlePointsDefaults(_,p,a,{prefix:""});var f=r("box.width"),b=r("box.fillcolor",g),v=r("box.line.color",u),d=r("box.line.width",c);a("box.visible",!!(f||b||v||d))||(p.box={visible:!1});var m=r("meanline.color",u),x=r("meanline.width",c);a("meanline.visible",!!(m||x))||(p.meanline={visible:!1}),a("quartilemethod")}}},63800:function(Y,O,e){var M=e(3400),A=function(o){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*o*o)};O.makeKDE=function(o,w,_){var p=_.length,s=A,n=o.bandwidth,a=1/(p*n);return function(r){for(var i=0,l=0;l<p;l++)i+=s((r-_[l])/n);return a*i}},O.getPositionOnKdePath=function(o,w,_){var p,s;w.orientation==="h"?(p="y",s="x"):(p="x",s="y");var n=M.findPointOnPath(o.path,_,s,{pathLength:o.pathLength}),a=o.posCenterPx,r=n[p];return[r,w.side==="both"?2*a-r:a]},O.getKdeValue=function(o,w,_){var p=o.pts.map(O.extractVal);return O.makeKDE(o,w,p)(_)/o.posDensityScale},O.extractVal=function(o){return o.v}},78e3:function(Y,O,e){var M=e(76308),A=e(3400),o=e(54460),w=e(27576),_=e(63800);Y.exports=function(p,s,n,a,r){r||(r={});var i,l,u=r.hoverLayer,c=p.cd,g=c[0].trace,f=g.hoveron,b=f.indexOf("violins")!==-1,v=f.indexOf("kde")!==-1,d=[];if(b||v){var m=w.hoverOnBoxes(p,s,n,a);if(v&&m.length>0){var x,y,T,h,E,k=p.xa,L=p.ya;g.orientation==="h"?(E=s,x="y",T=L,y="x",h=k):(E=n,x="x",T=k,y="y",h=L);var P=c[p.index];if(E>=P.span[0]&&E<=P.span[1]){var I=A.extendFlat({},p),z=h.c2p(E,!0),F=_.getKdeValue(P,g,E),U=_.getPositionOnKdePath(P,g,z),R=T._offset,j=T._length;I[x+"0"]=U[0],I[x+"1"]=U[1],I[y+"0"]=I[y+"1"]=z,I[y+"Label"]=y+": "+o.hoverLabelText(h,E,g[y+"hoverformat"])+", "+c[0].t.labels.kde+" "+F.toFixed(3);for(var Z=0,B=0;B<m.length;B++)if(m[B].attr==="med"){Z=B;break}I.spikeDistance=m[Z].spikeDistance;var q=x+"Spike";I[q]=m[Z][q],m[Z].spikeDistance=void 0,m[Z][q]=void 0,I.hovertemplate=!1,d.push(I),(l={})[x+"1"]=A.constrain(R+U[0],R,R+j),l[x+"2"]=A.constrain(R+U[1],R,R+j),l[y+"1"]=l[y+"2"]=h._offset+z}}b&&(d=d.concat(m))}f.indexOf("points")!==-1&&(i=w.hoverOnPoints(p,s,n));var V=u.selectAll(".violinline-"+g.uid).data(l?[0]:[]);return V.enter().append("line").classed("violinline-"+g.uid,!0).attr("stroke-width",1.5),V.exit().remove(),V.attr(l).call(M.stroke,p.color),a==="closest"?i?[i]:d:(i&&d.push(i),d)}},22869:function(Y,O,e){Y.exports={attributes:e(13988),layoutAttributes:e(98228),supplyDefaults:e(36240),crossTraceDefaults:e(90624).crossTraceDefaults,supplyLayoutDefaults:e(8939),calc:e(67064),crossTraceCalc:e(14348),plot:e(5140),style:e(95908),styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(78e3),selectPoints:e(8264),moduleType:"trace",name:"violin",basePlotModule:e(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},98228:function(Y,O,e){var M=e(16560),A=e(3400).extendFlat;Y.exports={violinmode:A({},M.boxmode,{}),violingap:A({},M.boxgap,{}),violingroupgap:A({},M.boxgroupgap,{})}},8939:function(Y,O,e){var M=e(3400),A=e(98228),o=e(68832);Y.exports=function(w,_,p){o._supply(w,_,p,function(s,n){return M.coerce(w,_,A,s,n)},"violin")}},5140:function(Y,O,e){var M=e(33428),A=e(3400),o=e(43616),w=e(18728),_=e(52340),p=e(63800);Y.exports=function(s,n,a,r){var i=s._context.staticPlot,l=s._fullLayout,u=n.xaxis,c=n.yaxis;function g(f,b){var v=_(f,{xaxis:u,yaxis:c,trace:b,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return o.smoothopen(v[0],1)}A.makeTraceGroups(r,a,"trace violins").each(function(f){var b=M.select(this),v=f[0],d=v.t,m=v.trace;if(m.visible!==!0||d.empty)b.remove();else{var x=d.bPos,y=d.bdPos,T=n[d.valLetter+"axis"],h=n[d.posLetter+"axis"],E=m.side==="both",k=E||m.side==="positive",L=E||m.side==="negative",P=b.selectAll("path.violin").data(A.identity);P.enter().append("path").style("vector-effect",i?"none":"non-scaling-stroke").attr("class","violin"),P.exit().remove(),P.each(function(B){var q,V,ne,ee,$,J,K,te,ie=M.select(this),ae=B.density,se=ae.length,ce=h.c2l(B.pos+x,!0),de=h.l2p(ce);if(m.width)q=d.maxKDE/y;else{var ge=l._violinScaleGroupStats[m.scalegroup];q=m.scalemode==="count"?ge.maxKDE/y*(ge.maxCount/B.pts.length):ge.maxKDE/y}if(k){for(K=new Array(se),$=0;$<se;$++)(te=K[$]={})[d.posLetter]=ce+ae[$].v/q,te[d.valLetter]=T.c2l(ae[$].t,!0);V=g(K,m)}if(L){for(K=new Array(se),J=0,$=se-1;J<se;J++,$--)(te=K[J]={})[d.posLetter]=ce-ae[$].v/q,te[d.valLetter]=T.c2l(ae[$].t,!0);ne=g(K,m)}if(E)ee=V+"L"+ne.substr(1)+"Z";else{var ve=[de,T.c2p(ae[0].t)],be=[de,T.c2p(ae[se-1].t)];m.orientation==="h"&&(ve.reverse(),be.reverse()),ee=k?"M"+ve+"L"+V.substr(1)+"L"+be:"M"+be+"L"+ne.substr(1)+"L"+ve}ie.attr("d",ee),B.posCenterPx=de,B.posDensityScale=q*y,B.path=ie.node(),B.pathLength=B.path.getTotalLength()/(E?2:1)});var I,z,F,U=m.box,R=U.width,j=(U.line||{}).width;E?(I=y*R,z=0):k?(I=[0,y*R/2],z=j*{x:1,y:-1}[d.posLetter]):(I=[y*R/2,0],z=j*{x:-1,y:1}[d.posLetter]),w.plotBoxAndWhiskers(b,{pos:h,val:T},m,{bPos:x,bdPos:I,bPosPxOffset:z}),w.plotBoxMean(b,{pos:h,val:T},m,{bPos:x,bdPos:I,bPosPxOffset:z}),!m.box.visible&&m.meanline.visible&&(F=A.identity);var Z=b.selectAll("path.meanline").data(F||[]);Z.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",i?"none":"non-scaling-stroke"),Z.exit().remove(),Z.each(function(B){var q=T.c2p(B.mean,!0),V=p.getPositionOnKdePath(B,m,q);M.select(this).attr("d",m.orientation==="h"?"M"+q+","+V[0]+"V"+V[1]:"M"+V[0]+","+q+"H"+V[1])}),w.plotPoints(b,{x:u,y:c},m,d)}})}},95908:function(Y,O,e){var M=e(33428),A=e(76308),o=e(49224).stylePoints;Y.exports=function(w){var _=M.select(w).selectAll("g.trace.violins");_.style("opacity",function(p){return p[0].trace.opacity}),_.each(function(p){var s=p[0].trace,n=M.select(this),a=s.box||{},r=a.line||{},i=s.meanline||{},l=i.width;n.selectAll("path.violin").style("stroke-width",s.line.width+"px").call(A.stroke,s.line.color).call(A.fill,s.fillcolor),n.selectAll("path.box").style("stroke-width",r.width+"px").call(A.stroke,r.color).call(A.fill,a.fillcolor);var u={"stroke-width":l+"px","stroke-dasharray":2*l+"px,"+l+"px"};n.selectAll("path.mean").style(u).call(A.stroke,i.color),n.selectAll("path.meanline").style(u).call(A.stroke,i.color),o(n,s,w)})}},58168:function(Y,O,e){var M=e(49084),A=e(50048),o=e(16716),w=e(45464),_=e(92880).extendFlat,p=e(67824).overrideAll,s=Y.exports=p(_({x:A.x,y:A.y,z:A.z,value:A.value,isomin:A.isomin,isomax:A.isomax,surface:A.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:A.slices,caps:A.caps,text:A.text,hovertext:A.hovertext,xhoverformat:A.xhoverformat,yhoverformat:A.yhoverformat,zhoverformat:A.zhoverformat,valuehoverformat:A.valuehoverformat,hovertemplate:A.hovertemplate},M("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:A.colorbar,opacity:A.opacity,opacityscale:o.opacityscale,lightposition:A.lightposition,lighting:A.lighting,flatshading:A.flatshading,contour:A.contour,hoverinfo:_({},w.hoverinfo),showlegend:_({},w.showlegend,{dflt:!1})}),"calc","nested");s.x.editType=s.y.editType=s.z.editType=s.value.editType="calc+clearAxisTypes",s.transforms=void 0},91976:function(Y,O,e){var M=e(67792).gl_mesh3d,A=e(33040).parseColorScale,o=e(3400).isArrayOrTypedArray,w=e(43080),_=e(8932).extractOpts,p=e(52094),s=e(31460).findNearestOnAxis,n=e(31460).generateIsoMeshes;function a(i,l,u){this.scene=i,this.uid=u,this.mesh=l,this.name="",this.data=null,this.showContour=!1}var r=a.prototype;r.handlePick=function(i){if(i.object===this.mesh){var l=i.data.index,u=this.data._meshX[l],c=this.data._meshY[l],g=this.data._meshZ[l],f=this.data._Ys.length,b=this.data._Zs.length,v=s(u,this.data._Xs).id,d=s(c,this.data._Ys).id,m=s(g,this.data._Zs).id,x=i.index=m+b*d+b*f*v;i.traceCoordinate=[this.data._meshX[x],this.data._meshY[x],this.data._meshZ[x],this.data._value[x]];var y=this.data.hovertext||this.data.text;return o(y)&&y[x]!==void 0?i.textLabel=y[x]:y&&(i.textLabel=y),!0}},r.update=function(i){var l=this.scene,u=l.fullSceneLayout;function c(b,v,d,m){return v.map(function(x){return b.d2l(x,0,m)*d})}this.data=n(i);var g={positions:p(c(u.xaxis,i._meshX,l.dataScale[0],i.xcalendar),c(u.yaxis,i._meshY,l.dataScale[1],i.ycalendar),c(u.zaxis,i._meshZ,l.dataScale[2],i.zcalendar)),cells:p(i._meshI,i._meshJ,i._meshK),lightPosition:[i.lightposition.x,i.lightposition.y,i.lightposition.z],ambient:i.lighting.ambient,diffuse:i.lighting.diffuse,specular:i.lighting.specular,roughness:i.lighting.roughness,fresnel:i.lighting.fresnel,vertexNormalsEpsilon:i.lighting.vertexnormalsepsilon,faceNormalsEpsilon:i.lighting.facenormalsepsilon,opacity:i.opacity,opacityscale:i.opacityscale,contourEnable:i.contour.show,contourColor:w(i.contour.color).slice(0,3),contourWidth:i.contour.width,useFacetNormals:i.flatshading},f=_(i);g.vertexIntensity=i._meshIntensity,g.vertexIntensityBounds=[f.min,f.max],g.colormap=A(i),this.mesh.update(g)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},Y.exports=function(i,l){var u=i.glplot.gl,c=M({gl:u}),g=new a(i,c,l.uid);return c._trace=g,g.update(l),i.glplot.add(c),g}},12448:function(Y,O,e){var M=e(3400),A=e(58168),o=e(70548).supplyIsoDefaults,w=e(60192).opacityscaleDefaults;Y.exports=function(_,p,s,n){function a(r,i){return M.coerce(_,p,A,r,i)}o(_,p,s,n,a),w(_,p,n,a)}},67776:function(Y,O,e){Y.exports={attributes:e(58168),supplyDefaults:e(12448),calc:e(62624),colorbar:{min:"cmin",max:"cmax"},plot:e(91976),moduleType:"trace",name:"volume",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},65776:function(Y,O,e){var M=e(20832),A=e(52904).line,o=e(45464),w=e(29736).axisHoverFormat,_=e(21776).Ks,p=e(21776).Gw,s=e(10213),n=e(92880).extendFlat,a=e(76308);function r(i){return{marker:{color:n({},M.marker.color,{arrayOk:!1,editType:"style"}),line:{color:n({},M.marker.line.color,{arrayOk:!1,editType:"style"}),width:n({},M.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}Y.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:w("x"),yhoverformat:w("y"),hovertext:M.hovertext,hovertemplate:_({},{keys:s.eventDataKeys}),hoverinfo:n({},o.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:p({editType:"plot"},{keys:s.eventDataKeys.concat(["label"])}),text:M.text,textposition:M.textposition,insidetextanchor:M.insidetextanchor,textangle:M.textangle,textfont:M.textfont,insidetextfont:M.insidetextfont,outsidetextfont:M.outsidetextfont,constraintext:M.constraintext,cliponaxis:M.cliponaxis,orientation:M.orientation,offset:M.offset,width:M.width,increasing:r(),decreasing:r(),totals:r(),connector:{line:{color:n({},A.color,{dflt:a.defaultLine}),width:n({},A.width,{editType:"plot"}),dash:A.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup}},73540:function(Y,O,e){var M=e(54460),A=e(1220),o=e(3400).mergeArray,w=e(4500),_=e(39032).BADNUM;function p(n){return n==="a"||n==="absolute"}function s(n){return n==="t"||n==="total"}Y.exports=function(n,a){var r,i,l,u,c,g,f=M.getFromId(n,a.xaxis||"x"),b=M.getFromId(n,a.yaxis||"y");a.orientation==="h"?(r=f.makeCalcdata(a,"x"),l=b.makeCalcdata(a,"y"),u=A(a,b,"y",l),c=!!a.yperiodalignment,g="y"):(r=b.makeCalcdata(a,"y"),l=f.makeCalcdata(a,"x"),u=A(a,f,"x",l),c=!!a.xperiodalignment,g="x"),i=u.vals;for(var v,d=Math.min(i.length,r.length),m=new Array(d),x=0,y=!1,T=0;T<d;T++){var h=r[T]||0,E=!1;(r[T]!==_||s(a.measure[T])||p(a.measure[T]))&&T+1<d&&(r[T+1]!==_||s(a.measure[T+1])||p(a.measure[T+1]))&&(E=!0);var k=m[T]={i:T,p:i[T],s:h,rawS:h,cNext:E};p(a.measure[T])?(x=k.s,k.isSum=!0,k.dir="totals",k.s=x):s(a.measure[T])?(k.isSum=!0,k.dir="totals",k.s=x):(k.isSum=!1,k.dir=k.rawS<0?"decreasing":"increasing",v=k.s,k.s=x+v,x+=v),k.dir==="totals"&&(y=!0),c&&(m[T].orig_p=l[T],m[T][g+"End"]=u.ends[T],m[T][g+"Start"]=u.starts[T]),a.ids&&(k.id=String(a.ids[T])),k.v=(a.base||0)+x}return m.length&&(m[0].hasTotals=y),o(a.text,m,"tx"),o(a.hovertext,m,"htx"),w(m,a),m}},10213:function(Y){Y.exports={eventDataKeys:["initial","delta","final"]}},50152:function(Y,O,e){var M=e(96376).setGroupPositions;Y.exports=function(A,o){var w,_,p=A._fullLayout,s=A._fullData,n=A.calcdata,a=o.xaxis,r=o.yaxis,i=[],l=[],u=[];for(_=0;_<s.length;_++){var c=s[_];c.visible===!0&&c.xaxis===a._id&&c.yaxis===r._id&&c.type==="waterfall"&&(w=n[_],c.orientation==="h"?u.push(w):l.push(w),i.push(w))}var g={mode:p.waterfallmode,norm:p.waterfallnorm,gap:p.waterfallgap,groupgap:p.waterfallgroupgap};for(M(A,a,r,l,g),M(A,r,a,u,g),_=0;_<i.length;_++){w=i[_];for(var f=0;f<w.length;f++){var b=w[f];b.isSum===!1&&(b.s0+=f===0?0:w[f-1].s),f+1<w.length&&(w[f].nextP0=w[f+1].p0,w[f].nextS0=w[f+1].s0)}}}},24224:function(Y,O,e){var M=e(3400),A=e(20011),o=e(31508).handleText,w=e(43980),_=e(31147),p=e(65776),s=e(76308),n=e(48164),a=n.INCREASING.COLOR,r=n.DECREASING.COLOR;function i(l,u,c){l(u+".marker.color",c),l(u+".marker.line.color",s.defaultLine),l(u+".marker.line.width")}Y.exports={supplyDefaults:function(l,u,c,g){function f(v,d){return M.coerce(l,u,p,v,d)}if(w(l,u,g,f)){_(l,u,g,f),f("xhoverformat"),f("yhoverformat"),f("measure"),f("orientation",u.x&&!u.y?"h":"v"),f("base"),f("offset"),f("width"),f("text"),f("hovertext"),f("hovertemplate");var b=f("textposition");o(l,u,g,f,b,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),u.textposition!=="none"&&(f("texttemplate"),u.texttemplate||f("textinfo")),i(f,"increasing",a),i(f,"decreasing",r),i(f,"totals","#4499FF"),f("connector.visible")&&(f("connector.mode"),f("connector.line.width")&&(f("connector.line.color"),f("connector.line.dash")))}else u.visible=!1},crossTraceDefaults:function(l,u){var c,g;function f(v){return M.coerce(g._input,g,p,v)}if(u.waterfallmode==="group")for(var b=0;b<l.length;b++)c=(g=l[b])._input,A(c,g,u,f)}}},53256:function(Y){Y.exports=function(O,e){return O.x="xVal"in e?e.xVal:e.x,O.y="yVal"in e?e.yVal:e.y,"initial"in e&&(O.initial=e.initial),"delta"in e&&(O.delta=e.delta),"final"in e&&(O.final=e.final),e.xa&&(O.xaxis=e.xa),e.ya&&(O.yaxis=e.ya),O}},94196:function(Y,O,e){var M=e(54460).hoverLabelText,A=e(76308).opacity,o=e(63400).hoverOnBars,w=e(48164),_=w.INCREASING.SYMBOL,p=w.DECREASING.SYMBOL;Y.exports=function(s,n,a,r,i){var l=o(s,n,a,r,i);if(l){var u=l.cd,c=u[0].trace,g=c.orientation==="h",f=g?"x":"y",b=g?s.xa:s.ya,v=u[l.index],d=v.isSum?v.b+v.s:v.rawS;l.initial=v.b+v.s-d,l.delta=d,l.final=l.initial+l.delta;var m=k(Math.abs(l.delta));l.deltaLabel=d<0?"("+m+")":m,l.finalLabel=k(l.final),l.initialLabel=k(l.initial);var x=v.hi||c.hoverinfo,y=[];if(x&&x!=="none"&&x!=="skip"){var T=x==="all",h=x.split("+"),E=function(L){return T||h.indexOf(L)!==-1};v.isSum||(!E("final")||E(g?"x":"y")||y.push(l.finalLabel),E("delta")&&(d<0?y.push(l.deltaLabel+" "+p):y.push(l.deltaLabel+" "+_)),E("initial")&&y.push("Initial: "+l.initialLabel))}return y.length&&(l.extraText=y.join("<br>")),l.color=function(L,P){var I=L[P.dir].marker,z=I.color,F=I.line.color,U=I.line.width;return A(z)?z:A(F)&&U?F:void 0}(c,v),[l]}function k(L){return M(b,L,c[f+"hoverformat"])}}},95952:function(Y,O,e){Y.exports={attributes:e(65776),layoutAttributes:e(91352),supplyDefaults:e(24224).supplyDefaults,crossTraceDefaults:e(24224).crossTraceDefaults,supplyLayoutDefaults:e(59464),calc:e(73540),crossTraceCalc:e(50152),plot:e(64488),style:e(12252).style,hoverPoints:e(94196),eventData:e(53256),selectPoints:e(45784),moduleType:"trace",name:"waterfall",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},91352:function(Y){Y.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},59464:function(Y,O,e){var M=e(3400),A=e(91352);Y.exports=function(o,w,_){var p=!1;function s(r,i){return M.coerce(o,w,A,r,i)}for(var n=0;n<_.length;n++){var a=_[n];if(a.visible&&a.type==="waterfall"){p=!0;break}}p&&(s("waterfallmode"),s("waterfallgap",.2),s("waterfallgroupgap"))}},64488:function(Y,O,e){var M=e(33428),A=e(3400),o=e(43616),w=e(39032).BADNUM,_=e(98184),p=e(82744).clearMinTextSize;Y.exports=function(s,n,a,r){var i=s._fullLayout;p("waterfall",i),_.plot(s,n,a,r,{mode:i.waterfallmode,norm:i.waterfallmode,gap:i.waterfallgap,groupgap:i.waterfallgroupgap}),function(l,u,c,g){var f=u.xaxis,b=u.yaxis;A.makeTraceGroups(g,c,"trace bars").each(function(v){var d=M.select(this),m=v[0].trace,x=A.ensureSingle(d,"g","lines");if(m.connector&&m.connector.visible){var y=m.orientation==="h",T=m.connector.mode,h=x.selectAll("g.line").data(A.identity);h.enter().append("g").classed("line",!0),h.exit().remove();var E=h.size();h.each(function(k,L){if(L===E-1||k.cNext){var P=function(U,R,j,Z){var B=[],q=[],V=Z?R:j,ne=Z?j:R;return B[0]=V.c2p(U.s0,!0),q[0]=ne.c2p(U.p0,!0),B[1]=V.c2p(U.s1,!0),q[1]=ne.c2p(U.p1,!0),B[2]=V.c2p(U.nextS0,!0),q[2]=ne.c2p(U.nextP0,!0),Z?[B,q]:[q,B]}(k,f,b,y),I=P[0],z=P[1],F="";I[0]!==w&&z[0]!==w&&I[1]!==w&&z[1]!==w&&(T==="spanning"&&!k.isSum&&L>0&&(F+=y?"M"+I[0]+","+z[1]+"V"+z[0]:"M"+I[1]+","+z[0]+"H"+I[0]),T!=="between"&&(k.isSum||L<E-1)&&(F+=y?"M"+I[1]+","+z[0]+"V"+z[1]:"M"+I[0]+","+z[1]+"H"+I[1]),I[2]!==w&&z[2]!==w&&(F+=y?"M"+I[1]+","+z[1]+"V"+z[2]:"M"+I[1]+","+z[1]+"H"+I[2])),F===""&&(F="M0,0Z"),A.ensureSingle(M.select(this),"path").attr("d",F).call(o.setClipUrl,u.layerClipId,l)}})}else x.remove()})}(s,n,a,r)}},12252:function(Y,O,e){var M=e(33428),A=e(43616),o=e(76308),w=e(13448).DESELECTDIM,_=e(60100),p=e(82744).resizeText,s=_.styleTextPoints;Y.exports={style:function(n,a,r){var i=r||M.select(n).selectAll("g.waterfalllayer").selectAll("g.trace");p(n,i,"waterfall"),i.style("opacity",function(l){return l[0].trace.opacity}),i.each(function(l){var u=M.select(this),c=l[0].trace;u.selectAll(".point > path").each(function(g){if(!g.isBlank){var f=c[g.dir].marker;M.select(this).call(o.fill,f.color).call(o.stroke,f.line.color).call(A.dashLine,f.line.dash,f.line.width).style("opacity",c.selectedpoints&&!g.selected?w:1)}}),s(u,c,n),u.selectAll(".lines").each(function(){var g=c.connector.line;A.lineGroupStyle(M.select(this).selectAll("path"),g.width,g.color,g.dash)})})}}},84224:function(Y,O,e){var M=e(54460),A=e(3400),o=e(73060),w=e(60468).W,_=e(39032).BADNUM;O.moduleType="transform",O.name="aggregate";var p=O.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},s=p.aggregations;function n(l,u,c,g){if(g.enabled){for(var f=g.target,b=A.nestedProperty(u,f),v=b.get(),d=function(y,T){var h=y.func,E=T.d2c,k=T.c2d;switch(h){case"count":return a;case"first":return r;case"last":return i;case"sum":return function(L,P){for(var I=0,z=0;z<P.length;z++){var F=E(L[P[z]]);F!==_&&(I+=F)}return k(I)};case"avg":return function(L,P){for(var I=0,z=0,F=0;F<P.length;F++){var U=E(L[P[F]]);U!==_&&(I+=U,z++)}return z?k(I/z):_};case"min":return function(L,P){for(var I=1/0,z=0;z<P.length;z++){var F=E(L[P[z]]);F!==_&&(I=Math.min(I,F))}return I===1/0?_:k(I)};case"max":return function(L,P){for(var I=-1/0,z=0;z<P.length;z++){var F=E(L[P[z]]);F!==_&&(I=Math.max(I,F))}return I===-1/0?_:k(I)};case"range":return function(L,P){for(var I=1/0,z=-1/0,F=0;F<P.length;F++){var U=E(L[P[F]]);U!==_&&(I=Math.min(I,U),z=Math.max(z,U))}return z===-1/0||I===1/0?_:k(z-I)};case"change":return function(L,P){var I=E(L[P[0]]),z=E(L[P[P.length-1]]);return I===_||z===_?_:k(z-I)};case"median":return function(L,P){for(var I=[],z=0;z<P.length;z++){var F=E(L[P[z]]);F!==_&&I.push(F)}if(!I.length)return _;I.sort(A.sorterAsc);var U=(I.length-1)/2;return k((I[Math.floor(U)]+I[Math.ceil(U)])/2)};case"mode":return function(L,P){for(var I={},z=0,F=_,U=0;U<P.length;U++){var R=E(L[P[U]]);if(R!==_){var j=I[R]=(I[R]||0)+1;j>z&&(z=j,F=R)}}return z?k(F):_};case"rms":return function(L,P){for(var I=0,z=0,F=0;F<P.length;F++){var U=E(L[P[F]]);U!==_&&(I+=U*U,z++)}return z?k(Math.sqrt(I/z)):_};case"stddev":return function(L,P){var I,z=0,F=0,U=1,R=_;for(I=0;I<P.length&&R===_;I++)R=E(L[P[I]]);if(R===_)return _;for(;I<P.length;I++){var j=E(L[P[I]]);if(j!==_){var Z=j-R;z+=Z,F+=Z*Z,U++}}var B=y.funcmode==="sample"?U-1:U;return B?Math.sqrt((F-z*z/U)/B):0}}}(g,M.getDataConversions(l,u,f,v)),m=new Array(c.length),x=0;x<c.length;x++)m[x]=d(v,c[x]);b.set(m),g.func==="count"&&A.pushUnique(u._arrayAttrs,f)}}function a(l,u){return u.length}function r(l,u){return l[u[0]]}function i(l,u){return l[u[u.length-1]]}O.supplyDefaults=function(l,u){var c,g={};function f(k,L){return A.coerce(l,g,p,k,L)}if(!f("enabled"))return g;var b=o.findArrayAttributes(u),v={};for(c=0;c<b.length;c++)v[b[c]]=1;var d=f("groups");if(!Array.isArray(d)){if(!v[d])return g.enabled=!1,g;v[d]=0}var m,x=l.aggregations||[],y=g.aggregations=new Array(x.length);function T(k,L){return A.coerce(x[c],m,s,k,L)}for(c=0;c<x.length;c++){m={_index:c};var h=T("target"),E=T("func");T("enabled")&&h&&(v[h]||E==="count"&&v[h]===void 0)?(E==="stddev"&&T("funcmode"),v[h]=0,y[c]=m):y[c]={enabled:!1,_index:c}}for(c=0;c<b.length;c++)v[b[c]]&&y.push({target:b[c],func:s.func.dflt,enabled:!0,_index:-1});return g},O.calcTransform=function(l,u,c){if(c.enabled){var g=c.groups,f=A.getTargetArray(u,{target:g});if(f){var b,v,d,m,x={},y={},T=[],h=w(u.transforms,c),E=f.length;for(u._length&&(E=Math.min(E,u._length)),b=0;b<E;b++)(d=x[v=f[b]])===void 0?(x[v]=T.length,m=[b],T.push(m),y[x[v]]=h(b)):(T[d].push(b),y[x[v]]=(y[x[v]]||[]).concat(h(b)));c._indexToPoints=y;var k=c.aggregations;for(b=0;b<k.length;b++)n(l,u,T,k[b]);typeof g=="string"&&n(l,u,T,{target:g,func:"first",enabled:!0}),u._length=T.length}}}},76744:function(Y,O,e){var M=e(3400),A=e(24040),o=e(54460),w=e(60468).W,_=e(69104),p=_.COMPARISON_OPS,s=_.INTERVAL_OPS,n=_.SET_OPS;O.moduleType="transform",O.name="filter",O.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(p).concat(s).concat(n),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},O.supplyDefaults=function(a){var r={};function i(c,g){return M.coerce(a,r,O.attributes,c,g)}if(i("enabled")){var l=i("target");if(M.isArrayOrTypedArray(l)&&l.length===0)return r.enabled=!1,r;i("preservegaps"),i("operation"),i("value");var u=A.getComponentMethod("calendars","handleDefaults");u(a,r,"valuecalendar",null),u(a,r,"targetcalendar",null)}return r},O.calcTransform=function(a,r,i){if(i.enabled){var l=M.getTargetArray(r,i);if(l){var u=i.target,c=l.length;r._length&&(c=Math.min(c,r._length));var g=i.targetcalendar,f=r._arrayAttrs,b=i.preservegaps;if(typeof u=="string"){var v=M.nestedProperty(r,u+"calendar").get();v&&(g=v)}var d,m,x=function(P,I,z){var F=P.operation,U=P.value,R=M.isArrayOrTypedArray(U);function j(V){return V.indexOf(F)!==-1}var Z,B=function(V){return I(V,0,P.valuecalendar)},q=function(V){return I(V,0,z)};switch(j(p)?Z=B(R?U[0]:U):j(s)?Z=R?[B(U[0]),B(U[1])]:[B(U),B(U)]:j(n)&&(Z=R?U.map(B):[B(U)]),F){case"=":return function(V){return q(V)===Z};case"!=":return function(V){return q(V)!==Z};case"<":return function(V){return q(V)<Z};case"<=":return function(V){return q(V)<=Z};case">":return function(V){return q(V)>Z};case">=":return function(V){return q(V)>=Z};case"[]":return function(V){var ne=q(V);return ne>=Z[0]&&ne<=Z[1]};case"()":return function(V){var ne=q(V);return ne>Z[0]&&ne<Z[1]};case"[)":return function(V){var ne=q(V);return ne>=Z[0]&&ne<Z[1]};case"(]":return function(V){var ne=q(V);return ne>Z[0]&&ne<=Z[1]};case"][":return function(V){var ne=q(V);return ne<=Z[0]||ne>=Z[1]};case")(":return function(V){var ne=q(V);return ne<Z[0]||ne>Z[1]};case"](":return function(V){var ne=q(V);return ne<=Z[0]||ne>Z[1]};case")[":return function(V){var ne=q(V);return ne<Z[0]||ne>=Z[1]};case"{}":return function(V){return Z.indexOf(q(V))!==-1};case"}{":return function(V){return Z.indexOf(q(V))===-1}}}(i,o.getDataToCoordFunc(a,r,u,l),g),y={},T={},h=0;b?(d=function(P){y[P.astr]=M.extendDeep([],P.get()),P.set(new Array(c))},m=function(P,I){var z=y[P.astr][I];P.get()[I]=z}):(d=function(P){y[P.astr]=M.extendDeep([],P.get()),P.set([])},m=function(P,I){var z=y[P.astr][I];P.get().push(z)}),L(d);for(var E=w(r.transforms,i),k=0;k<c;k++)x(l[k])?(L(m,k),T[h++]=E(k)):b&&h++;i._indexToPoints=T,r._length=h}}function L(P,I){for(var z=0;z<f.length;z++)P(M.nestedProperty(r,f[z]),I)}}},32028:function(Y,O,e){var M=e(3400),A=e(73060),o=e(7316),w=e(60468).W;function _(p,s){var n,a,r,i,l,u,c,g,f,b,v=s.transform,d=s.transformIndex,m=p.transforms[d].groups,x=w(p.transforms,v);if(!M.isArrayOrTypedArray(m)||m.length===0)return[p];var y=M.filterUnique(m),T=new Array(y.length),h=m.length,E=A.findArrayAttributes(p),k=v.styles||[],L={};for(n=0;n<k.length;n++)L[k[n].target]=k[n].value;v.styles&&(b=M.keyedContainer(v,"styles","target","value.name"));var P={},I={};for(n=0;n<y.length;n++){P[u=y[n]]=n,I[u]=0,(c=T[n]=M.extendDeepNoArrays({},p))._group=u,c.transforms[d]._indexToPoints={};var z=null;for(b&&(z=b.get(u)),c.name=z||z===""?z:M.templateString(v.nameformat,{trace:p.name,group:u}),g=c.transforms,c.transforms=[],a=0;a<g.length;a++)c.transforms[a]=M.extendDeepNoArrays({},g[a]);for(a=0;a<E.length;a++)M.nestedProperty(c,E[a]).set([])}for(r=0;r<E.length;r++){for(i=E[r],a=0,f=[];a<y.length;a++)f[a]=M.nestedProperty(T[a],i).get();for(l=M.nestedProperty(p,i).get(),a=0;a<h;a++)f[P[m[a]]].push(l[a])}for(a=0;a<h;a++)(c=T[P[m[a]]]).transforms[d]._indexToPoints[I[m[a]]]=x(a),I[m[a]]++;for(n=0;n<y.length;n++)u=y[n],c=T[n],o.clearExpandedTraceDefaultColors(c),c=M.extendDeepNoArrays(c,L[u]||{});return T}O.moduleType="transform",O.name="groupby",O.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},O.supplyDefaults=function(p,s,n){var a,r={};function i(f,b){return M.coerce(p,r,O.attributes,f,b)}if(!i("enabled"))return r;i("groups"),i("nameformat",n._dataLength>1?"%{group} (%{trace})":"%{group}");var l=p.styles,u=r.styles=[];if(l)for(a=0;a<l.length;a++){var c=u[a]={};M.coerce(l[a],u[a],O.attributes.styles,"target");var g=M.coerce(l[a],u[a],O.attributes.styles,"value");M.isPlainObject(g)?c.value=M.extendDeep({},g):g&&delete c.value}return r},O.transform=function(p,s){var n,a,r,i=[];for(a=0;a<p.length;a++)for(n=_(p[a],s),r=0;r<n.length;r++)i.push(n[r]);return i}},60468:function(Y,O){O.W=function(e,M){for(var A,o,w=0;w<e.length&&(A=e[w])!==M;w++)A._indexToPoints&&A.enabled!==!1&&(o=A._indexToPoints);var _=o?function(p){return o[p]}:function(p){return[p]};return _}},76272:function(Y,O,e){var M=e(3400),A=e(54460),o=e(60468).W,w=e(39032).BADNUM;O.moduleType="transform",O.name="sort",O.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},O.supplyDefaults=function(_){var p={};function s(n,a){return M.coerce(_,p,O.attributes,n,a)}return s("enabled")&&(s("target"),s("order")),p},O.calcTransform=function(_,p,s){if(s.enabled){var n=M.getTargetArray(p,s);if(n){var a=s.target,r=n.length;p._length&&(r=Math.min(r,p._length));var i,l,u=p._arrayAttrs,c=function(m,x,y,T){var h,E=new Array(T),k=new Array(T);for(h=0;h<T;h++)E[h]={v:x[h],i:h};for(E.sort(function(L,P){switch(L.order){case"ascending":return function(I,z){var F=P(I.v),U=P(z.v);return F===w?1:U===w?-1:F-U};case"descending":return function(I,z){var F=P(I.v),U=P(z.v);return F===w?1:U===w?-1:U-F}}}(m,y)),h=0;h<T;h++)k[h]=E[h].i;return k}(s,n,A.getDataToCoordFunc(_,p,a,n),r),g=o(p.transforms,s),f={};for(i=0;i<u.length;i++){var b=M.nestedProperty(p,u[i]),v=b.get(),d=new Array(r);for(l=0;l<r;l++)d[l]=v[c[l]];b.set(d)}for(l=0;l<r;l++)f[l]=g(c[l]);s._indexToPoints=f,p._length=r}}}},25788:function(Y,O){O.version="2.29.1"},67792:function(Y,O,e){var M,A=e(4168);M=function(){return function(){var o={7386:function(p,s,n){p.exports={alpha_shape:n(2350),convex_hull:n(5537),delaunay_triangulate:n(4419),gl_cone3d:n(1140),gl_error3d:n(3110),gl_heatmap2d:n(6386),gl_line3d:n(6086),gl_mesh3d:n(8116),gl_plot2d:n(2117),gl_plot3d:n(1059),gl_pointcloud2d:n(8271),gl_scatter3d:n(2182),gl_select_box:n(6623),gl_spikes2d:n(3050),gl_streamtube3d:n(7307),gl_surface3d:n(3754),ndarray:n(5050),ndarray_linear_interpolate:n(3581)}},2146:function(p,s,n){function a(he,xe){for(var ke=0;ke<xe.length;ke++){var ze=xe[ke];ze.enumerable=ze.enumerable||!1,ze.configurable=!0,"value"in ze&&(ze.writable=!0),Object.defineProperty(he,ze.key,ze)}}function r(he,xe){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ke,ze){return ke.__proto__=ze,ke},r(he,xe)}function i(he){if(he===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return he}function l(he){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(xe){return xe.__proto__||Object.getPrototypeOf(xe)},l(he)}function u(he){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(xe){return typeof xe}:function(xe){return xe&&typeof Symbol=="function"&&xe.constructor===Symbol&&xe!==Symbol.prototype?"symbol":typeof xe},u(he)}var c=n(3910),g=n(3187),f=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.lW=d,s.h2=50;var b=2147483647;function v(he){if(he>b)throw new RangeError('The value "'+he+'" is invalid for option "size"');var xe=new Uint8Array(he);return Object.setPrototypeOf(xe,d.prototype),xe}function d(he,xe,ke){if(typeof he=="number"){if(typeof xe=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(he)}return m(he,xe,ke)}function m(he,xe,ke){if(typeof he=="string")return function(Oe,Ve){if(typeof Ve=="string"&&Ve!==""||(Ve="utf8"),!d.isEncoding(Ve))throw new TypeError("Unknown encoding: "+Ve);var qe=0|k(Oe,Ve),Je=v(qe),ot=Je.write(Oe,Ve);return ot!==qe&&(Je=Je.slice(0,ot)),Je}(he,xe);if(ArrayBuffer.isView(he))return function(Oe){if(Ee(Oe,Uint8Array)){var Ve=new Uint8Array(Oe);return h(Ve.buffer,Ve.byteOffset,Ve.byteLength)}return T(Oe)}(he);if(he==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(he));if(Ee(he,ArrayBuffer)||he&&Ee(he.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ee(he,SharedArrayBuffer)||he&&Ee(he.buffer,SharedArrayBuffer)))return h(he,xe,ke);if(typeof he=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ze=he.valueOf&&he.valueOf();if(ze!=null&&ze!==he)return d.from(ze,xe,ke);var Re=function(Oe){if(d.isBuffer(Oe)){var Ve=0|E(Oe.length),qe=v(Ve);return qe.length===0||Oe.copy(qe,0,0,Ve),qe}return Oe.length!==void 0?typeof Oe.length!="number"||Te(Oe.length)?v(0):T(Oe):Oe.type==="Buffer"&&Array.isArray(Oe.data)?T(Oe.data):void 0}(he);if(Re)return Re;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof he[Symbol.toPrimitive]=="function")return d.from(he[Symbol.toPrimitive]("string"),xe,ke);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(he))}function x(he){if(typeof he!="number")throw new TypeError('"size" argument must be of type number');if(he<0)throw new RangeError('The value "'+he+'" is invalid for option "size"')}function y(he){return x(he),v(he<0?0:0|E(he))}function T(he){for(var xe=he.length<0?0:0|E(he.length),ke=v(xe),ze=0;ze<xe;ze+=1)ke[ze]=255&he[ze];return ke}function h(he,xe,ke){if(xe<0||he.byteLength<xe)throw new RangeError('"offset" is outside of buffer bounds');if(he.byteLength<xe+(ke||0))throw new RangeError('"length" is outside of buffer bounds');var ze;return ze=xe===void 0&&ke===void 0?new Uint8Array(he):ke===void 0?new Uint8Array(he,xe):new Uint8Array(he,xe,ke),Object.setPrototypeOf(ze,d.prototype),ze}function E(he){if(he>=b)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b.toString(16)+" bytes");return 0|he}function k(he,xe){if(d.isBuffer(he))return he.length;if(ArrayBuffer.isView(he)||Ee(he,ArrayBuffer))return he.byteLength;if(typeof he!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+u(he));var ke=he.length,ze=arguments.length>2&&arguments[2]===!0;if(!ze&&ke===0)return 0;for(var Re=!1;;)switch(xe){case"ascii":case"latin1":case"binary":return ke;case"utf8":case"utf-8":return oe(he).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ke;case"hex":return ke>>>1;case"base64":return le(he).length;default:if(Re)return ze?-1:oe(he).length;xe=(""+xe).toLowerCase(),Re=!0}}function L(he,xe,ke){var ze=!1;if((xe===void 0||xe<0)&&(xe=0),xe>this.length||((ke===void 0||ke>this.length)&&(ke=this.length),ke<=0)||(ke>>>=0)<=(xe>>>=0))return"";for(he||(he="utf8");;)switch(he){case"hex":return $(this,xe,ke);case"utf8":case"utf-8":return q(this,xe,ke);case"ascii":return ne(this,xe,ke);case"latin1":case"binary":return ee(this,xe,ke);case"base64":return B(this,xe,ke);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,xe,ke);default:if(ze)throw new TypeError("Unknown encoding: "+he);he=(he+"").toLowerCase(),ze=!0}}function P(he,xe,ke){var ze=he[xe];he[xe]=he[ke],he[ke]=ze}function I(he,xe,ke,ze,Re){if(he.length===0)return-1;if(typeof ke=="string"?(ze=ke,ke=0):ke>2147483647?ke=2147483647:ke<-2147483648&&(ke=-2147483648),Te(ke=+ke)&&(ke=Re?0:he.length-1),ke<0&&(ke=he.length+ke),ke>=he.length){if(Re)return-1;ke=he.length-1}else if(ke<0){if(!Re)return-1;ke=0}if(typeof xe=="string"&&(xe=d.from(xe,ze)),d.isBuffer(xe))return xe.length===0?-1:z(he,xe,ke,ze,Re);if(typeof xe=="number")return xe&=255,typeof Uint8Array.prototype.indexOf=="function"?Re?Uint8Array.prototype.indexOf.call(he,xe,ke):Uint8Array.prototype.lastIndexOf.call(he,xe,ke):z(he,[xe],ke,ze,Re);throw new TypeError("val must be string, number or Buffer")}function z(he,xe,ke,ze,Re){var Oe,Ve=1,qe=he.length,Je=xe.length;if(ze!==void 0&&((ze=String(ze).toLowerCase())==="ucs2"||ze==="ucs-2"||ze==="utf16le"||ze==="utf-16le")){if(he.length<2||xe.length<2)return-1;Ve=2,qe/=2,Je/=2,ke/=2}function ot(yt,et){return Ve===1?yt[et]:yt.readUInt16BE(et*Ve)}if(Re){var rt=-1;for(Oe=ke;Oe<qe;Oe++)if(ot(he,Oe)===ot(xe,rt===-1?0:Oe-rt)){if(rt===-1&&(rt=Oe),Oe-rt+1===Je)return rt*Ve}else rt!==-1&&(Oe-=Oe-rt),rt=-1}else for(ke+Je>qe&&(ke=qe-Je),Oe=ke;Oe>=0;Oe--){for(var dt=!0,_t=0;_t<Je;_t++)if(ot(he,Oe+_t)!==ot(xe,_t)){dt=!1;break}if(dt)return Oe}return-1}function F(he,xe,ke,ze){ke=Number(ke)||0;var Re=he.length-ke;ze?(ze=Number(ze))>Re&&(ze=Re):ze=Re;var Oe,Ve=xe.length;for(ze>Ve/2&&(ze=Ve/2),Oe=0;Oe<ze;++Oe){var qe=parseInt(xe.substr(2*Oe,2),16);if(Te(qe))return Oe;he[ke+Oe]=qe}return Oe}function U(he,xe,ke,ze){return pe(oe(xe,he.length-ke),he,ke,ze)}function R(he,xe,ke,ze){return pe(function(Re){for(var Oe=[],Ve=0;Ve<Re.length;++Ve)Oe.push(255&Re.charCodeAt(Ve));return Oe}(xe),he,ke,ze)}function j(he,xe,ke,ze){return pe(le(xe),he,ke,ze)}function Z(he,xe,ke,ze){return pe(function(Re,Oe){for(var Ve,qe,Je,ot=[],rt=0;rt<Re.length&&!((Oe-=2)<0);++rt)qe=(Ve=Re.charCodeAt(rt))>>8,Je=Ve%256,ot.push(Je),ot.push(qe);return ot}(xe,he.length-ke),he,ke,ze)}function B(he,xe,ke){return xe===0&&ke===he.length?c.fromByteArray(he):c.fromByteArray(he.slice(xe,ke))}function q(he,xe,ke){ke=Math.min(he.length,ke);for(var ze=[],Re=xe;Re<ke;){var Oe=he[Re],Ve=null,qe=Oe>239?4:Oe>223?3:Oe>191?2:1;if(Re+qe<=ke){var Je=void 0,ot=void 0,rt=void 0,dt=void 0;switch(qe){case 1:Oe<128&&(Ve=Oe);break;case 2:(192&(Je=he[Re+1]))==128&&(dt=(31&Oe)<<6|63&Je)>127&&(Ve=dt);break;case 3:Je=he[Re+1],ot=he[Re+2],(192&Je)==128&&(192&ot)==128&&(dt=(15&Oe)<<12|(63&Je)<<6|63&ot)>2047&&(dt<55296||dt>57343)&&(Ve=dt);break;case 4:Je=he[Re+1],ot=he[Re+2],rt=he[Re+3],(192&Je)==128&&(192&ot)==128&&(192&rt)==128&&(dt=(15&Oe)<<18|(63&Je)<<12|(63&ot)<<6|63&rt)>65535&&dt<1114112&&(Ve=dt)}}Ve===null?(Ve=65533,qe=1):Ve>65535&&(Ve-=65536,ze.push(Ve>>>10&1023|55296),Ve=56320|1023&Ve),ze.push(Ve),Re+=qe}return function(_t){var yt=_t.length;if(yt<=V)return String.fromCharCode.apply(String,_t);for(var et="",nt=0;nt<yt;)et+=String.fromCharCode.apply(String,_t.slice(nt,nt+=V));return et}(ze)}d.TYPED_ARRAY_SUPPORT=function(){try{var he=new Uint8Array(1),xe={foo:function(){return 42}};return Object.setPrototypeOf(xe,Uint8Array.prototype),Object.setPrototypeOf(he,xe),he.foo()===42}catch{return!1}}(),d.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=function(he,xe,ke){return m(he,xe,ke)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(he,xe,ke){return function(ze,Re,Oe){return x(ze),ze<=0?v(ze):Re!==void 0?typeof Oe=="string"?v(ze).fill(Re,Oe):v(ze).fill(Re):v(ze)}(he,xe,ke)},d.allocUnsafe=function(he){return y(he)},d.allocUnsafeSlow=function(he){return y(he)},d.isBuffer=function(he){return he!=null&&he._isBuffer===!0&&he!==d.prototype},d.compare=function(he,xe){if(Ee(he,Uint8Array)&&(he=d.from(he,he.offset,he.byteLength)),Ee(xe,Uint8Array)&&(xe=d.from(xe,xe.offset,xe.byteLength)),!d.isBuffer(he)||!d.isBuffer(xe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(he===xe)return 0;for(var ke=he.length,ze=xe.length,Re=0,Oe=Math.min(ke,ze);Re<Oe;++Re)if(he[Re]!==xe[Re]){ke=he[Re],ze=xe[Re];break}return ke<ze?-1:ze<ke?1:0},d.isEncoding=function(he){switch(String(he).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(he,xe){if(!Array.isArray(he))throw new TypeError('"list" argument must be an Array of Buffers');if(he.length===0)return d.alloc(0);var ke;if(xe===void 0)for(xe=0,ke=0;ke<he.length;++ke)xe+=he[ke].length;var ze=d.allocUnsafe(xe),Re=0;for(ke=0;ke<he.length;++ke){var Oe=he[ke];if(Ee(Oe,Uint8Array))Re+Oe.length>ze.length?(d.isBuffer(Oe)||(Oe=d.from(Oe)),Oe.copy(ze,Re)):Uint8Array.prototype.set.call(ze,Oe,Re);else{if(!d.isBuffer(Oe))throw new TypeError('"list" argument must be an Array of Buffers');Oe.copy(ze,Re)}Re+=Oe.length}return ze},d.byteLength=k,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var he=this.length;if(he%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var xe=0;xe<he;xe+=2)P(this,xe,xe+1);return this},d.prototype.swap32=function(){var he=this.length;if(he%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var xe=0;xe<he;xe+=4)P(this,xe,xe+3),P(this,xe+1,xe+2);return this},d.prototype.swap64=function(){var he=this.length;if(he%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var xe=0;xe<he;xe+=8)P(this,xe,xe+7),P(this,xe+1,xe+6),P(this,xe+2,xe+5),P(this,xe+3,xe+4);return this},d.prototype.toString=function(){var he=this.length;return he===0?"":arguments.length===0?q(this,0,he):L.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(he){if(!d.isBuffer(he))throw new TypeError("Argument must be a Buffer");return this===he||d.compare(this,he)===0},d.prototype.inspect=function(){var he="",xe=s.h2;return he=this.toString("hex",0,xe).replace(/(.{2})/g,"$1 ").trim(),this.length>xe&&(he+=" ... "),"<Buffer "+he+">"},f&&(d.prototype[f]=d.prototype.inspect),d.prototype.compare=function(he,xe,ke,ze,Re){if(Ee(he,Uint8Array)&&(he=d.from(he,he.offset,he.byteLength)),!d.isBuffer(he))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+u(he));if(xe===void 0&&(xe=0),ke===void 0&&(ke=he?he.length:0),ze===void 0&&(ze=0),Re===void 0&&(Re=this.length),xe<0||ke>he.length||ze<0||Re>this.length)throw new RangeError("out of range index");if(ze>=Re&&xe>=ke)return 0;if(ze>=Re)return-1;if(xe>=ke)return 1;if(this===he)return 0;for(var Oe=(Re>>>=0)-(ze>>>=0),Ve=(ke>>>=0)-(xe>>>=0),qe=Math.min(Oe,Ve),Je=this.slice(ze,Re),ot=he.slice(xe,ke),rt=0;rt<qe;++rt)if(Je[rt]!==ot[rt]){Oe=Je[rt],Ve=ot[rt];break}return Oe<Ve?-1:Ve<Oe?1:0},d.prototype.includes=function(he,xe,ke){return this.indexOf(he,xe,ke)!==-1},d.prototype.indexOf=function(he,xe,ke){return I(this,he,xe,ke,!0)},d.prototype.lastIndexOf=function(he,xe,ke){return I(this,he,xe,ke,!1)},d.prototype.write=function(he,xe,ke,ze){if(xe===void 0)ze="utf8",ke=this.length,xe=0;else if(ke===void 0&&typeof xe=="string")ze=xe,ke=this.length,xe=0;else{if(!isFinite(xe))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");xe>>>=0,isFinite(ke)?(ke>>>=0,ze===void 0&&(ze="utf8")):(ze=ke,ke=void 0)}var Re=this.length-xe;if((ke===void 0||ke>Re)&&(ke=Re),he.length>0&&(ke<0||xe<0)||xe>this.length)throw new RangeError("Attempt to write outside buffer bounds");ze||(ze="utf8");for(var Oe=!1;;)switch(ze){case"hex":return F(this,he,xe,ke);case"utf8":case"utf-8":return U(this,he,xe,ke);case"ascii":case"latin1":case"binary":return R(this,he,xe,ke);case"base64":return j(this,he,xe,ke);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,he,xe,ke);default:if(Oe)throw new TypeError("Unknown encoding: "+ze);ze=(""+ze).toLowerCase(),Oe=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var V=4096;function ne(he,xe,ke){var ze="";ke=Math.min(he.length,ke);for(var Re=xe;Re<ke;++Re)ze+=String.fromCharCode(127&he[Re]);return ze}function ee(he,xe,ke){var ze="";ke=Math.min(he.length,ke);for(var Re=xe;Re<ke;++Re)ze+=String.fromCharCode(he[Re]);return ze}function $(he,xe,ke){var ze=he.length;(!xe||xe<0)&&(xe=0),(!ke||ke<0||ke>ze)&&(ke=ze);for(var Re="",Oe=xe;Oe<ke;++Oe)Re+=Me[he[Oe]];return Re}function J(he,xe,ke){for(var ze=he.slice(xe,ke),Re="",Oe=0;Oe<ze.length-1;Oe+=2)Re+=String.fromCharCode(ze[Oe]+256*ze[Oe+1]);return Re}function K(he,xe,ke){if(he%1!=0||he<0)throw new RangeError("offset is not uint");if(he+xe>ke)throw new RangeError("Trying to access beyond buffer length")}function te(he,xe,ke,ze,Re,Oe){if(!d.isBuffer(he))throw new TypeError('"buffer" argument must be a Buffer instance');if(xe>Re||xe<Oe)throw new RangeError('"value" argument is out of bounds');if(ke+ze>he.length)throw new RangeError("Index out of range")}function ie(he,xe,ke,ze,Re){me(xe,ze,Re,he,ke,7);var Oe=Number(xe&BigInt(4294967295));he[ke++]=Oe,Oe>>=8,he[ke++]=Oe,Oe>>=8,he[ke++]=Oe,Oe>>=8,he[ke++]=Oe;var Ve=Number(xe>>BigInt(32)&BigInt(4294967295));return he[ke++]=Ve,Ve>>=8,he[ke++]=Ve,Ve>>=8,he[ke++]=Ve,Ve>>=8,he[ke++]=Ve,ke}function ae(he,xe,ke,ze,Re){me(xe,ze,Re,he,ke,7);var Oe=Number(xe&BigInt(4294967295));he[ke+7]=Oe,Oe>>=8,he[ke+6]=Oe,Oe>>=8,he[ke+5]=Oe,Oe>>=8,he[ke+4]=Oe;var Ve=Number(xe>>BigInt(32)&BigInt(4294967295));return he[ke+3]=Ve,Ve>>=8,he[ke+2]=Ve,Ve>>=8,he[ke+1]=Ve,Ve>>=8,he[ke]=Ve,ke+8}function se(he,xe,ke,ze,Re,Oe){if(ke+ze>he.length)throw new RangeError("Index out of range");if(ke<0)throw new RangeError("Index out of range")}function ce(he,xe,ke,ze,Re){return xe=+xe,ke>>>=0,Re||se(he,0,ke,4),g.write(he,xe,ke,ze,23,4),ke+4}function de(he,xe,ke,ze,Re){return xe=+xe,ke>>>=0,Re||se(he,0,ke,8),g.write(he,xe,ke,ze,52,8),ke+8}d.prototype.slice=function(he,xe){var ke=this.length;(he=~~he)<0?(he+=ke)<0&&(he=0):he>ke&&(he=ke),(xe=xe===void 0?ke:~~xe)<0?(xe+=ke)<0&&(xe=0):xe>ke&&(xe=ke),xe<he&&(xe=he);var ze=this.subarray(he,xe);return Object.setPrototypeOf(ze,d.prototype),ze},d.prototype.readUintLE=d.prototype.readUIntLE=function(he,xe,ke){he>>>=0,xe>>>=0,ke||K(he,xe,this.length);for(var ze=this[he],Re=1,Oe=0;++Oe<xe&&(Re*=256);)ze+=this[he+Oe]*Re;return ze},d.prototype.readUintBE=d.prototype.readUIntBE=function(he,xe,ke){he>>>=0,xe>>>=0,ke||K(he,xe,this.length);for(var ze=this[he+--xe],Re=1;xe>0&&(Re*=256);)ze+=this[he+--xe]*Re;return ze},d.prototype.readUint8=d.prototype.readUInt8=function(he,xe){return he>>>=0,xe||K(he,1,this.length),this[he]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(he,xe){return he>>>=0,xe||K(he,2,this.length),this[he]|this[he+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(he,xe){return he>>>=0,xe||K(he,2,this.length),this[he]<<8|this[he+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(he,xe){return he>>>=0,xe||K(he,4,this.length),(this[he]|this[he+1]<<8|this[he+2]<<16)+16777216*this[he+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(he,xe){return he>>>=0,xe||K(he,4,this.length),16777216*this[he]+(this[he+1]<<16|this[he+2]<<8|this[he+3])},d.prototype.readBigUInt64LE=Le(function(he){Se(he>>>=0,"offset");var xe=this[he],ke=this[he+7];xe!==void 0&&ke!==void 0||we(he,this.length-8);var ze=xe+this[++he]*Math.pow(2,8)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,24),Re=this[++he]+this[++he]*Math.pow(2,8)+this[++he]*Math.pow(2,16)+ke*Math.pow(2,24);return BigInt(ze)+(BigInt(Re)<<BigInt(32))}),d.prototype.readBigUInt64BE=Le(function(he){Se(he>>>=0,"offset");var xe=this[he],ke=this[he+7];xe!==void 0&&ke!==void 0||we(he,this.length-8);var ze=xe*Math.pow(2,24)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,8)+this[++he],Re=this[++he]*Math.pow(2,24)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,8)+ke;return(BigInt(ze)<<BigInt(32))+BigInt(Re)}),d.prototype.readIntLE=function(he,xe,ke){he>>>=0,xe>>>=0,ke||K(he,xe,this.length);for(var ze=this[he],Re=1,Oe=0;++Oe<xe&&(Re*=256);)ze+=this[he+Oe]*Re;return ze>=(Re*=128)&&(ze-=Math.pow(2,8*xe)),ze},d.prototype.readIntBE=function(he,xe,ke){he>>>=0,xe>>>=0,ke||K(he,xe,this.length);for(var ze=xe,Re=1,Oe=this[he+--ze];ze>0&&(Re*=256);)Oe+=this[he+--ze]*Re;return Oe>=(Re*=128)&&(Oe-=Math.pow(2,8*xe)),Oe},d.prototype.readInt8=function(he,xe){return he>>>=0,xe||K(he,1,this.length),128&this[he]?-1*(255-this[he]+1):this[he]},d.prototype.readInt16LE=function(he,xe){he>>>=0,xe||K(he,2,this.length);var ke=this[he]|this[he+1]<<8;return 32768&ke?4294901760|ke:ke},d.prototype.readInt16BE=function(he,xe){he>>>=0,xe||K(he,2,this.length);var ke=this[he+1]|this[he]<<8;return 32768&ke?4294901760|ke:ke},d.prototype.readInt32LE=function(he,xe){return he>>>=0,xe||K(he,4,this.length),this[he]|this[he+1]<<8|this[he+2]<<16|this[he+3]<<24},d.prototype.readInt32BE=function(he,xe){return he>>>=0,xe||K(he,4,this.length),this[he]<<24|this[he+1]<<16|this[he+2]<<8|this[he+3]},d.prototype.readBigInt64LE=Le(function(he){Se(he>>>=0,"offset");var xe=this[he],ke=this[he+7];xe!==void 0&&ke!==void 0||we(he,this.length-8);var ze=this[he+4]+this[he+5]*Math.pow(2,8)+this[he+6]*Math.pow(2,16)+(ke<<24);return(BigInt(ze)<<BigInt(32))+BigInt(xe+this[++he]*Math.pow(2,8)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,24))}),d.prototype.readBigInt64BE=Le(function(he){Se(he>>>=0,"offset");var xe=this[he],ke=this[he+7];xe!==void 0&&ke!==void 0||we(he,this.length-8);var ze=(xe<<24)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,8)+this[++he];return(BigInt(ze)<<BigInt(32))+BigInt(this[++he]*Math.pow(2,24)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,8)+ke)}),d.prototype.readFloatLE=function(he,xe){return he>>>=0,xe||K(he,4,this.length),g.read(this,he,!0,23,4)},d.prototype.readFloatBE=function(he,xe){return he>>>=0,xe||K(he,4,this.length),g.read(this,he,!1,23,4)},d.prototype.readDoubleLE=function(he,xe){return he>>>=0,xe||K(he,8,this.length),g.read(this,he,!0,52,8)},d.prototype.readDoubleBE=function(he,xe){return he>>>=0,xe||K(he,8,this.length),g.read(this,he,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(he,xe,ke,ze){he=+he,xe>>>=0,ke>>>=0,ze||te(this,he,xe,ke,Math.pow(2,8*ke)-1,0);var Re=1,Oe=0;for(this[xe]=255&he;++Oe<ke&&(Re*=256);)this[xe+Oe]=he/Re&255;return xe+ke},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(he,xe,ke,ze){he=+he,xe>>>=0,ke>>>=0,ze||te(this,he,xe,ke,Math.pow(2,8*ke)-1,0);var Re=ke-1,Oe=1;for(this[xe+Re]=255&he;--Re>=0&&(Oe*=256);)this[xe+Re]=he/Oe&255;return xe+ke},d.prototype.writeUint8=d.prototype.writeUInt8=function(he,xe,ke){return he=+he,xe>>>=0,ke||te(this,he,xe,1,255,0),this[xe]=255&he,xe+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(he,xe,ke){return he=+he,xe>>>=0,ke||te(this,he,xe,2,65535,0),this[xe]=255&he,this[xe+1]=he>>>8,xe+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(he,xe,ke){return he=+he,xe>>>=0,ke||te(this,he,xe,2,65535,0),this[xe]=he>>>8,this[xe+1]=255&he,xe+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(he,xe,ke){return he=+he,xe>>>=0,ke||te(this,he,xe,4,4294967295,0),this[xe+3]=he>>>24,this[xe+2]=he>>>16,this[xe+1]=he>>>8,this[xe]=255&he,xe+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(he,xe,ke){return he=+he,xe>>>=0,ke||te(this,he,xe,4,4294967295,0),this[xe]=he>>>24,this[xe+1]=he>>>16,this[xe+2]=he>>>8,this[xe+3]=255&he,xe+4},d.prototype.writeBigUInt64LE=Le(function(he){return ie(this,he,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=Le(function(he){return ae(this,he,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(he,xe,ke,ze){if(he=+he,xe>>>=0,!ze){var Re=Math.pow(2,8*ke-1);te(this,he,xe,ke,Re-1,-Re)}var Oe=0,Ve=1,qe=0;for(this[xe]=255&he;++Oe<ke&&(Ve*=256);)he<0&&qe===0&&this[xe+Oe-1]!==0&&(qe=1),this[xe+Oe]=(he/Ve>>0)-qe&255;return xe+ke},d.prototype.writeIntBE=function(he,xe,ke,ze){if(he=+he,xe>>>=0,!ze){var Re=Math.pow(2,8*ke-1);te(this,he,xe,ke,Re-1,-Re)}var Oe=ke-1,Ve=1,qe=0;for(this[xe+Oe]=255&he;--Oe>=0&&(Ve*=256);)he<0&&qe===0&&this[xe+Oe+1]!==0&&(qe=1),this[xe+Oe]=(he/Ve>>0)-qe&255;return xe+ke},d.prototype.writeInt8=function(he,xe,ke){return he=+he,xe>>>=0,ke||te(this,he,xe,1,127,-128),he<0&&(he=255+he+1),this[xe]=255&he,xe+1},d.prototype.writeInt16LE=function(he,xe,ke){return he=+he,xe>>>=0,ke||te(this,he,xe,2,32767,-32768),this[xe]=255&he,this[xe+1]=he>>>8,xe+2},d.prototype.writeInt16BE=function(he,xe,ke){return he=+he,xe>>>=0,ke||te(this,he,xe,2,32767,-32768),this[xe]=he>>>8,this[xe+1]=255&he,xe+2},d.prototype.writeInt32LE=function(he,xe,ke){return he=+he,xe>>>=0,ke||te(this,he,xe,4,2147483647,-2147483648),this[xe]=255&he,this[xe+1]=he>>>8,this[xe+2]=he>>>16,this[xe+3]=he>>>24,xe+4},d.prototype.writeInt32BE=function(he,xe,ke){return he=+he,xe>>>=0,ke||te(this,he,xe,4,2147483647,-2147483648),he<0&&(he=4294967295+he+1),this[xe]=he>>>24,this[xe+1]=he>>>16,this[xe+2]=he>>>8,this[xe+3]=255&he,xe+4},d.prototype.writeBigInt64LE=Le(function(he){return ie(this,he,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=Le(function(he){return ae(this,he,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeFloatLE=function(he,xe,ke){return ce(this,he,xe,!0,ke)},d.prototype.writeFloatBE=function(he,xe,ke){return ce(this,he,xe,!1,ke)},d.prototype.writeDoubleLE=function(he,xe,ke){return de(this,he,xe,!0,ke)},d.prototype.writeDoubleBE=function(he,xe,ke){return de(this,he,xe,!1,ke)},d.prototype.copy=function(he,xe,ke,ze){if(!d.isBuffer(he))throw new TypeError("argument should be a Buffer");if(ke||(ke=0),ze||ze===0||(ze=this.length),xe>=he.length&&(xe=he.length),xe||(xe=0),ze>0&&ze<ke&&(ze=ke),ze===ke||he.length===0||this.length===0)return 0;if(xe<0)throw new RangeError("targetStart out of bounds");if(ke<0||ke>=this.length)throw new RangeError("Index out of range");if(ze<0)throw new RangeError("sourceEnd out of bounds");ze>this.length&&(ze=this.length),he.length-xe<ze-ke&&(ze=he.length-xe+ke);var Re=ze-ke;return this===he&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(xe,ke,ze):Uint8Array.prototype.set.call(he,this.subarray(ke,ze),xe),Re},d.prototype.fill=function(he,xe,ke,ze){if(typeof he=="string"){if(typeof xe=="string"?(ze=xe,xe=0,ke=this.length):typeof ke=="string"&&(ze=ke,ke=this.length),ze!==void 0&&typeof ze!="string")throw new TypeError("encoding must be a string");if(typeof ze=="string"&&!d.isEncoding(ze))throw new TypeError("Unknown encoding: "+ze);if(he.length===1){var Re=he.charCodeAt(0);(ze==="utf8"&&Re<128||ze==="latin1")&&(he=Re)}}else typeof he=="number"?he&=255:typeof he=="boolean"&&(he=Number(he));if(xe<0||this.length<xe||this.length<ke)throw new RangeError("Out of range index");if(ke<=xe)return this;var Oe;if(xe>>>=0,ke=ke===void 0?this.length:ke>>>0,he||(he=0),typeof he=="number")for(Oe=xe;Oe<ke;++Oe)this[Oe]=he;else{var Ve=d.isBuffer(he)?he:d.from(he,ze),qe=Ve.length;if(qe===0)throw new TypeError('The value "'+he+'" is invalid for argument "value"');for(Oe=0;Oe<ke-xe;++Oe)this[Oe+xe]=Ve[Oe%qe]}return this};var ge={};function ve(he,xe,ke){ge[he]=function(ze){(function(rt,dt){if(typeof dt!="function"&&dt!==null)throw new TypeError("Super expression must either be null or a function");rt.prototype=Object.create(dt&&dt.prototype,{constructor:{value:rt,writable:!0,configurable:!0}}),Object.defineProperty(rt,"prototype",{writable:!1}),dt&&r(rt,dt)})(ot,ze);var Re,Oe,Ve,qe,Je=(Ve=ot,qe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var rt,dt=l(Ve);if(qe){var _t=l(this).constructor;rt=Reflect.construct(dt,arguments,_t)}else rt=dt.apply(this,arguments);return function(yt,et){if(et&&(u(et)==="object"||typeof et=="function"))return et;if(et!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i(yt)}(this,rt)});function ot(){var rt;return function(dt,_t){if(!(dt instanceof _t))throw new TypeError("Cannot call a class as a function")}(this,ot),rt=Je.call(this),Object.defineProperty(i(rt),"message",{value:xe.apply(i(rt),arguments),writable:!0,configurable:!0}),rt.name="".concat(rt.name," [").concat(he,"]"),rt.stack,delete rt.name,rt}return Re=ot,(Oe=[{key:"code",get:function(){return he},set:function(rt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:rt,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(he,"]: ").concat(this.message)}}])&&a(Re.prototype,Oe),Object.defineProperty(Re,"prototype",{writable:!1}),ot}(ke)}function be(he){for(var xe="",ke=he.length,ze=he[0]==="-"?1:0;ke>=ze+4;ke-=3)xe="_".concat(he.slice(ke-3,ke)).concat(xe);return"".concat(he.slice(0,ke)).concat(xe)}function me(he,xe,ke,ze,Re,Oe){if(he>ke||he<xe){var Ve,qe=typeof xe=="bigint"?"n":"";throw Ve=Oe>3?xe===0||xe===BigInt(0)?">= 0".concat(qe," and < 2").concat(qe," ** ").concat(8*(Oe+1)).concat(qe):">= -(2".concat(qe," ** ").concat(8*(Oe+1)-1).concat(qe,") and < 2 ** ")+"".concat(8*(Oe+1)-1).concat(qe):">= ".concat(xe).concat(qe," and <= ").concat(ke).concat(qe),new ge.ERR_OUT_OF_RANGE("value",Ve,he)}(function(Je,ot,rt){Se(ot,"offset"),Je[ot]!==void 0&&Je[ot+rt]!==void 0||we(ot,Je.length-(rt+1))})(ze,Re,Oe)}function Se(he,xe){if(typeof he!="number")throw new ge.ERR_INVALID_ARG_TYPE(xe,"number",he)}function we(he,xe,ke){throw Math.floor(he)!==he?(Se(he,ke),new ge.ERR_OUT_OF_RANGE(ke||"offset","an integer",he)):xe<0?new ge.ERR_BUFFER_OUT_OF_BOUNDS:new ge.ERR_OUT_OF_RANGE(ke||"offset",">= ".concat(ke?1:0," and <= ").concat(xe),he)}ve("ERR_BUFFER_OUT_OF_BOUNDS",function(he){return he?"".concat(he," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),ve("ERR_INVALID_ARG_TYPE",function(he,xe){return'The "'.concat(he,'" argument must be of type number. Received type ').concat(u(xe))},TypeError),ve("ERR_OUT_OF_RANGE",function(he,xe,ke){var ze='The value of "'.concat(he,'" is out of range.'),Re=ke;return Number.isInteger(ke)&&Math.abs(ke)>Math.pow(2,32)?Re=be(String(ke)):typeof ke=="bigint"&&(Re=String(ke),(ke>Math.pow(BigInt(2),BigInt(32))||ke<-Math.pow(BigInt(2),BigInt(32)))&&(Re=be(Re)),Re+="n"),ze+" It must be ".concat(xe,". Received ").concat(Re)},RangeError);var _e=/[^+/0-9A-Za-z-_]/g;function oe(he,xe){var ke;xe=xe||1/0;for(var ze=he.length,Re=null,Oe=[],Ve=0;Ve<ze;++Ve){if((ke=he.charCodeAt(Ve))>55295&&ke<57344){if(!Re){if(ke>56319){(xe-=3)>-1&&Oe.push(239,191,189);continue}if(Ve+1===ze){(xe-=3)>-1&&Oe.push(239,191,189);continue}Re=ke;continue}if(ke<56320){(xe-=3)>-1&&Oe.push(239,191,189),Re=ke;continue}ke=65536+(Re-55296<<10|ke-56320)}else Re&&(xe-=3)>-1&&Oe.push(239,191,189);if(Re=null,ke<128){if((xe-=1)<0)break;Oe.push(ke)}else if(ke<2048){if((xe-=2)<0)break;Oe.push(ke>>6|192,63&ke|128)}else if(ke<65536){if((xe-=3)<0)break;Oe.push(ke>>12|224,ke>>6&63|128,63&ke|128)}else{if(!(ke<1114112))throw new Error("Invalid code point");if((xe-=4)<0)break;Oe.push(ke>>18|240,ke>>12&63|128,ke>>6&63|128,63&ke|128)}}return Oe}function le(he){return c.toByteArray(function(xe){if((xe=(xe=xe.split("=")[0]).trim().replace(_e,"")).length<2)return"";for(;xe.length%4!=0;)xe+="=";return xe}(he))}function pe(he,xe,ke,ze){var Re;for(Re=0;Re<ze&&!(Re+ke>=xe.length||Re>=he.length);++Re)xe[Re+ke]=he[Re];return Re}function Ee(he,xe){return he instanceof xe||he!=null&&he.constructor!=null&&he.constructor.name!=null&&he.constructor.name===xe.name}function Te(he){return he!=he}var Me=function(){for(var he="0123456789abcdef",xe=new Array(256),ke=0;ke<16;++ke)for(var ze=16*ke,Re=0;Re<16;++Re)xe[ze+Re]=he[ke]+he[Re];return xe}();function Le(he){return typeof BigInt>"u"?Ie:he}function Ie(){throw new Error("BigInt not supported")}},2321:function(p){p.exports=r,p.exports.isMobile=r,p.exports.default=r;var s=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,n=/CrOS/,a=/android|ipad|playbook|silk/i;function r(i){i||(i={});var l=i.ua;if(l||typeof navigator>"u"||(l=navigator.userAgent),l&&l.headers&&typeof l.headers["user-agent"]=="string"&&(l=l.headers["user-agent"]),typeof l!="string")return!1;var u=s.test(l)&&!n.test(l)||!!i.tablet&&a.test(l);return!u&&i.tablet&&i.featureDetect&&navigator&&navigator.maxTouchPoints>1&&l.indexOf("Macintosh")!==-1&&l.indexOf("Safari")!==-1&&(u=!0),u}},3910:function(p,s){s.byteLength=function(g){var f=u(g),b=f[0],v=f[1];return 3*(b+v)/4-v},s.toByteArray=function(g){var f,b,v=u(g),d=v[0],m=v[1],x=new r(function(h,E,k){return 3*(E+k)/4-k}(0,d,m)),y=0,T=m>0?d-4:d;for(b=0;b<T;b+=4)f=a[g.charCodeAt(b)]<<18|a[g.charCodeAt(b+1)]<<12|a[g.charCodeAt(b+2)]<<6|a[g.charCodeAt(b+3)],x[y++]=f>>16&255,x[y++]=f>>8&255,x[y++]=255&f;return m===2&&(f=a[g.charCodeAt(b)]<<2|a[g.charCodeAt(b+1)]>>4,x[y++]=255&f),m===1&&(f=a[g.charCodeAt(b)]<<10|a[g.charCodeAt(b+1)]<<4|a[g.charCodeAt(b+2)]>>2,x[y++]=f>>8&255,x[y++]=255&f),x},s.fromByteArray=function(g){for(var f,b=g.length,v=b%3,d=[],m=16383,x=0,y=b-v;x<y;x+=m)d.push(c(g,x,x+m>y?y:x+m));return v===1?(f=g[b-1],d.push(n[f>>2]+n[f<<4&63]+"==")):v===2&&(f=(g[b-2]<<8)+g[b-1],d.push(n[f>>10]+n[f>>4&63]+n[f<<2&63]+"=")),d.join("")};for(var n=[],a=[],r=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0;l<64;++l)n[l]=i[l],a[i.charCodeAt(l)]=l;function u(g){var f=g.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=g.indexOf("=");return b===-1&&(b=f),[b,b===f?0:4-b%4]}function c(g,f,b){for(var v,d,m=[],x=f;x<b;x+=3)v=(g[x]<<16&16711680)+(g[x+1]<<8&65280)+(255&g[x+2]),m.push(n[(d=v)>>18&63]+n[d>>12&63]+n[d>>6&63]+n[63&d]);return m.join("")}a[45]=62,a[95]=63},3187:function(p,s){s.read=function(n,a,r,i,l){var u,c,g=8*l-i-1,f=(1<<g)-1,b=f>>1,v=-7,d=r?l-1:0,m=r?-1:1,x=n[a+d];for(d+=m,u=x&(1<<-v)-1,x>>=-v,v+=g;v>0;u=256*u+n[a+d],d+=m,v-=8);for(c=u&(1<<-v)-1,u>>=-v,v+=i;v>0;c=256*c+n[a+d],d+=m,v-=8);if(u===0)u=1-b;else{if(u===f)return c?NaN:1/0*(x?-1:1);c+=Math.pow(2,i),u-=b}return(x?-1:1)*c*Math.pow(2,u-i)},s.write=function(n,a,r,i,l,u){var c,g,f,b=8*u-l-1,v=(1<<b)-1,d=v>>1,m=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=i?0:u-1,y=i?1:-1,T=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(g=isNaN(a)?1:0,c=v):(c=Math.floor(Math.log(a)/Math.LN2),a*(f=Math.pow(2,-c))<1&&(c--,f*=2),(a+=c+d>=1?m/f:m*Math.pow(2,1-d))*f>=2&&(c++,f/=2),c+d>=v?(g=0,c=v):c+d>=1?(g=(a*f-1)*Math.pow(2,l),c+=d):(g=a*Math.pow(2,d-1)*Math.pow(2,l),c=0));l>=8;n[r+x]=255&g,x+=y,g/=256,l-=8);for(c=c<<l|g,b+=l;b>0;n[r+x]=255&c,x+=y,c/=256,b-=8);n[r+x-y]|=128*T}},1152:function(p,s,n){p.exports=function(c){var g=(c=c||{}).eye||[0,0,1],f=c.center||[0,0,0],b=c.up||[0,1,0],v=c.distanceLimits||[0,1/0],d=c.mode||"turntable",m=a(),x=r(),y=i();return m.setDistanceLimits(v[0],v[1]),m.lookAt(0,g,f,b),x.setDistanceLimits(v[0],v[1]),x.lookAt(0,g,f,b),y.setDistanceLimits(v[0],v[1]),y.lookAt(0,g,f,b),new l({turntable:m,orbit:x,matrix:y},d)};var a=n(3440),r=n(7774),i=n(9298);function l(c,g){this._controllerNames=Object.keys(c),this._controllerList=this._controllerNames.map(function(f){return c[f]}),this._mode=g,this._active=c[g],this._active||(this._mode="turntable",this._active=c.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var u=l.prototype;u.flush=function(c){for(var g=this._controllerList,f=0;f<g.length;++f)g[f].flush(c)},u.idle=function(c){for(var g=this._controllerList,f=0;f<g.length;++f)g[f].idle(c)},u.lookAt=function(c,g,f,b){for(var v=this._controllerList,d=0;d<v.length;++d)v[d].lookAt(c,g,f,b)},u.rotate=function(c,g,f,b){for(var v=this._controllerList,d=0;d<v.length;++d)v[d].rotate(c,g,f,b)},u.pan=function(c,g,f,b){for(var v=this._controllerList,d=0;d<v.length;++d)v[d].pan(c,g,f,b)},u.translate=function(c,g,f,b){for(var v=this._controllerList,d=0;d<v.length;++d)v[d].translate(c,g,f,b)},u.setMatrix=function(c,g){for(var f=this._controllerList,b=0;b<f.length;++b)f[b].setMatrix(c,g)},u.setDistanceLimits=function(c,g){for(var f=this._controllerList,b=0;b<f.length;++b)f[b].setDistanceLimits(c,g)},u.setDistance=function(c,g){for(var f=this._controllerList,b=0;b<f.length;++b)f[b].setDistance(c,g)},u.recalcMatrix=function(c){this._active.recalcMatrix(c)},u.getDistance=function(c){return this._active.getDistance(c)},u.getDistanceLimits=function(c){return this._active.getDistanceLimits(c)},u.lastT=function(){return this._active.lastT()},u.setMode=function(c){if(c!==this._mode){var g=this._controllerNames.indexOf(c);if(!(g<0)){var f=this._active,b=this._controllerList[g],v=Math.max(f.lastT(),b.lastT());f.recalcMatrix(v),b.setMatrix(v,f.computedMatrix),this._active=b,this._mode=c,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},u.getMode=function(){return this._mode}},8126:function(p,s,n){var a=typeof WeakMap>"u"?n(5346):WeakMap,r=n(5827),i=n(2944),l=new a;p.exports=function(u){var c=l.get(u),g=c&&(c._triangleBuffer.handle||c._triangleBuffer.buffer);if(!g||!u.isBuffer(g)){var f=r(u,new Float32Array([-1,-1,-1,4,4,-1]));(c=i(u,[{buffer:f,type:u.FLOAT,size:2}]))._triangleBuffer=f,l.set(u,c)}c.bind(),u.drawArrays(u.TRIANGLES,0,3),c.unbind()}},8008:function(p,s,n){var a=n(4930);p.exports=function(r,i,l){i=typeof i=="number"?i:1,l=l||": ";var u=r.split(/\r?\n/),c=String(u.length+i-1).length;return u.map(function(g,f){var b=f+i,v=String(b).length;return a(b,c-v)+l+g}).join(`
`)}},2153:function(p,s,n){p.exports=function(i){var l=i.length;if(l===0)return[];if(l===1)return[0];for(var u=i[0].length,c=[i[0]],g=[0],f=1;f<l;++f)if(c.push(i[f]),r(c,u)){if(g.push(f),g.length===u+1)return g}else c.pop();return g};var a=n(417);function r(i,l){for(var u=new Array(l+1),c=0;c<i.length;++c)u[c]=i[c];for(c=0;c<=i.length;++c){for(var g=i.length;g<=l;++g){for(var f=new Array(l),b=0;b<l;++b)f[b]=Math.pow(g+1-c,b);u[g]=f}if(a.apply(void 0,u))return!0}return!1}},4653:function(p,s,n){p.exports=function(i,l){return a(l).filter(function(u){for(var c=new Array(u.length),g=0;g<u.length;++g)c[g]=l[u[g]];return r(c)*i<1})};var a=n(4419),r=n(1778)},2350:function(p,s,n){p.exports=function(i,l){return r(a(i,l))};var a=n(4653),r=n(8691)},7896:function(p){p.exports=function(s){return atob(s)}},957:function(p,s,n){p.exports=function(i,l){for(var u=l.length,c=new Array(u+1),g=0;g<u;++g){for(var f=new Array(u+1),b=0;b<=u;++b)f[b]=i[b][g];c[g]=f}for(c[u]=new Array(u+1),g=0;g<=u;++g)c[u][g]=1;var v=new Array(u+1);for(g=0;g<u;++g)v[g]=l[g];v[u]=1;var d=a(c,v),m=r(d[u+1]);m===0&&(m=1);var x=new Array(u+1);for(g=0;g<=u;++g)x[g]=r(d[g])/m;return x};var a=n(6606);function r(i){for(var l=0,u=0;u<i.length;++u)l+=i[u];return l}},1539:function(p,s,n){var a=n(8524);p.exports=function(r,i){return a(r[0].mul(i[1]).add(i[0].mul(r[1])),r[1].mul(i[1]))}},8846:function(p){p.exports=function(s,n){return s[0].mul(n[1]).cmp(n[0].mul(s[1]))}},9189:function(p,s,n){var a=n(8524);p.exports=function(r,i){return a(r[0].mul(i[1]),r[1].mul(i[0]))}},5125:function(p,s,n){var a=n(234),r=n(3218),i=n(5514),l=n(2813),u=n(8524),c=n(9189);p.exports=function g(f,b){if(a(f))return b?c(f,g(b)):[f[0].clone(),f[1].clone()];var v,d,m=0;if(r(f))v=f.clone();else if(typeof f=="string")v=l(f);else{if(f===0)return[i(0),i(1)];if(f===Math.floor(f))v=i(f);else{for(;f!==Math.floor(f);)f*=Math.pow(2,256),m-=256;v=i(f)}}if(a(b))v.mul(b[1]),d=b[0].clone();else if(r(b))d=b.clone();else if(typeof b=="string")d=l(b);else if(b)if(b===Math.floor(b))d=i(b);else{for(;b!==Math.floor(b);)b*=Math.pow(2,256),m+=256;d=i(b)}else d=i(1);return m>0?v=v.ushln(m):m<0&&(d=d.ushln(-m)),u(v,d)}},234:function(p,s,n){var a=n(3218);p.exports=function(r){return Array.isArray(r)&&r.length===2&&a(r[0])&&a(r[1])}},4275:function(p,s,n){var a=n(1928);p.exports=function(r){return r.cmp(new a(0))}},9958:function(p,s,n){var a=n(4275);p.exports=function(r){var i=r.length,l=r.words,u=0;if(i===1)u=l[0];else if(i===2)u=l[0]+67108864*l[1];else for(var c=0;c<i;c++)u+=l[c]*Math.pow(67108864,c);return a(r)*u}},1112:function(p,s,n){var a=n(8362),r=n(2288).countTrailingZeros;p.exports=function(i){var l=r(a.lo(i));if(l<32)return l;var u=r(a.hi(i));return u>20?52:u+32}},3218:function(p,s,n){n(1928),p.exports=function(a){return a&&typeof a=="object"&&!!a.words}},5514:function(p,s,n){var a=n(1928),r=n(8362);p.exports=function(i){var l=r.exponent(i);return l<52?new a(i):new a(i*Math.pow(2,52-l)).ushln(l-52)}},8524:function(p,s,n){var a=n(5514),r=n(4275);p.exports=function(i,l){var u=r(i),c=r(l);if(u===0)return[a(0),a(1)];if(c===0)return[a(0),a(0)];c<0&&(i=i.neg(),l=l.neg());var g=i.gcd(l);return g.cmpn(1)?[i.div(g),l.div(g)]:[i,l]}},2813:function(p,s,n){var a=n(1928);p.exports=function(r){return new a(r)}},3962:function(p,s,n){var a=n(8524);p.exports=function(r,i){return a(r[0].mul(i[0]),r[1].mul(i[1]))}},4951:function(p,s,n){var a=n(4275);p.exports=function(r){return a(r[0])*a(r[1])}},4354:function(p,s,n){var a=n(8524);p.exports=function(r,i){return a(r[0].mul(i[1]).sub(r[1].mul(i[0])),r[1].mul(i[1]))}},7999:function(p,s,n){var a=n(9958),r=n(1112);p.exports=function(i){var l=i[0],u=i[1];if(l.cmpn(0)===0)return 0;var c=l.abs().divmod(u.abs()),g=c.div,f=a(g),b=c.mod,v=l.negative!==u.negative?-1:1;if(b.cmpn(0)===0)return v*f;if(f){var d=r(f)+4;return v*(f+(x=a(b.ushln(d).divRound(u)))*Math.pow(2,-d))}var m=u.bitLength()-b.bitLength()+53,x=a(b.ushln(m).divRound(u));return m<1023?v*x*Math.pow(2,-m):v*(x*=Math.pow(2,-1023))*Math.pow(2,1023-m)}},5070:function(p){function s(u,c,g,f,b){for(var v=b+1;f<=b;){var d=f+b>>>1,m=u[d];(g!==void 0?g(m,c):m-c)>=0?(v=d,b=d-1):f=d+1}return v}function n(u,c,g,f,b){for(var v=b+1;f<=b;){var d=f+b>>>1,m=u[d];(g!==void 0?g(m,c):m-c)>0?(v=d,b=d-1):f=d+1}return v}function a(u,c,g,f,b){for(var v=f-1;f<=b;){var d=f+b>>>1,m=u[d];(g!==void 0?g(m,c):m-c)<0?(v=d,f=d+1):b=d-1}return v}function r(u,c,g,f,b){for(var v=f-1;f<=b;){var d=f+b>>>1,m=u[d];(g!==void 0?g(m,c):m-c)<=0?(v=d,f=d+1):b=d-1}return v}function i(u,c,g,f,b){for(;f<=b;){var v=f+b>>>1,d=u[v],m=g!==void 0?g(d,c):d-c;if(m===0)return v;m<=0?f=v+1:b=v-1}return-1}function l(u,c,g,f,b,v){return typeof g=="function"?v(u,c,g,f===void 0?0:0|f,b===void 0?u.length-1:0|b):v(u,c,void 0,g===void 0?0:0|g,f===void 0?u.length-1:0|f)}p.exports={ge:function(u,c,g,f,b){return l(u,c,g,f,b,s)},gt:function(u,c,g,f,b){return l(u,c,g,f,b,n)},lt:function(u,c,g,f,b){return l(u,c,g,f,b,a)},le:function(u,c,g,f,b){return l(u,c,g,f,b,r)},eq:function(u,c,g,f,b){return l(u,c,g,f,b,i)}}},2288:function(p,s){function n(r){var i=32;return(r&=-r)&&i--,65535&r&&(i-=16),16711935&r&&(i-=8),252645135&r&&(i-=4),858993459&r&&(i-=2),1431655765&r&&(i-=1),i}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(r){return(r>0)-(r<0)},s.abs=function(r){var i=r>>31;return(r^i)-i},s.min=function(r,i){return i^(r^i)&-(r<i)},s.max=function(r,i){return r^(r^i)&-(r<i)},s.isPow2=function(r){return!(r&r-1||!r)},s.log2=function(r){var i,l;return i=(r>65535)<<4,i|=l=((r>>>=i)>255)<<3,i|=l=((r>>>=l)>15)<<2,(i|=l=((r>>>=l)>3)<<1)|(r>>>=l)>>1},s.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},s.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},s.countTrailingZeros=n,s.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},s.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},s.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var a=new Array(256);(function(r){for(var i=0;i<256;++i){var l=i,u=i,c=7;for(l>>>=1;l;l>>>=1)u<<=1,u|=1&l,--c;r[i]=u<<c&255}})(a),s.reverse=function(r){return a[255&r]<<24|a[r>>>8&255]<<16|a[r>>>16&255]<<8|a[r>>>24&255]},s.interleave2=function(r,i){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i&=65535)|i<<8))|i<<4))|i<<2))|i<<1))<<1},s.deinterleave2=function(r,i){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>i&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},s.interleave3=function(r,i,l){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<1)|(l=1227133513&((l=3272356035&((l=251719695&((l=4278190335&((l&=1023)|l<<16))|l<<8))|l<<4))|l<<2))<<2},s.deinterleave3=function(r,i){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>i&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},s.nextCombination=function(r){var i=r|r-1;return i+1|(~i&-~i)-1>>>n(r)+1}},1928:function(p,s,n){(function(a,r){function i(R,j){if(!R)throw new Error(j||"Assertion failed")}function l(R,j){R.super_=j;var Z=function(){};Z.prototype=j.prototype,R.prototype=new Z,R.prototype.constructor=R}function u(R,j,Z){if(u.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,R!==null&&(j!=="le"&&j!=="be"||(Z=j,j=10),this._init(R||0,j||10,Z||"be"))}var c;typeof a=="object"?a.exports=u:r.BN=u,u.BN=u,u.wordSize=26;try{c=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:n(6601).Buffer}catch{}function g(R,j){var Z=R.charCodeAt(j);return Z>=65&&Z<=70?Z-55:Z>=97&&Z<=102?Z-87:Z-48&15}function f(R,j,Z){var B=g(R,Z);return Z-1>=j&&(B|=g(R,Z-1)<<4),B}function b(R,j,Z,B){for(var q=0,V=Math.min(R.length,Z),ne=j;ne<V;ne++){var ee=R.charCodeAt(ne)-48;q*=B,q+=ee>=49?ee-49+10:ee>=17?ee-17+10:ee}return q}u.isBN=function(R){return R instanceof u||R!==null&&typeof R=="object"&&R.constructor.wordSize===u.wordSize&&Array.isArray(R.words)},u.max=function(R,j){return R.cmp(j)>0?R:j},u.min=function(R,j){return R.cmp(j)<0?R:j},u.prototype._init=function(R,j,Z){if(typeof R=="number")return this._initNumber(R,j,Z);if(typeof R=="object")return this._initArray(R,j,Z);j==="hex"&&(j=16),i(j===(0|j)&&j>=2&&j<=36);var B=0;(R=R.toString().replace(/\s+/g,""))[0]==="-"&&(B++,this.negative=1),B<R.length&&(j===16?this._parseHex(R,B,Z):(this._parseBase(R,j,B),Z==="le"&&this._initArray(this.toArray(),j,Z)))},u.prototype._initNumber=function(R,j,Z){R<0&&(this.negative=1,R=-R),R<67108864?(this.words=[67108863&R],this.length=1):R<4503599627370496?(this.words=[67108863&R,R/67108864&67108863],this.length=2):(i(R<9007199254740992),this.words=[67108863&R,R/67108864&67108863,1],this.length=3),Z==="le"&&this._initArray(this.toArray(),j,Z)},u.prototype._initArray=function(R,j,Z){if(i(typeof R.length=="number"),R.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(R.length/3),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var q,V,ne=0;if(Z==="be")for(B=R.length-1,q=0;B>=0;B-=3)V=R[B]|R[B-1]<<8|R[B-2]<<16,this.words[q]|=V<<ne&67108863,this.words[q+1]=V>>>26-ne&67108863,(ne+=24)>=26&&(ne-=26,q++);else if(Z==="le")for(B=0,q=0;B<R.length;B+=3)V=R[B]|R[B+1]<<8|R[B+2]<<16,this.words[q]|=V<<ne&67108863,this.words[q+1]=V>>>26-ne&67108863,(ne+=24)>=26&&(ne-=26,q++);return this.strip()},u.prototype._parseHex=function(R,j,Z){this.length=Math.ceil((R.length-j)/6),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var q,V=0,ne=0;if(Z==="be")for(B=R.length-1;B>=j;B-=2)q=f(R,j,B)<<V,this.words[ne]|=67108863&q,V>=18?(V-=18,ne+=1,this.words[ne]|=q>>>26):V+=8;else for(B=(R.length-j)%2==0?j+1:j;B<R.length;B+=2)q=f(R,j,B)<<V,this.words[ne]|=67108863&q,V>=18?(V-=18,ne+=1,this.words[ne]|=q>>>26):V+=8;this.strip()},u.prototype._parseBase=function(R,j,Z){this.words=[0],this.length=1;for(var B=0,q=1;q<=67108863;q*=j)B++;B--,q=q/j|0;for(var V=R.length-Z,ne=V%B,ee=Math.min(V,V-ne)+Z,$=0,J=Z;J<ee;J+=B)$=b(R,J,J+B,j),this.imuln(q),this.words[0]+$<67108864?this.words[0]+=$:this._iaddn($);if(ne!==0){var K=1;for($=b(R,J,R.length,j),J=0;J<ne;J++)K*=j;this.imuln(K),this.words[0]+$<67108864?this.words[0]+=$:this._iaddn($)}this.strip()},u.prototype.copy=function(R){R.words=new Array(this.length);for(var j=0;j<this.length;j++)R.words[j]=this.words[j];R.length=this.length,R.negative=this.negative,R.red=this.red},u.prototype.clone=function(){var R=new u(null);return this.copy(R),R},u.prototype._expand=function(R){for(;this.length<R;)this.words[this.length++]=0;return this},u.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},u.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},u.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function x(R,j,Z){Z.negative=j.negative^R.negative;var B=R.length+j.length|0;Z.length=B,B=B-1|0;var q=0|R.words[0],V=0|j.words[0],ne=q*V,ee=67108863&ne,$=ne/67108864|0;Z.words[0]=ee;for(var J=1;J<B;J++){for(var K=$>>>26,te=67108863&$,ie=Math.min(J,j.length-1),ae=Math.max(0,J-R.length+1);ae<=ie;ae++){var se=J-ae|0;K+=(ne=(q=0|R.words[se])*(V=0|j.words[ae])+te)/67108864|0,te=67108863&ne}Z.words[J]=0|te,$=0|K}return $!==0?Z.words[J]=0|$:Z.length--,Z.strip()}u.prototype.toString=function(R,j){var Z;if(j=0|j||1,(R=R||10)===16||R==="hex"){Z="";for(var B=0,q=0,V=0;V<this.length;V++){var ne=this.words[V],ee=(16777215&(ne<<B|q)).toString(16);Z=(q=ne>>>24-B&16777215)!=0||V!==this.length-1?v[6-ee.length]+ee+Z:ee+Z,(B+=2)>=26&&(B-=26,V--)}for(q!==0&&(Z=q.toString(16)+Z);Z.length%j!=0;)Z="0"+Z;return this.negative!==0&&(Z="-"+Z),Z}if(R===(0|R)&&R>=2&&R<=36){var $=d[R],J=m[R];Z="";var K=this.clone();for(K.negative=0;!K.isZero();){var te=K.modn(J).toString(R);Z=(K=K.idivn(J)).isZero()?te+Z:v[$-te.length]+te+Z}for(this.isZero()&&(Z="0"+Z);Z.length%j!=0;)Z="0"+Z;return this.negative!==0&&(Z="-"+Z),Z}i(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var R=this.words[0];return this.length===2?R+=67108864*this.words[1]:this.length===3&&this.words[2]===1?R+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-R:R},u.prototype.toJSON=function(){return this.toString(16)},u.prototype.toBuffer=function(R,j){return i(c!==void 0),this.toArrayLike(c,R,j)},u.prototype.toArray=function(R,j){return this.toArrayLike(Array,R,j)},u.prototype.toArrayLike=function(R,j,Z){var B=this.byteLength(),q=Z||Math.max(1,B);i(B<=q,"byte array longer than desired length"),i(q>0,"Requested array length <= 0"),this.strip();var V,ne,ee=j==="le",$=new R(q),J=this.clone();if(ee){for(ne=0;!J.isZero();ne++)V=J.andln(255),J.iushrn(8),$[ne]=V;for(;ne<q;ne++)$[ne]=0}else{for(ne=0;ne<q-B;ne++)$[ne]=0;for(ne=0;!J.isZero();ne++)V=J.andln(255),J.iushrn(8),$[q-ne-1]=V}return $},Math.clz32?u.prototype._countBits=function(R){return 32-Math.clz32(R)}:u.prototype._countBits=function(R){var j=R,Z=0;return j>=4096&&(Z+=13,j>>>=13),j>=64&&(Z+=7,j>>>=7),j>=8&&(Z+=4,j>>>=4),j>=2&&(Z+=2,j>>>=2),Z+j},u.prototype._zeroBits=function(R){if(R===0)return 26;var j=R,Z=0;return!(8191&j)&&(Z+=13,j>>>=13),!(127&j)&&(Z+=7,j>>>=7),!(15&j)&&(Z+=4,j>>>=4),!(3&j)&&(Z+=2,j>>>=2),!(1&j)&&Z++,Z},u.prototype.bitLength=function(){var R=this.words[this.length-1],j=this._countBits(R);return 26*(this.length-1)+j},u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var R=0,j=0;j<this.length;j++){var Z=this._zeroBits(this.words[j]);if(R+=Z,Z!==26)break}return R},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(R){return this.negative!==0?this.abs().inotn(R).iaddn(1):this.clone()},u.prototype.fromTwos=function(R){return this.testn(R-1)?this.notn(R).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return this.negative!==0},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(R){for(;this.length<R.length;)this.words[this.length++]=0;for(var j=0;j<R.length;j++)this.words[j]=this.words[j]|R.words[j];return this.strip()},u.prototype.ior=function(R){return i((this.negative|R.negative)==0),this.iuor(R)},u.prototype.or=function(R){return this.length>R.length?this.clone().ior(R):R.clone().ior(this)},u.prototype.uor=function(R){return this.length>R.length?this.clone().iuor(R):R.clone().iuor(this)},u.prototype.iuand=function(R){var j;j=this.length>R.length?R:this;for(var Z=0;Z<j.length;Z++)this.words[Z]=this.words[Z]&R.words[Z];return this.length=j.length,this.strip()},u.prototype.iand=function(R){return i((this.negative|R.negative)==0),this.iuand(R)},u.prototype.and=function(R){return this.length>R.length?this.clone().iand(R):R.clone().iand(this)},u.prototype.uand=function(R){return this.length>R.length?this.clone().iuand(R):R.clone().iuand(this)},u.prototype.iuxor=function(R){var j,Z;this.length>R.length?(j=this,Z=R):(j=R,Z=this);for(var B=0;B<Z.length;B++)this.words[B]=j.words[B]^Z.words[B];if(this!==j)for(;B<j.length;B++)this.words[B]=j.words[B];return this.length=j.length,this.strip()},u.prototype.ixor=function(R){return i((this.negative|R.negative)==0),this.iuxor(R)},u.prototype.xor=function(R){return this.length>R.length?this.clone().ixor(R):R.clone().ixor(this)},u.prototype.uxor=function(R){return this.length>R.length?this.clone().iuxor(R):R.clone().iuxor(this)},u.prototype.inotn=function(R){i(typeof R=="number"&&R>=0);var j=0|Math.ceil(R/26),Z=R%26;this._expand(j),Z>0&&j--;for(var B=0;B<j;B++)this.words[B]=67108863&~this.words[B];return Z>0&&(this.words[B]=~this.words[B]&67108863>>26-Z),this.strip()},u.prototype.notn=function(R){return this.clone().inotn(R)},u.prototype.setn=function(R,j){i(typeof R=="number"&&R>=0);var Z=R/26|0,B=R%26;return this._expand(Z+1),this.words[Z]=j?this.words[Z]|1<<B:this.words[Z]&~(1<<B),this.strip()},u.prototype.iadd=function(R){var j,Z,B;if(this.negative!==0&&R.negative===0)return this.negative=0,j=this.isub(R),this.negative^=1,this._normSign();if(this.negative===0&&R.negative!==0)return R.negative=0,j=this.isub(R),R.negative=1,j._normSign();this.length>R.length?(Z=this,B=R):(Z=R,B=this);for(var q=0,V=0;V<B.length;V++)j=(0|Z.words[V])+(0|B.words[V])+q,this.words[V]=67108863&j,q=j>>>26;for(;q!==0&&V<Z.length;V++)j=(0|Z.words[V])+q,this.words[V]=67108863&j,q=j>>>26;if(this.length=Z.length,q!==0)this.words[this.length]=q,this.length++;else if(Z!==this)for(;V<Z.length;V++)this.words[V]=Z.words[V];return this},u.prototype.add=function(R){var j;return R.negative!==0&&this.negative===0?(R.negative=0,j=this.sub(R),R.negative^=1,j):R.negative===0&&this.negative!==0?(this.negative=0,j=R.sub(this),this.negative=1,j):this.length>R.length?this.clone().iadd(R):R.clone().iadd(this)},u.prototype.isub=function(R){if(R.negative!==0){R.negative=0;var j=this.iadd(R);return R.negative=1,j._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(R),this.negative=1,this._normSign();var Z,B,q=this.cmp(R);if(q===0)return this.negative=0,this.length=1,this.words[0]=0,this;q>0?(Z=this,B=R):(Z=R,B=this);for(var V=0,ne=0;ne<B.length;ne++)V=(j=(0|Z.words[ne])-(0|B.words[ne])+V)>>26,this.words[ne]=67108863&j;for(;V!==0&&ne<Z.length;ne++)V=(j=(0|Z.words[ne])+V)>>26,this.words[ne]=67108863&j;if(V===0&&ne<Z.length&&Z!==this)for(;ne<Z.length;ne++)this.words[ne]=Z.words[ne];return this.length=Math.max(this.length,ne),Z!==this&&(this.negative=1),this.strip()},u.prototype.sub=function(R){return this.clone().isub(R)};var y=function(R,j,Z){var B,q,V,ne=R.words,ee=j.words,$=Z.words,J=0,K=0|ne[0],te=8191&K,ie=K>>>13,ae=0|ne[1],se=8191&ae,ce=ae>>>13,de=0|ne[2],ge=8191&de,ve=de>>>13,be=0|ne[3],me=8191&be,Se=be>>>13,we=0|ne[4],_e=8191&we,oe=we>>>13,le=0|ne[5],pe=8191&le,Ee=le>>>13,Te=0|ne[6],Me=8191&Te,Le=Te>>>13,Ie=0|ne[7],he=8191&Ie,xe=Ie>>>13,ke=0|ne[8],ze=8191&ke,Re=ke>>>13,Oe=0|ne[9],Ve=8191&Oe,qe=Oe>>>13,Je=0|ee[0],ot=8191&Je,rt=Je>>>13,dt=0|ee[1],_t=8191&dt,yt=dt>>>13,et=0|ee[2],nt=8191&et,At=et>>>13,Rt=0|ee[3],Ft=8191&Rt,It=Rt>>>13,Ge=0|ee[4],Ye=8191&Ge,Ne=Ge>>>13,We=0|ee[5],st=8191&We,it=We>>>13,Fe=0|ee[6],Be=8191&Fe,at=Fe>>>13,Ze=0|ee[7],ht=8191&Ze,vt=Ze>>>13,mt=0|ee[8],ft=8191&mt,Et=mt>>>13,Tt=0|ee[9],xt=8191&Tt,Ct=Tt>>>13;Z.negative=R.negative^j.negative,Z.length=19;var Pt=(J+(B=Math.imul(te,ot))|0)+((8191&(q=(q=Math.imul(te,rt))+Math.imul(ie,ot)|0))<<13)|0;J=((V=Math.imul(ie,rt))+(q>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,B=Math.imul(se,ot),q=(q=Math.imul(se,rt))+Math.imul(ce,ot)|0,V=Math.imul(ce,rt);var Bt=(J+(B=B+Math.imul(te,_t)|0)|0)+((8191&(q=(q=q+Math.imul(te,yt)|0)+Math.imul(ie,_t)|0))<<13)|0;J=((V=V+Math.imul(ie,yt)|0)+(q>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,B=Math.imul(ge,ot),q=(q=Math.imul(ge,rt))+Math.imul(ve,ot)|0,V=Math.imul(ve,rt),B=B+Math.imul(se,_t)|0,q=(q=q+Math.imul(se,yt)|0)+Math.imul(ce,_t)|0,V=V+Math.imul(ce,yt)|0;var Kt=(J+(B=B+Math.imul(te,nt)|0)|0)+((8191&(q=(q=q+Math.imul(te,At)|0)+Math.imul(ie,nt)|0))<<13)|0;J=((V=V+Math.imul(ie,At)|0)+(q>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,B=Math.imul(me,ot),q=(q=Math.imul(me,rt))+Math.imul(Se,ot)|0,V=Math.imul(Se,rt),B=B+Math.imul(ge,_t)|0,q=(q=q+Math.imul(ge,yt)|0)+Math.imul(ve,_t)|0,V=V+Math.imul(ve,yt)|0,B=B+Math.imul(se,nt)|0,q=(q=q+Math.imul(se,At)|0)+Math.imul(ce,nt)|0,V=V+Math.imul(ce,At)|0;var sn=(J+(B=B+Math.imul(te,Ft)|0)|0)+((8191&(q=(q=q+Math.imul(te,It)|0)+Math.imul(ie,Ft)|0))<<13)|0;J=((V=V+Math.imul(ie,It)|0)+(q>>>13)|0)+(sn>>>26)|0,sn&=67108863,B=Math.imul(_e,ot),q=(q=Math.imul(_e,rt))+Math.imul(oe,ot)|0,V=Math.imul(oe,rt),B=B+Math.imul(me,_t)|0,q=(q=q+Math.imul(me,yt)|0)+Math.imul(Se,_t)|0,V=V+Math.imul(Se,yt)|0,B=B+Math.imul(ge,nt)|0,q=(q=q+Math.imul(ge,At)|0)+Math.imul(ve,nt)|0,V=V+Math.imul(ve,At)|0,B=B+Math.imul(se,Ft)|0,q=(q=q+Math.imul(se,It)|0)+Math.imul(ce,Ft)|0,V=V+Math.imul(ce,It)|0;var Gt=(J+(B=B+Math.imul(te,Ye)|0)|0)+((8191&(q=(q=q+Math.imul(te,Ne)|0)+Math.imul(ie,Ye)|0))<<13)|0;J=((V=V+Math.imul(ie,Ne)|0)+(q>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,B=Math.imul(pe,ot),q=(q=Math.imul(pe,rt))+Math.imul(Ee,ot)|0,V=Math.imul(Ee,rt),B=B+Math.imul(_e,_t)|0,q=(q=q+Math.imul(_e,yt)|0)+Math.imul(oe,_t)|0,V=V+Math.imul(oe,yt)|0,B=B+Math.imul(me,nt)|0,q=(q=q+Math.imul(me,At)|0)+Math.imul(Se,nt)|0,V=V+Math.imul(Se,At)|0,B=B+Math.imul(ge,Ft)|0,q=(q=q+Math.imul(ge,It)|0)+Math.imul(ve,Ft)|0,V=V+Math.imul(ve,It)|0,B=B+Math.imul(se,Ye)|0,q=(q=q+Math.imul(se,Ne)|0)+Math.imul(ce,Ye)|0,V=V+Math.imul(ce,Ne)|0;var Yt=(J+(B=B+Math.imul(te,st)|0)|0)+((8191&(q=(q=q+Math.imul(te,it)|0)+Math.imul(ie,st)|0))<<13)|0;J=((V=V+Math.imul(ie,it)|0)+(q>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,B=Math.imul(Me,ot),q=(q=Math.imul(Me,rt))+Math.imul(Le,ot)|0,V=Math.imul(Le,rt),B=B+Math.imul(pe,_t)|0,q=(q=q+Math.imul(pe,yt)|0)+Math.imul(Ee,_t)|0,V=V+Math.imul(Ee,yt)|0,B=B+Math.imul(_e,nt)|0,q=(q=q+Math.imul(_e,At)|0)+Math.imul(oe,nt)|0,V=V+Math.imul(oe,At)|0,B=B+Math.imul(me,Ft)|0,q=(q=q+Math.imul(me,It)|0)+Math.imul(Se,Ft)|0,V=V+Math.imul(Se,It)|0,B=B+Math.imul(ge,Ye)|0,q=(q=q+Math.imul(ge,Ne)|0)+Math.imul(ve,Ye)|0,V=V+Math.imul(ve,Ne)|0,B=B+Math.imul(se,st)|0,q=(q=q+Math.imul(se,it)|0)+Math.imul(ce,st)|0,V=V+Math.imul(ce,it)|0;var rn=(J+(B=B+Math.imul(te,Be)|0)|0)+((8191&(q=(q=q+Math.imul(te,at)|0)+Math.imul(ie,Be)|0))<<13)|0;J=((V=V+Math.imul(ie,at)|0)+(q>>>13)|0)+(rn>>>26)|0,rn&=67108863,B=Math.imul(he,ot),q=(q=Math.imul(he,rt))+Math.imul(xe,ot)|0,V=Math.imul(xe,rt),B=B+Math.imul(Me,_t)|0,q=(q=q+Math.imul(Me,yt)|0)+Math.imul(Le,_t)|0,V=V+Math.imul(Le,yt)|0,B=B+Math.imul(pe,nt)|0,q=(q=q+Math.imul(pe,At)|0)+Math.imul(Ee,nt)|0,V=V+Math.imul(Ee,At)|0,B=B+Math.imul(_e,Ft)|0,q=(q=q+Math.imul(_e,It)|0)+Math.imul(oe,Ft)|0,V=V+Math.imul(oe,It)|0,B=B+Math.imul(me,Ye)|0,q=(q=q+Math.imul(me,Ne)|0)+Math.imul(Se,Ye)|0,V=V+Math.imul(Se,Ne)|0,B=B+Math.imul(ge,st)|0,q=(q=q+Math.imul(ge,it)|0)+Math.imul(ve,st)|0,V=V+Math.imul(ve,it)|0,B=B+Math.imul(se,Be)|0,q=(q=q+Math.imul(se,at)|0)+Math.imul(ce,Be)|0,V=V+Math.imul(ce,at)|0;var Ln=(J+(B=B+Math.imul(te,ht)|0)|0)+((8191&(q=(q=q+Math.imul(te,vt)|0)+Math.imul(ie,ht)|0))<<13)|0;J=((V=V+Math.imul(ie,vt)|0)+(q>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,B=Math.imul(ze,ot),q=(q=Math.imul(ze,rt))+Math.imul(Re,ot)|0,V=Math.imul(Re,rt),B=B+Math.imul(he,_t)|0,q=(q=q+Math.imul(he,yt)|0)+Math.imul(xe,_t)|0,V=V+Math.imul(xe,yt)|0,B=B+Math.imul(Me,nt)|0,q=(q=q+Math.imul(Me,At)|0)+Math.imul(Le,nt)|0,V=V+Math.imul(Le,At)|0,B=B+Math.imul(pe,Ft)|0,q=(q=q+Math.imul(pe,It)|0)+Math.imul(Ee,Ft)|0,V=V+Math.imul(Ee,It)|0,B=B+Math.imul(_e,Ye)|0,q=(q=q+Math.imul(_e,Ne)|0)+Math.imul(oe,Ye)|0,V=V+Math.imul(oe,Ne)|0,B=B+Math.imul(me,st)|0,q=(q=q+Math.imul(me,it)|0)+Math.imul(Se,st)|0,V=V+Math.imul(Se,it)|0,B=B+Math.imul(ge,Be)|0,q=(q=q+Math.imul(ge,at)|0)+Math.imul(ve,Be)|0,V=V+Math.imul(ve,at)|0,B=B+Math.imul(se,ht)|0,q=(q=q+Math.imul(se,vt)|0)+Math.imul(ce,ht)|0,V=V+Math.imul(ce,vt)|0;var Sn=(J+(B=B+Math.imul(te,ft)|0)|0)+((8191&(q=(q=q+Math.imul(te,Et)|0)+Math.imul(ie,ft)|0))<<13)|0;J=((V=V+Math.imul(ie,Et)|0)+(q>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,B=Math.imul(Ve,ot),q=(q=Math.imul(Ve,rt))+Math.imul(qe,ot)|0,V=Math.imul(qe,rt),B=B+Math.imul(ze,_t)|0,q=(q=q+Math.imul(ze,yt)|0)+Math.imul(Re,_t)|0,V=V+Math.imul(Re,yt)|0,B=B+Math.imul(he,nt)|0,q=(q=q+Math.imul(he,At)|0)+Math.imul(xe,nt)|0,V=V+Math.imul(xe,At)|0,B=B+Math.imul(Me,Ft)|0,q=(q=q+Math.imul(Me,It)|0)+Math.imul(Le,Ft)|0,V=V+Math.imul(Le,It)|0,B=B+Math.imul(pe,Ye)|0,q=(q=q+Math.imul(pe,Ne)|0)+Math.imul(Ee,Ye)|0,V=V+Math.imul(Ee,Ne)|0,B=B+Math.imul(_e,st)|0,q=(q=q+Math.imul(_e,it)|0)+Math.imul(oe,st)|0,V=V+Math.imul(oe,it)|0,B=B+Math.imul(me,Be)|0,q=(q=q+Math.imul(me,at)|0)+Math.imul(Se,Be)|0,V=V+Math.imul(Se,at)|0,B=B+Math.imul(ge,ht)|0,q=(q=q+Math.imul(ge,vt)|0)+Math.imul(ve,ht)|0,V=V+Math.imul(ve,vt)|0,B=B+Math.imul(se,ft)|0,q=(q=q+Math.imul(se,Et)|0)+Math.imul(ce,ft)|0,V=V+Math.imul(ce,Et)|0;var gn=(J+(B=B+Math.imul(te,xt)|0)|0)+((8191&(q=(q=q+Math.imul(te,Ct)|0)+Math.imul(ie,xt)|0))<<13)|0;J=((V=V+Math.imul(ie,Ct)|0)+(q>>>13)|0)+(gn>>>26)|0,gn&=67108863,B=Math.imul(Ve,_t),q=(q=Math.imul(Ve,yt))+Math.imul(qe,_t)|0,V=Math.imul(qe,yt),B=B+Math.imul(ze,nt)|0,q=(q=q+Math.imul(ze,At)|0)+Math.imul(Re,nt)|0,V=V+Math.imul(Re,At)|0,B=B+Math.imul(he,Ft)|0,q=(q=q+Math.imul(he,It)|0)+Math.imul(xe,Ft)|0,V=V+Math.imul(xe,It)|0,B=B+Math.imul(Me,Ye)|0,q=(q=q+Math.imul(Me,Ne)|0)+Math.imul(Le,Ye)|0,V=V+Math.imul(Le,Ne)|0,B=B+Math.imul(pe,st)|0,q=(q=q+Math.imul(pe,it)|0)+Math.imul(Ee,st)|0,V=V+Math.imul(Ee,it)|0,B=B+Math.imul(_e,Be)|0,q=(q=q+Math.imul(_e,at)|0)+Math.imul(oe,Be)|0,V=V+Math.imul(oe,at)|0,B=B+Math.imul(me,ht)|0,q=(q=q+Math.imul(me,vt)|0)+Math.imul(Se,ht)|0,V=V+Math.imul(Se,vt)|0,B=B+Math.imul(ge,ft)|0,q=(q=q+Math.imul(ge,Et)|0)+Math.imul(ve,ft)|0,V=V+Math.imul(ve,Et)|0;var $t=(J+(B=B+Math.imul(se,xt)|0)|0)+((8191&(q=(q=q+Math.imul(se,Ct)|0)+Math.imul(ce,xt)|0))<<13)|0;J=((V=V+Math.imul(ce,Ct)|0)+(q>>>13)|0)+($t>>>26)|0,$t&=67108863,B=Math.imul(Ve,nt),q=(q=Math.imul(Ve,At))+Math.imul(qe,nt)|0,V=Math.imul(qe,At),B=B+Math.imul(ze,Ft)|0,q=(q=q+Math.imul(ze,It)|0)+Math.imul(Re,Ft)|0,V=V+Math.imul(Re,It)|0,B=B+Math.imul(he,Ye)|0,q=(q=q+Math.imul(he,Ne)|0)+Math.imul(xe,Ye)|0,V=V+Math.imul(xe,Ne)|0,B=B+Math.imul(Me,st)|0,q=(q=q+Math.imul(Me,it)|0)+Math.imul(Le,st)|0,V=V+Math.imul(Le,it)|0,B=B+Math.imul(pe,Be)|0,q=(q=q+Math.imul(pe,at)|0)+Math.imul(Ee,Be)|0,V=V+Math.imul(Ee,at)|0,B=B+Math.imul(_e,ht)|0,q=(q=q+Math.imul(_e,vt)|0)+Math.imul(oe,ht)|0,V=V+Math.imul(oe,vt)|0,B=B+Math.imul(me,ft)|0,q=(q=q+Math.imul(me,Et)|0)+Math.imul(Se,ft)|0,V=V+Math.imul(Se,Et)|0;var cn=(J+(B=B+Math.imul(ge,xt)|0)|0)+((8191&(q=(q=q+Math.imul(ge,Ct)|0)+Math.imul(ve,xt)|0))<<13)|0;J=((V=V+Math.imul(ve,Ct)|0)+(q>>>13)|0)+(cn>>>26)|0,cn&=67108863,B=Math.imul(Ve,Ft),q=(q=Math.imul(Ve,It))+Math.imul(qe,Ft)|0,V=Math.imul(qe,It),B=B+Math.imul(ze,Ye)|0,q=(q=q+Math.imul(ze,Ne)|0)+Math.imul(Re,Ye)|0,V=V+Math.imul(Re,Ne)|0,B=B+Math.imul(he,st)|0,q=(q=q+Math.imul(he,it)|0)+Math.imul(xe,st)|0,V=V+Math.imul(xe,it)|0,B=B+Math.imul(Me,Be)|0,q=(q=q+Math.imul(Me,at)|0)+Math.imul(Le,Be)|0,V=V+Math.imul(Le,at)|0,B=B+Math.imul(pe,ht)|0,q=(q=q+Math.imul(pe,vt)|0)+Math.imul(Ee,ht)|0,V=V+Math.imul(Ee,vt)|0,B=B+Math.imul(_e,ft)|0,q=(q=q+Math.imul(_e,Et)|0)+Math.imul(oe,ft)|0,V=V+Math.imul(oe,Et)|0;var an=(J+(B=B+Math.imul(me,xt)|0)|0)+((8191&(q=(q=q+Math.imul(me,Ct)|0)+Math.imul(Se,xt)|0))<<13)|0;J=((V=V+Math.imul(Se,Ct)|0)+(q>>>13)|0)+(an>>>26)|0,an&=67108863,B=Math.imul(Ve,Ye),q=(q=Math.imul(Ve,Ne))+Math.imul(qe,Ye)|0,V=Math.imul(qe,Ne),B=B+Math.imul(ze,st)|0,q=(q=q+Math.imul(ze,it)|0)+Math.imul(Re,st)|0,V=V+Math.imul(Re,it)|0,B=B+Math.imul(he,Be)|0,q=(q=q+Math.imul(he,at)|0)+Math.imul(xe,Be)|0,V=V+Math.imul(xe,at)|0,B=B+Math.imul(Me,ht)|0,q=(q=q+Math.imul(Me,vt)|0)+Math.imul(Le,ht)|0,V=V+Math.imul(Le,vt)|0,B=B+Math.imul(pe,ft)|0,q=(q=q+Math.imul(pe,Et)|0)+Math.imul(Ee,ft)|0,V=V+Math.imul(Ee,Et)|0;var pn=(J+(B=B+Math.imul(_e,xt)|0)|0)+((8191&(q=(q=q+Math.imul(_e,Ct)|0)+Math.imul(oe,xt)|0))<<13)|0;J=((V=V+Math.imul(oe,Ct)|0)+(q>>>13)|0)+(pn>>>26)|0,pn&=67108863,B=Math.imul(Ve,st),q=(q=Math.imul(Ve,it))+Math.imul(qe,st)|0,V=Math.imul(qe,it),B=B+Math.imul(ze,Be)|0,q=(q=q+Math.imul(ze,at)|0)+Math.imul(Re,Be)|0,V=V+Math.imul(Re,at)|0,B=B+Math.imul(he,ht)|0,q=(q=q+Math.imul(he,vt)|0)+Math.imul(xe,ht)|0,V=V+Math.imul(xe,vt)|0,B=B+Math.imul(Me,ft)|0,q=(q=q+Math.imul(Me,Et)|0)+Math.imul(Le,ft)|0,V=V+Math.imul(Le,Et)|0;var An=(J+(B=B+Math.imul(pe,xt)|0)|0)+((8191&(q=(q=q+Math.imul(pe,Ct)|0)+Math.imul(Ee,xt)|0))<<13)|0;J=((V=V+Math.imul(Ee,Ct)|0)+(q>>>13)|0)+(An>>>26)|0,An&=67108863,B=Math.imul(Ve,Be),q=(q=Math.imul(Ve,at))+Math.imul(qe,Be)|0,V=Math.imul(qe,at),B=B+Math.imul(ze,ht)|0,q=(q=q+Math.imul(ze,vt)|0)+Math.imul(Re,ht)|0,V=V+Math.imul(Re,vt)|0,B=B+Math.imul(he,ft)|0,q=(q=q+Math.imul(he,Et)|0)+Math.imul(xe,ft)|0,V=V+Math.imul(xe,Et)|0;var Cn=(J+(B=B+Math.imul(Me,xt)|0)|0)+((8191&(q=(q=q+Math.imul(Me,Ct)|0)+Math.imul(Le,xt)|0))<<13)|0;J=((V=V+Math.imul(Le,Ct)|0)+(q>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,B=Math.imul(Ve,ht),q=(q=Math.imul(Ve,vt))+Math.imul(qe,ht)|0,V=Math.imul(qe,vt),B=B+Math.imul(ze,ft)|0,q=(q=q+Math.imul(ze,Et)|0)+Math.imul(Re,ft)|0,V=V+Math.imul(Re,Et)|0;var Rn=(J+(B=B+Math.imul(he,xt)|0)|0)+((8191&(q=(q=q+Math.imul(he,Ct)|0)+Math.imul(xe,xt)|0))<<13)|0;J=((V=V+Math.imul(xe,Ct)|0)+(q>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,B=Math.imul(Ve,ft),q=(q=Math.imul(Ve,Et))+Math.imul(qe,ft)|0,V=Math.imul(qe,Et);var Fn=(J+(B=B+Math.imul(ze,xt)|0)|0)+((8191&(q=(q=q+Math.imul(ze,Ct)|0)+Math.imul(Re,xt)|0))<<13)|0;J=((V=V+Math.imul(Re,Ct)|0)+(q>>>13)|0)+(Fn>>>26)|0,Fn&=67108863;var In=(J+(B=Math.imul(Ve,xt))|0)+((8191&(q=(q=Math.imul(Ve,Ct))+Math.imul(qe,xt)|0))<<13)|0;return J=((V=Math.imul(qe,Ct))+(q>>>13)|0)+(In>>>26)|0,In&=67108863,$[0]=Pt,$[1]=Bt,$[2]=Kt,$[3]=sn,$[4]=Gt,$[5]=Yt,$[6]=rn,$[7]=Ln,$[8]=Sn,$[9]=gn,$[10]=$t,$[11]=cn,$[12]=an,$[13]=pn,$[14]=An,$[15]=Cn,$[16]=Rn,$[17]=Fn,$[18]=In,J!==0&&($[19]=J,Z.length++),Z};function T(R,j,Z){return new h().mulp(R,j,Z)}function h(R,j){this.x=R,this.y=j}Math.imul||(y=x),u.prototype.mulTo=function(R,j){var Z,B=this.length+R.length;return Z=this.length===10&&R.length===10?y(this,R,j):B<63?x(this,R,j):B<1024?function(q,V,ne){ne.negative=V.negative^q.negative,ne.length=q.length+V.length;for(var ee=0,$=0,J=0;J<ne.length-1;J++){var K=$;$=0;for(var te=67108863&ee,ie=Math.min(J,V.length-1),ae=Math.max(0,J-q.length+1);ae<=ie;ae++){var se=J-ae,ce=(0|q.words[se])*(0|V.words[ae]),de=67108863&ce;te=67108863&(de=de+te|0),$+=(K=(K=K+(ce/67108864|0)|0)+(de>>>26)|0)>>>26,K&=67108863}ne.words[J]=te,ee=K,K=$}return ee!==0?ne.words[J]=ee:ne.length--,ne.strip()}(this,R,j):T(this,R,j),Z},h.prototype.makeRBT=function(R){for(var j=new Array(R),Z=u.prototype._countBits(R)-1,B=0;B<R;B++)j[B]=this.revBin(B,Z,R);return j},h.prototype.revBin=function(R,j,Z){if(R===0||R===Z-1)return R;for(var B=0,q=0;q<j;q++)B|=(1&R)<<j-q-1,R>>=1;return B},h.prototype.permute=function(R,j,Z,B,q,V){for(var ne=0;ne<V;ne++)B[ne]=j[R[ne]],q[ne]=Z[R[ne]]},h.prototype.transform=function(R,j,Z,B,q,V){this.permute(V,R,j,Z,B,q);for(var ne=1;ne<q;ne<<=1)for(var ee=ne<<1,$=Math.cos(2*Math.PI/ee),J=Math.sin(2*Math.PI/ee),K=0;K<q;K+=ee)for(var te=$,ie=J,ae=0;ae<ne;ae++){var se=Z[K+ae],ce=B[K+ae],de=Z[K+ae+ne],ge=B[K+ae+ne],ve=te*de-ie*ge;ge=te*ge+ie*de,de=ve,Z[K+ae]=se+de,B[K+ae]=ce+ge,Z[K+ae+ne]=se-de,B[K+ae+ne]=ce-ge,ae!==ee&&(ve=$*te-J*ie,ie=$*ie+J*te,te=ve)}},h.prototype.guessLen13b=function(R,j){var Z=1|Math.max(j,R),B=1&Z,q=0;for(Z=Z/2|0;Z;Z>>>=1)q++;return 1<<q+1+B},h.prototype.conjugate=function(R,j,Z){if(!(Z<=1))for(var B=0;B<Z/2;B++){var q=R[B];R[B]=R[Z-B-1],R[Z-B-1]=q,q=j[B],j[B]=-j[Z-B-1],j[Z-B-1]=-q}},h.prototype.normalize13b=function(R,j){for(var Z=0,B=0;B<j/2;B++){var q=8192*Math.round(R[2*B+1]/j)+Math.round(R[2*B]/j)+Z;R[B]=67108863&q,Z=q<67108864?0:q/67108864|0}return R},h.prototype.convert13b=function(R,j,Z,B){for(var q=0,V=0;V<j;V++)q+=0|R[V],Z[2*V]=8191&q,q>>>=13,Z[2*V+1]=8191&q,q>>>=13;for(V=2*j;V<B;++V)Z[V]=0;i(q===0),i((-8192&q)==0)},h.prototype.stub=function(R){for(var j=new Array(R),Z=0;Z<R;Z++)j[Z]=0;return j},h.prototype.mulp=function(R,j,Z){var B=2*this.guessLen13b(R.length,j.length),q=this.makeRBT(B),V=this.stub(B),ne=new Array(B),ee=new Array(B),$=new Array(B),J=new Array(B),K=new Array(B),te=new Array(B),ie=Z.words;ie.length=B,this.convert13b(R.words,R.length,ne,B),this.convert13b(j.words,j.length,J,B),this.transform(ne,V,ee,$,B,q),this.transform(J,V,K,te,B,q);for(var ae=0;ae<B;ae++){var se=ee[ae]*K[ae]-$[ae]*te[ae];$[ae]=ee[ae]*te[ae]+$[ae]*K[ae],ee[ae]=se}return this.conjugate(ee,$,B),this.transform(ee,$,ie,V,B,q),this.conjugate(ie,V,B),this.normalize13b(ie,B),Z.negative=R.negative^j.negative,Z.length=R.length+j.length,Z.strip()},u.prototype.mul=function(R){var j=new u(null);return j.words=new Array(this.length+R.length),this.mulTo(R,j)},u.prototype.mulf=function(R){var j=new u(null);return j.words=new Array(this.length+R.length),T(this,R,j)},u.prototype.imul=function(R){return this.clone().mulTo(R,this)},u.prototype.imuln=function(R){i(typeof R=="number"),i(R<67108864);for(var j=0,Z=0;Z<this.length;Z++){var B=(0|this.words[Z])*R,q=(67108863&B)+(67108863&j);j>>=26,j+=B/67108864|0,j+=q>>>26,this.words[Z]=67108863&q}return j!==0&&(this.words[Z]=j,this.length++),this},u.prototype.muln=function(R){return this.clone().imuln(R)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(R){var j=function(V){for(var ne=new Array(V.bitLength()),ee=0;ee<ne.length;ee++){var $=ee/26|0,J=ee%26;ne[ee]=(V.words[$]&1<<J)>>>J}return ne}(R);if(j.length===0)return new u(1);for(var Z=this,B=0;B<j.length&&j[B]===0;B++,Z=Z.sqr());if(++B<j.length)for(var q=Z.sqr();B<j.length;B++,q=q.sqr())j[B]!==0&&(Z=Z.mul(q));return Z},u.prototype.iushln=function(R){i(typeof R=="number"&&R>=0);var j,Z=R%26,B=(R-Z)/26,q=67108863>>>26-Z<<26-Z;if(Z!==0){var V=0;for(j=0;j<this.length;j++){var ne=this.words[j]&q,ee=(0|this.words[j])-ne<<Z;this.words[j]=ee|V,V=ne>>>26-Z}V&&(this.words[j]=V,this.length++)}if(B!==0){for(j=this.length-1;j>=0;j--)this.words[j+B]=this.words[j];for(j=0;j<B;j++)this.words[j]=0;this.length+=B}return this.strip()},u.prototype.ishln=function(R){return i(this.negative===0),this.iushln(R)},u.prototype.iushrn=function(R,j,Z){var B;i(typeof R=="number"&&R>=0),B=j?(j-j%26)/26:0;var q=R%26,V=Math.min((R-q)/26,this.length),ne=67108863^67108863>>>q<<q,ee=Z;if(B-=V,B=Math.max(0,B),ee){for(var $=0;$<V;$++)ee.words[$]=this.words[$];ee.length=V}if(V!==0)if(this.length>V)for(this.length-=V,$=0;$<this.length;$++)this.words[$]=this.words[$+V];else this.words[0]=0,this.length=1;var J=0;for($=this.length-1;$>=0&&(J!==0||$>=B);$--){var K=0|this.words[$];this.words[$]=J<<26-q|K>>>q,J=K&ne}return ee&&J!==0&&(ee.words[ee.length++]=J),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},u.prototype.ishrn=function(R,j,Z){return i(this.negative===0),this.iushrn(R,j,Z)},u.prototype.shln=function(R){return this.clone().ishln(R)},u.prototype.ushln=function(R){return this.clone().iushln(R)},u.prototype.shrn=function(R){return this.clone().ishrn(R)},u.prototype.ushrn=function(R){return this.clone().iushrn(R)},u.prototype.testn=function(R){i(typeof R=="number"&&R>=0);var j=R%26,Z=(R-j)/26,B=1<<j;return!(this.length<=Z||!(this.words[Z]&B))},u.prototype.imaskn=function(R){i(typeof R=="number"&&R>=0);var j=R%26,Z=(R-j)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=Z)return this;if(j!==0&&Z++,this.length=Math.min(Z,this.length),j!==0){var B=67108863^67108863>>>j<<j;this.words[this.length-1]&=B}return this.strip()},u.prototype.maskn=function(R){return this.clone().imaskn(R)},u.prototype.iaddn=function(R){return i(typeof R=="number"),i(R<67108864),R<0?this.isubn(-R):this.negative!==0?this.length===1&&(0|this.words[0])<R?(this.words[0]=R-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(R),this.negative=1,this):this._iaddn(R)},u.prototype._iaddn=function(R){this.words[0]+=R;for(var j=0;j<this.length&&this.words[j]>=67108864;j++)this.words[j]-=67108864,j===this.length-1?this.words[j+1]=1:this.words[j+1]++;return this.length=Math.max(this.length,j+1),this},u.prototype.isubn=function(R){if(i(typeof R=="number"),i(R<67108864),R<0)return this.iaddn(-R);if(this.negative!==0)return this.negative=0,this.iaddn(R),this.negative=1,this;if(this.words[0]-=R,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var j=0;j<this.length&&this.words[j]<0;j++)this.words[j]+=67108864,this.words[j+1]-=1;return this.strip()},u.prototype.addn=function(R){return this.clone().iaddn(R)},u.prototype.subn=function(R){return this.clone().isubn(R)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(R,j,Z){var B,q,V=R.length+Z;this._expand(V);var ne=0;for(B=0;B<R.length;B++){q=(0|this.words[B+Z])+ne;var ee=(0|R.words[B])*j;ne=((q-=67108863&ee)>>26)-(ee/67108864|0),this.words[B+Z]=67108863&q}for(;B<this.length-Z;B++)ne=(q=(0|this.words[B+Z])+ne)>>26,this.words[B+Z]=67108863&q;if(ne===0)return this.strip();for(i(ne===-1),ne=0,B=0;B<this.length;B++)ne=(q=-(0|this.words[B])+ne)>>26,this.words[B]=67108863&q;return this.negative=1,this.strip()},u.prototype._wordDiv=function(R,j){var Z=(this.length,R.length),B=this.clone(),q=R,V=0|q.words[q.length-1];(Z=26-this._countBits(V))!=0&&(q=q.ushln(Z),B.iushln(Z),V=0|q.words[q.length-1]);var ne,ee=B.length-q.length;if(j!=="mod"){(ne=new u(null)).length=ee+1,ne.words=new Array(ne.length);for(var $=0;$<ne.length;$++)ne.words[$]=0}var J=B.clone()._ishlnsubmul(q,1,ee);J.negative===0&&(B=J,ne&&(ne.words[ee]=1));for(var K=ee-1;K>=0;K--){var te=67108864*(0|B.words[q.length+K])+(0|B.words[q.length+K-1]);for(te=Math.min(te/V|0,67108863),B._ishlnsubmul(q,te,K);B.negative!==0;)te--,B.negative=0,B._ishlnsubmul(q,1,K),B.isZero()||(B.negative^=1);ne&&(ne.words[K]=te)}return ne&&ne.strip(),B.strip(),j!=="div"&&Z!==0&&B.iushrn(Z),{div:ne||null,mod:B}},u.prototype.divmod=function(R,j,Z){return i(!R.isZero()),this.isZero()?{div:new u(0),mod:new u(0)}:this.negative!==0&&R.negative===0?(V=this.neg().divmod(R,j),j!=="mod"&&(B=V.div.neg()),j!=="div"&&(q=V.mod.neg(),Z&&q.negative!==0&&q.iadd(R)),{div:B,mod:q}):this.negative===0&&R.negative!==0?(V=this.divmod(R.neg(),j),j!=="mod"&&(B=V.div.neg()),{div:B,mod:V.mod}):this.negative&R.negative?(V=this.neg().divmod(R.neg(),j),j!=="div"&&(q=V.mod.neg(),Z&&q.negative!==0&&q.isub(R)),{div:V.div,mod:q}):R.length>this.length||this.cmp(R)<0?{div:new u(0),mod:this}:R.length===1?j==="div"?{div:this.divn(R.words[0]),mod:null}:j==="mod"?{div:null,mod:new u(this.modn(R.words[0]))}:{div:this.divn(R.words[0]),mod:new u(this.modn(R.words[0]))}:this._wordDiv(R,j);var B,q,V},u.prototype.div=function(R){return this.divmod(R,"div",!1).div},u.prototype.mod=function(R){return this.divmod(R,"mod",!1).mod},u.prototype.umod=function(R){return this.divmod(R,"mod",!0).mod},u.prototype.divRound=function(R){var j=this.divmod(R);if(j.mod.isZero())return j.div;var Z=j.div.negative!==0?j.mod.isub(R):j.mod,B=R.ushrn(1),q=R.andln(1),V=Z.cmp(B);return V<0||q===1&&V===0?j.div:j.div.negative!==0?j.div.isubn(1):j.div.iaddn(1)},u.prototype.modn=function(R){i(R<=67108863);for(var j=67108864%R,Z=0,B=this.length-1;B>=0;B--)Z=(j*Z+(0|this.words[B]))%R;return Z},u.prototype.idivn=function(R){i(R<=67108863);for(var j=0,Z=this.length-1;Z>=0;Z--){var B=(0|this.words[Z])+67108864*j;this.words[Z]=B/R|0,j=B%R}return this.strip()},u.prototype.divn=function(R){return this.clone().idivn(R)},u.prototype.egcd=function(R){i(R.negative===0),i(!R.isZero());var j=this,Z=R.clone();j=j.negative!==0?j.umod(R):j.clone();for(var B=new u(1),q=new u(0),V=new u(0),ne=new u(1),ee=0;j.isEven()&&Z.isEven();)j.iushrn(1),Z.iushrn(1),++ee;for(var $=Z.clone(),J=j.clone();!j.isZero();){for(var K=0,te=1;!(j.words[0]&te)&&K<26;++K,te<<=1);if(K>0)for(j.iushrn(K);K-- >0;)(B.isOdd()||q.isOdd())&&(B.iadd($),q.isub(J)),B.iushrn(1),q.iushrn(1);for(var ie=0,ae=1;!(Z.words[0]&ae)&&ie<26;++ie,ae<<=1);if(ie>0)for(Z.iushrn(ie);ie-- >0;)(V.isOdd()||ne.isOdd())&&(V.iadd($),ne.isub(J)),V.iushrn(1),ne.iushrn(1);j.cmp(Z)>=0?(j.isub(Z),B.isub(V),q.isub(ne)):(Z.isub(j),V.isub(B),ne.isub(q))}return{a:V,b:ne,gcd:Z.iushln(ee)}},u.prototype._invmp=function(R){i(R.negative===0),i(!R.isZero());var j=this,Z=R.clone();j=j.negative!==0?j.umod(R):j.clone();for(var B,q=new u(1),V=new u(0),ne=Z.clone();j.cmpn(1)>0&&Z.cmpn(1)>0;){for(var ee=0,$=1;!(j.words[0]&$)&&ee<26;++ee,$<<=1);if(ee>0)for(j.iushrn(ee);ee-- >0;)q.isOdd()&&q.iadd(ne),q.iushrn(1);for(var J=0,K=1;!(Z.words[0]&K)&&J<26;++J,K<<=1);if(J>0)for(Z.iushrn(J);J-- >0;)V.isOdd()&&V.iadd(ne),V.iushrn(1);j.cmp(Z)>=0?(j.isub(Z),q.isub(V)):(Z.isub(j),V.isub(q))}return(B=j.cmpn(1)===0?q:V).cmpn(0)<0&&B.iadd(R),B},u.prototype.gcd=function(R){if(this.isZero())return R.abs();if(R.isZero())return this.abs();var j=this.clone(),Z=R.clone();j.negative=0,Z.negative=0;for(var B=0;j.isEven()&&Z.isEven();B++)j.iushrn(1),Z.iushrn(1);for(;;){for(;j.isEven();)j.iushrn(1);for(;Z.isEven();)Z.iushrn(1);var q=j.cmp(Z);if(q<0){var V=j;j=Z,Z=V}else if(q===0||Z.cmpn(1)===0)break;j.isub(Z)}return Z.iushln(B)},u.prototype.invm=function(R){return this.egcd(R).a.umod(R)},u.prototype.isEven=function(){return(1&this.words[0])==0},u.prototype.isOdd=function(){return(1&this.words[0])==1},u.prototype.andln=function(R){return this.words[0]&R},u.prototype.bincn=function(R){i(typeof R=="number");var j=R%26,Z=(R-j)/26,B=1<<j;if(this.length<=Z)return this._expand(Z+1),this.words[Z]|=B,this;for(var q=B,V=Z;q!==0&&V<this.length;V++){var ne=0|this.words[V];q=(ne+=q)>>>26,ne&=67108863,this.words[V]=ne}return q!==0&&(this.words[V]=q,this.length++),this},u.prototype.isZero=function(){return this.length===1&&this.words[0]===0},u.prototype.cmpn=function(R){var j,Z=R<0;if(this.negative!==0&&!Z)return-1;if(this.negative===0&&Z)return 1;if(this.strip(),this.length>1)j=1;else{Z&&(R=-R),i(R<=67108863,"Number is too big");var B=0|this.words[0];j=B===R?0:B<R?-1:1}return this.negative!==0?0|-j:j},u.prototype.cmp=function(R){if(this.negative!==0&&R.negative===0)return-1;if(this.negative===0&&R.negative!==0)return 1;var j=this.ucmp(R);return this.negative!==0?0|-j:j},u.prototype.ucmp=function(R){if(this.length>R.length)return 1;if(this.length<R.length)return-1;for(var j=0,Z=this.length-1;Z>=0;Z--){var B=0|this.words[Z],q=0|R.words[Z];if(B!==q){B<q?j=-1:B>q&&(j=1);break}}return j},u.prototype.gtn=function(R){return this.cmpn(R)===1},u.prototype.gt=function(R){return this.cmp(R)===1},u.prototype.gten=function(R){return this.cmpn(R)>=0},u.prototype.gte=function(R){return this.cmp(R)>=0},u.prototype.ltn=function(R){return this.cmpn(R)===-1},u.prototype.lt=function(R){return this.cmp(R)===-1},u.prototype.lten=function(R){return this.cmpn(R)<=0},u.prototype.lte=function(R){return this.cmp(R)<=0},u.prototype.eqn=function(R){return this.cmpn(R)===0},u.prototype.eq=function(R){return this.cmp(R)===0},u.red=function(R){return new F(R)},u.prototype.toRed=function(R){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),R.convertTo(this)._forceRed(R)},u.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(R){return this.red=R,this},u.prototype.forceRed=function(R){return i(!this.red,"Already a number in reduction context"),this._forceRed(R)},u.prototype.redAdd=function(R){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,R)},u.prototype.redIAdd=function(R){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,R)},u.prototype.redSub=function(R){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,R)},u.prototype.redISub=function(R){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,R)},u.prototype.redShl=function(R){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,R)},u.prototype.redMul=function(R){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.mul(this,R)},u.prototype.redIMul=function(R){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.imul(this,R)},u.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(R){return i(this.red&&!R.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,R)};var E={k256:null,p224:null,p192:null,p25519:null};function k(R,j){this.name=R,this.p=new u(j,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function L(){k.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P(){k.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function I(){k.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function z(){k.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function F(R){if(typeof R=="string"){var j=u._prime(R);this.m=j.p,this.prime=j}else i(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}function U(R){F.call(this,R),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}k.prototype._tmp=function(){var R=new u(null);return R.words=new Array(Math.ceil(this.n/13)),R},k.prototype.ireduce=function(R){var j,Z=R;do this.split(Z,this.tmp),j=(Z=(Z=this.imulK(Z)).iadd(this.tmp)).bitLength();while(j>this.n);var B=j<this.n?-1:Z.ucmp(this.p);return B===0?(Z.words[0]=0,Z.length=1):B>0?Z.isub(this.p):Z.strip!==void 0?Z.strip():Z._strip(),Z},k.prototype.split=function(R,j){R.iushrn(this.n,0,j)},k.prototype.imulK=function(R){return R.imul(this.k)},l(L,k),L.prototype.split=function(R,j){for(var Z=4194303,B=Math.min(R.length,9),q=0;q<B;q++)j.words[q]=R.words[q];if(j.length=B,R.length<=9)return R.words[0]=0,void(R.length=1);var V=R.words[9];for(j.words[j.length++]=V&Z,q=10;q<R.length;q++){var ne=0|R.words[q];R.words[q-10]=(ne&Z)<<4|V>>>22,V=ne}V>>>=22,R.words[q-10]=V,V===0&&R.length>10?R.length-=10:R.length-=9},L.prototype.imulK=function(R){R.words[R.length]=0,R.words[R.length+1]=0,R.length+=2;for(var j=0,Z=0;Z<R.length;Z++){var B=0|R.words[Z];j+=977*B,R.words[Z]=67108863&j,j=64*B+(j/67108864|0)}return R.words[R.length-1]===0&&(R.length--,R.words[R.length-1]===0&&R.length--),R},l(P,k),l(I,k),l(z,k),z.prototype.imulK=function(R){for(var j=0,Z=0;Z<R.length;Z++){var B=19*(0|R.words[Z])+j,q=67108863&B;B>>>=26,R.words[Z]=q,j=B}return j!==0&&(R.words[R.length++]=j),R},u._prime=function(R){if(E[R])return E[R];var j;if(R==="k256")j=new L;else if(R==="p224")j=new P;else if(R==="p192")j=new I;else{if(R!=="p25519")throw new Error("Unknown prime "+R);j=new z}return E[R]=j,j},F.prototype._verify1=function(R){i(R.negative===0,"red works only with positives"),i(R.red,"red works only with red numbers")},F.prototype._verify2=function(R,j){i((R.negative|j.negative)==0,"red works only with positives"),i(R.red&&R.red===j.red,"red works only with red numbers")},F.prototype.imod=function(R){return this.prime?this.prime.ireduce(R)._forceRed(this):R.umod(this.m)._forceRed(this)},F.prototype.neg=function(R){return R.isZero()?R.clone():this.m.sub(R)._forceRed(this)},F.prototype.add=function(R,j){this._verify2(R,j);var Z=R.add(j);return Z.cmp(this.m)>=0&&Z.isub(this.m),Z._forceRed(this)},F.prototype.iadd=function(R,j){this._verify2(R,j);var Z=R.iadd(j);return Z.cmp(this.m)>=0&&Z.isub(this.m),Z},F.prototype.sub=function(R,j){this._verify2(R,j);var Z=R.sub(j);return Z.cmpn(0)<0&&Z.iadd(this.m),Z._forceRed(this)},F.prototype.isub=function(R,j){this._verify2(R,j);var Z=R.isub(j);return Z.cmpn(0)<0&&Z.iadd(this.m),Z},F.prototype.shl=function(R,j){return this._verify1(R),this.imod(R.ushln(j))},F.prototype.imul=function(R,j){return this._verify2(R,j),this.imod(R.imul(j))},F.prototype.mul=function(R,j){return this._verify2(R,j),this.imod(R.mul(j))},F.prototype.isqr=function(R){return this.imul(R,R.clone())},F.prototype.sqr=function(R){return this.mul(R,R)},F.prototype.sqrt=function(R){if(R.isZero())return R.clone();var j=this.m.andln(3);if(i(j%2==1),j===3){var Z=this.m.add(new u(1)).iushrn(2);return this.pow(R,Z)}for(var B=this.m.subn(1),q=0;!B.isZero()&&B.andln(1)===0;)q++,B.iushrn(1);i(!B.isZero());var V=new u(1).toRed(this),ne=V.redNeg(),ee=this.m.subn(1).iushrn(1),$=this.m.bitLength();for($=new u(2*$*$).toRed(this);this.pow($,ee).cmp(ne)!==0;)$.redIAdd(ne);for(var J=this.pow($,B),K=this.pow(R,B.addn(1).iushrn(1)),te=this.pow(R,B),ie=q;te.cmp(V)!==0;){for(var ae=te,se=0;ae.cmp(V)!==0;se++)ae=ae.redSqr();i(se<ie);var ce=this.pow(J,new u(1).iushln(ie-se-1));K=K.redMul(ce),J=ce.redSqr(),te=te.redMul(J),ie=se}return K},F.prototype.invm=function(R){var j=R._invmp(this.m);return j.negative!==0?(j.negative=0,this.imod(j).redNeg()):this.imod(j)},F.prototype.pow=function(R,j){if(j.isZero())return new u(1).toRed(this);if(j.cmpn(1)===0)return R.clone();var Z=new Array(16);Z[0]=new u(1).toRed(this),Z[1]=R;for(var B=2;B<Z.length;B++)Z[B]=this.mul(Z[B-1],R);var q=Z[0],V=0,ne=0,ee=j.bitLength()%26;for(ee===0&&(ee=26),B=j.length-1;B>=0;B--){for(var $=j.words[B],J=ee-1;J>=0;J--){var K=$>>J&1;q!==Z[0]&&(q=this.sqr(q)),K!==0||V!==0?(V<<=1,V|=K,(++ne==4||B===0&&J===0)&&(q=this.mul(q,Z[V]),ne=0,V=0)):ne=0}ee=26}return q},F.prototype.convertTo=function(R){var j=R.umod(this.m);return j===R?j.clone():j},F.prototype.convertFrom=function(R){var j=R.clone();return j.red=null,j},u.mont=function(R){return new U(R)},l(U,F),U.prototype.convertTo=function(R){return this.imod(R.ushln(this.shift))},U.prototype.convertFrom=function(R){var j=this.imod(R.mul(this.rinv));return j.red=null,j},U.prototype.imul=function(R,j){if(R.isZero()||j.isZero())return R.words[0]=0,R.length=1,R;var Z=R.imul(j),B=Z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),q=Z.isub(B).iushrn(this.shift),V=q;return q.cmp(this.m)>=0?V=q.isub(this.m):q.cmpn(0)<0&&(V=q.iadd(this.m)),V._forceRed(this)},U.prototype.mul=function(R,j){if(R.isZero()||j.isZero())return new u(0)._forceRed(this);var Z=R.mul(j),B=Z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),q=Z.isub(B).iushrn(this.shift),V=q;return q.cmp(this.m)>=0?V=q.isub(this.m):q.cmpn(0)<0&&(V=q.iadd(this.m)),V._forceRed(this)},U.prototype.invm=function(R){return this.imod(R._invmp(this.m).mul(this.r2))._forceRed(this)}})(p=n.nmd(p),this)},2692:function(p){p.exports=function(s){var n,a,r,i=s.length,l=0;for(n=0;n<i;++n)l+=s[n].length;var u=new Array(l),c=0;for(n=0;n<i;++n){var g=s[n],f=g.length;for(a=0;a<f;++a){var b=u[c++]=new Array(f-1),v=0;for(r=0;r<f;++r)r!==a&&(b[v++]=g[r]);if(1&a){var d=b[1];b[1]=b[0],b[0]=d}}}return u}},2569:function(p,s,n){p.exports=function(b,v,d){switch(arguments.length){case 1:return a=[],g(m=b,m,f,!0),a;case 2:return typeof v=="function"?g(b,b,v,!0):function(x,y){return a=[],g(x,y,f,!1),a}(b,v);case 3:return g(b,v,d,!1);default:throw new Error("box-intersect: Invalid arguments")}var m};var a,r=n(5306),i=n(1390),l=n(2337);function u(b,v){for(var d=0;d<b;++d)if(!(v[d]<=v[d+b]))return!0;return!1}function c(b,v,d,m){for(var x=0,y=0,T=0,h=b.length;T<h;++T){var E=b[T];if(!u(v,E)){for(var k=0;k<2*v;++k)d[x++]=E[k];m[y++]=T}}return y}function g(b,v,d,m){var x=b.length,y=v.length;if(!(x<=0||y<=0)){var T=b[0].length>>>1;if(!(T<=0)){var h,E=r.mallocDouble(2*T*x),k=r.mallocInt32(x);if((x=c(b,T,E,k))>0){if(T===1&&m)i.init(x),h=i.sweepComplete(T,d,0,x,E,k,0,x,E,k);else{var L=r.mallocDouble(2*T*y),P=r.mallocInt32(y);(y=c(v,T,L,P))>0&&(i.init(x+y),h=T===1?i.sweepBipartite(T,d,0,x,E,k,0,y,L,P):l(T,d,m,x,E,k,y,L,P),r.free(L),r.free(P))}r.free(E),r.free(k)}return h}}}function f(b,v){a.push([b,v])}},7333:function(p,s){function n(a){return a?function(r,i,l,u,c,g,f,b,v,d,m){return c-u>v-b?function(x,y,T,h,E,k,L,P,I,z,F){for(var U=2*x,R=h,j=U*h;R<E;++R,j+=U){var Z=k[y+j],B=k[y+j+x],q=L[R];e:for(var V=P,ne=U*P;V<I;++V,ne+=U){var ee=z[y+ne],$=z[y+ne+x],J=F[V];if(!($<Z||B<ee)){for(var K=y+1;K<x;++K){var te=k[K+j],ie=k[K+x+j],ae=z[K+ne],se=z[K+x+ne];if(ie<ae||se<te)continue e}var ce=T(q,J);if(ce!==void 0)return ce}}}}(r,i,l,u,c,g,f,b,v,d,m):function(x,y,T,h,E,k,L,P,I,z,F){for(var U=2*x,R=P,j=U*P;R<I;++R,j+=U){var Z=z[y+j],B=z[y+j+x],q=F[R];e:for(var V=h,ne=U*h;V<E;++V,ne+=U){var ee=k[y+ne],$=k[y+ne+x],J=L[V];if(!(B<ee||$<Z)){for(var K=y+1;K<x;++K){var te=k[K+ne],ie=k[K+x+ne],ae=z[K+j],se=z[K+x+j];if(ie<ae||se<te)continue e}var ce=T(J,q);if(ce!==void 0)return ce}}}}(r,i,l,u,c,g,f,b,v,d,m)}:function(r,i,l,u,c,g,f,b,v,d,m,x){return g-c>d-v?u?function(y,T,h,E,k,L,P,I,z,F,U){for(var R=2*y,j=E,Z=R*E;j<k;++j,Z+=R){var B=L[T+Z],q=L[T+Z+y],V=P[j];e:for(var ne=I,ee=R*I;ne<z;++ne,ee+=R){var $=F[T+ee],J=U[ne];if(!($<=B||q<$)){for(var K=T+1;K<y;++K){var te=L[K+Z],ie=L[K+y+Z],ae=F[K+ee],se=F[K+y+ee];if(ie<ae||se<te)continue e}var ce=h(J,V);if(ce!==void 0)return ce}}}}(r,i,l,c,g,f,b,v,d,m,x):function(y,T,h,E,k,L,P,I,z,F,U){for(var R=2*y,j=E,Z=R*E;j<k;++j,Z+=R){var B=L[T+Z],q=L[T+Z+y],V=P[j];e:for(var ne=I,ee=R*I;ne<z;++ne,ee+=R){var $=F[T+ee],J=U[ne];if(!($<B||q<$)){for(var K=T+1;K<y;++K){var te=L[K+Z],ie=L[K+y+Z],ae=F[K+ee],se=F[K+y+ee];if(ie<ae||se<te)continue e}var ce=h(V,J);if(ce!==void 0)return ce}}}}(r,i,l,c,g,f,b,v,d,m,x):u?function(y,T,h,E,k,L,P,I,z,F,U){for(var R=2*y,j=I,Z=R*I;j<z;++j,Z+=R){var B=F[T+Z],q=U[j];e:for(var V=E,ne=R*E;V<k;++V,ne+=R){var ee=L[T+ne],$=L[T+ne+y],J=P[V];if(!(B<=ee||$<B)){for(var K=T+1;K<y;++K){var te=L[K+ne],ie=L[K+y+ne],ae=F[K+Z],se=F[K+y+Z];if(ie<ae||se<te)continue e}var ce=h(q,J);if(ce!==void 0)return ce}}}}(r,i,l,c,g,f,b,v,d,m,x):function(y,T,h,E,k,L,P,I,z,F,U){for(var R=2*y,j=I,Z=R*I;j<z;++j,Z+=R){var B=F[T+Z],q=U[j];e:for(var V=E,ne=R*E;V<k;++V,ne+=R){var ee=L[T+ne],$=L[T+ne+y],J=P[V];if(!(B<ee||$<B)){for(var K=T+1;K<y;++K){var te=L[K+ne],ie=L[K+y+ne],ae=F[K+Z],se=F[K+y+Z];if(ie<ae||se<te)continue e}var ce=h(J,q);if(ce!==void 0)return ce}}}}(r,i,l,c,g,f,b,v,d,m,x)}}s.partial=n(!1),s.full=n(!0)},2337:function(p,s,n){p.exports=function(R,j,Z,B,q,V,ne,ee,$){(function(Re,Oe){var Ve=8*r.log2(Oe+1)*(Re+1)|0,qe=r.nextPow2(k*Ve);P.length<qe&&(a.free(P),P=a.mallocInt32(qe));var Je=r.nextPow2(L*Ve);I.length<Je&&(a.free(I),I=a.mallocDouble(Je))})(R,B+ne);var J,K=0,te=2*R;for(z(K++,0,0,B,0,ne,Z?16:0,-1/0,1/0),Z||z(K++,0,0,ne,0,B,1,-1/0,1/0);K>0;){var ie=(K-=1)*k,ae=P[ie],se=P[ie+1],ce=P[ie+2],de=P[ie+3],ge=P[ie+4],ve=P[ie+5],be=K*L,me=I[be],Se=I[be+1],we=1&ve,_e=!!(16&ve),oe=q,le=V,pe=ee,Ee=$;if(we&&(oe=ee,le=$,pe=q,Ee=V),!(2&ve&&se>=(ce=y(R,ae,se,ce,oe,le,Se))||4&ve&&(se=T(R,ae,se,ce,oe,le,me))>=ce)){var Te=ce-se,Me=ge-de;if(_e){if(R*Te*(Te+Me)<d){if((J=c.scanComplete(R,ae,j,se,ce,oe,le,de,ge,pe,Ee))!==void 0)return J;continue}}else{if(R*Math.min(Te,Me)<b){if((J=l(R,ae,j,we,se,ce,oe,le,de,ge,pe,Ee))!==void 0)return J;continue}if(R*Te*Me<v){if((J=c.scanBipartite(R,ae,j,we,se,ce,oe,le,de,ge,pe,Ee))!==void 0)return J;continue}}var Le=m(R,ae,se,ce,oe,le,me,Se);if(se<Le)if(R*(Le-se)<b){if((J=u(R,ae+1,j,se,Le,oe,le,de,ge,pe,Ee))!==void 0)return J}else if(ae===R-2){if((J=we?c.sweepBipartite(R,j,de,ge,pe,Ee,se,Le,oe,le):c.sweepBipartite(R,j,se,Le,oe,le,de,ge,pe,Ee))!==void 0)return J}else z(K++,ae+1,se,Le,de,ge,we,-1/0,1/0),z(K++,ae+1,de,ge,se,Le,1^we,-1/0,1/0);if(Le<ce){var Ie=g(R,ae,de,ge,pe,Ee),he=pe[te*Ie+ae],xe=x(R,ae,Ie,ge,pe,Ee,he);if(xe<ge&&z(K++,ae,Le,ce,xe,ge,(4|we)+(_e?16:0),he,Se),de<Ie&&z(K++,ae,Le,ce,de,Ie,(2|we)+(_e?16:0),me,he),Ie+1===xe){if((J=_e?U(R,ae,j,Le,ce,oe,le,Ie,pe,Ee[Ie]):F(R,ae,j,we,Le,ce,oe,le,Ie,pe,Ee[Ie]))!==void 0)return J}else if(Ie<xe){var ke;if(_e){if(Le<(ke=h(R,ae,Le,ce,oe,le,he))){var ze=x(R,ae,Le,ke,oe,le,he);if(ae===R-2){if(Le<ze&&(J=c.sweepComplete(R,j,Le,ze,oe,le,Ie,xe,pe,Ee))!==void 0||ze<ke&&(J=c.sweepBipartite(R,j,ze,ke,oe,le,Ie,xe,pe,Ee))!==void 0)return J}else Le<ze&&z(K++,ae+1,Le,ze,Ie,xe,16,-1/0,1/0),ze<ke&&(z(K++,ae+1,ze,ke,Ie,xe,0,-1/0,1/0),z(K++,ae+1,Ie,xe,ze,ke,1,-1/0,1/0))}}else Le<(ke=we?E(R,ae,Le,ce,oe,le,he):h(R,ae,Le,ce,oe,le,he))&&(ae===R-2?J=we?c.sweepBipartite(R,j,Ie,xe,pe,Ee,Le,ke,oe,le):c.sweepBipartite(R,j,Le,ke,oe,le,Ie,xe,pe,Ee):(z(K++,ae+1,Le,ke,Ie,xe,we,-1/0,1/0),z(K++,ae+1,Ie,xe,Le,ke,1^we,-1/0,1/0)))}}}}};var a=n(5306),r=n(2288),i=n(7333),l=i.partial,u=i.full,c=n(1390),g=n(2464),f=n(122),b=128,v=1<<22,d=1<<22,m=f("!(lo>=p0)&&!(p1>=hi)"),x=f("lo===p0"),y=f("lo<p0"),T=f("hi<=p0"),h=f("lo<=p0&&p0<=hi"),E=f("lo<p0&&p0<=hi"),k=6,L=2,P=a.mallocInt32(1024),I=a.mallocDouble(1024);function z(R,j,Z,B,q,V,ne,ee,$){var J=k*R;P[J]=j,P[J+1]=Z,P[J+2]=B,P[J+3]=q,P[J+4]=V,P[J+5]=ne;var K=L*R;I[K]=ee,I[K+1]=$}function F(R,j,Z,B,q,V,ne,ee,$,J,K){var te=2*R,ie=$*te,ae=J[ie+j];e:for(var se=q,ce=q*te;se<V;++se,ce+=te){var de=ne[ce+j],ge=ne[ce+j+R];if(!(ae<de||ge<ae||B&&ae===de)){for(var ve,be=ee[se],me=j+1;me<R;++me){de=ne[ce+me],ge=ne[ce+me+R];var Se=J[ie+me],we=J[ie+me+R];if(ge<Se||we<de)continue e}if((ve=B?Z(K,be):Z(be,K))!==void 0)return ve}}}function U(R,j,Z,B,q,V,ne,ee,$,J){var K=2*R,te=ee*K,ie=$[te+j];e:for(var ae=B,se=B*K;ae<q;++ae,se+=K){var ce=ne[ae];if(ce!==J){var de=V[se+j],ge=V[se+j+R];if(!(ie<de||ge<ie)){for(var ve=j+1;ve<R;++ve){de=V[se+ve],ge=V[se+ve+R];var be=$[te+ve],me=$[te+ve+R];if(ge<be||me<de)continue e}var Se=Z(ce,J);if(Se!==void 0)return Se}}}}},2464:function(p,s,n){p.exports=function(l,u,c,g,f,b){if(g<=c+1)return c;for(var v=c,d=g,m=g+c>>>1,x=2*l,y=m,T=f[x*m+u];v<d;){if(d-v<r){i(l,u,v,d,f,b),T=f[x*m+u];break}var h=d-v,E=Math.random()*h+v|0,k=f[x*E+u],L=Math.random()*h+v|0,P=f[x*L+u],I=Math.random()*h+v|0,z=f[x*I+u];k<=P?z>=P?(y=L,T=P):k>=z?(y=E,T=k):(y=I,T=z):P>=z?(y=L,T=P):z>=k?(y=E,T=k):(y=I,T=z);for(var F=x*(d-1),U=x*y,R=0;R<x;++R,++F,++U){var j=f[F];f[F]=f[U],f[U]=j}var Z=b[d-1];for(b[d-1]=b[y],b[y]=Z,F=x*(d-1),U=x*(y=a(l,u,v,d-1,f,b,T)),R=0;R<x;++R,++F,++U)j=f[F],f[F]=f[U],f[U]=j;if(Z=b[d-1],b[d-1]=b[y],b[y]=Z,m<y){for(d=y-1;v<d&&f[x*(d-1)+u]===T;)d-=1;d+=1}else{if(!(y<m))break;for(v=y+1;v<d&&f[x*v+u]===T;)v+=1}}return a(l,u,c,m,f,b,f[x*m+u])};var a=n(122)("lo<p0"),r=8;function i(l,u,c,g,f,b){for(var v=2*l,d=v*(c+1)+u,m=c+1;m<g;++m,d+=v)for(var x=f[d],y=m,T=v*(m-1);y>c&&f[T+u]>x;--y,T-=v){for(var h=T,E=T+v,k=0;k<v;++k,++h,++E){var L=f[h];f[h]=f[E],f[E]=L}var P=b[y];b[y]=b[y-1],b[y-1]=P}}},122:function(p){p.exports=function(n){return s[n]};var s={"lo===p0":function(n,a,r,i,l,u,c){for(var g=2*n,f=g*r,b=f,v=r,d=a,m=r;i>m;++m,f+=g)if(l[f+d]===c)if(v===m)v+=1,b+=g;else{for(var x=0;g>x;++x){var y=l[f+x];l[f+x]=l[b],l[b++]=y}var T=u[m];u[m]=u[v],u[v++]=T}return v},"lo<p0":function(n,a,r,i,l,u,c){for(var g=2*n,f=g*r,b=f,v=r,d=a,m=r;i>m;++m,f+=g)if(l[f+d]<c)if(v===m)v+=1,b+=g;else{for(var x=0;g>x;++x){var y=l[f+x];l[f+x]=l[b],l[b++]=y}var T=u[m];u[m]=u[v],u[v++]=T}return v},"lo<=p0":function(n,a,r,i,l,u,c){for(var g=2*n,f=g*r,b=f,v=r,d=n+a,m=r;i>m;++m,f+=g)if(l[f+d]<=c)if(v===m)v+=1,b+=g;else{for(var x=0;g>x;++x){var y=l[f+x];l[f+x]=l[b],l[b++]=y}var T=u[m];u[m]=u[v],u[v++]=T}return v},"hi<=p0":function(n,a,r,i,l,u,c){for(var g=2*n,f=g*r,b=f,v=r,d=n+a,m=r;i>m;++m,f+=g)if(l[f+d]<=c)if(v===m)v+=1,b+=g;else{for(var x=0;g>x;++x){var y=l[f+x];l[f+x]=l[b],l[b++]=y}var T=u[m];u[m]=u[v],u[v++]=T}return v},"lo<p0&&p0<=hi":function(n,a,r,i,l,u,c){for(var g=2*n,f=g*r,b=f,v=r,d=a,m=n+a,x=r;i>x;++x,f+=g){var y=l[f+d],T=l[f+m];if(y<c&&c<=T)if(v===x)v+=1,b+=g;else{for(var h=0;g>h;++h){var E=l[f+h];l[f+h]=l[b],l[b++]=E}var k=u[x];u[x]=u[v],u[v++]=k}}return v},"lo<=p0&&p0<=hi":function(n,a,r,i,l,u,c){for(var g=2*n,f=g*r,b=f,v=r,d=a,m=n+a,x=r;i>x;++x,f+=g){var y=l[f+d],T=l[f+m];if(y<=c&&c<=T)if(v===x)v+=1,b+=g;else{for(var h=0;g>h;++h){var E=l[f+h];l[f+h]=l[b],l[b++]=E}var k=u[x];u[x]=u[v],u[v++]=k}}return v},"!(lo>=p0)&&!(p1>=hi)":function(n,a,r,i,l,u,c,g){for(var f=2*n,b=f*r,v=b,d=r,m=a,x=n+a,y=r;i>y;++y,b+=f){var T=l[b+m],h=l[b+x];if(!(T>=c||g>=h))if(d===y)d+=1,v+=f;else{for(var E=0;f>E;++E){var k=l[b+E];l[b+E]=l[v],l[v++]=k}var L=u[y];u[y]=u[d],u[d++]=L}}return d}}},309:function(p){p.exports=function(f,b){b<=4*s?n(0,b-1,f):g(0,b-1,f)};var s=32;function n(f,b,v){for(var d=2*(f+1),m=f+1;m<=b;++m){for(var x=v[d++],y=v[d++],T=m,h=d-2;T-- >f;){var E=v[h-2],k=v[h-1];if(E<x||E===x&&k<y)break;v[h]=E,v[h+1]=k,h-=2}v[h]=x,v[h+1]=y}}function a(f,b,v){b*=2;var d=v[f*=2],m=v[f+1];v[f]=v[b],v[f+1]=v[b+1],v[b]=d,v[b+1]=m}function r(f,b,v){b*=2,v[f*=2]=v[b],v[f+1]=v[b+1]}function i(f,b,v,d){b*=2,v*=2;var m=d[f*=2],x=d[f+1];d[f]=d[b],d[f+1]=d[b+1],d[b]=d[v],d[b+1]=d[v+1],d[v]=m,d[v+1]=x}function l(f,b,v,d,m){b*=2,m[f*=2]=m[b],m[b]=v,m[f+1]=m[b+1],m[b+1]=d}function u(f,b,v){b*=2;var d=v[f*=2],m=v[b];return!(d<m)&&(d!==m||v[f+1]>v[b+1])}function c(f,b,v,d){var m=d[f*=2];return m<b||m===b&&d[f+1]<v}function g(f,b,v){var d=(b-f+1)/6|0,m=f+d,x=b-d,y=f+b>>1,T=y-d,h=y+d,E=m,k=T,L=y,P=h,I=x,z=f+1,F=b-1,U=0;u(E,k,v)&&(U=E,E=k,k=U),u(P,I,v)&&(U=P,P=I,I=U),u(E,L,v)&&(U=E,E=L,L=U),u(k,L,v)&&(U=k,k=L,L=U),u(E,P,v)&&(U=E,E=P,P=U),u(L,P,v)&&(U=L,L=P,P=U),u(k,I,v)&&(U=k,k=I,I=U),u(k,L,v)&&(U=k,k=L,L=U),u(P,I,v)&&(U=P,P=I,I=U);for(var R=v[2*k],j=v[2*k+1],Z=v[2*P],B=v[2*P+1],q=2*E,V=2*L,ne=2*I,ee=2*m,$=2*y,J=2*x,K=0;K<2;++K){var te=v[q+K],ie=v[V+K],ae=v[ne+K];v[ee+K]=te,v[$+K]=ie,v[J+K]=ae}r(T,f,v),r(h,b,v);for(var se=z;se<=F;++se)if(c(se,R,j,v))se!==z&&a(se,z,v),++z;else if(!c(se,Z,B,v))for(;;){if(c(F,Z,B,v)){c(F,R,j,v)?(i(se,z,F,v),++z,--F):(a(se,F,v),--F);break}if(--F<se)break}l(f,z-1,R,j,v),l(b,F+1,Z,B,v),z-2-f<=s?n(f,z-2,v):g(f,z-2,v),b-(F+2)<=s?n(F+2,b,v):g(F+2,b,v),F-z<=s?n(z,F,v):g(z,F,v)}},1390:function(p,s,n){p.exports={init:function(T){var h=r.nextPow2(T);c.length<h&&(a.free(c),c=a.mallocInt32(h)),g.length<h&&(a.free(g),g=a.mallocInt32(h)),f.length<h&&(a.free(f),f=a.mallocInt32(h)),b.length<h&&(a.free(b),b=a.mallocInt32(h)),v.length<h&&(a.free(v),v=a.mallocInt32(h)),d.length<h&&(a.free(d),d=a.mallocInt32(h));var E=8*h;m.length<E&&(a.free(m),m=a.mallocDouble(E))},sweepBipartite:function(T,h,E,k,L,P,I,z,F,U){for(var R=0,j=2*T,Z=T-1,B=j-1,q=E;q<k;++q){var V=P[q],ne=j*q;m[R++]=L[ne+Z],m[R++]=-(V+1),m[R++]=L[ne+B],m[R++]=V}for(q=I;q<z;++q){V=U[q]+l;var ee=j*q;m[R++]=F[ee+Z],m[R++]=-V,m[R++]=F[ee+B],m[R++]=V}var $=R>>>1;i(m,$);var J=0,K=0;for(q=0;q<$;++q){var te=0|m[2*q+1];if(te>=l)x(f,b,K--,te=te-l|0);else if(te>=0)x(c,g,J--,te);else if(te<=-l){te=-te-l|0;for(var ie=0;ie<J;++ie)if((ae=h(c[ie],te))!==void 0)return ae;y(f,b,K++,te)}else{for(te=-te-1|0,ie=0;ie<K;++ie){var ae;if((ae=h(te,f[ie]))!==void 0)return ae}y(c,g,J++,te)}}},sweepComplete:function(T,h,E,k,L,P,I,z,F,U){for(var R=0,j=2*T,Z=T-1,B=j-1,q=E;q<k;++q){var V=P[q]+1<<1,ne=j*q;m[R++]=L[ne+Z],m[R++]=-V,m[R++]=L[ne+B],m[R++]=V}for(q=I;q<z;++q){V=U[q]+1<<1;var ee=j*q;m[R++]=F[ee+Z],m[R++]=1|-V,m[R++]=F[ee+B],m[R++]=1|V}var $=R>>>1;i(m,$);var J=0,K=0,te=0;for(q=0;q<$;++q){var ie=0|m[2*q+1],ae=1&ie;if(q<$-1&&ie>>1==m[2*q+3]>>1&&(ae=2,q+=1),ie<0){for(var se=-(ie>>1)-1,ce=0;ce<te;++ce)if((de=h(v[ce],se))!==void 0)return de;if(ae!==0){for(ce=0;ce<J;++ce)if((de=h(c[ce],se))!==void 0)return de}if(ae!==1)for(ce=0;ce<K;++ce){var de;if((de=h(f[ce],se))!==void 0)return de}ae===0?y(c,g,J++,se):ae===1?y(f,b,K++,se):ae===2&&y(v,d,te++,se)}else se=(ie>>1)-1,ae===0?x(c,g,J--,se):ae===1?x(f,b,K--,se):ae===2&&x(v,d,te--,se)}},scanBipartite:function(T,h,E,k,L,P,I,z,F,U,R,j){var Z=0,B=2*T,q=h,V=h+T,ne=1,ee=1;k?ee=l:ne=l;for(var $=L;$<P;++$){var J=$+ne,K=B*$;m[Z++]=I[K+q],m[Z++]=-J,m[Z++]=I[K+V],m[Z++]=J}for($=F;$<U;++$){J=$+ee;var te=B*$;m[Z++]=R[te+q],m[Z++]=-J}var ie=Z>>>1;i(m,ie);var ae=0;for($=0;$<ie;++$){var se=0|m[2*$+1];if(se<0){var ce=!1;if((J=-se)>=l?(ce=!k,J-=l):(ce=!!k,J-=1),ce)y(c,g,ae++,J);else{var de=j[J],ge=B*J,ve=R[ge+h+1],be=R[ge+h+1+T];e:for(var me=0;me<ae;++me){var Se=c[me],we=B*Se;if(!(be<I[we+h+1]||I[we+h+1+T]<ve)){for(var _e=h+2;_e<T;++_e)if(R[ge+_e+T]<I[we+_e]||I[we+_e+T]<R[ge+_e])continue e;var oe,le=z[Se];if((oe=k?E(de,le):E(le,de))!==void 0)return oe}}}}else x(c,g,ae--,se-ne)}},scanComplete:function(T,h,E,k,L,P,I,z,F,U,R){for(var j=0,Z=2*T,B=h,q=h+T,V=k;V<L;++V){var ne=V+l,ee=Z*V;m[j++]=P[ee+B],m[j++]=-ne,m[j++]=P[ee+q],m[j++]=ne}for(V=z;V<F;++V){ne=V+1;var $=Z*V;m[j++]=U[$+B],m[j++]=-ne}var J=j>>>1;i(m,J);var K=0;for(V=0;V<J;++V){var te=0|m[2*V+1];if(te<0)if((ne=-te)>=l)c[K++]=ne-l;else{var ie=R[ne-=1],ae=Z*ne,se=U[ae+h+1],ce=U[ae+h+1+T];e:for(var de=0;de<K;++de){var ge=c[de],ve=I[ge];if(ve===ie)break;var be=Z*ge;if(!(ce<P[be+h+1]||P[be+h+1+T]<se)){for(var me=h+2;me<T;++me)if(U[ae+me+T]<P[be+me]||P[be+me+T]<U[ae+me])continue e;var Se=E(ve,ie);if(Se!==void 0)return Se}}}else{for(ne=te-l,de=K-1;de>=0;--de)if(c[de]===ne){for(me=de+1;me<K;++me)c[me-1]=c[me];break}--K}}}};var a=n(5306),r=n(2288),i=n(309),l=1<<28,u=1024,c=a.mallocInt32(u),g=a.mallocInt32(u),f=a.mallocInt32(u),b=a.mallocInt32(u),v=a.mallocInt32(u),d=a.mallocInt32(u),m=a.mallocDouble(8192);function x(T,h,E,k){var L=h[k],P=T[E-1];T[L]=P,h[P]=L}function y(T,h,E,k){T[E]=k,h[k]=E}},7761:function(p,s,n){var a=n(9971),r=n(743),i=n(2161),l=n(7098);function u(f){return[Math.min(f[0],f[1]),Math.max(f[0],f[1])]}function c(f,b){return f[0]-b[0]||f[1]-b[1]}function g(f,b,v){return b in f?f[b]:v}p.exports=function(f,b,v){Array.isArray(b)?(v=v||{},b=b||[]):(v=b||{},b=[]);var d=!!g(v,"delaunay",!0),m=!!g(v,"interior",!0),x=!!g(v,"exterior",!0),y=!!g(v,"infinity",!1);if(!m&&!x||f.length===0)return[];var T=a(f,b);if(d||m!==x||y){for(var h=r(f.length,function(L){return L.map(u).sort(c)}(b)),E=0;E<T.length;++E){var k=T[E];h.addTriangle(k[0],k[1],k[2])}return d&&i(f,h),x?m?y?l(h,0,y):h.cells():l(h,1,y):l(h,-1)}return T}},2161:function(p,s,n){var a=n(2227)[4];function r(i,l,u,c,g,f){var b=l.opposite(c,g);if(!(b<0)){if(g<c){var v=c;c=g,g=v,v=f,f=b,b=v}l.isConstraint(c,g)||a(i[c],i[g],i[f],i[b])<0&&u.push(c,g)}}n(5070),p.exports=function(i,l){for(var u=[],c=i.length,g=l.stars,f=0;f<c;++f)for(var b=g[f],v=1;v<b.length;v+=2)if(!((y=b[v])<f||l.isConstraint(f,y))){for(var d=b[v-1],m=-1,x=1;x<b.length;x+=2)if(b[x-1]===y){m=b[x];break}m<0||a(i[f],i[y],i[d],i[m])<0&&u.push(f,y)}for(;u.length>0;){for(var y=u.pop(),T=(d=-1,m=-1,b=g[f=u.pop()],1);T<b.length;T+=2){var h=b[T-1],E=b[T];h===y?m=E:E===y&&(d=h)}d<0||m<0||a(i[f],i[y],i[d],i[m])>=0||(l.flip(f,y),r(i,l,u,d,f,m),r(i,l,u,f,m,d),r(i,l,u,m,y,d),r(i,l,u,y,d,m))}}},7098:function(p,s,n){var a,r=n(5070);function i(u,c,g,f,b,v,d){this.cells=u,this.neighbor=c,this.flags=f,this.constraint=g,this.active=b,this.next=v,this.boundary=d}function l(u,c){return u[0]-c[0]||u[1]-c[1]||u[2]-c[2]}p.exports=function(u,c,g){var f=function(I,z){for(var F=I.cells(),U=F.length,R=0;R<U;++R){var j=(te=F[R])[0],Z=te[1],B=te[2];Z<B?Z<j&&(te[0]=Z,te[1]=B,te[2]=j):B<j&&(te[0]=B,te[1]=j,te[2]=Z)}F.sort(l);var q=new Array(U);for(R=0;R<q.length;++R)q[R]=0;var V=[],ne=[],ee=new Array(3*U),$=new Array(3*U),J=null;z&&(J=[]);var K=new i(F,ee,$,q,V,ne,J);for(R=0;R<U;++R)for(var te=F[R],ie=0;ie<3;++ie){j=te[ie],Z=te[(ie+1)%3];var ae=ee[3*R+ie]=K.locate(Z,j,I.opposite(Z,j)),se=$[3*R+ie]=I.isConstraint(j,Z);ae<0&&(se?ne.push(R):(V.push(R),q[R]=1),z&&J.push([Z,j,-1]))}return K}(u,g);if(c===0)return g?f.cells.concat(f.boundary):f.cells;for(var b=1,v=f.active,d=f.next,m=f.flags,x=f.cells,y=f.constraint,T=f.neighbor;v.length>0||d.length>0;){for(;v.length>0;){var h=v.pop();if(m[h]!==-b){m[h]=b,x[h];for(var E=0;E<3;++E){var k=T[3*h+E];k>=0&&m[k]===0&&(y[3*h+E]?d.push(k):(v.push(k),m[k]=b))}}}var L=d;d=v,v=L,d.length=0,b=-b}var P=function(I,z,F){for(var U=0,R=0;R<I.length;++R)z[R]===F&&(I[U++]=I[R]);return I.length=U,I}(x,m,c);return g?P.concat(f.boundary):P},i.prototype.locate=(a=[0,0,0],function(u,c,g){var f=u,b=c,v=g;return c<g?c<u&&(f=c,b=g,v=u):g<u&&(f=g,b=u,v=c),f<0?-1:(a[0]=f,a[1]=b,a[2]=v,r.eq(this.cells,a,l))})},9971:function(p,s,n){var a=n(5070),r=n(417)[3];function i(d,m,x,y,T){this.a=d,this.b=m,this.idx=x,this.lowerIds=y,this.upperIds=T}function l(d,m,x,y){this.a=d,this.b=m,this.type=x,this.idx=y}function u(d,m){var x=d.a[0]-m.a[0]||d.a[1]-m.a[1]||d.type-m.type;return x||(d.type!==0&&(x=r(d.a,d.b,m.b))?x:d.idx-m.idx)}function c(d,m){return r(d.a,d.b,m)}function g(d,m,x,y,T){for(var h=a.lt(m,y,c),E=a.gt(m,y,c),k=h;k<E;++k){for(var L=m[k],P=L.lowerIds,I=P.length;I>1&&r(x[P[I-2]],x[P[I-1]],y)>0;)d.push([P[I-1],P[I-2],T]),I-=1;P.length=I,P.push(T);var z=L.upperIds;for(I=z.length;I>1&&r(x[z[I-2]],x[z[I-1]],y)<0;)d.push([z[I-2],z[I-1],T]),I-=1;z.length=I,z.push(T)}}function f(d,m){var x;return(x=d.a[0]<m.a[0]?r(d.a,d.b,m.a):r(m.b,m.a,d.a))?x:(x=m.b[0]<d.b[0]?r(d.a,d.b,m.b):r(m.b,m.a,d.b))||d.idx-m.idx}function b(d,m,x){var y=a.le(d,x,f),T=d[y],h=T.upperIds,E=h[h.length-1];T.upperIds=[E],d.splice(y+1,0,new i(x.a,x.b,x.idx,[E],h))}function v(d,m,x){var y=x.a;x.a=x.b,x.b=y;var T=a.eq(d,x,f),h=d[T];d[T-1].upperIds=h.upperIds,d.splice(T,1)}p.exports=function(d,m){for(var x=d.length,y=m.length,T=[],h=0;h<x;++h)T.push(new l(d[h],null,0,h));for(h=0;h<y;++h){var E=m[h],k=d[E[0]],L=d[E[1]];k[0]<L[0]?T.push(new l(k,L,2,h),new l(L,k,1,h)):k[0]>L[0]&&T.push(new l(L,k,2,h),new l(k,L,1,h))}T.sort(u);for(var P=T[0].a[0]-(1+Math.abs(T[0].a[0]))*Math.pow(2,-52),I=[new i([P,1],[P,0],-1,[],[])],z=[],F=(h=0,T.length);h<F;++h){var U=T[h],R=U.type;R===0?g(z,I,d,U.a,U.idx):R===2?b(I,0,U):v(I,0,U)}return z}},743:function(p,s,n){var a=n(5070);function r(u,c){this.stars=u,this.edges=c}p.exports=function(u,c){for(var g=new Array(u),f=0;f<u;++f)g[f]=[];return new r(g,c)};var i=r.prototype;function l(u,c,g){for(var f=1,b=u.length;f<b;f+=2)if(u[f-1]===c&&u[f]===g)return u[f-1]=u[b-2],u[f]=u[b-1],void(u.length=b-2)}i.isConstraint=function(){var u=[0,0];function c(g,f){return g[0]-f[0]||g[1]-f[1]}return function(g,f){return u[0]=Math.min(g,f),u[1]=Math.max(g,f),a.eq(this.edges,u,c)>=0}}(),i.removeTriangle=function(u,c,g){var f=this.stars;l(f[u],c,g),l(f[c],g,u),l(f[g],u,c)},i.addTriangle=function(u,c,g){var f=this.stars;f[u].push(c,g),f[c].push(g,u),f[g].push(u,c)},i.opposite=function(u,c){for(var g=this.stars[c],f=1,b=g.length;f<b;f+=2)if(g[f]===u)return g[f-1];return-1},i.flip=function(u,c){var g=this.opposite(u,c),f=this.opposite(c,u);this.removeTriangle(u,c,g),this.removeTriangle(c,u,f),this.addTriangle(u,f,g),this.addTriangle(c,g,f)},i.edges=function(){for(var u=this.stars,c=[],g=0,f=u.length;g<f;++g)for(var b=u[g],v=0,d=b.length;v<d;v+=2)c.push([b[v],b[v+1]]);return c},i.cells=function(){for(var u=this.stars,c=[],g=0,f=u.length;g<f;++g)for(var b=u[g],v=0,d=b.length;v<d;v+=2){var m=b[v],x=b[v+1];g<Math.min(m,x)&&c.push([g,m,x])}return c}},9887:function(p){p.exports=function(s){for(var n=1,a=1;a<s.length;++a)for(var r=0;r<a;++r)if(s[a]<s[r])n=-n;else if(s[r]===s[a])return 0;return n}},9243:function(p,s,n){var a=n(3094),r=n(6606);function i(c,g){for(var f=0,b=c.length,v=0;v<b;++v)f+=c[v]*g[v];return f}function l(c){var g=c.length;if(g===0)return[];c[0].length;var f=a([c.length+1,c.length+1],1),b=a([c.length+1],1);f[g][g]=0;for(var v=0;v<g;++v){for(var d=0;d<=v;++d)f[d][v]=f[v][d]=2*i(c[v],c[d]);b[v]=i(c[v],c[v])}var m=r(f,b),x=0,y=m[g+1];for(v=0;v<y.length;++v)x+=y[v];var T=new Array(g);for(v=0;v<g;++v){y=m[v];var h=0;for(d=0;d<y.length;++d)h+=y[d];T[v]=h/x}return T}function u(c){if(c.length===0)return[];for(var g=c[0].length,f=a([g]),b=l(c),v=0;v<c.length;++v)for(var d=0;d<g;++d)f[d]+=c[v][d]*b[v];return f}u.barycenetric=l,p.exports=u},1778:function(p,s,n){p.exports=function(r){for(var i=a(r),l=0,u=0;u<r.length;++u)for(var c=r[u],g=0;g<i.length;++g)l+=Math.pow(c[g]-i[g],2);return Math.sqrt(l/r.length)};var a=n(9243)},197:function(p,s,n){p.exports=function(E,k,L){var P;if(L){P=k;for(var I=new Array(k.length),z=0;z<k.length;++z){var F=k[z];I[z]=[F[0],F[1],L[z]]}k=I}for(var U=function(R,j,Z){var B=m(R,[],d(R));return T(j,B,Z),!!B}(E,k,!!L);h(E,k,!!L);)U=!0;if(L&&U)for(P.length=0,L.length=0,z=0;z<k.length;++z)F=k[z],P.push([F[0],F[1]]),L.push(F[2]);return U};var a=n(1731),r=n(2569),i=n(4434),l=n(5125),u=n(8846),c=n(7999),g=n(2826),f=n(8551),b=n(5528);function v(E){var k=c(E);return[f(k,-1/0),f(k,1/0)]}function d(E){for(var k=new Array(E.length),L=0;L<E.length;++L){var P=E[L];k[L]=[f(P[0],-1/0),f(P[1],-1/0),f(P[0],1/0),f(P[1],1/0)]}return k}function m(E,k,L){for(var P=k.length,I=new a(P),z=[],F=0;F<k.length;++F){var U=k[F],R=v(U[0]),j=v(U[1]);z.push([f(R[0],-1/0),f(j[0],-1/0),f(R[1],1/0),f(j[1],1/0)])}r(z,function(ne,ee){I.link(ne,ee)});var Z=!0,B=new Array(P);for(F=0;F<P;++F)(V=I.find(F))!==F&&(Z=!1,E[V]=[Math.min(E[F][0],E[V][0]),Math.min(E[F][1],E[V][1])]);if(Z)return null;var q=0;for(F=0;F<P;++F){var V;(V=I.find(F))===F?(B[F]=q,E[q++]=E[F]):B[F]=-1}for(E.length=q,F=0;F<P;++F)B[F]<0&&(B[F]=B[I.find(F)]);return B}function x(E,k){return E[0]-k[0]||E[1]-k[1]}function y(E,k){return E[0]-k[0]||E[1]-k[1]||(E[2]<k[2]?-1:E[2]>k[2]?1:0)}function T(E,k,L){if(E.length!==0){if(k)for(var P=0;P<E.length;++P){var I=k[(F=E[P])[0]],z=k[F[1]];F[0]=Math.min(I,z),F[1]=Math.max(I,z)}else for(P=0;P<E.length;++P){var F;I=(F=E[P])[0],z=F[1],F[0]=Math.min(I,z),F[1]=Math.max(I,z)}L?E.sort(y):E.sort(x);var U=1;for(P=1;P<E.length;++P){var R=E[P-1],j=E[P];(j[0]!==R[0]||j[1]!==R[1]||L&&j[2]!==R[2])&&(E[U++]=j)}E.length=U}}function h(E,k,L){var P=function(R,j){for(var Z=new Array(j.length),B=0;B<j.length;++B){var q=j[B],V=R[q[0]],ne=R[q[1]];Z[B]=[f(Math.min(V[0],ne[0]),-1/0),f(Math.min(V[1],ne[1]),-1/0),f(Math.max(V[0],ne[0]),1/0),f(Math.max(V[1],ne[1]),1/0)]}return Z}(E,k),I=function(R,j,Z){var B=[];return r(Z,function(q,V){var ne=j[q],ee=j[V];if(ne[0]!==ee[0]&&ne[0]!==ee[1]&&ne[1]!==ee[0]&&ne[1]!==ee[1]){var $=R[ne[0]],J=R[ne[1]],K=R[ee[0]],te=R[ee[1]];i($,J,K,te)&&B.push([q,V])}}),B}(E,k,P),z=function(R,j,Z,B){var q=[];return r(Z,B,function(V,ne){var ee=j[V];if(ee[0]!==ne&&ee[1]!==ne){var $=R[ne],J=R[ee[0]],K=R[ee[1]];i(J,K,$,$)&&q.push([V,ne])}}),q}(E,k,P,d(E)),F=function(R,j,Z,B,q){var V,ne,ee=R.map(function(oe){return[l(oe[0]),l(oe[1])]});for(V=0;V<Z.length;++V){var $=Z[V];ne=$[0];var J=$[1],K=j[ne],te=j[J],ie=b(g(R[K[0]]),g(R[K[1]]),g(R[te[0]]),g(R[te[1]]));if(ie){var ae=R.length;R.push([c(ie[0]),c(ie[1])]),ee.push(ie),B.push([ne,ae],[J,ae])}}for(B.sort(function(oe,le){if(oe[0]!==le[0])return oe[0]-le[0];var pe=ee[oe[1]],Ee=ee[le[1]];return u(pe[0],Ee[0])||u(pe[1],Ee[1])}),V=B.length-1;V>=0;--V){var se=j[ne=(we=B[V])[0]],ce=se[0],de=se[1],ge=R[ce],ve=R[de];if((ge[0]-ve[0]||ge[1]-ve[1])<0){var be=ce;ce=de,de=be}se[0]=ce;var me,Se=se[1]=we[1];for(q&&(me=se[2]);V>0&&B[V-1][0]===ne;){var we,_e=(we=B[--V])[1];q?j.push([Se,_e,me]):j.push([Se,_e]),Se=_e}q?j.push([Se,de,me]):j.push([Se,de])}return ee}(E,k,I,z,L),U=m(E,F);return T(k,U,L),!!U||I.length>0||z.length>0}},5528:function(p,s,n){p.exports=function(b,v,d,m){var x=u(v,b),y=u(m,d),T=f(x,y);if(l(T)===0)return null;var h=f(y,u(b,d)),E=r(h,T),k=g(x,E);return c(b,k)};var a=n(3962),r=n(9189),i=n(4354),l=n(4951),u=n(6695),c=n(7584),g=n(4469);function f(b,v){return i(a(b[0],v[1]),a(b[1],v[0]))}},5692:function(p){p.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},9156:function(p,s,n){var a=n(5692),r=n(3578);function i(c){return[c[0]/255,c[1]/255,c[2]/255,c[3]]}function l(c){for(var g,f="#",b=0;b<3;++b)f+=("00"+(g=(g=c[b]).toString(16))).substr(g.length);return f}function u(c){return"rgba("+c.join(",")+")"}p.exports=function(c){var g,f,b,v,d,m,x,y,T,h;if(c||(c={}),y=(c.nshades||72)-1,x=c.format||"hex",(m=c.colormap)||(m="jet"),typeof m=="string"){if(m=m.toLowerCase(),!a[m])throw Error(m+" not a supported colorscale");d=a[m]}else{if(!Array.isArray(m))throw Error("unsupported colormap option",m);d=m.slice()}if(d.length>y+1)throw new Error(m+" map requires nshades to be at least size "+d.length);T=Array.isArray(c.alpha)?c.alpha.length!==2?[1,1]:c.alpha.slice():typeof c.alpha=="number"?[c.alpha,c.alpha]:[1,1],g=d.map(function(I){return Math.round(I.index*y)}),T[0]=Math.min(Math.max(T[0],0),1),T[1]=Math.min(Math.max(T[1],0),1);var E=d.map(function(I,z){var F=d[z].index,U=d[z].rgb.slice();return U.length===4&&U[3]>=0&&U[3]<=1||(U[3]=T[0]+(T[1]-T[0])*F),U}),k=[];for(h=0;h<g.length-1;++h){v=g[h+1]-g[h],f=E[h],b=E[h+1];for(var L=0;L<v;L++){var P=L/v;k.push([Math.round(r(f[0],b[0],P)),Math.round(r(f[1],b[1],P)),Math.round(r(f[2],b[2],P)),r(f[3],b[3],P)])}}return k.push(d[d.length-1].rgb.concat(T[1])),x==="hex"?k=k.map(l):x==="rgbaString"?k=k.map(u):x==="float"&&(k=k.map(i)),k}},9398:function(p,s,n){p.exports=function(g,f,b,v){var d=a(f,b,v);if(d===0){var m=r(a(g,f,b)),x=r(a(g,f,v));if(m===x){if(m===0){var y=c(g,f,b);return y===c(g,f,v)?0:y?1:-1}return 0}return x===0?m>0||c(g,f,v)?-1:1:m===0?x>0||c(g,f,b)?1:-1:r(x-m)}var T=a(g,f,b);return T>0?d>0&&a(g,f,v)>0?1:-1:T<0?d>0||a(g,f,v)>0?1:-1:a(g,f,v)>0||c(g,f,b)?1:-1};var a=n(417),r=n(7538),i=n(87),l=n(2019),u=n(9662);function c(g,f,b){var v=i(g[0],-f[0]),d=i(g[1],-f[1]),m=i(b[0],-f[0]),x=i(b[1],-f[1]),y=u(l(v,m),l(d,x));return y[y.length-1]>=0}},7538:function(p){p.exports=function(s){return s<0?-1:s>0?1:0}},9209:function(p){p.exports=function(a,r){var i=a.length,l=a.length-r.length;if(l)return l;switch(i){case 0:return 0;case 1:return a[0]-r[0];case 2:return a[0]+a[1]-r[0]-r[1]||s(a[0],a[1])-s(r[0],r[1]);case 3:var u=a[0]+a[1],c=r[0]+r[1];if(l=u+a[2]-(c+r[2]))return l;var g=s(a[0],a[1]),f=s(r[0],r[1]);return s(g,a[2])-s(f,r[2])||s(g+a[2],u)-s(f+r[2],c);case 4:var b=a[0],v=a[1],d=a[2],m=a[3],x=r[0],y=r[1],T=r[2],h=r[3];return b+v+d+m-(x+y+T+h)||s(b,v,d,m)-s(x,y,T,h,x)||s(b+v,b+d,b+m,v+d,v+m,d+m)-s(x+y,x+T,x+h,y+T,y+h,T+h)||s(b+v+d,b+v+m,b+d+m,v+d+m)-s(x+y+T,x+y+h,x+T+h,y+T+h);default:for(var E=a.slice().sort(n),k=r.slice().sort(n),L=0;L<i;++L)if(l=E[L]-k[L])return l;return 0}};var s=Math.min;function n(a,r){return a-r}},1284:function(p,s,n){var a=n(9209),r=n(9887);p.exports=function(i,l){return a(i,l)||r(i)-r(l)}},5537:function(p,s,n){var a=n(8950),r=n(8722),i=n(3332);p.exports=function(l){var u=l.length;if(u===0)return[];if(u===1)return[[0]];var c=l[0].length;return c===0?[]:c===1?a(l):c===2?r(l):i(l,c)}},8950:function(p){p.exports=function(s){for(var n=0,a=0,r=1;r<s.length;++r)s[r][0]<s[n][0]&&(n=r),s[r][0]>s[a][0]&&(a=r);return n<a?[[n],[a]]:n>a?[[a],[n]]:[[n]]}},8722:function(p,s,n){p.exports=function(r){var i=a(r),l=i.length;if(l<=2)return[];for(var u=new Array(l),c=i[l-1],g=0;g<l;++g){var f=i[g];u[g]=[c,f],c=f}return u};var a=n(3266)},3332:function(p,s,n){p.exports=function(i,l){try{return a(i,!0)}catch{var u=r(i);if(u.length<=l)return[];var c=function(f,b){for(var v=f.length,d=new Array(v),m=0;m<b.length;++m)d[m]=f[b[m]];var x=b.length;for(m=0;m<v;++m)b.indexOf(m)<0&&(d[x++]=f[m]);return d}(i,u);return function(f,b){for(var v=f.length,d=b.length,m=0;m<v;++m)for(var x=f[m],y=0;y<x.length;++y){var T=x[y];if(T<d)x[y]=b[T];else{T-=d;for(var h=0;h<d;++h)T>=b[h]&&(T+=1);x[y]=T}}return f}(a(c,!0),u)}};var a=n(2183),r=n(2153)},9680:function(p){p.exports=function(s,n,a,r,i,l){var u=i-1,c=i*i,g=u*u,f=(1+2*i)*g,b=i*g,v=c*(3-2*i),d=c*u;if(s.length){l||(l=new Array(s.length));for(var m=s.length-1;m>=0;--m)l[m]=f*s[m]+b*n[m]+v*a[m]+d*r[m];return l}return f*s+b*n+v*a+d*r},p.exports.derivative=function(s,n,a,r,i,l){var u=6*i*i-6*i,c=3*i*i-4*i+1,g=-6*i*i+6*i,f=3*i*i-2*i;if(s.length){l||(l=new Array(s.length));for(var b=s.length-1;b>=0;--b)l[b]=u*s[b]+c*n[b]+g*a[b]+f*r[b];return l}return u*s+c*n+g*a[b]+f*r}},4419:function(p,s,n){var a=n(2183),r=n(1215);function i(u,c){this.point=u,this.index=c}function l(u,c){for(var g=u.point,f=c.point,b=g.length,v=0;v<b;++v){var d=f[v]-g[v];if(d)return d}return 0}p.exports=function(u,c){var g=u.length;if(g===0)return[];var f=u[0].length;if(f<1)return[];if(f===1)return function(F,U,R){if(F===1)return R?[[-1,0]]:[];var j=U.map(function(ne,ee){return[ne[0],ee]});j.sort(function(ne,ee){return ne[0]-ee[0]});for(var Z=new Array(F-1),B=1;B<F;++B){var q=j[B-1],V=j[B];Z[B-1]=[q[1],V[1]]}return R&&Z.push([-1,Z[0][1]],[Z[F-1][1],-1]),Z}(g,u,c);for(var b=new Array(g),v=1,d=0;d<g;++d){for(var m=u[d],x=new Array(f+1),y=0,T=0;T<f;++T){var h=m[T];x[T]=h,y+=h*h}x[f]=y,b[d]=new i(x,d),v=Math.max(y,v)}r(b,l),g=b.length;var E=new Array(g+f+1),k=new Array(g+f+1),L=(f+1)*(f+1)*v,P=new Array(f+1);for(d=0;d<=f;++d)P[d]=0;for(P[f]=L,E[0]=P.slice(),k[0]=-1,d=0;d<=f;++d)(x=P.slice())[d]=1,E[d+1]=x,k[d+1]=-1;for(d=0;d<g;++d){var I=b[d];E[d+f+1]=I.point,k[d+f+1]=I.index}var z=a(E,!1);if(z=c?z.filter(function(F){for(var U=0,R=0;R<=f;++R){var j=k[F[R]];if(j<0&&++U>=2)return!1;F[R]=j}return!0}):z.filter(function(F){for(var U=0;U<=f;++U){var R=k[F[U]];if(R<0)return!1;F[U]=R}return!0}),1&f)for(d=0;d<z.length;++d)x=(I=z[d])[0],I[0]=I[1],I[1]=x;return z}},8362:function(p){var s=!1;if(typeof Float64Array<"u"){var n=new Float64Array(1),a=new Uint32Array(n.buffer);n[0]=1,s=!0,a[1]===1072693248?(p.exports=function(i){return n[0]=i,[a[0],a[1]]},p.exports.pack=function(i,l){return a[0]=i,a[1]=l,n[0]},p.exports.lo=function(i){return n[0]=i,a[0]},p.exports.hi=function(i){return n[0]=i,a[1]}):a[0]===1072693248?(p.exports=function(i){return n[0]=i,[a[1],a[0]]},p.exports.pack=function(i,l){return a[1]=i,a[0]=l,n[0]},p.exports.lo=function(i){return n[0]=i,a[1]},p.exports.hi=function(i){return n[0]=i,a[0]}):s=!1}if(!s){var r=new Buffer(8);p.exports=function(i){return r.writeDoubleLE(i,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},p.exports.pack=function(i,l){return r.writeUInt32LE(i,0,!0),r.writeUInt32LE(l,4,!0),r.readDoubleLE(0,!0)},p.exports.lo=function(i){return r.writeDoubleLE(i,0,!0),r.readUInt32LE(0,!0)},p.exports.hi=function(i){return r.writeDoubleLE(i,0,!0),r.readUInt32LE(4,!0)}}p.exports.sign=function(i){return p.exports.hi(i)>>>31},p.exports.exponent=function(i){return(p.exports.hi(i)<<1>>>21)-1023},p.exports.fraction=function(i){var l=p.exports.lo(i),u=p.exports.hi(i),c=1048575&u;return 2146435072&u&&(c+=1048576),[l,c]},p.exports.denormalized=function(i){return!(2146435072&p.exports.hi(i))}},3094:function(p){function s(n,a,r){var i=0|n[r];if(i<=0)return[];var l,u=new Array(i);if(r===n.length-1)for(l=0;l<i;++l)u[l]=a;else for(l=0;l<i;++l)u[l]=s(n,a,r+1);return u}p.exports=function(n,a){switch(a===void 0&&(a=0),typeof n){case"number":if(n>0)return function(r,i){var l,u;for(l=new Array(r),u=0;u<r;++u)l[u]=i;return l}(0|n,a);break;case"object":if(typeof n.length=="number")return s(n,a,0)}return[]}},8348:function(p,s,n){p.exports=function(r,i){var l=r.length;if(typeof i!="number"){i=0;for(var u=0;u<l;++u){var c=r[u];i=Math.max(i,c[0],c[1])}i=1+(0|i)}i|=0;var g=new Array(i);for(u=0;u<i;++u)g[u]=[];for(u=0;u<l;++u)g[(c=r[u])[0]].push(c[1]),g[c[1]].push(c[0]);for(var f=0;f<i;++f)a(g[f],function(b,v){return b-v});return g};var a=n(1215)},5795:function(p){p.exports=function(s,n,a){var r=n||0,i=a||1;return[[s[12]+s[0],s[13]+s[1],s[14]+s[2],s[15]+s[3]],[s[12]-s[0],s[13]-s[1],s[14]-s[2],s[15]-s[3]],[s[12]+s[4],s[13]+s[5],s[14]+s[6],s[15]+s[7]],[s[12]-s[4],s[13]-s[5],s[14]-s[6],s[15]-s[7]],[r*s[12]+s[8],r*s[13]+s[9],r*s[14]+s[10],r*s[15]+s[11]],[i*s[12]-s[8],i*s[13]-s[9],i*s[14]-s[10],i*s[15]-s[11]]]}},8444:function(p,s,n){p.exports=function(g,f,b){switch(arguments.length){case 0:return new l([0],[0],0);case 1:return typeof g=="number"?new l(v=c(g),v,0):new l(g,c(g.length),0);case 2:var v;if(typeof f=="number")return new l(g,v=c(g.length),+f);b=0;case 3:if(g.length!==f.length)throw new Error("state and velocity lengths must match");return new l(g,f,b)}};var a=n(9680),r=n(5070);function i(g,f,b){return Math.min(f,Math.max(g,b))}function l(g,f,b){this.dimension=g.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var v=0;v<this.dimension;++v)this.bounds[0][v]=-1/0,this.bounds[1][v]=1/0;this._state=g.slice().reverse(),this._velocity=f.slice().reverse(),this._time=[b],this._scratch=[g.slice(),g.slice(),g.slice(),g.slice(),g.slice()]}var u=l.prototype;function c(g){for(var f=new Array(g),b=0;b<g;++b)f[b]=0;return f}u.flush=function(g){var f=r.gt(this._time,g)-1;f<=0||(this._time.splice(0,f),this._state.splice(0,f*this.dimension),this._velocity.splice(0,f*this.dimension))},u.curve=function(g){var f=this._time,b=f.length,v=r.le(f,g),d=this._scratch[0],m=this._state,x=this._velocity,y=this.dimension,T=this.bounds;if(v<0)for(var h=y-1,E=0;E<y;++E,--h)d[E]=m[h];else if(v>=b-1){h=m.length-1;var k=g-f[b-1];for(E=0;E<y;++E,--h)d[E]=m[h]+k*x[h]}else{h=y*(v+1)-1;var L=f[v],P=f[v+1]-L||1,I=this._scratch[1],z=this._scratch[2],F=this._scratch[3],U=this._scratch[4],R=!0;for(E=0;E<y;++E,--h)I[E]=m[h],F[E]=x[h]*P,z[E]=m[h+y],U[E]=x[h+y]*P,R=R&&I[E]===z[E]&&F[E]===U[E]&&F[E]===0;if(R)for(E=0;E<y;++E)d[E]=I[E];else a(I,F,z,U,(g-L)/P,d)}var j=T[0],Z=T[1];for(E=0;E<y;++E)d[E]=i(j[E],Z[E],d[E]);return d},u.dcurve=function(g){var f=this._time,b=f.length,v=r.le(f,g),d=this._scratch[0],m=this._state,x=this._velocity,y=this.dimension;if(v>=b-1)for(var T=m.length-1,h=(f[b-1],0);h<y;++h,--T)d[h]=x[T];else{T=y*(v+1)-1;var E=f[v],k=f[v+1]-E||1,L=this._scratch[1],P=this._scratch[2],I=this._scratch[3],z=this._scratch[4],F=!0;for(h=0;h<y;++h,--T)L[h]=m[T],I[h]=x[T]*k,P[h]=m[T+y],z[h]=x[T+y]*k,F=F&&L[h]===P[h]&&I[h]===z[h]&&I[h]===0;if(F)for(h=0;h<y;++h)d[h]=0;else for(a.derivative(L,I,P,z,(g-E)/k,d),h=0;h<y;++h)d[h]/=k}return d},u.lastT=function(){var g=this._time;return g[g.length-1]},u.stable=function(){for(var g=this._velocity,f=g.length,b=this.dimension-1;b>=0;--b)if(g[--f])return!1;return!0},u.jump=function(g){var f=this.lastT(),b=this.dimension;if(!(g<f||arguments.length!==b+1)){var v=this._state,d=this._velocity,m=v.length-this.dimension,x=this.bounds,y=x[0],T=x[1];this._time.push(f,g);for(var h=0;h<2;++h)for(var E=0;E<b;++E)v.push(v[m++]),d.push(0);for(this._time.push(g),E=b;E>0;--E)v.push(i(y[E-1],T[E-1],arguments[E])),d.push(0)}},u.push=function(g){var f=this.lastT(),b=this.dimension;if(!(g<f||arguments.length!==b+1)){var v=this._state,d=this._velocity,m=v.length-this.dimension,x=g-f,y=this.bounds,T=y[0],h=y[1],E=x>1e-6?1/x:0;this._time.push(g);for(var k=b;k>0;--k){var L=i(T[k-1],h[k-1],arguments[k]);v.push(L),d.push((L-v[m++])*E)}}},u.set=function(g){var f=this.dimension;if(!(g<this.lastT()||arguments.length!==f+1)){var b=this._state,v=this._velocity,d=this.bounds,m=d[0],x=d[1];this._time.push(g);for(var y=f;y>0;--y)b.push(i(m[y-1],x[y-1],arguments[y])),v.push(0)}},u.move=function(g){var f=this.lastT(),b=this.dimension;if(!(g<=f||arguments.length!==b+1)){var v=this._state,d=this._velocity,m=v.length-this.dimension,x=this.bounds,y=x[0],T=x[1],h=g-f,E=h>1e-6?1/h:0;this._time.push(g);for(var k=b;k>0;--k){var L=arguments[k];v.push(i(y[k-1],T[k-1],v[m++]+L)),d.push(L*E)}}},u.idle=function(g){var f=this.lastT();if(!(g<f)){var b=this.dimension,v=this._state,d=this._velocity,m=v.length-b,x=this.bounds,y=x[0],T=x[1],h=g-f;this._time.push(g);for(var E=b-1;E>=0;--E)v.push(i(y[E],T[E],v[m]+h*d[m])),d.push(0),m+=1}}},7080:function(p){function s(m,x,y,T,h,E){this._color=m,this.key=x,this.value=y,this.left=T,this.right=h,this._count=E}function n(m){return new s(m._color,m.key,m.value,m.left,m.right,m._count)}function a(m,x){return new s(m,x.key,x.value,x.left,x.right,x._count)}function r(m){m._count=1+(m.left?m.left._count:0)+(m.right?m.right._count:0)}function i(m,x){this._compare=m,this.root=x}p.exports=function(m){return new i(m||d,null)};var l=i.prototype;function u(m,x){var y;return x.left&&(y=u(m,x.left))?y:(y=m(x.key,x.value))||(x.right?u(m,x.right):void 0)}function c(m,x,y,T){if(x(m,T.key)<=0){var h;if(T.left&&(h=c(m,x,y,T.left))||(h=y(T.key,T.value)))return h}if(T.right)return c(m,x,y,T.right)}function g(m,x,y,T,h){var E,k=y(m,h.key),L=y(x,h.key);if(k<=0&&(h.left&&(E=g(m,x,y,T,h.left))||L>0&&(E=T(h.key,h.value))))return E;if(L>0&&h.right)return g(m,x,y,T,h.right)}function f(m,x){this.tree=m,this._stack=x}Object.defineProperty(l,"keys",{get:function(){var m=[];return this.forEach(function(x,y){m.push(x)}),m}}),Object.defineProperty(l,"values",{get:function(){var m=[];return this.forEach(function(x,y){m.push(y)}),m}}),Object.defineProperty(l,"length",{get:function(){return this.root?this.root._count:0}}),l.insert=function(m,x){for(var y=this._compare,T=this.root,h=[],E=[];T;){var k=y(m,T.key);h.push(T),E.push(k),T=k<=0?T.left:T.right}h.push(new s(0,m,x,null,null,1));for(var L=h.length-2;L>=0;--L)T=h[L],E[L]<=0?h[L]=new s(T._color,T.key,T.value,h[L+1],T.right,T._count+1):h[L]=new s(T._color,T.key,T.value,T.left,h[L+1],T._count+1);for(L=h.length-1;L>1;--L){var P=h[L-1];if(T=h[L],P._color===1||T._color===1)break;var I=h[L-2];if(I.left===P)if(P.left===T){if(!(z=I.right)||z._color!==0){I._color=0,I.left=P.right,P._color=1,P.right=I,h[L-2]=P,h[L-1]=T,r(I),r(P),L>=3&&((F=h[L-3]).left===I?F.left=P:F.right=P);break}P._color=1,I.right=a(1,z),I._color=0,L-=1}else{if(!(z=I.right)||z._color!==0){P.right=T.left,I._color=0,I.left=T.right,T._color=1,T.left=P,T.right=I,h[L-2]=T,h[L-1]=P,r(I),r(P),r(T),L>=3&&((F=h[L-3]).left===I?F.left=T:F.right=T);break}P._color=1,I.right=a(1,z),I._color=0,L-=1}else if(P.right===T){if(!(z=I.left)||z._color!==0){I._color=0,I.right=P.left,P._color=1,P.left=I,h[L-2]=P,h[L-1]=T,r(I),r(P),L>=3&&((F=h[L-3]).right===I?F.right=P:F.left=P);break}P._color=1,I.left=a(1,z),I._color=0,L-=1}else{var z;if(!(z=I.left)||z._color!==0){var F;P.left=T.right,I._color=0,I.right=T.left,T._color=1,T.right=P,T.left=I,h[L-2]=T,h[L-1]=P,r(I),r(P),r(T),L>=3&&((F=h[L-3]).right===I?F.right=T:F.left=T);break}P._color=1,I.left=a(1,z),I._color=0,L-=1}}return h[0]._color=1,new i(y,h[0])},l.forEach=function(m,x,y){if(this.root)switch(arguments.length){case 1:return u(m,this.root);case 2:return c(x,this._compare,m,this.root);case 3:return this._compare(x,y)>=0?void 0:g(x,y,this._compare,m,this.root)}},Object.defineProperty(l,"begin",{get:function(){for(var m=[],x=this.root;x;)m.push(x),x=x.left;return new f(this,m)}}),Object.defineProperty(l,"end",{get:function(){for(var m=[],x=this.root;x;)m.push(x),x=x.right;return new f(this,m)}}),l.at=function(m){if(m<0)return new f(this,[]);for(var x=this.root,y=[];;){if(y.push(x),x.left){if(m<x.left._count){x=x.left;continue}m-=x.left._count}if(!m)return new f(this,y);if(m-=1,!x.right||m>=x.right._count)break;x=x.right}return new f(this,[])},l.ge=function(m){for(var x=this._compare,y=this.root,T=[],h=0;y;){var E=x(m,y.key);T.push(y),E<=0&&(h=T.length),y=E<=0?y.left:y.right}return T.length=h,new f(this,T)},l.gt=function(m){for(var x=this._compare,y=this.root,T=[],h=0;y;){var E=x(m,y.key);T.push(y),E<0&&(h=T.length),y=E<0?y.left:y.right}return T.length=h,new f(this,T)},l.lt=function(m){for(var x=this._compare,y=this.root,T=[],h=0;y;){var E=x(m,y.key);T.push(y),E>0&&(h=T.length),y=E<=0?y.left:y.right}return T.length=h,new f(this,T)},l.le=function(m){for(var x=this._compare,y=this.root,T=[],h=0;y;){var E=x(m,y.key);T.push(y),E>=0&&(h=T.length),y=E<0?y.left:y.right}return T.length=h,new f(this,T)},l.find=function(m){for(var x=this._compare,y=this.root,T=[];y;){var h=x(m,y.key);if(T.push(y),h===0)return new f(this,T);y=h<=0?y.left:y.right}return new f(this,[])},l.remove=function(m){var x=this.find(m);return x?x.remove():this},l.get=function(m){for(var x=this._compare,y=this.root;y;){var T=x(m,y.key);if(T===0)return y.value;y=T<=0?y.left:y.right}};var b=f.prototype;function v(m,x){m.key=x.key,m.value=x.value,m.left=x.left,m.right=x.right,m._color=x._color,m._count=x._count}function d(m,x){return m<x?-1:m>x?1:0}Object.defineProperty(b,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(b,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),b.clone=function(){return new f(this.tree,this._stack.slice())},b.remove=function(){var m=this._stack;if(m.length===0)return this.tree;var x=new Array(m.length),y=m[m.length-1];x[x.length-1]=new s(y._color,y.key,y.value,y.left,y.right,y._count);for(var T=m.length-2;T>=0;--T)(y=m[T]).left===m[T+1]?x[T]=new s(y._color,y.key,y.value,x[T+1],y.right,y._count):x[T]=new s(y._color,y.key,y.value,y.left,x[T+1],y._count);if((y=x[x.length-1]).left&&y.right){var h=x.length;for(y=y.left;y.right;)x.push(y),y=y.right;var E=x[h-1];for(x.push(new s(y._color,E.key,E.value,y.left,y.right,y._count)),x[h-1].key=y.key,x[h-1].value=y.value,T=x.length-2;T>=h;--T)y=x[T],x[T]=new s(y._color,y.key,y.value,y.left,x[T+1],y._count);x[h-1].left=x[h]}if((y=x[x.length-1])._color===0){var k=x[x.length-2];for(k.left===y?k.left=null:k.right===y&&(k.right=null),x.pop(),T=0;T<x.length;++T)x[T]._count--;return new i(this.tree._compare,x[0])}if(y.left||y.right){for(y.left?v(y,y.left):y.right&&v(y,y.right),y._color=1,T=0;T<x.length-1;++T)x[T]._count--;return new i(this.tree._compare,x[0])}if(x.length===1)return new i(this.tree._compare,null);for(T=0;T<x.length;++T)x[T]._count--;var L=x[x.length-2];return function(P){for(var I,z,F,U,R=P.length-1;R>=0;--R){if(I=P[R],R===0)return void(I._color=1);if((z=P[R-1]).left===I){if((F=z.right).right&&F.right._color===0)return U=(F=z.right=n(F)).right=n(F.right),z.right=F.left,F.left=z,F.right=U,F._color=z._color,I._color=1,z._color=1,U._color=1,r(z),r(F),R>1&&((j=P[R-2]).left===z?j.left=F:j.right=F),void(P[R-1]=F);if(F.left&&F.left._color===0)return U=(F=z.right=n(F)).left=n(F.left),z.right=U.left,F.left=U.right,U.left=z,U.right=F,U._color=z._color,z._color=1,F._color=1,I._color=1,r(z),r(F),r(U),R>1&&((j=P[R-2]).left===z?j.left=U:j.right=U),void(P[R-1]=U);if(F._color===1){if(z._color===0)return z._color=1,void(z.right=a(0,F));z.right=a(0,F);continue}F=n(F),z.right=F.left,F.left=z,F._color=z._color,z._color=0,r(z),r(F),R>1&&((j=P[R-2]).left===z?j.left=F:j.right=F),P[R-1]=F,P[R]=z,R+1<P.length?P[R+1]=I:P.push(I),R+=2}else{if((F=z.left).left&&F.left._color===0)return U=(F=z.left=n(F)).left=n(F.left),z.left=F.right,F.right=z,F.left=U,F._color=z._color,I._color=1,z._color=1,U._color=1,r(z),r(F),R>1&&((j=P[R-2]).right===z?j.right=F:j.left=F),void(P[R-1]=F);if(F.right&&F.right._color===0)return U=(F=z.left=n(F)).right=n(F.right),z.left=U.right,F.right=U.left,U.right=z,U.left=F,U._color=z._color,z._color=1,F._color=1,I._color=1,r(z),r(F),r(U),R>1&&((j=P[R-2]).right===z?j.right=U:j.left=U),void(P[R-1]=U);if(F._color===1){if(z._color===0)return z._color=1,void(z.left=a(0,F));z.left=a(0,F);continue}var j;F=n(F),z.left=F.right,F.right=z,F._color=z._color,z._color=0,r(z),r(F),R>1&&((j=P[R-2]).right===z?j.right=F:j.left=F),P[R-1]=F,P[R]=z,R+1<P.length?P[R+1]=I:P.push(I),R+=2}}}(x),L.left===y?L.left=null:L.right=null,new i(this.tree._compare,x[0])},Object.defineProperty(b,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(b,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(b,"index",{get:function(){var m=0,x=this._stack;if(x.length===0){var y=this.tree.root;return y?y._count:0}x[x.length-1].left&&(m=x[x.length-1].left._count);for(var T=x.length-2;T>=0;--T)x[T+1]===x[T].right&&(++m,x[T].left&&(m+=x[T].left._count));return m},enumerable:!0}),b.next=function(){var m=this._stack;if(m.length!==0){var x=m[m.length-1];if(x.right)for(x=x.right;x;)m.push(x),x=x.left;else for(m.pop();m.length>0&&m[m.length-1].right===x;)x=m[m.length-1],m.pop()}},Object.defineProperty(b,"hasNext",{get:function(){var m=this._stack;if(m.length===0)return!1;if(m[m.length-1].right)return!0;for(var x=m.length-1;x>0;--x)if(m[x-1].left===m[x])return!0;return!1}}),b.update=function(m){var x=this._stack;if(x.length===0)throw new Error("Can't update empty node!");var y=new Array(x.length),T=x[x.length-1];y[y.length-1]=new s(T._color,T.key,m,T.left,T.right,T._count);for(var h=x.length-2;h>=0;--h)(T=x[h]).left===x[h+1]?y[h]=new s(T._color,T.key,T.value,y[h+1],T.right,T._count):y[h]=new s(T._color,T.key,T.value,T.left,y[h+1],T._count);return new i(this.tree._compare,y[0])},b.prev=function(){var m=this._stack;if(m.length!==0){var x=m[m.length-1];if(x.left)for(x=x.left;x;)m.push(x),x=x.right;else for(m.pop();m.length>0&&m[m.length-1].left===x;)x=m[m.length-1],m.pop()}},Object.defineProperty(b,"hasPrev",{get:function(){var m=this._stack;if(m.length===0)return!1;if(m[m.length-1].left)return!0;for(var x=m.length-1;x>0;--x)if(m[x-1].right===m[x])return!0;return!1}})},7453:function(p,s,n){p.exports=function(k,L){var P=new f(k);return P.update(L),P};var a=n(9557),r=n(1681),i=n(1011),l=n(2864),u=n(8468),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function g(k,L){return k[0]=L[0],k[1]=L[1],k[2]=L[2],k}function f(k){this.gl=k,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=i(k)}var b=f.prototype;function v(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}b.update=function(k){function L(ne,ee,$){if($ in k){var J,K=k[$],te=this[$];(ne?Array.isArray(K)&&Array.isArray(K[0]):Array.isArray(K))?this[$]=J=[ee(K[0]),ee(K[1]),ee(K[2])]:this[$]=J=[ee(K),ee(K),ee(K)];for(var ie=0;ie<3;++ie)if(J[ie]!==te[ie])return!0}return!1}k=k||{};var P,I=L.bind(this,!1,Number),z=L.bind(this,!1,Boolean),F=L.bind(this,!1,String),U=L.bind(this,!0,function(ne){if(Array.isArray(ne)){if(ne.length===3)return[+ne[0],+ne[1],+ne[2],1];if(ne.length===4)return[+ne[0],+ne[1],+ne[2],+ne[3]]}return[0,0,0,1]}),R=!1,j=!1;if("bounds"in k)for(var Z=k.bounds,B=0;B<2;++B)for(var q=0;q<3;++q)Z[B][q]!==this.bounds[B][q]&&(j=!0),this.bounds[B][q]=Z[B][q];if("ticks"in k)for(P=k.ticks,R=!0,this.autoTicks=!1,B=0;B<3;++B)this.tickSpacing[B]=0;else I("tickSpacing")&&(this.autoTicks=!0,j=!0);if(this._firstInit&&("ticks"in k||"tickSpacing"in k||(this.autoTicks=!0),j=!0,R=!0,this._firstInit=!1),j&&this.autoTicks&&(P=u.create(this.bounds,this.tickSpacing),R=!0),R){for(B=0;B<3;++B)P[B].sort(function(ne,ee){return ne.x-ee.x});u.equal(P,this.ticks)?R=!1:this.ticks=P}z("tickEnable"),F("tickFont")&&(R=!0),I("tickSize"),I("tickAngle"),I("tickPad"),U("tickColor");var V=F("labels");F("labelFont")&&(V=!0),z("labelEnable"),I("labelSize"),I("labelPad"),U("labelColor"),z("lineEnable"),z("lineMirror"),I("lineWidth"),U("lineColor"),z("lineTickEnable"),z("lineTickMirror"),I("lineTickLength"),I("lineTickWidth"),U("lineTickColor"),z("gridEnable"),I("gridWidth"),U("gridColor"),z("zeroEnable"),U("zeroLineColor"),I("zeroLineWidth"),z("backgroundEnable"),U("backgroundColor"),this._text?this._text&&(V||R)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=a(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&R&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=r(this.gl,this.bounds,this.ticks))};var d=[new v,new v,new v];function m(k,L,P,I,z){for(var F=k.primalOffset,U=k.primalMinor,R=k.mirrorOffset,j=k.mirrorMinor,Z=I[L],B=0;B<3;++B)if(L!==B){var q=F,V=R,ne=U,ee=j;Z&1<<B&&(q=R,V=F,ne=j,ee=U),q[B]=P[0][B],V[B]=P[1][B],z[B]>0?(ne[B]=-1,ee[B]=0):(ne[B]=0,ee[B]=1)}}var x=[0,0,0],y={model:c,view:c,projection:c,_ortho:!1};b.isOpaque=function(){return!0},b.isTransparent=function(){return!1},b.drawTransparent=function(k){};var T=[0,0,0],h=[0,0,0],E=[0,0,0];b.draw=function(k){k=k||y;for(var L=this.gl,P=k.model||c,I=k.view||c,z=k.projection||c,F=this.bounds,U=k._ortho||!1,R=l(P,I,z,F,U),j=R.cubeEdges,Z=R.axis,B=I[12],q=I[13],V=I[14],ne=I[15],ee=(U?2:1)*this.pixelRatio*(z[3]*B+z[7]*q+z[11]*V+z[15]*ne)/L.drawingBufferHeight,$=0;$<3;++$)this.lastCubeProps.cubeEdges[$]=j[$],this.lastCubeProps.axis[$]=Z[$];var J=d;for($=0;$<3;++$)m(d[$],$,this.bounds,j,Z);L=this.gl;var K,te,ie,ae=x;for($=0;$<3;++$)this.backgroundEnable[$]?ae[$]=Z[$]:ae[$]=0;for(this._background.draw(P,I,z,F,ae,this.backgroundColor),this._lines.bind(P,I,z,this),$=0;$<3;++$){var se=[0,0,0];Z[$]>0?se[$]=F[1][$]:se[$]=F[0][$];for(var ce=0;ce<2;++ce){var de=($+1+ce)%3,ge=($+1+(1^ce))%3;this.gridEnable[de]&&this._lines.drawGrid(de,ge,this.bounds,se,this.gridColor[de],this.gridWidth[de]*this.pixelRatio)}for(ce=0;ce<2;++ce)de=($+1+ce)%3,ge=($+1+(1^ce))%3,this.zeroEnable[ge]&&Math.min(F[0][ge],F[1][ge])<=0&&Math.max(F[0][ge],F[1][ge])>=0&&this._lines.drawZero(de,ge,this.bounds,se,this.zeroLineColor[ge],this.zeroLineWidth[ge]*this.pixelRatio)}for($=0;$<3;++$){this.lineEnable[$]&&this._lines.drawAxisLine($,this.bounds,J[$].primalOffset,this.lineColor[$],this.lineWidth[$]*this.pixelRatio),this.lineMirror[$]&&this._lines.drawAxisLine($,this.bounds,J[$].mirrorOffset,this.lineColor[$],this.lineWidth[$]*this.pixelRatio);var ve=g(T,J[$].primalMinor),be=g(h,J[$].mirrorMinor),me=this.lineTickLength;for(ce=0;ce<3;++ce){var Se=ee/P[5*ce];ve[ce]*=me[ce]*Se,be[ce]*=me[ce]*Se}this.lineTickEnable[$]&&this._lines.drawAxisTicks($,J[$].primalOffset,ve,this.lineTickColor[$],this.lineTickWidth[$]*this.pixelRatio),this.lineTickMirror[$]&&this._lines.drawAxisTicks($,J[$].mirrorOffset,be,this.lineTickColor[$],this.lineTickWidth[$]*this.pixelRatio)}function we(Te){(ie=[0,0,0])[Te]=1}function _e(Te,Me,Le){var Ie=(Te+1)%3,he=(Te+2)%3,xe=Me[Ie],ke=Me[he],ze=Le[Ie],Re=Le[he];xe>0&&Re>0||xe>0&&Re<0||xe<0&&Re>0||xe<0&&Re<0?we(Ie):(ke>0&&ze>0||ke>0&&ze<0||ke<0&&ze>0||ke<0&&ze<0)&&we(he)}for(this._lines.unbind(),this._text.bind(P,I,z,this.pixelRatio),$=0;$<3;++$){var oe=J[$].primalMinor,le=J[$].mirrorMinor,pe=g(E,J[$].primalOffset);for(ce=0;ce<3;++ce)this.lineTickEnable[$]&&(pe[ce]+=ee*oe[ce]*Math.max(this.lineTickLength[ce],0)/P[5*ce]);var Ee=[0,0,0];if(Ee[$]=1,this.tickEnable[$]){for(this.tickAngle[$]===-3600?(this.tickAngle[$]=0,this.tickAlign[$]="auto"):this.tickAlign[$]=-1,te=1,(K=[this.tickAlign[$],.5,te])[0]==="auto"?K[0]=0:K[0]=parseInt(""+K[0]),ie=[0,0,0],_e($,oe,le),ce=0;ce<3;++ce)pe[ce]+=ee*oe[ce]*this.tickPad[ce]/P[5*ce];this._text.drawTicks($,this.tickSize[$],this.tickAngle[$],pe,this.tickColor[$],Ee,ie,K)}if(this.labelEnable[$]){for(te=0,ie=[0,0,0],this.labels[$].length>4&&(we($),te=1),(K=[this.labelAlign[$],.5,te])[0]==="auto"?K[0]=0:K[0]=parseInt(""+K[0]),ce=0;ce<3;++ce)pe[ce]+=ee*oe[ce]*this.labelPad[ce]/P[5*ce];pe[$]+=.5*(F[0][$]+F[1][$]),this._text.drawLabel($,this.labelSize[$],this.labelAngle[$],pe,this.labelColor[$],[0,0,0],ie,K)}}this._text.unbind()},b.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},1011:function(p,s,n){p.exports=function(c){for(var g=[],f=[],b=0,v=0;v<3;++v)for(var d=(v+1)%3,m=(v+2)%3,x=[0,0,0],y=[0,0,0],T=-1;T<=1;T+=2){f.push(b,b+2,b+1,b+1,b+2,b+3),x[v]=T,y[v]=T;for(var h=-1;h<=1;h+=2){x[d]=h;for(var E=-1;E<=1;E+=2)x[m]=E,g.push(x[0],x[1],x[2],y[0],y[1],y[2]),b+=1}var k=d;d=m,m=k}var L=a(c,new Float32Array(g)),P=a(c,new Uint16Array(f),c.ELEMENT_ARRAY_BUFFER),I=r(c,[{buffer:L,type:c.FLOAT,size:3,offset:0,stride:24},{buffer:L,type:c.FLOAT,size:3,offset:12,stride:24}],P),z=i(c);return z.attributes.position.location=0,z.attributes.normal.location=1,new l(c,L,I,z)};var a=n(5827),r=n(2944),i=n(1943).bg;function l(c,g,f,b){this.gl=c,this.buffer=g,this.vao=f,this.shader=b}var u=l.prototype;u.draw=function(c,g,f,b,v,d){for(var m=!1,x=0;x<3;++x)m=m||v[x];if(m){var y=this.gl;y.enable(y.POLYGON_OFFSET_FILL),y.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:c,view:g,projection:f,bounds:b,enable:v,colors:d},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),y.disable(y.POLYGON_OFFSET_FILL)}},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},2864:function(p,s,n){p.exports=function(h,E,k,L,P){r(u,E,h),r(u,k,u);for(var I=0,z=0;z<2;++z){f[2]=L[z][2];for(var F=0;F<2;++F){f[1]=L[F][1];for(var U=0;U<2;++U)f[0]=L[U][0],v(c[I],f,u),I+=1}}var R=-1;for(z=0;z<8;++z){for(var j=c[z][3],Z=0;Z<3;++Z)g[z][Z]=c[z][Z]/j;P&&(g[z][2]*=-1),j<0&&(R<0||g[z][2]<g[R][2])&&(R=z)}if(R<0){R=0;for(var B=0;B<3;++B){for(var q=(B+2)%3,V=(B+1)%3,ne=-1,ee=-1,$=0;$<2;++$){var J=(te=$<<B)+($<<q)+(1-$<<V),K=te+(1-$<<q)+($<<V);l(g[te],g[J],g[K],b)<0||($?ne=1:ee=1)}if(ne<0||ee<0)ee>ne&&(R|=1<<B);else{for($=0;$<2;++$){J=(te=$<<B)+($<<q)+(1-$<<V),K=te+(1-$<<q)+($<<V);var te,ie=m([c[te],c[J],c[K],c[te+(1<<q)+(1<<V)]]);$?ne=ie:ee=ie}ee>ne&&(R|=1<<B)}}}var ae=7^R,se=-1;for(z=0;z<8;++z)z!==R&&z!==ae&&(se<0||g[se][1]>g[z][1])&&(se=z);var ce=-1;for(z=0;z<3;++z)(ge=se^1<<z)!==R&&ge!==ae&&(ce<0&&(ce=ge),(V=g[ge])[0]<g[ce][0]&&(ce=ge));var de=-1;for(z=0;z<3;++z){var ge;(ge=se^1<<z)!==R&&ge!==ae&&ge!==ce&&(de<0&&(de=ge),(V=g[ge])[0]>g[de][0]&&(de=ge))}var ve=x;ve[0]=ve[1]=ve[2]=0,ve[a.log2(ce^se)]=se&ce,ve[a.log2(se^de)]=se&de;var be=7^de;be===R||be===ae?(be=7^ce,ve[a.log2(de^be)]=be&de):ve[a.log2(ce^be)]=be&ce;var me=y,Se=R;for(B=0;B<3;++B)me[B]=Se&1<<B?-1:1;return T};var a=n(2288),r=n(104),i=n(4670),l=n(417),u=new Array(16),c=new Array(8),g=new Array(8),f=new Array(3),b=[0,0,0];function v(h,E,k){for(var L=0;L<4;++L){h[L]=k[12+L];for(var P=0;P<3;++P)h[L]+=E[P]*k[4*P+L]}}(function(){for(var h=0;h<8;++h)c[h]=[1,1,1,1],g[h]=[1,1,1]})();var d=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function m(h){for(var E=0;E<d.length;++E)if((h=i.positive(h,d[E])).length<3)return 0;var k=h[0],L=k[0]/k[3],P=k[1]/k[3],I=0;for(E=1;E+1<h.length;++E){var z=h[E],F=h[E+1],U=z[0]/z[3]-L,R=z[1]/z[3]-P,j=F[0]/F[3]-L,Z=F[1]/F[3]-P;I+=Math.abs(U*Z-R*j)}return I}var x=[1,1,1],y=[0,0,0],T={cubeEdges:x,axis:y}},1681:function(p,s,n){p.exports=function(x,y,T){var h=[],E=[0,0,0],k=[0,0,0],L=[0,0,0],P=[0,0,0];h.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var I=0;I<3;++I){for(var z=h.length/3|0,F=0;F<T[I].length;++F){var U=+T[I][F].x;h.push(U,0,1,U,1,1,U,0,-1,U,0,-1,U,1,1,U,1,-1)}var R=h.length/3|0;E[I]=z,k[I]=R-z,z=h.length/3|0;for(var j=0;j<T[I].length;++j)U=+T[I][j].x,h.push(U,0,1,U,1,1,U,0,-1,U,0,-1,U,1,1,U,1,-1);R=h.length/3|0,L[I]=z,P[I]=R-z}var Z=a(x,new Float32Array(h)),B=r(x,[{buffer:Z,type:x.FLOAT,size:3,stride:0,offset:0}]),q=i(x);return q.attributes.position.location=0,new d(x,Z,B,q,k,E,P,L)};var a=n(5827),r=n(2944),i=n(1943).j,l=[0,0,0],u=[0,0,0],c=[0,0,0],g=[0,0,0],f=[1,1];function b(x){return x[0]=x[1]=x[2]=0,x}function v(x,y){return x[0]=y[0],x[1]=y[1],x[2]=y[2],x}function d(x,y,T,h,E,k,L,P){this.gl=x,this.vertBuffer=y,this.vao=T,this.shader=h,this.tickCount=E,this.tickOffset=k,this.gridCount=L,this.gridOffset=P}var m=d.prototype;m.bind=function(x,y,T){this.shader.bind(),this.shader.uniforms.model=x,this.shader.uniforms.view=y,this.shader.uniforms.projection=T,f[0]=this.gl.drawingBufferWidth,f[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=f,this.vao.bind()},m.unbind=function(){this.vao.unbind()},m.drawAxisLine=function(x,y,T,h,E){var k=b(u);this.shader.uniforms.majorAxis=u,k[x]=y[1][x]-y[0][x],this.shader.uniforms.minorAxis=k;var L,P=v(g,T);P[x]+=y[0][x],this.shader.uniforms.offset=P,this.shader.uniforms.lineWidth=E,this.shader.uniforms.color=h,(L=b(c))[(x+2)%3]=1,this.shader.uniforms.screenAxis=L,this.vao.draw(this.gl.TRIANGLES,6),(L=b(c))[(x+1)%3]=1,this.shader.uniforms.screenAxis=L,this.vao.draw(this.gl.TRIANGLES,6)},m.drawAxisTicks=function(x,y,T,h,E){if(this.tickCount[x]){var k=b(l);k[x]=1,this.shader.uniforms.majorAxis=k,this.shader.uniforms.offset=y,this.shader.uniforms.minorAxis=T,this.shader.uniforms.color=h,this.shader.uniforms.lineWidth=E;var L=b(c);L[x]=1,this.shader.uniforms.screenAxis=L,this.vao.draw(this.gl.TRIANGLES,this.tickCount[x],this.tickOffset[x])}},m.drawGrid=function(x,y,T,h,E,k){if(this.gridCount[x]){var L=b(u);L[y]=T[1][y]-T[0][y],this.shader.uniforms.minorAxis=L;var P=v(g,h);P[y]+=T[0][y],this.shader.uniforms.offset=P;var I=b(l);I[x]=1,this.shader.uniforms.majorAxis=I;var z=b(c);z[x]=1,this.shader.uniforms.screenAxis=z,this.shader.uniforms.lineWidth=k,this.shader.uniforms.color=E,this.vao.draw(this.gl.TRIANGLES,this.gridCount[x],this.gridOffset[x])}},m.drawZero=function(x,y,T,h,E,k){var L=b(u);this.shader.uniforms.majorAxis=L,L[x]=T[1][x]-T[0][x],this.shader.uniforms.minorAxis=L;var P=v(g,h);P[x]+=T[0][x],this.shader.uniforms.offset=P;var I=b(c);I[y]=1,this.shader.uniforms.screenAxis=I,this.shader.uniforms.lineWidth=k,this.shader.uniforms.color=E,this.vao.draw(this.gl.TRIANGLES,6)},m.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1943:function(p,s,n){var a=n(6832),r=n(5158),i=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),l=a([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.j=function(b){return r(b,i,l,null,[{name:"position",type:"vec3"}])};var u=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),c=a([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.f=function(b){return r(b,u,c,null,[{name:"position",type:"vec3"}])};var g=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),f=a([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);s.bg=function(b){return r(b,g,f,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},9557:function(p,s,n){p.exports=function(v,d,m,x,y,T){var h=a(v),E=r(v,[{buffer:h,size:3}]),k=l(v);k.attributes.position.location=0;var L=new g(v,k,h,E);return L.update(d,m,x,y,T),L};var a=n(5827),r=n(2944),i=n(875),l=n(1943).f,u=window||A.global||{},c=u.__TEXT_CACHE||{};function g(v,d,m,x){this.gl=v,this.shader=d,this.buffer=m,this.vao=x,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}u.__TEXT_CACHE={};var f=g.prototype,b=[0,0];f.bind=function(v,d,m,x){this.vao.bind(),this.shader.bind();var y=this.shader.uniforms;y.model=v,y.view=d,y.projection=m,y.pixelScale=x,b[0]=this.gl.drawingBufferWidth,b[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=b},f.unbind=function(){this.vao.unbind()},f.update=function(v,d,m,x,y){var T=[];function h(U,R,j,Z,B,q){var V=c[j];V||(V=c[j]={});var ne=V[R];ne||(ne=V[R]=function(ce,de){try{return i(ce,de)}catch(ge){return console.warn('error vectorizing text:"'+ce+'" error:',ge),{cells:[],positions:[]}}}(R,{triangles:!0,font:j,textAlign:"center",textBaseline:"middle",lineSpacing:B,styletags:q}));for(var ee=(Z||12)/12,$=ne.positions,J=ne.cells,K=0,te=J.length;K<te;++K)for(var ie=J[K],ae=2;ae>=0;--ae){var se=$[ie[ae]];T.push(ee*se[0],-ee*se[1],U)}}for(var E=[0,0,0],k=[0,0,0],L=[0,0,0],P=[0,0,0],I={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},z=0;z<3;++z){L[z]=T.length/3|0,h(.5*(v[0][z]+v[1][z]),d[z],m[z],12,1.25,I),P[z]=(T.length/3|0)-L[z],E[z]=T.length/3|0;for(var F=0;F<x[z].length;++F)x[z][F].text&&h(x[z][F].x,x[z][F].text,x[z][F].font||y,x[z][F].fontSize||12,1.25,I);k[z]=(T.length/3|0)-E[z]}this.buffer.update(T),this.tickOffset=E,this.tickCount=k,this.labelOffset=L,this.labelCount=P},f.drawTicks=function(v,d,m,x,y,T,h,E){this.tickCount[v]&&(this.shader.uniforms.axis=T,this.shader.uniforms.color=y,this.shader.uniforms.angle=m,this.shader.uniforms.scale=d,this.shader.uniforms.offset=x,this.shader.uniforms.alignDir=h,this.shader.uniforms.alignOpt=E,this.vao.draw(this.gl.TRIANGLES,this.tickCount[v],this.tickOffset[v]))},f.drawLabel=function(v,d,m,x,y,T,h,E){this.labelCount[v]&&(this.shader.uniforms.axis=T,this.shader.uniforms.color=y,this.shader.uniforms.angle=m,this.shader.uniforms.scale=d,this.shader.uniforms.offset=x,this.shader.uniforms.alignDir=h,this.shader.uniforms.alignOpt=E,this.vao.draw(this.gl.TRIANGLES,this.labelCount[v],this.labelOffset[v]))},f.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},8468:function(p,s){function n(a,r){var i=a+"",l=i.indexOf("."),u=0;l>=0&&(u=i.length-l-1);var c=Math.pow(10,u),g=Math.round(a*r*c),f=g+"";if(f.indexOf("e")>=0)return f;var b=g/c,v=g%c;g<0?(b=0|-Math.ceil(b),v=0|-v):(b=0|Math.floor(b),v|=0);var d=""+b;if(g<0&&(d="-"+d),u){for(var m=""+v;m.length<u;)m="0"+m;return d+"."+m}return d}s.create=function(a,r){for(var i=[],l=0;l<3;++l){for(var u=[],c=(a[0][l],a[1][l],0);c*r[l]<=a[1][l];++c)u.push({x:c*r[l],text:n(r[l],c)});for(c=-1;c*r[l]>=a[0][l];--c)u.push({x:c*r[l],text:n(r[l],c)});i.push(u)}return i},s.equal=function(a,r){for(var i=0;i<3;++i){if(a[i].length!==r[i].length)return!1;for(var l=0;l<a[i].length;++l){var u=a[i][l],c=r[i][l];if(u.x!==c.x||u.text!==c.text||u.font!==c.font||u.fontColor!==c.fontColor||u.fontSize!==c.fontSize||u.dx!==c.dx||u.dy!==c.dy)return!1}}return!0}},2771:function(p,s,n){p.exports=function(T,h,E,k,L){var P=h.model||g,I=h.view||g,z=h.projection||g,F=h._ortho||!1,U=T.bounds,R=(L=L||i(P,I,z,U,F)).axis;l(f,I,P),l(f,z,f);for(var j=x,Z=0;Z<3;++Z)j[Z].lo=1/0,j[Z].hi=-1/0,j[Z].pixelsPerDataUnit=1/0;var B=a(u(f,f));u(f,f);for(var q=0;q<3;++q){var V=(q+1)%3,ne=(q+2)%3,ee=y;e:for(Z=0;Z<2;++Z){var $=[];if(R[q]<0!=!!Z){ee[q]=U[Z][q];for(var J=0;J<2;++J){ee[V]=U[J^Z][V];for(var K=0;K<2;++K)ee[ne]=U[K^J^Z][ne],$.push(ee.slice())}var te=F?5:4;for(J=te;J===te;++J){if($.length===0)continue e;$=r.positive($,B[J])}for(J=0;J<$.length;++J){ne=$[J];var ie=m(y,f,ne,E,k);for(K=0;K<3;++K)j[K].lo=Math.min(j[K].lo,ne[K]),j[K].hi=Math.max(j[K].hi,ne[K]),K!==q&&(j[K].pixelsPerDataUnit=Math.min(j[K].pixelsPerDataUnit,Math.abs(ie[K])))}}}}return j};var a=n(5795),r=n(4670),i=n(2864),l=n(104),u=n(2142),c=n(6342),g=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),f=new Float32Array(16);function b(T,h,E){this.lo=T,this.hi=h,this.pixelsPerDataUnit=E}var v=[0,0,0,1],d=[0,0,0,1];function m(T,h,E,k,L){for(var P=0;P<3;++P){for(var I=v,z=d,F=0;F<3;++F)z[F]=I[F]=E[F];z[3]=I[3]=1,z[P]+=1,c(z,z,h),z[3]<0&&(T[P]=1/0),I[P]-=1,c(I,I,h),I[3]<0&&(T[P]=1/0);var U=(I[0]/I[3]-z[0]/z[3])*k,R=(I[1]/I[3]-z[1]/z[3])*L;T[P]=.25*Math.sqrt(U*U+R*R)}return T}var x=[new b(1/0,-1/0,1/0),new b(1/0,-1/0,1/0),new b(1/0,-1/0,1/0)],y=[0,0,0]},5827:function(p,s,n){var a=n(5306),r=n(7498),i=n(5050),l=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function u(b,v,d,m,x){this.gl=b,this.type=v,this.handle=d,this.length=m,this.usage=x}var c=u.prototype;function g(b,v,d,m,x,y){var T=x.length*x.BYTES_PER_ELEMENT;if(y<0)return b.bufferData(v,x,m),T;if(T+y>d)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return b.bufferSubData(v,y,x),d}function f(b,v){for(var d=a.malloc(b.length,v),m=b.length,x=0;x<m;++x)d[x]=b[x];return d}c.bind=function(){this.gl.bindBuffer(this.type,this.handle)},c.unbind=function(){this.gl.bindBuffer(this.type,null)},c.dispose=function(){this.gl.deleteBuffer(this.handle)},c.update=function(b,v){if(typeof v!="number"&&(v=-1),this.bind(),typeof b=="object"&&b.shape!==void 0){var d=b.dtype;if(l.indexOf(d)<0&&(d="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(d=gl.getExtension("OES_element_index_uint")&&d!=="uint16"?"uint32":"uint16"),d===b.dtype&&function(T,h){for(var E=1,k=h.length-1;k>=0;--k){if(h[k]!==E)return!1;E*=T[k]}return!0}(b.shape,b.stride))b.offset===0&&b.data.length===b.shape[0]?this.length=g(this.gl,this.type,this.length,this.usage,b.data,v):this.length=g(this.gl,this.type,this.length,this.usage,b.data.subarray(b.offset,b.shape[0]),v);else{var m=a.malloc(b.size,d),x=i(m,b.shape);r.assign(x,b),this.length=g(this.gl,this.type,this.length,this.usage,v<0?m:m.subarray(0,b.size),v),a.free(m)}}else if(Array.isArray(b)){var y;y=this.type===this.gl.ELEMENT_ARRAY_BUFFER?f(b,"uint16"):f(b,"float32"),this.length=g(this.gl,this.type,this.length,this.usage,v<0?y:y.subarray(0,b.length),v),a.free(y)}else if(typeof b=="object"&&typeof b.length=="number")this.length=g(this.gl,this.type,this.length,this.usage,b,v);else{if(typeof b!="number"&&b!==void 0)throw new Error("gl-buffer: Invalid data type");if(v>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(b|=0)<=0&&(b=1),this.gl.bufferData(this.type,0|b,this.usage),this.length=b}},p.exports=function(b,v,d,m){if(d=d||b.ARRAY_BUFFER,m=m||b.DYNAMIC_DRAW,d!==b.ARRAY_BUFFER&&d!==b.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(m!==b.DYNAMIC_DRAW&&m!==b.STATIC_DRAW&&m!==b.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var x=b.createBuffer(),y=new u(b,d,x,0,m);return y.update(v),y}},1140:function(p,s,n){var a=n(2858);p.exports=function(i,l){var u=i.positions,c=i.vectors,g={positions:[],vertexIntensity:[],vertexIntensityBounds:i.vertexIntensityBounds,vectors:[],cells:[],coneOffset:i.coneOffset,colormap:i.colormap};if(i.positions.length===0)return l&&(l[0]=[0,0,0],l[1]=[0,0,0]),g;for(var f=0,b=1/0,v=-1/0,d=1/0,m=-1/0,x=1/0,y=-1/0,T=null,h=null,E=[],k=1/0,L=!1,P=0;P<u.length;P++){var I=u[P];b=Math.min(I[0],b),v=Math.max(I[0],v),d=Math.min(I[1],d),m=Math.max(I[1],m),x=Math.min(I[2],x),y=Math.max(I[2],y);var z=c[P];if(a.length(z)>f&&(f=a.length(z)),P){var F=2*a.distance(T,I)/(a.length(h)+a.length(z));F?(k=Math.min(k,F),L=!1):L=!0}L||(T=I,h=z),E.push(z)}var U=[b,d,x],R=[v,m,y];l&&(l[0]=U,l[1]=R),f===0&&(f=1);var j=1/f;isFinite(k)||(k=1),g.vectorScale=k;var Z=i.coneSize||.5;i.absoluteConeSize&&(Z=i.absoluteConeSize*j),g.coneScale=Z,P=0;for(var B=0;P<u.length;P++)for(var q=(I=u[P])[0],V=I[1],ne=I[2],ee=E[P],$=a.length(ee)*j,J=0;J<8;J++){g.positions.push([q,V,ne,B++]),g.positions.push([q,V,ne,B++]),g.positions.push([q,V,ne,B++]),g.positions.push([q,V,ne,B++]),g.positions.push([q,V,ne,B++]),g.positions.push([q,V,ne,B++]),g.vectors.push(ee),g.vectors.push(ee),g.vectors.push(ee),g.vectors.push(ee),g.vectors.push(ee),g.vectors.push(ee),g.vertexIntensity.push($,$,$),g.vertexIntensity.push($,$,$);var K=g.positions.length;g.cells.push([K-6,K-5,K-4],[K-3,K-2,K-1])}return g};var r=n(7234);p.exports.createMesh=n(5028),p.exports.createConeMesh=function(i,l){return p.exports.createMesh(i,l,{shaders:r,traceType:"cone"})}},5028:function(p,s,n){var a=n(5158),r=n(5827),i=n(2944),l=n(8931),u=n(104),c=n(7437),g=n(5050),f=n(9156),b=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function v(m,x,y,T,h,E,k,L,P,I,z){this.gl=m,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=x,this.dirty=!0,this.triShader=y,this.pickShader=T,this.trianglePositions=h,this.triangleVectors=E,this.triangleColors=L,this.triangleUVs=P,this.triangleIds=k,this.triangleVAO=I,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=z,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=b,this._view=b,this._projection=b,this._resolution=[1,1]}var d=v.prototype;d.isOpaque=function(){return this.opacity>=1},d.isTransparent=function(){return this.opacity<1},d.pickSlots=1,d.setPickBase=function(m){this.pickId=m},d.update=function(m){m=m||{};var x=this.gl;this.dirty=!0,"lightPosition"in m&&(this.lightPosition=m.lightPosition),"opacity"in m&&(this.opacity=m.opacity),"ambient"in m&&(this.ambientLight=m.ambient),"diffuse"in m&&(this.diffuseLight=m.diffuse),"specular"in m&&(this.specularLight=m.specular),"roughness"in m&&(this.roughness=m.roughness),"fresnel"in m&&(this.fresnel=m.fresnel),m.tubeScale!==void 0&&(this.tubeScale=m.tubeScale),m.vectorScale!==void 0&&(this.vectorScale=m.vectorScale),m.coneScale!==void 0&&(this.coneScale=m.coneScale),m.coneOffset!==void 0&&(this.coneOffset=m.coneOffset),m.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=x.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=x.LINEAR,this.texture.setPixels(function(ie){for(var ae=f({colormap:ie,nshades:256,format:"rgba"}),se=new Uint8Array(1024),ce=0;ce<256;++ce){for(var de=ae[ce],ge=0;ge<3;++ge)se[4*ce+ge]=de[ge];se[4*ce+3]=255*de[3]}return g(se,[256,256,4],[4,0,1])}(m.colormap)),this.texture.generateMipmap());var y=m.cells,T=m.positions,h=m.vectors;if(T&&y&&h){var E=[],k=[],L=[],P=[],I=[];this.cells=y,this.positions=T,this.vectors=h;var z=m.meshColor||[1,1,1,1],F=m.vertexIntensity,U=1/0,R=-1/0;if(F)if(m.vertexIntensityBounds)U=+m.vertexIntensityBounds[0],R=+m.vertexIntensityBounds[1];else for(var j=0;j<F.length;++j){var Z=F[j];U=Math.min(U,Z),R=Math.max(R,Z)}else for(j=0;j<T.length;++j)Z=T[j][2],U=Math.min(U,Z),R=Math.max(R,Z);for(this.intensity=F||function(ie){for(var ae=ie.length,se=new Array(ae),ce=0;ce<ae;++ce)se[ce]=ie[ce][2];return se}(T),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],j=0;j<T.length;++j)for(var B=T[j],q=0;q<3;++q)!isNaN(B[q])&&isFinite(B[q])&&(this.bounds[0][q]=Math.min(this.bounds[0][q],B[q]),this.bounds[1][q]=Math.max(this.bounds[1][q],B[q]));var V=0;e:for(j=0;j<y.length;++j){var ne=y[j];if(ne.length===3){for(q=0;q<3;++q){B=T[$=ne[q]];for(var ee=0;ee<3;++ee)if(isNaN(B[ee])||!isFinite(B[ee]))continue e}for(q=0;q<3;++q){var $;B=T[$=ne[2-q]],E.push(B[0],B[1],B[2],B[3]);var J=h[$];k.push(J[0],J[1],J[2],J[3]||0);var K,te=z;te.length===3?L.push(te[0],te[1],te[2],1):L.push(te[0],te[1],te[2],te[3]),K=F?[(F[$]-U)/(R-U),0]:[(B[2]-U)/(R-U),0],P.push(K[0],K[1]),I.push(j)}V+=1}}this.triangleCount=V,this.trianglePositions.update(E),this.triangleVectors.update(k),this.triangleColors.update(L),this.triangleUVs.update(P),this.triangleIds.update(new Uint32Array(I))}},d.drawTransparent=d.draw=function(m){m=m||{};for(var x=this.gl,y=m.model||b,T=m.view||b,h=m.projection||b,E=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],k=0;k<3;++k)E[0][k]=Math.max(E[0][k],this.clipBounds[0][k]),E[1][k]=Math.min(E[1][k],this.clipBounds[1][k]);var L={model:y,view:T,projection:h,inverseModel:b.slice(),clipBounds:E,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};L.inverseModel=c(L.inverseModel,L.model),x.disable(x.CULL_FACE),this.texture.bind(0);var P=new Array(16);for(u(P,L.view,L.model),u(P,L.projection,P),c(P,P),k=0;k<3;++k)L.eyePosition[k]=P[12+k]/P[15];var I=P[15];for(k=0;k<3;++k)I+=this.lightPosition[k]*P[4*k+3];for(k=0;k<3;++k){for(var z=P[12+k],F=0;F<3;++F)z+=P[4*F+k]*this.lightPosition[F];L.lightPosition[k]=z/I}if(this.triangleCount>0){var U=this.triShader;U.bind(),U.uniforms=L,this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},d.drawPick=function(m){m=m||{};for(var x=this.gl,y=m.model||b,T=m.view||b,h=m.projection||b,E=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],k=0;k<3;++k)E[0][k]=Math.max(E[0][k],this.clipBounds[0][k]),E[1][k]=Math.min(E[1][k],this.clipBounds[1][k]);this._model=[].slice.call(y),this._view=[].slice.call(T),this._projection=[].slice.call(h),this._resolution=[x.drawingBufferWidth,x.drawingBufferHeight];var L={model:y,view:T,projection:h,clipBounds:E,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},P=this.pickShader;P.bind(),P.uniforms=L,this.triangleCount>0&&(this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},d.pick=function(m){if(!m||m.id!==this.pickId)return null;var x=m.value[0]+256*m.value[1]+65536*m.value[2],y=this.cells[x],T=this.positions[y[1]].slice(0,3),h={position:T,dataCoordinate:T,index:Math.floor(y[1]/48)};return this.traceType==="cone"?h.index=Math.floor(y[1]/48):this.traceType==="streamtube"&&(h.intensity=this.intensity[y[1]],h.velocity=this.vectors[y[1]].slice(0,3),h.divergence=this.vectors[y[1]][3],h.index=x),h},d.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},p.exports=function(m,x,y){var T=y.shaders;arguments.length===1&&(m=(x=m).gl);var h=function(R,j){var Z=a(R,j.meshShader.vertex,j.meshShader.fragment,null,j.meshShader.attributes);return Z.attributes.position.location=0,Z.attributes.color.location=2,Z.attributes.uv.location=3,Z.attributes.vector.location=4,Z}(m,T),E=function(R,j){var Z=a(R,j.pickShader.vertex,j.pickShader.fragment,null,j.pickShader.attributes);return Z.attributes.position.location=0,Z.attributes.id.location=1,Z.attributes.vector.location=4,Z}(m,T),k=l(m,g(new Uint8Array([255,255,255,255]),[1,1,4]));k.generateMipmap(),k.minFilter=m.LINEAR_MIPMAP_LINEAR,k.magFilter=m.LINEAR;var L=r(m),P=r(m),I=r(m),z=r(m),F=r(m),U=new v(m,k,h,E,L,P,F,I,z,i(m,[{buffer:L,type:m.FLOAT,size:4},{buffer:F,type:m.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:I,type:m.FLOAT,size:4},{buffer:z,type:m.FLOAT,size:2},{buffer:P,type:m.FLOAT,size:4}]),y.traceType||"cone");return U.update(x),U}},7234:function(p,s,n){var a=n(6832),r=a([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),i=a([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),l=a([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),u=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:r,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},s.pickShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},1950:function(p){p.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},6603:function(p,s,n){var a=n(1950);p.exports=function(r){return a[r]}},3110:function(p,s,n){p.exports=function(v){var d=v.gl,m=a(d),x=r(d,[{buffer:m,type:d.FLOAT,size:3,offset:0,stride:40},{buffer:m,type:d.FLOAT,size:4,offset:12,stride:40},{buffer:m,type:d.FLOAT,size:3,offset:28,stride:40}]),y=i(d);y.attributes.position.location=0,y.attributes.color.location=1,y.attributes.offset.location=2;var T=new u(d,m,x,y);return T.update(v),T};var a=n(5827),r=n(2944),i=n(7667),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function u(v,d,m,x){this.gl=v,this.shader=x,this.buffer=d,this.vao=m,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var c=u.prototype;function g(v,d){for(var m=0;m<3;++m)v[0][m]=Math.min(v[0][m],d[m]),v[1][m]=Math.max(v[1][m],d[m])}c.isOpaque=function(){return!this.hasAlpha},c.isTransparent=function(){return this.hasAlpha},c.drawTransparent=c.draw=function(v){var d=this.gl,m=this.shader.uniforms;this.shader.bind();var x=m.view=v.view||l,y=m.projection=v.projection||l;m.model=v.model||l,m.clipBounds=this.clipBounds,m.opacity=this.opacity;var T=x[12],h=x[13],E=x[14],k=x[15],L=(v._ortho?2:1)*this.pixelRatio*(y[3]*T+y[7]*h+y[11]*E+y[15]*k)/d.drawingBufferHeight;this.vao.bind();for(var P=0;P<3;++P)d.lineWidth(this.lineWidth[P]*this.pixelRatio),m.capSize=this.capSize[P]*L,this.lineCount[P]&&d.drawArrays(d.LINES,this.lineOffset[P],this.lineCount[P]);this.vao.unbind()};var f=function(){for(var v=new Array(3),d=0;d<3;++d){for(var m=[],x=1;x<=2;++x)for(var y=-1;y<=1;y+=2){var T=[0,0,0];T[(x+d)%3]=y,m.push(T)}v[d]=m}return v}();function b(v,d,m,x){for(var y=f[x],T=0;T<y.length;++T){var h=y[T];v.push(d[0],d[1],d[2],m[0],m[1],m[2],m[3],h[0],h[1],h[2])}return y.length}c.update=function(v){"lineWidth"in(v=v||{})&&(this.lineWidth=v.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in v&&(this.capSize=v.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in v&&(this.opacity=+v.opacity,this.opacity<1&&(this.hasAlpha=!0));var d=v.color||[[0,0,0],[0,0,0],[0,0,0]],m=v.position,x=v.error;if(Array.isArray(d[0])||(d=[d,d,d]),m&&x){var y=[],T=m.length,h=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var E=0;E<3;++E){this.lineOffset[E]=h;e:for(var k=0;k<T;++k){for(var L=m[k],P=0;P<3;++P)if(isNaN(L[P])||!isFinite(L[P]))continue e;var I,z=x[k],F=d[E];Array.isArray(F[0])&&(F=d[k]),F.length===3?F=[F[0],F[1],F[2],1]:F.length===4&&(F=[F[0],F[1],F[2],F[3]],!this.hasAlpha&&F[3]<1&&(this.hasAlpha=!0)),isNaN(z[0][E])||isNaN(z[1][E])||(z[0][E]<0&&((I=L.slice())[E]+=z[0][E],y.push(L[0],L[1],L[2],F[0],F[1],F[2],F[3],0,0,0,I[0],I[1],I[2],F[0],F[1],F[2],F[3],0,0,0),g(this.bounds,I),h+=2+b(y,I,F,E)),z[1][E]>0&&((I=L.slice())[E]+=z[1][E],y.push(L[0],L[1],L[2],F[0],F[1],F[2],F[3],0,0,0,I[0],I[1],I[2],F[0],F[1],F[2],F[3],0,0,0),g(this.bounds,I),h+=2+b(y,I,F,E)))}this.lineCount[E]=h-this.lineOffset[E]}this.buffer.update(y)}},c.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},7667:function(p,s,n){var a=n(6832),r=n(5158),i=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),l=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);p.exports=function(u){return r(u,i,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},4234:function(p,s,n){var a=n(8931);p.exports=function(T,h,E,k){r||(r=T.FRAMEBUFFER_UNSUPPORTED,i=T.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,l=T.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,u=T.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var L=T.getExtension("WEBGL_draw_buffers");if(!c&&L&&function(j,Z){var B=j.getParameter(Z.MAX_COLOR_ATTACHMENTS_WEBGL);c=new Array(B+1);for(var q=0;q<=B;++q){for(var V=new Array(B),ne=0;ne<q;++ne)V[ne]=j.COLOR_ATTACHMENT0+ne;for(ne=q;ne<B;++ne)V[ne]=j.NONE;c[q]=V}}(T,L),Array.isArray(h)&&(k=E,E=0|h[1],h=0|h[0]),typeof h!="number")throw new Error("gl-fbo: Missing shape parameter");var P=T.getParameter(T.MAX_RENDERBUFFER_SIZE);if(h<0||h>P||E<0||E>P)throw new Error("gl-fbo: Parameters are too large for FBO");var I=1;if("color"in(k=k||{})){if((I=Math.max(0|k.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(I>1){if(!L)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(I>T.getParameter(L.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+I+" draw buffers")}}var z=T.UNSIGNED_BYTE,F=T.getExtension("OES_texture_float");if(k.float&&I>0){if(!F)throw new Error("gl-fbo: Context does not support floating point textures");z=T.FLOAT}else k.preferFloat&&I>0&&F&&(z=T.FLOAT);var U=!0;"depth"in k&&(U=!!k.depth);var R=!1;return"stencil"in k&&(R=!!k.stencil),new m(T,h,E,z,I,U,R,L)};var r,i,l,u,c=null;function g(T){return[T.getParameter(T.FRAMEBUFFER_BINDING),T.getParameter(T.RENDERBUFFER_BINDING),T.getParameter(T.TEXTURE_BINDING_2D)]}function f(T,h){T.bindFramebuffer(T.FRAMEBUFFER,h[0]),T.bindRenderbuffer(T.RENDERBUFFER,h[1]),T.bindTexture(T.TEXTURE_2D,h[2])}function b(T){switch(T){case r:throw new Error("gl-fbo: Framebuffer unsupported");case i:throw new Error("gl-fbo: Framebuffer incomplete attachment");case l:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case u:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function v(T,h,E,k,L,P){if(!k)return null;var I=a(T,h,E,L,k);return I.magFilter=T.NEAREST,I.minFilter=T.NEAREST,I.mipSamples=1,I.bind(),T.framebufferTexture2D(T.FRAMEBUFFER,P,T.TEXTURE_2D,I.handle,0),I}function d(T,h,E,k,L){var P=T.createRenderbuffer();return T.bindRenderbuffer(T.RENDERBUFFER,P),T.renderbufferStorage(T.RENDERBUFFER,k,h,E),T.framebufferRenderbuffer(T.FRAMEBUFFER,L,T.RENDERBUFFER,P),P}function m(T,h,E,k,L,P,I,z){this.gl=T,this._shape=[0|h,0|E],this._destroyed=!1,this._ext=z,this.color=new Array(L);for(var F=0;F<L;++F)this.color[F]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=k,this._useDepth=P,this._useStencil=I;var U=this,R=[0|h,0|E];Object.defineProperties(R,{0:{get:function(){return U._shape[0]},set:function(j){return U.width=j}},1:{get:function(){return U._shape[1]},set:function(j){return U.height=j}}}),this._shapeVector=R,function(j){var Z=g(j.gl),B=j.gl,q=j.handle=B.createFramebuffer(),V=j._shape[0],ne=j._shape[1],ee=j.color.length,$=j._ext,J=j._useStencil,K=j._useDepth,te=j._colorType;B.bindFramebuffer(B.FRAMEBUFFER,q);for(var ie=0;ie<ee;++ie)j.color[ie]=v(B,V,ne,te,B.RGBA,B.COLOR_ATTACHMENT0+ie);ee===0?(j._color_rb=d(B,V,ne,B.RGBA4,B.COLOR_ATTACHMENT0),$&&$.drawBuffersWEBGL(c[0])):ee>1&&$.drawBuffersWEBGL(c[ee]);var ae=B.getExtension("WEBGL_depth_texture");ae?J?j.depth=v(B,V,ne,ae.UNSIGNED_INT_24_8_WEBGL,B.DEPTH_STENCIL,B.DEPTH_STENCIL_ATTACHMENT):K&&(j.depth=v(B,V,ne,B.UNSIGNED_SHORT,B.DEPTH_COMPONENT,B.DEPTH_ATTACHMENT)):K&&J?j._depth_rb=d(B,V,ne,B.DEPTH_STENCIL,B.DEPTH_STENCIL_ATTACHMENT):K?j._depth_rb=d(B,V,ne,B.DEPTH_COMPONENT16,B.DEPTH_ATTACHMENT):J&&(j._depth_rb=d(B,V,ne,B.STENCIL_INDEX,B.STENCIL_ATTACHMENT));var se=B.checkFramebufferStatus(B.FRAMEBUFFER);if(se!==B.FRAMEBUFFER_COMPLETE){for(j._destroyed=!0,B.bindFramebuffer(B.FRAMEBUFFER,null),B.deleteFramebuffer(j.handle),j.handle=null,j.depth&&(j.depth.dispose(),j.depth=null),j._depth_rb&&(B.deleteRenderbuffer(j._depth_rb),j._depth_rb=null),ie=0;ie<j.color.length;++ie)j.color[ie].dispose(),j.color[ie]=null;j._color_rb&&(B.deleteRenderbuffer(j._color_rb),j._color_rb=null),f(B,Z),b(se)}f(B,Z)}(this)}var x=m.prototype;function y(T,h,E){if(T._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(T._shape[0]!==h||T._shape[1]!==E){var k=T.gl,L=k.getParameter(k.MAX_RENDERBUFFER_SIZE);if(h<0||h>L||E<0||E>L)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");T._shape[0]=h,T._shape[1]=E;for(var P=g(k),I=0;I<T.color.length;++I)T.color[I].shape=T._shape;T._color_rb&&(k.bindRenderbuffer(k.RENDERBUFFER,T._color_rb),k.renderbufferStorage(k.RENDERBUFFER,k.RGBA4,T._shape[0],T._shape[1])),T.depth&&(T.depth.shape=T._shape),T._depth_rb&&(k.bindRenderbuffer(k.RENDERBUFFER,T._depth_rb),T._useDepth&&T._useStencil?k.renderbufferStorage(k.RENDERBUFFER,k.DEPTH_STENCIL,T._shape[0],T._shape[1]):T._useDepth?k.renderbufferStorage(k.RENDERBUFFER,k.DEPTH_COMPONENT16,T._shape[0],T._shape[1]):T._useStencil&&k.renderbufferStorage(k.RENDERBUFFER,k.STENCIL_INDEX,T._shape[0],T._shape[1])),k.bindFramebuffer(k.FRAMEBUFFER,T.handle);var z=k.checkFramebufferStatus(k.FRAMEBUFFER);z!==k.FRAMEBUFFER_COMPLETE&&(T.dispose(),f(k,P),b(z)),f(k,P)}}Object.defineProperties(x,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(T){if(Array.isArray(T)||(T=[0|T,0|T]),T.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var h=0|T[0],E=0|T[1];return y(this,h,E),[h,E]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(T){return y(this,T|=0,this._shape[1]),T},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(T){return T|=0,y(this,this._shape[0],T),T},enumerable:!1}}),x.bind=function(){if(!this._destroyed){var T=this.gl;T.bindFramebuffer(T.FRAMEBUFFER,this.handle),T.viewport(0,0,this._shape[0],this._shape[1])}},x.dispose=function(){if(!this._destroyed){this._destroyed=!0;var T=this.gl;T.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(T.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var h=0;h<this.color.length;++h)this.color[h].dispose(),this.color[h]=null;this._color_rb&&(T.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},3530:function(p,s,n){var a=n(8974).sprintf,r=n(6603),i=n(9365),l=n(8008);p.exports=function(u,c,g){var f=i(c)||"of unknown name (see npm glsl-shader-name)",b="unknown type";g!==void 0&&(b=g===r.FRAGMENT_SHADER?"fragment":"vertex");for(var v=a(`Error compiling %s shader %s:
`,b,f),d=a("%s%s",v,u),m=u.split(`
`),x={},y=0;y<m.length;y++){var T=m[y];if(T!==""&&T!=="\0"){var h=parseInt(T.split(":")[2]);if(isNaN(h))throw new Error(a("Could not parse error: %s",T));x[h]=T}}var E=l(c).split(`
`);for(y=0;y<E.length;y++)if((x[y+3]||x[y+2]||x[y+1])&&(v+=E[y]+`
`,x[y+1])){var k=x[y+1];k=k.substr(k.split(":",3).join(":").length+1).trim(),v+=a(`^^^ %s

`,k)}return{long:v.trim(),short:d.trim()}}},6386:function(p,s,n){p.exports=function(d,m){var x=d.gl,y=new g(d,l(x,c.vertex,c.fragment),l(x,c.pickVertex,c.pickFragment),u(x),u(x),u(x),u(x));return y.update(m),d.addObject(y),y};var a=n(5070),r=n(9560),i=n(5306),l=n(5158),u=n(5827),c=n(1292);function g(d,m,x,y,T,h,E){this.plot=d,this.shader=m,this.pickShader=x,this.positionBuffer=y,this.weightBuffer=T,this.colorBuffer=h,this.idBuffer=E,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var f,b=g.prototype,v=[0,0,1,0,0,1,1,0,1,1,0,1];b.draw=(f=[1,0,0,0,1,0,0,0,1],function(){var d=this.plot,m=this.shader,x=this.bounds,y=this.numVertices;if(!(y<=0)){var T=d.gl,h=d.dataBox,E=x[2]-x[0],k=x[3]-x[1],L=h[2]-h[0],P=h[3]-h[1];f[0]=2*E/L,f[4]=2*k/P,f[6]=2*(x[0]-h[0])/L-1,f[7]=2*(x[1]-h[1])/P-1,m.bind();var I=m.uniforms;I.viewTransform=f,I.shape=this.shape;var z=m.attributes;this.positionBuffer.bind(),z.position.pointer(),this.weightBuffer.bind(),z.weight.pointer(T.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),z.color.pointer(T.UNSIGNED_BYTE,!0),T.drawArrays(T.TRIANGLES,0,y)}}),b.drawPick=function(){var d=[1,0,0,0,1,0,0,0,1],m=[0,0,0,0];return function(x){var y=this.plot,T=this.pickShader,h=this.bounds,E=this.numVertices;if(!(E<=0)){var k=y.gl,L=y.dataBox,P=h[2]-h[0],I=h[3]-h[1],z=L[2]-L[0],F=L[3]-L[1];d[0]=2*P/z,d[4]=2*I/F,d[6]=2*(h[0]-L[0])/z-1,d[7]=2*(h[1]-L[1])/F-1;for(var U=0;U<4;++U)m[U]=x>>8*U&255;this.pickOffset=x,T.bind();var R=T.uniforms;R.viewTransform=d,R.pickOffset=m,R.shape=this.shape;var j=T.attributes;return this.positionBuffer.bind(),j.position.pointer(),this.weightBuffer.bind(),j.weight.pointer(k.UNSIGNED_BYTE,!1),this.idBuffer.bind(),j.pickId.pointer(k.UNSIGNED_BYTE,!1),k.drawArrays(k.TRIANGLES,0,E),x+this.shape[0]*this.shape[1]}}}(),b.pick=function(d,m,x){var y=this.pickOffset,T=this.shape[0]*this.shape[1];if(x<y||x>=y+T)return null;var h=x-y,E=this.xData,k=this.yData;return{object:this,pointId:h,dataCoord:[E[h%this.shape[0]],k[h/this.shape[0]|0]]}},b.update=function(d){var m=(d=d||{}).shape||[0,0],x=d.x||r(m[0]),y=d.y||r(m[1]),T=d.z||new Float32Array(m[0]*m[1]),h=d.zsmooth!==!1;this.xData=x,this.yData=y;var E,k,L,P,I=d.colorLevels||[0],z=d.colorValues||[0,0,0,1],F=I.length,U=this.bounds;h?(E=U[0]=x[0],k=U[1]=y[0],L=U[2]=x[x.length-1],P=U[3]=y[y.length-1]):(E=U[0]=x[0]+(x[1]-x[0])/2,k=U[1]=y[0]+(y[1]-y[0])/2,L=U[2]=x[x.length-1]+(x[x.length-1]-x[x.length-2])/2,P=U[3]=y[y.length-1]+(y[y.length-1]-y[y.length-2])/2);var R=1/(L-E),j=1/(P-k),Z=m[0],B=m[1];this.shape=[Z,B];var q=(h?(Z-1)*(B-1):Z*B)*(v.length>>>1);this.numVertices=q;for(var V=i.mallocUint8(4*q),ne=i.mallocFloat32(2*q),ee=i.mallocUint8(2*q),$=i.mallocUint32(q),J=0,K=h?Z-1:Z,te=h?B-1:B,ie=0;ie<te;++ie){var ae,se;h?(ae=j*(y[ie]-k),se=j*(y[ie+1]-k)):(ae=ie<B-1?j*(y[ie]-(y[ie+1]-y[ie])/2-k):j*(y[ie]-(y[ie]-y[ie-1])/2-k),se=ie<B-1?j*(y[ie]+(y[ie+1]-y[ie])/2-k):j*(y[ie]+(y[ie]-y[ie-1])/2-k));for(var ce=0;ce<K;++ce){var de,ge;h?(de=R*(x[ce]-E),ge=R*(x[ce+1]-E)):(de=ce<Z-1?R*(x[ce]-(x[ce+1]-x[ce])/2-E):R*(x[ce]-(x[ce]-x[ce-1])/2-E),ge=ce<Z-1?R*(x[ce]+(x[ce+1]-x[ce])/2-E):R*(x[ce]+(x[ce]-x[ce-1])/2-E));for(var ve=0;ve<v.length;ve+=2){var be,me,Se,we,_e=v[ve],oe=v[ve+1],le=T[h?(ie+oe)*Z+(ce+_e):ie*Z+ce],pe=a.le(I,le);if(pe<0)be=z[0],me=z[1],Se=z[2],we=z[3];else if(pe===F-1)be=z[4*F-4],me=z[4*F-3],Se=z[4*F-2],we=z[4*F-1];else{var Ee=(le-I[pe])/(I[pe+1]-I[pe]),Te=1-Ee,Me=4*pe,Le=4*(pe+1);be=Te*z[Me]+Ee*z[Le],me=Te*z[Me+1]+Ee*z[Le+1],Se=Te*z[Me+2]+Ee*z[Le+2],we=Te*z[Me+3]+Ee*z[Le+3]}V[4*J]=255*be,V[4*J+1]=255*me,V[4*J+2]=255*Se,V[4*J+3]=255*we,ne[2*J]=.5*de+.5*ge,ne[2*J+1]=.5*ae+.5*se,ee[2*J]=_e,ee[2*J+1]=oe,$[J]=ie*Z+ce,J+=1}}}this.positionBuffer.update(ne),this.weightBuffer.update(ee),this.colorBuffer.update(V),this.idBuffer.update($),i.free(ne),i.free(V),i.free(ee),i.free($)},b.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},1292:function(p,s,n){var a=n(6832);p.exports={fragment:a([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:a([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:a([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:a([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},248:function(p,s,n){var a=n(6832),r=n(5158),i=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),l=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),u=a([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),c=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];s.createShader=function(g){return r(g,i,l,null,c)},s.createPickShader=function(g){return r(g,i,u,null,c)}},6086:function(p,s,n){p.exports=function(E){var k=E.gl||E.scene&&E.scene.gl,L=b(k);L.attributes.position.location=0,L.attributes.nextPosition.location=1,L.attributes.arcLength.location=2,L.attributes.lineWidth.location=3,L.attributes.color.location=4;var P=v(k);P.attributes.position.location=0,P.attributes.nextPosition.location=1,P.attributes.arcLength.location=2,P.attributes.lineWidth.location=3,P.attributes.color.location=4;for(var I=a(k),z=r(k,[{buffer:I,size:3,offset:0,stride:48},{buffer:I,size:3,offset:12,stride:48},{buffer:I,size:1,offset:24,stride:48},{buffer:I,size:1,offset:28,stride:48},{buffer:I,size:4,offset:32,stride:48}]),F=g(new Array(1024),[256,1,4]),U=0;U<1024;++U)F.data[U]=255;var R=i(k,F);R.wrap=k.REPEAT;var j=new T(k,L,P,I,z,R);return j.update(E),j};var a=n(5827),r=n(2944),i=n(8931),l=new Uint8Array(4),u=new Float32Array(l.buffer),c=n(5070),g=n(5050),f=n(248),b=f.createShader,v=f.createPickShader,d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function m(E,k){for(var L=0,P=0;P<3;++P){var I=E[P]-k[P];L+=I*I}return Math.sqrt(L)}function x(E){for(var k=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],L=0;L<3;++L)k[0][L]=Math.max(E[0][L],k[0][L]),k[1][L]=Math.min(E[1][L],k[1][L]);return k}function y(E,k,L,P){this.arcLength=E,this.position=k,this.index=L,this.dataCoordinate=P}function T(E,k,L,P,I,z){this.gl=E,this.shader=k,this.pickShader=L,this.buffer=P,this.vao=I,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=z,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var h=T.prototype;h.isTransparent=function(){return this.hasAlpha},h.isOpaque=function(){return!this.hasAlpha},h.pickSlots=1,h.setPickBase=function(E){this.pickId=E},h.drawTransparent=h.draw=function(E){if(this.vertexCount){var k=this.gl,L=this.shader,P=this.vao;L.bind(),L.uniforms={model:E.model||d,view:E.view||d,projection:E.projection||d,clipBounds:x(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[k.drawingBufferWidth,k.drawingBufferHeight],pixelRatio:this.pixelRatio},P.bind(),P.draw(k.TRIANGLE_STRIP,this.vertexCount),P.unbind()}},h.drawPick=function(E){if(this.vertexCount){var k=this.gl,L=this.pickShader,P=this.vao;L.bind(),L.uniforms={model:E.model||d,view:E.view||d,projection:E.projection||d,pickId:this.pickId,clipBounds:x(this.clipBounds),screenShape:[k.drawingBufferWidth,k.drawingBufferHeight],pixelRatio:this.pixelRatio},P.bind(),P.draw(k.TRIANGLE_STRIP,this.vertexCount),P.unbind()}},h.update=function(E){var k,L;this.dirty=!0;var P=!!E.connectGaps;"dashScale"in E&&(this.dashScale=E.dashScale),this.hasAlpha=!1,"opacity"in E&&(this.opacity=+E.opacity,this.opacity<1&&(this.hasAlpha=!0));var I=[],z=[],F=[],U=0,R=0,j=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Z=E.position||E.positions;if(Z){var B=E.color||E.colors||[0,0,0,1],q=E.lineWidth||1,V=!1;e:for(k=1;k<Z.length;++k){var ne,ee,$,J=Z[k-1],K=Z[k];for(z.push(U),F.push(J.slice()),L=0;L<3;++L){if(isNaN(J[L])||isNaN(K[L])||!isFinite(J[L])||!isFinite(K[L])){if(!P&&I.length>0){for(var te=0;te<24;++te)I.push(I[I.length-12]);R+=2,V=!0}continue e}j[0][L]=Math.min(j[0][L],J[L],K[L]),j[1][L]=Math.max(j[1][L],J[L],K[L])}Array.isArray(B[0])?(ne=B.length>k-1?B[k-1]:B.length>0?B[B.length-1]:[0,0,0,1],ee=B.length>k?B[k]:B.length>0?B[B.length-1]:[0,0,0,1]):ne=ee=B,ne.length===3&&(ne=[ne[0],ne[1],ne[2],1]),ee.length===3&&(ee=[ee[0],ee[1],ee[2],1]),!this.hasAlpha&&ne[3]<1&&(this.hasAlpha=!0),$=Array.isArray(q)?q.length>k-1?q[k-1]:q.length>0?q[q.length-1]:[0,0,0,1]:q;var ie=U;if(U+=m(J,K),V){for(L=0;L<2;++L)I.push(J[0],J[1],J[2],K[0],K[1],K[2],ie,$,ne[0],ne[1],ne[2],ne[3]);R+=2,V=!1}I.push(J[0],J[1],J[2],K[0],K[1],K[2],ie,$,ne[0],ne[1],ne[2],ne[3],J[0],J[1],J[2],K[0],K[1],K[2],ie,-$,ne[0],ne[1],ne[2],ne[3],K[0],K[1],K[2],J[0],J[1],J[2],U,-$,ee[0],ee[1],ee[2],ee[3],K[0],K[1],K[2],J[0],J[1],J[2],U,$,ee[0],ee[1],ee[2],ee[3]),R+=4}}if(this.buffer.update(I),z.push(U),F.push(Z[Z.length-1].slice()),this.bounds=j,this.vertexCount=R,this.points=F,this.arcLength=z,"dashes"in E){var ae=E.dashes.slice();for(ae.unshift(0),k=1;k<ae.length;++k)ae[k]=ae[k-1]+ae[k];var se=g(new Array(1024),[256,1,4]);for(k=0;k<256;++k){for(L=0;L<4;++L)se.set(k,0,L,0);1&c.le(ae,ae[ae.length-1]*k/255)?se.set(k,0,0,0):se.set(k,0,0,255)}this.texture.setPixels(se)}},h.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},h.pick=function(E){if(!E||E.id!==this.pickId)return null;var k=function(Z,B,q,V){return l[0]=0,l[1]=q,l[2]=B,l[3]=Z,u[0]}(E.value[0],E.value[1],E.value[2]),L=c.le(this.arcLength,k);if(L<0)return null;if(L===this.arcLength.length-1)return new y(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),L);for(var P=this.points[L],I=this.points[Math.min(L+1,this.points.length-1)],z=(k-this.arcLength[L])/(this.arcLength[L+1]-this.arcLength[L]),F=1-z,U=[0,0,0],R=0;R<3;++R)U[R]=F*P[R]+z*I[R];var j=Math.min(z<.5?L:L+1,this.points.length-1);return new y(k,U,j,this.points[j])}},7332:function(p){p.exports=function(s){var n=new Float32Array(16);return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],n[9]=s[9],n[10]=s[10],n[11]=s[11],n[12]=s[12],n[13]=s[13],n[14]=s[14],n[15]=s[15],n}},9823:function(p){p.exports=function(){var s=new Float32Array(16);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7787:function(p){p.exports=function(s){var n=s[0],a=s[1],r=s[2],i=s[3],l=s[4],u=s[5],c=s[6],g=s[7],f=s[8],b=s[9],v=s[10],d=s[11],m=s[12],x=s[13],y=s[14],T=s[15];return(n*u-a*l)*(v*T-d*y)-(n*c-r*l)*(b*T-d*x)+(n*g-i*l)*(b*y-v*x)+(a*c-r*u)*(f*T-d*m)-(a*g-i*u)*(f*y-v*m)+(r*g-i*c)*(f*x-b*m)}},5950:function(p){p.exports=function(s,n){var a=n[0],r=n[1],i=n[2],l=n[3],u=a+a,c=r+r,g=i+i,f=a*u,b=r*u,v=r*c,d=i*u,m=i*c,x=i*g,y=l*u,T=l*c,h=l*g;return s[0]=1-v-x,s[1]=b+h,s[2]=d-T,s[3]=0,s[4]=b-h,s[5]=1-f-x,s[6]=m+y,s[7]=0,s[8]=d+T,s[9]=m-y,s[10]=1-f-v,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7280:function(p){p.exports=function(s,n,a){var r=n[0],i=n[1],l=n[2],u=n[3],c=r+r,g=i+i,f=l+l,b=r*c,v=r*g,d=r*f,m=i*g,x=i*f,y=l*f,T=u*c,h=u*g,E=u*f;return s[0]=1-(m+y),s[1]=v+E,s[2]=d-h,s[3]=0,s[4]=v-E,s[5]=1-(b+y),s[6]=x+T,s[7]=0,s[8]=d+h,s[9]=x-T,s[10]=1-(b+m),s[11]=0,s[12]=a[0],s[13]=a[1],s[14]=a[2],s[15]=1,s}},9947:function(p){p.exports=function(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7437:function(p){p.exports=function(s,n){var a=n[0],r=n[1],i=n[2],l=n[3],u=n[4],c=n[5],g=n[6],f=n[7],b=n[8],v=n[9],d=n[10],m=n[11],x=n[12],y=n[13],T=n[14],h=n[15],E=a*c-r*u,k=a*g-i*u,L=a*f-l*u,P=r*g-i*c,I=r*f-l*c,z=i*f-l*g,F=b*y-v*x,U=b*T-d*x,R=b*h-m*x,j=v*T-d*y,Z=v*h-m*y,B=d*h-m*T,q=E*B-k*Z+L*j+P*R-I*U+z*F;return q?(q=1/q,s[0]=(c*B-g*Z+f*j)*q,s[1]=(i*Z-r*B-l*j)*q,s[2]=(y*z-T*I+h*P)*q,s[3]=(d*I-v*z-m*P)*q,s[4]=(g*R-u*B-f*U)*q,s[5]=(a*B-i*R+l*U)*q,s[6]=(T*L-x*z-h*k)*q,s[7]=(b*z-d*L+m*k)*q,s[8]=(u*Z-c*R+f*F)*q,s[9]=(r*R-a*Z-l*F)*q,s[10]=(x*I-y*L+h*E)*q,s[11]=(v*L-b*I-m*E)*q,s[12]=(c*U-u*j-g*F)*q,s[13]=(a*j-r*U+i*F)*q,s[14]=(y*k-x*P-T*E)*q,s[15]=(b*P-v*k+d*E)*q,s):null}},3012:function(p,s,n){var a=n(9947);p.exports=function(r,i,l,u){var c,g,f,b,v,d,m,x,y,T,h=i[0],E=i[1],k=i[2],L=u[0],P=u[1],I=u[2],z=l[0],F=l[1],U=l[2];return Math.abs(h-z)<1e-6&&Math.abs(E-F)<1e-6&&Math.abs(k-U)<1e-6?a(r):(m=h-z,x=E-F,y=k-U,c=P*(y*=T=1/Math.sqrt(m*m+x*x+y*y))-I*(x*=T),g=I*(m*=T)-L*y,f=L*x-P*m,(T=Math.sqrt(c*c+g*g+f*f))?(c*=T=1/T,g*=T,f*=T):(c=0,g=0,f=0),b=x*f-y*g,v=y*c-m*f,d=m*g-x*c,(T=Math.sqrt(b*b+v*v+d*d))?(b*=T=1/T,v*=T,d*=T):(b=0,v=0,d=0),r[0]=c,r[1]=b,r[2]=m,r[3]=0,r[4]=g,r[5]=v,r[6]=x,r[7]=0,r[8]=f,r[9]=d,r[10]=y,r[11]=0,r[12]=-(c*h+g*E+f*k),r[13]=-(b*h+v*E+d*k),r[14]=-(m*h+x*E+y*k),r[15]=1,r)}},104:function(p){p.exports=function(s,n,a){var r=n[0],i=n[1],l=n[2],u=n[3],c=n[4],g=n[5],f=n[6],b=n[7],v=n[8],d=n[9],m=n[10],x=n[11],y=n[12],T=n[13],h=n[14],E=n[15],k=a[0],L=a[1],P=a[2],I=a[3];return s[0]=k*r+L*c+P*v+I*y,s[1]=k*i+L*g+P*d+I*T,s[2]=k*l+L*f+P*m+I*h,s[3]=k*u+L*b+P*x+I*E,k=a[4],L=a[5],P=a[6],I=a[7],s[4]=k*r+L*c+P*v+I*y,s[5]=k*i+L*g+P*d+I*T,s[6]=k*l+L*f+P*m+I*h,s[7]=k*u+L*b+P*x+I*E,k=a[8],L=a[9],P=a[10],I=a[11],s[8]=k*r+L*c+P*v+I*y,s[9]=k*i+L*g+P*d+I*T,s[10]=k*l+L*f+P*m+I*h,s[11]=k*u+L*b+P*x+I*E,k=a[12],L=a[13],P=a[14],I=a[15],s[12]=k*r+L*c+P*v+I*y,s[13]=k*i+L*g+P*d+I*T,s[14]=k*l+L*f+P*m+I*h,s[15]=k*u+L*b+P*x+I*E,s}},5268:function(p){p.exports=function(s,n,a,r,i,l,u){var c=1/(n-a),g=1/(r-i),f=1/(l-u);return s[0]=-2*c,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*g,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*f,s[11]=0,s[12]=(n+a)*c,s[13]=(i+r)*g,s[14]=(u+l)*f,s[15]=1,s}},1120:function(p){p.exports=function(s,n,a,r,i){var l=1/Math.tan(n/2),u=1/(r-i);return s[0]=l/a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=l,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=(i+r)*u,s[11]=-1,s[12]=0,s[13]=0,s[14]=2*i*r*u,s[15]=0,s}},4422:function(p){p.exports=function(s,n,a,r){var i,l,u,c,g,f,b,v,d,m,x,y,T,h,E,k,L,P,I,z,F,U,R,j,Z=r[0],B=r[1],q=r[2],V=Math.sqrt(Z*Z+B*B+q*q);return Math.abs(V)<1e-6?null:(Z*=V=1/V,B*=V,q*=V,i=Math.sin(a),u=1-(l=Math.cos(a)),c=n[0],g=n[1],f=n[2],b=n[3],v=n[4],d=n[5],m=n[6],x=n[7],y=n[8],T=n[9],h=n[10],E=n[11],k=Z*Z*u+l,L=B*Z*u+q*i,P=q*Z*u-B*i,I=Z*B*u-q*i,z=B*B*u+l,F=q*B*u+Z*i,U=Z*q*u+B*i,R=B*q*u-Z*i,j=q*q*u+l,s[0]=c*k+v*L+y*P,s[1]=g*k+d*L+T*P,s[2]=f*k+m*L+h*P,s[3]=b*k+x*L+E*P,s[4]=c*I+v*z+y*F,s[5]=g*I+d*z+T*F,s[6]=f*I+m*z+h*F,s[7]=b*I+x*z+E*F,s[8]=c*U+v*R+y*j,s[9]=g*U+d*R+T*j,s[10]=f*U+m*R+h*j,s[11]=b*U+x*R+E*j,n!==s&&(s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s)}},6109:function(p){p.exports=function(s,n,a){var r=Math.sin(a),i=Math.cos(a),l=n[4],u=n[5],c=n[6],g=n[7],f=n[8],b=n[9],v=n[10],d=n[11];return n!==s&&(s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[4]=l*i+f*r,s[5]=u*i+b*r,s[6]=c*i+v*r,s[7]=g*i+d*r,s[8]=f*i-l*r,s[9]=b*i-u*r,s[10]=v*i-c*r,s[11]=d*i-g*r,s}},7115:function(p){p.exports=function(s,n,a){var r=Math.sin(a),i=Math.cos(a),l=n[0],u=n[1],c=n[2],g=n[3],f=n[8],b=n[9],v=n[10],d=n[11];return n!==s&&(s[4]=n[4],s[5]=n[5],s[6]=n[6],s[7]=n[7],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[0]=l*i-f*r,s[1]=u*i-b*r,s[2]=c*i-v*r,s[3]=g*i-d*r,s[8]=l*r+f*i,s[9]=u*r+b*i,s[10]=c*r+v*i,s[11]=g*r+d*i,s}},5240:function(p){p.exports=function(s,n,a){var r=Math.sin(a),i=Math.cos(a),l=n[0],u=n[1],c=n[2],g=n[3],f=n[4],b=n[5],v=n[6],d=n[7];return n!==s&&(s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[0]=l*i+f*r,s[1]=u*i+b*r,s[2]=c*i+v*r,s[3]=g*i+d*r,s[4]=f*i-l*r,s[5]=b*i-u*r,s[6]=v*i-c*r,s[7]=d*i-g*r,s}},3668:function(p){p.exports=function(s,n,a){var r=a[0],i=a[1],l=a[2];return s[0]=n[0]*r,s[1]=n[1]*r,s[2]=n[2]*r,s[3]=n[3]*r,s[4]=n[4]*i,s[5]=n[5]*i,s[6]=n[6]*i,s[7]=n[7]*i,s[8]=n[8]*l,s[9]=n[9]*l,s[10]=n[10]*l,s[11]=n[11]*l,s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s}},998:function(p){p.exports=function(s,n,a){var r,i,l,u,c,g,f,b,v,d,m,x,y=a[0],T=a[1],h=a[2];return n===s?(s[12]=n[0]*y+n[4]*T+n[8]*h+n[12],s[13]=n[1]*y+n[5]*T+n[9]*h+n[13],s[14]=n[2]*y+n[6]*T+n[10]*h+n[14],s[15]=n[3]*y+n[7]*T+n[11]*h+n[15]):(r=n[0],i=n[1],l=n[2],u=n[3],c=n[4],g=n[5],f=n[6],b=n[7],v=n[8],d=n[9],m=n[10],x=n[11],s[0]=r,s[1]=i,s[2]=l,s[3]=u,s[4]=c,s[5]=g,s[6]=f,s[7]=b,s[8]=v,s[9]=d,s[10]=m,s[11]=x,s[12]=r*y+c*T+v*h+n[12],s[13]=i*y+g*T+d*h+n[13],s[14]=l*y+f*T+m*h+n[14],s[15]=u*y+b*T+x*h+n[15]),s}},2142:function(p){p.exports=function(s,n){if(s===n){var a=n[1],r=n[2],i=n[3],l=n[6],u=n[7],c=n[11];s[1]=n[4],s[2]=n[8],s[3]=n[12],s[4]=a,s[6]=n[9],s[7]=n[13],s[8]=r,s[9]=l,s[11]=n[14],s[12]=i,s[13]=u,s[14]=c}else s[0]=n[0],s[1]=n[4],s[2]=n[8],s[3]=n[12],s[4]=n[1],s[5]=n[5],s[6]=n[9],s[7]=n[13],s[8]=n[2],s[9]=n[6],s[10]=n[10],s[11]=n[14],s[12]=n[3],s[13]=n[7],s[14]=n[11],s[15]=n[15];return s}},4340:function(p,s,n){var a=n(957),r=n(7309);function i(c,g){for(var f=[0,0,0,0],b=0;b<4;++b)for(var v=0;v<4;++v)f[v]+=c[4*b+v]*g[b];return f}function l(c,g,f,b,v){for(var d=i(b,i(f,i(g,[c[0],c[1],c[2],1]))),m=0;m<3;++m)d[m]/=d[3];return[.5*v[0]*(1+d[0]),.5*v[1]*(1-d[1])]}function u(c,g){for(var f=[0,0,0],b=0;b<c.length;++b)for(var v=c[b],d=g[b],m=0;m<3;++m)f[m]+=d*v[m];return f}p.exports=function(c,g,f,b,v,d){if(c.length===1)return[0,c[0].slice()];for(var m=new Array(c.length),x=0;x<c.length;++x)m[x]=l(c[x],f,b,v,d);var y=0,T=1/0;for(x=0;x<m.length;++x){for(var h=0,E=0;E<2;++E)h+=Math.pow(m[x][E]-g[E],2);h<T&&(T=h,y=x)}var k=function(P,I){if(P.length===2){for(var z=0,F=0,U=0;U<2;++U)z+=Math.pow(I[U]-P[0][U],2),F+=Math.pow(I[U]-P[1][U],2);return(z=Math.sqrt(z))+(F=Math.sqrt(F))<1e-6?[1,0]:[F/(z+F),z/(F+z)]}if(P.length===3){var R=[0,0];return r(P[0],P[1],P[2],I,R),a(P,R)}return[]}(m,g),L=0;for(x=0;x<3;++x){if(k[x]<-.001||k[x]>1.0001)return null;L+=k[x]}return Math.abs(L-1)>.001?null:[y,u(c,k),k]}},2056:function(p,s,n){var a=n(6832),r=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),i=a([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),l=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),u=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),c=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),g=a([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),f=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),b=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),v=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),d=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),m=a([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);s.meshShader={vertex:r,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.wireShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.pointShader={vertex:c,fragment:g,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},s.pickShader={vertex:f,fragment:b,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},s.pointPickShader={vertex:v,fragment:b,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},s.contourShader={vertex:d,fragment:m,attributes:[{name:"position",type:"vec3"}]}},8116:function(p,s,n){var a=n(5158),r=n(5827),i=n(2944),l=n(8931),u=n(115),c=n(104),g=n(7437),f=n(5050),b=n(9156),v=n(7212),d=n(5306),m=n(2056),x=n(4340),y=m.meshShader,T=m.wireShader,h=m.pointShader,E=m.pickShader,k=m.pointPickShader,L=m.contourShader,P=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function I(B,q,V,ne,ee,$,J,K,te,ie,ae,se,ce,de,ge,ve,be,me,Se,we,_e,oe,le,pe,Ee,Te,Me){this.gl=B,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=q,this.dirty=!0,this.triShader=V,this.lineShader=ne,this.pointShader=ee,this.pickShader=$,this.pointPickShader=J,this.contourShader=K,this.trianglePositions=te,this.triangleColors=ae,this.triangleNormals=ce,this.triangleUVs=se,this.triangleIds=ie,this.triangleVAO=de,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ge,this.edgeColors=be,this.edgeUVs=me,this.edgeIds=ve,this.edgeVAO=Se,this.edgeCount=0,this.pointPositions=we,this.pointColors=oe,this.pointUVs=le,this.pointSizes=pe,this.pointIds=_e,this.pointVAO=Ee,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Te,this.contourVAO=Me,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=P,this._view=P,this._projection=P,this._resolution=[1,1]}var z=I.prototype;function F(B,q){if(!q||!q.length)return 1;for(var V=0;V<q.length;++V){if(q.length<2)return 1;if(q[V][0]===B)return q[V][1];if(q[V][0]>B&&V>0){var ne=(q[V][0]-B)/(q[V][0]-q[V-1][0]);return q[V][1]*(1-ne)+ne*q[V-1][1]}}return 1}function U(B){var q=a(B,h.vertex,h.fragment);return q.attributes.position.location=0,q.attributes.color.location=2,q.attributes.uv.location=3,q.attributes.pointSize.location=4,q}function R(B){var q=a(B,E.vertex,E.fragment);return q.attributes.position.location=0,q.attributes.id.location=1,q}function j(B){var q=a(B,k.vertex,k.fragment);return q.attributes.position.location=0,q.attributes.id.location=1,q.attributes.pointSize.location=4,q}function Z(B){var q=a(B,L.vertex,L.fragment);return q.attributes.position.location=0,q}z.isOpaque=function(){return!this.hasAlpha},z.isTransparent=function(){return this.hasAlpha},z.pickSlots=1,z.setPickBase=function(B){this.pickId=B},z.highlight=function(B){if(B&&this.contourEnable){for(var q=v(this.cells,this.intensity,B.intensity),V=q.cells,ne=q.vertexIds,ee=q.vertexWeights,$=V.length,J=d.mallocFloat32(6*$),K=0,te=0;te<$;++te)for(var ie=V[te],ae=0;ae<2;++ae){var se=ie[0];ie.length===2&&(se=ie[ae]);for(var ce=ne[se][0],de=ne[se][1],ge=ee[se],ve=1-ge,be=this.positions[ce],me=this.positions[de],Se=0;Se<3;++Se)J[K++]=ge*be[Se]+ve*me[Se]}this.contourCount=K/3|0,this.contourPositions.update(J.subarray(0,K)),d.free(J)}else this.contourCount=0},z.update=function(B){B=B||{};var q=this.gl;this.dirty=!0,"contourEnable"in B&&(this.contourEnable=B.contourEnable),"contourColor"in B&&(this.contourColor=B.contourColor),"lineWidth"in B&&(this.lineWidth=B.lineWidth),"lightPosition"in B&&(this.lightPosition=B.lightPosition),this.hasAlpha=!1,"opacity"in B&&(this.opacity=B.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in B&&(this.opacityscale=B.opacityscale,this.hasAlpha=!0),"ambient"in B&&(this.ambientLight=B.ambient),"diffuse"in B&&(this.diffuseLight=B.diffuse),"specular"in B&&(this.specularLight=B.specular),"roughness"in B&&(this.roughness=B.roughness),"fresnel"in B&&(this.fresnel=B.fresnel),B.texture?(this.texture.dispose(),this.texture=l(q,B.texture)):B.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=q.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=q.LINEAR,this.texture.setPixels(function(Rt,Ft){for(var It=b({colormap:Rt,nshades:256,format:"rgba"}),Ge=new Uint8Array(1024),Ye=0;Ye<256;++Ye){for(var Ne=It[Ye],We=0;We<3;++We)Ge[4*Ye+We]=Ne[We];Ge[4*Ye+3]=Ft?255*F(Ye/255,Ft):255*Ne[3]}return f(Ge,[256,256,4],[4,0,1])}(B.colormap,this.opacityscale)),this.texture.generateMipmap());var V=B.cells,ne=B.positions;if(ne&&V){var ee=[],$=[],J=[],K=[],te=[],ie=[],ae=[],se=[],ce=[],de=[],ge=[],ve=[],be=[],me=[];this.cells=V,this.positions=ne;var Se=B.vertexNormals,we=B.cellNormals,_e=B.vertexNormalsEpsilon===void 0?1e-6:B.vertexNormalsEpsilon,oe=B.faceNormalsEpsilon===void 0?1e-6:B.faceNormalsEpsilon;B.useFacetNormals&&!we&&(we=u.faceNormals(V,ne,oe)),we||Se||(Se=u.vertexNormals(V,ne,_e));var le=B.vertexColors,pe=B.cellColors,Ee=B.meshColor||[1,1,1,1],Te=B.vertexUVs,Me=B.vertexIntensity,Le=B.cellUVs,Ie=B.cellIntensity,he=1/0,xe=-1/0;if(!Te&&!Le)if(Me)if(B.vertexIntensityBounds)he=+B.vertexIntensityBounds[0],xe=+B.vertexIntensityBounds[1];else for(var ke=0;ke<Me.length;++ke){var ze=Me[ke];he=Math.min(he,ze),xe=Math.max(xe,ze)}else if(Ie)if(B.cellIntensityBounds)he=+B.cellIntensityBounds[0],xe=+B.cellIntensityBounds[1];else for(ke=0;ke<Ie.length;++ke)ze=Ie[ke],he=Math.min(he,ze),xe=Math.max(xe,ze);else for(ke=0;ke<ne.length;++ke)ze=ne[ke][2],he=Math.min(he,ze),xe=Math.max(xe,ze);this.intensity=Me||Ie||function(Rt){for(var Ft=Rt.length,It=new Array(Ft),Ge=0;Ge<Ft;++Ge)It[Ge]=Rt[Ge][2];return It}(ne),this.pickVertex=!(Ie||pe);var Re=B.pointSizes,Oe=B.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],ke=0;ke<ne.length;++ke)for(var Ve=ne[ke],qe=0;qe<3;++qe)!isNaN(Ve[qe])&&isFinite(Ve[qe])&&(this.bounds[0][qe]=Math.min(this.bounds[0][qe],Ve[qe]),this.bounds[1][qe]=Math.max(this.bounds[1][qe],Ve[qe]));var Je=0,ot=0,rt=0;e:for(ke=0;ke<V.length;++ke){var dt=V[ke];switch(dt.length){case 1:for(Ve=ne[yt=dt[0]],qe=0;qe<3;++qe)if(isNaN(Ve[qe])||!isFinite(Ve[qe]))continue e;de.push(Ve[0],Ve[1],Ve[2]),et=le?le[yt]:pe?pe[ke]:Ee,this.opacityscale&&Me?$.push(et[0],et[1],et[2],this.opacity*F((Me[yt]-he)/(xe-he),this.opacityscale)):et.length===3?ge.push(et[0],et[1],et[2],this.opacity):(ge.push(et[0],et[1],et[2],et[3]*this.opacity),et[3]<1&&(this.hasAlpha=!0)),nt=Te?Te[yt]:Me?[(Me[yt]-he)/(xe-he),0]:Le?Le[ke]:Ie?[(Ie[ke]-he)/(xe-he),0]:[(Ve[2]-he)/(xe-he),0],ve.push(nt[0],nt[1]),Re?be.push(Re[yt]):be.push(Oe),me.push(ke),rt+=1;break;case 2:for(qe=0;qe<2;++qe){Ve=ne[yt=dt[qe]];for(var _t=0;_t<3;++_t)if(isNaN(Ve[_t])||!isFinite(Ve[_t]))continue e}for(qe=0;qe<2;++qe)Ve=ne[yt=dt[qe]],ie.push(Ve[0],Ve[1],Ve[2]),et=le?le[yt]:pe?pe[ke]:Ee,this.opacityscale&&Me?$.push(et[0],et[1],et[2],this.opacity*F((Me[yt]-he)/(xe-he),this.opacityscale)):et.length===3?ae.push(et[0],et[1],et[2],this.opacity):(ae.push(et[0],et[1],et[2],et[3]*this.opacity),et[3]<1&&(this.hasAlpha=!0)),nt=Te?Te[yt]:Me?[(Me[yt]-he)/(xe-he),0]:Le?Le[ke]:Ie?[(Ie[ke]-he)/(xe-he),0]:[(Ve[2]-he)/(xe-he),0],se.push(nt[0],nt[1]),ce.push(ke);ot+=1;break;case 3:for(qe=0;qe<3;++qe)for(Ve=ne[yt=dt[qe]],_t=0;_t<3;++_t)if(isNaN(Ve[_t])||!isFinite(Ve[_t]))continue e;for(qe=0;qe<3;++qe){var yt,et,nt,At;Ve=ne[yt=dt[2-qe]],ee.push(Ve[0],Ve[1],Ve[2]),(et=le?le[yt]:pe?pe[ke]:Ee)?this.opacityscale&&Me?$.push(et[0],et[1],et[2],this.opacity*F((Me[yt]-he)/(xe-he),this.opacityscale)):et.length===3?$.push(et[0],et[1],et[2],this.opacity):($.push(et[0],et[1],et[2],et[3]*this.opacity),et[3]<1&&(this.hasAlpha=!0)):$.push(.5,.5,.5,1),nt=Te?Te[yt]:Me?[(Me[yt]-he)/(xe-he),0]:Le?Le[ke]:Ie?[(Ie[ke]-he)/(xe-he),0]:[(Ve[2]-he)/(xe-he),0],K.push(nt[0],nt[1]),At=Se?Se[yt]:we[ke],J.push(At[0],At[1],At[2]),te.push(ke)}Je+=1}}this.pointCount=rt,this.edgeCount=ot,this.triangleCount=Je,this.pointPositions.update(de),this.pointColors.update(ge),this.pointUVs.update(ve),this.pointSizes.update(be),this.pointIds.update(new Uint32Array(me)),this.edgePositions.update(ie),this.edgeColors.update(ae),this.edgeUVs.update(se),this.edgeIds.update(new Uint32Array(ce)),this.trianglePositions.update(ee),this.triangleColors.update($),this.triangleUVs.update(K),this.triangleNormals.update(J),this.triangleIds.update(new Uint32Array(te))}},z.drawTransparent=z.draw=function(B){B=B||{};for(var q=this.gl,V=B.model||P,ne=B.view||P,ee=B.projection||P,$=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],J=0;J<3;++J)$[0][J]=Math.max($[0][J],this.clipBounds[0][J]),$[1][J]=Math.min($[1][J],this.clipBounds[1][J]);var K={model:V,view:ne,projection:ee,inverseModel:P.slice(),clipBounds:$,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};K.inverseModel=g(K.inverseModel,K.model),q.disable(q.CULL_FACE),this.texture.bind(0);var te=new Array(16);for(c(te,K.view,K.model),c(te,K.projection,te),g(te,te),J=0;J<3;++J)K.eyePosition[J]=te[12+J]/te[15];var ie,ae=te[15];for(J=0;J<3;++J)ae+=this.lightPosition[J]*te[4*J+3];for(J=0;J<3;++J){for(var se=te[12+J],ce=0;ce<3;++ce)se+=te[4*ce+J]*this.lightPosition[ce];K.lightPosition[J]=se/ae}this.triangleCount>0&&((ie=this.triShader).bind(),ie.uniforms=K,this.triangleVAO.bind(),q.drawArrays(q.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((ie=this.lineShader).bind(),ie.uniforms=K,this.edgeVAO.bind(),q.lineWidth(this.lineWidth*this.pixelRatio),q.drawArrays(q.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ie=this.pointShader).bind(),ie.uniforms=K,this.pointVAO.bind(),q.drawArrays(q.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((ie=this.contourShader).bind(),ie.uniforms=K,this.contourVAO.bind(),q.drawArrays(q.LINES,0,this.contourCount),this.contourVAO.unbind())},z.drawPick=function(B){B=B||{};for(var q=this.gl,V=B.model||P,ne=B.view||P,ee=B.projection||P,$=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],J=0;J<3;++J)$[0][J]=Math.max($[0][J],this.clipBounds[0][J]),$[1][J]=Math.min($[1][J],this.clipBounds[1][J]);this._model=[].slice.call(V),this._view=[].slice.call(ne),this._projection=[].slice.call(ee),this._resolution=[q.drawingBufferWidth,q.drawingBufferHeight];var K,te={model:V,view:ne,projection:ee,clipBounds:$,pickId:this.pickId/255};(K=this.pickShader).bind(),K.uniforms=te,this.triangleCount>0&&(this.triangleVAO.bind(),q.drawArrays(q.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),q.lineWidth(this.lineWidth*this.pixelRatio),q.drawArrays(q.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((K=this.pointPickShader).bind(),K.uniforms=te,this.pointVAO.bind(),q.drawArrays(q.POINTS,0,this.pointCount),this.pointVAO.unbind())},z.pick=function(B){if(!B||B.id!==this.pickId)return null;for(var q=B.value[0]+256*B.value[1]+65536*B.value[2],V=this.cells[q],ne=this.positions,ee=new Array(V.length),$=0;$<V.length;++$)ee[$]=ne[V[$]];var J=B.coord[0],K=B.coord[1];if(!this.pickVertex){var te=this.positions[V[0]],ie=this.positions[V[1]],ae=this.positions[V[2]],se=[(te[0]+ie[0]+ae[0])/3,(te[1]+ie[1]+ae[1])/3,(te[2]+ie[2]+ae[2])/3];return{_cellCenter:!0,position:[J,K],index:q,cell:V,cellId:q,intensity:this.intensity[q],dataCoordinate:se}}var ce=x(ee,[J*this.pixelRatio,this._resolution[1]-K*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ce)return null;var de=ce[2],ge=0;for($=0;$<V.length;++$)ge+=de[$]*this.intensity[V[$]];return{position:ce[1],index:V[ce[0]],cell:V,cellId:q,intensity:ge,dataCoordinate:this.positions[V[ce[0]]]}},z.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},p.exports=function(B,q){if(arguments.length===1&&(B=(q=B).gl),!(B.getExtension("OES_standard_derivatives")||B.getExtension("MOZ_OES_standard_derivatives")||B.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var V=function(Ie){var he=a(Ie,y.vertex,y.fragment);return he.attributes.position.location=0,he.attributes.color.location=2,he.attributes.uv.location=3,he.attributes.normal.location=4,he}(B),ne=function(Ie){var he=a(Ie,T.vertex,T.fragment);return he.attributes.position.location=0,he.attributes.color.location=2,he.attributes.uv.location=3,he}(B),ee=U(B),$=R(B),J=j(B),K=Z(B),te=l(B,f(new Uint8Array([255,255,255,255]),[1,1,4]));te.generateMipmap(),te.minFilter=B.LINEAR_MIPMAP_LINEAR,te.magFilter=B.LINEAR;var ie=r(B),ae=r(B),se=r(B),ce=r(B),de=r(B),ge=i(B,[{buffer:ie,type:B.FLOAT,size:3},{buffer:de,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ae,type:B.FLOAT,size:4},{buffer:se,type:B.FLOAT,size:2},{buffer:ce,type:B.FLOAT,size:3}]),ve=r(B),be=r(B),me=r(B),Se=r(B),we=i(B,[{buffer:ve,type:B.FLOAT,size:3},{buffer:Se,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:be,type:B.FLOAT,size:4},{buffer:me,type:B.FLOAT,size:2}]),_e=r(B),oe=r(B),le=r(B),pe=r(B),Ee=r(B),Te=i(B,[{buffer:_e,type:B.FLOAT,size:3},{buffer:Ee,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:oe,type:B.FLOAT,size:4},{buffer:le,type:B.FLOAT,size:2},{buffer:pe,type:B.FLOAT,size:1}]),Me=r(B),Le=new I(B,te,V,ne,ee,$,J,K,ie,de,ae,se,ce,ge,ve,Se,be,me,we,_e,Ee,oe,le,pe,Te,Me,i(B,[{buffer:Me,type:B.FLOAT,size:3}]));return Le.update(q),Le}},4554:function(p,s,n){p.exports=function(f){var b=f.gl;return new l(f,a(b,[0,0,0,1,1,0,1,1]),r(b,i.boxVert,i.lineFrag))};var a=n(5827),r=n(5158),i=n(2709);function l(f,b,v){this.plot=f,this.vbo=b,this.shader=v}var u,c,g=l.prototype;g.bind=function(){var f=this.shader;this.vbo.bind(),this.shader.bind(),f.attributes.coord.pointer(),f.uniforms.screenBox=this.plot.screenBox},g.drawBox=(u=[0,0],c=[0,0],function(f,b,v,d,m){var x=this.plot,y=this.shader,T=x.gl;u[0]=f,u[1]=b,c[0]=v,c[1]=d,y.uniforms.lo=u,y.uniforms.hi=c,y.uniforms.color=m,T.drawArrays(T.TRIANGLE_STRIP,0,4)}),g.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3016:function(p,s,n){p.exports=function(x){var y=x.gl;return new u(x,a(y),r(y,l.gridVert,l.gridFrag),r(y,l.tickVert,l.gridFrag))};var a=n(5827),r=n(5158),i=n(5070),l=n(2709);function u(x,y,T,h){this.plot=x,this.vbo=y,this.shader=T,this.tickShader=h,this.ticks=[[],[]]}function c(x,y){return x-y}var g,f,b,v,d,m=u.prototype;m.draw=(g=[0,0],f=[0,0],b=[0,0],function(){for(var x=this.plot,y=this.vbo,T=this.shader,h=this.ticks,E=x.gl,k=x._tickBounds,L=x.dataBox,P=x.viewBox,I=x.gridLineWidth,z=x.gridLineColor,F=x.gridLineEnable,U=x.pixelRatio,R=0;R<2;++R){var j=k[R],Z=k[R+2]-j,B=.5*(L[R+2]+L[R]),q=L[R+2]-L[R];f[R]=2*Z/q,g[R]=2*(j-B)/q}T.bind(),y.bind(),T.attributes.dataCoord.pointer(),T.uniforms.dataShift=g,T.uniforms.dataScale=f;var V=0;for(R=0;R<2;++R){b[0]=b[1]=0,b[R]=1,T.uniforms.dataAxis=b,T.uniforms.lineWidth=I[R]/(P[R+2]-P[R])*U,T.uniforms.color=z[R];var ne=6*h[R].length;F[R]&&ne&&E.drawArrays(E.TRIANGLES,V,ne),V+=ne}}),m.drawTickMarks=function(){var x=[0,0],y=[0,0],T=[1,0],h=[0,1],E=[0,0],k=[0,0];return function(){for(var L=this.plot,P=this.vbo,I=this.tickShader,z=this.ticks,F=L.gl,U=L._tickBounds,R=L.dataBox,j=L.viewBox,Z=L.pixelRatio,B=L.screenBox,q=B[2]-B[0],V=B[3]-B[1],ne=j[2]-j[0],ee=j[3]-j[1],$=0;$<2;++$){var J=U[$],K=U[$+2]-J,te=.5*(R[$+2]+R[$]),ie=R[$+2]-R[$];y[$]=2*K/ie,x[$]=2*(J-te)/ie}y[0]*=ne/q,x[0]*=ne/q,y[1]*=ee/V,x[1]*=ee/V,I.bind(),P.bind(),I.attributes.dataCoord.pointer();var ae=I.uniforms;ae.dataShift=x,ae.dataScale=y;var se=L.tickMarkLength,ce=L.tickMarkWidth,de=L.tickMarkColor,ge=6*z[0].length,ve=Math.min(i.ge(z[0],(R[0]-U[0])/(U[2]-U[0]),c),z[0].length),be=Math.min(i.gt(z[0],(R[2]-U[0])/(U[2]-U[0]),c),z[0].length),me=0+6*ve,Se=6*Math.max(0,be-ve),we=Math.min(i.ge(z[1],(R[1]-U[1])/(U[3]-U[1]),c),z[1].length),_e=Math.min(i.gt(z[1],(R[3]-U[1])/(U[3]-U[1]),c),z[1].length),oe=ge+6*we,le=6*Math.max(0,_e-we);E[0]=2*(j[0]-se[1])/q-1,E[1]=(j[3]+j[1])/V-1,k[0]=se[1]*Z/q,k[1]=ce[1]*Z/V,le&&(ae.color=de[1],ae.tickScale=k,ae.dataAxis=h,ae.screenOffset=E,F.drawArrays(F.TRIANGLES,oe,le)),E[0]=(j[2]+j[0])/q-1,E[1]=2*(j[1]-se[0])/V-1,k[0]=ce[0]*Z/q,k[1]=se[0]*Z/V,Se&&(ae.color=de[0],ae.tickScale=k,ae.dataAxis=T,ae.screenOffset=E,F.drawArrays(F.TRIANGLES,me,Se)),E[0]=2*(j[2]+se[3])/q-1,E[1]=(j[3]+j[1])/V-1,k[0]=se[3]*Z/q,k[1]=ce[3]*Z/V,le&&(ae.color=de[3],ae.tickScale=k,ae.dataAxis=h,ae.screenOffset=E,F.drawArrays(F.TRIANGLES,oe,le)),E[0]=(j[2]+j[0])/q-1,E[1]=2*(j[3]+se[2])/V-1,k[0]=ce[2]*Z/q,k[1]=se[2]*Z/V,Se&&(ae.color=de[2],ae.tickScale=k,ae.dataAxis=T,ae.screenOffset=E,F.drawArrays(F.TRIANGLES,me,Se))}}(),m.update=(v=[1,1,-1,-1,1,-1],d=[1,-1,1,1,-1,-1],function(x){for(var y=x.ticks,T=x.bounds,h=new Float32Array(18*(y[0].length+y[1].length)),E=(this.plot.zeroLineEnable,0),k=[[],[]],L=0;L<2;++L)for(var P=k[L],I=y[L],z=T[L],F=T[L+2],U=0;U<I.length;++U){var R=(I[U].x-z)/(F-z);P.push(R);for(var j=0;j<6;++j)h[E++]=R,h[E++]=v[j],h[E++]=d[j]}this.ticks=k,this.vbo.update(h)}),m.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},1154:function(p,s,n){p.exports=function(f){var b=f.gl;return new l(f,a(b,[-1,-1,-1,1,1,-1,1,1]),r(b,i.lineVert,i.lineFrag))};var a=n(5827),r=n(5158),i=n(2709);function l(f,b,v){this.plot=f,this.vbo=b,this.shader=v}var u,c,g=l.prototype;g.bind=function(){var f=this.shader;this.vbo.bind(),this.shader.bind(),f.attributes.coord.pointer(),f.uniforms.screenBox=this.plot.screenBox},g.drawLine=(u=[0,0],c=[0,0],function(f,b,v,d,m,x){var y=this.plot,T=this.shader,h=y.gl;u[0]=f,u[1]=b,c[0]=v,c[1]=d,T.uniforms.start=u,T.uniforms.end=c,T.uniforms.width=m*y.pixelRatio,T.uniforms.color=x,h.drawArrays(h.TRIANGLE_STRIP,0,4)}),g.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2709:function(p,s,n){var a=n(6832),r=a([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);p.exports={lineVert:a([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:r,textVert:a([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:r,gridVert:a([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:r,boxVert:a([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:a([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},5613:function(p,s,n){p.exports=function(y){var T=y.gl;return new c(y,a(T),r(T,u.textVert,u.textFrag))};var a=n(5827),r=n(5158),i=n(6946),l=n(5070),u=n(2709);function c(y,T,h){this.plot=y,this.vbo=T,this.shader=h,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var g,f,b,v,d,m,x=c.prototype;x.drawTicks=(g=[0,0],f=[0,0],b=[0,0],function(y){var T=this.plot,h=this.shader,E=this.tickX[y],k=this.tickOffset[y],L=T.gl,P=T.viewBox,I=T.dataBox,z=T.screenBox,F=T.pixelRatio,U=T.tickEnable,R=T.tickPad,j=T.tickColor,Z=T.tickAngle,B=T.labelEnable,q=T.labelPad,V=T.labelColor,ne=T.labelAngle,ee=this.labelOffset[y],$=this.labelCount[y],J=l.lt(E,I[y]),K=l.le(E,I[y+2]);g[0]=g[1]=0,g[y]=1,f[y]=(P[2+y]+P[y])/(z[2+y]-z[y])-1;var te=2/z[2+(1^y)]-z[1^y];f[1^y]=te*P[1^y]-1,U[y]&&(f[1^y]-=te*F*R[y],J<K&&k[K]>k[J]&&(h.uniforms.dataAxis=g,h.uniforms.screenOffset=f,h.uniforms.color=j[y],h.uniforms.angle=Z[y],L.drawArrays(L.TRIANGLES,k[J],k[K]-k[J]))),B[y]&&$&&(f[1^y]-=te*F*q[y],h.uniforms.dataAxis=b,h.uniforms.screenOffset=f,h.uniforms.color=V[y],h.uniforms.angle=ne[y],L.drawArrays(L.TRIANGLES,ee,$)),f[1^y]=te*P[2+(1^y)]-1,U[y+2]&&(f[1^y]+=te*F*R[y+2],J<K&&k[K]>k[J]&&(h.uniforms.dataAxis=g,h.uniforms.screenOffset=f,h.uniforms.color=j[y+2],h.uniforms.angle=Z[y+2],L.drawArrays(L.TRIANGLES,k[J],k[K]-k[J]))),B[y+2]&&$&&(f[1^y]+=te*F*q[y+2],h.uniforms.dataAxis=b,h.uniforms.screenOffset=f,h.uniforms.color=V[y+2],h.uniforms.angle=ne[y+2],L.drawArrays(L.TRIANGLES,ee,$))}),x.drawTitle=function(){var y=[0,0],T=[0,0];return function(){var h=this.plot,E=this.shader,k=h.gl,L=h.screenBox,P=h.titleCenter,I=h.titleAngle,z=h.titleColor,F=h.pixelRatio;if(this.titleCount){for(var U=0;U<2;++U)T[U]=2*(P[U]*F-L[U])/(L[2+U]-L[U])-1;E.bind(),E.uniforms.dataAxis=y,E.uniforms.screenOffset=T,E.uniforms.angle=I,E.uniforms.color=z,k.drawArrays(k.TRIANGLES,this.titleOffset,this.titleCount)}}}(),x.bind=(v=[0,0],d=[0,0],m=[0,0],function(){var y=this.plot,T=this.shader,h=y._tickBounds,E=y.dataBox,k=y.screenBox,L=y.viewBox;T.bind();for(var P=0;P<2;++P){var I=h[P],z=h[P+2]-I,F=.5*(E[P+2]+E[P]),U=E[P+2]-E[P],R=L[P],j=L[P+2]-R,Z=k[P],B=k[P+2]-Z;d[P]=2*z/U*j/B,v[P]=2*(I-F)/U*j/B}m[1]=2*y.pixelRatio/(k[3]-k[1]),m[0]=m[1]*(k[3]-k[1])/(k[2]-k[0]),T.uniforms.dataScale=d,T.uniforms.dataShift=v,T.uniforms.textScale=m,this.vbo.bind(),T.attributes.textCoordinate.pointer()}),x.update=function(y){var T,h,E,k,L,P=[],I=y.ticks,z=y.bounds;for(L=0;L<2;++L){var F=[Math.floor(P.length/3)],U=[-1/0],R=I[L];for(T=0;T<R.length;++T){var j=R[T],Z=j.x,B=j.text,q=j.font||"sans-serif";k=j.fontSize||12;for(var V=1/(z[L+2]-z[L]),ne=z[L],ee=B.split(`
`),$=0;$<ee.length;$++)for(E=i(q,ee[$]).data,h=0;h<E.length;h+=2)P.push(E[h]*k,-E[h+1]*k-$*k*1.2,(Z-ne)*V);F.push(Math.floor(P.length/3)),U.push(Z)}this.tickOffset[L]=F,this.tickX[L]=U}for(L=0;L<2;++L){for(this.labelOffset[L]=Math.floor(P.length/3),E=i(y.labelFont[L],y.labels[L],{textAlign:"center"}).data,k=y.labelSize[L],T=0;T<E.length;T+=2)P.push(E[T]*k,-E[T+1]*k,0);this.labelCount[L]=Math.floor(P.length/3)-this.labelOffset[L]}for(this.titleOffset=Math.floor(P.length/3),E=i(y.titleFont,y.title).data,k=y.titleSize,T=0;T<E.length;T+=2)P.push(E[T]*k,-E[T+1]*k,0);this.titleCount=Math.floor(P.length/3)-this.titleOffset,this.vbo.update(P)},x.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2117:function(p,s,n){p.exports=function(v){var d=v.gl,m=new c(d,a(d,[d.drawingBufferWidth,d.drawingBufferHeight]));return m.grid=r(m),m.text=i(m),m.line=l(m),m.box=u(m),m.update(v),m};var a=n(2611),r=n(3016),i=n(5613),l=n(1154),u=n(4554);function c(v,d){this.gl=v,this.pickBuffer=d,this.screenBox=[0,0,v.drawingBufferWidth,v.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var g=c.prototype;function f(v){for(var d=v.slice(),m=0;m<d.length;++m)d[m]=d[m].slice();return d}function b(v,d){return v.x-d.x}g.setDirty=function(){this.dirty=this.pickDirty=!0},g.setOverlayDirty=function(){this.dirty=!0},g.nextDepthValue=function(){return this._depthCounter++/65536},g.draw=function(){var v=this.gl,d=this.screenBox,m=this.viewBox,x=this.dataBox,y=this.pixelRatio,T=this.grid,h=this.line,E=this.text,k=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,v.bindFramebuffer(v.FRAMEBUFFER,null),v.enable(v.SCISSOR_TEST),v.disable(v.DEPTH_TEST),v.depthFunc(v.LESS),v.depthMask(!1),v.enable(v.BLEND),v.blendEquation(v.FUNC_ADD,v.FUNC_ADD),v.blendFunc(v.ONE,v.ONE_MINUS_SRC_ALPHA),this.borderColor){v.scissor(d[0],d[1],d[2]-d[0],d[3]-d[1]);var L=this.borderColor;v.clearColor(L[0]*L[3],L[1]*L[3],L[2]*L[3],L[3]),v.clear(v.COLOR_BUFFER_BIT|v.DEPTH_BUFFER_BIT)}v.scissor(m[0],m[1],m[2]-m[0],m[3]-m[1]),v.viewport(m[0],m[1],m[2]-m[0],m[3]-m[1]);var P=this.backgroundColor;v.clearColor(P[0]*P[3],P[1]*P[3],P[2]*P[3],P[3]),v.clear(v.COLOR_BUFFER_BIT),T.draw();var I=this.zeroLineEnable,z=this.zeroLineColor,F=this.zeroLineWidth;if(I[0]||I[1]){h.bind();for(var U=0;U<2;++U)if(I[U]&&x[U]<=0&&x[U+2]>=0){var R=d[U]-x[U]*(d[U+2]-d[U])/(x[U+2]-x[U]);U===0?h.drawLine(R,d[1],R,d[3],F[U],z[U]):h.drawLine(d[0],R,d[2],R,F[U],z[U])}}for(U=0;U<k.length;++U)k[U].draw();v.viewport(d[0],d[1],d[2]-d[0],d[3]-d[1]),v.scissor(d[0],d[1],d[2]-d[0],d[3]-d[1]),this.grid.drawTickMarks(),h.bind();var j=this.borderLineEnable,Z=this.borderLineWidth,B=this.borderLineColor;for(j[1]&&h.drawLine(m[0],m[1]-.5*Z[1]*y,m[0],m[3]+.5*Z[3]*y,Z[1],B[1]),j[0]&&h.drawLine(m[0]-.5*Z[0]*y,m[1],m[2]+.5*Z[2]*y,m[1],Z[0],B[0]),j[3]&&h.drawLine(m[2],m[1]-.5*Z[1]*y,m[2],m[3]+.5*Z[3]*y,Z[3],B[3]),j[2]&&h.drawLine(m[0]-.5*Z[0]*y,m[3],m[2]+.5*Z[2]*y,m[3],Z[2],B[2]),E.bind(),U=0;U<2;++U)E.drawTicks(U);this.titleEnable&&E.drawTitle();var q=this.overlays;for(U=0;U<q.length;++U)q[U].draw();v.disable(v.SCISSOR_TEST),v.disable(v.BLEND),v.depthMask(!0)}},g.drawPick=function(){if(!this.static){var v=this.pickBuffer;this.gl,this._pickTimeout=null,v.begin();for(var d=1,m=this.objects,x=0;x<m.length;++x)d=m[x].drawPick(d);v.end()}},g.pick=function(v,d){if(!this.static){var m=this.pixelRatio,x=this.pickPixelRatio,y=this.viewBox,T=0|Math.round((v-y[0]/m)*x),h=0|Math.round((d-y[1]/m)*x),E=this.pickBuffer.query(T,h,this.pickRadius);if(!E)return null;for(var k=E.id+(E.value[0]<<8)+(E.value[1]<<16)+(E.value[2]<<24),L=this.objects,P=0;P<L.length;++P){var I=L[P].pick(T,h,k);if(I)return I}return null}},g.setScreenBox=function(v){var d=this.screenBox,m=this.pixelRatio;d[0]=0|Math.round(v[0]*m),d[1]=0|Math.round(v[1]*m),d[2]=0|Math.round(v[2]*m),d[3]=0|Math.round(v[3]*m),this.setDirty()},g.setDataBox=function(v){var d=this.dataBox;(d[0]!==v[0]||d[1]!==v[1]||d[2]!==v[2]||d[3]!==v[3])&&(d[0]=v[0],d[1]=v[1],d[2]=v[2],d[3]=v[3],this.setDirty())},g.setViewBox=function(v){var d=this.pixelRatio,m=this.viewBox;m[0]=0|Math.round(v[0]*d),m[1]=0|Math.round(v[1]*d),m[2]=0|Math.round(v[2]*d),m[3]=0|Math.round(v[3]*d);var x=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((v[2]-v[0])*x),0|Math.round((v[3]-v[1])*x)],this.setDirty()},g.update=function(v){v=v||{};var d=this.gl;this.pixelRatio=v.pixelRatio||1;var m=this.pixelRatio;this.pickPixelRatio=Math.max(m,1),this.setScreenBox(v.screenBox||[0,0,d.drawingBufferWidth/m,d.drawingBufferHeight/m]),this.screenBox,this.setViewBox(v.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/m,.125*(this.screenBox[3]-this.screenBox[1])/m,.875*(this.screenBox[2]-this.screenBox[0])/m,.875*(this.screenBox[3]-this.screenBox[1])/m]);var x=this.viewBox,y=(x[2]-x[0])/(x[3]-x[1]);this.setDataBox(v.dataBox||[-10,-10/y,10,10/y]),this.borderColor=v.borderColor!==!1&&(v.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(v.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(v.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(v.gridLineWidth||[1,1]).slice(),this.gridLineColor=f(v.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(v.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(v.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=f(v.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(v.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(v.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=f(v.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(v.titleCenter||[.5*(x[0]+x[2])/m,(x[3]+120)/m]).slice(),this.titleEnable=!("titleEnable"in v)||!!v.titleEnable,this.titleAngle=v.titleAngle||0,this.titleColor=(v.titleColor||[0,0,0,1]).slice(),this.labelPad=(v.labelPad||[15,15,15,15]).slice(),this.labelAngle=(v.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(v.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=f(v.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(v.tickPad||[15,15,15,15]).slice(),this.tickAngle=(v.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(v.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=f(v.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(v.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(v.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=f(v.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var T=v.ticks||[[],[]],h=this._tickBounds;h[0]=h[1]=1/0,h[2]=h[3]=-1/0;for(var E=0;E<2;++E){var k=T[E].slice(0);k.length!==0&&(k.sort(b),h[E]=Math.min(h[E],k[0].x),h[E+2]=Math.max(h[E+2],k[k.length-1].x))}this.grid.update({bounds:h,ticks:T}),this.text.update({bounds:h,ticks:T,labels:v.labels||["x","y"],labelSize:v.labelSize||[12,12],labelFont:v.labelFont||["sans-serif","sans-serif"],title:v.title||"",titleSize:v.titleSize||18,titleFont:v.titleFont||"sans-serif"}),this.static=!!v.static,this.setDirty()},g.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var v=this.objects.length-1;v>=0;--v)this.objects[v].dispose();for(this.objects.length=0,v=this.overlays.length-1;v>=0;--v)this.overlays[v].dispose();this.overlays.length=0,this.gl=null},g.addObject=function(v){this.objects.indexOf(v)<0&&(this.objects.push(v),this.setDirty())},g.removeObject=function(v){for(var d=this.objects,m=0;m<d.length;++m)if(d[m]===v){d.splice(m,1),this.setDirty();break}},g.addOverlay=function(v){this.overlays.indexOf(v)<0&&(this.overlays.push(v),this.setOverlayDirty())},g.removeOverlay=function(v){for(var d=this.overlays,m=0;m<d.length;++m)if(d[m]===v){d.splice(m,1),this.setOverlayDirty();break}}},4296:function(p,s,n){p.exports=function(g,f){g=g||document.body;var b=[.01,1/0];"distanceLimits"in(f=f||{})&&(b[0]=f.distanceLimits[0],b[1]=f.distanceLimits[1]),"zoomMin"in f&&(b[0]=f.zoomMin),"zoomMax"in f&&(b[1]=f.zoomMax);var v=r({center:f.center||[0,0,0],up:f.up||[0,1,0],eye:f.eye||[0,0,10],mode:f.mode||"orbit",distanceLimits:b}),d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m=0,x=g.clientWidth,y=g.clientHeight,T={keyBindingMode:"rotate",enableWheel:!0,view:v,element:g,delay:f.delay||16,rotateSpeed:f.rotateSpeed||1,zoomSpeed:f.zoomSpeed||1,translateSpeed:f.translateSpeed||1,flipX:!!f.flipX,flipY:!!f.flipY,modes:v.modes,_ortho:f._ortho||f.projection&&f.projection.type==="orthographic"||!1,tick:function(){var h=a(),E=this.delay,k=h-2*E;v.idle(h-E),v.recalcMatrix(k),v.flush(h-(100+2*E));for(var L=!0,P=v.computedMatrix,I=0;I<16;++I)L=L&&d[I]===P[I],d[I]=P[I];var z=g.clientWidth===x&&g.clientHeight===y;return x=g.clientWidth,y=g.clientHeight,L?!z:(m=Math.exp(v.computedRadius[0]),!0)},lookAt:function(h,E,k){v.lookAt(v.lastT(),h,E,k)},rotate:function(h,E,k){v.rotate(v.lastT(),h,E,k)},pan:function(h,E,k){v.pan(v.lastT(),h,E,k)},translate:function(h,E,k){v.translate(v.lastT(),h,E,k)}};return Object.defineProperties(T,{matrix:{get:function(){return v.computedMatrix},set:function(h){return v.setMatrix(v.lastT(),h),v.computedMatrix},enumerable:!0},mode:{get:function(){return v.getMode()},set:function(h){var E=v.computedUp.slice(),k=v.computedEye.slice(),L=v.computedCenter.slice();if(v.setMode(h),h==="turntable"){var P=a();v._active.lookAt(P,k,L,E),v._active.lookAt(P+500,k,L,[0,0,1]),v._active.flush(P)}return v.getMode()},enumerable:!0},center:{get:function(){return v.computedCenter},set:function(h){return v.lookAt(v.lastT(),null,h),v.computedCenter},enumerable:!0},eye:{get:function(){return v.computedEye},set:function(h){return v.lookAt(v.lastT(),h),v.computedEye},enumerable:!0},up:{get:function(){return v.computedUp},set:function(h){return v.lookAt(v.lastT(),null,null,h),v.computedUp},enumerable:!0},distance:{get:function(){return m},set:function(h){return v.setDistance(v.lastT(),h),h},enumerable:!0},distanceLimits:{get:function(){return v.getDistanceLimits(b)},set:function(h){return v.setDistanceLimits(h),h},enumerable:!0}}),g.addEventListener("contextmenu",function(h){return h.preventDefault(),!1}),T._lastX=-1,T._lastY=-1,T._lastMods={shift:!1,control:!1,alt:!1,meta:!1},T.enableMouseListeners=function(){function h(E,k,L,P){var I=T.keyBindingMode;if(I!==!1){var z=I==="rotate",F=I==="pan",U=I==="zoom",R=!!P.control,j=!!P.alt,Z=!!P.shift,B=!!(1&E),q=!!(2&E),V=!!(4&E),ne=1/g.clientHeight,ee=ne*(k-T._lastX),$=ne*(L-T._lastY),J=T.flipX?1:-1,K=T.flipY?1:-1,te=Math.PI*T.rotateSpeed,ie=a();if(T._lastX!==-1&&T._lastY!==-1&&((z&&B&&!R&&!j&&!Z||B&&!R&&!j&&Z)&&v.rotate(ie,J*te*ee,-K*te*$,0),(F&&B&&!R&&!j&&!Z||q||B&&R&&!j&&!Z)&&v.pan(ie,-T.translateSpeed*ee*m,T.translateSpeed*$*m,0),U&&B&&!R&&!j&&!Z||V||B&&!R&&j&&!Z)){var ae=-T.zoomSpeed*$/window.innerHeight*(ie-v.lastT())*100;v.pan(ie,0,0,m*(Math.exp(ae)-1))}return T._lastX=k,T._lastY=L,T._lastMods=P,!0}}T.mouseListener=i(g,h),g.addEventListener("touchstart",function(E){var k=u(E.changedTouches[0],g);h(0,k[0],k[1],T._lastMods),h(1,k[0],k[1],T._lastMods)},!!c&&{passive:!0}),g.addEventListener("touchmove",function(E){var k=u(E.changedTouches[0],g);h(1,k[0],k[1],T._lastMods),E.preventDefault()},!!c&&{passive:!1}),g.addEventListener("touchend",function(E){h(0,T._lastX,T._lastY,T._lastMods)},!!c&&{passive:!0}),T.wheelListener=l(g,function(E,k){if(T.keyBindingMode!==!1&&T.enableWheel){var L=T.flipX?1:-1,P=T.flipY?1:-1,I=a();if(Math.abs(E)>Math.abs(k))v.rotate(I,0,0,-E*L*Math.PI*T.rotateSpeed/window.innerWidth);else if(!T._ortho){var z=-T.zoomSpeed*P*k/window.innerHeight*(I-v.lastT())/20;v.pan(I,0,0,m*(Math.exp(z)-1))}}},!0)},T.enableMouseListeners(),T};var a=n(8161),r=n(1152),i=n(6145),l=n(6475),u=n(2565),c=n(5233)},8245:function(p,s,n){var a=n(6832),r=n(5158),i=a([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),l=a([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);p.exports=function(u){return r(u,i,l,null,[{name:"position",type:"vec2"}])}},1059:function(p,s,n){var a=n(4296),r=n(7453),i=n(2771),l=n(6496),u=n(2611),c=n(4234),g=n(8126),f=n(6145),b=n(1120),v=n(5268),d=n(8245),m=n(2321)({tablet:!0,featureDetect:!0});function x(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function y(h){var E=Math.round(Math.log(Math.abs(h))/Math.log(10));if(E<0){var k=Math.round(Math.pow(10,-E));return Math.ceil(h*k)/k}return E>0?(k=Math.round(Math.pow(10,E)),Math.ceil(h/k)*k):Math.ceil(h)}function T(h){return typeof h!="boolean"||h}p.exports={createScene:function(h){(h=h||{}).camera=h.camera||{};var E=h.canvas;E||(E=document.createElement("canvas"),h.container?h.container.appendChild(E):document.body.appendChild(E));var k=h.gl;if(k||(h.glOptions&&(m=!!h.glOptions.preserveDrawingBuffer),k=function(Se,we){var _e=null;try{(_e=Se.getContext("webgl",we))||(_e=Se.getContext("experimental-webgl",we))}catch{return null}return _e}(E,h.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:m})),!k)throw new Error("webgl not supported");var L=h.bounds||[[-10,-10,-10],[10,10,10]],P=new x,I=c(k,k.drawingBufferWidth,k.drawingBufferHeight,{preferFloat:!m}),z=d(k),F=h.cameraObject&&h.cameraObject._ortho===!0||h.camera.projection&&h.camera.projection.type==="orthographic"||!1,U={eye:h.camera.eye||[2,0,0],center:h.camera.center||[0,0,0],up:h.camera.up||[0,1,0],zoomMin:h.camera.zoomMax||.1,zoomMax:h.camera.zoomMin||100,mode:h.camera.mode||"turntable",_ortho:F},R=h.axes||{},j=r(k,R);j.enable=!R.disable;var Z=h.spikes||{},B=l(k,Z),q=[],V=[],ne=[],ee=[],$=!0,J=!0,K={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},te=(J=!0,[k.drawingBufferWidth,k.drawingBufferHeight]),ie=h.cameraObject||a(E,U),ae={gl:k,contextLost:!1,pixelRatio:h.pixelRatio||1,canvas:E,selection:P,camera:ie,axes:j,axesPixels:null,spikes:B,bounds:L,objects:q,shape:te,aspect:h.aspectRatio||[1,1,1],pickRadius:h.pickRadius||10,zNear:h.zNear||.01,zFar:h.zFar||1e3,fovy:h.fovy||Math.PI/4,clearColor:h.clearColor||[0,0,0,0],autoResize:T(h.autoResize),autoBounds:T(h.autoBounds),autoScale:!!h.autoScale,autoCenter:T(h.autoCenter),clipToBounds:T(h.clipToBounds),snapToData:!!h.snapToData,onselect:h.onselect||null,onrender:h.onrender||null,onclick:h.onclick||null,cameraParams:K,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(Se){this.aspect[0]=Se.x,this.aspect[1]=Se.y,this.aspect[2]=Se.z,J=!0},setBounds:function(Se,we){this.bounds[0][Se]=we.min,this.bounds[1][Se]=we.max},setClearColor:function(Se){this.clearColor=Se},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},se=[k.drawingBufferWidth/ae.pixelRatio|0,k.drawingBufferHeight/ae.pixelRatio|0];function ce(){if(!ae._stopped&&ae.autoResize){var Se=E.parentNode,we=1,_e=1;Se&&Se!==document.body?(we=Se.clientWidth,_e=Se.clientHeight):(we=window.innerWidth,_e=window.innerHeight);var oe=0|Math.ceil(we*ae.pixelRatio),le=0|Math.ceil(_e*ae.pixelRatio);if(oe!==E.width||le!==E.height){E.width=oe,E.height=le;var pe=E.style;pe.position=pe.position||"absolute",pe.left="0px",pe.top="0px",pe.width=we+"px",pe.height=_e+"px",$=!0}}}function de(){for(var Se=q.length,we=ee.length,_e=0;_e<we;++_e)ne[_e]=0;e:for(_e=0;_e<Se;++_e){var oe=q[_e],le=oe.pickSlots;if(le){for(var pe=0;pe<we;++pe)if(ne[pe]+le<255){V[_e]=pe,oe.setPickBase(ne[pe]+1),ne[pe]+=le;continue e}var Ee=u(k,te);V[_e]=we,ee.push(Ee),ne.push(le),oe.setPickBase(1),we+=1}else V[_e]=-1}for(;we>0&&ne[we-1]===0;)ne.pop(),ee.pop().dispose()}function ge(){if(ae.contextLost)return!0;k.isContextLost()&&(ae.contextLost=!0,ae.mouseListener.enabled=!1,ae.selection.object=null,ae.oncontextloss&&ae.oncontextloss())}ae.autoResize&&ce(),window.addEventListener("resize",ce),ae.update=function(Se){ae._stopped||($=!0,J=!0)},ae.add=function(Se){ae._stopped||(Se.axes=j,q.push(Se),V.push(-1),$=!0,J=!0,de())},ae.remove=function(Se){if(!ae._stopped){var we=q.indexOf(Se);we<0||(q.splice(we,1),V.pop(),$=!0,J=!0,de())}},ae.dispose=function(){if(!ae._stopped&&(ae._stopped=!0,window.removeEventListener("resize",ce),E.removeEventListener("webglcontextlost",ge),ae.mouseListener.enabled=!1,!ae.contextLost)){j.dispose(),B.dispose();for(var Se=0;Se<q.length;++Se)q[Se].dispose();for(I.dispose(),Se=0;Se<ee.length;++Se)ee[Se].dispose();z.dispose(),k=null,j=null,B=null,q=[]}},ae._mouseRotating=!1,ae._prevButtons=0,ae.enableMouseListeners=function(){ae.mouseListener=f(E,function(Se,we,_e){if(!ae._stopped){var oe=ee.length,le=q.length,pe=P.object;P.distance=1/0,P.mouse[0]=we,P.mouse[1]=_e,P.object=null,P.screen=null,P.dataCoordinate=P.dataPosition=null;var Ee=!1;if(Se&&ae._prevButtons)ae._mouseRotating=!0;else{ae._mouseRotating&&(J=!0),ae._mouseRotating=!1;for(var Te=0;Te<oe;++Te){var Me=ee[Te].query(we,se[1]-_e-1,ae.pickRadius);if(Me){if(Me.distance>P.distance)continue;for(var Le=0;Le<le;++Le){var Ie=q[Le];if(V[Le]===Te){var he=Ie.pick(Me);he&&(P.buttons=Se,P.screen=Me.coord,P.distance=Me.distance,P.object=Ie,P.index=he.distance,P.dataPosition=he.position,P.dataCoordinate=he.dataCoordinate,P.data=he,Ee=!0)}}}}}pe&&pe!==P.object&&(pe.highlight&&pe.highlight(null),$=!0),P.object&&(P.object.highlight&&P.object.highlight(P.data),$=!0),(Ee=Ee||P.object!==pe)&&ae.onselect&&ae.onselect(P),1&Se&&!(1&ae._prevButtons)&&ae.onclick&&ae.onclick(P),ae._prevButtons=Se}})},E.addEventListener("webglcontextlost",ge);var ve=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],be=[ve[0].slice(),ve[1].slice()];function me(){if(!ge()){ce();var Se=ae.camera.tick();K.view=ae.camera.matrix,$=$||Se,J=J||Se,j.pixelRatio=ae.pixelRatio,B.pixelRatio=ae.pixelRatio;var we=q.length,_e=ve[0],oe=ve[1];_e[0]=_e[1]=_e[2]=1/0,oe[0]=oe[1]=oe[2]=-1/0;for(var le=0;le<we;++le){(Oe=q[le]).pixelRatio=ae.pixelRatio,Oe.axes=ae.axes,$=$||!!Oe.dirty,J=J||!!Oe.dirty;var pe=Oe.bounds;if(pe)for(var Ee=pe[0],Te=pe[1],Me=0;Me<3;++Me)_e[Me]=Math.min(_e[Me],Ee[Me]),oe[Me]=Math.max(oe[Me],Te[Me])}var Le=ae.bounds;if(ae.autoBounds)for(Me=0;Me<3;++Me){if(oe[Me]<_e[Me])_e[Me]=-1,oe[Me]=1;else{_e[Me]===oe[Me]&&(_e[Me]-=1,oe[Me]+=1);var Ie=.05*(oe[Me]-_e[Me]);_e[Me]=_e[Me]-Ie,oe[Me]=oe[Me]+Ie}Le[0][Me]=_e[Me],Le[1][Me]=oe[Me]}var he=!1;for(Me=0;Me<3;++Me)he=he||be[0][Me]!==Le[0][Me]||be[1][Me]!==Le[1][Me],be[0][Me]=Le[0][Me],be[1][Me]=Le[1][Me];if(J=J||he,$=$||he){if(he){var xe=[0,0,0];for(le=0;le<3;++le)xe[le]=y((Le[1][le]-Le[0][le])/10);j.autoTicks?j.update({bounds:Le,tickSpacing:xe}):j.update({bounds:Le})}var ke=k.drawingBufferWidth,ze=k.drawingBufferHeight;for(te[0]=ke,te[1]=ze,se[0]=0|Math.max(ke/ae.pixelRatio,1),se[1]=0|Math.max(ze/ae.pixelRatio,1),function(Ve,qe){var Je=Ve.bounds,ot=Ve.cameraParams,rt=ot.projection,dt=ot.model,_t=Ve.gl.drawingBufferWidth,yt=Ve.gl.drawingBufferHeight,et=Ve.zNear,nt=Ve.zFar,At=Ve.fovy,Rt=_t/yt;qe?(v(rt,-Rt,Rt,-1,1,et,nt),ot._ortho=!0):(b(rt,At,Rt,et,nt),ot._ortho=!1);for(var Ft=0;Ft<16;++Ft)dt[Ft]=0;dt[15]=1;var It=0;for(Ft=0;Ft<3;++Ft)It=Math.max(It,Je[1][Ft]-Je[0][Ft]);for(Ft=0;Ft<3;++Ft)Ve.autoScale?dt[5*Ft]=Ve.aspect[Ft]/(Je[1][Ft]-Je[0][Ft]):dt[5*Ft]=1/It,Ve.autoCenter&&(dt[12+Ft]=.5*-dt[5*Ft]*(Je[0][Ft]+Je[1][Ft]))}(ae,F),le=0;le<we;++le)(Oe=q[le]).axesBounds=Le,ae.clipToBounds&&(Oe.clipBounds=Le);P.object&&(ae.snapToData?B.position=P.dataCoordinate:B.position=P.dataPosition,B.bounds=Le),J&&(J=!1,function(){if(!ge()){k.colorMask(!0,!0,!0,!0),k.depthMask(!0),k.disable(k.BLEND),k.enable(k.DEPTH_TEST),k.depthFunc(k.LEQUAL);for(var Ve=q.length,qe=ee.length,Je=0;Je<qe;++Je){var ot=ee[Je];ot.shape=se,ot.begin();for(var rt=0;rt<Ve;++rt)if(V[rt]===Je){var dt=q[rt];dt.drawPick&&(dt.pixelRatio=1,dt.drawPick(K))}ot.end()}}}()),ae.axesPixels=i(ae.axes,K,ke,ze),ae.onrender&&ae.onrender(),k.bindFramebuffer(k.FRAMEBUFFER,null),k.viewport(0,0,ke,ze),ae.clearRGBA(),k.depthMask(!0),k.colorMask(!0,!0,!0,!0),k.enable(k.DEPTH_TEST),k.depthFunc(k.LEQUAL),k.disable(k.BLEND),k.disable(k.CULL_FACE);var Re=!1;for(j.enable&&(Re=Re||j.isTransparent(),j.draw(K)),B.axes=j,P.object&&B.draw(K),k.disable(k.CULL_FACE),le=0;le<we;++le)(Oe=q[le]).axes=j,Oe.pixelRatio=ae.pixelRatio,Oe.isOpaque&&Oe.isOpaque()&&Oe.draw(K),Oe.isTransparent&&Oe.isTransparent()&&(Re=!0);if(Re){for(I.shape=te,I.bind(),k.clear(k.DEPTH_BUFFER_BIT),k.colorMask(!1,!1,!1,!1),k.depthMask(!0),k.depthFunc(k.LESS),j.enable&&j.isTransparent()&&j.drawTransparent(K),le=0;le<we;++le)(Oe=q[le]).isOpaque&&Oe.isOpaque()&&Oe.draw(K);for(k.enable(k.BLEND),k.blendEquation(k.FUNC_ADD),k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA),k.colorMask(!0,!0,!0,!0),k.depthMask(!1),k.clearColor(0,0,0,0),k.clear(k.COLOR_BUFFER_BIT),j.isTransparent()&&j.drawTransparent(K),le=0;le<we;++le){var Oe;(Oe=q[le]).isTransparent&&Oe.isTransparent()&&Oe.drawTransparent(K)}k.bindFramebuffer(k.FRAMEBUFFER,null),k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA),k.disable(k.DEPTH_TEST),z.bind(),I.color[0].bind(0),z.uniforms.accumBuffer=0,g(k),k.disable(k.BLEND)}for($=!1,le=0;le<we;++le)q[le].dirty=!1}}}return ae.enableMouseListeners(),function Se(){ae._stopped||ae.contextLost||(me(),requestAnimationFrame(Se))}(),ae.redraw=function(){ae._stopped||($=!0,me())},ae},createCamera:a}},8023:function(p,s,n){var a=n(6832);s.pointVertex=a([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),s.pointFragment=a([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),s.pickVertex=a([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),s.pickFragment=a([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},8271:function(p,s,n){var a=n(5158),r=n(5827),i=n(5306),l=n(8023);function u(b,v,d,m,x){this.plot=b,this.offsetBuffer=v,this.pickBuffer=d,this.shader=m,this.pickShader=x,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}p.exports=function(b,v){var d=b.gl,m=new u(b,r(d),r(d),a(d,l.pointVertex,l.pointFragment),a(d,l.pickVertex,l.pickFragment));return m.update(v),b.addObject(m),m};var c,g,f=u.prototype;f.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},f.update=function(b){var v;function d(k,L){return k in b?b[k]:L}b=b||{},this.sizeMin=d("sizeMin",.5),this.sizeMax=d("sizeMax",20),this.color=d("color",[1,0,0,1]).slice(),this.areaRatio=d("areaRatio",1),this.borderColor=d("borderColor",[0,0,0,1]).slice(),this.blend=d("blend",!1);var m=b.positions.length>>>1,x=b.positions instanceof Float32Array,y=b.idToIndex instanceof Int32Array&&b.idToIndex.length>=m,T=b.positions,h=x?T:i.mallocFloat32(T.length),E=y?b.idToIndex:i.mallocInt32(m);if(x||h.set(T),!y)for(h.set(T),v=0;v<m;v++)E[v]=v;this.points=T,this.offsetBuffer.update(h),this.pickBuffer.update(E),x||i.free(h),y||i.free(E),this.pointCount=m,this.pickOffset=0},f.unifiedDraw=(c=[1,0,0,0,1,0,0,0,1],g=[0,0,0,0],function(b){var v=b!==void 0,d=v?this.pickShader:this.shader,m=this.plot.gl,x=this.plot.dataBox;if(this.pointCount===0)return b;var y=x[2]-x[0],T=x[3]-x[1],h=function(P,I){var z,F=0,U=P.length>>>1;for(z=0;z<U;z++){var R=P[2*z],j=P[2*z+1];R>=I[0]&&R<=I[2]&&j>=I[1]&&j<=I[3]&&F++}return F}(this.points,x),E=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(h,.33333)));c[0]=2/y,c[4]=2/T,c[6]=-2*x[0]/y-1,c[7]=-2*x[1]/T-1,this.offsetBuffer.bind(),d.bind(),d.attributes.position.pointer(),d.uniforms.matrix=c,d.uniforms.color=this.color,d.uniforms.borderColor=this.borderColor,d.uniforms.pointCloud=E<5,d.uniforms.pointSize=E,d.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),v&&(g[0]=255&b,g[1]=b>>8&255,g[2]=b>>16&255,g[3]=b>>24&255,this.pickBuffer.bind(),d.attributes.pickId.pointer(m.UNSIGNED_BYTE),d.uniforms.pickOffset=g,this.pickOffset=b);var k=m.getParameter(m.BLEND),L=m.getParameter(m.DITHER);return k&&!this.blend&&m.disable(m.BLEND),L&&m.disable(m.DITHER),m.drawArrays(m.POINTS,0,this.pointCount),k&&!this.blend&&m.enable(m.BLEND),L&&m.enable(m.DITHER),b+this.pointCount}),f.draw=f.unifiedDraw,f.drawPick=f.unifiedDraw,f.pick=function(b,v,d){var m=this.pickOffset,x=this.pointCount;if(d<m||d>=m+x)return null;var y=d-m,T=this.points;return{object:this,pointId:y,dataCoord:[T[2*y],T[2*y+1]]}}},6093:function(p){p.exports=function(s,n,a,r){var i,l,u,c,g,f=n[0],b=n[1],v=n[2],d=n[3],m=a[0],x=a[1],y=a[2],T=a[3];return(l=f*m+b*x+v*y+d*T)<0&&(l=-l,m=-m,x=-x,y=-y,T=-T),1-l>1e-6?(i=Math.acos(l),u=Math.sin(i),c=Math.sin((1-r)*i)/u,g=Math.sin(r*i)/u):(c=1-r,g=r),s[0]=c*f+g*m,s[1]=c*b+g*x,s[2]=c*v+g*y,s[3]=c*d+g*T,s}},8240:function(p){p.exports=function(s){return s||s===0?s.toString():""}},4123:function(p,s,n){var a=n(875);p.exports=function(i,l,u){var c=r[l];if(c||(c=r[l]={}),i in c)return c[i];var g={textAlign:"center",textBaseline:"middle",lineHeight:1,font:l,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},f=a(i,g);g.triangles=!1;var b,v,d=a(i,g);if(u&&u!==1){for(b=0;b<f.positions.length;++b)for(v=0;v<f.positions[b].length;++v)f.positions[b][v]/=u;for(b=0;b<d.positions.length;++b)for(v=0;v<d.positions[b].length;++v)d.positions[b][v]/=u}var m=[[1/0,1/0],[-1/0,-1/0]],x=d.positions.length;for(b=0;b<x;++b){var y=d.positions[b];for(v=0;v<2;++v)m[0][v]=Math.min(m[0][v],y[v]),m[1][v]=Math.max(m[1][v],y[v])}return c[i]=[f,d,m]};var r={}},9282:function(p,s,n){var a=n(5158),r=n(6832),i=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),l=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),u=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),c=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),g=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),f=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],b={vertex:i,fragment:c,attributes:f},v={vertex:l,fragment:c,attributes:f},d={vertex:u,fragment:c,attributes:f},m={vertex:i,fragment:g,attributes:f},x={vertex:l,fragment:g,attributes:f},y={vertex:u,fragment:g,attributes:f};function T(h,E){var k=a(h,E),L=k.attributes;return L.position.location=0,L.color.location=1,L.glyph.location=2,L.id.location=3,k}s.createPerspective=function(h){return T(h,b)},s.createOrtho=function(h){return T(h,v)},s.createProject=function(h){return T(h,d)},s.createPickPerspective=function(h){return T(h,m)},s.createPickOrtho=function(h){return T(h,x)},s.createPickProject=function(h){return T(h,y)}},2182:function(p,s,n){var a=n(3596),r=n(5827),i=n(2944),l=n(5306),u=n(104),c=n(9282),g=n(4123),f=n(8240),b=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function v(V,ne){var ee=V[0],$=V[1],J=V[2],K=V[3];return V[0]=ne[0]*ee+ne[4]*$+ne[8]*J+ne[12]*K,V[1]=ne[1]*ee+ne[5]*$+ne[9]*J+ne[13]*K,V[2]=ne[2]*ee+ne[6]*$+ne[10]*J+ne[14]*K,V[3]=ne[3]*ee+ne[7]*$+ne[11]*J+ne[15]*K,V}function d(V,ne,ee,$){return v($,$),v($,$),v($,$)}function m(V,ne){this.index=V,this.dataCoordinate=this.position=ne}function x(V){return V===!0||V>1?1:V}function y(V,ne,ee,$,J,K,te,ie,ae,se,ce,de){this.gl=V,this.pixelRatio=1,this.shader=ne,this.orthoShader=ee,this.projectShader=$,this.pointBuffer=J,this.colorBuffer=K,this.glyphBuffer=te,this.idBuffer=ie,this.vao=ae,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=se,this.pickOrthoShader=ce,this.pickProjectShader=de,this.points=[],this._selectResult=new m(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}p.exports=function(V){var ne=V.gl,ee=c.createPerspective(ne),$=c.createOrtho(ne),J=c.createProject(ne),K=c.createPickPerspective(ne),te=c.createPickOrtho(ne),ie=c.createPickProject(ne),ae=r(ne),se=r(ne),ce=r(ne),de=r(ne),ge=new y(ne,ee,$,J,ae,se,ce,de,i(ne,[{buffer:ae,size:3,type:ne.FLOAT},{buffer:se,size:4,type:ne.FLOAT},{buffer:ce,size:2,type:ne.FLOAT},{buffer:de,size:4,type:ne.UNSIGNED_BYTE,normalized:!0}]),K,te,ie);return ge.update(V),ge};var T=y.prototype;T.pickSlots=1,T.setPickBase=function(V){this.pickId=V},T.isTransparent=function(){if(this.hasAlpha)return!0;for(var V=0;V<3;++V)if(this.axesProject[V]&&this.projectHasAlpha)return!0;return!1},T.isOpaque=function(){if(!this.hasAlpha)return!0;for(var V=0;V<3;++V)if(this.axesProject[V]&&!this.projectHasAlpha)return!0;return!1};var h=[0,0],E=[0,0,0],k=[0,0,0],L=[0,0,0,1],P=[0,0,0,1],I=b.slice(),z=[0,0,0],F=[[0,0,0],[0,0,0]];function U(V){return V[0]=V[1]=V[2]=0,V}function R(V,ne){return V[0]=ne[0],V[1]=ne[1],V[2]=ne[2],V[3]=1,V}function j(V,ne,ee,$){return V[0]=ne[0],V[1]=ne[1],V[2]=ne[2],V[ee]=$,V}var Z=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function B(V,ne,ee,$,J,K,te){var ie=ee.gl;if((K===ee.projectHasAlpha||te)&&function(se,ce,de,ge){var ve,be=ce.axesProject,me=ce.gl,Se=se.uniforms,we=de.model||b,_e=de.view||b,oe=de.projection||b,le=ce.axesBounds,pe=function(Je){for(var ot=F,rt=0;rt<2;++rt)for(var dt=0;dt<3;++dt)ot[rt][dt]=Math.max(Math.min(Je[rt][dt],1e8),-1e8);return ot}(ce.clipBounds);ve=ce.axes&&ce.axes.lastCubeProps?ce.axes.lastCubeProps.axis:[1,1,1],h[0]=2/me.drawingBufferWidth,h[1]=2/me.drawingBufferHeight,se.bind(),Se.view=_e,Se.projection=oe,Se.screenSize=h,Se.highlightId=ce.highlightId,Se.highlightScale=ce.highlightScale,Se.clipBounds=pe,Se.pickGroup=ce.pickId/255,Se.pixelRatio=ge;for(var Ee=0;Ee<3;++Ee)if(be[Ee]){Se.scale=ce.projectScale[Ee],Se.opacity=ce.projectOpacity[Ee];for(var Te=I,Me=0;Me<16;++Me)Te[Me]=0;for(Me=0;Me<4;++Me)Te[5*Me]=1;Te[5*Ee]=0,ve[Ee]<0?Te[12+Ee]=le[0][Ee]:Te[12+Ee]=le[1][Ee],u(Te,we,Te),Se.model=Te;var Le=(Ee+1)%3,Ie=(Ee+2)%3,he=U(E),xe=U(k);he[Le]=1,xe[Ie]=1;var ke=d(0,0,0,R(L,he)),ze=d(0,0,0,R(P,xe));if(Math.abs(ke[1])>Math.abs(ze[1])){var Re=ke;ke=ze,ze=Re,Re=he,he=xe,xe=Re;var Oe=Le;Le=Ie,Ie=Oe}ke[0]<0&&(he[Le]=-1),ze[1]>0&&(xe[Ie]=-1);var Ve=0,qe=0;for(Me=0;Me<4;++Me)Ve+=Math.pow(we[4*Le+Me],2),qe+=Math.pow(we[4*Ie+Me],2);he[Le]/=Math.sqrt(Ve),xe[Ie]/=Math.sqrt(qe),Se.axes[0]=he,Se.axes[1]=xe,Se.fragClipBounds[0]=j(z,pe[0],Ee,-1e8),Se.fragClipBounds[1]=j(z,pe[1],Ee,1e8),ce.vao.bind(),ce.vao.draw(me.TRIANGLES,ce.vertexCount),ce.lineWidth>0&&(me.lineWidth(ce.lineWidth*ge),ce.vao.draw(me.LINES,ce.lineVertexCount,ce.vertexCount)),ce.vao.unbind()}}(ne,ee,$,J),K===ee.hasAlpha||te){V.bind();var ae=V.uniforms;ae.model=$.model||b,ae.view=$.view||b,ae.projection=$.projection||b,h[0]=2/ie.drawingBufferWidth,h[1]=2/ie.drawingBufferHeight,ae.screenSize=h,ae.highlightId=ee.highlightId,ae.highlightScale=ee.highlightScale,ae.fragClipBounds=Z,ae.clipBounds=ee.axes.bounds,ae.opacity=ee.opacity,ae.pickGroup=ee.pickId/255,ae.pixelRatio=J,ee.vao.bind(),ee.vao.draw(ie.TRIANGLES,ee.vertexCount),ee.lineWidth>0&&(ie.lineWidth(ee.lineWidth*J),ee.vao.draw(ie.LINES,ee.lineVertexCount,ee.vertexCount)),ee.vao.unbind()}}function q(V,ne,ee,$){var J;J=Array.isArray(V)?ne<V.length?V[ne]:void 0:V,J=f(J);var K=!0;a(J)&&(J="",K=!1);var te=g(J,ee,$);return{mesh:te[0],lines:te[1],bounds:te[2],visible:K}}T.draw=function(V){B(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,V,this.pixelRatio,!1,!1)},T.drawTransparent=function(V){B(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,V,this.pixelRatio,!0,!1)},T.drawPick=function(V){B(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,V,1,!0,!0)},T.pick=function(V){if(!V||V.id!==this.pickId)return null;var ne=V.value[2]+(V.value[1]<<8)+(V.value[0]<<16);if(ne>=this.pointCount||ne<0)return null;var ee=this.points[ne],$=this._selectResult;$.index=ne;for(var J=0;J<3;++J)$.position[J]=$.dataCoordinate[J]=ee[J];return $},T.highlight=function(V){if(V){var ne=V.index,ee=255&ne,$=ne>>8&255,J=ne>>16&255;this.highlightId=[ee/255,$/255,J/255,0]}else this.highlightId=[1,1,1,1]},T.update=function(V){if("perspective"in(V=V||{})&&(this.useOrtho=!V.perspective),"orthographic"in V&&(this.useOrtho=!!V.orthographic),"lineWidth"in V&&(this.lineWidth=V.lineWidth),"project"in V)if(Array.isArray(V.project))this.axesProject=V.project;else{var ne=!!V.project;this.axesProject=[ne,ne,ne]}if("projectScale"in V)if(Array.isArray(V.projectScale))this.projectScale=V.projectScale.slice();else{var ee=+V.projectScale;this.projectScale=[ee,ee,ee]}if(this.projectHasAlpha=!1,"projectOpacity"in V){Array.isArray(V.projectOpacity)?this.projectOpacity=V.projectOpacity.slice():(ee=+V.projectOpacity,this.projectOpacity=[ee,ee,ee]);for(var $=0;$<3;++$)this.projectOpacity[$]=x(this.projectOpacity[$]),this.projectOpacity[$]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in V&&(this.opacity=x(V.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var J,K,te=V.position,ie=V.font||"normal",ae=V.alignment||[0,0];if(ae.length===2)J=ae[0],K=ae[1];else for(J=[],K=[],$=0;$<ae.length;++$)J[$]=ae[$][0],K[$]=ae[$][1];var se=[1/0,1/0,1/0],ce=[-1/0,-1/0,-1/0],de=V.glyph,ge=V.color,ve=V.size,be=V.angle,me=V.lineColor,Se=-1,we=0,_e=0,oe=0;if(te.length){oe=te.length;e:for($=0;$<oe;++$){for(var le=te[$],pe=0;pe<3;++pe)if(isNaN(le[pe])||!isFinite(le[pe]))continue e;var Ee=(ot=q(de,$,ie,this.pixelRatio)).mesh,Te=ot.lines,Me=ot.bounds;we+=3*Ee.cells.length,_e+=2*Te.edges.length}}var Le=we+_e,Ie=l.mallocFloat(3*Le),he=l.mallocFloat(4*Le),xe=l.mallocFloat(2*Le),ke=l.mallocUint32(Le);if(Le>0){var ze=0,Re=we,Oe=[0,0,0,1],Ve=[0,0,0,1],qe=Array.isArray(ge)&&Array.isArray(ge[0]),Je=Array.isArray(me)&&Array.isArray(me[0]);e:for($=0;$<oe;++$){for(Se+=1,le=te[$],pe=0;pe<3;++pe){if(isNaN(le[pe])||!isFinite(le[pe]))continue e;ce[pe]=Math.max(ce[pe],le[pe]),se[pe]=Math.min(se[pe],le[pe])}Ee=(ot=q(de,$,ie,this.pixelRatio)).mesh,Te=ot.lines,Me=ot.bounds;var ot,rt=ot.visible;if(rt)if(Array.isArray(ge)){if((dt=qe?$<ge.length?ge[$]:[0,0,0,0]:ge).length===3){for(pe=0;pe<3;++pe)Oe[pe]=dt[pe];Oe[3]=1}else if(dt.length===4){for(pe=0;pe<4;++pe)Oe[pe]=dt[pe];!this.hasAlpha&&dt[3]<1&&(this.hasAlpha=!0)}}else Oe[0]=Oe[1]=Oe[2]=0,Oe[3]=1;else Oe=[1,1,1,0];if(rt)if(Array.isArray(me)){var dt;if((dt=Je?$<me.length?me[$]:[0,0,0,0]:me).length===3){for(pe=0;pe<3;++pe)Ve[pe]=dt[pe];Ve[pe]=1}else if(dt.length===4){for(pe=0;pe<4;++pe)Ve[pe]=dt[pe];!this.hasAlpha&&dt[3]<1&&(this.hasAlpha=!0)}}else Ve[0]=Ve[1]=Ve[2]=0,Ve[3]=1;else Ve=[1,1,1,0];var _t=.5;rt?Array.isArray(ve)?_t=$<ve.length?+ve[$]:12:ve?_t=+ve:this.useOrtho&&(_t=12):_t=0;var yt=0;Array.isArray(be)?yt=$<be.length?+be[$]:0:be&&(yt=+be);var et=Math.cos(yt),nt=Math.sin(yt);for(le=te[$],pe=0;pe<3;++pe)ce[pe]=Math.max(ce[pe],le[pe]),se[pe]=Math.min(se[pe],le[pe]);var At=J,Rt=K;At=0,Array.isArray(J)?At=$<J.length?J[$]:0:J&&(At=J),Rt=0,Array.isArray(K)?Rt=$<K.length?K[$]:0:K&&(Rt=K);var Ft=[At*=At>0?1-Me[0][0]:At<0?1+Me[1][0]:1,Rt*=Rt>0?1-Me[0][1]:Rt<0?1+Me[1][1]:1],It=Ee.cells||[],Ge=Ee.positions||[];for(pe=0;pe<It.length;++pe)for(var Ye=It[pe],Ne=0;Ne<3;++Ne){for(var We=0;We<3;++We)Ie[3*ze+We]=le[We];for(We=0;We<4;++We)he[4*ze+We]=Oe[We];ke[ze]=Se;var st=Ge[Ye[Ne]];xe[2*ze]=_t*(et*st[0]-nt*st[1]+Ft[0]),xe[2*ze+1]=_t*(nt*st[0]+et*st[1]+Ft[1]),ze+=1}for(It=Te.edges,Ge=Te.positions,pe=0;pe<It.length;++pe)for(Ye=It[pe],Ne=0;Ne<2;++Ne){for(We=0;We<3;++We)Ie[3*Re+We]=le[We];for(We=0;We<4;++We)he[4*Re+We]=Ve[We];ke[Re]=Se,st=Ge[Ye[Ne]],xe[2*Re]=_t*(et*st[0]-nt*st[1]+Ft[0]),xe[2*Re+1]=_t*(nt*st[0]+et*st[1]+Ft[1]),Re+=1}}}this.bounds=[se,ce],this.points=te,this.pointCount=te.length,this.vertexCount=we,this.lineVertexCount=_e,this.pointBuffer.update(Ie),this.colorBuffer.update(he),this.glyphBuffer.update(xe),this.idBuffer.update(ke),l.free(Ie),l.free(he),l.free(xe),l.free(ke)},T.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},1884:function(p,s,n){var a=n(6832);s.boxVertex=a([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),s.boxFragment=a([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},6623:function(p,s,n){var a=n(5158),r=n(5827),i=n(1884);function l(c,g,f){this.plot=c,this.boxBuffer=g,this.boxShader=f,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}p.exports=function(c,g){var f=c.gl,b=new l(c,r(f,[0,0,0,1,1,0,1,1]),a(f,i.boxVertex,i.boxFragment));return b.update(g),c.addOverlay(b),b};var u=l.prototype;u.draw=function(){if(this.enabled){var c=this.plot,g=this.selectBox,f=this.borderWidth,b=(this.innerFill,this.innerColor),v=(this.outerFill,this.outerColor),d=this.borderColor,m=c.box,x=c.screenBox,y=c.dataBox,T=c.viewBox,h=c.pixelRatio,E=(g[0]-y[0])*(T[2]-T[0])/(y[2]-y[0])+T[0],k=(g[1]-y[1])*(T[3]-T[1])/(y[3]-y[1])+T[1],L=(g[2]-y[0])*(T[2]-T[0])/(y[2]-y[0])+T[0],P=(g[3]-y[1])*(T[3]-T[1])/(y[3]-y[1])+T[1];if(E=Math.max(E,T[0]),k=Math.max(k,T[1]),L=Math.min(L,T[2]),P=Math.min(P,T[3]),!(L<E||P<k)){m.bind();var I=x[2]-x[0],z=x[3]-x[1];if(this.outerFill&&(m.drawBox(0,0,I,k,v),m.drawBox(0,k,E,P,v),m.drawBox(0,P,I,z,v),m.drawBox(L,k,I,P,v)),this.innerFill&&m.drawBox(E,k,L,P,b),f>0){var F=f*h;m.drawBox(E-F,k-F,L+F,k+F,d),m.drawBox(E-F,P-F,L+F,P+F,d),m.drawBox(E-F,k-F,E+F,P+F,d),m.drawBox(L-F,k-F,L+F,P+F,d)}}}},u.update=function(c){c=c||{},this.innerFill=!!c.innerFill,this.outerFill=!!c.outerFill,this.innerColor=(c.innerColor||[0,0,0,.5]).slice(),this.outerColor=(c.outerColor||[0,0,0,.5]).slice(),this.borderColor=(c.borderColor||[0,0,0,1]).slice(),this.borderWidth=c.borderWidth||0,this.selectBox=(c.selectBox||this.selectBox).slice()},u.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},2611:function(p,s,n){p.exports=function(f,b){var v=b[0],d=b[1];return new c(f,a(f,v,d,{}),r.mallocUint8(v*d*4))};var a=n(4234),r=n(5306),i=n(5050),l=n(2288).nextPow2;function u(f,b,v,d,m){this.coord=[f,b],this.id=v,this.value=d,this.distance=m}function c(f,b,v){this.gl=f,this.fbo=b,this.buffer=v,this._readTimeout=null;var d=this;this._readCallback=function(){d.gl&&(b.bind(),f.readPixels(0,0,b.shape[0],b.shape[1],f.RGBA,f.UNSIGNED_BYTE,d.buffer),d._readTimeout=null)}}var g=c.prototype;Object.defineProperty(g,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(f){if(this.gl){this.fbo.shape=f;var b=this.fbo.shape[0],v=this.fbo.shape[1];if(v*b*4>this.buffer.length){r.free(this.buffer);for(var d=this.buffer=r.mallocUint8(l(v*b*4)),m=0;m<v*b*4;++m)d[m]=255}return f}}}),g.begin=function(){var f=this.gl;this.shape,f&&(this.fbo.bind(),f.clearColor(1,1,1,1),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT))},g.end=function(){var f=this.gl;f&&(f.bindFramebuffer(f.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},g.query=function(f,b,v){if(!this.gl)return null;var d=this.fbo.shape.slice();f|=0,b|=0,typeof v!="number"&&(v=1);var m=0|Math.min(Math.max(f-v,0),d[0]),x=0|Math.min(Math.max(f+v,0),d[0]),y=0|Math.min(Math.max(b-v,0),d[1]),T=0|Math.min(Math.max(b+v,0),d[1]);if(x<=m||T<=y)return null;var h=[x-m,T-y],E=i(this.buffer,[h[0],h[1],4],[4,4*d[0],1],4*(m+d[0]*y)),k=function(I,z,F){for(var U=1e8,R=-1,j=-1,Z=I.shape[0],B=I.shape[1],q=0;q<Z;q++)for(var V=0;V<B;V++){var ne=I.get(q,V,0),ee=I.get(q,V,1),$=I.get(q,V,2),J=I.get(q,V,3);if(ne<255||ee<255||$<255||J<255){var K=z-q,te=F-V,ie=K*K+te*te;ie<U&&(U=ie,R=q,j=V)}}return[R,j,U]}(E.hi(h[0],h[1],1),v,v),L=k[0],P=k[1];return L<0||Math.pow(this.radius,2)<k[2]?null:new u(L+m|0,P+y|0,E.get(L,P,0),[E.get(L,P,1),E.get(L,P,2),E.get(L,P,3)],Math.sqrt(k[2]))},g.dispose=function(){this.gl&&(this.fbo.dispose(),r.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},5158:function(p,s,n){var a=n(9016),r=n(4280),i=n(3984),l=n(1628),u=n(2631),c=n(9068);function g(v){this.gl=v,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var f=g.prototype;function b(v,d){return v.name<d.name?-1:1}f.bind=function(){var v;this.program||this._relink();var d=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),m=this.gl.lastAttribCount;if(d>m)for(v=m;v<d;v++)this.gl.enableVertexAttribArray(v);else if(m>d)for(v=d;v<m;v++)this.gl.disableVertexAttribArray(v);this.gl.lastAttribCount=d,this.gl.useProgram(this.program)},f.dispose=function(){for(var v=this.gl.lastAttribCount,d=0;d<v;d++)this.gl.disableVertexAttribArray(d);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},f.update=function(v,d,m,x){if(!d||arguments.length===1){var y=v;v=y.vertex,d=y.fragment,m=y.uniforms,x=y.attributes}var T=this,h=T.gl,E=T._vref;T._vref=l.shader(h,h.VERTEX_SHADER,v),E&&E.dispose(),T.vertShader=T._vref.shader;var k=this._fref;if(T._fref=l.shader(h,h.FRAGMENT_SHADER,d),k&&k.dispose(),T.fragShader=T._fref.shader,!m||!x){var L=h.createProgram();if(h.attachShader(L,T.fragShader),h.attachShader(L,T.vertShader),h.linkProgram(L),!h.getProgramParameter(L,h.LINK_STATUS)){var P=h.getProgramInfoLog(L);throw new c(P,"Error linking program:"+P)}m=m||u.uniforms(h,L),x=x||u.attributes(h,L),h.deleteProgram(L)}(x=x.slice()).sort(b);var I,z=[],F=[],U=[];for(I=0;I<x.length;++I){var R=x[I];if(R.type.indexOf("mat")>=0){for(var j=0|R.type.charAt(R.type.length-1),Z=new Array(j),B=0;B<j;++B)Z[B]=U.length,F.push(R.name+"["+B+"]"),typeof R.location=="number"?U.push(R.location+B):Array.isArray(R.location)&&R.location.length===j&&typeof R.location[B]=="number"?U.push(0|R.location[B]):U.push(-1);z.push({name:R.name,type:R.type,locations:Z})}else z.push({name:R.name,type:R.type,locations:[U.length]}),F.push(R.name),typeof R.location=="number"?U.push(0|R.location):U.push(-1)}var q=0;for(I=0;I<U.length;++I)if(U[I]<0){for(;U.indexOf(q)>=0;)q+=1;U[I]=q}var V=new Array(m.length);function ne(){T.program=l.program(h,T._vref,T._fref,F,U);for(var ee=0;ee<m.length;++ee)V[ee]=h.getUniformLocation(T.program,m[ee].name)}ne(),T._relink=ne,T.types={uniforms:i(m),attributes:i(x)},T.attributes=r(h,T,z,U),Object.defineProperty(T,"uniforms",a(h,T,m,V))},p.exports=function(v,d,m,x,y){var T=new g(v);return T.update(d,m,x,y),T}},9068:function(p){function s(n,a,r){this.shortMessage=a||"",this.longMessage=r||"",this.rawError=n||"",this.message="gl-shader: "+(a||n||"")+(r?`
`+r:""),this.stack=new Error().stack}s.prototype=new Error,s.prototype.name="GLError",s.prototype.constructor=s,p.exports=s},4280:function(p,s,n){p.exports=function(g,f,b,v){for(var d={},m=0,x=b.length;m<x;++m){var y=b[m],T=y.name,h=y.type,E=y.locations;switch(h){case"bool":case"int":case"float":u(g,f,E[0],v,1,d,T);break;default:if(h.indexOf("vec")>=0){if((k=h.charCodeAt(h.length-1)-48)<2||k>4)throw new a("","Invalid data type for attribute "+T+": "+h);u(g,f,E[0],v,k,d,T)}else{if(!(h.indexOf("mat")>=0))throw new a("","Unknown data type for attribute "+T+": "+h);var k;if((k=h.charCodeAt(h.length-1)-48)<2||k>4)throw new a("","Invalid data type for attribute "+T+": "+h);c(g,f,E,v,k,d,T)}}}return d};var a=n(9068);function r(g,f,b,v,d,m){this._gl=g,this._wrapper=f,this._index=b,this._locations=v,this._dimension=d,this._constFunc=m}var i=r.prototype;i.pointer=function(g,f,b,v){var d=this,m=d._gl,x=d._locations[d._index];m.vertexAttribPointer(x,d._dimension,g||m.FLOAT,!!f,b||0,v||0),m.enableVertexAttribArray(x)},i.set=function(g,f,b,v){return this._constFunc(this._locations[this._index],g,f,b,v)},Object.defineProperty(i,"location",{get:function(){return this._locations[this._index]},set:function(g){return g!==this._locations[this._index]&&(this._locations[this._index]=0|g,this._wrapper.program=null),0|g}});var l=[function(g,f,b){return b.length===void 0?g.vertexAttrib1f(f,b):g.vertexAttrib1fv(f,b)},function(g,f,b,v){return b.length===void 0?g.vertexAttrib2f(f,b,v):g.vertexAttrib2fv(f,b)},function(g,f,b,v,d){return b.length===void 0?g.vertexAttrib3f(f,b,v,d):g.vertexAttrib3fv(f,b)},function(g,f,b,v,d,m){return b.length===void 0?g.vertexAttrib4f(f,b,v,d,m):g.vertexAttrib4fv(f,b)}];function u(g,f,b,v,d,m,x){var y=l[d],T=new r(g,f,b,v,d,y);Object.defineProperty(m,x,{set:function(h){return g.disableVertexAttribArray(v[b]),y(g,v[b],h),h},get:function(){return T},enumerable:!0})}function c(g,f,b,v,d,m,x){for(var y=new Array(d),T=new Array(d),h=0;h<d;++h)u(g,f,b[h],v,d,y,h),T[h]=y[h];Object.defineProperty(y,"location",{set:function(L){if(Array.isArray(L))for(var P=0;P<d;++P)T[P].location=L[P];else for(P=0;P<d;++P)T[P].location=L+P;return L},get:function(){for(var L=new Array(d),P=0;P<d;++P)L[P]=v[b[P]];return L},enumerable:!0}),y.pointer=function(L,P,I,z){L=L||g.FLOAT,P=!!P,I=I||d*d,z=z||0;for(var F=0;F<d;++F){var U=v[b[F]];g.vertexAttribPointer(U,d,L,P,I,z+F*d),g.enableVertexAttribArray(U)}};var E=new Array(d),k=g["vertexAttrib"+d+"fv"];Object.defineProperty(m,x,{set:function(L){for(var P=0;P<d;++P){var I=v[b[P]];if(g.disableVertexAttribArray(I),Array.isArray(L[0]))k.call(g,I,L[P]);else{for(var z=0;z<d;++z)E[z]=L[d*P+z];k.call(g,I,E)}}return L},get:function(){return y},enumerable:!0})}},9016:function(p,s,n){var a=n(3984),r=n(9068);function i(u){return function(){return u}}function l(u,c){for(var g=new Array(u),f=0;f<u;++f)g[f]=c;return g}p.exports=function(u,c,g,f){function b(y){return function(T){for(var h=v("",y),E=0;E<h.length;++E){var k=h[E],L=k[0],P=k[1];if(f[P]){var I=T;if(typeof L=="string"&&(L.indexOf(".")===0||L.indexOf("[")===0)){var z=L;if(L.indexOf(".")===0&&(z=L.slice(1)),z.indexOf("]")===z.length-1){var F=z.indexOf("["),U=z.slice(0,F),R=z.slice(F+1,z.length-1);I=U?T[U][R]:T[R]}else I=T[z]}var j,Z=g[P].type;switch(Z){case"bool":case"int":case"sampler2D":case"samplerCube":u.uniform1i(f[P],I);break;case"float":u.uniform1f(f[P],I);break;default:var B=Z.indexOf("vec");if(!(0<=B&&B<=1&&Z.length===4+B)){if(Z.indexOf("mat")===0&&Z.length===4){if((j=Z.charCodeAt(Z.length-1)-48)<2||j>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+Z);u["uniformMatrix"+j+"fv"](f[P],!1,I);break}throw new r("","Unknown uniform data type for "+name+": "+Z)}if((j=Z.charCodeAt(Z.length-1)-48)<2||j>4)throw new r("","Invalid data type");switch(Z.charAt(0)){case"b":case"i":u["uniform"+j+"iv"](f[P],I);break;case"v":u["uniform"+j+"fv"](f[P],I);break;default:throw new r("","Unrecognized data type for vector "+name+": "+Z)}}}}}}function v(y,T){if(typeof T!="object")return[[y,T]];var h=[];for(var E in T){var k=T[E],L=y;parseInt(E)+""===E?L+="["+E+"]":L+="."+E,typeof k=="object"?h.push.apply(h,v(L,k)):h.push([L,k])}return h}function d(y,T,h){if(typeof h=="object"){var E=m(h);Object.defineProperty(y,T,{get:i(E),set:b(h),enumerable:!0,configurable:!1})}else f[h]?Object.defineProperty(y,T,{get:(k=h,function(L,P,I){return L.getUniform(P.program,I[k])}),set:b(h),enumerable:!0,configurable:!1}):y[T]=function(L){switch(L){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var P=L.indexOf("vec");if(0<=P&&P<=1&&L.length===4+P){if((I=L.charCodeAt(L.length-1)-48)<2||I>4)throw new r("","Invalid data type");return L.charAt(0)==="b"?l(I,!1):l(I,0)}if(L.indexOf("mat")===0&&L.length===4){var I;if((I=L.charCodeAt(L.length-1)-48)<2||I>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+L);return l(I*I,0)}throw new r("","Unknown uniform data type for "+name+": "+L)}}(g[h].type);var k}function m(y){var T;if(Array.isArray(y)){T=new Array(y.length);for(var h=0;h<y.length;++h)d(T,h,y[h])}else for(var E in T={},y)d(T,E,y[E]);return T}var x=a(g,!0);return{get:i(m(x)),set:b(x),enumerable:!0,configurable:!0}}},3984:function(p){p.exports=function(s,n){for(var a={},r=0;r<s.length;++r)for(var i=s[r].name.split("."),l=a,u=0;u<i.length;++u){var c=i[u].split("[");if(c.length>1){c[0]in l||(l[c[0]]=[]),l=l[c[0]];for(var g=1;g<c.length;++g){var f=parseInt(c[g]);g<c.length-1||u<i.length-1?(f in l||(g<c.length-1?l[f]=[]:l[f]={}),l=l[f]):l[f]=n?r:s[r].type}}else u<i.length-1?(c[0]in l||(l[c[0]]={}),l=l[c[0]]):l[c[0]]=n?r:s[r].type}return a}},2631:function(p,s){s.uniforms=function(i,l){for(var u=i.getProgramParameter(l,i.ACTIVE_UNIFORMS),c=[],g=0;g<u;++g){var f=i.getActiveUniform(l,g);if(f){var b=r(i,f.type);if(f.size>1)for(var v=0;v<f.size;++v)c.push({name:f.name.replace("[0]","["+v+"]"),type:b});else c.push({name:f.name,type:b})}}return c},s.attributes=function(i,l){for(var u=i.getProgramParameter(l,i.ACTIVE_ATTRIBUTES),c=[],g=0;g<u;++g){var f=i.getActiveAttrib(l,g);f&&c.push({name:f.name,type:r(i,f.type)})}return c};var n={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},a=null;function r(i,l){if(!a){var u=Object.keys(n);a={};for(var c=0;c<u.length;++c){var g=u[c];a[i[g]]=n[g]}}return a[l]}},1628:function(p,s,n){s.shader=function(b,v,d){return f(b).getShaderReference(v,d)},s.program=function(b,v,d,m,x){return f(b).getProgram(v,d,m,x)};var a=n(9068),r=n(3530),i=new(typeof WeakMap>"u"?n(4037):WeakMap),l=0;function u(b,v,d,m,x,y,T){this.id=b,this.src=v,this.type=d,this.shader=m,this.count=y,this.programs=[],this.cache=T}function c(b){this.gl=b,this.shaders=[{},{}],this.programs={}}u.prototype.dispose=function(){if(--this.count==0){for(var b=this.cache,v=b.gl,d=this.programs,m=0,x=d.length;m<x;++m){var y=b.programs[d[m]];y&&(delete b.programs[m],v.deleteProgram(y))}v.deleteShader(this.shader),delete b.shaders[this.type===v.FRAGMENT_SHADER|0][this.src]}};var g=c.prototype;function f(b){var v=i.get(b);return v||(v=new c(b),i.set(b,v)),v}g.getShaderReference=function(b,v){var d=this.gl,m=this.shaders[b===d.FRAGMENT_SHADER|0],x=m[v];if(x&&d.isShader(x.shader))x.count+=1;else{var y=function(T,h,E){var k=T.createShader(h);if(T.shaderSource(k,E),T.compileShader(k),!T.getShaderParameter(k,T.COMPILE_STATUS)){var L=T.getShaderInfoLog(k);try{var P=r(L,E,h)}catch(I){throw console.warn("Failed to format compiler error: "+I),new a(L,`Error compiling shader:
`+L)}throw new a(L,P.short,P.long)}return k}(d,b,v);x=m[v]=new u(l++,v,b,y,[],1,this)}return x},g.getProgram=function(b,v,d,m){var x=[b.id,v.id,d.join(":"),m.join(":")].join("@"),y=this.programs[x];return y&&this.gl.isProgram(y)||(this.programs[x]=y=function(T,h,E,k,L){var P=T.createProgram();T.attachShader(P,h),T.attachShader(P,E);for(var I=0;I<k.length;++I)T.bindAttribLocation(P,L[I],k[I]);if(T.linkProgram(P),!T.getProgramParameter(P,T.LINK_STATUS)){var z=T.getProgramInfoLog(P);throw new a(z,"Error linking program: "+z)}return P}(this.gl,b.shader,v.shader,d,m),b.programs.push(x),v.programs.push(x)),y}},3050:function(p){function s(a){this.plot=a,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}p.exports=function(a,r){var i=new s(a);return i.update(r),a.addOverlay(i),i};var n=s.prototype;n.update=function(a){a=a||{},this.enable=(a.enable||[!0,!0,!1,!1]).slice(),this.width=(a.width||[1,1,1,1]).slice(),this.color=(a.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(r){return r.slice()}),this.center=(a.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},n.draw=function(){var a=this.enable,r=this.width,i=this.color,l=this.center,u=this.plot,c=u.line,g=u.dataBox,f=u.viewBox;if(c.bind(),g[0]<=l[0]&&l[0]<=g[2]&&g[1]<=l[1]&&l[1]<=g[3]){var b=f[0]+(l[0]-g[0])/(g[2]-g[0])*(f[2]-f[0]),v=f[1]+(l[1]-g[1])/(g[3]-g[1])*(f[3]-f[1]);a[0]&&c.drawLine(b,v,f[0],v,r[0],i[0]),a[1]&&c.drawLine(b,v,b,f[1],r[1],i[1]),a[2]&&c.drawLine(b,v,f[2],v,r[2],i[2]),a[3]&&c.drawLine(b,v,b,f[3],r[3],i[3])}},n.dispose=function(){this.plot.removeOverlay(this)}},3540:function(p,s,n){var a=n(6832),r=n(5158),i=a([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),l=a([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);p.exports=function(u){return r(u,i,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},6496:function(p,s,n){var a=n(5827),r=n(2944),i=n(3540);p.exports=function(v,d){var m=[];function x(k,L,P,I,z,F){var U=[k,L,P,0,0,0,1];U[I+3]=1,U[I]=z,m.push.apply(m,U),U[6]=-1,m.push.apply(m,U),U[I]=F,m.push.apply(m,U),m.push.apply(m,U),U[6]=1,m.push.apply(m,U),U[I]=z,m.push.apply(m,U)}x(0,0,0,0,0,1),x(0,0,0,1,0,1),x(0,0,0,2,0,1),x(1,0,0,1,-1,1),x(1,0,0,2,-1,1),x(0,1,0,0,-1,1),x(0,1,0,2,-1,1),x(0,0,1,0,-1,1),x(0,0,1,1,-1,1);var y=a(v,m),T=r(v,[{type:v.FLOAT,buffer:y,size:3,offset:0,stride:28},{type:v.FLOAT,buffer:y,size:3,offset:12,stride:28},{type:v.FLOAT,buffer:y,size:1,offset:24,stride:28}]),h=i(v);h.attributes.position.location=0,h.attributes.color.location=1,h.attributes.weight.location=2;var E=new u(v,y,T,h);return E.update(d),E};var l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function u(v,d,m,x){this.gl=v,this.buffer=d,this.vao=m,this.shader=x,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var c=u.prototype,g=[0,0,0],f=[0,0,0],b=[0,0];c.isTransparent=function(){return!1},c.drawTransparent=function(v){},c.draw=function(v){var d=this.gl,m=this.vao,x=this.shader;m.bind(),x.bind();var y,T=v.model||l,h=v.view||l,E=v.projection||l;this.axes&&(y=this.axes.lastCubeProps.axis);for(var k=g,L=f,P=0;P<3;++P)y&&y[P]<0?(k[P]=this.bounds[0][P],L[P]=this.bounds[1][P]):(k[P]=this.bounds[1][P],L[P]=this.bounds[0][P]);for(b[0]=d.drawingBufferWidth,b[1]=d.drawingBufferHeight,x.uniforms.model=T,x.uniforms.view=h,x.uniforms.projection=E,x.uniforms.coordinates=[this.position,k,L],x.uniforms.colors=this.colors,x.uniforms.screenShape=b,P=0;P<3;++P)x.uniforms.lineWidth=this.lineWidth[P]*this.pixelRatio,this.enabled[P]&&(m.draw(d.TRIANGLES,6,6*P),this.drawSides[P]&&m.draw(d.TRIANGLES,12,18+12*P));m.unbind()},c.update=function(v){v&&("bounds"in v&&(this.bounds=v.bounds),"position"in v&&(this.position=v.position),"lineWidth"in v&&(this.lineWidth=v.lineWidth),"colors"in v&&(this.colors=v.colors),"enabled"in v&&(this.enabled=v.enabled),"drawSides"in v&&(this.drawSides=v.drawSides))},c.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},9578:function(p,s,n){var a=n(6832),r=a([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),i=a([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),l=a([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),u=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:r,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},s.pickShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7307:function(p,s,n){var a=n(2858),r=n(4020),i=["xyz","xzy","yxz","yzx","zxy","zyx"],l=function(b,v){var d,m=b.length;for(d=0;d<m;d++){var x=b[d];if(x===v)return d;if(x>v)return d-1}return d},u=function(b,v,d){return b<v?v:b>d?d:b},c=function(b){var v=1/0;b.sort(function(y,T){return y-T});for(var d=b.length,m=1;m<d;m++){var x=Math.abs(b[m]-b[m-1]);x<v&&(v=x)}return v};p.exports=function(b,v){var d=b.startingPositions,m=b.maxLength||1e3,x=b.tubeSize||1,y=b.absoluteTubeSize,T=b.gridFill||"+x+y+z",h={};T.indexOf("-x")!==-1&&(h.reversedX=!0),T.indexOf("-y")!==-1&&(h.reversedY=!0),T.indexOf("-z")!==-1&&(h.reversedZ=!0),h.filled=i.indexOf(T.replace(/-/g,"").replace(/\+/g,""));var E=b.getVelocity||function(me){return function(Se,we,_e){var oe=we.vectors,le=we.meshgrid,pe=Se[0],Ee=Se[1],Te=Se[2],Me=le[0].length,Le=le[1].length,Ie=le[2].length,he=l(le[0],pe),xe=l(le[1],Ee),ke=l(le[2],Te),ze=he+1,Re=xe+1,Oe=ke+1;if(he=u(he,0,Me-1),ze=u(ze,0,Me-1),xe=u(xe,0,Le-1),Re=u(Re,0,Le-1),ke=u(ke,0,Ie-1),Oe=u(Oe,0,Ie-1),he<0||xe<0||ke<0||ze>Me-1||Re>Le-1||Oe>Ie-1)return a.create();var Ve,qe,Je,ot,rt,dt,_t=le[0][he],yt=le[0][ze],et=le[1][xe],nt=le[1][Re],At=le[2][ke],Rt=(pe-_t)/(yt-_t),Ft=(Ee-et)/(nt-et),It=(Te-At)/(le[2][Oe]-At);switch(isFinite(Rt)||(Rt=.5),isFinite(Ft)||(Ft=.5),isFinite(It)||(It=.5),_e.reversedX&&(he=Me-1-he,ze=Me-1-ze),_e.reversedY&&(xe=Le-1-xe,Re=Le-1-Re),_e.reversedZ&&(ke=Ie-1-ke,Oe=Ie-1-Oe),_e.filled){case 5:rt=ke,dt=Oe,Je=xe*Ie,ot=Re*Ie,Ve=he*Ie*Le,qe=ze*Ie*Le;break;case 4:rt=ke,dt=Oe,Ve=he*Ie,qe=ze*Ie,Je=xe*Ie*Me,ot=Re*Ie*Me;break;case 3:Je=xe,ot=Re,rt=ke*Le,dt=Oe*Le,Ve=he*Le*Ie,qe=ze*Le*Ie;break;case 2:Je=xe,ot=Re,Ve=he*Le,qe=ze*Le,rt=ke*Le*Me,dt=Oe*Le*Me;break;case 1:Ve=he,qe=ze,rt=ke*Me,dt=Oe*Me,Je=xe*Me*Ie,ot=Re*Me*Ie;break;default:Ve=he,qe=ze,Je=xe*Me,ot=Re*Me,rt=ke*Me*Le,dt=Oe*Me*Le}var Ge=oe[Ve+Je+rt],Ye=oe[Ve+Je+dt],Ne=oe[Ve+ot+rt],We=oe[Ve+ot+dt],st=oe[qe+Je+rt],it=oe[qe+Je+dt],Fe=oe[qe+ot+rt],Be=oe[qe+ot+dt],at=a.create(),Ze=a.create(),ht=a.create(),vt=a.create();a.lerp(at,Ge,st,Rt),a.lerp(Ze,Ye,it,Rt),a.lerp(ht,Ne,Fe,Rt),a.lerp(vt,We,Be,Rt);var mt=a.create(),ft=a.create();a.lerp(mt,at,ht,Ft),a.lerp(ft,Ze,vt,Ft);var Et=a.create();return a.lerp(Et,mt,ft,It),Et}(me,b,h)},k=b.getDivergence||function(me,Se){var we=a.create(),_e=1e-4;a.add(we,me,[_e,0,0]);var oe=E(we);a.subtract(oe,oe,Se),a.scale(oe,oe,1/_e),a.add(we,me,[0,_e,0]);var le=E(we);a.subtract(le,le,Se),a.scale(le,le,1/_e),a.add(we,me,[0,0,_e]);var pe=E(we);return a.subtract(pe,pe,Se),a.scale(pe,pe,1/_e),a.add(we,oe,le),a.add(we,we,pe),we},L=[],P=v[0][0],I=v[0][1],z=v[0][2],F=v[1][0],U=v[1][1],R=v[1][2],j=function(me){var Se=me[0],we=me[1],_e=me[2];return!(Se<P||Se>F||we<I||we>U||_e<z||_e>R)},Z=10*a.distance(v[0],v[1])/m,B=Z*Z,q=1,V=0,ne=d.length;ne>1&&(q=function(me){for(var Se=[],we=[],_e=[],oe={},le={},pe={},Ee=me.length,Te=0;Te<Ee;Te++){var Me=me[Te],Le=Me[0],Ie=Me[1],he=Me[2];oe[Le]||(Se.push(Le),oe[Le]=!0),le[Ie]||(we.push(Ie),le[Ie]=!0),pe[he]||(_e.push(he),pe[he]=!0)}var xe=c(Se),ke=c(we),ze=c(_e),Re=Math.min(xe,ke,ze);return isFinite(Re)?Re:1}(d));for(var ee=0;ee<ne;ee++){var $=a.create();a.copy($,d[ee]);var J=[$],K=[],te=E($),ie=$;K.push(te);var ae=[],se=k($,te),ce=a.length(se);isFinite(ce)&&ce>V&&(V=ce),ae.push(ce),L.push({points:J,velocities:K,divergences:ae});for(var de=0;de<100*m&&J.length<m&&j($);){de++;var ge=a.clone(te),ve=a.squaredLength(ge);if(ve===0)break;ve>B&&a.scale(ge,ge,Z/Math.sqrt(ve)),a.add(ge,ge,$),te=E(ge),a.squaredDistance(ie,ge)-B>-1e-4*B&&(J.push(ge),ie=ge,K.push(te),se=k(ge,te),ce=a.length(se),isFinite(ce)&&ce>V&&(V=ce),ae.push(ce)),$=ge}}var be=function(me,Se,we,_e){for(var oe=0,le=0;le<me.length;le++)for(var pe=me[le].velocities,Ee=0;Ee<pe.length;Ee++)oe=Math.max(oe,a.length(pe[Ee]));var Te=me.map(function(Ve){return function(qe,Je,ot,rt){for(var dt=qe.points,_t=qe.velocities,yt=qe.divergences,et=[],nt=[],At=[],Rt=[],Ft=[],It=[],Ge=0,Ye=0,Ne=r.create(),We=r.create(),st=0;st<dt.length;st++){var it=dt[st],Fe=_t[st],Be=yt[st];Je===0&&(Be=.05*ot),Ye=a.length(Fe)/rt,Ne=r.create(),a.copy(Ne,Fe),Ne[3]=Be;for(var at=0;at<8;at++)Ft[at]=[it[0],it[1],it[2],at];if(Rt.length>0)for(at=0;at<8;at++){var Ze=(at+1)%8;et.push(Rt[at],Ft[at],Ft[Ze],Ft[Ze],Rt[Ze],Rt[at]),At.push(We,Ne,Ne,Ne,We,We),It.push(Ge,Ye,Ye,Ye,Ge,Ge);var ht=et.length;nt.push([ht-6,ht-5,ht-4],[ht-3,ht-2,ht-1])}var vt=Rt;Rt=Ft,Ft=vt;var mt=We;We=Ne,Ne=mt;var ft=Ge;Ge=Ye,Ye=ft}return{positions:et,cells:nt,vectors:At,vertexIntensity:It}}(Ve,we,_e,oe)}),Me=[],Le=[],Ie=[],he=[];for(le=0;le<Te.length;le++){var xe=Te[le],ke=Me.length;for(Me=Me.concat(xe.positions),Ie=Ie.concat(xe.vectors),he=he.concat(xe.vertexIntensity),Ee=0;Ee<xe.cells.length;Ee++){var ze=xe.cells[Ee],Re=[];Le.push(Re);for(var Oe=0;Oe<ze.length;Oe++)Re.push(ze[Oe]+ke)}}return{positions:Me,cells:Le,vectors:Ie,vertexIntensity:he,colormap:Se}}(L,b.colormap,V,q);return y?be.tubeScale=y:(V===0&&(V=1),be.tubeScale=.5*x*q/V),be};var g=n(9578),f=n(1140).createMesh;p.exports.createTubeMesh=function(b,v){return f(b,v,{shaders:g,traceType:"streamtube"})}},9054:function(p,s,n){var a=n(5158),r=n(6832),i=r([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),l=r([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color  in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),u=r([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),c=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);s.createShader=function(g){var f=a(g,i,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f.attributes.normal.location=2,f},s.createPickShader=function(g){var f=a(g,i,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f.attributes.normal.location=2,f},s.createContourShader=function(g){var f=a(g,u,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f},s.createPickContourShader=function(g){var f=a(g,u,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f}},3754:function(p,s,n){p.exports=function(se){var ce=se.gl,de=h(ce),ge=k(ce),ve=E(ce),be=L(ce),me=r(ce),Se=i(ce,[{buffer:me,size:4,stride:P,offset:0},{buffer:me,size:3,stride:P,offset:16},{buffer:me,size:3,stride:P,offset:28}]),we=r(ce),_e=i(ce,[{buffer:we,size:4,stride:20,offset:0},{buffer:we,size:1,stride:20,offset:16}]),oe=r(ce),le=i(ce,[{buffer:oe,size:2,type:ce.FLOAT}]),pe=l(ce,1,R,ce.RGBA,ce.UNSIGNED_BYTE);pe.minFilter=ce.LINEAR,pe.magFilter=ce.LINEAR;var Ee=new j(ce,[0,0],[[0,0,0],[0,0,0]],de,ge,me,Se,pe,ve,be,we,_e,oe,le,[0,0,0]),Te={levels:[[],[],[]]};for(var Me in se)Te[Me]=se[Me];return Te.colormap=Te.colormap||"jet",Ee.update(Te),Ee};var a=n(2288),r=n(5827),i=n(2944),l=n(8931),u=n(5306),c=n(9156),g=n(7498),f=n(7382),b=n(5050),v=n(4162),d=n(104),m=n(7437),x=n(5070),y=n(9144),T=n(9054),h=T.createShader,E=T.createContourShader,k=T.createPickShader,L=T.createPickContourShader,P=40,I=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],z=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],F=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function U(se,ce,de,ge,ve){this.position=se,this.index=ce,this.uv=de,this.level=ge,this.dataCoordinate=ve}(function(){for(var se=0;se<3;++se){var ce=F[se],de=(se+2)%3;ce[(se+1)%3+0]=1,ce[de+3]=1,ce[se+6]=1}})();var R=256;function j(se,ce,de,ge,ve,be,me,Se,we,_e,oe,le,pe,Ee,Te){this.gl=se,this.shape=ce,this.bounds=de,this.objectOffset=Te,this.intensityBounds=[],this._shader=ge,this._pickShader=ve,this._coordinateBuffer=be,this._vao=me,this._colorMap=Se,this._contourShader=we,this._contourPickShader=_e,this._contourBuffer=oe,this._contourVAO=le,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new U([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=pe,this._dynamicVAO=Ee,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[b(u.mallocFloat(1024),[0,0]),b(u.mallocFloat(1024),[0,0]),b(u.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var Z=j.prototype;Z.genColormap=function(se,ce){var de=!1,ge=f([c({colormap:se,nshades:R,format:"rgba"}).map(function(ve,be){var me=ce?function(Se,we){if(!we||!we.length)return 1;for(var _e=0;_e<we.length;++_e){if(we.length<2)return 1;if(we[_e][0]===Se)return we[_e][1];if(we[_e][0]>Se&&_e>0){var oe=(we[_e][0]-Se)/(we[_e][0]-we[_e-1][0]);return we[_e][1]*(1-oe)+oe*we[_e-1][1]}}return 1}(be/255,ce):ve[3];return me<1&&(de=!0),[ve[0],ve[1],ve[2],255*me]})]);return g.divseq(ge,255),this.hasAlphaScale=de,ge},Z.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},Z.isOpaque=function(){return!this.isTransparent()},Z.pickSlots=1,Z.setPickBase=function(se){this.pickId=se};var B=[0,0,0],q={showSurface:!1,showContour:!1,projections:[I.slice(),I.slice(),I.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function V(se,ce){var de,ge,ve,be=ce.axes&&ce.axes.lastCubeProps.axis||B,me=ce.showSurface,Se=ce.showContour;for(de=0;de<3;++de)for(me=me||ce.surfaceProject[de],ge=0;ge<3;++ge)Se=Se||ce.contourProject[de][ge];for(de=0;de<3;++de){var we=q.projections[de];for(ge=0;ge<16;++ge)we[ge]=0;for(ge=0;ge<4;++ge)we[5*ge]=1;we[5*de]=0,we[12+de]=ce.axesBounds[+(be[de]>0)][de],d(we,se.model,we);var _e=q.clipBounds[de];for(ve=0;ve<2;++ve)for(ge=0;ge<3;++ge)_e[ve][ge]=se.clipBounds[ve][ge];_e[0][de]=-1e8,_e[1][de]=1e8}return q.showSurface=me,q.showContour=Se,q}var ne={model:I,view:I,projection:I,inverseModel:I.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},ee=I.slice(),$=[1,0,0,0,1,0,0,0,1];function J(se,ce){se=se||{};var de=this.gl;de.disable(de.CULL_FACE),this._colorMap.bind(0);var ge=ne;ge.model=se.model||I,ge.view=se.view||I,ge.projection=se.projection||I,ge.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],ge.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],ge.objectOffset=this.objectOffset,ge.contourColor=this.contourColor[0],ge.inverseModel=m(ge.inverseModel,ge.model);for(var ve=0;ve<2;++ve)for(var be=ge.clipBounds[ve],me=0;me<3;++me)be[me]=Math.min(Math.max(this.clipBounds[ve][me],-1e8),1e8);ge.kambient=this.ambientLight,ge.kdiffuse=this.diffuseLight,ge.kspecular=this.specularLight,ge.roughness=this.roughness,ge.fresnel=this.fresnel,ge.opacity=this.opacity,ge.height=0,ge.permutation=$,ge.vertexColor=this.vertexColor;var Se=ee;for(d(Se,ge.view,ge.model),d(Se,ge.projection,Se),m(Se,Se),ve=0;ve<3;++ve)ge.eyePosition[ve]=Se[12+ve]/Se[15];var we=Se[15];for(ve=0;ve<3;++ve)we+=this.lightPosition[ve]*Se[4*ve+3];for(ve=0;ve<3;++ve){var _e=Se[12+ve];for(me=0;me<3;++me)_e+=Se[4*me+ve]*this.lightPosition[me];ge.lightPosition[ve]=_e/we}var oe=V(ge,this);if(oe.showSurface){for(this._shader.bind(),this._shader.uniforms=ge,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(de.TRIANGLES,this._vertexCount),ve=0;ve<3;++ve)this.surfaceProject[ve]&&this.vertexCount&&(this._shader.uniforms.model=oe.projections[ve],this._shader.uniforms.clipBounds=oe.clipBounds[ve],this._vao.draw(de.TRIANGLES,this._vertexCount));this._vao.unbind()}if(oe.showContour){var le=this._contourShader;ge.kambient=1,ge.kdiffuse=0,ge.kspecular=0,ge.opacity=1,le.bind(),le.uniforms=ge;var pe=this._contourVAO;for(pe.bind(),ve=0;ve<3;++ve)for(le.uniforms.permutation=F[ve],de.lineWidth(this.contourWidth[ve]*this.pixelRatio),me=0;me<this.contourLevels[ve].length;++me)me===this.highlightLevel[ve]?(le.uniforms.contourColor=this.highlightColor[ve],le.uniforms.contourTint=this.highlightTint[ve]):me!==0&&me-1!==this.highlightLevel[ve]||(le.uniforms.contourColor=this.contourColor[ve],le.uniforms.contourTint=this.contourTint[ve]),this._contourCounts[ve][me]&&(le.uniforms.height=this.contourLevels[ve][me],pe.draw(de.LINES,this._contourCounts[ve][me],this._contourOffsets[ve][me]));for(ve=0;ve<3;++ve)for(le.uniforms.model=oe.projections[ve],le.uniforms.clipBounds=oe.clipBounds[ve],me=0;me<3;++me)if(this.contourProject[ve][me]){le.uniforms.permutation=F[me],de.lineWidth(this.contourWidth[me]*this.pixelRatio);for(var Ee=0;Ee<this.contourLevels[me].length;++Ee)Ee===this.highlightLevel[me]?(le.uniforms.contourColor=this.highlightColor[me],le.uniforms.contourTint=this.highlightTint[me]):Ee!==0&&Ee-1!==this.highlightLevel[me]||(le.uniforms.contourColor=this.contourColor[me],le.uniforms.contourTint=this.contourTint[me]),this._contourCounts[me][Ee]&&(le.uniforms.height=this.contourLevels[me][Ee],pe.draw(de.LINES,this._contourCounts[me][Ee],this._contourOffsets[me][Ee]))}for(pe.unbind(),(pe=this._dynamicVAO).bind(),ve=0;ve<3;++ve)if(this._dynamicCounts[ve]!==0)for(le.uniforms.model=ge.model,le.uniforms.clipBounds=ge.clipBounds,le.uniforms.permutation=F[ve],de.lineWidth(this.dynamicWidth[ve]*this.pixelRatio),le.uniforms.contourColor=this.dynamicColor[ve],le.uniforms.contourTint=this.dynamicTint[ve],le.uniforms.height=this.dynamicLevel[ve],pe.draw(de.LINES,this._dynamicCounts[ve],this._dynamicOffsets[ve]),me=0;me<3;++me)this.contourProject[me][ve]&&(le.uniforms.model=oe.projections[me],le.uniforms.clipBounds=oe.clipBounds[me],pe.draw(de.LINES,this._dynamicCounts[ve],this._dynamicOffsets[ve]));pe.unbind()}}Z.draw=function(se){return J.call(this,se,!1)},Z.drawTransparent=function(se){return J.call(this,se,!0)};var K={model:I,view:I,projection:I,inverseModel:I,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function te(se,ce){return Array.isArray(se)?[ce(se[0]),ce(se[1]),ce(se[2])]:[ce(se),ce(se),ce(se)]}function ie(se){return Array.isArray(se)?se.length===3?[se[0],se[1],se[2],1]:[se[0],se[1],se[2],se[3]]:[0,0,0,1]}function ae(se){if(Array.isArray(se)){if(Array.isArray(se))return[ie(se[0]),ie(se[1]),ie(se[2])];var ce=ie(se);return[ce.slice(),ce.slice(),ce.slice()]}}Z.drawPick=function(se){se=se||{};var ce=this.gl;ce.disable(ce.CULL_FACE);var de=K;de.model=se.model||I,de.view=se.view||I,de.projection=se.projection||I,de.shape=this._field[2].shape,de.pickId=this.pickId/255,de.lowerBound=this.bounds[0],de.upperBound=this.bounds[1],de.objectOffset=this.objectOffset,de.permutation=$;for(var ge=0;ge<2;++ge)for(var ve=de.clipBounds[ge],be=0;be<3;++be)ve[be]=Math.min(Math.max(this.clipBounds[ge][be],-1e8),1e8);var me=V(de,this);if(me.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=de,this._vao.bind(),this._vao.draw(ce.TRIANGLES,this._vertexCount),ge=0;ge<3;++ge)this.surfaceProject[ge]&&(this._pickShader.uniforms.model=me.projections[ge],this._pickShader.uniforms.clipBounds=me.clipBounds[ge],this._vao.draw(ce.TRIANGLES,this._vertexCount));this._vao.unbind()}if(me.showContour){var Se=this._contourPickShader;Se.bind(),Se.uniforms=de;var we=this._contourVAO;for(we.bind(),be=0;be<3;++be)for(ce.lineWidth(this.contourWidth[be]*this.pixelRatio),Se.uniforms.permutation=F[be],ge=0;ge<this.contourLevels[be].length;++ge)this._contourCounts[be][ge]&&(Se.uniforms.height=this.contourLevels[be][ge],we.draw(ce.LINES,this._contourCounts[be][ge],this._contourOffsets[be][ge]));for(ge=0;ge<3;++ge)for(Se.uniforms.model=me.projections[ge],Se.uniforms.clipBounds=me.clipBounds[ge],be=0;be<3;++be)if(this.contourProject[ge][be]){Se.uniforms.permutation=F[be],ce.lineWidth(this.contourWidth[be]*this.pixelRatio);for(var _e=0;_e<this.contourLevels[be].length;++_e)this._contourCounts[be][_e]&&(Se.uniforms.height=this.contourLevels[be][_e],we.draw(ce.LINES,this._contourCounts[be][_e],this._contourOffsets[be][_e]))}we.unbind()}},Z.pick=function(se){if(!se||se.id!==this.pickId)return null;var ce=this._field[2].shape,de=this._pickResult,ge=ce[0]*(se.value[0]+(se.value[2]>>4)/16)/255,ve=Math.floor(ge),be=ge-ve,me=ce[1]*(se.value[1]+(15&se.value[2])/16)/255,Se=Math.floor(me),we=me-Se;ve+=1,Se+=1;var _e=de.position;_e[0]=_e[1]=_e[2]=0;for(var oe=0;oe<2;++oe)for(var le=oe?be:1-be,pe=0;pe<2;++pe)for(var Ee=ve+oe,Te=Se+pe,Me=le*(pe?we:1-we),Le=0;Le<3;++Le)_e[Le]+=this._field[Le].get(Ee,Te)*Me;for(var Ie=this._pickResult.level,he=0;he<3;++he)if(Ie[he]=x.le(this.contourLevels[he],_e[he]),Ie[he]<0)this.contourLevels[he].length>0&&(Ie[he]=0);else if(Ie[he]<this.contourLevels[he].length-1){var xe=this.contourLevels[he][Ie[he]],ke=this.contourLevels[he][Ie[he]+1];Math.abs(xe-_e[he])>Math.abs(ke-_e[he])&&(Ie[he]+=1)}for(de.index[0]=be<.5?ve:ve+1,de.index[1]=we<.5?Se:Se+1,de.uv[0]=ge/ce[0],de.uv[1]=me/ce[1],Le=0;Le<3;++Le)de.dataCoordinate[Le]=this._field[Le].get(de.index[0],de.index[1]);return de},Z.padField=function(se,ce){var de=ce.shape.slice(),ge=se.shape.slice();g.assign(se.lo(1,1).hi(de[0],de[1]),ce),g.assign(se.lo(1).hi(de[0],1),ce.hi(de[0],1)),g.assign(se.lo(1,ge[1]-1).hi(de[0],1),ce.lo(0,de[1]-1).hi(de[0],1)),g.assign(se.lo(0,1).hi(1,de[1]),ce.hi(1)),g.assign(se.lo(ge[0]-1,1).hi(1,de[1]),ce.lo(de[0]-1)),se.set(0,0,ce.get(0,0)),se.set(0,ge[1]-1,ce.get(0,de[1]-1)),se.set(ge[0]-1,0,ce.get(de[0]-1,0)),se.set(ge[0]-1,ge[1]-1,ce.get(de[0]-1,de[1]-1))},Z.update=function(se){se=se||{},this.objectOffset=se.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in se&&(this.contourWidth=te(se.contourWidth,Number)),"showContour"in se&&(this.showContour=te(se.showContour,Boolean)),"showSurface"in se&&(this.showSurface=!!se.showSurface),"contourTint"in se&&(this.contourTint=te(se.contourTint,Boolean)),"contourColor"in se&&(this.contourColor=ae(se.contourColor)),"contourProject"in se&&(this.contourProject=te(se.contourProject,function(cn){return te(cn,Boolean)})),"surfaceProject"in se&&(this.surfaceProject=se.surfaceProject),"dynamicColor"in se&&(this.dynamicColor=ae(se.dynamicColor)),"dynamicTint"in se&&(this.dynamicTint=te(se.dynamicTint,Number)),"dynamicWidth"in se&&(this.dynamicWidth=te(se.dynamicWidth,Number)),"opacity"in se&&(this.opacity=se.opacity),"opacityscale"in se&&(this.opacityscale=se.opacityscale),"colorBounds"in se&&(this.colorBounds=se.colorBounds),"vertexColor"in se&&(this.vertexColor=se.vertexColor?1:0),"colormap"in se&&this._colorMap.setPixels(this.genColormap(se.colormap,this.opacityscale));var ce=se.field||se.coords&&se.coords[2]||null,de=!1;if(ce||(ce=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in se||"coords"in se){var ge=(ce.shape[0]+2)*(ce.shape[1]+2);ge>this._field[2].data.length&&(u.freeFloat(this._field[2].data),this._field[2].data=u.mallocFloat(a.nextPow2(ge))),this._field[2]=b(this._field[2].data,[ce.shape[0]+2,ce.shape[1]+2]),this.padField(this._field[2],ce),this.shape=ce.shape.slice();for(var ve=this.shape,be=0;be<2;++be)this._field[2].size>this._field[be].data.length&&(u.freeFloat(this._field[be].data),this._field[be].data=u.mallocFloat(this._field[2].size)),this._field[be]=b(this._field[be].data,[ve[0]+2,ve[1]+2]);if(se.coords){var me=se.coords;if(!Array.isArray(me)||me.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(be=0;be<2;++be){var Se=me[be];for(pe=0;pe<2;++pe)if(Se.shape[pe]!==ve[pe])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[be],Se)}}else if(se.ticks){var we=se.ticks;if(!Array.isArray(we)||we.length!==2)throw new Error("gl-surface: invalid ticks");for(be=0;be<2;++be){var _e=we[be];if((Array.isArray(_e)||_e.length)&&(_e=b(_e)),_e.shape[0]!==ve[be])throw new Error("gl-surface: invalid tick length");var oe=b(_e.data,ve);oe.stride[be]=_e.stride[0],oe.stride[1^be]=0,this.padField(this._field[be],oe)}}else{for(be=0;be<2;++be){var le=[0,0];le[be]=1,this._field[be]=b(this._field[be].data,[ve[0]+2,ve[1]+2],le,0)}this._field[0].set(0,0,0);for(var pe=0;pe<ve[0];++pe)this._field[0].set(pe+1,0,pe);for(this._field[0].set(ve[0]+1,0,ve[0]-1),this._field[1].set(0,0,0),pe=0;pe<ve[1];++pe)this._field[1].set(0,pe+1,pe);this._field[1].set(0,ve[1]+1,ve[1]-1)}var Ee=this._field,Te=b(u.mallocFloat(3*Ee[2].size*2),[3,ve[0]+2,ve[1]+2,2]);for(be=0;be<3;++be)y(Te.pick(be),Ee[be],"mirror");var Me=b(u.mallocFloat(3*Ee[2].size),[ve[0]+2,ve[1]+2,3]);for(be=0;be<ve[0]+2;++be)for(pe=0;pe<ve[1]+2;++pe){var Le=Te.get(0,be,pe,0),Ie=Te.get(0,be,pe,1),he=Te.get(1,be,pe,0),xe=Te.get(1,be,pe,1),ke=Te.get(2,be,pe,0),ze=Te.get(2,be,pe,1),Re=he*ze-xe*ke,Oe=ke*Ie-ze*Le,Ve=Le*xe-Ie*he,qe=Math.sqrt(Re*Re+Oe*Oe+Ve*Ve);qe<1e-8?(qe=Math.max(Math.abs(Re),Math.abs(Oe),Math.abs(Ve)))<1e-8?(Ve=1,Oe=Re=0,qe=1):qe=1/qe:qe=1/Math.sqrt(qe),Me.set(be,pe,0,Re*qe),Me.set(be,pe,1,Oe*qe),Me.set(be,pe,2,Ve*qe)}u.free(Te.data);var Je=[1/0,1/0,1/0],ot=[-1/0,-1/0,-1/0],rt=1/0,dt=-1/0,_t=(ve[0]-1)*(ve[1]-1)*6,yt=u.mallocFloat(a.nextPow2(10*_t)),et=0,nt=0;for(be=0;be<ve[0]-1;++be)e:for(pe=0;pe<ve[1]-1;++pe){for(var At=0;At<2;++At)for(var Rt=0;Rt<2;++Rt)for(var Ft=0;Ft<3;++Ft){var It=this._field[Ft].get(1+be+At,1+pe+Rt);if(isNaN(It)||!isFinite(It))continue e}for(Ft=0;Ft<6;++Ft){var Ge=be+z[Ft][0],Ye=pe+z[Ft][1],Ne=this._field[0].get(Ge+1,Ye+1),We=this._field[1].get(Ge+1,Ye+1);It=this._field[2].get(Ge+1,Ye+1),Re=Me.get(Ge+1,Ye+1,0),Oe=Me.get(Ge+1,Ye+1,1),Ve=Me.get(Ge+1,Ye+1,2),se.intensity&&(st=se.intensity.get(Ge,Ye));var st=se.intensity?se.intensity.get(Ge,Ye):It+this.objectOffset[2];yt[et++]=Ge,yt[et++]=Ye,yt[et++]=Ne,yt[et++]=We,yt[et++]=It,yt[et++]=0,yt[et++]=st,yt[et++]=Re,yt[et++]=Oe,yt[et++]=Ve,Je[0]=Math.min(Je[0],Ne+this.objectOffset[0]),Je[1]=Math.min(Je[1],We+this.objectOffset[1]),Je[2]=Math.min(Je[2],It+this.objectOffset[2]),rt=Math.min(rt,st),ot[0]=Math.max(ot[0],Ne+this.objectOffset[0]),ot[1]=Math.max(ot[1],We+this.objectOffset[1]),ot[2]=Math.max(ot[2],It+this.objectOffset[2]),dt=Math.max(dt,st),nt+=1}}for(se.intensityBounds&&(rt=+se.intensityBounds[0],dt=+se.intensityBounds[1]),be=6;be<et;be+=10)yt[be]=(yt[be]-rt)/(dt-rt);this._vertexCount=nt,this._coordinateBuffer.update(yt.subarray(0,et)),u.freeFloat(yt),u.free(Me.data),this.bounds=[Je,ot],this.intensity=se.intensity||this._field[2],this.intensityBounds[0]===rt&&this.intensityBounds[1]===dt||(de=!0),this.intensityBounds=[rt,dt]}if("levels"in se){var it=se.levels;for(it=Array.isArray(it[0])?it.slice():[[],[],it],be=0;be<3;++be)it[be]=it[be].slice(),it[be].sort(function(cn,an){return cn-an});for(be=0;be<3;++be)for(pe=0;pe<it[be].length;++pe)it[be][pe]-=this.objectOffset[be];e:for(be=0;be<3;++be){if(it[be].length!==this.contourLevels[be].length){de=!0;break}for(pe=0;pe<it[be].length;++pe)if(it[be][pe]!==this.contourLevels[be][pe]){de=!0;break e}}this.contourLevels=it}if(de){Ee=this._field,ve=this.shape;for(var Fe=[],Be=0;Be<3;++Be){var at=this.contourLevels[Be],Ze=[],ht=[],vt=[0,0,0];for(be=0;be<at.length;++be){var mt=v(this._field[Be],at[be]);Ze.push(Fe.length/5|0),nt=0;e:for(pe=0;pe<mt.cells.length;++pe){var ft=mt.cells[pe];for(Ft=0;Ft<2;++Ft){var Et=mt.positions[ft[Ft]],Tt=Et[0],xt=0|Math.floor(Tt),Ct=Tt-xt,Pt=Et[1],Bt=0|Math.floor(Pt),Kt=Pt-Bt,sn=!1;t:for(var Gt=0;Gt<3;++Gt){vt[Gt]=0;var Yt=(Be+Gt+1)%3;for(At=0;At<2;++At){var rn=At?Ct:1-Ct;for(Ge=0|Math.min(Math.max(xt+At,0),ve[0]),Rt=0;Rt<2;++Rt){var Ln=Rt?Kt:1-Kt;if(Ye=0|Math.min(Math.max(Bt+Rt,0),ve[1]),It=Gt<2?this._field[Yt].get(Ge,Ye):(this.intensity.get(Ge,Ye)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(It)||isNaN(It)){sn=!0;break t}var Sn=rn*Ln;vt[Gt]+=Sn*It}}}if(sn){if(Ft>0){for(var gn=0;gn<5;++gn)Fe.pop();nt-=1}continue e}Fe.push(vt[0],vt[1],Et[0],Et[1],vt[2]),nt+=1}}ht.push(nt)}this._contourOffsets[Be]=Ze,this._contourCounts[Be]=ht}var $t=u.mallocFloat(Fe.length);for(be=0;be<Fe.length;++be)$t[be]=Fe[be];this._contourBuffer.update($t),u.freeFloat($t)}},Z.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var se=0;se<3;++se)u.freeFloat(this._field[se].data)},Z.highlight=function(se){var ce,de;if(!se)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(ce=0;ce<3;++ce)this.enableHighlight[ce]?this.highlightLevel[ce]=se.level[ce]:this.highlightLevel[ce]=-1;for(de=this.snapToData?se.dataCoordinate:se.position,ce=0;ce<3;++ce)de[ce]-=this.objectOffset[ce];if(this.enableDynamic[0]&&de[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&de[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&de[2]!==this.dynamicLevel[2]){for(var ge=0,ve=this.shape,be=u.mallocFloat(12*ve[0]*ve[1]),me=0;me<3;++me)if(this.enableDynamic[me]){this.dynamicLevel[me]=de[me];var Se=(me+1)%3,we=(me+2)%3,_e=this._field[me],oe=this._field[Se],le=this._field[we],pe=v(_e,de[me]),Ee=pe.cells,Te=pe.positions;for(this._dynamicOffsets[me]=ge,ce=0;ce<Ee.length;++ce)for(var Me=Ee[ce],Le=0;Le<2;++Le){var Ie=Te[Me[Le]],he=+Ie[0],xe=0|he,ke=0|Math.min(xe+1,ve[0]),ze=he-xe,Re=1-ze,Oe=+Ie[1],Ve=0|Oe,qe=0|Math.min(Ve+1,ve[1]),Je=Oe-Ve,ot=1-Je,rt=Re*ot,dt=Re*Je,_t=ze*ot,yt=ze*Je,et=rt*oe.get(xe,Ve)+dt*oe.get(xe,qe)+_t*oe.get(ke,Ve)+yt*oe.get(ke,qe),nt=rt*le.get(xe,Ve)+dt*le.get(xe,qe)+_t*le.get(ke,Ve)+yt*le.get(ke,qe);if(isNaN(et)||isNaN(nt)){Le&&(ge-=1);break}be[2*ge+0]=et,be[2*ge+1]=nt,ge+=1}this._dynamicCounts[me]=ge-this._dynamicOffsets[me]}else this.dynamicLevel[me]=NaN,this._dynamicCounts[me]=0;this._dynamicBuffer.update(be.subarray(0,2*ge)),u.freeFloat(be)}}},8931:function(p,s,n){var a=n(5050),r=n(7498),i=n(5306);p.exports=function(T){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(l||function(k){l=[k.LINEAR,k.NEAREST_MIPMAP_LINEAR,k.LINEAR_MIPMAP_NEAREST,k.LINEAR_MIPMAP_NEAREST],u=[k.NEAREST,k.LINEAR,k.NEAREST_MIPMAP_NEAREST,k.NEAREST_MIPMAP_LINEAR,k.LINEAR_MIPMAP_NEAREST,k.LINEAR_MIPMAP_LINEAR],c=[k.REPEAT,k.CLAMP_TO_EDGE,k.MIRRORED_REPEAT]}(T),typeof arguments[1]=="number")return y(T,arguments[1],arguments[2],arguments[3]||T.RGBA,arguments[4]||T.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return y(T,0|arguments[1][0],0|arguments[1][1],arguments[2]||T.RGBA,arguments[3]||T.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var h=arguments[1],E=g(h)?h:h.raw;if(E)return function(k,L,P,I,z,F){var U=x(k);return k.texImage2D(k.TEXTURE_2D,0,z,z,F,L),new v(k,U,P,I,z,F)}(T,E,0|h.width,0|h.height,arguments[2]||T.RGBA,arguments[3]||T.UNSIGNED_BYTE);if(h.shape&&h.data&&h.stride)return function(k,L){var P=L.dtype,I=L.shape.slice(),z=k.getParameter(k.MAX_TEXTURE_SIZE);if(I[0]<0||I[0]>z||I[1]<0||I[1]>z)throw new Error("gl-texture2d: Invalid texture size");var F=m(I,L.stride.slice()),U=0;P==="float32"?U=k.FLOAT:P==="float64"?(U=k.FLOAT,F=!1,P="float32"):P==="uint8"?U=k.UNSIGNED_BYTE:(U=k.UNSIGNED_BYTE,F=!1,P="uint8");var R,j,Z=0;if(I.length===2)Z=k.LUMINANCE,I=[I[0],I[1],1],L=a(L.data,I,[L.stride[0],L.stride[1],1],L.offset);else{if(I.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(I[2]===1)Z=k.ALPHA;else if(I[2]===2)Z=k.LUMINANCE_ALPHA;else if(I[2]===3)Z=k.RGB;else{if(I[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");Z=k.RGBA}}U!==k.FLOAT||k.getExtension("OES_texture_float")||(U=k.UNSIGNED_BYTE,F=!1);var B=L.size;if(F)R=L.offset===0&&L.data.length===B?L.data:L.data.subarray(L.offset,L.offset+B);else{var q=[I[2],I[2]*I[0],1];j=i.malloc(B,P);var V=a(j,I,q,0);P!=="float32"&&P!=="float64"||U!==k.UNSIGNED_BYTE?r.assign(V,L):f(V,L),R=j.subarray(0,B)}var ne=x(k);return k.texImage2D(k.TEXTURE_2D,0,Z,I[0],I[1],0,Z,U,R),F||i.free(j),new v(k,ne,I[0],I[1],Z,U)}(T,h)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var l=null,u=null,c=null;function g(T){return typeof HTMLCanvasElement<"u"&&T instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&T instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&T instanceof HTMLVideoElement||typeof ImageData<"u"&&T instanceof ImageData}var f=function(T,h){r.muls(T,h,255)};function b(T,h,E){var k=T.gl,L=k.getParameter(k.MAX_TEXTURE_SIZE);if(h<0||h>L||E<0||E>L)throw new Error("gl-texture2d: Invalid texture size");return T._shape=[h,E],T.bind(),k.texImage2D(k.TEXTURE_2D,0,T.format,h,E,0,T.format,T.type,null),T._mipLevels=[0],T}function v(T,h,E,k,L,P){this.gl=T,this.handle=h,this.format=L,this.type=P,this._shape=[E,k],this._mipLevels=[0],this._magFilter=T.NEAREST,this._minFilter=T.NEAREST,this._wrapS=T.CLAMP_TO_EDGE,this._wrapT=T.CLAMP_TO_EDGE,this._anisoSamples=1;var I=this,z=[this._wrapS,this._wrapT];Object.defineProperties(z,[{get:function(){return I._wrapS},set:function(U){return I.wrapS=U}},{get:function(){return I._wrapT},set:function(U){return I.wrapT=U}}]),this._wrapVector=z;var F=[this._shape[0],this._shape[1]];Object.defineProperties(F,[{get:function(){return I._shape[0]},set:function(U){return I.width=U}},{get:function(){return I._shape[1]},set:function(U){return I.height=U}}]),this._shapeVector=F}var d=v.prototype;function m(T,h){return T.length===3?h[2]===1&&h[1]===T[0]*T[2]&&h[0]===T[2]:h[0]===1&&h[1]===T[0]}function x(T){var h=T.createTexture();return T.bindTexture(T.TEXTURE_2D,h),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.NEAREST),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.NEAREST),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),h}function y(T,h,E,k,L){var P=T.getParameter(T.MAX_TEXTURE_SIZE);if(h<0||h>P||E<0||E>P)throw new Error("gl-texture2d: Invalid texture shape");if(L===T.FLOAT&&!T.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var I=x(T);return T.texImage2D(T.TEXTURE_2D,0,k,h,E,0,k,L,null),new v(T,I,h,E,k,L)}Object.defineProperties(d,{minFilter:{get:function(){return this._minFilter},set:function(T){this.bind();var h=this.gl;if(this.type===h.FLOAT&&l.indexOf(T)>=0&&(h.getExtension("OES_texture_float_linear")||(T=h.NEAREST)),u.indexOf(T)<0)throw new Error("gl-texture2d: Unknown filter mode "+T);return h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,T),this._minFilter=T}},magFilter:{get:function(){return this._magFilter},set:function(T){this.bind();var h=this.gl;if(this.type===h.FLOAT&&l.indexOf(T)>=0&&(h.getExtension("OES_texture_float_linear")||(T=h.NEAREST)),u.indexOf(T)<0)throw new Error("gl-texture2d: Unknown filter mode "+T);return h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,T),this._magFilter=T}},mipSamples:{get:function(){return this._anisoSamples},set:function(T){var h=this._anisoSamples;if(this._anisoSamples=0|Math.max(T,1),h!==this._anisoSamples){var E=this.gl.getExtension("EXT_texture_filter_anisotropic");E&&this.gl.texParameterf(this.gl.TEXTURE_2D,E.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(T){if(this.bind(),c.indexOf(T)<0)throw new Error("gl-texture2d: Unknown wrap mode "+T);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,T),this._wrapS=T}},wrapT:{get:function(){return this._wrapT},set:function(T){if(this.bind(),c.indexOf(T)<0)throw new Error("gl-texture2d: Unknown wrap mode "+T);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,T),this._wrapT=T}},wrap:{get:function(){return this._wrapVector},set:function(T){if(Array.isArray(T)||(T=[T,T]),T.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var h=0;h<2;++h)if(c.indexOf(T[h])<0)throw new Error("gl-texture2d: Unknown wrap mode "+T);this._wrapS=T[0],this._wrapT=T[1];var E=this.gl;return this.bind(),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,this._wrapS),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,this._wrapT),T}},shape:{get:function(){return this._shapeVector},set:function(T){if(Array.isArray(T)){if(T.length!==2)throw new Error("gl-texture2d: Invalid texture shape")}else T=[0|T,0|T];return b(this,0|T[0],0|T[1]),[0|T[0],0|T[1]]}},width:{get:function(){return this._shape[0]},set:function(T){return b(this,T|=0,this._shape[1]),T}},height:{get:function(){return this._shape[1]},set:function(T){return T|=0,b(this,this._shape[0],T),T}}}),d.bind=function(T){var h=this.gl;return T!==void 0&&h.activeTexture(h.TEXTURE0+(0|T)),h.bindTexture(h.TEXTURE_2D,this.handle),T!==void 0?0|T:h.getParameter(h.ACTIVE_TEXTURE)-h.TEXTURE0},d.dispose=function(){this.gl.deleteTexture(this.handle)},d.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var T=Math.min(this._shape[0],this._shape[1]),h=0;T>0;++h,T>>>=1)this._mipLevels.indexOf(h)<0&&this._mipLevels.push(h)},d.setPixels=function(T,h,E,k){var L=this.gl;this.bind(),Array.isArray(h)?(k=E,E=0|h[1],h=0|h[0]):(h=h||0,E=E||0),k=k||0;var P=g(T)?T:T.raw;if(P)this._mipLevels.indexOf(k)<0?(L.texImage2D(L.TEXTURE_2D,0,this.format,this.format,this.type,P),this._mipLevels.push(k)):L.texSubImage2D(L.TEXTURE_2D,k,h,E,this.format,this.type,P);else{if(!(T.shape&&T.stride&&T.data))throw new Error("gl-texture2d: Unsupported data type");if(T.shape.length<2||h+T.shape[1]>this._shape[1]>>>k||E+T.shape[0]>this._shape[0]>>>k||h<0||E<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");(function(I,z,F,U,R,j,Z,B){var q=B.dtype,V=B.shape.slice();if(V.length<2||V.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var ne=0,ee=0,$=m(V,B.stride.slice());if(q==="float32"?ne=I.FLOAT:q==="float64"?(ne=I.FLOAT,$=!1,q="float32"):q==="uint8"?ne=I.UNSIGNED_BYTE:(ne=I.UNSIGNED_BYTE,$=!1,q="uint8"),V.length===2)ee=I.LUMINANCE,V=[V[0],V[1],1],B=a(B.data,V,[B.stride[0],B.stride[1],1],B.offset);else{if(V.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(V[2]===1)ee=I.ALPHA;else if(V[2]===2)ee=I.LUMINANCE_ALPHA;else if(V[2]===3)ee=I.RGB;else{if(V[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");ee=I.RGBA}V[2]}if(ee!==I.LUMINANCE&&ee!==I.ALPHA||R!==I.LUMINANCE&&R!==I.ALPHA||(ee=R),ee!==R)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var J=B.size,K=Z.indexOf(U)<0;if(K&&Z.push(U),ne===j&&$)B.offset===0&&B.data.length===J?K?I.texImage2D(I.TEXTURE_2D,U,R,V[0],V[1],0,R,j,B.data):I.texSubImage2D(I.TEXTURE_2D,U,z,F,V[0],V[1],R,j,B.data):K?I.texImage2D(I.TEXTURE_2D,U,R,V[0],V[1],0,R,j,B.data.subarray(B.offset,B.offset+J)):I.texSubImage2D(I.TEXTURE_2D,U,z,F,V[0],V[1],R,j,B.data.subarray(B.offset,B.offset+J));else{var te;te=j===I.FLOAT?i.mallocFloat32(J):i.mallocUint8(J);var ie=a(te,V,[V[2],V[2]*V[0],1]);ne===I.FLOAT&&j===I.UNSIGNED_BYTE?f(ie,B):r.assign(ie,B),K?I.texImage2D(I.TEXTURE_2D,U,R,V[0],V[1],0,R,j,te.subarray(0,J)):I.texSubImage2D(I.TEXTURE_2D,U,z,F,V[0],V[1],R,j,te.subarray(0,J)),j===I.FLOAT?i.freeFloat32(te):i.freeUint8(te)}})(L,h,E,k,this.format,this.type,this._mipLevels,T)}}},3056:function(p){p.exports=function(s,n,a){n?n.bind():s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,null);var r=0|s.getParameter(s.MAX_VERTEX_ATTRIBS);if(a){if(a.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var i=0;i<a.length;++i){var l=a[i];if(l.buffer){var u=l.buffer,c=l.size||4,g=l.type||s.FLOAT,f=!!l.normalized,b=l.stride||0,v=l.offset||0;u.bind(),s.enableVertexAttribArray(i),s.vertexAttribPointer(i,c,g,f,b,v)}else{if(typeof l=="number")s.vertexAttrib1f(i,l);else if(l.length===1)s.vertexAttrib1f(i,l[0]);else if(l.length===2)s.vertexAttrib2f(i,l[0],l[1]);else if(l.length===3)s.vertexAttrib3f(i,l[0],l[1],l[2]);else{if(l.length!==4)throw new Error("gl-vao: Invalid vertex attribute");s.vertexAttrib4f(i,l[0],l[1],l[2],l[3])}s.disableVertexAttribArray(i)}}for(;i<r;++i)s.disableVertexAttribArray(i)}else for(s.bindBuffer(s.ARRAY_BUFFER,null),i=0;i<r;++i)s.disableVertexAttribArray(i)}},7220:function(p,s,n){var a=n(3056);function r(i){this.gl=i,this._elements=null,this._attributes=null,this._elementsType=i.UNSIGNED_SHORT}r.prototype.bind=function(){a(this.gl,this._elements,this._attributes)},r.prototype.update=function(i,l,u){this._elements=l,this._attributes=i,this._elementsType=u||this.gl.UNSIGNED_SHORT},r.prototype.dispose=function(){},r.prototype.unbind=function(){},r.prototype.draw=function(i,l,u){u=u||0;var c=this.gl;this._elements?c.drawElements(i,l,this._elementsType,u):c.drawArrays(i,u,l)},p.exports=function(i){return new r(i)}},3778:function(p,s,n){var a=n(3056);function r(l,u,c,g,f,b){this.location=l,this.dimension=u,this.a=c,this.b=g,this.c=f,this.d=b}function i(l,u,c){this.gl=l,this._ext=u,this.handle=c,this._attribs=[],this._useElements=!1,this._elementsType=l.UNSIGNED_SHORT}r.prototype.bind=function(l){switch(this.dimension){case 1:l.vertexAttrib1f(this.location,this.a);break;case 2:l.vertexAttrib2f(this.location,this.a,this.b);break;case 3:l.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:l.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},i.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var l=0;l<this._attribs.length;++l)this._attribs[l].bind(this.gl)},i.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},i.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},i.prototype.update=function(l,u,c){if(this.bind(),a(this.gl,u,l),this.unbind(),this._attribs.length=0,l)for(var g=0;g<l.length;++g){var f=l[g];typeof f=="number"?this._attribs.push(new r(g,1,f)):Array.isArray(f)&&this._attribs.push(new r(g,f.length,f[0],f[1],f[2],f[3]))}this._useElements=!!u,this._elementsType=c||this.gl.UNSIGNED_SHORT},i.prototype.draw=function(l,u,c){c=c||0;var g=this.gl;this._useElements?g.drawElements(l,u,this._elementsType,c):g.drawArrays(l,c,u)},p.exports=function(l,u){return new i(l,u,u.createVertexArrayOES())}},2944:function(p,s,n){var a=n(3778),r=n(7220);function i(l){this.bindVertexArrayOES=l.bindVertexArray.bind(l),this.createVertexArrayOES=l.createVertexArray.bind(l),this.deleteVertexArrayOES=l.deleteVertexArray.bind(l)}p.exports=function(l,u,c,g){var f,b=l.createVertexArray?new i(l):l.getExtension("OES_vertex_array_object");return(f=b?a(l,b):r(l)).update(u,c,g),f}},2598:function(p){p.exports=function(s,n,a){return s[0]=n[0]+a[0],s[1]=n[1]+a[1],s[2]=n[2]+a[2],s}},5879:function(p,s,n){p.exports=function(l,u){var c=a(l[0],l[1],l[2]),g=a(u[0],u[1],u[2]);r(c,c),r(g,g);var f=i(c,g);return f>1?0:Math.acos(f)};var a=n(5415),r=n(899),i=n(9305)},8827:function(p){p.exports=function(s,n){return s[0]=Math.ceil(n[0]),s[1]=Math.ceil(n[1]),s[2]=Math.ceil(n[2]),s}},7622:function(p){p.exports=function(s){var n=new Float32Array(3);return n[0]=s[0],n[1]=s[1],n[2]=s[2],n}},8782:function(p){p.exports=function(s,n){return s[0]=n[0],s[1]=n[1],s[2]=n[2],s}},8501:function(p){p.exports=function(){var s=new Float32Array(3);return s[0]=0,s[1]=0,s[2]=0,s}},903:function(p){p.exports=function(s,n,a){var r=n[0],i=n[1],l=n[2],u=a[0],c=a[1],g=a[2];return s[0]=i*g-l*c,s[1]=l*u-r*g,s[2]=r*c-i*u,s}},5981:function(p,s,n){p.exports=n(8288)},8288:function(p){p.exports=function(s,n){var a=n[0]-s[0],r=n[1]-s[1],i=n[2]-s[2];return Math.sqrt(a*a+r*r+i*i)}},8629:function(p,s,n){p.exports=n(7979)},7979:function(p){p.exports=function(s,n,a){return s[0]=n[0]/a[0],s[1]=n[1]/a[1],s[2]=n[2]/a[2],s}},9305:function(p){p.exports=function(s,n){return s[0]*n[0]+s[1]*n[1]+s[2]*n[2]}},154:function(p){p.exports=1e-6},4932:function(p,s,n){p.exports=function(r,i){var l=r[0],u=r[1],c=r[2],g=i[0],f=i[1],b=i[2];return Math.abs(l-g)<=a*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(u-f)<=a*Math.max(1,Math.abs(u),Math.abs(f))&&Math.abs(c-b)<=a*Math.max(1,Math.abs(c),Math.abs(b))};var a=n(154)},5777:function(p){p.exports=function(s,n){return s[0]===n[0]&&s[1]===n[1]&&s[2]===n[2]}},3306:function(p){p.exports=function(s,n){return s[0]=Math.floor(n[0]),s[1]=Math.floor(n[1]),s[2]=Math.floor(n[2]),s}},7447:function(p,s,n){p.exports=function(r,i,l,u,c,g){var f,b;for(i||(i=3),l||(l=0),b=u?Math.min(u*i+l,r.length):r.length,f=l;f<b;f+=i)a[0]=r[f],a[1]=r[f+1],a[2]=r[f+2],c(a,a,g),r[f]=a[0],r[f+1]=a[1],r[f+2]=a[2];return r};var a=n(8501)()},5415:function(p){p.exports=function(s,n,a){var r=new Float32Array(3);return r[0]=s,r[1]=n,r[2]=a,r}},2858:function(p,s,n){p.exports={EPSILON:n(154),create:n(8501),clone:n(7622),angle:n(5879),fromValues:n(5415),copy:n(8782),set:n(831),equals:n(4932),exactEquals:n(5777),add:n(2598),subtract:n(911),sub:n(8921),multiply:n(105),mul:n(5733),divide:n(7979),div:n(8629),min:n(3605),max:n(1716),floor:n(3306),ceil:n(8827),round:n(1624),scale:n(5685),scaleAndAdd:n(6722),distance:n(8288),dist:n(5981),squaredDistance:n(6403),sqrDist:n(5294),length:n(4693),len:n(1468),squaredLength:n(4337),sqrLen:n(3303),negate:n(435),inverse:n(2073),normalize:n(899),dot:n(9305),cross:n(903),lerp:n(1868),random:n(6660),transformMat4:n(3255),transformMat3:n(9908),transformQuat:n(6568),rotateX:n(392),rotateY:n(3222),rotateZ:n(3388),forEach:n(7447)}},2073:function(p){p.exports=function(s,n){return s[0]=1/n[0],s[1]=1/n[1],s[2]=1/n[2],s}},1468:function(p,s,n){p.exports=n(4693)},4693:function(p){p.exports=function(s){var n=s[0],a=s[1],r=s[2];return Math.sqrt(n*n+a*a+r*r)}},1868:function(p){p.exports=function(s,n,a,r){var i=n[0],l=n[1],u=n[2];return s[0]=i+r*(a[0]-i),s[1]=l+r*(a[1]-l),s[2]=u+r*(a[2]-u),s}},1716:function(p){p.exports=function(s,n,a){return s[0]=Math.max(n[0],a[0]),s[1]=Math.max(n[1],a[1]),s[2]=Math.max(n[2],a[2]),s}},3605:function(p){p.exports=function(s,n,a){return s[0]=Math.min(n[0],a[0]),s[1]=Math.min(n[1],a[1]),s[2]=Math.min(n[2],a[2]),s}},5733:function(p,s,n){p.exports=n(105)},105:function(p){p.exports=function(s,n,a){return s[0]=n[0]*a[0],s[1]=n[1]*a[1],s[2]=n[2]*a[2],s}},435:function(p){p.exports=function(s,n){return s[0]=-n[0],s[1]=-n[1],s[2]=-n[2],s}},899:function(p){p.exports=function(s,n){var a=n[0],r=n[1],i=n[2],l=a*a+r*r+i*i;return l>0&&(l=1/Math.sqrt(l),s[0]=n[0]*l,s[1]=n[1]*l,s[2]=n[2]*l),s}},6660:function(p){p.exports=function(s,n){n=n||1;var a=2*Math.random()*Math.PI,r=2*Math.random()-1,i=Math.sqrt(1-r*r)*n;return s[0]=Math.cos(a)*i,s[1]=Math.sin(a)*i,s[2]=r*n,s}},392:function(p){p.exports=function(s,n,a,r){var i=a[1],l=a[2],u=n[1]-i,c=n[2]-l,g=Math.sin(r),f=Math.cos(r);return s[0]=n[0],s[1]=i+u*f-c*g,s[2]=l+u*g+c*f,s}},3222:function(p){p.exports=function(s,n,a,r){var i=a[0],l=a[2],u=n[0]-i,c=n[2]-l,g=Math.sin(r),f=Math.cos(r);return s[0]=i+c*g+u*f,s[1]=n[1],s[2]=l+c*f-u*g,s}},3388:function(p){p.exports=function(s,n,a,r){var i=a[0],l=a[1],u=n[0]-i,c=n[1]-l,g=Math.sin(r),f=Math.cos(r);return s[0]=i+u*f-c*g,s[1]=l+u*g+c*f,s[2]=n[2],s}},1624:function(p){p.exports=function(s,n){return s[0]=Math.round(n[0]),s[1]=Math.round(n[1]),s[2]=Math.round(n[2]),s}},5685:function(p){p.exports=function(s,n,a){return s[0]=n[0]*a,s[1]=n[1]*a,s[2]=n[2]*a,s}},6722:function(p){p.exports=function(s,n,a,r){return s[0]=n[0]+a[0]*r,s[1]=n[1]+a[1]*r,s[2]=n[2]+a[2]*r,s}},831:function(p){p.exports=function(s,n,a,r){return s[0]=n,s[1]=a,s[2]=r,s}},5294:function(p,s,n){p.exports=n(6403)},3303:function(p,s,n){p.exports=n(4337)},6403:function(p){p.exports=function(s,n){var a=n[0]-s[0],r=n[1]-s[1],i=n[2]-s[2];return a*a+r*r+i*i}},4337:function(p){p.exports=function(s){var n=s[0],a=s[1],r=s[2];return n*n+a*a+r*r}},8921:function(p,s,n){p.exports=n(911)},911:function(p){p.exports=function(s,n,a){return s[0]=n[0]-a[0],s[1]=n[1]-a[1],s[2]=n[2]-a[2],s}},9908:function(p){p.exports=function(s,n,a){var r=n[0],i=n[1],l=n[2];return s[0]=r*a[0]+i*a[3]+l*a[6],s[1]=r*a[1]+i*a[4]+l*a[7],s[2]=r*a[2]+i*a[5]+l*a[8],s}},3255:function(p){p.exports=function(s,n,a){var r=n[0],i=n[1],l=n[2],u=a[3]*r+a[7]*i+a[11]*l+a[15];return u=u||1,s[0]=(a[0]*r+a[4]*i+a[8]*l+a[12])/u,s[1]=(a[1]*r+a[5]*i+a[9]*l+a[13])/u,s[2]=(a[2]*r+a[6]*i+a[10]*l+a[14])/u,s}},6568:function(p){p.exports=function(s,n,a){var r=n[0],i=n[1],l=n[2],u=a[0],c=a[1],g=a[2],f=a[3],b=f*r+c*l-g*i,v=f*i+g*r-u*l,d=f*l+u*i-c*r,m=-u*r-c*i-g*l;return s[0]=b*f+m*-u+v*-g-d*-c,s[1]=v*f+m*-c+d*-u-b*-g,s[2]=d*f+m*-g+b*-c-v*-u,s}},3433:function(p){p.exports=function(s,n,a){return s[0]=n[0]+a[0],s[1]=n[1]+a[1],s[2]=n[2]+a[2],s[3]=n[3]+a[3],s}},1413:function(p){p.exports=function(s){var n=new Float32Array(4);return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n}},3470:function(p){p.exports=function(s,n){return s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s}},5313:function(p){p.exports=function(){var s=new Float32Array(4);return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s}},5446:function(p){p.exports=function(s,n){var a=n[0]-s[0],r=n[1]-s[1],i=n[2]-s[2],l=n[3]-s[3];return Math.sqrt(a*a+r*r+i*i+l*l)}},205:function(p){p.exports=function(s,n,a){return s[0]=n[0]/a[0],s[1]=n[1]/a[1],s[2]=n[2]/a[2],s[3]=n[3]/a[3],s}},4242:function(p){p.exports=function(s,n){return s[0]*n[0]+s[1]*n[1]+s[2]*n[2]+s[3]*n[3]}},5680:function(p){p.exports=function(s,n,a,r){var i=new Float32Array(4);return i[0]=s,i[1]=n,i[2]=a,i[3]=r,i}},4020:function(p,s,n){p.exports={create:n(5313),clone:n(1413),fromValues:n(5680),copy:n(3470),set:n(6453),add:n(3433),subtract:n(2705),multiply:n(746),divide:n(205),min:n(2170),max:n(3030),scale:n(5510),scaleAndAdd:n(4224),distance:n(5446),squaredDistance:n(1542),length:n(8177),squaredLength:n(9037),negate:n(6459),inverse:n(8057),normalize:n(381),dot:n(4242),lerp:n(8746),random:n(3770),transformMat4:n(6342),transformQuat:n(5022)}},8057:function(p){p.exports=function(s,n){return s[0]=1/n[0],s[1]=1/n[1],s[2]=1/n[2],s[3]=1/n[3],s}},8177:function(p){p.exports=function(s){var n=s[0],a=s[1],r=s[2],i=s[3];return Math.sqrt(n*n+a*a+r*r+i*i)}},8746:function(p){p.exports=function(s,n,a,r){var i=n[0],l=n[1],u=n[2],c=n[3];return s[0]=i+r*(a[0]-i),s[1]=l+r*(a[1]-l),s[2]=u+r*(a[2]-u),s[3]=c+r*(a[3]-c),s}},3030:function(p){p.exports=function(s,n,a){return s[0]=Math.max(n[0],a[0]),s[1]=Math.max(n[1],a[1]),s[2]=Math.max(n[2],a[2]),s[3]=Math.max(n[3],a[3]),s}},2170:function(p){p.exports=function(s,n,a){return s[0]=Math.min(n[0],a[0]),s[1]=Math.min(n[1],a[1]),s[2]=Math.min(n[2],a[2]),s[3]=Math.min(n[3],a[3]),s}},746:function(p){p.exports=function(s,n,a){return s[0]=n[0]*a[0],s[1]=n[1]*a[1],s[2]=n[2]*a[2],s[3]=n[3]*a[3],s}},6459:function(p){p.exports=function(s,n){return s[0]=-n[0],s[1]=-n[1],s[2]=-n[2],s[3]=-n[3],s}},381:function(p){p.exports=function(s,n){var a=n[0],r=n[1],i=n[2],l=n[3],u=a*a+r*r+i*i+l*l;return u>0&&(u=1/Math.sqrt(u),s[0]=a*u,s[1]=r*u,s[2]=i*u,s[3]=l*u),s}},3770:function(p,s,n){var a=n(381),r=n(5510);p.exports=function(i,l){return l=l||1,i[0]=Math.random(),i[1]=Math.random(),i[2]=Math.random(),i[3]=Math.random(),a(i,i),r(i,i,l),i}},5510:function(p){p.exports=function(s,n,a){return s[0]=n[0]*a,s[1]=n[1]*a,s[2]=n[2]*a,s[3]=n[3]*a,s}},4224:function(p){p.exports=function(s,n,a,r){return s[0]=n[0]+a[0]*r,s[1]=n[1]+a[1]*r,s[2]=n[2]+a[2]*r,s[3]=n[3]+a[3]*r,s}},6453:function(p){p.exports=function(s,n,a,r,i){return s[0]=n,s[1]=a,s[2]=r,s[3]=i,s}},1542:function(p){p.exports=function(s,n){var a=n[0]-s[0],r=n[1]-s[1],i=n[2]-s[2],l=n[3]-s[3];return a*a+r*r+i*i+l*l}},9037:function(p){p.exports=function(s){var n=s[0],a=s[1],r=s[2],i=s[3];return n*n+a*a+r*r+i*i}},2705:function(p){p.exports=function(s,n,a){return s[0]=n[0]-a[0],s[1]=n[1]-a[1],s[2]=n[2]-a[2],s[3]=n[3]-a[3],s}},6342:function(p){p.exports=function(s,n,a){var r=n[0],i=n[1],l=n[2],u=n[3];return s[0]=a[0]*r+a[4]*i+a[8]*l+a[12]*u,s[1]=a[1]*r+a[5]*i+a[9]*l+a[13]*u,s[2]=a[2]*r+a[6]*i+a[10]*l+a[14]*u,s[3]=a[3]*r+a[7]*i+a[11]*l+a[15]*u,s}},5022:function(p){p.exports=function(s,n,a){var r=n[0],i=n[1],l=n[2],u=a[0],c=a[1],g=a[2],f=a[3],b=f*r+c*l-g*i,v=f*i+g*r-u*l,d=f*l+u*i-c*r,m=-u*r-c*i-g*l;return s[0]=b*f+m*-u+v*-g-d*-c,s[1]=v*f+m*-c+d*-u-b*-g,s[2]=d*f+m*-g+b*-c-v*-u,s[3]=n[3],s}},9365:function(p,s,n){var a=n(8096),r=n(7896);p.exports=function(i){for(var l=Array.isArray(i)?i:a(i),u=0;u<l.length;u++){var c=l[u];if(c.type==="preprocessor"){var g=c.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(g&&g[2]){var f=g[1],b=g[2];return(f?r(b):b).trim()}}}}},3193:function(p,s,n){p.exports=function(I){var z,F,U,R=0,j=0,Z=c,B=[],q=[],V=1,ne=0,ee=0,$=!1,J=!1,K="",te=i,ie=a;(I=I||{}).version==="300 es"&&(te=u,ie=l);var ae={},se={};for(R=0;R<te.length;R++)ae[te[R]]=!0;for(R=0;R<ie.length;R++)se[ie[R]]=!0;return function(pe){return q=[],pe!==null?function(Ee){var Te;for(R=0,Ee.toString&&(Ee=Ee.toString()),K+=Ee.replace(/\r\n/g,`
`),U=K.length;z=K[R],R<U;){switch(Te=R,Z){case f:R=be();break;case b:case v:R=ve();break;case d:R=me();break;case m:R=_e();break;case L:R=we();break;case x:R=oe();break;case g:R=le();break;case E:R=ge();break;case c:R=de()}Te!==R&&(K[Te]===`
`?(ne=0,++V):++ne)}return j+=R,K=K.slice(R),q}(pe):(B.length&&ce(B.join("")),Z=k,ce("(eof)"),q)};function ce(pe){pe.length&&q.push({type:P[Z],data:pe,position:ee,line:V,column:ne})}function de(){return B=B.length?[]:B,F==="/"&&z==="*"?(ee=j+R-1,Z=f,F=z,R+1):F==="/"&&z==="/"?(ee=j+R-1,Z=b,F=z,R+1):z==="#"?(Z=v,ee=j+R,R):/\s/.test(z)?(Z=E,ee=j+R,R):($=/\d/.test(z),J=/[^\w_]/.test(z),ee=j+R,Z=$?m:J?d:g,R)}function ge(){return/[^\s]/g.test(z)?(ce(B.join("")),Z=c,R):(B.push(z),F=z,R+1)}function ve(){return z!=="\r"&&z!==`
`||F==="\\"?(B.push(z),F=z,R+1):(ce(B.join("")),Z=c,R)}function be(){return z==="/"&&F==="*"?(B.push(z),ce(B.join("")),Z=c,R+1):(B.push(z),F=z,R+1)}function me(){if(F==="."&&/\d/.test(z))return Z=x,R;if(F==="/"&&z==="*")return Z=f,R;if(F==="/"&&z==="/")return Z=b,R;if(z==="."&&B.length){for(;Se(B););return Z=x,R}if(z===";"||z===")"||z==="("){if(B.length)for(;Se(B););return ce(z),Z=c,R+1}var pe=B.length===2&&z!=="=";if(/[\w_\d\s]/.test(z)||pe){for(;Se(B););return Z=c,R}return B.push(z),F=z,R+1}function Se(pe){for(var Ee,Te,Me=0;;){if(Ee=r.indexOf(pe.slice(0,pe.length+Me).join("")),Te=r[Ee],Ee===-1){if(Me--+pe.length>0)continue;Te=pe.slice(0,1).join("")}return ce(Te),ee+=Te.length,(B=B.slice(Te.length)).length}}function we(){return/[^a-fA-F0-9]/.test(z)?(ce(B.join("")),Z=c,R):(B.push(z),F=z,R+1)}function _e(){return z==="."||/[eE]/.test(z)?(B.push(z),Z=x,F=z,R+1):z==="x"&&B.length===1&&B[0]==="0"?(Z=L,B.push(z),F=z,R+1):/[^\d]/.test(z)?(ce(B.join("")),Z=c,R):(B.push(z),F=z,R+1)}function oe(){return z==="f"&&(B.push(z),F=z,R+=1),/[eE]/.test(z)?(B.push(z),F=z,R+1):(z!=="-"&&z!=="+"||!/[eE]/.test(F))&&/[^\d]/.test(z)?(ce(B.join("")),Z=c,R):(B.push(z),F=z,R+1)}function le(){if(/[^\d\w_]/.test(z)){var pe=B.join("");return Z=se[pe]?h:ae[pe]?T:y,ce(B.join("")),Z=c,R}return B.push(z),F=z,R+1}};var a=n(399),r=n(9746),i=n(9525),l=n(9458),u=n(3585),c=999,g=9999,f=0,b=1,v=2,d=3,m=4,x=5,y=6,T=7,h=8,E=9,k=10,L=11,P=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3585:function(p,s,n){var a=n(9525);a=a.slice().filter(function(r){return!/^(gl\_|texture)/.test(r)}),p.exports=a.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},9525:function(p){p.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},9458:function(p,s,n){var a=n(399);p.exports=a.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},399:function(p){p.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},9746:function(p){p.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},8096:function(p,s,n){var a=n(3193);p.exports=function(r,i){var l=a(i),u=[];return(u=u.concat(l(r))).concat(l(null))}},6832:function(p){p.exports=function(s){typeof s=="string"&&(s=[s]);for(var n=[].slice.call(arguments,1),a=[],r=0;r<s.length-1;r++)a.push(s[r],n[r]||"");return a.push(s[r]),a.join("")}},5233:function(p,s,n){var a=n(4846);p.exports=a&&function(){var r=!1;try{var i=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,i),window.removeEventListener("test",null,i)}catch{r=!1}return r}()},2183:function(p,s,n){p.exports=function(b,v){var d=b.length;if(d===0)throw new Error("Must have at least d+1 points");var m=b[0].length;if(d<=m)throw new Error("Must input at least d+1 points");var x=b.slice(0,m+1),y=a.apply(void 0,x);if(y===0)throw new Error("Input not in general position");for(var T=new Array(m+1),h=0;h<=m;++h)T[h]=h;y<0&&(T[0]=1,T[1]=0);var E=new i(T,new Array(m+1),!1),k=E.adjacent,L=new Array(m+2);for(h=0;h<=m;++h){for(var P=T.slice(),I=0;I<=m;++I)I===h&&(P[I]=-1);var z=P[0];P[0]=P[1],P[1]=z;var F=new i(P,new Array(m+1),!0);k[h]=F,L[h]=F}for(L[m+1]=E,h=0;h<=m;++h){P=k[h].vertices;var U=k[h].adjacent;for(I=0;I<=m;++I){var R=P[I];if(R<0)U[I]=E;else for(var j=0;j<=m;++j)k[j].vertices.indexOf(R)<0&&(U[I]=k[j])}}var Z=new g(m,x,L),B=!!v;for(h=m+1;h<d;++h)Z.insert(b[h],B);return Z.boundary()};var a=n(417),r=n(8211).H;function i(b,v,d){this.vertices=b,this.adjacent=v,this.boundary=d,this.lastVisited=-1}function l(b,v,d){this.vertices=b,this.cell=v,this.index=d}function u(b,v){return r(b.vertices,v.vertices)}i.prototype.flip=function(){var b=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=b;var v=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=v};var c=[];function g(b,v,d){this.dimension=b,this.vertices=v,this.simplices=d,this.interior=d.filter(function(T){return!T.boundary}),this.tuple=new Array(b+1);for(var m=0;m<=b;++m)this.tuple[m]=this.vertices[m];var x,y=c[b];y||(y=c[b]=((x=a[b+1])||(x=a),function(T){return function(){var h=this.tuple;return T.apply(this,h)}}(x))),this.orient=y}var f=g.prototype;f.handleBoundaryDegeneracy=function(b,v){var d=this.dimension,m=this.vertices.length-1,x=this.tuple,y=this.vertices,T=[b];for(b.lastVisited=-m;T.length>0;)for(var h=(b=T.pop()).adjacent,E=0;E<=d;++E){var k=h[E];if(k.boundary&&!(k.lastVisited<=-m)){for(var L=k.vertices,P=0;P<=d;++P){var I=L[P];x[P]=I<0?v:y[I]}var z=this.orient();if(z>0)return k;k.lastVisited=-m,z===0&&T.push(k)}}return null},f.walk=function(b,v){var d=this.vertices.length-1,m=this.dimension,x=this.vertices,y=this.tuple,T=v?this.interior.length*Math.random()|0:this.interior.length-1,h=this.interior[T];e:for(;!h.boundary;){for(var E=h.vertices,k=h.adjacent,L=0;L<=m;++L)y[L]=x[E[L]];for(h.lastVisited=d,L=0;L<=m;++L){var P=k[L];if(!(P.lastVisited>=d)){var I=y[L];y[L]=b;var z=this.orient();if(y[L]=I,z<0){h=P;continue e}P.boundary?P.lastVisited=-d:P.lastVisited=d}}return}return h},f.addPeaks=function(b,v){var d=this.vertices.length-1,m=this.dimension,x=this.vertices,y=this.tuple,T=this.interior,h=this.simplices,E=[v];v.lastVisited=d,v.vertices[v.vertices.indexOf(-1)]=d,v.boundary=!1,T.push(v);for(var k=[];E.length>0;){var L=(v=E.pop()).vertices,P=v.adjacent,I=L.indexOf(d);if(!(I<0)){for(var z=0;z<=m;++z)if(z!==I){var F=P[z];if(F.boundary&&!(F.lastVisited>=d)){var U=F.vertices;if(F.lastVisited!==-d){for(var R=0,j=0;j<=m;++j)U[j]<0?(R=j,y[j]=b):y[j]=x[U[j]];if(this.orient()>0){U[R]=d,F.boundary=!1,T.push(F),E.push(F),F.lastVisited=d;continue}F.lastVisited=-d}var Z=F.adjacent,B=L.slice(),q=P.slice(),V=new i(B,q,!0);h.push(V);var ne=Z.indexOf(v);if(!(ne<0))for(Z[ne]=V,q[I]=F,B[z]=-1,q[z]=v,P[z]=V,V.flip(),j=0;j<=m;++j){var ee=B[j];if(!(ee<0||ee===d)){for(var $=new Array(m-1),J=0,K=0;K<=m;++K){var te=B[K];te<0||K===j||($[J++]=te)}k.push(new l($,V,j))}}}}}}for(k.sort(u),z=0;z+1<k.length;z+=2){var ie=k[z],ae=k[z+1],se=ie.index,ce=ae.index;se<0||ce<0||(ie.cell.adjacent[ie.index]=ae.cell,ae.cell.adjacent[ae.index]=ie.cell)}},f.insert=function(b,v){var d=this.vertices;d.push(b);var m=this.walk(b,v);if(m){for(var x=this.dimension,y=this.tuple,T=0;T<=x;++T){var h=m.vertices[T];y[T]=h<0?b:d[h]}var E=this.orient(y);E<0||(E!==0||(m=this.handleBoundaryDegeneracy(m,b)))&&this.addPeaks(b,m)}},f.boundary=function(){for(var b=this.dimension,v=[],d=this.simplices,m=d.length,x=0;x<m;++x){var y=d[x];if(y.boundary){for(var T=new Array(b),h=y.vertices,E=0,k=0,L=0;L<=b;++L)h[L]>=0?T[E++]=h[L]:k=1&L;if(k===(1&b)){var P=T[0];T[0]=T[1],T[1]=P}v.push(T)}}return v}},9014:function(p,s,n){var a=n(5070);function r(E,k,L,P,I){this.mid=E,this.left=k,this.right=L,this.leftPoints=P,this.rightPoints=I,this.count=(k?k.count:0)+(L?L.count:0)+P.length}p.exports=function(E){return E&&E.length!==0?new T(y(E)):new T(null)};var i=r.prototype;function l(E,k){E.mid=k.mid,E.left=k.left,E.right=k.right,E.leftPoints=k.leftPoints,E.rightPoints=k.rightPoints,E.count=k.count}function u(E,k){var L=y(k);E.mid=L.mid,E.left=L.left,E.right=L.right,E.leftPoints=L.leftPoints,E.rightPoints=L.rightPoints,E.count=L.count}function c(E,k){var L=E.intervals([]);L.push(k),u(E,L)}function g(E,k){var L=E.intervals([]),P=L.indexOf(k);return P<0?0:(L.splice(P,1),u(E,L),1)}function f(E,k,L){for(var P=0;P<E.length&&E[P][0]<=k;++P){var I=L(E[P]);if(I)return I}}function b(E,k,L){for(var P=E.length-1;P>=0&&E[P][1]>=k;--P){var I=L(E[P]);if(I)return I}}function v(E,k){for(var L=0;L<E.length;++L){var P=k(E[L]);if(P)return P}}function d(E,k){return E-k}function m(E,k){return E[0]-k[0]||E[1]-k[1]}function x(E,k){return E[1]-k[1]||E[0]-k[0]}function y(E){if(E.length===0)return null;for(var k=[],L=0;L<E.length;++L)k.push(E[L][0],E[L][1]);k.sort(d);var P=k[k.length>>1],I=[],z=[],F=[];for(L=0;L<E.length;++L){var U=E[L];U[1]<P?I.push(U):P<U[0]?z.push(U):F.push(U)}var R=F,j=F.slice();return R.sort(m),j.sort(x),new r(P,y(I),y(z),R,j)}function T(E){this.root=E}i.intervals=function(E){return E.push.apply(E,this.leftPoints),this.left&&this.left.intervals(E),this.right&&this.right.intervals(E),E},i.insert=function(E){var k=this.count-this.leftPoints.length;if(this.count+=1,E[1]<this.mid)this.left?4*(this.left.count+1)>3*(k+1)?c(this,E):this.left.insert(E):this.left=y([E]);else if(E[0]>this.mid)this.right?4*(this.right.count+1)>3*(k+1)?c(this,E):this.right.insert(E):this.right=y([E]);else{var L=a.ge(this.leftPoints,E,m),P=a.ge(this.rightPoints,E,x);this.leftPoints.splice(L,0,E),this.rightPoints.splice(P,0,E)}},i.remove=function(E){var k=this.count-this.leftPoints;if(E[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(k-1)?g(this,E):(z=this.left.remove(E))===2?(this.left=null,this.count-=1,1):(z===1&&(this.count-=1),z):0;if(E[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(k-1)?g(this,E):(z=this.right.remove(E))===2?(this.right=null,this.count-=1,1):(z===1&&(this.count-=1),z):0;if(this.count===1)return this.leftPoints[0]===E?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===E){if(this.left&&this.right){for(var L=this,P=this.left;P.right;)L=P,P=P.right;if(L===this)P.right=this.right;else{var I=this.left,z=this.right;L.count-=P.count,L.right=P.left,P.left=I,P.right=z}l(this,P),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?l(this,this.left):l(this,this.right);return 1}for(I=a.ge(this.leftPoints,E,m);I<this.leftPoints.length&&this.leftPoints[I][0]===E[0];++I)if(this.leftPoints[I]===E){for(this.count-=1,this.leftPoints.splice(I,1),z=a.ge(this.rightPoints,E,x);z<this.rightPoints.length&&this.rightPoints[z][1]===E[1];++z)if(this.rightPoints[z]===E)return this.rightPoints.splice(z,1),1}return 0},i.queryPoint=function(E,k){return E<this.mid?this.left&&(L=this.left.queryPoint(E,k))?L:f(this.leftPoints,E,k):E>this.mid?this.right&&(L=this.right.queryPoint(E,k))?L:b(this.rightPoints,E,k):v(this.leftPoints,k);var L},i.queryInterval=function(E,k,L){var P;return E<this.mid&&this.left&&(P=this.left.queryInterval(E,k,L))||k>this.mid&&this.right&&(P=this.right.queryInterval(E,k,L))?P:k<this.mid?f(this.leftPoints,k,L):E>this.mid?b(this.rightPoints,E,L):v(this.leftPoints,L)};var h=T.prototype;h.insert=function(E){this.root?this.root.insert(E):this.root=new r(E[0],null,null,[E],[E])},h.remove=function(E){if(this.root){var k=this.root.remove(E);return k===2&&(this.root=null),k!==0}return!1},h.queryPoint=function(E,k){if(this.root)return this.root.queryPoint(E,k)},h.queryInterval=function(E,k,L){if(E<=k&&this.root)return this.root.queryInterval(E,k,L)},Object.defineProperty(h,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(h,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},9560:function(p){p.exports=function(s){for(var n=new Array(s),a=0;a<s;++a)n[a]=a;return n}},4846:function(p){p.exports=!0},4780:function(p){function s(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}p.exports=function(n){return n!=null&&(s(n)||function(a){return typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&s(a.slice(0,0))}(n)||!!n._isBuffer)}},3596:function(p){p.exports=function(s){for(var n,a=s.length,r=0;r<a;r++)if(((n=s.charCodeAt(r))<9||n>13)&&n!==32&&n!==133&&n!==160&&n!==5760&&n!==6158&&(n<8192||n>8205)&&n!==8232&&n!==8233&&n!==8239&&n!==8287&&n!==8288&&n!==12288&&n!==65279)return!1;return!0}},3578:function(p){p.exports=function(s,n,a){return s*(1-a)+n*a}},7191:function(p,s,n){var a=n(4690),r=n(9823),i=n(7332),l=n(7787),u=n(7437),c=n(2142),g={length:n(4693),normalize:n(899),dot:n(9305),cross:n(903)},f=r(),b=r(),v=[0,0,0,0],d=[[0,0,0],[0,0,0],[0,0,0]],m=[0,0,0];function x(y,T,h,E,k){y[0]=T[0]*E+h[0]*k,y[1]=T[1]*E+h[1]*k,y[2]=T[2]*E+h[2]*k}p.exports=function(y,T,h,E,k,L){if(T||(T=[0,0,0]),h||(h=[0,0,0]),E||(E=[0,0,0]),k||(k=[0,0,0,1]),L||(L=[0,0,0,1]),!a(f,y)||(i(b,f),b[3]=0,b[7]=0,b[11]=0,b[15]=1,Math.abs(l(b)<1e-8)))return!1;var P,I,z,F,U,R,j,Z=f[3],B=f[7],q=f[11],V=f[12],ne=f[13],ee=f[14],$=f[15];if(Z!==0||B!==0||q!==0){if(v[0]=Z,v[1]=B,v[2]=q,v[3]=$,!u(b,b))return!1;c(b,b),P=k,z=b,F=(I=v)[0],U=I[1],R=I[2],j=I[3],P[0]=z[0]*F+z[4]*U+z[8]*R+z[12]*j,P[1]=z[1]*F+z[5]*U+z[9]*R+z[13]*j,P[2]=z[2]*F+z[6]*U+z[10]*R+z[14]*j,P[3]=z[3]*F+z[7]*U+z[11]*R+z[15]*j}else k[0]=k[1]=k[2]=0,k[3]=1;if(T[0]=V,T[1]=ne,T[2]=ee,function(K,te){K[0][0]=te[0],K[0][1]=te[1],K[0][2]=te[2],K[1][0]=te[4],K[1][1]=te[5],K[1][2]=te[6],K[2][0]=te[8],K[2][1]=te[9],K[2][2]=te[10]}(d,f),h[0]=g.length(d[0]),g.normalize(d[0],d[0]),E[0]=g.dot(d[0],d[1]),x(d[1],d[1],d[0],1,-E[0]),h[1]=g.length(d[1]),g.normalize(d[1],d[1]),E[0]/=h[1],E[1]=g.dot(d[0],d[2]),x(d[2],d[2],d[0],1,-E[1]),E[2]=g.dot(d[1],d[2]),x(d[2],d[2],d[1],1,-E[2]),h[2]=g.length(d[2]),g.normalize(d[2],d[2]),E[1]/=h[2],E[2]/=h[2],g.cross(m,d[1],d[2]),g.dot(d[0],m)<0)for(var J=0;J<3;J++)h[J]*=-1,d[J][0]*=-1,d[J][1]*=-1,d[J][2]*=-1;return L[0]=.5*Math.sqrt(Math.max(1+d[0][0]-d[1][1]-d[2][2],0)),L[1]=.5*Math.sqrt(Math.max(1-d[0][0]+d[1][1]-d[2][2],0)),L[2]=.5*Math.sqrt(Math.max(1-d[0][0]-d[1][1]+d[2][2],0)),L[3]=.5*Math.sqrt(Math.max(1+d[0][0]+d[1][1]+d[2][2],0)),d[2][1]>d[1][2]&&(L[0]=-L[0]),d[0][2]>d[2][0]&&(L[1]=-L[1]),d[1][0]>d[0][1]&&(L[2]=-L[2]),!0}},4690:function(p){p.exports=function(s,n){var a=n[15];if(a===0)return!1;for(var r=1/a,i=0;i<16;i++)s[i]=n[i]*r;return!0}},7649:function(p,s,n){var a=n(1868),r=n(1102),i=n(7191),l=n(7787),u=n(1116),c=b(),g=b(),f=b();function b(){return{translate:v(),scale:v(1),skew:v(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function v(d){return[d||0,d||0,d||0]}p.exports=function(d,m,x,y){if(l(m)===0||l(x)===0)return!1;var T=i(m,c.translate,c.scale,c.skew,c.perspective,c.quaternion),h=i(x,g.translate,g.scale,g.skew,g.perspective,g.quaternion);return!(!T||!h||(a(f.translate,c.translate,g.translate,y),a(f.skew,c.skew,g.skew,y),a(f.scale,c.scale,g.scale,y),a(f.perspective,c.perspective,g.perspective,y),u(f.quaternion,c.quaternion,g.quaternion,y),r(d,f.translate,f.scale,f.skew,f.perspective,f.quaternion),0))}},1102:function(p,s,n){var a={identity:n(9947),translate:n(998),multiply:n(104),create:n(9823),scale:n(3668),fromRotationTranslation:n(7280)},r=(a.create(),a.create());p.exports=function(i,l,u,c,g,f){return a.identity(i),a.fromRotationTranslation(i,f,l),i[3]=g[0],i[7]=g[1],i[11]=g[2],i[15]=g[3],a.identity(r),c[2]!==0&&(r[9]=c[2],a.multiply(i,i,r)),c[1]!==0&&(r[9]=0,r[8]=c[1],a.multiply(i,i,r)),c[0]!==0&&(r[8]=0,r[4]=c[0],a.multiply(i,i,r)),a.scale(i,i,u),i}},9298:function(p,s,n){var a=n(5070),r=n(7649),i=n(7437),l=n(6109),u=n(7115),c=n(5240),g=n(3012),f=n(998),b=(n(3668),n(899)),v=[0,0,0];function d(y){this._components=y.slice(),this._time=[0],this.prevMatrix=y.slice(),this.nextMatrix=y.slice(),this.computedMatrix=y.slice(),this.computedInverse=y.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}p.exports=function(y){return new d((y=y||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var m=d.prototype;m.recalcMatrix=function(y){var T=this._time,h=a.le(T,y),E=this.computedMatrix;if(!(h<0)){var k=this._components;if(h===T.length-1)for(var L=16*h,P=0;P<16;++P)E[P]=k[L++];else{var I=T[h+1]-T[h],z=(L=16*h,this.prevMatrix),F=!0;for(P=0;P<16;++P)z[P]=k[L++];var U=this.nextMatrix;for(P=0;P<16;++P)U[P]=k[L++],F=F&&z[P]===U[P];if(I<1e-6||F)for(P=0;P<16;++P)E[P]=z[P];else r(E,z,U,(y-T[h])/I)}var R=this.computedUp;R[0]=E[1],R[1]=E[5],R[2]=E[9],b(R,R);var j=this.computedInverse;i(j,E);var Z=this.computedEye,B=j[15];Z[0]=j[12]/B,Z[1]=j[13]/B,Z[2]=j[14]/B;var q=this.computedCenter,V=Math.exp(this.computedRadius[0]);for(P=0;P<3;++P)q[P]=Z[P]-E[2+4*P]*V}},m.idle=function(y){if(!(y<this.lastT())){for(var T=this._components,h=T.length-16,E=0;E<16;++E)T.push(T[h++]);this._time.push(y)}},m.flush=function(y){var T=a.gt(this._time,y)-2;T<0||(this._time.splice(0,T),this._components.splice(0,16*T))},m.lastT=function(){return this._time[this._time.length-1]},m.lookAt=function(y,T,h,E){this.recalcMatrix(y),T=T||this.computedEye,h=h||v,E=E||this.computedUp,this.setMatrix(y,g(this.computedMatrix,T,h,E));for(var k=0,L=0;L<3;++L)k+=Math.pow(h[L]-T[L],2);k=Math.log(Math.sqrt(k)),this.computedRadius[0]=k},m.rotate=function(y,T,h,E){this.recalcMatrix(y);var k=this.computedInverse;T&&u(k,k,T),h&&l(k,k,h),E&&c(k,k,E),this.setMatrix(y,i(this.computedMatrix,k))};var x=[0,0,0];m.pan=function(y,T,h,E){x[0]=-(T||0),x[1]=-(h||0),x[2]=-(E||0),this.recalcMatrix(y);var k=this.computedInverse;f(k,k,x),this.setMatrix(y,i(k,k))},m.translate=function(y,T,h,E){x[0]=T||0,x[1]=h||0,x[2]=E||0,this.recalcMatrix(y);var k=this.computedMatrix;f(k,k,x),this.setMatrix(y,k)},m.setMatrix=function(y,T){if(!(y<this.lastT())){this._time.push(y);for(var h=0;h<16;++h)this._components.push(T[h])}},m.setDistance=function(y,T){this.computedRadius[0]=T},m.setDistanceLimits=function(y,T){var h=this._limits;h[0]=y,h[1]=T},m.getDistanceLimits=function(y){var T=this._limits;return y?(y[0]=T[0],y[1]=T[1],y):T}},3266:function(p,s,n){p.exports=function(r){var i=r.length;if(i<3){for(var l=new Array(i),u=0;u<i;++u)l[u]=u;return i===2&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:l}var c=new Array(i);for(u=0;u<i;++u)c[u]=u;c.sort(function(T,h){return r[T][0]-r[h][0]||r[T][1]-r[h][1]});var g=[c[0],c[1]],f=[c[0],c[1]];for(u=2;u<i;++u){for(var b=c[u],v=r[b],d=g.length;d>1&&a(r[g[d-2]],r[g[d-1]],v)<=0;)d-=1,g.pop();for(g.push(b),d=f.length;d>1&&a(r[f[d-2]],r[f[d-1]],v)>=0;)d-=1,f.pop();f.push(b)}l=new Array(f.length+g.length-2);for(var m=0,x=(u=0,g.length);u<x;++u)l[m++]=g[u];for(var y=f.length-2;y>0;--y)l[m++]=f[y];return l};var a=n(417)[3]},6145:function(p,s,n){p.exports=function(r,i){i||(i=r,r=window);var l=0,u=0,c=0,g={shift:!1,alt:!1,control:!1,meta:!1},f=!1;function b(L){var P=!1;return"altKey"in L&&(P=P||L.altKey!==g.alt,g.alt=!!L.altKey),"shiftKey"in L&&(P=P||L.shiftKey!==g.shift,g.shift=!!L.shiftKey),"ctrlKey"in L&&(P=P||L.ctrlKey!==g.control,g.control=!!L.ctrlKey),"metaKey"in L&&(P=P||L.metaKey!==g.meta,g.meta=!!L.metaKey),P}function v(L,P){var I=a.x(P),z=a.y(P);"buttons"in P&&(L=0|P.buttons),(L!==l||I!==u||z!==c||b(P))&&(l=0|L,u=I||0,c=z||0,i&&i(l,u,c,g))}function d(L){v(0,L)}function m(){(l||u||c||g.shift||g.alt||g.meta||g.control)&&(u=c=0,l=0,g.shift=g.alt=g.control=g.meta=!1,i&&i(0,0,0,g))}function x(L){b(L)&&i&&i(l,u,c,g)}function y(L){a.buttons(L)===0?v(0,L):v(l,L)}function T(L){v(l|a.buttons(L),L)}function h(L){v(l&~a.buttons(L),L)}function E(){f||(f=!0,r.addEventListener("mousemove",y),r.addEventListener("mousedown",T),r.addEventListener("mouseup",h),r.addEventListener("mouseleave",d),r.addEventListener("mouseenter",d),r.addEventListener("mouseout",d),r.addEventListener("mouseover",d),r.addEventListener("blur",m),r.addEventListener("keyup",x),r.addEventListener("keydown",x),r.addEventListener("keypress",x),r!==window&&(window.addEventListener("blur",m),window.addEventListener("keyup",x),window.addEventListener("keydown",x),window.addEventListener("keypress",x)))}E();var k={element:r};return Object.defineProperties(k,{enabled:{get:function(){return f},set:function(L){L?E():f&&(f=!1,r.removeEventListener("mousemove",y),r.removeEventListener("mousedown",T),r.removeEventListener("mouseup",h),r.removeEventListener("mouseleave",d),r.removeEventListener("mouseenter",d),r.removeEventListener("mouseout",d),r.removeEventListener("mouseover",d),r.removeEventListener("blur",m),r.removeEventListener("keyup",x),r.removeEventListener("keydown",x),r.removeEventListener("keypress",x),r!==window&&(window.removeEventListener("blur",m),window.removeEventListener("keyup",x),window.removeEventListener("keydown",x),window.removeEventListener("keypress",x)))},enumerable:!0},buttons:{get:function(){return l},enumerable:!0},x:{get:function(){return u},enumerable:!0},y:{get:function(){return c},enumerable:!0},mods:{get:function(){return g},enumerable:!0}}),k};var a=n(4110)},2565:function(p){var s={left:0,top:0};p.exports=function(n,a,r){a=a||n.currentTarget||n.srcElement,Array.isArray(r)||(r=[0,0]);var i,l=n.clientX||0,u=n.clientY||0,c=(i=a)===window||i===document||i===document.body?s:i.getBoundingClientRect();return r[0]=l-c.left,r[1]=u-c.top,r}},4110:function(p,s){function n(a){return a.target||a.srcElement||window}s.buttons=function(a){if(typeof a=="object"){if("buttons"in a)return a.buttons;if("which"in a){if((r=a.which)===2)return 4;if(r===3)return 2;if(r>0)return 1<<r-1}else if("button"in a){var r;if((r=a.button)===1)return 4;if(r===2)return 2;if(r>=0)return 1<<r}}return 0},s.element=n,s.x=function(a){if(typeof a=="object"){if("offsetX"in a)return a.offsetX;var r=n(a).getBoundingClientRect();return a.clientX-r.left}return 0},s.y=function(a){if(typeof a=="object"){if("offsetY"in a)return a.offsetY;var r=n(a).getBoundingClientRect();return a.clientY-r.top}return 0}},6475:function(p,s,n){var a=n(14);p.exports=function(r,i,l){typeof r=="function"&&(l=!!i,i=r,r=window);var u=a("ex",r),c=function(g){l&&g.preventDefault();var f=g.deltaX||0,b=g.deltaY||0,v=g.deltaZ||0,d=1;switch(g.deltaMode){case 1:d=u;break;case 2:d=window.innerHeight}if(b*=d,v*=d,(f*=d)||b||v)return i(f,b,v,g)};return r.addEventListener("wheel",c),c}},9284:function(p,s,n){var a=n(5306);p.exports=function(i){function l(v){throw new Error("ndarray-extract-contour: "+v)}typeof i!="object"&&l("Must specify arguments");var u=i.order;Array.isArray(u)||l("Must specify order");var c=i.arrayArguments||1;c<1&&l("Must have at least one array argument"),(i.scalarArguments||0)<0&&l("Scalar arg count must be > 0"),typeof i.vertex!="function"&&l("Must specify vertex creation function"),typeof i.cell!="function"&&l("Must specify cell creation function"),typeof i.phase!="function"&&l("Must specify phase function");for(var g=i.getters||[],f=new Array(c),b=0;b<c;++b)g.indexOf(b)>=0?f[b]=!0:f[b]=!1;return function(v,d,m,x,y,T){var h=[T,y].join(",");return(0,r[h])(v,d,m,a.mallocUint32,a.freeUint32)}(i.vertex,i.cell,i.phase,0,u,f)};var r={"false,0,1":function(i,l,u,c,g){return function(f,b,v,d){var m,x=0|f.shape[0],y=0|f.shape[1],T=f.data,h=0|f.offset,E=0|f.stride[0],k=0|f.stride[1],L=h,P=0|-E,I=0,z=0|-k,F=0,U=-E-k|0,R=0,j=0|E,Z=k-E*x|0,B=0,q=0,V=0,ne=2*x|0,ee=c(ne),$=c(ne),J=0,K=0,te=-1,ie=-1,ae=0,se=0|-x,ce=0|x,de=0,ge=-x-1|0,ve=x-1|0,be=0,me=0,Se=0;for(B=0;B<x;++B)ee[J++]=u(T[L],b,v,d),L+=j;if(L+=Z,y>0){if(q=1,ee[J++]=u(T[L],b,v,d),L+=j,x>0)for(B=1,m=T[L],K=ee[J]=u(m,b,v,d),ae=ee[J+te],de=ee[J+se],be=ee[J+ge],K===ae&&K===de&&K===be||(I=T[L+P],F=T[L+z],R=T[L+U],i(B,q,m,I,F,R,K,ae,de,be,b,v,d),me=$[J]=V++),J+=1,L+=j,B=2;B<x;++B)m=T[L],K=ee[J]=u(m,b,v,d),ae=ee[J+te],de=ee[J+se],be=ee[J+ge],K===ae&&K===de&&K===be||(I=T[L+P],F=T[L+z],R=T[L+U],i(B,q,m,I,F,R,K,ae,de,be,b,v,d),me=$[J]=V++,be!==ae&&l($[J+te],me,R,I,be,ae,b,v,d)),J+=1,L+=j;for(L+=Z,J=0,Se=te,te=ie,ie=Se,Se=se,se=ce,ce=Se,Se=ge,ge=ve,ve=Se,q=2;q<y;++q){if(ee[J++]=u(T[L],b,v,d),L+=j,x>0)for(B=1,m=T[L],K=ee[J]=u(m,b,v,d),ae=ee[J+te],de=ee[J+se],be=ee[J+ge],K===ae&&K===de&&K===be||(I=T[L+P],F=T[L+z],R=T[L+U],i(B,q,m,I,F,R,K,ae,de,be,b,v,d),me=$[J]=V++,be!==de&&l($[J+se],me,F,R,de,be,b,v,d)),J+=1,L+=j,B=2;B<x;++B)m=T[L],K=ee[J]=u(m,b,v,d),ae=ee[J+te],de=ee[J+se],be=ee[J+ge],K===ae&&K===de&&K===be||(I=T[L+P],F=T[L+z],R=T[L+U],i(B,q,m,I,F,R,K,ae,de,be,b,v,d),me=$[J]=V++,be!==de&&l($[J+se],me,F,R,de,be,b,v,d),be!==ae&&l($[J+te],me,R,I,be,ae,b,v,d)),J+=1,L+=j;1&q&&(J=0),Se=te,te=ie,ie=Se,Se=se,se=ce,ce=Se,Se=ge,ge=ve,ve=Se,L+=Z}}g($),g(ee)}},"false,1,0":function(i,l,u,c,g){return function(f,b,v,d){var m,x=0|f.shape[0],y=0|f.shape[1],T=f.data,h=0|f.offset,E=0|f.stride[0],k=0|f.stride[1],L=h,P=0|-E,I=0,z=0|-k,F=0,U=-E-k|0,R=0,j=0|k,Z=E-k*y|0,B=0,q=0,V=0,ne=2*y|0,ee=c(ne),$=c(ne),J=0,K=0,te=-1,ie=-1,ae=0,se=0|-y,ce=0|y,de=0,ge=-y-1|0,ve=y-1|0,be=0,me=0,Se=0;for(q=0;q<y;++q)ee[J++]=u(T[L],b,v,d),L+=j;if(L+=Z,x>0){if(B=1,ee[J++]=u(T[L],b,v,d),L+=j,y>0)for(q=1,m=T[L],K=ee[J]=u(m,b,v,d),de=ee[J+se],ae=ee[J+te],be=ee[J+ge],K===de&&K===ae&&K===be||(I=T[L+P],F=T[L+z],R=T[L+U],i(B,q,m,I,F,R,K,de,ae,be,b,v,d),me=$[J]=V++),J+=1,L+=j,q=2;q<y;++q)m=T[L],K=ee[J]=u(m,b,v,d),de=ee[J+se],ae=ee[J+te],be=ee[J+ge],K===de&&K===ae&&K===be||(I=T[L+P],F=T[L+z],R=T[L+U],i(B,q,m,I,F,R,K,de,ae,be,b,v,d),me=$[J]=V++,be!==ae&&l($[J+te],me,F,R,ae,be,b,v,d)),J+=1,L+=j;for(L+=Z,J=0,Se=se,se=ce,ce=Se,Se=te,te=ie,ie=Se,Se=ge,ge=ve,ve=Se,B=2;B<x;++B){if(ee[J++]=u(T[L],b,v,d),L+=j,y>0)for(q=1,m=T[L],K=ee[J]=u(m,b,v,d),de=ee[J+se],ae=ee[J+te],be=ee[J+ge],K===de&&K===ae&&K===be||(I=T[L+P],F=T[L+z],R=T[L+U],i(B,q,m,I,F,R,K,de,ae,be,b,v,d),me=$[J]=V++,be!==de&&l($[J+se],me,R,I,be,de,b,v,d)),J+=1,L+=j,q=2;q<y;++q)m=T[L],K=ee[J]=u(m,b,v,d),de=ee[J+se],ae=ee[J+te],be=ee[J+ge],K===de&&K===ae&&K===be||(I=T[L+P],F=T[L+z],R=T[L+U],i(B,q,m,I,F,R,K,de,ae,be,b,v,d),me=$[J]=V++,be!==ae&&l($[J+te],me,F,R,ae,be,b,v,d),be!==de&&l($[J+se],me,R,I,be,de,b,v,d)),J+=1,L+=j;1&B&&(J=0),Se=se,se=ce,ce=Se,Se=te,te=ie,ie=Se,Se=ge,ge=ve,ve=Se,L+=Z}}g($),g(ee)}}}},9144:function(p,s,n){var a=n(3094),r={zero:function(x,y,T,h){var E=x[0];h|=0;var k=0,L=T[0];for(k=0;k<E;++k)y[h]=0,h+=L},fdTemplate1:function(x,y,T,h,E,k,L){var P=x[0],I=T[0],z=-1*I,F=I;h|=0,L|=0;var U=0,R=I,j=k[0];for(U=0;U<P;++U)E[L]=.5*(y[h+z]-y[h+F]),h+=R,L+=j},fdTemplate2:function(x,y,T,h,E,k,L,P,I,z){var F=x[0],U=x[1],R=T[0],j=T[1],Z=k[0],B=k[1],q=I[0],V=I[1],ne=-1*R,ee=R,$=-1*j,J=j;h|=0,L|=0,z|=0;var K=0,te=0,ie=j,ae=R-U*j,se=B,ce=Z-U*B,de=V,ge=q-U*V;for(te=0;te<F;++te){for(K=0;K<U;++K)E[L]=.5*(y[h+ne]-y[h+ee]),P[z]=.5*(y[h+$]-y[h+J]),h+=ie,L+=se,z+=de;h+=ae,L+=ce,z+=ge}}},i={cdiff:function(x){var y={};return function(T,h,E){var k=T.dtype,L=T.order,P=h.dtype,I=h.order,z=E.dtype,F=E.order,U=[k,L.join(),P,I.join(),z,F.join()].join(),R=y[U];return R||(y[U]=R=x([k,L,P,I,z,F])),R(T.shape.slice(0),T.data,T.stride,0|T.offset,h.data,h.stride,0|h.offset,E.data,E.stride,0|E.offset)}},zero:function(x){var y={};return function(T){var h=T.dtype,E=T.order,k=[h,E.join()].join(),L=y[k];return L||(y[k]=L=x([h,E])),L(T.shape.slice(0),T.data,T.stride,0|T.offset)}},fdTemplate1:function(x){var y={};return function(T,h){var E=T.dtype,k=T.order,L=h.dtype,P=h.order,I=[E,k.join(),L,P.join()].join(),z=y[I];return z||(y[I]=z=x([E,k,L,P])),z(T.shape.slice(0),T.data,T.stride,0|T.offset,h.data,h.stride,0|h.offset)}},fdTemplate2:function(x){var y={};return function(T,h,E){var k=T.dtype,L=T.order,P=h.dtype,I=h.order,z=E.dtype,F=E.order,U=[k,L.join(),P,I.join(),z,F.join()].join(),R=y[U];return R||(y[U]=R=x([k,L,P,I,z,F])),R(T.shape.slice(0),T.data,T.stride,0|T.offset,h.data,h.stride,0|h.offset,E.data,E.stride,0|E.offset)}}};function l(x){return(0,i[x.funcName])(u.bind(void 0,x))}function u(x){return r[x.funcName]}function c(x){return l({funcName:x.funcName})}var g={},f={},b=c({funcName:"cdiff"}),v=c({funcName:"zero"});function d(x){return x in g?g[x]:g[x]=c({funcName:"fdTemplate"+x})}function m(x,y,T,h){return function(E,k){var L=k.shape.slice();return L[0]>2&&L[1]>2&&h(k.pick(-1,-1).lo(1,1).hi(L[0]-2,L[1]-2),E.pick(-1,-1,0).lo(1,1).hi(L[0]-2,L[1]-2),E.pick(-1,-1,1).lo(1,1).hi(L[0]-2,L[1]-2)),L[1]>2&&(T(k.pick(0,-1).lo(1).hi(L[1]-2),E.pick(0,-1,1).lo(1).hi(L[1]-2)),y(E.pick(0,-1,0).lo(1).hi(L[1]-2))),L[1]>2&&(T(k.pick(L[0]-1,-1).lo(1).hi(L[1]-2),E.pick(L[0]-1,-1,1).lo(1).hi(L[1]-2)),y(E.pick(L[0]-1,-1,0).lo(1).hi(L[1]-2))),L[0]>2&&(T(k.pick(-1,0).lo(1).hi(L[0]-2),E.pick(-1,0,0).lo(1).hi(L[0]-2)),y(E.pick(-1,0,1).lo(1).hi(L[0]-2))),L[0]>2&&(T(k.pick(-1,L[1]-1).lo(1).hi(L[0]-2),E.pick(-1,L[1]-1,0).lo(1).hi(L[0]-2)),y(E.pick(-1,L[1]-1,1).lo(1).hi(L[0]-2))),E.set(0,0,0,0),E.set(0,0,1,0),E.set(L[0]-1,0,0,0),E.set(L[0]-1,0,1,0),E.set(0,L[1]-1,0,0),E.set(0,L[1]-1,1,0),E.set(L[0]-1,L[1]-1,0,0),E.set(L[0]-1,L[1]-1,1,0),E}}p.exports=function(x,y,T){return Array.isArray(T)||(T=a(y.dimension,typeof T=="string"?T:"clamp")),y.size===0?x:y.dimension===0?(x.set(0),x):function(h){var E=h.join();if(I=f[E])return I;for(var k=h.length,L=[b,v],P=1;P<=k;++P)L.push(d(P));var I=m.apply(void 0,L);return f[E]=I,I}(T)(x,y)}},3581:function(p){function s(i,l){var u=Math.floor(l),c=l-u,g=0<=u&&u<i.shape[0],f=0<=u+1&&u+1<i.shape[0];return(1-c)*(g?+i.get(u):0)+c*(f?+i.get(u+1):0)}function n(i,l,u){var c=Math.floor(l),g=l-c,f=0<=c&&c<i.shape[0],b=0<=c+1&&c+1<i.shape[0],v=Math.floor(u),d=u-v,m=0<=v&&v<i.shape[1],x=0<=v+1&&v+1<i.shape[1],y=f&&m?i.get(c,v):0,T=f&&x?i.get(c,v+1):0;return(1-d)*((1-g)*y+g*(b&&m?i.get(c+1,v):0))+d*((1-g)*T+g*(b&&x?i.get(c+1,v+1):0))}function a(i,l,u,c){var g=Math.floor(l),f=l-g,b=0<=g&&g<i.shape[0],v=0<=g+1&&g+1<i.shape[0],d=Math.floor(u),m=u-d,x=0<=d&&d<i.shape[1],y=0<=d+1&&d+1<i.shape[1],T=Math.floor(c),h=c-T,E=0<=T&&T<i.shape[2],k=0<=T+1&&T+1<i.shape[2],L=b&&x&&E?i.get(g,d,T):0,P=b&&y&&E?i.get(g,d+1,T):0,I=v&&x&&E?i.get(g+1,d,T):0,z=v&&y&&E?i.get(g+1,d+1,T):0,F=b&&x&&k?i.get(g,d,T+1):0,U=b&&y&&k?i.get(g,d+1,T+1):0;return(1-h)*((1-m)*((1-f)*L+f*I)+m*((1-f)*P+f*z))+h*((1-m)*((1-f)*F+f*(v&&x&&k?i.get(g+1,d,T+1):0))+m*((1-f)*U+f*(v&&y&&k?i.get(g+1,d+1,T+1):0)))}function r(i){var l,u,c=0|i.shape.length,g=new Array(c),f=new Array(c),b=new Array(c),v=new Array(c);for(l=0;l<c;++l)u=+arguments[l+1],g[l]=Math.floor(u),f[l]=u-g[l],b[l]=0<=g[l]&&g[l]<i.shape[l],v[l]=0<=g[l]+1&&g[l]+1<i.shape[l];var d,m,x,y=0;e:for(l=0;l<1<<c;++l){for(m=1,x=i.offset,d=0;d<c;++d)if(l&1<<d){if(!v[d])continue e;m*=f[d],x+=i.stride[d]*(g[d]+1)}else{if(!b[d])continue e;m*=1-f[d],x+=i.stride[d]*g[d]}y+=m*i.data[x]}return y}p.exports=function(i,l,u,c){switch(i.shape.length){case 0:return 0;case 1:return s(i,l);case 2:return n(i,l,u);case 3:return a(i,l,u,c);default:return r.apply(void 0,arguments)}},p.exports.d1=s,p.exports.d2=n,p.exports.d3=a},7498:function(p,s){var n={"float64,2,1,0":function(){return function(u,c,g,f,b){var v=u[0],d=u[1],m=u[2],x=g[0],y=g[1],T=g[2];f|=0;var h=0,E=0,k=0,L=T,P=y-m*T,I=x-d*y;for(k=0;k<v;++k){for(E=0;E<d;++E){for(h=0;h<m;++h)c[f]/=b,f+=L;f+=P}f+=I}}},"uint8,2,0,1,float64,2,1,0":function(){return function(u,c,g,f,b,v,d,m){for(var x=u[0],y=u[1],T=u[2],h=g[0],E=g[1],k=g[2],L=v[0],P=v[1],I=v[2],z=f|=0,F=d|=0,U=0|u[0];U>0;){U<64?(x=U,U=0):(x=64,U-=64);for(var R=0|u[1];R>0;){R<64?(y=R,R=0):(y=64,R-=64),f=z+U*h+R*E,d=F+U*L+R*P;var j=0,Z=0,B=0,q=k,V=h-T*k,ne=E-x*h,ee=I,$=L-T*I,J=P-x*L;for(B=0;B<y;++B){for(Z=0;Z<x;++Z){for(j=0;j<T;++j)c[f]=b[d]*m,f+=q,d+=ee;f+=V,d+=$}f+=ne,d+=J}}}}},"float32,1,0,float32,1,0":function(){return function(u,c,g,f,b,v,d){var m=u[0],x=u[1],y=g[0],T=g[1],h=v[0],E=v[1];f|=0,d|=0;var k=0,L=0,P=T,I=y-x*T,z=E,F=h-x*E;for(L=0;L<m;++L){for(k=0;k<x;++k)c[f]=b[d],f+=P,d+=z;f+=I,d+=F}}},"float32,1,0,float32,0,1":function(){return function(u,c,g,f,b,v,d){for(var m=u[0],x=u[1],y=g[0],T=g[1],h=v[0],E=v[1],k=f|=0,L=d|=0,P=0|u[1];P>0;){P<64?(x=P,P=0):(x=64,P-=64);for(var I=0|u[0];I>0;){I<64?(m=I,I=0):(m=64,I-=64),f=k+P*T+I*y,d=L+P*E+I*h;var z=0,F=0,U=T,R=y-x*T,j=E,Z=h-x*E;for(F=0;F<m;++F){for(z=0;z<x;++z)c[f]=b[d],f+=U,d+=j;f+=R,d+=Z}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(u,c,g,f,b,v,d){for(var m=u[0],x=u[1],y=u[2],T=g[0],h=g[1],E=g[2],k=v[0],L=v[1],P=v[2],I=f|=0,z=d|=0,F=0|u[2];F>0;){F<64?(y=F,F=0):(y=64,F-=64);for(var U=0|u[0];U>0;){U<64?(m=U,U=0):(m=64,U-=64);for(var R=0|u[1];R>0;){R<64?(x=R,R=0):(x=64,R-=64),f=I+F*E+U*T+R*h,d=z+F*P+U*k+R*L;var j=0,Z=0,B=0,q=E,V=T-y*E,ne=h-m*T,ee=P,$=k-y*P,J=L-m*k;for(B=0;B<x;++B){for(Z=0;Z<m;++Z){for(j=0;j<y;++j)c[f]=b[d],f+=q,d+=ee;f+=V,d+=$}f+=ne,d+=J}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(u,c,g,f,b,v,d){var m=u[0],x=u[1],y=u[2],T=g[0],h=g[1],E=g[2],k=v[0],L=v[1],P=v[2];f|=0,d|=0;var I=0,z=0,F=0,U=E,R=T-y*E,j=h-m*T,Z=P,B=k-y*P,q=L-m*k;for(F=0;F<x;++F){for(z=0;z<m;++z){for(I=0;I<y;++I)c[f]=b[d],f+=U,d+=Z;f+=R,d+=B}f+=j,d+=q}}}},a=function(u,c){var g=c.join(",");return(0,n[g])()},r={mul:function(u){var c={};return function(g,f,b){var v=g.dtype,d=g.order,m=f.dtype,x=f.order,y=b.dtype,T=b.order,h=[v,d.join(),m,x.join(),y,T.join()].join(),E=c[h];return E||(c[h]=E=u([v,d,m,x,y,T])),E(g.shape.slice(0),g.data,g.stride,0|g.offset,f.data,f.stride,0|f.offset,b.data,b.stride,0|b.offset)}},muls:function(u){var c={};return function(g,f,b){var v=g.dtype,d=g.order,m=f.dtype,x=f.order,y=[v,d.join(),m,x.join()].join(),T=c[y];return T||(c[y]=T=u([v,d,m,x])),T(g.shape.slice(0),g.data,g.stride,0|g.offset,f.data,f.stride,0|f.offset,b)}},mulseq:function(u){var c={};return function(g,f){var b=g.dtype,v=g.order,d=[b,v.join()].join(),m=c[d];return m||(c[d]=m=u([b,v])),m(g.shape.slice(0),g.data,g.stride,0|g.offset,f)}},div:function(u){var c={};return function(g,f,b){var v=g.dtype,d=g.order,m=f.dtype,x=f.order,y=b.dtype,T=b.order,h=[v,d.join(),m,x.join(),y,T.join()].join(),E=c[h];return E||(c[h]=E=u([v,d,m,x,y,T])),E(g.shape.slice(0),g.data,g.stride,0|g.offset,f.data,f.stride,0|f.offset,b.data,b.stride,0|b.offset)}},divs:function(u){var c={};return function(g,f,b){var v=g.dtype,d=g.order,m=f.dtype,x=f.order,y=[v,d.join(),m,x.join()].join(),T=c[y];return T||(c[y]=T=u([v,d,m,x])),T(g.shape.slice(0),g.data,g.stride,0|g.offset,f.data,f.stride,0|f.offset,b)}},divseq:function(u){var c={};return function(g,f){var b=g.dtype,v=g.order,d=[b,v.join()].join(),m=c[d];return m||(c[d]=m=u([b,v])),m(g.shape.slice(0),g.data,g.stride,0|g.offset,f)}},assign:function(u){var c={};return function(g,f){var b=g.dtype,v=g.order,d=f.dtype,m=f.order,x=[b,v.join(),d,m.join()].join(),y=c[x];return y||(c[x]=y=u([b,v,d,m])),y(g.shape.slice(0),g.data,g.stride,0|g.offset,f.data,f.stride,0|f.offset)}}};function i(u){return c={funcName:u.funcName},(0,r[c.funcName])(a.bind(void 0,c));var c}var l={mul:"*",div:"/"};(function(){for(var u in l)s[u]=i({funcName:u}),s[u+"s"]=i({funcName:u+"s"}),s[u+"seq"]=i({funcName:u+"seq"})})(),s.assign=i({funcName:"assign"})},7382:function(p,s,n){var a=n(5050),r=n(9262);p.exports=function(i,l){for(var u=[],c=i,g=1;Array.isArray(c);)u.push(c.length),g*=c.length,c=c[0];return u.length===0?a():(l||(l=a(new Float64Array(g),u)),r(l,i),l)}},9262:function(p){p.exports=function(s){var n={};return function(a,r){var i=a.dtype,l=a.order,u=[i,l.join()].join(),c=n[u];return c||(n[u]=c=s([i,l])),c(a.shape.slice(0),a.data,a.stride,0|a.offset,r)}}((function(){return function(s,n,a,r,i){var l=s[0],u=s[1],c=s[2],g=a[0],f=a[1],b=a[2],v=[0,0,0];r|=0;var d=0,m=0,x=0,y=b,T=f-c*b,h=g-u*f;for(x=0;x<l;++x){for(m=0;m<u;++m){for(d=0;d<c;++d){var E,k=i;for(E=0;E<v.length-1;++E)k=k[v[E]];n[r]=k[v[v.length-1]],r+=y,++v[2]}r+=T,v[2]-=c,++v[1]}r+=h,v[1]-=u,++v[0]}}}).bind(void 0,{funcName:"convert"}))},8139:function(p,s,n){var a=n(5306);function r(c){return c==="uint32"?[a.mallocUint32,a.freeUint32]:null}var i={"uint32,1,0":function(c,g){return function(f,b,v,d,m,x,y,T,h,E,k){var L,P,I,z,F,U,R,j,Z=f*m+d,B=c(T);for(L=f+1;L<=b;++L){for(P=L,I=Z+=m,F=0,U=Z,z=0;z<T;++z)B[F++]=v[U],U+=h;e:for(;P-- >f;){F=0,U=I-m;t:for(z=0;z<T;++z){if((R=v[U])<(j=B[F]))break e;if(R>j)break t;U+=E,F+=k}for(F=I,U=I-m,z=0;z<T;++z)v[F]=v[U],F+=h,U+=h;I-=m}for(F=I,U=0,z=0;z<T;++z)v[F]=B[U++],F+=h}g(B)}}},l={"uint32,1,0":function(c,g,f){return function b(v,d,m,x,y,T,h,E,k,L,P){var I,z,F,U,R,j,Z,B,q,V,ne,ee,$,J,K,te,ie,ae,se,ce,de,ge,ve,be,me,Se=(d-v+1)/6|0,we=v+Se,_e=d-Se,oe=v+d>>1,le=oe-Se,pe=oe+Se,Ee=we,Te=le,Me=oe,Le=pe,Ie=_e,he=v+1,xe=d-1,ke=!0,ze=0,Re=0,Oe=0,Ve=E,qe=g(Ve),Je=g(Ve);ne=y*Ee,ee=y*Te,me=x;e:for(V=0;V<E;++V){if(B=ee+me,(Oe=m[Z=ne+me]-m[B])>0){z=Ee,Ee=Te,Te=z;break e}if(Oe<0)break e;me+=L}ne=y*Le,ee=y*Ie,me=x;e:for(V=0;V<E;++V){if(B=ee+me,(Oe=m[Z=ne+me]-m[B])>0){z=Le,Le=Ie,Ie=z;break e}if(Oe<0)break e;me+=L}ne=y*Ee,ee=y*Me,me=x;e:for(V=0;V<E;++V){if(B=ee+me,(Oe=m[Z=ne+me]-m[B])>0){z=Ee,Ee=Me,Me=z;break e}if(Oe<0)break e;me+=L}ne=y*Te,ee=y*Me,me=x;e:for(V=0;V<E;++V){if(B=ee+me,(Oe=m[Z=ne+me]-m[B])>0){z=Te,Te=Me,Me=z;break e}if(Oe<0)break e;me+=L}ne=y*Ee,ee=y*Le,me=x;e:for(V=0;V<E;++V){if(B=ee+me,(Oe=m[Z=ne+me]-m[B])>0){z=Ee,Ee=Le,Le=z;break e}if(Oe<0)break e;me+=L}ne=y*Me,ee=y*Le,me=x;e:for(V=0;V<E;++V){if(B=ee+me,(Oe=m[Z=ne+me]-m[B])>0){z=Me,Me=Le,Le=z;break e}if(Oe<0)break e;me+=L}ne=y*Te,ee=y*Ie,me=x;e:for(V=0;V<E;++V){if(B=ee+me,(Oe=m[Z=ne+me]-m[B])>0){z=Te,Te=Ie,Ie=z;break e}if(Oe<0)break e;me+=L}ne=y*Te,ee=y*Me,me=x;e:for(V=0;V<E;++V){if(B=ee+me,(Oe=m[Z=ne+me]-m[B])>0){z=Te,Te=Me,Me=z;break e}if(Oe<0)break e;me+=L}ne=y*Le,ee=y*Ie,me=x;e:for(V=0;V<E;++V){if(B=ee+me,(Oe=m[Z=ne+me]-m[B])>0){z=Le,Le=Ie,Ie=z;break e}if(Oe<0)break e;me+=L}for(ne=y*Ee,ee=y*Te,$=y*Me,J=y*Le,K=y*Ie,te=y*we,ie=y*oe,ae=y*_e,be=0,me=x,V=0;V<E;++V)Z=ne+me,B=ee+me,q=$+me,se=J+me,ce=K+me,de=te+me,ge=ie+me,ve=ae+me,qe[be]=m[B],Je[be]=m[se],ke=ke&&qe[be]===Je[be],F=m[Z],U=m[q],R=m[ce],m[de]=F,m[ge]=U,m[ve]=R,++be,me+=k;for(ne=y*le,ee=y*v,me=x,V=0;V<E;++V)B=ee+me,m[Z=ne+me]=m[B],me+=k;for(ne=y*pe,ee=y*d,me=x,V=0;V<E;++V)B=ee+me,m[Z=ne+me]=m[B],me+=k;if(ke)for(j=he;j<=xe;++j){for(Z=x+j*y,be=0,V=0;V<E&&(Oe=m[Z]-qe[be])==0;++V)be+=P,Z+=L;if(Oe!==0)if(Oe<0){if(j!==he)for(ne=y*j,ee=y*he,me=x,V=0;V<E;++V)B=ee+me,I=m[Z=ne+me],m[Z]=m[B],m[B]=I,me+=k;++he}else for(;;){for(Z=x+xe*y,be=0,V=0;V<E&&(Oe=m[Z]-qe[be])==0;++V)be+=P,Z+=L;if(!(Oe>0)){if(Oe<0){for(ne=y*j,ee=y*he,$=y*xe,me=x,V=0;V<E;++V)B=ee+me,q=$+me,I=m[Z=ne+me],m[Z]=m[B],m[B]=m[q],m[q]=I,me+=k;++he,--xe;break}for(ne=y*j,ee=y*xe,me=x,V=0;V<E;++V)B=ee+me,I=m[Z=ne+me],m[Z]=m[B],m[B]=I,me+=k;--xe;break}xe--}}else for(j=he;j<=xe;++j){for(Z=x+j*y,be=0,V=0;V<E&&(ze=m[Z]-qe[be])==0;++V)be+=P,Z+=L;if(ze<0){if(j!==he)for(ne=y*j,ee=y*he,me=x,V=0;V<E;++V)B=ee+me,I=m[Z=ne+me],m[Z]=m[B],m[B]=I,me+=k;++he}else{for(Z=x+j*y,be=0,V=0;V<E&&(Re=m[Z]-Je[be])==0;++V)be+=P,Z+=L;if(Re>0)for(;;){for(Z=x+xe*y,be=0,V=0;V<E&&(Oe=m[Z]-Je[be])==0;++V)be+=P,Z+=L;if(!(Oe>0)){for(Z=x+xe*y,be=0,V=0;V<E&&(Oe=m[Z]-qe[be])==0;++V)be+=P,Z+=L;if(Oe<0){for(ne=y*j,ee=y*he,$=y*xe,me=x,V=0;V<E;++V)B=ee+me,q=$+me,I=m[Z=ne+me],m[Z]=m[B],m[B]=m[q],m[q]=I,me+=k;++he,--xe}else{for(ne=y*j,ee=y*xe,me=x,V=0;V<E;++V)B=ee+me,I=m[Z=ne+me],m[Z]=m[B],m[B]=I,me+=k;--xe}break}if(--xe<j)break}}}for(ne=y*v,ee=y*(he-1),be=0,me=x,V=0;V<E;++V)B=ee+me,m[Z=ne+me]=m[B],m[B]=qe[be],++be,me+=k;for(ne=y*d,ee=y*(xe+1),be=0,me=x,V=0;V<E;++V)B=ee+me,m[Z=ne+me]=m[B],m[B]=Je[be],++be,me+=k;if(he-2-v<=32?c(v,he-2,m,x,y,T,h,E,k,L,P):b(v,he-2,m,x,y,T,h,E,k,L,P),d-(xe+2)<=32?c(xe+2,d,m,x,y,T,h,E,k,L,P):b(xe+2,d,m,x,y,T,h,E,k,L,P),ke)return f(qe),void f(Je);if(he<we&&xe>_e){e:for(;;){for(Z=x+he*y,be=0,me=x,V=0;V<E;++V){if(m[Z]!==qe[be])break e;++be,Z+=k}++he}e:for(;;){for(Z=x+xe*y,be=0,me=x,V=0;V<E;++V){if(m[Z]!==Je[be])break e;++be,Z+=k}--xe}for(j=he;j<=xe;++j){for(Z=x+j*y,be=0,V=0;V<E&&(ze=m[Z]-qe[be])==0;++V)be+=P,Z+=L;if(ze===0){if(j!==he)for(ne=y*j,ee=y*he,me=x,V=0;V<E;++V)B=ee+me,I=m[Z=ne+me],m[Z]=m[B],m[B]=I,me+=k;++he}else{for(Z=x+j*y,be=0,V=0;V<E&&(Re=m[Z]-Je[be])==0;++V)be+=P,Z+=L;if(Re===0)for(;;){for(Z=x+xe*y,be=0,V=0;V<E&&(Oe=m[Z]-Je[be])==0;++V)be+=P,Z+=L;if(Oe!==0){for(Z=x+xe*y,be=0,V=0;V<E&&(Oe=m[Z]-qe[be])==0;++V)be+=P,Z+=L;if(Oe<0){for(ne=y*j,ee=y*he,$=y*xe,me=x,V=0;V<E;++V)B=ee+me,q=$+me,I=m[Z=ne+me],m[Z]=m[B],m[B]=m[q],m[q]=I,me+=k;++he,--xe}else{for(ne=y*j,ee=y*xe,me=x,V=0;V<E;++V)B=ee+me,I=m[Z=ne+me],m[Z]=m[B],m[B]=I,me+=k;--xe}break}if(--xe<j)break}}}}f(qe),f(Je),xe-he<=32?c(he,xe,m,x,y,T,h,E,k,L,P):b(he,xe,m,x,y,T,h,E,k,L,P)}}},u={"uint32,1,0":function(c,g){return function(f){var b=f.data,v=0|f.offset,d=f.shape,m=f.stride,x=0|m[0],y=0|d[0],T=0|m[1],h=0|d[1],E=T,k=T;y<=32?c(0,y-1,b,v,x,T,y,h,E,k,1):g(0,y-1,b,v,x,T,y,h,E,k,1)}}};p.exports=function(c,g){var f=[g,c].join(","),b=u[f],v=function(m,x){var y=r(x),T=[x,m].join(","),h=i[T];return y?h(y[0],y[1]):h()}(c,g),d=function(m,x,y){var T=r(x),h=[x,m].join(","),E=l[h];return m.length>1&&T?E(y,T[0],T[1]):E(y)}(c,g,v);return b(v,d)}},8729:function(p,s,n){var a=n(8139),r={};p.exports=function(i){var l=i.order,u=i.dtype,c=[l,u].join(":"),g=r[c];return g||(r[c]=g=a(l,u)),g(i),i}},5050:function(p,s,n){var a=n(4780),r=typeof Float64Array<"u";function i(f,b){return f[0]-b[0]}function l(){var f,b=this.stride,v=new Array(b.length);for(f=0;f<v.length;++f)v[f]=[Math.abs(b[f]),f];v.sort(i);var d=new Array(v.length);for(f=0;f<d.length;++f)d[f]=v[f][1];return d}var u={T:function(f){function b(d){this.data=d}var v=b.prototype;return v.dtype=f,v.index=function(){return-1},v.size=0,v.dimension=-1,v.shape=v.stride=v.order=[],v.lo=v.hi=v.transpose=v.step=function(){return new b(this.data)},v.get=v.set=function(){},v.pick=function(){return null},function(d){return new b(d)}},0:function(f,b){function v(m,x){this.data=m,this.offset=x}var d=v.prototype;return d.dtype=f,d.index=function(){return this.offset},d.dimension=0,d.size=1,d.shape=d.stride=d.order=[],d.lo=d.hi=d.transpose=d.step=function(){return new v(this.data,this.offset)},d.pick=function(){return b(this.data)},d.valueOf=d.get=function(){return f==="generic"?this.data.get(this.offset):this.data[this.offset]},d.set=function(m){return f==="generic"?this.data.set(this.offset,m):this.data[this.offset]=m},function(m,x,y,T){return new v(m,T)}},1:function(f,b,v){function d(x,y,T,h){this.data=x,this.shape=[y],this.stride=[T],this.offset=0|h}var m=d.prototype;return m.dtype=f,m.dimension=1,Object.defineProperty(m,"size",{get:function(){return this.shape[0]}}),m.order=[0],m.set=function(x,y){return f==="generic"?this.data.set(this.offset+this.stride[0]*x,y):this.data[this.offset+this.stride[0]*x]=y},m.get=function(x){return f==="generic"?this.data.get(this.offset+this.stride[0]*x):this.data[this.offset+this.stride[0]*x]},m.index=function(x){return this.offset+this.stride[0]*x},m.hi=function(x){return new d(this.data,typeof x!="number"||x<0?this.shape[0]:0|x,this.stride[0],this.offset)},m.lo=function(x){var y=this.offset,T=0,h=this.shape[0],E=this.stride[0];return typeof x=="number"&&x>=0&&(y+=E*(T=0|x),h-=T),new d(this.data,h,E,y)},m.step=function(x){var y=this.shape[0],T=this.stride[0],h=this.offset,E=0,k=Math.ceil;return typeof x=="number"&&((E=0|x)<0?(h+=T*(y-1),y=k(-y/E)):y=k(y/E),T*=E),new d(this.data,y,T,h)},m.transpose=function(x){x=x===void 0?0:0|x;var y=this.shape,T=this.stride;return new d(this.data,y[x],T[x],this.offset)},m.pick=function(x){var y=[],T=[],h=this.offset;return typeof x=="number"&&x>=0?h=h+this.stride[0]*x|0:(y.push(this.shape[0]),T.push(this.stride[0])),(0,b[y.length+1])(this.data,y,T,h)},function(x,y,T,h){return new d(x,y[0],T[0],h)}},2:function(f,b,v){function d(x,y,T,h,E,k){this.data=x,this.shape=[y,T],this.stride=[h,E],this.offset=0|k}var m=d.prototype;return m.dtype=f,m.dimension=2,Object.defineProperty(m,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(m,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),m.set=function(x,y,T){return f==="generic"?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*y,T):this.data[this.offset+this.stride[0]*x+this.stride[1]*y]=T},m.get=function(x,y){return f==="generic"?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*y):this.data[this.offset+this.stride[0]*x+this.stride[1]*y]},m.index=function(x,y){return this.offset+this.stride[0]*x+this.stride[1]*y},m.hi=function(x,y){return new d(this.data,typeof x!="number"||x<0?this.shape[0]:0|x,typeof y!="number"||y<0?this.shape[1]:0|y,this.stride[0],this.stride[1],this.offset)},m.lo=function(x,y){var T=this.offset,h=0,E=this.shape[0],k=this.shape[1],L=this.stride[0],P=this.stride[1];return typeof x=="number"&&x>=0&&(T+=L*(h=0|x),E-=h),typeof y=="number"&&y>=0&&(T+=P*(h=0|y),k-=h),new d(this.data,E,k,L,P,T)},m.step=function(x,y){var T=this.shape[0],h=this.shape[1],E=this.stride[0],k=this.stride[1],L=this.offset,P=0,I=Math.ceil;return typeof x=="number"&&((P=0|x)<0?(L+=E*(T-1),T=I(-T/P)):T=I(T/P),E*=P),typeof y=="number"&&((P=0|y)<0?(L+=k*(h-1),h=I(-h/P)):h=I(h/P),k*=P),new d(this.data,T,h,E,k,L)},m.transpose=function(x,y){x=x===void 0?0:0|x,y=y===void 0?1:0|y;var T=this.shape,h=this.stride;return new d(this.data,T[x],T[y],h[x],h[y],this.offset)},m.pick=function(x,y){var T=[],h=[],E=this.offset;return typeof x=="number"&&x>=0?E=E+this.stride[0]*x|0:(T.push(this.shape[0]),h.push(this.stride[0])),typeof y=="number"&&y>=0?E=E+this.stride[1]*y|0:(T.push(this.shape[1]),h.push(this.stride[1])),(0,b[T.length+1])(this.data,T,h,E)},function(x,y,T,h){return new d(x,y[0],y[1],T[0],T[1],h)}},3:function(f,b,v){function d(x,y,T,h,E,k,L,P){this.data=x,this.shape=[y,T,h],this.stride=[E,k,L],this.offset=0|P}var m=d.prototype;return m.dtype=f,m.dimension=3,Object.defineProperty(m,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(m,"order",{get:function(){var x=Math.abs(this.stride[0]),y=Math.abs(this.stride[1]),T=Math.abs(this.stride[2]);return x>y?y>T?[2,1,0]:x>T?[1,2,0]:[1,0,2]:x>T?[2,0,1]:T>y?[0,1,2]:[0,2,1]}}),m.set=function(x,y,T,h){return f==="generic"?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*T,h):this.data[this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*T]=h},m.get=function(x,y,T){return f==="generic"?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*T):this.data[this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*T]},m.index=function(x,y,T){return this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*T},m.hi=function(x,y,T){return new d(this.data,typeof x!="number"||x<0?this.shape[0]:0|x,typeof y!="number"||y<0?this.shape[1]:0|y,typeof T!="number"||T<0?this.shape[2]:0|T,this.stride[0],this.stride[1],this.stride[2],this.offset)},m.lo=function(x,y,T){var h=this.offset,E=0,k=this.shape[0],L=this.shape[1],P=this.shape[2],I=this.stride[0],z=this.stride[1],F=this.stride[2];return typeof x=="number"&&x>=0&&(h+=I*(E=0|x),k-=E),typeof y=="number"&&y>=0&&(h+=z*(E=0|y),L-=E),typeof T=="number"&&T>=0&&(h+=F*(E=0|T),P-=E),new d(this.data,k,L,P,I,z,F,h)},m.step=function(x,y,T){var h=this.shape[0],E=this.shape[1],k=this.shape[2],L=this.stride[0],P=this.stride[1],I=this.stride[2],z=this.offset,F=0,U=Math.ceil;return typeof x=="number"&&((F=0|x)<0?(z+=L*(h-1),h=U(-h/F)):h=U(h/F),L*=F),typeof y=="number"&&((F=0|y)<0?(z+=P*(E-1),E=U(-E/F)):E=U(E/F),P*=F),typeof T=="number"&&((F=0|T)<0?(z+=I*(k-1),k=U(-k/F)):k=U(k/F),I*=F),new d(this.data,h,E,k,L,P,I,z)},m.transpose=function(x,y,T){x=x===void 0?0:0|x,y=y===void 0?1:0|y,T=T===void 0?2:0|T;var h=this.shape,E=this.stride;return new d(this.data,h[x],h[y],h[T],E[x],E[y],E[T],this.offset)},m.pick=function(x,y,T){var h=[],E=[],k=this.offset;return typeof x=="number"&&x>=0?k=k+this.stride[0]*x|0:(h.push(this.shape[0]),E.push(this.stride[0])),typeof y=="number"&&y>=0?k=k+this.stride[1]*y|0:(h.push(this.shape[1]),E.push(this.stride[1])),typeof T=="number"&&T>=0?k=k+this.stride[2]*T|0:(h.push(this.shape[2]),E.push(this.stride[2])),(0,b[h.length+1])(this.data,h,E,k)},function(x,y,T,h){return new d(x,y[0],y[1],y[2],T[0],T[1],T[2],h)}},4:function(f,b,v){function d(x,y,T,h,E,k,L,P,I,z){this.data=x,this.shape=[y,T,h,E],this.stride=[k,L,P,I],this.offset=0|z}var m=d.prototype;return m.dtype=f,m.dimension=4,Object.defineProperty(m,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(m,"order",{get:v}),m.set=function(x,y,T,h,E){return f==="generic"?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*T+this.stride[3]*h,E):this.data[this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*T+this.stride[3]*h]=E},m.get=function(x,y,T,h){return f==="generic"?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*T+this.stride[3]*h):this.data[this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*T+this.stride[3]*h]},m.index=function(x,y,T,h){return this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*T+this.stride[3]*h},m.hi=function(x,y,T,h){return new d(this.data,typeof x!="number"||x<0?this.shape[0]:0|x,typeof y!="number"||y<0?this.shape[1]:0|y,typeof T!="number"||T<0?this.shape[2]:0|T,typeof h!="number"||h<0?this.shape[3]:0|h,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},m.lo=function(x,y,T,h){var E=this.offset,k=0,L=this.shape[0],P=this.shape[1],I=this.shape[2],z=this.shape[3],F=this.stride[0],U=this.stride[1],R=this.stride[2],j=this.stride[3];return typeof x=="number"&&x>=0&&(E+=F*(k=0|x),L-=k),typeof y=="number"&&y>=0&&(E+=U*(k=0|y),P-=k),typeof T=="number"&&T>=0&&(E+=R*(k=0|T),I-=k),typeof h=="number"&&h>=0&&(E+=j*(k=0|h),z-=k),new d(this.data,L,P,I,z,F,U,R,j,E)},m.step=function(x,y,T,h){var E=this.shape[0],k=this.shape[1],L=this.shape[2],P=this.shape[3],I=this.stride[0],z=this.stride[1],F=this.stride[2],U=this.stride[3],R=this.offset,j=0,Z=Math.ceil;return typeof x=="number"&&((j=0|x)<0?(R+=I*(E-1),E=Z(-E/j)):E=Z(E/j),I*=j),typeof y=="number"&&((j=0|y)<0?(R+=z*(k-1),k=Z(-k/j)):k=Z(k/j),z*=j),typeof T=="number"&&((j=0|T)<0?(R+=F*(L-1),L=Z(-L/j)):L=Z(L/j),F*=j),typeof h=="number"&&((j=0|h)<0?(R+=U*(P-1),P=Z(-P/j)):P=Z(P/j),U*=j),new d(this.data,E,k,L,P,I,z,F,U,R)},m.transpose=function(x,y,T,h){x=x===void 0?0:0|x,y=y===void 0?1:0|y,T=T===void 0?2:0|T,h=h===void 0?3:0|h;var E=this.shape,k=this.stride;return new d(this.data,E[x],E[y],E[T],E[h],k[x],k[y],k[T],k[h],this.offset)},m.pick=function(x,y,T,h){var E=[],k=[],L=this.offset;return typeof x=="number"&&x>=0?L=L+this.stride[0]*x|0:(E.push(this.shape[0]),k.push(this.stride[0])),typeof y=="number"&&y>=0?L=L+this.stride[1]*y|0:(E.push(this.shape[1]),k.push(this.stride[1])),typeof T=="number"&&T>=0?L=L+this.stride[2]*T|0:(E.push(this.shape[2]),k.push(this.stride[2])),typeof h=="number"&&h>=0?L=L+this.stride[3]*h|0:(E.push(this.shape[3]),k.push(this.stride[3])),(0,b[E.length+1])(this.data,E,k,L)},function(x,y,T,h){return new d(x,y[0],y[1],y[2],y[3],T[0],T[1],T[2],T[3],h)}},5:function(f,b,v){function d(x,y,T,h,E,k,L,P,I,z,F,U){this.data=x,this.shape=[y,T,h,E,k],this.stride=[L,P,I,z,F],this.offset=0|U}var m=d.prototype;return m.dtype=f,m.dimension=5,Object.defineProperty(m,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(m,"order",{get:v}),m.set=function(x,y,T,h,E,k){return f==="generic"?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*T+this.stride[3]*h+this.stride[4]*E,k):this.data[this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*T+this.stride[3]*h+this.stride[4]*E]=k},m.get=function(x,y,T,h,E){return f==="generic"?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*T+this.stride[3]*h+this.stride[4]*E):this.data[this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*T+this.stride[3]*h+this.stride[4]*E]},m.index=function(x,y,T,h,E){return this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*T+this.stride[3]*h+this.stride[4]*E},m.hi=function(x,y,T,h,E){return new d(this.data,typeof x!="number"||x<0?this.shape[0]:0|x,typeof y!="number"||y<0?this.shape[1]:0|y,typeof T!="number"||T<0?this.shape[2]:0|T,typeof h!="number"||h<0?this.shape[3]:0|h,typeof E!="number"||E<0?this.shape[4]:0|E,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},m.lo=function(x,y,T,h,E){var k=this.offset,L=0,P=this.shape[0],I=this.shape[1],z=this.shape[2],F=this.shape[3],U=this.shape[4],R=this.stride[0],j=this.stride[1],Z=this.stride[2],B=this.stride[3],q=this.stride[4];return typeof x=="number"&&x>=0&&(k+=R*(L=0|x),P-=L),typeof y=="number"&&y>=0&&(k+=j*(L=0|y),I-=L),typeof T=="number"&&T>=0&&(k+=Z*(L=0|T),z-=L),typeof h=="number"&&h>=0&&(k+=B*(L=0|h),F-=L),typeof E=="number"&&E>=0&&(k+=q*(L=0|E),U-=L),new d(this.data,P,I,z,F,U,R,j,Z,B,q,k)},m.step=function(x,y,T,h,E){var k=this.shape[0],L=this.shape[1],P=this.shape[2],I=this.shape[3],z=this.shape[4],F=this.stride[0],U=this.stride[1],R=this.stride[2],j=this.stride[3],Z=this.stride[4],B=this.offset,q=0,V=Math.ceil;return typeof x=="number"&&((q=0|x)<0?(B+=F*(k-1),k=V(-k/q)):k=V(k/q),F*=q),typeof y=="number"&&((q=0|y)<0?(B+=U*(L-1),L=V(-L/q)):L=V(L/q),U*=q),typeof T=="number"&&((q=0|T)<0?(B+=R*(P-1),P=V(-P/q)):P=V(P/q),R*=q),typeof h=="number"&&((q=0|h)<0?(B+=j*(I-1),I=V(-I/q)):I=V(I/q),j*=q),typeof E=="number"&&((q=0|E)<0?(B+=Z*(z-1),z=V(-z/q)):z=V(z/q),Z*=q),new d(this.data,k,L,P,I,z,F,U,R,j,Z,B)},m.transpose=function(x,y,T,h,E){x=x===void 0?0:0|x,y=y===void 0?1:0|y,T=T===void 0?2:0|T,h=h===void 0?3:0|h,E=E===void 0?4:0|E;var k=this.shape,L=this.stride;return new d(this.data,k[x],k[y],k[T],k[h],k[E],L[x],L[y],L[T],L[h],L[E],this.offset)},m.pick=function(x,y,T,h,E){var k=[],L=[],P=this.offset;return typeof x=="number"&&x>=0?P=P+this.stride[0]*x|0:(k.push(this.shape[0]),L.push(this.stride[0])),typeof y=="number"&&y>=0?P=P+this.stride[1]*y|0:(k.push(this.shape[1]),L.push(this.stride[1])),typeof T=="number"&&T>=0?P=P+this.stride[2]*T|0:(k.push(this.shape[2]),L.push(this.stride[2])),typeof h=="number"&&h>=0?P=P+this.stride[3]*h|0:(k.push(this.shape[3]),L.push(this.stride[3])),typeof E=="number"&&E>=0?P=P+this.stride[4]*E|0:(k.push(this.shape[4]),L.push(this.stride[4])),(0,b[k.length+1])(this.data,k,L,P)},function(x,y,T,h){return new d(x,y[0],y[1],y[2],y[3],y[4],T[0],T[1],T[2],T[3],T[4],h)}}};function c(f,b){var v=b===-1?"T":String(b),d=u[v];return b===-1?d(f):b===0?d(f,g[f][0]):d(f,g[f],l)}var g={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};p.exports=function(f,b,v,d){if(f===void 0)return(0,g.array[0])([]);typeof f=="number"&&(f=[f]),b===void 0&&(b=[f.length]);var m=b.length;if(v===void 0){v=new Array(m);for(var x=m-1,y=1;x>=0;--x)v[x]=y,y*=b[x]}if(d===void 0)for(d=0,x=0;x<m;++x)v[x]<0&&(d-=(b[x]-1)*v[x]);for(var T=function(E){if(a(E))return"buffer";if(r)switch(Object.prototype.toString.call(E)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(E)?"array":"generic"}(f),h=g[T];h.length<=m+1;)h.push(c(T,h.length-1));return(0,h[m+1])(f,b,v,d)}},8551:function(p,s,n){var a=n(8362),r=Math.pow(2,-1074),i=-1>>>0;p.exports=function(l,u){if(isNaN(l)||isNaN(u))return NaN;if(l===u)return l;if(l===0)return u<0?-r:r;var c=a.hi(l),g=a.lo(l);return u>l==l>0?g===i?(c+=1,g=0):g+=1:g===0?(g=i,c-=1):g-=1,a.pack(g,c)}},115:function(p,s){s.vertexNormals=function(n,a,r){for(var i=a.length,l=new Array(i),u=r===void 0?1e-6:r,c=0;c<i;++c)l[c]=[0,0,0];for(c=0;c<n.length;++c)for(var g=n[c],f=0,b=g[g.length-1],v=g[0],d=0;d<g.length;++d){f=b,b=v,v=g[(d+1)%g.length];for(var m=a[f],x=a[b],y=a[v],T=new Array(3),h=0,E=new Array(3),k=0,L=0;L<3;++L)T[L]=m[L]-x[L],h+=T[L]*T[L],E[L]=y[L]-x[L],k+=E[L]*E[L];if(h*k>u){var P=l[b],I=1/Math.sqrt(h*k);for(L=0;L<3;++L){var z=(L+1)%3,F=(L+2)%3;P[L]+=I*(E[z]*T[F]-E[F]*T[z])}}}for(c=0;c<i;++c){P=l[c];var U=0;for(L=0;L<3;++L)U+=P[L]*P[L];if(U>u)for(I=1/Math.sqrt(U),L=0;L<3;++L)P[L]*=I;else for(L=0;L<3;++L)P[L]=0}return l},s.faceNormals=function(n,a,r){for(var i=n.length,l=new Array(i),u=r===void 0?1e-6:r,c=0;c<i;++c){for(var g=n[c],f=new Array(3),b=0;b<3;++b)f[b]=a[g[b]];var v=new Array(3),d=new Array(3);for(b=0;b<3;++b)v[b]=f[1][b]-f[0][b],d[b]=f[2][b]-f[0][b];var m=new Array(3),x=0;for(b=0;b<3;++b){var y=(b+1)%3,T=(b+2)%3;m[b]=v[y]*d[T]-v[T]*d[y],x+=m[b]*m[b]}for(x=x>u?1/Math.sqrt(x):0,b=0;b<3;++b)m[b]*=x;l[c]=m}return l}},567:function(p){p.exports=function(s,n,a,r,i,l,u,c,g,f){var b=n+l+f;if(v>0){var v=Math.sqrt(b+1);s[0]=.5*(u-g)/v,s[1]=.5*(c-r)/v,s[2]=.5*(a-l)/v,s[3]=.5*v}else{var d=Math.max(n,l,f);v=Math.sqrt(2*d-b+1),n>=d?(s[0]=.5*v,s[1]=.5*(i+a)/v,s[2]=.5*(c+r)/v,s[3]=.5*(u-g)/v):l>=d?(s[0]=.5*(a+i)/v,s[1]=.5*v,s[2]=.5*(g+u)/v,s[3]=.5*(c-r)/v):(s[0]=.5*(r+c)/v,s[1]=.5*(u+g)/v,s[2]=.5*v,s[3]=.5*(a-i)/v)}return s}},7774:function(p,s,n){p.exports=function(d){var m=(d=d||{}).center||[0,0,0],x=d.rotation||[0,0,0,1],y=d.radius||1;m=[].slice.call(m,0,3),f(x=[].slice.call(x,0,4),x);var T=new b(x,m,Math.log(y));return T.setDistanceLimits(d.zoomMin,d.zoomMax),("eye"in d||"up"in d)&&T.lookAt(0,d.eye,d.center,d.up),T};var a=n(8444),r=n(3012),i=n(5950),l=n(7437),u=n(567);function c(d,m,x){return Math.sqrt(Math.pow(d,2)+Math.pow(m,2)+Math.pow(x,2))}function g(d,m,x,y){return Math.sqrt(Math.pow(d,2)+Math.pow(m,2)+Math.pow(x,2)+Math.pow(y,2))}function f(d,m){var x=m[0],y=m[1],T=m[2],h=m[3],E=g(x,y,T,h);E>1e-6?(d[0]=x/E,d[1]=y/E,d[2]=T/E,d[3]=h/E):(d[0]=d[1]=d[2]=0,d[3]=1)}function b(d,m,x){this.radius=a([x]),this.center=a(m),this.rotation=a(d),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var v=b.prototype;v.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},v.recalcMatrix=function(d){this.radius.curve(d),this.center.curve(d),this.rotation.curve(d);var m=this.computedRotation;f(m,m);var x=this.computedMatrix;i(x,m);var y=this.computedCenter,T=this.computedEye,h=this.computedUp,E=Math.exp(this.computedRadius[0]);T[0]=y[0]+E*x[2],T[1]=y[1]+E*x[6],T[2]=y[2]+E*x[10],h[0]=x[1],h[1]=x[5],h[2]=x[9];for(var k=0;k<3;++k){for(var L=0,P=0;P<3;++P)L+=x[k+4*P]*T[P];x[12+k]=-L}},v.getMatrix=function(d,m){this.recalcMatrix(d);var x=this.computedMatrix;if(m){for(var y=0;y<16;++y)m[y]=x[y];return m}return x},v.idle=function(d){this.center.idle(d),this.radius.idle(d),this.rotation.idle(d)},v.flush=function(d){this.center.flush(d),this.radius.flush(d),this.rotation.flush(d)},v.pan=function(d,m,x,y){m=m||0,x=x||0,y=y||0,this.recalcMatrix(d);var T=this.computedMatrix,h=T[1],E=T[5],k=T[9],L=c(h,E,k);h/=L,E/=L,k/=L;var P=T[0],I=T[4],z=T[8],F=P*h+I*E+z*k,U=c(P-=h*F,I-=E*F,z-=k*F);P/=U,I/=U,z/=U,T[2],T[6],T[10];var R=P*m+h*x,j=I*m+E*x,Z=z*m+k*x;this.center.move(d,R,j,Z);var B=Math.exp(this.computedRadius[0]);B=Math.max(1e-4,B+y),this.radius.set(d,Math.log(B))},v.rotate=function(d,m,x,y){this.recalcMatrix(d),m=m||0,x=x||0;var T=this.computedMatrix,h=T[0],E=T[4],k=T[8],L=T[1],P=T[5],I=T[9],z=T[2],F=T[6],U=T[10],R=m*h+x*L,j=m*E+x*P,Z=m*k+x*I,B=-(F*Z-U*j),q=-(U*R-z*Z),V=-(z*j-F*R),ne=Math.sqrt(Math.max(0,1-Math.pow(B,2)-Math.pow(q,2)-Math.pow(V,2))),ee=g(B,q,V,ne);ee>1e-6?(B/=ee,q/=ee,V/=ee,ne/=ee):(B=q=V=0,ne=1);var $=this.computedRotation,J=$[0],K=$[1],te=$[2],ie=$[3],ae=J*ne+ie*B+K*V-te*q,se=K*ne+ie*q+te*B-J*V,ce=te*ne+ie*V+J*q-K*B,de=ie*ne-J*B-K*q-te*V;if(y){B=z,q=F,V=U;var ge=Math.sin(y)/c(B,q,V);B*=ge,q*=ge,V*=ge,de=de*(ne=Math.cos(m))-(ae=ae*ne+de*B+se*V-ce*q)*B-(se=se*ne+de*q+ce*B-ae*V)*q-(ce=ce*ne+de*V+ae*q-se*B)*V}var ve=g(ae,se,ce,de);ve>1e-6?(ae/=ve,se/=ve,ce/=ve,de/=ve):(ae=se=ce=0,de=1),this.rotation.set(d,ae,se,ce,de)},v.lookAt=function(d,m,x,y){this.recalcMatrix(d),x=x||this.computedCenter,m=m||this.computedEye,y=y||this.computedUp;var T=this.computedMatrix;r(T,m,x,y);var h=this.computedRotation;u(h,T[0],T[1],T[2],T[4],T[5],T[6],T[8],T[9],T[10]),f(h,h),this.rotation.set(d,h[0],h[1],h[2],h[3]);for(var E=0,k=0;k<3;++k)E+=Math.pow(x[k]-m[k],2);this.radius.set(d,.5*Math.log(Math.max(E,1e-6))),this.center.set(d,x[0],x[1],x[2])},v.translate=function(d,m,x,y){this.center.move(d,m||0,x||0,y||0)},v.setMatrix=function(d,m){var x=this.computedRotation;u(x,m[0],m[1],m[2],m[4],m[5],m[6],m[8],m[9],m[10]),f(x,x),this.rotation.set(d,x[0],x[1],x[2],x[3]);var y=this.computedMatrix;l(y,m);var T=y[15];if(Math.abs(T)>1e-6){var h=y[12]/T,E=y[13]/T,k=y[14]/T;this.recalcMatrix(d);var L=Math.exp(this.computedRadius[0]);this.center.set(d,h-y[2]*L,E-y[6]*L,k-y[10]*L),this.radius.idle(d)}else this.center.idle(d),this.radius.idle(d)},v.setDistance=function(d,m){m>0&&this.radius.set(d,Math.log(m))},v.setDistanceLimits=function(d,m){d=d>0?Math.log(d):-1/0,m=m>0?Math.log(m):1/0,m=Math.max(m,d),this.radius.bounds[0][0]=d,this.radius.bounds[1][0]=m},v.getDistanceLimits=function(d){var m=this.radius.bounds;return d?(d[0]=Math.exp(m[0][0]),d[1]=Math.exp(m[1][0]),d):[Math.exp(m[0][0]),Math.exp(m[1][0])]},v.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},v.fromJSON=function(d){var m=this.lastT(),x=d.center;x&&this.center.set(m,x[0],x[1],x[2]);var y=d.rotation;y&&this.rotation.set(m,y[0],y[1],y[2],y[3]);var T=d.distance;T&&T>0&&this.radius.set(m,Math.log(T)),this.setDistanceLimits(d.zoomMin,d.zoomMax)}},4930:function(p,s,n){var a=n(6184);p.exports=function(r,i,l){return a(l=l!==void 0?l+"":" ",i)+r}},4405:function(p){p.exports=function(s,n){n||(n=[0,""]),s=String(s);var a=parseFloat(s,10);return n[0]=a,n[1]=s.match(/[\d.\-\+]*\s*(.*)/)[1]||"",n}},4166:function(p,s,n){p.exports=function(r,i){for(var l=0|i.length,u=r.length,c=[new Array(l),new Array(l)],g=0;g<l;++g)c[0][g]=[],c[1][g]=[];for(g=0;g<u;++g){var f=r[g];c[0][f[0]].push(f),c[1][f[1]].push(f)}var b=[];for(g=0;g<l;++g)c[0][g].length+c[1][g].length===0&&b.push([g]);function v(E,k){var L=c[k][E[k]];L.splice(L.indexOf(E),1)}function d(E,k,L){for(var P,I,z,F=0;F<2;++F)if(c[F][k].length>0){P=c[F][k][0],z=F;break}I=P[1^z];for(var U=0;U<2;++U)for(var R=c[U][k],j=0;j<R.length;++j){var Z=R[j],B=Z[1^U];a(i[E],i[k],i[I],i[B])>0&&(P=Z,I=B,z=U)}return L||P&&v(P,z),I}function m(E,k){var L=c[k][E][0],P=[E];v(L,k);for(var I=L[1^k];;){for(;I!==E;)P.push(I),I=d(P[P.length-2],I,!1);if(c[0][E].length+c[1][E].length===0)break;var z=P[P.length-1],F=E,U=P[1],R=d(z,F,!0);if(a(i[z],i[F],i[U],i[R])<0)break;P.push(E),I=d(z,F)}return P}function x(E,k){return k[1]===k[k.length-1]}for(g=0;g<l;++g)for(var y=0;y<2;++y){for(var T=[];c[y][g].length>0;){c[0][g].length;var h=m(g,y);x(0,h)?T.push.apply(T,h):(T.length>0&&b.push(T),T=h)}T.length>0&&b.push(T)}return b};var a=n(9398)},3959:function(p,s,n){p.exports=function(r,i){for(var l=a(r,i.length),u=new Array(i.length),c=new Array(i.length),g=[],f=0;f<i.length;++f){var b=l[f].length;c[f]=b,u[f]=!0,b<=1&&g.push(f)}for(;g.length>0;){u[y=g.pop()]=!1;var v=l[y];for(f=0;f<v.length;++f){var d=v[f];--c[d]==0&&g.push(d)}}var m=new Array(i.length),x=[];for(f=0;f<i.length;++f)if(u[f]){var y=x.length;m[f]=y,x.push(i[f])}else m[f]=-1;var T=[];for(f=0;f<r.length;++f){var h=r[f];u[h[0]]&&u[h[1]]&&T.push([m[h[0]],m[h[1]]])}return[T,x]};var a=n(8348)},8040:function(p,s,n){p.exports=function(b,v){var d=g(b,v);b=d[0];for(var m=(v=d[1]).length,x=(b.length,a(b,v.length)),y=0;y<m;++y)if(x[y].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var T=r(b,v),h=(T=T.filter(function(Se){for(var we=Se.length,_e=[0],oe=0;oe<we;++oe){var le=v[Se[oe]],pe=v[Se[(oe+1)%we]],Ee=l(-le[0],le[1]),Te=l(-le[0],pe[1]),Me=l(pe[0],le[1]),Le=l(pe[0],pe[1]);_e=u(_e,u(u(Ee,Te),u(Me,Le)))}return _e[_e.length-1]>0})).length,E=new Array(h),k=new Array(h);for(y=0;y<h;++y){E[y]=y;var L=new Array(h),P=T[y].map(function(Se){return v[Se]}),I=i([P]),z=0;e:for(var F=0;F<h;++F)if(L[F]=0,y!==F){for(var U=(be=T[F]).length,R=0;R<U;++R){var j=I(v[be[R]]);if(j!==0){j<0&&(L[F]=1,z+=1);continue e}}L[F]=1,z+=1}k[y]=[z,y,L]}for(k.sort(function(Se,we){return we[0]-Se[0]}),y=0;y<h;++y){var Z=(L=k[y])[1],B=L[2];for(F=0;F<h;++F)B[F]&&(E[F]=Z)}var q=function(Se){for(var we=new Array(Se),_e=0;_e<Se;++_e)we[_e]=[];return we}(h);for(y=0;y<h;++y)q[y].push(E[y]),q[E[y]].push(y);var V={},ne=f(m,!1);for(y=0;y<h;++y)for(U=(be=T[y]).length,F=0;F<U;++F){var ee=be[F],$=be[(F+1)%U],J=Math.min(ee,$)+":"+Math.max(ee,$);if(J in V){var K=V[J];q[K].push(y),q[y].push(K),ne[ee]=ne[$]=!0}else V[J]=y}function te(Se){for(var we=Se.length,_e=0;_e<we;++_e)if(!ne[Se[_e]])return!1;return!0}var ie=[],ae=f(h,-1);for(y=0;y<h;++y)E[y]!==y||te(T[y])?ae[y]=-1:(ie.push(y),ae[y]=0);for(d=[];ie.length>0;){var se=ie.pop(),ce=q[se];c(ce,function(Se,we){return Se-we});var de,ge=ce.length,ve=ae[se];for(ve===0&&(de=[be=T[se]]),y=0;y<ge;++y){var be,me=ce[y];ae[me]>=0||(ae[me]=1^ve,ie.push(me),ve===0&&(te(be=T[me])||(be.reverse(),de.push(be))))}ve===0&&d.push(de)}return d};var a=n(8348),r=n(4166),i=n(211),l=n(9660),u=n(9662),c=n(1215),g=n(3959);function f(b,v){for(var d=new Array(b),m=0;m<b;++m)d[m]=v;return d}},211:function(p,s,n){p.exports=function(f){for(var b=f.length,v=[],d=[],m=0;m<b;++m)for(var x=f[m],y=x.length,T=y-1,h=0;h<y;T=h++){var E=x[T],k=x[h];E[0]===k[0]?d.push([E,k]):v.push([E,k])}if(v.length===0)return d.length===0?g:(L=c(d),function(z){return L(z[0],z[1])?0:1});var L,P=r(v),I=function(z,F){return function(U){var R=l.le(F,U[0]);if(R<0)return 1;var j=z[R];if(!j){if(!(R>0&&F[R]===U[0]))return 1;j=z[R-1]}for(var Z=1;j;){var B=j.key,q=a(U,B[0],B[1]);if(B[0][0]<B[1][0])if(q<0)j=j.left;else{if(!(q>0))return 0;Z=-1,j=j.right}else if(q>0)j=j.left;else{if(!(q<0))return 0;Z=1,j=j.right}}return Z}}(P.slabs,P.coordinates);return d.length===0?I:function(z,F){return function(U){return z(U[0],U[1])?0:F(U)}}(c(d),I)};var a=n(417)[3],r=n(4385),i=n(9014),l=n(5070);function u(){return!0}function c(f){for(var b={},v=0;v<f.length;++v){var d=f[v],m=d[0][0],x=d[0][1],y=d[1][1],T=[Math.min(x,y),Math.max(x,y)];m in b?b[m].push(T):b[m]=[T]}var h={},E=Object.keys(b);for(v=0;v<E.length;++v){var k=b[E[v]];h[E[v]]=i(k)}return function(L){return function(P,I){var z=L[P];return!!z&&!!z.queryPoint(I,u)}}(h)}function g(f){return 1}},7309:function(p){var s=new Float64Array(4),n=new Float64Array(4),a=new Float64Array(4);p.exports=function(r,i,l,u,c){s.length<u.length&&(s=new Float64Array(u.length),n=new Float64Array(u.length),a=new Float64Array(u.length));for(var g=0;g<u.length;++g)s[g]=r[g]-u[g],n[g]=i[g]-r[g],a[g]=l[g]-r[g];var f=0,b=0,v=0,d=0,m=0,x=0;for(g=0;g<u.length;++g){var y=n[g],T=a[g],h=s[g];f+=y*y,b+=y*T,v+=T*T,d+=h*y,m+=h*T,x+=h*h}var E,k,L,P,I,z=Math.abs(f*v-b*b),F=b*m-v*d,U=b*d-f*m;if(F+U<=z)if(F<0)U<0&&d<0?(U=0,-d>=f?(F=1,E=f+2*d+x):E=d*(F=-d/f)+x):(F=0,m>=0?(U=0,E=x):-m>=v?(U=1,E=v+2*m+x):E=m*(U=-m/v)+x);else if(U<0)U=0,d>=0?(F=0,E=x):-d>=f?(F=1,E=f+2*d+x):E=d*(F=-d/f)+x;else{var R=1/z;E=(F*=R)*(f*F+b*(U*=R)+2*d)+U*(b*F+v*U+2*m)+x}else F<0?(L=v+m)>(k=b+d)?(P=L-k)>=(I=f-2*b+v)?(F=1,U=0,E=f+2*d+x):E=(F=P/I)*(f*F+b*(U=1-F)+2*d)+U*(b*F+v*U+2*m)+x:(F=0,L<=0?(U=1,E=v+2*m+x):m>=0?(U=0,E=x):E=m*(U=-m/v)+x):U<0?(L=f+d)>(k=b+m)?(P=L-k)>=(I=f-2*b+v)?(U=1,F=0,E=v+2*m+x):E=(F=1-(U=P/I))*(f*F+b*U+2*d)+U*(b*F+v*U+2*m)+x:(U=0,L<=0?(F=1,E=f+2*d+x):d>=0?(F=0,E=x):E=d*(F=-d/f)+x):(P=v+m-b-d)<=0?(F=0,U=1,E=v+2*m+x):P>=(I=f-2*b+v)?(F=1,U=0,E=f+2*d+x):E=(F=P/I)*(f*F+b*(U=1-F)+2*d)+U*(b*F+v*U+2*m)+x;var j=1-F-U;for(g=0;g<u.length;++g)c[g]=j*r[g]+F*i[g]+U*l[g];return E<0?0:E}},1116:function(p,s,n){p.exports=n(6093)},7584:function(p,s,n){var a=n(1539);p.exports=function(r,i){for(var l=r.length,u=new Array(l),c=0;c<l;++c)u[c]=a(r[c],i[c]);return u}},2826:function(p,s,n){p.exports=function(r){for(var i=new Array(r.length),l=0;l<r.length;++l)i[l]=a(r[l]);return i};var a=n(5125)},4469:function(p,s,n){var a=n(5125),r=n(3962);p.exports=function(i,l){for(var u=a(l),c=i.length,g=new Array(c),f=0;f<c;++f)g[f]=r(i[f],u);return g}},6695:function(p,s,n){var a=n(4354);p.exports=function(r,i){for(var l=r.length,u=new Array(l),c=0;c<l;++c)u[c]=a(r[c],i[c]);return u}},7037:function(p,s,n){var a=n(9209),r=n(1284),i=n(9887);p.exports=function(l){l.sort(r);for(var u=l.length,c=0,g=0;g<u;++g){var f=l[g],b=i(f);if(b!==0){if(c>0){var v=l[c-1];if(a(f,v)===0&&i(v)!==b){c-=1;continue}}l[c++]=f}}return l.length=c,l}},6184:function(p){var s,n="";p.exports=function(a,r){if(typeof a!="string")throw new TypeError("expected a string");if(r===1)return a;if(r===2)return a+a;var i=a.length*r;if(s!==a||s===void 0)s=a,n="";else if(n.length>=i)return n.substr(0,i);for(;i>n.length&&r>1;)1&r&&(n+=a),r>>=1,a+=a;return n=(n+=a).substr(0,i)}},8161:function(p,s,n){p.exports=n.g.performance&&n.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},402:function(p){p.exports=function(s){for(var n=s.length,a=s[s.length-1],r=n,i=n-2;i>=0;--i){var l=a;(g=(c=s[i])-((a=l+c)-l))&&(s[--r]=a,a=g)}var u=0;for(i=r;i<n;++i){var c,g;(g=(c=a)-((a=(l=s[i])+c)-l))&&(s[u++]=g)}return s[u++]=a,s.length=u,s}},8167:function(p,s,n){var a=n(9660),r=n(9662),i=n(8289),l=n(402);function u(m,x,y,T){return function(h){return T(m(y(h[0][0],h[1][1]),y(-h[0][1],h[1][0])))}}function c(m,x,y,T){return function(h){return T(m(x(m(y(h[1][1],h[2][2]),y(-h[1][2],h[2][1])),h[0][0]),m(x(m(y(h[1][0],h[2][2]),y(-h[1][2],h[2][0])),-h[0][1]),x(m(y(h[1][0],h[2][1]),y(-h[1][1],h[2][0])),h[0][2]))))}}function g(m,x,y,T){return function(h){return T(m(m(x(m(x(m(y(h[2][2],h[3][3]),y(-h[2][3],h[3][2])),h[1][1]),m(x(m(y(h[2][1],h[3][3]),y(-h[2][3],h[3][1])),-h[1][2]),x(m(y(h[2][1],h[3][2]),y(-h[2][2],h[3][1])),h[1][3]))),h[0][0]),x(m(x(m(y(h[2][2],h[3][3]),y(-h[2][3],h[3][2])),h[1][0]),m(x(m(y(h[2][0],h[3][3]),y(-h[2][3],h[3][0])),-h[1][2]),x(m(y(h[2][0],h[3][2]),y(-h[2][2],h[3][0])),h[1][3]))),-h[0][1])),m(x(m(x(m(y(h[2][1],h[3][3]),y(-h[2][3],h[3][1])),h[1][0]),m(x(m(y(h[2][0],h[3][3]),y(-h[2][3],h[3][0])),-h[1][1]),x(m(y(h[2][0],h[3][1]),y(-h[2][1],h[3][0])),h[1][3]))),h[0][2]),x(m(x(m(y(h[2][1],h[3][2]),y(-h[2][2],h[3][1])),h[1][0]),m(x(m(y(h[2][0],h[3][2]),y(-h[2][2],h[3][0])),-h[1][1]),x(m(y(h[2][0],h[3][1]),y(-h[2][1],h[3][0])),h[1][2]))),-h[0][3]))))}}function f(m,x,y,T){return function(h){return T(m(m(x(m(m(x(m(x(m(y(h[3][3],h[4][4]),y(-h[3][4],h[4][3])),h[2][2]),m(x(m(y(h[3][2],h[4][4]),y(-h[3][4],h[4][2])),-h[2][3]),x(m(y(h[3][2],h[4][3]),y(-h[3][3],h[4][2])),h[2][4]))),h[1][1]),x(m(x(m(y(h[3][3],h[4][4]),y(-h[3][4],h[4][3])),h[2][1]),m(x(m(y(h[3][1],h[4][4]),y(-h[3][4],h[4][1])),-h[2][3]),x(m(y(h[3][1],h[4][3]),y(-h[3][3],h[4][1])),h[2][4]))),-h[1][2])),m(x(m(x(m(y(h[3][2],h[4][4]),y(-h[3][4],h[4][2])),h[2][1]),m(x(m(y(h[3][1],h[4][4]),y(-h[3][4],h[4][1])),-h[2][2]),x(m(y(h[3][1],h[4][2]),y(-h[3][2],h[4][1])),h[2][4]))),h[1][3]),x(m(x(m(y(h[3][2],h[4][3]),y(-h[3][3],h[4][2])),h[2][1]),m(x(m(y(h[3][1],h[4][3]),y(-h[3][3],h[4][1])),-h[2][2]),x(m(y(h[3][1],h[4][2]),y(-h[3][2],h[4][1])),h[2][3]))),-h[1][4]))),h[0][0]),x(m(m(x(m(x(m(y(h[3][3],h[4][4]),y(-h[3][4],h[4][3])),h[2][2]),m(x(m(y(h[3][2],h[4][4]),y(-h[3][4],h[4][2])),-h[2][3]),x(m(y(h[3][2],h[4][3]),y(-h[3][3],h[4][2])),h[2][4]))),h[1][0]),x(m(x(m(y(h[3][3],h[4][4]),y(-h[3][4],h[4][3])),h[2][0]),m(x(m(y(h[3][0],h[4][4]),y(-h[3][4],h[4][0])),-h[2][3]),x(m(y(h[3][0],h[4][3]),y(-h[3][3],h[4][0])),h[2][4]))),-h[1][2])),m(x(m(x(m(y(h[3][2],h[4][4]),y(-h[3][4],h[4][2])),h[2][0]),m(x(m(y(h[3][0],h[4][4]),y(-h[3][4],h[4][0])),-h[2][2]),x(m(y(h[3][0],h[4][2]),y(-h[3][2],h[4][0])),h[2][4]))),h[1][3]),x(m(x(m(y(h[3][2],h[4][3]),y(-h[3][3],h[4][2])),h[2][0]),m(x(m(y(h[3][0],h[4][3]),y(-h[3][3],h[4][0])),-h[2][2]),x(m(y(h[3][0],h[4][2]),y(-h[3][2],h[4][0])),h[2][3]))),-h[1][4]))),-h[0][1])),m(x(m(m(x(m(x(m(y(h[3][3],h[4][4]),y(-h[3][4],h[4][3])),h[2][1]),m(x(m(y(h[3][1],h[4][4]),y(-h[3][4],h[4][1])),-h[2][3]),x(m(y(h[3][1],h[4][3]),y(-h[3][3],h[4][1])),h[2][4]))),h[1][0]),x(m(x(m(y(h[3][3],h[4][4]),y(-h[3][4],h[4][3])),h[2][0]),m(x(m(y(h[3][0],h[4][4]),y(-h[3][4],h[4][0])),-h[2][3]),x(m(y(h[3][0],h[4][3]),y(-h[3][3],h[4][0])),h[2][4]))),-h[1][1])),m(x(m(x(m(y(h[3][1],h[4][4]),y(-h[3][4],h[4][1])),h[2][0]),m(x(m(y(h[3][0],h[4][4]),y(-h[3][4],h[4][0])),-h[2][1]),x(m(y(h[3][0],h[4][1]),y(-h[3][1],h[4][0])),h[2][4]))),h[1][3]),x(m(x(m(y(h[3][1],h[4][3]),y(-h[3][3],h[4][1])),h[2][0]),m(x(m(y(h[3][0],h[4][3]),y(-h[3][3],h[4][0])),-h[2][1]),x(m(y(h[3][0],h[4][1]),y(-h[3][1],h[4][0])),h[2][3]))),-h[1][4]))),h[0][2]),m(x(m(m(x(m(x(m(y(h[3][2],h[4][4]),y(-h[3][4],h[4][2])),h[2][1]),m(x(m(y(h[3][1],h[4][4]),y(-h[3][4],h[4][1])),-h[2][2]),x(m(y(h[3][1],h[4][2]),y(-h[3][2],h[4][1])),h[2][4]))),h[1][0]),x(m(x(m(y(h[3][2],h[4][4]),y(-h[3][4],h[4][2])),h[2][0]),m(x(m(y(h[3][0],h[4][4]),y(-h[3][4],h[4][0])),-h[2][2]),x(m(y(h[3][0],h[4][2]),y(-h[3][2],h[4][0])),h[2][4]))),-h[1][1])),m(x(m(x(m(y(h[3][1],h[4][4]),y(-h[3][4],h[4][1])),h[2][0]),m(x(m(y(h[3][0],h[4][4]),y(-h[3][4],h[4][0])),-h[2][1]),x(m(y(h[3][0],h[4][1]),y(-h[3][1],h[4][0])),h[2][4]))),h[1][2]),x(m(x(m(y(h[3][1],h[4][2]),y(-h[3][2],h[4][1])),h[2][0]),m(x(m(y(h[3][0],h[4][2]),y(-h[3][2],h[4][0])),-h[2][1]),x(m(y(h[3][0],h[4][1]),y(-h[3][1],h[4][0])),h[2][2]))),-h[1][4]))),-h[0][3]),x(m(m(x(m(x(m(y(h[3][2],h[4][3]),y(-h[3][3],h[4][2])),h[2][1]),m(x(m(y(h[3][1],h[4][3]),y(-h[3][3],h[4][1])),-h[2][2]),x(m(y(h[3][1],h[4][2]),y(-h[3][2],h[4][1])),h[2][3]))),h[1][0]),x(m(x(m(y(h[3][2],h[4][3]),y(-h[3][3],h[4][2])),h[2][0]),m(x(m(y(h[3][0],h[4][3]),y(-h[3][3],h[4][0])),-h[2][2]),x(m(y(h[3][0],h[4][2]),y(-h[3][2],h[4][0])),h[2][3]))),-h[1][1])),m(x(m(x(m(y(h[3][1],h[4][3]),y(-h[3][3],h[4][1])),h[2][0]),m(x(m(y(h[3][0],h[4][3]),y(-h[3][3],h[4][0])),-h[2][1]),x(m(y(h[3][0],h[4][1]),y(-h[3][1],h[4][0])),h[2][3]))),h[1][2]),x(m(x(m(y(h[3][1],h[4][2]),y(-h[3][2],h[4][1])),h[2][0]),m(x(m(y(h[3][0],h[4][2]),y(-h[3][2],h[4][0])),-h[2][1]),x(m(y(h[3][0],h[4][1]),y(-h[3][1],h[4][0])),h[2][2]))),-h[1][3]))),h[0][4])))))}}function b(m){return(m===2?u:m===3?c:m===4?g:m===5?f:void 0)(r,i,a,l)}var v=[function(){return[0]},function(m){return[m[0][0]]}];function d(m,x,y,T,h,E,k,L){return function(P){switch(P.length){case 0:return m(P);case 1:return x(P);case 2:return y(P);case 3:return T(P);case 4:return h(P);case 5:return E(P)}var I=k[P.length];return I||(I=k[P.length]=L(P.length)),I(P)}}(function(){for(;v.length<6;)v.push(b(v.length));p.exports=d.apply(void 0,v.concat([v,b]));for(var m=0;m<v.length;++m)p.exports[m]=v[m]})()},9130:function(p,s,n){var a=n(9660),r=n(9662);p.exports=function(i,l){for(var u=a(i[0],l[0]),c=1;c<i.length;++c)u=r(u,a(i[c],l[c]));return u}},2227:function(p,s,n){var a=n(9660),r=n(9662),i=n(4078),l=n(8289);function u(x){return(x===3?c:x===4?g:x===5?f:b)(r,i,a,l)}function c(x,y,T,h){return function(E,k,L){var P=T(E[0],E[0]),I=h(P,k[0]),z=h(P,L[0]),F=T(k[0],k[0]),U=h(F,E[0]),R=h(F,L[0]),j=T(L[0],L[0]),Z=h(j,E[0]),B=h(j,k[0]),q=x(y(B,R),y(U,I)),V=y(Z,z),ne=y(q,V);return ne[ne.length-1]}}function g(x,y,T,h){return function(E,k,L,P){var I=x(T(E[0],E[0]),T(E[1],E[1])),z=h(I,k[0]),F=h(I,L[0]),U=h(I,P[0]),R=x(T(k[0],k[0]),T(k[1],k[1])),j=h(R,E[0]),Z=h(R,L[0]),B=h(R,P[0]),q=x(T(L[0],L[0]),T(L[1],L[1])),V=h(q,E[0]),ne=h(q,k[0]),ee=h(q,P[0]),$=x(T(P[0],P[0]),T(P[1],P[1])),J=h($,E[0]),K=h($,k[0]),te=h($,L[0]),ie=x(x(h(y(te,ee),k[1]),x(h(y(K,B),-L[1]),h(y(ne,Z),P[1]))),x(h(y(K,B),E[1]),x(h(y(J,U),-k[1]),h(y(j,z),P[1])))),ae=x(x(h(y(te,ee),E[1]),x(h(y(J,U),-L[1]),h(y(V,F),P[1]))),x(h(y(ne,Z),E[1]),x(h(y(V,F),-k[1]),h(y(j,z),L[1])))),se=y(ie,ae);return se[se.length-1]}}function f(x,y,T,h){return function(E,k,L,P,I){var z=x(T(E[0],E[0]),x(T(E[1],E[1]),T(E[2],E[2]))),F=h(z,k[0]),U=h(z,L[0]),R=h(z,P[0]),j=h(z,I[0]),Z=x(T(k[0],k[0]),x(T(k[1],k[1]),T(k[2],k[2]))),B=h(Z,E[0]),q=h(Z,L[0]),V=h(Z,P[0]),ne=h(Z,I[0]),ee=x(T(L[0],L[0]),x(T(L[1],L[1]),T(L[2],L[2]))),$=h(ee,E[0]),J=h(ee,k[0]),K=h(ee,P[0]),te=h(ee,I[0]),ie=x(T(P[0],P[0]),x(T(P[1],P[1]),T(P[2],P[2]))),ae=h(ie,E[0]),se=h(ie,k[0]),ce=h(ie,L[0]),de=h(ie,I[0]),ge=x(T(I[0],I[0]),x(T(I[1],I[1]),T(I[2],I[2]))),ve=h(ge,E[0]),be=h(ge,k[0]),me=h(ge,L[0]),Se=h(ge,P[0]),we=x(x(x(h(x(h(y(Se,de),L[1]),x(h(y(me,te),-P[1]),h(y(ce,K),I[1]))),k[2]),x(h(x(h(y(Se,de),k[1]),x(h(y(be,ne),-P[1]),h(y(se,V),I[1]))),-L[2]),h(x(h(y(me,te),k[1]),x(h(y(be,ne),-L[1]),h(y(J,q),I[1]))),P[2]))),x(h(x(h(y(ce,K),k[1]),x(h(y(se,V),-L[1]),h(y(J,q),P[1]))),-I[2]),x(h(x(h(y(Se,de),k[1]),x(h(y(be,ne),-P[1]),h(y(se,V),I[1]))),E[2]),h(x(h(y(Se,de),E[1]),x(h(y(ve,j),-P[1]),h(y(ae,R),I[1]))),-k[2])))),x(x(h(x(h(y(be,ne),E[1]),x(h(y(ve,j),-k[1]),h(y(B,F),I[1]))),P[2]),x(h(x(h(y(se,V),E[1]),x(h(y(ae,R),-k[1]),h(y(B,F),P[1]))),-I[2]),h(x(h(y(ce,K),k[1]),x(h(y(se,V),-L[1]),h(y(J,q),P[1]))),E[2]))),x(h(x(h(y(ce,K),E[1]),x(h(y(ae,R),-L[1]),h(y($,U),P[1]))),-k[2]),x(h(x(h(y(se,V),E[1]),x(h(y(ae,R),-k[1]),h(y(B,F),P[1]))),L[2]),h(x(h(y(J,q),E[1]),x(h(y($,U),-k[1]),h(y(B,F),L[1]))),-P[2]))))),_e=x(x(x(h(x(h(y(Se,de),L[1]),x(h(y(me,te),-P[1]),h(y(ce,K),I[1]))),E[2]),h(x(h(y(Se,de),E[1]),x(h(y(ve,j),-P[1]),h(y(ae,R),I[1]))),-L[2])),x(h(x(h(y(me,te),E[1]),x(h(y(ve,j),-L[1]),h(y($,U),I[1]))),P[2]),h(x(h(y(ce,K),E[1]),x(h(y(ae,R),-L[1]),h(y($,U),P[1]))),-I[2]))),x(x(h(x(h(y(me,te),k[1]),x(h(y(be,ne),-L[1]),h(y(J,q),I[1]))),E[2]),h(x(h(y(me,te),E[1]),x(h(y(ve,j),-L[1]),h(y($,U),I[1]))),-k[2])),x(h(x(h(y(be,ne),E[1]),x(h(y(ve,j),-k[1]),h(y(B,F),I[1]))),L[2]),h(x(h(y(J,q),E[1]),x(h(y($,U),-k[1]),h(y(B,F),L[1]))),-I[2])))),oe=y(we,_e);return oe[oe.length-1]}}function b(x,y,T,h){return function(E,k,L,P,I,z){var F=x(x(T(E[0],E[0]),T(E[1],E[1])),x(T(E[2],E[2]),T(E[3],E[3]))),U=h(F,k[0]),R=h(F,L[0]),j=h(F,P[0]),Z=h(F,I[0]),B=h(F,z[0]),q=x(x(T(k[0],k[0]),T(k[1],k[1])),x(T(k[2],k[2]),T(k[3],k[3]))),V=h(q,E[0]),ne=h(q,L[0]),ee=h(q,P[0]),$=h(q,I[0]),J=h(q,z[0]),K=x(x(T(L[0],L[0]),T(L[1],L[1])),x(T(L[2],L[2]),T(L[3],L[3]))),te=h(K,E[0]),ie=h(K,k[0]),ae=h(K,P[0]),se=h(K,I[0]),ce=h(K,z[0]),de=x(x(T(P[0],P[0]),T(P[1],P[1])),x(T(P[2],P[2]),T(P[3],P[3]))),ge=h(de,E[0]),ve=h(de,k[0]),be=h(de,L[0]),me=h(de,I[0]),Se=h(de,z[0]),we=x(x(T(I[0],I[0]),T(I[1],I[1])),x(T(I[2],I[2]),T(I[3],I[3]))),_e=h(we,E[0]),oe=h(we,k[0]),le=h(we,L[0]),pe=h(we,P[0]),Ee=h(we,z[0]),Te=x(x(T(z[0],z[0]),T(z[1],z[1])),x(T(z[2],z[2]),T(z[3],z[3]))),Me=h(Te,E[0]),Le=h(Te,k[0]),Ie=h(Te,L[0]),he=h(Te,P[0]),xe=h(Te,I[0]),ke=x(x(x(h(x(x(h(x(h(y(xe,Ee),P[1]),x(h(y(he,Se),-I[1]),h(y(pe,me),z[1]))),L[2]),h(x(h(y(xe,Ee),L[1]),x(h(y(Ie,ce),-I[1]),h(y(le,se),z[1]))),-P[2])),x(h(x(h(y(he,Se),L[1]),x(h(y(Ie,ce),-P[1]),h(y(be,ae),z[1]))),I[2]),h(x(h(y(pe,me),L[1]),x(h(y(le,se),-P[1]),h(y(be,ae),I[1]))),-z[2]))),k[3]),x(h(x(x(h(x(h(y(xe,Ee),P[1]),x(h(y(he,Se),-I[1]),h(y(pe,me),z[1]))),k[2]),h(x(h(y(xe,Ee),k[1]),x(h(y(Le,J),-I[1]),h(y(oe,$),z[1]))),-P[2])),x(h(x(h(y(he,Se),k[1]),x(h(y(Le,J),-P[1]),h(y(ve,ee),z[1]))),I[2]),h(x(h(y(pe,me),k[1]),x(h(y(oe,$),-P[1]),h(y(ve,ee),I[1]))),-z[2]))),-L[3]),h(x(x(h(x(h(y(xe,Ee),L[1]),x(h(y(Ie,ce),-I[1]),h(y(le,se),z[1]))),k[2]),h(x(h(y(xe,Ee),k[1]),x(h(y(Le,J),-I[1]),h(y(oe,$),z[1]))),-L[2])),x(h(x(h(y(Ie,ce),k[1]),x(h(y(Le,J),-L[1]),h(y(ie,ne),z[1]))),I[2]),h(x(h(y(le,se),k[1]),x(h(y(oe,$),-L[1]),h(y(ie,ne),I[1]))),-z[2]))),P[3]))),x(x(h(x(x(h(x(h(y(he,Se),L[1]),x(h(y(Ie,ce),-P[1]),h(y(be,ae),z[1]))),k[2]),h(x(h(y(he,Se),k[1]),x(h(y(Le,J),-P[1]),h(y(ve,ee),z[1]))),-L[2])),x(h(x(h(y(Ie,ce),k[1]),x(h(y(Le,J),-L[1]),h(y(ie,ne),z[1]))),P[2]),h(x(h(y(be,ae),k[1]),x(h(y(ve,ee),-L[1]),h(y(ie,ne),P[1]))),-z[2]))),-I[3]),h(x(x(h(x(h(y(pe,me),L[1]),x(h(y(le,se),-P[1]),h(y(be,ae),I[1]))),k[2]),h(x(h(y(pe,me),k[1]),x(h(y(oe,$),-P[1]),h(y(ve,ee),I[1]))),-L[2])),x(h(x(h(y(le,se),k[1]),x(h(y(oe,$),-L[1]),h(y(ie,ne),I[1]))),P[2]),h(x(h(y(be,ae),k[1]),x(h(y(ve,ee),-L[1]),h(y(ie,ne),P[1]))),-I[2]))),z[3])),x(h(x(x(h(x(h(y(xe,Ee),P[1]),x(h(y(he,Se),-I[1]),h(y(pe,me),z[1]))),k[2]),h(x(h(y(xe,Ee),k[1]),x(h(y(Le,J),-I[1]),h(y(oe,$),z[1]))),-P[2])),x(h(x(h(y(he,Se),k[1]),x(h(y(Le,J),-P[1]),h(y(ve,ee),z[1]))),I[2]),h(x(h(y(pe,me),k[1]),x(h(y(oe,$),-P[1]),h(y(ve,ee),I[1]))),-z[2]))),E[3]),h(x(x(h(x(h(y(xe,Ee),P[1]),x(h(y(he,Se),-I[1]),h(y(pe,me),z[1]))),E[2]),h(x(h(y(xe,Ee),E[1]),x(h(y(Me,B),-I[1]),h(y(_e,Z),z[1]))),-P[2])),x(h(x(h(y(he,Se),E[1]),x(h(y(Me,B),-P[1]),h(y(ge,j),z[1]))),I[2]),h(x(h(y(pe,me),E[1]),x(h(y(_e,Z),-P[1]),h(y(ge,j),I[1]))),-z[2]))),-k[3])))),x(x(x(h(x(x(h(x(h(y(xe,Ee),k[1]),x(h(y(Le,J),-I[1]),h(y(oe,$),z[1]))),E[2]),h(x(h(y(xe,Ee),E[1]),x(h(y(Me,B),-I[1]),h(y(_e,Z),z[1]))),-k[2])),x(h(x(h(y(Le,J),E[1]),x(h(y(Me,B),-k[1]),h(y(V,U),z[1]))),I[2]),h(x(h(y(oe,$),E[1]),x(h(y(_e,Z),-k[1]),h(y(V,U),I[1]))),-z[2]))),P[3]),h(x(x(h(x(h(y(he,Se),k[1]),x(h(y(Le,J),-P[1]),h(y(ve,ee),z[1]))),E[2]),h(x(h(y(he,Se),E[1]),x(h(y(Me,B),-P[1]),h(y(ge,j),z[1]))),-k[2])),x(h(x(h(y(Le,J),E[1]),x(h(y(Me,B),-k[1]),h(y(V,U),z[1]))),P[2]),h(x(h(y(ve,ee),E[1]),x(h(y(ge,j),-k[1]),h(y(V,U),P[1]))),-z[2]))),-I[3])),x(h(x(x(h(x(h(y(pe,me),k[1]),x(h(y(oe,$),-P[1]),h(y(ve,ee),I[1]))),E[2]),h(x(h(y(pe,me),E[1]),x(h(y(_e,Z),-P[1]),h(y(ge,j),I[1]))),-k[2])),x(h(x(h(y(oe,$),E[1]),x(h(y(_e,Z),-k[1]),h(y(V,U),I[1]))),P[2]),h(x(h(y(ve,ee),E[1]),x(h(y(ge,j),-k[1]),h(y(V,U),P[1]))),-I[2]))),z[3]),h(x(x(h(x(h(y(he,Se),L[1]),x(h(y(Ie,ce),-P[1]),h(y(be,ae),z[1]))),k[2]),h(x(h(y(he,Se),k[1]),x(h(y(Le,J),-P[1]),h(y(ve,ee),z[1]))),-L[2])),x(h(x(h(y(Ie,ce),k[1]),x(h(y(Le,J),-L[1]),h(y(ie,ne),z[1]))),P[2]),h(x(h(y(be,ae),k[1]),x(h(y(ve,ee),-L[1]),h(y(ie,ne),P[1]))),-z[2]))),E[3]))),x(x(h(x(x(h(x(h(y(he,Se),L[1]),x(h(y(Ie,ce),-P[1]),h(y(be,ae),z[1]))),E[2]),h(x(h(y(he,Se),E[1]),x(h(y(Me,B),-P[1]),h(y(ge,j),z[1]))),-L[2])),x(h(x(h(y(Ie,ce),E[1]),x(h(y(Me,B),-L[1]),h(y(te,R),z[1]))),P[2]),h(x(h(y(be,ae),E[1]),x(h(y(ge,j),-L[1]),h(y(te,R),P[1]))),-z[2]))),-k[3]),h(x(x(h(x(h(y(he,Se),k[1]),x(h(y(Le,J),-P[1]),h(y(ve,ee),z[1]))),E[2]),h(x(h(y(he,Se),E[1]),x(h(y(Me,B),-P[1]),h(y(ge,j),z[1]))),-k[2])),x(h(x(h(y(Le,J),E[1]),x(h(y(Me,B),-k[1]),h(y(V,U),z[1]))),P[2]),h(x(h(y(ve,ee),E[1]),x(h(y(ge,j),-k[1]),h(y(V,U),P[1]))),-z[2]))),L[3])),x(h(x(x(h(x(h(y(Ie,ce),k[1]),x(h(y(Le,J),-L[1]),h(y(ie,ne),z[1]))),E[2]),h(x(h(y(Ie,ce),E[1]),x(h(y(Me,B),-L[1]),h(y(te,R),z[1]))),-k[2])),x(h(x(h(y(Le,J),E[1]),x(h(y(Me,B),-k[1]),h(y(V,U),z[1]))),L[2]),h(x(h(y(ie,ne),E[1]),x(h(y(te,R),-k[1]),h(y(V,U),L[1]))),-z[2]))),-P[3]),h(x(x(h(x(h(y(be,ae),k[1]),x(h(y(ve,ee),-L[1]),h(y(ie,ne),P[1]))),E[2]),h(x(h(y(be,ae),E[1]),x(h(y(ge,j),-L[1]),h(y(te,R),P[1]))),-k[2])),x(h(x(h(y(ve,ee),E[1]),x(h(y(ge,j),-k[1]),h(y(V,U),P[1]))),L[2]),h(x(h(y(ie,ne),E[1]),x(h(y(te,R),-k[1]),h(y(V,U),L[1]))),-P[2]))),z[3]))))),ze=x(x(x(h(x(x(h(x(h(y(xe,Ee),P[1]),x(h(y(he,Se),-I[1]),h(y(pe,me),z[1]))),L[2]),h(x(h(y(xe,Ee),L[1]),x(h(y(Ie,ce),-I[1]),h(y(le,se),z[1]))),-P[2])),x(h(x(h(y(he,Se),L[1]),x(h(y(Ie,ce),-P[1]),h(y(be,ae),z[1]))),I[2]),h(x(h(y(pe,me),L[1]),x(h(y(le,se),-P[1]),h(y(be,ae),I[1]))),-z[2]))),E[3]),x(h(x(x(h(x(h(y(xe,Ee),P[1]),x(h(y(he,Se),-I[1]),h(y(pe,me),z[1]))),E[2]),h(x(h(y(xe,Ee),E[1]),x(h(y(Me,B),-I[1]),h(y(_e,Z),z[1]))),-P[2])),x(h(x(h(y(he,Se),E[1]),x(h(y(Me,B),-P[1]),h(y(ge,j),z[1]))),I[2]),h(x(h(y(pe,me),E[1]),x(h(y(_e,Z),-P[1]),h(y(ge,j),I[1]))),-z[2]))),-L[3]),h(x(x(h(x(h(y(xe,Ee),L[1]),x(h(y(Ie,ce),-I[1]),h(y(le,se),z[1]))),E[2]),h(x(h(y(xe,Ee),E[1]),x(h(y(Me,B),-I[1]),h(y(_e,Z),z[1]))),-L[2])),x(h(x(h(y(Ie,ce),E[1]),x(h(y(Me,B),-L[1]),h(y(te,R),z[1]))),I[2]),h(x(h(y(le,se),E[1]),x(h(y(_e,Z),-L[1]),h(y(te,R),I[1]))),-z[2]))),P[3]))),x(x(h(x(x(h(x(h(y(he,Se),L[1]),x(h(y(Ie,ce),-P[1]),h(y(be,ae),z[1]))),E[2]),h(x(h(y(he,Se),E[1]),x(h(y(Me,B),-P[1]),h(y(ge,j),z[1]))),-L[2])),x(h(x(h(y(Ie,ce),E[1]),x(h(y(Me,B),-L[1]),h(y(te,R),z[1]))),P[2]),h(x(h(y(be,ae),E[1]),x(h(y(ge,j),-L[1]),h(y(te,R),P[1]))),-z[2]))),-I[3]),h(x(x(h(x(h(y(pe,me),L[1]),x(h(y(le,se),-P[1]),h(y(be,ae),I[1]))),E[2]),h(x(h(y(pe,me),E[1]),x(h(y(_e,Z),-P[1]),h(y(ge,j),I[1]))),-L[2])),x(h(x(h(y(le,se),E[1]),x(h(y(_e,Z),-L[1]),h(y(te,R),I[1]))),P[2]),h(x(h(y(be,ae),E[1]),x(h(y(ge,j),-L[1]),h(y(te,R),P[1]))),-I[2]))),z[3])),x(h(x(x(h(x(h(y(xe,Ee),L[1]),x(h(y(Ie,ce),-I[1]),h(y(le,se),z[1]))),k[2]),h(x(h(y(xe,Ee),k[1]),x(h(y(Le,J),-I[1]),h(y(oe,$),z[1]))),-L[2])),x(h(x(h(y(Ie,ce),k[1]),x(h(y(Le,J),-L[1]),h(y(ie,ne),z[1]))),I[2]),h(x(h(y(le,se),k[1]),x(h(y(oe,$),-L[1]),h(y(ie,ne),I[1]))),-z[2]))),E[3]),h(x(x(h(x(h(y(xe,Ee),L[1]),x(h(y(Ie,ce),-I[1]),h(y(le,se),z[1]))),E[2]),h(x(h(y(xe,Ee),E[1]),x(h(y(Me,B),-I[1]),h(y(_e,Z),z[1]))),-L[2])),x(h(x(h(y(Ie,ce),E[1]),x(h(y(Me,B),-L[1]),h(y(te,R),z[1]))),I[2]),h(x(h(y(le,se),E[1]),x(h(y(_e,Z),-L[1]),h(y(te,R),I[1]))),-z[2]))),-k[3])))),x(x(x(h(x(x(h(x(h(y(xe,Ee),k[1]),x(h(y(Le,J),-I[1]),h(y(oe,$),z[1]))),E[2]),h(x(h(y(xe,Ee),E[1]),x(h(y(Me,B),-I[1]),h(y(_e,Z),z[1]))),-k[2])),x(h(x(h(y(Le,J),E[1]),x(h(y(Me,B),-k[1]),h(y(V,U),z[1]))),I[2]),h(x(h(y(oe,$),E[1]),x(h(y(_e,Z),-k[1]),h(y(V,U),I[1]))),-z[2]))),L[3]),h(x(x(h(x(h(y(Ie,ce),k[1]),x(h(y(Le,J),-L[1]),h(y(ie,ne),z[1]))),E[2]),h(x(h(y(Ie,ce),E[1]),x(h(y(Me,B),-L[1]),h(y(te,R),z[1]))),-k[2])),x(h(x(h(y(Le,J),E[1]),x(h(y(Me,B),-k[1]),h(y(V,U),z[1]))),L[2]),h(x(h(y(ie,ne),E[1]),x(h(y(te,R),-k[1]),h(y(V,U),L[1]))),-z[2]))),-I[3])),x(h(x(x(h(x(h(y(le,se),k[1]),x(h(y(oe,$),-L[1]),h(y(ie,ne),I[1]))),E[2]),h(x(h(y(le,se),E[1]),x(h(y(_e,Z),-L[1]),h(y(te,R),I[1]))),-k[2])),x(h(x(h(y(oe,$),E[1]),x(h(y(_e,Z),-k[1]),h(y(V,U),I[1]))),L[2]),h(x(h(y(ie,ne),E[1]),x(h(y(te,R),-k[1]),h(y(V,U),L[1]))),-I[2]))),z[3]),h(x(x(h(x(h(y(pe,me),L[1]),x(h(y(le,se),-P[1]),h(y(be,ae),I[1]))),k[2]),h(x(h(y(pe,me),k[1]),x(h(y(oe,$),-P[1]),h(y(ve,ee),I[1]))),-L[2])),x(h(x(h(y(le,se),k[1]),x(h(y(oe,$),-L[1]),h(y(ie,ne),I[1]))),P[2]),h(x(h(y(be,ae),k[1]),x(h(y(ve,ee),-L[1]),h(y(ie,ne),P[1]))),-I[2]))),E[3]))),x(x(h(x(x(h(x(h(y(pe,me),L[1]),x(h(y(le,se),-P[1]),h(y(be,ae),I[1]))),E[2]),h(x(h(y(pe,me),E[1]),x(h(y(_e,Z),-P[1]),h(y(ge,j),I[1]))),-L[2])),x(h(x(h(y(le,se),E[1]),x(h(y(_e,Z),-L[1]),h(y(te,R),I[1]))),P[2]),h(x(h(y(be,ae),E[1]),x(h(y(ge,j),-L[1]),h(y(te,R),P[1]))),-I[2]))),-k[3]),h(x(x(h(x(h(y(pe,me),k[1]),x(h(y(oe,$),-P[1]),h(y(ve,ee),I[1]))),E[2]),h(x(h(y(pe,me),E[1]),x(h(y(_e,Z),-P[1]),h(y(ge,j),I[1]))),-k[2])),x(h(x(h(y(oe,$),E[1]),x(h(y(_e,Z),-k[1]),h(y(V,U),I[1]))),P[2]),h(x(h(y(ve,ee),E[1]),x(h(y(ge,j),-k[1]),h(y(V,U),P[1]))),-I[2]))),L[3])),x(h(x(x(h(x(h(y(le,se),k[1]),x(h(y(oe,$),-L[1]),h(y(ie,ne),I[1]))),E[2]),h(x(h(y(le,se),E[1]),x(h(y(_e,Z),-L[1]),h(y(te,R),I[1]))),-k[2])),x(h(x(h(y(oe,$),E[1]),x(h(y(_e,Z),-k[1]),h(y(V,U),I[1]))),L[2]),h(x(h(y(ie,ne),E[1]),x(h(y(te,R),-k[1]),h(y(V,U),L[1]))),-I[2]))),-P[3]),h(x(x(h(x(h(y(be,ae),k[1]),x(h(y(ve,ee),-L[1]),h(y(ie,ne),P[1]))),E[2]),h(x(h(y(be,ae),E[1]),x(h(y(ge,j),-L[1]),h(y(te,R),P[1]))),-k[2])),x(h(x(h(y(ve,ee),E[1]),x(h(y(ge,j),-k[1]),h(y(V,U),P[1]))),L[2]),h(x(h(y(ie,ne),E[1]),x(h(y(te,R),-k[1]),h(y(V,U),L[1]))),-P[2]))),I[3]))))),Re=y(ke,ze);return Re[Re.length-1]}}var v=[function(){return 0},function(){return 0},function(){return 0}];function d(x){var y=v[x.length];return y||(y=v[x.length]=u(x.length)),y.apply(void 0,x)}function m(x,y,T,h,E,k,L,P){return function(I,z,F,U,R,j){switch(arguments.length){case 0:case 1:return 0;case 2:return h(I,z);case 3:return E(I,z,F);case 4:return k(I,z,F,U);case 5:return L(I,z,F,U,R);case 6:return P(I,z,F,U,R,j)}for(var Z=new Array(arguments.length),B=0;B<arguments.length;++B)Z[B]=arguments[B];return x(Z)}}(function(){for(;v.length<=6;)v.push(u(v.length));p.exports=m.apply(void 0,[d].concat(v));for(var x=0;x<=6;++x)p.exports[x]=v[x]})()},6606:function(p,s,n){var a=n(8167);function r(v){return(v===2?i:v===3?l:v===4?u:v===5?c:g)(v<6?a[v]:a)}function i(v){return function(d,m){return[v([[+m[0],+d[0][1]],[+m[1],+d[1][1]]]),v([[+d[0][0],+m[0]],[+d[1][0],+m[1]]]),v(d)]}}function l(v){return function(d,m){return[v([[+m[0],+d[0][1],+d[0][2]],[+m[1],+d[1][1],+d[1][2]],[+m[2],+d[2][1],+d[2][2]]]),v([[+d[0][0],+m[0],+d[0][2]],[+d[1][0],+m[1],+d[1][2]],[+d[2][0],+m[2],+d[2][2]]]),v([[+d[0][0],+d[0][1],+m[0]],[+d[1][0],+d[1][1],+m[1]],[+d[2][0],+d[2][1],+m[2]]]),v(d)]}}function u(v){return function(d,m){return[v([[+m[0],+d[0][1],+d[0][2],+d[0][3]],[+m[1],+d[1][1],+d[1][2],+d[1][3]],[+m[2],+d[2][1],+d[2][2],+d[2][3]],[+m[3],+d[3][1],+d[3][2],+d[3][3]]]),v([[+d[0][0],+m[0],+d[0][2],+d[0][3]],[+d[1][0],+m[1],+d[1][2],+d[1][3]],[+d[2][0],+m[2],+d[2][2],+d[2][3]],[+d[3][0],+m[3],+d[3][2],+d[3][3]]]),v([[+d[0][0],+d[0][1],+m[0],+d[0][3]],[+d[1][0],+d[1][1],+m[1],+d[1][3]],[+d[2][0],+d[2][1],+m[2],+d[2][3]],[+d[3][0],+d[3][1],+m[3],+d[3][3]]]),v([[+d[0][0],+d[0][1],+d[0][2],+m[0]],[+d[1][0],+d[1][1],+d[1][2],+m[1]],[+d[2][0],+d[2][1],+d[2][2],+m[2]],[+d[3][0],+d[3][1],+d[3][2],+m[3]]]),v(d)]}}function c(v){return function(d,m){return[v([[+m[0],+d[0][1],+d[0][2],+d[0][3],+d[0][4]],[+m[1],+d[1][1],+d[1][2],+d[1][3],+d[1][4]],[+m[2],+d[2][1],+d[2][2],+d[2][3],+d[2][4]],[+m[3],+d[3][1],+d[3][2],+d[3][3],+d[3][4]],[+m[4],+d[4][1],+d[4][2],+d[4][3],+d[4][4]]]),v([[+d[0][0],+m[0],+d[0][2],+d[0][3],+d[0][4]],[+d[1][0],+m[1],+d[1][2],+d[1][3],+d[1][4]],[+d[2][0],+m[2],+d[2][2],+d[2][3],+d[2][4]],[+d[3][0],+m[3],+d[3][2],+d[3][3],+d[3][4]],[+d[4][0],+m[4],+d[4][2],+d[4][3],+d[4][4]]]),v([[+d[0][0],+d[0][1],+m[0],+d[0][3],+d[0][4]],[+d[1][0],+d[1][1],+m[1],+d[1][3],+d[1][4]],[+d[2][0],+d[2][1],+m[2],+d[2][3],+d[2][4]],[+d[3][0],+d[3][1],+m[3],+d[3][3],+d[3][4]],[+d[4][0],+d[4][1],+m[4],+d[4][3],+d[4][4]]]),v([[+d[0][0],+d[0][1],+d[0][2],+m[0],+d[0][4]],[+d[1][0],+d[1][1],+d[1][2],+m[1],+d[1][4]],[+d[2][0],+d[2][1],+d[2][2],+m[2],+d[2][4]],[+d[3][0],+d[3][1],+d[3][2],+m[3],+d[3][4]],[+d[4][0],+d[4][1],+d[4][2],+m[4],+d[4][4]]]),v([[+d[0][0],+d[0][1],+d[0][2],+d[0][3],+m[0]],[+d[1][0],+d[1][1],+d[1][2],+d[1][3],+m[1]],[+d[2][0],+d[2][1],+d[2][2],+d[2][3],+m[2]],[+d[3][0],+d[3][1],+d[3][2],+d[3][3],+m[3]],[+d[4][0],+d[4][1],+d[4][2],+d[4][3],+m[4]]]),v(d)]}}function g(v){return function(d,m){return[v([[+m[0],+d[0][1],+d[0][2],+d[0][3],+d[0][4],+d[0][5]],[+m[1],+d[1][1],+d[1][2],+d[1][3],+d[1][4],+d[1][5]],[+m[2],+d[2][1],+d[2][2],+d[2][3],+d[2][4],+d[2][5]],[+m[3],+d[3][1],+d[3][2],+d[3][3],+d[3][4],+d[3][5]],[+m[4],+d[4][1],+d[4][2],+d[4][3],+d[4][4],+d[4][5]],[+m[5],+d[5][1],+d[5][2],+d[5][3],+d[5][4],+d[5][5]]]),v([[+d[0][0],+m[0],+d[0][2],+d[0][3],+d[0][4],+d[0][5]],[+d[1][0],+m[1],+d[1][2],+d[1][3],+d[1][4],+d[1][5]],[+d[2][0],+m[2],+d[2][2],+d[2][3],+d[2][4],+d[2][5]],[+d[3][0],+m[3],+d[3][2],+d[3][3],+d[3][4],+d[3][5]],[+d[4][0],+m[4],+d[4][2],+d[4][3],+d[4][4],+d[4][5]],[+d[5][0],+m[5],+d[5][2],+d[5][3],+d[5][4],+d[5][5]]]),v([[+d[0][0],+d[0][1],+m[0],+d[0][3],+d[0][4],+d[0][5]],[+d[1][0],+d[1][1],+m[1],+d[1][3],+d[1][4],+d[1][5]],[+d[2][0],+d[2][1],+m[2],+d[2][3],+d[2][4],+d[2][5]],[+d[3][0],+d[3][1],+m[3],+d[3][3],+d[3][4],+d[3][5]],[+d[4][0],+d[4][1],+m[4],+d[4][3],+d[4][4],+d[4][5]],[+d[5][0],+d[5][1],+m[5],+d[5][3],+d[5][4],+d[5][5]]]),v([[+d[0][0],+d[0][1],+d[0][2],+m[0],+d[0][4],+d[0][5]],[+d[1][0],+d[1][1],+d[1][2],+m[1],+d[1][4],+d[1][5]],[+d[2][0],+d[2][1],+d[2][2],+m[2],+d[2][4],+d[2][5]],[+d[3][0],+d[3][1],+d[3][2],+m[3],+d[3][4],+d[3][5]],[+d[4][0],+d[4][1],+d[4][2],+m[4],+d[4][4],+d[4][5]],[+d[5][0],+d[5][1],+d[5][2],+m[5],+d[5][4],+d[5][5]]]),v([[+d[0][0],+d[0][1],+d[0][2],+d[0][3],+m[0],+d[0][5]],[+d[1][0],+d[1][1],+d[1][2],+d[1][3],+m[1],+d[1][5]],[+d[2][0],+d[2][1],+d[2][2],+d[2][3],+m[2],+d[2][5]],[+d[3][0],+d[3][1],+d[3][2],+d[3][3],+m[3],+d[3][5]],[+d[4][0],+d[4][1],+d[4][2],+d[4][3],+m[4],+d[4][5]],[+d[5][0],+d[5][1],+d[5][2],+d[5][3],+m[5],+d[5][5]]]),v([[+d[0][0],+d[0][1],+d[0][2],+d[0][3],+d[0][4],+m[0]],[+d[1][0],+d[1][1],+d[1][2],+d[1][3],+d[1][4],+m[1]],[+d[2][0],+d[2][1],+d[2][2],+d[2][3],+d[2][4],+m[2]],[+d[3][0],+d[3][1],+d[3][2],+d[3][3],+d[3][4],+m[3]],[+d[4][0],+d[4][1],+d[4][2],+d[4][3],+d[4][4],+m[4]],[+d[5][0],+d[5][1],+d[5][2],+d[5][3],+d[5][4],+m[5]]]),v(d)]}}var f=[function(){return[[0]]},function(v,d){return[[d[0]],[v[0][0]]]}];function b(v,d,m,x,y,T,h,E){return function(k,L){switch(k.length){case 0:return v(k,L);case 1:return d(k,L);case 2:return m(k,L);case 3:return x(k,L);case 4:return y(k,L);case 5:return T(k,L)}var P=h[k.length];return P||(P=h[k.length]=E(k.length)),P(k,L)}}(function(){for(;f.length<6;)f.push(r(f.length));p.exports=b.apply(void 0,f.concat([f,r]));for(var v=0;v<6;++v)p.exports[v]=f[v]})()},417:function(p,s,n){var a=n(9660),r=n(9662),i=n(8289),l=n(4078);function u(y,T,h,E){return function(k,L,P){var I=y(y(T(L[1],P[0]),T(-P[1],L[0])),y(T(k[1],L[0]),T(-L[1],k[0]))),z=y(T(k[1],P[0]),T(-P[1],k[0])),F=E(I,z);return F[F.length-1]}}function c(y,T,h,E){return function(k,L,P,I){var z=y(y(h(y(T(P[1],I[0]),T(-I[1],P[0])),L[2]),y(h(y(T(L[1],I[0]),T(-I[1],L[0])),-P[2]),h(y(T(L[1],P[0]),T(-P[1],L[0])),I[2]))),y(h(y(T(L[1],I[0]),T(-I[1],L[0])),k[2]),y(h(y(T(k[1],I[0]),T(-I[1],k[0])),-L[2]),h(y(T(k[1],L[0]),T(-L[1],k[0])),I[2])))),F=y(y(h(y(T(P[1],I[0]),T(-I[1],P[0])),k[2]),y(h(y(T(k[1],I[0]),T(-I[1],k[0])),-P[2]),h(y(T(k[1],P[0]),T(-P[1],k[0])),I[2]))),y(h(y(T(L[1],P[0]),T(-P[1],L[0])),k[2]),y(h(y(T(k[1],P[0]),T(-P[1],k[0])),-L[2]),h(y(T(k[1],L[0]),T(-L[1],k[0])),P[2])))),U=E(z,F);return U[U.length-1]}}function g(y,T,h,E){return function(k,L,P,I,z){var F=y(y(y(h(y(h(y(T(I[1],z[0]),T(-z[1],I[0])),P[2]),y(h(y(T(P[1],z[0]),T(-z[1],P[0])),-I[2]),h(y(T(P[1],I[0]),T(-I[1],P[0])),z[2]))),L[3]),y(h(y(h(y(T(I[1],z[0]),T(-z[1],I[0])),L[2]),y(h(y(T(L[1],z[0]),T(-z[1],L[0])),-I[2]),h(y(T(L[1],I[0]),T(-I[1],L[0])),z[2]))),-P[3]),h(y(h(y(T(P[1],z[0]),T(-z[1],P[0])),L[2]),y(h(y(T(L[1],z[0]),T(-z[1],L[0])),-P[2]),h(y(T(L[1],P[0]),T(-P[1],L[0])),z[2]))),I[3]))),y(h(y(h(y(T(P[1],I[0]),T(-I[1],P[0])),L[2]),y(h(y(T(L[1],I[0]),T(-I[1],L[0])),-P[2]),h(y(T(L[1],P[0]),T(-P[1],L[0])),I[2]))),-z[3]),y(h(y(h(y(T(I[1],z[0]),T(-z[1],I[0])),L[2]),y(h(y(T(L[1],z[0]),T(-z[1],L[0])),-I[2]),h(y(T(L[1],I[0]),T(-I[1],L[0])),z[2]))),k[3]),h(y(h(y(T(I[1],z[0]),T(-z[1],I[0])),k[2]),y(h(y(T(k[1],z[0]),T(-z[1],k[0])),-I[2]),h(y(T(k[1],I[0]),T(-I[1],k[0])),z[2]))),-L[3])))),y(y(h(y(h(y(T(L[1],z[0]),T(-z[1],L[0])),k[2]),y(h(y(T(k[1],z[0]),T(-z[1],k[0])),-L[2]),h(y(T(k[1],L[0]),T(-L[1],k[0])),z[2]))),I[3]),y(h(y(h(y(T(L[1],I[0]),T(-I[1],L[0])),k[2]),y(h(y(T(k[1],I[0]),T(-I[1],k[0])),-L[2]),h(y(T(k[1],L[0]),T(-L[1],k[0])),I[2]))),-z[3]),h(y(h(y(T(P[1],I[0]),T(-I[1],P[0])),L[2]),y(h(y(T(L[1],I[0]),T(-I[1],L[0])),-P[2]),h(y(T(L[1],P[0]),T(-P[1],L[0])),I[2]))),k[3]))),y(h(y(h(y(T(P[1],I[0]),T(-I[1],P[0])),k[2]),y(h(y(T(k[1],I[0]),T(-I[1],k[0])),-P[2]),h(y(T(k[1],P[0]),T(-P[1],k[0])),I[2]))),-L[3]),y(h(y(h(y(T(L[1],I[0]),T(-I[1],L[0])),k[2]),y(h(y(T(k[1],I[0]),T(-I[1],k[0])),-L[2]),h(y(T(k[1],L[0]),T(-L[1],k[0])),I[2]))),P[3]),h(y(h(y(T(L[1],P[0]),T(-P[1],L[0])),k[2]),y(h(y(T(k[1],P[0]),T(-P[1],k[0])),-L[2]),h(y(T(k[1],L[0]),T(-L[1],k[0])),P[2]))),-I[3]))))),U=y(y(y(h(y(h(y(T(I[1],z[0]),T(-z[1],I[0])),P[2]),y(h(y(T(P[1],z[0]),T(-z[1],P[0])),-I[2]),h(y(T(P[1],I[0]),T(-I[1],P[0])),z[2]))),k[3]),h(y(h(y(T(I[1],z[0]),T(-z[1],I[0])),k[2]),y(h(y(T(k[1],z[0]),T(-z[1],k[0])),-I[2]),h(y(T(k[1],I[0]),T(-I[1],k[0])),z[2]))),-P[3])),y(h(y(h(y(T(P[1],z[0]),T(-z[1],P[0])),k[2]),y(h(y(T(k[1],z[0]),T(-z[1],k[0])),-P[2]),h(y(T(k[1],P[0]),T(-P[1],k[0])),z[2]))),I[3]),h(y(h(y(T(P[1],I[0]),T(-I[1],P[0])),k[2]),y(h(y(T(k[1],I[0]),T(-I[1],k[0])),-P[2]),h(y(T(k[1],P[0]),T(-P[1],k[0])),I[2]))),-z[3]))),y(y(h(y(h(y(T(P[1],z[0]),T(-z[1],P[0])),L[2]),y(h(y(T(L[1],z[0]),T(-z[1],L[0])),-P[2]),h(y(T(L[1],P[0]),T(-P[1],L[0])),z[2]))),k[3]),h(y(h(y(T(P[1],z[0]),T(-z[1],P[0])),k[2]),y(h(y(T(k[1],z[0]),T(-z[1],k[0])),-P[2]),h(y(T(k[1],P[0]),T(-P[1],k[0])),z[2]))),-L[3])),y(h(y(h(y(T(L[1],z[0]),T(-z[1],L[0])),k[2]),y(h(y(T(k[1],z[0]),T(-z[1],k[0])),-L[2]),h(y(T(k[1],L[0]),T(-L[1],k[0])),z[2]))),P[3]),h(y(h(y(T(L[1],P[0]),T(-P[1],L[0])),k[2]),y(h(y(T(k[1],P[0]),T(-P[1],k[0])),-L[2]),h(y(T(k[1],L[0]),T(-L[1],k[0])),P[2]))),-z[3])))),R=E(F,U);return R[R.length-1]}}function f(y){return(y===3?u:y===4?c:g)(r,a,i,l)}var b=f(3),v=f(4),d=[function(){return 0},function(){return 0},function(y,T){return T[0]-y[0]},function(y,T,h){var E,k=(y[1]-h[1])*(T[0]-h[0]),L=(y[0]-h[0])*(T[1]-h[1]),P=k-L;if(k>0){if(L<=0)return P;E=k+L}else{if(!(k<0)||L>=0)return P;E=-(k+L)}var I=33306690738754716e-32*E;return P>=I||P<=-I?P:b(y,T,h)},function(y,T,h,E){var k=y[0]-E[0],L=T[0]-E[0],P=h[0]-E[0],I=y[1]-E[1],z=T[1]-E[1],F=h[1]-E[1],U=y[2]-E[2],R=T[2]-E[2],j=h[2]-E[2],Z=L*F,B=P*z,q=P*I,V=k*F,ne=k*z,ee=L*I,$=U*(Z-B)+R*(q-V)+j*(ne-ee),J=7771561172376103e-31*((Math.abs(Z)+Math.abs(B))*Math.abs(U)+(Math.abs(q)+Math.abs(V))*Math.abs(R)+(Math.abs(ne)+Math.abs(ee))*Math.abs(j));return $>J||-$>J?$:v(y,T,h,E)}];function m(y){var T=d[y.length];return T||(T=d[y.length]=f(y.length)),T.apply(void 0,y)}function x(y,T,h,E,k,L,P){return function(I,z,F,U,R){switch(arguments.length){case 0:case 1:return 0;case 2:return E(I,z);case 3:return k(I,z,F);case 4:return L(I,z,F,U);case 5:return P(I,z,F,U,R)}for(var j=new Array(arguments.length),Z=0;Z<arguments.length;++Z)j[Z]=arguments[Z];return y(j)}}(function(){for(;d.length<=5;)d.push(f(d.length));p.exports=x.apply(void 0,[m].concat(d));for(var y=0;y<=5;++y)p.exports[y]=d[y]})()},2019:function(p,s,n){var a=n(9662),r=n(8289);p.exports=function(i,l){if(i.length===1)return r(l,i[0]);if(l.length===1)return r(i,l[0]);if(i.length===0||l.length===0)return[0];var u=[0];if(i.length<l.length)for(var c=0;c<i.length;++c)u=a(u,r(l,i[c]));else for(c=0;c<l.length;++c)u=a(u,r(i,l[c]));return u}},8289:function(p,s,n){var a=n(9660),r=n(87);p.exports=function(i,l){var u=i.length;if(u===1){var c=a(i[0],l);return c[0]?c:[c[1]]}var g=new Array(2*u),f=[.1,.1],b=[.1,.1],v=0;a(i[0],l,f),f[0]&&(g[v++]=f[0]);for(var d=1;d<u;++d){a(i[d],l,b);var m=f[1];r(m,b[0],f),f[0]&&(g[v++]=f[0]);var x=b[1],y=f[1],T=x+y,h=y-(T-x);f[1]=T,h&&(g[v++]=h)}return f[1]&&(g[v++]=f[1]),v===0&&(g[v++]=0),g.length=v,g}},4434:function(p,s,n){p.exports=function(r,i,l,u){var c=a(r,l,u),g=a(i,l,u);if(c>0&&g>0||c<0&&g<0)return!1;var f=a(l,r,i),b=a(u,r,i);return!(f>0&&b>0||f<0&&b<0)&&(c!==0||g!==0||f!==0||b!==0||function(v,d,m,x){for(var y=0;y<2;++y){var T=v[y],h=d[y],E=Math.min(T,h),k=Math.max(T,h),L=m[y],P=x[y],I=Math.min(L,P);if(Math.max(L,P)<E||k<I)return!1}return!0}(r,i,l,u))};var a=n(417)[3]},4078:function(p){p.exports=function(s,n){var a=0|s.length,r=0|n.length;if(a===1&&r===1)return function(I,z){var F=I+z,U=F-I,R=I-(F-U)+(z-U);return R?[R,F]:[F]}(s[0],-n[0]);var i,l,u=new Array(a+r),c=0,g=0,f=0,b=Math.abs,v=s[g],d=b(v),m=-n[f],x=b(m);d<x?(l=v,(g+=1)<a&&(d=b(v=s[g]))):(l=m,(f+=1)<r&&(x=b(m=-n[f]))),g<a&&d<x||f>=r?(i=v,(g+=1)<a&&(d=b(v=s[g]))):(i=m,(f+=1)<r&&(x=b(m=-n[f])));for(var y,T,h=i+l,E=h-i,k=l-E,L=k,P=h;g<a&&f<r;)d<x?(i=v,(g+=1)<a&&(d=b(v=s[g]))):(i=m,(f+=1)<r&&(x=b(m=-n[f]))),(k=(l=L)-(E=(h=i+l)-i))&&(u[c++]=k),L=P-((y=P+h)-(T=y-P))+(h-T),P=y;for(;g<a;)(k=(l=L)-(E=(h=(i=v)+l)-i))&&(u[c++]=k),L=P-((y=P+h)-(T=y-P))+(h-T),P=y,(g+=1)<a&&(v=s[g]);for(;f<r;)(k=(l=L)-(E=(h=(i=m)+l)-i))&&(u[c++]=k),L=P-((y=P+h)-(T=y-P))+(h-T),P=y,(f+=1)<r&&(m=-n[f]);return L&&(u[c++]=L),P&&(u[c++]=P),c||(u[c++]=0),u.length=c,u}},9662:function(p){p.exports=function(s,n){var a=0|s.length,r=0|n.length;if(a===1&&r===1)return function(I,z){var F=I+z,U=F-I,R=I-(F-U)+(z-U);return R?[R,F]:[F]}(s[0],n[0]);var i,l,u=new Array(a+r),c=0,g=0,f=0,b=Math.abs,v=s[g],d=b(v),m=n[f],x=b(m);d<x?(l=v,(g+=1)<a&&(d=b(v=s[g]))):(l=m,(f+=1)<r&&(x=b(m=n[f]))),g<a&&d<x||f>=r?(i=v,(g+=1)<a&&(d=b(v=s[g]))):(i=m,(f+=1)<r&&(x=b(m=n[f])));for(var y,T,h=i+l,E=h-i,k=l-E,L=k,P=h;g<a&&f<r;)d<x?(i=v,(g+=1)<a&&(d=b(v=s[g]))):(i=m,(f+=1)<r&&(x=b(m=n[f]))),(k=(l=L)-(E=(h=i+l)-i))&&(u[c++]=k),L=P-((y=P+h)-(T=y-P))+(h-T),P=y;for(;g<a;)(k=(l=L)-(E=(h=(i=v)+l)-i))&&(u[c++]=k),L=P-((y=P+h)-(T=y-P))+(h-T),P=y,(g+=1)<a&&(v=s[g]);for(;f<r;)(k=(l=L)-(E=(h=(i=m)+l)-i))&&(u[c++]=k),L=P-((y=P+h)-(T=y-P))+(h-T),P=y,(f+=1)<r&&(m=n[f]);return L&&(u[c++]=L),P&&(u[c++]=P),c||(u[c++]=0),u.length=c,u}},8691:function(p,s,n){p.exports=function(i){return r(a(i))};var a=n(2692),r=n(7037)},7212:function(p,s,n){p.exports=function(u,c,g,f){if(g=g||0,f===void 0&&(f=function(h){for(var E=h.length,k=0,L=0;L<E;++L)k=0|Math.max(k,h[L].length);return k-1}(u)),u.length===0||f<1)return{cells:[],vertexIds:[],vertexWeights:[]};var b=function(h,E){for(var k=h.length,L=r.mallocUint8(k),P=0;P<k;++P)L[P]=h[P]<E|0;return L}(c,+g),v=function(h,E){for(var k=h.length,L=E*(E+1)/2*k|0,P=r.mallocUint32(2*L),I=0,z=0;z<k;++z)for(var F=h[z],U=(E=F.length,0);U<E;++U)for(var R=0;R<U;++R){var j=F[R],Z=F[U];P[I++]=0|Math.min(j,Z),P[I++]=0|Math.max(j,Z)}i(a(P,[I/2|0,2]));var B=2;for(z=2;z<I;z+=2)P[z-2]===P[z]&&P[z-1]===P[z+1]||(P[B++]=P[z],P[B++]=P[z+1]);return a(P,[B/2|0,2])}(u,f),d=function(h,E,k,L){for(var P=h.data,I=h.shape[0],z=r.mallocDouble(I),F=0,U=0;U<I;++U){var R=P[2*U],j=P[2*U+1];if(k[R]!==k[j]){var Z=E[R],B=E[j];P[2*F]=R,P[2*F+1]=j,z[F++]=(B-L)/(B-Z)}}return h.shape[0]=F,a(z,[F])}(v,c,b,+g),m=function(h,E){var k=r.mallocInt32(2*E),L=h.shape[0],P=h.data;k[0]=0;for(var I=0,z=0;z<L;++z){var F=P[2*z];if(F!==I){for(k[2*I+1]=z;++I<F;)k[2*I]=z,k[2*I+1]=z;k[2*I]=z}}for(k[2*I+1]=L;++I<E;)k[2*I]=k[2*I+1]=L;return k}(v,0|c.length),x=l(f)(u,v.data,m,b),y=function(h){for(var E=0|h.shape[0],k=h.data,L=new Array(E),P=0;P<E;++P)L[P]=[k[2*P],k[2*P+1]];return L}(v),T=[].slice.call(d.data,0,d.shape[0]);return r.free(b),r.free(v.data),r.free(d.data),r.free(m),{cells:x,vertexIds:y,vertexWeights:T}};var a=n(5050),r=n(5306),i=n(8729),l=n(1168)},1168:function(p){p.exports=function(n){return s[n]()};var s=[function(){return function(n,a,r,i){for(var l=n.length,u=0;u<l;++u)n[u].length;return[]}},function(){function n(a,r,i,l){for(var u=0|Math.min(i,l),c=0|Math.max(i,l),g=a[2*u],f=a[2*u+1];g<f;){var b=g+f>>1,v=r[2*b+1];if(v===c)return b;c<v?f=b:g=b+1}return g}return function(a,r,i,l){for(var u=a.length,c=[],g=0;g<u;++g){var f=a[g];if(f.length===2){var b=(l[f[0]]<<0)+(l[f[1]]<<1);if(b===0||b===3)continue;switch(b){case 0:case 3:break;case 1:c.push([n(i,r,f[0],f[1])]);break;case 2:c.push([n(i,r,f[1],f[0])])}}}return c}},function(){function n(a,r,i,l){for(var u=0|Math.min(i,l),c=0|Math.max(i,l),g=a[2*u],f=a[2*u+1];g<f;){var b=g+f>>1,v=r[2*b+1];if(v===c)return b;c<v?f=b:g=b+1}return g}return function(a,r,i,l){for(var u=a.length,c=[],g=0;g<u;++g){var f=a[g],b=f.length;if(b===3){if((v=(l[f[0]]<<0)+(l[f[1]]<<1)+(l[f[2]]<<2))==0||v===7)continue;switch(v){case 0:case 7:break;case 1:c.push([n(i,r,f[0],f[2]),n(i,r,f[0],f[1])]);break;case 2:c.push([n(i,r,f[1],f[0]),n(i,r,f[1],f[2])]);break;case 3:c.push([n(i,r,f[0],f[2]),n(i,r,f[1],f[2])]);break;case 4:c.push([n(i,r,f[2],f[1]),n(i,r,f[2],f[0])]);break;case 5:c.push([n(i,r,f[2],f[1]),n(i,r,f[0],f[1])]);break;case 6:c.push([n(i,r,f[1],f[0]),n(i,r,f[2],f[0])])}}else if(b===2){var v;if((v=(l[f[0]]<<0)+(l[f[1]]<<1))==0||v===3)continue;switch(v){case 0:case 3:break;case 1:c.push([n(i,r,f[0],f[1])]);break;case 2:c.push([n(i,r,f[1],f[0])])}}}return c}},function(){function n(a,r,i,l){for(var u=0|Math.min(i,l),c=0|Math.max(i,l),g=a[2*u],f=a[2*u+1];g<f;){var b=g+f>>1,v=r[2*b+1];if(v===c)return b;c<v?f=b:g=b+1}return g}return function(a,r,i,l){for(var u=a.length,c=[],g=0;g<u;++g){var f=a[g],b=f.length;if(b===4){if((v=(l[f[0]]<<0)+(l[f[1]]<<1)+(l[f[2]]<<2)+(l[f[3]]<<3))==0||v===15)continue;switch(v){case 0:case 15:break;case 1:c.push([n(i,r,f[0],f[1]),n(i,r,f[0],f[2]),n(i,r,f[0],f[3])]);break;case 2:c.push([n(i,r,f[1],f[2]),n(i,r,f[1],f[0]),n(i,r,f[1],f[3])]);break;case 3:c.push([n(i,r,f[1],f[2]),n(i,r,f[0],f[2]),n(i,r,f[0],f[3])],[n(i,r,f[1],f[3]),n(i,r,f[1],f[2]),n(i,r,f[0],f[3])]);break;case 4:c.push([n(i,r,f[2],f[0]),n(i,r,f[2],f[1]),n(i,r,f[2],f[3])]);break;case 5:c.push([n(i,r,f[0],f[1]),n(i,r,f[2],f[1]),n(i,r,f[0],f[3])],[n(i,r,f[2],f[1]),n(i,r,f[2],f[3]),n(i,r,f[0],f[3])]);break;case 6:c.push([n(i,r,f[2],f[0]),n(i,r,f[1],f[0]),n(i,r,f[1],f[3])],[n(i,r,f[2],f[3]),n(i,r,f[2],f[0]),n(i,r,f[1],f[3])]);break;case 7:c.push([n(i,r,f[0],f[3]),n(i,r,f[1],f[3]),n(i,r,f[2],f[3])]);break;case 8:c.push([n(i,r,f[3],f[1]),n(i,r,f[3],f[0]),n(i,r,f[3],f[2])]);break;case 9:c.push([n(i,r,f[3],f[1]),n(i,r,f[0],f[1]),n(i,r,f[0],f[2])],[n(i,r,f[3],f[2]),n(i,r,f[3],f[1]),n(i,r,f[0],f[2])]);break;case 10:c.push([n(i,r,f[1],f[0]),n(i,r,f[3],f[0]),n(i,r,f[1],f[2])],[n(i,r,f[3],f[0]),n(i,r,f[3],f[2]),n(i,r,f[1],f[2])]);break;case 11:c.push([n(i,r,f[1],f[2]),n(i,r,f[0],f[2]),n(i,r,f[3],f[2])]);break;case 12:c.push([n(i,r,f[3],f[0]),n(i,r,f[2],f[0]),n(i,r,f[2],f[1])],[n(i,r,f[3],f[1]),n(i,r,f[3],f[0]),n(i,r,f[2],f[1])]);break;case 13:c.push([n(i,r,f[0],f[1]),n(i,r,f[2],f[1]),n(i,r,f[3],f[1])]);break;case 14:c.push([n(i,r,f[2],f[0]),n(i,r,f[1],f[0]),n(i,r,f[3],f[0])])}}else if(b===3){if((v=(l[f[0]]<<0)+(l[f[1]]<<1)+(l[f[2]]<<2))==0||v===7)continue;switch(v){case 0:case 7:break;case 1:c.push([n(i,r,f[0],f[2]),n(i,r,f[0],f[1])]);break;case 2:c.push([n(i,r,f[1],f[0]),n(i,r,f[1],f[2])]);break;case 3:c.push([n(i,r,f[0],f[2]),n(i,r,f[1],f[2])]);break;case 4:c.push([n(i,r,f[2],f[1]),n(i,r,f[2],f[0])]);break;case 5:c.push([n(i,r,f[2],f[1]),n(i,r,f[0],f[1])]);break;case 6:c.push([n(i,r,f[1],f[0]),n(i,r,f[2],f[0])])}}else if(b===2){var v;if((v=(l[f[0]]<<0)+(l[f[1]]<<1))==0||v===3)continue;switch(v){case 0:case 3:break;case 1:c.push([n(i,r,f[0],f[1])]);break;case 2:c.push([n(i,r,f[1],f[0])])}}}return c}}]},8211:function(p,s,n){n(2288),n(1731),s.H=function(a,r){var i=a.length,l=a.length-r.length,u=Math.min;if(l)return l;switch(i){case 0:return 0;case 1:return a[0]-r[0];case 2:return(f=a[0]+a[1]-r[0]-r[1])||u(a[0],a[1])-u(r[0],r[1]);case 3:var c=a[0]+a[1],g=r[0]+r[1];if(f=c+a[2]-(g+r[2]))return f;var f,b=u(a[0],a[1]),v=u(r[0],r[1]);return(f=u(b,a[2])-u(v,r[2]))||u(b+a[2],c)-u(v+r[2],g);default:var d=a.slice(0);d.sort();var m=r.slice(0);m.sort();for(var x=0;x<i;++x)if(l=d[x]-m[x])return l;return 0}}},9392:function(p,s){function n(r){var i=32;return(r&=-r)&&i--,65535&r&&(i-=16),16711935&r&&(i-=8),252645135&r&&(i-=4),858993459&r&&(i-=2),1431655765&r&&(i-=1),i}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(r){return(r>0)-(r<0)},s.abs=function(r){var i=r>>31;return(r^i)-i},s.min=function(r,i){return i^(r^i)&-(r<i)},s.max=function(r,i){return r^(r^i)&-(r<i)},s.isPow2=function(r){return!(r&r-1||!r)},s.log2=function(r){var i,l;return i=(r>65535)<<4,i|=l=((r>>>=i)>255)<<3,i|=l=((r>>>=l)>15)<<2,(i|=l=((r>>>=l)>3)<<1)|(r>>>=l)>>1},s.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},s.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},s.countTrailingZeros=n,s.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},s.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},s.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var a=new Array(256);(function(r){for(var i=0;i<256;++i){var l=i,u=i,c=7;for(l>>>=1;l;l>>>=1)u<<=1,u|=1&l,--c;r[i]=u<<c&255}})(a),s.reverse=function(r){return a[255&r]<<24|a[r>>>8&255]<<16|a[r>>>16&255]<<8|a[r>>>24&255]},s.interleave2=function(r,i){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i&=65535)|i<<8))|i<<4))|i<<2))|i<<1))<<1},s.deinterleave2=function(r,i){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>i&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},s.interleave3=function(r,i,l){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<1)|(l=1227133513&((l=3272356035&((l=251719695&((l=4278190335&((l&=1023)|l<<16))|l<<8))|l<<4))|l<<2))<<2},s.deinterleave3=function(r,i){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>i&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},s.nextCombination=function(r){var i=r|r-1;return i+1|(~i&-~i)-1>>>n(r)+1}},6656:function(p,s,n){var a=n(9392),r=n(9521);function i(v,d){var m=v.length,x=v.length-d.length,y=Math.min;if(x)return x;switch(m){case 0:return 0;case 1:return v[0]-d[0];case 2:return(E=v[0]+v[1]-d[0]-d[1])||y(v[0],v[1])-y(d[0],d[1]);case 3:var T=v[0]+v[1],h=d[0]+d[1];if(E=T+v[2]-(h+d[2]))return E;var E,k=y(v[0],v[1]),L=y(d[0],d[1]);return(E=y(k,v[2])-y(L,d[2]))||y(k+v[2],T)-y(L+d[2],h);default:var P=v.slice(0);P.sort();var I=d.slice(0);I.sort();for(var z=0;z<m;++z)if(x=P[z]-I[z])return x;return 0}}function l(v,d){return i(v[0],d[0])}function u(v,d){if(d){for(var m=v.length,x=new Array(m),y=0;y<m;++y)x[y]=[v[y],d[y]];for(x.sort(l),y=0;y<m;++y)v[y]=x[y][0],d[y]=x[y][1];return v}return v.sort(i),v}function c(v){if(v.length===0)return[];for(var d=1,m=v.length,x=1;x<m;++x){var y=v[x];if(i(y,v[x-1])){if(x===d){d++;continue}v[d++]=y}}return v.length=d,v}function g(v,d){for(var m=0,x=v.length-1,y=-1;m<=x;){var T=m+x>>1,h=i(v[T],d);h<=0?(h===0&&(y=T),m=T+1):h>0&&(x=T-1)}return y}function f(v,d){for(var m=new Array(v.length),x=0,y=m.length;x<y;++x)m[x]=[];for(var T=[],h=(x=0,d.length);x<h;++x)for(var E=d[x],k=E.length,L=1,P=1<<k;L<P;++L){T.length=a.popCount(L);for(var I=0,z=0;z<k;++z)L&1<<z&&(T[I++]=E[z]);var F=g(v,T);if(!(F<0))for(;m[F++].push(x),!(F>=v.length||i(v[F],T)!==0););}return m}function b(v,d){if(d<0)return[];for(var m=[],x=(1<<d+1)-1,y=0;y<v.length;++y)for(var T=v[y],h=x;h<1<<T.length;h=a.nextCombination(h)){for(var E=new Array(d+1),k=0,L=0;L<T.length;++L)h&1<<L&&(E[k++]=T[L]);m.push(E)}return u(m)}s.dimension=function(v){for(var d=0,m=Math.max,x=0,y=v.length;x<y;++x)d=m(d,v[x].length);return d-1},s.countVertices=function(v){for(var d=-1,m=Math.max,x=0,y=v.length;x<y;++x)for(var T=v[x],h=0,E=T.length;h<E;++h)d=m(d,T[h]);return d+1},s.cloneCells=function(v){for(var d=new Array(v.length),m=0,x=v.length;m<x;++m)d[m]=v[m].slice(0);return d},s.compareCells=i,s.normalize=u,s.unique=c,s.findCell=g,s.incidence=f,s.dual=function(v,d){if(!d)return f(c(b(v,0)),v);for(var m=new Array(d),x=0;x<d;++x)m[x]=[];x=0;for(var y=v.length;x<y;++x)for(var T=v[x],h=0,E=T.length;h<E;++h)m[T[h]].push(x);return m},s.explode=function(v){for(var d=[],m=0,x=v.length;m<x;++m)for(var y=v[m],T=0|y.length,h=1,E=1<<T;h<E;++h){for(var k=[],L=0;L<T;++L)h>>>L&1&&k.push(y[L]);d.push(k)}return u(d)},s.skeleton=b,s.boundary=function(v){for(var d=[],m=0,x=v.length;m<x;++m)for(var y=v[m],T=0,h=y.length;T<h;++T){for(var E=new Array(y.length-1),k=0,L=0;k<h;++k)k!==T&&(E[L++]=y[k]);d.push(E)}return u(d)},s.connectedComponents=function(v,d){return d?function(m,x){for(var y=new r(x),T=0;T<m.length;++T)for(var h=m[T],E=0;E<h.length;++E)for(var k=E+1;k<h.length;++k)y.link(h[E],h[k]);var L=[],P=y.ranks;for(T=0;T<P.length;++T)P[T]=-1;for(T=0;T<m.length;++T){var I=y.find(m[T][0]);P[I]<0?(P[I]=L.length,L.push([m[T].slice(0)])):L[P[I]].push(m[T].slice(0))}return L}(v,d):function(m){for(var x=c(u(b(m,0))),y=new r(x.length),T=0;T<m.length;++T)for(var h=m[T],E=0;E<h.length;++E)for(var k=g(x,[h[E]]),L=E+1;L<h.length;++L)y.link(k,g(x,[h[L]]));var P=[],I=y.ranks;for(T=0;T<I.length;++T)I[T]=-1;for(T=0;T<m.length;++T){var z=y.find(g(x,[m[T][0]]));I[z]<0?(I[z]=P.length,P.push([m[T].slice(0)])):P[I[z]].push(m[T].slice(0))}return P}(v)}},9521:function(p){function s(n){this.roots=new Array(n),this.ranks=new Array(n);for(var a=0;a<n;++a)this.roots[a]=a,this.ranks[a]=0}p.exports=s,s.prototype.length=function(){return this.roots.length},s.prototype.makeSet=function(){var n=this.roots.length;return this.roots.push(n),this.ranks.push(0),n},s.prototype.find=function(n){for(var a=this.roots;a[n]!==n;){var r=a[n];a[n]=a[r],n=r}return n},s.prototype.link=function(n,a){var r=this.find(n),i=this.find(a);if(r!==i){var l=this.ranks,u=this.roots,c=l[r],g=l[i];c<g?u[r]=i:g<c?u[i]=r:(u[i]=r,++l[r])}}},8243:function(p,s,n){p.exports=function(i,l,u){for(var c=l.length,g=i.length,f=new Array(c),b=new Array(c),v=new Array(c),d=new Array(c),m=0;m<c;++m)f[m]=b[m]=-1,v[m]=1/0,d[m]=!1;for(m=0;m<g;++m){var x=i[m];if(x.length!==2)throw new Error("Input must be a graph");var y=x[1],T=x[0];b[T]!==-1?b[T]=-2:b[T]=y,f[y]!==-1?f[y]=-2:f[y]=T}function h(ee){if(d[ee])return 1/0;var $,J,K,te=f[ee],ie=b[ee];return te<0||ie<0?1/0:($=l[ee],J=l[te],K=l[ie],Math.abs(a($,J,K))/Math.sqrt(Math.pow(J[0]-K[0],2)+Math.pow(J[1]-K[1],2)))}function E(ee,$){var J=R[ee],K=R[$];R[ee]=K,R[$]=J,j[J]=$,j[K]=ee}function k(ee){return v[R[ee]]}function L(ee){return 1&ee?ee-1>>1:(ee>>1)-1}function P(ee){for(var $=k(ee);;){var J=$,K=2*ee+1,te=2*(ee+1),ie=ee;if(K<Z){var ae=k(K);ae<J&&(ie=K,J=ae)}if(te<Z&&k(te)<J&&(ie=te),ie===ee)return ee;E(ee,ie),ee=ie}}function I(ee){for(var $=k(ee);ee>0;){var J=L(ee);if(!(J>=0&&$<k(J)))return ee;E(ee,J),ee=J}}function z(){if(Z>0){var ee=R[0];return E(0,Z-1),Z-=1,P(0),ee}return-1}function F(ee,$){var J=R[ee];return v[J]===$?ee:(v[J]=-1/0,I(ee),z(),v[J]=$,I((Z+=1)-1))}function U(ee){if(!d[ee]){d[ee]=!0;var $=f[ee],J=b[ee];f[J]>=0&&(f[J]=$),b[$]>=0&&(b[$]=J),j[$]>=0&&F(j[$],h($)),j[J]>=0&&F(j[J],h(J))}}var R=[],j=new Array(c);for(m=0;m<c;++m)(v[m]=h(m))<1/0?(j[m]=R.length,R.push(m)):j[m]=-1;var Z=R.length;for(m=Z>>1;m>=0;--m)P(m);for(;;){var B=z();if(B<0||v[B]>u)break;U(B)}var q=[];for(m=0;m<c;++m)d[m]||(j[m]=q.length,q.push(l[m].slice()));function V(ee,$){if(ee[$]<0)return $;var J=$,K=$;do{var te=ee[K];if(!d[K]||te<0||te===K||(te=ee[K=te],!d[K]||te<0||te===K))break;K=te,J=ee[J]}while(J!==K);for(var ie=$;ie!==K;ie=ee[ie])ee[ie]=K;return K}q.length;var ne=[];return i.forEach(function(ee){var $=V(f,ee[0]),J=V(b,ee[1]);if($>=0&&J>=0&&$!==J){var K=j[$],te=j[J];K!==te&&ne.push([K,te])}}),r.unique(r.normalize(ne)),{positions:q,edges:ne}};var a=n(417),r=n(6656)},6638:function(p,s,n){p.exports=function(i,l){var u,c,g,f;if(l[0][0]<l[1][0])u=l[0],c=l[1];else{if(!(l[0][0]>l[1][0]))return r(l,i);u=l[1],c=l[0]}if(i[0][0]<i[1][0])g=i[0],f=i[1];else{if(!(i[0][0]>i[1][0]))return-r(i,l);g=i[1],f=i[0]}var b=a(u,c,f),v=a(u,c,g);if(b<0){if(v<=0)return b}else if(b>0){if(v>=0)return b}else if(v)return v;if(b=a(f,g,c),v=a(f,g,u),b<0){if(v<=0)return b}else if(b>0){if(v>=0)return b}else if(v)return v;return c[0]-f[0]};var a=n(417);function r(i,l){var u,c,g,f;if(l[0][0]<l[1][0])u=l[0],c=l[1];else{if(!(l[0][0]>l[1][0])){var b=Math.min(i[0][1],i[1][1]),v=Math.max(i[0][1],i[1][1]),d=Math.min(l[0][1],l[1][1]),m=Math.max(l[0][1],l[1][1]);return v<d?v-d:b>m?b-m:v-m}u=l[1],c=l[0]}i[0][1]<i[1][1]?(g=i[0],f=i[1]):(g=i[1],f=i[0]);var x=a(c,u,g);return x||(x=a(c,u,f))||f-c}},4385:function(p,s,n){p.exports=function(v){for(var d=v.length,m=2*d,x=new Array(m),y=0;y<d;++y){var T=v[y],h=T[0][0]<T[1][0];x[2*y]=new b(T[0][0],T,h,y),x[2*y+1]=new b(T[1][0],T,!h,y)}x.sort(function(U,R){var j=U.x-R.x;return j||(j=U.create-R.create)||Math.min(U.segment[0][1],U.segment[1][1])-Math.min(R.segment[0][1],R.segment[1][1])});var E=r(l),k=[],L=[],P=[];for(y=0;y<m;){for(var I=x[y].x,z=[];y<m;){var F=x[y];if(F.x!==I)break;y+=1,F.segment[0][0]===F.x&&F.segment[1][0]===F.x?F.create&&(F.segment[0][1]<F.segment[1][1]?(z.push(new f(F.segment[0][1],F.index,!0,!0)),z.push(new f(F.segment[1][1],F.index,!1,!1))):(z.push(new f(F.segment[1][1],F.index,!0,!1)),z.push(new f(F.segment[0][1],F.index,!1,!0)))):E=F.create?E.insert(F.segment,F.index):E.remove(F.segment)}k.push(E.root),L.push(I),P.push(z)}return new u(k,L,P)};var a=n(5070),r=n(7080),i=n(417),l=n(6638);function u(v,d,m){this.slabs=v,this.coordinates=d,this.horizontal=m}function c(v,d){return v.y-d}function g(v,d){for(var m=null;v;){var x,y,T=v.key;T[0][0]<T[1][0]?(x=T[0],y=T[1]):(x=T[1],y=T[0]);var h=i(x,y,d);if(h<0)v=v.left;else if(h>0)if(d[0]!==T[1][0])m=v,v=v.right;else{if(E=g(v.right,d))return E;v=v.left}else{if(d[0]!==T[1][0])return v;var E;if(E=g(v.right,d))return E;v=v.left}}return m}function f(v,d,m,x){this.y=v,this.index=d,this.start=m,this.closed=x}function b(v,d,m,x){this.x=v,this.segment=d,this.create=m,this.index=x}u.prototype.castUp=function(v){var d=a.le(this.coordinates,v[0]);if(d<0)return-1;this.slabs[d];var m=g(this.slabs[d],v),x=-1;if(m&&(x=m.value),this.coordinates[d]===v[0]){var y=null;if(m&&(y=m.key),d>0){var T=g(this.slabs[d-1],v);T&&(y?l(T.key,y)>0&&(y=T.key,x=T.value):(x=T.value,y=T.key))}var h=this.horizontal[d];if(h.length>0){var E=a.ge(h,v[1],c);if(E<h.length){var k=h[E];if(v[1]===k.y){if(k.closed)return k.index;for(;E<h.length-1&&h[E+1].y===v[1];)if((k=h[E+=1]).closed)return k.index;if(k.y===v[1]&&!k.start){if((E+=1)>=h.length)return x;k=h[E]}}if(k.start)if(y){var L=i(y[0],y[1],[v[0],k.y]);y[0][0]>y[1][0]&&(L=-L),L>0&&(x=k.index)}else x=k.index;else k.y!==v[1]&&(x=k.index)}}}return x}},4670:function(p,s,n){var a=n(9130),r=n(9662);function i(u,c){var g=r(a(u,c),[c[c.length-1]]);return g[g.length-1]}function l(u,c,g,f){var b=-c/(f-c);b<0?b=0:b>1&&(b=1);for(var v=1-b,d=u.length,m=new Array(d),x=0;x<d;++x)m[x]=b*u[x]+v*g[x];return m}p.exports=function(u,c){for(var g=[],f=[],b=i(u[u.length-1],c),v=u[u.length-1],d=u[0],m=0;m<u.length;++m,v=d){var x=i(d=u[m],c);if(b<0&&x>0||b>0&&x<0){var y=l(v,x,d,b);g.push(y),f.push(y.slice())}x<0?f.push(d.slice()):x>0?g.push(d.slice()):(g.push(d.slice()),f.push(d.slice())),b=x}return{positive:g,negative:f}},p.exports.positive=function(u,c){for(var g=[],f=i(u[u.length-1],c),b=u[u.length-1],v=u[0],d=0;d<u.length;++d,b=v){var m=i(v=u[d],c);(f<0&&m>0||f>0&&m<0)&&g.push(l(b,m,v,f)),m>=0&&g.push(v.slice()),f=m}return g},p.exports.negative=function(u,c){for(var g=[],f=i(u[u.length-1],c),b=u[u.length-1],v=u[0],d=0;d<u.length;++d,b=v){var m=i(v=u[d],c);(f<0&&m>0||f>0&&m<0)&&g.push(l(b,m,v,f)),m<=0&&g.push(v.slice()),f=m}return g}},8974:function(p,s,n){var a;(function(){var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function i(c){return function(g,f){var b,v,d,m,x,y,T,h,E,k=1,L=g.length,P="";for(v=0;v<L;v++)if(typeof g[v]=="string")P+=g[v];else if(typeof g[v]=="object"){if((m=g[v]).keys)for(b=f[k],d=0;d<m.keys.length;d++){if(b==null)throw new Error(i('[sprintf] Cannot access property "%s" of undefined value "%s"',m.keys[d],m.keys[d-1]));b=b[m.keys[d]]}else b=m.param_no?f[m.param_no]:f[k++];if(r.not_type.test(m.type)&&r.not_primitive.test(m.type)&&b instanceof Function&&(b=b()),r.numeric_arg.test(m.type)&&typeof b!="number"&&isNaN(b))throw new TypeError(i("[sprintf] expecting number but found %T",b));switch(r.number.test(m.type)&&(h=b>=0),m.type){case"b":b=parseInt(b,10).toString(2);break;case"c":b=String.fromCharCode(parseInt(b,10));break;case"d":case"i":b=parseInt(b,10);break;case"j":b=JSON.stringify(b,null,m.width?parseInt(m.width):0);break;case"e":b=m.precision?parseFloat(b).toExponential(m.precision):parseFloat(b).toExponential();break;case"f":b=m.precision?parseFloat(b).toFixed(m.precision):parseFloat(b);break;case"g":b=m.precision?String(Number(b.toPrecision(m.precision))):parseFloat(b);break;case"o":b=(parseInt(b,10)>>>0).toString(8);break;case"s":b=String(b),b=m.precision?b.substring(0,m.precision):b;break;case"t":b=String(!!b),b=m.precision?b.substring(0,m.precision):b;break;case"T":b=Object.prototype.toString.call(b).slice(8,-1).toLowerCase(),b=m.precision?b.substring(0,m.precision):b;break;case"u":b=parseInt(b,10)>>>0;break;case"v":b=b.valueOf(),b=m.precision?b.substring(0,m.precision):b;break;case"x":b=(parseInt(b,10)>>>0).toString(16);break;case"X":b=(parseInt(b,10)>>>0).toString(16).toUpperCase()}r.json.test(m.type)?P+=b:(!r.number.test(m.type)||h&&!m.sign?E="":(E=h?"+":"-",b=b.toString().replace(r.sign,"")),y=m.pad_char?m.pad_char==="0"?"0":m.pad_char.charAt(1):" ",T=m.width-(E+b).length,x=m.width&&T>0?y.repeat(T):"",P+=m.align?E+b+x:y==="0"?E+x+b:x+E+b)}return P}(function(g){if(u[g])return u[g];for(var f,b=g,v=[],d=0;b;){if((f=r.text.exec(b))!==null)v.push(f[0]);else if((f=r.modulo.exec(b))!==null)v.push("%");else{if((f=r.placeholder.exec(b))===null)throw new SyntaxError("[sprintf] unexpected placeholder");if(f[2]){d|=1;var m=[],x=f[2],y=[];if((y=r.key.exec(x))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");for(m.push(y[1]);(x=x.substring(y[0].length))!=="";)if((y=r.key_access.exec(x))!==null)m.push(y[1]);else{if((y=r.index_access.exec(x))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");m.push(y[1])}f[2]=m}else d|=2;if(d===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");v.push({placeholder:f[0],param_no:f[1],keys:f[2],sign:f[3],pad_char:f[4],align:f[5],width:f[6],precision:f[7],type:f[8]})}b=b.substring(f[0].length)}return u[g]=v}(c),arguments)}function l(c,g){return i.apply(null,[c].concat(g||[]))}var u=Object.create(null);s.sprintf=i,s.vsprintf=l,typeof window<"u"&&(window.sprintf=i,window.vsprintf=l,(a=(function(){return{sprintf:i,vsprintf:l}}).call(s,n,s,p))===void 0||(p.exports=a))})()},4162:function(p,s,n){p.exports=function(u,c){if(u.dimension<=0)return{positions:[],cells:[]};if(u.dimension===1)return function(b,v){for(var d=r(b,v),m=d.length,x=new Array(m),y=new Array(m),T=0;T<m;++T)x[T]=[d[T]],y[T]=[T];return{positions:x,cells:y}}(u,c);var g=u.order.join()+"-"+u.dtype,f=l[g];return c=+c||0,f||(f=l[g]=function(b,v){var d=b.length+"d",m=i[d];if(m)return m(a,b,v)}(u.order,u.dtype)),f(u,c)};var a=n(9284),r=n(9584),i={"2d":function(u,c,g){var f=u({order:c,scalarArguments:3,getters:g==="generic"?[0]:void 0,phase:function(b,v,d,m){return b>m|0},vertex:function(b,v,d,m,x,y,T,h,E,k,L,P,I){var z=(T<<0)+(h<<1)+(E<<2)+(k<<3)|0;if(z!==0&&z!==15)switch(z){case 0:case 15:L.push([b-.5,v-.5]);break;case 1:L.push([b-.25-.25*(m+d-2*I)/(d-m),v-.25-.25*(x+d-2*I)/(d-x)]);break;case 2:L.push([b-.75-.25*(-m-d+2*I)/(m-d),v-.25-.25*(y+m-2*I)/(m-y)]);break;case 3:L.push([b-.5,v-.5-.5*(x+d+y+m-4*I)/(d-x+m-y)]);break;case 4:L.push([b-.25-.25*(y+x-2*I)/(x-y),v-.75-.25*(-x-d+2*I)/(x-d)]);break;case 5:L.push([b-.5-.5*(m+d+y+x-4*I)/(d-m+x-y),v-.5]);break;case 6:L.push([b-.5-.25*(-m-d+y+x)/(m-d+x-y),v-.5-.25*(-x-d+y+m)/(x-d+m-y)]);break;case 7:L.push([b-.75-.25*(y+x-2*I)/(x-y),v-.75-.25*(y+m-2*I)/(m-y)]);break;case 8:L.push([b-.75-.25*(-y-x+2*I)/(y-x),v-.75-.25*(-y-m+2*I)/(y-m)]);break;case 9:L.push([b-.5-.25*(m+d+-y-x)/(d-m+y-x),v-.5-.25*(x+d+-y-m)/(d-x+y-m)]);break;case 10:L.push([b-.5-.5*(-m-d-y-x+4*I)/(m-d+y-x),v-.5]);break;case 11:L.push([b-.25-.25*(-y-x+2*I)/(y-x),v-.75-.25*(x+d-2*I)/(d-x)]);break;case 12:L.push([b-.5,v-.5-.5*(-x-d-y-m+4*I)/(x-d+y-m)]);break;case 13:L.push([b-.75-.25*(m+d-2*I)/(d-m),v-.25-.25*(-y-m+2*I)/(y-m)]);break;case 14:L.push([b-.25-.25*(-m-d+2*I)/(m-d),v-.25-.25*(-x-d+2*I)/(x-d)])}},cell:function(b,v,d,m,x,y,T,h,E){x?h.push([b,v]):h.push([v,b])}});return function(b,v){var d=[],m=[];return f(b,d,m,v),{positions:d,cells:m}}}},l={}},6946:function(p,s,n){p.exports=function l(u,c,g){g=g||{};var f=i[u];f||(f=i[u]={" ":{data:new Float32Array(0),shape:.2}});var b=f[c];if(!b)if(c.length<=1||!/\d/.test(c))b=f[c]=function(P){for(var I=P.cells,z=P.positions,F=new Float32Array(6*I.length),U=0,R=0,j=0;j<I.length;++j)for(var Z=I[j],B=0;B<3;++B){var q=z[Z[B]];F[U++]=q[0],F[U++]=q[1]+1.4,R=Math.max(q[0],R)}return{data:F,shape:R}}(a(c,{triangles:!0,font:u,textAlign:g.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var v=c.split(/(\d|\s)/),d=new Array(v.length),m=0,x=0,y=0;y<v.length;++y)d[y]=l(u,v[y]),m+=d[y].data.length,x+=d[y].shape,y>0&&(x+=.02);var T=new Float32Array(m),h=0,E=-.5*x;for(y=0;y<d.length;++y){for(var k=d[y].data,L=0;L<k.length;L+=2)T[h++]=k[L]+E,T[h++]=k[L+1];E+=d[y].shape+.02}b=f[c]={data:T,shape:x}}return b};var a=n(875),r=window||A.global||{},i=r.__TEXT_CACHE||{};r.__TEXT_CACHE={}},14:function(p,s,n){var a=n(4405);p.exports=l;var r=96;function i(u,c){var g=a(getComputedStyle(u).getPropertyValue(c));return g[0]*l(g[1],u)}function l(u,c){switch(c=c||document.body,u=(u||"px").trim().toLowerCase(),c!==window&&c!==document||(c=document.body),u){case"%":return c.clientHeight/100;case"ch":case"ex":return function(g,f){var b=document.createElement("div");b.style["font-size"]="128"+g,f.appendChild(b);var v=i(b,"font-size")/128;return f.removeChild(b),v}(u,c);case"em":return i(c,"font-size");case"rem":return i(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return r;case"cm":return r/2.54;case"mm":return r/25.4;case"pt":return r/72;case"pc":return r/6}return 1}},3440:function(p,s,n){p.exports=function(x){var y=(x=x||{}).center||[0,0,0],T=x.up||[0,1,0],h=x.right||b(T),E=x.radius||1,k=x.theta||0,L=x.phi||0;if(y=[].slice.call(y,0,3),T=[].slice.call(T,0,3),u(T,T),h=[].slice.call(h,0,3),u(h,h),"eye"in x){var P=x.eye,I=[P[0]-y[0],P[1]-y[1],P[2]-y[2]];l(h,I,T),g(h[0],h[1],h[2])<1e-6?h=b(T):u(h,h),E=g(I[0],I[1],I[2]);var z=c(T,I)/E,F=c(h,I)/E;L=Math.acos(z),k=Math.acos(F)}return E=Math.log(E),new v(x.zoomMin,x.zoomMax,y,T,h,E,k,L)};var a=n(8444),r=n(7437),i=n(4422),l=n(903),u=n(899),c=n(9305);function g(x,y,T){return Math.sqrt(Math.pow(x,2)+Math.pow(y,2)+Math.pow(T,2))}function f(x){return Math.min(1,Math.max(-1,x))}function b(x){var y=Math.abs(x[0]),T=Math.abs(x[1]),h=Math.abs(x[2]),E=[0,0,0];y>Math.max(T,h)?E[2]=1:T>Math.max(y,h)?E[0]=1:E[1]=1;for(var k=0,L=0,P=0;P<3;++P)k+=x[P]*x[P],L+=E[P]*x[P];for(P=0;P<3;++P)E[P]-=L/k*x[P];return u(E,E),E}function v(x,y,T,h,E,k,L,P){this.center=a(T),this.up=a(h),this.right=a(E),this.radius=a([k]),this.angle=a([L,P]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(x,y),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var I=0;I<16;++I)this.computedMatrix[I]=.5;this.recalcMatrix(0)}var d=v.prototype;d.setDistanceLimits=function(x,y){x=x>0?Math.log(x):-1/0,y=y>0?Math.log(y):1/0,y=Math.max(y,x),this.radius.bounds[0][0]=x,this.radius.bounds[1][0]=y},d.getDistanceLimits=function(x){var y=this.radius.bounds[0];return x?(x[0]=Math.exp(y[0][0]),x[1]=Math.exp(y[1][0]),x):[Math.exp(y[0][0]),Math.exp(y[1][0])]},d.recalcMatrix=function(x){this.center.curve(x),this.up.curve(x),this.right.curve(x),this.radius.curve(x),this.angle.curve(x);for(var y=this.computedUp,T=this.computedRight,h=0,E=0,k=0;k<3;++k)E+=y[k]*T[k],h+=y[k]*y[k];var L=Math.sqrt(h),P=0;for(k=0;k<3;++k)T[k]-=y[k]*E/h,P+=T[k]*T[k],y[k]/=L;var I=Math.sqrt(P);for(k=0;k<3;++k)T[k]/=I;var z=this.computedToward;l(z,y,T),u(z,z);var F=Math.exp(this.computedRadius[0]),U=this.computedAngle[0],R=this.computedAngle[1],j=Math.cos(U),Z=Math.sin(U),B=Math.cos(R),q=Math.sin(R),V=this.computedCenter,ne=j*B,ee=Z*B,$=q,J=-j*q,K=-Z*q,te=B,ie=this.computedEye,ae=this.computedMatrix;for(k=0;k<3;++k){var se=ne*T[k]+ee*z[k]+$*y[k];ae[4*k+1]=J*T[k]+K*z[k]+te*y[k],ae[4*k+2]=se,ae[4*k+3]=0}var ce=ae[1],de=ae[5],ge=ae[9],ve=ae[2],be=ae[6],me=ae[10],Se=de*me-ge*be,we=ge*ve-ce*me,_e=ce*be-de*ve,oe=g(Se,we,_e);for(Se/=oe,we/=oe,_e/=oe,ae[0]=Se,ae[4]=we,ae[8]=_e,k=0;k<3;++k)ie[k]=V[k]+ae[2+4*k]*F;for(k=0;k<3;++k){P=0;for(var le=0;le<3;++le)P+=ae[k+4*le]*ie[le];ae[12+k]=-P}ae[15]=1},d.getMatrix=function(x,y){this.recalcMatrix(x);var T=this.computedMatrix;if(y){for(var h=0;h<16;++h)y[h]=T[h];return y}return T};var m=[0,0,0];d.rotate=function(x,y,T,h){if(this.angle.move(x,y,T),h){this.recalcMatrix(x);var E=this.computedMatrix;m[0]=E[2],m[1]=E[6],m[2]=E[10];for(var k=this.computedUp,L=this.computedRight,P=this.computedToward,I=0;I<3;++I)E[4*I]=k[I],E[4*I+1]=L[I],E[4*I+2]=P[I];for(i(E,E,h,m),I=0;I<3;++I)k[I]=E[4*I],L[I]=E[4*I+1];this.up.set(x,k[0],k[1],k[2]),this.right.set(x,L[0],L[1],L[2])}},d.pan=function(x,y,T,h){y=y||0,T=T||0,h=h||0,this.recalcMatrix(x);var E=this.computedMatrix,k=(Math.exp(this.computedRadius[0]),E[1]),L=E[5],P=E[9],I=g(k,L,P);k/=I,L/=I,P/=I;var z=E[0],F=E[4],U=E[8],R=z*k+F*L+U*P,j=g(z-=k*R,F-=L*R,U-=P*R),Z=(z/=j)*y+k*T,B=(F/=j)*y+L*T,q=(U/=j)*y+P*T;this.center.move(x,Z,B,q);var V=Math.exp(this.computedRadius[0]);V=Math.max(1e-4,V+h),this.radius.set(x,Math.log(V))},d.translate=function(x,y,T,h){this.center.move(x,y||0,T||0,h||0)},d.setMatrix=function(x,y,T,h){var E=1;typeof T=="number"&&(E=0|T),(E<0||E>3)&&(E=1);var k=(E+2)%3;y||(this.recalcMatrix(x),y=this.computedMatrix);var L=y[E],P=y[E+4],I=y[E+8];if(h){var z=Math.abs(L),F=Math.abs(P),U=Math.abs(I),R=Math.max(z,F,U);z===R?(L=L<0?-1:1,P=I=0):U===R?(I=I<0?-1:1,L=P=0):(P=P<0?-1:1,L=I=0)}else{var j=g(L,P,I);L/=j,P/=j,I/=j}var Z,B,q=y[k],V=y[k+4],ne=y[k+8],ee=q*L+V*P+ne*I,$=g(q-=L*ee,V-=P*ee,ne-=I*ee),J=P*(ne/=$)-I*(V/=$),K=I*(q/=$)-L*ne,te=L*V-P*q,ie=g(J,K,te);if(J/=ie,K/=ie,te/=ie,this.center.jump(x,Me,Le,Ie),this.radius.idle(x),this.up.jump(x,L,P,I),this.right.jump(x,q,V,ne),E===2){var ae=y[1],se=y[5],ce=y[9],de=ae*q+se*V+ce*ne,ge=ae*J+se*K+ce*te;Z=Se<0?-Math.PI/2:Math.PI/2,B=Math.atan2(ge,de)}else{var ve=y[2],be=y[6],me=y[10],Se=ve*L+be*P+me*I,we=ve*q+be*V+me*ne,_e=ve*J+be*K+me*te;Z=Math.asin(f(Se)),B=Math.atan2(_e,we)}this.angle.jump(x,B,Z),this.recalcMatrix(x);var oe=y[2],le=y[6],pe=y[10],Ee=this.computedMatrix;r(Ee,y);var Te=Ee[15],Me=Ee[12]/Te,Le=Ee[13]/Te,Ie=Ee[14]/Te,he=Math.exp(this.computedRadius[0]);this.center.jump(x,Me-oe*he,Le-le*he,Ie-pe*he)},d.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},d.idle=function(x){this.center.idle(x),this.up.idle(x),this.right.idle(x),this.radius.idle(x),this.angle.idle(x)},d.flush=function(x){this.center.flush(x),this.up.flush(x),this.right.flush(x),this.radius.flush(x),this.angle.flush(x)},d.setDistance=function(x,y){y>0&&this.radius.set(x,Math.log(y))},d.lookAt=function(x,y,T,h){this.recalcMatrix(x),y=y||this.computedEye,T=T||this.computedCenter;var E=(h=h||this.computedUp)[0],k=h[1],L=h[2],P=g(E,k,L);if(!(P<1e-6)){E/=P,k/=P,L/=P;var I=y[0]-T[0],z=y[1]-T[1],F=y[2]-T[2],U=g(I,z,F);if(!(U<1e-6)){I/=U,z/=U,F/=U;var R=this.computedRight,j=R[0],Z=R[1],B=R[2],q=E*j+k*Z+L*B,V=g(j-=q*E,Z-=q*k,B-=q*L);if(!(V<.01&&(V=g(j=k*F-L*z,Z=L*I-E*F,B=E*z-k*I))<1e-6)){j/=V,Z/=V,B/=V,this.up.set(x,E,k,L),this.right.set(x,j,Z,B),this.center.set(x,T[0],T[1],T[2]),this.radius.set(x,Math.log(U));var ne=k*B-L*Z,ee=L*j-E*B,$=E*Z-k*j,J=g(ne,ee,$),K=E*I+k*z+L*F,te=j*I+Z*z+B*F,ie=(ne/=J)*I+(ee/=J)*z+($/=J)*F,ae=Math.asin(f(K)),se=Math.atan2(ie,te),ce=this.angle._state,de=ce[ce.length-1],ge=ce[ce.length-2];de%=2*Math.PI;var ve=Math.abs(de+2*Math.PI-se),be=Math.abs(de-se),me=Math.abs(de-2*Math.PI-se);ve<be&&(de+=2*Math.PI),me<be&&(de-=2*Math.PI),this.angle.jump(this.angle.lastT(),de,ge),this.angle.set(x,se,ae)}}}}},9660:function(p){p.exports=function(n,a,r){var i=n*a,l=s*n,u=l-(l-n),c=n-u,g=s*a,f=g-(g-a),b=a-f,v=c*b-(i-u*f-c*f-u*b);return r?(r[0]=v,r[1]=i,r):[v,i]};var s=+(Math.pow(2,27)+1)},87:function(p){p.exports=function(s,n,a){var r=s+n,i=r-s,l=n-i,u=s-(r-i);return a?(a[0]=u+l,a[1]=r,a):[u+l,r]}},5306:function(p,s,n){var a=n(2288),r=n(3094),i=n(2146).lW;n.g.__TYPEDARRAY_POOL||(n.g.__TYPEDARRAY_POOL={UINT8:r([32,0]),UINT16:r([32,0]),UINT32:r([32,0]),BIGUINT64:r([32,0]),INT8:r([32,0]),INT16:r([32,0]),INT32:r([32,0]),BIGINT64:r([32,0]),FLOAT:r([32,0]),DOUBLE:r([32,0]),DATA:r([32,0]),UINT8C:r([32,0]),BUFFER:r([32,0])});var l=typeof Uint8ClampedArray<"u",u=typeof BigUint64Array<"u",c=typeof BigInt64Array<"u",g=n.g.__TYPEDARRAY_POOL;g.UINT8C||(g.UINT8C=r([32,0])),g.BIGUINT64||(g.BIGUINT64=r([32,0])),g.BIGINT64||(g.BIGINT64=r([32,0])),g.BUFFER||(g.BUFFER=r([32,0]));var f=g.DATA,b=g.BUFFER;function v(R){if(R){var j=R.length||R.byteLength,Z=a.log2(j);f[Z].push(R)}}function d(R){R=a.nextPow2(R);var j=a.log2(R),Z=f[j];return Z.length>0?Z.pop():new ArrayBuffer(R)}function m(R){return new Uint8Array(d(R),0,R)}function x(R){return new Uint16Array(d(2*R),0,R)}function y(R){return new Uint32Array(d(4*R),0,R)}function T(R){return new Int8Array(d(R),0,R)}function h(R){return new Int16Array(d(2*R),0,R)}function E(R){return new Int32Array(d(4*R),0,R)}function k(R){return new Float32Array(d(4*R),0,R)}function L(R){return new Float64Array(d(8*R),0,R)}function P(R){return l?new Uint8ClampedArray(d(R),0,R):m(R)}function I(R){return u?new BigUint64Array(d(8*R),0,R):null}function z(R){return c?new BigInt64Array(d(8*R),0,R):null}function F(R){return new DataView(d(R),0,R)}function U(R){R=a.nextPow2(R);var j=a.log2(R),Z=b[j];return Z.length>0?Z.pop():new i(R)}s.free=function(R){if(i.isBuffer(R))b[a.log2(R.length)].push(R);else{if(Object.prototype.toString.call(R)!=="[object ArrayBuffer]"&&(R=R.buffer),!R)return;var j=R.length||R.byteLength,Z=0|a.log2(j);f[Z].push(R)}},s.freeUint8=s.freeUint16=s.freeUint32=s.freeBigUint64=s.freeInt8=s.freeInt16=s.freeInt32=s.freeBigInt64=s.freeFloat32=s.freeFloat=s.freeFloat64=s.freeDouble=s.freeUint8Clamped=s.freeDataView=function(R){v(R.buffer)},s.freeArrayBuffer=v,s.freeBuffer=function(R){b[a.log2(R.length)].push(R)},s.malloc=function(R,j){if(j===void 0||j==="arraybuffer")return d(R);switch(j){case"uint8":return m(R);case"uint16":return x(R);case"uint32":return y(R);case"int8":return T(R);case"int16":return h(R);case"int32":return E(R);case"float":case"float32":return k(R);case"double":case"float64":return L(R);case"uint8_clamped":return P(R);case"bigint64":return z(R);case"biguint64":return I(R);case"buffer":return U(R);case"data":case"dataview":return F(R);default:return null}return null},s.mallocArrayBuffer=d,s.mallocUint8=m,s.mallocUint16=x,s.mallocUint32=y,s.mallocInt8=T,s.mallocInt16=h,s.mallocInt32=E,s.mallocFloat32=s.mallocFloat=k,s.mallocFloat64=s.mallocDouble=L,s.mallocUint8Clamped=P,s.mallocBigUint64=I,s.mallocBigInt64=z,s.mallocDataView=F,s.mallocBuffer=U,s.clearCache=function(){for(var R=0;R<32;++R)g.UINT8[R].length=0,g.UINT16[R].length=0,g.UINT32[R].length=0,g.INT8[R].length=0,g.INT16[R].length=0,g.INT32[R].length=0,g.FLOAT[R].length=0,g.DOUBLE[R].length=0,g.BIGUINT64[R].length=0,g.BIGINT64[R].length=0,g.UINT8C[R].length=0,f[R].length=0,b[R].length=0}},1731:function(p){function s(a){this.roots=new Array(a),this.ranks=new Array(a);for(var r=0;r<a;++r)this.roots[r]=r,this.ranks[r]=0}p.exports=s;var n=s.prototype;Object.defineProperty(n,"length",{get:function(){return this.roots.length}}),n.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},n.find=function(a){for(var r=a,i=this.roots;i[a]!==a;)a=i[a];for(;i[r]!==a;){var l=i[r];i[r]=a,r=l}return a},n.link=function(a,r){var i=this.find(a),l=this.find(r);if(i!==l){var u=this.ranks,c=this.roots,g=u[i],f=u[l];g<f?c[i]=l:f<g?c[l]=i:(c[l]=i,++u[i])}}},1215:function(p){p.exports=function(s,n,a){return s.length===0?s:n?(a||s.sort(n),function(r,i){for(var l=1,u=r.length,c=r[0],g=r[0],f=1;f<u;++f)if(g=c,i(c=r[f],g)){if(f===l){l++;continue}r[l++]=c}return r.length=l,r}(s,n)):(a||s.sort(),function(r){for(var i=1,l=r.length,u=r[0],c=r[0],g=1;g<l;++g,c=u)if(c=u,(u=r[g])!==c){if(g===i){i++;continue}r[i++]=u}return r.length=i,r}(s))}},875:function(p,s,n){p.exports=function(l,u){return typeof u=="object"&&u!==null||(u={}),a(l,u.canvas||r,u.context||i,u)};var a=n(712),r=null,i=null;typeof document<"u"&&((r=document.createElement("canvas")).width=8192,r.height=1024,i=r.getContext("2d"))},712:function(p,s,n){p.exports=function(I,z,F,U){var R=64,j=1.25,Z={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return U&&(U.size&&U.size>0&&(R=U.size),U.lineSpacing&&U.lineSpacing>0&&(j=U.lineSpacing),U.styletags&&U.styletags.breaklines&&(Z.breaklines=!!U.styletags.breaklines),U.styletags&&U.styletags.bolds&&(Z.bolds=!!U.styletags.bolds),U.styletags&&U.styletags.italics&&(Z.italics=!!U.styletags.italics),U.styletags&&U.styletags.subscripts&&(Z.subscripts=!!U.styletags.subscripts),U.styletags&&U.styletags.superscripts&&(Z.superscripts=!!U.styletags.superscripts)),F.font=[U.fontStyle,U.fontVariant,U.fontWeight,R+"px",U.font].filter(function(B){return B}).join(" "),F.textAlign="start",F.textBaseline="alphabetic",F.direction="ltr",P(function(B,q,V,ne,ee,$){V=V.replace(/\n/g,""),V=$.breaklines===!0?V.replace(/\<br\>/g,`
`):V.replace(/\<br\>/g," ");var J="",K=[];for(se=0;se<V.length;++se)K[se]=J;$.bolds===!0&&(K=E(g,f,V,K)),$.italics===!0&&(K=E(b,v,V,K)),$.superscripts===!0&&(K=E(d,x,V,K)),$.subscripts===!0&&(K=E(y,h,V,K));var te=[],ie="";for(se=0;se<V.length;++se)K[se]!==null&&(ie+=V[se],te.push(K[se]));var ae,se,ce,de,ge,ve=ie.split(`
`),be=ve.length,me=Math.round(ee*ne),Se=ne,we=2*ne,_e=0,oe=be*me+we;B.height<oe&&(B.height=oe),q.fillStyle="#000",q.fillRect(0,0,B.width,B.height),q.fillStyle="#fff";var le=0,pe="";function Ee(){if(pe!==""){var ze=q.measureText(pe).width;q.fillText(pe,Se+ce,we+de),ce+=ze}}function Te(){return Math.round(ge)+"px "}function Me(ze,Re){var Oe=""+q.font;if($.subscripts===!0){var Ve=ze.indexOf(T),qe=Re.indexOf(T),Je=Ve>-1?parseInt(ze[1+Ve]):0,ot=qe>-1?parseInt(Re[1+qe]):0;Je!==ot&&(Oe=Oe.replace(Te(),"?px "),ge*=Math.pow(.75,ot-Je),Oe=Oe.replace("?px ",Te())),de+=.25*me*(ot-Je)}if($.superscripts===!0){var rt=ze.indexOf(m),dt=Re.indexOf(m),_t=rt>-1?parseInt(ze[1+rt]):0,yt=dt>-1?parseInt(Re[1+dt]):0;_t!==yt&&(Oe=Oe.replace(Te(),"?px "),ge*=Math.pow(.75,yt-_t),Oe=Oe.replace("?px ",Te())),de-=.25*me*(yt-_t)}if($.bolds===!0){var et=ze.indexOf(f)>-1,nt=Re.indexOf(f)>-1;!et&&nt&&(Oe=At?Oe.replace("italic ","italic bold "):"bold "+Oe),et&&!nt&&(Oe=Oe.replace("bold ",""))}if($.italics===!0){var At=ze.indexOf(v)>-1,Rt=Re.indexOf(v)>-1;!At&&Rt&&(Oe="italic "+Oe),At&&!Rt&&(Oe=Oe.replace("italic ",""))}q.font=Oe}for(ae=0;ae<be;++ae){var Le=ve[ae]+`
`;for(ce=0,de=ae*me,ge=ne,pe="",se=0;se<Le.length;++se){var Ie=se+le<te.length?te[se+le]:te[te.length-1];J===Ie?pe+=Le[se]:(Ee(),pe=Le[se],Ie!==void 0&&(Me(J,Ie),J=Ie))}Ee(),le+=Le.length;var he=0|Math.round(ce+2*Se);_e<he&&(_e=he)}var xe=_e,ke=we+me*be;return r(q.getImageData(0,0,xe,ke).data,[ke,xe,4]).pick(-1,-1,0).transpose(1,0)}(z,F,I,R,j,Z),U,R)},p.exports.processPixels=P;var a=n(4162),r=n(5050),i=n(8243),l=n(197),u=n(7761),c=n(8040),g="b",f="b|",b="i",v="i|",d="sup",m="+",x="+1",y="sub",T="-",h="-1";function E(I,z,F,U){for(var R="<"+I+">",j="</"+I+">",Z=R.length,B=j.length,q=z[0]===m||z[0]===T,V=0,ne=-B;V>-1&&(V=F.indexOf(R,V))!==-1&&(ne=F.indexOf(j,V+Z))!==-1&&!(ne<=V);){for(var ee=V;ee<ne+B;++ee)if(ee<V+Z||ee>=ne)U[ee]=null,F=F.substr(0,ee)+" "+F.substr(ee+1);else if(U[ee]!==null){var $=U[ee].indexOf(z[0]);$===-1?U[ee]+=z:q&&(U[ee]=U[ee].substr(0,$+1)+(1+parseInt(U[ee][$+1]))+U[ee].substr($+2))}var J=V+Z,K=F.substr(J,ne-J).indexOf(R);V=K!==-1?K:ne+B}return U}function k(I,z){var F=a(I,128);return z?i(F.cells,F.positions,.25):{edges:F.cells,positions:F.positions}}function L(I,z,F,U){var R=k(I,U),j=function(ae,se,ce){for(var de=se.textAlign||"start",ge=se.textBaseline||"alphabetic",ve=[1<<30,1<<30],be=[0,0],me=ae.length,Se=0;Se<me;++Se)for(var we=ae[Se],_e=0;_e<2;++_e)ve[_e]=0|Math.min(ve[_e],we[_e]),be[_e]=0|Math.max(be[_e],we[_e]);var oe=0;switch(de){case"center":oe=-.5*(ve[0]+be[0]);break;case"right":case"end":oe=-be[0];break;case"left":case"start":oe=-ve[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+de+"'")}var le=0;switch(ge){case"hanging":case"top":le=-ve[1];break;case"middle":le=-.5*(ve[1]+be[1]);break;case"alphabetic":case"ideographic":le=-3*ce;break;case"bottom":le=-be[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+ge+"'")}var pe=1/ce;return"lineHeight"in se?pe*=+se.lineHeight:"width"in se?pe=se.width/(be[0]-ve[0]):"height"in se&&(pe=se.height/(be[1]-ve[1])),ae.map(function(Ee){return[pe*(Ee[0]+oe),pe*(Ee[1]+le)]})}(R.positions,z,F),Z=R.edges,B=z.orientation==="ccw";if(l(j,Z),z.polygons||z.polygon||z.polyline){for(var q=c(Z,j),V=new Array(q.length),ne=0;ne<q.length;++ne){for(var ee=q[ne],$=new Array(ee.length),J=0;J<ee.length;++J){for(var K=ee[J],te=new Array(K.length),ie=0;ie<K.length;++ie)te[ie]=j[K[ie]].slice();B&&te.reverse(),$[J]=te}V[ne]=$}return V}return z.triangles||z.triangulate||z.triangle?{cells:u(j,Z,{delaunay:!1,exterior:!1,interior:!0}),positions:j}:{edges:Z,positions:j}}function P(I,z,F){try{return L(I,z,F,!0)}catch{}try{return L(I,z,F,!1)}catch{}return z.polygons||z.polyline||z.polygon?[]:z.triangles||z.triangulate||z.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},5346:function(p){(function(){if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=y);var s=!1;if(typeof WeakMap=="function"){var n=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var a=new n,r=Object.freeze({});if(a.set(r,1),a.get(r)===1)return void(p.exports=WeakMap);s=!0}}var i=Object.getOwnPropertyNames,l=Object.defineProperty,u=Object.isExtensible,c="weakmap:",g=c+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var f=new ArrayBuffer(25),b=new Uint8Array(f);crypto.getRandomValues(b),g=c+"rand:"+Array.prototype.map.call(b,function(L){return(L%36).toString(36)}).join("")+"___"}if(l(Object,"getOwnPropertyNames",{value:function(L){return i(L).filter(T)}}),"getPropertyNames"in Object){var v=Object.getPropertyNames;l(Object,"getPropertyNames",{value:function(L){return v(L).filter(T)}})}(function(){var L=Object.freeze;l(Object,"freeze",{value:function(z){return h(z),L(z)}});var P=Object.seal;l(Object,"seal",{value:function(z){return h(z),P(z)}});var I=Object.preventExtensions;l(Object,"preventExtensions",{value:function(z){return h(z),I(z)}})})();var d=!1,m=0,x=function(){this instanceof x||k();var L=[],P=[],I=m++;return Object.create(x.prototype,{get___:{value:E(function(z,F){var U,R=h(z);return R?I in R?R[I]:F:(U=L.indexOf(z))>=0?P[U]:F})},has___:{value:E(function(z){var F=h(z);return F?I in F:L.indexOf(z)>=0})},set___:{value:E(function(z,F){var U,R=h(z);return R?R[I]=F:(U=L.indexOf(z))>=0?P[U]=F:(U=L.length,P[U]=F,L[U]=z),this})},delete___:{value:E(function(z){var F,U,R=h(z);return R?I in R&&delete R[I]:!((F=L.indexOf(z))<0||(U=L.length-1,L[F]=void 0,P[F]=P[U],L[F]=L[U],L.length=U,P.length=U,0))})}})};x.prototype=Object.create(Object.prototype,{get:{value:function(L,P){return this.get___(L,P)},writable:!0,configurable:!0},has:{value:function(L){return this.has___(L)},writable:!0,configurable:!0},set:{value:function(L,P){return this.set___(L,P)},writable:!0,configurable:!0},delete:{value:function(L){return this.delete___(L)},writable:!0,configurable:!0}}),typeof n=="function"?function(){function L(){this instanceof x||k();var P,I=new n,z=void 0,F=!1;return P=s?function(U,R){return I.set(U,R),I.has(U)||(z||(z=new x),z.set(U,R)),this}:function(U,R){if(F)try{I.set(U,R)}catch{z||(z=new x),z.set___(U,R)}else I.set(U,R);return this},Object.create(x.prototype,{get___:{value:E(function(U,R){return z?I.has(U)?I.get(U):z.get___(U,R):I.get(U,R)})},has___:{value:E(function(U){return I.has(U)||!!z&&z.has___(U)})},set___:{value:E(P)},delete___:{value:E(function(U){var R=!!I.delete(U);return z&&z.delete___(U)||R})},permitHostObjects___:{value:E(function(U){if(U!==y)throw new Error("bogus call to permitHostObjects___");F=!0})}})}s&&typeof Proxy<"u"&&(Proxy=void 0),L.prototype=x.prototype,p.exports=L,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),p.exports=x)}function y(L){L.permitHostObjects___&&L.permitHostObjects___(y)}function T(L){return!(L.substr(0,8)==c&&L.substr(L.length-3)==="___")}function h(L){if(L!==Object(L))throw new TypeError("Not an object: "+L);var P=L[g];if(P&&P.key===L)return P;if(u(L)){P={key:L};try{return l(L,g,{value:P,writable:!1,enumerable:!1,configurable:!1}),P}catch{return}}}function E(L){return L.prototype=null,Object.freeze(L)}function k(){d||typeof console>"u"||(d=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}})()},9222:function(p,s,n){var a=n(7178);p.exports=function(){var r={};return function(i){if((typeof i!="object"||i===null)&&typeof i!="function")throw new Error("Weakmap-shim: Key must be object");var l=i.valueOf(r);return l&&l.identity===r?l:a(i,r)}}},7178:function(p){p.exports=function(s,n){var a={identity:n},r=s.valueOf;return Object.defineProperty(s,"valueOf",{value:function(i){return i!==n?r.apply(this,arguments):a},writable:!0}),a}},4037:function(p,s,n){var a=n(9222);p.exports=function(){var r=a();return{get:function(i,l){var u=r(i);return u.hasOwnProperty("value")?u.value:l},set:function(i,l){return r(i).value=l,this},has:function(i){return"value"in r(i)},delete:function(i){return delete r(i).value}}}},6183:function(p){p.exports=function(s){var n={};return function(a,r,i){var l=a.dtype,u=a.order,c=[l,u.join()].join(),g=n[c];return g||(n[c]=g=s([l,u])),g(a.shape.slice(0),a.data,a.stride,0|a.offset,r,i)}}((function(){return function(s,n,a,r,i,l){var u=s[0],c=a[0],g=[0],f=c;r|=0;var b=0,v=c;for(b=0;b<u;++b){var d=n[r]-l,m=n[r+f]-l;d>=0!=m>=0&&i.push(g[0]+.5+.5*(d+m)/(d-m)),r+=v,++g[0]}}}).bind(void 0,{funcName:"zeroCrossings"}))},9584:function(p,s,n){p.exports=function(r,i){var l=[];return i=+i||0,a(r.hi(r.shape[0]-1),l,i),l};var a=n(6183)},6601:function(){}},w={};function _(p){var s=w[p];if(s!==void 0)return s.exports;var n=w[p]={id:p,loaded:!1,exports:{}};return o[p].call(n.exports,n,n.exports,_),n.loaded=!0,n.exports}return _.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),_.nmd=function(p){return p.paths=[],p.children||(p.children=[]),p},_(7386)}()},Y.exports=M()},33576:function(Y,O,e){function M(oe,le){for(var pe=0;pe<le.length;pe++){var Ee=le[pe];Ee.enumerable=Ee.enumerable||!1,Ee.configurable=!0,"value"in Ee&&(Ee.writable=!0),Object.defineProperty(oe,(Te=function(Me,Le){if(_(Me)!=="object"||Me===null)return Me;var Ie=Me[Symbol.toPrimitive];if(Ie!==void 0){var he=Ie.call(Me,"string");if(_(he)!=="object")return he;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Me)}(Ee.key),_(Te)==="symbol"?Te:String(Te)),Ee)}var Te}function A(oe){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(le){return le.__proto__||Object.getPrototypeOf(le)},A(oe)}function o(oe){if(oe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe}function w(oe,le){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(pe,Ee){return pe.__proto__=Ee,pe},w(oe,le)}function _(oe){return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(le){return typeof le}:function(le){return le&&typeof Symbol=="function"&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le},_(oe)}var p=e(59968),s=e(35984),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;O.Buffer=i,O.SlowBuffer=function(oe){return+oe!=oe&&(oe=0),i.alloc(+oe)},O.INSPECT_MAX_BYTES=50;var a=2147483647;function r(oe){if(oe>a)throw new RangeError('The value "'+oe+'" is invalid for option "size"');var le=new Uint8Array(oe);return Object.setPrototypeOf(le,i.prototype),le}function i(oe,le,pe){if(typeof oe=="number"){if(typeof le=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return c(oe)}return l(oe,le,pe)}function l(oe,le,pe){if(typeof oe=="string")return function(Me,Le){if(typeof Le=="string"&&Le!==""||(Le="utf8"),!i.isEncoding(Le))throw new TypeError("Unknown encoding: "+Le);var Ie=0|v(Me,Le),he=r(Ie),xe=he.write(Me,Le);return xe!==Ie&&(he=he.slice(0,xe)),he}(oe,le);if(ArrayBuffer.isView(oe))return function(Me){if(be(Me,Uint8Array)){var Le=new Uint8Array(Me);return f(Le.buffer,Le.byteOffset,Le.byteLength)}return g(Me)}(oe);if(oe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+_(oe));if(be(oe,ArrayBuffer)||oe&&be(oe.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(be(oe,SharedArrayBuffer)||oe&&be(oe.buffer,SharedArrayBuffer)))return f(oe,le,pe);if(typeof oe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Ee=oe.valueOf&&oe.valueOf();if(Ee!=null&&Ee!==oe)return i.from(Ee,le,pe);var Te=function(Me){if(i.isBuffer(Me)){var Le=0|b(Me.length),Ie=r(Le);return Ie.length===0||Me.copy(Ie,0,0,Le),Ie}return Me.length!==void 0?typeof Me.length!="number"||me(Me.length)?r(0):g(Me):Me.type==="Buffer"&&Array.isArray(Me.data)?g(Me.data):void 0}(oe);if(Te)return Te;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof oe[Symbol.toPrimitive]=="function")return i.from(oe[Symbol.toPrimitive]("string"),le,pe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+_(oe))}function u(oe){if(typeof oe!="number")throw new TypeError('"size" argument must be of type number');if(oe<0)throw new RangeError('The value "'+oe+'" is invalid for option "size"')}function c(oe){return u(oe),r(oe<0?0:0|b(oe))}function g(oe){for(var le=oe.length<0?0:0|b(oe.length),pe=r(le),Ee=0;Ee<le;Ee+=1)pe[Ee]=255&oe[Ee];return pe}function f(oe,le,pe){if(le<0||oe.byteLength<le)throw new RangeError('"offset" is outside of buffer bounds');if(oe.byteLength<le+(pe||0))throw new RangeError('"length" is outside of buffer bounds');var Ee;return Ee=le===void 0&&pe===void 0?new Uint8Array(oe):pe===void 0?new Uint8Array(oe,le):new Uint8Array(oe,le,pe),Object.setPrototypeOf(Ee,i.prototype),Ee}function b(oe){if(oe>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|oe}function v(oe,le){if(i.isBuffer(oe))return oe.length;if(ArrayBuffer.isView(oe)||be(oe,ArrayBuffer))return oe.byteLength;if(typeof oe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+_(oe));var pe=oe.length,Ee=arguments.length>2&&arguments[2]===!0;if(!Ee&&pe===0)return 0;for(var Te=!1;;)switch(le){case"ascii":case"latin1":case"binary":return pe;case"utf8":case"utf-8":return de(oe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*pe;case"hex":return pe>>>1;case"base64":return ge(oe).length;default:if(Te)return Ee?-1:de(oe).length;le=(""+le).toLowerCase(),Te=!0}}function d(oe,le,pe){var Ee=!1;if((le===void 0||le<0)&&(le=0),le>this.length||((pe===void 0||pe>this.length)&&(pe=this.length),pe<=0)||(pe>>>=0)<=(le>>>=0))return"";for(oe||(oe="utf8");;)switch(oe){case"hex":return R(this,le,pe);case"utf8":case"utf-8":return I(this,le,pe);case"ascii":return F(this,le,pe);case"latin1":case"binary":return U(this,le,pe);case"base64":return P(this,le,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,le,pe);default:if(Ee)throw new TypeError("Unknown encoding: "+oe);oe=(oe+"").toLowerCase(),Ee=!0}}function m(oe,le,pe){var Ee=oe[le];oe[le]=oe[pe],oe[pe]=Ee}function x(oe,le,pe,Ee,Te){if(oe.length===0)return-1;if(typeof pe=="string"?(Ee=pe,pe=0):pe>2147483647?pe=2147483647:pe<-2147483648&&(pe=-2147483648),me(pe=+pe)&&(pe=Te?0:oe.length-1),pe<0&&(pe=oe.length+pe),pe>=oe.length){if(Te)return-1;pe=oe.length-1}else if(pe<0){if(!Te)return-1;pe=0}if(typeof le=="string"&&(le=i.from(le,Ee)),i.isBuffer(le))return le.length===0?-1:y(oe,le,pe,Ee,Te);if(typeof le=="number")return le&=255,typeof Uint8Array.prototype.indexOf=="function"?Te?Uint8Array.prototype.indexOf.call(oe,le,pe):Uint8Array.prototype.lastIndexOf.call(oe,le,pe):y(oe,[le],pe,Ee,Te);throw new TypeError("val must be string, number or Buffer")}function y(oe,le,pe,Ee,Te){var Me,Le=1,Ie=oe.length,he=le.length;if(Ee!==void 0&&((Ee=String(Ee).toLowerCase())==="ucs2"||Ee==="ucs-2"||Ee==="utf16le"||Ee==="utf-16le")){if(oe.length<2||le.length<2)return-1;Le=2,Ie/=2,he/=2,pe/=2}function xe(Oe,Ve){return Le===1?Oe[Ve]:Oe.readUInt16BE(Ve*Le)}if(Te){var ke=-1;for(Me=pe;Me<Ie;Me++)if(xe(oe,Me)===xe(le,ke===-1?0:Me-ke)){if(ke===-1&&(ke=Me),Me-ke+1===he)return ke*Le}else ke!==-1&&(Me-=Me-ke),ke=-1}else for(pe+he>Ie&&(pe=Ie-he),Me=pe;Me>=0;Me--){for(var ze=!0,Re=0;Re<he;Re++)if(xe(oe,Me+Re)!==xe(le,Re)){ze=!1;break}if(ze)return Me}return-1}function T(oe,le,pe,Ee){pe=Number(pe)||0;var Te=oe.length-pe;Ee?(Ee=Number(Ee))>Te&&(Ee=Te):Ee=Te;var Me,Le=le.length;for(Ee>Le/2&&(Ee=Le/2),Me=0;Me<Ee;++Me){var Ie=parseInt(le.substr(2*Me,2),16);if(me(Ie))return Me;oe[pe+Me]=Ie}return Me}function h(oe,le,pe,Ee){return ve(de(le,oe.length-pe),oe,pe,Ee)}function E(oe,le,pe,Ee){return ve(function(Te){for(var Me=[],Le=0;Le<Te.length;++Le)Me.push(255&Te.charCodeAt(Le));return Me}(le),oe,pe,Ee)}function k(oe,le,pe,Ee){return ve(ge(le),oe,pe,Ee)}function L(oe,le,pe,Ee){return ve(function(Te,Me){for(var Le,Ie,he,xe=[],ke=0;ke<Te.length&&!((Me-=2)<0);++ke)Ie=(Le=Te.charCodeAt(ke))>>8,he=Le%256,xe.push(he),xe.push(Ie);return xe}(le,oe.length-pe),oe,pe,Ee)}function P(oe,le,pe){return le===0&&pe===oe.length?p.fromByteArray(oe):p.fromByteArray(oe.slice(le,pe))}function I(oe,le,pe){pe=Math.min(oe.length,pe);for(var Ee=[],Te=le;Te<pe;){var Me=oe[Te],Le=null,Ie=Me>239?4:Me>223?3:Me>191?2:1;if(Te+Ie<=pe){var he=void 0,xe=void 0,ke=void 0,ze=void 0;switch(Ie){case 1:Me<128&&(Le=Me);break;case 2:(192&(he=oe[Te+1]))==128&&(ze=(31&Me)<<6|63&he)>127&&(Le=ze);break;case 3:he=oe[Te+1],xe=oe[Te+2],(192&he)==128&&(192&xe)==128&&(ze=(15&Me)<<12|(63&he)<<6|63&xe)>2047&&(ze<55296||ze>57343)&&(Le=ze);break;case 4:he=oe[Te+1],xe=oe[Te+2],ke=oe[Te+3],(192&he)==128&&(192&xe)==128&&(192&ke)==128&&(ze=(15&Me)<<18|(63&he)<<12|(63&xe)<<6|63&ke)>65535&&ze<1114112&&(Le=ze)}}Le===null?(Le=65533,Ie=1):Le>65535&&(Le-=65536,Ee.push(Le>>>10&1023|55296),Le=56320|1023&Le),Ee.push(Le),Te+=Ie}return function(Re){var Oe=Re.length;if(Oe<=z)return String.fromCharCode.apply(String,Re);for(var Ve="",qe=0;qe<Oe;)Ve+=String.fromCharCode.apply(String,Re.slice(qe,qe+=z));return Ve}(Ee)}O.kMaxLength=a,i.TYPED_ARRAY_SUPPORT=function(){try{var oe=new Uint8Array(1),le={foo:function(){return 42}};return Object.setPrototypeOf(le,Uint8Array.prototype),Object.setPrototypeOf(oe,le),oe.foo()===42}catch{return!1}}(),i.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),i.poolSize=8192,i.from=function(oe,le,pe){return l(oe,le,pe)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array),i.alloc=function(oe,le,pe){return function(Ee,Te,Me){return u(Ee),Ee<=0?r(Ee):Te!==void 0?typeof Me=="string"?r(Ee).fill(Te,Me):r(Ee).fill(Te):r(Ee)}(oe,le,pe)},i.allocUnsafe=function(oe){return c(oe)},i.allocUnsafeSlow=function(oe){return c(oe)},i.isBuffer=function(oe){return oe!=null&&oe._isBuffer===!0&&oe!==i.prototype},i.compare=function(oe,le){if(be(oe,Uint8Array)&&(oe=i.from(oe,oe.offset,oe.byteLength)),be(le,Uint8Array)&&(le=i.from(le,le.offset,le.byteLength)),!i.isBuffer(oe)||!i.isBuffer(le))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(oe===le)return 0;for(var pe=oe.length,Ee=le.length,Te=0,Me=Math.min(pe,Ee);Te<Me;++Te)if(oe[Te]!==le[Te]){pe=oe[Te],Ee=le[Te];break}return pe<Ee?-1:Ee<pe?1:0},i.isEncoding=function(oe){switch(String(oe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(oe,le){if(!Array.isArray(oe))throw new TypeError('"list" argument must be an Array of Buffers');if(oe.length===0)return i.alloc(0);var pe;if(le===void 0)for(le=0,pe=0;pe<oe.length;++pe)le+=oe[pe].length;var Ee=i.allocUnsafe(le),Te=0;for(pe=0;pe<oe.length;++pe){var Me=oe[pe];if(be(Me,Uint8Array))Te+Me.length>Ee.length?(i.isBuffer(Me)||(Me=i.from(Me)),Me.copy(Ee,Te)):Uint8Array.prototype.set.call(Ee,Me,Te);else{if(!i.isBuffer(Me))throw new TypeError('"list" argument must be an Array of Buffers');Me.copy(Ee,Te)}Te+=Me.length}return Ee},i.byteLength=v,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var oe=this.length;if(oe%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var le=0;le<oe;le+=2)m(this,le,le+1);return this},i.prototype.swap32=function(){var oe=this.length;if(oe%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var le=0;le<oe;le+=4)m(this,le,le+3),m(this,le+1,le+2);return this},i.prototype.swap64=function(){var oe=this.length;if(oe%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var le=0;le<oe;le+=8)m(this,le,le+7),m(this,le+1,le+6),m(this,le+2,le+5),m(this,le+3,le+4);return this},i.prototype.toString=function(){var oe=this.length;return oe===0?"":arguments.length===0?I(this,0,oe):d.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(oe){if(!i.isBuffer(oe))throw new TypeError("Argument must be a Buffer");return this===oe||i.compare(this,oe)===0},i.prototype.inspect=function(){var oe="",le=O.INSPECT_MAX_BYTES;return oe=this.toString("hex",0,le).replace(/(.{2})/g,"$1 ").trim(),this.length>le&&(oe+=" ... "),"<Buffer "+oe+">"},n&&(i.prototype[n]=i.prototype.inspect),i.prototype.compare=function(oe,le,pe,Ee,Te){if(be(oe,Uint8Array)&&(oe=i.from(oe,oe.offset,oe.byteLength)),!i.isBuffer(oe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+_(oe));if(le===void 0&&(le=0),pe===void 0&&(pe=oe?oe.length:0),Ee===void 0&&(Ee=0),Te===void 0&&(Te=this.length),le<0||pe>oe.length||Ee<0||Te>this.length)throw new RangeError("out of range index");if(Ee>=Te&&le>=pe)return 0;if(Ee>=Te)return-1;if(le>=pe)return 1;if(this===oe)return 0;for(var Me=(Te>>>=0)-(Ee>>>=0),Le=(pe>>>=0)-(le>>>=0),Ie=Math.min(Me,Le),he=this.slice(Ee,Te),xe=oe.slice(le,pe),ke=0;ke<Ie;++ke)if(he[ke]!==xe[ke]){Me=he[ke],Le=xe[ke];break}return Me<Le?-1:Le<Me?1:0},i.prototype.includes=function(oe,le,pe){return this.indexOf(oe,le,pe)!==-1},i.prototype.indexOf=function(oe,le,pe){return x(this,oe,le,pe,!0)},i.prototype.lastIndexOf=function(oe,le,pe){return x(this,oe,le,pe,!1)},i.prototype.write=function(oe,le,pe,Ee){if(le===void 0)Ee="utf8",pe=this.length,le=0;else if(pe===void 0&&typeof le=="string")Ee=le,pe=this.length,le=0;else{if(!isFinite(le))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");le>>>=0,isFinite(pe)?(pe>>>=0,Ee===void 0&&(Ee="utf8")):(Ee=pe,pe=void 0)}var Te=this.length-le;if((pe===void 0||pe>Te)&&(pe=Te),oe.length>0&&(pe<0||le<0)||le>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ee||(Ee="utf8");for(var Me=!1;;)switch(Ee){case"hex":return T(this,oe,le,pe);case"utf8":case"utf-8":return h(this,oe,le,pe);case"ascii":case"latin1":case"binary":return E(this,oe,le,pe);case"base64":return k(this,oe,le,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,oe,le,pe);default:if(Me)throw new TypeError("Unknown encoding: "+Ee);Ee=(""+Ee).toLowerCase(),Me=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var z=4096;function F(oe,le,pe){var Ee="";pe=Math.min(oe.length,pe);for(var Te=le;Te<pe;++Te)Ee+=String.fromCharCode(127&oe[Te]);return Ee}function U(oe,le,pe){var Ee="";pe=Math.min(oe.length,pe);for(var Te=le;Te<pe;++Te)Ee+=String.fromCharCode(oe[Te]);return Ee}function R(oe,le,pe){var Ee=oe.length;(!le||le<0)&&(le=0),(!pe||pe<0||pe>Ee)&&(pe=Ee);for(var Te="",Me=le;Me<pe;++Me)Te+=Se[oe[Me]];return Te}function j(oe,le,pe){for(var Ee=oe.slice(le,pe),Te="",Me=0;Me<Ee.length-1;Me+=2)Te+=String.fromCharCode(Ee[Me]+256*Ee[Me+1]);return Te}function Z(oe,le,pe){if(oe%1!=0||oe<0)throw new RangeError("offset is not uint");if(oe+le>pe)throw new RangeError("Trying to access beyond buffer length")}function B(oe,le,pe,Ee,Te,Me){if(!i.isBuffer(oe))throw new TypeError('"buffer" argument must be a Buffer instance');if(le>Te||le<Me)throw new RangeError('"value" argument is out of bounds');if(pe+Ee>oe.length)throw new RangeError("Index out of range")}function q(oe,le,pe,Ee,Te){ie(le,Ee,Te,oe,pe,7);var Me=Number(le&BigInt(4294967295));oe[pe++]=Me,Me>>=8,oe[pe++]=Me,Me>>=8,oe[pe++]=Me,Me>>=8,oe[pe++]=Me;var Le=Number(le>>BigInt(32)&BigInt(4294967295));return oe[pe++]=Le,Le>>=8,oe[pe++]=Le,Le>>=8,oe[pe++]=Le,Le>>=8,oe[pe++]=Le,pe}function V(oe,le,pe,Ee,Te){ie(le,Ee,Te,oe,pe,7);var Me=Number(le&BigInt(4294967295));oe[pe+7]=Me,Me>>=8,oe[pe+6]=Me,Me>>=8,oe[pe+5]=Me,Me>>=8,oe[pe+4]=Me;var Le=Number(le>>BigInt(32)&BigInt(4294967295));return oe[pe+3]=Le,Le>>=8,oe[pe+2]=Le,Le>>=8,oe[pe+1]=Le,Le>>=8,oe[pe]=Le,pe+8}function ne(oe,le,pe,Ee,Te,Me){if(pe+Ee>oe.length)throw new RangeError("Index out of range");if(pe<0)throw new RangeError("Index out of range")}function ee(oe,le,pe,Ee,Te){return le=+le,pe>>>=0,Te||ne(oe,0,pe,4),s.write(oe,le,pe,Ee,23,4),pe+4}function $(oe,le,pe,Ee,Te){return le=+le,pe>>>=0,Te||ne(oe,0,pe,8),s.write(oe,le,pe,Ee,52,8),pe+8}i.prototype.slice=function(oe,le){var pe=this.length;(oe=~~oe)<0?(oe+=pe)<0&&(oe=0):oe>pe&&(oe=pe),(le=le===void 0?pe:~~le)<0?(le+=pe)<0&&(le=0):le>pe&&(le=pe),le<oe&&(le=oe);var Ee=this.subarray(oe,le);return Object.setPrototypeOf(Ee,i.prototype),Ee},i.prototype.readUintLE=i.prototype.readUIntLE=function(oe,le,pe){oe>>>=0,le>>>=0,pe||Z(oe,le,this.length);for(var Ee=this[oe],Te=1,Me=0;++Me<le&&(Te*=256);)Ee+=this[oe+Me]*Te;return Ee},i.prototype.readUintBE=i.prototype.readUIntBE=function(oe,le,pe){oe>>>=0,le>>>=0,pe||Z(oe,le,this.length);for(var Ee=this[oe+--le],Te=1;le>0&&(Te*=256);)Ee+=this[oe+--le]*Te;return Ee},i.prototype.readUint8=i.prototype.readUInt8=function(oe,le){return oe>>>=0,le||Z(oe,1,this.length),this[oe]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(oe,le){return oe>>>=0,le||Z(oe,2,this.length),this[oe]|this[oe+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(oe,le){return oe>>>=0,le||Z(oe,2,this.length),this[oe]<<8|this[oe+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(oe,le){return oe>>>=0,le||Z(oe,4,this.length),(this[oe]|this[oe+1]<<8|this[oe+2]<<16)+16777216*this[oe+3]},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(oe,le){return oe>>>=0,le||Z(oe,4,this.length),16777216*this[oe]+(this[oe+1]<<16|this[oe+2]<<8|this[oe+3])},i.prototype.readBigUInt64LE=we(function(oe){ae(oe>>>=0,"offset");var le=this[oe],pe=this[oe+7];le!==void 0&&pe!==void 0||se(oe,this.length-8);var Ee=le+this[++oe]*Math.pow(2,8)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,24),Te=this[++oe]+this[++oe]*Math.pow(2,8)+this[++oe]*Math.pow(2,16)+pe*Math.pow(2,24);return BigInt(Ee)+(BigInt(Te)<<BigInt(32))}),i.prototype.readBigUInt64BE=we(function(oe){ae(oe>>>=0,"offset");var le=this[oe],pe=this[oe+7];le!==void 0&&pe!==void 0||se(oe,this.length-8);var Ee=le*Math.pow(2,24)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,8)+this[++oe],Te=this[++oe]*Math.pow(2,24)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,8)+pe;return(BigInt(Ee)<<BigInt(32))+BigInt(Te)}),i.prototype.readIntLE=function(oe,le,pe){oe>>>=0,le>>>=0,pe||Z(oe,le,this.length);for(var Ee=this[oe],Te=1,Me=0;++Me<le&&(Te*=256);)Ee+=this[oe+Me]*Te;return Ee>=(Te*=128)&&(Ee-=Math.pow(2,8*le)),Ee},i.prototype.readIntBE=function(oe,le,pe){oe>>>=0,le>>>=0,pe||Z(oe,le,this.length);for(var Ee=le,Te=1,Me=this[oe+--Ee];Ee>0&&(Te*=256);)Me+=this[oe+--Ee]*Te;return Me>=(Te*=128)&&(Me-=Math.pow(2,8*le)),Me},i.prototype.readInt8=function(oe,le){return oe>>>=0,le||Z(oe,1,this.length),128&this[oe]?-1*(255-this[oe]+1):this[oe]},i.prototype.readInt16LE=function(oe,le){oe>>>=0,le||Z(oe,2,this.length);var pe=this[oe]|this[oe+1]<<8;return 32768&pe?4294901760|pe:pe},i.prototype.readInt16BE=function(oe,le){oe>>>=0,le||Z(oe,2,this.length);var pe=this[oe+1]|this[oe]<<8;return 32768&pe?4294901760|pe:pe},i.prototype.readInt32LE=function(oe,le){return oe>>>=0,le||Z(oe,4,this.length),this[oe]|this[oe+1]<<8|this[oe+2]<<16|this[oe+3]<<24},i.prototype.readInt32BE=function(oe,le){return oe>>>=0,le||Z(oe,4,this.length),this[oe]<<24|this[oe+1]<<16|this[oe+2]<<8|this[oe+3]},i.prototype.readBigInt64LE=we(function(oe){ae(oe>>>=0,"offset");var le=this[oe],pe=this[oe+7];le!==void 0&&pe!==void 0||se(oe,this.length-8);var Ee=this[oe+4]+this[oe+5]*Math.pow(2,8)+this[oe+6]*Math.pow(2,16)+(pe<<24);return(BigInt(Ee)<<BigInt(32))+BigInt(le+this[++oe]*Math.pow(2,8)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,24))}),i.prototype.readBigInt64BE=we(function(oe){ae(oe>>>=0,"offset");var le=this[oe],pe=this[oe+7];le!==void 0&&pe!==void 0||se(oe,this.length-8);var Ee=(le<<24)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,8)+this[++oe];return(BigInt(Ee)<<BigInt(32))+BigInt(this[++oe]*Math.pow(2,24)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,8)+pe)}),i.prototype.readFloatLE=function(oe,le){return oe>>>=0,le||Z(oe,4,this.length),s.read(this,oe,!0,23,4)},i.prototype.readFloatBE=function(oe,le){return oe>>>=0,le||Z(oe,4,this.length),s.read(this,oe,!1,23,4)},i.prototype.readDoubleLE=function(oe,le){return oe>>>=0,le||Z(oe,8,this.length),s.read(this,oe,!0,52,8)},i.prototype.readDoubleBE=function(oe,le){return oe>>>=0,le||Z(oe,8,this.length),s.read(this,oe,!1,52,8)},i.prototype.writeUintLE=i.prototype.writeUIntLE=function(oe,le,pe,Ee){oe=+oe,le>>>=0,pe>>>=0,Ee||B(this,oe,le,pe,Math.pow(2,8*pe)-1,0);var Te=1,Me=0;for(this[le]=255&oe;++Me<pe&&(Te*=256);)this[le+Me]=oe/Te&255;return le+pe},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(oe,le,pe,Ee){oe=+oe,le>>>=0,pe>>>=0,Ee||B(this,oe,le,pe,Math.pow(2,8*pe)-1,0);var Te=pe-1,Me=1;for(this[le+Te]=255&oe;--Te>=0&&(Me*=256);)this[le+Te]=oe/Me&255;return le+pe},i.prototype.writeUint8=i.prototype.writeUInt8=function(oe,le,pe){return oe=+oe,le>>>=0,pe||B(this,oe,le,1,255,0),this[le]=255&oe,le+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(oe,le,pe){return oe=+oe,le>>>=0,pe||B(this,oe,le,2,65535,0),this[le]=255&oe,this[le+1]=oe>>>8,le+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(oe,le,pe){return oe=+oe,le>>>=0,pe||B(this,oe,le,2,65535,0),this[le]=oe>>>8,this[le+1]=255&oe,le+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(oe,le,pe){return oe=+oe,le>>>=0,pe||B(this,oe,le,4,4294967295,0),this[le+3]=oe>>>24,this[le+2]=oe>>>16,this[le+1]=oe>>>8,this[le]=255&oe,le+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(oe,le,pe){return oe=+oe,le>>>=0,pe||B(this,oe,le,4,4294967295,0),this[le]=oe>>>24,this[le+1]=oe>>>16,this[le+2]=oe>>>8,this[le+3]=255&oe,le+4},i.prototype.writeBigUInt64LE=we(function(oe){return q(this,oe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=we(function(oe){return V(this,oe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(oe,le,pe,Ee){if(oe=+oe,le>>>=0,!Ee){var Te=Math.pow(2,8*pe-1);B(this,oe,le,pe,Te-1,-Te)}var Me=0,Le=1,Ie=0;for(this[le]=255&oe;++Me<pe&&(Le*=256);)oe<0&&Ie===0&&this[le+Me-1]!==0&&(Ie=1),this[le+Me]=(oe/Le>>0)-Ie&255;return le+pe},i.prototype.writeIntBE=function(oe,le,pe,Ee){if(oe=+oe,le>>>=0,!Ee){var Te=Math.pow(2,8*pe-1);B(this,oe,le,pe,Te-1,-Te)}var Me=pe-1,Le=1,Ie=0;for(this[le+Me]=255&oe;--Me>=0&&(Le*=256);)oe<0&&Ie===0&&this[le+Me+1]!==0&&(Ie=1),this[le+Me]=(oe/Le>>0)-Ie&255;return le+pe},i.prototype.writeInt8=function(oe,le,pe){return oe=+oe,le>>>=0,pe||B(this,oe,le,1,127,-128),oe<0&&(oe=255+oe+1),this[le]=255&oe,le+1},i.prototype.writeInt16LE=function(oe,le,pe){return oe=+oe,le>>>=0,pe||B(this,oe,le,2,32767,-32768),this[le]=255&oe,this[le+1]=oe>>>8,le+2},i.prototype.writeInt16BE=function(oe,le,pe){return oe=+oe,le>>>=0,pe||B(this,oe,le,2,32767,-32768),this[le]=oe>>>8,this[le+1]=255&oe,le+2},i.prototype.writeInt32LE=function(oe,le,pe){return oe=+oe,le>>>=0,pe||B(this,oe,le,4,2147483647,-2147483648),this[le]=255&oe,this[le+1]=oe>>>8,this[le+2]=oe>>>16,this[le+3]=oe>>>24,le+4},i.prototype.writeInt32BE=function(oe,le,pe){return oe=+oe,le>>>=0,pe||B(this,oe,le,4,2147483647,-2147483648),oe<0&&(oe=4294967295+oe+1),this[le]=oe>>>24,this[le+1]=oe>>>16,this[le+2]=oe>>>8,this[le+3]=255&oe,le+4},i.prototype.writeBigInt64LE=we(function(oe){return q(this,oe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=we(function(oe){return V(this,oe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeFloatLE=function(oe,le,pe){return ee(this,oe,le,!0,pe)},i.prototype.writeFloatBE=function(oe,le,pe){return ee(this,oe,le,!1,pe)},i.prototype.writeDoubleLE=function(oe,le,pe){return $(this,oe,le,!0,pe)},i.prototype.writeDoubleBE=function(oe,le,pe){return $(this,oe,le,!1,pe)},i.prototype.copy=function(oe,le,pe,Ee){if(!i.isBuffer(oe))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),Ee||Ee===0||(Ee=this.length),le>=oe.length&&(le=oe.length),le||(le=0),Ee>0&&Ee<pe&&(Ee=pe),Ee===pe||oe.length===0||this.length===0)return 0;if(le<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if(Ee<0)throw new RangeError("sourceEnd out of bounds");Ee>this.length&&(Ee=this.length),oe.length-le<Ee-pe&&(Ee=oe.length-le+pe);var Te=Ee-pe;return this===oe&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(le,pe,Ee):Uint8Array.prototype.set.call(oe,this.subarray(pe,Ee),le),Te},i.prototype.fill=function(oe,le,pe,Ee){if(typeof oe=="string"){if(typeof le=="string"?(Ee=le,le=0,pe=this.length):typeof pe=="string"&&(Ee=pe,pe=this.length),Ee!==void 0&&typeof Ee!="string")throw new TypeError("encoding must be a string");if(typeof Ee=="string"&&!i.isEncoding(Ee))throw new TypeError("Unknown encoding: "+Ee);if(oe.length===1){var Te=oe.charCodeAt(0);(Ee==="utf8"&&Te<128||Ee==="latin1")&&(oe=Te)}}else typeof oe=="number"?oe&=255:typeof oe=="boolean"&&(oe=Number(oe));if(le<0||this.length<le||this.length<pe)throw new RangeError("Out of range index");if(pe<=le)return this;var Me;if(le>>>=0,pe=pe===void 0?this.length:pe>>>0,oe||(oe=0),typeof oe=="number")for(Me=le;Me<pe;++Me)this[Me]=oe;else{var Le=i.isBuffer(oe)?oe:i.from(oe,Ee),Ie=Le.length;if(Ie===0)throw new TypeError('The value "'+oe+'" is invalid for argument "value"');for(Me=0;Me<pe-le;++Me)this[Me+le]=Le[Me%Ie]}return this};var J={};function K(oe,le,pe){J[oe]=function(Ee){function Te(){var Ie;return function(he,xe){if(!(he instanceof xe))throw new TypeError("Cannot call a class as a function")}(this,Te),Ie=function(he,xe,ke){return xe=A(xe),function(ze,Re){if(Re&&(_(Re)==="object"||typeof Re=="function"))return Re;if(Re!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o(ze)}(he,function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{return!1}}()?Reflect.construct(xe,ke||[],A(he).constructor):xe.apply(he,ke))}(this,Te),Object.defineProperty(o(Ie),"message",{value:le.apply(o(Ie),arguments),writable:!0,configurable:!0}),Ie.name="".concat(Ie.name," [").concat(oe,"]"),Ie.stack,delete Ie.name,Ie}var Me,Le;return function(Ie,he){if(typeof he!="function"&&he!==null)throw new TypeError("Super expression must either be null or a function");Ie.prototype=Object.create(he&&he.prototype,{constructor:{value:Ie,writable:!0,configurable:!0}}),Object.defineProperty(Ie,"prototype",{writable:!1}),he&&w(Ie,he)}(Te,Ee),Me=Te,(Le=[{key:"code",get:function(){return oe},set:function(Ie){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ie,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(oe,"]: ").concat(this.message)}}])&&M(Me.prototype,Le),Object.defineProperty(Me,"prototype",{writable:!1}),Te}(pe)}function te(oe){for(var le="",pe=oe.length,Ee=oe[0]==="-"?1:0;pe>=Ee+4;pe-=3)le="_".concat(oe.slice(pe-3,pe)).concat(le);return"".concat(oe.slice(0,pe)).concat(le)}function ie(oe,le,pe,Ee,Te,Me){if(oe>pe||oe<le){var Le,Ie=typeof le=="bigint"?"n":"";throw Le=Me>3?le===0||le===BigInt(0)?">= 0".concat(Ie," and < 2").concat(Ie," ** ").concat(8*(Me+1)).concat(Ie):">= -(2".concat(Ie," ** ").concat(8*(Me+1)-1).concat(Ie,") and < 2 ** ")+"".concat(8*(Me+1)-1).concat(Ie):">= ".concat(le).concat(Ie," and <= ").concat(pe).concat(Ie),new J.ERR_OUT_OF_RANGE("value",Le,oe)}(function(he,xe,ke){ae(xe,"offset"),he[xe]!==void 0&&he[xe+ke]!==void 0||se(xe,he.length-(ke+1))})(Ee,Te,Me)}function ae(oe,le){if(typeof oe!="number")throw new J.ERR_INVALID_ARG_TYPE(le,"number",oe)}function se(oe,le,pe){throw Math.floor(oe)!==oe?(ae(oe,pe),new J.ERR_OUT_OF_RANGE(pe||"offset","an integer",oe)):le<0?new J.ERR_BUFFER_OUT_OF_BOUNDS:new J.ERR_OUT_OF_RANGE(pe||"offset",">= ".concat(pe?1:0," and <= ").concat(le),oe)}K("ERR_BUFFER_OUT_OF_BOUNDS",function(oe){return oe?"".concat(oe," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),K("ERR_INVALID_ARG_TYPE",function(oe,le){return'The "'.concat(oe,'" argument must be of type number. Received type ').concat(_(le))},TypeError),K("ERR_OUT_OF_RANGE",function(oe,le,pe){var Ee='The value of "'.concat(oe,'" is out of range.'),Te=pe;return Number.isInteger(pe)&&Math.abs(pe)>Math.pow(2,32)?Te=te(String(pe)):typeof pe=="bigint"&&(Te=String(pe),(pe>Math.pow(BigInt(2),BigInt(32))||pe<-Math.pow(BigInt(2),BigInt(32)))&&(Te=te(Te)),Te+="n"),Ee+" It must be ".concat(le,". Received ").concat(Te)},RangeError);var ce=/[^+/0-9A-Za-z-_]/g;function de(oe,le){var pe;le=le||1/0;for(var Ee=oe.length,Te=null,Me=[],Le=0;Le<Ee;++Le){if((pe=oe.charCodeAt(Le))>55295&&pe<57344){if(!Te){if(pe>56319){(le-=3)>-1&&Me.push(239,191,189);continue}if(Le+1===Ee){(le-=3)>-1&&Me.push(239,191,189);continue}Te=pe;continue}if(pe<56320){(le-=3)>-1&&Me.push(239,191,189),Te=pe;continue}pe=65536+(Te-55296<<10|pe-56320)}else Te&&(le-=3)>-1&&Me.push(239,191,189);if(Te=null,pe<128){if((le-=1)<0)break;Me.push(pe)}else if(pe<2048){if((le-=2)<0)break;Me.push(pe>>6|192,63&pe|128)}else if(pe<65536){if((le-=3)<0)break;Me.push(pe>>12|224,pe>>6&63|128,63&pe|128)}else{if(!(pe<1114112))throw new Error("Invalid code point");if((le-=4)<0)break;Me.push(pe>>18|240,pe>>12&63|128,pe>>6&63|128,63&pe|128)}}return Me}function ge(oe){return p.toByteArray(function(le){if((le=(le=le.split("=")[0]).trim().replace(ce,"")).length<2)return"";for(;le.length%4!=0;)le+="=";return le}(oe))}function ve(oe,le,pe,Ee){var Te;for(Te=0;Te<Ee&&!(Te+pe>=le.length||Te>=oe.length);++Te)le[Te+pe]=oe[Te];return Te}function be(oe,le){return oe instanceof le||oe!=null&&oe.constructor!=null&&oe.constructor.name!=null&&oe.constructor.name===le.name}function me(oe){return oe!=oe}var Se=function(){for(var oe="0123456789abcdef",le=new Array(256),pe=0;pe<16;++pe)for(var Ee=16*pe,Te=0;Te<16;++Te)le[Ee+Te]=oe[pe]+oe[Te];return le}();function we(oe){return typeof BigInt>"u"?_e:oe}function _e(){throw new Error("BigInt not supported")}},25928:function(Y){Y.exports=A,Y.exports.isMobile=A,Y.exports.default=A;var O=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,M=/android|ipad|playbook|silk/i;function A(o){o||(o={});var w=o.ua;if(w||typeof navigator>"u"||(w=navigator.userAgent),w&&w.headers&&typeof w.headers["user-agent"]=="string"&&(w=w.headers["user-agent"]),typeof w!="string")return!1;var _=O.test(w)&&!e.test(w)||!!o.tablet&&M.test(w);return!_&&o.tablet&&o.featureDetect&&navigator&&navigator.maxTouchPoints>1&&w.indexOf("Macintosh")!==-1&&w.indexOf("Safari")!==-1&&(_=!0),_}},48932:function(Y,O,e){e.r(O),e.d(O,{sankeyCenter:function(){return r},sankeyCircular:function(){return P},sankeyJustify:function(){return a},sankeyLeft:function(){return s},sankeyRight:function(){return n}});var M=e(84706),A=e(34712),o=e(10132),w=e(6688),_=e.n(w);function p(ve){return ve.target.depth}function s(ve){return ve.depth}function n(ve,be){return be-1-ve.height}function a(ve,be){return ve.sourceLinks.length?ve.depth:be-1}function r(ve){return ve.targetLinks.length?ve.depth:ve.sourceLinks.length?(0,M.SY)(ve.sourceLinks,p)-1:0}function i(ve){return function(){return ve}}var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ve){return typeof ve}:function(ve){return ve&&typeof Symbol=="function"&&ve.constructor===Symbol&&ve!==Symbol.prototype?"symbol":typeof ve};function u(ve,be){return g(ve.source,be.source)||ve.index-be.index}function c(ve,be){return g(ve.target,be.target)||ve.index-be.index}function g(ve,be){return ve.partOfCycle===be.partOfCycle?ve.y0-be.y0:ve.circularLinkType==="top"||be.circularLinkType==="bottom"?-1:1}function f(ve){return ve.value}function b(ve){return(ve.y0+ve.y1)/2}function v(ve){return b(ve.source)}function d(ve){return b(ve.target)}function m(ve){return ve.index}function x(ve){return ve.nodes}function y(ve){return ve.links}function T(ve,be){var me=ve.get(be);if(!me)throw new Error("missing: "+be);return me}function h(ve,be){return be(ve)}var E=25,k=10,L=.3;function P(){var ve,be,me=0,Se=0,we=1,_e=1,oe=24,le=m,pe=a,Ee=x,Te=y,Me=32,Le=2,Ie=null;function he(){var ke={nodes:Ee.apply(null,arguments),links:Te.apply(null,arguments)};(function(Re){Re.nodes.forEach(function(Ve,qe){Ve.index=qe,Ve.sourceLinks=[],Ve.targetLinks=[]});var Oe=(0,A.kH)(Re.nodes,le);Re.links.forEach(function(Ve,qe){Ve.index=qe;var Je=Ve.source,ot=Ve.target;(Je===void 0?"undefined":l(Je))!=="object"&&(Je=Ve.source=T(Oe,Je)),(ot===void 0?"undefined":l(ot))!=="object"&&(ot=Ve.target=T(Oe,ot)),Je.sourceLinks.push(Ve),ot.targetLinks.push(Ve)})})(ke),function(Re,Oe,Ve){var qe=0;if(Ve===null){for(var Je=[],ot=0;ot<Re.links.length;ot++){var rt=Re.links[ot],dt=rt.source.index,_t=rt.target.index;Je[dt]||(Je[dt]=[]),Je[_t]||(Je[_t]=[]),Je[dt].indexOf(_t)===-1&&Je[dt].push(_t)}var yt=_()(Je);yt.sort(function(At,Rt){return At.length-Rt.length});var et={};for(ot=0;ot<yt.length;ot++){var nt=yt[ot].slice(-2);et[nt[0]]||(et[nt[0]]={}),et[nt[0]][nt[1]]=!0}Re.links.forEach(function(At){var Rt=At.target.index,Ft=At.source.index;Rt===Ft||et[Ft]&&et[Ft][Rt]?(At.circular=!0,At.circularLinkID=qe,qe+=1):At.circular=!1})}else Re.links.forEach(function(At){At.source[Ve]<At.target[Ve]?At.circular=!1:(At.circular=!0,At.circularLinkID=qe,qe+=1)})}(ke,0,Ie),function(Re){Re.nodes.forEach(function(Oe){Oe.partOfCycle=!1,Oe.value=Math.max((0,M.oh)(Oe.sourceLinks,f),(0,M.oh)(Oe.targetLinks,f)),Oe.sourceLinks.forEach(function(Ve){Ve.circular&&(Oe.partOfCycle=!0,Oe.circularLinkType=Ve.circularLinkType)}),Oe.targetLinks.forEach(function(Ve){Ve.circular&&(Oe.partOfCycle=!0,Oe.circularLinkType=Ve.circularLinkType)})})}(ke),function(Re){var Oe,Ve,qe;for(Oe=Re.nodes,Ve=[],qe=0;Oe.length;++qe,Oe=Ve,Ve=[])Oe.forEach(function(Je){Je.depth=qe,Je.sourceLinks.forEach(function(ot){Ve.indexOf(ot.target)<0&&!ot.circular&&Ve.push(ot.target)})});for(Oe=Re.nodes,Ve=[],qe=0;Oe.length;++qe,Oe=Ve,Ve=[])Oe.forEach(function(Je){Je.height=qe,Je.targetLinks.forEach(function(ot){Ve.indexOf(ot.source)<0&&!ot.circular&&Ve.push(ot.source)})});Re.nodes.forEach(function(Je){Je.column=Math.floor(pe.call(null,Je,qe))})}(ke),I(ke,le),function(Re,Oe,Ve){var qe=(0,A.UJ)().key(function(_t){return _t.column}).sortKeys(M.XE).entries(Re.nodes).map(function(_t){return _t.values});(function(_t){if(be){var yt=1/0;qe.forEach(function(Rt){var Ft=_e*be/(Rt.length+1);yt=Ft<yt?Ft:yt}),ve=yt}var et=(0,M.SY)(qe,function(Rt){return(_e-Se-(Rt.length-1)*ve)/(0,M.oh)(Rt,f)});et*=L,Re.links.forEach(function(Rt){Rt.width=Rt.value*et});var nt=function(Rt){var Ft=0,It=0,Ge=0,Ye=0,Ne=(0,M.kv)(Rt.nodes,function(We){return We.column});return Rt.links.forEach(function(We){We.circular&&(We.circularLinkType=="top"?Ft+=We.width:It+=We.width,We.target.column==0&&(Ye+=We.width),We.source.column==Ne&&(Ge+=We.width))}),{top:Ft=Ft>0?Ft+E+k:Ft,bottom:It=It>0?It+E+k:It,left:Ye=Ye>0?Ye+E+k:Ye,right:Ge=Ge>0?Ge+E+k:Ge}}(Re),At=function(Rt,Ft){var It=(0,M.kv)(Rt.nodes,function(st){return st.column}),Ge=we-me,Ye=_e-Se,Ne=Ge/(Ge+Ft.right+Ft.left),We=Ye/(Ye+Ft.top+Ft.bottom);return me=me*Ne+Ft.left,we=Ft.right==0?we:we*Ne,Se=Se*We+Ft.top,_e*=We,Rt.nodes.forEach(function(st){st.x0=me+st.column*((we-me-oe)/It),st.x1=st.x0+oe}),We}(Re,nt);et*=At,Re.links.forEach(function(Rt){Rt.width=Rt.value*et}),qe.forEach(function(Rt){var Ft=Rt.length;Rt.forEach(function(It,Ge){It.depth==qe.length-1&&Ft==1||It.depth==0&&Ft==1?(It.y0=_e/2-It.value*et,It.y1=It.y0+It.value*et):It.partOfCycle?F(It,_t)==0?(It.y0=_e/2+Ge,It.y1=It.y0+It.value*et):It.circularLinkType=="top"?(It.y0=Se+Ge,It.y1=It.y0+It.value*et):(It.y0=_e-It.value*et-Ge,It.y1=It.y0+It.value*et):nt.top==0||nt.bottom==0?(It.y0=(_e-Se)/Ft*Ge,It.y1=It.y0+It.value*et):(It.y0=(_e-Se)/2-Ft/2+Ge,It.y1=It.y0+It.value*et)})})})(Ve),dt();for(var Je=1,ot=Oe;ot>0;--ot)rt(Je*=.99,Ve),dt();function rt(_t,yt){var et=qe.length;qe.forEach(function(nt){var At=nt.length,Rt=nt[0].depth;nt.forEach(function(Ft){var It;if((Ft.sourceLinks.length||Ft.targetLinks.length)&&!(Ft.partOfCycle&&F(Ft,yt)>0))if(Rt==0&&At==1)It=Ft.y1-Ft.y0,Ft.y0=_e/2-It/2,Ft.y1=_e/2+It/2;else if(Rt==et-1&&At==1)It=Ft.y1-Ft.y0,Ft.y0=_e/2-It/2,Ft.y1=_e/2+It/2;else{var Ge=(0,M.mo)(Ft.sourceLinks,d),Ye=(0,M.mo)(Ft.targetLinks,v),Ne=((Ge&&Ye?(Ge+Ye)/2:Ge||Ye)-b(Ft))*_t;Ft.y0+=Ne,Ft.y1+=Ne}})})}function dt(){qe.forEach(function(_t){var yt,et,nt,At=Se,Rt=_t.length;for(_t.sort(g),nt=0;nt<Rt;++nt)(et=At-(yt=_t[nt]).y0)>0&&(yt.y0+=et,yt.y1+=et),At=yt.y1+ve;if((et=At-ve-_e)>0)for(At=yt.y0-=et,yt.y1-=et,nt=Rt-2;nt>=0;--nt)(et=(yt=_t[nt]).y1+ve-At)>0&&(yt.y0-=et,yt.y1-=et),At=yt.y0})}}(ke,Me,le),xe(ke);for(var ze=0;ze<4;ze++)ae(ke,_e,le),se(ke,0,le),te(ke,Se,_e,le),ae(ke,_e,le),se(ke,0,le);return function(Re,Oe,Ve){var qe=Re.nodes,Je=Re.links,ot=!1,rt=!1;if(Je.forEach(function(yt){yt.circularLinkType=="top"?ot=!0:yt.circularLinkType=="bottom"&&(rt=!0)}),ot==0||rt==0){var dt=(0,M.SY)(qe,function(yt){return yt.y0}),_t=(Ve-Oe)/((0,M.kv)(qe,function(yt){return yt.y1})-dt);qe.forEach(function(yt){var et=(yt.y1-yt.y0)*_t;yt.y0=(yt.y0-dt)*_t,yt.y1=yt.y0+et}),Je.forEach(function(yt){yt.y0=(yt.y0-dt)*_t,yt.y1=(yt.y1-dt)*_t,yt.width=yt.width*_t})}}(ke,Se,_e),j(ke,Le,_e,le),ke}function xe(ke){ke.nodes.forEach(function(ze){ze.sourceLinks.sort(c),ze.targetLinks.sort(u)}),ke.nodes.forEach(function(ze){var Re=ze.y0,Oe=Re,Ve=ze.y1,qe=Ve;ze.sourceLinks.forEach(function(Je){Je.circular?(Je.y0=Ve-Je.width/2,Ve-=Je.width):(Je.y0=Re+Je.width/2,Re+=Je.width)}),ze.targetLinks.forEach(function(Je){Je.circular?(Je.y1=qe-Je.width/2,qe-=Je.width):(Je.y1=Oe+Je.width/2,Oe+=Je.width)})})}return he.nodeId=function(ke){return arguments.length?(le=typeof ke=="function"?ke:i(ke),he):le},he.nodeAlign=function(ke){return arguments.length?(pe=typeof ke=="function"?ke:i(ke),he):pe},he.nodeWidth=function(ke){return arguments.length?(oe=+ke,he):oe},he.nodePadding=function(ke){return arguments.length?(ve=+ke,he):ve},he.nodes=function(ke){return arguments.length?(Ee=typeof ke=="function"?ke:i(ke),he):Ee},he.links=function(ke){return arguments.length?(Te=typeof ke=="function"?ke:i(ke),he):Te},he.size=function(ke){return arguments.length?(me=Se=0,we=+ke[0],_e=+ke[1],he):[we-me,_e-Se]},he.extent=function(ke){return arguments.length?(me=+ke[0][0],we=+ke[1][0],Se=+ke[0][1],_e=+ke[1][1],he):[[me,Se],[we,_e]]},he.iterations=function(ke){return arguments.length?(Me=+ke,he):Me},he.circularLinkGap=function(ke){return arguments.length?(Le=+ke,he):Le},he.nodePaddingRatio=function(ke){return arguments.length?(be=+ke,he):be},he.sortNodes=function(ke){return arguments.length?(Ie=ke,he):Ie},he.update=function(ke){return I(ke,le),xe(ke),ke.links.forEach(function(ze){ze.circular&&(ze.circularLinkType=ze.y0+ze.y1<_e?"top":"bottom",ze.source.circularLinkType=ze.circularLinkType,ze.target.circularLinkType=ze.circularLinkType)}),ae(ke,_e,le,!1),se(ke,0,le),j(ke,Le,_e,le),ke},he}function I(ve,be){var me=0,Se=0;ve.links.forEach(function(we){we.circular&&(we.source.circularLinkType||we.target.circularLinkType?we.circularLinkType=we.source.circularLinkType?we.source.circularLinkType:we.target.circularLinkType:we.circularLinkType=me<Se?"top":"bottom",we.circularLinkType=="top"?me+=1:Se+=1,ve.nodes.forEach(function(_e){h(_e,be)!=h(we.source,be)&&h(_e,be)!=h(we.target,be)||(_e.circularLinkType=we.circularLinkType)}))}),ve.links.forEach(function(we){we.circular&&(we.source.circularLinkType==we.target.circularLinkType&&(we.circularLinkType=we.source.circularLinkType),ge(we,be)&&(we.circularLinkType=we.source.circularLinkType))})}function z(ve){var be=Math.abs(ve.y1-ve.y0),me=Math.abs(ve.target.x0-ve.source.x1);return Math.atan(me/be)}function F(ve,be){var me=0;ve.sourceLinks.forEach(function(we){me=we.circular&&!ge(we,be)?me+1:me});var Se=0;return ve.targetLinks.forEach(function(we){Se=we.circular&&!ge(we,be)?Se+1:Se}),me+Se}function U(ve){var be=ve.source.sourceLinks,me=0;be.forEach(function(_e){me=_e.circular?me+1:me});var Se=ve.target.targetLinks,we=0;return Se.forEach(function(_e){we=_e.circular?we+1:we}),!(me>1||we>1)}function R(ve,be,me){return ve.sort(Z),ve.forEach(function(Se,we){var _e,oe,le=0;if(ge(Se,me)&&U(Se))Se.circularPathData.verticalBuffer=le+Se.width/2;else{for(var pe=0;pe<we;pe++)if(_e=ve[we],oe=ve[pe],!(_e.source.column<oe.target.column||_e.target.column>oe.source.column)){var Ee=ve[pe].circularPathData.verticalBuffer+ve[pe].width/2+be;le=Ee>le?Ee:le}Se.circularPathData.verticalBuffer=le+Se.width/2}}),ve}function j(ve,be,me,Se){var we=(0,M.SY)(ve.links,function(_e){return _e.source.y0});ve.links.forEach(function(_e){_e.circular&&(_e.circularPathData={})}),R(ve.links.filter(function(_e){return _e.circularLinkType=="top"}),be,Se),R(ve.links.filter(function(_e){return _e.circularLinkType=="bottom"}),be,Se),ve.links.forEach(function(_e){if(_e.circular){if(_e.circularPathData.arcRadius=_e.width+k,_e.circularPathData.leftNodeBuffer=5,_e.circularPathData.rightNodeBuffer=5,_e.circularPathData.sourceWidth=_e.source.x1-_e.source.x0,_e.circularPathData.sourceX=_e.source.x0+_e.circularPathData.sourceWidth,_e.circularPathData.targetX=_e.target.x0,_e.circularPathData.sourceY=_e.y0,_e.circularPathData.targetY=_e.y1,ge(_e,Se)&&U(_e))_e.circularPathData.leftSmallArcRadius=k+_e.width/2,_e.circularPathData.leftLargeArcRadius=k+_e.width/2,_e.circularPathData.rightSmallArcRadius=k+_e.width/2,_e.circularPathData.rightLargeArcRadius=k+_e.width/2,_e.circularLinkType=="bottom"?(_e.circularPathData.verticalFullExtent=_e.source.y1+E+_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.rightLargeArcRadius):(_e.circularPathData.verticalFullExtent=_e.source.y0-E-_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.rightLargeArcRadius);else{var oe=_e.source.column,le=_e.circularLinkType,pe=ve.links.filter(function(Me){return Me.source.column==oe&&Me.circularLinkType==le});_e.circularLinkType=="bottom"?pe.sort(q):pe.sort(B);var Ee=0;pe.forEach(function(Me,Le){Me.circularLinkID==_e.circularLinkID&&(_e.circularPathData.leftSmallArcRadius=k+_e.width/2+Ee,_e.circularPathData.leftLargeArcRadius=k+_e.width/2+Le*be+Ee),Ee+=Me.width}),oe=_e.target.column,pe=ve.links.filter(function(Me){return Me.target.column==oe&&Me.circularLinkType==le}),_e.circularLinkType=="bottom"?pe.sort(ne):pe.sort(V),Ee=0,pe.forEach(function(Me,Le){Me.circularLinkID==_e.circularLinkID&&(_e.circularPathData.rightSmallArcRadius=k+_e.width/2+Ee,_e.circularPathData.rightLargeArcRadius=k+_e.width/2+Le*be+Ee),Ee+=Me.width}),_e.circularLinkType=="bottom"?(_e.circularPathData.verticalFullExtent=Math.max(me,_e.source.y1,_e.target.y1)+E+_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.rightLargeArcRadius):(_e.circularPathData.verticalFullExtent=we-E-_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.rightLargeArcRadius)}_e.circularPathData.leftInnerExtent=_e.circularPathData.sourceX+_e.circularPathData.leftNodeBuffer,_e.circularPathData.rightInnerExtent=_e.circularPathData.targetX-_e.circularPathData.rightNodeBuffer,_e.circularPathData.leftFullExtent=_e.circularPathData.sourceX+_e.circularPathData.leftLargeArcRadius+_e.circularPathData.leftNodeBuffer,_e.circularPathData.rightFullExtent=_e.circularPathData.targetX-_e.circularPathData.rightLargeArcRadius-_e.circularPathData.rightNodeBuffer}if(_e.circular)_e.path=function(Me){return Me.circularLinkType=="top"?"M"+Me.circularPathData.sourceX+" "+Me.circularPathData.sourceY+" L"+Me.circularPathData.leftInnerExtent+" "+Me.circularPathData.sourceY+" A"+Me.circularPathData.leftLargeArcRadius+" "+Me.circularPathData.leftSmallArcRadius+" 0 0 0 "+Me.circularPathData.leftFullExtent+" "+(Me.circularPathData.sourceY-Me.circularPathData.leftSmallArcRadius)+" L"+Me.circularPathData.leftFullExtent+" "+Me.circularPathData.verticalLeftInnerExtent+" A"+Me.circularPathData.leftLargeArcRadius+" "+Me.circularPathData.leftLargeArcRadius+" 0 0 0 "+Me.circularPathData.leftInnerExtent+" "+Me.circularPathData.verticalFullExtent+" L"+Me.circularPathData.rightInnerExtent+" "+Me.circularPathData.verticalFullExtent+" A"+Me.circularPathData.rightLargeArcRadius+" "+Me.circularPathData.rightLargeArcRadius+" 0 0 0 "+Me.circularPathData.rightFullExtent+" "+Me.circularPathData.verticalRightInnerExtent+" L"+Me.circularPathData.rightFullExtent+" "+(Me.circularPathData.targetY-Me.circularPathData.rightSmallArcRadius)+" A"+Me.circularPathData.rightLargeArcRadius+" "+Me.circularPathData.rightSmallArcRadius+" 0 0 0 "+Me.circularPathData.rightInnerExtent+" "+Me.circularPathData.targetY+" L"+Me.circularPathData.targetX+" "+Me.circularPathData.targetY:"M"+Me.circularPathData.sourceX+" "+Me.circularPathData.sourceY+" L"+Me.circularPathData.leftInnerExtent+" "+Me.circularPathData.sourceY+" A"+Me.circularPathData.leftLargeArcRadius+" "+Me.circularPathData.leftSmallArcRadius+" 0 0 1 "+Me.circularPathData.leftFullExtent+" "+(Me.circularPathData.sourceY+Me.circularPathData.leftSmallArcRadius)+" L"+Me.circularPathData.leftFullExtent+" "+Me.circularPathData.verticalLeftInnerExtent+" A"+Me.circularPathData.leftLargeArcRadius+" "+Me.circularPathData.leftLargeArcRadius+" 0 0 1 "+Me.circularPathData.leftInnerExtent+" "+Me.circularPathData.verticalFullExtent+" L"+Me.circularPathData.rightInnerExtent+" "+Me.circularPathData.verticalFullExtent+" A"+Me.circularPathData.rightLargeArcRadius+" "+Me.circularPathData.rightLargeArcRadius+" 0 0 1 "+Me.circularPathData.rightFullExtent+" "+Me.circularPathData.verticalRightInnerExtent+" L"+Me.circularPathData.rightFullExtent+" "+(Me.circularPathData.targetY+Me.circularPathData.rightSmallArcRadius)+" A"+Me.circularPathData.rightLargeArcRadius+" "+Me.circularPathData.rightSmallArcRadius+" 0 0 1 "+Me.circularPathData.rightInnerExtent+" "+Me.circularPathData.targetY+" L"+Me.circularPathData.targetX+" "+Me.circularPathData.targetY}(_e);else{var Te=(0,o.ak)().source(function(Me){return[Me.source.x0+(Me.source.x1-Me.source.x0),Me.y0]}).target(function(Me){return[Me.target.x0,Me.y1]});_e.path=Te(_e)}})}function Z(ve,be){return ee(ve)==ee(be)?ve.circularLinkType=="bottom"?q(ve,be):B(ve,be):ee(be)-ee(ve)}function B(ve,be){return ve.y0-be.y0}function q(ve,be){return be.y0-ve.y0}function V(ve,be){return ve.y1-be.y1}function ne(ve,be){return be.y1-ve.y1}function ee(ve){return ve.target.column-ve.source.column}function $(ve){return ve.target.x0-ve.source.x1}function J(ve,be){var me=z(ve),Se=$(be)/Math.tan(me);return de(ve)=="up"?ve.y1+Se:ve.y1-Se}function K(ve,be){var me=z(ve),Se=$(be)/Math.tan(me);return de(ve)=="up"?ve.y1-Se:ve.y1+Se}function te(ve,be,me,Se){ve.links.forEach(function(we){if(!we.circular&&we.target.column-we.source.column>1){var _e=we.source.column+1,oe=we.target.column-1,le=1,pe=oe-_e+1;for(le=1;_e<=oe;_e++,le++)ve.nodes.forEach(function(Ee){if(Ee.column==_e){var Te,Me=le/(pe+1),Le=Math.pow(1-Me,3),Ie=3*Me*Math.pow(1-Me,2),he=3*Math.pow(Me,2)*(1-Me),xe=Math.pow(Me,3),ke=Le*we.y0+Ie*we.y0+he*we.y1+xe*we.y1,ze=ke-we.width/2,Re=ke+we.width/2;ze>Ee.y0&&ze<Ee.y1?(Te=Ee.y1-ze+10,Te=Ee.circularLinkType=="bottom"?Te:-Te,Ee=ie(Ee,Te,be,me),ve.nodes.forEach(function(Oe){var Ve,qe;h(Oe,Se)!=h(Ee,Se)&&Oe.column==Ee.column&&(qe=Oe,(Ve=Ee).y0>qe.y0&&Ve.y0<qe.y1||Ve.y1>qe.y0&&Ve.y1<qe.y1||Ve.y0<qe.y0&&Ve.y1>qe.y1)&&ie(Oe,Te,be,me)})):(Re>Ee.y0&&Re<Ee.y1||ze<Ee.y0&&Re>Ee.y1)&&(Te=Re-Ee.y0+10,Ee=ie(Ee,Te,be,me),ve.nodes.forEach(function(Oe){h(Oe,Se)!=h(Ee,Se)&&Oe.column==Ee.column&&Oe.y0<Ee.y1&&Oe.y1>Ee.y1&&ie(Oe,Te,be,me)}))}})}})}function ie(ve,be,me,Se){return ve.y0+be>=me&&ve.y1+be<=Se&&(ve.y0=ve.y0+be,ve.y1=ve.y1+be,ve.targetLinks.forEach(function(we){we.y1=we.y1+be}),ve.sourceLinks.forEach(function(we){we.y0=we.y0+be})),ve}function ae(ve,be,me,Se){ve.nodes.forEach(function(we){Se&&we.y+(we.y1-we.y0)>be&&(we.y=we.y-(we.y+(we.y1-we.y0)-be));var _e=ve.links.filter(function(pe){return h(pe.source,me)==h(we,me)}),oe=_e.length;oe>1&&_e.sort(function(pe,Ee){if(!pe.circular&&!Ee.circular){if(pe.target.column==Ee.target.column||!ce(pe,Ee))return pe.y1-Ee.y1;if(pe.target.column>Ee.target.column){var Te=K(Ee,pe);return pe.y1-Te}if(Ee.target.column>pe.target.column)return K(pe,Ee)-Ee.y1}return pe.circular&&!Ee.circular?pe.circularLinkType=="top"?-1:1:Ee.circular&&!pe.circular?Ee.circularLinkType=="top"?1:-1:pe.circular&&Ee.circular?pe.circularLinkType===Ee.circularLinkType&&pe.circularLinkType=="top"?pe.target.column===Ee.target.column?pe.target.y1-Ee.target.y1:Ee.target.column-pe.target.column:pe.circularLinkType===Ee.circularLinkType&&pe.circularLinkType=="bottom"?pe.target.column===Ee.target.column?Ee.target.y1-pe.target.y1:pe.target.column-Ee.target.column:pe.circularLinkType=="top"?-1:1:void 0});var le=we.y0;_e.forEach(function(pe){pe.y0=le+pe.width/2,le+=pe.width}),_e.forEach(function(pe,Ee){if(pe.circularLinkType=="bottom"){for(var Te=Ee+1,Me=0;Te<oe;Te++)Me+=_e[Te].width;pe.y0=we.y1-Me-pe.width/2}})})}function se(ve,be,me){ve.nodes.forEach(function(Se){var we=ve.links.filter(function(le){return h(le.target,me)==h(Se,me)}),_e=we.length;_e>1&&we.sort(function(le,pe){if(!le.circular&&!pe.circular){if(le.source.column==pe.source.column||!ce(le,pe))return le.y0-pe.y0;if(pe.source.column<le.source.column){var Ee=J(pe,le);return le.y0-Ee}if(le.source.column<pe.source.column)return J(le,pe)-pe.y0}return le.circular&&!pe.circular?le.circularLinkType=="top"?-1:1:pe.circular&&!le.circular?pe.circularLinkType=="top"?1:-1:le.circular&&pe.circular?le.circularLinkType===pe.circularLinkType&&le.circularLinkType=="top"?le.source.column===pe.source.column?le.source.y1-pe.source.y1:le.source.column-pe.source.column:le.circularLinkType===pe.circularLinkType&&le.circularLinkType=="bottom"?le.source.column===pe.source.column?le.source.y1-pe.source.y1:pe.source.column-le.source.column:le.circularLinkType=="top"?-1:1:void 0});var oe=Se.y0;we.forEach(function(le){le.y1=oe+le.width/2,oe+=le.width}),we.forEach(function(le,pe){if(le.circularLinkType=="bottom"){for(var Ee=pe+1,Te=0;Ee<_e;Ee++)Te+=we[Ee].width;le.y1=Se.y1-Te-le.width/2}})})}function ce(ve,be){return de(ve)==de(be)}function de(ve){return ve.y0-ve.y1>0?"up":"down"}function ge(ve,be){return h(ve.source,be)==h(ve.target,be)}},26800:function(Y,O,e){e.r(O),e.d(O,{sankey:function(){return m},sankeyCenter:function(){return s},sankeyJustify:function(){return p},sankeyLeft:function(){return w},sankeyLinkHorizontal:function(){return h},sankeyRight:function(){return _}});var M=e(84706),A=e(34712);function o(E){return E.target.depth}function w(E){return E.depth}function _(E,k){return k-1-E.height}function p(E,k){return E.sourceLinks.length?E.depth:k-1}function s(E){return E.targetLinks.length?E.depth:E.sourceLinks.length?(0,M.SY)(E.sourceLinks,o)-1:0}function n(E){return function(){return E}}function a(E,k){return i(E.source,k.source)||E.index-k.index}function r(E,k){return i(E.target,k.target)||E.index-k.index}function i(E,k){return E.y0-k.y0}function l(E){return E.value}function u(E){return(E.y0+E.y1)/2}function c(E){return u(E.source)*E.value}function g(E){return u(E.target)*E.value}function f(E){return E.index}function b(E){return E.nodes}function v(E){return E.links}function d(E,k){var L=E.get(k);if(!L)throw new Error("missing: "+k);return L}function m(){var E=0,k=0,L=1,P=1,I=24,z=8,F=f,U=p,R=b,j=v,Z=32;function B(){var V={nodes:R.apply(null,arguments),links:j.apply(null,arguments)};return function(ne){ne.nodes.forEach(function($,J){$.index=J,$.sourceLinks=[],$.targetLinks=[]});var ee=(0,A.kH)(ne.nodes,F);ne.links.forEach(function($,J){$.index=J;var K=$.source,te=$.target;typeof K!="object"&&(K=$.source=d(ee,K)),typeof te!="object"&&(te=$.target=d(ee,te)),K.sourceLinks.push($),te.targetLinks.push($)})}(V),function(ne){ne.nodes.forEach(function(ee){ee.value=Math.max((0,M.oh)(ee.sourceLinks,l),(0,M.oh)(ee.targetLinks,l))})}(V),function(ne){var ee,$,J;for(ee=ne.nodes,$=[],J=0;ee.length;++J,ee=$,$=[])ee.forEach(function(te){te.depth=J,te.sourceLinks.forEach(function(ie){$.indexOf(ie.target)<0&&$.push(ie.target)})});for(ee=ne.nodes,$=[],J=0;ee.length;++J,ee=$,$=[])ee.forEach(function(te){te.height=J,te.targetLinks.forEach(function(ie){$.indexOf(ie.source)<0&&$.push(ie.source)})});var K=(L-E-I)/(J-1);ne.nodes.forEach(function(te){te.x1=(te.x0=E+Math.max(0,Math.min(J-1,Math.floor(U.call(null,te,J))))*K)+I})}(V),function(ne){var ee=(0,A.UJ)().key(function(ae){return ae.x0}).sortKeys(M.XE).entries(ne.nodes).map(function(ae){return ae.values});(function(){var ae=(0,M.kv)(ee,function(de){return de.length}),se=.6666666666666666*(P-k)/(ae-1);z>se&&(z=se);var ce=(0,M.SY)(ee,function(de){return(P-k-(de.length-1)*z)/(0,M.oh)(de,l)});ee.forEach(function(de){de.forEach(function(ge,ve){ge.y1=(ge.y0=ve)+ge.value*ce})}),ne.links.forEach(function(de){de.width=de.value*ce})})(),ie();for(var $=1,J=Z;J>0;--J)te($*=.99),ie(),K($),ie();function K(ae){ee.forEach(function(se){se.forEach(function(ce){if(ce.targetLinks.length){var de=((0,M.oh)(ce.targetLinks,c)/(0,M.oh)(ce.targetLinks,l)-u(ce))*ae;ce.y0+=de,ce.y1+=de}})})}function te(ae){ee.slice().reverse().forEach(function(se){se.forEach(function(ce){if(ce.sourceLinks.length){var de=((0,M.oh)(ce.sourceLinks,g)/(0,M.oh)(ce.sourceLinks,l)-u(ce))*ae;ce.y0+=de,ce.y1+=de}})})}function ie(){ee.forEach(function(ae){var se,ce,de,ge=k,ve=ae.length;for(ae.sort(i),de=0;de<ve;++de)(ce=ge-(se=ae[de]).y0)>0&&(se.y0+=ce,se.y1+=ce),ge=se.y1+z;if((ce=ge-z-P)>0)for(ge=se.y0-=ce,se.y1-=ce,de=ve-2;de>=0;--de)(ce=(se=ae[de]).y1+z-ge)>0&&(se.y0-=ce,se.y1-=ce),ge=se.y0})}}(V),q(V),V}function q(V){V.nodes.forEach(function(ne){ne.sourceLinks.sort(r),ne.targetLinks.sort(a)}),V.nodes.forEach(function(ne){var ee=ne.y0,$=ee;ne.sourceLinks.forEach(function(J){J.y0=ee+J.width/2,ee+=J.width}),ne.targetLinks.forEach(function(J){J.y1=$+J.width/2,$+=J.width})})}return B.update=function(V){return q(V),V},B.nodeId=function(V){return arguments.length?(F=typeof V=="function"?V:n(V),B):F},B.nodeAlign=function(V){return arguments.length?(U=typeof V=="function"?V:n(V),B):U},B.nodeWidth=function(V){return arguments.length?(I=+V,B):I},B.nodePadding=function(V){return arguments.length?(z=+V,B):z},B.nodes=function(V){return arguments.length?(R=typeof V=="function"?V:n(V),B):R},B.links=function(V){return arguments.length?(j=typeof V=="function"?V:n(V),B):j},B.size=function(V){return arguments.length?(E=k=0,L=+V[0],P=+V[1],B):[L-E,P-k]},B.extent=function(V){return arguments.length?(E=+V[0][0],L=+V[1][0],k=+V[0][1],P=+V[1][1],B):[[E,k],[L,P]]},B.iterations=function(V){return arguments.length?(Z=+V,B):Z},B}var x=e(10132);function y(E){return[E.source.x1,E.y0]}function T(E){return[E.target.x0,E.y1]}function h(){return(0,x.ak)().source(y).target(T)}},33428:function(Y,O,e){var M,A;(function(){var o={version:"3.8.0"},w=[].slice,_=function(C){return w.call(C)},p=self.document;function s(C){return C&&(C.ownerDocument||C.document||C).documentElement}function n(C){return C&&(C.ownerDocument&&C.ownerDocument.defaultView||C.document&&C||C.defaultView)}if(p)try{_(p.documentElement.childNodes)[0].nodeType}catch{_=function(H){for(var Q=H.length,re=new Array(Q);Q--;)re[Q]=H[Q];return re}}if(Date.now||(Date.now=function(){return+new Date}),p)try{p.createElement("DIV").style.setProperty("opacity",0,"")}catch{var a=this.Element.prototype,r=a.setAttribute,i=a.setAttributeNS,l=this.CSSStyleDeclaration.prototype,u=l.setProperty;a.setAttribute=function(H,Q){r.call(this,H,Q+"")},a.setAttributeNS=function(H,Q,re){i.call(this,H,Q,re+"")},l.setProperty=function(H,Q,re){u.call(this,H,Q+"",re)}}function c(C,H){return C<H?-1:C>H?1:C>=H?0:NaN}function g(C){return C===null?NaN:+C}function f(C){return!isNaN(C)}function b(C){return{left:function(H,Q,re,fe){for(arguments.length<3&&(re=0),arguments.length<4&&(fe=H.length);re<fe;){var ye=re+fe>>>1;C(H[ye],Q)<0?re=ye+1:fe=ye}return re},right:function(H,Q,re,fe){for(arguments.length<3&&(re=0),arguments.length<4&&(fe=H.length);re<fe;){var ye=re+fe>>>1;C(H[ye],Q)>0?fe=ye:re=ye+1}return re}}}o.ascending=c,o.descending=function(C,H){return H<C?-1:H>C?1:H>=C?0:NaN},o.min=function(C,H){var Q,re,fe=-1,ye=C.length;if(arguments.length===1){for(;++fe<ye;)if((re=C[fe])!=null&&re>=re){Q=re;break}for(;++fe<ye;)(re=C[fe])!=null&&Q>re&&(Q=re)}else{for(;++fe<ye;)if((re=H.call(C,C[fe],fe))!=null&&re>=re){Q=re;break}for(;++fe<ye;)(re=H.call(C,C[fe],fe))!=null&&Q>re&&(Q=re)}return Q},o.max=function(C,H){var Q,re,fe=-1,ye=C.length;if(arguments.length===1){for(;++fe<ye;)if((re=C[fe])!=null&&re>=re){Q=re;break}for(;++fe<ye;)(re=C[fe])!=null&&re>Q&&(Q=re)}else{for(;++fe<ye;)if((re=H.call(C,C[fe],fe))!=null&&re>=re){Q=re;break}for(;++fe<ye;)(re=H.call(C,C[fe],fe))!=null&&re>Q&&(Q=re)}return Q},o.extent=function(C,H){var Q,re,fe,ye=-1,Ce=C.length;if(arguments.length===1){for(;++ye<Ce;)if((re=C[ye])!=null&&re>=re){Q=fe=re;break}for(;++ye<Ce;)(re=C[ye])!=null&&(Q>re&&(Q=re),fe<re&&(fe=re))}else{for(;++ye<Ce;)if((re=H.call(C,C[ye],ye))!=null&&re>=re){Q=fe=re;break}for(;++ye<Ce;)(re=H.call(C,C[ye],ye))!=null&&(Q>re&&(Q=re),fe<re&&(fe=re))}return[Q,fe]},o.sum=function(C,H){var Q,re=0,fe=C.length,ye=-1;if(arguments.length===1)for(;++ye<fe;)f(Q=+C[ye])&&(re+=Q);else for(;++ye<fe;)f(Q=+H.call(C,C[ye],ye))&&(re+=Q);return re},o.mean=function(C,H){var Q,re=0,fe=C.length,ye=-1,Ce=fe;if(arguments.length===1)for(;++ye<fe;)f(Q=g(C[ye]))?re+=Q:--Ce;else for(;++ye<fe;)f(Q=g(H.call(C,C[ye],ye)))?re+=Q:--Ce;if(Ce)return re/Ce},o.quantile=function(C,H){var Q=(C.length-1)*H+1,re=Math.floor(Q),fe=+C[re-1],ye=Q-re;return ye?fe+ye*(C[re]-fe):fe},o.median=function(C,H){var Q,re=[],fe=C.length,ye=-1;if(arguments.length===1)for(;++ye<fe;)f(Q=g(C[ye]))&&re.push(Q);else for(;++ye<fe;)f(Q=g(H.call(C,C[ye],ye)))&&re.push(Q);if(re.length)return o.quantile(re.sort(c),.5)},o.variance=function(C,H){var Q,re,fe=C.length,ye=0,Ce=0,De=-1,Ue=0;if(arguments.length===1)for(;++De<fe;)f(Q=g(C[De]))&&(Ce+=(re=Q-ye)*(Q-(ye+=re/++Ue)));else for(;++De<fe;)f(Q=g(H.call(C,C[De],De)))&&(Ce+=(re=Q-ye)*(Q-(ye+=re/++Ue)));if(Ue>1)return Ce/(Ue-1)},o.deviation=function(){var C=o.variance.apply(this,arguments);return C&&Math.sqrt(C)};var v=b(c);function d(C){return C.length}o.bisectLeft=v.left,o.bisect=o.bisectRight=v.right,o.bisector=function(C){return b(C.length===1?function(H,Q){return c(C(H),Q)}:C)},o.shuffle=function(C,H,Q){(ye=arguments.length)<3&&(Q=C.length,ye<2&&(H=0));for(var re,fe,ye=Q-H;ye;)fe=Math.random()*ye--|0,re=C[ye+H],C[ye+H]=C[fe+H],C[fe+H]=re;return C},o.permute=function(C,H){for(var Q=H.length,re=new Array(Q);Q--;)re[Q]=C[H[Q]];return re},o.pairs=function(C){for(var H=0,Q=C.length-1,re=C[0],fe=new Array(Q<0?0:Q);H<Q;)fe[H]=[re,re=C[++H]];return fe},o.transpose=function(C){if(!(fe=C.length))return[];for(var H=-1,Q=o.min(C,d),re=new Array(Q);++H<Q;)for(var fe,ye=-1,Ce=re[H]=new Array(fe);++ye<fe;)Ce[ye]=C[ye][H];return re},o.zip=function(){return o.transpose(arguments)},o.keys=function(C){var H=[];for(var Q in C)H.push(Q);return H},o.values=function(C){var H=[];for(var Q in C)H.push(C[Q]);return H},o.entries=function(C){var H=[];for(var Q in C)H.push({key:Q,value:C[Q]});return H},o.merge=function(C){for(var H,Q,re,fe=C.length,ye=-1,Ce=0;++ye<fe;)Ce+=C[ye].length;for(Q=new Array(Ce);--fe>=0;)for(H=(re=C[fe]).length;--H>=0;)Q[--Ce]=re[H];return Q};var m=Math.abs;function x(C,H){for(var Q in H)Object.defineProperty(C.prototype,Q,{value:H[Q],enumerable:!1})}function y(){this._=Object.create(null)}o.range=function(C,H,Q){if(arguments.length<3&&(Q=1,arguments.length<2&&(H=C,C=0)),(H-C)/Q==1/0)throw new Error("infinite range");var re,fe=[],ye=function(De){for(var Ue=1;De*Ue%1;)Ue*=10;return Ue}(m(Q)),Ce=-1;if(C*=ye,H*=ye,(Q*=ye)<0)for(;(re=C+Q*++Ce)>H;)fe.push(re/ye);else for(;(re=C+Q*++Ce)<H;)fe.push(re/ye);return fe},o.map=function(C,H){var Q=new y;if(C instanceof y)C.forEach(function(De,Ue){Q.set(De,Ue)});else if(Array.isArray(C)){var re,fe=-1,ye=C.length;if(arguments.length===1)for(;++fe<ye;)Q.set(fe,C[fe]);else for(;++fe<ye;)Q.set(H.call(C,re=C[fe],fe),re)}else for(var Ce in C)Q.set(Ce,C[Ce]);return Q};var T="__proto__",h="\0";function E(C){return(C+="")===T||C[0]===h?h+C:C}function k(C){return(C+="")[0]===h?C.slice(1):C}function L(C){return E(C)in this._}function P(C){return(C=E(C))in this._&&delete this._[C]}function I(){var C=[];for(var H in this._)C.push(k(H));return C}function z(){var C=0;for(var H in this._)++C;return C}function F(){for(var C in this._)return!1;return!0}function U(){this._=Object.create(null)}function R(C){return C}function j(C,H,Q){return function(){var re=Q.apply(H,arguments);return re===H?C:re}}function Z(C,H){if(H in C)return H;H=H.charAt(0).toUpperCase()+H.slice(1);for(var Q=0,re=B.length;Q<re;++Q){var fe=B[Q]+H;if(fe in C)return fe}}x(y,{has:L,get:function(C){return this._[E(C)]},set:function(C,H){return this._[E(C)]=H},remove:P,keys:I,values:function(){var C=[];for(var H in this._)C.push(this._[H]);return C},entries:function(){var C=[];for(var H in this._)C.push({key:k(H),value:this._[H]});return C},size:z,empty:F,forEach:function(C){for(var H in this._)C.call(this,k(H),this._[H])}}),o.nest=function(){var C,H,Q={},re=[],fe=[];function ye(De,Ue,He){if(He>=re.length)return H?H.call(Q,Ue):C?Ue.sort(C):Ue;for(var tt,ct,pt,kt,Lt=-1,St=Ue.length,jt=re[He++],zt=new y;++Lt<St;)(kt=zt.get(tt=jt(ct=Ue[Lt])))?kt.push(ct):zt.set(tt,[ct]);return De?(ct=De(),pt=function(Qt,Zt){ct.set(Qt,ye(De,Zt,He))}):(ct={},pt=function(Qt,Zt){ct[Qt]=ye(De,Zt,He)}),zt.forEach(pt),ct}function Ce(De,Ue){if(Ue>=re.length)return De;var He=[],tt=fe[Ue++];return De.forEach(function(ct,pt){He.push({key:ct,values:Ce(pt,Ue)})}),tt?He.sort(function(ct,pt){return tt(ct.key,pt.key)}):He}return Q.map=function(De,Ue){return ye(Ue,De,0)},Q.entries=function(De){return Ce(ye(o.map,De,0),0)},Q.key=function(De){return re.push(De),Q},Q.sortKeys=function(De){return fe[re.length-1]=De,Q},Q.sortValues=function(De){return C=De,Q},Q.rollup=function(De){return H=De,Q},Q},o.set=function(C){var H=new U;if(C)for(var Q=0,re=C.length;Q<re;++Q)H.add(C[Q]);return H},x(U,{has:L,add:function(C){return this._[E(C+="")]=!0,C},remove:P,values:I,size:z,empty:F,forEach:function(C){for(var H in this._)C.call(this,k(H))}}),o.behavior={},o.rebind=function(C,H){for(var Q,re=1,fe=arguments.length;++re<fe;)C[Q=arguments[re]]=j(C,H,H[Q]);return C};var B=["webkit","ms","moz","Moz","o","O"];function q(){}function V(){}function ne(C){var H=[],Q=new y;function re(){for(var fe,ye=H,Ce=-1,De=ye.length;++Ce<De;)(fe=ye[Ce].on)&&fe.apply(this,arguments);return C}return re.on=function(fe,ye){var Ce,De=Q.get(fe);return arguments.length<2?De&&De.on:(De&&(De.on=null,H=H.slice(0,Ce=H.indexOf(De)).concat(H.slice(Ce+1)),Q.remove(fe)),ye&&H.push(Q.set(fe,{on:ye})),C)},re}function ee(){o.event.preventDefault()}function $(){for(var C,H=o.event;C=H.sourceEvent;)H=C;return H}function J(C){for(var H=new V,Q=0,re=arguments.length;++Q<re;)H[arguments[Q]]=ne(H);return H.of=function(fe,ye){return function(Ce){try{var De=Ce.sourceEvent=o.event;Ce.target=C,o.event=Ce,H[Ce.type].apply(fe,ye)}finally{o.event=De}}},H}o.dispatch=function(){for(var C=new V,H=-1,Q=arguments.length;++H<Q;)C[arguments[H]]=ne(C);return C},V.prototype.on=function(C,H){var Q=C.indexOf("."),re="";if(Q>=0&&(re=C.slice(Q+1),C=C.slice(0,Q)),C)return arguments.length<2?this[C].on(re):this[C].on(re,H);if(arguments.length===2){if(H==null)for(C in this)this.hasOwnProperty(C)&&this[C].on(re,null);return this}},o.event=null,o.requote=function(C){return C.replace(K,"\\$&")};var K=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,te={}.__proto__?function(C,H){C.__proto__=H}:function(C,H){for(var Q in H)C[Q]=H[Q]};function ie(C){return te(C,de),C}var ae=function(C,H){return H.querySelector(C)},se=function(C,H){return H.querySelectorAll(C)},ce=function(C,H){var Q=C.matches||C[Z(C,"matchesSelector")];return ce=function(re,fe){return Q.call(re,fe)},ce(C,H)};typeof Sizzle=="function"&&(ae=function(C,H){return Sizzle(C,H)[0]||null},se=Sizzle,ce=Sizzle.matchesSelector),o.selection=function(){return o.select(p.documentElement)};var de=o.selection.prototype=[];function ge(C){return typeof C=="function"?C:function(){return ae(C,this)}}function ve(C){return typeof C=="function"?C:function(){return se(C,this)}}de.select=function(C){var H,Q,re,fe,ye=[];C=ge(C);for(var Ce=-1,De=this.length;++Ce<De;){ye.push(H=[]),H.parentNode=(re=this[Ce]).parentNode;for(var Ue=-1,He=re.length;++Ue<He;)(fe=re[Ue])?(H.push(Q=C.call(fe,fe.__data__,Ue,Ce)),Q&&"__data__"in fe&&(Q.__data__=fe.__data__)):H.push(null)}return ie(ye)},de.selectAll=function(C){var H,Q,re=[];C=ve(C);for(var fe=-1,ye=this.length;++fe<ye;)for(var Ce=this[fe],De=-1,Ue=Ce.length;++De<Ue;)(Q=Ce[De])&&(re.push(H=_(C.call(Q,Q.__data__,De,fe))),H.parentNode=Q);return ie(re)};var be="http://www.w3.org/1999/xhtml",me={svg:"http://www.w3.org/2000/svg",xhtml:be,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Se(C,H){return C=o.ns.qualify(C),H==null?C.local?function(){this.removeAttributeNS(C.space,C.local)}:function(){this.removeAttribute(C)}:typeof H=="function"?C.local?function(){var Q=H.apply(this,arguments);Q==null?this.removeAttributeNS(C.space,C.local):this.setAttributeNS(C.space,C.local,Q)}:function(){var Q=H.apply(this,arguments);Q==null?this.removeAttribute(C):this.setAttribute(C,Q)}:C.local?function(){this.setAttributeNS(C.space,C.local,H)}:function(){this.setAttribute(C,H)}}function we(C){return C.trim().replace(/\s+/g," ")}function _e(C){return new RegExp("(?:^|\\s+)"+o.requote(C)+"(?:\\s+|$)","g")}function oe(C){return(C+"").trim().split(/^|\s+/)}function le(C,H){var Q=(C=oe(C).map(pe)).length;return typeof H=="function"?function(){for(var re=-1,fe=H.apply(this,arguments);++re<Q;)C[re](this,fe)}:function(){for(var re=-1;++re<Q;)C[re](this,H)}}function pe(C){var H=_e(C);return function(Q,re){if(fe=Q.classList)return re?fe.add(C):fe.remove(C);var fe=Q.getAttribute("class")||"";re?(H.lastIndex=0,H.test(fe)||Q.setAttribute("class",we(fe+" "+C))):Q.setAttribute("class",we(fe.replace(H," ")))}}function Ee(C,H,Q){return H==null?function(){this.style.removeProperty(C)}:typeof H=="function"?function(){var re=H.apply(this,arguments);re==null?this.style.removeProperty(C):this.style.setProperty(C,re,Q)}:function(){this.style.setProperty(C,H,Q)}}function Te(C,H){return H==null?function(){delete this[C]}:typeof H=="function"?function(){var Q=H.apply(this,arguments);Q==null?delete this[C]:this[C]=Q}:function(){this[C]=H}}function Me(C){return typeof C=="function"?C:(C=o.ns.qualify(C)).local?function(){return this.ownerDocument.createElementNS(C.space,C.local)}:function(){var H=this.ownerDocument,Q=this.namespaceURI;return Q===be&&H.documentElement.namespaceURI===be?H.createElement(C):H.createElementNS(Q,C)}}function Le(){var C=this.parentNode;C&&C.removeChild(this)}function Ie(C){return{__data__:C}}function he(C){return function(){return ce(this,C)}}function xe(C){return arguments.length||(C=c),function(H,Q){return H&&Q?C(H.__data__,Q.__data__):!H-!Q}}function ke(C,H){for(var Q=0,re=C.length;Q<re;Q++)for(var fe,ye=C[Q],Ce=0,De=ye.length;Ce<De;Ce++)(fe=ye[Ce])&&H(fe,Ce,Q);return C}function ze(C){return te(C,Re),C}o.ns={prefix:me,qualify:function(C){var H=C.indexOf(":"),Q=C;return H>=0&&(Q=C.slice(0,H))!=="xmlns"&&(C=C.slice(H+1)),me.hasOwnProperty(Q)?{space:me[Q],local:C}:C}},de.attr=function(C,H){if(arguments.length<2){if(typeof C=="string"){var Q=this.node();return(C=o.ns.qualify(C)).local?Q.getAttributeNS(C.space,C.local):Q.getAttribute(C)}for(H in C)this.each(Se(H,C[H]));return this}return this.each(Se(C,H))},de.classed=function(C,H){if(arguments.length<2){if(typeof C=="string"){var Q=this.node(),re=(C=oe(C)).length,fe=-1;if(H=Q.classList){for(;++fe<re;)if(!H.contains(C[fe]))return!1}else for(H=Q.getAttribute("class");++fe<re;)if(!_e(C[fe]).test(H))return!1;return!0}for(H in C)this.each(le(H,C[H]));return this}return this.each(le(C,H))},de.style=function(C,H,Q){var re=arguments.length;if(re<3){if(typeof C!="string"){for(Q in re<2&&(H=""),C)this.each(Ee(Q,C[Q],H));return this}if(re<2){var fe=this.node();return n(fe).getComputedStyle(fe,null).getPropertyValue(C)}Q=""}return this.each(Ee(C,H,Q))},de.property=function(C,H){if(arguments.length<2){if(typeof C=="string")return this.node()[C];for(H in C)this.each(Te(H,C[H]));return this}return this.each(Te(C,H))},de.text=function(C){return arguments.length?this.each(typeof C=="function"?function(){var H=C.apply(this,arguments);this.textContent=H??""}:C==null?function(){this.textContent=""}:function(){this.textContent=C}):this.node().textContent},de.html=function(C){return arguments.length?this.each(typeof C=="function"?function(){var H=C.apply(this,arguments);this.innerHTML=H??""}:C==null?function(){this.innerHTML=""}:function(){this.innerHTML=C}):this.node().innerHTML},de.append=function(C){return C=Me(C),this.select(function(){return this.appendChild(C.apply(this,arguments))})},de.insert=function(C,H){return C=Me(C),H=ge(H),this.select(function(){return this.insertBefore(C.apply(this,arguments),H.apply(this,arguments)||null)})},de.remove=function(){return this.each(Le)},de.data=function(C,H){var Q,re,fe=-1,ye=this.length;if(!arguments.length){for(C=new Array(ye=(Q=this[0]).length);++fe<ye;)(re=Q[fe])&&(C[fe]=re.__data__);return C}function Ce(tt,ct){var pt,kt,Lt,St=tt.length,jt=ct.length,zt=Math.min(St,jt),Qt=new Array(jt),Zt=new Array(jt),Vt=new Array(St);if(H){var vn,bn=new y,On=new Array(St);for(pt=-1;++pt<St;)(kt=tt[pt])&&(bn.has(vn=H.call(kt,kt.__data__,pt))?Vt[pt]=kt:bn.set(vn,kt),On[pt]=vn);for(pt=-1;++pt<jt;)(kt=bn.get(vn=H.call(ct,Lt=ct[pt],pt)))?kt!==!0&&(Qt[pt]=kt,kt.__data__=Lt):Zt[pt]=Ie(Lt),bn.set(vn,!0);for(pt=-1;++pt<St;)pt in On&&bn.get(On[pt])!==!0&&(Vt[pt]=tt[pt])}else{for(pt=-1;++pt<zt;)kt=tt[pt],Lt=ct[pt],kt?(kt.__data__=Lt,Qt[pt]=kt):Zt[pt]=Ie(Lt);for(;pt<jt;++pt)Zt[pt]=Ie(ct[pt]);for(;pt<St;++pt)Vt[pt]=tt[pt]}Zt.update=Qt,Zt.parentNode=Qt.parentNode=Vt.parentNode=tt.parentNode,De.push(Zt),Ue.push(Qt),He.push(Vt)}var De=ze([]),Ue=ie([]),He=ie([]);if(typeof C=="function")for(;++fe<ye;)Ce(Q=this[fe],C.call(Q,Q.parentNode.__data__,fe));else for(;++fe<ye;)Ce(Q=this[fe],C);return Ue.enter=function(){return De},Ue.exit=function(){return He},Ue},de.datum=function(C){return arguments.length?this.property("__data__",C):this.property("__data__")},de.filter=function(C){var H,Q,re,fe=[];typeof C!="function"&&(C=he(C));for(var ye=0,Ce=this.length;ye<Ce;ye++){fe.push(H=[]),H.parentNode=(Q=this[ye]).parentNode;for(var De=0,Ue=Q.length;De<Ue;De++)(re=Q[De])&&C.call(re,re.__data__,De,ye)&&H.push(re)}return ie(fe)},de.order=function(){for(var C=-1,H=this.length;++C<H;)for(var Q,re=this[C],fe=re.length-1,ye=re[fe];--fe>=0;)(Q=re[fe])&&(ye&&ye!==Q.nextSibling&&ye.parentNode.insertBefore(Q,ye),ye=Q);return this},de.sort=function(C){C=xe.apply(this,arguments);for(var H=-1,Q=this.length;++H<Q;)this[H].sort(C);return this.order()},de.each=function(C){return ke(this,function(H,Q,re){C.call(H,H.__data__,Q,re)})},de.call=function(C){var H=_(arguments);return C.apply(H[0]=this,H),this},de.empty=function(){return!this.node()},de.node=function(){for(var C=0,H=this.length;C<H;C++)for(var Q=this[C],re=0,fe=Q.length;re<fe;re++){var ye=Q[re];if(ye)return ye}return null},de.size=function(){var C=0;return ke(this,function(){++C}),C};var Re=[];function Oe(C,H,Q){var re="__on"+C,fe=C.indexOf("."),ye=qe;fe>0&&(C=C.slice(0,fe));var Ce=Ve.get(C);function De(){var Ue=this[re];Ue&&(this.removeEventListener(C,Ue,Ue.$),delete this[re])}return Ce&&(C=Ce,ye=Je),fe?H?function(){var Ue=ye(H,_(arguments));De.call(this),this.addEventListener(C,this[re]=Ue,Ue.$=Q),Ue._=H}:De:H?q:function(){var Ue,He=new RegExp("^__on([^.]+)"+o.requote(C)+"$");for(var tt in this)if(Ue=tt.match(He)){var ct=this[tt];this.removeEventListener(Ue[1],ct,ct.$),delete this[tt]}}}o.selection.enter=ze,o.selection.enter.prototype=Re,Re.append=de.append,Re.empty=de.empty,Re.node=de.node,Re.call=de.call,Re.size=de.size,Re.select=function(C){for(var H,Q,re,fe,ye,Ce=[],De=-1,Ue=this.length;++De<Ue;){re=(fe=this[De]).update,Ce.push(H=[]),H.parentNode=fe.parentNode;for(var He=-1,tt=fe.length;++He<tt;)(ye=fe[He])?(H.push(re[He]=Q=C.call(fe.parentNode,ye.__data__,He,De)),Q.__data__=ye.__data__):H.push(null)}return ie(Ce)},Re.insert=function(C,H){var Q,re,fe;return arguments.length<2&&(Q=this,H=function(ye,Ce,De){var Ue,He=Q[De].update,tt=He.length;for(De!=fe&&(fe=De,re=0),Ce>=re&&(re=Ce+1);!(Ue=He[re])&&++re<tt;);return Ue}),de.insert.call(this,C,H)},o.select=function(C){var H;return typeof C=="string"?(H=[ae(C,p)]).parentNode=p.documentElement:(H=[C]).parentNode=s(C),ie([H])},o.selectAll=function(C){var H;return typeof C=="string"?(H=_(se(C,p))).parentNode=p.documentElement:(H=_(C)).parentNode=null,ie([H])},de.on=function(C,H,Q){var re=arguments.length;if(re<3){if(typeof C!="string"){for(Q in re<2&&(H=!1),C)this.each(Oe(Q,C[Q],H));return this}if(re<2)return(re=this.node()["__on"+C])&&re._;Q=!1}return this.each(Oe(C,H,Q))};var Ve=o.map({mouseenter:"mouseover",mouseleave:"mouseout"});function qe(C,H){return function(Q){var re=o.event;o.event=Q,H[0]=this.__data__;try{C.apply(this,H)}finally{o.event=re}}}function Je(C,H){var Q=qe(C,H);return function(re){var fe=this,ye=re.relatedTarget;ye&&(ye===fe||8&ye.compareDocumentPosition(fe))||Q.call(fe,re)}}p&&Ve.forEach(function(C){"on"+C in p&&Ve.remove(C)});var ot,rt=0;function dt(C){var H=".dragsuppress-"+ ++rt,Q="click"+H,re=o.select(n(C)).on("touchmove"+H,ee).on("dragstart"+H,ee).on("selectstart"+H,ee);if(ot==null&&(ot=!("onselectstart"in C)&&Z(C.style,"userSelect")),ot){var fe=s(C).style,ye=fe[ot];fe[ot]="none"}return function(Ce){if(re.on(H,null),ot&&(fe[ot]=ye),Ce){var De=function(){re.on(Q,null)};re.on(Q,function(){ee(),De()},!0),setTimeout(De,0)}}}o.mouse=function(C){return yt(C,$())};var _t=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function yt(C,H){H.changedTouches&&(H=H.changedTouches[0]);var Q=C.ownerSVGElement||C;if(Q.createSVGPoint){var re=Q.createSVGPoint();if(_t<0){var fe=n(C);if(fe.scrollX||fe.scrollY){var ye=(Q=o.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();_t=!(ye.f||ye.e),Q.remove()}}return _t?(re.x=H.pageX,re.y=H.pageY):(re.x=H.clientX,re.y=H.clientY),[(re=re.matrixTransform(C.getScreenCTM().inverse())).x,re.y]}var Ce=C.getBoundingClientRect();return[H.clientX-Ce.left-C.clientLeft,H.clientY-Ce.top-C.clientTop]}function et(){return o.event.changedTouches[0].identifier}o.touch=function(C,H,Q){if(arguments.length<3&&(Q=H,H=$().changedTouches),H){for(var re,fe=0,ye=H.length;fe<ye;++fe)if((re=H[fe]).identifier===Q)return yt(C,re)}},o.behavior.drag=function(){var C=J(fe,"drag","dragstart","dragend"),H=null,Q=ye(q,o.mouse,n,"mousemove","mouseup"),re=ye(et,o.touch,R,"touchmove","touchend");function fe(){this.on("mousedown.drag",Q).on("touchstart.drag",re)}function ye(Ce,De,Ue,He,tt){return function(){var ct,pt=this,kt=o.event.target.correspondingElement||o.event.target,Lt=pt.parentNode,St=C.of(pt,arguments),jt=0,zt=Ce(),Qt=".drag"+(zt==null?"":"-"+zt),Zt=o.select(Ue(kt)).on(He+Qt,function(){var bn,On,Dn=De(Lt,zt);Dn&&(bn=Dn[0]-vn[0],On=Dn[1]-vn[1],jt|=bn|On,vn=Dn,St({type:"drag",x:Dn[0]+ct[0],y:Dn[1]+ct[1],dx:bn,dy:On}))}).on(tt+Qt,function(){De(Lt,zt)&&(Zt.on(He+Qt,null).on(tt+Qt,null),Vt(jt),St({type:"dragend"}))}),Vt=dt(kt),vn=De(Lt,zt);ct=H?[(ct=H.apply(pt,arguments)).x-vn[0],ct.y-vn[1]]:[0,0],St({type:"dragstart"})}}return fe.origin=function(Ce){return arguments.length?(H=Ce,fe):H},o.rebind(fe,C,"on")},o.touches=function(C,H){return arguments.length<2&&(H=$().touches),H?_(H).map(function(Q){var re=yt(C,Q);return re.identifier=Q.identifier,re}):[]};var nt=1e-6,At=nt*nt,Rt=Math.PI,Ft=2*Rt,It=Ft-nt,Ge=Rt/2,Ye=Rt/180,Ne=180/Rt;function We(C){return C>1?Ge:C<-1?-Ge:Math.asin(C)}function st(C){return((C=Math.exp(C))+1/C)/2}var it=Math.SQRT2;o.interpolateZoom=function(C,H){var Q,re,fe=C[0],ye=C[1],Ce=C[2],De=H[0],Ue=H[1],He=H[2],tt=De-fe,ct=Ue-ye,pt=tt*tt+ct*ct;if(pt<At)re=Math.log(He/Ce)/it,Q=function(Qt){return[fe+Qt*tt,ye+Qt*ct,Ce*Math.exp(it*Qt*re)]};else{var kt=Math.sqrt(pt),Lt=(He*He-Ce*Ce+4*pt)/(2*Ce*2*kt),St=(He*He-Ce*Ce-4*pt)/(2*He*2*kt),jt=Math.log(Math.sqrt(Lt*Lt+1)-Lt),zt=Math.log(Math.sqrt(St*St+1)-St);re=(zt-jt)/it,Q=function(Qt){var Zt,Vt=Qt*re,vn=st(jt),bn=Ce/(2*kt)*(vn*(Zt=it*Vt+jt,((Zt=Math.exp(2*Zt))-1)/(Zt+1))-function(On){return((On=Math.exp(On))-1/On)/2}(jt));return[fe+bn*tt,ye+bn*ct,Ce*vn/st(it*Vt+jt)]}}return Q.duration=1e3*re,Q},o.behavior.zoom=function(){var C,H,Q,re,fe,ye,Ce,De,Ue,He={x:0,y:0,k:1},tt=[960,500],ct=at,pt=250,kt=0,Lt="mousedown.zoom",St="mousemove.zoom",jt="mouseup.zoom",zt="touchstart.zoom",Qt=J(Zt,"zoomstart","zoom","zoomend");function Zt(nr){nr.on(Lt,Jn).on(Be+".zoom",wr).on("dblclick.zoom",Or).on(zt,pr)}function Vt(nr){return[(nr[0]-He.x)/He.k,(nr[1]-He.y)/He.k]}function vn(nr){He.k=Math.max(ct[0],Math.min(ct[1],nr))}function bn(nr,hr){hr=function(Mr){return[Mr[0]*He.k+He.x,Mr[1]*He.k+He.y]}(hr),He.x+=nr[0]-hr[0],He.y+=nr[1]-hr[1]}function On(nr,hr,Mr,vr){nr.__chart__={x:He.x,y:He.y,k:He.k},vn(Math.pow(2,vr)),bn(H=hr,Mr),nr=o.select(nr),pt>0&&(nr=nr.transition().duration(pt)),nr.call(Zt.event)}function Dn(){Ce&&Ce.domain(ye.range().map(function(nr){return(nr-He.x)/He.k}).map(ye.invert)),Ue&&Ue.domain(De.range().map(function(nr){return(nr-He.y)/He.k}).map(De.invert))}function Yn(nr){kt++||nr({type:"zoomstart"})}function ir(nr){Dn(),nr({type:"zoom",scale:He.k,translate:[He.x,He.y]})}function gr(nr){--kt||(nr({type:"zoomend"}),H=null)}function Jn(){var nr=this,hr=Qt.of(nr,arguments),Mr=0,vr=o.select(n(nr)).on(St,function(){Mr=1,bn(o.mouse(nr),Cr),ir(hr)}).on(jt,function(){vr.on(St,null).on(jt,null),Dr(Mr),gr(hr)}),Cr=Vt(o.mouse(nr)),Dr=dt(nr);Ca.call(nr),Yn(hr)}function pr(){var nr,hr=this,Mr=Qt.of(hr,arguments),vr={},Cr=0,Dr=".zoom-"+o.event.changedTouches[0].identifier,qr="touchmove"+Dr,Hr="touchend"+Dr,Yr=[],Jr=o.select(hr),vi=dt(hr);function Oi(){var _i=o.touches(hr);return nr=He.k,_i.forEach(function($r){$r.identifier in vr&&(vr[$r.identifier]=Vt($r))}),_i}function ua(){var _i=o.event.target;o.select(_i).on(qr,Wi).on(Hr,na),Yr.push(_i);for(var $r=o.event.changedTouches,Ai=0,ci=$r.length;Ai<ci;++Ai)vr[$r[Ai].identifier]=null;var ti=Oi(),Mi=Date.now();if(ti.length===1){if(Mi-fe<500){var Ii=ti[0];On(hr,Ii,vr[Ii.identifier],Math.floor(Math.log(He.k)/Math.LN2)+1),ee()}fe=Mi}else if(ti.length>1){Ii=ti[0];var Ui=ti[1],Ms=Ii[0]-Ui[0],Ss=Ii[1]-Ui[1];Cr=Ms*Ms+Ss*Ss}}function Wi(){var _i,$r,Ai,ci,ti=o.touches(hr);Ca.call(hr);for(var Mi=0,Ii=ti.length;Mi<Ii;++Mi,ci=null)if(Ai=ti[Mi],ci=vr[Ai.identifier]){if($r)break;_i=Ai,$r=ci}if(ci){var Ui=(Ui=Ai[0]-_i[0])*Ui+(Ui=Ai[1]-_i[1])*Ui,Ms=Cr&&Math.sqrt(Ui/Cr);_i=[(_i[0]+Ai[0])/2,(_i[1]+Ai[1])/2],$r=[($r[0]+ci[0])/2,($r[1]+ci[1])/2],vn(Ms*nr)}fe=null,bn(_i,$r),ir(Mr)}function na(){if(o.event.touches.length){for(var _i=o.event.changedTouches,$r=0,Ai=_i.length;$r<Ai;++$r)delete vr[_i[$r].identifier];for(var ci in vr)return void Oi()}o.selectAll(Yr).on(Dr,null),Jr.on(Lt,Jn).on(zt,pr),vi(),gr(Mr)}ua(),Yn(Mr),Jr.on(Lt,null).on(zt,ua)}function wr(){var nr=Qt.of(this,arguments);re?clearTimeout(re):(Ca.call(this),C=Vt(H=Q||o.mouse(this)),Yn(nr)),re=setTimeout(function(){re=null,gr(nr)},50),ee(),vn(Math.pow(2,.002*Fe())*He.k),bn(H,C),ir(nr)}function Or(){var nr=o.mouse(this),hr=Math.log(He.k)/Math.LN2;On(this,nr,Vt(nr),o.event.shiftKey?Math.ceil(hr)-1:Math.floor(hr)+1)}return Be||(Be="onwheel"in p?(Fe=function(){return-o.event.deltaY*(o.event.deltaMode?120:1)},"wheel"):"onmousewheel"in p?(Fe=function(){return o.event.wheelDelta},"mousewheel"):(Fe=function(){return-o.event.detail},"MozMousePixelScroll")),Zt.event=function(nr){nr.each(function(){var hr=Qt.of(this,arguments),Mr=He;Ri?o.select(this).transition().each("start.zoom",function(){He=this.__chart__||{x:0,y:0,k:1},Yn(hr)}).tween("zoom:zoom",function(){var vr=tt[0],Cr=tt[1],Dr=H?H[0]:vr/2,qr=H?H[1]:Cr/2,Hr=o.interpolateZoom([(Dr-He.x)/He.k,(qr-He.y)/He.k,vr/He.k],[(Dr-Mr.x)/Mr.k,(qr-Mr.y)/Mr.k,vr/Mr.k]);return function(Yr){var Jr=Hr(Yr),vi=vr/Jr[2];this.__chart__=He={x:Dr-Jr[0]*vi,y:qr-Jr[1]*vi,k:vi},ir(hr)}}).each("interrupt.zoom",function(){gr(hr)}).each("end.zoom",function(){gr(hr)}):(this.__chart__=He,Yn(hr),ir(hr),gr(hr))})},Zt.translate=function(nr){return arguments.length?(He={x:+nr[0],y:+nr[1],k:He.k},Dn(),Zt):[He.x,He.y]},Zt.scale=function(nr){return arguments.length?(He={x:He.x,y:He.y,k:null},vn(+nr),Dn(),Zt):He.k},Zt.scaleExtent=function(nr){return arguments.length?(ct=nr==null?at:[+nr[0],+nr[1]],Zt):ct},Zt.center=function(nr){return arguments.length?(Q=nr&&[+nr[0],+nr[1]],Zt):Q},Zt.size=function(nr){return arguments.length?(tt=nr&&[+nr[0],+nr[1]],Zt):tt},Zt.duration=function(nr){return arguments.length?(pt=+nr,Zt):pt},Zt.x=function(nr){return arguments.length?(Ce=nr,ye=nr.copy(),He={x:0,y:0,k:1},Zt):Ce},Zt.y=function(nr){return arguments.length?(Ue=nr,De=nr.copy(),He={x:0,y:0,k:1},Zt):Ue},o.rebind(Zt,Qt,"on")};var Fe,Be,at=[0,1/0];function Ze(){}function ht(C,H,Q){return this instanceof ht?(this.h=+C,this.s=+H,void(this.l=+Q)):arguments.length<2?C instanceof ht?new ht(C.h,C.s,C.l):pn(""+C,An,ht):new ht(C,H,Q)}o.color=Ze,Ze.prototype.toString=function(){return this.rgb()+""},o.hsl=ht;var vt=ht.prototype=new Ze;function mt(C,H,Q){var re,fe;function ye(Ce){return Math.round(255*function(De){return De>360?De-=360:De<0&&(De+=360),De<60?re+(fe-re)*De/60:De<180?fe:De<240?re+(fe-re)*(240-De)/60:re}(Ce))}return C=isNaN(C)?0:(C%=360)<0?C+360:C,H=isNaN(H)||H<0?0:H>1?1:H,re=2*(Q=Q<0?0:Q>1?1:Q)-(fe=Q<=.5?Q*(1+H):Q+H-Q*H),new Sn(ye(C+120),ye(C),ye(C-120))}function ft(C,H,Q){return this instanceof ft?(this.h=+C,this.c=+H,void(this.l=+Q)):arguments.length<2?C instanceof ft?new ft(C.h,C.c,C.l):function(re,fe,ye){return re>0?new ft(Math.atan2(ye,fe)*Ne,Math.sqrt(fe*fe+ye*ye),re):new ft(NaN,NaN,re)}(C instanceof xt?C.l:(C=Cn((C=o.rgb(C)).r,C.g,C.b)).l,C.a,C.b):new ft(C,H,Q)}vt.brighter=function(C){return C=Math.pow(.7,arguments.length?C:1),new ht(this.h,this.s,this.l/C)},vt.darker=function(C){return C=Math.pow(.7,arguments.length?C:1),new ht(this.h,this.s,C*this.l)},vt.rgb=function(){return mt(this.h,this.s,this.l)},o.hcl=ft;var Et=ft.prototype=new Ze;function Tt(C,H,Q){return isNaN(C)&&(C=0),isNaN(H)&&(H=0),new xt(Q,Math.cos(C*=Ye)*H,Math.sin(C)*H)}function xt(C,H,Q){return this instanceof xt?(this.l=+C,this.a=+H,void(this.b=+Q)):arguments.length<2?C instanceof xt?new xt(C.l,C.a,C.b):C instanceof ft?Tt(C.h,C.c,C.l):Cn((C=Sn(C)).r,C.g,C.b):new xt(C,H,Q)}Et.brighter=function(C){return new ft(this.h,this.c,Math.min(100,this.l+Ct*(arguments.length?C:1)))},Et.darker=function(C){return new ft(this.h,this.c,Math.max(0,this.l-Ct*(arguments.length?C:1)))},Et.rgb=function(){return Tt(this.h,this.c,this.l).rgb()},o.lab=xt;var Ct=18,Pt=.95047,Bt=1,Kt=1.08883,sn=xt.prototype=new Ze;function Gt(C,H,Q){var re=(C+16)/116,fe=re+H/500,ye=re-Q/200;return new Sn(Ln(3.2404542*(fe=Yt(fe)*Pt)-1.5371385*(re=Yt(re)*Bt)-.4985314*(ye=Yt(ye)*Kt)),Ln(-.969266*fe+1.8760108*re+.041556*ye),Ln(.0556434*fe-.2040259*re+1.0572252*ye))}function Yt(C){return C>.206893034?C*C*C:(C-.13793103448275862)/7.787037}function rn(C){return C>.008856?Math.pow(C,.3333333333333333):7.787037*C+.13793103448275862}function Ln(C){return Math.round(255*(C<=.00304?12.92*C:1.055*Math.pow(C,.4166666666666667)-.055))}function Sn(C,H,Q){return this instanceof Sn?(this.r=~~C,this.g=~~H,void(this.b=~~Q)):arguments.length<2?C instanceof Sn?new Sn(C.r,C.g,C.b):pn(""+C,Sn,mt):new Sn(C,H,Q)}function gn(C){return new Sn(C>>16,C>>8&255,255&C)}function $t(C){return gn(C)+""}sn.brighter=function(C){return new xt(Math.min(100,this.l+Ct*(arguments.length?C:1)),this.a,this.b)},sn.darker=function(C){return new xt(Math.max(0,this.l-Ct*(arguments.length?C:1)),this.a,this.b)},sn.rgb=function(){return Gt(this.l,this.a,this.b)},o.rgb=Sn;var cn=Sn.prototype=new Ze;function an(C){return C<16?"0"+Math.max(0,C).toString(16):Math.min(255,C).toString(16)}function pn(C,H,Q){var re,fe,ye,Ce=0,De=0,Ue=0;if(re=/([a-z]+)\((.*)\)/.exec(C=C.toLowerCase()))switch(fe=re[2].split(","),re[1]){case"hsl":return Q(parseFloat(fe[0]),parseFloat(fe[1])/100,parseFloat(fe[2])/100);case"rgb":return H(Fn(fe[0]),Fn(fe[1]),Fn(fe[2]))}return(ye=In.get(C))?H(ye.r,ye.g,ye.b):(C==null||C.charAt(0)!=="#"||isNaN(ye=parseInt(C.slice(1),16))||(C.length===4?(Ce=(3840&ye)>>4,Ce|=Ce>>4,De=240&ye,De|=De>>4,Ue=15&ye,Ue|=Ue<<4):C.length===7&&(Ce=(16711680&ye)>>16,De=(65280&ye)>>8,Ue=255&ye)),H(Ce,De,Ue))}function An(C,H,Q){var re,fe,ye=Math.min(C/=255,H/=255,Q/=255),Ce=Math.max(C,H,Q),De=Ce-ye,Ue=(Ce+ye)/2;return De?(fe=Ue<.5?De/(Ce+ye):De/(2-Ce-ye),re=C==Ce?(H-Q)/De+(H<Q?6:0):H==Ce?(Q-C)/De+2:(C-H)/De+4,re*=60):(re=NaN,fe=Ue>0&&Ue<1?0:re),new ht(re,fe,Ue)}function Cn(C,H,Q){var re=rn((.4124564*(C=Rn(C))+.3575761*(H=Rn(H))+.1804375*(Q=Rn(Q)))/Pt),fe=rn((.2126729*C+.7151522*H+.072175*Q)/Bt);return xt(116*fe-16,500*(re-fe),200*(fe-rn((.0193339*C+.119192*H+.9503041*Q)/Kt)))}function Rn(C){return(C/=255)<=.04045?C/12.92:Math.pow((C+.055)/1.055,2.4)}function Fn(C){var H=parseFloat(C);return C.charAt(C.length-1)==="%"?Math.round(2.55*H):H}cn.brighter=function(C){C=Math.pow(.7,arguments.length?C:1);var H=this.r,Q=this.g,re=this.b,fe=30;return H||Q||re?(H&&H<fe&&(H=fe),Q&&Q<fe&&(Q=fe),re&&re<fe&&(re=fe),new Sn(Math.min(255,H/C),Math.min(255,Q/C),Math.min(255,re/C))):new Sn(fe,fe,fe)},cn.darker=function(C){return new Sn((C=Math.pow(.7,arguments.length?C:1))*this.r,C*this.g,C*this.b)},cn.hsl=function(){return An(this.r,this.g,this.b)},cn.toString=function(){return"#"+an(this.r)+an(this.g)+an(this.b)};var In=o.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Hn(C){return typeof C=="function"?C:function(){return C}}function Un(C){return function(H,Q,re){return arguments.length===2&&typeof Q=="function"&&(re=Q,Q=null),ar(H,Q,C,re)}}function ar(C,H,Q,re){var fe={},ye=o.dispatch("beforesend","progress","load","error"),Ce={},De=new XMLHttpRequest,Ue=null;function He(){var tt,ct=De.status;if(!ct&&function(pt){var kt=pt.responseType;return kt&&kt!=="text"?pt.response:pt.responseText}(De)||ct>=200&&ct<300||ct===304){try{tt=Q.call(fe,De)}catch(pt){return void ye.error.call(fe,pt)}ye.load.call(fe,tt)}else ye.error.call(fe,De)}return self.XDomainRequest&&!("withCredentials"in De)&&/^(http(s)?:)?\/\//.test(C)&&(De=new XDomainRequest),"onload"in De?De.onload=De.onerror=He:De.onreadystatechange=function(){De.readyState>3&&He()},De.onprogress=function(tt){var ct=o.event;o.event=tt;try{ye.progress.call(fe,De)}finally{o.event=ct}},fe.header=function(tt,ct){return tt=(tt+"").toLowerCase(),arguments.length<2?Ce[tt]:(ct==null?delete Ce[tt]:Ce[tt]=ct+"",fe)},fe.mimeType=function(tt){return arguments.length?(H=tt==null?null:tt+"",fe):H},fe.responseType=function(tt){return arguments.length?(Ue=tt,fe):Ue},fe.response=function(tt){return Q=tt,fe},["get","post"].forEach(function(tt){fe[tt]=function(){return fe.send.apply(fe,[tt].concat(_(arguments)))}}),fe.send=function(tt,ct,pt){if(arguments.length===2&&typeof ct=="function"&&(pt=ct,ct=null),De.open(tt,C,!0),H==null||"accept"in Ce||(Ce.accept=H+",*/*"),De.setRequestHeader)for(var kt in Ce)De.setRequestHeader(kt,Ce[kt]);return H!=null&&De.overrideMimeType&&De.overrideMimeType(H),Ue!=null&&(De.responseType=Ue),pt!=null&&fe.on("error",pt).on("load",function(Lt){pt(null,Lt)}),ye.beforesend.call(fe,De),De.send(ct??null),fe},fe.abort=function(){return De.abort(),fe},o.rebind(fe,ye,"on"),re==null?fe:fe.get(function(tt){return tt.length===1?function(ct,pt){tt(ct==null?pt:null)}:tt}(re))}In.forEach(function(C,H){In.set(C,gn(H))}),o.functor=Hn,o.xhr=Un(R),o.dsv=function(C,H){var Q=new RegExp('["'+C+`
]`),re=C.charCodeAt(0);function fe(He,tt,ct){arguments.length<3&&(ct=tt,tt=null);var pt=ar(He,H,tt==null?ye:Ce(tt),ct);return pt.row=function(kt){return arguments.length?pt.response((tt=kt)==null?ye:Ce(kt)):tt},pt}function ye(He){return fe.parse(He.responseText)}function Ce(He){return function(tt){return fe.parse(tt.responseText,He)}}function De(He){return He.map(Ue).join(C)}function Ue(He){return Q.test(He)?'"'+He.replace(/\"/g,'""')+'"':He}return fe.parse=function(He,tt){var ct;return fe.parseRows(He,function(pt,kt){if(ct)return ct(pt,kt-1);var Lt=function(St){for(var jt={},zt=pt.length,Qt=0;Qt<zt;++Qt)jt[pt[Qt]]=St[Qt];return jt};ct=tt?function(St,jt){return tt(Lt(St),jt)}:Lt})},fe.parseRows=function(He,tt){var ct,pt,kt={},Lt={},St=[],jt=He.length,zt=0,Qt=0;function Zt(){if(zt>=jt)return Lt;if(pt)return pt=!1,kt;var vn=zt;if(He.charCodeAt(vn)===34){for(var bn=vn;bn++<jt;)if(He.charCodeAt(bn)===34){if(He.charCodeAt(bn+1)!==34)break;++bn}return zt=bn+2,(On=He.charCodeAt(bn+1))===13?(pt=!0,He.charCodeAt(bn+2)===10&&++zt):On===10&&(pt=!0),He.slice(vn+1,bn).replace(/""/g,'"')}for(;zt<jt;){var On,Dn=1;if((On=He.charCodeAt(zt++))===10)pt=!0;else if(On===13)pt=!0,He.charCodeAt(zt)===10&&(++zt,++Dn);else if(On!==re)continue;return He.slice(vn,zt-Dn)}return He.slice(vn)}for(;(ct=Zt())!==Lt;){for(var Vt=[];ct!==kt&&ct!==Lt;)Vt.push(ct),ct=Zt();tt&&(Vt=tt(Vt,Qt++))==null||St.push(Vt)}return St},fe.format=function(He){if(Array.isArray(He[0]))return fe.formatRows(He);var tt=new U,ct=[];return He.forEach(function(pt){for(var kt in pt)tt.has(kt)||ct.push(tt.add(kt))}),[ct.map(Ue).join(C)].concat(He.map(function(pt){return ct.map(function(kt){return Ue(pt[kt])}).join(C)})).join(`
`)},fe.formatRows=function(He){return He.map(De).join(`
`)},fe},o.csv=o.dsv(",","text/csv"),o.tsv=o.dsv("	","text/tab-separated-values");var ur,cr,er,Tr,Ht=this[Z(this,"requestAnimationFrame")]||function(C){setTimeout(C,17)};function on(C,H,Q){var re=arguments.length;re<2&&(H=0),re<3&&(Q=Date.now());var fe={c:C,t:Q+H,n:null};return cr?cr.n=fe:ur=fe,cr=fe,er||(Tr=clearTimeout(Tr),er=1,Ht(wn)),fe}function wn(){var C=mn(),H=Pn()-C;H>24?(isFinite(H)&&(clearTimeout(Tr),Tr=setTimeout(wn,H)),er=0):(er=1,Ht(wn))}function mn(){for(var C=Date.now(),H=ur;H;)C>=H.t&&H.c(C-H.t)&&(H.c=null),H=H.n;return C}function Pn(){for(var C,H=ur,Q=1/0;H;)H.c?(H.t<Q&&(Q=H.t),H=(C=H).n):H=C?C.n=H.n:ur=H.n;return cr=C,Q}function Wn(C){return C[0]}function Bn(C){return C[1]}function jn(C){for(var H,Q,re,fe=C.length,ye=[0,1],Ce=2,De=2;De<fe;De++){for(;Ce>1&&(H=C[ye[Ce-2]],Q=C[ye[Ce-1]],re=C[De],(Q[0]-H[0])*(re[1]-H[1])-(Q[1]-H[1])*(re[0]-H[0])<=0);)--Ce;ye[Ce++]=De}return ye.slice(0,Ce)}function rr(C,H){return C[0]-H[0]||C[1]-H[1]}o.timer=function(){on.apply(this,arguments)},o.timer.flush=function(){mn(),Pn()},o.round=function(C,H){return H?Math.round(C*(H=Math.pow(10,H)))/H:Math.round(C)},o.geom={},o.geom.hull=function(C){var H=Wn,Q=Bn;if(arguments.length)return re(C);function re(fe){if(fe.length<3)return[];var ye,Ce=Hn(H),De=Hn(Q),Ue=fe.length,He=[],tt=[];for(ye=0;ye<Ue;ye++)He.push([+Ce.call(this,fe[ye],ye),+De.call(this,fe[ye],ye),ye]);for(He.sort(rr),ye=0;ye<Ue;ye++)tt.push([He[ye][0],-He[ye][1]]);var ct=jn(He),pt=jn(tt),kt=pt[0]===ct[0],Lt=pt[pt.length-1]===ct[ct.length-1],St=[];for(ye=ct.length-1;ye>=0;--ye)St.push(fe[He[ct[ye]][2]]);for(ye=+kt;ye<pt.length-Lt;++ye)St.push(fe[He[pt[ye]][2]]);return St}return re.x=function(fe){return arguments.length?(H=fe,re):H},re.y=function(fe){return arguments.length?(Q=fe,re):Q},re},o.geom.polygon=function(C){return te(C,Xt),C};var Xt=o.geom.polygon.prototype=[];function yn(C,H,Q){return(Q[0]-H[0])*(C[1]-H[1])<(Q[1]-H[1])*(C[0]-H[0])}function Ot(C,H,Q,re){var fe=C[0],ye=Q[0],Ce=H[0]-fe,De=re[0]-ye,Ue=C[1],He=Q[1],tt=H[1]-Ue,ct=re[1]-He,pt=(De*(Ue-He)-ct*(fe-ye))/(ct*Ce-De*tt);return[fe+pt*Ce,Ue+pt*tt]}function Jt(C){var H=C[0],Q=C[C.length-1];return!(H[0]-Q[0]||H[1]-Q[1])}Xt.area=function(){for(var C,H=-1,Q=this.length,re=this[Q-1],fe=0;++H<Q;)C=re,re=this[H],fe+=C[1]*re[0]-C[0]*re[1];return .5*fe},Xt.centroid=function(C){var H,Q,re=-1,fe=this.length,ye=0,Ce=0,De=this[fe-1];for(arguments.length||(C=-1/(6*this.area()));++re<fe;)H=De,De=this[re],Q=H[0]*De[1]-De[0]*H[1],ye+=(H[0]+De[0])*Q,Ce+=(H[1]+De[1])*Q;return[ye*C,Ce*C]},Xt.clip=function(C){for(var H,Q,re,fe,ye,Ce,De=Jt(C),Ue=-1,He=this.length-Jt(this),tt=this[He-1];++Ue<He;){for(H=C.slice(),C.length=0,fe=this[Ue],ye=H[(re=H.length-De)-1],Q=-1;++Q<re;)yn(Ce=H[Q],tt,fe)?(yn(ye,tt,fe)||C.push(Ot(ye,Ce,tt,fe)),C.push(Ce)):yn(ye,tt,fe)&&C.push(Ot(ye,Ce,tt,fe)),ye=Ce;De&&C.push(C[0]),tt=fe}return C};var nn,_n,xn,kn,hn,en=[],tn=[];function un(){fi(this),this.edge=this.site=this.circle=null}function dn(C){var H=en.pop()||new un;return H.site=C,H}function En(C){mr(C),xn.remove(C),en.push(C),fi(C)}function zn(C){var H=C.circle,Q=H.x,re=H.cy,fe={x:Q,y:re},ye=C.P,Ce=C.N,De=[C];En(C);for(var Ue=ye;Ue.circle&&m(Q-Ue.circle.x)<nt&&m(re-Ue.circle.cy)<nt;)ye=Ue.P,De.unshift(Ue),En(Ue),Ue=ye;De.unshift(Ue),mr(Ue);for(var He=Ce;He.circle&&m(Q-He.circle.x)<nt&&m(re-He.circle.cy)<nt;)Ce=He.N,De.push(He),En(He),He=Ce;De.push(He),mr(He);var tt,ct=De.length;for(tt=1;tt<ct;++tt)He=De[tt],Ue=De[tt-1],xr(He.edge,Ue.site,He.site,fe);Ue=De[0],(He=De[ct-1]).edge=sr(Ue.site,He.site,null,fe),Qn(Ue),Qn(He)}function qn(C){for(var H,Q,re,fe,ye=C.x,Ce=C.y,De=xn._;De;)if((re=Gn(De,Ce)-ye)>nt)De=De.L;else{if(!((fe=ye-$n(De,Ce))>nt)){re>-nt?(H=De.P,Q=De):fe>-nt?(H=De,Q=De.N):H=Q=De;break}if(!De.R){H=De;break}De=De.R}var Ue=dn(C);if(xn.insert(H,Ue),H||Q){if(H===Q)return mr(H),Q=dn(H.site),xn.insert(Ue,Q),Ue.edge=Q.edge=sr(H.site,Ue.site),Qn(H),void Qn(Q);if(Q){mr(H),mr(Q);var He=H.site,tt=He.x,ct=He.y,pt=C.x-tt,kt=C.y-ct,Lt=Q.site,St=Lt.x-tt,jt=Lt.y-ct,zt=2*(pt*jt-kt*St),Qt=pt*pt+kt*kt,Zt=St*St+jt*jt,Vt={x:(jt*Qt-kt*Zt)/zt+tt,y:(pt*Zt-St*Qt)/zt+ct};xr(Q.edge,He,Lt,Vt),Ue.edge=sr(He,C,null,Vt),Q.edge=sr(C,Lt,null,Vt),Qn(H),Qn(Q)}else Ue.edge=sr(H.site,Ue.site)}}function Gn(C,H){var Q=C.site,re=Q.x,fe=Q.y,ye=fe-H;if(!ye)return re;var Ce=C.P;if(!Ce)return-1/0;var De=(Q=Ce.site).x,Ue=Q.y,He=Ue-H;if(!He)return De;var tt=De-re,ct=1/ye-1/He,pt=tt/He;return ct?(-pt+Math.sqrt(pt*pt-2*ct*(tt*tt/(-2*He)-Ue+He/2+fe-ye/2)))/ct+re:(re+De)/2}function $n(C,H){var Q=C.N;if(Q)return Gn(Q,H);var re=C.site;return re.y===H?re.x:1/0}function Xn(C){this.site=C,this.edges=[]}function or(C,H){return H.angle-C.angle}function tr(){fi(this),this.x=this.y=this.arc=this.site=this.cy=null}function Qn(C){var H=C.P,Q=C.N;if(H&&Q){var re=H.site,fe=C.site,ye=Q.site;if(re!==ye){var Ce=fe.x,De=fe.y,Ue=re.x-Ce,He=re.y-De,tt=ye.x-Ce,ct=2*(Ue*(jt=ye.y-De)-He*tt);if(!(ct>=-At)){var pt=Ue*Ue+He*He,kt=tt*tt+jt*jt,Lt=(jt*pt-He*kt)/ct,St=(Ue*kt-tt*pt)/ct,jt=St+De,zt=tn.pop()||new tr;zt.arc=C,zt.site=fe,zt.x=Lt+Ce,zt.y=jt+Math.sqrt(Lt*Lt+St*St),zt.cy=jt,C.circle=zt;for(var Qt=null,Zt=hn._;Zt;)if(zt.y<Zt.y||zt.y===Zt.y&&zt.x<=Zt.x){if(!Zt.L){Qt=Zt.P;break}Zt=Zt.L}else{if(!Zt.R){Qt=Zt;break}Zt=Zt.R}hn.insert(Qt,zt),Qt||(kn=zt)}}}}function mr(C){var H=C.circle;H&&(H.P||(kn=H.N),hn.remove(H),tn.push(H),fi(H),C.circle=null)}function fr(C,H){var Q=C.b;if(Q)return!0;var re,fe,ye=C.a,Ce=H[0][0],De=H[1][0],Ue=H[0][1],He=H[1][1],tt=C.l,ct=C.r,pt=tt.x,kt=tt.y,Lt=ct.x,St=ct.y,jt=(pt+Lt)/2,zt=(kt+St)/2;if(St===kt){if(jt<Ce||jt>=De)return;if(pt>Lt){if(ye){if(ye.y>=He)return}else ye={x:jt,y:Ue};Q={x:jt,y:He}}else{if(ye){if(ye.y<Ue)return}else ye={x:jt,y:He};Q={x:jt,y:Ue}}}else if(fe=zt-(re=(pt-Lt)/(St-kt))*jt,re<-1||re>1)if(pt>Lt){if(ye){if(ye.y>=He)return}else ye={x:(Ue-fe)/re,y:Ue};Q={x:(He-fe)/re,y:He}}else{if(ye){if(ye.y<Ue)return}else ye={x:(He-fe)/re,y:He};Q={x:(Ue-fe)/re,y:Ue}}else if(kt<St){if(ye){if(ye.x>=De)return}else ye={x:Ce,y:re*Ce+fe};Q={x:De,y:re*De+fe}}else{if(ye){if(ye.x<Ce)return}else ye={x:De,y:re*De+fe};Q={x:Ce,y:re*Ce+fe}}return C.a=ye,C.b=Q,!0}function dr(C,H){this.l=C,this.r=H,this.a=this.b=null}function sr(C,H,Q,re){var fe=new dr(C,H);return nn.push(fe),Q&&xr(fe,C,H,Q),re&&xr(fe,H,C,re),_n[C.i].edges.push(new Er(fe,C,H)),_n[H.i].edges.push(new Er(fe,H,C)),fe}function xr(C,H,Q,re){C.a||C.b?C.l===Q?C.b=re:C.a=re:(C.a=re,C.l=H,C.r=Q)}function Er(C,H,Q){var re=C.a,fe=C.b;this.edge=C,this.site=H,this.angle=Q?Math.atan2(Q.y-H.y,Q.x-H.x):C.l===H?Math.atan2(fe.x-re.x,re.y-fe.y):Math.atan2(re.x-fe.x,fe.y-re.y)}function jr(){this._=null}function fi(C){C.U=C.C=C.L=C.R=C.P=C.N=null}function pi(C,H){var Q=H,re=H.R,fe=Q.U;fe?fe.L===Q?fe.L=re:fe.R=re:C._=re,re.U=fe,Q.U=re,Q.R=re.L,Q.R&&(Q.R.U=Q),re.L=Q}function Ni(C,H){var Q=H,re=H.L,fe=Q.U;fe?fe.L===Q?fe.L=re:fe.R=re:C._=re,re.U=fe,Q.U=re,Q.L=re.R,Q.L&&(Q.L.U=Q),re.R=Q}function li(C){for(;C.L;)C=C.L;return C}function Pi(C,H){var Q,re,fe,ye=C.sort(pa).pop();for(nn=[],_n=new Array(C.length),xn=new jr,hn=new jr;;)if(fe=kn,ye&&(!fe||ye.y<fe.y||ye.y===fe.y&&ye.x<fe.x))ye.x===Q&&ye.y===re||(_n[ye.i]=new Xn(ye),qn(ye),Q=ye.x,re=ye.y),ye=C.pop();else{if(!fe)break;zn(fe.arc)}H&&(function(De){for(var Ue,He,tt,ct,pt,kt=nn,Lt=(He=De[0][0],tt=De[0][1],ct=De[1][0],pt=De[1][1],function(jt){var zt,Qt=jt.a,Zt=jt.b,Vt=Qt.x,vn=Qt.y,bn=0,On=1,Dn=Zt.x-Vt,Yn=Zt.y-vn;if(zt=He-Vt,Dn||!(zt>0)){if(zt/=Dn,Dn<0){if(zt<bn)return;zt<On&&(On=zt)}else if(Dn>0){if(zt>On)return;zt>bn&&(bn=zt)}if(zt=ct-Vt,Dn||!(zt<0)){if(zt/=Dn,Dn<0){if(zt>On)return;zt>bn&&(bn=zt)}else if(Dn>0){if(zt<bn)return;zt<On&&(On=zt)}if(zt=tt-vn,Yn||!(zt>0)){if(zt/=Yn,Yn<0){if(zt<bn)return;zt<On&&(On=zt)}else if(Yn>0){if(zt>On)return;zt>bn&&(bn=zt)}if(zt=pt-vn,Yn||!(zt<0)){if(zt/=Yn,Yn<0){if(zt>On)return;zt>bn&&(bn=zt)}else if(Yn>0){if(zt<bn)return;zt<On&&(On=zt)}return bn>0&&(jt.a={x:Vt+bn*Dn,y:vn+bn*Yn}),On<1&&(jt.b={x:Vt+On*Dn,y:vn+On*Yn}),jt}}}}}),St=kt.length;St--;)(!fr(Ue=kt[St],De)||!Lt(Ue)||m(Ue.a.x-Ue.b.x)<nt&&m(Ue.a.y-Ue.b.y)<nt)&&(Ue.a=Ue.b=null,kt.splice(St,1))}(H),function(De){for(var Ue,He,tt,ct,pt,kt,Lt,St,jt,zt,Qt=De[0][0],Zt=De[1][0],Vt=De[0][1],vn=De[1][1],bn=_n,On=bn.length;On--;)if((pt=bn[On])&&pt.prepare())for(St=(Lt=pt.edges).length,kt=0;kt<St;)tt=(zt=Lt[kt].end()).x,ct=zt.y,Ue=(jt=Lt[++kt%St].start()).x,He=jt.y,(m(tt-Ue)>nt||m(ct-He)>nt)&&(Lt.splice(kt,0,new Er((Dn=pt.site,Yn=zt,ir=m(tt-Qt)<nt&&vn-ct>nt?{x:Qt,y:m(Ue-Qt)<nt?He:vn}:m(ct-vn)<nt&&Zt-tt>nt?{x:m(He-vn)<nt?Ue:Zt,y:vn}:m(tt-Zt)<nt&&ct-Vt>nt?{x:Zt,y:m(Ue-Zt)<nt?He:Vt}:m(ct-Vt)<nt&&tt-Qt>nt?{x:m(He-Vt)<nt?Ue:Qt,y:Vt}:null,gr=void 0,(gr=new dr(Dn,null)).a=Yn,gr.b=ir,nn.push(gr),gr),pt.site,null)),++St);var Dn,Yn,ir,gr}(H));var Ce={cells:_n,edges:nn};return xn=hn=nn=_n=null,Ce}function pa(C,H){return H.y-C.y||H.x-C.x}Xn.prototype.prepare=function(){for(var C,H=this.edges,Q=H.length;Q--;)(C=H[Q].edge).b&&C.a||H.splice(Q,1);return H.sort(or),H.length},Er.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},jr.prototype={insert:function(C,H){var Q,re,fe;if(C){if(H.P=C,H.N=C.N,C.N&&(C.N.P=H),C.N=H,C.R){for(C=C.R;C.L;)C=C.L;C.L=H}else C.R=H;Q=C}else this._?(C=li(this._),H.P=null,H.N=C,C.P=C.L=H,Q=C):(H.P=H.N=null,this._=H,Q=null);for(H.L=H.R=null,H.U=Q,H.C=!0,C=H;Q&&Q.C;)Q===(re=Q.U).L?(fe=re.R)&&fe.C?(Q.C=fe.C=!1,re.C=!0,C=re):(C===Q.R&&(pi(this,Q),Q=(C=Q).U),Q.C=!1,re.C=!0,Ni(this,re)):(fe=re.L)&&fe.C?(Q.C=fe.C=!1,re.C=!0,C=re):(C===Q.L&&(Ni(this,Q),Q=(C=Q).U),Q.C=!1,re.C=!0,pi(this,re)),Q=C.U;this._.C=!1},remove:function(C){C.N&&(C.N.P=C.P),C.P&&(C.P.N=C.N),C.N=C.P=null;var H,Q,re,fe=C.U,ye=C.L,Ce=C.R;if(Q=ye?Ce?li(Ce):ye:Ce,fe?fe.L===C?fe.L=Q:fe.R=Q:this._=Q,ye&&Ce?(re=Q.C,Q.C=C.C,Q.L=ye,ye.U=Q,Q!==Ce?(fe=Q.U,Q.U=C.U,C=Q.R,fe.L=C,Q.R=Ce,Ce.U=Q):(Q.U=fe,fe=Q,C=Q.R)):(re=C.C,C=Q),C&&(C.U=fe),!re)if(C&&C.C)C.C=!1;else{do{if(C===this._)break;if(C===fe.L){if((H=fe.R).C&&(H.C=!1,fe.C=!0,pi(this,fe),H=fe.R),H.L&&H.L.C||H.R&&H.R.C){H.R&&H.R.C||(H.L.C=!1,H.C=!0,Ni(this,H),H=fe.R),H.C=fe.C,fe.C=H.R.C=!1,pi(this,fe),C=this._;break}}else if((H=fe.L).C&&(H.C=!1,fe.C=!0,Ni(this,fe),H=fe.L),H.L&&H.L.C||H.R&&H.R.C){H.L&&H.L.C||(H.R.C=!1,H.C=!0,pi(this,H),H=fe.L),H.C=fe.C,fe.C=H.L.C=!1,Ni(this,fe),C=this._;break}H.C=!0,C=fe,fe=fe.U}while(!C.C);C&&(C.C=!1)}}},o.geom.voronoi=function(C){var H=Wn,Q=Bn,re=H,fe=Q,ye=da;if(C)return Ce(C);function Ce(Ue){var He=new Array(Ue.length),tt=ye[0][0],ct=ye[0][1],pt=ye[1][0],kt=ye[1][1];return Pi(De(Ue),ye).cells.forEach(function(Lt,St){var jt=Lt.edges,zt=Lt.site;(He[St]=jt.length?jt.map(function(Qt){var Zt=Qt.start();return[Zt.x,Zt.y]}):zt.x>=tt&&zt.x<=pt&&zt.y>=ct&&zt.y<=kt?[[tt,kt],[pt,kt],[pt,ct],[tt,ct]]:[]).point=Ue[St]}),He}function De(Ue){return Ue.map(function(He,tt){return{x:Math.round(re(He,tt)/nt)*nt,y:Math.round(fe(He,tt)/nt)*nt,i:tt}})}return Ce.links=function(Ue){return Pi(De(Ue)).edges.filter(function(He){return He.l&&He.r}).map(function(He){return{source:Ue[He.l.i],target:Ue[He.r.i]}})},Ce.triangles=function(Ue){var He=[];return Pi(De(Ue)).cells.forEach(function(tt,ct){for(var pt,kt,Lt,St,jt=tt.site,zt=tt.edges.sort(or),Qt=-1,Zt=zt.length,Vt=zt[Zt-1].edge,vn=Vt.l===jt?Vt.r:Vt.l;++Qt<Zt;)pt=vn,vn=(Vt=zt[Qt].edge).l===jt?Vt.r:Vt.l,ct<pt.i&&ct<vn.i&&(Lt=pt,St=vn,((kt=jt).x-St.x)*(Lt.y-kt.y)-(kt.x-Lt.x)*(St.y-kt.y)<0)&&He.push([Ue[ct],Ue[pt.i],Ue[vn.i]])}),He},Ce.x=function(Ue){return arguments.length?(re=Hn(H=Ue),Ce):H},Ce.y=function(Ue){return arguments.length?(fe=Hn(Q=Ue),Ce):Q},Ce.clipExtent=function(Ue){return arguments.length?(ye=Ue??da,Ce):ye===da?null:ye},Ce.size=function(Ue){return arguments.length?Ce.clipExtent(Ue&&[[0,0],Ue]):ye===da?null:ye&&ye[1]},Ce};var da=[[-1e6,-1e6],[1e6,1e6]];function Xo(C){return C.x}function Vl(C){return C.y}function Ps(C,H,Q,re,fe,ye){if(!C(H,Q,re,fe,ye)){var Ce=.5*(Q+fe),De=.5*(re+ye),Ue=H.nodes;Ue[0]&&Ps(C,Ue[0],Q,re,Ce,De),Ue[1]&&Ps(C,Ue[1],Ce,re,fe,De),Ue[2]&&Ps(C,Ue[2],Q,De,Ce,ye),Ue[3]&&Ps(C,Ue[3],Ce,De,fe,ye)}}function Os(C,H){C=o.rgb(C),H=o.rgb(H);var Q=C.r,re=C.g,fe=C.b,ye=H.r-Q,Ce=H.g-re,De=H.b-fe;return function(Ue){return"#"+an(Math.round(Q+ye*Ue))+an(Math.round(re+Ce*Ue))+an(Math.round(fe+De*Ue))}}function Js(C,H){var Q,re={},fe={};for(Q in C)Q in H?re[Q]=vo(C[Q],H[Q]):fe[Q]=C[Q];for(Q in H)Q in C||(fe[Q]=H[Q]);return function(ye){for(Q in re)fe[Q]=re[Q](ye);return fe}}function qa(C,H){return C=+C,H=+H,function(Q){return C*(1-Q)+H*Q}}function Ks(C,H){var Q,re,fe,ye=$s.lastIndex=Qs.lastIndex=0,Ce=-1,De=[],Ue=[];for(C+="",H+="";(Q=$s.exec(C))&&(re=Qs.exec(H));)(fe=re.index)>ye&&(fe=H.slice(ye,fe),De[Ce]?De[Ce]+=fe:De[++Ce]=fe),(Q=Q[0])===(re=re[0])?De[Ce]?De[Ce]+=re:De[++Ce]=re:(De[++Ce]=null,Ue.push({i:Ce,x:qa(Q,re)})),ye=Qs.lastIndex;return ye<H.length&&(fe=H.slice(ye),De[Ce]?De[Ce]+=fe:De[++Ce]=fe),De.length<2?Ue[0]?(H=Ue[0].x,function(He){return H(He)+""}):function(){return H}:(H=Ue.length,function(He){for(var tt,ct=0;ct<H;++ct)De[(tt=Ue[ct]).i]=tt.x(He);return De.join("")})}o.geom.delaunay=function(C){return o.geom.voronoi().triangles(C)},o.geom.quadtree=function(C,H,Q,re,fe){var ye,Ce=Wn,De=Bn;if(ye=arguments.length)return Ce=Xo,De=Vl,ye===3&&(fe=Q,re=H,Q=H=0),Ue(C);function Ue(He){var tt,ct,pt,kt,Lt,St,jt,zt,Qt,Zt=Hn(Ce),Vt=Hn(De);if(H!=null)St=H,jt=Q,zt=re,Qt=fe;else if(zt=Qt=-(St=jt=1/0),ct=[],pt=[],Lt=He.length,ye)for(kt=0;kt<Lt;++kt)(tt=He[kt]).x<St&&(St=tt.x),tt.y<jt&&(jt=tt.y),tt.x>zt&&(zt=tt.x),tt.y>Qt&&(Qt=tt.y),ct.push(tt.x),pt.push(tt.y);else for(kt=0;kt<Lt;++kt){var vn=+Zt(tt=He[kt],kt),bn=+Vt(tt,kt);vn<St&&(St=vn),bn<jt&&(jt=bn),vn>zt&&(zt=vn),bn>Qt&&(Qt=bn),ct.push(vn),pt.push(bn)}var On=zt-St,Dn=Qt-jt;function Yn(Jn,pr,wr,Or,nr,hr,Mr,vr){if(!isNaN(wr)&&!isNaN(Or))if(Jn.leaf){var Cr=Jn.x,Dr=Jn.y;if(Cr!=null)if(m(Cr-wr)+m(Dr-Or)<.01)ir(Jn,pr,wr,Or,nr,hr,Mr,vr);else{var qr=Jn.point;Jn.x=Jn.y=Jn.point=null,ir(Jn,qr,Cr,Dr,nr,hr,Mr,vr),ir(Jn,pr,wr,Or,nr,hr,Mr,vr)}else Jn.x=wr,Jn.y=Or,Jn.point=pr}else ir(Jn,pr,wr,Or,nr,hr,Mr,vr)}function ir(Jn,pr,wr,Or,nr,hr,Mr,vr){var Cr=.5*(nr+Mr),Dr=.5*(hr+vr),qr=wr>=Cr,Hr=Or>=Dr,Yr=Hr<<1|qr;Jn.leaf=!1,qr?nr=Cr:Mr=Cr,Hr?hr=Dr:vr=Dr,Yn(Jn=Jn.nodes[Yr]||(Jn.nodes[Yr]={leaf:!0,nodes:[],point:null,x:null,y:null}),pr,wr,Or,nr,hr,Mr,vr)}On>Dn?Qt=jt+On:zt=St+Dn;var gr={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(Jn){Yn(gr,Jn,+Zt(Jn,++kt),+Vt(Jn,kt),St,jt,zt,Qt)}};if(gr.visit=function(Jn){Ps(Jn,gr,St,jt,zt,Qt)},gr.find=function(Jn){return function(pr,wr,Or,nr,hr,Mr,vr){var Cr,Dr=1/0;return function qr(Hr,Yr,Jr,vi,Oi){if(!(Yr>Mr||Jr>vr||vi<nr||Oi<hr)){if(ua=Hr.point){var ua,Wi=wr-Hr.x,na=Or-Hr.y,_i=Wi*Wi+na*na;if(_i<Dr){var $r=Math.sqrt(Dr=_i);nr=wr-$r,hr=Or-$r,Mr=wr+$r,vr=Or+$r,Cr=ua}}for(var Ai=Hr.nodes,ci=.5*(Yr+vi),ti=.5*(Jr+Oi),Mi=(Or>=ti)<<1|wr>=ci,Ii=Mi+4;Mi<Ii;++Mi)if(Hr=Ai[3&Mi])switch(3&Mi){case 0:qr(Hr,Yr,Jr,ci,ti);break;case 1:qr(Hr,ci,Jr,vi,ti);break;case 2:qr(Hr,Yr,ti,ci,Oi);break;case 3:qr(Hr,ci,ti,vi,Oi)}}}(pr,nr,hr,Mr,vr),Cr}(gr,Jn[0],Jn[1],St,jt,zt,Qt)},kt=-1,H==null){for(;++kt<Lt;)Yn(gr,He[kt],ct[kt],pt[kt],St,jt,zt,Qt);--kt}else He.forEach(gr.add);return ct=pt=He=tt=null,gr}return Ue.x=function(He){return arguments.length?(Ce=He,Ue):Ce},Ue.y=function(He){return arguments.length?(De=He,Ue):De},Ue.extent=function(He){return arguments.length?(He==null?H=Q=re=fe=null:(H=+He[0][0],Q=+He[0][1],re=+He[1][0],fe=+He[1][1]),Ue):H==null?null:[[H,Q],[re,fe]]},Ue.size=function(He){return arguments.length?(He==null?H=Q=re=fe=null:(H=Q=0,re=+He[0],fe=+He[1]),Ue):H==null?null:[re-H,fe-Q]},Ue},o.interpolateRgb=Os,o.interpolateObject=Js,o.interpolateNumber=qa,o.interpolateString=Ks;var $s=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qs=new RegExp($s.source,"g");function vo(C,H){for(var Q,re=o.interpolators.length;--re>=0&&!(Q=o.interpolators[re](C,H)););return Q}function Co(C,H){var Q,re=[],fe=[],ye=C.length,Ce=H.length,De=Math.min(C.length,H.length);for(Q=0;Q<De;++Q)re.push(vo(C[Q],H[Q]));for(;Q<ye;++Q)fe[Q]=C[Q];for(;Q<Ce;++Q)fe[Q]=H[Q];return function(Ue){for(Q=0;Q<De;++Q)fe[Q]=re[Q](Ue);return fe}}o.interpolate=vo,o.interpolators=[function(C,H){var Q=typeof H;return(Q==="string"?In.has(H.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(H)?Os:Ks:H instanceof Ze?Os:Array.isArray(H)?Co:Q==="object"&&isNaN(H)?Js:qa)(C,H)}],o.interpolateArray=Co;var Jo=function(){return R},xi=o.map({linear:Jo,poly:function(C){return function(H){return Math.pow(H,C)}},quad:function(){return Ha},cubic:function(){return Po},sin:function(){return Oo},exp:function(){return yo},circle:function(){return Io},elastic:function(C,H){var Q;return arguments.length<2&&(H=.45),arguments.length?Q=H/Ft*Math.asin(1/C):(C=1,Q=H/4),function(re){return 1+C*Math.pow(2,-10*re)*Math.sin((re-Q)*Ft/H)}},back:function(C){return C||(C=1.70158),function(H){return H*H*((C+1)*H-C)}},bounce:function(){return ao}}),qi=o.map({in:R,out:mo,"in-out":ro,"out-in":function(C){return ro(mo(C))}});function mo(C){return function(H){return 1-C(1-H)}}function ro(C){return function(H){return .5*(H<.5?C(2*H):2-C(2-2*H))}}function Ha(C){return C*C}function Po(C){return C*C*C}function io(C){if(C<=0)return 0;if(C>=1)return 1;var H=C*C,Q=H*C;return 4*(C<.5?Q:3*(C-H)+Q-.75)}function Oo(C){return 1-Math.cos(C*Ge)}function yo(C){return Math.pow(2,10*(C-1))}function Io(C){return 1-Math.sqrt(1-C*C)}function ao(C){return C<.36363636363636365?7.5625*C*C:C<.7272727272727273?7.5625*(C-=.5454545454545454)*C+.75:C<.9090909090909091?7.5625*(C-=.8181818181818182)*C+.9375:7.5625*(C-=.9545454545454546)*C+.984375}function hl(C,H){return H-=C,function(Q){return Math.round(C+H*Q)}}function el(C){var H,Q,re,fe=[C.a,C.b],ye=[C.c,C.d],Ce=Tl(fe),De=Ko(fe,ye),Ue=Tl(((H=ye)[0]+=(re=-De)*(Q=fe)[0],H[1]+=re*Q[1],H))||0;fe[0]*ye[1]<ye[0]*fe[1]&&(fe[0]*=-1,fe[1]*=-1,Ce*=-1,De*=-1),this.rotate=(Ce?Math.atan2(fe[1],fe[0]):Math.atan2(-ye[0],ye[1]))*Ne,this.translate=[C.e,C.f],this.scale=[Ce,Ue],this.skew=Ue?Math.atan2(De,Ue)*Ne:0}function Ko(C,H){return C[0]*H[0]+C[1]*H[1]}function Tl(C){var H=Math.sqrt(Ko(C,C));return H&&(C[0]/=H,C[1]/=H),H}o.ease=function(C){var H,Q=C.indexOf("-"),re=Q>=0?C.slice(0,Q):C,fe=Q>=0?C.slice(Q+1):"in";return re=xi.get(re)||Jo,fe=qi.get(fe)||R,H=fe(re.apply(null,w.call(arguments,1))),function(ye){return ye<=0?0:ye>=1?1:H(ye)}},o.interpolateHcl=function(C,H){C=o.hcl(C),H=o.hcl(H);var Q=C.h,re=C.c,fe=C.l,ye=H.h-Q,Ce=H.c-re,De=H.l-fe;return isNaN(Ce)&&(Ce=0,re=isNaN(re)?H.c:re),isNaN(ye)?(ye=0,Q=isNaN(Q)?H.h:Q):ye>180?ye-=360:ye<-180&&(ye+=360),function(Ue){return Tt(Q+ye*Ue,re+Ce*Ue,fe+De*Ue)+""}},o.interpolateHsl=function(C,H){C=o.hsl(C),H=o.hsl(H);var Q=C.h,re=C.s,fe=C.l,ye=H.h-Q,Ce=H.s-re,De=H.l-fe;return isNaN(Ce)&&(Ce=0,re=isNaN(re)?H.s:re),isNaN(ye)?(ye=0,Q=isNaN(Q)?H.h:Q):ye>180?ye-=360:ye<-180&&(ye+=360),function(Ue){return mt(Q+ye*Ue,re+Ce*Ue,fe+De*Ue)+""}},o.interpolateLab=function(C,H){C=o.lab(C),H=o.lab(H);var Q=C.l,re=C.a,fe=C.b,ye=H.l-Q,Ce=H.a-re,De=H.b-fe;return function(Ue){return Gt(Q+ye*Ue,re+Ce*Ue,fe+De*Ue)+""}},o.interpolateRound=hl,o.transform=function(C){var H=p.createElementNS(o.ns.prefix.svg,"g");return(o.transform=function(Q){if(Q!=null){H.setAttribute("transform",Q);var re=H.transform.baseVal.consolidate()}return new el(re?re.matrix:kl)})(C)},el.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var kl={a:1,b:0,c:0,d:1,e:0,f:0};function $o(C){return C.length?C.pop()+",":""}function Al(C,H){var Q=[],re=[];return C=o.transform(C),H=o.transform(H),function(fe,ye,Ce,De){if(fe[0]!==ye[0]||fe[1]!==ye[1]){var Ue=Ce.push("translate(",null,",",null,")");De.push({i:Ue-4,x:qa(fe[0],ye[0])},{i:Ue-2,x:qa(fe[1],ye[1])})}else(ye[0]||ye[1])&&Ce.push("translate("+ye+")")}(C.translate,H.translate,Q,re),function(fe,ye,Ce,De){fe!==ye?(fe-ye>180?ye+=360:ye-fe>180&&(fe+=360),De.push({i:Ce.push($o(Ce)+"rotate(",null,")")-2,x:qa(fe,ye)})):ye&&Ce.push($o(Ce)+"rotate("+ye+")")}(C.rotate,H.rotate,Q,re),function(fe,ye,Ce,De){fe!==ye?De.push({i:Ce.push($o(Ce)+"skewX(",null,")")-2,x:qa(fe,ye)}):ye&&Ce.push($o(Ce)+"skewX("+ye+")")}(C.skew,H.skew,Q,re),function(fe,ye,Ce,De){if(fe[0]!==ye[0]||fe[1]!==ye[1]){var Ue=Ce.push($o(Ce)+"scale(",null,",",null,")");De.push({i:Ue-4,x:qa(fe[0],ye[0])},{i:Ue-2,x:qa(fe[1],ye[1])})}else ye[0]===1&&ye[1]===1||Ce.push($o(Ce)+"scale("+ye+")")}(C.scale,H.scale,Q,re),C=H=null,function(fe){for(var ye,Ce=-1,De=re.length;++Ce<De;)Q[(ye=re[Ce]).i]=ye.x(fe);return Q.join("")}}function ql(C,H){return H=(H-=C=+C)||1/H,function(Q){return(Q-C)/H}}function Hl(C,H){return H=(H-=C=+C)||1/H,function(Q){return Math.max(0,Math.min(1,(Q-C)/H))}}function Qo(C){for(var H=C.source,Q=C.target,re=function(Ce,De){if(Ce===De)return Ce;for(var Ue=oo(Ce),He=oo(De),tt=Ue.pop(),ct=He.pop(),pt=null;tt===ct;)pt=tt,tt=Ue.pop(),ct=He.pop();return pt}(H,Q),fe=[H];H!==re;)H=H.parent,fe.push(H);for(var ye=fe.length;Q!==re;)fe.splice(ye,0,Q),Q=Q.parent;return fe}function oo(C){for(var H=[],Q=C.parent;Q!=null;)H.push(C),C=Q,Q=Q.parent;return H.push(C),H}function ds(C){C.fixed|=2}function es(C){C.fixed&=-7}function Is(C){C.fixed|=4,C.px=C.x,C.py=C.y}function ts(C){C.fixed&=-5}function Ga(C,H,Q){var re=0,fe=0;if(C.charge=0,!C.leaf)for(var ye,Ce=C.nodes,De=Ce.length,Ue=-1;++Ue<De;)(ye=Ce[Ue])!=null&&(Ga(ye,H,Q),C.charge+=ye.charge,re+=ye.charge*ye.cx,fe+=ye.charge*ye.cy);if(C.point){C.leaf||(C.point.x+=Math.random()-.5,C.point.y+=Math.random()-.5);var He=H*Q[C.point.index];C.charge+=C.pointCharge=He,re+=He*C.point.x,fe+=He*C.point.y}C.cx=re/C.charge,C.cy=fe/C.charge}o.interpolateTransform=Al,o.layout={},o.layout.bundle=function(){return function(C){for(var H=[],Q=-1,re=C.length;++Q<re;)H.push(Qo(C[Q]));return H}},o.layout.chord=function(){var C,H,Q,re,fe,ye,Ce,De={},Ue=0;function He(){var ct,pt,kt,Lt,St,jt={},zt=[],Qt=o.range(re),Zt=[];for(C=[],H=[],ct=0,Lt=-1;++Lt<re;){for(pt=0,St=-1;++St<re;)pt+=Q[Lt][St];zt.push(pt),Zt.push(o.range(re)),ct+=pt}for(fe&&Qt.sort(function(gr,Jn){return fe(zt[gr],zt[Jn])}),ye&&Zt.forEach(function(gr,Jn){gr.sort(function(pr,wr){return ye(Q[Jn][pr],Q[Jn][wr])})}),ct=(Ft-Ue*re)/ct,pt=0,Lt=-1;++Lt<re;){for(kt=pt,St=-1;++St<re;){var Vt=Qt[Lt],vn=Zt[Vt][St],bn=Q[Vt][vn],On=pt,Dn=pt+=bn*ct;jt[Vt+"-"+vn]={index:Vt,subindex:vn,startAngle:On,endAngle:Dn,value:bn}}H[Vt]={index:Vt,startAngle:kt,endAngle:pt,value:zt[Vt]},pt+=Ue}for(Lt=-1;++Lt<re;)for(St=Lt-1;++St<re;){var Yn=jt[Lt+"-"+St],ir=jt[St+"-"+Lt];(Yn.value||ir.value)&&C.push(Yn.value<ir.value?{source:ir,target:Yn}:{source:Yn,target:ir})}Ce&&tt()}function tt(){C.sort(function(ct,pt){return Ce((ct.source.value+ct.target.value)/2,(pt.source.value+pt.target.value)/2)})}return De.matrix=function(ct){return arguments.length?(re=(Q=ct)&&Q.length,C=H=null,De):Q},De.padding=function(ct){return arguments.length?(Ue=ct,C=H=null,De):Ue},De.sortGroups=function(ct){return arguments.length?(fe=ct,C=H=null,De):fe},De.sortSubgroups=function(ct){return arguments.length?(ye=ct,C=null,De):ye},De.sortChords=function(ct){return arguments.length?(Ce=ct,C&&tt(),De):Ce},De.chords=function(){return C||He(),C},De.groups=function(){return H||He(),H},De},o.layout.force=function(){var C,H,Q,re,fe,ye,Ce={},De=o.dispatch("start","tick","end"),Ue=[1,1],He=.9,tt=pl,ct=zo,pt=-30,kt=xo,Lt=.1,St=.64,jt=[],zt=[];function Qt(Vt){return function(vn,bn,On,Dn){if(vn.point!==Vt){var Yn=vn.cx-Vt.x,ir=vn.cy-Vt.y,gr=Dn-bn,Jn=Yn*Yn+ir*ir;if(gr*gr/St<Jn){if(Jn<kt){var pr=vn.charge/Jn;Vt.px-=Yn*pr,Vt.py-=ir*pr}return!0}vn.point&&Jn&&Jn<kt&&(pr=vn.pointCharge/Jn,Vt.px-=Yn*pr,Vt.py-=ir*pr)}return!vn.charge}}function Zt(Vt){Vt.px=o.event.x,Vt.py=o.event.y,Ce.resume()}return Ce.tick=function(){if((Q*=.99)<.005)return C=null,De.end({type:"end",alpha:Q=0}),!0;var Vt,vn,bn,On,Dn,Yn,ir,gr,Jn,pr=jt.length,wr=zt.length;for(vn=0;vn<wr;++vn)On=(bn=zt[vn]).source,(Yn=(gr=(Dn=bn.target).x-On.x)*gr+(Jn=Dn.y-On.y)*Jn)&&(gr*=Yn=Q*fe[vn]*((Yn=Math.sqrt(Yn))-re[vn])/Yn,Jn*=Yn,Dn.x-=gr*(ir=On.weight+Dn.weight?On.weight/(On.weight+Dn.weight):.5),Dn.y-=Jn*ir,On.x+=gr*(ir=1-ir),On.y+=Jn*ir);if((ir=Q*Lt)&&(gr=Ue[0]/2,Jn=Ue[1]/2,vn=-1,ir))for(;++vn<pr;)(bn=jt[vn]).x+=(gr-bn.x)*ir,bn.y+=(Jn-bn.y)*ir;if(pt)for(Ga(Vt=o.geom.quadtree(jt),Q,ye),vn=-1;++vn<pr;)(bn=jt[vn]).fixed||Vt.visit(Qt(bn));for(vn=-1;++vn<pr;)(bn=jt[vn]).fixed?(bn.x=bn.px,bn.y=bn.py):(bn.x-=(bn.px-(bn.px=bn.x))*He,bn.y-=(bn.py-(bn.py=bn.y))*He);De.tick({type:"tick",alpha:Q})},Ce.nodes=function(Vt){return arguments.length?(jt=Vt,Ce):jt},Ce.links=function(Vt){return arguments.length?(zt=Vt,Ce):zt},Ce.size=function(Vt){return arguments.length?(Ue=Vt,Ce):Ue},Ce.linkDistance=function(Vt){return arguments.length?(tt=typeof Vt=="function"?Vt:+Vt,Ce):tt},Ce.distance=Ce.linkDistance,Ce.linkStrength=function(Vt){return arguments.length?(ct=typeof Vt=="function"?Vt:+Vt,Ce):ct},Ce.friction=function(Vt){return arguments.length?(He=+Vt,Ce):He},Ce.charge=function(Vt){return arguments.length?(pt=typeof Vt=="function"?Vt:+Vt,Ce):pt},Ce.chargeDistance=function(Vt){return arguments.length?(kt=Vt*Vt,Ce):Math.sqrt(kt)},Ce.gravity=function(Vt){return arguments.length?(Lt=+Vt,Ce):Lt},Ce.theta=function(Vt){return arguments.length?(St=Vt*Vt,Ce):Math.sqrt(St)},Ce.alpha=function(Vt){return arguments.length?(Vt=+Vt,Q?Vt>0?Q=Vt:(C.c=null,C.t=NaN,C=null,De.end({type:"end",alpha:Q=0})):Vt>0&&(De.start({type:"start",alpha:Q=Vt}),C=on(Ce.tick)),Ce):Q},Ce.start=function(){var Vt,vn,bn,On=jt.length,Dn=zt.length,Yn=Ue[0],ir=Ue[1];for(Vt=0;Vt<On;++Vt)(bn=jt[Vt]).index=Vt,bn.weight=0;for(Vt=0;Vt<Dn;++Vt)typeof(bn=zt[Vt]).source=="number"&&(bn.source=jt[bn.source]),typeof bn.target=="number"&&(bn.target=jt[bn.target]),++bn.source.weight,++bn.target.weight;for(Vt=0;Vt<On;++Vt)bn=jt[Vt],isNaN(bn.x)&&(bn.x=gr("x",Yn)),isNaN(bn.y)&&(bn.y=gr("y",ir)),isNaN(bn.px)&&(bn.px=bn.x),isNaN(bn.py)&&(bn.py=bn.y);if(re=[],typeof tt=="function")for(Vt=0;Vt<Dn;++Vt)re[Vt]=+tt.call(this,zt[Vt],Vt);else for(Vt=0;Vt<Dn;++Vt)re[Vt]=tt;if(fe=[],typeof ct=="function")for(Vt=0;Vt<Dn;++Vt)fe[Vt]=+ct.call(this,zt[Vt],Vt);else for(Vt=0;Vt<Dn;++Vt)fe[Vt]=ct;if(ye=[],typeof pt=="function")for(Vt=0;Vt<On;++Vt)ye[Vt]=+pt.call(this,jt[Vt],Vt);else for(Vt=0;Vt<On;++Vt)ye[Vt]=pt;function gr(Jn,pr){if(!vn){for(vn=new Array(On),hr=0;hr<On;++hr)vn[hr]=[];for(hr=0;hr<Dn;++hr){var wr=zt[hr];vn[wr.source.index].push(wr.target),vn[wr.target.index].push(wr.source)}}for(var Or,nr=vn[Vt],hr=-1,Mr=nr.length;++hr<Mr;)if(!isNaN(Or=nr[hr][Jn]))return Or;return Math.random()*pr}return Ce.resume()},Ce.resume=function(){return Ce.alpha(.1)},Ce.stop=function(){return Ce.alpha(0)},Ce.drag=function(){if(H||(H=o.behavior.drag().origin(R).on("dragstart.force",ds).on("drag.force",Zt).on("dragend.force",es)),!arguments.length)return H;this.on("mouseover.force",Is).on("mouseout.force",ts).call(H)},o.rebind(Ce,De,"on")};var pl=20,zo=1,xo=1/0;function bo(C,H){return o.rebind(C,H,"sort","children","value"),C.nodes=C,C.links=vs,C}function Do(C,H){for(var Q=[C];(C=Q.pop())!=null;)if(H(C),(fe=C.children)&&(re=fe.length))for(var re,fe;--re>=0;)Q.push(fe[re])}function Zr(C,H){for(var Q=[C],re=[];(C=Q.pop())!=null;)if(re.push(C),(ye=C.children)&&(fe=ye.length))for(var fe,ye,Ce=-1;++Ce<fe;)Q.push(ye[Ce]);for(;(C=re.pop())!=null;)H(C)}function gs(C){return C.children}function Gl(C){return C.value}function tl(C,H){return H.value-C.value}function vs(C){return o.merge(C.map(function(H){return(H.children||[]).map(function(Q){return{source:H,target:Q}})}))}o.layout.hierarchy=function(){var C=tl,H=gs,Q=Gl;function re(fe){var ye,Ce=[fe],De=[];for(fe.depth=0;(ye=Ce.pop())!=null;)if(De.push(ye),(He=H.call(re,ye,ye.depth))&&(Ue=He.length)){for(var Ue,He,tt;--Ue>=0;)Ce.push(tt=He[Ue]),tt.parent=ye,tt.depth=ye.depth+1;Q&&(ye.value=0),ye.children=He}else Q&&(ye.value=+Q.call(re,ye,ye.depth)||0),delete ye.children;return Zr(fe,function(ct){var pt,kt;C&&(pt=ct.children)&&pt.sort(C),Q&&(kt=ct.parent)&&(kt.value+=ct.value)}),De}return re.sort=function(fe){return arguments.length?(C=fe,re):C},re.children=function(fe){return arguments.length?(H=fe,re):H},re.value=function(fe){return arguments.length?(Q=fe,re):Q},re.revalue=function(fe){return Q&&(Do(fe,function(ye){ye.children&&(ye.value=0)}),Zr(fe,function(ye){var Ce;ye.children||(ye.value=+Q.call(re,ye,ye.depth)||0),(Ce=ye.parent)&&(Ce.value+=ye.value)})),fe},re},o.layout.partition=function(){var C=o.layout.hierarchy(),H=[1,1];function Q(ye,Ce,De,Ue){var He=ye.children;if(ye.x=Ce,ye.y=ye.depth*Ue,ye.dx=De,ye.dy=Ue,He&&(tt=He.length)){var tt,ct,pt,kt=-1;for(De=ye.value?De/ye.value:0;++kt<tt;)Q(ct=He[kt],Ce,pt=ct.value*De,Ue),Ce+=pt}}function re(ye){var Ce=ye.children,De=0;if(Ce&&(Ue=Ce.length))for(var Ue,He=-1;++He<Ue;)De=Math.max(De,re(Ce[He]));return 1+De}function fe(ye,Ce){var De=C.call(this,ye,Ce);return Q(De[0],0,H[0],H[1]/re(De[0])),De}return fe.size=function(ye){return arguments.length?(H=ye,fe):H},bo(fe,C)},o.layout.pie=function(){var C=Number,H=Ml,Q=0,re=Ft,fe=0;function ye(Ce){var De,Ue=Ce.length,He=Ce.map(function(Qt,Zt){return+C.call(ye,Qt,Zt)}),tt=+(typeof Q=="function"?Q.apply(this,arguments):Q),ct=(typeof re=="function"?re.apply(this,arguments):re)-tt,pt=Math.min(Math.abs(ct)/Ue,+(typeof fe=="function"?fe.apply(this,arguments):fe)),kt=pt*(ct<0?-1:1),Lt=o.sum(He),St=Lt?(ct-Ue*kt)/Lt:0,jt=o.range(Ue),zt=[];return H!=null&&jt.sort(H===Ml?function(Qt,Zt){return He[Zt]-He[Qt]}:function(Qt,Zt){return H(Ce[Qt],Ce[Zt])}),jt.forEach(function(Qt){zt[Qt]={data:Ce[Qt],value:De=He[Qt],startAngle:tt,endAngle:tt+=De*St+kt,padAngle:pt}}),zt}return ye.value=function(Ce){return arguments.length?(C=Ce,ye):C},ye.sort=function(Ce){return arguments.length?(H=Ce,ye):H},ye.startAngle=function(Ce){return arguments.length?(Q=Ce,ye):Q},ye.endAngle=function(Ce){return arguments.length?(re=Ce,ye):re},ye.padAngle=function(Ce){return arguments.length?(fe=Ce,ye):fe},ye};var Ml={};function Wl(C){return C.x}function nl(C){return C.y}function Yl(C,H,Q){C.y0=H,C.y=Q}o.layout.stack=function(){var C=R,H=_o,Q=Wa,re=Yl,fe=Wl,ye=nl;function Ce(De,Ue){if(!(pt=De.length))return De;var He=De.map(function(Qt,Zt){return C.call(Ce,Qt,Zt)}),tt=He.map(function(Qt){return Qt.map(function(Zt,Vt){return[fe.call(Ce,Zt,Vt),ye.call(Ce,Zt,Vt)]})}),ct=H.call(Ce,tt,Ue);He=o.permute(He,ct),tt=o.permute(tt,ct);var pt,kt,Lt,St,jt=Q.call(Ce,tt,Ue),zt=He[0].length;for(Lt=0;Lt<zt;++Lt)for(re.call(Ce,He[0][Lt],St=jt[Lt],tt[0][Lt][1]),kt=1;kt<pt;++kt)re.call(Ce,He[kt][Lt],St+=tt[kt-1][Lt][1],tt[kt][Lt][1]);return De}return Ce.values=function(De){return arguments.length?(C=De,Ce):C},Ce.order=function(De){return arguments.length?(H=typeof De=="function"?De:Ro.get(De)||_o,Ce):H},Ce.offset=function(De){return arguments.length?(Q=typeof De=="function"?De:ns.get(De)||Wa,Ce):Q},Ce.x=function(De){return arguments.length?(fe=De,Ce):fe},Ce.y=function(De){return arguments.length?(ye=De,Ce):ye},Ce.out=function(De){return arguments.length?(re=De,Ce):re},Ce};var Ro=o.map({"inside-out":function(C){var H,Q,re=C.length,fe=C.map(ms),ye=C.map(Sl),Ce=o.range(re).sort(function(ct,pt){return fe[ct]-fe[pt]}),De=0,Ue=0,He=[],tt=[];for(H=0;H<re;++H)Q=Ce[H],De<Ue?(De+=ye[Q],He.push(Q)):(Ue+=ye[Q],tt.push(Q));return tt.reverse().concat(He)},reverse:function(C){return o.range(C.length).reverse()},default:_o}),ns=o.map({silhouette:function(C){var H,Q,re,fe=C.length,ye=C[0].length,Ce=[],De=0,Ue=[];for(Q=0;Q<ye;++Q){for(H=0,re=0;H<fe;H++)re+=C[H][Q][1];re>De&&(De=re),Ce.push(re)}for(Q=0;Q<ye;++Q)Ue[Q]=(De-Ce[Q])/2;return Ue},wiggle:function(C){var H,Q,re,fe,ye,Ce,De,Ue,He,tt=C.length,ct=C[0],pt=ct.length,kt=[];for(kt[0]=Ue=He=0,Q=1;Q<pt;++Q){for(H=0,fe=0;H<tt;++H)fe+=C[H][Q][1];for(H=0,ye=0,De=ct[Q][0]-ct[Q-1][0];H<tt;++H){for(re=0,Ce=(C[H][Q][1]-C[H][Q-1][1])/(2*De);re<H;++re)Ce+=(C[re][Q][1]-C[re][Q-1][1])/De;ye+=Ce*C[H][Q][1]}kt[Q]=Ue-=fe?ye/fe*De:0,Ue<He&&(He=Ue)}for(Q=0;Q<pt;++Q)kt[Q]-=He;return kt},expand:function(C){var H,Q,re,fe=C.length,ye=C[0].length,Ce=1/fe,De=[];for(Q=0;Q<ye;++Q){for(H=0,re=0;H<fe;H++)re+=C[H][Q][1];if(re)for(H=0;H<fe;H++)C[H][Q][1]/=re;else for(H=0;H<fe;H++)C[H][Q][1]=Ce}for(Q=0;Q<ye;++Q)De[Q]=0;return De},zero:Wa});function _o(C){return o.range(C.length)}function Wa(C){for(var H=-1,Q=C[0].length,re=[];++H<Q;)re[H]=0;return re}function ms(C){for(var H,Q=1,re=0,fe=C[0][1],ye=C.length;Q<ye;++Q)(H=C[Q][1])>fe&&(re=Q,fe=H);return re}function Sl(C){return C.reduce(zs,0)}function zs(C,H){return C+H[1]}function rl(C,H){return Ea(C,Math.ceil(Math.log(H.length)/Math.LN2+1))}function Ea(C,H){for(var Q=-1,re=+C[0],fe=(C[1]-re)/H,ye=[];++Q<=H;)ye[Q]=fe*Q+re;return ye}function il(C){return[o.min(C),o.max(C)]}function El(C,H){return C.value-H.value}function ys(C,H){var Q=C._pack_next;C._pack_next=H,H._pack_prev=C,H._pack_next=Q,Q._pack_prev=H}function rs(C,H){C._pack_next=H,H._pack_prev=C}function xs(C,H){var Q=H.x-C.x,re=H.y-C.y,fe=C.r+H.r;return .999*fe*fe>Q*Q+re*re}function is(C){if((H=C.children)&&(Ue=H.length)){var H,Q,re,fe,ye,Ce,De,Ue,He=1/0,tt=-1/0,ct=1/0,pt=-1/0;if(H.forEach(as),(Q=H[0]).x=-Q.r,Q.y=0,Zt(Q),Ue>1&&((re=H[1]).x=re.r,re.y=0,Zt(re),Ue>2))for(ai(Q,re,fe=H[2]),Zt(fe),ys(Q,fe),Q._pack_prev=fe,ys(fe,re),re=Q._pack_next,ye=3;ye<Ue;ye++){ai(Q,re,fe=H[ye]);var kt=0,Lt=1,St=1;for(Ce=re._pack_next;Ce!==re;Ce=Ce._pack_next,Lt++)if(xs(Ce,fe)){kt=1;break}if(kt==1)for(De=Q._pack_prev;De!==Ce._pack_prev&&!xs(De,fe);De=De._pack_prev,St++);kt?(Lt<St||Lt==St&&re.r<Q.r?rs(Q,re=Ce):rs(Q=De,re),ye--):(ys(Q,fe),re=fe,Zt(fe))}var jt=(He+tt)/2,zt=(ct+pt)/2,Qt=0;for(ye=0;ye<Ue;ye++)(fe=H[ye]).x-=jt,fe.y-=zt,Qt=Math.max(Qt,fe.r+Math.sqrt(fe.x*fe.x+fe.y*fe.y));C.r=Qt,H.forEach(Ds)}function Zt(Vt){He=Math.min(Vt.x-Vt.r,He),tt=Math.max(Vt.x+Vt.r,tt),ct=Math.min(Vt.y-Vt.r,ct),pt=Math.max(Vt.y+Vt.r,pt)}}function as(C){C._pack_next=C._pack_prev=C}function Ds(C){delete C._pack_next,delete C._pack_prev}function al(C,H,Q,re){var fe=C.children;if(C.x=H+=re*C.x,C.y=Q+=re*C.y,C.r*=re,fe)for(var ye=-1,Ce=fe.length;++ye<Ce;)al(fe[ye],H,Q,re)}function ai(C,H,Q){var re=C.r+Q.r,fe=H.x-C.x,ye=H.y-C.y;if(re&&(fe||ye)){var Ce=H.r+Q.r,De=fe*fe+ye*ye,Ue=.5+((re*=re)-(Ce*=Ce))/(2*De),He=Math.sqrt(Math.max(0,2*Ce*(re+De)-(re-=De)*re-Ce*Ce))/(2*De);Q.x=C.x+Ue*fe+He*ye,Q.y=C.y+Ue*ye-He*fe}else Q.x=C.x+re,Q.y=C.y}function Fo(C,H){return C.parent==H.parent?1:2}function ta(C){var H=C.children;return H.length?H[0]:C.t}function Ya(C){var H,Q=C.children;return(H=Q.length)?Q[H-1]:C.t}function Qr(C,H,Q){var re=Q/(H.i-C.i);H.c-=re,H.s+=Q,C.c+=re,H.z+=Q,H.m+=Q}function ii(C,H,Q){return C.a.parent===H.parent?C.a:Q}function La(C){var H=C.children;return H&&H.length?La(H[0]):C}function bs(C){var H,Q=C.children;return Q&&(H=Q.length)?bs(Q[H-1]):C}function Rs(C){return{x:C.x,y:C.y,dx:C.dx,dy:C.dy}}function ol(C,H){var Q=C.x+H[3],re=C.y+H[0],fe=C.dx-H[1]-H[3],ye=C.dy-H[0]-H[2];return fe<0&&(Q+=fe/2,fe=0),ye<0&&(re+=ye/2,ye=0),{x:Q,y:re,dx:fe,dy:ye}}function Fs(C){var H=C[0],Q=C[C.length-1];return H<Q?[H,Q]:[Q,H]}function Bs(C){return C.rangeExtent?C.rangeExtent():Fs(C.range())}function Da(C,H,Q,re){var fe=Q(C[0],C[1]),ye=re(H[0],H[1]);return function(Ce){return ye(fe(Ce))}}function Bo(C,H){var Q,re=0,fe=C.length-1,ye=C[re],Ce=C[fe];return Ce<ye&&(Q=re,re=fe,fe=Q,Q=ye,ye=Ce,Ce=Q),C[re]=H.floor(ye),C[fe]=H.ceil(Ce),C}function No(C){return C?{floor:function(H){return Math.floor(H/C)*C},ceil:function(H){return Math.ceil(H/C)*C}}:sa}o.layout.histogram=function(){var C=!0,H=Number,Q=il,re=rl;function fe(ye,Ce){for(var De,Ue,He=[],tt=ye.map(H,this),ct=Q.call(this,tt,Ce),pt=re.call(this,ct,tt,Ce),kt=(Ce=-1,tt.length),Lt=pt.length-1,St=C?1:1/kt;++Ce<Lt;)(De=He[Ce]=[]).dx=pt[Ce+1]-(De.x=pt[Ce]),De.y=0;if(Lt>0)for(Ce=-1;++Ce<kt;)(Ue=tt[Ce])>=ct[0]&&Ue<=ct[1]&&((De=He[o.bisect(pt,Ue,1,Lt)-1]).y+=St,De.push(ye[Ce]));return He}return fe.value=function(ye){return arguments.length?(H=ye,fe):H},fe.range=function(ye){return arguments.length?(Q=Hn(ye),fe):Q},fe.bins=function(ye){return arguments.length?(re=typeof ye=="number"?function(Ce){return Ea(Ce,ye)}:Hn(ye),fe):re},fe.frequency=function(ye){return arguments.length?(C=!!ye,fe):C},fe},o.layout.pack=function(){var C,H=o.layout.hierarchy().sort(El),Q=0,re=[1,1];function fe(ye,Ce){var De=H.call(this,ye,Ce),Ue=De[0],He=re[0],tt=re[1],ct=C==null?Math.sqrt:typeof C=="function"?C:function(){return C};if(Ue.x=Ue.y=0,Zr(Ue,function(kt){kt.r=+ct(kt.value)}),Zr(Ue,is),Q){var pt=Q*(C?1:Math.max(2*Ue.r/He,2*Ue.r/tt))/2;Zr(Ue,function(kt){kt.r+=pt}),Zr(Ue,is),Zr(Ue,function(kt){kt.r-=pt})}return al(Ue,He/2,tt/2,C?1:1/Math.max(2*Ue.r/He,2*Ue.r/tt)),De}return fe.size=function(ye){return arguments.length?(re=ye,fe):re},fe.radius=function(ye){return arguments.length?(C=ye==null||typeof ye=="function"?ye:+ye,fe):C},fe.padding=function(ye){return arguments.length?(Q=+ye,fe):Q},bo(fe,H)},o.layout.tree=function(){var C=o.layout.hierarchy().sort(null).value(null),H=Fo,Q=[1,1],re=null;function fe(Ue,He){var tt=C.call(this,Ue,He),ct=tt[0],pt=function(Zt){for(var Vt,vn={A:null,children:[Zt]},bn=[vn];(Vt=bn.pop())!=null;)for(var On,Dn=Vt.children,Yn=0,ir=Dn.length;Yn<ir;++Yn)bn.push((Dn[Yn]=On={_:Dn[Yn],parent:Vt,children:(On=Dn[Yn].children)&&On.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Yn}).a=On);return vn.children[0]}(ct);if(Zr(pt,ye),pt.parent.m=-pt.z,Do(pt,Ce),re)Do(ct,De);else{var kt=ct,Lt=ct,St=ct;Do(ct,function(Zt){Zt.x<kt.x&&(kt=Zt),Zt.x>Lt.x&&(Lt=Zt),Zt.depth>St.depth&&(St=Zt)});var jt=H(kt,Lt)/2-kt.x,zt=Q[0]/(Lt.x+H(Lt,kt)/2+jt),Qt=Q[1]/(St.depth||1);Do(ct,function(Zt){Zt.x=(Zt.x+jt)*zt,Zt.y=Zt.depth*Qt})}return tt}function ye(Ue){var He=Ue.children,tt=Ue.parent.children,ct=Ue.i?tt[Ue.i-1]:null;if(He.length){(function(kt){for(var Lt,St=0,jt=0,zt=kt.children,Qt=zt.length;--Qt>=0;)(Lt=zt[Qt]).z+=St,Lt.m+=St,St+=Lt.s+(jt+=Lt.c)})(Ue);var pt=(He[0].z+He[He.length-1].z)/2;ct?(Ue.z=ct.z+H(Ue._,ct._),Ue.m=Ue.z-pt):Ue.z=pt}else ct&&(Ue.z=ct.z+H(Ue._,ct._));Ue.parent.A=function(kt,Lt,St){if(Lt){for(var jt,zt=kt,Qt=kt,Zt=Lt,Vt=zt.parent.children[0],vn=zt.m,bn=Qt.m,On=Zt.m,Dn=Vt.m;Zt=Ya(Zt),zt=ta(zt),Zt&&zt;)Vt=ta(Vt),(Qt=Ya(Qt)).a=kt,(jt=Zt.z+On-zt.z-vn+H(Zt._,zt._))>0&&(Qr(ii(Zt,kt,St),kt,jt),vn+=jt,bn+=jt),On+=Zt.m,vn+=zt.m,Dn+=Vt.m,bn+=Qt.m;Zt&&!Ya(Qt)&&(Qt.t=Zt,Qt.m+=On-bn),zt&&!ta(Vt)&&(Vt.t=zt,Vt.m+=vn-Dn,St=kt)}return St}(Ue,ct,Ue.parent.A||tt[0])}function Ce(Ue){Ue._.x=Ue.z+Ue.parent.m,Ue.m+=Ue.parent.m}function De(Ue){Ue.x*=Q[0],Ue.y=Ue.depth*Q[1]}return fe.separation=function(Ue){return arguments.length?(H=Ue,fe):H},fe.size=function(Ue){return arguments.length?(re=(Q=Ue)==null?De:null,fe):re?null:Q},fe.nodeSize=function(Ue){return arguments.length?(re=(Q=Ue)==null?null:De,fe):re?Q:null},bo(fe,C)},o.layout.cluster=function(){var C=o.layout.hierarchy().sort(null).value(null),H=Fo,Q=[1,1],re=!1;function fe(ye,Ce){var De,Ue=C.call(this,ye,Ce),He=Ue[0],tt=0;Zr(He,function(St){var jt=St.children;jt&&jt.length?(St.x=function(zt){return zt.reduce(function(Qt,Zt){return Qt+Zt.x},0)/zt.length}(jt),St.y=function(zt){return 1+o.max(zt,function(Qt){return Qt.y})}(jt)):(St.x=De?tt+=H(St,De):0,St.y=0,De=St)});var ct=La(He),pt=bs(He),kt=ct.x-H(ct,pt)/2,Lt=pt.x+H(pt,ct)/2;return Zr(He,re?function(St){St.x=(St.x-He.x)*Q[0],St.y=(He.y-St.y)*Q[1]}:function(St){St.x=(St.x-kt)/(Lt-kt)*Q[0],St.y=(1-(He.y?St.y/He.y:1))*Q[1]}),Ue}return fe.separation=function(ye){return arguments.length?(H=ye,fe):H},fe.size=function(ye){return arguments.length?(re=(Q=ye)==null,fe):re?null:Q},fe.nodeSize=function(ye){return arguments.length?(re=(Q=ye)!=null,fe):re?Q:null},bo(fe,C)},o.layout.treemap=function(){var C,H=o.layout.hierarchy(),Q=Math.round,re=[1,1],fe=null,ye=Rs,Ce=!1,De="squarify",Ue=.5*(1+Math.sqrt(5));function He(St,jt){for(var zt,Qt,Zt=-1,Vt=St.length;++Zt<Vt;)Qt=(zt=St[Zt]).value*(jt<0?0:jt),zt.area=isNaN(Qt)||Qt<=0?0:Qt}function tt(St){var jt=St.children;if(jt&&jt.length){var zt,Qt,Zt,Vt=ye(St),vn=[],bn=jt.slice(),On=1/0,Dn=De==="slice"?Vt.dx:De==="dice"?Vt.dy:De==="slice-dice"?1&St.depth?Vt.dy:Vt.dx:Math.min(Vt.dx,Vt.dy);for(He(bn,Vt.dx*Vt.dy/St.value),vn.area=0;(Zt=bn.length)>0;)vn.push(zt=bn[Zt-1]),vn.area+=zt.area,De!=="squarify"||(Qt=pt(vn,Dn))<=On?(bn.pop(),On=Qt):(vn.area-=vn.pop().area,kt(vn,Dn,Vt,!1),Dn=Math.min(Vt.dx,Vt.dy),vn.length=vn.area=0,On=1/0);vn.length&&(kt(vn,Dn,Vt,!0),vn.length=vn.area=0),jt.forEach(tt)}}function ct(St){var jt=St.children;if(jt&&jt.length){var zt,Qt=ye(St),Zt=jt.slice(),Vt=[];for(He(Zt,Qt.dx*Qt.dy/St.value),Vt.area=0;zt=Zt.pop();)Vt.push(zt),Vt.area+=zt.area,zt.z!=null&&(kt(Vt,zt.z?Qt.dx:Qt.dy,Qt,!Zt.length),Vt.length=Vt.area=0);jt.forEach(ct)}}function pt(St,jt){for(var zt,Qt=St.area,Zt=0,Vt=1/0,vn=-1,bn=St.length;++vn<bn;)(zt=St[vn].area)&&(zt<Vt&&(Vt=zt),zt>Zt&&(Zt=zt));return jt*=jt,(Qt*=Qt)?Math.max(jt*Zt*Ue/Qt,Qt/(jt*Vt*Ue)):1/0}function kt(St,jt,zt,Qt){var Zt,Vt=-1,vn=St.length,bn=zt.x,On=zt.y,Dn=jt?Q(St.area/jt):0;if(jt==zt.dx){for((Qt||Dn>zt.dy)&&(Dn=zt.dy);++Vt<vn;)(Zt=St[Vt]).x=bn,Zt.y=On,Zt.dy=Dn,bn+=Zt.dx=Math.min(zt.x+zt.dx-bn,Dn?Q(Zt.area/Dn):0);Zt.z=!0,Zt.dx+=zt.x+zt.dx-bn,zt.y+=Dn,zt.dy-=Dn}else{for((Qt||Dn>zt.dx)&&(Dn=zt.dx);++Vt<vn;)(Zt=St[Vt]).x=bn,Zt.y=On,Zt.dx=Dn,On+=Zt.dy=Math.min(zt.y+zt.dy-On,Dn?Q(Zt.area/Dn):0);Zt.z=!1,Zt.dy+=zt.y+zt.dy-On,zt.x+=Dn,zt.dx-=Dn}}function Lt(St){var jt=C||H(St),zt=jt[0];return zt.x=zt.y=0,zt.value?(zt.dx=re[0],zt.dy=re[1]):zt.dx=zt.dy=0,C&&H.revalue(zt),He([zt],zt.dx*zt.dy/zt.value),(C?ct:tt)(zt),Ce&&(C=jt),jt}return Lt.size=function(St){return arguments.length?(re=St,Lt):re},Lt.padding=function(St){if(!arguments.length)return fe;function jt(Qt){return ol(Qt,St)}var zt;return ye=(fe=St)==null?Rs:(zt=typeof St)=="function"?function(Qt){var Zt=St.call(Lt,Qt,Qt.depth);return Zt==null?Rs(Qt):ol(Qt,typeof Zt=="number"?[Zt,Zt,Zt,Zt]:Zt)}:(zt==="number"&&(St=[St,St,St,St]),jt),Lt},Lt.round=function(St){return arguments.length?(Q=St?Math.round:Number,Lt):Q!=Number},Lt.sticky=function(St){return arguments.length?(Ce=St,C=null,Lt):Ce},Lt.ratio=function(St){return arguments.length?(Ue=St,Lt):Ue},Lt.mode=function(St){return arguments.length?(De=St+"",Lt):De},bo(Lt,H)},o.random={normal:function(C,H){var Q=arguments.length;return Q<2&&(H=1),Q<1&&(C=0),function(){var re,fe,ye;do ye=(re=2*Math.random()-1)*re+(fe=2*Math.random()-1)*fe;while(!ye||ye>1);return C+H*re*Math.sqrt(-2*Math.log(ye)/ye)}},logNormal:function(){var C=o.random.normal.apply(o,arguments);return function(){return Math.exp(C())}},bates:function(C){var H=o.random.irwinHall(C);return function(){return H()/C}},irwinHall:function(C){return function(){for(var H=0,Q=0;Q<C;Q++)H+=Math.random();return H}}},o.scale={};var sa={floor:R,ceil:R};function Ns(C,H,Q,re){var fe=[],ye=[],Ce=0,De=Math.min(C.length,H.length)-1;for(C[De]<C[0]&&(C=C.slice().reverse(),H=H.slice().reverse());++Ce<=De;)fe.push(Q(C[Ce-1],C[Ce])),ye.push(re(H[Ce-1],H[Ce]));return function(Ue){var He=o.bisect(C,Ue,1,De)-1;return ye[He](fe[He](Ue))}}function Ra(C,H,Q,re){var fe,ye;function Ce(){var Ue=Math.min(C.length,H.length)>2?Ns:Da,He=re?Hl:ql;return fe=Ue(C,H,He,Q),ye=Ue(H,C,He,vo),De}function De(Ue){return fe(Ue)}return De.invert=function(Ue){return ye(Ue)},De.domain=function(Ue){return arguments.length?(C=Ue.map(Number),Ce()):C},De.range=function(Ue){return arguments.length?(H=Ue,Ce()):H},De.rangeRound=function(Ue){return De.range(Ue).interpolate(hl)},De.clamp=function(Ue){return arguments.length?(re=Ue,Ce()):re},De.interpolate=function(Ue){return arguments.length?(Q=Ue,Ce()):Q},De.ticks=function(Ue){return Ji(C,Ue)},De.tickFormat=function(Ue,He){return d3_scale_linearTickFormat(C,Ue,He)},De.nice=function(Ue){return Xi(C,Ue),Ce()},De.copy=function(){return Ra(C,H,Q,re)},Ce()}function Hi(C,H){return o.rebind(C,H,"range","rangeRound","interpolate","clamp")}function Xi(C,H){return Bo(C,No(hi(C,H)[2])),Bo(C,No(hi(C,H)[2])),C}function hi(C,H){H==null&&(H=10);var Q=Fs(C),re=Q[1]-Q[0],fe=Math.pow(10,Math.floor(Math.log(re/H)/Math.LN10)),ye=H/re*fe;return ye<=.15?fe*=10:ye<=.35?fe*=5:ye<=.75&&(fe*=2),Q[0]=Math.ceil(Q[0]/fe)*fe,Q[1]=Math.floor(Q[1]/fe)*fe+.5*fe,Q[2]=fe,Q}function Ji(C,H){return o.range.apply(o,hi(C,H))}function so(C,H,Q,re){function fe(De){return(Q?Math.log(De<0?0:De):-Math.log(De>0?0:-De))/Math.log(H)}function ye(De){return Q?Math.pow(H,De):-Math.pow(H,-De)}function Ce(De){return C(fe(De))}return Ce.invert=function(De){return ye(C.invert(De))},Ce.domain=function(De){return arguments.length?(Q=De[0]>=0,C.domain((re=De.map(Number)).map(fe)),Ce):re},Ce.base=function(De){return arguments.length?(H=+De,C.domain(re.map(fe)),Ce):H},Ce.nice=function(){var De=Bo(re.map(fe),Q?Math:os);return C.domain(De),re=De.map(ye),Ce},Ce.ticks=function(){var De=Fs(re),Ue=[],He=De[0],tt=De[1],ct=Math.floor(fe(He)),pt=Math.ceil(fe(tt)),kt=H%1?2:H;if(isFinite(pt-ct)){if(Q){for(;ct<pt;ct++)for(var Lt=1;Lt<kt;Lt++)Ue.push(ye(ct)*Lt);Ue.push(ye(ct))}else for(Ue.push(ye(ct));ct++<pt;)for(Lt=kt-1;Lt>0;Lt--)Ue.push(ye(ct)*Lt);for(ct=0;Ue[ct]<He;ct++);for(pt=Ue.length;Ue[pt-1]>tt;pt--);Ue=Ue.slice(ct,pt)}return Ue},Ce.copy=function(){return so(C.copy(),H,Q,re)},Hi(Ce,C)}o.scale.linear=function(){return Ra([0,1],[0,1],vo,!1)},o.scale.log=function(){return so(o.scale.linear().domain([0,1]),10,!0,[1,10])};var os={floor:function(C){return-Math.ceil(-C)},ceil:function(C){return-Math.floor(-C)}};function Za(C,H,Q){var re=jo(H),fe=jo(1/H);function ye(Ce){return C(re(Ce))}return ye.invert=function(Ce){return fe(C.invert(Ce))},ye.domain=function(Ce){return arguments.length?(C.domain((Q=Ce.map(Number)).map(re)),ye):Q},ye.ticks=function(Ce){return Ji(Q,Ce)},ye.tickFormat=function(Ce,De){return d3_scale_linearTickFormat(Q,Ce,De)},ye.nice=function(Ce){return ye.domain(Xi(Q,Ce))},ye.exponent=function(Ce){return arguments.length?(re=jo(H=Ce),fe=jo(1/H),C.domain(Q.map(re)),ye):H},ye.copy=function(){return Za(C.copy(),H,Q)},Hi(ye,C)}function jo(C){return function(H){return H<0?-Math.pow(-H,C):Math.pow(H,C)}}function ga(C,H){var Q,re,fe;function ye(De){return re[((Q.get(De)||(H.t==="range"?Q.set(De,C.push(De)):NaN))-1)%re.length]}function Ce(De,Ue){return o.range(C.length).map(function(He){return De+Ue*He})}return ye.domain=function(De){if(!arguments.length)return C;C=[],Q=new y;for(var Ue,He=-1,tt=De.length;++He<tt;)Q.has(Ue=De[He])||Q.set(Ue,C.push(Ue));return ye[H.t].apply(ye,H.a)},ye.range=function(De){return arguments.length?(re=De,fe=0,H={t:"range",a:arguments},ye):re},ye.rangePoints=function(De,Ue){arguments.length<2&&(Ue=0);var He=De[0],tt=De[1],ct=C.length<2?(He=(He+tt)/2,0):(tt-He)/(C.length-1+Ue);return re=Ce(He+ct*Ue/2,ct),fe=0,H={t:"rangePoints",a:arguments},ye},ye.rangeRoundPoints=function(De,Ue){arguments.length<2&&(Ue=0);var He=De[0],tt=De[1],ct=C.length<2?(He=tt=Math.round((He+tt)/2),0):(tt-He)/(C.length-1+Ue)|0;return re=Ce(He+Math.round(ct*Ue/2+(tt-He-(C.length-1+Ue)*ct)/2),ct),fe=0,H={t:"rangeRoundPoints",a:arguments},ye},ye.rangeBands=function(De,Ue,He){arguments.length<2&&(Ue=0),arguments.length<3&&(He=Ue);var tt=De[1]<De[0],ct=De[tt-0],pt=(De[1-tt]-ct)/(C.length-Ue+2*He);return re=Ce(ct+pt*He,pt),tt&&re.reverse(),fe=pt*(1-Ue),H={t:"rangeBands",a:arguments},ye},ye.rangeRoundBands=function(De,Ue,He){arguments.length<2&&(Ue=0),arguments.length<3&&(He=Ue);var tt=De[1]<De[0],ct=De[tt-0],pt=De[1-tt],kt=Math.floor((pt-ct)/(C.length-Ue+2*He));return re=Ce(ct+Math.round((pt-ct-(C.length-Ue)*kt)/2),kt),tt&&re.reverse(),fe=Math.round(kt*(1-Ue)),H={t:"rangeRoundBands",a:arguments},ye},ye.rangeBand=function(){return fe},ye.rangeExtent=function(){return Fs(H.a[0])},ye.copy=function(){return ga(C,H)},ye.domain(C)}o.scale.pow=function(){return Za(o.scale.linear(),1,[0,1])},o.scale.sqrt=function(){return o.scale.pow().exponent(.5)},o.scale.ordinal=function(){return ga([],{t:"range",a:[[]]})},o.scale.category10=function(){return o.scale.ordinal().range(ss)},o.scale.category20=function(){return o.scale.ordinal().range(wo)},o.scale.category20b=function(){return o.scale.ordinal().range(Fa)},o.scale.category20c=function(){return o.scale.ordinal().range(Ba)};var ss=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map($t),wo=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map($t),Fa=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map($t),Ba=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map($t);function di(C,H){var Q;function re(){var ye=0,Ce=H.length;for(Q=[];++ye<Ce;)Q[ye-1]=o.quantile(C,ye/Ce);return fe}function fe(ye){if(!isNaN(ye=+ye))return H[o.bisect(Q,ye)]}return fe.domain=function(ye){return arguments.length?(C=ye.map(g).filter(f).sort(c),re()):C},fe.range=function(ye){return arguments.length?(H=ye,re()):H},fe.quantiles=function(){return Q},fe.invertExtent=function(ye){return(ye=H.indexOf(ye))<0?[NaN,NaN]:[ye>0?Q[ye-1]:C[0],ye<Q.length?Q[ye]:C[C.length-1]]},fe.copy=function(){return di(C,H)},re()}function Xa(C,H,Q){var re,fe;function ye(De){return Q[Math.max(0,Math.min(fe,Math.floor(re*(De-C))))]}function Ce(){return re=Q.length/(H-C),fe=Q.length-1,ye}return ye.domain=function(De){return arguments.length?(C=+De[0],H=+De[De.length-1],Ce()):[C,H]},ye.range=function(De){return arguments.length?(Q=De,Ce()):Q},ye.invertExtent=function(De){return[De=(De=Q.indexOf(De))<0?NaN:De/re+C,De+1/re]},ye.copy=function(){return Xa(C,H,Q)},Ce()}function Lr(C,H){function Q(re){if(re<=re)return H[o.bisect(C,re)]}return Q.domain=function(re){return arguments.length?(C=re,Q):C},Q.range=function(re){return arguments.length?(H=re,Q):H},Q.invertExtent=function(re){return re=H.indexOf(re),[C[re-1],C[re]]},Q.copy=function(){return Lr(C,H)},Q}function js(C){function H(Q){return+Q}return H.invert=H,H.domain=H.range=function(Q){return arguments.length?(C=Q.map(H),H):C},H.ticks=function(Q){return Ji(C,Q)},H.tickFormat=function(Q,re){return d3_scale_linearTickFormat(C,Q,re)},H.copy=function(){return js(C)},H}function dl(){return 0}o.scale.quantile=function(){return di([],[])},o.scale.quantize=function(){return Xa(0,1,[0,1])},o.scale.threshold=function(){return Lr([.5],[0,1])},o.scale.identity=function(){return js([0,1])},o.svg={},o.svg.arc=function(){var C=Vo,H=ls,Q=dl,re=Uo,fe=_s,ye=_r,Ce=Us;function De(){var He=Math.max(0,+C.apply(this,arguments)),tt=Math.max(0,+H.apply(this,arguments)),ct=fe.apply(this,arguments)-Ge,pt=ye.apply(this,arguments)-Ge,kt=Math.abs(pt-ct),Lt=ct>pt?0:1;if(tt<He&&(St=tt,tt=He,He=St),kt>=It)return Ue(tt,Lt)+(He?Ue(He,1-Lt):"")+"Z";var St,jt,zt,Qt,Zt,Vt,vn,bn,On,Dn,Yn,ir,gr=0,Jn=0,pr=[];if((Qt=(+Ce.apply(this,arguments)||0)/2)&&(zt=re===Uo?Math.sqrt(He*He+tt*tt):+re.apply(this,arguments),Lt||(Jn*=-1),tt&&(Jn=We(zt/tt*Math.sin(Qt))),He&&(gr=We(zt/He*Math.sin(Qt)))),tt){Zt=tt*Math.cos(ct+Jn),Vt=tt*Math.sin(ct+Jn),vn=tt*Math.cos(pt-Jn),bn=tt*Math.sin(pt-Jn);var wr=Math.abs(pt-ct-2*Jn)<=Rt?0:1;if(Jn&&To(Zt,Vt,vn,bn)===Lt^wr){var Or=(ct+pt)/2;Zt=tt*Math.cos(Or),Vt=tt*Math.sin(Or),vn=bn=null}}else Zt=Vt=0;if(He){On=He*Math.cos(pt-gr),Dn=He*Math.sin(pt-gr),Yn=He*Math.cos(ct+gr),ir=He*Math.sin(ct+gr);var nr=Math.abs(ct-pt+2*gr)<=Rt?0:1;if(gr&&To(On,Dn,Yn,ir)===1-Lt^nr){var hr=(ct+pt)/2;On=He*Math.cos(hr),Dn=He*Math.sin(hr),Yn=ir=null}}else On=Dn=0;if(kt>nt&&(St=Math.min(Math.abs(tt-He)/2,+Q.apply(this,arguments)))>.001){jt=He<tt^Lt?0:1;var Mr=St,vr=St;if(kt<Rt){var Cr=Yn==null?[On,Dn]:vn==null?[Zt,Vt]:Ot([Zt,Vt],[Yn,ir],[vn,bn],[On,Dn]),Dr=Zt-Cr[0],qr=Vt-Cr[1],Hr=vn-Cr[0],Yr=bn-Cr[1],Jr=1/Math.sin(Math.acos((Dr*Hr+qr*Yr)/(Math.sqrt(Dr*Dr+qr*qr)*Math.sqrt(Hr*Hr+Yr*Yr)))/2),vi=Math.sqrt(Cr[0]*Cr[0]+Cr[1]*Cr[1]);vr=Math.min(St,(He-vi)/(Jr-1)),Mr=Math.min(St,(tt-vi)/(Jr+1))}if(vn!=null){var Oi=Gi(Yn==null?[On,Dn]:[Yn,ir],[Zt,Vt],tt,Mr,Lt),ua=Gi([vn,bn],[On,Dn],tt,Mr,Lt);St===Mr?pr.push("M",Oi[0],"A",Mr,",",Mr," 0 0,",jt," ",Oi[1],"A",tt,",",tt," 0 ",1-Lt^To(Oi[1][0],Oi[1][1],ua[1][0],ua[1][1]),",",Lt," ",ua[1],"A",Mr,",",Mr," 0 0,",jt," ",ua[0]):pr.push("M",Oi[0],"A",Mr,",",Mr," 0 1,",jt," ",ua[0])}else pr.push("M",Zt,",",Vt);if(Yn!=null){var Wi=Gi([Zt,Vt],[Yn,ir],He,-vr,Lt),na=Gi([On,Dn],vn==null?[Zt,Vt]:[vn,bn],He,-vr,Lt);St===vr?pr.push("L",na[0],"A",vr,",",vr," 0 0,",jt," ",na[1],"A",He,",",He," 0 ",Lt^To(na[1][0],na[1][1],Wi[1][0],Wi[1][1]),",",1-Lt," ",Wi[1],"A",vr,",",vr," 0 0,",jt," ",Wi[0]):pr.push("L",na[0],"A",vr,",",vr," 0 0,",jt," ",Wi[0])}else pr.push("L",On,",",Dn)}else pr.push("M",Zt,",",Vt),vn!=null&&pr.push("A",tt,",",tt," 0 ",wr,",",Lt," ",vn,",",bn),pr.push("L",On,",",Dn),Yn!=null&&pr.push("A",He,",",He," 0 ",nr,",",1-Lt," ",Yn,",",ir);return pr.push("Z"),pr.join("")}function Ue(He,tt){return"M0,"+He+"A"+He+","+He+" 0 1,"+tt+" 0,"+-He+"A"+He+","+He+" 0 1,"+tt+" 0,"+He}return De.innerRadius=function(He){return arguments.length?(C=Hn(He),De):C},De.outerRadius=function(He){return arguments.length?(H=Hn(He),De):H},De.cornerRadius=function(He){return arguments.length?(Q=Hn(He),De):Q},De.padRadius=function(He){return arguments.length?(re=He==Uo?Uo:Hn(He),De):re},De.startAngle=function(He){return arguments.length?(fe=Hn(He),De):fe},De.endAngle=function(He){return arguments.length?(ye=Hn(He),De):ye},De.padAngle=function(He){return arguments.length?(Ce=Hn(He),De):Ce},De.centroid=function(){var He=(+C.apply(this,arguments)+ +H.apply(this,arguments))/2,tt=(+fe.apply(this,arguments)+ +ye.apply(this,arguments))/2-Ge;return[Math.cos(tt)*He,Math.sin(tt)*He]},De};var Uo="auto";function Vo(C){return C.innerRadius}function ls(C){return C.outerRadius}function _s(C){return C.startAngle}function _r(C){return C.endAngle}function Us(C){return C&&C.padAngle}function To(C,H,Q,re){return(C-Q)*H-(H-re)*C>0?0:1}function Gi(C,H,Q,re,fe){var ye=C[0]-H[0],Ce=C[1]-H[1],De=(fe?re:-re)/Math.sqrt(ye*ye+Ce*Ce),Ue=De*Ce,He=-De*ye,tt=C[0]+Ue,ct=C[1]+He,pt=H[0]+Ue,kt=H[1]+He,Lt=(tt+pt)/2,St=(ct+kt)/2,jt=pt-tt,zt=kt-ct,Qt=jt*jt+zt*zt,Zt=Q-re,Vt=tt*kt-pt*ct,vn=(zt<0?-1:1)*Math.sqrt(Math.max(0,Zt*Zt*Qt-Vt*Vt)),bn=(Vt*zt-jt*vn)/Qt,On=(-Vt*jt-zt*vn)/Qt,Dn=(Vt*zt+jt*vn)/Qt,Yn=(-Vt*jt+zt*vn)/Qt,ir=bn-Lt,gr=On-St,Jn=Dn-Lt,pr=Yn-St;return ir*ir+gr*gr>Jn*Jn+pr*pr&&(bn=Dn,On=Yn),[[bn-Ue,On-He],[bn*Q/Zt,On*Q/Zt]]}function qo(){return!0}function Ja(C){var H=Wn,Q=Bn,re=qo,fe=la,ye=fe.key,Ce=.7;function De(Ue){var He,tt=[],ct=[],pt=-1,kt=Ue.length,Lt=Hn(H),St=Hn(Q);function jt(){tt.push("M",fe(C(ct),Ce))}for(;++pt<kt;)re.call(this,He=Ue[pt],pt)?ct.push([+Lt.call(this,He,pt),+St.call(this,He,pt)]):ct.length&&(jt(),ct=[]);return ct.length&&jt(),tt.length?tt.join(""):null}return De.x=function(Ue){return arguments.length?(H=Ue,De):H},De.y=function(Ue){return arguments.length?(Q=Ue,De):Q},De.defined=function(Ue){return arguments.length?(re=Ue,De):re},De.interpolate=function(Ue){return arguments.length?(ye=typeof Ue=="function"?fe=Ue:(fe=Na.get(Ue)||la).key,De):ye},De.tension=function(Ue){return arguments.length?(Ce=Ue,De):Ce},De}o.svg.line=function(){return Ja(R)};var Na=o.map({linear:la,"linear-closed":lo,step:function(C){for(var H=0,Q=C.length,re=C[0],fe=[re[0],",",re[1]];++H<Q;)fe.push("H",(re[0]+(re=C[H])[0])/2,"V",re[1]);return Q>1&&fe.push("H",re[0]),fe.join("")},"step-before":ja,"step-after":ko,basis:Kr,"basis-open":function(C){if(C.length<4)return la(C);for(var H,Q=[],re=-1,fe=C.length,ye=[0],Ce=[0];++re<3;)H=C[re],ye.push(H[0]),Ce.push(H[1]);for(Q.push(Ki(ma,ye)+","+Ki(ma,Ce)),--re;++re<fe;)H=C[re],ye.shift(),ye.push(H[0]),Ce.shift(),Ce.push(H[1]),ws(Q,ye,Ce);return Q.join("")},"basis-closed":function(C){for(var H,Q,re=-1,fe=C.length,ye=fe+4,Ce=[],De=[];++re<4;)Q=C[re%fe],Ce.push(Q[0]),De.push(Q[1]);for(H=[Ki(ma,Ce),",",Ki(ma,De)],--re;++re<ye;)Q=C[re%fe],Ce.shift(),Ce.push(Q[0]),De.shift(),De.push(Q[1]),ws(H,Ce,De);return H.join("")},bundle:function(C,H){var Q=C.length-1;if(Q)for(var re,fe,ye=C[0][0],Ce=C[0][1],De=C[Q][0]-ye,Ue=C[Q][1]-Ce,He=-1;++He<=Q;)fe=He/Q,(re=C[He])[0]=H*re[0]+(1-H)*(ye+fe*De),re[1]=H*re[1]+(1-H)*(Ce+fe*Ue);return Kr(C)},cardinal:function(C,H){return C.length<3?la(C):C[0]+Vs(C,Ho(C,H))},"cardinal-open":function(C,H){return C.length<4?la(C):C[1]+Vs(C.slice(1,-1),Ho(C,H))},"cardinal-closed":function(C,H){return C.length<3?lo(C):C[0]+Vs((C.push(C[0]),C),Ho([C[C.length-2]].concat(C,[C[1]]),H))},monotone:function(C){return C.length<3?la(C):C[0]+Vs(C,function(H){for(var Q,re,fe,ye,Ce=[],De=function(tt){for(var ct=0,pt=tt.length-1,kt=[],Lt=tt[0],St=tt[1],jt=kt[0]=Ts(Lt,St);++ct<pt;)kt[ct]=(jt+(jt=Ts(Lt=St,St=tt[ct+1])))/2;return kt[ct]=jt,kt}(H),Ue=-1,He=H.length-1;++Ue<He;)Q=Ts(H[Ue],H[Ue+1]),m(Q)<nt?De[Ue]=De[Ue+1]=0:(ye=(re=De[Ue]/Q)*re+(fe=De[Ue+1]/Q)*fe)>9&&(ye=3*Q/Math.sqrt(ye),De[Ue]=ye*re,De[Ue+1]=ye*fe);for(Ue=-1;++Ue<=He;)ye=(H[Math.min(He,Ue+1)][0]-H[Math.max(0,Ue-1)][0])/(6*(1+De[Ue]*De[Ue])),Ce.push([ye||0,De[Ue]*ye||0]);return Ce}(C))}});function la(C){return C.length>1?C.join("L"):C+"Z"}function lo(C){return C.join("L")+"Z"}function ja(C){for(var H=0,Q=C.length,re=C[0],fe=[re[0],",",re[1]];++H<Q;)fe.push("V",(re=C[H])[1],"H",re[0]);return fe.join("")}function ko(C){for(var H=0,Q=C.length,re=C[0],fe=[re[0],",",re[1]];++H<Q;)fe.push("H",(re=C[H])[0],"V",re[1]);return fe.join("")}function Vs(C,H){if(H.length<1||C.length!=H.length&&C.length!=H.length+2)return la(C);var Q=C.length!=H.length,re="",fe=C[0],ye=C[1],Ce=H[0],De=Ce,Ue=1;if(Q&&(re+="Q"+(ye[0]-2*Ce[0]/3)+","+(ye[1]-2*Ce[1]/3)+","+ye[0]+","+ye[1],fe=C[1],Ue=2),H.length>1){De=H[1],ye=C[Ue],Ue++,re+="C"+(fe[0]+Ce[0])+","+(fe[1]+Ce[1])+","+(ye[0]-De[0])+","+(ye[1]-De[1])+","+ye[0]+","+ye[1];for(var He=2;He<H.length;He++,Ue++)ye=C[Ue],De=H[He],re+="S"+(ye[0]-De[0])+","+(ye[1]-De[1])+","+ye[0]+","+ye[1]}if(Q){var tt=C[Ue];re+="Q"+(ye[0]+2*De[0]/3)+","+(ye[1]+2*De[1]/3)+","+tt[0]+","+tt[1]}return re}function Ho(C,H){for(var Q,re=[],fe=(1-H)/2,ye=C[0],Ce=C[1],De=1,Ue=C.length;++De<Ue;)Q=ye,ye=Ce,Ce=C[De],re.push([fe*(Ce[0]-Q[0]),fe*(Ce[1]-Q[1])]);return re}function Kr(C){if(C.length<3)return la(C);var H=1,Q=C.length,re=C[0],fe=re[0],ye=re[1],Ce=[fe,fe,fe,(re=C[1])[0]],De=[ye,ye,ye,re[1]],Ue=[fe,",",ye,"L",Ki(ma,Ce),",",Ki(ma,De)];for(C.push(C[Q-1]);++H<=Q;)re=C[H],Ce.shift(),Ce.push(re[0]),De.shift(),De.push(re[1]),ws(Ue,Ce,De);return C.pop(),Ue.push("L",re),Ue.join("")}function Ki(C,H){return C[0]*H[0]+C[1]*H[1]+C[2]*H[2]+C[3]*H[3]}Na.forEach(function(C,H){H.key=C,H.closed=/-closed$/.test(C)});var va=[0,2/3,1/3,0],uo=[0,1/3,2/3,0],ma=[0,1/6,2/3,1/6];function ws(C,H,Q){C.push("C",Ki(va,H),",",Ki(va,Q),",",Ki(uo,H),",",Ki(uo,Q),",",Ki(ma,H),",",Ki(ma,Q))}function Ts(C,H){return(H[1]-C[1])/(H[0]-C[0])}function ya(C){for(var H,Q,re,fe=-1,ye=C.length;++fe<ye;)Q=(H=C[fe])[0],re=H[1]-Ge,H[0]=Q*Math.cos(re),H[1]=Q*Math.sin(re);return C}function Xr(C){var H=Wn,Q=Wn,re=0,fe=Bn,ye=qo,Ce=la,De=Ce.key,Ue=Ce,He="L",tt=.7;function ct(pt){var kt,Lt,St,jt=[],zt=[],Qt=[],Zt=-1,Vt=pt.length,vn=Hn(H),bn=Hn(re),On=H===Q?function(){return Lt}:Hn(Q),Dn=re===fe?function(){return St}:Hn(fe);function Yn(){jt.push("M",Ce(C(Qt),tt),He,Ue(C(zt.reverse()),tt),"Z")}for(;++Zt<Vt;)ye.call(this,kt=pt[Zt],Zt)?(zt.push([Lt=+vn.call(this,kt,Zt),St=+bn.call(this,kt,Zt)]),Qt.push([+On.call(this,kt,Zt),+Dn.call(this,kt,Zt)])):zt.length&&(Yn(),zt=[],Qt=[]);return zt.length&&Yn(),jt.length?jt.join(""):null}return ct.x=function(pt){return arguments.length?(H=Q=pt,ct):Q},ct.x0=function(pt){return arguments.length?(H=pt,ct):H},ct.x1=function(pt){return arguments.length?(Q=pt,ct):Q},ct.y=function(pt){return arguments.length?(re=fe=pt,ct):fe},ct.y0=function(pt){return arguments.length?(re=pt,ct):re},ct.y1=function(pt){return arguments.length?(fe=pt,ct):fe},ct.defined=function(pt){return arguments.length?(ye=pt,ct):ye},ct.interpolate=function(pt){return arguments.length?(De=typeof pt=="function"?Ce=pt:(Ce=Na.get(pt)||la).key,Ue=Ce.reverse||Ce,He=Ce.closed?"M":"L",ct):De},ct.tension=function(pt){return arguments.length?(tt=pt,ct):tt},ct}function co(C){return C.source}function us(C){return C.target}function Ka(C){return C.radius}function ks(C){return[C.x,C.y]}function As(){return 64}function $a(){return"circle"}function gi(C){var H=Math.sqrt(C/Rt);return"M0,"+H+"A"+H+","+H+" 0 1,1 0,"+-H+"A"+H+","+H+" 0 1,1 0,"+H+"Z"}o.svg.line.radial=function(){var C=Ja(ya);return C.radius=C.x,delete C.x,C.angle=C.y,delete C.y,C},ja.reverse=ko,ko.reverse=ja,o.svg.area=function(){return Xr(R)},o.svg.area.radial=function(){var C=Xr(ya);return C.radius=C.x,delete C.x,C.innerRadius=C.x0,delete C.x0,C.outerRadius=C.x1,delete C.x1,C.angle=C.y,delete C.y,C.startAngle=C.y0,delete C.y0,C.endAngle=C.y1,delete C.y1,C},o.svg.chord=function(){var C=co,H=us,Q=Ka,re=_s,fe=_r;function ye(He,tt){var ct,pt,kt=Ce(this,C,He,tt),Lt=Ce(this,H,He,tt);return"M"+kt.p0+De(kt.r,kt.p1,kt.a1-kt.a0)+(pt=Lt,((ct=kt).a0==pt.a0&&ct.a1==pt.a1?Ue(kt.r,kt.p1,kt.r,kt.p0):Ue(kt.r,kt.p1,Lt.r,Lt.p0)+De(Lt.r,Lt.p1,Lt.a1-Lt.a0)+Ue(Lt.r,Lt.p1,kt.r,kt.p0))+"Z")}function Ce(He,tt,ct,pt){var kt=tt.call(He,ct,pt),Lt=Q.call(He,kt,pt),St=re.call(He,kt,pt)-Ge,jt=fe.call(He,kt,pt)-Ge;return{r:Lt,a0:St,a1:jt,p0:[Lt*Math.cos(St),Lt*Math.sin(St)],p1:[Lt*Math.cos(jt),Lt*Math.sin(jt)]}}function De(He,tt,ct){return"A"+He+","+He+" 0 "+ +(ct>Rt)+",1 "+tt}function Ue(He,tt,ct,pt){return"Q 0,0 "+pt}return ye.radius=function(He){return arguments.length?(Q=Hn(He),ye):Q},ye.source=function(He){return arguments.length?(C=Hn(He),ye):C},ye.target=function(He){return arguments.length?(H=Hn(He),ye):H},ye.startAngle=function(He){return arguments.length?(re=Hn(He),ye):re},ye.endAngle=function(He){return arguments.length?(fe=Hn(He),ye):fe},ye},o.svg.diagonal=function(){var C=co,H=us,Q=ks;function re(fe,ye){var Ce=C.call(this,fe,ye),De=H.call(this,fe,ye),Ue=(Ce.y+De.y)/2,He=[Ce,{x:Ce.x,y:Ue},{x:De.x,y:Ue},De];return"M"+(He=He.map(Q))[0]+"C"+He[1]+" "+He[2]+" "+He[3]}return re.source=function(fe){return arguments.length?(C=Hn(fe),re):C},re.target=function(fe){return arguments.length?(H=Hn(fe),re):H},re.projection=function(fe){return arguments.length?(Q=fe,re):Q},re},o.svg.diagonal.radial=function(){var C=o.svg.diagonal(),H=ks,Q=C.projection;return C.projection=function(re){return arguments.length?Q(function(fe){return function(){var ye=fe.apply(this,arguments),Ce=ye[0],De=ye[1]-Ge;return[Ce*Math.cos(De),Ce*Math.sin(De)]}}(H=re)):H},C},o.svg.symbol=function(){var C=$a,H=As;function Q(re,fe){return(cs.get(C.call(this,re,fe))||gi)(H.call(this,re,fe))}return Q.type=function(re){return arguments.length?(C=Hn(re),Q):C},Q.size=function(re){return arguments.length?(H=Hn(re),Q):H},Q};var cs=o.map({circle:gi,cross:function(C){var H=Math.sqrt(C/5)/2;return"M"+-3*H+","+-H+"H"+-H+"V"+-3*H+"H"+H+"V"+-H+"H"+3*H+"V"+H+"H"+H+"V"+3*H+"H"+-H+"V"+H+"H"+-3*H+"Z"},diamond:function(C){var H=Math.sqrt(C/(2*Br)),Q=H*Br;return"M0,"+-H+"L"+Q+",0 0,"+H+" "+-Q+",0Z"},square:function(C){var H=Math.sqrt(C)/2;return"M"+-H+","+-H+"L"+H+","+-H+" "+H+","+H+" "+-H+","+H+"Z"},"triangle-down":function(C){var H=Math.sqrt(C/Pr),Q=H*Pr/2;return"M0,"+Q+"L"+H+","+-Q+" "+-H+","+-Q+"Z"},"triangle-up":function(C){var H=Math.sqrt(C/Pr),Q=H*Pr/2;return"M0,"+-Q+"L"+H+","+Q+" "+-H+","+Q+"Z"}});o.svg.symbolTypes=cs.keys();var Pr=Math.sqrt(3),Br=Math.tan(30*Ye);de.transition=function(C){for(var H,Q,re=Ri||++Ll,fe=bi(C),ye=[],Ce=ho||{time:Date.now(),ease:io,delay:0,duration:250},De=-1,Ue=this.length;++De<Ue;){ye.push(H=[]);for(var He=this[De],tt=-1,ct=He.length;++tt<ct;)(Q=He[tt])&&Ta(Q,tt,fe,re,Ce),H.push(Q)}return Ao(ye,fe,re)},de.interrupt=function(C){return this.each(C==null?Ca:fo(bi(C)))};var Ca=fo(bi());function fo(C){return function(){var H,Q,re;(H=this[C])&&(re=H[Q=H.active])&&(re.timer.c=null,re.timer.t=NaN,--H.count?delete H[Q]:delete this[C],H.active+=.5,re.event&&re.event.interrupt.call(this,this.__data__,re.index))}}function Ao(C,H,Q){return te(C,oi),C.namespace=H,C.id=Q,C}var Ri,ho,oi=[],Ll=0;function Pa(C,H,Q,re){var fe=C.id,ye=C.namespace;return ke(C,typeof Q=="function"?function(Ce,De,Ue){Ce[ye][fe].tween.set(H,re(Q.call(Ce,Ce.__data__,De,Ue)))}:(Q=re(Q),function(Ce){Ce[ye][fe].tween.set(H,Q)}))}function ui(C){return C==null&&(C=""),function(){this.textContent=C}}function bi(C){return C==null?"__transition__":"__transition_"+C+"__"}function Ta(C,H,Q,re,fe){var ye,Ce,De,Ue,He,tt=C[Q]||(C[Q]={active:0,count:0}),ct=tt[re];function pt(Lt){var St=tt.active,jt=tt[St];for(var zt in jt&&(jt.timer.c=null,jt.timer.t=NaN,--tt.count,delete tt[St],jt.event&&jt.event.interrupt.call(C,C.__data__,jt.index)),tt)if(+zt<re){var Qt=tt[zt];Qt.timer.c=null,Qt.timer.t=NaN,--tt.count,delete tt[zt]}Ce.c=kt,on(function(){return Ce.c&&kt(Lt||1)&&(Ce.c=null,Ce.t=NaN),1},0,ye),tt.active=re,ct.event&&ct.event.start.call(C,C.__data__,H),He=[],ct.tween.forEach(function(Zt,Vt){(Vt=Vt.call(C,C.__data__,H))&&He.push(Vt)}),Ue=ct.ease,De=ct.duration}function kt(Lt){for(var St=Lt/De,jt=Ue(St),zt=He.length;zt>0;)He[--zt].call(C,jt);if(St>=1)return ct.event&&ct.event.end.call(C,C.__data__,H),--tt.count?delete tt[re]:delete C[Q],1}ct||(ye=fe.time,Ce=on(function(Lt){var St=ct.delay;if(Ce.t=St+ye,St<=Lt)return pt(Lt-St);Ce.c=pt},0,ye),ct=tt[re]={tween:new y,time:ye,timer:Ce,delay:fe.delay,duration:fe.duration,ease:fe.ease,index:H},fe=null,++tt.count)}oi.call=de.call,oi.empty=de.empty,oi.node=de.node,oi.size=de.size,o.transition=function(C,H){return C&&C.transition?Ri?C.transition(H):C:o.selection().transition(C)},o.transition.prototype=oi,oi.select=function(C){var H,Q,re,fe=this.id,ye=this.namespace,Ce=[];C=ge(C);for(var De=-1,Ue=this.length;++De<Ue;){Ce.push(H=[]);for(var He=this[De],tt=-1,ct=He.length;++tt<ct;)(re=He[tt])&&(Q=C.call(re,re.__data__,tt,De))?("__data__"in re&&(Q.__data__=re.__data__),Ta(Q,tt,ye,fe,re[ye][fe]),H.push(Q)):H.push(null)}return Ao(Ce,ye,fe)},oi.selectAll=function(C){var H,Q,re,fe,ye,Ce=this.id,De=this.namespace,Ue=[];C=ve(C);for(var He=-1,tt=this.length;++He<tt;)for(var ct=this[He],pt=-1,kt=ct.length;++pt<kt;)if(re=ct[pt]){ye=re[De][Ce],Q=C.call(re,re.__data__,pt,He),Ue.push(H=[]);for(var Lt=-1,St=Q.length;++Lt<St;)(fe=Q[Lt])&&Ta(fe,Lt,De,Ce,ye),H.push(fe)}return Ao(Ue,De,Ce)},oi.filter=function(C){var H,Q,re=[];typeof C!="function"&&(C=he(C));for(var fe=0,ye=this.length;fe<ye;fe++){re.push(H=[]);for(var Ce,De=0,Ue=(Ce=this[fe]).length;De<Ue;De++)(Q=Ce[De])&&C.call(Q,Q.__data__,De,fe)&&H.push(Q)}return Ao(re,this.namespace,this.id)},oi.tween=function(C,H){var Q=this.id,re=this.namespace;return arguments.length<2?this.node()[re][Q].tween.get(C):ke(this,H==null?function(fe){fe[re][Q].tween.remove(C)}:function(fe){fe[re][Q].tween.set(C,H)})},oi.attr=function(C,H){if(arguments.length<2){for(H in C)this.attr(H,C[H]);return this}var Q=C=="transform"?Al:vo,re=o.ns.qualify(C);function fe(){this.removeAttribute(re)}function ye(){this.removeAttributeNS(re.space,re.local)}return Pa(this,"attr."+C,H,re.local?function(Ce){return Ce==null?ye:(Ce+="",function(){var De,Ue=this.getAttributeNS(re.space,re.local);return Ue!==Ce&&(De=Q(Ue,Ce),function(He){this.setAttributeNS(re.space,re.local,De(He))})})}:function(Ce){return Ce==null?fe:(Ce+="",function(){var De,Ue=this.getAttribute(re);return Ue!==Ce&&(De=Q(Ue,Ce),function(He){this.setAttribute(re,De(He))})})})},oi.attrTween=function(C,H){var Q=o.ns.qualify(C);return this.tween("attr."+C,Q.local?function(re,fe){var ye=H.call(this,re,fe,this.getAttributeNS(Q.space,Q.local));return ye&&function(Ce){this.setAttributeNS(Q.space,Q.local,ye(Ce))}}:function(re,fe){var ye=H.call(this,re,fe,this.getAttribute(Q));return ye&&function(Ce){this.setAttribute(Q,ye(Ce))}})},oi.style=function(C,H,Q){var re=arguments.length;if(re<3){if(typeof C!="string"){for(Q in re<2&&(H=""),C)this.style(Q,C[Q],H);return this}Q=""}function fe(){this.style.removeProperty(C)}return Pa(this,"style."+C,H,function(ye){return ye==null?fe:(ye+="",function(){var Ce,De=n(this).getComputedStyle(this,null).getPropertyValue(C);return De!==ye&&(Ce=vo(De,ye),function(Ue){this.style.setProperty(C,Ce(Ue),Q)})})})},oi.styleTween=function(C,H,Q){return arguments.length<3&&(Q=""),this.tween("style."+C,function(re,fe){var ye=H.call(this,re,fe,n(this).getComputedStyle(this,null).getPropertyValue(C));return ye&&function(Ce){this.style.setProperty(C,ye(Ce),Q)}})},oi.text=function(C){return Pa(this,"text",C,ui)},oi.remove=function(){var C=this.namespace;return this.each("end.transition",function(){var H;this[C].count<2&&(H=this.parentNode)&&H.removeChild(this)})},oi.ease=function(C){var H=this.id,Q=this.namespace;return arguments.length<1?this.node()[Q][H].ease:(typeof C!="function"&&(C=o.ease.apply(o,arguments)),ke(this,function(re){re[Q][H].ease=C}))},oi.delay=function(C){var H=this.id,Q=this.namespace;return arguments.length<1?this.node()[Q][H].delay:ke(this,typeof C=="function"?function(re,fe,ye){re[Q][H].delay=+C.call(re,re.__data__,fe,ye)}:(C=+C,function(re){re[Q][H].delay=C}))},oi.duration=function(C){var H=this.id,Q=this.namespace;return arguments.length<1?this.node()[Q][H].duration:ke(this,typeof C=="function"?function(re,fe,ye){re[Q][H].duration=Math.max(1,C.call(re,re.__data__,fe,ye))}:(C=Math.max(1,C),function(re){re[Q][H].duration=C}))},oi.each=function(C,H){var Q=this.id,re=this.namespace;if(arguments.length<2){var fe=ho,ye=Ri;try{Ri=Q,ke(this,function(Ce,De,Ue){ho=Ce[re][Q],C.call(Ce,Ce.__data__,De,Ue)})}finally{ho=fe,Ri=ye}}else ke(this,function(Ce){var De=Ce[re][Q];(De.event||(De.event=o.dispatch("start","end","interrupt"))).on(C,H)});return this},oi.transition=function(){for(var C,H,Q,re=this.id,fe=++Ll,ye=this.namespace,Ce=[],De=0,Ue=this.length;De<Ue;De++){Ce.push(C=[]);for(var He,tt=0,ct=(He=this[De]).length;tt<ct;tt++)(H=He[tt])&&Ta(H,tt,ye,fe,{time:(Q=H[ye][re]).time,ease:Q.ease,delay:Q.delay+Q.duration,duration:Q.duration}),C.push(H)}return Ao(Ce,ye,fe)},o.svg.axis=function(){var C,H=o.scale.linear(),Q=Go,re=6,fe=6,ye=3,Ce=[10],De=null;function Ue(He){He.each(function(){var tt,ct=o.select(this),pt=this.__chart__||H,kt=this.__chart__=H.copy(),Lt=De??(kt.ticks?kt.ticks.apply(kt,Ce):kt.domain()),St=C??(kt.tickFormat?kt.tickFormat.apply(kt,Ce):R),jt=ct.selectAll(".tick").data(Lt,kt),zt=jt.enter().insert("g",".domain").attr("class","tick").style("opacity",nt),Qt=o.transition(jt.exit()).style("opacity",nt).remove(),Zt=o.transition(jt.order()).style("opacity",1),Vt=Math.max(re,0)+ye,vn=Bs(kt),bn=ct.selectAll(".domain").data([0]),On=(bn.enter().append("path").attr("class","domain"),o.transition(bn));zt.append("line"),zt.append("text");var Dn,Yn,ir,gr,Jn=zt.select("line"),pr=Zt.select("line"),wr=jt.select("text").text(St),Or=zt.select("text"),nr=Zt.select("text"),hr=Q==="top"||Q==="left"?-1:1;if(Q==="bottom"||Q==="top"?(tt=Xe,Dn="x",ir="y",Yn="x2",gr="y2",wr.attr("dy",hr<0?"0em":".71em").style("text-anchor","middle"),On.attr("d","M"+vn[0]+","+hr*fe+"V0H"+vn[1]+"V"+hr*fe)):(tt=Qe,Dn="y",ir="x",Yn="y2",gr="x2",wr.attr("dy",".32em").style("text-anchor",hr<0?"end":"start"),On.attr("d","M"+hr*fe+","+vn[0]+"H0V"+vn[1]+"H"+hr*fe)),Jn.attr(gr,hr*re),Or.attr(ir,hr*Vt),pr.attr(Yn,0).attr(gr,hr*re),nr.attr(Dn,0).attr(ir,hr*Vt),kt.rangeBand){var Mr=kt,vr=Mr.rangeBand()/2;pt=kt=function(Cr){return Mr(Cr)+vr}}else pt.rangeBand?pt=kt:Qt.call(tt,kt,pt);zt.call(tt,pt,kt),Zt.call(tt,kt,kt)})}return Ue.scale=function(He){return arguments.length?(H=He,Ue):H},Ue.orient=function(He){return arguments.length?(Q=He in vl?He+"":Go,Ue):Q},Ue.ticks=function(){return arguments.length?(Ce=_(arguments),Ue):Ce},Ue.tickValues=function(He){return arguments.length?(De=He,Ue):De},Ue.tickFormat=function(He){return arguments.length?(C=He,Ue):C},Ue.tickSize=function(He){var tt=arguments.length;return tt?(re=+He,fe=+arguments[tt-1],Ue):re},Ue.innerTickSize=function(He){return arguments.length?(re=+He,Ue):re},Ue.outerTickSize=function(He){return arguments.length?(fe=+He,Ue):fe},Ue.tickPadding=function(He){return arguments.length?(ye=+He,Ue):ye},Ue.tickSubdivide=function(){return arguments.length&&Ue},Ue};var Go="bottom",vl={top:1,right:1,bottom:1,left:1};function Xe(C,H,Q){C.attr("transform",function(re){var fe=H(re);return"translate("+(isFinite(fe)?fe:Q(re))+",0)"})}function Qe(C,H,Q){C.attr("transform",function(re){var fe=H(re);return"translate(0,"+(isFinite(fe)?fe:Q(re))+")"})}o.svg.brush=function(){var C,H,Q=J(tt,"brushstart","brush","brushend"),re=null,fe=null,ye=[0,0],Ce=[0,0],De=!0,Ue=!0,He=N[0];function tt(St){St.each(function(){var jt=o.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Lt).on("touchstart.brush",Lt),zt=jt.selectAll(".background").data([0]);zt.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),jt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Qt=jt.selectAll(".resize").data(He,R);Qt.exit().remove(),Qt.enter().append("g").attr("class",function(bn){return"resize "+bn}).style("cursor",function(bn){return lt[bn]}).append("rect").attr("x",function(bn){return/[ew]$/.test(bn)?-3:null}).attr("y",function(bn){return/^[ns]/.test(bn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Qt.style("display",tt.empty()?"none":null);var Zt,Vt=o.transition(jt),vn=o.transition(zt);re&&(Zt=Bs(re),vn.attr("x",Zt[0]).attr("width",Zt[1]-Zt[0]),pt(Vt)),fe&&(Zt=Bs(fe),vn.attr("y",Zt[0]).attr("height",Zt[1]-Zt[0]),kt(Vt)),ct(Vt)})}function ct(St){St.selectAll(".resize").attr("transform",function(jt){return"translate("+ye[+/e$/.test(jt)]+","+Ce[+/^s/.test(jt)]+")"})}function pt(St){St.select(".extent").attr("x",ye[0]),St.selectAll(".extent,.n>rect,.s>rect").attr("width",ye[1]-ye[0])}function kt(St){St.select(".extent").attr("y",Ce[0]),St.selectAll(".extent,.e>rect,.w>rect").attr("height",Ce[1]-Ce[0])}function Lt(){var St,jt,zt=this,Qt=o.select(o.event.target),Zt=Q.of(zt,arguments),Vt=o.select(zt),vn=Qt.datum(),bn=!/^(n|s)$/.test(vn)&&re,On=!/^(e|w)$/.test(vn)&&fe,Dn=Qt.classed("extent"),Yn=dt(zt),ir=o.mouse(zt),gr=o.select(n(zt)).on("keydown.brush",function(){o.event.keyCode==32&&(Dn||(St=null,ir[0]-=ye[1],ir[1]-=Ce[1],Dn=2),ee())}).on("keyup.brush",function(){o.event.keyCode==32&&Dn==2&&(ir[0]+=ye[1],ir[1]+=Ce[1],Dn=0,ee())});if(o.event.changedTouches?gr.on("touchmove.brush",wr).on("touchend.brush",nr):gr.on("mousemove.brush",wr).on("mouseup.brush",nr),Vt.interrupt().selectAll("*").interrupt(),Dn)ir[0]=ye[0]-ir[0],ir[1]=Ce[0]-ir[1];else if(vn){var Jn=+/w$/.test(vn),pr=+/^n/.test(vn);jt=[ye[1-Jn]-ir[0],Ce[1-pr]-ir[1]],ir[0]=ye[Jn],ir[1]=Ce[pr]}else o.event.altKey&&(St=ir.slice());function wr(){var hr=o.mouse(zt),Mr=!1;jt&&(hr[0]+=jt[0],hr[1]+=jt[1]),Dn||(o.event.altKey?(St||(St=[(ye[0]+ye[1])/2,(Ce[0]+Ce[1])/2]),ir[0]=ye[+(hr[0]<St[0])],ir[1]=Ce[+(hr[1]<St[1])]):St=null),bn&&Or(hr,re,0)&&(pt(Vt),Mr=!0),On&&Or(hr,fe,1)&&(kt(Vt),Mr=!0),Mr&&(ct(Vt),Zt({type:"brush",mode:Dn?"move":"resize"}))}function Or(hr,Mr,vr){var Cr,Dr,qr=Bs(Mr),Hr=qr[0],Yr=qr[1],Jr=ir[vr],vi=vr?Ce:ye,Oi=vi[1]-vi[0];if(Dn&&(Hr-=Jr,Yr-=Oi+Jr),Cr=(vr?Ue:De)?Math.max(Hr,Math.min(Yr,hr[vr])):hr[vr],Dn?Dr=(Cr+=Jr)+Oi:(St&&(Jr=Math.max(Hr,Math.min(Yr,2*St[vr]-Cr))),Jr<Cr?(Dr=Cr,Cr=Jr):Dr=Jr),vi[0]!=Cr||vi[1]!=Dr)return vr?H=null:C=null,vi[0]=Cr,vi[1]=Dr,!0}function nr(){wr(),Vt.style("pointer-events","all").selectAll(".resize").style("display",tt.empty()?"none":null),o.select("body").style("cursor",null),gr.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Yn(),Zt({type:"brushend"})}Vt.style("pointer-events","none").selectAll(".resize").style("display",null),o.select("body").style("cursor",Qt.style("cursor")),Zt({type:"brushstart"}),wr()}return tt.event=function(St){St.each(function(){var jt=Q.of(this,arguments),zt={x:ye,y:Ce,i:C,j:H},Qt=this.__chart__||zt;this.__chart__=zt,Ri?o.select(this).transition().each("start.brush",function(){C=Qt.i,H=Qt.j,ye=Qt.x,Ce=Qt.y,jt({type:"brushstart"})}).tween("brush:brush",function(){var Zt=Co(ye,zt.x),Vt=Co(Ce,zt.y);return C=H=null,function(vn){ye=zt.x=Zt(vn),Ce=zt.y=Vt(vn),jt({type:"brush",mode:"resize"})}}).each("end.brush",function(){C=zt.i,H=zt.j,jt({type:"brush",mode:"resize"}),jt({type:"brushend"})}):(jt({type:"brushstart"}),jt({type:"brush",mode:"resize"}),jt({type:"brushend"}))})},tt.x=function(St){return arguments.length?(He=N[!(re=St)<<1|!fe],tt):re},tt.y=function(St){return arguments.length?(He=N[!re<<1|!(fe=St)],tt):fe},tt.clamp=function(St){return arguments.length?(re&&fe?(De=!!St[0],Ue=!!St[1]):re?De=!!St:fe&&(Ue=!!St),tt):re&&fe?[De,Ue]:re?De:fe?Ue:null},tt.extent=function(St){var jt,zt,Qt,Zt,Vt;return arguments.length?(re&&(jt=St[0],zt=St[1],fe&&(jt=jt[0],zt=zt[0]),C=[jt,zt],re.invert&&(jt=re(jt),zt=re(zt)),zt<jt&&(Vt=jt,jt=zt,zt=Vt),jt==ye[0]&&zt==ye[1]||(ye=[jt,zt])),fe&&(Qt=St[0],Zt=St[1],re&&(Qt=Qt[1],Zt=Zt[1]),H=[Qt,Zt],fe.invert&&(Qt=fe(Qt),Zt=fe(Zt)),Zt<Qt&&(Vt=Qt,Qt=Zt,Zt=Vt),Qt==Ce[0]&&Zt==Ce[1]||(Ce=[Qt,Zt])),tt):(re&&(C?(jt=C[0],zt=C[1]):(jt=ye[0],zt=ye[1],re.invert&&(jt=re.invert(jt),zt=re.invert(zt)),zt<jt&&(Vt=jt,jt=zt,zt=Vt))),fe&&(H?(Qt=H[0],Zt=H[1]):(Qt=Ce[0],Zt=Ce[1],fe.invert&&(Qt=fe.invert(Qt),Zt=fe.invert(Zt)),Zt<Qt&&(Vt=Qt,Qt=Zt,Zt=Vt))),re&&fe?[[jt,Qt],[zt,Zt]]:re?[jt,zt]:fe&&[Qt,Zt])},tt.clear=function(){return tt.empty()||(ye=[0,0],Ce=[0,0],C=H=null),tt},tt.empty=function(){return!!re&&ye[0]==ye[1]||!!fe&&Ce[0]==Ce[1]},o.rebind(tt,Q,"on")};var lt={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},N=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function W(C){return JSON.parse(C.responseText)}function G(C){var H=p.createRange();return H.selectNode(p.body),H.createContextualFragment(C.responseText)}o.text=Un(function(C){return C.responseText}),o.json=function(C,H){return ar(C,"application/json",W,H)},o.html=function(C,H){return ar(C,"text/html",G,H)},o.xml=Un(function(C){return C.responseXML}),(A=typeof(M=o)=="function"?M.call(O,e,O,Y):M)===void 0||(Y.exports=A)}).apply(self)},3480:function(Y){Y.exports=function(){var O,e,M;function A(o,w){if(O)if(e){var _="var sharedChunk = {}; ("+O+")(sharedChunk); ("+e+")(sharedChunk);",p={};O(p),M=w(p),typeof window<"u"&&(M.workerUrl=window.URL.createObjectURL(new Blob([_],{type:"text/javascript"})))}else e=w;else O=w}return A(0,function(o){function w(S,D){return S(D={exports:{}},D.exports),D.exports}var _="1.13.4",p=s;function s(S,D,X,ue){this.cx=3*S,this.bx=3*(X-S)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*D,this.by=3*(ue-D)-this.cy,this.ay=1-this.cy-this.by,this.p1x=S,this.p1y=ue,this.p2x=X,this.p2y=ue}s.prototype.sampleCurveX=function(S){return((this.ax*S+this.bx)*S+this.cx)*S},s.prototype.sampleCurveY=function(S){return((this.ay*S+this.by)*S+this.cy)*S},s.prototype.sampleCurveDerivativeX=function(S){return(3*this.ax*S+2*this.bx)*S+this.cx},s.prototype.solveCurveX=function(S,D){var X,ue,Ae,Pe,je;for(D===void 0&&(D=1e-6),Ae=S,je=0;je<8;je++){if(Pe=this.sampleCurveX(Ae)-S,Math.abs(Pe)<D)return Ae;var $e=this.sampleCurveDerivativeX(Ae);if(Math.abs($e)<1e-6)break;Ae-=Pe/$e}if((Ae=S)<(X=0))return X;if(Ae>(ue=1))return ue;for(;X<ue;){if(Pe=this.sampleCurveX(Ae),Math.abs(Pe-S)<D)return Ae;S>Pe?X=Ae:ue=Ae,Ae=.5*(ue-X)+X}return Ae},s.prototype.solve=function(S,D){return this.sampleCurveY(this.solveCurveX(S,D))};var n=a;function a(S,D){this.x=S,this.y=D}a.prototype={clone:function(){return new a(this.x,this.y)},add:function(S){return this.clone()._add(S)},sub:function(S){return this.clone()._sub(S)},multByPoint:function(S){return this.clone()._multByPoint(S)},divByPoint:function(S){return this.clone()._divByPoint(S)},mult:function(S){return this.clone()._mult(S)},div:function(S){return this.clone()._div(S)},rotate:function(S){return this.clone()._rotate(S)},rotateAround:function(S,D){return this.clone()._rotateAround(S,D)},matMult:function(S){return this.clone()._matMult(S)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(S){return this.x===S.x&&this.y===S.y},dist:function(S){return Math.sqrt(this.distSqr(S))},distSqr:function(S){var D=S.x-this.x,X=S.y-this.y;return D*D+X*X},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(S){return Math.atan2(this.y-S.y,this.x-S.x)},angleWith:function(S){return this.angleWithSep(S.x,S.y)},angleWithSep:function(S,D){return Math.atan2(this.x*D-this.y*S,this.x*S+this.y*D)},_matMult:function(S){var D=S[0]*this.x+S[1]*this.y,X=S[2]*this.x+S[3]*this.y;return this.x=D,this.y=X,this},_add:function(S){return this.x+=S.x,this.y+=S.y,this},_sub:function(S){return this.x-=S.x,this.y-=S.y,this},_mult:function(S){return this.x*=S,this.y*=S,this},_div:function(S){return this.x/=S,this.y/=S,this},_multByPoint:function(S){return this.x*=S.x,this.y*=S.y,this},_divByPoint:function(S){return this.x/=S.x,this.y/=S.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var S=this.y;return this.y=this.x,this.x=-S,this},_rotate:function(S){var D=Math.cos(S),X=Math.sin(S),ue=D*this.x-X*this.y,Ae=X*this.x+D*this.y;return this.x=ue,this.y=Ae,this},_rotateAround:function(S,D){var X=Math.cos(S),ue=Math.sin(S),Ae=D.x+X*(this.x-D.x)-ue*(this.y-D.y),Pe=D.y+ue*(this.x-D.x)+X*(this.y-D.y);return this.x=Ae,this.y=Pe,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},a.convert=function(S){return S instanceof a?S:Array.isArray(S)?new a(S[0],S[1]):S};var r=typeof self<"u"?self:{},i=Math.pow(2,53)-1;function l(S,D,X,ue){var Ae=new p(S,D,X,ue);return function(Pe){return Ae.solve(Pe)}}var u=l(.25,.1,.25,1);function c(S,D,X){return Math.min(X,Math.max(D,S))}function g(S,D,X){var ue=X-D,Ae=((S-D)%ue+ue)%ue+D;return Ae===D?X:Ae}function f(S){for(var D=[],X=arguments.length-1;X-- >0;)D[X]=arguments[X+1];for(var ue=0,Ae=D;ue<Ae.length;ue+=1){var Pe=Ae[ue];for(var je in Pe)S[je]=Pe[je]}return S}var b=1;function v(){return b++}function d(){return function S(D){return D?(D^16*Math.random()>>D/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,S)}()}function m(S){return!!S&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(S)}function x(S,D){S.forEach(function(X){D[X]&&(D[X]=D[X].bind(D))})}function y(S,D){return S.indexOf(D,S.length-D.length)!==-1}function T(S,D,X){var ue={};for(var Ae in S)ue[Ae]=D.call(X||this,S[Ae],Ae,S);return ue}function h(S,D,X){var ue={};for(var Ae in S)D.call(X||this,S[Ae],Ae,S)&&(ue[Ae]=S[Ae]);return ue}function E(S){return Array.isArray(S)?S.map(E):typeof S=="object"&&S?T(S,E):S}var k={};function L(S){k[S]||(typeof console<"u"&&console.warn(S),k[S]=!0)}function P(S,D,X){return(X.y-S.y)*(D.x-S.x)>(D.y-S.y)*(X.x-S.x)}function I(S){for(var D=0,X=0,ue=S.length,Ae=ue-1,Pe=void 0,je=void 0;X<ue;Ae=X++)Pe=S[X],D+=((je=S[Ae]).x-Pe.x)*(Pe.y+je.y);return D}function z(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function F(S){var D={};if(S.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(ue,Ae,Pe,je){var $e=Pe||je;return D[Ae]=!$e||$e.toLowerCase(),""}),D["max-age"]){var X=parseInt(D["max-age"],10);isNaN(X)?delete D["max-age"]:D["max-age"]=X}return D}var U=null;function R(S){if(U==null){var D=S.navigator?S.navigator.userAgent:null;U=!!S.safari||!(!D||!(/\b(iPad|iPhone|iPod)\b/.test(D)||D.match("Safari")&&!D.match("Chrome")))}return U}function j(S){try{var D=r[S];return D.setItem("_mapbox_test_",1),D.removeItem("_mapbox_test_"),!0}catch{return!1}}var Z,B,q,V,ne=r.performance&&r.performance.now?r.performance.now.bind(r.performance):Date.now.bind(Date),ee=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame,$=r.cancelAnimationFrame||r.mozCancelAnimationFrame||r.webkitCancelAnimationFrame||r.msCancelAnimationFrame,J={now:ne,frame:function(S){var D=ee(S);return{cancel:function(){return $(D)}}},getImageData:function(S,D){D===void 0&&(D=0);var X=r.document.createElement("canvas"),ue=X.getContext("2d");if(!ue)throw new Error("failed to create canvas 2d context");return X.width=S.width,X.height=S.height,ue.drawImage(S,0,0,S.width,S.height),ue.getImageData(-D,-D,S.width+2*D,S.height+2*D)},resolveURL:function(S){return Z||(Z=r.document.createElement("a")),Z.href=S,Z.href},hardwareConcurrency:r.navigator&&r.navigator.hardwareConcurrency||4,get devicePixelRatio(){return r.devicePixelRatio},get prefersReducedMotion(){return!!r.matchMedia&&(B==null&&(B=r.matchMedia("(prefers-reduced-motion: reduce)")),B.matches)}},K={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},te={supported:!1,testSupport:function(S){!ie&&V&&(ae?se(S):q=S)}},ie=!1,ae=!1;function se(S){var D=S.createTexture();S.bindTexture(S.TEXTURE_2D,D);try{if(S.texImage2D(S.TEXTURE_2D,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,V),S.isContextLost())return;te.supported=!0}catch{}S.deleteTexture(D),ie=!0}r.document&&((V=r.document.createElement("img")).onload=function(){q&&se(q),q=null,ae=!0},V.onerror=function(){ie=!0,q=null},V.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ce="01",de=function(S,D){this._transformRequestFn=S,this._customAccessToken=D,this._createSkuToken()};function ge(S){return S.indexOf("mapbox:")===0}de.prototype._createSkuToken=function(){var S=function(){for(var D="",X=0;X<10;X++)D+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ce,D].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=S.token,this._skuTokenExpiresAt=S.tokenExpiresAt},de.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},de.prototype.transformRequest=function(S,D){return this._transformRequestFn&&this._transformRequestFn(S,D)||{url:S}},de.prototype.normalizeStyleURL=function(S,D){if(!ge(S))return S;var X=Se(S);return X.path="/styles/v1"+X.path,this._makeAPIURL(X,this._customAccessToken||D)},de.prototype.normalizeGlyphsURL=function(S,D){if(!ge(S))return S;var X=Se(S);return X.path="/fonts/v1"+X.path,this._makeAPIURL(X,this._customAccessToken||D)},de.prototype.normalizeSourceURL=function(S,D){if(!ge(S))return S;var X=Se(S);return X.path="/v4/"+X.authority+".json",X.params.push("secure"),this._makeAPIURL(X,this._customAccessToken||D)},de.prototype.normalizeSpriteURL=function(S,D,X,ue){var Ae=Se(S);return ge(S)?(Ae.path="/styles/v1"+Ae.path+"/sprite"+D+X,this._makeAPIURL(Ae,this._customAccessToken||ue)):(Ae.path+=""+D+X,we(Ae))},de.prototype.normalizeTileURL=function(S,D){if(this._isSkuTokenExpired()&&this._createSkuToken(),S&&!ge(S))return S;var X=Se(S),ue=J.devicePixelRatio>=2||D===512?"@2x":"",Ae=te.supported?".webp":"$1";X.path=X.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+ue+Ae),X.path=X.path.replace(/^.+\/v4\//,"/"),X.path="/v4"+X.path;var Pe=this._customAccessToken||function(je){for(var $e=0,ut=je;$e<ut.length;$e+=1){var wt=ut[$e].match(/^access_token=(.*)$/);if(wt)return wt[1]}return null}(X.params)||K.ACCESS_TOKEN;return K.REQUIRE_ACCESS_TOKEN&&Pe&&this._skuToken&&X.params.push("sku="+this._skuToken),this._makeAPIURL(X,Pe)},de.prototype.canonicalizeTileURL=function(S,D){var X=Se(S);if(!X.path.match(/(^\/v4\/)/)||!X.path.match(/\.[\w]+$/))return S;var ue="mapbox://tiles/";ue+=X.path.replace("/v4/","");var Ae=X.params;return D&&(Ae=Ae.filter(function(Pe){return!Pe.match(/^access_token=/)})),Ae.length&&(ue+="?"+Ae.join("&")),ue},de.prototype.canonicalizeTileset=function(S,D){for(var X=!!D&&ge(D),ue=[],Ae=0,Pe=S.tiles||[];Ae<Pe.length;Ae+=1){var je=Pe[Ae];be(je)?ue.push(this.canonicalizeTileURL(je,X)):ue.push(je)}return ue},de.prototype._makeAPIURL=function(S,D){var X="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ue=Se(K.API_URL);if(S.protocol=ue.protocol,S.authority=ue.authority,S.protocol==="http"){var Ae=S.params.indexOf("secure");Ae>=0&&S.params.splice(Ae,1)}if(ue.path!=="/"&&(S.path=""+ue.path+S.path),!K.REQUIRE_ACCESS_TOKEN)return we(S);if(!(D=D||K.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+X);if(D[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+X);return S.params=S.params.filter(function(Pe){return Pe.indexOf("access_token")===-1}),S.params.push("access_token="+D),we(S)};var ve=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function be(S){return ve.test(S)}var me=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Se(S){var D=S.match(me);if(!D)throw new Error("Unable to parse URL object");return{protocol:D[1],authority:D[2],path:D[3]||"/",params:D[4]?D[4].split("&"):[]}}function we(S){var D=S.params.length?"?"+S.params.join("&"):"";return S.protocol+"://"+S.authority+S.path+D}var _e="mapbox.eventData";function oe(S){if(!S)return null;var D,X=S.split(".");if(!X||X.length!==3)return null;try{return JSON.parse((D=X[1],decodeURIComponent(r.atob(D).split("").map(function(ue){return"%"+("00"+ue.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch{return null}}var le=function(S){this.type=S,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};le.prototype.getStorageKey=function(S){var D,X,ue=oe(K.ACCESS_TOKEN);return D=ue&&ue.u?(X=ue.u,r.btoa(encodeURIComponent(X).replace(/%([0-9A-F]{2})/g,function(Ae,Pe){return String.fromCharCode(+("0x"+Pe))}))):K.ACCESS_TOKEN||"",S?_e+"."+S+":"+D:_e+":"+D},le.prototype.fetchEventData=function(){var S=j("localStorage"),D=this.getStorageKey(),X=this.getStorageKey("uuid");if(S)try{var ue=r.localStorage.getItem(D);ue&&(this.eventData=JSON.parse(ue));var Ae=r.localStorage.getItem(X);Ae&&(this.anonId=Ae)}catch{L("Unable to read from LocalStorage")}},le.prototype.saveEventData=function(){var S=j("localStorage"),D=this.getStorageKey(),X=this.getStorageKey("uuid");if(S)try{r.localStorage.setItem(X,this.anonId),Object.keys(this.eventData).length>=1&&r.localStorage.setItem(D,JSON.stringify(this.eventData))}catch{L("Unable to write to LocalStorage")}},le.prototype.processRequests=function(S){},le.prototype.postEvent=function(S,D,X,ue){var Ae=this;if(K.EVENTS_URL){var Pe=Se(K.EVENTS_URL);Pe.params.push("access_token="+(ue||K.ACCESS_TOKEN||""));var je={event:this.type,created:new Date(S).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:_,skuId:ce,userId:this.anonId},$e=D?f(je,D):je,ut={url:we(Pe),headers:{"Content-Type":"text/plain"},body:JSON.stringify([$e])};this.pendingRequest=It(ut,function(wt){Ae.pendingRequest=null,X(wt),Ae.saveEventData(),Ae.processRequests(ue)})}},le.prototype.queueRequest=function(S,D){this.queue.push(S),this.processRequests(D)};var pe,Ee,Te=function(S){function D(){S.call(this,"map.load"),this.success={},this.skuToken=""}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.postMapLoadEvent=function(X,ue,Ae,Pe){this.skuToken=Ae,(K.EVENTS_URL&&Pe||K.ACCESS_TOKEN&&Array.isArray(X)&&X.some(function(je){return ge(je)||be(je)}))&&this.queueRequest({id:ue,timestamp:Date.now()},Pe)},D.prototype.processRequests=function(X){var ue=this;if(!this.pendingRequest&&this.queue.length!==0){var Ae=this.queue.shift(),Pe=Ae.id,je=Ae.timestamp;Pe&&this.success[Pe]||(this.anonId||this.fetchEventData(),m(this.anonId)||(this.anonId=d()),this.postEvent(je,{skuToken:this.skuToken},function($e){$e||Pe&&(ue.success[Pe]=!0)},X))}},D}(le),Me=function(S){function D(X){S.call(this,"appUserTurnstile"),this._customAccessToken=X}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.postTurnstileEvent=function(X,ue){K.EVENTS_URL&&K.ACCESS_TOKEN&&Array.isArray(X)&&X.some(function(Ae){return ge(Ae)||be(Ae)})&&this.queueRequest(Date.now(),ue)},D.prototype.processRequests=function(X){var ue=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var Ae=oe(K.ACCESS_TOKEN),Pe=Ae?Ae.u:K.ACCESS_TOKEN,je=Pe!==this.eventData.tokenU;m(this.anonId)||(this.anonId=d(),je=!0);var $e=this.queue.shift();if(this.eventData.lastSuccess){var ut=new Date(this.eventData.lastSuccess),wt=new Date($e),Mt=($e-this.eventData.lastSuccess)/864e5;je=je||Mt>=1||Mt<-1||ut.getDate()!==wt.getDate()}else je=!0;if(!je)return this.processRequests();this.postEvent($e,{"enabled.telemetry":!1},function(Nt){Nt||(ue.eventData.lastSuccess=$e,ue.eventData.tokenU=Pe)},X)}},D}(le),Le=new Me,Ie=Le.postTurnstileEvent.bind(Le),he=new Te,xe=he.postMapLoadEvent.bind(he),ke="mapbox-tiles",ze=500,Re=50,Oe=42e4;function Ve(){r.caches&&!pe&&(pe=r.caches.open(ke))}function qe(S,D,X){if(Ve(),pe){var ue={status:D.status,statusText:D.statusText,headers:new r.Headers};D.headers.forEach(function(Pe,je){return ue.headers.set(je,Pe)});var Ae=F(D.headers.get("Cache-Control")||"");Ae["no-store"]||(Ae["max-age"]&&ue.headers.set("Expires",new Date(X+1e3*Ae["max-age"]).toUTCString()),new Date(ue.headers.get("Expires")).getTime()-X<Oe||function(Pe,je){if(Ee===void 0)try{new Response(new ReadableStream),Ee=!0}catch{Ee=!1}Ee?je(Pe.body):Pe.blob().then(je)}(D,function(Pe){var je=new r.Response(Pe,ue);Ve(),pe&&pe.then(function($e){return $e.put(Je(S.url),je)}).catch(function($e){return L($e.message)})}))}}function Je(S){var D=S.indexOf("?");return D<0?S:S.slice(0,D)}function ot(S,D){if(Ve(),!pe)return D(null);var X=Je(S.url);pe.then(function(ue){ue.match(X).then(function(Ae){var Pe=function(je){if(!je)return!1;var $e=new Date(je.headers.get("Expires")||0),ut=F(je.headers.get("Cache-Control")||"");return $e>Date.now()&&!ut["no-cache"]}(Ae);ue.delete(X),Pe&&ue.put(X,Ae.clone()),D(null,Ae,Pe)}).catch(D)}).catch(D)}var rt,dt=1/0;function _t(){return rt==null&&(rt=r.OffscreenCanvas&&new r.OffscreenCanvas(1,1).getContext("2d")&&typeof r.createImageBitmap=="function"),rt}var yt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(yt);var et=function(S){function D(X,ue,Ae){ue===401&&be(Ae)&&(X+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),S.call(this,X),this.status=ue,this.url=Ae,this.name=this.constructor.name,this.message=X}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},D}(Error),nt=z()?function(){return self.worker&&self.worker.referrer}:function(){return(r.location.protocol==="blob:"?r.parent:r).location.href};function At(S,D){var X,ue=new r.AbortController,Ae=new r.Request(S.url,{method:S.method||"GET",body:S.body,credentials:S.credentials,headers:S.headers,referrer:nt(),signal:ue.signal}),Pe=!1,je=!1,$e=(X=Ae.url).indexOf("sku=")>0&&be(X);S.type==="json"&&Ae.headers.set("Accept","application/json");var ut=function(Mt,Nt,Wt){if(!je){if(Mt&&Mt.message!=="SecurityError"&&L(Mt),Nt&&Wt)return wt(Nt);var Ut=Date.now();r.fetch(Ae).then(function(ln){if(ln.ok){var fn=$e?ln.clone():null;return wt(ln,fn,Ut)}return D(new et(ln.statusText,ln.status,S.url))}).catch(function(ln){ln.code!==20&&D(new Error(ln.message))})}},wt=function(Mt,Nt,Wt){(S.type==="arrayBuffer"?Mt.arrayBuffer():S.type==="json"?Mt.json():Mt.text()).then(function(Ut){je||(Nt&&Wt&&qe(Ae,Nt,Wt),Pe=!0,D(null,Ut,Mt.headers.get("Cache-Control"),Mt.headers.get("Expires")))}).catch(function(Ut){je||D(new Error(Ut.message))})};return $e?ot(Ae,ut):ut(null,null),{cancel:function(){je=!0,Pe||ue.abort()}}}var Rt=function(S,D){if(X=S.url,!(/^file:/.test(X)||/^file:/.test(nt())&&!/^\w+:/.test(X))){if(r.fetch&&r.Request&&r.AbortController&&r.Request.prototype.hasOwnProperty("signal"))return At(S,D);if(z()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",S,D,void 0,!0)}var X;return function(ue,Ae){var Pe=new r.XMLHttpRequest;for(var je in Pe.open(ue.method||"GET",ue.url,!0),ue.type==="arrayBuffer"&&(Pe.responseType="arraybuffer"),ue.headers)Pe.setRequestHeader(je,ue.headers[je]);return ue.type==="json"&&(Pe.responseType="text",Pe.setRequestHeader("Accept","application/json")),Pe.withCredentials=ue.credentials==="include",Pe.onerror=function(){Ae(new Error(Pe.statusText))},Pe.onload=function(){if((Pe.status>=200&&Pe.status<300||Pe.status===0)&&Pe.response!==null){var $e=Pe.response;if(ue.type==="json")try{$e=JSON.parse(Pe.response)}catch(ut){return Ae(ut)}Ae(null,$e,Pe.getResponseHeader("Cache-Control"),Pe.getResponseHeader("Expires"))}else Ae(new et(Pe.statusText,Pe.status,ue.url))},Pe.send(ue.body),{cancel:function(){return Pe.abort()}}}(S,D)},Ft=function(S,D){return Rt(f(S,{type:"arrayBuffer"}),D)},It=function(S,D){return Rt(f(S,{method:"POST"}),D)},Ge,Ye,Ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Ge=[],Ye=0;var We=function(S,D){if(te.supported&&(S.headers||(S.headers={}),S.headers.accept="image/webp,*/*"),Ye>=K.MAX_PARALLEL_IMAGE_REQUESTS){var X={requestParameters:S,callback:D,cancelled:!1,cancel:function(){this.cancelled=!0}};return Ge.push(X),X}Ye++;var ue=!1,Ae=function(){if(!ue)for(ue=!0,Ye--;Ge.length&&Ye<K.MAX_PARALLEL_IMAGE_REQUESTS;){var je=Ge.shift(),$e=je.requestParameters,ut=je.callback;je.cancelled||(je.cancel=We($e,ut).cancel)}},Pe=Ft(S,function(je,$e,ut,wt){Ae(),je?D(je):$e&&(_t()?function(Mt,Nt){var Wt=new r.Blob([new Uint8Array(Mt)],{type:"image/png"});r.createImageBitmap(Wt).then(function(Ut){Nt(null,Ut)}).catch(function(Ut){Nt(new Error("Could not load image because of "+Ut.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}($e,D):function(Mt,Nt,Wt,Ut){var ln=new r.Image,fn=r.URL;ln.onload=function(){Nt(null,ln),fn.revokeObjectURL(ln.src),ln.onload=null,r.requestAnimationFrame(function(){ln.src=Ne})},ln.onerror=function(){return Nt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Mn=new r.Blob([new Uint8Array(Mt)],{type:"image/png"});ln.cacheControl=Wt,ln.expires=Ut,ln.src=Mt.byteLength?fn.createObjectURL(Mn):Ne}($e,D,ut,wt))});return{cancel:function(){Pe.cancel(),Ae()}}};function st(S,D,X){X[S]&&X[S].indexOf(D)!==-1||(X[S]=X[S]||[],X[S].push(D))}function it(S,D,X){if(X&&X[S]){var ue=X[S].indexOf(D);ue!==-1&&X[S].splice(ue,1)}}var Fe=function(S,D){D===void 0&&(D={}),f(this,D),this.type=S},Be=function(S){function D(X,ue){ue===void 0&&(ue={}),S.call(this,"error",f({error:X},ue))}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D}(Fe),at=function(){};at.prototype.on=function(S,D){return this._listeners=this._listeners||{},st(S,D,this._listeners),this},at.prototype.off=function(S,D){return it(S,D,this._listeners),it(S,D,this._oneTimeListeners),this},at.prototype.once=function(S,D){return this._oneTimeListeners=this._oneTimeListeners||{},st(S,D,this._oneTimeListeners),this},at.prototype.fire=function(S,D){typeof S=="string"&&(S=new Fe(S,D||{}));var X=S.type;if(this.listens(X)){S.target=this;for(var ue=0,Ae=this._listeners&&this._listeners[X]?this._listeners[X].slice():[];ue<Ae.length;ue+=1)Ae[ue].call(this,S);for(var Pe=0,je=this._oneTimeListeners&&this._oneTimeListeners[X]?this._oneTimeListeners[X].slice():[];Pe<je.length;Pe+=1){var $e=je[Pe];it(X,$e,this._oneTimeListeners),$e.call(this,S)}var ut=this._eventedParent;ut&&(f(S,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),ut.fire(S))}else S instanceof Be&&console.error(S.error);return this},at.prototype.listens=function(S){return this._listeners&&this._listeners[S]&&this._listeners[S].length>0||this._oneTimeListeners&&this._oneTimeListeners[S]&&this._oneTimeListeners[S].length>0||this._eventedParent&&this._eventedParent.listens(S)},at.prototype.setEventedParent=function(S,D){return this._eventedParent=S,this._eventedParentData=D,this};var Ze={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ht=function(S,D,X,ue){this.message=(S?S+": ":"")+X,ue&&(this.identifier=ue),D!=null&&D.__line__&&(this.line=D.__line__)};function vt(S){var D=S.key,X=S.value;return X?[new ht(D,X,"constants have been deprecated as of v8")]:[]}function mt(S){for(var D=[],X=arguments.length-1;X-- >0;)D[X]=arguments[X+1];for(var ue=0,Ae=D;ue<Ae.length;ue+=1){var Pe=Ae[ue];for(var je in Pe)S[je]=Pe[je]}return S}function ft(S){return S instanceof Number||S instanceof String||S instanceof Boolean?S.valueOf():S}function Et(S){if(Array.isArray(S))return S.map(Et);if(S instanceof Object&&!(S instanceof Number||S instanceof String||S instanceof Boolean)){var D={};for(var X in S)D[X]=Et(S[X]);return D}return ft(S)}var Tt=function(S){function D(X,ue){S.call(this,ue),this.message=ue,this.key=X}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D}(Error),xt=function(S,D){D===void 0&&(D=[]),this.parent=S,this.bindings={};for(var X=0,ue=D;X<ue.length;X+=1){var Ae=ue[X],Pe=Ae[0],je=Ae[1];this.bindings[Pe]=je}};xt.prototype.concat=function(S){return new xt(this,S)},xt.prototype.get=function(S){if(this.bindings[S])return this.bindings[S];if(this.parent)return this.parent.get(S);throw new Error(S+" not found in scope.")},xt.prototype.has=function(S){return!!this.bindings[S]||!!this.parent&&this.parent.has(S)};var Ct={kind:"null"},Pt={kind:"number"},Bt={kind:"string"},Kt={kind:"boolean"},sn={kind:"color"},Gt={kind:"object"},Yt={kind:"value"},rn={kind:"collator"},Ln={kind:"formatted"},Sn={kind:"resolvedImage"};function gn(S,D){return{kind:"array",itemType:S,N:D}}function $t(S){if(S.kind==="array"){var D=$t(S.itemType);return typeof S.N=="number"?"array<"+D+", "+S.N+">":S.itemType.kind==="value"?"array":"array<"+D+">"}return S.kind}var cn=[Ct,Pt,Bt,Kt,sn,Ln,Gt,gn(Yt),Sn];function an(S,D){if(D.kind==="error")return null;if(S.kind==="array"){if(D.kind==="array"&&(D.N===0&&D.itemType.kind==="value"||!an(S.itemType,D.itemType))&&(typeof S.N!="number"||S.N===D.N))return null}else{if(S.kind===D.kind)return null;if(S.kind==="value"){for(var X=0,ue=cn;X<ue.length;X+=1)if(!an(ue[X],D))return null}}return"Expected "+$t(S)+" but found "+$t(D)+" instead."}function pn(S,D){return D.some(function(X){return X.kind===S.kind})}function An(S,D){return D.some(function(X){return X==="null"?S===null:X==="array"?Array.isArray(S):X==="object"?S&&!Array.isArray(S)&&typeof S=="object":X===typeof S})}var Cn=w(function(S,D){var X={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ue(ut){return(ut=Math.round(ut))<0?0:ut>255?255:ut}function Ae(ut){return ut<0?0:ut>1?1:ut}function Pe(ut){return ut[ut.length-1]==="%"?ue(parseFloat(ut)/100*255):ue(parseInt(ut))}function je(ut){return ut[ut.length-1]==="%"?Ae(parseFloat(ut)/100):Ae(parseFloat(ut))}function $e(ut,wt,Mt){return Mt<0?Mt+=1:Mt>1&&(Mt-=1),6*Mt<1?ut+(wt-ut)*Mt*6:2*Mt<1?wt:3*Mt<2?ut+(wt-ut)*(2/3-Mt)*6:ut}try{D.parseCSSColor=function(ut){var wt,Mt=ut.replace(/ /g,"").toLowerCase();if(Mt in X)return X[Mt].slice();if(Mt[0]==="#")return Mt.length===4?(wt=parseInt(Mt.substr(1),16))>=0&&wt<=4095?[(3840&wt)>>4|(3840&wt)>>8,240&wt|(240&wt)>>4,15&wt|(15&wt)<<4,1]:null:Mt.length===7&&(wt=parseInt(Mt.substr(1),16))>=0&&wt<=16777215?[(16711680&wt)>>16,(65280&wt)>>8,255&wt,1]:null;var Nt=Mt.indexOf("("),Wt=Mt.indexOf(")");if(Nt!==-1&&Wt+1===Mt.length){var Ut=Mt.substr(0,Nt),ln=Mt.substr(Nt+1,Wt-(Nt+1)).split(","),fn=1;switch(Ut){case"rgba":if(ln.length!==4)return null;fn=je(ln.pop());case"rgb":return ln.length!==3?null:[Pe(ln[0]),Pe(ln[1]),Pe(ln[2]),fn];case"hsla":if(ln.length!==4)return null;fn=je(ln.pop());case"hsl":if(ln.length!==3)return null;var Mn=(parseFloat(ln[0])%360+360)%360/360,Tn=je(ln[1]),Nn=je(ln[2]),Vn=Nn<=.5?Nn*(Tn+1):Nn+Tn-Nn*Tn,Zn=2*Nn-Vn;return[ue(255*$e(Zn,Vn,Mn+1/3)),ue(255*$e(Zn,Vn,Mn)),ue(255*$e(Zn,Vn,Mn-1/3)),fn];default:return null}}return null}}catch{}}),Rn=Cn.parseCSSColor,Fn=function(S,D,X,ue){ue===void 0&&(ue=1),this.r=S,this.g=D,this.b=X,this.a=ue};Fn.parse=function(S){if(S){if(S instanceof Fn)return S;if(typeof S=="string"){var D=Rn(S);if(D)return new Fn(D[0]/255*D[3],D[1]/255*D[3],D[2]/255*D[3],D[3])}}},Fn.prototype.toString=function(){var S=this.toArray(),D=S[0],X=S[1],ue=S[2],Ae=S[3];return"rgba("+Math.round(D)+","+Math.round(X)+","+Math.round(ue)+","+Ae+")"},Fn.prototype.toArray=function(){var S=this,D=S.r,X=S.g,ue=S.b,Ae=S.a;return Ae===0?[0,0,0,0]:[255*D/Ae,255*X/Ae,255*ue/Ae,Ae]},Fn.black=new Fn(0,0,0,1),Fn.white=new Fn(1,1,1,1),Fn.transparent=new Fn(0,0,0,0),Fn.red=new Fn(1,0,0,1);var In=function(S,D,X){this.sensitivity=S?D?"variant":"case":D?"accent":"base",this.locale=X,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};In.prototype.compare=function(S,D){return this.collator.compare(S,D)},In.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Hn=function(S,D,X,ue,Ae){this.text=S,this.image=D,this.scale=X,this.fontStack=ue,this.textColor=Ae},Un=function(S){this.sections=S};Un.fromString=function(S){return new Un([new Hn(S,null,null,null,null)])},Un.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(S){return S.text.length!==0||S.image&&S.image.name.length!==0})},Un.factory=function(S){return S instanceof Un?S:Un.fromString(S)},Un.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(S){return S.text}).join("")},Un.prototype.serialize=function(){for(var S=["format"],D=0,X=this.sections;D<X.length;D+=1){var ue=X[D];if(ue.image)S.push(["image",ue.image.name]);else{S.push(ue.text);var Ae={};ue.fontStack&&(Ae["text-font"]=["literal",ue.fontStack.split(",")]),ue.scale&&(Ae["font-scale"]=ue.scale),ue.textColor&&(Ae["text-color"]=["rgba"].concat(ue.textColor.toArray())),S.push(Ae)}}return S};var ar=function(S){this.name=S.name,this.available=S.available};function ur(S,D,X,ue){return typeof S=="number"&&S>=0&&S<=255&&typeof D=="number"&&D>=0&&D<=255&&typeof X=="number"&&X>=0&&X<=255?ue===void 0||typeof ue=="number"&&ue>=0&&ue<=1?null:"Invalid rgba value ["+[S,D,X,ue].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof ue=="number"?[S,D,X,ue]:[S,D,X]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function cr(S){if(S===null||typeof S=="string"||typeof S=="boolean"||typeof S=="number"||S instanceof Fn||S instanceof In||S instanceof Un||S instanceof ar)return!0;if(Array.isArray(S)){for(var D=0,X=S;D<X.length;D+=1)if(!cr(X[D]))return!1;return!0}if(typeof S=="object"){for(var ue in S)if(!cr(S[ue]))return!1;return!0}return!1}function er(S){if(S===null)return Ct;if(typeof S=="string")return Bt;if(typeof S=="boolean")return Kt;if(typeof S=="number")return Pt;if(S instanceof Fn)return sn;if(S instanceof In)return rn;if(S instanceof Un)return Ln;if(S instanceof ar)return Sn;if(Array.isArray(S)){for(var D,X=S.length,ue=0,Ae=S;ue<Ae.length;ue+=1){var Pe=er(Ae[ue]);if(D){if(D===Pe)continue;D=Yt;break}D=Pe}return gn(D||Yt,X)}return Gt}function Tr(S){var D=typeof S;return S===null?"":D==="string"||D==="number"||D==="boolean"?String(S):S instanceof Fn||S instanceof Un||S instanceof ar?S.toString():JSON.stringify(S)}ar.prototype.toString=function(){return this.name},ar.fromString=function(S){return S?new ar({name:S,available:!1}):null},ar.prototype.serialize=function(){return["image",this.name]};var Ht=function(S,D){this.type=S,this.value=D};Ht.parse=function(S,D){if(S.length!==2)return D.error("'literal' expression requires exactly one argument, but found "+(S.length-1)+" instead.");if(!cr(S[1]))return D.error("invalid value");var X=S[1],ue=er(X),Ae=D.expectedType;return ue.kind!=="array"||ue.N!==0||!Ae||Ae.kind!=="array"||typeof Ae.N=="number"&&Ae.N!==0||(ue=Ae),new Ht(ue,X)},Ht.prototype.evaluate=function(){return this.value},Ht.prototype.eachChild=function(){},Ht.prototype.outputDefined=function(){return!0},Ht.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Fn?["rgba"].concat(this.value.toArray()):this.value instanceof Un?this.value.serialize():this.value};var on=function(S){this.name="ExpressionEvaluationError",this.message=S};on.prototype.toJSON=function(){return this.message};var wn={string:Bt,number:Pt,boolean:Kt,object:Gt},mn=function(S,D){this.type=S,this.args=D};mn.parse=function(S,D){if(S.length<2)return D.error("Expected at least one argument.");var X,ue=1,Ae=S[0];if(Ae==="array"){var Pe,je;if(S.length>2){var $e=S[1];if(typeof $e!="string"||!($e in wn)||$e==="object")return D.error('The item type argument of "array" must be one of string, number, boolean',1);Pe=wn[$e],ue++}else Pe=Yt;if(S.length>3){if(S[2]!==null&&(typeof S[2]!="number"||S[2]<0||S[2]!==Math.floor(S[2])))return D.error('The length argument to "array" must be a positive integer literal',2);je=S[2],ue++}X=gn(Pe,je)}else X=wn[Ae];for(var ut=[];ue<S.length;ue++){var wt=D.parse(S[ue],ue,Yt);if(!wt)return null;ut.push(wt)}return new mn(X,ut)},mn.prototype.evaluate=function(S){for(var D=0;D<this.args.length;D++){var X=this.args[D].evaluate(S);if(!an(this.type,er(X)))return X;if(D===this.args.length-1)throw new on("Expected value to be of type "+$t(this.type)+", but found "+$t(er(X))+" instead.")}return null},mn.prototype.eachChild=function(S){this.args.forEach(S)},mn.prototype.outputDefined=function(){return this.args.every(function(S){return S.outputDefined()})},mn.prototype.serialize=function(){var S=this.type,D=[S.kind];if(S.kind==="array"){var X=S.itemType;if(X.kind==="string"||X.kind==="number"||X.kind==="boolean"){D.push(X.kind);var ue=S.N;(typeof ue=="number"||this.args.length>1)&&D.push(ue)}}return D.concat(this.args.map(function(Ae){return Ae.serialize()}))};var Pn=function(S){this.type=Ln,this.sections=S};Pn.parse=function(S,D){if(S.length<2)return D.error("Expected at least one argument.");var X=S[1];if(!Array.isArray(X)&&typeof X=="object")return D.error("First argument must be an image or text section.");for(var ue=[],Ae=!1,Pe=1;Pe<=S.length-1;++Pe){var je=S[Pe];if(Ae&&typeof je=="object"&&!Array.isArray(je)){Ae=!1;var $e=null;if(je["font-scale"]&&!($e=D.parse(je["font-scale"],1,Pt)))return null;var ut=null;if(je["text-font"]&&!(ut=D.parse(je["text-font"],1,gn(Bt))))return null;var wt=null;if(je["text-color"]&&!(wt=D.parse(je["text-color"],1,sn)))return null;var Mt=ue[ue.length-1];Mt.scale=$e,Mt.font=ut,Mt.textColor=wt}else{var Nt=D.parse(S[Pe],1,Yt);if(!Nt)return null;var Wt=Nt.type.kind;if(Wt!=="string"&&Wt!=="value"&&Wt!=="null"&&Wt!=="resolvedImage")return D.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Ae=!0,ue.push({content:Nt,scale:null,font:null,textColor:null})}}return new Pn(ue)},Pn.prototype.evaluate=function(S){return new Un(this.sections.map(function(D){var X=D.content.evaluate(S);return er(X)===Sn?new Hn("",X,null,null,null):new Hn(Tr(X),null,D.scale?D.scale.evaluate(S):null,D.font?D.font.evaluate(S).join(","):null,D.textColor?D.textColor.evaluate(S):null)}))},Pn.prototype.eachChild=function(S){for(var D=0,X=this.sections;D<X.length;D+=1){var ue=X[D];S(ue.content),ue.scale&&S(ue.scale),ue.font&&S(ue.font),ue.textColor&&S(ue.textColor)}},Pn.prototype.outputDefined=function(){return!1},Pn.prototype.serialize=function(){for(var S=["format"],D=0,X=this.sections;D<X.length;D+=1){var ue=X[D];S.push(ue.content.serialize());var Ae={};ue.scale&&(Ae["font-scale"]=ue.scale.serialize()),ue.font&&(Ae["text-font"]=ue.font.serialize()),ue.textColor&&(Ae["text-color"]=ue.textColor.serialize()),S.push(Ae)}return S};var Wn=function(S){this.type=Sn,this.input=S};Wn.parse=function(S,D){if(S.length!==2)return D.error("Expected two arguments.");var X=D.parse(S[1],1,Bt);return X?new Wn(X):D.error("No image name provided.")},Wn.prototype.evaluate=function(S){var D=this.input.evaluate(S),X=ar.fromString(D);return X&&S.availableImages&&(X.available=S.availableImages.indexOf(D)>-1),X},Wn.prototype.eachChild=function(S){S(this.input)},Wn.prototype.outputDefined=function(){return!1},Wn.prototype.serialize=function(){return["image",this.input.serialize()]};var Bn={"to-boolean":Kt,"to-color":sn,"to-number":Pt,"to-string":Bt},jn=function(S,D){this.type=S,this.args=D};jn.parse=function(S,D){if(S.length<2)return D.error("Expected at least one argument.");var X=S[0];if((X==="to-boolean"||X==="to-string")&&S.length!==2)return D.error("Expected one argument.");for(var ue=Bn[X],Ae=[],Pe=1;Pe<S.length;Pe++){var je=D.parse(S[Pe],Pe,Yt);if(!je)return null;Ae.push(je)}return new jn(ue,Ae)},jn.prototype.evaluate=function(S){if(this.type.kind==="boolean")return!!this.args[0].evaluate(S);if(this.type.kind==="color"){for(var D,X,ue=0,Ae=this.args;ue<Ae.length;ue+=1){if(X=null,(D=Ae[ue].evaluate(S))instanceof Fn)return D;if(typeof D=="string"){var Pe=S.parseColor(D);if(Pe)return Pe}else if(Array.isArray(D)&&!(X=D.length<3||D.length>4?"Invalid rbga value "+JSON.stringify(D)+": expected an array containing either three or four numeric values.":ur(D[0],D[1],D[2],D[3])))return new Fn(D[0]/255,D[1]/255,D[2]/255,D[3])}throw new on(X||"Could not parse color from value '"+(typeof D=="string"?D:String(JSON.stringify(D)))+"'")}if(this.type.kind==="number"){for(var je=null,$e=0,ut=this.args;$e<ut.length;$e+=1){if((je=ut[$e].evaluate(S))===null)return 0;var wt=Number(je);if(!isNaN(wt))return wt}throw new on("Could not convert "+JSON.stringify(je)+" to number.")}return this.type.kind==="formatted"?Un.fromString(Tr(this.args[0].evaluate(S))):this.type.kind==="resolvedImage"?ar.fromString(Tr(this.args[0].evaluate(S))):Tr(this.args[0].evaluate(S))},jn.prototype.eachChild=function(S){this.args.forEach(S)},jn.prototype.outputDefined=function(){return this.args.every(function(S){return S.outputDefined()})},jn.prototype.serialize=function(){if(this.type.kind==="formatted")return new Pn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Wn(this.args[0]).serialize();var S=["to-"+this.type.kind];return this.eachChild(function(D){S.push(D.serialize())}),S};var rr=["Unknown","Point","LineString","Polygon"],Xt=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Xt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Xt.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?rr[this.feature.type]:this.feature.type:null},Xt.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Xt.prototype.canonicalID=function(){return this.canonical},Xt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Xt.prototype.parseColor=function(S){var D=this._parseColorCache[S];return D||(D=this._parseColorCache[S]=Fn.parse(S)),D};var yn=function(S,D,X,ue){this.name=S,this.type=D,this._evaluate=X,this.args=ue};yn.prototype.evaluate=function(S){return this._evaluate(S,this.args)},yn.prototype.eachChild=function(S){this.args.forEach(S)},yn.prototype.outputDefined=function(){return!1},yn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(S){return S.serialize()}))},yn.parse=function(S,D){var X,ue=S[0],Ae=yn.definitions[ue];if(!Ae)return D.error('Unknown expression "'+ue+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Pe=Array.isArray(Ae)?Ae[0]:Ae.type,je=Array.isArray(Ae)?[[Ae[1],Ae[2]]]:Ae.overloads,$e=je.filter(function(Vr){var zr=Vr[0];return!Array.isArray(zr)||zr.length===S.length-1}),ut=null,wt=0,Mt=$e;wt<Mt.length;wt+=1){var Nt=Mt[wt],Wt=Nt[0],Ut=Nt[1];ut=new dr(D.registry,D.path,null,D.scope);for(var ln=[],fn=!1,Mn=1;Mn<S.length;Mn++){var Tn=S[Mn],Nn=Array.isArray(Wt)?Wt[Mn-1]:Wt.type,Vn=ut.parse(Tn,1+ln.length,Nn);if(!Vn){fn=!0;break}ln.push(Vn)}if(!fn)if(Array.isArray(Wt)&&Wt.length!==ln.length)ut.error("Expected "+Wt.length+" arguments, but found "+ln.length+" instead.");else{for(var Zn=0;Zn<ln.length;Zn++){var Kn=Array.isArray(Wt)?Wt[Zn]:Wt.type,lr=ln[Zn];ut.concat(Zn+1).checkSubtype(Kn,lr.type)}if(ut.errors.length===0)return new yn(ue,Pe,Ut,ln)}}if($e.length===1)(X=D.errors).push.apply(X,ut.errors);else{for(var br=($e.length?$e:je).map(function(Vr){return zr=Vr[0],Array.isArray(zr)?"("+zr.map($t).join(", ")+")":"("+$t(zr.type)+"...)";var zr}).join(" | "),yr=[],Ar=1;Ar<S.length;Ar++){var Sr=D.parse(S[Ar],1+yr.length);if(!Sr)return null;yr.push($t(Sr.type))}D.error("Expected arguments of type "+br+", but found ("+yr.join(", ")+") instead.")}return null},yn.register=function(S,D){for(var X in yn.definitions=D,D)S[X]=yn};var Ot=function(S,D,X){this.type=rn,this.locale=X,this.caseSensitive=S,this.diacriticSensitive=D};Ot.parse=function(S,D){if(S.length!==2)return D.error("Expected one argument.");var X=S[1];if(typeof X!="object"||Array.isArray(X))return D.error("Collator options argument must be an object.");var ue=D.parse(X["case-sensitive"]!==void 0&&X["case-sensitive"],1,Kt);if(!ue)return null;var Ae=D.parse(X["diacritic-sensitive"]!==void 0&&X["diacritic-sensitive"],1,Kt);if(!Ae)return null;var Pe=null;return X.locale&&!(Pe=D.parse(X.locale,1,Bt))?null:new Ot(ue,Ae,Pe)},Ot.prototype.evaluate=function(S){return new In(this.caseSensitive.evaluate(S),this.diacriticSensitive.evaluate(S),this.locale?this.locale.evaluate(S):null)},Ot.prototype.eachChild=function(S){S(this.caseSensitive),S(this.diacriticSensitive),this.locale&&S(this.locale)},Ot.prototype.outputDefined=function(){return!1},Ot.prototype.serialize=function(){var S={};return S["case-sensitive"]=this.caseSensitive.serialize(),S["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(S.locale=this.locale.serialize()),["collator",S]};var Jt=8192;function nn(S,D){S[0]=Math.min(S[0],D[0]),S[1]=Math.min(S[1],D[1]),S[2]=Math.max(S[2],D[0]),S[3]=Math.max(S[3],D[1])}function _n(S,D){return!(S[0]<=D[0]||S[2]>=D[2]||S[1]<=D[1]||S[3]>=D[3])}function xn(S,D){var X,ue=(180+S[0])/360,Ae=(X=S[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+X*Math.PI/360)))/360),Pe=Math.pow(2,D.z);return[Math.round(ue*Pe*Jt),Math.round(Ae*Pe*Jt)]}function kn(S,D,X){return D[1]>S[1]!=X[1]>S[1]&&S[0]<(X[0]-D[0])*(S[1]-D[1])/(X[1]-D[1])+D[0]}function hn(S,D){for(var X=!1,ue=0,Ae=D.length;ue<Ae;ue++)for(var Pe=D[ue],je=0,$e=Pe.length;je<$e-1;je++){if(ut=S,wt=Pe[je],Mt=Pe[je+1],Nt=void 0,Wt=void 0,Ut=void 0,ln=void 0,Nt=ut[0]-wt[0],Wt=ut[1]-wt[1],Ut=ut[0]-Mt[0],ln=ut[1]-Mt[1],Nt*ln-Ut*Wt==0&&Nt*Ut<=0&&Wt*ln<=0)return!1;kn(S,Pe[je],Pe[je+1])&&(X=!X)}var ut,wt,Mt,Nt,Wt,Ut,ln;return X}function en(S,D){for(var X=0;X<D.length;X++)if(hn(S,D[X]))return!0;return!1}function tn(S,D,X,ue){var Ae=S[0]-X[0],Pe=S[1]-X[1],je=D[0]-X[0],$e=D[1]-X[1],ut=ue[0]-X[0],wt=ue[1]-X[1],Mt=Ae*wt-ut*Pe,Nt=je*wt-ut*$e;return Mt>0&&Nt<0||Mt<0&&Nt>0}function un(S,D,X){for(var ue=0,Ae=X;ue<Ae.length;ue+=1)for(var Pe=Ae[ue],je=0;je<Pe.length-1;++je)if($e=S,ut=D,wt=Pe[je],Mt=Pe[je+1],Nt=void 0,Wt=void 0,Ut=void 0,Ut=[ut[0]-$e[0],ut[1]-$e[1]],Nt=[Mt[0]-wt[0],Mt[1]-wt[1]],Wt=Ut,Nt[0]*Wt[1]-Nt[1]*Wt[0]!=0&&tn($e,ut,wt,Mt)&&tn(wt,Mt,$e,ut))return!0;var $e,ut,wt,Mt,Nt,Wt,Ut;return!1}function dn(S,D){for(var X=0;X<S.length;++X)if(!hn(S[X],D))return!1;for(var ue=0;ue<S.length-1;++ue)if(un(S[ue],S[ue+1],D))return!1;return!0}function En(S,D){for(var X=0;X<D.length;X++)if(dn(S,D[X]))return!0;return!1}function zn(S,D,X){for(var ue=[],Ae=0;Ae<S.length;Ae++){for(var Pe=[],je=0;je<S[Ae].length;je++){var $e=xn(S[Ae][je],X);nn(D,$e),Pe.push($e)}ue.push(Pe)}return ue}function qn(S,D,X){for(var ue=[],Ae=0;Ae<S.length;Ae++){var Pe=zn(S[Ae],D,X);ue.push(Pe)}return ue}function Gn(S,D,X,ue){if(S[0]<X[0]||S[0]>X[2]){var Ae=.5*ue,Pe=S[0]-X[0]>Ae?-ue:X[0]-S[0]>Ae?ue:0;Pe===0&&(Pe=S[0]-X[2]>Ae?-ue:X[2]-S[0]>Ae?ue:0),S[0]+=Pe}nn(D,S)}function $n(S,D,X,ue){for(var Ae=Math.pow(2,ue.z)*Jt,Pe=[ue.x*Jt,ue.y*Jt],je=[],$e=0,ut=S;$e<ut.length;$e+=1)for(var wt=0,Mt=ut[$e];wt<Mt.length;wt+=1){var Nt=Mt[wt],Wt=[Nt.x+Pe[0],Nt.y+Pe[1]];Gn(Wt,D,X,Ae),je.push(Wt)}return je}function Xn(S,D,X,ue){for(var Ae=Math.pow(2,ue.z)*Jt,Pe=[ue.x*Jt,ue.y*Jt],je=[],$e=0,ut=S;$e<ut.length;$e+=1){for(var wt=[],Mt=0,Nt=ut[$e];Mt<Nt.length;Mt+=1){var Wt=Nt[Mt],Ut=[Wt.x+Pe[0],Wt.y+Pe[1]];nn(D,Ut),wt.push(Ut)}je.push(wt)}if(D[2]-D[0]<=Ae/2){(Nn=D)[0]=Nn[1]=1/0,Nn[2]=Nn[3]=-1/0;for(var ln=0,fn=je;ln<fn.length;ln+=1)for(var Mn=0,Tn=fn[ln];Mn<Tn.length;Mn+=1)Gn(Tn[Mn],D,X,Ae)}var Nn;return je}var or=function(S,D){this.type=Kt,this.geojson=S,this.geometries=D};function tr(S){if(S instanceof yn&&(S.name==="get"&&S.args.length===1||S.name==="feature-state"||S.name==="has"&&S.args.length===1||S.name==="properties"||S.name==="geometry-type"||S.name==="id"||/^filter-/.test(S.name))||S instanceof or)return!1;var D=!0;return S.eachChild(function(X){D&&!tr(X)&&(D=!1)}),D}function Qn(S){if(S instanceof yn&&S.name==="feature-state")return!1;var D=!0;return S.eachChild(function(X){D&&!Qn(X)&&(D=!1)}),D}function mr(S,D){if(S instanceof yn&&D.indexOf(S.name)>=0)return!1;var X=!0;return S.eachChild(function(ue){X&&!mr(ue,D)&&(X=!1)}),X}or.parse=function(S,D){if(S.length!==2)return D.error("'within' expression requires exactly one argument, but found "+(S.length-1)+" instead.");if(cr(S[1])){var X=S[1];if(X.type==="FeatureCollection")for(var ue=0;ue<X.features.length;++ue){var Ae=X.features[ue].geometry.type;if(Ae==="Polygon"||Ae==="MultiPolygon")return new or(X,X.features[ue].geometry)}else if(X.type==="Feature"){var Pe=X.geometry.type;if(Pe==="Polygon"||Pe==="MultiPolygon")return new or(X,X.geometry)}else if(X.type==="Polygon"||X.type==="MultiPolygon")return new or(X,X)}return D.error("'within' expression requires valid geojson object that contains polygon geometry type.")},or.prototype.evaluate=function(S){if(S.geometry()!=null&&S.canonicalID()!=null){if(S.geometryType()==="Point")return function(D,X){var ue=[1/0,1/0,-1/0,-1/0],Ae=[1/0,1/0,-1/0,-1/0],Pe=D.canonicalID();if(X.type==="Polygon"){var je=zn(X.coordinates,Ae,Pe),$e=$n(D.geometry(),ue,Ae,Pe);if(!_n(ue,Ae))return!1;for(var ut=0,wt=$e;ut<wt.length;ut+=1)if(!hn(wt[ut],je))return!1}if(X.type==="MultiPolygon"){var Mt=qn(X.coordinates,Ae,Pe),Nt=$n(D.geometry(),ue,Ae,Pe);if(!_n(ue,Ae))return!1;for(var Wt=0,Ut=Nt;Wt<Ut.length;Wt+=1)if(!en(Ut[Wt],Mt))return!1}return!0}(S,this.geometries);if(S.geometryType()==="LineString")return function(D,X){var ue=[1/0,1/0,-1/0,-1/0],Ae=[1/0,1/0,-1/0,-1/0],Pe=D.canonicalID();if(X.type==="Polygon"){var je=zn(X.coordinates,Ae,Pe),$e=Xn(D.geometry(),ue,Ae,Pe);if(!_n(ue,Ae))return!1;for(var ut=0,wt=$e;ut<wt.length;ut+=1)if(!dn(wt[ut],je))return!1}if(X.type==="MultiPolygon"){var Mt=qn(X.coordinates,Ae,Pe),Nt=Xn(D.geometry(),ue,Ae,Pe);if(!_n(ue,Ae))return!1;for(var Wt=0,Ut=Nt;Wt<Ut.length;Wt+=1)if(!En(Ut[Wt],Mt))return!1}return!0}(S,this.geometries)}return!1},or.prototype.eachChild=function(){},or.prototype.outputDefined=function(){return!0},or.prototype.serialize=function(){return["within",this.geojson]};var fr=function(S,D){this.type=D.type,this.name=S,this.boundExpression=D};fr.parse=function(S,D){if(S.length!==2||typeof S[1]!="string")return D.error("'var' expression requires exactly one string literal argument.");var X=S[1];return D.scope.has(X)?new fr(X,D.scope.get(X)):D.error('Unknown variable "'+X+'". Make sure "'+X+'" has been bound in an enclosing "let" expression before using it.',1)},fr.prototype.evaluate=function(S){return this.boundExpression.evaluate(S)},fr.prototype.eachChild=function(){},fr.prototype.outputDefined=function(){return!1},fr.prototype.serialize=function(){return["var",this.name]};var dr=function(S,D,X,ue,Ae){D===void 0&&(D=[]),ue===void 0&&(ue=new xt),Ae===void 0&&(Ae=[]),this.registry=S,this.path=D,this.key=D.map(function(Pe){return"["+Pe+"]"}).join(""),this.scope=ue,this.errors=Ae,this.expectedType=X};function sr(S){if(S instanceof fr)return sr(S.boundExpression);if(S instanceof yn&&S.name==="error"||S instanceof Ot||S instanceof or)return!1;var D=S instanceof jn||S instanceof mn,X=!0;return S.eachChild(function(ue){X=D?X&&sr(ue):X&&ue instanceof Ht}),!!X&&tr(S)&&mr(S,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function xr(S,D){for(var X,ue,Ae=S.length-1,Pe=0,je=Ae,$e=0;Pe<=je;)if(X=S[$e=Math.floor((Pe+je)/2)],ue=S[$e+1],X<=D){if($e===Ae||D<ue)return $e;Pe=$e+1}else{if(!(X>D))throw new on("Input is not a number.");je=$e-1}return 0}dr.prototype.parse=function(S,D,X,ue,Ae){return Ae===void 0&&(Ae={}),D?this.concat(D,X,ue)._parse(S,Ae):this._parse(S,Ae)},dr.prototype._parse=function(S,D){function X(wt,Mt,Nt){return Nt==="assert"?new mn(Mt,[wt]):Nt==="coerce"?new jn(Mt,[wt]):wt}if(S!==null&&typeof S!="string"&&typeof S!="boolean"&&typeof S!="number"||(S=["literal",S]),Array.isArray(S)){if(S.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ue=S[0];if(typeof ue!="string")return this.error("Expression name must be a string, but found "+typeof ue+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var Ae=this.registry[ue];if(Ae){var Pe=Ae.parse(S,this);if(!Pe)return null;if(this.expectedType){var je=this.expectedType,$e=Pe.type;if(je.kind!=="string"&&je.kind!=="number"&&je.kind!=="boolean"&&je.kind!=="object"&&je.kind!=="array"||$e.kind!=="value")if(je.kind!=="color"&&je.kind!=="formatted"&&je.kind!=="resolvedImage"||$e.kind!=="value"&&$e.kind!=="string"){if(this.checkSubtype(je,$e))return null}else Pe=X(Pe,je,D.typeAnnotation||"coerce");else Pe=X(Pe,je,D.typeAnnotation||"assert")}if(!(Pe instanceof Ht)&&Pe.type.kind!=="resolvedImage"&&sr(Pe)){var ut=new Xt;try{Pe=new Ht(Pe.type,Pe.evaluate(ut))}catch(wt){return this.error(wt.message),null}}return Pe}return this.error('Unknown expression "'+ue+'". If you wanted a literal array, use ["literal", [...]].',0)}return S===void 0?this.error("'undefined' value invalid. Use null instead."):typeof S=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof S+" instead.")},dr.prototype.concat=function(S,D,X){var ue=typeof S=="number"?this.path.concat(S):this.path,Ae=X?this.scope.concat(X):this.scope;return new dr(this.registry,ue,D||null,Ae,this.errors)},dr.prototype.error=function(S){for(var D=[],X=arguments.length-1;X-- >0;)D[X]=arguments[X+1];var ue=""+this.key+D.map(function(Ae){return"["+Ae+"]"}).join("");this.errors.push(new Tt(ue,S))},dr.prototype.checkSubtype=function(S,D){var X=an(S,D);return X&&this.error(X),X};var Er=function(S,D,X){this.type=S,this.input=D,this.labels=[],this.outputs=[];for(var ue=0,Ae=X;ue<Ae.length;ue+=1){var Pe=Ae[ue],je=Pe[0],$e=Pe[1];this.labels.push(je),this.outputs.push($e)}};function jr(S,D,X){return S*(1-X)+D*X}Er.parse=function(S,D){if(S.length-1<4)return D.error("Expected at least 4 arguments, but found only "+(S.length-1)+".");if((S.length-1)%2!=0)return D.error("Expected an even number of arguments.");var X=D.parse(S[1],1,Pt);if(!X)return null;var ue=[],Ae=null;D.expectedType&&D.expectedType.kind!=="value"&&(Ae=D.expectedType);for(var Pe=1;Pe<S.length;Pe+=2){var je=Pe===1?-1/0:S[Pe],$e=S[Pe+1],ut=Pe,wt=Pe+1;if(typeof je!="number")return D.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ut);if(ue.length&&ue[ue.length-1][0]>=je)return D.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ut);var Mt=D.parse($e,wt,Ae);if(!Mt)return null;Ae=Ae||Mt.type,ue.push([je,Mt])}return new Er(Ae,X,ue)},Er.prototype.evaluate=function(S){var D=this.labels,X=this.outputs;if(D.length===1)return X[0].evaluate(S);var ue=this.input.evaluate(S);if(ue<=D[0])return X[0].evaluate(S);var Ae=D.length;return ue>=D[Ae-1]?X[Ae-1].evaluate(S):X[xr(D,ue)].evaluate(S)},Er.prototype.eachChild=function(S){S(this.input);for(var D=0,X=this.outputs;D<X.length;D+=1)S(X[D])},Er.prototype.outputDefined=function(){return this.outputs.every(function(S){return S.outputDefined()})},Er.prototype.serialize=function(){for(var S=["step",this.input.serialize()],D=0;D<this.labels.length;D++)D>0&&S.push(this.labels[D]),S.push(this.outputs[D].serialize());return S};var fi=Object.freeze({__proto__:null,number:jr,color:function(S,D,X){return new Fn(jr(S.r,D.r,X),jr(S.g,D.g,X),jr(S.b,D.b,X),jr(S.a,D.a,X))},array:function(S,D,X){return S.map(function(ue,Ae){return jr(ue,D[Ae],X)})}}),pi=.95047,Ni=1,li=1.08883,Pi=4/29,pa=6/29,da=3*pa*pa,Xo=pa*pa*pa,Vl=Math.PI/180,Ps=180/Math.PI;function Os(S){return S>Xo?Math.pow(S,.3333333333333333):S/da+Pi}function Js(S){return S>pa?S*S*S:da*(S-Pi)}function qa(S){return 255*(S<=.0031308?12.92*S:1.055*Math.pow(S,.4166666666666667)-.055)}function Ks(S){return(S/=255)<=.04045?S/12.92:Math.pow((S+.055)/1.055,2.4)}function $s(S){var D=Ks(S.r),X=Ks(S.g),ue=Ks(S.b),Ae=Os((.4124564*D+.3575761*X+.1804375*ue)/pi),Pe=Os((.2126729*D+.7151522*X+.072175*ue)/Ni);return{l:116*Pe-16,a:500*(Ae-Pe),b:200*(Pe-Os((.0193339*D+.119192*X+.9503041*ue)/li)),alpha:S.a}}function Qs(S){var D=(S.l+16)/116,X=isNaN(S.a)?D:D+S.a/500,ue=isNaN(S.b)?D:D-S.b/200;return D=Ni*Js(D),X=pi*Js(X),ue=li*Js(ue),new Fn(qa(3.2404542*X-1.5371385*D-.4985314*ue),qa(-.969266*X+1.8760108*D+.041556*ue),qa(.0556434*X-.2040259*D+1.0572252*ue),S.alpha)}function vo(S,D,X){var ue=D-S;return S+X*(ue>180||ue<-180?ue-360*Math.round(ue/360):ue)}var Co={forward:$s,reverse:Qs,interpolate:function(S,D,X){return{l:jr(S.l,D.l,X),a:jr(S.a,D.a,X),b:jr(S.b,D.b,X),alpha:jr(S.alpha,D.alpha,X)}}},Jo={forward:function(S){var D=$s(S),X=D.l,ue=D.a,Ae=D.b,Pe=Math.atan2(Ae,ue)*Ps;return{h:Pe<0?Pe+360:Pe,c:Math.sqrt(ue*ue+Ae*Ae),l:X,alpha:S.a}},reverse:function(S){var D=S.h*Vl,X=S.c;return Qs({l:S.l,a:Math.cos(D)*X,b:Math.sin(D)*X,alpha:S.alpha})},interpolate:function(S,D,X){return{h:vo(S.h,D.h,X),c:jr(S.c,D.c,X),l:jr(S.l,D.l,X),alpha:jr(S.alpha,D.alpha,X)}}},xi=Object.freeze({__proto__:null,lab:Co,hcl:Jo}),qi=function(S,D,X,ue,Ae){this.type=S,this.operator=D,this.interpolation=X,this.input=ue,this.labels=[],this.outputs=[];for(var Pe=0,je=Ae;Pe<je.length;Pe+=1){var $e=je[Pe],ut=$e[0],wt=$e[1];this.labels.push(ut),this.outputs.push(wt)}};function mo(S,D,X,ue){var Ae=ue-X,Pe=S-X;return Ae===0?0:D===1?Pe/Ae:(Math.pow(D,Pe)-1)/(Math.pow(D,Ae)-1)}qi.interpolationFactor=function(S,D,X,ue){var Ae=0;if(S.name==="exponential")Ae=mo(D,S.base,X,ue);else if(S.name==="linear")Ae=mo(D,1,X,ue);else if(S.name==="cubic-bezier"){var Pe=S.controlPoints;Ae=new p(Pe[0],Pe[1],Pe[2],Pe[3]).solve(mo(D,1,X,ue))}return Ae},qi.parse=function(S,D){var X=S[0],ue=S[1],Ae=S[2],Pe=S.slice(3);if(!Array.isArray(ue)||ue.length===0)return D.error("Expected an interpolation type expression.",1);if(ue[0]==="linear")ue={name:"linear"};else if(ue[0]==="exponential"){var je=ue[1];if(typeof je!="number")return D.error("Exponential interpolation requires a numeric base.",1,1);ue={name:"exponential",base:je}}else{if(ue[0]!=="cubic-bezier")return D.error("Unknown interpolation type "+String(ue[0]),1,0);var $e=ue.slice(1);if($e.length!==4||$e.some(function(Mn){return typeof Mn!="number"||Mn<0||Mn>1}))return D.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ue={name:"cubic-bezier",controlPoints:$e}}if(S.length-1<4)return D.error("Expected at least 4 arguments, but found only "+(S.length-1)+".");if((S.length-1)%2!=0)return D.error("Expected an even number of arguments.");if(!(Ae=D.parse(Ae,2,Pt)))return null;var ut=[],wt=null;X==="interpolate-hcl"||X==="interpolate-lab"?wt=sn:D.expectedType&&D.expectedType.kind!=="value"&&(wt=D.expectedType);for(var Mt=0;Mt<Pe.length;Mt+=2){var Nt=Pe[Mt],Wt=Pe[Mt+1],Ut=Mt+3,ln=Mt+4;if(typeof Nt!="number")return D.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ut);if(ut.length&&ut[ut.length-1][0]>=Nt)return D.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ut);var fn=D.parse(Wt,ln,wt);if(!fn)return null;wt=wt||fn.type,ut.push([Nt,fn])}return wt.kind==="number"||wt.kind==="color"||wt.kind==="array"&&wt.itemType.kind==="number"&&typeof wt.N=="number"?new qi(wt,X,ue,Ae,ut):D.error("Type "+$t(wt)+" is not interpolatable.")},qi.prototype.evaluate=function(S){var D=this.labels,X=this.outputs;if(D.length===1)return X[0].evaluate(S);var ue=this.input.evaluate(S);if(ue<=D[0])return X[0].evaluate(S);var Ae=D.length;if(ue>=D[Ae-1])return X[Ae-1].evaluate(S);var Pe=xr(D,ue),je=D[Pe],$e=D[Pe+1],ut=qi.interpolationFactor(this.interpolation,ue,je,$e),wt=X[Pe].evaluate(S),Mt=X[Pe+1].evaluate(S);return this.operator==="interpolate"?fi[this.type.kind.toLowerCase()](wt,Mt,ut):this.operator==="interpolate-hcl"?Jo.reverse(Jo.interpolate(Jo.forward(wt),Jo.forward(Mt),ut)):Co.reverse(Co.interpolate(Co.forward(wt),Co.forward(Mt),ut))},qi.prototype.eachChild=function(S){S(this.input);for(var D=0,X=this.outputs;D<X.length;D+=1)S(X[D])},qi.prototype.outputDefined=function(){return this.outputs.every(function(S){return S.outputDefined()})},qi.prototype.serialize=function(){var S;S=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var D=[this.operator,S,this.input.serialize()],X=0;X<this.labels.length;X++)D.push(this.labels[X],this.outputs[X].serialize());return D};var ro=function(S,D){this.type=S,this.args=D};ro.parse=function(S,D){if(S.length<2)return D.error("Expectected at least one argument.");var X=null,ue=D.expectedType;ue&&ue.kind!=="value"&&(X=ue);for(var Ae=[],Pe=0,je=S.slice(1);Pe<je.length;Pe+=1){var $e=je[Pe],ut=D.parse($e,1+Ae.length,X,void 0,{typeAnnotation:"omit"});if(!ut)return null;X=X||ut.type,Ae.push(ut)}var wt=ue&&Ae.some(function(Mt){return an(ue,Mt.type)});return new ro(wt?Yt:X,Ae)},ro.prototype.evaluate=function(S){for(var D,X=null,ue=0,Ae=0,Pe=this.args;Ae<Pe.length&&(ue++,(X=Pe[Ae].evaluate(S))&&X instanceof ar&&!X.available&&(D||(D=X.name),X=null,ue===this.args.length&&(X=D)),X===null);Ae+=1);return X},ro.prototype.eachChild=function(S){this.args.forEach(S)},ro.prototype.outputDefined=function(){return this.args.every(function(S){return S.outputDefined()})},ro.prototype.serialize=function(){var S=["coalesce"];return this.eachChild(function(D){S.push(D.serialize())}),S};var Ha=function(S,D){this.type=D.type,this.bindings=[].concat(S),this.result=D};Ha.prototype.evaluate=function(S){return this.result.evaluate(S)},Ha.prototype.eachChild=function(S){for(var D=0,X=this.bindings;D<X.length;D+=1)S(X[D][1]);S(this.result)},Ha.parse=function(S,D){if(S.length<4)return D.error("Expected at least 3 arguments, but found "+(S.length-1)+" instead.");for(var X=[],ue=1;ue<S.length-1;ue+=2){var Ae=S[ue];if(typeof Ae!="string")return D.error("Expected string, but found "+typeof Ae+" instead.",ue);if(/[^a-zA-Z0-9_]/.test(Ae))return D.error("Variable names must contain only alphanumeric characters or '_'.",ue);var Pe=D.parse(S[ue+1],ue+1);if(!Pe)return null;X.push([Ae,Pe])}var je=D.parse(S[S.length-1],S.length-1,D.expectedType,X);return je?new Ha(X,je):null},Ha.prototype.outputDefined=function(){return this.result.outputDefined()},Ha.prototype.serialize=function(){for(var S=["let"],D=0,X=this.bindings;D<X.length;D+=1){var ue=X[D],Ae=ue[0],Pe=ue[1];S.push(Ae,Pe.serialize())}return S.push(this.result.serialize()),S};var Po=function(S,D,X){this.type=S,this.index=D,this.input=X};Po.parse=function(S,D){if(S.length!==3)return D.error("Expected 2 arguments, but found "+(S.length-1)+" instead.");var X=D.parse(S[1],1,Pt),ue=D.parse(S[2],2,gn(D.expectedType||Yt));if(!X||!ue)return null;var Ae=ue.type;return new Po(Ae.itemType,X,ue)},Po.prototype.evaluate=function(S){var D=this.index.evaluate(S),X=this.input.evaluate(S);if(D<0)throw new on("Array index out of bounds: "+D+" < 0.");if(D>=X.length)throw new on("Array index out of bounds: "+D+" > "+(X.length-1)+".");if(D!==Math.floor(D))throw new on("Array index must be an integer, but found "+D+" instead.");return X[D]},Po.prototype.eachChild=function(S){S(this.index),S(this.input)},Po.prototype.outputDefined=function(){return!1},Po.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var io=function(S,D){this.type=Kt,this.needle=S,this.haystack=D};io.parse=function(S,D){if(S.length!==3)return D.error("Expected 2 arguments, but found "+(S.length-1)+" instead.");var X=D.parse(S[1],1,Yt),ue=D.parse(S[2],2,Yt);return X&&ue?pn(X.type,[Kt,Bt,Pt,Ct,Yt])?new io(X,ue):D.error("Expected first argument to be of type boolean, string, number or null, but found "+$t(X.type)+" instead"):null},io.prototype.evaluate=function(S){var D=this.needle.evaluate(S),X=this.haystack.evaluate(S);if(!X)return!1;if(!An(D,["boolean","string","number","null"]))throw new on("Expected first argument to be of type boolean, string, number or null, but found "+$t(er(D))+" instead.");if(!An(X,["string","array"]))throw new on("Expected second argument to be of type array or string, but found "+$t(er(X))+" instead.");return X.indexOf(D)>=0},io.prototype.eachChild=function(S){S(this.needle),S(this.haystack)},io.prototype.outputDefined=function(){return!0},io.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Oo=function(S,D,X){this.type=Pt,this.needle=S,this.haystack=D,this.fromIndex=X};Oo.parse=function(S,D){if(S.length<=2||S.length>=5)return D.error("Expected 3 or 4 arguments, but found "+(S.length-1)+" instead.");var X=D.parse(S[1],1,Yt),ue=D.parse(S[2],2,Yt);if(!X||!ue)return null;if(!pn(X.type,[Kt,Bt,Pt,Ct,Yt]))return D.error("Expected first argument to be of type boolean, string, number or null, but found "+$t(X.type)+" instead");if(S.length===4){var Ae=D.parse(S[3],3,Pt);return Ae?new Oo(X,ue,Ae):null}return new Oo(X,ue)},Oo.prototype.evaluate=function(S){var D=this.needle.evaluate(S),X=this.haystack.evaluate(S);if(!An(D,["boolean","string","number","null"]))throw new on("Expected first argument to be of type boolean, string, number or null, but found "+$t(er(D))+" instead.");if(!An(X,["string","array"]))throw new on("Expected second argument to be of type array or string, but found "+$t(er(X))+" instead.");if(this.fromIndex){var ue=this.fromIndex.evaluate(S);return X.indexOf(D,ue)}return X.indexOf(D)},Oo.prototype.eachChild=function(S){S(this.needle),S(this.haystack),this.fromIndex&&S(this.fromIndex)},Oo.prototype.outputDefined=function(){return!1},Oo.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var S=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),S]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var yo=function(S,D,X,ue,Ae,Pe){this.inputType=S,this.type=D,this.input=X,this.cases=ue,this.outputs=Ae,this.otherwise=Pe};yo.parse=function(S,D){if(S.length<5)return D.error("Expected at least 4 arguments, but found only "+(S.length-1)+".");if(S.length%2!=1)return D.error("Expected an even number of arguments.");var X,ue;D.expectedType&&D.expectedType.kind!=="value"&&(ue=D.expectedType);for(var Ae={},Pe=[],je=2;je<S.length-1;je+=2){var $e=S[je],ut=S[je+1];Array.isArray($e)||($e=[$e]);var wt=D.concat(je);if($e.length===0)return wt.error("Expected at least one branch label.");for(var Mt=0,Nt=$e;Mt<Nt.length;Mt+=1){var Wt=Nt[Mt];if(typeof Wt!="number"&&typeof Wt!="string")return wt.error("Branch labels must be numbers or strings.");if(typeof Wt=="number"&&Math.abs(Wt)>Number.MAX_SAFE_INTEGER)return wt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Wt=="number"&&Math.floor(Wt)!==Wt)return wt.error("Numeric branch labels must be integer values.");if(X){if(wt.checkSubtype(X,er(Wt)))return null}else X=er(Wt);if(Ae[String(Wt)]!==void 0)return wt.error("Branch labels must be unique.");Ae[String(Wt)]=Pe.length}var Ut=D.parse(ut,je,ue);if(!Ut)return null;ue=ue||Ut.type,Pe.push(Ut)}var ln=D.parse(S[1],1,Yt);if(!ln)return null;var fn=D.parse(S[S.length-1],S.length-1,ue);return fn?ln.type.kind!=="value"&&D.concat(1).checkSubtype(X,ln.type)?null:new yo(X,ue,ln,Ae,Pe,fn):null},yo.prototype.evaluate=function(S){var D=this.input.evaluate(S);return(er(D)===this.inputType&&this.outputs[this.cases[D]]||this.otherwise).evaluate(S)},yo.prototype.eachChild=function(S){S(this.input),this.outputs.forEach(S),S(this.otherwise)},yo.prototype.outputDefined=function(){return this.outputs.every(function(S){return S.outputDefined()})&&this.otherwise.outputDefined()},yo.prototype.serialize=function(){for(var S=this,D=["match",this.input.serialize()],X=[],ue={},Ae=0,Pe=Object.keys(this.cases).sort();Ae<Pe.length;Ae+=1){var je=Pe[Ae];(Nt=ue[this.cases[je]])===void 0?(ue[this.cases[je]]=X.length,X.push([this.cases[je],[je]])):X[Nt][1].push(je)}for(var $e=function(Ut){return S.inputType.kind==="number"?Number(Ut):Ut},ut=0,wt=X;ut<wt.length;ut+=1){var Mt=wt[ut],Nt=Mt[0],Wt=Mt[1];Wt.length===1?D.push($e(Wt[0])):D.push(Wt.map($e)),D.push(this.outputs[outputIndex$1].serialize())}return D.push(this.otherwise.serialize()),D};var Io=function(S,D,X){this.type=S,this.branches=D,this.otherwise=X};Io.parse=function(S,D){if(S.length<4)return D.error("Expected at least 3 arguments, but found only "+(S.length-1)+".");if(S.length%2!=0)return D.error("Expected an odd number of arguments.");var X;D.expectedType&&D.expectedType.kind!=="value"&&(X=D.expectedType);for(var ue=[],Ae=1;Ae<S.length-1;Ae+=2){var Pe=D.parse(S[Ae],Ae,Kt);if(!Pe)return null;var je=D.parse(S[Ae+1],Ae+1,X);if(!je)return null;ue.push([Pe,je]),X=X||je.type}var $e=D.parse(S[S.length-1],S.length-1,X);return $e?new Io(X,ue,$e):null},Io.prototype.evaluate=function(S){for(var D=0,X=this.branches;D<X.length;D+=1){var ue=X[D],Ae=ue[0],Pe=ue[1];if(Ae.evaluate(S))return Pe.evaluate(S)}return this.otherwise.evaluate(S)},Io.prototype.eachChild=function(S){for(var D=0,X=this.branches;D<X.length;D+=1){var ue=X[D],Ae=ue[0],Pe=ue[1];S(Ae),S(Pe)}S(this.otherwise)},Io.prototype.outputDefined=function(){return this.branches.every(function(S){return S[0],S[1].outputDefined()})&&this.otherwise.outputDefined()},Io.prototype.serialize=function(){var S=["case"];return this.eachChild(function(D){S.push(D.serialize())}),S};var ao=function(S,D,X,ue){this.type=S,this.input=D,this.beginIndex=X,this.endIndex=ue};function hl(S,D){return S==="=="||S==="!="?D.kind==="boolean"||D.kind==="string"||D.kind==="number"||D.kind==="null"||D.kind==="value":D.kind==="string"||D.kind==="number"||D.kind==="value"}function el(S,D,X,ue){return ue.compare(D,X)===0}function Ko(S,D,X){var ue=S!=="=="&&S!=="!=";return function(){function Ae(Pe,je,$e){this.type=Kt,this.lhs=Pe,this.rhs=je,this.collator=$e,this.hasUntypedArgument=Pe.type.kind==="value"||je.type.kind==="value"}return Ae.parse=function(Pe,je){if(Pe.length!==3&&Pe.length!==4)return je.error("Expected two or three arguments.");var $e=Pe[0],ut=je.parse(Pe[1],1,Yt);if(!ut)return null;if(!hl($e,ut.type))return je.concat(1).error('"'+$e+`" comparisons are not supported for type '`+$t(ut.type)+"'.");var wt=je.parse(Pe[2],2,Yt);if(!wt)return null;if(!hl($e,wt.type))return je.concat(2).error('"'+$e+`" comparisons are not supported for type '`+$t(wt.type)+"'.");if(ut.type.kind!==wt.type.kind&&ut.type.kind!=="value"&&wt.type.kind!=="value")return je.error("Cannot compare types '"+$t(ut.type)+"' and '"+$t(wt.type)+"'.");ue&&(ut.type.kind==="value"&&wt.type.kind!=="value"?ut=new mn(wt.type,[ut]):ut.type.kind!=="value"&&wt.type.kind==="value"&&(wt=new mn(ut.type,[wt])));var Mt=null;if(Pe.length===4){if(ut.type.kind!=="string"&&wt.type.kind!=="string"&&ut.type.kind!=="value"&&wt.type.kind!=="value")return je.error("Cannot use collator to compare non-string types.");if(!(Mt=je.parse(Pe[3],3,rn)))return null}return new Ae(ut,wt,Mt)},Ae.prototype.evaluate=function(Pe){var je=this.lhs.evaluate(Pe),$e=this.rhs.evaluate(Pe);if(ue&&this.hasUntypedArgument){var ut=er(je),wt=er($e);if(ut.kind!==wt.kind||ut.kind!=="string"&&ut.kind!=="number")throw new on('Expected arguments for "'+S+'" to be (string, string) or (number, number), but found ('+ut.kind+", "+wt.kind+") instead.")}if(this.collator&&!ue&&this.hasUntypedArgument){var Mt=er(je),Nt=er($e);if(Mt.kind!=="string"||Nt.kind!=="string")return D(Pe,je,$e)}return this.collator?X(Pe,je,$e,this.collator.evaluate(Pe)):D(Pe,je,$e)},Ae.prototype.eachChild=function(Pe){Pe(this.lhs),Pe(this.rhs),this.collator&&Pe(this.collator)},Ae.prototype.outputDefined=function(){return!0},Ae.prototype.serialize=function(){var Pe=[S];return this.eachChild(function(je){Pe.push(je.serialize())}),Pe},Ae}()}ao.parse=function(S,D){if(S.length<=2||S.length>=5)return D.error("Expected 3 or 4 arguments, but found "+(S.length-1)+" instead.");var X=D.parse(S[1],1,Yt),ue=D.parse(S[2],2,Pt);if(!X||!ue)return null;if(!pn(X.type,[gn(Yt),Bt,Yt]))return D.error("Expected first argument to be of type array or string, but found "+$t(X.type)+" instead");if(S.length===4){var Ae=D.parse(S[3],3,Pt);return Ae?new ao(X.type,X,ue,Ae):null}return new ao(X.type,X,ue)},ao.prototype.evaluate=function(S){var D=this.input.evaluate(S),X=this.beginIndex.evaluate(S);if(!An(D,["string","array"]))throw new on("Expected first argument to be of type array or string, but found "+$t(er(D))+" instead.");if(this.endIndex){var ue=this.endIndex.evaluate(S);return D.slice(X,ue)}return D.slice(X)},ao.prototype.eachChild=function(S){S(this.input),S(this.beginIndex),this.endIndex&&S(this.endIndex)},ao.prototype.outputDefined=function(){return!1},ao.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var S=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),S]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Tl=Ko("==",function(S,D,X){return D===X},el),kl=Ko("!=",function(S,D,X){return D!==X},function(S,D,X,ue){return!el(0,D,X,ue)}),$o=Ko("<",function(S,D,X){return D<X},function(S,D,X,ue){return ue.compare(D,X)<0}),Al=Ko(">",function(S,D,X){return D>X},function(S,D,X,ue){return ue.compare(D,X)>0}),ql=Ko("<=",function(S,D,X){return D<=X},function(S,D,X,ue){return ue.compare(D,X)<=0}),Hl=Ko(">=",function(S,D,X){return D>=X},function(S,D,X,ue){return ue.compare(D,X)>=0}),Qo=function(S,D,X,ue,Ae){this.type=Bt,this.number=S,this.locale=D,this.currency=X,this.minFractionDigits=ue,this.maxFractionDigits=Ae};Qo.parse=function(S,D){if(S.length!==3)return D.error("Expected two arguments.");var X=D.parse(S[1],1,Pt);if(!X)return null;var ue=S[2];if(typeof ue!="object"||Array.isArray(ue))return D.error("NumberFormat options argument must be an object.");var Ae=null;if(ue.locale&&!(Ae=D.parse(ue.locale,1,Bt)))return null;var Pe=null;if(ue.currency&&!(Pe=D.parse(ue.currency,1,Bt)))return null;var je=null;if(ue["min-fraction-digits"]&&!(je=D.parse(ue["min-fraction-digits"],1,Pt)))return null;var $e=null;return ue["max-fraction-digits"]&&!($e=D.parse(ue["max-fraction-digits"],1,Pt))?null:new Qo(X,Ae,Pe,je,$e)},Qo.prototype.evaluate=function(S){return new Intl.NumberFormat(this.locale?this.locale.evaluate(S):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(S):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(S):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(S):void 0}).format(this.number.evaluate(S))},Qo.prototype.eachChild=function(S){S(this.number),this.locale&&S(this.locale),this.currency&&S(this.currency),this.minFractionDigits&&S(this.minFractionDigits),this.maxFractionDigits&&S(this.maxFractionDigits)},Qo.prototype.outputDefined=function(){return!1},Qo.prototype.serialize=function(){var S={};return this.locale&&(S.locale=this.locale.serialize()),this.currency&&(S.currency=this.currency.serialize()),this.minFractionDigits&&(S["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(S["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),S]};var oo=function(S){this.type=Pt,this.input=S};oo.parse=function(S,D){if(S.length!==2)return D.error("Expected 1 argument, but found "+(S.length-1)+" instead.");var X=D.parse(S[1],1);return X?X.type.kind!=="array"&&X.type.kind!=="string"&&X.type.kind!=="value"?D.error("Expected argument of type string or array, but found "+$t(X.type)+" instead."):new oo(X):null},oo.prototype.evaluate=function(S){var D=this.input.evaluate(S);if(typeof D=="string"||Array.isArray(D))return D.length;throw new on("Expected value to be of type string or array, but found "+$t(er(D))+" instead.")},oo.prototype.eachChild=function(S){S(this.input)},oo.prototype.outputDefined=function(){return!1},oo.prototype.serialize=function(){var S=["length"];return this.eachChild(function(D){S.push(D.serialize())}),S};var ds={"==":Tl,"!=":kl,">":Al,"<":$o,">=":Hl,"<=":ql,array:mn,at:Po,boolean:mn,case:Io,coalesce:ro,collator:Ot,format:Pn,image:Wn,in:io,"index-of":Oo,interpolate:qi,"interpolate-hcl":qi,"interpolate-lab":qi,length:oo,let:Ha,literal:Ht,match:yo,number:mn,"number-format":Qo,object:mn,slice:ao,step:Er,string:mn,"to-boolean":jn,"to-color":jn,"to-number":jn,"to-string":jn,var:fr,within:or};function es(S,D){var X=D[0],ue=D[1],Ae=D[2],Pe=D[3];X=X.evaluate(S),ue=ue.evaluate(S),Ae=Ae.evaluate(S);var je=Pe?Pe.evaluate(S):1,$e=ur(X,ue,Ae,je);if($e)throw new on($e);return new Fn(X/255*je,ue/255*je,Ae/255*je,je)}function Is(S,D){return S in D}function ts(S,D){var X=D[S];return X===void 0?null:X}function Ga(S){return{type:S}}function pl(S){return{result:"success",value:S}}function zo(S){return{result:"error",value:S}}function xo(S){return S["property-type"]==="data-driven"||S["property-type"]==="cross-faded-data-driven"}function bo(S){return!!S.expression&&S.expression.parameters.indexOf("zoom")>-1}function Do(S){return!!S.expression&&S.expression.interpolated}function Zr(S){return S instanceof Number?"number":S instanceof String?"string":S instanceof Boolean?"boolean":Array.isArray(S)?"array":S===null?"null":typeof S}function gs(S){return typeof S=="object"&&S!==null&&!Array.isArray(S)}function Gl(S){return S}function tl(S,D){var X,ue,Ae,Pe=D.type==="color",je=S.stops&&typeof S.stops[0][0]=="object",$e=je||S.property!==void 0,ut=je||!$e,wt=S.type||(Do(D)?"exponential":"interval");if(Pe&&((S=mt({},S)).stops&&(S.stops=S.stops.map(function(yr){return[yr[0],Fn.parse(yr[1])]})),S.default?S.default=Fn.parse(S.default):S.default=Fn.parse(D.default)),S.colorSpace&&S.colorSpace!=="rgb"&&!xi[S.colorSpace])throw new Error("Unknown color space: "+S.colorSpace);if(wt==="exponential")X=nl;else if(wt==="interval")X=Wl;else if(wt==="categorical"){X=Ml,ue=Object.create(null);for(var Mt=0,Nt=S.stops;Mt<Nt.length;Mt+=1){var Wt=Nt[Mt];ue[Wt[0]]=Wt[1]}Ae=typeof S.stops[0][0]}else{if(wt!=="identity")throw new Error('Unknown function type "'+wt+'"');X=Yl}if(je){for(var Ut={},ln=[],fn=0;fn<S.stops.length;fn++){var Mn=S.stops[fn],Tn=Mn[0].zoom;Ut[Tn]===void 0&&(Ut[Tn]={zoom:Tn,type:S.type,property:S.property,default:S.default,stops:[]},ln.push(Tn)),Ut[Tn].stops.push([Mn[0].value,Mn[1]])}for(var Nn=[],Vn=0,Zn=ln;Vn<Zn.length;Vn+=1){var Kn=Zn[Vn];Nn.push([Ut[Kn].zoom,tl(Ut[Kn],D)])}var lr={name:"linear"};return{kind:"composite",interpolationType:lr,interpolationFactor:qi.interpolationFactor.bind(void 0,lr),zoomStops:Nn.map(function(yr){return yr[0]}),evaluate:function(yr,Ar){var Sr=yr.zoom;return nl({stops:Nn,base:S.base},D,Sr).evaluate(Sr,Ar)}}}if(ut){var br=wt==="exponential"?{name:"exponential",base:S.base!==void 0?S.base:1}:null;return{kind:"camera",interpolationType:br,interpolationFactor:qi.interpolationFactor.bind(void 0,br),zoomStops:S.stops.map(function(yr){return yr[0]}),evaluate:function(yr){var Ar=yr.zoom;return X(S,D,Ar,ue,Ae)}}}return{kind:"source",evaluate:function(yr,Ar){var Sr=Ar&&Ar.properties?Ar.properties[S.property]:void 0;return Sr===void 0?vs(S.default,D.default):X(S,D,Sr,ue,Ae)}}}function vs(S,D,X){return S!==void 0?S:D!==void 0?D:X!==void 0?X:void 0}function Ml(S,D,X,ue,Ae){return vs(typeof X===Ae?ue[X]:void 0,S.default,D.default)}function Wl(S,D,X){if(Zr(X)!=="number")return vs(S.default,D.default);var ue=S.stops.length;if(ue===1||X<=S.stops[0][0])return S.stops[0][1];if(X>=S.stops[ue-1][0])return S.stops[ue-1][1];var Ae=xr(S.stops.map(function(Pe){return Pe[0]}),X);return S.stops[Ae][1]}function nl(S,D,X){var ue=S.base!==void 0?S.base:1;if(Zr(X)!=="number")return vs(S.default,D.default);var Ae=S.stops.length;if(Ae===1||X<=S.stops[0][0])return S.stops[0][1];if(X>=S.stops[Ae-1][0])return S.stops[Ae-1][1];var Pe=xr(S.stops.map(function(Nt){return Nt[0]}),X),je=function(Nt,Wt,Ut,ln){var fn=ln-Ut,Mn=Nt-Ut;return fn===0?0:Wt===1?Mn/fn:(Math.pow(Wt,Mn)-1)/(Math.pow(Wt,fn)-1)}(X,ue,S.stops[Pe][0],S.stops[Pe+1][0]),$e=S.stops[Pe][1],ut=S.stops[Pe+1][1],wt=fi[D.type]||Gl;if(S.colorSpace&&S.colorSpace!=="rgb"){var Mt=xi[S.colorSpace];wt=function(Nt,Wt){return Mt.reverse(Mt.interpolate(Mt.forward(Nt),Mt.forward(Wt),je))}}return typeof $e.evaluate=="function"?{evaluate:function(){for(var Nt=[],Wt=arguments.length;Wt--;)Nt[Wt]=arguments[Wt];var Ut=$e.evaluate.apply(void 0,Nt),ln=ut.evaluate.apply(void 0,Nt);if(Ut!==void 0&&ln!==void 0)return wt(Ut,ln,je)}}:wt($e,ut,je)}function Yl(S,D,X){return D.type==="color"?X=Fn.parse(X):D.type==="formatted"?X=Un.fromString(X.toString()):D.type==="resolvedImage"?X=ar.fromString(X.toString()):Zr(X)===D.type||D.type==="enum"&&D.values[X]||(X=void 0),vs(X,S.default,D.default)}yn.register(ds,{error:[{kind:"error"},[Bt],function(S,D){var X=D[0];throw new on(X.evaluate(S))}],typeof:[Bt,[Yt],function(S,D){return $t(er(D[0].evaluate(S)))}],"to-rgba":[gn(Pt,4),[sn],function(S,D){return D[0].evaluate(S).toArray()}],rgb:[sn,[Pt,Pt,Pt],es],rgba:[sn,[Pt,Pt,Pt,Pt],es],has:{type:Kt,overloads:[[[Bt],function(S,D){return Is(D[0].evaluate(S),S.properties())}],[[Bt,Gt],function(S,D){var X=D[0],ue=D[1];return Is(X.evaluate(S),ue.evaluate(S))}]]},get:{type:Yt,overloads:[[[Bt],function(S,D){return ts(D[0].evaluate(S),S.properties())}],[[Bt,Gt],function(S,D){var X=D[0],ue=D[1];return ts(X.evaluate(S),ue.evaluate(S))}]]},"feature-state":[Yt,[Bt],function(S,D){return ts(D[0].evaluate(S),S.featureState||{})}],properties:[Gt,[],function(S){return S.properties()}],"geometry-type":[Bt,[],function(S){return S.geometryType()}],id:[Yt,[],function(S){return S.id()}],zoom:[Pt,[],function(S){return S.globals.zoom}],"heatmap-density":[Pt,[],function(S){return S.globals.heatmapDensity||0}],"line-progress":[Pt,[],function(S){return S.globals.lineProgress||0}],accumulated:[Yt,[],function(S){return S.globals.accumulated===void 0?null:S.globals.accumulated}],"+":[Pt,Ga(Pt),function(S,D){for(var X=0,ue=0,Ae=D;ue<Ae.length;ue+=1)X+=Ae[ue].evaluate(S);return X}],"*":[Pt,Ga(Pt),function(S,D){for(var X=1,ue=0,Ae=D;ue<Ae.length;ue+=1)X*=Ae[ue].evaluate(S);return X}],"-":{type:Pt,overloads:[[[Pt,Pt],function(S,D){var X=D[0],ue=D[1];return X.evaluate(S)-ue.evaluate(S)}],[[Pt],function(S,D){return-D[0].evaluate(S)}]]},"/":[Pt,[Pt,Pt],function(S,D){var X=D[0],ue=D[1];return X.evaluate(S)/ue.evaluate(S)}],"%":[Pt,[Pt,Pt],function(S,D){var X=D[0],ue=D[1];return X.evaluate(S)%ue.evaluate(S)}],ln2:[Pt,[],function(){return Math.LN2}],pi:[Pt,[],function(){return Math.PI}],e:[Pt,[],function(){return Math.E}],"^":[Pt,[Pt,Pt],function(S,D){var X=D[0],ue=D[1];return Math.pow(X.evaluate(S),ue.evaluate(S))}],sqrt:[Pt,[Pt],function(S,D){var X=D[0];return Math.sqrt(X.evaluate(S))}],log10:[Pt,[Pt],function(S,D){var X=D[0];return Math.log(X.evaluate(S))/Math.LN10}],ln:[Pt,[Pt],function(S,D){var X=D[0];return Math.log(X.evaluate(S))}],log2:[Pt,[Pt],function(S,D){var X=D[0];return Math.log(X.evaluate(S))/Math.LN2}],sin:[Pt,[Pt],function(S,D){var X=D[0];return Math.sin(X.evaluate(S))}],cos:[Pt,[Pt],function(S,D){var X=D[0];return Math.cos(X.evaluate(S))}],tan:[Pt,[Pt],function(S,D){var X=D[0];return Math.tan(X.evaluate(S))}],asin:[Pt,[Pt],function(S,D){var X=D[0];return Math.asin(X.evaluate(S))}],acos:[Pt,[Pt],function(S,D){var X=D[0];return Math.acos(X.evaluate(S))}],atan:[Pt,[Pt],function(S,D){var X=D[0];return Math.atan(X.evaluate(S))}],min:[Pt,Ga(Pt),function(S,D){return Math.min.apply(Math,D.map(function(X){return X.evaluate(S)}))}],max:[Pt,Ga(Pt),function(S,D){return Math.max.apply(Math,D.map(function(X){return X.evaluate(S)}))}],abs:[Pt,[Pt],function(S,D){var X=D[0];return Math.abs(X.evaluate(S))}],round:[Pt,[Pt],function(S,D){var X=D[0].evaluate(S);return X<0?-Math.round(-X):Math.round(X)}],floor:[Pt,[Pt],function(S,D){var X=D[0];return Math.floor(X.evaluate(S))}],ceil:[Pt,[Pt],function(S,D){var X=D[0];return Math.ceil(X.evaluate(S))}],"filter-==":[Kt,[Bt,Yt],function(S,D){var X=D[0],ue=D[1];return S.properties()[X.value]===ue.value}],"filter-id-==":[Kt,[Yt],function(S,D){var X=D[0];return S.id()===X.value}],"filter-type-==":[Kt,[Bt],function(S,D){var X=D[0];return S.geometryType()===X.value}],"filter-<":[Kt,[Bt,Yt],function(S,D){var X=D[0],ue=D[1],Ae=S.properties()[X.value],Pe=ue.value;return typeof Ae==typeof Pe&&Ae<Pe}],"filter-id-<":[Kt,[Yt],function(S,D){var X=D[0],ue=S.id(),Ae=X.value;return typeof ue==typeof Ae&&ue<Ae}],"filter->":[Kt,[Bt,Yt],function(S,D){var X=D[0],ue=D[1],Ae=S.properties()[X.value],Pe=ue.value;return typeof Ae==typeof Pe&&Ae>Pe}],"filter-id->":[Kt,[Yt],function(S,D){var X=D[0],ue=S.id(),Ae=X.value;return typeof ue==typeof Ae&&ue>Ae}],"filter-<=":[Kt,[Bt,Yt],function(S,D){var X=D[0],ue=D[1],Ae=S.properties()[X.value],Pe=ue.value;return typeof Ae==typeof Pe&&Ae<=Pe}],"filter-id-<=":[Kt,[Yt],function(S,D){var X=D[0],ue=S.id(),Ae=X.value;return typeof ue==typeof Ae&&ue<=Ae}],"filter->=":[Kt,[Bt,Yt],function(S,D){var X=D[0],ue=D[1],Ae=S.properties()[X.value],Pe=ue.value;return typeof Ae==typeof Pe&&Ae>=Pe}],"filter-id->=":[Kt,[Yt],function(S,D){var X=D[0],ue=S.id(),Ae=X.value;return typeof ue==typeof Ae&&ue>=Ae}],"filter-has":[Kt,[Yt],function(S,D){return D[0].value in S.properties()}],"filter-has-id":[Kt,[],function(S){return S.id()!==null&&S.id()!==void 0}],"filter-type-in":[Kt,[gn(Bt)],function(S,D){return D[0].value.indexOf(S.geometryType())>=0}],"filter-id-in":[Kt,[gn(Yt)],function(S,D){return D[0].value.indexOf(S.id())>=0}],"filter-in-small":[Kt,[Bt,gn(Yt)],function(S,D){var X=D[0];return D[1].value.indexOf(S.properties()[X.value])>=0}],"filter-in-large":[Kt,[Bt,gn(Yt)],function(S,D){var X=D[0],ue=D[1];return function(Ae,Pe,je,$e){for(;je<=$e;){var ut=je+$e>>1;if(Pe[ut]===Ae)return!0;Pe[ut]>Ae?$e=ut-1:je=ut+1}return!1}(S.properties()[X.value],ue.value,0,ue.value.length-1)}],all:{type:Kt,overloads:[[[Kt,Kt],function(S,D){var X=D[0],ue=D[1];return X.evaluate(S)&&ue.evaluate(S)}],[Ga(Kt),function(S,D){for(var X=0,ue=D;X<ue.length;X+=1)if(!ue[X].evaluate(S))return!1;return!0}]]},any:{type:Kt,overloads:[[[Kt,Kt],function(S,D){var X=D[0],ue=D[1];return X.evaluate(S)||ue.evaluate(S)}],[Ga(Kt),function(S,D){for(var X=0,ue=D;X<ue.length;X+=1)if(ue[X].evaluate(S))return!0;return!1}]]},"!":[Kt,[Kt],function(S,D){return!D[0].evaluate(S)}],"is-supported-script":[Kt,[Bt],function(S,D){var X=D[0],ue=S.globals&&S.globals.isSupportedScript;return!ue||ue(X.evaluate(S))}],upcase:[Bt,[Bt],function(S,D){return D[0].evaluate(S).toUpperCase()}],downcase:[Bt,[Bt],function(S,D){return D[0].evaluate(S).toLowerCase()}],concat:[Bt,Ga(Yt),function(S,D){return D.map(function(X){return Tr(X.evaluate(S))}).join("")}],"resolved-locale":[Bt,[rn],function(S,D){return D[0].evaluate(S).resolvedLocale()}]});var Ro=function(S,D){this.expression=S,this._warningHistory={},this._evaluator=new Xt,this._defaultValue=D?function(X){return X.type==="color"&&gs(X.default)?new Fn(0,0,0,0):X.type==="color"?Fn.parse(X.default)||null:X.default===void 0?null:X.default}(D):null,this._enumValues=D&&D.type==="enum"?D.values:null};function ns(S){return Array.isArray(S)&&S.length>0&&typeof S[0]=="string"&&S[0]in ds}function _o(S,D){var X=new dr(ds,[],D?function(Ae){var Pe={color:sn,string:Bt,number:Pt,enum:Bt,boolean:Kt,formatted:Ln,resolvedImage:Sn};return Ae.type==="array"?gn(Pe[Ae.value]||Yt,Ae.length):Pe[Ae.type]}(D):void 0),ue=X.parse(S,void 0,void 0,void 0,D&&D.type==="string"?{typeAnnotation:"coerce"}:void 0);return ue?pl(new Ro(ue,D)):zo(X.errors)}Ro.prototype.evaluateWithoutErrorHandling=function(S,D,X,ue,Ae,Pe){return this._evaluator.globals=S,this._evaluator.feature=D,this._evaluator.featureState=X,this._evaluator.canonical=ue,this._evaluator.availableImages=Ae||null,this._evaluator.formattedSection=Pe,this.expression.evaluate(this._evaluator)},Ro.prototype.evaluate=function(S,D,X,ue,Ae,Pe){this._evaluator.globals=S,this._evaluator.feature=D||null,this._evaluator.featureState=X||null,this._evaluator.canonical=ue,this._evaluator.availableImages=Ae||null,this._evaluator.formattedSection=Pe||null;try{var je=this.expression.evaluate(this._evaluator);if(je==null||typeof je=="number"&&je!=je)return this._defaultValue;if(this._enumValues&&!(je in this._enumValues))throw new on("Expected value to be one of "+Object.keys(this._enumValues).map(function($e){return JSON.stringify($e)}).join(", ")+", but found "+JSON.stringify(je)+" instead.");return je}catch($e){return this._warningHistory[$e.message]||(this._warningHistory[$e.message]=!0,typeof console<"u"&&console.warn($e.message)),this._defaultValue}};var Wa=function(S,D){this.kind=S,this._styleExpression=D,this.isStateDependent=S!=="constant"&&!Qn(D.expression)};Wa.prototype.evaluateWithoutErrorHandling=function(S,D,X,ue,Ae,Pe){return this._styleExpression.evaluateWithoutErrorHandling(S,D,X,ue,Ae,Pe)},Wa.prototype.evaluate=function(S,D,X,ue,Ae,Pe){return this._styleExpression.evaluate(S,D,X,ue,Ae,Pe)};var ms=function(S,D,X,ue){this.kind=S,this.zoomStops=X,this._styleExpression=D,this.isStateDependent=S!=="camera"&&!Qn(D.expression),this.interpolationType=ue};function Sl(S,D){if((S=_o(S,D)).result==="error")return S;var X=S.value.expression,ue=tr(X);if(!ue&&!xo(D))return zo([new Tt("","data expressions not supported")]);var Ae=mr(X,["zoom"]);if(!Ae&&!bo(D))return zo([new Tt("","zoom expressions not supported")]);var Pe=rl(X);if(!Pe&&!Ae)return zo([new Tt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(Pe instanceof Tt)return zo([Pe]);if(Pe instanceof qi&&!Do(D))return zo([new Tt("",'"interpolate" expressions cannot be used with this property')]);if(!Pe)return pl(new Wa(ue?"constant":"source",S.value));var je=Pe instanceof qi?Pe.interpolation:void 0;return pl(new ms(ue?"camera":"composite",S.value,Pe.labels,je))}ms.prototype.evaluateWithoutErrorHandling=function(S,D,X,ue,Ae,Pe){return this._styleExpression.evaluateWithoutErrorHandling(S,D,X,ue,Ae,Pe)},ms.prototype.evaluate=function(S,D,X,ue,Ae,Pe){return this._styleExpression.evaluate(S,D,X,ue,Ae,Pe)},ms.prototype.interpolationFactor=function(S,D,X){return this.interpolationType?qi.interpolationFactor(this.interpolationType,S,D,X):0};var zs=function(S,D){this._parameters=S,this._specification=D,mt(this,tl(this._parameters,this._specification))};function rl(S){var D=null;if(S instanceof Ha)D=rl(S.result);else if(S instanceof ro)for(var X=0,ue=S.args;X<ue.length;X+=1){var Ae=ue[X];if(D=rl(Ae))break}else(S instanceof Er||S instanceof qi)&&S.input instanceof yn&&S.input.name==="zoom"&&(D=S);return D instanceof Tt||S.eachChild(function(Pe){var je=rl(Pe);je instanceof Tt?D=je:!D&&je?D=new Tt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):D&&je&&D!==je&&(D=new Tt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),D}function Ea(S){var D=S.key,X=S.value,ue=S.valueSpec||{},Ae=S.objectElementValidators||{},Pe=S.style,je=S.styleSpec,$e=[],ut=Zr(X);if(ut!=="object")return[new ht(D,X,"object expected, "+ut+" found")];for(var wt in X){var Mt=wt.split(".")[0],Nt=ue[Mt]||ue["*"],Wt=void 0;if(Ae[Mt])Wt=Ae[Mt];else if(ue[Mt])Wt=Ra;else if(Ae["*"])Wt=Ae["*"];else{if(!ue["*"]){$e.push(new ht(D,X[wt],'unknown property "'+wt+'"'));continue}Wt=Ra}$e=$e.concat(Wt({key:(D&&D+".")+wt,value:X[wt],valueSpec:Nt,style:Pe,styleSpec:je,object:X,objectKey:wt},X))}for(var Ut in ue)Ae[Ut]||ue[Ut].required&&ue[Ut].default===void 0&&X[Ut]===void 0&&$e.push(new ht(D,X,'missing required property "'+Ut+'"'));return $e}function il(S){var D=S.value,X=S.valueSpec,ue=S.style,Ae=S.styleSpec,Pe=S.key,je=S.arrayElementValidator||Ra;if(Zr(D)!=="array")return[new ht(Pe,D,"array expected, "+Zr(D)+" found")];if(X.length&&D.length!==X.length)return[new ht(Pe,D,"array length "+X.length+" expected, length "+D.length+" found")];if(X["min-length"]&&D.length<X["min-length"])return[new ht(Pe,D,"array length at least "+X["min-length"]+" expected, length "+D.length+" found")];var $e={type:X.value,values:X.values};Ae.$version<7&&($e.function=X.function),Zr(X.value)==="object"&&($e=X.value);for(var ut=[],wt=0;wt<D.length;wt++)ut=ut.concat(je({array:D,arrayIndex:wt,value:D[wt],valueSpec:$e,style:ue,styleSpec:Ae,key:Pe+"["+wt+"]"}));return ut}function El(S){var D=S.key,X=S.value,ue=S.valueSpec,Ae=Zr(X);return Ae==="number"&&X!=X&&(Ae="NaN"),Ae!=="number"?[new ht(D,X,"number expected, "+Ae+" found")]:"minimum"in ue&&X<ue.minimum?[new ht(D,X,X+" is less than the minimum value "+ue.minimum)]:"maximum"in ue&&X>ue.maximum?[new ht(D,X,X+" is greater than the maximum value "+ue.maximum)]:[]}function ys(S){var D,X,ue,Ae=S.valueSpec,Pe=ft(S.value.type),je={},$e=Pe!=="categorical"&&S.value.property===void 0,ut=!$e,wt=Zr(S.value.stops)==="array"&&Zr(S.value.stops[0])==="array"&&Zr(S.value.stops[0][0])==="object",Mt=Ea({key:S.key,value:S.value,valueSpec:S.styleSpec.function,style:S.style,styleSpec:S.styleSpec,objectElementValidators:{stops:function(Ut){if(Pe==="identity")return[new ht(Ut.key,Ut.value,'identity function may not have a "stops" property')];var ln=[],fn=Ut.value;return ln=ln.concat(il({key:Ut.key,value:fn,valueSpec:Ut.valueSpec,style:Ut.style,styleSpec:Ut.styleSpec,arrayElementValidator:Nt})),Zr(fn)==="array"&&fn.length===0&&ln.push(new ht(Ut.key,fn,"array must have at least one stop")),ln},default:function(Ut){return Ra({key:Ut.key,value:Ut.value,valueSpec:Ae,style:Ut.style,styleSpec:Ut.styleSpec})}}});return Pe==="identity"&&$e&&Mt.push(new ht(S.key,S.value,'missing required property "property"')),Pe==="identity"||S.value.stops||Mt.push(new ht(S.key,S.value,'missing required property "stops"')),Pe==="exponential"&&S.valueSpec.expression&&!Do(S.valueSpec)&&Mt.push(new ht(S.key,S.value,"exponential functions not supported")),S.styleSpec.$version>=8&&(ut&&!xo(S.valueSpec)?Mt.push(new ht(S.key,S.value,"property functions not supported")):$e&&!bo(S.valueSpec)&&Mt.push(new ht(S.key,S.value,"zoom functions not supported"))),Pe!=="categorical"&&!wt||S.value.property!==void 0||Mt.push(new ht(S.key,S.value,'"property" property is required')),Mt;function Nt(Ut){var ln=[],fn=Ut.value,Mn=Ut.key;if(Zr(fn)!=="array")return[new ht(Mn,fn,"array expected, "+Zr(fn)+" found")];if(fn.length!==2)return[new ht(Mn,fn,"array length 2 expected, length "+fn.length+" found")];if(wt){if(Zr(fn[0])!=="object")return[new ht(Mn,fn,"object expected, "+Zr(fn[0])+" found")];if(fn[0].zoom===void 0)return[new ht(Mn,fn,"object stop key must have zoom")];if(fn[0].value===void 0)return[new ht(Mn,fn,"object stop key must have value")];if(ue&&ue>ft(fn[0].zoom))return[new ht(Mn,fn[0].zoom,"stop zoom values must appear in ascending order")];ft(fn[0].zoom)!==ue&&(ue=ft(fn[0].zoom),X=void 0,je={}),ln=ln.concat(Ea({key:Mn+"[0]",value:fn[0],valueSpec:{zoom:{}},style:Ut.style,styleSpec:Ut.styleSpec,objectElementValidators:{zoom:El,value:Wt}}))}else ln=ln.concat(Wt({key:Mn+"[0]",value:fn[0],valueSpec:{},style:Ut.style,styleSpec:Ut.styleSpec},fn));return ns(Et(fn[1]))?ln.concat([new ht(Mn+"[1]",fn[1],"expressions are not allowed in function stops.")]):ln.concat(Ra({key:Mn+"[1]",value:fn[1],valueSpec:Ae,style:Ut.style,styleSpec:Ut.styleSpec}))}function Wt(Ut,ln){var fn=Zr(Ut.value),Mn=ft(Ut.value),Tn=Ut.value!==null?Ut.value:ln;if(D){if(fn!==D)return[new ht(Ut.key,Tn,fn+" stop domain type must match previous stop domain type "+D)]}else D=fn;if(fn!=="number"&&fn!=="string"&&fn!=="boolean")return[new ht(Ut.key,Tn,"stop domain value must be a number, string, or boolean")];if(fn!=="number"&&Pe!=="categorical"){var Nn="number expected, "+fn+" found";return xo(Ae)&&Pe===void 0&&(Nn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ht(Ut.key,Tn,Nn)]}return Pe!=="categorical"||fn!=="number"||isFinite(Mn)&&Math.floor(Mn)===Mn?Pe!=="categorical"&&fn==="number"&&X!==void 0&&Mn<X?[new ht(Ut.key,Tn,"stop domain values must appear in ascending order")]:(X=Mn,Pe==="categorical"&&Mn in je?[new ht(Ut.key,Tn,"stop domain values must be unique")]:(je[Mn]=!0,[])):[new ht(Ut.key,Tn,"integer expected, found "+Mn)]}}function rs(S){var D=(S.expressionContext==="property"?Sl:_o)(Et(S.value),S.valueSpec);if(D.result==="error")return D.value.map(function(ue){return new ht(""+S.key+ue.key,S.value,ue.message)});var X=D.value.expression||D.value._styleExpression.expression;if(S.expressionContext==="property"&&S.propertyKey==="text-font"&&!X.outputDefined())return[new ht(S.key,S.value,'Invalid data expression for "'+S.propertyKey+'". Output values must be contained as literals within the expression.')];if(S.expressionContext==="property"&&S.propertyType==="layout"&&!Qn(X))return[new ht(S.key,S.value,'"feature-state" data expressions are not supported with layout properties.')];if(S.expressionContext==="filter"&&!Qn(X))return[new ht(S.key,S.value,'"feature-state" data expressions are not supported with filters.')];if(S.expressionContext&&S.expressionContext.indexOf("cluster")===0){if(!mr(X,["zoom","feature-state"]))return[new ht(S.key,S.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(S.expressionContext==="cluster-initial"&&!tr(X))return[new ht(S.key,S.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function xs(S){var D=S.key,X=S.value,ue=S.valueSpec,Ae=[];return Array.isArray(ue.values)?ue.values.indexOf(ft(X))===-1&&Ae.push(new ht(D,X,"expected one of ["+ue.values.join(", ")+"], "+JSON.stringify(X)+" found")):Object.keys(ue.values).indexOf(ft(X))===-1&&Ae.push(new ht(D,X,"expected one of ["+Object.keys(ue.values).join(", ")+"], "+JSON.stringify(X)+" found")),Ae}function is(S){if(S===!0||S===!1)return!0;if(!Array.isArray(S)||S.length===0)return!1;switch(S[0]){case"has":return S.length>=2&&S[1]!=="$id"&&S[1]!=="$type";case"in":return S.length>=3&&(typeof S[1]!="string"||Array.isArray(S[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return S.length!==3||Array.isArray(S[1])||Array.isArray(S[2]);case"any":case"all":for(var D=0,X=S.slice(1);D<X.length;D+=1){var ue=X[D];if(!is(ue)&&typeof ue!="boolean")return!1}return!0;default:return!0}}zs.deserialize=function(S){return new zs(S._parameters,S._specification)},zs.serialize=function(S){return{_parameters:S._parameters,_specification:S._specification}};var as={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ds(S){if(S==null)return{filter:function(){return!0},needGeometry:!1};is(S)||(S=Fo(S));var D=_o(S,as);if(D.result==="error")throw new Error(D.value.map(function(X){return X.key+": "+X.message}).join(", "));return{filter:function(X,ue,Ae){return D.value.evaluate(X,ue,{},Ae)},needGeometry:ai(S)}}function al(S,D){return S<D?-1:S>D?1:0}function ai(S){if(!Array.isArray(S))return!1;if(S[0]==="within")return!0;for(var D=1;D<S.length;D++)if(ai(S[D]))return!0;return!1}function Fo(S){if(!S)return!0;var D,X=S[0];return S.length<=1?X!=="any":X==="=="?ta(S[1],S[2],"=="):X==="!="?ii(ta(S[1],S[2],"==")):X==="<"||X===">"||X==="<="||X===">="?ta(S[1],S[2],X):X==="any"?(D=S.slice(1),["any"].concat(D.map(Fo))):X==="all"?["all"].concat(S.slice(1).map(Fo)):X==="none"?["all"].concat(S.slice(1).map(Fo).map(ii)):X==="in"?Ya(S[1],S.slice(2)):X==="!in"?ii(Ya(S[1],S.slice(2))):X==="has"?Qr(S[1]):X==="!has"?ii(Qr(S[1])):X!=="within"||S}function ta(S,D,X){switch(S){case"$type":return["filter-type-"+X,D];case"$id":return["filter-id-"+X,D];default:return["filter-"+X,S,D]}}function Ya(S,D){if(D.length===0)return!1;switch(S){case"$type":return["filter-type-in",["literal",D]];case"$id":return["filter-id-in",["literal",D]];default:return D.length>200&&!D.some(function(X){return typeof X!=typeof D[0]})?["filter-in-large",S,["literal",D.sort(al)]]:["filter-in-small",S,["literal",D]]}}function Qr(S){switch(S){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",S]}}function ii(S){return["!",S]}function La(S){return is(Et(S.value))?rs(mt({},S,{expressionContext:"filter",valueSpec:{value:"boolean"}})):bs(S)}function bs(S){var D=S.value,X=S.key;if(Zr(D)!=="array")return[new ht(X,D,"array expected, "+Zr(D)+" found")];var ue,Ae=S.styleSpec,Pe=[];if(D.length<1)return[new ht(X,D,"filter array must have at least 1 element")];switch(Pe=Pe.concat(xs({key:X+"[0]",value:D[0],valueSpec:Ae.filter_operator,style:S.style,styleSpec:S.styleSpec})),ft(D[0])){case"<":case"<=":case">":case">=":D.length>=2&&ft(D[1])==="$type"&&Pe.push(new ht(X,D,'"$type" cannot be use with operator "'+D[0]+'"'));case"==":case"!=":D.length!==3&&Pe.push(new ht(X,D,'filter array for operator "'+D[0]+'" must have 3 elements'));case"in":case"!in":D.length>=2&&(ue=Zr(D[1]))!=="string"&&Pe.push(new ht(X+"[1]",D[1],"string expected, "+ue+" found"));for(var je=2;je<D.length;je++)ue=Zr(D[je]),ft(D[1])==="$type"?Pe=Pe.concat(xs({key:X+"["+je+"]",value:D[je],valueSpec:Ae.geometry_type,style:S.style,styleSpec:S.styleSpec})):ue!=="string"&&ue!=="number"&&ue!=="boolean"&&Pe.push(new ht(X+"["+je+"]",D[je],"string, number, or boolean expected, "+ue+" found"));break;case"any":case"all":case"none":for(var $e=1;$e<D.length;$e++)Pe=Pe.concat(bs({key:X+"["+$e+"]",value:D[$e],style:S.style,styleSpec:S.styleSpec}));break;case"has":case"!has":ue=Zr(D[1]),D.length!==2?Pe.push(new ht(X,D,'filter array for "'+D[0]+'" operator must have 2 elements')):ue!=="string"&&Pe.push(new ht(X+"[1]",D[1],"string expected, "+ue+" found"));break;case"within":ue=Zr(D[1]),D.length!==2?Pe.push(new ht(X,D,'filter array for "'+D[0]+'" operator must have 2 elements')):ue!=="object"&&Pe.push(new ht(X+"[1]",D[1],"object expected, "+ue+" found"))}return Pe}function Rs(S,D){var X=S.key,ue=S.style,Ae=S.styleSpec,Pe=S.value,je=S.objectKey,$e=Ae[D+"_"+S.layerType];if(!$e)return[];var ut=je.match(/^(.*)-transition$/);if(D==="paint"&&ut&&$e[ut[1]]&&$e[ut[1]].transition)return Ra({key:X,value:Pe,valueSpec:Ae.transition,style:ue,styleSpec:Ae});var wt,Mt=S.valueSpec||$e[je];if(!Mt)return[new ht(X,Pe,'unknown property "'+je+'"')];if(Zr(Pe)==="string"&&xo(Mt)&&!Mt.tokens&&(wt=/^{([^}]+)}$/.exec(Pe)))return[new ht(X,Pe,'"'+je+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(wt[1])+" }`.")];var Nt=[];return S.layerType==="symbol"&&(je==="text-field"&&ue&&!ue.glyphs&&Nt.push(new ht(X,Pe,'use of "text-field" requires a style "glyphs" property')),je==="text-font"&&gs(Et(Pe))&&ft(Pe.type)==="identity"&&Nt.push(new ht(X,Pe,'"text-font" does not support identity functions'))),Nt.concat(Ra({key:S.key,value:Pe,valueSpec:Mt,style:ue,styleSpec:Ae,expressionContext:"property",propertyType:D,propertyKey:je}))}function ol(S){return Rs(S,"paint")}function Fs(S){return Rs(S,"layout")}function Bs(S){var D=[],X=S.value,ue=S.key,Ae=S.style,Pe=S.styleSpec;X.type||X.ref||D.push(new ht(ue,X,'either "type" or "ref" is required'));var je,$e=ft(X.type),ut=ft(X.ref);if(X.id)for(var wt=ft(X.id),Mt=0;Mt<S.arrayIndex;Mt++){var Nt=Ae.layers[Mt];ft(Nt.id)===wt&&D.push(new ht(ue,X.id,'duplicate layer id "'+X.id+'", previously used at line '+Nt.id.__line__))}if("ref"in X)["type","source","source-layer","filter","layout"].forEach(function(ln){ln in X&&D.push(new ht(ue,X[ln],'"'+ln+'" is prohibited for ref layers'))}),Ae.layers.forEach(function(ln){ft(ln.id)===ut&&(je=ln)}),je?je.ref?D.push(new ht(ue,X.ref,"ref cannot reference another ref layer")):$e=ft(je.type):D.push(new ht(ue,X.ref,'ref layer "'+ut+'" not found'));else if($e!=="background")if(X.source){var Wt=Ae.sources&&Ae.sources[X.source],Ut=Wt&&ft(Wt.type);Wt?Ut==="vector"&&$e==="raster"?D.push(new ht(ue,X.source,'layer "'+X.id+'" requires a raster source')):Ut==="raster"&&$e!=="raster"?D.push(new ht(ue,X.source,'layer "'+X.id+'" requires a vector source')):Ut!=="vector"||X["source-layer"]?Ut==="raster-dem"&&$e!=="hillshade"?D.push(new ht(ue,X.source,"raster-dem source can only be used with layer type 'hillshade'.")):$e!=="line"||!X.paint||!X.paint["line-gradient"]||Ut==="geojson"&&Wt.lineMetrics||D.push(new ht(ue,X,'layer "'+X.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):D.push(new ht(ue,X,'layer "'+X.id+'" must specify a "source-layer"')):D.push(new ht(ue,X.source,'source "'+X.source+'" not found'))}else D.push(new ht(ue,X,'missing required property "source"'));return D=D.concat(Ea({key:ue,value:X,valueSpec:Pe.layer,style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Ra({key:ue+".type",value:X.type,valueSpec:Pe.layer.type,style:S.style,styleSpec:S.styleSpec,object:X,objectKey:"type"})},filter:La,layout:function(ln){return Ea({layer:X,key:ln.key,value:ln.value,style:ln.style,styleSpec:ln.styleSpec,objectElementValidators:{"*":function(fn){return Fs(mt({layerType:$e},fn))}}})},paint:function(ln){return Ea({layer:X,key:ln.key,value:ln.value,style:ln.style,styleSpec:ln.styleSpec,objectElementValidators:{"*":function(fn){return ol(mt({layerType:$e},fn))}}})}}})),D}function Da(S){var D=S.value,X=S.key,ue=Zr(D);return ue!=="string"?[new ht(X,D,"string expected, "+ue+" found")]:[]}var Bo={promoteId:function(S){var D=S.key,X=S.value;if(Zr(X)==="string")return Da({key:D,value:X});var ue=[];for(var Ae in X)ue.push.apply(ue,Da({key:D+"."+Ae,value:X[Ae]}));return ue}};function No(S){var D=S.value,X=S.key,ue=S.styleSpec,Ae=S.style;if(!D.type)return[new ht(X,D,'"type" is required')];var Pe,je=ft(D.type);switch(je){case"vector":case"raster":case"raster-dem":return Ea({key:X,value:D,valueSpec:ue["source_"+je.replace("-","_")],style:S.style,styleSpec:ue,objectElementValidators:Bo});case"geojson":if(Pe=Ea({key:X,value:D,valueSpec:ue.source_geojson,style:Ae,styleSpec:ue,objectElementValidators:Bo}),D.cluster)for(var $e in D.clusterProperties){var ut=D.clusterProperties[$e],wt=ut[0],Mt=ut[1],Nt=typeof wt=="string"?[wt,["accumulated"],["get",$e]]:wt;Pe.push.apply(Pe,rs({key:X+"."+$e+".map",value:Mt,expressionContext:"cluster-map"})),Pe.push.apply(Pe,rs({key:X+"."+$e+".reduce",value:Nt,expressionContext:"cluster-reduce"}))}return Pe;case"video":return Ea({key:X,value:D,valueSpec:ue.source_video,style:Ae,styleSpec:ue});case"image":return Ea({key:X,value:D,valueSpec:ue.source_image,style:Ae,styleSpec:ue});case"canvas":return[new ht(X,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return xs({key:X+".type",value:D.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:Ae,styleSpec:ue})}}function sa(S){var D=S.value,X=S.styleSpec,ue=X.light,Ae=S.style,Pe=[],je=Zr(D);if(D===void 0)return Pe;if(je!=="object")return Pe.concat([new ht("light",D,"object expected, "+je+" found")]);for(var $e in D){var ut=$e.match(/^(.*)-transition$/);Pe=ut&&ue[ut[1]]&&ue[ut[1]].transition?Pe.concat(Ra({key:$e,value:D[$e],valueSpec:X.transition,style:Ae,styleSpec:X})):ue[$e]?Pe.concat(Ra({key:$e,value:D[$e],valueSpec:ue[$e],style:Ae,styleSpec:X})):Pe.concat([new ht($e,D[$e],'unknown property "'+$e+'"')])}return Pe}var Ns={"*":function(){return[]},array:il,boolean:function(S){var D=S.value,X=S.key,ue=Zr(D);return ue!=="boolean"?[new ht(X,D,"boolean expected, "+ue+" found")]:[]},number:El,color:function(S){var D=S.key,X=S.value,ue=Zr(X);return ue!=="string"?[new ht(D,X,"color expected, "+ue+" found")]:Rn(X)===null?[new ht(D,X,'color expected, "'+X+'" found')]:[]},constants:vt,enum:xs,filter:La,function:ys,layer:Bs,object:Ea,source:No,light:sa,string:Da,formatted:function(S){return Da(S).length===0?[]:rs(S)},resolvedImage:function(S){return Da(S).length===0?[]:rs(S)}};function Ra(S){var D=S.value,X=S.valueSpec,ue=S.styleSpec;return X.expression&&gs(ft(D))?ys(S):X.expression&&ns(Et(D))?rs(S):X.type&&Ns[X.type]?Ns[X.type](S):Ea(mt({},S,{valueSpec:X.type?ue[X.type]:X}))}function Hi(S){var D=S.value,X=S.key,ue=Da(S);return ue.length||(D.indexOf("{fontstack}")===-1&&ue.push(new ht(X,D,'"glyphs" url must include a "{fontstack}" token')),D.indexOf("{range}")===-1&&ue.push(new ht(X,D,'"glyphs" url must include a "{range}" token'))),ue}function Xi(S,D){D===void 0&&(D=Ze);var X=[];return X=X.concat(Ra({key:"",value:S,valueSpec:D.$root,styleSpec:D,style:S,objectElementValidators:{glyphs:Hi,"*":function(){return[]}}})),S.constants&&(X=X.concat(vt({key:"constants",value:S.constants,style:S,styleSpec:D}))),hi(X)}function hi(S){return[].concat(S).sort(function(D,X){return D.line-X.line})}function Ji(S){return function(){for(var D=[],X=arguments.length;X--;)D[X]=arguments[X];return hi(S.apply(this,D))}}Xi.source=Ji(No),Xi.light=Ji(sa),Xi.layer=Ji(Bs),Xi.filter=Ji(La),Xi.paintProperty=Ji(ol),Xi.layoutProperty=Ji(Fs);var so=Xi,os=so.light,Za=so.paintProperty,jo=so.layoutProperty;function ga(S,D){var X=!1;if(D&&D.length)for(var ue=0,Ae=D;ue<Ae.length;ue+=1){var Pe=Ae[ue];S.fire(new Be(new Error(Pe.message))),X=!0}return X}var ss=Fa,wo=3;function Fa(S,D,X){var ue=this.cells=[];if(S instanceof ArrayBuffer){this.arrayBuffer=S;var Ae=new Int32Array(this.arrayBuffer);S=Ae[0],D=Ae[1],X=Ae[2],this.d=D+2*X;for(var Pe=0;Pe<this.d*this.d;Pe++){var je=Ae[wo+Pe],$e=Ae[wo+Pe+1];ue.push(je===$e?null:Ae.subarray(je,$e))}var ut=Ae[wo+ue.length],wt=Ae[wo+ue.length+1];this.keys=Ae.subarray(ut,wt),this.bboxes=Ae.subarray(wt),this.insert=this._insertReadonly}else{this.d=D+2*X;for(var Mt=0;Mt<this.d*this.d;Mt++)ue.push([]);this.keys=[],this.bboxes=[]}this.n=D,this.extent=S,this.padding=X,this.scale=D/S,this.uid=0;var Nt=X/D*S;this.min=-Nt,this.max=S+Nt}Fa.prototype.insert=function(S,D,X,ue,Ae){this._forEachCell(D,X,ue,Ae,this._insertCell,this.uid++),this.keys.push(S),this.bboxes.push(D),this.bboxes.push(X),this.bboxes.push(ue),this.bboxes.push(Ae)},Fa.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Fa.prototype._insertCell=function(S,D,X,ue,Ae,Pe){this.cells[Ae].push(Pe)},Fa.prototype.query=function(S,D,X,ue,Ae){var Pe=this.min,je=this.max;if(S<=Pe&&D<=Pe&&je<=X&&je<=ue&&!Ae)return Array.prototype.slice.call(this.keys);var $e=[];return this._forEachCell(S,D,X,ue,this._queryCell,$e,{},Ae),$e},Fa.prototype._queryCell=function(S,D,X,ue,Ae,Pe,je,$e){var ut=this.cells[Ae];if(ut!==null)for(var wt=this.keys,Mt=this.bboxes,Nt=0;Nt<ut.length;Nt++){var Wt=ut[Nt];if(je[Wt]===void 0){var Ut=4*Wt;($e?$e(Mt[Ut+0],Mt[Ut+1],Mt[Ut+2],Mt[Ut+3]):S<=Mt[Ut+2]&&D<=Mt[Ut+3]&&X>=Mt[Ut+0]&&ue>=Mt[Ut+1])?(je[Wt]=!0,Pe.push(wt[Wt])):je[Wt]=!1}}},Fa.prototype._forEachCell=function(S,D,X,ue,Ae,Pe,je,$e){for(var ut=this._convertToCellCoord(S),wt=this._convertToCellCoord(D),Mt=this._convertToCellCoord(X),Nt=this._convertToCellCoord(ue),Wt=ut;Wt<=Mt;Wt++)for(var Ut=wt;Ut<=Nt;Ut++){var ln=this.d*Ut+Wt;if((!$e||$e(this._convertFromCellCoord(Wt),this._convertFromCellCoord(Ut),this._convertFromCellCoord(Wt+1),this._convertFromCellCoord(Ut+1)))&&Ae.call(this,S,D,X,ue,ln,Pe,je,$e))return}},Fa.prototype._convertFromCellCoord=function(S){return(S-this.padding)/this.scale},Fa.prototype._convertToCellCoord=function(S){return Math.max(0,Math.min(this.d-1,Math.floor(S*this.scale)+this.padding))},Fa.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var S=this.cells,D=wo+this.cells.length+1+1,X=0,ue=0;ue<this.cells.length;ue++)X+=this.cells[ue].length;var Ae=new Int32Array(D+X+this.keys.length+this.bboxes.length);Ae[0]=this.extent,Ae[1]=this.n,Ae[2]=this.padding;for(var Pe=D,je=0;je<S.length;je++){var $e=S[je];Ae[wo+je]=Pe,Ae.set($e,Pe),Pe+=$e.length}return Ae[wo+S.length]=Pe,Ae.set(this.keys,Pe),Pe+=this.keys.length,Ae[wo+S.length+1]=Pe,Ae.set(this.bboxes,Pe),Pe+=this.bboxes.length,Ae.buffer};var Ba=r.ImageData,di=r.ImageBitmap,Xa={};function Lr(S,D,X){X===void 0&&(X={}),Object.defineProperty(D,"_classRegistryKey",{value:S,writeable:!1}),Xa[S]={klass:D,omit:X.omit||[],shallow:X.shallow||[]}}for(var js in Lr("Object",Object),ss.serialize=function(S,D){var X=S.toArrayBuffer();return D&&D.push(X),{buffer:X}},ss.deserialize=function(S){return new ss(S.buffer)},Lr("Grid",ss),Lr("Color",Fn),Lr("Error",Error),Lr("ResolvedImage",ar),Lr("StylePropertyFunction",zs),Lr("StyleExpression",Ro,{omit:["_evaluator"]}),Lr("ZoomDependentExpression",ms),Lr("ZoomConstantExpression",Wa),Lr("CompoundExpression",yn,{omit:["_evaluate"]}),ds)ds[js]._classRegistryKey||Lr("Expression_"+js,ds[js]);function dl(S){return S&&typeof ArrayBuffer<"u"&&(S instanceof ArrayBuffer||S.constructor&&S.constructor.name==="ArrayBuffer")}function Uo(S){return di&&S instanceof di}function Vo(S,D){if(S==null||typeof S=="boolean"||typeof S=="number"||typeof S=="string"||S instanceof Boolean||S instanceof Number||S instanceof String||S instanceof Date||S instanceof RegExp)return S;if(dl(S)||Uo(S))return D&&D.push(S),S;if(ArrayBuffer.isView(S)){var X=S;return D&&D.push(X.buffer),X}if(S instanceof Ba)return D&&D.push(S.data.buffer),S;if(Array.isArray(S)){for(var ue=[],Ae=0,Pe=S;Ae<Pe.length;Ae+=1){var je=Pe[Ae];ue.push(Vo(je,D))}return ue}if(typeof S=="object"){var $e=S.constructor,ut=$e._classRegistryKey;if(!ut)throw new Error("can't serialize object of unregistered class");var wt=$e.serialize?$e.serialize(S,D):{};if(!$e.serialize){for(var Mt in S)if(S.hasOwnProperty(Mt)&&!(Xa[ut].omit.indexOf(Mt)>=0)){var Nt=S[Mt];wt[Mt]=Xa[ut].shallow.indexOf(Mt)>=0?Nt:Vo(Nt,D)}S instanceof Error&&(wt.message=S.message)}if(wt.$name)throw new Error("$name property is reserved for worker serialization logic.");return ut!=="Object"&&(wt.$name=ut),wt}throw new Error("can't serialize object of type "+typeof S)}function ls(S){if(S==null||typeof S=="boolean"||typeof S=="number"||typeof S=="string"||S instanceof Boolean||S instanceof Number||S instanceof String||S instanceof Date||S instanceof RegExp||dl(S)||Uo(S)||ArrayBuffer.isView(S)||S instanceof Ba)return S;if(Array.isArray(S))return S.map(ls);if(typeof S=="object"){var D=S.$name||"Object",X=Xa[D].klass;if(!X)throw new Error("can't deserialize unregistered class "+D);if(X.deserialize)return X.deserialize(S);for(var ue=Object.create(X.prototype),Ae=0,Pe=Object.keys(S);Ae<Pe.length;Ae+=1){var je=Pe[Ae];if(je!=="$name"){var $e=S[je];ue[je]=Xa[D].shallow.indexOf(je)>=0?$e:ls($e)}}return ue}throw new Error("can't deserialize object of type "+typeof S)}var _s=function(){this.first=!0};_s.prototype.update=function(S,D){var X=Math.floor(S);return this.first?(this.first=!1,this.lastIntegerZoom=X,this.lastIntegerZoomTime=0,this.lastZoom=S,this.lastFloorZoom=X,!0):(this.lastFloorZoom>X?(this.lastIntegerZoom=X+1,this.lastIntegerZoomTime=D):this.lastFloorZoom<X&&(this.lastIntegerZoom=X,this.lastIntegerZoomTime=D),S!==this.lastZoom&&(this.lastZoom=S,this.lastFloorZoom=X,!0))};var _r={"Latin-1 Supplement":function(S){return S>=128&&S<=255},Arabic:function(S){return S>=1536&&S<=1791},"Arabic Supplement":function(S){return S>=1872&&S<=1919},"Arabic Extended-A":function(S){return S>=2208&&S<=2303},"Hangul Jamo":function(S){return S>=4352&&S<=4607},"Unified Canadian Aboriginal Syllabics":function(S){return S>=5120&&S<=5759},Khmer:function(S){return S>=6016&&S<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(S){return S>=6320&&S<=6399},"General Punctuation":function(S){return S>=8192&&S<=8303},"Letterlike Symbols":function(S){return S>=8448&&S<=8527},"Number Forms":function(S){return S>=8528&&S<=8591},"Miscellaneous Technical":function(S){return S>=8960&&S<=9215},"Control Pictures":function(S){return S>=9216&&S<=9279},"Optical Character Recognition":function(S){return S>=9280&&S<=9311},"Enclosed Alphanumerics":function(S){return S>=9312&&S<=9471},"Geometric Shapes":function(S){return S>=9632&&S<=9727},"Miscellaneous Symbols":function(S){return S>=9728&&S<=9983},"Miscellaneous Symbols and Arrows":function(S){return S>=11008&&S<=11263},"CJK Radicals Supplement":function(S){return S>=11904&&S<=12031},"Kangxi Radicals":function(S){return S>=12032&&S<=12255},"Ideographic Description Characters":function(S){return S>=12272&&S<=12287},"CJK Symbols and Punctuation":function(S){return S>=12288&&S<=12351},Hiragana:function(S){return S>=12352&&S<=12447},Katakana:function(S){return S>=12448&&S<=12543},Bopomofo:function(S){return S>=12544&&S<=12591},"Hangul Compatibility Jamo":function(S){return S>=12592&&S<=12687},Kanbun:function(S){return S>=12688&&S<=12703},"Bopomofo Extended":function(S){return S>=12704&&S<=12735},"CJK Strokes":function(S){return S>=12736&&S<=12783},"Katakana Phonetic Extensions":function(S){return S>=12784&&S<=12799},"Enclosed CJK Letters and Months":function(S){return S>=12800&&S<=13055},"CJK Compatibility":function(S){return S>=13056&&S<=13311},"CJK Unified Ideographs Extension A":function(S){return S>=13312&&S<=19903},"Yijing Hexagram Symbols":function(S){return S>=19904&&S<=19967},"CJK Unified Ideographs":function(S){return S>=19968&&S<=40959},"Yi Syllables":function(S){return S>=40960&&S<=42127},"Yi Radicals":function(S){return S>=42128&&S<=42191},"Hangul Jamo Extended-A":function(S){return S>=43360&&S<=43391},"Hangul Syllables":function(S){return S>=44032&&S<=55215},"Hangul Jamo Extended-B":function(S){return S>=55216&&S<=55295},"Private Use Area":function(S){return S>=57344&&S<=63743},"CJK Compatibility Ideographs":function(S){return S>=63744&&S<=64255},"Arabic Presentation Forms-A":function(S){return S>=64336&&S<=65023},"Vertical Forms":function(S){return S>=65040&&S<=65055},"CJK Compatibility Forms":function(S){return S>=65072&&S<=65103},"Small Form Variants":function(S){return S>=65104&&S<=65135},"Arabic Presentation Forms-B":function(S){return S>=65136&&S<=65279},"Halfwidth and Fullwidth Forms":function(S){return S>=65280&&S<=65519}};function Us(S){for(var D=0,X=S;D<X.length;D+=1)if(To(X[D].charCodeAt(0)))return!0;return!1}function To(S){return!(S!==746&&S!==747&&(S<4352||!(_r["Bopomofo Extended"](S)||_r.Bopomofo(S)||_r["CJK Compatibility Forms"](S)&&!(S>=65097&&S<=65103)||_r["CJK Compatibility Ideographs"](S)||_r["CJK Compatibility"](S)||_r["CJK Radicals Supplement"](S)||_r["CJK Strokes"](S)||!(!_r["CJK Symbols and Punctuation"](S)||S>=12296&&S<=12305||S>=12308&&S<=12319||S===12336)||_r["CJK Unified Ideographs Extension A"](S)||_r["CJK Unified Ideographs"](S)||_r["Enclosed CJK Letters and Months"](S)||_r["Hangul Compatibility Jamo"](S)||_r["Hangul Jamo Extended-A"](S)||_r["Hangul Jamo Extended-B"](S)||_r["Hangul Jamo"](S)||_r["Hangul Syllables"](S)||_r.Hiragana(S)||_r["Ideographic Description Characters"](S)||_r.Kanbun(S)||_r["Kangxi Radicals"](S)||_r["Katakana Phonetic Extensions"](S)||_r.Katakana(S)&&S!==12540||!(!_r["Halfwidth and Fullwidth Forms"](S)||S===65288||S===65289||S===65293||S>=65306&&S<=65310||S===65339||S===65341||S===65343||S>=65371&&S<=65503||S===65507||S>=65512&&S<=65519)||!(!_r["Small Form Variants"](S)||S>=65112&&S<=65118||S>=65123&&S<=65126)||_r["Unified Canadian Aboriginal Syllabics"](S)||_r["Unified Canadian Aboriginal Syllabics Extended"](S)||_r["Vertical Forms"](S)||_r["Yijing Hexagram Symbols"](S)||_r["Yi Syllables"](S)||_r["Yi Radicals"](S))))}function Gi(S){return!(To(S)||function(D){return!!(_r["Latin-1 Supplement"](D)&&(D===167||D===169||D===174||D===177||D===188||D===189||D===190||D===215||D===247)||_r["General Punctuation"](D)&&(D===8214||D===8224||D===8225||D===8240||D===8241||D===8251||D===8252||D===8258||D===8263||D===8264||D===8265||D===8273)||_r["Letterlike Symbols"](D)||_r["Number Forms"](D)||_r["Miscellaneous Technical"](D)&&(D>=8960&&D<=8967||D>=8972&&D<=8991||D>=8996&&D<=9e3||D===9003||D>=9085&&D<=9114||D>=9150&&D<=9165||D===9167||D>=9169&&D<=9179||D>=9186&&D<=9215)||_r["Control Pictures"](D)&&D!==9251||_r["Optical Character Recognition"](D)||_r["Enclosed Alphanumerics"](D)||_r["Geometric Shapes"](D)||_r["Miscellaneous Symbols"](D)&&!(D>=9754&&D<=9759)||_r["Miscellaneous Symbols and Arrows"](D)&&(D>=11026&&D<=11055||D>=11088&&D<=11097||D>=11192&&D<=11243)||_r["CJK Symbols and Punctuation"](D)||_r.Katakana(D)||_r["Private Use Area"](D)||_r["CJK Compatibility Forms"](D)||_r["Small Form Variants"](D)||_r["Halfwidth and Fullwidth Forms"](D)||D===8734||D===8756||D===8757||D>=9984&&D<=10087||D>=10102&&D<=10131||D===65532||D===65533)}(S))}function qo(S){return _r.Arabic(S)||_r["Arabic Supplement"](S)||_r["Arabic Extended-A"](S)||_r["Arabic Presentation Forms-A"](S)||_r["Arabic Presentation Forms-B"](S)}function Ja(S){return S>=1424&&S<=2303||_r["Arabic Presentation Forms-A"](S)||_r["Arabic Presentation Forms-B"](S)}function Na(S,D){return!(!D&&Ja(S)||S>=2304&&S<=3583||S>=3840&&S<=4255||_r.Khmer(S))}function la(S){for(var D=0,X=S;D<X.length;D+=1)if(Ja(X[D].charCodeAt(0)))return!0;return!1}var lo="deferred",ja="loading",ko="loaded",Vs="error",Ho=null,Kr="unavailable",Ki=null,va=function(S){S&&typeof S=="string"&&S.indexOf("NetworkError")>-1&&(Kr=Vs),Ho&&Ho(S)};function uo(){ma.fire(new Fe("pluginStateChange",{pluginStatus:Kr,pluginURL:Ki}))}var ma=new at,ws=function(){return Kr},Ts=function(){if(Kr!==lo||!Ki)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Kr=ja,uo(),Ki&&Ft({url:Ki},function(S){S?va(S):(Kr=ko,uo())})},ya={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Kr===ko||ya.applyArabicShaping!=null},isLoading:function(){return Kr===ja},setState:function(S){Kr=S.pluginStatus,Ki=S.pluginURL},isParsed:function(){return ya.applyArabicShaping!=null&&ya.processBidirectionalText!=null&&ya.processStyledBidirectionalText!=null},getPluginURL:function(){return Ki}},Xr=function(S,D){this.zoom=S,D?(this.now=D.now,this.fadeDuration=D.fadeDuration,this.zoomHistory=D.zoomHistory,this.transition=D.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new _s,this.transition={})};Xr.prototype.isSupportedScript=function(S){return function(D,X){for(var ue=0,Ae=D;ue<Ae.length;ue+=1)if(!Na(Ae[ue].charCodeAt(0),X))return!1;return!0}(S,ya.isLoaded())},Xr.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Xr.prototype.getCrossfadeParameters=function(){var S=this.zoom,D=S-Math.floor(S),X=this.crossFadingFactor();return S>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:D+(1-D)*X}:{fromScale:.5,toScale:1,t:1-(1-X)*D}};var co=function(S,D){this.property=S,this.value=D,this.expression=function(X,ue){if(gs(X))return new zs(X,ue);if(ns(X)){var Ae=Sl(X,ue);if(Ae.result==="error")throw new Error(Ae.value.map(function(je){return je.key+": "+je.message}).join(", "));return Ae.value}var Pe=X;return typeof X=="string"&&ue.type==="color"&&(Pe=Fn.parse(X)),{kind:"constant",evaluate:function(){return Pe}}}(D===void 0?S.specification.default:D,S.specification)};co.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},co.prototype.possiblyEvaluate=function(S,D,X){return this.property.possiblyEvaluate(this,S,D,X)};var us=function(S){this.property=S,this.value=new co(S,void 0)};us.prototype.transitioned=function(S,D){return new ks(this.property,this.value,D,f({},S.transition,this.transition),S.now)},us.prototype.untransitioned=function(){return new ks(this.property,this.value,null,{},0)};var Ka=function(S){this._properties=S,this._values=Object.create(S.defaultTransitionablePropertyValues)};Ka.prototype.getValue=function(S){return E(this._values[S].value.value)},Ka.prototype.setValue=function(S,D){this._values.hasOwnProperty(S)||(this._values[S]=new us(this._values[S].property)),this._values[S].value=new co(this._values[S].property,D===null?void 0:E(D))},Ka.prototype.getTransition=function(S){return E(this._values[S].transition)},Ka.prototype.setTransition=function(S,D){this._values.hasOwnProperty(S)||(this._values[S]=new us(this._values[S].property)),this._values[S].transition=E(D)||void 0},Ka.prototype.serialize=function(){for(var S={},D=0,X=Object.keys(this._values);D<X.length;D+=1){var ue=X[D],Ae=this.getValue(ue);Ae!==void 0&&(S[ue]=Ae);var Pe=this.getTransition(ue);Pe!==void 0&&(S[ue+"-transition"]=Pe)}return S},Ka.prototype.transitioned=function(S,D){for(var X=new As(this._properties),ue=0,Ae=Object.keys(this._values);ue<Ae.length;ue+=1){var Pe=Ae[ue];X._values[Pe]=this._values[Pe].transitioned(S,D._values[Pe])}return X},Ka.prototype.untransitioned=function(){for(var S=new As(this._properties),D=0,X=Object.keys(this._values);D<X.length;D+=1){var ue=X[D];S._values[ue]=this._values[ue].untransitioned()}return S};var ks=function(S,D,X,ue,Ae){this.property=S,this.value=D,this.begin=Ae+ue.delay||0,this.end=this.begin+ue.duration||0,S.specification.transition&&(ue.delay||ue.duration)&&(this.prior=X)};ks.prototype.possiblyEvaluate=function(S,D,X){var ue=S.now||0,Ae=this.value.possiblyEvaluate(S,D,X),Pe=this.prior;if(Pe){if(ue>this.end)return this.prior=null,Ae;if(this.value.isDataDriven())return this.prior=null,Ae;if(ue<this.begin)return Pe.possiblyEvaluate(S,D,X);var je=(ue-this.begin)/(this.end-this.begin);return this.property.interpolate(Pe.possiblyEvaluate(S,D,X),Ae,function($e){if($e<=0)return 0;if($e>=1)return 1;var ut=$e*$e,wt=ut*$e;return 4*($e<.5?wt:3*($e-ut)+wt-.75)}(je))}return Ae};var As=function(S){this._properties=S,this._values=Object.create(S.defaultTransitioningPropertyValues)};As.prototype.possiblyEvaluate=function(S,D,X){for(var ue=new cs(this._properties),Ae=0,Pe=Object.keys(this._values);Ae<Pe.length;Ae+=1){var je=Pe[Ae];ue._values[je]=this._values[je].possiblyEvaluate(S,D,X)}return ue},As.prototype.hasTransition=function(){for(var S=0,D=Object.keys(this._values);S<D.length;S+=1){var X=D[S];if(this._values[X].prior)return!0}return!1};var $a=function(S){this._properties=S,this._values=Object.create(S.defaultPropertyValues)};$a.prototype.getValue=function(S){return E(this._values[S].value)},$a.prototype.setValue=function(S,D){this._values[S]=new co(this._values[S].property,D===null?void 0:E(D))},$a.prototype.serialize=function(){for(var S={},D=0,X=Object.keys(this._values);D<X.length;D+=1){var ue=X[D],Ae=this.getValue(ue);Ae!==void 0&&(S[ue]=Ae)}return S},$a.prototype.possiblyEvaluate=function(S,D,X){for(var ue=new cs(this._properties),Ae=0,Pe=Object.keys(this._values);Ae<Pe.length;Ae+=1){var je=Pe[Ae];ue._values[je]=this._values[je].possiblyEvaluate(S,D,X)}return ue};var gi=function(S,D,X){this.property=S,this.value=D,this.parameters=X};gi.prototype.isConstant=function(){return this.value.kind==="constant"},gi.prototype.constantOr=function(S){return this.value.kind==="constant"?this.value.value:S},gi.prototype.evaluate=function(S,D,X,ue){return this.property.evaluate(this.value,this.parameters,S,D,X,ue)};var cs=function(S){this._properties=S,this._values=Object.create(S.defaultPossiblyEvaluatedValues)};cs.prototype.get=function(S){return this._values[S]};var Pr=function(S){this.specification=S};Pr.prototype.possiblyEvaluate=function(S,D){return S.expression.evaluate(D)},Pr.prototype.interpolate=function(S,D,X){var ue=fi[this.specification.type];return ue?ue(S,D,X):S};var Br=function(S,D){this.specification=S,this.overrides=D};Br.prototype.possiblyEvaluate=function(S,D,X,ue){return S.expression.kind==="constant"||S.expression.kind==="camera"?new gi(this,{kind:"constant",value:S.expression.evaluate(D,null,{},X,ue)},D):new gi(this,S.expression,D)},Br.prototype.interpolate=function(S,D,X){if(S.value.kind!=="constant"||D.value.kind!=="constant")return S;if(S.value.value===void 0||D.value.value===void 0)return new gi(this,{kind:"constant",value:void 0},S.parameters);var ue=fi[this.specification.type];return ue?new gi(this,{kind:"constant",value:ue(S.value.value,D.value.value,X)},S.parameters):S},Br.prototype.evaluate=function(S,D,X,ue,Ae,Pe){return S.kind==="constant"?S.value:S.evaluate(D,X,ue,Ae,Pe)};var Ca=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.possiblyEvaluate=function(X,ue,Ae,Pe){if(X.value===void 0)return new gi(this,{kind:"constant",value:void 0},ue);if(X.expression.kind==="constant"){var je=X.expression.evaluate(ue,null,{},Ae,Pe),$e=X.property.specification.type==="resolvedImage"&&typeof je!="string"?je.name:je,ut=this._calculate($e,$e,$e,ue);return new gi(this,{kind:"constant",value:ut},ue)}if(X.expression.kind==="camera"){var wt=this._calculate(X.expression.evaluate({zoom:ue.zoom-1}),X.expression.evaluate({zoom:ue.zoom}),X.expression.evaluate({zoom:ue.zoom+1}),ue);return new gi(this,{kind:"constant",value:wt},ue)}return new gi(this,X.expression,ue)},D.prototype.evaluate=function(X,ue,Ae,Pe,je,$e){if(X.kind==="source"){var ut=X.evaluate(ue,Ae,Pe,je,$e);return this._calculate(ut,ut,ut,ue)}return X.kind==="composite"?this._calculate(X.evaluate({zoom:Math.floor(ue.zoom)-1},Ae,Pe),X.evaluate({zoom:Math.floor(ue.zoom)},Ae,Pe),X.evaluate({zoom:Math.floor(ue.zoom)+1},Ae,Pe),ue):X.value},D.prototype._calculate=function(X,ue,Ae,Pe){return Pe.zoom>Pe.zoomHistory.lastIntegerZoom?{from:X,to:ue}:{from:Ae,to:ue}},D.prototype.interpolate=function(X){return X},D}(Br),fo=function(S){this.specification=S};fo.prototype.possiblyEvaluate=function(S,D,X,ue){if(S.value!==void 0){if(S.expression.kind==="constant"){var Ae=S.expression.evaluate(D,null,{},X,ue);return this._calculate(Ae,Ae,Ae,D)}return this._calculate(S.expression.evaluate(new Xr(Math.floor(D.zoom-1),D)),S.expression.evaluate(new Xr(Math.floor(D.zoom),D)),S.expression.evaluate(new Xr(Math.floor(D.zoom+1),D)),D)}},fo.prototype._calculate=function(S,D,X,ue){return ue.zoom>ue.zoomHistory.lastIntegerZoom?{from:S,to:D}:{from:X,to:D}},fo.prototype.interpolate=function(S){return S};var Ao=function(S){this.specification=S};Ao.prototype.possiblyEvaluate=function(S,D,X,ue){return!!S.expression.evaluate(D,null,{},X,ue)},Ao.prototype.interpolate=function(){return!1};var Ri=function(S){for(var D in this.properties=S,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],S){var X=S[D];X.specification.overridable&&this.overridableProperties.push(D);var ue=this.defaultPropertyValues[D]=new co(X,void 0),Ae=this.defaultTransitionablePropertyValues[D]=new us(X);this.defaultTransitioningPropertyValues[D]=Ae.untransitioned(),this.defaultPossiblyEvaluatedValues[D]=ue.possiblyEvaluate({})}};Lr("DataDrivenProperty",Br),Lr("DataConstantProperty",Pr),Lr("CrossFadedDataDrivenProperty",Ca),Lr("CrossFadedProperty",fo),Lr("ColorRampProperty",Ao);var ho="-transition",oi=function(S){function D(X,ue){if(S.call(this),this.id=X.id,this.type=X.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},X.type!=="custom"&&(this.metadata=X.metadata,this.minzoom=X.minzoom,this.maxzoom=X.maxzoom,X.type!=="background"&&(this.source=X.source,this.sourceLayer=X["source-layer"],this.filter=X.filter),ue.layout&&(this._unevaluatedLayout=new $a(ue.layout)),ue.paint)){for(var Ae in this._transitionablePaint=new Ka(ue.paint),X.paint)this.setPaintProperty(Ae,X.paint[Ae],{validate:!1});for(var Pe in X.layout)this.setLayoutProperty(Pe,X.layout[Pe],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new cs(ue.paint)}}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},D.prototype.getLayoutProperty=function(X){return X==="visibility"?this.visibility:this._unevaluatedLayout.getValue(X)},D.prototype.setLayoutProperty=function(X,ue,Ae){if(Ae===void 0&&(Ae={}),ue!=null){var Pe="layers."+this.id+".layout."+X;if(this._validate(jo,Pe,X,ue,Ae))return}X!=="visibility"?this._unevaluatedLayout.setValue(X,ue):this.visibility=ue},D.prototype.getPaintProperty=function(X){return y(X,ho)?this._transitionablePaint.getTransition(X.slice(0,-11)):this._transitionablePaint.getValue(X)},D.prototype.setPaintProperty=function(X,ue,Ae){if(Ae===void 0&&(Ae={}),ue!=null){var Pe="layers."+this.id+".paint."+X;if(this._validate(Za,Pe,X,ue,Ae))return!1}if(y(X,ho))return this._transitionablePaint.setTransition(X.slice(0,-11),ue||void 0),!1;var je=this._transitionablePaint._values[X],$e=je.property.specification["property-type"]==="cross-faded-data-driven",ut=je.value.isDataDriven(),wt=je.value;this._transitionablePaint.setValue(X,ue),this._handleSpecialPaintPropertyUpdate(X);var Mt=this._transitionablePaint._values[X].value;return Mt.isDataDriven()||ut||$e||this._handleOverridablePaintPropertyUpdate(X,wt,Mt)},D.prototype._handleSpecialPaintPropertyUpdate=function(X){},D.prototype._handleOverridablePaintPropertyUpdate=function(X,ue,Ae){return!1},D.prototype.isHidden=function(X){return!!(this.minzoom&&X<this.minzoom)||!!(this.maxzoom&&X>=this.maxzoom)||this.visibility==="none"},D.prototype.updateTransitions=function(X){this._transitioningPaint=this._transitionablePaint.transitioned(X,this._transitioningPaint)},D.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},D.prototype.recalculate=function(X,ue){X.getCrossfadeParameters&&(this._crossfadeParameters=X.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(X,void 0,ue)),this.paint=this._transitioningPaint.possiblyEvaluate(X,void 0,ue)},D.prototype.serialize=function(){var X={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(X.layout=X.layout||{},X.layout.visibility=this.visibility),h(X,function(ue,Ae){return!(ue===void 0||Ae==="layout"&&!Object.keys(ue).length||Ae==="paint"&&!Object.keys(ue).length)})},D.prototype._validate=function(X,ue,Ae,Pe,je){return je===void 0&&(je={}),(!je||je.validate!==!1)&&ga(this,X.call(so,{key:ue,layerType:this.type,objectKey:Ae,value:Pe,styleSpec:Ze,style:{glyphs:!0,sprite:!0}}))},D.prototype.is3D=function(){return!1},D.prototype.isTileClipped=function(){return!1},D.prototype.hasOffscreenPass=function(){return!1},D.prototype.resize=function(){},D.prototype.isStateDependent=function(){for(var X in this.paint._values){var ue=this.paint.get(X);if(ue instanceof gi&&xo(ue.property.specification)&&(ue.value.kind==="source"||ue.value.kind==="composite")&&ue.value.isStateDependent)return!0}return!1},D}(at),Ll={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Pa=function(S,D){this._structArray=S,this._pos1=D*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},ui=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function bi(S,D){D===void 0&&(D=1);var X=0,ue=0;return{members:S.map(function(Ae){var Pe,je=(Pe=Ae.type,Ll[Pe].BYTES_PER_ELEMENT),$e=X=Ta(X,Math.max(D,je)),ut=Ae.components||1;return ue=Math.max(ue,je),X+=je*ut,{name:Ae.name,type:Ae.type,components:ut,offset:$e}}),size:Ta(X,Math.max(ue,D)),alignment:D}}function Ta(S,D){return Math.ceil(S/D)*D}ui.serialize=function(S,D){return S._trim(),D&&(S.isTransferred=!0,D.push(S.arrayBuffer)),{length:S.length,arrayBuffer:S.arrayBuffer}},ui.deserialize=function(S){var D=Object.create(this.prototype);return D.arrayBuffer=S.arrayBuffer,D.length=S.length,D.capacity=S.arrayBuffer.byteLength/D.bytesPerElement,D._refreshViews(),D},ui.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},ui.prototype.clear=function(){this.length=0},ui.prototype.resize=function(S){this.reserve(S),this.length=S},ui.prototype.reserve=function(S){if(S>this.capacity){this.capacity=Math.max(S,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var D=this.uint8;this._refreshViews(),D&&this.uint8.set(D)}},ui.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Go=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(X,ue){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,X,ue)},D.prototype.emplace=function(X,ue,Ae){var Pe=2*X;return this.int16[Pe+0]=ue,this.int16[Pe+1]=Ae,X},D}(ui);Go.prototype.bytesPerElement=4,Lr("StructArrayLayout2i4",Go);var vl=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(X,ue,Ae,Pe){var je=this.length;return this.resize(je+1),this.emplace(je,X,ue,Ae,Pe)},D.prototype.emplace=function(X,ue,Ae,Pe,je){var $e=4*X;return this.int16[$e+0]=ue,this.int16[$e+1]=Ae,this.int16[$e+2]=Pe,this.int16[$e+3]=je,X},D}(ui);vl.prototype.bytesPerElement=8,Lr("StructArrayLayout4i8",vl);var Xe=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(X,ue,Ae,Pe,je,$e){var ut=this.length;return this.resize(ut+1),this.emplace(ut,X,ue,Ae,Pe,je,$e)},D.prototype.emplace=function(X,ue,Ae,Pe,je,$e,ut){var wt=6*X;return this.int16[wt+0]=ue,this.int16[wt+1]=Ae,this.int16[wt+2]=Pe,this.int16[wt+3]=je,this.int16[wt+4]=$e,this.int16[wt+5]=ut,X},D}(ui);Xe.prototype.bytesPerElement=12,Lr("StructArrayLayout2i4i12",Xe);var Qe=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(X,ue,Ae,Pe,je,$e){var ut=this.length;return this.resize(ut+1),this.emplace(ut,X,ue,Ae,Pe,je,$e)},D.prototype.emplace=function(X,ue,Ae,Pe,je,$e,ut){var wt=4*X,Mt=8*X;return this.int16[wt+0]=ue,this.int16[wt+1]=Ae,this.uint8[Mt+4]=Pe,this.uint8[Mt+5]=je,this.uint8[Mt+6]=$e,this.uint8[Mt+7]=ut,X},D}(ui);Qe.prototype.bytesPerElement=8,Lr("StructArrayLayout2i4ub8",Qe);var lt=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(X,ue){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,X,ue)},D.prototype.emplace=function(X,ue,Ae){var Pe=2*X;return this.float32[Pe+0]=ue,this.float32[Pe+1]=Ae,X},D}(ui);lt.prototype.bytesPerElement=8,Lr("StructArrayLayout2f8",lt);var N=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(X,ue,Ae,Pe,je,$e,ut,wt,Mt,Nt){var Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,X,ue,Ae,Pe,je,$e,ut,wt,Mt,Nt)},D.prototype.emplace=function(X,ue,Ae,Pe,je,$e,ut,wt,Mt,Nt,Wt){var Ut=10*X;return this.uint16[Ut+0]=ue,this.uint16[Ut+1]=Ae,this.uint16[Ut+2]=Pe,this.uint16[Ut+3]=je,this.uint16[Ut+4]=$e,this.uint16[Ut+5]=ut,this.uint16[Ut+6]=wt,this.uint16[Ut+7]=Mt,this.uint16[Ut+8]=Nt,this.uint16[Ut+9]=Wt,X},D}(ui);N.prototype.bytesPerElement=20,Lr("StructArrayLayout10ui20",N);var W=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(X,ue,Ae,Pe,je,$e,ut,wt,Mt,Nt,Wt,Ut){var ln=this.length;return this.resize(ln+1),this.emplace(ln,X,ue,Ae,Pe,je,$e,ut,wt,Mt,Nt,Wt,Ut)},D.prototype.emplace=function(X,ue,Ae,Pe,je,$e,ut,wt,Mt,Nt,Wt,Ut,ln){var fn=12*X;return this.int16[fn+0]=ue,this.int16[fn+1]=Ae,this.int16[fn+2]=Pe,this.int16[fn+3]=je,this.uint16[fn+4]=$e,this.uint16[fn+5]=ut,this.uint16[fn+6]=wt,this.uint16[fn+7]=Mt,this.int16[fn+8]=Nt,this.int16[fn+9]=Wt,this.int16[fn+10]=Ut,this.int16[fn+11]=ln,X},D}(ui);W.prototype.bytesPerElement=24,Lr("StructArrayLayout4i4ui4i24",W);var G=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(X,ue,Ae){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,X,ue,Ae)},D.prototype.emplace=function(X,ue,Ae,Pe){var je=3*X;return this.float32[je+0]=ue,this.float32[je+1]=Ae,this.float32[je+2]=Pe,X},D}(ui);G.prototype.bytesPerElement=12,Lr("StructArrayLayout3f12",G);var C=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(X){var ue=this.length;return this.resize(ue+1),this.emplace(ue,X)},D.prototype.emplace=function(X,ue){var Ae=1*X;return this.uint32[Ae+0]=ue,X},D}(ui);C.prototype.bytesPerElement=4,Lr("StructArrayLayout1ul4",C);var H=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(X,ue,Ae,Pe,je,$e,ut,wt,Mt){var Nt=this.length;return this.resize(Nt+1),this.emplace(Nt,X,ue,Ae,Pe,je,$e,ut,wt,Mt)},D.prototype.emplace=function(X,ue,Ae,Pe,je,$e,ut,wt,Mt,Nt){var Wt=10*X,Ut=5*X;return this.int16[Wt+0]=ue,this.int16[Wt+1]=Ae,this.int16[Wt+2]=Pe,this.int16[Wt+3]=je,this.int16[Wt+4]=$e,this.int16[Wt+5]=ut,this.uint32[Ut+3]=wt,this.uint16[Wt+8]=Mt,this.uint16[Wt+9]=Nt,X},D}(ui);H.prototype.bytesPerElement=20,Lr("StructArrayLayout6i1ul2ui20",H);var Q=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(X,ue,Ae,Pe,je,$e){var ut=this.length;return this.resize(ut+1),this.emplace(ut,X,ue,Ae,Pe,je,$e)},D.prototype.emplace=function(X,ue,Ae,Pe,je,$e,ut){var wt=6*X;return this.int16[wt+0]=ue,this.int16[wt+1]=Ae,this.int16[wt+2]=Pe,this.int16[wt+3]=je,this.int16[wt+4]=$e,this.int16[wt+5]=ut,X},D}(ui);Q.prototype.bytesPerElement=12,Lr("StructArrayLayout2i2i2i12",Q);var re=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(X,ue,Ae,Pe,je){var $e=this.length;return this.resize($e+1),this.emplace($e,X,ue,Ae,Pe,je)},D.prototype.emplace=function(X,ue,Ae,Pe,je,$e){var ut=4*X,wt=8*X;return this.float32[ut+0]=ue,this.float32[ut+1]=Ae,this.float32[ut+2]=Pe,this.int16[wt+6]=je,this.int16[wt+7]=$e,X},D}(ui);re.prototype.bytesPerElement=16,Lr("StructArrayLayout2f1f2i16",re);var fe=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(X,ue,Ae,Pe){var je=this.length;return this.resize(je+1),this.emplace(je,X,ue,Ae,Pe)},D.prototype.emplace=function(X,ue,Ae,Pe,je){var $e=12*X,ut=3*X;return this.uint8[$e+0]=ue,this.uint8[$e+1]=Ae,this.float32[ut+1]=Pe,this.float32[ut+2]=je,X},D}(ui);fe.prototype.bytesPerElement=12,Lr("StructArrayLayout2ub2f12",fe);var ye=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(X,ue,Ae){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,X,ue,Ae)},D.prototype.emplace=function(X,ue,Ae,Pe){var je=3*X;return this.uint16[je+0]=ue,this.uint16[je+1]=Ae,this.uint16[je+2]=Pe,X},D}(ui);ye.prototype.bytesPerElement=6,Lr("StructArrayLayout3ui6",ye);var Ce=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(X,ue,Ae,Pe,je,$e,ut,wt,Mt,Nt,Wt,Ut,ln,fn,Mn,Tn,Nn){var Vn=this.length;return this.resize(Vn+1),this.emplace(Vn,X,ue,Ae,Pe,je,$e,ut,wt,Mt,Nt,Wt,Ut,ln,fn,Mn,Tn,Nn)},D.prototype.emplace=function(X,ue,Ae,Pe,je,$e,ut,wt,Mt,Nt,Wt,Ut,ln,fn,Mn,Tn,Nn,Vn){var Zn=24*X,Kn=12*X,lr=48*X;return this.int16[Zn+0]=ue,this.int16[Zn+1]=Ae,this.uint16[Zn+2]=Pe,this.uint16[Zn+3]=je,this.uint32[Kn+2]=$e,this.uint32[Kn+3]=ut,this.uint32[Kn+4]=wt,this.uint16[Zn+10]=Mt,this.uint16[Zn+11]=Nt,this.uint16[Zn+12]=Wt,this.float32[Kn+7]=Ut,this.float32[Kn+8]=ln,this.uint8[lr+36]=fn,this.uint8[lr+37]=Mn,this.uint8[lr+38]=Tn,this.uint32[Kn+10]=Nn,this.int16[Zn+22]=Vn,X},D}(ui);Ce.prototype.bytesPerElement=48,Lr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ce);var De=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(X,ue,Ae,Pe,je,$e,ut,wt,Mt,Nt,Wt,Ut,ln,fn,Mn,Tn,Nn,Vn,Zn,Kn,lr,br,yr,Ar,Sr,Vr,zr,Ur){var Fr=this.length;return this.resize(Fr+1),this.emplace(Fr,X,ue,Ae,Pe,je,$e,ut,wt,Mt,Nt,Wt,Ut,ln,fn,Mn,Tn,Nn,Vn,Zn,Kn,lr,br,yr,Ar,Sr,Vr,zr,Ur)},D.prototype.emplace=function(X,ue,Ae,Pe,je,$e,ut,wt,Mt,Nt,Wt,Ut,ln,fn,Mn,Tn,Nn,Vn,Zn,Kn,lr,br,yr,Ar,Sr,Vr,zr,Ur,Fr){var Ir=34*X,ei=17*X;return this.int16[Ir+0]=ue,this.int16[Ir+1]=Ae,this.int16[Ir+2]=Pe,this.int16[Ir+3]=je,this.int16[Ir+4]=$e,this.int16[Ir+5]=ut,this.int16[Ir+6]=wt,this.int16[Ir+7]=Mt,this.uint16[Ir+8]=Nt,this.uint16[Ir+9]=Wt,this.uint16[Ir+10]=Ut,this.uint16[Ir+11]=ln,this.uint16[Ir+12]=fn,this.uint16[Ir+13]=Mn,this.uint16[Ir+14]=Tn,this.uint16[Ir+15]=Nn,this.uint16[Ir+16]=Vn,this.uint16[Ir+17]=Zn,this.uint16[Ir+18]=Kn,this.uint16[Ir+19]=lr,this.uint16[Ir+20]=br,this.uint16[Ir+21]=yr,this.uint16[Ir+22]=Ar,this.uint32[ei+12]=Sr,this.float32[ei+13]=Vr,this.float32[ei+14]=zr,this.float32[ei+15]=Ur,this.float32[ei+16]=Fr,X},D}(ui);De.prototype.bytesPerElement=68,Lr("StructArrayLayout8i15ui1ul4f68",De);var Ue=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(X){var ue=this.length;return this.resize(ue+1),this.emplace(ue,X)},D.prototype.emplace=function(X,ue){var Ae=1*X;return this.float32[Ae+0]=ue,X},D}(ui);Ue.prototype.bytesPerElement=4,Lr("StructArrayLayout1f4",Ue);var He=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(X,ue,Ae){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,X,ue,Ae)},D.prototype.emplace=function(X,ue,Ae,Pe){var je=3*X;return this.int16[je+0]=ue,this.int16[je+1]=Ae,this.int16[je+2]=Pe,X},D}(ui);He.prototype.bytesPerElement=6,Lr("StructArrayLayout3i6",He);var tt=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(X,ue,Ae){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,X,ue,Ae)},D.prototype.emplace=function(X,ue,Ae,Pe){var je=2*X,$e=4*X;return this.uint32[je+0]=ue,this.uint16[$e+2]=Ae,this.uint16[$e+3]=Pe,X},D}(ui);tt.prototype.bytesPerElement=8,Lr("StructArrayLayout1ul2ui8",tt);var ct=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(X,ue){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,X,ue)},D.prototype.emplace=function(X,ue,Ae){var Pe=2*X;return this.uint16[Pe+0]=ue,this.uint16[Pe+1]=Ae,X},D}(ui);ct.prototype.bytesPerElement=4,Lr("StructArrayLayout2ui4",ct);var pt=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(X){var ue=this.length;return this.resize(ue+1),this.emplace(ue,X)},D.prototype.emplace=function(X,ue){var Ae=1*X;return this.uint16[Ae+0]=ue,X},D}(ui);pt.prototype.bytesPerElement=2,Lr("StructArrayLayout1ui2",pt);var kt=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(X,ue,Ae,Pe){var je=this.length;return this.resize(je+1),this.emplace(je,X,ue,Ae,Pe)},D.prototype.emplace=function(X,ue,Ae,Pe,je){var $e=4*X;return this.float32[$e+0]=ue,this.float32[$e+1]=Ae,this.float32[$e+2]=Pe,this.float32[$e+3]=je,X},D}(ui);kt.prototype.bytesPerElement=16,Lr("StructArrayLayout4f16",kt);var Lt=function(S){function D(){S.apply(this,arguments)}S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D;var X={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return X.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},X.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},X.x1.get=function(){return this._structArray.int16[this._pos2+2]},X.y1.get=function(){return this._structArray.int16[this._pos2+3]},X.x2.get=function(){return this._structArray.int16[this._pos2+4]},X.y2.get=function(){return this._structArray.int16[this._pos2+5]},X.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},X.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},X.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},X.anchorPoint.get=function(){return new n(this.anchorPointX,this.anchorPointY)},Object.defineProperties(D.prototype,X),D}(Pa);Lt.prototype.size=20;var St=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.get=function(X){return new Lt(this,X)},D}(H);Lr("CollisionBoxArray",St);var jt=function(S){function D(){S.apply(this,arguments)}S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D;var X={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return X.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},X.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},X.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},X.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},X.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},X.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},X.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},X.segment.get=function(){return this._structArray.uint16[this._pos2+10]},X.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},X.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},X.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},X.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},X.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},X.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},X.placedOrientation.set=function(ue){this._structArray.uint8[this._pos1+37]=ue},X.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},X.hidden.set=function(ue){this._structArray.uint8[this._pos1+38]=ue},X.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},X.crossTileID.set=function(ue){this._structArray.uint32[this._pos4+10]=ue},X.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(D.prototype,X),D}(Pa);jt.prototype.size=48;var zt=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.get=function(X){return new jt(this,X)},D}(Ce);Lr("PlacedSymbolArray",zt);var Qt=function(S){function D(){S.apply(this,arguments)}S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D;var X={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return X.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},X.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},X.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},X.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},X.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},X.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},X.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},X.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},X.key.get=function(){return this._structArray.uint16[this._pos2+8]},X.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},X.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},X.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},X.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},X.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},X.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},X.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},X.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},X.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},X.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},X.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},X.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},X.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},X.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},X.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},X.crossTileID.set=function(ue){this._structArray.uint32[this._pos4+12]=ue},X.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},X.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},X.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},X.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(D.prototype,X),D}(Pa);Qt.prototype.size=68;var Zt=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.get=function(X){return new Qt(this,X)},D}(De);Lr("SymbolInstanceArray",Zt);var Vt=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.getoffsetX=function(X){return this.float32[1*X+0]},D}(Ue);Lr("GlyphOffsetArray",Vt);var vn=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.getx=function(X){return this.int16[3*X+0]},D.prototype.gety=function(X){return this.int16[3*X+1]},D.prototype.gettileUnitDistanceFromAnchor=function(X){return this.int16[3*X+2]},D}(He);Lr("SymbolLineVertexArray",vn);var bn=function(S){function D(){S.apply(this,arguments)}S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D;var X={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return X.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},X.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},X.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(D.prototype,X),D}(Pa);bn.prototype.size=8;var On=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.get=function(X){return new bn(this,X)},D}(tt);Lr("FeatureIndexArray",On);var Dn=bi([{name:"a_pos",components:2,type:"Int16"}],4).members,Yn=function(S){S===void 0&&(S=[]),this.segments=S};function ir(S,D){return 256*(S=c(Math.floor(S),0,255))+c(Math.floor(D),0,255)}Yn.prototype.prepareSegment=function(S,D,X,ue){var Ae=this.segments[this.segments.length-1];return S>Yn.MAX_VERTEX_ARRAY_LENGTH&&L("Max vertices per segment is "+Yn.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+S),(!Ae||Ae.vertexLength+S>Yn.MAX_VERTEX_ARRAY_LENGTH||Ae.sortKey!==ue)&&(Ae={vertexOffset:D.length,primitiveOffset:X.length,vertexLength:0,primitiveLength:0},ue!==void 0&&(Ae.sortKey=ue),this.segments.push(Ae)),Ae},Yn.prototype.get=function(){return this.segments},Yn.prototype.destroy=function(){for(var S=0,D=this.segments;S<D.length;S+=1){var X=D[S];for(var ue in X.vaos)X.vaos[ue].destroy()}},Yn.simpleSegment=function(S,D,X,ue){return new Yn([{vertexOffset:S,primitiveOffset:D,vertexLength:X,primitiveLength:ue,vaos:{},sortKey:0}])},Yn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Lr("SegmentVector",Yn);var gr=bi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Jn=w(function(S){S.exports=function(D,X){var ue,Ae,Pe,je,$e,ut,wt,Mt;for(ue=3&D.length,Ae=D.length-ue,Pe=X,$e=3432918353,ut=461845907,Mt=0;Mt<Ae;)wt=255&D.charCodeAt(Mt)|(255&D.charCodeAt(++Mt))<<8|(255&D.charCodeAt(++Mt))<<16|(255&D.charCodeAt(++Mt))<<24,++Mt,Pe=27492+(65535&(je=5*(65535&(Pe=(Pe^=wt=(65535&(wt=(wt=(65535&wt)*$e+(((wt>>>16)*$e&65535)<<16)&4294967295)<<15|wt>>>17))*ut+(((wt>>>16)*ut&65535)<<16)&4294967295)<<13|Pe>>>19))+((5*(Pe>>>16)&65535)<<16)&4294967295))+((58964+(je>>>16)&65535)<<16);switch(wt=0,ue){case 3:wt^=(255&D.charCodeAt(Mt+2))<<16;case 2:wt^=(255&D.charCodeAt(Mt+1))<<8;case 1:Pe^=wt=(65535&(wt=(wt=(65535&(wt^=255&D.charCodeAt(Mt)))*$e+(((wt>>>16)*$e&65535)<<16)&4294967295)<<15|wt>>>17))*ut+(((wt>>>16)*ut&65535)<<16)&4294967295}return Pe^=D.length,Pe=2246822507*(65535&(Pe^=Pe>>>16))+((2246822507*(Pe>>>16)&65535)<<16)&4294967295,Pe=3266489909*(65535&(Pe^=Pe>>>13))+((3266489909*(Pe>>>16)&65535)<<16)&4294967295,(Pe^=Pe>>>16)>>>0}}),pr=w(function(S){S.exports=function(D,X){for(var ue,Ae=D.length,Pe=X^Ae,je=0;Ae>=4;)ue=1540483477*(65535&(ue=255&D.charCodeAt(je)|(255&D.charCodeAt(++je))<<8|(255&D.charCodeAt(++je))<<16|(255&D.charCodeAt(++je))<<24))+((1540483477*(ue>>>16)&65535)<<16),Pe=1540483477*(65535&Pe)+((1540483477*(Pe>>>16)&65535)<<16)^(ue=1540483477*(65535&(ue^=ue>>>24))+((1540483477*(ue>>>16)&65535)<<16)),Ae-=4,++je;switch(Ae){case 3:Pe^=(255&D.charCodeAt(je+2))<<16;case 2:Pe^=(255&D.charCodeAt(je+1))<<8;case 1:Pe=1540483477*(65535&(Pe^=255&D.charCodeAt(je)))+((1540483477*(Pe>>>16)&65535)<<16)}return Pe=1540483477*(65535&(Pe^=Pe>>>13))+((1540483477*(Pe>>>16)&65535)<<16),(Pe^=Pe>>>15)>>>0}}),wr=Jn,Or=Jn,nr=pr;wr.murmur3=Or,wr.murmur2=nr;var hr=function(){this.ids=[],this.positions=[],this.indexed=!1};hr.prototype.add=function(S,D,X,ue){this.ids.push(vr(S)),this.positions.push(D,X,ue)},hr.prototype.getPositions=function(S){for(var D=vr(S),X=0,ue=this.ids.length-1;X<ue;){var Ae=X+ue>>1;this.ids[Ae]>=D?ue=Ae:X=Ae+1}for(var Pe=[];this.ids[X]===D;){var je=this.positions[3*X],$e=this.positions[3*X+1],ut=this.positions[3*X+2];Pe.push({index:je,start:$e,end:ut}),X++}return Pe},hr.serialize=function(S,D){var X=new Float64Array(S.ids),ue=new Uint32Array(S.positions);return Cr(X,ue,0,X.length-1),D&&D.push(X.buffer,ue.buffer),{ids:X,positions:ue}},hr.deserialize=function(S){var D=new hr;return D.ids=S.ids,D.positions=S.positions,D.indexed=!0,D};var Mr=Math.pow(2,53)-1;function vr(S){var D=+S;return!isNaN(D)&&D<=Mr?D:wr(String(S))}function Cr(S,D,X,ue){for(;X<ue;){for(var Ae=S[X+ue>>1],Pe=X-1,je=ue+1;;){do Pe++;while(S[Pe]<Ae);do je--;while(S[je]>Ae);if(Pe>=je)break;Dr(S,Pe,je),Dr(D,3*Pe,3*je),Dr(D,3*Pe+1,3*je+1),Dr(D,3*Pe+2,3*je+2)}je-X<ue-je?(Cr(S,D,X,je),X=je+1):(Cr(S,D,je+1,ue),ue=je)}}function Dr(S,D,X){var ue=S[D];S[D]=S[X],S[X]=ue}Lr("FeaturePositionMap",hr);var qr=function(S,D){this.gl=S.gl,this.location=D},Hr=function(S){function D(X,ue){S.call(this,X,ue),this.current=0}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.set=function(X){this.current!==X&&(this.current=X,this.gl.uniform1i(this.location,X))},D}(qr),Yr=function(S){function D(X,ue){S.call(this,X,ue),this.current=0}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.set=function(X){this.current!==X&&(this.current=X,this.gl.uniform1f(this.location,X))},D}(qr),Jr=function(S){function D(X,ue){S.call(this,X,ue),this.current=[0,0]}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.set=function(X){X[0]===this.current[0]&&X[1]===this.current[1]||(this.current=X,this.gl.uniform2f(this.location,X[0],X[1]))},D}(qr),vi=function(S){function D(X,ue){S.call(this,X,ue),this.current=[0,0,0]}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.set=function(X){X[0]===this.current[0]&&X[1]===this.current[1]&&X[2]===this.current[2]||(this.current=X,this.gl.uniform3f(this.location,X[0],X[1],X[2]))},D}(qr),Oi=function(S){function D(X,ue){S.call(this,X,ue),this.current=[0,0,0,0]}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.set=function(X){X[0]===this.current[0]&&X[1]===this.current[1]&&X[2]===this.current[2]&&X[3]===this.current[3]||(this.current=X,this.gl.uniform4f(this.location,X[0],X[1],X[2],X[3]))},D}(qr),ua=function(S){function D(X,ue){S.call(this,X,ue),this.current=Fn.transparent}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.set=function(X){X.r===this.current.r&&X.g===this.current.g&&X.b===this.current.b&&X.a===this.current.a||(this.current=X,this.gl.uniform4f(this.location,X.r,X.g,X.b,X.a))},D}(qr),Wi=new Float32Array(16),na=function(S){function D(X,ue){S.call(this,X,ue),this.current=Wi}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.set=function(X){if(X[12]!==this.current[12]||X[0]!==this.current[0])return this.current=X,void this.gl.uniformMatrix4fv(this.location,!1,X);for(var ue=1;ue<16;ue++)if(X[ue]!==this.current[ue]){this.current=X,this.gl.uniformMatrix4fv(this.location,!1,X);break}},D}(qr);function _i(S){return[ir(255*S.r,255*S.g),ir(255*S.b,255*S.a)]}var $r=function(S,D,X){this.value=S,this.uniformNames=D.map(function(ue){return"u_"+ue}),this.type=X};$r.prototype.setUniform=function(S,D,X){S.set(X.constantOr(this.value))},$r.prototype.getBinding=function(S,D,X){return this.type==="color"?new ua(S,D):new Yr(S,D)};var Ai=function(S,D){this.uniformNames=D.map(function(X){return"u_"+X}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ai.prototype.setConstantPatternPositions=function(S,D){this.pixelRatioFrom=D.pixelRatio,this.pixelRatioTo=S.pixelRatio,this.patternFrom=D.tlbr,this.patternTo=S.tlbr},Ai.prototype.setUniform=function(S,D,X,ue){var Ae=ue==="u_pattern_to"?this.patternTo:ue==="u_pattern_from"?this.patternFrom:ue==="u_pixel_ratio_to"?this.pixelRatioTo:ue==="u_pixel_ratio_from"?this.pixelRatioFrom:null;Ae&&S.set(Ae)},Ai.prototype.getBinding=function(S,D,X){return X.substr(0,9)==="u_pattern"?new Oi(S,D):new Yr(S,D)};var ci=function(S,D,X,ue){this.expression=S,this.type=X,this.maxValue=0,this.paintVertexAttributes=D.map(function(Ae){return{name:"a_"+Ae,type:"Float32",components:X==="color"?2:1,offset:0}}),this.paintVertexArray=new ue};ci.prototype.populatePaintArray=function(S,D,X,ue,Ae){var Pe=this.paintVertexArray.length,je=this.expression.evaluate(new Xr(0),D,{},ue,[],Ae);this.paintVertexArray.resize(S),this._setPaintValue(Pe,S,je)},ci.prototype.updatePaintArray=function(S,D,X,ue){var Ae=this.expression.evaluate({zoom:0},X,ue);this._setPaintValue(S,D,Ae)},ci.prototype._setPaintValue=function(S,D,X){if(this.type==="color")for(var ue=_i(X),Ae=S;Ae<D;Ae++)this.paintVertexArray.emplace(Ae,ue[0],ue[1]);else{for(var Pe=S;Pe<D;Pe++)this.paintVertexArray.emplace(Pe,X);this.maxValue=Math.max(this.maxValue,Math.abs(X))}},ci.prototype.upload=function(S){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=S.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ci.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var ti=function(S,D,X,ue,Ae,Pe){this.expression=S,this.uniformNames=D.map(function(je){return"u_"+je+"_t"}),this.type=X,this.useIntegerZoom=ue,this.zoom=Ae,this.maxValue=0,this.paintVertexAttributes=D.map(function(je){return{name:"a_"+je,type:"Float32",components:X==="color"?4:2,offset:0}}),this.paintVertexArray=new Pe};ti.prototype.populatePaintArray=function(S,D,X,ue,Ae){var Pe=this.expression.evaluate(new Xr(this.zoom),D,{},ue,[],Ae),je=this.expression.evaluate(new Xr(this.zoom+1),D,{},ue,[],Ae),$e=this.paintVertexArray.length;this.paintVertexArray.resize(S),this._setPaintValue($e,S,Pe,je)},ti.prototype.updatePaintArray=function(S,D,X,ue){var Ae=this.expression.evaluate({zoom:this.zoom},X,ue),Pe=this.expression.evaluate({zoom:this.zoom+1},X,ue);this._setPaintValue(S,D,Ae,Pe)},ti.prototype._setPaintValue=function(S,D,X,ue){if(this.type==="color")for(var Ae=_i(X),Pe=_i(ue),je=S;je<D;je++)this.paintVertexArray.emplace(je,Ae[0],Ae[1],Pe[0],Pe[1]);else{for(var $e=S;$e<D;$e++)this.paintVertexArray.emplace($e,X,ue);this.maxValue=Math.max(this.maxValue,Math.abs(X),Math.abs(ue))}},ti.prototype.upload=function(S){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=S.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ti.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ti.prototype.setUniform=function(S,D){var X=this.useIntegerZoom?Math.floor(D.zoom):D.zoom,ue=c(this.expression.interpolationFactor(X,this.zoom,this.zoom+1),0,1);S.set(ue)},ti.prototype.getBinding=function(S,D,X){return new Yr(S,D)};var Mi=function(S,D,X,ue,Ae,Pe){this.expression=S,this.type=D,this.useIntegerZoom=X,this.zoom=ue,this.layerId=Pe,this.zoomInPaintVertexArray=new Ae,this.zoomOutPaintVertexArray=new Ae};Mi.prototype.populatePaintArray=function(S,D,X){var ue=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(S),this.zoomOutPaintVertexArray.resize(S),this._setPaintValues(ue,S,D.patterns&&D.patterns[this.layerId],X)},Mi.prototype.updatePaintArray=function(S,D,X,ue,Ae){this._setPaintValues(S,D,X.patterns&&X.patterns[this.layerId],Ae)},Mi.prototype._setPaintValues=function(S,D,X,ue){if(ue&&X){var Ae=X.min,Pe=X.mid,je=X.max,$e=ue[Ae],ut=ue[Pe],wt=ue[je];if($e&&ut&&wt)for(var Mt=S;Mt<D;Mt++)this.zoomInPaintVertexArray.emplace(Mt,ut.tl[0],ut.tl[1],ut.br[0],ut.br[1],$e.tl[0],$e.tl[1],$e.br[0],$e.br[1],ut.pixelRatio,$e.pixelRatio),this.zoomOutPaintVertexArray.emplace(Mt,ut.tl[0],ut.tl[1],ut.br[0],ut.br[1],wt.tl[0],wt.tl[1],wt.br[0],wt.br[1],ut.pixelRatio,wt.pixelRatio)}},Mi.prototype.upload=function(S){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=S.createVertexBuffer(this.zoomInPaintVertexArray,gr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=S.createVertexBuffer(this.zoomOutPaintVertexArray,gr.members,this.expression.isStateDependent))},Mi.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ii=function(S,D,X){this.binders={},this._buffers=[];var ue=[];for(var Ae in S.paint._values)if(X(Ae)){var Pe=S.paint.get(Ae);if(Pe instanceof gi&&xo(Pe.property.specification)){var je=Ms(Ae,S.type),$e=Pe.value,ut=Pe.property.specification.type,wt=Pe.property.useIntegerZoom,Mt=Pe.property.specification["property-type"],Nt=Mt==="cross-faded"||Mt==="cross-faded-data-driven";if($e.kind==="constant")this.binders[Ae]=Nt?new Ai($e.value,je):new $r($e.value,je,ut),ue.push("/u_"+Ae);else if($e.kind==="source"||Nt){var Wt=Ss(Ae,ut,"source");this.binders[Ae]=Nt?new Mi($e,ut,wt,D,Wt,S.id):new ci($e,je,ut,Wt),ue.push("/a_"+Ae)}else{var Ut=Ss(Ae,ut,"composite");this.binders[Ae]=new ti($e,je,ut,wt,D,Ut),ue.push("/z_"+Ae)}}}this.cacheKey=ue.sort().join("")};Ii.prototype.getMaxValue=function(S){var D=this.binders[S];return D instanceof ci||D instanceof ti?D.maxValue:0},Ii.prototype.populatePaintArrays=function(S,D,X,ue,Ae){for(var Pe in this.binders){var je=this.binders[Pe];(je instanceof ci||je instanceof ti||je instanceof Mi)&&je.populatePaintArray(S,D,X,ue,Ae)}},Ii.prototype.setConstantPatternPositions=function(S,D){for(var X in this.binders){var ue=this.binders[X];ue instanceof Ai&&ue.setConstantPatternPositions(S,D)}},Ii.prototype.updatePaintArrays=function(S,D,X,ue,Ae){var Pe=!1;for(var je in S)for(var $e=0,ut=D.getPositions(je);$e<ut.length;$e+=1){var wt=ut[$e],Mt=X.feature(wt.index);for(var Nt in this.binders){var Wt=this.binders[Nt];if((Wt instanceof ci||Wt instanceof ti||Wt instanceof Mi)&&Wt.expression.isStateDependent===!0){var Ut=ue.paint.get(Nt);Wt.expression=Ut.value,Wt.updatePaintArray(wt.start,wt.end,Mt,S[je],Ae),Pe=!0}}}return Pe},Ii.prototype.defines=function(){var S=[];for(var D in this.binders){var X=this.binders[D];(X instanceof $r||X instanceof Ai)&&S.push.apply(S,X.uniformNames.map(function(ue){return"#define HAS_UNIFORM_"+ue}))}return S},Ii.prototype.getBinderAttributes=function(){var S=[];for(var D in this.binders){var X=this.binders[D];if(X instanceof ci||X instanceof ti)for(var ue=0;ue<X.paintVertexAttributes.length;ue++)S.push(X.paintVertexAttributes[ue].name);else if(X instanceof Mi)for(var Ae=0;Ae<gr.members.length;Ae++)S.push(gr.members[Ae].name)}return S},Ii.prototype.getBinderUniforms=function(){var S=[];for(var D in this.binders){var X=this.binders[D];if(X instanceof $r||X instanceof Ai||X instanceof ti)for(var ue=0,Ae=X.uniformNames;ue<Ae.length;ue+=1){var Pe=Ae[ue];S.push(Pe)}}return S},Ii.prototype.getPaintVertexBuffers=function(){return this._buffers},Ii.prototype.getUniforms=function(S,D){var X=[];for(var ue in this.binders){var Ae=this.binders[ue];if(Ae instanceof $r||Ae instanceof Ai||Ae instanceof ti)for(var Pe=0,je=Ae.uniformNames;Pe<je.length;Pe+=1){var $e=je[Pe];if(D[$e]){var ut=Ae.getBinding(S,D[$e],$e);X.push({name:$e,property:ue,binding:ut})}}}return X},Ii.prototype.setUniforms=function(S,D,X,ue){for(var Ae=0,Pe=D;Ae<Pe.length;Ae+=1){var je=Pe[Ae],$e=je.name,ut=je.property,wt=je.binding;this.binders[ut].setUniform(wt,ue,X.get(ut),$e)}},Ii.prototype.updatePaintBuffers=function(S){for(var D in this._buffers=[],this.binders){var X=this.binders[D];if(S&&X instanceof Mi){var ue=S.fromScale===2?X.zoomInPaintVertexBuffer:X.zoomOutPaintVertexBuffer;ue&&this._buffers.push(ue)}else(X instanceof ci||X instanceof ti)&&X.paintVertexBuffer&&this._buffers.push(X.paintVertexBuffer)}},Ii.prototype.upload=function(S){for(var D in this.binders){var X=this.binders[D];(X instanceof ci||X instanceof ti||X instanceof Mi)&&X.upload(S)}this.updatePaintBuffers()},Ii.prototype.destroy=function(){for(var S in this.binders){var D=this.binders[S];(D instanceof ci||D instanceof ti||D instanceof Mi)&&D.destroy()}};var Ui=function(S,D,X){X===void 0&&(X=function(){return!0}),this.programConfigurations={};for(var ue=0,Ae=S;ue<Ae.length;ue+=1){var Pe=Ae[ue];this.programConfigurations[Pe.id]=new Ii(Pe,D,X)}this.needsUpload=!1,this._featureMap=new hr,this._bufferOffset=0};function Ms(S,D){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[S]||[S.replace(D+"-","").replace(/-/g,"_")]}function Ss(S,D,X){var ue={color:{source:lt,composite:kt},number:{source:Ue,composite:lt}},Ae=function(Pe){return{"line-pattern":{source:N,composite:N},"fill-pattern":{source:N,composite:N},"fill-extrusion-pattern":{source:N,composite:N}}[Pe]}(S);return Ae&&Ae[X]||ue[D][X]}Ui.prototype.populatePaintArrays=function(S,D,X,ue,Ae,Pe){for(var je in this.programConfigurations)this.programConfigurations[je].populatePaintArrays(S,D,ue,Ae,Pe);D.id!==void 0&&this._featureMap.add(D.id,X,this._bufferOffset,S),this._bufferOffset=S,this.needsUpload=!0},Ui.prototype.updatePaintArrays=function(S,D,X,ue){for(var Ae=0,Pe=X;Ae<Pe.length;Ae+=1){var je=Pe[Ae];this.needsUpload=this.programConfigurations[je.id].updatePaintArrays(S,this._featureMap,D,je,ue)||this.needsUpload}},Ui.prototype.get=function(S){return this.programConfigurations[S]},Ui.prototype.upload=function(S){if(this.needsUpload){for(var D in this.programConfigurations)this.programConfigurations[D].upload(S);this.needsUpload=!1}},Ui.prototype.destroy=function(){for(var S in this.programConfigurations)this.programConfigurations[S].destroy()},Lr("ConstantBinder",$r),Lr("CrossFadedConstantBinder",Ai),Lr("SourceExpressionBinder",ci),Lr("CrossFadedCompositeBinder",Mi),Lr("CompositeExpressionBinder",ti),Lr("ProgramConfiguration",Ii,{omit:["_buffers"]}),Lr("ProgramConfigurationSet",Ui);var ni=8192,sl=Math.pow(2,14)-1,qs=-sl-1;function Mo(S){for(var D=ni/S.extent,X=S.loadGeometry(),ue=0;ue<X.length;ue++)for(var Ae=X[ue],Pe=0;Pe<Ae.length;Pe++){var je=Ae[Pe],$e=Math.round(je.x*D),ut=Math.round(je.y*D);je.x=c($e,qs,sl),je.y=c(ut,qs,sl),($e<je.x||$e>je.x+1||ut<je.y||ut>je.y+1)&&L("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return X}function Si(S,D){return{type:S.type,id:S.id,properties:S.properties,geometry:D?Mo(S):[]}}function Oa(S,D,X,ue,Ae){S.emplaceBack(2*D+(ue+1)/2,2*X+(Ae+1)/2)}var $i=function(S){this.zoom=S.zoom,this.overscaling=S.overscaling,this.layers=S.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=S.index,this.hasPattern=!1,this.layoutVertexArray=new Go,this.indexArray=new ye,this.segments=new Yn,this.programConfigurations=new Ui(S.layers,S.zoom),this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};function Zl(S,D){for(var X=0;X<S.length;X++)if(ll(D,S[X]))return!0;for(var ue=0;ue<D.length;ue++)if(ll(S,D[ue]))return!0;return!!Cl(S,D)}function Tf(S,D,X){return!!ll(S,D)||!!Pl(D,S,X)}function xc(S,D){if(S.length===1)return _c(D,S[0]);for(var X=0;X<D.length;X++)for(var ue=D[X],Ae=0;Ae<ue.length;Ae++)if(ll(S,ue[Ae]))return!0;for(var Pe=0;Pe<S.length;Pe++)if(_c(D,S[Pe]))return!0;for(var je=0;je<D.length;je++)if(Cl(S,D[je]))return!0;return!1}function kf(S,D,X){if(S.length>1){if(Cl(S,D))return!0;for(var ue=0;ue<D.length;ue++)if(Pl(D[ue],S,X))return!0}for(var Ae=0;Ae<S.length;Ae++)if(Pl(S[Ae],D,X))return!0;return!1}function Cl(S,D){if(S.length===0||D.length===0)return!1;for(var X=0;X<S.length-1;X++)for(var ue=S[X],Ae=S[X+1],Pe=0;Pe<D.length-1;Pe++)if(Af(ue,Ae,D[Pe],D[Pe+1]))return!0;return!1}function Af(S,D,X,ue){return P(S,X,ue)!==P(D,X,ue)&&P(S,D,X)!==P(S,D,ue)}function Pl(S,D,X){var ue=X*X;if(D.length===1)return S.distSqr(D[0])<ue;for(var Ae=1;Ae<D.length;Ae++)if(bc(S,D[Ae-1],D[Ae])<ue)return!0;return!1}function bc(S,D,X){var ue=D.distSqr(X);if(ue===0)return S.distSqr(D);var Ae=((S.x-D.x)*(X.x-D.x)+(S.y-D.y)*(X.y-D.y))/ue;return Ae<0?S.distSqr(D):Ae>1?S.distSqr(X):S.distSqr(X.sub(D)._mult(Ae)._add(D))}function _c(S,D){for(var X,ue,Ae,Pe=!1,je=0;je<S.length;je++)for(var $e=0,ut=(X=S[je]).length-1;$e<X.length;ut=$e++)ue=X[$e],Ae=X[ut],ue.y>D.y!=Ae.y>D.y&&D.x<(Ae.x-ue.x)*(D.y-ue.y)/(Ae.y-ue.y)+ue.x&&(Pe=!Pe);return Pe}function ll(S,D){for(var X=!1,ue=0,Ae=S.length-1;ue<S.length;Ae=ue++){var Pe=S[ue],je=S[Ae];Pe.y>D.y!=je.y>D.y&&D.x<(je.x-Pe.x)*(D.y-Pe.y)/(je.y-Pe.y)+Pe.x&&(X=!X)}return X}function Zd(S,D,X){var ue=X[0],Ae=X[2];if(S.x<ue.x&&D.x<ue.x||S.x>Ae.x&&D.x>Ae.x||S.y<ue.y&&D.y<ue.y||S.y>Ae.y&&D.y>Ae.y)return!1;var Pe=P(S,D,X[0]);return Pe!==P(S,D,X[1])||Pe!==P(S,D,X[2])||Pe!==P(S,D,X[3])}function Iu(S,D,X){var ue=D.paint.get(S).value;return ue.kind==="constant"?ue.value:X.programConfigurations.get(D.id).getMaxValue(S)}function wc(S){return Math.sqrt(S[0]*S[0]+S[1]*S[1])}function Tc(S,D,X,ue,Ae){if(!D[0]&&!D[1])return S;var Pe=n.convert(D)._mult(Ae);X==="viewport"&&Pe._rotate(-ue);for(var je=[],$e=0;$e<S.length;$e++){var ut=S[$e];je.push(ut.sub(Pe))}return je}$i.prototype.populate=function(S,D,X){var ue=this.layers[0],Ae=[],Pe=null;ue.type==="circle"&&(Pe=ue.layout.get("circle-sort-key"));for(var je=0,$e=S;je<$e.length;je+=1){var ut=$e[je],wt=ut.feature,Mt=ut.id,Nt=ut.index,Wt=ut.sourceLayerIndex,Ut=this.layers[0]._featureFilter.needGeometry,ln=Si(wt,Ut);if(this.layers[0]._featureFilter.filter(new Xr(this.zoom),ln,X)){var fn=Pe?Pe.evaluate(ln,{},X):void 0,Mn={id:Mt,properties:wt.properties,type:wt.type,sourceLayerIndex:Wt,index:Nt,geometry:Ut?ln.geometry:Mo(wt),patterns:{},sortKey:fn};Ae.push(Mn)}}Pe&&Ae.sort(function(Ar,Sr){return Ar.sortKey-Sr.sortKey});for(var Tn=0,Nn=Ae;Tn<Nn.length;Tn+=1){var Vn=Nn[Tn],Zn=Vn,Kn=Zn.geometry,lr=Zn.index,br=Zn.sourceLayerIndex,yr=S[lr].feature;this.addFeature(Vn,Kn,lr,X),D.featureIndex.insert(yr,Kn,lr,br,this.index)}},$i.prototype.update=function(S,D,X){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(S,D,this.stateDependentLayers,X)},$i.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},$i.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},$i.prototype.upload=function(S){this.uploaded||(this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,Dn),this.indexBuffer=S.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(S),this.uploaded=!0},$i.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},$i.prototype.addFeature=function(S,D,X,ue){for(var Ae=0,Pe=D;Ae<Pe.length;Ae+=1)for(var je=0,$e=Pe[Ae];je<$e.length;je+=1){var ut=$e[je],wt=ut.x,Mt=ut.y;if(!(wt<0||wt>=ni||Mt<0||Mt>=ni)){var Nt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,S.sortKey),Wt=Nt.vertexLength;Oa(this.layoutVertexArray,wt,Mt,-1,-1),Oa(this.layoutVertexArray,wt,Mt,1,-1),Oa(this.layoutVertexArray,wt,Mt,1,1),Oa(this.layoutVertexArray,wt,Mt,-1,1),this.indexArray.emplaceBack(Wt,Wt+1,Wt+2),this.indexArray.emplaceBack(Wt,Wt+3,Wt+2),Nt.vertexLength+=4,Nt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,S,X,{},ue)},Lr("CircleBucket",$i,{omit:["layers"]});var Xd=new Ri({"circle-sort-key":new Br(Ze.layout_circle["circle-sort-key"])}),Jd={paint:new Ri({"circle-radius":new Br(Ze.paint_circle["circle-radius"]),"circle-color":new Br(Ze.paint_circle["circle-color"]),"circle-blur":new Br(Ze.paint_circle["circle-blur"]),"circle-opacity":new Br(Ze.paint_circle["circle-opacity"]),"circle-translate":new Pr(Ze.paint_circle["circle-translate"]),"circle-translate-anchor":new Pr(Ze.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Pr(Ze.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Pr(Ze.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Br(Ze.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Br(Ze.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Br(Ze.paint_circle["circle-stroke-opacity"])}),layout:Xd},Wo=typeof Float32Array<"u"?Float32Array:Array;function Mf(S){return S[0]=1,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=1,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=1,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S}function zh(S,D,X){var ue=D[0],Ae=D[1],Pe=D[2],je=D[3],$e=D[4],ut=D[5],wt=D[6],Mt=D[7],Nt=D[8],Wt=D[9],Ut=D[10],ln=D[11],fn=D[12],Mn=D[13],Tn=D[14],Nn=D[15],Vn=X[0],Zn=X[1],Kn=X[2],lr=X[3];return S[0]=Vn*ue+Zn*$e+Kn*Nt+lr*fn,S[1]=Vn*Ae+Zn*ut+Kn*Wt+lr*Mn,S[2]=Vn*Pe+Zn*wt+Kn*Ut+lr*Tn,S[3]=Vn*je+Zn*Mt+Kn*ln+lr*Nn,Vn=X[4],Zn=X[5],Kn=X[6],lr=X[7],S[4]=Vn*ue+Zn*$e+Kn*Nt+lr*fn,S[5]=Vn*Ae+Zn*ut+Kn*Wt+lr*Mn,S[6]=Vn*Pe+Zn*wt+Kn*Ut+lr*Tn,S[7]=Vn*je+Zn*Mt+Kn*ln+lr*Nn,Vn=X[8],Zn=X[9],Kn=X[10],lr=X[11],S[8]=Vn*ue+Zn*$e+Kn*Nt+lr*fn,S[9]=Vn*Ae+Zn*ut+Kn*Wt+lr*Mn,S[10]=Vn*Pe+Zn*wt+Kn*Ut+lr*Tn,S[11]=Vn*je+Zn*Mt+Kn*ln+lr*Nn,Vn=X[12],Zn=X[13],Kn=X[14],lr=X[15],S[12]=Vn*ue+Zn*$e+Kn*Nt+lr*fn,S[13]=Vn*Ae+Zn*ut+Kn*Wt+lr*Mn,S[14]=Vn*Pe+Zn*wt+Kn*Ut+lr*Tn,S[15]=Vn*je+Zn*Mt+Kn*ln+lr*Nn,S}Math.hypot||(Math.hypot=function(){for(var S=arguments,D=0,X=arguments.length;X--;)D+=S[X]*S[X];return Math.sqrt(D)});var Kd=zh,kc,$d=function(S,D,X){return S[0]=D[0]-X[0],S[1]=D[1]-X[1],S[2]=D[2]-X[2],S};function Ac(S,D,X){var ue=D[0],Ae=D[1],Pe=D[2],je=D[3];return S[0]=X[0]*ue+X[4]*Ae+X[8]*Pe+X[12]*je,S[1]=X[1]*ue+X[5]*Ae+X[9]*Pe+X[13]*je,S[2]=X[2]*ue+X[6]*Ae+X[10]*Pe+X[14]*je,S[3]=X[3]*ue+X[7]*Ae+X[11]*Pe+X[15]*je,S}kc=new Wo(3),Wo!=Float32Array&&(kc[0]=0,kc[1]=0,kc[2]=0),function(){var S=new Wo(4);Wo!=Float32Array&&(S[0]=0,S[1]=0,S[2]=0,S[3]=0)}();var Qd=function(S){var D=S[0],X=S[1];return D*D+X*X},e0=(function(){var S=new Wo(2);Wo!=Float32Array&&(S[0]=0,S[1]=0)}(),function(S){function D(X){S.call(this,X,Jd)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.createBucket=function(X){return new $i(X)},D.prototype.queryRadius=function(X){var ue=X;return Iu("circle-radius",this,ue)+Iu("circle-stroke-width",this,ue)+wc(this.paint.get("circle-translate"))},D.prototype.queryIntersectsFeature=function(X,ue,Ae,Pe,je,$e,ut,wt){for(var Mt=Tc(X,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),$e.angle,ut),Nt=this.paint.get("circle-radius").evaluate(ue,Ae)+this.paint.get("circle-stroke-width").evaluate(ue,Ae),Wt=this.paint.get("circle-pitch-alignment")==="map",Ut=Wt?Mt:function(br,yr){return br.map(function(Ar){return Dh(Ar,yr)})}(Mt,wt),ln=Wt?Nt*ut:Nt,fn=0,Mn=Pe;fn<Mn.length;fn+=1)for(var Tn=0,Nn=Mn[fn];Tn<Nn.length;Tn+=1){var Vn=Nn[Tn],Zn=Wt?Vn:Dh(Vn,wt),Kn=ln,lr=Ac([],[Vn.x,Vn.y,0,1],wt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Kn*=lr[3]/$e.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Kn*=$e.cameraToCenterDistance/lr[3]),Tf(Ut,Zn,Kn))return!0}return!1},D}(oi));function Dh(S,D){var X=Ac([],[S.x,S.y,0,1],D);return new n(X[0]/X[3],X[1]/X[3])}var Rh=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D}($i);function Sf(S,D,X,ue){var Ae=D.width,Pe=D.height;if(ue){if(ue instanceof Uint8ClampedArray)ue=new Uint8Array(ue.buffer);else if(ue.length!==Ae*Pe*X)throw new RangeError("mismatched image size")}else ue=new Uint8Array(Ae*Pe*X);return S.width=Ae,S.height=Pe,S.data=ue,S}function Fh(S,D,X){var ue=D.width,Ae=D.height;if(ue!==S.width||Ae!==S.height){var Pe=Sf({},{width:ue,height:Ae},X);Ef(S,Pe,{x:0,y:0},{x:0,y:0},{width:Math.min(S.width,ue),height:Math.min(S.height,Ae)},X),S.width=ue,S.height=Ae,S.data=Pe.data}}function Ef(S,D,X,ue,Ae,Pe){if(Ae.width===0||Ae.height===0)return D;if(Ae.width>S.width||Ae.height>S.height||X.x>S.width-Ae.width||X.y>S.height-Ae.height)throw new RangeError("out of range source coordinates for image copy");if(Ae.width>D.width||Ae.height>D.height||ue.x>D.width-Ae.width||ue.y>D.height-Ae.height)throw new RangeError("out of range destination coordinates for image copy");for(var je=S.data,$e=D.data,ut=0;ut<Ae.height;ut++)for(var wt=((X.y+ut)*S.width+X.x)*Pe,Mt=((ue.y+ut)*D.width+ue.x)*Pe,Nt=0;Nt<Ae.width*Pe;Nt++)$e[Mt+Nt]=je[wt+Nt];return D}Lr("HeatmapBucket",Rh,{omit:["layers"]});var Xl=function(S,D){Sf(this,S,1,D)};Xl.prototype.resize=function(S){Fh(this,S,1)},Xl.prototype.clone=function(){return new Xl({width:this.width,height:this.height},new Uint8Array(this.data))},Xl.copy=function(S,D,X,ue,Ae){Ef(S,D,X,ue,Ae,1)};var po=function(S,D){Sf(this,S,4,D)};po.prototype.resize=function(S){Fh(this,S,4)},po.prototype.replace=function(S,D){D?this.data.set(S):S instanceof Uint8ClampedArray?this.data=new Uint8Array(S.buffer):this.data=S},po.prototype.clone=function(){return new po({width:this.width,height:this.height},new Uint8Array(this.data))},po.copy=function(S,D,X,ue,Ae){Ef(S,D,X,ue,Ae,4)},Lr("AlphaImage",Xl),Lr("RGBAImage",po);var t0={paint:new Ri({"heatmap-radius":new Br(Ze.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Br(Ze.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Pr(Ze.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ao(Ze.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Pr(Ze.paint_heatmap["heatmap-opacity"])})};function Bh(S){var D={},X=S.resolution||256,ue=S.clips?S.clips.length:1,Ae=S.image||new po({width:X,height:ue}),Pe=function(ln,fn,Mn){D[S.evaluationKey]=Mn;var Tn=S.expression.evaluate(D);Ae.data[ln+fn+0]=Math.floor(255*Tn.r/Tn.a),Ae.data[ln+fn+1]=Math.floor(255*Tn.g/Tn.a),Ae.data[ln+fn+2]=Math.floor(255*Tn.b/Tn.a),Ae.data[ln+fn+3]=Math.floor(255*Tn.a)};if(S.clips)for(var je=0,$e=0;je<ue;++je,$e+=4*X)for(var ut=0,wt=0;ut<X;ut++,wt+=4){var Mt=ut/(X-1),Nt=S.clips[je];Pe($e,wt,Nt.start*(1-Mt)+Nt.end*Mt)}else for(var Wt=0,Ut=0;Wt<X;Wt++,Ut+=4)Pe(0,Ut,Wt/(X-1));return Ae}var n0=function(S){function D(X){S.call(this,X,t0),this._updateColorRamp()}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.createBucket=function(X){return new Rh(X)},D.prototype._handleSpecialPaintPropertyUpdate=function(X){X==="heatmap-color"&&this._updateColorRamp()},D.prototype._updateColorRamp=function(){var X=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Bh({expression:X,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},D.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},D.prototype.queryRadius=function(){return 0},D.prototype.queryIntersectsFeature=function(){return!1},D.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},D}(oi),r0={paint:new Ri({"hillshade-illumination-direction":new Pr(Ze.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Pr(Ze.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Pr(Ze.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Pr(Ze.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Pr(Ze.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Pr(Ze.paint_hillshade["hillshade-accent-color"])})},i0=function(S){function D(X){S.call(this,X,r0)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},D}(oi),a0=bi([{name:"a_pos",components:2,type:"Int16"}],4).members,Lf=Mc,o0=Mc;function Mc(S,D,X){X=X||2;var ue,Ae,Pe,je,$e,ut,wt,Mt=D&&D.length,Nt=Mt?D[0]*X:S.length,Wt=Nh(S,0,Nt,X,!0),Ut=[];if(!Wt||Wt.next===Wt.prev)return Ut;if(Mt&&(Wt=function(fn,Mn,Tn,Nn){var Vn,Zn,Kn,lr=[];for(Vn=0,Zn=Mn.length;Vn<Zn;Vn++)(Kn=Nh(fn,Mn[Vn]*Nn,Vn<Zn-1?Mn[Vn+1]*Nn:fn.length,Nn,!1))===Kn.next&&(Kn.steiner=!0),lr.push(d0(Kn));for(lr.sort(f0),Vn=0;Vn<lr.length;Vn++)h0(lr[Vn],Tn),Tn=Ol(Tn,Tn.next);return Tn}(S,D,Wt,X)),S.length>80*X){ue=Pe=S[0],Ae=je=S[1];for(var ln=X;ln<Nt;ln+=X)($e=S[ln])<ue&&(ue=$e),(ut=S[ln+1])<Ae&&(Ae=ut),$e>Pe&&(Pe=$e),ut>je&&(je=ut);wt=(wt=Math.max(Pe-ue,je-Ae))!==0?1/wt:0}return zu(Wt,Ut,X,ue,Ae,wt),Ut}function Nh(S,D,X,ue,Ae){var Pe,je;if(Ae===Of(S,D,X,ue)>0)for(Pe=D;Pe<X;Pe+=ue)je=Vh(Pe,S[Pe],S[Pe+1],je);else for(Pe=X-ue;Pe>=D;Pe-=ue)je=Vh(Pe,S[Pe],S[Pe+1],je);return je&&Sc(je,je.next)&&(Ru(je),je=je.next),je}function Ol(S,D){if(!S)return S;D||(D=S);var X,ue=S;do if(X=!1,ue.steiner||!Sc(ue,ue.next)&&ra(ue.prev,ue,ue.next)!==0)ue=ue.next;else{if(Ru(ue),(ue=D=ue.prev)===ue.next)break;X=!0}while(X||ue!==D);return D}function zu(S,D,X,ue,Ae,Pe,je){if(S){!je&&Pe&&function(Mt,Nt,Wt,Ut){var ln=Mt;do ln.z===null&&(ln.z=Cf(ln.x,ln.y,Nt,Wt,Ut)),ln.prevZ=ln.prev,ln.nextZ=ln.next,ln=ln.next;while(ln!==Mt);ln.prevZ.nextZ=null,ln.prevZ=null,function(fn){var Mn,Tn,Nn,Vn,Zn,Kn,lr,br,yr=1;do{for(Tn=fn,fn=null,Zn=null,Kn=0;Tn;){for(Kn++,Nn=Tn,lr=0,Mn=0;Mn<yr&&(lr++,Nn=Nn.nextZ);Mn++);for(br=yr;lr>0||br>0&&Nn;)lr!==0&&(br===0||!Nn||Tn.z<=Nn.z)?(Vn=Tn,Tn=Tn.nextZ,lr--):(Vn=Nn,Nn=Nn.nextZ,br--),Zn?Zn.nextZ=Vn:fn=Vn,Vn.prevZ=Zn,Zn=Vn;Tn=Nn}Zn.nextZ=null,yr*=2}while(Kn>1)}(ln)}(S,ue,Ae,Pe);for(var $e,ut,wt=S;S.prev!==S.next;)if($e=S.prev,ut=S.next,Pe?l0(S,ue,Ae,Pe):s0(S))D.push($e.i/X),D.push(S.i/X),D.push(ut.i/X),Ru(S),S=ut.next,wt=ut.next;else if((S=ut)===wt){je?je===1?zu(S=u0(Ol(S),D,X),D,X,ue,Ae,Pe,2):je===2&&c0(S,D,X,ue,Ae,Pe):zu(Ol(S),D,X,ue,Ae,Pe,1);break}}}function s0(S){var D=S.prev,X=S,ue=S.next;if(ra(D,X,ue)>=0)return!1;for(var Ae=S.next.next;Ae!==S.prev;){if(su(D.x,D.y,X.x,X.y,ue.x,ue.y,Ae.x,Ae.y)&&ra(Ae.prev,Ae,Ae.next)>=0)return!1;Ae=Ae.next}return!0}function l0(S,D,X,ue){var Ae=S.prev,Pe=S,je=S.next;if(ra(Ae,Pe,je)>=0)return!1;for(var $e=Ae.x<Pe.x?Ae.x<je.x?Ae.x:je.x:Pe.x<je.x?Pe.x:je.x,ut=Ae.y<Pe.y?Ae.y<je.y?Ae.y:je.y:Pe.y<je.y?Pe.y:je.y,wt=Ae.x>Pe.x?Ae.x>je.x?Ae.x:je.x:Pe.x>je.x?Pe.x:je.x,Mt=Ae.y>Pe.y?Ae.y>je.y?Ae.y:je.y:Pe.y>je.y?Pe.y:je.y,Nt=Cf($e,ut,D,X,ue),Wt=Cf(wt,Mt,D,X,ue),Ut=S.prevZ,ln=S.nextZ;Ut&&Ut.z>=Nt&&ln&&ln.z<=Wt;){if(Ut!==S.prev&&Ut!==S.next&&su(Ae.x,Ae.y,Pe.x,Pe.y,je.x,je.y,Ut.x,Ut.y)&&ra(Ut.prev,Ut,Ut.next)>=0||(Ut=Ut.prevZ,ln!==S.prev&&ln!==S.next&&su(Ae.x,Ae.y,Pe.x,Pe.y,je.x,je.y,ln.x,ln.y)&&ra(ln.prev,ln,ln.next)>=0))return!1;ln=ln.nextZ}for(;Ut&&Ut.z>=Nt;){if(Ut!==S.prev&&Ut!==S.next&&su(Ae.x,Ae.y,Pe.x,Pe.y,je.x,je.y,Ut.x,Ut.y)&&ra(Ut.prev,Ut,Ut.next)>=0)return!1;Ut=Ut.prevZ}for(;ln&&ln.z<=Wt;){if(ln!==S.prev&&ln!==S.next&&su(Ae.x,Ae.y,Pe.x,Pe.y,je.x,je.y,ln.x,ln.y)&&ra(ln.prev,ln,ln.next)>=0)return!1;ln=ln.nextZ}return!0}function u0(S,D,X){var ue=S;do{var Ae=ue.prev,Pe=ue.next.next;!Sc(Ae,Pe)&&jh(Ae,ue,ue.next,Pe)&&Du(Ae,Pe)&&Du(Pe,Ae)&&(D.push(Ae.i/X),D.push(ue.i/X),D.push(Pe.i/X),Ru(ue),Ru(ue.next),ue=S=Pe),ue=ue.next}while(ue!==S);return Ol(ue)}function c0(S,D,X,ue,Ae,Pe){var je=S;do{for(var $e=je.next.next;$e!==je.prev;){if(je.i!==$e.i&&g0(je,$e)){var ut=Uh(je,$e);return je=Ol(je,je.next),ut=Ol(ut,ut.next),zu(je,D,X,ue,Ae,Pe),void zu(ut,D,X,ue,Ae,Pe)}$e=$e.next}je=je.next}while(je!==S)}function f0(S,D){return S.x-D.x}function h0(S,D){if(D=function(ue,Ae){var Pe,je=Ae,$e=ue.x,ut=ue.y,wt=-1/0;do{if(ut<=je.y&&ut>=je.next.y&&je.next.y!==je.y){var Mt=je.x+(ut-je.y)*(je.next.x-je.x)/(je.next.y-je.y);if(Mt<=$e&&Mt>wt){if(wt=Mt,Mt===$e){if(ut===je.y)return je;if(ut===je.next.y)return je.next}Pe=je.x<je.next.x?je:je.next}}je=je.next}while(je!==Ae);if(!Pe)return null;if($e===wt)return Pe;var Nt,Wt=Pe,Ut=Pe.x,ln=Pe.y,fn=1/0;je=Pe;do $e>=je.x&&je.x>=Ut&&$e!==je.x&&su(ut<ln?$e:wt,ut,Ut,ln,ut<ln?wt:$e,ut,je.x,je.y)&&(Nt=Math.abs(ut-je.y)/($e-je.x),Du(je,ue)&&(Nt<fn||Nt===fn&&(je.x>Pe.x||je.x===Pe.x&&p0(Pe,je)))&&(Pe=je,fn=Nt)),je=je.next;while(je!==Wt);return Pe}(S,D)){var X=Uh(D,S);Ol(D,D.next),Ol(X,X.next)}}function p0(S,D){return ra(S.prev,S,D.prev)<0&&ra(D.next,S,S.next)<0}function Cf(S,D,X,ue,Ae){return(S=1431655765&((S=858993459&((S=252645135&((S=16711935&((S=32767*(S-X)*Ae)|S<<8))|S<<4))|S<<2))|S<<1))|(D=1431655765&((D=858993459&((D=252645135&((D=16711935&((D=32767*(D-ue)*Ae)|D<<8))|D<<4))|D<<2))|D<<1))<<1}function d0(S){var D=S,X=S;do(D.x<X.x||D.x===X.x&&D.y<X.y)&&(X=D),D=D.next;while(D!==S);return X}function su(S,D,X,ue,Ae,Pe,je,$e){return(Ae-je)*(D-$e)-(S-je)*(Pe-$e)>=0&&(S-je)*(ue-$e)-(X-je)*(D-$e)>=0&&(X-je)*(Pe-$e)-(Ae-je)*(ue-$e)>=0}function g0(S,D){return S.next.i!==D.i&&S.prev.i!==D.i&&!function(X,ue){var Ae=X;do{if(Ae.i!==X.i&&Ae.next.i!==X.i&&Ae.i!==ue.i&&Ae.next.i!==ue.i&&jh(Ae,Ae.next,X,ue))return!0;Ae=Ae.next}while(Ae!==X);return!1}(S,D)&&(Du(S,D)&&Du(D,S)&&function(X,ue){var Ae=X,Pe=!1,je=(X.x+ue.x)/2,$e=(X.y+ue.y)/2;do Ae.y>$e!=Ae.next.y>$e&&Ae.next.y!==Ae.y&&je<(Ae.next.x-Ae.x)*($e-Ae.y)/(Ae.next.y-Ae.y)+Ae.x&&(Pe=!Pe),Ae=Ae.next;while(Ae!==X);return Pe}(S,D)&&(ra(S.prev,S,D.prev)||ra(S,D.prev,D))||Sc(S,D)&&ra(S.prev,S,S.next)>0&&ra(D.prev,D,D.next)>0)}function ra(S,D,X){return(D.y-S.y)*(X.x-D.x)-(D.x-S.x)*(X.y-D.y)}function Sc(S,D){return S.x===D.x&&S.y===D.y}function jh(S,D,X,ue){var Ae=Lc(ra(S,D,X)),Pe=Lc(ra(S,D,ue)),je=Lc(ra(X,ue,S)),$e=Lc(ra(X,ue,D));return Ae!==Pe&&je!==$e||!(Ae!==0||!Ec(S,X,D))||!(Pe!==0||!Ec(S,ue,D))||!(je!==0||!Ec(X,S,ue))||!($e!==0||!Ec(X,D,ue))}function Ec(S,D,X){return D.x<=Math.max(S.x,X.x)&&D.x>=Math.min(S.x,X.x)&&D.y<=Math.max(S.y,X.y)&&D.y>=Math.min(S.y,X.y)}function Lc(S){return S>0?1:S<0?-1:0}function Du(S,D){return ra(S.prev,S,S.next)<0?ra(S,D,S.next)>=0&&ra(S,S.prev,D)>=0:ra(S,D,S.prev)<0||ra(S,S.next,D)<0}function Uh(S,D){var X=new Pf(S.i,S.x,S.y),ue=new Pf(D.i,D.x,D.y),Ae=S.next,Pe=D.prev;return S.next=D,D.prev=S,X.next=Ae,Ae.prev=X,ue.next=X,X.prev=ue,Pe.next=ue,ue.prev=Pe,ue}function Vh(S,D,X,ue){var Ae=new Pf(S,D,X);return ue?(Ae.next=ue.next,Ae.prev=ue,ue.next.prev=Ae,ue.next=Ae):(Ae.prev=Ae,Ae.next=Ae),Ae}function Ru(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function Pf(S,D,X){this.i=S,this.x=D,this.y=X,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Of(S,D,X,ue){for(var Ae=0,Pe=D,je=X-ue;Pe<X;Pe+=ue)Ae+=(S[je]-S[Pe])*(S[Pe+1]+S[je+1]),je=Pe;return Ae}function v0(S,D,X,ue,Ae){qh(S,D,X||0,ue||S.length-1,Ae||m0)}function qh(S,D,X,ue,Ae){for(;ue>X;){if(ue-X>600){var Pe=ue-X+1,je=D-X+1,$e=Math.log(Pe),ut=.5*Math.exp(2*$e/3),wt=.5*Math.sqrt($e*ut*(Pe-ut)/Pe)*(je-Pe/2<0?-1:1);qh(S,D,Math.max(X,Math.floor(D-je*ut/Pe+wt)),Math.min(ue,Math.floor(D+(Pe-je)*ut/Pe+wt)),Ae)}var Mt=S[D],Nt=X,Wt=ue;for(Fu(S,X,D),Ae(S[ue],Mt)>0&&Fu(S,X,ue);Nt<Wt;){for(Fu(S,Nt,Wt),Nt++,Wt--;Ae(S[Nt],Mt)<0;)Nt++;for(;Ae(S[Wt],Mt)>0;)Wt--}Ae(S[X],Mt)===0?Fu(S,X,Wt):Fu(S,++Wt,ue),Wt<=D&&(X=Wt+1),D<=Wt&&(ue=Wt-1)}}function Fu(S,D,X){var ue=S[D];S[D]=S[X],S[X]=ue}function m0(S,D){return S<D?-1:S>D?1:0}function If(S,D){var X=S.length;if(X<=1)return[S];for(var ue,Ae,Pe=[],je=0;je<X;je++){var $e=I(S[je]);$e!==0&&(S[je].area=Math.abs($e),Ae===void 0&&(Ae=$e<0),Ae===$e<0?(ue&&Pe.push(ue),ue=[S[je]]):ue.push(S[je]))}if(ue&&Pe.push(ue),D>1)for(var ut=0;ut<Pe.length;ut++)Pe[ut].length<=D||(v0(Pe[ut],D,1,Pe[ut].length-1,y0),Pe[ut]=Pe[ut].slice(0,D));return Pe}function y0(S,D){return D.area-S.area}function zf(S,D,X){for(var ue=X.patternDependencies,Ae=!1,Pe=0,je=D;Pe<je.length;Pe+=1){var $e=je[Pe].paint.get(S+"-pattern");$e.isConstant()||(Ae=!0);var ut=$e.constantOr(null);ut&&(Ae=!0,ue[ut.to]=!0,ue[ut.from]=!0)}return Ae}function Df(S,D,X,ue,Ae){for(var Pe=Ae.patternDependencies,je=0,$e=D;je<$e.length;je+=1){var ut=$e[je],wt=ut.paint.get(S+"-pattern").value;if(wt.kind!=="constant"){var Mt=wt.evaluate({zoom:ue-1},X,{},Ae.availableImages),Nt=wt.evaluate({zoom:ue},X,{},Ae.availableImages),Wt=wt.evaluate({zoom:ue+1},X,{},Ae.availableImages);Mt=Mt&&Mt.name?Mt.name:Mt,Nt=Nt&&Nt.name?Nt.name:Nt,Wt=Wt&&Wt.name?Wt.name:Wt,Pe[Mt]=!0,Pe[Nt]=!0,Pe[Wt]=!0,X.patterns[ut.id]={min:Mt,mid:Nt,max:Wt}}}return X}Mc.deviation=function(S,D,X,ue){var Ae=D&&D.length,Pe=Ae?D[0]*X:S.length,je=Math.abs(Of(S,0,Pe,X));if(Ae)for(var $e=0,ut=D.length;$e<ut;$e++){var wt=D[$e]*X,Mt=$e<ut-1?D[$e+1]*X:S.length;je-=Math.abs(Of(S,wt,Mt,X))}var Nt=0;for($e=0;$e<ue.length;$e+=3){var Wt=ue[$e]*X,Ut=ue[$e+1]*X,ln=ue[$e+2]*X;Nt+=Math.abs((S[Wt]-S[ln])*(S[Ut+1]-S[Wt+1])-(S[Wt]-S[Ut])*(S[ln+1]-S[Wt+1]))}return je===0&&Nt===0?0:Math.abs((Nt-je)/je)},Mc.flatten=function(S){for(var D=S[0][0].length,X={vertices:[],holes:[],dimensions:D},ue=0,Ae=0;Ae<S.length;Ae++){for(var Pe=0;Pe<S[Ae].length;Pe++)for(var je=0;je<D;je++)X.vertices.push(S[Ae][Pe][je]);Ae>0&&(ue+=S[Ae-1].length,X.holes.push(ue))}return X},Lf.default=o0;var Hs=function(S){this.zoom=S.zoom,this.overscaling=S.overscaling,this.layers=S.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=S.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Go,this.indexArray=new ye,this.indexArray2=new ct,this.programConfigurations=new Ui(S.layers,S.zoom),this.segments=new Yn,this.segments2=new Yn,this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};Hs.prototype.populate=function(S,D,X){this.hasPattern=zf("fill",this.layers,D);for(var ue=this.layers[0].layout.get("fill-sort-key"),Ae=[],Pe=0,je=S;Pe<je.length;Pe+=1){var $e=je[Pe],ut=$e.feature,wt=$e.id,Mt=$e.index,Nt=$e.sourceLayerIndex,Wt=this.layers[0]._featureFilter.needGeometry,Ut=Si(ut,Wt);if(this.layers[0]._featureFilter.filter(new Xr(this.zoom),Ut,X)){var ln=ue?ue.evaluate(Ut,{},X,D.availableImages):void 0,fn={id:wt,properties:ut.properties,type:ut.type,sourceLayerIndex:Nt,index:Mt,geometry:Wt?Ut.geometry:Mo(ut),patterns:{},sortKey:ln};Ae.push(fn)}}ue&&Ae.sort(function(Ar,Sr){return Ar.sortKey-Sr.sortKey});for(var Mn=0,Tn=Ae;Mn<Tn.length;Mn+=1){var Nn=Tn[Mn],Vn=Nn,Zn=Vn.geometry,Kn=Vn.index,lr=Vn.sourceLayerIndex;if(this.hasPattern){var br=Df("fill",this.layers,Nn,this.zoom,D);this.patternFeatures.push(br)}else this.addFeature(Nn,Zn,Kn,X,{});var yr=S[Kn].feature;D.featureIndex.insert(yr,Zn,Kn,lr,this.index)}},Hs.prototype.update=function(S,D,X){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(S,D,this.stateDependentLayers,X)},Hs.prototype.addFeatures=function(S,D,X){for(var ue=0,Ae=this.patternFeatures;ue<Ae.length;ue+=1){var Pe=Ae[ue];this.addFeature(Pe,Pe.geometry,Pe.index,D,X)}},Hs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Hs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Hs.prototype.upload=function(S){this.uploaded||(this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,a0),this.indexBuffer=S.createIndexBuffer(this.indexArray),this.indexBuffer2=S.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(S),this.uploaded=!0},Hs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Hs.prototype.addFeature=function(S,D,X,ue,Ae){for(var Pe=0,je=If(D,500);Pe<je.length;Pe+=1){for(var $e=je[Pe],ut=0,wt=0,Mt=$e;wt<Mt.length;wt+=1)ut+=Mt[wt].length;for(var Nt=this.segments.prepareSegment(ut,this.layoutVertexArray,this.indexArray),Wt=Nt.vertexLength,Ut=[],ln=[],fn=0,Mn=$e;fn<Mn.length;fn+=1){var Tn=Mn[fn];if(Tn.length!==0){Tn!==$e[0]&&ln.push(Ut.length/2);var Nn=this.segments2.prepareSegment(Tn.length,this.layoutVertexArray,this.indexArray2),Vn=Nn.vertexLength;this.layoutVertexArray.emplaceBack(Tn[0].x,Tn[0].y),this.indexArray2.emplaceBack(Vn+Tn.length-1,Vn),Ut.push(Tn[0].x),Ut.push(Tn[0].y);for(var Zn=1;Zn<Tn.length;Zn++)this.layoutVertexArray.emplaceBack(Tn[Zn].x,Tn[Zn].y),this.indexArray2.emplaceBack(Vn+Zn-1,Vn+Zn),Ut.push(Tn[Zn].x),Ut.push(Tn[Zn].y);Nn.vertexLength+=Tn.length,Nn.primitiveLength+=Tn.length}}for(var Kn=Lf(Ut,ln),lr=0;lr<Kn.length;lr+=3)this.indexArray.emplaceBack(Wt+Kn[lr],Wt+Kn[lr+1],Wt+Kn[lr+2]);Nt.vertexLength+=ut,Nt.primitiveLength+=Kn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,S,X,Ae,ue)},Lr("FillBucket",Hs,{omit:["layers","patternFeatures"]});var x0=new Ri({"fill-sort-key":new Br(Ze.layout_fill["fill-sort-key"])}),b0={paint:new Ri({"fill-antialias":new Pr(Ze.paint_fill["fill-antialias"]),"fill-opacity":new Br(Ze.paint_fill["fill-opacity"]),"fill-color":new Br(Ze.paint_fill["fill-color"]),"fill-outline-color":new Br(Ze.paint_fill["fill-outline-color"]),"fill-translate":new Pr(Ze.paint_fill["fill-translate"]),"fill-translate-anchor":new Pr(Ze.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ca(Ze.paint_fill["fill-pattern"])}),layout:x0},_0=function(S){function D(X){S.call(this,X,b0)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.recalculate=function(X,ue){S.prototype.recalculate.call(this,X,ue);var Ae=this.paint._values["fill-outline-color"];Ae.value.kind==="constant"&&Ae.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},D.prototype.createBucket=function(X){return new Hs(X)},D.prototype.queryRadius=function(){return wc(this.paint.get("fill-translate"))},D.prototype.queryIntersectsFeature=function(X,ue,Ae,Pe,je,$e,ut){return xc(Tc(X,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),$e.angle,ut),Pe)},D.prototype.isTileClipped=function(){return!0},D}(oi),w0=bi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Hh=lu;function lu(S,D,X,ue,Ae){this.properties={},this.extent=X,this.type=0,this._pbf=S,this._geometry=-1,this._keys=ue,this._values=Ae,S.readFields(T0,this,D)}function T0(S,D,X){S==1?D.id=X.readVarint():S==2?function(ue,Ae){for(var Pe=ue.readVarint()+ue.pos;ue.pos<Pe;){var je=Ae._keys[ue.readVarint()],$e=Ae._values[ue.readVarint()];Ae.properties[je]=$e}}(X,D):S==3?D.type=X.readVarint():S==4&&(D._geometry=X.pos)}function k0(S){for(var D,X,ue=0,Ae=0,Pe=S.length,je=Pe-1;Ae<Pe;je=Ae++)D=S[Ae],ue+=((X=S[je]).x-D.x)*(D.y+X.y);return ue}lu.types=["Unknown","Point","LineString","Polygon"],lu.prototype.loadGeometry=function(){var S=this._pbf;S.pos=this._geometry;for(var D,X=S.readVarint()+S.pos,ue=1,Ae=0,Pe=0,je=0,$e=[];S.pos<X;){if(Ae<=0){var ut=S.readVarint();ue=7&ut,Ae=ut>>3}if(Ae--,ue===1||ue===2)Pe+=S.readSVarint(),je+=S.readSVarint(),ue===1&&(D&&$e.push(D),D=[]),D.push(new n(Pe,je));else{if(ue!==7)throw new Error("unknown command "+ue);D&&D.push(D[0].clone())}}return D&&$e.push(D),$e},lu.prototype.bbox=function(){var S=this._pbf;S.pos=this._geometry;for(var D=S.readVarint()+S.pos,X=1,ue=0,Ae=0,Pe=0,je=1/0,$e=-1/0,ut=1/0,wt=-1/0;S.pos<D;){if(ue<=0){var Mt=S.readVarint();X=7&Mt,ue=Mt>>3}if(ue--,X===1||X===2)(Ae+=S.readSVarint())<je&&(je=Ae),Ae>$e&&($e=Ae),(Pe+=S.readSVarint())<ut&&(ut=Pe),Pe>wt&&(wt=Pe);else if(X!==7)throw new Error("unknown command "+X)}return[je,ut,$e,wt]},lu.prototype.toGeoJSON=function(S,D,X){var ue,Ae,Pe=this.extent*Math.pow(2,X),je=this.extent*S,$e=this.extent*D,ut=this.loadGeometry(),wt=lu.types[this.type];function Mt(Ut){for(var ln=0;ln<Ut.length;ln++){var fn=Ut[ln],Mn=180-360*(fn.y+$e)/Pe;Ut[ln]=[360*(fn.x+je)/Pe-180,360/Math.PI*Math.atan(Math.exp(Mn*Math.PI/180))-90]}}switch(this.type){case 1:var Nt=[];for(ue=0;ue<ut.length;ue++)Nt[ue]=ut[ue][0];Mt(ut=Nt);break;case 2:for(ue=0;ue<ut.length;ue++)Mt(ut[ue]);break;case 3:for(ut=function(Ut){var ln=Ut.length;if(ln<=1)return[Ut];for(var fn,Mn,Tn=[],Nn=0;Nn<ln;Nn++){var Vn=k0(Ut[Nn]);Vn!==0&&(Mn===void 0&&(Mn=Vn<0),Mn===Vn<0?(fn&&Tn.push(fn),fn=[Ut[Nn]]):fn.push(Ut[Nn]))}return fn&&Tn.push(fn),Tn}(ut),ue=0;ue<ut.length;ue++)for(Ae=0;Ae<ut[ue].length;Ae++)Mt(ut[ue][Ae])}ut.length===1?ut=ut[0]:wt="Multi"+wt;var Wt={type:"Feature",geometry:{type:wt,coordinates:ut},properties:this.properties};return"id"in this&&(Wt.id=this.id),Wt};var Gh=Wh;function Wh(S,D){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=S,this._keys=[],this._values=[],this._features=[],S.readFields(A0,this,D),this.length=this._features.length}function A0(S,D,X){S===15?D.version=X.readVarint():S===1?D.name=X.readString():S===5?D.extent=X.readVarint():S===2?D._features.push(X.pos):S===3?D._keys.push(X.readString()):S===4&&D._values.push(function(ue){for(var Ae=null,Pe=ue.readVarint()+ue.pos;ue.pos<Pe;){var je=ue.readVarint()>>3;Ae=je===1?ue.readString():je===2?ue.readFloat():je===3?ue.readDouble():je===4?ue.readVarint64():je===5?ue.readVarint():je===6?ue.readSVarint():je===7?ue.readBoolean():null}return Ae}(X))}function M0(S,D,X){if(S===3){var ue=new Gh(X,X.readVarint()+X.pos);ue.length&&(D[ue.name]=ue)}}Wh.prototype.feature=function(S){if(S<0||S>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[S];var D=this._pbf.readVarint()+this._pbf.pos;return new Hh(this._pbf,D,this.extent,this._keys,this._values)};var uu={VectorTile:function(S,D){this.layers=S.readFields(M0,{},D)},VectorTileFeature:Hh,VectorTileLayer:Gh},S0=uu.VectorTileFeature.types,Rf=Math.pow(2,13);function Bu(S,D,X,ue,Ae,Pe,je,$e){S.emplaceBack(D,X,2*Math.floor(ue*Rf)+je,Ae*Rf*2,Pe*Rf*2,Math.round($e))}var Gs=function(S){this.zoom=S.zoom,this.overscaling=S.overscaling,this.layers=S.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=S.index,this.hasPattern=!1,this.layoutVertexArray=new Xe,this.indexArray=new ye,this.programConfigurations=new Ui(S.layers,S.zoom),this.segments=new Yn,this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};function E0(S,D){return S.x===D.x&&(S.x<0||S.x>ni)||S.y===D.y&&(S.y<0||S.y>ni)}Gs.prototype.populate=function(S,D,X){this.features=[],this.hasPattern=zf("fill-extrusion",this.layers,D);for(var ue=0,Ae=S;ue<Ae.length;ue+=1){var Pe=Ae[ue],je=Pe.feature,$e=Pe.id,ut=Pe.index,wt=Pe.sourceLayerIndex,Mt=this.layers[0]._featureFilter.needGeometry,Nt=Si(je,Mt);if(this.layers[0]._featureFilter.filter(new Xr(this.zoom),Nt,X)){var Wt={id:$e,sourceLayerIndex:wt,index:ut,geometry:Mt?Nt.geometry:Mo(je),properties:je.properties,type:je.type,patterns:{}};this.hasPattern?this.features.push(Df("fill-extrusion",this.layers,Wt,this.zoom,D)):this.addFeature(Wt,Wt.geometry,ut,X,{}),D.featureIndex.insert(je,Wt.geometry,ut,wt,this.index,!0)}}},Gs.prototype.addFeatures=function(S,D,X){for(var ue=0,Ae=this.features;ue<Ae.length;ue+=1){var Pe=Ae[ue],je=Pe.geometry;this.addFeature(Pe,je,Pe.index,D,X)}},Gs.prototype.update=function(S,D,X){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(S,D,this.stateDependentLayers,X)},Gs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Gs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Gs.prototype.upload=function(S){this.uploaded||(this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,w0),this.indexBuffer=S.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(S),this.uploaded=!0},Gs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Gs.prototype.addFeature=function(S,D,X,ue,Ae){for(var Pe=0,je=If(D,500);Pe<je.length;Pe+=1){for(var $e=je[Pe],ut=0,wt=0,Mt=$e;wt<Mt.length;wt+=1)ut+=Mt[wt].length;for(var Nt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Wt=0,Ut=$e;Wt<Ut.length;Wt+=1){var ln=Ut[Wt];if(ln.length!==0&&!((ei=ln).every(function(Gr){return Gr.x<0})||ei.every(function(Gr){return Gr.x>ni})||ei.every(function(Gr){return Gr.y<0})||ei.every(function(Gr){return Gr.y>ni})))for(var fn=0,Mn=0;Mn<ln.length;Mn++){var Tn=ln[Mn];if(Mn>=1){var Nn=ln[Mn-1];if(!E0(Tn,Nn)){Nt.vertexLength+4>Yn.MAX_VERTEX_ARRAY_LENGTH&&(Nt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Vn=Tn.sub(Nn)._perp()._unit(),Zn=Nn.dist(Tn);fn+Zn>32768&&(fn=0),Bu(this.layoutVertexArray,Tn.x,Tn.y,Vn.x,Vn.y,0,0,fn),Bu(this.layoutVertexArray,Tn.x,Tn.y,Vn.x,Vn.y,0,1,fn),fn+=Zn,Bu(this.layoutVertexArray,Nn.x,Nn.y,Vn.x,Vn.y,0,0,fn),Bu(this.layoutVertexArray,Nn.x,Nn.y,Vn.x,Vn.y,0,1,fn);var Kn=Nt.vertexLength;this.indexArray.emplaceBack(Kn,Kn+2,Kn+1),this.indexArray.emplaceBack(Kn+1,Kn+2,Kn+3),Nt.vertexLength+=4,Nt.primitiveLength+=2}}}}if(Nt.vertexLength+ut>Yn.MAX_VERTEX_ARRAY_LENGTH&&(Nt=this.segments.prepareSegment(ut,this.layoutVertexArray,this.indexArray)),S0[S.type]==="Polygon"){for(var lr=[],br=[],yr=Nt.vertexLength,Ar=0,Sr=$e;Ar<Sr.length;Ar+=1){var Vr=Sr[Ar];if(Vr.length!==0){Vr!==$e[0]&&br.push(lr.length/2);for(var zr=0;zr<Vr.length;zr++){var Ur=Vr[zr];Bu(this.layoutVertexArray,Ur.x,Ur.y,0,0,1,1,0),lr.push(Ur.x),lr.push(Ur.y)}}}for(var Fr=Lf(lr,br),Ir=0;Ir<Fr.length;Ir+=3)this.indexArray.emplaceBack(yr+Fr[Ir],yr+Fr[Ir+2],yr+Fr[Ir+1]);Nt.primitiveLength+=Fr.length/3,Nt.vertexLength+=ut}}var ei;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,S,X,Ae,ue)},Lr("FillExtrusionBucket",Gs,{omit:["layers","features"]});var L0={paint:new Ri({"fill-extrusion-opacity":new Pr(Ze["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Br(Ze["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Pr(Ze["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Pr(Ze["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ca(Ze["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Br(Ze["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Br(Ze["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Pr(Ze["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},C0=function(S){function D(X){S.call(this,X,L0)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.createBucket=function(X){return new Gs(X)},D.prototype.queryRadius=function(){return wc(this.paint.get("fill-extrusion-translate"))},D.prototype.is3D=function(){return!0},D.prototype.queryIntersectsFeature=function(X,ue,Ae,Pe,je,$e,ut,wt){var Mt=Tc(X,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),$e.angle,ut),Nt=this.paint.get("fill-extrusion-height").evaluate(ue,Ae),Wt=this.paint.get("fill-extrusion-base").evaluate(ue,Ae),Ut=function(fn,Mn,Tn,Nn){for(var Vn=[],Zn=0,Kn=fn;Zn<Kn.length;Zn+=1){var lr=Kn[Zn],br=[lr.x,lr.y,Nn,1];Ac(br,br,Mn),Vn.push(new n(br[0]/br[3],br[1]/br[3]))}return Vn}(Mt,wt,0,0),ln=function(fn,Mn,Tn,Nn){for(var Vn=[],Zn=[],Kn=Nn[8]*Mn,lr=Nn[9]*Mn,br=Nn[10]*Mn,yr=Nn[11]*Mn,Ar=Nn[8]*Tn,Sr=Nn[9]*Tn,Vr=Nn[10]*Tn,zr=Nn[11]*Tn,Ur=0,Fr=fn;Ur<Fr.length;Ur+=1){for(var Ir=[],ei=[],Gr=0,Ti=Fr[Ur];Gr<Ti.length;Gr+=1){var Nr=Ti[Gr],yi=Nr.x,Li=Nr.y,zi=Nn[0]*yi+Nn[4]*Li+Nn[12],Di=Nn[1]*yi+Nn[5]*Li+Nn[13],ki=Nn[2]*yi+Nn[6]*Li+Nn[14],oa=Nn[3]*yi+Nn[7]*Li+Nn[15],ji=ki+br,ba=oa+yr,Ia=zi+Ar,Aa=Di+Sr,eo=ki+Vr,Ma=oa+zr,ca=new n((zi+Kn)/ba,(Di+lr)/ba);ca.z=ji/ba,Ir.push(ca);var Sa=new n(Ia/Ma,Aa/Ma);Sa.z=eo/Ma,ei.push(Sa)}Vn.push(Ir),Zn.push(ei)}return[Vn,Zn]}(Pe,Wt,Nt,wt);return function(fn,Mn,Tn){var Nn=1/0;xc(Tn,Mn)&&(Nn=Yh(Tn,Mn[0]));for(var Vn=0;Vn<Mn.length;Vn++)for(var Zn=Mn[Vn],Kn=fn[Vn],lr=0;lr<Zn.length-1;lr++){var br=Zn[lr],yr=Zn[lr+1],Ar=Kn[lr],Sr=[br,yr,Kn[lr+1],Ar,br];Zl(Tn,Sr)&&(Nn=Math.min(Nn,Yh(Tn,Sr)))}return Nn!==1/0&&Nn}(ln[0],ln[1],Ut)},D}(oi);function Nu(S,D){return S.x*D.x+S.y*D.y}function Yh(S,D){if(S.length===1){for(var X,ue=0,Ae=D[ue++];!X||Ae.equals(X);)if(!(X=D[ue++]))return 1/0;for(;ue<D.length;ue++){var Pe=D[ue],je=S[0],$e=X.sub(Ae),ut=Pe.sub(Ae),wt=je.sub(Ae),Mt=Nu($e,$e),Nt=Nu($e,ut),Wt=Nu(ut,ut),Ut=Nu(wt,$e),ln=Nu(wt,ut),fn=Mt*Wt-Nt*Nt,Mn=(Wt*Ut-Nt*ln)/fn,Tn=(Mt*ln-Nt*Ut)/fn,Nn=1-Mn-Tn,Vn=Ae.z*Nn+X.z*Mn+Pe.z*Tn;if(isFinite(Vn))return Vn}return 1/0}for(var Zn=1/0,Kn=0,lr=D;Kn<lr.length;Kn+=1){var br=lr[Kn];Zn=Math.min(Zn,br.z)}return Zn}var P0=bi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,O0=bi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,I0=uu.VectorTileFeature.types,z0=Math.cos(Math.PI/180*37.5),Zh=Math.pow(2,14)/.5,Qa=function(S){var D=this;this.zoom=S.zoom,this.overscaling=S.overscaling,this.layers=S.layers,this.layerIds=this.layers.map(function(X){return X.id}),this.index=S.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(X){D.gradients[X.id]={}}),this.layoutVertexArray=new Qe,this.layoutVertexArray2=new lt,this.indexArray=new ye,this.programConfigurations=new Ui(S.layers,S.zoom),this.segments=new Yn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(X){return X.isStateDependent()}).map(function(X){return X.id})};Qa.prototype.populate=function(S,D,X){this.hasPattern=zf("line",this.layers,D);for(var ue=this.layers[0].layout.get("line-sort-key"),Ae=[],Pe=0,je=S;Pe<je.length;Pe+=1){var $e=je[Pe],ut=$e.feature,wt=$e.id,Mt=$e.index,Nt=$e.sourceLayerIndex,Wt=this.layers[0]._featureFilter.needGeometry,Ut=Si(ut,Wt);if(this.layers[0]._featureFilter.filter(new Xr(this.zoom),Ut,X)){var ln=ue?ue.evaluate(Ut,{},X):void 0,fn={id:wt,properties:ut.properties,type:ut.type,sourceLayerIndex:Nt,index:Mt,geometry:Wt?Ut.geometry:Mo(ut),patterns:{},sortKey:ln};Ae.push(fn)}}ue&&Ae.sort(function(Ar,Sr){return Ar.sortKey-Sr.sortKey});for(var Mn=0,Tn=Ae;Mn<Tn.length;Mn+=1){var Nn=Tn[Mn],Vn=Nn,Zn=Vn.geometry,Kn=Vn.index,lr=Vn.sourceLayerIndex;if(this.hasPattern){var br=Df("line",this.layers,Nn,this.zoom,D);this.patternFeatures.push(br)}else this.addFeature(Nn,Zn,Kn,X,{});var yr=S[Kn].feature;D.featureIndex.insert(yr,Zn,Kn,lr,this.index)}},Qa.prototype.update=function(S,D,X){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(S,D,this.stateDependentLayers,X)},Qa.prototype.addFeatures=function(S,D,X){for(var ue=0,Ae=this.patternFeatures;ue<Ae.length;ue+=1){var Pe=Ae[ue];this.addFeature(Pe,Pe.geometry,Pe.index,D,X)}},Qa.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Qa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Qa.prototype.upload=function(S){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=S.createVertexBuffer(this.layoutVertexArray2,O0)),this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,P0),this.indexBuffer=S.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(S),this.uploaded=!0},Qa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Qa.prototype.lineFeatureClips=function(S){if(S.properties&&S.properties.hasOwnProperty("mapbox_clip_start")&&S.properties.hasOwnProperty("mapbox_clip_end"))return{start:+S.properties.mapbox_clip_start,end:+S.properties.mapbox_clip_end}},Qa.prototype.addFeature=function(S,D,X,ue,Ae){var Pe=this.layers[0].layout,je=Pe.get("line-join").evaluate(S,{}),$e=Pe.get("line-cap"),ut=Pe.get("line-miter-limit"),wt=Pe.get("line-round-limit");this.lineClips=this.lineFeatureClips(S);for(var Mt=0,Nt=D;Mt<Nt.length;Mt+=1){var Wt=Nt[Mt];this.addLine(Wt,S,je,$e,ut,wt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,S,X,Ae,ue)},Qa.prototype.addLine=function(S,D,X,ue,Ae,Pe){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var je=0;je<S.length-1;je++)this.totalDistance+=S[je].dist(S[je+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var $e=I0[D.type]==="Polygon",ut=S.length;ut>=2&&S[ut-1].equals(S[ut-2]);)ut--;for(var wt=0;wt<ut-1&&S[wt].equals(S[wt+1]);)wt++;if(!(ut<($e?3:2))){X==="bevel"&&(Ae=1.05);var Mt,Nt=this.overscaling<=16?15*ni/(512*this.overscaling):0,Wt=this.segments.prepareSegment(10*ut,this.layoutVertexArray,this.indexArray),Ut=void 0,ln=void 0,fn=void 0,Mn=void 0;this.e1=this.e2=-1,$e&&(Mt=S[ut-2],Mn=S[wt].sub(Mt)._unit()._perp());for(var Tn=wt;Tn<ut;Tn++)if(!(ln=Tn===ut-1?$e?S[wt+1]:void 0:S[Tn+1])||!S[Tn].equals(ln)){Mn&&(fn=Mn),Mt&&(Ut=Mt),Mt=S[Tn],Mn=ln?ln.sub(Mt)._unit()._perp():fn;var Nn=(fn=fn||Mn).add(Mn);Nn.x===0&&Nn.y===0||Nn._unit();var Vn=fn.x*Mn.x+fn.y*Mn.y,Zn=Nn.x*Mn.x+Nn.y*Mn.y,Kn=Zn!==0?1/Zn:1/0,lr=2*Math.sqrt(2-2*Zn),br=Zn<z0&&Ut&&ln,yr=fn.x*Mn.y-fn.y*Mn.x>0;if(br&&Tn>wt){var Ar=Mt.dist(Ut);if(Ar>2*Nt){var Sr=Mt.sub(Mt.sub(Ut)._mult(Nt/Ar)._round());this.updateDistance(Ut,Sr),this.addCurrentVertex(Sr,fn,0,0,Wt),Ut=Sr}}var Vr=Ut&&ln,zr=Vr?X:$e?"butt":ue;if(Vr&&zr==="round"&&(Kn<Pe?zr="miter":Kn<=2&&(zr="fakeround")),zr==="miter"&&Kn>Ae&&(zr="bevel"),zr==="bevel"&&(Kn>2&&(zr="flipbevel"),Kn<Ae&&(zr="miter")),Ut&&this.updateDistance(Ut,Mt),zr==="miter")Nn._mult(Kn),this.addCurrentVertex(Mt,Nn,0,0,Wt);else if(zr==="flipbevel"){if(Kn>100)Nn=Mn.mult(-1);else{var Ur=Kn*fn.add(Mn).mag()/fn.sub(Mn).mag();Nn._perp()._mult(Ur*(yr?-1:1))}this.addCurrentVertex(Mt,Nn,0,0,Wt),this.addCurrentVertex(Mt,Nn.mult(-1),0,0,Wt)}else if(zr==="bevel"||zr==="fakeround"){var Fr=-Math.sqrt(Kn*Kn-1),Ir=yr?Fr:0,ei=yr?0:Fr;if(Ut&&this.addCurrentVertex(Mt,fn,Ir,ei,Wt),zr==="fakeround")for(var Gr=Math.round(180*lr/Math.PI/20),Ti=1;Ti<Gr;Ti++){var Nr=Ti/Gr;if(Nr!==.5){var yi=Nr-.5;Nr+=Nr*yi*(Nr-1)*((1.0904+Vn*(Vn*(3.55645-1.43519*Vn)-3.2452))*yi*yi+(.848013+Vn*(.215638*Vn-1.06021)))}var Li=Mn.sub(fn)._mult(Nr)._add(fn)._unit()._mult(yr?-1:1);this.addHalfVertex(Mt,Li.x,Li.y,!1,yr,0,Wt)}ln&&this.addCurrentVertex(Mt,Mn,-Ir,-ei,Wt)}else if(zr==="butt")this.addCurrentVertex(Mt,Nn,0,0,Wt);else if(zr==="square"){var zi=Ut?1:-1;this.addCurrentVertex(Mt,Nn,zi,zi,Wt)}else zr==="round"&&(Ut&&(this.addCurrentVertex(Mt,fn,0,0,Wt),this.addCurrentVertex(Mt,fn,1,1,Wt,!0)),ln&&(this.addCurrentVertex(Mt,Mn,-1,-1,Wt,!0),this.addCurrentVertex(Mt,Mn,0,0,Wt)));if(br&&Tn<ut-1){var Di=Mt.dist(ln);if(Di>2*Nt){var ki=Mt.add(ln.sub(Mt)._mult(Nt/Di)._round());this.updateDistance(Mt,ki),this.addCurrentVertex(ki,Mn,0,0,Wt),Mt=ki}}}}},Qa.prototype.addCurrentVertex=function(S,D,X,ue,Ae,Pe){Pe===void 0&&(Pe=!1);var je=D.x+D.y*X,$e=D.y-D.x*X,ut=-D.x+D.y*ue,wt=-D.y-D.x*ue;this.addHalfVertex(S,je,$e,Pe,!1,X,Ae),this.addHalfVertex(S,ut,wt,Pe,!0,-ue,Ae),this.distance>Zh/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(S,D,X,ue,Ae,Pe))},Qa.prototype.addHalfVertex=function(S,D,X,ue,Ae,Pe,je){var $e=S.x,ut=S.y,wt=.5*(this.lineClips?this.scaledDistance*(Zh-1):this.scaledDistance);if(this.layoutVertexArray.emplaceBack(($e<<1)+(ue?1:0),(ut<<1)+(Ae?1:0),Math.round(63*D)+128,Math.round(63*X)+128,1+(Pe===0?0:Pe<0?-1:1)|(63&wt)<<2,wt>>6),this.lineClips){var Mt=(this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start);this.layoutVertexArray2.emplaceBack(Mt,this.lineClipsArray.length)}var Nt=je.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Nt),je.primitiveLength++),Ae?this.e2=Nt:this.e1=Nt},Qa.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Qa.prototype.updateDistance=function(S,D){this.distance+=S.dist(D),this.updateScaledDistance()},Lr("LineBucket",Qa,{omit:["layers","patternFeatures"]});var D0=new Ri({"line-cap":new Pr(Ze.layout_line["line-cap"]),"line-join":new Br(Ze.layout_line["line-join"]),"line-miter-limit":new Pr(Ze.layout_line["line-miter-limit"]),"line-round-limit":new Pr(Ze.layout_line["line-round-limit"]),"line-sort-key":new Br(Ze.layout_line["line-sort-key"])}),Xh={paint:new Ri({"line-opacity":new Br(Ze.paint_line["line-opacity"]),"line-color":new Br(Ze.paint_line["line-color"]),"line-translate":new Pr(Ze.paint_line["line-translate"]),"line-translate-anchor":new Pr(Ze.paint_line["line-translate-anchor"]),"line-width":new Br(Ze.paint_line["line-width"]),"line-gap-width":new Br(Ze.paint_line["line-gap-width"]),"line-offset":new Br(Ze.paint_line["line-offset"]),"line-blur":new Br(Ze.paint_line["line-blur"]),"line-dasharray":new fo(Ze.paint_line["line-dasharray"]),"line-pattern":new Ca(Ze.paint_line["line-pattern"]),"line-gradient":new Ao(Ze.paint_line["line-gradient"])}),layout:D0},R0=function(S){function D(){S.apply(this,arguments)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.possiblyEvaluate=function(X,ue){return ue=new Xr(Math.floor(ue.zoom),{now:ue.now,fadeDuration:ue.fadeDuration,zoomHistory:ue.zoomHistory,transition:ue.transition}),S.prototype.possiblyEvaluate.call(this,X,ue)},D.prototype.evaluate=function(X,ue,Ae,Pe){return ue=f({},ue,{zoom:Math.floor(ue.zoom)}),S.prototype.evaluate.call(this,X,ue,Ae,Pe)},D}(Br),Jh=new R0(Xh.paint.properties["line-width"].specification);Jh.useIntegerZoom=!0;var F0=function(S){function D(X){S.call(this,X,Xh),this.gradientVersion=0}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype._handleSpecialPaintPropertyUpdate=function(X){if(X==="line-gradient"){var ue=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=ue._styleExpression.expression instanceof Er,this.gradientVersion=(this.gradientVersion+1)%i}},D.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},D.prototype.recalculate=function(X,ue){S.prototype.recalculate.call(this,X,ue),this.paint._values["line-floorwidth"]=Jh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,X)},D.prototype.createBucket=function(X){return new Qa(X)},D.prototype.queryRadius=function(X){var ue=X,Ae=Kh(Iu("line-width",this,ue),Iu("line-gap-width",this,ue)),Pe=Iu("line-offset",this,ue);return Ae/2+Math.abs(Pe)+wc(this.paint.get("line-translate"))},D.prototype.queryIntersectsFeature=function(X,ue,Ae,Pe,je,$e,ut){var wt=Tc(X,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),$e.angle,ut),Mt=ut/2*Kh(this.paint.get("line-width").evaluate(ue,Ae),this.paint.get("line-gap-width").evaluate(ue,Ae)),Nt=this.paint.get("line-offset").evaluate(ue,Ae);return Nt&&(Pe=function(Wt,Ut){for(var ln=[],fn=new n(0,0),Mn=0;Mn<Wt.length;Mn++){for(var Tn=Wt[Mn],Nn=[],Vn=0;Vn<Tn.length;Vn++){var Zn=Tn[Vn-1],Kn=Tn[Vn],lr=Tn[Vn+1],br=Vn===0?fn:Kn.sub(Zn)._unit()._perp(),yr=Vn===Tn.length-1?fn:lr.sub(Kn)._unit()._perp(),Ar=br._add(yr)._unit(),Sr=Ar.x*yr.x+Ar.y*yr.y;Ar._mult(1/Sr),Nn.push(Ar._mult(Ut)._add(Kn))}ln.push(Nn)}return ln}(Pe,Nt*ut)),function(Wt,Ut,ln){for(var fn=0;fn<Ut.length;fn++){var Mn=Ut[fn];if(Wt.length>=3){for(var Tn=0;Tn<Mn.length;Tn++)if(ll(Wt,Mn[Tn]))return!0}if(kf(Wt,Mn,ln))return!0}return!1}(wt,Pe,Mt)},D.prototype.isTileClipped=function(){return!0},D}(oi);function Kh(S,D){return D>0?D+2*S:S}var B0=bi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),N0=bi([{name:"a_projected_pos",components:3,type:"Float32"}],4),j0=(bi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),bi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),$h=(bi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),bi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),U0=bi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function V0(S,D,X){return S.sections.forEach(function(ue){ue.text=function(Ae,Pe,je){var $e=Pe.layout.get("text-transform").evaluate(je,{});return $e==="uppercase"?Ae=Ae.toLocaleUpperCase():$e==="lowercase"&&(Ae=Ae.toLocaleLowerCase()),ya.applyArabicShaping&&(Ae=ya.applyArabicShaping(Ae)),Ae}(ue.text,D,X)}),S}bi([{name:"triangle",components:3,type:"Uint16"}]),bi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),bi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),bi([{type:"Float32",name:"offsetX"}]),bi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var ju={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},ka=24,Qh=function(S,D,X,ue,Ae){var Pe,je,$e=8*Ae-ue-1,ut=(1<<$e)-1,wt=ut>>1,Mt=-7,Nt=X?Ae-1:0,Wt=X?-1:1,Ut=S[D+Nt];for(Nt+=Wt,Pe=Ut&(1<<-Mt)-1,Ut>>=-Mt,Mt+=$e;Mt>0;Pe=256*Pe+S[D+Nt],Nt+=Wt,Mt-=8);for(je=Pe&(1<<-Mt)-1,Pe>>=-Mt,Mt+=ue;Mt>0;je=256*je+S[D+Nt],Nt+=Wt,Mt-=8);if(Pe===0)Pe=1-wt;else{if(Pe===ut)return je?NaN:1/0*(Ut?-1:1);je+=Math.pow(2,ue),Pe-=wt}return(Ut?-1:1)*je*Math.pow(2,Pe-ue)},ep=function(S,D,X,ue,Ae,Pe){var je,$e,ut,wt=8*Pe-Ae-1,Mt=(1<<wt)-1,Nt=Mt>>1,Wt=Ae===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ut=ue?0:Pe-1,ln=ue?1:-1,fn=D<0||D===0&&1/D<0?1:0;for(D=Math.abs(D),isNaN(D)||D===1/0?($e=isNaN(D)?1:0,je=Mt):(je=Math.floor(Math.log(D)/Math.LN2),D*(ut=Math.pow(2,-je))<1&&(je--,ut*=2),(D+=je+Nt>=1?Wt/ut:Wt*Math.pow(2,1-Nt))*ut>=2&&(je++,ut/=2),je+Nt>=Mt?($e=0,je=Mt):je+Nt>=1?($e=(D*ut-1)*Math.pow(2,Ae),je+=Nt):($e=D*Math.pow(2,Nt-1)*Math.pow(2,Ae),je=0));Ae>=8;S[X+Ut]=255&$e,Ut+=ln,$e/=256,Ae-=8);for(je=je<<Ae|$e,wt+=Ae;wt>0;S[X+Ut]=255&je,Ut+=ln,je/=256,wt-=8);S[X+Ut-ln]|=128*fn},Cc=Ei;function Ei(S){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(S)?S:new Uint8Array(S||0),this.pos=0,this.type=0,this.length=this.buf.length}Ei.Varint=0,Ei.Fixed64=1,Ei.Bytes=2,Ei.Fixed32=5;var Ff=4294967296,tp=1/Ff,np=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function ml(S){return S.type===Ei.Bytes?S.readVarint()+S.pos:S.pos+1}function cu(S,D,X){return X?4294967296*D+(S>>>0):4294967296*(D>>>0)+(S>>>0)}function rp(S,D,X){var ue=D<=16383?1:D<=2097151?2:D<=268435455?3:Math.floor(Math.log(D)/(7*Math.LN2));X.realloc(ue);for(var Ae=X.pos-1;Ae>=S;Ae--)X.buf[Ae+ue]=X.buf[Ae]}function q0(S,D){for(var X=0;X<S.length;X++)D.writeVarint(S[X])}function H0(S,D){for(var X=0;X<S.length;X++)D.writeSVarint(S[X])}function G0(S,D){for(var X=0;X<S.length;X++)D.writeFloat(S[X])}function W0(S,D){for(var X=0;X<S.length;X++)D.writeDouble(S[X])}function Y0(S,D){for(var X=0;X<S.length;X++)D.writeBoolean(S[X])}function Z0(S,D){for(var X=0;X<S.length;X++)D.writeFixed32(S[X])}function X0(S,D){for(var X=0;X<S.length;X++)D.writeSFixed32(S[X])}function J0(S,D){for(var X=0;X<S.length;X++)D.writeFixed64(S[X])}function K0(S,D){for(var X=0;X<S.length;X++)D.writeSFixed64(S[X])}function Pc(S,D){return(S[D]|S[D+1]<<8|S[D+2]<<16)+16777216*S[D+3]}function fu(S,D,X){S[X]=D,S[X+1]=D>>>8,S[X+2]=D>>>16,S[X+3]=D>>>24}function ip(S,D){return(S[D]|S[D+1]<<8|S[D+2]<<16)+(S[D+3]<<24)}Ei.prototype={destroy:function(){this.buf=null},readFields:function(S,D,X){for(X=X||this.length;this.pos<X;){var ue=this.readVarint(),Ae=ue>>3,Pe=this.pos;this.type=7&ue,S(Ae,D,this),this.pos===Pe&&this.skip(ue)}return D},readMessage:function(S,D){return this.readFields(S,D,this.readVarint()+this.pos)},readFixed32:function(){var S=Pc(this.buf,this.pos);return this.pos+=4,S},readSFixed32:function(){var S=ip(this.buf,this.pos);return this.pos+=4,S},readFixed64:function(){var S=Pc(this.buf,this.pos)+Pc(this.buf,this.pos+4)*Ff;return this.pos+=8,S},readSFixed64:function(){var S=Pc(this.buf,this.pos)+ip(this.buf,this.pos+4)*Ff;return this.pos+=8,S},readFloat:function(){var S=Qh(this.buf,this.pos,!0,23,4);return this.pos+=4,S},readDouble:function(){var S=Qh(this.buf,this.pos,!0,52,8);return this.pos+=8,S},readVarint:function(S){var D,X,ue=this.buf;return D=127&(X=ue[this.pos++]),X<128?D:(D|=(127&(X=ue[this.pos++]))<<7,X<128?D:(D|=(127&(X=ue[this.pos++]))<<14,X<128?D:(D|=(127&(X=ue[this.pos++]))<<21,X<128?D:function(Ae,Pe,je){var $e,ut,wt=je.buf;if($e=(112&(ut=wt[je.pos++]))>>4,ut<128||($e|=(127&(ut=wt[je.pos++]))<<3,ut<128)||($e|=(127&(ut=wt[je.pos++]))<<10,ut<128)||($e|=(127&(ut=wt[je.pos++]))<<17,ut<128)||($e|=(127&(ut=wt[je.pos++]))<<24,ut<128)||($e|=(1&(ut=wt[je.pos++]))<<31,ut<128))return cu(Ae,$e,Pe);throw new Error("Expected varint not more than 10 bytes")}(D|=(15&(X=ue[this.pos]))<<28,S,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var S=this.readVarint();return S%2==1?(S+1)/-2:S/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var S=this.readVarint()+this.pos,D=this.pos;return this.pos=S,S-D>=12&&np?function(X,ue,Ae){return np.decode(X.subarray(ue,Ae))}(this.buf,D,S):function(X,ue,Ae){for(var Pe="",je=ue;je<Ae;){var $e,ut,wt,Mt=X[je],Nt=null,Wt=Mt>239?4:Mt>223?3:Mt>191?2:1;if(je+Wt>Ae)break;Wt===1?Mt<128&&(Nt=Mt):Wt===2?(192&($e=X[je+1]))==128&&(Nt=(31&Mt)<<6|63&$e)<=127&&(Nt=null):Wt===3?($e=X[je+1],ut=X[je+2],(192&$e)==128&&(192&ut)==128&&((Nt=(15&Mt)<<12|(63&$e)<<6|63&ut)<=2047||Nt>=55296&&Nt<=57343)&&(Nt=null)):Wt===4&&($e=X[je+1],ut=X[je+2],wt=X[je+3],(192&$e)==128&&(192&ut)==128&&(192&wt)==128&&((Nt=(15&Mt)<<18|(63&$e)<<12|(63&ut)<<6|63&wt)<=65535||Nt>=1114112)&&(Nt=null)),Nt===null?(Nt=65533,Wt=1):Nt>65535&&(Nt-=65536,Pe+=String.fromCharCode(Nt>>>10&1023|55296),Nt=56320|1023&Nt),Pe+=String.fromCharCode(Nt),je+=Wt}return Pe}(this.buf,D,S)},readBytes:function(){var S=this.readVarint()+this.pos,D=this.buf.subarray(this.pos,S);return this.pos=S,D},readPackedVarint:function(S,D){if(this.type!==Ei.Bytes)return S.push(this.readVarint(D));var X=ml(this);for(S=S||[];this.pos<X;)S.push(this.readVarint(D));return S},readPackedSVarint:function(S){if(this.type!==Ei.Bytes)return S.push(this.readSVarint());var D=ml(this);for(S=S||[];this.pos<D;)S.push(this.readSVarint());return S},readPackedBoolean:function(S){if(this.type!==Ei.Bytes)return S.push(this.readBoolean());var D=ml(this);for(S=S||[];this.pos<D;)S.push(this.readBoolean());return S},readPackedFloat:function(S){if(this.type!==Ei.Bytes)return S.push(this.readFloat());var D=ml(this);for(S=S||[];this.pos<D;)S.push(this.readFloat());return S},readPackedDouble:function(S){if(this.type!==Ei.Bytes)return S.push(this.readDouble());var D=ml(this);for(S=S||[];this.pos<D;)S.push(this.readDouble());return S},readPackedFixed32:function(S){if(this.type!==Ei.Bytes)return S.push(this.readFixed32());var D=ml(this);for(S=S||[];this.pos<D;)S.push(this.readFixed32());return S},readPackedSFixed32:function(S){if(this.type!==Ei.Bytes)return S.push(this.readSFixed32());var D=ml(this);for(S=S||[];this.pos<D;)S.push(this.readSFixed32());return S},readPackedFixed64:function(S){if(this.type!==Ei.Bytes)return S.push(this.readFixed64());var D=ml(this);for(S=S||[];this.pos<D;)S.push(this.readFixed64());return S},readPackedSFixed64:function(S){if(this.type!==Ei.Bytes)return S.push(this.readSFixed64());var D=ml(this);for(S=S||[];this.pos<D;)S.push(this.readSFixed64());return S},skip:function(S){var D=7&S;if(D===Ei.Varint)for(;this.buf[this.pos++]>127;);else if(D===Ei.Bytes)this.pos=this.readVarint()+this.pos;else if(D===Ei.Fixed32)this.pos+=4;else{if(D!==Ei.Fixed64)throw new Error("Unimplemented type: "+D);this.pos+=8}},writeTag:function(S,D){this.writeVarint(S<<3|D)},realloc:function(S){for(var D=this.length||16;D<this.pos+S;)D*=2;if(D!==this.length){var X=new Uint8Array(D);X.set(this.buf),this.buf=X,this.length=D}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(S){this.realloc(4),fu(this.buf,S,this.pos),this.pos+=4},writeSFixed32:function(S){this.realloc(4),fu(this.buf,S,this.pos),this.pos+=4},writeFixed64:function(S){this.realloc(8),fu(this.buf,-1&S,this.pos),fu(this.buf,Math.floor(S*tp),this.pos+4),this.pos+=8},writeSFixed64:function(S){this.realloc(8),fu(this.buf,-1&S,this.pos),fu(this.buf,Math.floor(S*tp),this.pos+4),this.pos+=8},writeVarint:function(S){(S=+S||0)>268435455||S<0?function(D,X){var ue,Ae;if(D>=0?(ue=D%4294967296|0,Ae=D/4294967296|0):(Ae=~(-D/4294967296),4294967295^(ue=~(-D%4294967296))?ue=ue+1|0:(ue=0,Ae=Ae+1|0)),D>=18446744073709552e3||D<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");X.realloc(10),function(Pe,je,$e){$e.buf[$e.pos++]=127&Pe|128,Pe>>>=7,$e.buf[$e.pos++]=127&Pe|128,Pe>>>=7,$e.buf[$e.pos++]=127&Pe|128,Pe>>>=7,$e.buf[$e.pos++]=127&Pe|128,Pe>>>=7,$e.buf[$e.pos]=127&Pe}(ue,0,X),function(Pe,je){var $e=(7&Pe)<<4;je.buf[je.pos++]|=$e|((Pe>>>=3)?128:0),Pe&&(je.buf[je.pos++]=127&Pe|((Pe>>>=7)?128:0),Pe&&(je.buf[je.pos++]=127&Pe|((Pe>>>=7)?128:0),Pe&&(je.buf[je.pos++]=127&Pe|((Pe>>>=7)?128:0),Pe&&(je.buf[je.pos++]=127&Pe|((Pe>>>=7)?128:0),Pe&&(je.buf[je.pos++]=127&Pe)))))}(Ae,X)}(S,this):(this.realloc(4),this.buf[this.pos++]=127&S|(S>127?128:0),S<=127||(this.buf[this.pos++]=127&(S>>>=7)|(S>127?128:0),S<=127||(this.buf[this.pos++]=127&(S>>>=7)|(S>127?128:0),S<=127||(this.buf[this.pos++]=S>>>7&127))))},writeSVarint:function(S){this.writeVarint(S<0?2*-S-1:2*S)},writeBoolean:function(S){this.writeVarint(!!S)},writeString:function(S){S=String(S),this.realloc(4*S.length),this.pos++;var D=this.pos;this.pos=function(ue,Ae,Pe){for(var je,$e,ut=0;ut<Ae.length;ut++){if((je=Ae.charCodeAt(ut))>55295&&je<57344){if(!$e){je>56319||ut+1===Ae.length?(ue[Pe++]=239,ue[Pe++]=191,ue[Pe++]=189):$e=je;continue}if(je<56320){ue[Pe++]=239,ue[Pe++]=191,ue[Pe++]=189,$e=je;continue}je=$e-55296<<10|je-56320|65536,$e=null}else $e&&(ue[Pe++]=239,ue[Pe++]=191,ue[Pe++]=189,$e=null);je<128?ue[Pe++]=je:(je<2048?ue[Pe++]=je>>6|192:(je<65536?ue[Pe++]=je>>12|224:(ue[Pe++]=je>>18|240,ue[Pe++]=je>>12&63|128),ue[Pe++]=je>>6&63|128),ue[Pe++]=63&je|128)}return Pe}(this.buf,S,this.pos);var X=this.pos-D;X>=128&&rp(D,X,this),this.pos=D-1,this.writeVarint(X),this.pos+=X},writeFloat:function(S){this.realloc(4),ep(this.buf,S,this.pos,!0,23,4),this.pos+=4},writeDouble:function(S){this.realloc(8),ep(this.buf,S,this.pos,!0,52,8),this.pos+=8},writeBytes:function(S){var D=S.length;this.writeVarint(D),this.realloc(D);for(var X=0;X<D;X++)this.buf[this.pos++]=S[X]},writeRawMessage:function(S,D){this.pos++;var X=this.pos;S(D,this);var ue=this.pos-X;ue>=128&&rp(X,ue,this),this.pos=X-1,this.writeVarint(ue),this.pos+=ue},writeMessage:function(S,D,X){this.writeTag(S,Ei.Bytes),this.writeRawMessage(D,X)},writePackedVarint:function(S,D){D.length&&this.writeMessage(S,q0,D)},writePackedSVarint:function(S,D){D.length&&this.writeMessage(S,H0,D)},writePackedBoolean:function(S,D){D.length&&this.writeMessage(S,Y0,D)},writePackedFloat:function(S,D){D.length&&this.writeMessage(S,G0,D)},writePackedDouble:function(S,D){D.length&&this.writeMessage(S,W0,D)},writePackedFixed32:function(S,D){D.length&&this.writeMessage(S,Z0,D)},writePackedSFixed32:function(S,D){D.length&&this.writeMessage(S,X0,D)},writePackedFixed64:function(S,D){D.length&&this.writeMessage(S,J0,D)},writePackedSFixed64:function(S,D){D.length&&this.writeMessage(S,K0,D)},writeBytesField:function(S,D){this.writeTag(S,Ei.Bytes),this.writeBytes(D)},writeFixed32Field:function(S,D){this.writeTag(S,Ei.Fixed32),this.writeFixed32(D)},writeSFixed32Field:function(S,D){this.writeTag(S,Ei.Fixed32),this.writeSFixed32(D)},writeFixed64Field:function(S,D){this.writeTag(S,Ei.Fixed64),this.writeFixed64(D)},writeSFixed64Field:function(S,D){this.writeTag(S,Ei.Fixed64),this.writeSFixed64(D)},writeVarintField:function(S,D){this.writeTag(S,Ei.Varint),this.writeVarint(D)},writeSVarintField:function(S,D){this.writeTag(S,Ei.Varint),this.writeSVarint(D)},writeStringField:function(S,D){this.writeTag(S,Ei.Bytes),this.writeString(D)},writeFloatField:function(S,D){this.writeTag(S,Ei.Fixed32),this.writeFloat(D)},writeDoubleField:function(S,D){this.writeTag(S,Ei.Fixed64),this.writeDouble(D)},writeBooleanField:function(S,D){this.writeVarintField(S,!!D)}};var Bf=3;function $0(S,D,X){S===1&&X.readMessage(Q0,D)}function Q0(S,D,X){if(S===3){var ue=X.readMessage(e1,{}),Ae=ue.id,Pe=ue.bitmap,je=ue.width,$e=ue.height,ut=ue.left,wt=ue.top,Mt=ue.advance;D.push({id:Ae,bitmap:new Xl({width:je+2*Bf,height:$e+2*Bf},Pe),metrics:{width:je,height:$e,left:ut,top:wt,advance:Mt}})}}function e1(S,D,X){S===1?D.id=X.readVarint():S===2?D.bitmap=X.readBytes():S===3?D.width=X.readVarint():S===4?D.height=X.readVarint():S===5?D.left=X.readSVarint():S===6?D.top=X.readSVarint():S===7&&(D.advance=X.readVarint())}var ap=Bf;function op(S){for(var D=0,X=0,ue=0,Ae=S;ue<Ae.length;ue+=1){var Pe=Ae[ue];D+=Pe.w*Pe.h,X=Math.max(X,Pe.w)}S.sort(function(fn,Mn){return Mn.h-fn.h});for(var je=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(D/.95)),X),h:1/0}],$e=0,ut=0,wt=0,Mt=S;wt<Mt.length;wt+=1)for(var Nt=Mt[wt],Wt=je.length-1;Wt>=0;Wt--){var Ut=je[Wt];if(!(Nt.w>Ut.w||Nt.h>Ut.h)){if(Nt.x=Ut.x,Nt.y=Ut.y,ut=Math.max(ut,Nt.y+Nt.h),$e=Math.max($e,Nt.x+Nt.w),Nt.w===Ut.w&&Nt.h===Ut.h){var ln=je.pop();Wt<je.length&&(je[Wt]=ln)}else Nt.h===Ut.h?(Ut.x+=Nt.w,Ut.w-=Nt.w):Nt.w===Ut.w?(Ut.y+=Nt.h,Ut.h-=Nt.h):(je.push({x:Ut.x+Nt.w,y:Ut.y,w:Ut.w-Nt.w,h:Nt.h}),Ut.y+=Nt.h,Ut.h-=Nt.h);break}}return{w:$e,h:ut,fill:D/($e*ut)||0}}var So=1,Oc=function(S,D){var X=D.pixelRatio,ue=D.version,Ae=D.stretchX,Pe=D.stretchY,je=D.content;this.paddedRect=S,this.pixelRatio=X,this.stretchX=Ae,this.stretchY=Pe,this.content=je,this.version=ue},Uu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Uu.tl.get=function(){return[this.paddedRect.x+So,this.paddedRect.y+So]},Uu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-So,this.paddedRect.y+this.paddedRect.h-So]},Uu.tlbr.get=function(){return this.tl.concat(this.br)},Uu.displaySize.get=function(){return[(this.paddedRect.w-2*So)/this.pixelRatio,(this.paddedRect.h-2*So)/this.pixelRatio]},Object.defineProperties(Oc.prototype,Uu);var Vu=function(S,D){var X={},ue={};this.haveRenderCallbacks=[];var Ae=[];this.addImages(S,X,Ae),this.addImages(D,ue,Ae);var Pe=op(Ae),je=Pe.w,$e=Pe.h,ut=new po({width:je||1,height:$e||1});for(var wt in S){var Mt=S[wt],Nt=X[wt].paddedRect;po.copy(Mt.data,ut,{x:0,y:0},{x:Nt.x+So,y:Nt.y+So},Mt.data)}for(var Wt in D){var Ut=D[Wt],ln=ue[Wt].paddedRect,fn=ln.x+So,Mn=ln.y+So,Tn=Ut.data.width,Nn=Ut.data.height;po.copy(Ut.data,ut,{x:0,y:0},{x:fn,y:Mn},Ut.data),po.copy(Ut.data,ut,{x:0,y:Nn-1},{x:fn,y:Mn-1},{width:Tn,height:1}),po.copy(Ut.data,ut,{x:0,y:0},{x:fn,y:Mn+Nn},{width:Tn,height:1}),po.copy(Ut.data,ut,{x:Tn-1,y:0},{x:fn-1,y:Mn},{width:1,height:Nn}),po.copy(Ut.data,ut,{x:0,y:0},{x:fn+Tn,y:Mn},{width:1,height:Nn})}this.image=ut,this.iconPositions=X,this.patternPositions=ue};Vu.prototype.addImages=function(S,D,X){for(var ue in S){var Ae=S[ue],Pe={x:0,y:0,w:Ae.data.width+2*So,h:Ae.data.height+2*So};X.push(Pe),D[ue]=new Oc(Pe,Ae),Ae.hasRenderCallback&&this.haveRenderCallbacks.push(ue)}},Vu.prototype.patchUpdatedImages=function(S,D){for(var X in S.dispatchRenderCallbacks(this.haveRenderCallbacks),S.updatedImages)this.patchUpdatedImage(this.iconPositions[X],S.getImage(X),D),this.patchUpdatedImage(this.patternPositions[X],S.getImage(X),D)},Vu.prototype.patchUpdatedImage=function(S,D,X){if(S&&D&&S.version!==D.version){S.version=D.version;var ue=S.tl,Ae=ue[0],Pe=ue[1];X.update(D.data,void 0,{x:Ae,y:Pe})}},Lr("ImagePosition",Oc),Lr("ImageAtlas",Vu);var Yo={horizontal:1,vertical:2,horizontalOnly:3},qu=-17,hu=function(){this.scale=1,this.fontStack="",this.imageName=null};hu.forText=function(S,D){var X=new hu;return X.scale=S||1,X.fontStack=D,X},hu.forImage=function(S){var D=new hu;return D.imageName=S,D};var Ua=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Ic(S,D,X,ue,Ae,Pe,je,$e,ut,wt,Mt,Nt,Wt,Ut,ln,fn){var Mn,Tn=Ua.fromFeature(S,Ae);Nt===Yo.vertical&&Tn.verticalizePunctuation();var Nn=ya.processBidirectionalText,Vn=ya.processStyledBidirectionalText;if(Nn&&Tn.sections.length===1){Mn=[];for(var Zn=0,Kn=Nn(Tn.toString(),Nf(Tn,wt,Pe,D,ue,Ut,ln));Zn<Kn.length;Zn+=1){var lr=Kn[Zn],br=new Ua;br.text=lr,br.sections=Tn.sections;for(var yr=0;yr<lr.length;yr++)br.sectionIndex.push(0);Mn.push(br)}}else if(Vn){Mn=[];for(var Ar=0,Sr=Vn(Tn.text,Tn.sectionIndex,Nf(Tn,wt,Pe,D,ue,Ut,ln));Ar<Sr.length;Ar+=1){var Vr=Sr[Ar],zr=new Ua;zr.text=Vr[0],zr.sectionIndex=Vr[1],zr.sections=Tn.sections,Mn.push(zr)}}else Mn=function(Ir,ei){for(var Gr=[],Ti=Ir.text,Nr=0,yi=0,Li=ei;yi<Li.length;yi+=1){var zi=Li[yi];Gr.push(Ir.substring(Nr,zi)),Nr=zi}return Nr<Ti.length&&Gr.push(Ir.substring(Nr,Ti.length)),Gr}(Tn,Nf(Tn,wt,Pe,D,ue,Ut,ln));var Ur=[],Fr={positionedLines:Ur,text:Tn.toString(),top:Mt[1],bottom:Mt[1],left:Mt[0],right:Mt[0],writingMode:Nt,iconsInText:!1,verticalizable:!1};return function(Ir,ei,Gr,Ti,Nr,yi,Li,zi,Di,ki,oa,ji){for(var ba=0,Ia=qu,Aa=0,eo=0,Ma=zi==="right"?1:zi==="left"?0:.5,ca=0,Sa=0,_a=Nr;Sa<_a.length;Sa+=1){var fa=_a[Sa];fa.trim();var Wr=fa.getMaxScale(),ri=(Wr-1)*ka,Yi={positionedGlyphs:[],lineOffset:0};Ir.positionedLines[ca]=Yi;var wi=Yi.positionedGlyphs,Vi=0;if(fa.length()){for(var Bi=0;Bi<fa.length();Bi++){var si=fa.getSection(Bi),Zi=fa.getSectionIndex(Bi),to=fa.getCharCode(Bi),Lo=0,Va=null,Ys=null,bl=null,wa=ka,Zs=!(Di===Yo.horizontal||!oa&&!To(to)||oa&&(zc[to]||qo(to)));if(si.imageName){var Es=Ti[si.imageName];if(!Es)continue;bl=si.imageName,Ir.iconsInText=Ir.iconsInText||!0,Ys=Es.paddedRect;var Ls=Es.displaySize;si.scale=si.scale*ka/ji,Va={width:Ls[0],height:Ls[1],left:So,top:-ap,advance:Zs?Ls[1]:Ls[0]},Lo=ri+(ka-Ls[1]*si.scale),wa=Va.advance;var Ql=Zs?Ls[0]*si.scale-ka*Wr:Ls[1]*si.scale-ka*Wr;Ql>0&&Ql>Vi&&(Vi=Ql)}else{var qc=Gr[si.fontStack],eu=qc&&qc[to];if(eu&&eu.rect)Ys=eu.rect,Va=eu.metrics;else{var Hc=ei[si.fontStack],Yu=Hc&&Hc[to];if(!Yu)continue;Va=Yu.metrics}Lo=(Wr-si.scale)*ka}Zs?(Ir.verticalizable=!0,wi.push({glyph:to,imageName:bl,x:ba,y:Ia+Lo,vertical:Zs,scale:si.scale,fontStack:si.fontStack,sectionIndex:Zi,metrics:Va,rect:Ys}),ba+=wa*si.scale+ki):(wi.push({glyph:to,imageName:bl,x:ba,y:Ia+Lo,vertical:Zs,scale:si.scale,fontStack:si.fontStack,sectionIndex:Zi,metrics:Va,rect:Ys}),ba+=Va.advance*si.scale+ki)}if(wi.length!==0){var Xf=ba-ki;Aa=Math.max(Xf,Aa),n1(wi,0,wi.length-1,Ma,Vi)}ba=0;var Gc=yi*Wr+Vi;Yi.lineOffset=Math.max(Vi,ri),Ia+=Gc,eo=Math.max(Gc,eo),++ca}else Ia+=yi,++ca}var wu=Ia-qu,Wc=jf(Li),Yc=Wc.horizontalAlign,Zu=Wc.verticalAlign;(function(Jf,Xu,tu,Tu,Zc,Xc,ku,Jc,Kc){var Ju=(Xu-tu)*Zc,Ku=0;Ku=Xc!==ku?-Jc*Tu-qu:(-Tu*Kc+.5)*ku;for(var nu=0,$u=Jf;nu<$u.length;nu+=1)for(var ru=0,Qu=$u[nu].positionedGlyphs;ru<Qu.length;ru+=1){var ec=Qu[ru];ec.x+=Ju,ec.y+=Ku}})(Ir.positionedLines,Ma,Yc,Zu,Aa,eo,yi,wu,Nr.length),Ir.top+=-Zu*wu,Ir.bottom=Ir.top+wu,Ir.left+=-Yc*Aa,Ir.right=Ir.left+Aa}(Fr,D,X,ue,Mn,je,$e,ut,Nt,wt,Wt,fn),!function(Ir){for(var ei=0,Gr=Ir;ei<Gr.length;ei+=1)if(Gr[ei].positionedGlyphs.length!==0)return!1;return!0}(Ur)&&Fr}Ua.fromFeature=function(S,D){for(var X=new Ua,ue=0;ue<S.sections.length;ue++){var Ae=S.sections[ue];Ae.image?X.addImageSection(Ae):X.addTextSection(Ae,D)}return X},Ua.prototype.length=function(){return this.text.length},Ua.prototype.getSection=function(S){return this.sections[this.sectionIndex[S]]},Ua.prototype.getSectionIndex=function(S){return this.sectionIndex[S]},Ua.prototype.getCharCode=function(S){return this.text.charCodeAt(S)},Ua.prototype.verticalizePunctuation=function(){this.text=function(S){for(var D="",X=0;X<S.length;X++){var ue=S.charCodeAt(X+1)||null,Ae=S.charCodeAt(X-1)||null;ue&&Gi(ue)&&!ju[S[X+1]]||Ae&&Gi(Ae)&&!ju[S[X-1]]||!ju[S[X]]?D+=S[X]:D+=ju[S[X]]}return D}(this.text)},Ua.prototype.trim=function(){for(var S=0,D=0;D<this.text.length&&zc[this.text.charCodeAt(D)];D++)S++;for(var X=this.text.length,ue=this.text.length-1;ue>=0&&ue>=S&&zc[this.text.charCodeAt(ue)];ue--)X--;this.text=this.text.substring(S,X),this.sectionIndex=this.sectionIndex.slice(S,X)},Ua.prototype.substring=function(S,D){var X=new Ua;return X.text=this.text.substring(S,D),X.sectionIndex=this.sectionIndex.slice(S,D),X.sections=this.sections,X},Ua.prototype.toString=function(){return this.text},Ua.prototype.getMaxScale=function(){var S=this;return this.sectionIndex.reduce(function(D,X){return Math.max(D,S.sections[X].scale)},0)},Ua.prototype.addTextSection=function(S,D){this.text+=S.text,this.sections.push(hu.forText(S.scale,S.fontStack||D));for(var X=this.sections.length-1,ue=0;ue<S.text.length;++ue)this.sectionIndex.push(X)},Ua.prototype.addImageSection=function(S){var D=S.image?S.image.name:"";if(D.length!==0){var X=this.getNextImageSectionCharCode();X?(this.text+=String.fromCharCode(X),this.sections.push(hu.forImage(D)),this.sectionIndex.push(this.sections.length-1)):L("Reached maximum number of images 6401")}else L("Can't add FormattedSection with an empty image.")},Ua.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var zc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Eo={};function sp(S,D,X,ue,Ae,Pe){if(D.imageName){var je=ue[D.imageName];return je?je.displaySize[0]*D.scale*ka/Pe+Ae:0}var $e=X[D.fontStack],ut=$e&&$e[S];return ut?ut.metrics.advance*D.scale+Ae:0}function lp(S,D,X,ue){var Ae=Math.pow(S-D,2);return ue?S<D?Ae/2:2*Ae:Ae+Math.abs(X)*X}function t1(S,D,X){var ue=0;return S===10&&(ue-=1e4),X&&(ue+=150),S!==40&&S!==65288||(ue+=50),D!==41&&D!==65289||(ue+=50),ue}function up(S,D,X,ue,Ae,Pe){for(var je=null,$e=lp(D,X,Ae,Pe),ut=0,wt=ue;ut<wt.length;ut+=1){var Mt=wt[ut],Nt=lp(D-Mt.x,X,Ae,Pe)+Mt.badness;Nt<=$e&&(je=Mt,$e=Nt)}return{index:S,x:D,priorBreak:je,badness:$e}}function cp(S){return S?cp(S.priorBreak).concat(S.index):[]}function Nf(S,D,X,ue,Ae,Pe,je){if(Pe!=="point")return[];if(!S)return[];for(var $e=[],ut=function(Mn,Tn,Nn,Vn,Zn,Kn){for(var lr=0,br=0;br<Mn.length();br++){var yr=Mn.getSection(br);lr+=sp(Mn.getCharCode(br),yr,Vn,Zn,Tn,Kn)}return lr/Math.max(1,Math.ceil(lr/Nn))}(S,D,X,ue,Ae,je),wt=S.text.indexOf("")>=0,Mt=0,Nt=0;Nt<S.length();Nt++){var Wt=S.getSection(Nt),Ut=S.getCharCode(Nt);if(zc[Ut]||(Mt+=sp(Ut,Wt,ue,Ae,D,je)),Nt<S.length()-1){var ln=!((fn=Ut)<11904||!(_r["Bopomofo Extended"](fn)||_r.Bopomofo(fn)||_r["CJK Compatibility Forms"](fn)||_r["CJK Compatibility Ideographs"](fn)||_r["CJK Compatibility"](fn)||_r["CJK Radicals Supplement"](fn)||_r["CJK Strokes"](fn)||_r["CJK Symbols and Punctuation"](fn)||_r["CJK Unified Ideographs Extension A"](fn)||_r["CJK Unified Ideographs"](fn)||_r["Enclosed CJK Letters and Months"](fn)||_r["Halfwidth and Fullwidth Forms"](fn)||_r.Hiragana(fn)||_r["Ideographic Description Characters"](fn)||_r["Kangxi Radicals"](fn)||_r["Katakana Phonetic Extensions"](fn)||_r.Katakana(fn)||_r["Vertical Forms"](fn)||_r["Yi Radicals"](fn)||_r["Yi Syllables"](fn)));(Eo[Ut]||ln||Wt.imageName)&&$e.push(up(Nt+1,Mt,ut,$e,t1(Ut,S.getCharCode(Nt+1),ln&&wt),!1))}}var fn;return cp(up(S.length(),Mt,ut,$e,0,!0))}function jf(S){var D=.5,X=.5;switch(S){case"right":case"top-right":case"bottom-right":D=1;break;case"left":case"top-left":case"bottom-left":D=0}switch(S){case"bottom":case"bottom-right":case"bottom-left":X=1;break;case"top":case"top-right":case"top-left":X=0}return{horizontalAlign:D,verticalAlign:X}}function n1(S,D,X,ue,Ae){if(ue||Ae)for(var Pe=S[X],je=Pe.metrics.advance*Pe.scale,$e=(S[X].x+je)*ue,ut=D;ut<=X;ut++)S[ut].x-=$e,S[ut].y+=Ae}function fp(S,D,X,ue,Ae,Pe){var je,$e=S.image;if($e.content){var ut=$e.content,wt=$e.pixelRatio||1;je=[ut[0]/wt,ut[1]/wt,$e.displaySize[0]-ut[2]/wt,$e.displaySize[1]-ut[3]/wt]}var Mt,Nt,Wt,Ut,ln=D.left*Pe,fn=D.right*Pe;X==="width"||X==="both"?(Ut=Ae[0]+ln-ue[3],Nt=Ae[0]+fn+ue[1]):Nt=(Ut=Ae[0]+(ln+fn-$e.displaySize[0])/2)+$e.displaySize[0];var Mn=D.top*Pe,Tn=D.bottom*Pe;return X==="height"||X==="both"?(Mt=Ae[1]+Mn-ue[0],Wt=Ae[1]+Tn+ue[2]):Wt=(Mt=Ae[1]+(Mn+Tn-$e.displaySize[1])/2)+$e.displaySize[1],{image:$e,top:Mt,right:Nt,bottom:Wt,left:Ut,collisionPadding:je}}Eo[10]=!0,Eo[32]=!0,Eo[38]=!0,Eo[40]=!0,Eo[41]=!0,Eo[43]=!0,Eo[45]=!0,Eo[47]=!0,Eo[173]=!0,Eo[183]=!0,Eo[8203]=!0,Eo[8208]=!0,Eo[8211]=!0,Eo[8231]=!0;var pu=function(S){function D(X,ue,Ae,Pe){S.call(this,X,ue),this.angle=Ae,Pe!==void 0&&(this.segment=Pe)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.clone=function(){return new D(this.x,this.y,this.angle,this.segment)},D}(n);Lr("Anchor",pu);var Ws=128;function Uf(S,D){var X=D.expression;if(X.kind==="constant")return{kind:"constant",layoutSize:X.evaluate(new Xr(S+1))};if(X.kind==="source")return{kind:"source"};for(var ue=X.zoomStops,Ae=X.interpolationType,Pe=0;Pe<ue.length&&ue[Pe]<=S;)Pe++;for(var je=Pe=Math.max(0,Pe-1);je<ue.length&&ue[je]<S+1;)je++;je=Math.min(ue.length-1,je);var $e=ue[Pe],ut=ue[je];return X.kind==="composite"?{kind:"composite",minZoom:$e,maxZoom:ut,interpolationType:Ae}:{kind:"camera",minZoom:$e,maxZoom:ut,minSize:X.evaluate(new Xr($e)),maxSize:X.evaluate(new Xr(ut)),interpolationType:Ae}}function hp(S,D,X){var ue=D.uSize,Ae=D.uSizeT,Pe=X.lowerSize,je=X.upperSize;return S.kind==="source"?Pe/Ws:S.kind==="composite"?jr(Pe/Ws,je/Ws,Ae):ue}function pp(S,D){var X=0,ue=0;if(S.kind==="constant")ue=S.layoutSize;else if(S.kind!=="source"){var Ae=S.interpolationType,Pe=S.minZoom,je=S.maxZoom,$e=Ae?c(qi.interpolationFactor(Ae,D,Pe,je),0,1):0;S.kind==="camera"?ue=jr(S.minSize,S.maxSize,$e):X=$e}return{uSizeT:X,uSize:ue}}var r1=Object.freeze({__proto__:null,getSizeData:Uf,evaluateSizeForFeature:hp,evaluateSizeForZoom:pp,SIZE_PACK_FACTOR:Ws});function dp(S,D,X,ue,Ae){if(D.segment===void 0)return!0;for(var Pe=D,je=D.segment+1,$e=0;$e>-X/2;){if(--je<0)return!1;$e-=S[je].dist(Pe),Pe=S[je]}$e+=S[je].dist(S[je+1]),je++;for(var ut=[],wt=0;$e<X/2;){var Mt=S[je-1],Nt=S[je],Wt=S[je+1];if(!Wt)return!1;var Ut=Mt.angleTo(Nt)-Nt.angleTo(Wt);for(Ut=Math.abs((Ut+3*Math.PI)%(2*Math.PI)-Math.PI),ut.push({distance:$e,angleDelta:Ut}),wt+=Ut;$e-ut[0].distance>ue;)wt-=ut.shift().angleDelta;if(wt>Ae)return!1;je++,$e+=Nt.dist(Wt)}return!0}function gp(S){for(var D=0,X=0;X<S.length-1;X++)D+=S[X].dist(S[X+1]);return D}function vp(S,D,X){return S?.6*D*X:0}function mp(S,D){return Math.max(S?S.right-S.left:0,D?D.right-D.left:0)}function i1(S,D,X,ue,Ae,Pe){for(var je=vp(X,Ae,Pe),$e=mp(X,ue)*Pe,ut=0,wt=gp(S)/2,Mt=0;Mt<S.length-1;Mt++){var Nt=S[Mt],Wt=S[Mt+1],Ut=Nt.dist(Wt);if(ut+Ut>wt){var ln=(wt-ut)/Ut,fn=jr(Nt.x,Wt.x,ln),Mn=jr(Nt.y,Wt.y,ln),Tn=new pu(fn,Mn,Wt.angleTo(Nt),Mt);return Tn._round(),!je||dp(S,Tn,$e,je,D)?Tn:void 0}ut+=Ut}}function a1(S,D,X,ue,Ae,Pe,je,$e,ut){var wt=vp(ue,Pe,je),Mt=mp(ue,Ae),Nt=Mt*je,Wt=S[0].x===0||S[0].x===ut||S[0].y===0||S[0].y===ut;return D-Nt<D/4&&(D=Nt+D/4),yp(S,Wt?D/2*$e%D:(Mt/2+2*Pe)*je*$e%D,D,wt,X,Nt,Wt,!1,ut)}function yp(S,D,X,ue,Ae,Pe,je,$e,ut){for(var wt=Pe/2,Mt=gp(S),Nt=0,Wt=D-X,Ut=[],ln=0;ln<S.length-1;ln++){for(var fn=S[ln],Mn=S[ln+1],Tn=fn.dist(Mn),Nn=Mn.angleTo(fn);Wt+X<Nt+Tn;){var Vn=((Wt+=X)-Nt)/Tn,Zn=jr(fn.x,Mn.x,Vn),Kn=jr(fn.y,Mn.y,Vn);if(Zn>=0&&Zn<ut&&Kn>=0&&Kn<ut&&Wt-wt>=0&&Wt+wt<=Mt){var lr=new pu(Zn,Kn,Nn,ln);lr._round(),ue&&!dp(S,lr,Pe,ue,Ae)||Ut.push(lr)}}Nt+=Tn}return $e||Ut.length||je||(Ut=yp(S,Nt/2,X,ue,Ae,Pe,je,!0,ut)),Ut}function xp(S,D,X,ue,Ae){for(var Pe=[],je=0;je<S.length;je++)for(var $e=S[je],ut=void 0,wt=0;wt<$e.length-1;wt++){var Mt=$e[wt],Nt=$e[wt+1];Mt.x<D&&Nt.x<D||(Mt.x<D?Mt=new n(D,Mt.y+(Nt.y-Mt.y)*((D-Mt.x)/(Nt.x-Mt.x)))._round():Nt.x<D&&(Nt=new n(D,Mt.y+(Nt.y-Mt.y)*((D-Mt.x)/(Nt.x-Mt.x)))._round()),Mt.y<X&&Nt.y<X||(Mt.y<X?Mt=new n(Mt.x+(Nt.x-Mt.x)*((X-Mt.y)/(Nt.y-Mt.y)),X)._round():Nt.y<X&&(Nt=new n(Mt.x+(Nt.x-Mt.x)*((X-Mt.y)/(Nt.y-Mt.y)),X)._round()),Mt.x>=ue&&Nt.x>=ue||(Mt.x>=ue?Mt=new n(ue,Mt.y+(Nt.y-Mt.y)*((ue-Mt.x)/(Nt.x-Mt.x)))._round():Nt.x>=ue&&(Nt=new n(ue,Mt.y+(Nt.y-Mt.y)*((ue-Mt.x)/(Nt.x-Mt.x)))._round()),Mt.y>=Ae&&Nt.y>=Ae||(Mt.y>=Ae?Mt=new n(Mt.x+(Nt.x-Mt.x)*((Ae-Mt.y)/(Nt.y-Mt.y)),Ae)._round():Nt.y>=Ae&&(Nt=new n(Mt.x+(Nt.x-Mt.x)*((Ae-Mt.y)/(Nt.y-Mt.y)),Ae)._round()),ut&&Mt.equals(ut[ut.length-1])||(ut=[Mt],Pe.push(ut)),ut.push(Nt)))))}return Pe}var du=So;function bp(S,D,X,ue){var Ae=[],Pe=S.image,je=Pe.pixelRatio,$e=Pe.paddedRect.w-2*du,ut=Pe.paddedRect.h-2*du,wt=S.right-S.left,Mt=S.bottom-S.top,Nt=Pe.stretchX||[[0,$e]],Wt=Pe.stretchY||[[0,ut]],Ut=function(yi,Li){return yi+Li[1]-Li[0]},ln=Nt.reduce(Ut,0),fn=Wt.reduce(Ut,0),Mn=$e-ln,Tn=ut-fn,Nn=0,Vn=ln,Zn=0,Kn=fn,lr=0,br=Mn,yr=0,Ar=Tn;if(Pe.content&&ue){var Sr=Pe.content;Nn=Dc(Nt,0,Sr[0]),Zn=Dc(Wt,0,Sr[1]),Vn=Dc(Nt,Sr[0],Sr[2]),Kn=Dc(Wt,Sr[1],Sr[3]),lr=Sr[0]-Nn,yr=Sr[1]-Zn,br=Sr[2]-Sr[0]-Vn,Ar=Sr[3]-Sr[1]-Kn}var Vr=function(yi,Li,zi,Di){var ki=Rc(yi.stretch-Nn,Vn,wt,S.left),oa=Fc(yi.fixed-lr,br,yi.stretch,ln),ji=Rc(Li.stretch-Zn,Kn,Mt,S.top),ba=Fc(Li.fixed-yr,Ar,Li.stretch,fn),Ia=Rc(zi.stretch-Nn,Vn,wt,S.left),Aa=Fc(zi.fixed-lr,br,zi.stretch,ln),eo=Rc(Di.stretch-Zn,Kn,Mt,S.top),Ma=Fc(Di.fixed-yr,Ar,Di.stretch,fn),ca=new n(ki,ji),Sa=new n(Ia,ji),_a=new n(Ia,eo),fa=new n(ki,eo),Wr=new n(oa/je,ba/je),ri=new n(Aa/je,Ma/je),Yi=D*Math.PI/180;if(Yi){var wi=Math.sin(Yi),Vi=Math.cos(Yi),Bi=[Vi,-wi,wi,Vi];ca._matMult(Bi),Sa._matMult(Bi),fa._matMult(Bi),_a._matMult(Bi)}var si=yi.stretch+yi.fixed,Zi=zi.stretch+zi.fixed,to=Li.stretch+Li.fixed,Lo=Di.stretch+Di.fixed;return{tl:ca,tr:Sa,bl:fa,br:_a,tex:{x:Pe.paddedRect.x+du+si,y:Pe.paddedRect.y+du+to,w:Zi-si,h:Lo-to},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Wr,pixelOffsetBR:ri,minFontScaleX:br/je/wt,minFontScaleY:Ar/je/Mt,isSDF:X}};if(ue&&(Pe.stretchX||Pe.stretchY))for(var zr=_p(Nt,Mn,ln),Ur=_p(Wt,Tn,fn),Fr=0;Fr<zr.length-1;Fr++)for(var Ir=zr[Fr],ei=zr[Fr+1],Gr=0;Gr<Ur.length-1;Gr++){var Ti=Ur[Gr],Nr=Ur[Gr+1];Ae.push(Vr(Ir,Ti,ei,Nr))}else Ae.push(Vr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:$e+1},{fixed:0,stretch:ut+1}));return Ae}function Dc(S,D,X){for(var ue=0,Ae=0,Pe=S;Ae<Pe.length;Ae+=1){var je=Pe[Ae];ue+=Math.max(D,Math.min(X,je[1]))-Math.max(D,Math.min(X,je[0]))}return ue}function _p(S,D,X){for(var ue=[{fixed:-du,stretch:0}],Ae=0,Pe=S;Ae<Pe.length;Ae+=1){var je=Pe[Ae],$e=je[0],ut=je[1],wt=ue[ue.length-1];ue.push({fixed:$e-wt.stretch,stretch:wt.stretch}),ue.push({fixed:$e-wt.stretch,stretch:wt.stretch+(ut-$e)})}return ue.push({fixed:D+du,stretch:X}),ue}function Rc(S,D,X,ue){return S/D*X+ue}function Fc(S,D,X,ue){return S-D*X/ue}var Bc=function(S,D,X,ue,Ae,Pe,je,$e,ut,wt){if(this.boxStartIndex=S.length,ut){var Mt=Pe.top,Nt=Pe.bottom,Wt=Pe.collisionPadding;Wt&&(Mt-=Wt[1],Nt+=Wt[3]);var Ut=Nt-Mt;Ut>0&&(Ut=Math.max(10,Ut),this.circleDiameter=Ut)}else{var ln=Pe.top*je-$e,fn=Pe.bottom*je+$e,Mn=Pe.left*je-$e,Tn=Pe.right*je+$e,Nn=Pe.collisionPadding;if(Nn&&(Mn-=Nn[0]*je,ln-=Nn[1]*je,Tn+=Nn[2]*je,fn+=Nn[3]*je),wt){var Vn=new n(Mn,ln),Zn=new n(Tn,ln),Kn=new n(Mn,fn),lr=new n(Tn,fn),br=wt*Math.PI/180;Vn._rotate(br),Zn._rotate(br),Kn._rotate(br),lr._rotate(br),Mn=Math.min(Vn.x,Zn.x,Kn.x,lr.x),Tn=Math.max(Vn.x,Zn.x,Kn.x,lr.x),ln=Math.min(Vn.y,Zn.y,Kn.y,lr.y),fn=Math.max(Vn.y,Zn.y,Kn.y,lr.y)}S.emplaceBack(D.x,D.y,Mn,ln,Tn,fn,X,ue,Ae)}this.boxEndIndex=S.length},gu=function(S,D){if(S===void 0&&(S=[]),D===void 0&&(D=o1),this.data=S,this.length=this.data.length,this.compare=D,this.length>0)for(var X=(this.length>>1)-1;X>=0;X--)this._down(X)};function o1(S,D){return S<D?-1:S>D?1:0}function s1(S,D,X){D===void 0&&(D=1),X===void 0&&(X=!1);for(var ue=1/0,Ae=1/0,Pe=-1/0,je=-1/0,$e=S[0],ut=0;ut<$e.length;ut++){var wt=$e[ut];(!ut||wt.x<ue)&&(ue=wt.x),(!ut||wt.y<Ae)&&(Ae=wt.y),(!ut||wt.x>Pe)&&(Pe=wt.x),(!ut||wt.y>je)&&(je=wt.y)}var Mt=Pe-ue,Nt=je-Ae,Wt=Math.min(Mt,Nt),Ut=Wt/2,ln=new gu([],l1);if(Wt===0)return new n(ue,Ae);for(var fn=ue;fn<Pe;fn+=Wt)for(var Mn=Ae;Mn<je;Mn+=Wt)ln.push(new vu(fn+Ut,Mn+Ut,Ut,S));for(var Tn=function(Zn){for(var Kn=0,lr=0,br=0,yr=Zn[0],Ar=0,Sr=yr.length,Vr=Sr-1;Ar<Sr;Vr=Ar++){var zr=yr[Ar],Ur=yr[Vr],Fr=zr.x*Ur.y-Ur.x*zr.y;lr+=(zr.x+Ur.x)*Fr,br+=(zr.y+Ur.y)*Fr,Kn+=3*Fr}return new vu(lr/Kn,br/Kn,0,Zn)}(S),Nn=ln.length;ln.length;){var Vn=ln.pop();(Vn.d>Tn.d||!Tn.d)&&(Tn=Vn,X&&console.log("found best %d after %d probes",Math.round(1e4*Vn.d)/1e4,Nn)),Vn.max-Tn.d<=D||(Ut=Vn.h/2,ln.push(new vu(Vn.p.x-Ut,Vn.p.y-Ut,Ut,S)),ln.push(new vu(Vn.p.x+Ut,Vn.p.y-Ut,Ut,S)),ln.push(new vu(Vn.p.x-Ut,Vn.p.y+Ut,Ut,S)),ln.push(new vu(Vn.p.x+Ut,Vn.p.y+Ut,Ut,S)),Nn+=4)}return X&&(console.log("num probes: "+Nn),console.log("best distance: "+Tn.d)),Tn.p}function l1(S,D){return D.max-S.max}function vu(S,D,X,ue){this.p=new n(S,D),this.h=X,this.d=function(Ae,Pe){for(var je=!1,$e=1/0,ut=0;ut<Pe.length;ut++)for(var wt=Pe[ut],Mt=0,Nt=wt.length,Wt=Nt-1;Mt<Nt;Wt=Mt++){var Ut=wt[Mt],ln=wt[Wt];Ut.y>Ae.y!=ln.y>Ae.y&&Ae.x<(ln.x-Ut.x)*(Ae.y-Ut.y)/(ln.y-Ut.y)+Ut.x&&(je=!je),$e=Math.min($e,bc(Ae,Ut,ln))}return(je?1:-1)*Math.sqrt($e)}(this.p,ue),this.max=this.d+this.h*Math.SQRT2}gu.prototype.push=function(S){this.data.push(S),this.length++,this._up(this.length-1)},gu.prototype.pop=function(){if(this.length!==0){var S=this.data[0],D=this.data.pop();return this.length--,this.length>0&&(this.data[0]=D,this._down(0)),S}},gu.prototype.peek=function(){return this.data[0]},gu.prototype._up=function(S){for(var D=this.data,X=this.compare,ue=D[S];S>0;){var Ae=S-1>>1,Pe=D[Ae];if(X(ue,Pe)>=0)break;D[S]=Pe,S=Ae}D[S]=ue},gu.prototype._down=function(S){for(var D=this.data,X=this.compare,ue=this.length>>1,Ae=D[S];S<ue;){var Pe=1+(S<<1),je=D[Pe],$e=Pe+1;if($e<this.length&&X(D[$e],je)<0&&(Pe=$e,je=D[$e]),X(je,Ae)>=0)break;D[S]=je,S=Pe}D[S]=Ae};var mu=7,Vf=Number.POSITIVE_INFINITY;function wp(S,D){return D[1]!==Vf?function(X,ue,Ae){var Pe=0,je=0;switch(ue=Math.abs(ue),Ae=Math.abs(Ae),X){case"top-right":case"top-left":case"top":je=Ae-mu;break;case"bottom-right":case"bottom-left":case"bottom":je=-Ae+mu}switch(X){case"top-right":case"bottom-right":case"right":Pe=-ue;break;case"top-left":case"bottom-left":case"left":Pe=ue}return[Pe,je]}(S,D[0],D[1]):function(X,ue){var Ae=0,Pe=0;ue<0&&(ue=0);var je=ue/Math.sqrt(2);switch(X){case"top-right":case"top-left":Pe=je-mu;break;case"bottom-right":case"bottom-left":Pe=-je+mu;break;case"bottom":Pe=-ue+mu;break;case"top":Pe=ue-mu}switch(X){case"top-right":case"bottom-right":Ae=-je;break;case"top-left":case"bottom-left":Ae=je;break;case"left":Ae=ue;break;case"right":Ae=-ue}return[Ae,Pe]}(S,D[0])}function qf(S){switch(S){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var Hu=255,Il=Hu*Ws;function Tp(S,D,X,ue,Ae,Pe,je,$e,ut,wt,Mt,Nt,Wt,Ut,ln){var fn=function(Zn,Kn,lr,br,yr,Ar,Sr,Vr){for(var zr=br.layout.get("text-rotate").evaluate(Ar,{})*Math.PI/180,Ur=[],Fr=0,Ir=Kn.positionedLines;Fr<Ir.length;Fr+=1)for(var ei=Ir[Fr],Gr=0,Ti=ei.positionedGlyphs;Gr<Ti.length;Gr+=1){var Nr=Ti[Gr];if(Nr.rect){var yi=Nr.rect||{},Li=ap+1,zi=!0,Di=1,ki=0,oa=(yr||Vr)&&Nr.vertical,ji=Nr.metrics.advance*Nr.scale/2;if(Vr&&Kn.verticalizable){var ba=(Nr.scale-1)*ka,Ia=(ka-Nr.metrics.width*Nr.scale)/2;ki=ei.lineOffset/2-(Nr.imageName?-Ia:ba)}if(Nr.imageName){var Aa=Sr[Nr.imageName];zi=Aa.sdf,Di=Aa.pixelRatio,Li=So/Di}var eo=yr?[Nr.x+ji,Nr.y]:[0,0],Ma=yr?[0,0]:[Nr.x+ji+lr[0],Nr.y+lr[1]-ki],ca=[0,0];oa&&(ca=Ma,Ma=[0,0]);var Sa=(Nr.metrics.left-Li)*Nr.scale-ji+Ma[0],_a=(-Nr.metrics.top-Li)*Nr.scale+Ma[1],fa=Sa+yi.w*Nr.scale/Di,Wr=_a+yi.h*Nr.scale/Di,ri=new n(Sa,_a),Yi=new n(fa,_a),wi=new n(Sa,Wr),Vi=new n(fa,Wr);if(oa){var Bi=new n(-ji,ji-qu),si=-Math.PI/2,Zi=ka/2-ji,to=Nr.imageName?Zi:0,Lo=new n(5-qu-Zi,-to),Va=new(Function.prototype.bind.apply(n,[null].concat(ca)));ri._rotateAround(si,Bi)._add(Lo)._add(Va),Yi._rotateAround(si,Bi)._add(Lo)._add(Va),wi._rotateAround(si,Bi)._add(Lo)._add(Va),Vi._rotateAround(si,Bi)._add(Lo)._add(Va)}if(zr){var Ys=Math.sin(zr),bl=Math.cos(zr),wa=[bl,-Ys,Ys,bl];ri._matMult(wa),Yi._matMult(wa),wi._matMult(wa),Vi._matMult(wa)}var Zs=new n(0,0),Es=new n(0,0);Ur.push({tl:ri,tr:Yi,bl:wi,br:Vi,tex:yi,writingMode:Kn.writingMode,glyphOffset:eo,sectionIndex:Nr.sectionIndex,isSDF:zi,pixelOffsetTL:Zs,pixelOffsetBR:Es,minFontScaleX:0,minFontScaleY:0})}}return Ur}(0,X,$e,Ae,Pe,je,ue,S.allowVerticalPlacement),Mn=S.textSizeData,Tn=null;Mn.kind==="source"?(Tn=[Ws*Ae.layout.get("text-size").evaluate(je,{})])[0]>Il&&L(S.layerIds[0]+': Value for "text-size" is >= '+Hu+'. Reduce your "text-size".'):Mn.kind==="composite"&&((Tn=[Ws*Ut.compositeTextSizes[0].evaluate(je,{},ln),Ws*Ut.compositeTextSizes[1].evaluate(je,{},ln)])[0]>Il||Tn[1]>Il)&&L(S.layerIds[0]+': Value for "text-size" is >= '+Hu+'. Reduce your "text-size".'),S.addSymbols(S.text,fn,Tn,$e,Pe,je,wt,D,ut.lineStartIndex,ut.lineLength,Wt,ln);for(var Nn=0,Vn=Mt;Nn<Vn.length;Nn+=1)Nt[Vn[Nn]]=S.text.placedSymbolArray.length-1;return 4*fn.length}function kp(S){for(var D in S)return S[D];return null}function u1(S,D,X,ue){var Ae=S.compareText;if(D in Ae){for(var Pe=Ae[D],je=Pe.length-1;je>=0;je--)if(ue.dist(Pe[je])<X)return!0}else Ae[D]=[];return Ae[D].push(ue),!1}var c1=uu.VectorTileFeature.types,f1=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Nc(S,D,X,ue,Ae,Pe,je,$e,ut,wt,Mt,Nt,Wt){var Ut=$e?Math.min(Il,Math.round($e[0])):0,ln=$e?Math.min(Il,Math.round($e[1])):0;S.emplaceBack(D,X,Math.round(32*ue),Math.round(32*Ae),Pe,je,(Ut<<1)+(ut?1:0),ln,16*wt,16*Mt,256*Nt,256*Wt)}function Hf(S,D,X){S.emplaceBack(D.x,D.y,X),S.emplaceBack(D.x,D.y,X),S.emplaceBack(D.x,D.y,X),S.emplaceBack(D.x,D.y,X)}function h1(S){for(var D=0,X=S.sections;D<X.length;D+=1)if(la(X[D].text))return!0;return!1}var yu=function(S){this.layoutVertexArray=new W,this.indexArray=new ye,this.programConfigurations=S,this.segments=new Yn,this.dynamicLayoutVertexArray=new G,this.opacityVertexArray=new C,this.placedSymbolArray=new zt};yu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},yu.prototype.upload=function(S,D,X,ue){this.isEmpty()||(X&&(this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,B0.members),this.indexBuffer=S.createIndexBuffer(this.indexArray,D),this.dynamicLayoutVertexBuffer=S.createVertexBuffer(this.dynamicLayoutVertexArray,N0.members,!0),this.opacityVertexBuffer=S.createVertexBuffer(this.opacityVertexArray,f1,!0),this.opacityVertexBuffer.itemSize=1),(X||ue)&&this.programConfigurations.upload(S))},yu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Lr("SymbolBuffers",yu);var Gu=function(S,D,X){this.layoutVertexArray=new S,this.layoutAttributes=D,this.indexArray=new X,this.segments=new Yn,this.collisionVertexArray=new fe};Gu.prototype.upload=function(S){this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=S.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=S.createVertexBuffer(this.collisionVertexArray,j0.members,!0)},Gu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Lr("CollisionBuffers",Gu);var mi=function(S){this.collisionBoxArray=S.collisionBoxArray,this.zoom=S.zoom,this.overscaling=S.overscaling,this.layers=S.layers,this.layerIds=this.layers.map(function(je){return je.id}),this.index=S.index,this.pixelRatio=S.pixelRatio,this.sourceLayerIndex=S.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Mf([]),this.placementViewportMatrix=Mf([]);var D=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Uf(this.zoom,D["text-size"]),this.iconSizeData=Uf(this.zoom,D["icon-size"]);var X=this.layers[0].layout,ue=X.get("symbol-sort-key"),Ae=X.get("symbol-z-order");this.canOverlap=X.get("text-allow-overlap")||X.get("icon-allow-overlap")||X.get("text-ignore-placement")||X.get("icon-ignore-placement"),this.sortFeaturesByKey=Ae!=="viewport-y"&&ue.constantOr(1)!==void 0;var Pe=Ae==="viewport-y"||Ae==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Pe&&this.canOverlap,X.get("symbol-placement")==="point"&&(this.writingModes=X.get("text-writing-mode").map(function(je){return Yo[je]})),this.stateDependentLayerIds=this.layers.filter(function(je){return je.isStateDependent()}).map(function(je){return je.id}),this.sourceID=S.sourceID};mi.prototype.createArrays=function(){this.text=new yu(new Ui(this.layers,this.zoom,function(S){return/^text/.test(S)})),this.icon=new yu(new Ui(this.layers,this.zoom,function(S){return/^icon/.test(S)})),this.glyphOffsetArray=new Vt,this.lineVertexArray=new vn,this.symbolInstances=new Zt},mi.prototype.calculateGlyphDependencies=function(S,D,X,ue,Ae){for(var Pe=0;Pe<S.length;Pe++)if(D[S.charCodeAt(Pe)]=!0,(X||ue)&&Ae){var je=ju[S.charAt(Pe)];je&&(D[je.charCodeAt(0)]=!0)}},mi.prototype.populate=function(S,D,X){var ue=this.layers[0],Ae=ue.layout,Pe=Ae.get("text-font"),je=Ae.get("text-field"),$e=Ae.get("icon-image"),ut=(je.value.kind!=="constant"||je.value.value instanceof Un&&!je.value.value.isEmpty()||je.value.value.toString().length>0)&&(Pe.value.kind!=="constant"||Pe.value.value.length>0),wt=$e.value.kind!=="constant"||!!$e.value.value||Object.keys($e.parameters).length>0,Mt=Ae.get("symbol-sort-key");if(this.features=[],ut||wt){for(var Nt=D.iconDependencies,Wt=D.glyphDependencies,Ut=D.availableImages,ln=new Xr(this.zoom),fn=0,Mn=S;fn<Mn.length;fn+=1){var Tn=Mn[fn],Nn=Tn.feature,Vn=Tn.id,Zn=Tn.index,Kn=Tn.sourceLayerIndex,lr=ue._featureFilter.needGeometry,br=Si(Nn,lr);if(ue._featureFilter.filter(ln,br,X)){lr||(br.geometry=Mo(Nn));var yr=void 0;if(ut){var Ar=ue.getValueAndResolveTokens("text-field",br,X,Ut),Sr=Un.factory(Ar);h1(Sr)&&(this.hasRTLText=!0),(!this.hasRTLText||ws()==="unavailable"||this.hasRTLText&&ya.isParsed())&&(yr=V0(Sr,ue,br))}var Vr=void 0;if(wt){var zr=ue.getValueAndResolveTokens("icon-image",br,X,Ut);Vr=zr instanceof ar?zr:ar.fromString(zr)}if(yr||Vr){var Ur=this.sortFeaturesByKey?Mt.evaluate(br,{},X):void 0,Fr={id:Vn,text:yr,icon:Vr,index:Zn,sourceLayerIndex:Kn,geometry:br.geometry,properties:Nn.properties,type:c1[Nn.type],sortKey:Ur};if(this.features.push(Fr),Vr&&(Nt[Vr.name]=!0),yr){var Ir=Pe.evaluate(br,{},X).join(","),ei=Ae.get("text-rotation-alignment")==="map"&&Ae.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Yo.vertical)>=0;for(var Gr=0,Ti=yr.sections;Gr<Ti.length;Gr+=1){var Nr=Ti[Gr];if(Nr.image)Nt[Nr.image.name]=!0;else{var yi=Us(yr.toString()),Li=Nr.fontStack||Ir,zi=Wt[Li]=Wt[Li]||{};this.calculateGlyphDependencies(Nr.text,zi,ei,this.allowVerticalPlacement,yi)}}}}}}Ae.get("symbol-placement")==="line"&&(this.features=function(Di){var ki={},oa={},ji=[],ba=0;function Ia(Vi){ji.push(Di[Vi]),ba++}function Aa(Vi,Bi,si){var Zi=oa[Vi];return delete oa[Vi],oa[Bi]=Zi,ji[Zi].geometry[0].pop(),ji[Zi].geometry[0]=ji[Zi].geometry[0].concat(si[0]),Zi}function eo(Vi,Bi,si){var Zi=ki[Bi];return delete ki[Bi],ki[Vi]=Zi,ji[Zi].geometry[0].shift(),ji[Zi].geometry[0]=si[0].concat(ji[Zi].geometry[0]),Zi}function Ma(Vi,Bi,si){var Zi=si?Bi[0][Bi[0].length-1]:Bi[0][0];return Vi+":"+Zi.x+":"+Zi.y}for(var ca=0;ca<Di.length;ca++){var Sa=Di[ca],_a=Sa.geometry,fa=Sa.text?Sa.text.toString():null;if(fa){var Wr=Ma(fa,_a),ri=Ma(fa,_a,!0);if(Wr in oa&&ri in ki&&oa[Wr]!==ki[ri]){var Yi=eo(Wr,ri,_a),wi=Aa(Wr,ri,ji[Yi].geometry);delete ki[Wr],delete oa[ri],oa[Ma(fa,ji[wi].geometry,!0)]=wi,ji[Yi].geometry=null}else Wr in oa?Aa(Wr,ri,_a):ri in ki?eo(Wr,ri,_a):(Ia(ca),ki[Wr]=ba-1,oa[ri]=ba-1)}else Ia(ca)}return ji.filter(function(Vi){return Vi.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Di,ki){return Di.sortKey-ki.sortKey})}},mi.prototype.update=function(S,D,X){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(S,D,this.layers,X),this.icon.programConfigurations.updatePaintArrays(S,D,this.layers,X))},mi.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},mi.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},mi.prototype.upload=function(S){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(S),this.iconCollisionBox.upload(S)),this.text.upload(S,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(S,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},mi.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},mi.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},mi.prototype.addToLineVertexArray=function(S,D){var X=this.lineVertexArray.length;if(S.segment!==void 0){for(var ue=S.dist(D[S.segment+1]),Ae=S.dist(D[S.segment]),Pe={},je=S.segment+1;je<D.length;je++)Pe[je]={x:D[je].x,y:D[je].y,tileUnitDistanceFromAnchor:ue},je<D.length-1&&(ue+=D[je+1].dist(D[je]));for(var $e=S.segment||0;$e>=0;$e--)Pe[$e]={x:D[$e].x,y:D[$e].y,tileUnitDistanceFromAnchor:Ae},$e>0&&(Ae+=D[$e-1].dist(D[$e]));for(var ut=0;ut<D.length;ut++){var wt=Pe[ut];this.lineVertexArray.emplaceBack(wt.x,wt.y,wt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:X,lineLength:this.lineVertexArray.length-X}},mi.prototype.addSymbols=function(S,D,X,ue,Ae,Pe,je,$e,ut,wt,Mt,Nt){for(var Wt=S.indexArray,Ut=S.layoutVertexArray,ln=S.segments.prepareSegment(4*D.length,Ut,Wt,this.canOverlap?Pe.sortKey:void 0),fn=this.glyphOffsetArray.length,Mn=ln.vertexLength,Tn=this.allowVerticalPlacement&&je===Yo.vertical?Math.PI/2:0,Nn=Pe.text&&Pe.text.sections,Vn=0;Vn<D.length;Vn++){var Zn=D[Vn],Kn=Zn.tl,lr=Zn.tr,br=Zn.bl,yr=Zn.br,Ar=Zn.tex,Sr=Zn.pixelOffsetTL,Vr=Zn.pixelOffsetBR,zr=Zn.minFontScaleX,Ur=Zn.minFontScaleY,Fr=Zn.glyphOffset,Ir=Zn.isSDF,ei=Zn.sectionIndex,Gr=ln.vertexLength,Ti=Fr[1];Nc(Ut,$e.x,$e.y,Kn.x,Ti+Kn.y,Ar.x,Ar.y,X,Ir,Sr.x,Sr.y,zr,Ur),Nc(Ut,$e.x,$e.y,lr.x,Ti+lr.y,Ar.x+Ar.w,Ar.y,X,Ir,Vr.x,Sr.y,zr,Ur),Nc(Ut,$e.x,$e.y,br.x,Ti+br.y,Ar.x,Ar.y+Ar.h,X,Ir,Sr.x,Vr.y,zr,Ur),Nc(Ut,$e.x,$e.y,yr.x,Ti+yr.y,Ar.x+Ar.w,Ar.y+Ar.h,X,Ir,Vr.x,Vr.y,zr,Ur),Hf(S.dynamicLayoutVertexArray,$e,Tn),Wt.emplaceBack(Gr,Gr+1,Gr+2),Wt.emplaceBack(Gr+1,Gr+2,Gr+3),ln.vertexLength+=4,ln.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Fr[0]),Vn!==D.length-1&&ei===D[Vn+1].sectionIndex||S.programConfigurations.populatePaintArrays(Ut.length,Pe,Pe.index,{},Nt,Nn&&Nn[ei])}S.placedSymbolArray.emplaceBack($e.x,$e.y,fn,this.glyphOffsetArray.length-fn,Mn,ut,wt,$e.segment,X?X[0]:0,X?X[1]:0,ue[0],ue[1],je,0,!1,0,Mt)},mi.prototype._addCollisionDebugVertex=function(S,D,X,ue,Ae,Pe){return D.emplaceBack(0,0),S.emplaceBack(X.x,X.y,ue,Ae,Math.round(Pe.x),Math.round(Pe.y))},mi.prototype.addCollisionDebugVertices=function(S,D,X,ue,Ae,Pe,je){var $e=Ae.segments.prepareSegment(4,Ae.layoutVertexArray,Ae.indexArray),ut=$e.vertexLength,wt=Ae.layoutVertexArray,Mt=Ae.collisionVertexArray,Nt=je.anchorX,Wt=je.anchorY;this._addCollisionDebugVertex(wt,Mt,Pe,Nt,Wt,new n(S,D)),this._addCollisionDebugVertex(wt,Mt,Pe,Nt,Wt,new n(X,D)),this._addCollisionDebugVertex(wt,Mt,Pe,Nt,Wt,new n(X,ue)),this._addCollisionDebugVertex(wt,Mt,Pe,Nt,Wt,new n(S,ue)),$e.vertexLength+=4;var Ut=Ae.indexArray;Ut.emplaceBack(ut,ut+1),Ut.emplaceBack(ut+1,ut+2),Ut.emplaceBack(ut+2,ut+3),Ut.emplaceBack(ut+3,ut),$e.primitiveLength+=4},mi.prototype.addDebugCollisionBoxes=function(S,D,X,ue){for(var Ae=S;Ae<D;Ae++){var Pe=this.collisionBoxArray.get(Ae),je=Pe.x1,$e=Pe.y1,ut=Pe.x2,wt=Pe.y2;this.addCollisionDebugVertices(je,$e,ut,wt,ue?this.textCollisionBox:this.iconCollisionBox,Pe.anchorPoint,X)}},mi.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Gu(Q,$h.members,ct),this.iconCollisionBox=new Gu(Q,$h.members,ct);for(var S=0;S<this.symbolInstances.length;S++){var D=this.symbolInstances.get(S);this.addDebugCollisionBoxes(D.textBoxStartIndex,D.textBoxEndIndex,D,!0),this.addDebugCollisionBoxes(D.verticalTextBoxStartIndex,D.verticalTextBoxEndIndex,D,!0),this.addDebugCollisionBoxes(D.iconBoxStartIndex,D.iconBoxEndIndex,D,!1),this.addDebugCollisionBoxes(D.verticalIconBoxStartIndex,D.verticalIconBoxEndIndex,D,!1)}},mi.prototype._deserializeCollisionBoxesForSymbol=function(S,D,X,ue,Ae,Pe,je,$e,ut){for(var wt={},Mt=D;Mt<X;Mt++){var Nt=S.get(Mt);wt.textBox={x1:Nt.x1,y1:Nt.y1,x2:Nt.x2,y2:Nt.y2,anchorPointX:Nt.anchorPointX,anchorPointY:Nt.anchorPointY},wt.textFeatureIndex=Nt.featureIndex;break}for(var Wt=ue;Wt<Ae;Wt++){var Ut=S.get(Wt);wt.verticalTextBox={x1:Ut.x1,y1:Ut.y1,x2:Ut.x2,y2:Ut.y2,anchorPointX:Ut.anchorPointX,anchorPointY:Ut.anchorPointY},wt.verticalTextFeatureIndex=Ut.featureIndex;break}for(var ln=Pe;ln<je;ln++){var fn=S.get(ln);wt.iconBox={x1:fn.x1,y1:fn.y1,x2:fn.x2,y2:fn.y2,anchorPointX:fn.anchorPointX,anchorPointY:fn.anchorPointY},wt.iconFeatureIndex=fn.featureIndex;break}for(var Mn=$e;Mn<ut;Mn++){var Tn=S.get(Mn);wt.verticalIconBox={x1:Tn.x1,y1:Tn.y1,x2:Tn.x2,y2:Tn.y2,anchorPointX:Tn.anchorPointX,anchorPointY:Tn.anchorPointY},wt.verticalIconFeatureIndex=Tn.featureIndex;break}return wt},mi.prototype.deserializeCollisionBoxes=function(S){this.collisionArrays=[];for(var D=0;D<this.symbolInstances.length;D++){var X=this.symbolInstances.get(D);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(S,X.textBoxStartIndex,X.textBoxEndIndex,X.verticalTextBoxStartIndex,X.verticalTextBoxEndIndex,X.iconBoxStartIndex,X.iconBoxEndIndex,X.verticalIconBoxStartIndex,X.verticalIconBoxEndIndex))}},mi.prototype.hasTextData=function(){return this.text.segments.get().length>0},mi.prototype.hasIconData=function(){return this.icon.segments.get().length>0},mi.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},mi.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},mi.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},mi.prototype.addIndicesForPlacedSymbol=function(S,D){for(var X=S.placedSymbolArray.get(D),ue=X.vertexStartIndex+4*X.numGlyphs,Ae=X.vertexStartIndex;Ae<ue;Ae+=4)S.indexArray.emplaceBack(Ae,Ae+1,Ae+2),S.indexArray.emplaceBack(Ae+1,Ae+2,Ae+3)},mi.prototype.getSortedSymbolIndexes=function(S){if(this.sortedAngle===S&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var D=Math.sin(S),X=Math.cos(S),ue=[],Ae=[],Pe=[],je=0;je<this.symbolInstances.length;++je){Pe.push(je);var $e=this.symbolInstances.get(je);ue.push(0|Math.round(D*$e.anchorX+X*$e.anchorY)),Ae.push($e.featureIndex)}return Pe.sort(function(ut,wt){return ue[ut]-ue[wt]||Ae[wt]-Ae[ut]}),Pe},mi.prototype.addToSortKeyRanges=function(S,D){var X=this.sortKeyRanges[this.sortKeyRanges.length-1];X&&X.sortKey===D?X.symbolInstanceEnd=S+1:this.sortKeyRanges.push({sortKey:D,symbolInstanceStart:S,symbolInstanceEnd:S+1})},mi.prototype.sortFeatures=function(S){var D=this;if(this.sortFeaturesByY&&this.sortedAngle!==S&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(S),this.sortedAngle=S,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var X=0,ue=this.symbolInstanceIndexes;X<ue.length;X+=1){var Ae=ue[X],Pe=this.symbolInstances.get(Ae);this.featureSortOrder.push(Pe.featureIndex),[Pe.rightJustifiedTextSymbolIndex,Pe.centerJustifiedTextSymbolIndex,Pe.leftJustifiedTextSymbolIndex].forEach(function(je,$e,ut){je>=0&&ut.indexOf(je)===$e&&D.addIndicesForPlacedSymbol(D.text,je)}),Pe.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Pe.verticalPlacedTextSymbolIndex),Pe.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Pe.placedIconSymbolIndex),Pe.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Pe.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Lr("SymbolBucket",mi,{omit:["layers","collisionBoxArray","features","compareText"]}),mi.MAX_GLYPHS=65535,mi.addDynamicAttributes=Hf;var p1=new Ri({"symbol-placement":new Pr(Ze.layout_symbol["symbol-placement"]),"symbol-spacing":new Pr(Ze.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Pr(Ze.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Br(Ze.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Pr(Ze.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Pr(Ze.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Pr(Ze.layout_symbol["icon-ignore-placement"]),"icon-optional":new Pr(Ze.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Pr(Ze.layout_symbol["icon-rotation-alignment"]),"icon-size":new Br(Ze.layout_symbol["icon-size"]),"icon-text-fit":new Pr(Ze.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Pr(Ze.layout_symbol["icon-text-fit-padding"]),"icon-image":new Br(Ze.layout_symbol["icon-image"]),"icon-rotate":new Br(Ze.layout_symbol["icon-rotate"]),"icon-padding":new Pr(Ze.layout_symbol["icon-padding"]),"icon-keep-upright":new Pr(Ze.layout_symbol["icon-keep-upright"]),"icon-offset":new Br(Ze.layout_symbol["icon-offset"]),"icon-anchor":new Br(Ze.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Pr(Ze.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Pr(Ze.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Pr(Ze.layout_symbol["text-rotation-alignment"]),"text-field":new Br(Ze.layout_symbol["text-field"]),"text-font":new Br(Ze.layout_symbol["text-font"]),"text-size":new Br(Ze.layout_symbol["text-size"]),"text-max-width":new Br(Ze.layout_symbol["text-max-width"]),"text-line-height":new Pr(Ze.layout_symbol["text-line-height"]),"text-letter-spacing":new Br(Ze.layout_symbol["text-letter-spacing"]),"text-justify":new Br(Ze.layout_symbol["text-justify"]),"text-radial-offset":new Br(Ze.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Pr(Ze.layout_symbol["text-variable-anchor"]),"text-anchor":new Br(Ze.layout_symbol["text-anchor"]),"text-max-angle":new Pr(Ze.layout_symbol["text-max-angle"]),"text-writing-mode":new Pr(Ze.layout_symbol["text-writing-mode"]),"text-rotate":new Br(Ze.layout_symbol["text-rotate"]),"text-padding":new Pr(Ze.layout_symbol["text-padding"]),"text-keep-upright":new Pr(Ze.layout_symbol["text-keep-upright"]),"text-transform":new Br(Ze.layout_symbol["text-transform"]),"text-offset":new Br(Ze.layout_symbol["text-offset"]),"text-allow-overlap":new Pr(Ze.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Pr(Ze.layout_symbol["text-ignore-placement"]),"text-optional":new Pr(Ze.layout_symbol["text-optional"])}),Gf={paint:new Ri({"icon-opacity":new Br(Ze.paint_symbol["icon-opacity"]),"icon-color":new Br(Ze.paint_symbol["icon-color"]),"icon-halo-color":new Br(Ze.paint_symbol["icon-halo-color"]),"icon-halo-width":new Br(Ze.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Br(Ze.paint_symbol["icon-halo-blur"]),"icon-translate":new Pr(Ze.paint_symbol["icon-translate"]),"icon-translate-anchor":new Pr(Ze.paint_symbol["icon-translate-anchor"]),"text-opacity":new Br(Ze.paint_symbol["text-opacity"]),"text-color":new Br(Ze.paint_symbol["text-color"],{runtimeType:sn,getOverride:function(S){return S.textColor},hasOverride:function(S){return!!S.textColor}}),"text-halo-color":new Br(Ze.paint_symbol["text-halo-color"]),"text-halo-width":new Br(Ze.paint_symbol["text-halo-width"]),"text-halo-blur":new Br(Ze.paint_symbol["text-halo-blur"]),"text-translate":new Pr(Ze.paint_symbol["text-translate"]),"text-translate-anchor":new Pr(Ze.paint_symbol["text-translate-anchor"])}),layout:p1},xu=function(S){this.type=S.property.overrides?S.property.overrides.runtimeType:Ct,this.defaultValue=S};xu.prototype.evaluate=function(S){if(S.formattedSection){var D=this.defaultValue.property.overrides;if(D&&D.hasOverride(S.formattedSection))return D.getOverride(S.formattedSection)}return S.feature&&S.featureState?this.defaultValue.evaluate(S.feature,S.featureState):this.defaultValue.property.specification.default},xu.prototype.eachChild=function(S){this.defaultValue.isConstant()||S(this.defaultValue.value._styleExpression.expression)},xu.prototype.outputDefined=function(){return!1},xu.prototype.serialize=function(){return null},Lr("FormatSectionOverride",xu,{omit:["defaultValue"]});var d1=function(S){function D(X){S.call(this,X,Gf)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.recalculate=function(X,ue){if(S.prototype.recalculate.call(this,X,ue),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var Ae=this.layout.get("text-writing-mode");if(Ae){for(var Pe=[],je=0,$e=Ae;je<$e.length;je+=1){var ut=$e[je];Pe.indexOf(ut)<0&&Pe.push(ut)}this.layout._values["text-writing-mode"]=Pe}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},D.prototype.getValueAndResolveTokens=function(X,ue,Ae,Pe){var je=this.layout.get(X).evaluate(ue,{},Ae,Pe),$e=this._unevaluatedLayout._values[X];return $e.isDataDriven()||ns($e.value)||!je?je:function(ut,wt){return wt.replace(/{([^{}]+)}/g,function(Mt,Nt){return Nt in ut?String(ut[Nt]):""})}(ue.properties,je)},D.prototype.createBucket=function(X){return new mi(X)},D.prototype.queryRadius=function(){return 0},D.prototype.queryIntersectsFeature=function(){return!1},D.prototype._setPaintOverrides=function(){for(var X=0,ue=Gf.paint.overridableProperties;X<ue.length;X+=1){var Ae=ue[X];if(D.hasPaintOverride(this.layout,Ae)){var Pe,je=this.paint.get(Ae),$e=new xu(je),ut=new Ro($e,je.property.specification);Pe=je.value.kind==="constant"||je.value.kind==="source"?new Wa("source",ut):new ms("composite",ut,je.value.zoomStops,je.value._interpolationType),this.paint._values[Ae]=new gi(je.property,Pe,je.parameters)}}},D.prototype._handleOverridablePaintPropertyUpdate=function(X,ue,Ae){return!(!this.layout||ue.isDataDriven()||Ae.isDataDriven())&&D.hasPaintOverride(this.layout,X)},D.hasPaintOverride=function(X,ue){var Ae=X.get("text-field"),Pe=Gf.paint.properties[ue],je=!1,$e=function(Mt){for(var Nt=0,Wt=Mt;Nt<Wt.length;Nt+=1){var Ut=Wt[Nt];if(Pe.overrides&&Pe.overrides.hasOverride(Ut))return void(je=!0)}};if(Ae.value.kind==="constant"&&Ae.value.value instanceof Un)$e(Ae.value.value.sections);else if(Ae.value.kind==="source"){var ut=function(Mt){if(!je)if(Mt instanceof Ht&&er(Mt.value)===Ln){var Nt=Mt.value;$e(Nt.sections)}else Mt instanceof Pn?$e(Mt.sections):Mt.eachChild(ut)},wt=Ae.value;wt._styleExpression&&ut(wt._styleExpression.expression)}return je},D}(oi),g1={paint:new Ri({"background-color":new Pr(Ze.paint_background["background-color"]),"background-pattern":new fo(Ze.paint_background["background-pattern"]),"background-opacity":new Pr(Ze.paint_background["background-opacity"])})},v1=function(S){function D(X){S.call(this,X,g1)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D}(oi),m1={paint:new Ri({"raster-opacity":new Pr(Ze.paint_raster["raster-opacity"]),"raster-hue-rotate":new Pr(Ze.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Pr(Ze.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Pr(Ze.paint_raster["raster-brightness-max"]),"raster-saturation":new Pr(Ze.paint_raster["raster-saturation"]),"raster-contrast":new Pr(Ze.paint_raster["raster-contrast"]),"raster-resampling":new Pr(Ze.paint_raster["raster-resampling"]),"raster-fade-duration":new Pr(Ze.paint_raster["raster-fade-duration"])})},y1=function(S){function D(X){S.call(this,X,m1)}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D}(oi),x1=function(S){function D(X){S.call(this,X,{}),this.implementation=X}return S&&(D.__proto__=S),D.prototype=Object.create(S&&S.prototype),D.prototype.constructor=D,D.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},D.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},D.prototype.recalculate=function(){},D.prototype.updateTransitions=function(){},D.prototype.hasTransition=function(){},D.prototype.serialize=function(){},D.prototype.onAdd=function(X){this.implementation.onAdd&&this.implementation.onAdd(X,X.painter.context.gl)},D.prototype.onRemove=function(X){this.implementation.onRemove&&this.implementation.onRemove(X,X.painter.context.gl)},D}(oi),b1={circle:e0,heatmap:n0,hillshade:i0,fill:_0,"fill-extrusion":C0,line:F0,symbol:d1,background:v1,raster:y1},Ap=r.HTMLImageElement,Mp=r.HTMLCanvasElement,Sp=r.HTMLVideoElement,Ep=r.ImageData,jc=r.ImageBitmap,Jl=function(S,D,X,ue){this.context=S,this.format=X,this.texture=S.gl.createTexture(),this.update(D,ue)};Jl.prototype.update=function(S,D,X){var ue=S.width,Ae=S.height,Pe=!(this.size&&this.size[0]===ue&&this.size[1]===Ae||X),je=this.context,$e=je.gl;if(this.useMipmap=!!(D&&D.useMipmap),$e.bindTexture($e.TEXTURE_2D,this.texture),je.pixelStoreUnpackFlipY.set(!1),je.pixelStoreUnpack.set(1),je.pixelStoreUnpackPremultiplyAlpha.set(this.format===$e.RGBA&&(!D||D.premultiply!==!1)),Pe)this.size=[ue,Ae],S instanceof Ap||S instanceof Mp||S instanceof Sp||S instanceof Ep||jc&&S instanceof jc?$e.texImage2D($e.TEXTURE_2D,0,this.format,this.format,$e.UNSIGNED_BYTE,S):$e.texImage2D($e.TEXTURE_2D,0,this.format,ue,Ae,0,this.format,$e.UNSIGNED_BYTE,S.data);else{var ut=X||{x:0,y:0},wt=ut.x,Mt=ut.y;S instanceof Ap||S instanceof Mp||S instanceof Sp||S instanceof Ep||jc&&S instanceof jc?$e.texSubImage2D($e.TEXTURE_2D,0,wt,Mt,$e.RGBA,$e.UNSIGNED_BYTE,S):$e.texSubImage2D($e.TEXTURE_2D,0,wt,Mt,ue,Ae,$e.RGBA,$e.UNSIGNED_BYTE,S.data)}this.useMipmap&&this.isSizePowerOfTwo()&&$e.generateMipmap($e.TEXTURE_2D)},Jl.prototype.bind=function(S,D,X){var ue=this.context.gl;ue.bindTexture(ue.TEXTURE_2D,this.texture),X!==ue.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(X=ue.LINEAR),S!==this.filter&&(ue.texParameteri(ue.TEXTURE_2D,ue.TEXTURE_MAG_FILTER,S),ue.texParameteri(ue.TEXTURE_2D,ue.TEXTURE_MIN_FILTER,X||S),this.filter=S),D!==this.wrap&&(ue.texParameteri(ue.TEXTURE_2D,ue.TEXTURE_WRAP_S,D),ue.texParameteri(ue.TEXTURE_2D,ue.TEXTURE_WRAP_T,D),this.wrap=D)},Jl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Jl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Wf=function(S){var D=this;this._callback=S,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){D._triggered=!1,D._callback()})};Wf.prototype.trigger=function(){var S=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){S._triggered=!1,S._callback()},0))},Wf.prototype.remove=function(){delete this._channel,this._callback=function(){}};var bu=function(S,D,X){this.target=S,this.parent=D,this.mapId=X,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},x(["receive","process"],this),this.invoker=new Wf(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=z()?S:r};function Lp(S,D,X){var ue=2*Math.PI*6378137/256/Math.pow(2,X);return[S*ue-2*Math.PI*6378137/2,D*ue-2*Math.PI*6378137/2]}bu.prototype.send=function(S,D,X,ue,Ae){var Pe=this;Ae===void 0&&(Ae=!1);var je=Math.round(1e18*Math.random()).toString(36).substring(0,10);X&&(this.callbacks[je]=X);var $e=R(this.globalScope)?void 0:[];return this.target.postMessage({id:je,type:S,hasCallback:!!X,targetMapId:ue,mustQueue:Ae,sourceMapId:this.mapId,data:Vo(D,$e)},$e),{cancel:function(){X&&delete Pe.callbacks[je],Pe.target.postMessage({id:je,type:"<cancel>",targetMapId:ue,sourceMapId:Pe.mapId})}}},bu.prototype.receive=function(S){var D=S.data,X=D.id;if(X&&(!D.targetMapId||this.mapId===D.targetMapId))if(D.type==="<cancel>"){delete this.tasks[X];var ue=this.cancelCallbacks[X];delete this.cancelCallbacks[X],ue&&ue()}else z()||D.mustQueue?(this.tasks[X]=D,this.taskQueue.push(X),this.invoker.trigger()):this.processTask(X,D)},bu.prototype.process=function(){if(this.taskQueue.length){var S=this.taskQueue.shift(),D=this.tasks[S];delete this.tasks[S],this.taskQueue.length&&this.invoker.trigger(),D&&this.processTask(S,D)}},bu.prototype.processTask=function(S,D){var X=this;if(D.type==="<response>"){var ue=this.callbacks[S];delete this.callbacks[S],ue&&(D.error?ue(ls(D.error)):ue(null,ls(D.data)))}else{var Ae=!1,Pe=R(this.globalScope)?void 0:[],je=D.hasCallback?function(Mt,Nt){Ae=!0,delete X.cancelCallbacks[S],X.target.postMessage({id:S,type:"<response>",sourceMapId:X.mapId,error:Mt?Vo(Mt):null,data:Vo(Nt,Pe)},Pe)}:function(Mt){Ae=!0},$e=null,ut=ls(D.data);if(this.parent[D.type])$e=this.parent[D.type](D.sourceMapId,ut,je);else if(this.parent.getWorkerSource){var wt=D.type.split(".");$e=this.parent.getWorkerSource(D.sourceMapId,wt[0],ut.source)[wt[1]](ut,je)}else je(new Error("Could not find function "+D.type));!Ae&&$e&&$e.cancel&&(this.cancelCallbacks[S]=$e.cancel)}},bu.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var ia=function(S,D){S&&(D?this.setSouthWest(S).setNorthEast(D):S.length===4?this.setSouthWest([S[0],S[1]]).setNorthEast([S[2],S[3]]):this.setSouthWest(S[0]).setNorthEast(S[1]))};ia.prototype.setNorthEast=function(S){return this._ne=S instanceof Fi?new Fi(S.lng,S.lat):Fi.convert(S),this},ia.prototype.setSouthWest=function(S){return this._sw=S instanceof Fi?new Fi(S.lng,S.lat):Fi.convert(S),this},ia.prototype.extend=function(S){var D,X,ue=this._sw,Ae=this._ne;if(S instanceof Fi)D=S,X=S;else{if(!(S instanceof ia)){if(Array.isArray(S)){if(S.length===4||S.every(Array.isArray)){var Pe=S;return this.extend(ia.convert(Pe))}var je=S;return this.extend(Fi.convert(je))}return this}if(D=S._sw,X=S._ne,!D||!X)return this}return ue||Ae?(ue.lng=Math.min(D.lng,ue.lng),ue.lat=Math.min(D.lat,ue.lat),Ae.lng=Math.max(X.lng,Ae.lng),Ae.lat=Math.max(X.lat,Ae.lat)):(this._sw=new Fi(D.lng,D.lat),this._ne=new Fi(X.lng,X.lat)),this},ia.prototype.getCenter=function(){return new Fi((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},ia.prototype.getSouthWest=function(){return this._sw},ia.prototype.getNorthEast=function(){return this._ne},ia.prototype.getNorthWest=function(){return new Fi(this.getWest(),this.getNorth())},ia.prototype.getSouthEast=function(){return new Fi(this.getEast(),this.getSouth())},ia.prototype.getWest=function(){return this._sw.lng},ia.prototype.getSouth=function(){return this._sw.lat},ia.prototype.getEast=function(){return this._ne.lng},ia.prototype.getNorth=function(){return this._ne.lat},ia.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},ia.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},ia.prototype.isEmpty=function(){return!(this._sw&&this._ne)},ia.prototype.contains=function(S){var D=Fi.convert(S),X=D.lng,ue=D.lat,Ae=this._sw.lat<=ue&&ue<=this._ne.lat,Pe=this._sw.lng<=X&&X<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Pe=this._sw.lng>=X&&X>=this._ne.lng),Ae&&Pe},ia.convert=function(S){return!S||S instanceof ia?S:new ia(S)};var Cp=63710088e-1,Fi=function(S,D){if(isNaN(S)||isNaN(D))throw new Error("Invalid LngLat object: ("+S+", "+D+")");if(this.lng=+S,this.lat=+D,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Fi.prototype.wrap=function(){return new Fi(g(this.lng,-180,180),this.lat)},Fi.prototype.toArray=function(){return[this.lng,this.lat]},Fi.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Fi.prototype.distanceTo=function(S){var D=Math.PI/180,X=this.lat*D,ue=S.lat*D,Ae=Math.sin(X)*Math.sin(ue)+Math.cos(X)*Math.cos(ue)*Math.cos((S.lng-this.lng)*D);return Cp*Math.acos(Math.min(Ae,1))},Fi.prototype.toBounds=function(S){S===void 0&&(S=0);var D=360*S/40075017,X=D/Math.cos(Math.PI/180*this.lat);return new ia(new Fi(this.lng-X,this.lat-D),new Fi(this.lng+X,this.lat+D))},Fi.convert=function(S){if(S instanceof Fi)return S;if(Array.isArray(S)&&(S.length===2||S.length===3))return new Fi(Number(S[0]),Number(S[1]));if(!Array.isArray(S)&&typeof S=="object"&&S!==null)return new Fi(Number("lng"in S?S.lng:S.lon),Number(S.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Pp=2*Math.PI*Cp;function Op(S){return Pp*Math.cos(S*Math.PI/180)}function Ip(S){return(180+S)/360}function zp(S){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+S*Math.PI/360)))/360}function Dp(S,D){return S/Op(D)}function Yf(S){var D=180-360*S;return 360/Math.PI*Math.atan(Math.exp(D*Math.PI/180))-90}var Kl=function(S,D,X){X===void 0&&(X=0),this.x=+S,this.y=+D,this.z=+X};Kl.fromLngLat=function(S,D){D===void 0&&(D=0);var X=Fi.convert(S);return new Kl(Ip(X.lng),zp(X.lat),Dp(D,X.lat))},Kl.prototype.toLngLat=function(){return new Fi(360*this.x-180,Yf(this.y))},Kl.prototype.toAltitude=function(){return S=this.z,D=this.y,S*Op(Yf(D));var S,D},Kl.prototype.meterInMercatorCoordinateUnits=function(){return 1/Pp*(S=Yf(this.y),1/Math.cos(S*Math.PI/180));var S};var $l=function(S,D,X){this.z=S,this.x=D,this.y=X,this.key=Wu(0,S,S,D,X)};$l.prototype.equals=function(S){return this.z===S.z&&this.x===S.x&&this.y===S.y},$l.prototype.url=function(S,D){var X,ue,Ae,Pe,je,$e=(X=this.x,ue=this.y,Ae=this.z,Pe=Lp(256*X,256*(ue=Math.pow(2,Ae)-ue-1),Ae),je=Lp(256*(X+1),256*(ue+1),Ae),Pe[0]+","+Pe[1]+","+je[0]+","+je[1]),ut=function(wt,Mt,Nt){for(var Wt,Ut="",ln=wt;ln>0;ln--)Ut+=(Mt&(Wt=1<<ln-1)?1:0)+(Nt&Wt?2:0);return Ut}(this.z,this.x,this.y);return S[(this.x+this.y)%S.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(D==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ut).replace("{bbox-epsg-3857}",$e)},$l.prototype.getTilePoint=function(S){var D=Math.pow(2,this.z);return new n((S.x*D-this.x)*ni,(S.y*D-this.y)*ni)},$l.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Rp=function(S,D){this.wrap=S,this.canonical=D,this.key=Wu(S,D.z,D.z,D.x,D.y)},aa=function(S,D,X,ue,Ae){this.overscaledZ=S,this.wrap=D,this.canonical=new $l(X,+ue,+Ae),this.key=Wu(D,S,X,ue,Ae)};function Wu(S,D,X,ue,Ae){(S*=2)<0&&(S=-1*S-1);var Pe=1<<X;return(Pe*Pe*S+Pe*Ae+ue).toString(36)+X.toString(36)+D.toString(36)}aa.prototype.equals=function(S){return this.overscaledZ===S.overscaledZ&&this.wrap===S.wrap&&this.canonical.equals(S.canonical)},aa.prototype.scaledTo=function(S){var D=this.canonical.z-S;return S>this.canonical.z?new aa(S,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new aa(S,this.wrap,S,this.canonical.x>>D,this.canonical.y>>D)},aa.prototype.calculateScaledKey=function(S,D){var X=this.canonical.z-S;return S>this.canonical.z?Wu(this.wrap*+D,S,this.canonical.z,this.canonical.x,this.canonical.y):Wu(this.wrap*+D,S,S,this.canonical.x>>X,this.canonical.y>>X)},aa.prototype.isChildOf=function(S){if(S.wrap!==this.wrap)return!1;var D=this.canonical.z-S.canonical.z;return S.overscaledZ===0||S.overscaledZ<this.overscaledZ&&S.canonical.x===this.canonical.x>>D&&S.canonical.y===this.canonical.y>>D},aa.prototype.children=function(S){if(this.overscaledZ>=S)return[new aa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var D=this.canonical.z+1,X=2*this.canonical.x,ue=2*this.canonical.y;return[new aa(D,this.wrap,D,X,ue),new aa(D,this.wrap,D,X+1,ue),new aa(D,this.wrap,D,X,ue+1),new aa(D,this.wrap,D,X+1,ue+1)]},aa.prototype.isLessThan=function(S){return this.wrap<S.wrap||!(this.wrap>S.wrap)&&(this.overscaledZ<S.overscaledZ||!(this.overscaledZ>S.overscaledZ)&&(this.canonical.x<S.canonical.x||!(this.canonical.x>S.canonical.x)&&this.canonical.y<S.canonical.y))},aa.prototype.wrapped=function(){return new aa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},aa.prototype.unwrapTo=function(S){return new aa(this.overscaledZ,S,this.canonical.z,this.canonical.x,this.canonical.y)},aa.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},aa.prototype.toUnwrapped=function(){return new Rp(this.wrap,this.canonical)},aa.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},aa.prototype.getTilePoint=function(S){return this.canonical.getTilePoint(new Kl(S.x-this.wrap,S.y))},Lr("CanonicalTileID",$l),Lr("OverscaledTileID",aa,{omit:["posMatrix"]});var yl=function(S,D,X){if(this.uid=S,D.height!==D.width)throw new RangeError("DEM tiles must be square");if(X&&X!=="mapbox"&&X!=="terrarium")return L('"'+X+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=D.height;var ue=this.dim=D.height-2;this.data=new Uint32Array(D.data.buffer),this.encoding=X||"mapbox";for(var Ae=0;Ae<ue;Ae++)this.data[this._idx(-1,Ae)]=this.data[this._idx(0,Ae)],this.data[this._idx(ue,Ae)]=this.data[this._idx(ue-1,Ae)],this.data[this._idx(Ae,-1)]=this.data[this._idx(Ae,0)],this.data[this._idx(Ae,ue)]=this.data[this._idx(Ae,ue-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ue,-1)]=this.data[this._idx(ue-1,0)],this.data[this._idx(-1,ue)]=this.data[this._idx(0,ue-1)],this.data[this._idx(ue,ue)]=this.data[this._idx(ue-1,ue-1)]};yl.prototype.get=function(S,D){var X=new Uint8Array(this.data.buffer),ue=4*this._idx(S,D);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(X[ue],X[ue+1],X[ue+2])},yl.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},yl.prototype._idx=function(S,D){if(S<-1||S>=this.dim+1||D<-1||D>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(D+1)*this.stride+(S+1)},yl.prototype._unpackMapbox=function(S,D,X){return(256*S*256+256*D+X)/10-1e4},yl.prototype._unpackTerrarium=function(S,D,X){return 256*S+D+X/256-32768},yl.prototype.getPixels=function(){return new po({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},yl.prototype.backfillBorder=function(S,D,X){if(this.dim!==S.dim)throw new Error("dem dimension mismatch");var ue=D*this.dim,Ae=D*this.dim+this.dim,Pe=X*this.dim,je=X*this.dim+this.dim;switch(D){case-1:ue=Ae-1;break;case 1:Ae=ue+1}switch(X){case-1:Pe=je-1;break;case 1:je=Pe+1}for(var $e=-D*this.dim,ut=-X*this.dim,wt=Pe;wt<je;wt++)for(var Mt=ue;Mt<Ae;Mt++)this.data[this._idx(Mt,wt)]=S.data[this._idx(Mt+$e,wt+ut)]},Lr("DEMData",yl);var Uc=function(S){this._stringToNumber={},this._numberToString=[];for(var D=0;D<S.length;D++){var X=S[D];this._stringToNumber[X]=D,this._numberToString[D]=X}};Uc.prototype.encode=function(S){return this._stringToNumber[S]},Uc.prototype.decode=function(S){return this._numberToString[S]};var Vc=function(S,D,X,ue,Ae){this.type="Feature",this._vectorTileFeature=S,S._z=D,S._x=X,S._y=ue,this.properties=S.properties,this.id=Ae},Zf={geometry:{configurable:!0}};Zf.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Zf.geometry.set=function(S){this._geometry=S},Vc.prototype.toJSON=function(){var S={geometry:this.geometry};for(var D in this)D!=="_geometry"&&D!=="_vectorTileFeature"&&(S[D]=this[D]);return S},Object.defineProperties(Vc.prototype,Zf);var _u=function(){this.state={},this.stateChanges={},this.deletedStates={}};_u.prototype.updateState=function(S,D,X){var ue=String(D);if(this.stateChanges[S]=this.stateChanges[S]||{},this.stateChanges[S][ue]=this.stateChanges[S][ue]||{},f(this.stateChanges[S][ue],X),this.deletedStates[S]===null)for(var Ae in this.deletedStates[S]={},this.state[S])Ae!==ue&&(this.deletedStates[S][Ae]=null);else if(this.deletedStates[S]&&this.deletedStates[S][ue]===null)for(var Pe in this.deletedStates[S][ue]={},this.state[S][ue])X[Pe]||(this.deletedStates[S][ue][Pe]=null);else for(var je in X)this.deletedStates[S]&&this.deletedStates[S][ue]&&this.deletedStates[S][ue][je]===null&&delete this.deletedStates[S][ue][je]},_u.prototype.removeFeatureState=function(S,D,X){if(this.deletedStates[S]!==null){var ue=String(D);if(this.deletedStates[S]=this.deletedStates[S]||{},X&&D!==void 0)this.deletedStates[S][ue]!==null&&(this.deletedStates[S][ue]=this.deletedStates[S][ue]||{},this.deletedStates[S][ue][X]=null);else if(D!==void 0)if(this.stateChanges[S]&&this.stateChanges[S][ue])for(X in this.deletedStates[S][ue]={},this.stateChanges[S][ue])this.deletedStates[S][ue][X]=null;else this.deletedStates[S][ue]=null;else this.deletedStates[S]=null}},_u.prototype.getState=function(S,D){var X=String(D),ue=this.state[S]||{},Ae=this.stateChanges[S]||{},Pe=f({},ue[X],Ae[X]);if(this.deletedStates[S]===null)return{};if(this.deletedStates[S]){var je=this.deletedStates[S][D];if(je===null)return{};for(var $e in je)delete Pe[$e]}return Pe},_u.prototype.initializeTileState=function(S,D){S.setFeatureState(this.state,D)},_u.prototype.coalesceChanges=function(S,D){var X={};for(var ue in this.stateChanges){this.state[ue]=this.state[ue]||{};var Ae={};for(var Pe in this.stateChanges[ue])this.state[ue][Pe]||(this.state[ue][Pe]={}),f(this.state[ue][Pe],this.stateChanges[ue][Pe]),Ae[Pe]=this.state[ue][Pe];X[ue]=Ae}for(var je in this.deletedStates){this.state[je]=this.state[je]||{};var $e={};if(this.deletedStates[je]===null)for(var ut in this.state[je])$e[ut]={},this.state[je][ut]={};else for(var wt in this.deletedStates[je]){if(this.deletedStates[je][wt]===null)this.state[je][wt]={};else for(var Mt=0,Nt=Object.keys(this.deletedStates[je][wt]);Mt<Nt.length;Mt+=1){var Wt=Nt[Mt];delete this.state[je][wt][Wt]}$e[wt]=this.state[je][wt]}X[je]=X[je]||{},f(X[je],$e)}if(this.stateChanges={},this.deletedStates={},Object.keys(X).length!==0)for(var Ut in S)S[Ut].setFeatureState(X,D)};var xl=function(S,D){this.tileID=S,this.x=S.canonical.x,this.y=S.canonical.y,this.z=S.canonical.z,this.grid=new ss(ni,16,0),this.grid3D=new ss(ni,16,0),this.featureIndexArray=new On,this.promoteId=D};function Fp(S,D,X,ue,Ae){return T(S,function(Pe,je){var $e=D instanceof cs?D.get(je):null;return $e&&$e.evaluate?$e.evaluate(X,ue,Ae):$e})}function Bp(S){for(var D=1/0,X=1/0,ue=-1/0,Ae=-1/0,Pe=0,je=S;Pe<je.length;Pe+=1){var $e=je[Pe];D=Math.min(D,$e.x),X=Math.min(X,$e.y),ue=Math.max(ue,$e.x),Ae=Math.max(Ae,$e.y)}return{minX:D,minY:X,maxX:ue,maxY:Ae}}function _1(S,D){return D-S}xl.prototype.insert=function(S,D,X,ue,Ae,Pe){var je=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(X,ue,Ae);for(var $e=Pe?this.grid3D:this.grid,ut=0;ut<D.length;ut++){for(var wt=D[ut],Mt=[1/0,1/0,-1/0,-1/0],Nt=0;Nt<wt.length;Nt++){var Wt=wt[Nt];Mt[0]=Math.min(Mt[0],Wt.x),Mt[1]=Math.min(Mt[1],Wt.y),Mt[2]=Math.max(Mt[2],Wt.x),Mt[3]=Math.max(Mt[3],Wt.y)}Mt[0]<ni&&Mt[1]<ni&&Mt[2]>=0&&Mt[3]>=0&&$e.insert(je,Mt[0],Mt[1],Mt[2],Mt[3])}},xl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new uu.VectorTile(new Cc(this.rawTileData)).layers,this.sourceLayerCoder=new Uc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},xl.prototype.query=function(S,D,X,ue){var Ae=this;this.loadVTLayers();for(var Pe=S.params||{},je=ni/S.tileSize/S.scale,$e=Ds(Pe.filter),ut=S.queryGeometry,wt=S.queryPadding*je,Mt=Bp(ut),Nt=this.grid.query(Mt.minX-wt,Mt.minY-wt,Mt.maxX+wt,Mt.maxY+wt),Wt=Bp(S.cameraQueryGeometry),Ut=0,ln=this.grid3D.query(Wt.minX-wt,Wt.minY-wt,Wt.maxX+wt,Wt.maxY+wt,function(Zn,Kn,lr,br){return function(yr,Ar,Sr,Vr,zr){for(var Ur=0,Fr=yr;Ur<Fr.length;Ur+=1){var Ir=Fr[Ur];if(Ar<=Ir.x&&Sr<=Ir.y&&Vr>=Ir.x&&zr>=Ir.y)return!0}var ei=[new n(Ar,Sr),new n(Ar,zr),new n(Vr,zr),new n(Vr,Sr)];if(yr.length>2){for(var Gr=0,Ti=ei;Gr<Ti.length;Gr+=1)if(ll(yr,Ti[Gr]))return!0}for(var Nr=0;Nr<yr.length-1;Nr++)if(Zd(yr[Nr],yr[Nr+1],ei))return!0;return!1}(S.cameraQueryGeometry,Zn-wt,Kn-wt,lr+wt,br+wt)});Ut<ln.length;Ut+=1){var fn=ln[Ut];Nt.push(fn)}Nt.sort(_1);for(var Mn,Tn={},Nn=function(Zn){var Kn=Nt[Zn];if(Kn!==Mn){Mn=Kn;var lr=Ae.featureIndexArray.get(Kn),br=null;Ae.loadMatchingFeature(Tn,lr.bucketIndex,lr.sourceLayerIndex,lr.featureIndex,$e,Pe.layers,Pe.availableImages,D,X,ue,function(yr,Ar,Sr){return br||(br=Mo(yr)),Ar.queryIntersectsFeature(ut,yr,Sr,br,Ae.z,S.transform,je,S.pixelPosMatrix)})}},Vn=0;Vn<Nt.length;Vn++)Nn(Vn);return Tn},xl.prototype.loadMatchingFeature=function(S,D,X,ue,Ae,Pe,je,$e,ut,wt,Mt){var Nt=this.bucketLayerIDs[D];if(!Pe||function(yr,Ar){for(var Sr=0;Sr<yr.length;Sr++)if(Ar.indexOf(yr[Sr])>=0)return!0;return!1}(Pe,Nt)){var Wt=this.sourceLayerCoder.decode(X),Ut=this.vtLayers[Wt].feature(ue);if(Ae.needGeometry){var ln=Si(Ut,!0);if(!Ae.filter(new Xr(this.tileID.overscaledZ),ln,this.tileID.canonical))return}else if(!Ae.filter(new Xr(this.tileID.overscaledZ),Ut))return;for(var fn=this.getId(Ut,Wt),Mn=0;Mn<Nt.length;Mn++){var Tn=Nt[Mn];if(!(Pe&&Pe.indexOf(Tn)<0)){var Nn=$e[Tn];if(Nn){var Vn={};fn!==void 0&&wt&&(Vn=wt.getState(Nn.sourceLayer||"_geojsonTileLayer",fn));var Zn=f({},ut[Tn]);Zn.paint=Fp(Zn.paint,Nn.paint,Ut,Vn,je),Zn.layout=Fp(Zn.layout,Nn.layout,Ut,Vn,je);var Kn=!Mt||Mt(Ut,Nn,Vn);if(Kn){var lr=new Vc(Ut,this.z,this.x,this.y,fn);lr.layer=Zn;var br=S[Tn];br===void 0&&(br=S[Tn]=[]),br.push({featureIndex:ue,feature:lr,intersectionZ:Kn})}}}}}},xl.prototype.lookupSymbolFeatures=function(S,D,X,ue,Ae,Pe,je,$e){var ut={};this.loadVTLayers();for(var wt=Ds(Ae),Mt=0,Nt=S;Mt<Nt.length;Mt+=1){var Wt=Nt[Mt];this.loadMatchingFeature(ut,X,ue,Wt,wt,Pe,je,$e,D)}return ut},xl.prototype.hasLayer=function(S){for(var D=0,X=this.bucketLayerIDs;D<X.length;D+=1)for(var ue=0,Ae=X[D];ue<Ae.length;ue+=1)if(S===Ae[ue])return!0;return!1},xl.prototype.getId=function(S,D){var X=S.id;if(this.promoteId){var ue=typeof this.promoteId=="string"?this.promoteId:this.promoteId[D];typeof(X=S.properties[ue])=="boolean"&&(X=Number(X))}return X},Lr("FeatureIndex",xl,{omit:["rawTileData","sourceLayerCoder"]});var xa=function(S,D){this.tileID=S,this.uid=v(),this.uses=0,this.tileSize=D,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};xa.prototype.registerFadeDuration=function(S){var D=S+this.timeAdded;D<J.now()||this.fadeEndTime&&D<this.fadeEndTime||(this.fadeEndTime=D)},xa.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},xa.prototype.loadVectorData=function(S,D,X){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",S){for(var ue in S.featureIndex&&(this.latestFeatureIndex=S.featureIndex,S.rawTileData?(this.latestRawTileData=S.rawTileData,this.latestFeatureIndex.rawTileData=S.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=S.collisionBoxArray,this.buckets=function(wt,Mt){var Nt={};if(!Mt)return Nt;for(var Wt=function(){var fn=ln[Ut],Mn=fn.layerIds.map(function(Zn){return Mt.getLayer(Zn)}).filter(Boolean);if(Mn.length!==0){fn.layers=Mn,fn.stateDependentLayerIds&&(fn.stateDependentLayers=fn.stateDependentLayerIds.map(function(Zn){return Mn.filter(function(Kn){return Kn.id===Zn})[0]}));for(var Tn=0,Nn=Mn;Tn<Nn.length;Tn+=1){var Vn=Nn[Tn];Nt[Vn.id]=fn}}},Ut=0,ln=wt;Ut<ln.length;Ut+=1)Wt();return Nt}(S.buckets,D.style),this.hasSymbolBuckets=!1,this.buckets){var Ae=this.buckets[ue];if(Ae instanceof mi){if(this.hasSymbolBuckets=!0,!X)break;Ae.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Pe in this.buckets){var je=this.buckets[Pe];if(je instanceof mi&&je.hasRTLText){this.hasRTLText=!0,ya.isLoading()||ya.isLoaded()||ws()!=="deferred"||Ts();break}}for(var $e in this.queryPadding=0,this.buckets){var ut=this.buckets[$e];this.queryPadding=Math.max(this.queryPadding,D.style.getLayer($e).queryRadius(ut))}S.imageAtlas&&(this.imageAtlas=S.imageAtlas),S.glyphAtlasImage&&(this.glyphAtlasImage=S.glyphAtlasImage)}else this.collisionBoxArray=new St},xa.prototype.unloadVectorData=function(){for(var S in this.buckets)this.buckets[S].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},xa.prototype.getBucket=function(S){return this.buckets[S.id]},xa.prototype.upload=function(S){for(var D in this.buckets){var X=this.buckets[D];X.uploadPending()&&X.upload(S)}var ue=S.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Jl(S,this.imageAtlas.image,ue.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Jl(S,this.glyphAtlasImage,ue.ALPHA),this.glyphAtlasImage=null)},xa.prototype.prepare=function(S){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(S,this.imageAtlasTexture)},xa.prototype.queryRenderedFeatures=function(S,D,X,ue,Ae,Pe,je,$e,ut,wt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ue,cameraQueryGeometry:Ae,scale:Pe,tileSize:this.tileSize,pixelPosMatrix:wt,transform:$e,params:je,queryPadding:this.queryPadding*ut},S,D,X):{}},xa.prototype.querySourceFeatures=function(S,D){var X=this.latestFeatureIndex;if(X&&X.rawTileData){var ue=X.loadVTLayers(),Ae=D?D.sourceLayer:"",Pe=ue._geojsonTileLayer||ue[Ae];if(Pe)for(var je=Ds(D&&D.filter),$e=this.tileID.canonical,ut=$e.z,wt=$e.x,Mt=$e.y,Nt={z:ut,x:wt,y:Mt},Wt=0;Wt<Pe.length;Wt++){var Ut=Pe.feature(Wt);if(je.needGeometry){var ln=Si(Ut,!0);if(!je.filter(new Xr(this.tileID.overscaledZ),ln,this.tileID.canonical))continue}else if(!je.filter(new Xr(this.tileID.overscaledZ),Ut))continue;var fn=X.getId(Ut,Ae),Mn=new Vc(Ut,ut,wt,Mt,fn);Mn.tile=Nt,S.push(Mn)}}},xa.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},xa.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},xa.prototype.setExpiryData=function(S){var D=this.expirationTime;if(S.cacheControl){var X=F(S.cacheControl);X["max-age"]&&(this.expirationTime=Date.now()+1e3*X["max-age"])}else S.expires&&(this.expirationTime=new Date(S.expires).getTime());if(this.expirationTime){var ue=Date.now(),Ae=!1;if(this.expirationTime>ue)Ae=!1;else if(D)if(this.expirationTime<D)Ae=!0;else{var Pe=this.expirationTime-D;Pe?this.expirationTime=ue+Math.max(Pe,3e4):Ae=!0}else Ae=!0;Ae?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},xa.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},xa.prototype.setFeatureState=function(S,D){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(S).length!==0){var X=this.latestFeatureIndex.loadVTLayers();for(var ue in this.buckets)if(D.style.hasLayer(ue)){var Ae=this.buckets[ue],Pe=Ae.layers[0].sourceLayer||"_geojsonTileLayer",je=X[Pe],$e=S[Pe];if(je&&$e&&Object.keys($e).length!==0){Ae.update($e,je,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ut=D&&D.style&&D.style.getLayer(ue);ut&&(this.queryPadding=Math.max(this.queryPadding,ut.queryRadius(Ae)))}}}},xa.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},xa.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<J.now()},xa.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},xa.prototype.setHoldDuration=function(S){this.symbolFadeHoldUntil=J.now()+S},xa.prototype.setDependencies=function(S,D){for(var X={},ue=0,Ae=D;ue<Ae.length;ue+=1)X[Ae[ue]]=!0;this.dependencies[S]=X},xa.prototype.hasDependency=function(S,D){for(var X=0,ue=S;X<ue.length;X+=1){var Ae=ue[X],Pe=this.dependencies[Ae];if(Pe){for(var je=0,$e=D;je<$e.length;je+=1)if(Pe[$e[je]])return!0}}return!1};var zl=r.performance,Np=function(S){this._marks={start:[S.url,"start"].join("#"),end:[S.url,"end"].join("#"),measure:S.url.toString()},zl.mark(this._marks.start)};Np.prototype.finish=function(){zl.mark(this._marks.end);var S=zl.getEntriesByName(this._marks.measure);return S.length===0&&(zl.measure(this._marks.measure,this._marks.start,this._marks.end),S=zl.getEntriesByName(this._marks.measure),zl.clearMarks(this._marks.start),zl.clearMarks(this._marks.end),zl.clearMeasures(this._marks.measure)),S},o.Actor=bu,o.AlphaImage=Xl,o.CanonicalTileID=$l,o.CollisionBoxArray=St,o.Color=Fn,o.DEMData=yl,o.DataConstantProperty=Pr,o.DictionaryCoder=Uc,o.EXTENT=ni,o.ErrorEvent=Be,o.EvaluationParameters=Xr,o.Event=Fe,o.Evented=at,o.FeatureIndex=xl,o.FillBucket=Hs,o.FillExtrusionBucket=Gs,o.ImageAtlas=Vu,o.ImagePosition=Oc,o.LineBucket=Qa,o.LngLat=Fi,o.LngLatBounds=ia,o.MercatorCoordinate=Kl,o.ONE_EM=ka,o.OverscaledTileID=aa,o.Point=n,o.Point$1=n,o.Properties=Ri,o.Protobuf=Cc,o.RGBAImage=po,o.RequestManager=de,o.RequestPerformance=Np,o.ResourceType=yt,o.SegmentVector=Yn,o.SourceFeatureState=_u,o.StructArrayLayout1ui2=pt,o.StructArrayLayout2f1f2i16=re,o.StructArrayLayout2i4=Go,o.StructArrayLayout3ui6=ye,o.StructArrayLayout4i8=vl,o.SymbolBucket=mi,o.Texture=Jl,o.Tile=xa,o.Transitionable=Ka,o.Uniform1f=Yr,o.Uniform1i=Hr,o.Uniform2f=Jr,o.Uniform3f=vi,o.Uniform4f=Oi,o.UniformColor=ua,o.UniformMatrix4f=na,o.UnwrappedTileID=Rp,o.ValidationError=ht,o.WritingMode=Yo,o.ZoomHistory=_s,o.add=function(S,D,X){return S[0]=D[0]+X[0],S[1]=D[1]+X[1],S[2]=D[2]+X[2],S},o.addDynamicAttributes=Hf,o.asyncAll=function(S,D,X){if(!S.length)return X(null,[]);var ue=S.length,Ae=new Array(S.length),Pe=null;S.forEach(function(je,$e){D(je,function(ut,wt){ut&&(Pe=ut),Ae[$e]=wt,--ue==0&&X(Pe,Ae)})})},o.bezier=l,o.bindAll=x,o.browser=J,o.cacheEntryPossiblyAdded=function(S){++dt>Re&&(S.getActor().send("enforceCacheSizeLimit",ze),dt=0)},o.clamp=c,o.clearTileCache=function(S){var D=r.caches.delete(ke);S&&D.catch(S).then(function(){return S()})},o.clipLine=xp,o.clone=function(S){var D=new Wo(16);return D[0]=S[0],D[1]=S[1],D[2]=S[2],D[3]=S[3],D[4]=S[4],D[5]=S[5],D[6]=S[6],D[7]=S[7],D[8]=S[8],D[9]=S[9],D[10]=S[10],D[11]=S[11],D[12]=S[12],D[13]=S[13],D[14]=S[14],D[15]=S[15],D},o.clone$1=E,o.clone$2=function(S){var D=new Wo(3);return D[0]=S[0],D[1]=S[1],D[2]=S[2],D},o.collisionCircleLayout=U0,o.config=K,o.create=function(){var S=new Wo(16);return Wo!=Float32Array&&(S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[11]=0,S[12]=0,S[13]=0,S[14]=0),S[0]=1,S[5]=1,S[10]=1,S[15]=1,S},o.create$1=function(){var S=new Wo(9);return Wo!=Float32Array&&(S[1]=0,S[2]=0,S[3]=0,S[5]=0,S[6]=0,S[7]=0),S[0]=1,S[4]=1,S[8]=1,S},o.create$2=function(){var S=new Wo(4);return Wo!=Float32Array&&(S[1]=0,S[2]=0),S[0]=1,S[3]=1,S},o.createCommonjsModule=w,o.createExpression=_o,o.createLayout=bi,o.createStyleLayer=function(S){return S.type==="custom"?new x1(S):new b1[S.type](S)},o.cross=function(S,D,X){var ue=D[0],Ae=D[1],Pe=D[2],je=X[0],$e=X[1],ut=X[2];return S[0]=Ae*ut-Pe*$e,S[1]=Pe*je-ue*ut,S[2]=ue*$e-Ae*je,S},o.deepEqual=function S(D,X){if(Array.isArray(D)){if(!Array.isArray(X)||D.length!==X.length)return!1;for(var ue=0;ue<D.length;ue++)if(!S(D[ue],X[ue]))return!1;return!0}if(typeof D=="object"&&D!==null&&X!==null){if(typeof X!="object"||Object.keys(D).length!==Object.keys(X).length)return!1;for(var Ae in D)if(!S(D[Ae],X[Ae]))return!1;return!0}return D===X},o.dot=function(S,D){return S[0]*D[0]+S[1]*D[1]+S[2]*D[2]},o.dot$1=function(S,D){return S[0]*D[0]+S[1]*D[1]+S[2]*D[2]+S[3]*D[3]},o.ease=u,o.emitValidationErrors=ga,o.endsWith=y,o.enforceCacheSizeLimit=function(S){Ve(),pe&&pe.then(function(D){D.keys().then(function(X){for(var ue=0;ue<X.length-S;ue++)D.delete(X[ue])})})},o.evaluateSizeForFeature=hp,o.evaluateSizeForZoom=pp,o.evaluateVariableOffset=wp,o.evented=ma,o.extend=f,o.featureFilter=Ds,o.filterObject=h,o.fromRotation=function(S,D){var X=Math.sin(D),ue=Math.cos(D);return S[0]=ue,S[1]=X,S[2]=0,S[3]=-X,S[4]=ue,S[5]=0,S[6]=0,S[7]=0,S[8]=1,S},o.getAnchorAlignment=jf,o.getAnchorJustification=qf,o.getArrayBuffer=Ft,o.getImage=We,o.getJSON=function(S,D){return Rt(f(S,{type:"json"}),D)},o.getRTLTextPluginStatus=ws,o.getReferrer=nt,o.getVideo=function(S,D){var X,ue,Ae=r.document.createElement("video");Ae.muted=!0,Ae.onloadstart=function(){D(null,Ae)};for(var Pe=0;Pe<S.length;Pe++){var je=r.document.createElement("source");X=S[Pe],ue=void 0,(ue=r.document.createElement("a")).href=X,ue.protocol===r.document.location.protocol&&ue.host===r.document.location.host||(Ae.crossOrigin="Anonymous"),je.src=S[Pe],Ae.appendChild(je)}return{cancel:function(){}}},o.identity=Mf,o.invert=function(S,D){var X=D[0],ue=D[1],Ae=D[2],Pe=D[3],je=D[4],$e=D[5],ut=D[6],wt=D[7],Mt=D[8],Nt=D[9],Wt=D[10],Ut=D[11],ln=D[12],fn=D[13],Mn=D[14],Tn=D[15],Nn=X*$e-ue*je,Vn=X*ut-Ae*je,Zn=X*wt-Pe*je,Kn=ue*ut-Ae*$e,lr=ue*wt-Pe*$e,br=Ae*wt-Pe*ut,yr=Mt*fn-Nt*ln,Ar=Mt*Mn-Wt*ln,Sr=Mt*Tn-Ut*ln,Vr=Nt*Mn-Wt*fn,zr=Nt*Tn-Ut*fn,Ur=Wt*Tn-Ut*Mn,Fr=Nn*Ur-Vn*zr+Zn*Vr+Kn*Sr-lr*Ar+br*yr;return Fr?(Fr=1/Fr,S[0]=($e*Ur-ut*zr+wt*Vr)*Fr,S[1]=(Ae*zr-ue*Ur-Pe*Vr)*Fr,S[2]=(fn*br-Mn*lr+Tn*Kn)*Fr,S[3]=(Wt*lr-Nt*br-Ut*Kn)*Fr,S[4]=(ut*Sr-je*Ur-wt*Ar)*Fr,S[5]=(X*Ur-Ae*Sr+Pe*Ar)*Fr,S[6]=(Mn*Zn-ln*br-Tn*Vn)*Fr,S[7]=(Mt*br-Wt*Zn+Ut*Vn)*Fr,S[8]=(je*zr-$e*Sr+wt*yr)*Fr,S[9]=(ue*Sr-X*zr-Pe*yr)*Fr,S[10]=(ln*lr-fn*Zn+Tn*Nn)*Fr,S[11]=(Nt*Zn-Mt*lr-Ut*Nn)*Fr,S[12]=($e*Ar-je*Vr-ut*yr)*Fr,S[13]=(X*Vr-ue*Ar+Ae*yr)*Fr,S[14]=(fn*Vn-ln*Kn-Mn*Nn)*Fr,S[15]=(Mt*Kn-Nt*Vn+Wt*Nn)*Fr,S):null},o.isChar=_r,o.isMapboxURL=ge,o.keysDifference=function(S,D){var X=[];for(var ue in S)ue in D||X.push(ue);return X},o.makeRequest=Rt,o.mapObject=T,o.mercatorXfromLng=Ip,o.mercatorYfromLat=zp,o.mercatorZfromAltitude=Dp,o.mul=Kd,o.multiply=zh,o.mvt=uu,o.nextPowerOfTwo=function(S){return S<=1?1:Math.pow(2,Math.ceil(Math.log(S)/Math.LN2))},o.normalize=function(S,D){var X=D[0],ue=D[1],Ae=D[2],Pe=X*X+ue*ue+Ae*Ae;return Pe>0&&(Pe=1/Math.sqrt(Pe)),S[0]=D[0]*Pe,S[1]=D[1]*Pe,S[2]=D[2]*Pe,S},o.number=jr,o.offscreenCanvasSupported=_t,o.ortho=function(S,D,X,ue,Ae,Pe,je){var $e=1/(D-X),ut=1/(ue-Ae),wt=1/(Pe-je);return S[0]=-2*$e,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=-2*ut,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=2*wt,S[11]=0,S[12]=(D+X)*$e,S[13]=(Ae+ue)*ut,S[14]=(je+Pe)*wt,S[15]=1,S},o.parseGlyphPBF=function(S){return new Cc(S).readFields($0,[])},o.pbf=Cc,o.performSymbolLayout=function(S,D,X,ue,Ae,Pe,je){S.createArrays();var $e=512*S.overscaling;S.tilePixelRatio=ni/$e,S.compareText={},S.iconsNeedLinear=!1;var ut=S.layers[0].layout,wt=S.layers[0]._unevaluatedLayout._values,Mt={};if(S.textSizeData.kind==="composite"){var Nt=S.textSizeData,Wt=Nt.minZoom,Ut=Nt.maxZoom;Mt.compositeTextSizes=[wt["text-size"].possiblyEvaluate(new Xr(Wt),je),wt["text-size"].possiblyEvaluate(new Xr(Ut),je)]}if(S.iconSizeData.kind==="composite"){var ln=S.iconSizeData,fn=ln.minZoom,Mn=ln.maxZoom;Mt.compositeIconSizes=[wt["icon-size"].possiblyEvaluate(new Xr(fn),je),wt["icon-size"].possiblyEvaluate(new Xr(Mn),je)]}Mt.layoutTextSize=wt["text-size"].possiblyEvaluate(new Xr(S.zoom+1),je),Mt.layoutIconSize=wt["icon-size"].possiblyEvaluate(new Xr(S.zoom+1),je),Mt.textMaxSize=wt["text-size"].possiblyEvaluate(new Xr(18));for(var Tn=ut.get("text-line-height")*ka,Nn=ut.get("text-rotation-alignment")==="map"&&ut.get("symbol-placement")!=="point",Vn=ut.get("text-keep-upright"),Zn=ut.get("text-size"),Kn=function(){var yr=br[lr],Ar=ut.get("text-font").evaluate(yr,{},je).join(","),Sr=Zn.evaluate(yr,{},je),Vr=Mt.layoutTextSize.evaluate(yr,{},je),zr=Mt.layoutIconSize.evaluate(yr,{},je),Ur={horizontal:{},vertical:void 0},Fr=yr.text,Ir=[0,0];if(Fr){var ei=Fr.toString(),Gr=ut.get("text-letter-spacing").evaluate(yr,{},je)*ka,Ti=function(Wr){for(var ri=0,Yi=Wr;ri<Yi.length;ri+=1)if(wi=Yi[ri].charCodeAt(0),_r.Arabic(wi)||_r["Arabic Supplement"](wi)||_r["Arabic Extended-A"](wi)||_r["Arabic Presentation Forms-A"](wi)||_r["Arabic Presentation Forms-B"](wi))return!1;var wi;return!0}(ei)?Gr:0,Nr=ut.get("text-anchor").evaluate(yr,{},je),yi=ut.get("text-variable-anchor");if(!yi){var Li=ut.get("text-radial-offset").evaluate(yr,{},je);Ir=Li?wp(Nr,[Li*ka,Vf]):ut.get("text-offset").evaluate(yr,{},je).map(function(Wr){return Wr*ka})}var zi=Nn?"center":ut.get("text-justify").evaluate(yr,{},je),Di=ut.get("symbol-placement"),ki=Di==="point"?ut.get("text-max-width").evaluate(yr,{},je)*ka:0,oa=function(){S.allowVerticalPlacement&&Us(ei)&&(Ur.vertical=Ic(Fr,D,X,Ae,Ar,ki,Tn,Nr,"left",Ti,Ir,Yo.vertical,!0,Di,Vr,Sr))};if(!Nn&&yi){for(var ji=zi==="auto"?yi.map(function(Wr){return qf(Wr)}):[zi],ba=!1,Ia=0;Ia<ji.length;Ia++){var Aa=ji[Ia];if(!Ur.horizontal[Aa])if(ba)Ur.horizontal[Aa]=Ur.horizontal[0];else{var eo=Ic(Fr,D,X,Ae,Ar,ki,Tn,"center",Aa,Ti,Ir,Yo.horizontal,!1,Di,Vr,Sr);eo&&(Ur.horizontal[Aa]=eo,ba=eo.positionedLines.length===1)}}oa()}else{zi==="auto"&&(zi=qf(Nr));var Ma=Ic(Fr,D,X,Ae,Ar,ki,Tn,Nr,zi,Ti,Ir,Yo.horizontal,!1,Di,Vr,Sr);Ma&&(Ur.horizontal[zi]=Ma),oa(),Us(ei)&&Nn&&Vn&&(Ur.vertical=Ic(Fr,D,X,Ae,Ar,ki,Tn,Nr,zi,Ti,Ir,Yo.vertical,!1,Di,Vr,Sr))}}var ca=void 0,Sa=!1;if(yr.icon&&yr.icon.name){var _a=ue[yr.icon.name];_a&&(ca=function(Wr,ri,Yi){var wi=jf(Yi),Vi=wi.horizontalAlign,Bi=wi.verticalAlign,si=ri[0],Zi=ri[1],to=si-Wr.displaySize[0]*Vi,Lo=to+Wr.displaySize[0],Va=Zi-Wr.displaySize[1]*Bi;return{image:Wr,top:Va,bottom:Va+Wr.displaySize[1],left:to,right:Lo}}(Ae[yr.icon.name],ut.get("icon-offset").evaluate(yr,{},je),ut.get("icon-anchor").evaluate(yr,{},je)),Sa=_a.sdf,S.sdfIcons===void 0?S.sdfIcons=_a.sdf:S.sdfIcons!==_a.sdf&&L("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(_a.pixelRatio!==S.pixelRatio||ut.get("icon-rotate").constantOr(1)!==0)&&(S.iconsNeedLinear=!0))}var fa=kp(Ur.horizontal)||Ur.vertical;S.iconsInText=!!fa&&fa.iconsInText,(fa||ca)&&function(Wr,ri,Yi,wi,Vi,Bi,si,Zi,to,Lo,Va){var Ys=Bi.textMaxSize.evaluate(ri,{});Ys===void 0&&(Ys=si);var bl,wa=Wr.layers[0].layout,Zs=wa.get("icon-offset").evaluate(ri,{},Va),Es=kp(Yi.horizontal),Ls=24,Ql=si/Ls,qc=Wr.tilePixelRatio*Ql,eu=Wr.tilePixelRatio*Ys/Ls,Hc=Wr.tilePixelRatio*Zi,Yu=Wr.tilePixelRatio*wa.get("symbol-spacing"),Xf=wa.get("text-padding")*Wr.tilePixelRatio,Gc=wa.get("icon-padding")*Wr.tilePixelRatio,wu=wa.get("text-max-angle")/180*Math.PI,Wc=wa.get("text-rotation-alignment")==="map"&&wa.get("symbol-placement")!=="point",Yc=wa.get("icon-rotation-alignment")==="map"&&wa.get("symbol-placement")!=="point",Zu=wa.get("symbol-placement"),Jf=Yu/2,Xu=wa.get("icon-text-fit");wi&&Xu!=="none"&&(Wr.allowVerticalPlacement&&Yi.vertical&&(bl=fp(wi,Yi.vertical,Xu,wa.get("icon-text-fit-padding"),Zs,Ql)),Es&&(wi=fp(wi,Es,Xu,wa.get("icon-text-fit-padding"),Zs,Ql)));var tu=function(w1,tc){tc.x<0||tc.x>=ni||tc.y<0||tc.y>=ni||function(Qi,Xs,T1,Dl,nh,Hp,$c,ul,Qc,nc,ef,tf,rh,Gp,rc,Wp,Yp,Zp,Xp,Jp,Zo,nf,Kp,cl,k1){var $p,iu,Au,Mu,Su,Eu=Qi.addToLineVertexArray(Xs,T1),Qp=0,ed=0,td=0,nd=0,ih=-1,ah=-1,_l={},rd=wr(""),oh=0,sh=0;if(ul._unevaluatedLayout.getValue("text-radial-offset")===void 0?(oh=($p=ul.layout.get("text-offset").evaluate(Zo,{},cl).map(function(ac){return ac*ka}))[0],sh=$p[1]):(oh=ul.layout.get("text-radial-offset").evaluate(Zo,{},cl)*ka,sh=Vf),Qi.allowVerticalPlacement&&Dl.vertical){var id=ul.layout.get("text-rotate").evaluate(Zo,{},cl)+90,A1=Dl.vertical;Mu=new Bc(Qc,Xs,nc,ef,tf,A1,rh,Gp,rc,id),$c&&(Su=new Bc(Qc,Xs,nc,ef,tf,$c,Yp,Zp,rc,id))}if(nh){var lh=ul.layout.get("icon-rotate").evaluate(Zo,{}),ad=ul.layout.get("icon-text-fit")!=="none",od=bp(nh,lh,Kp,ad),uh=$c?bp($c,lh,Kp,ad):void 0;Au=new Bc(Qc,Xs,nc,ef,tf,nh,Yp,Zp,!1,lh),Qp=4*od.length;var sd=Qi.iconSizeData,ic=null;sd.kind==="source"?(ic=[Ws*ul.layout.get("icon-size").evaluate(Zo,{})])[0]>Il&&L(Qi.layerIds[0]+': Value for "icon-size" is >= '+Hu+'. Reduce your "icon-size".'):sd.kind==="composite"&&((ic=[Ws*nf.compositeIconSizes[0].evaluate(Zo,{},cl),Ws*nf.compositeIconSizes[1].evaluate(Zo,{},cl)])[0]>Il||ic[1]>Il)&&L(Qi.layerIds[0]+': Value for "icon-size" is >= '+Hu+'. Reduce your "icon-size".'),Qi.addSymbols(Qi.icon,od,ic,Jp,Xp,Zo,!1,Xs,Eu.lineStartIndex,Eu.lineLength,-1,cl),ih=Qi.icon.placedSymbolArray.length-1,uh&&(ed=4*uh.length,Qi.addSymbols(Qi.icon,uh,ic,Jp,Xp,Zo,Yo.vertical,Xs,Eu.lineStartIndex,Eu.lineLength,-1,cl),ah=Qi.icon.placedSymbolArray.length-1)}for(var ld in Dl.horizontal){var rf=Dl.horizontal[ld];if(!iu){rd=wr(rf.text);var M1=ul.layout.get("text-rotate").evaluate(Zo,{},cl);iu=new Bc(Qc,Xs,nc,ef,tf,rf,rh,Gp,rc,M1)}var ud=rf.positionedLines.length===1;if(td+=Tp(Qi,Xs,rf,Hp,ul,rc,Zo,Wp,Eu,Dl.vertical?Yo.horizontal:Yo.horizontalOnly,ud?Object.keys(Dl.horizontal):[ld],_l,ih,nf,cl),ud)break}Dl.vertical&&(nd+=Tp(Qi,Xs,Dl.vertical,Hp,ul,rc,Zo,Wp,Eu,Yo.vertical,["vertical"],_l,ah,nf,cl));var S1=iu?iu.boxStartIndex:Qi.collisionBoxArray.length,E1=iu?iu.boxEndIndex:Qi.collisionBoxArray.length,L1=Mu?Mu.boxStartIndex:Qi.collisionBoxArray.length,C1=Mu?Mu.boxEndIndex:Qi.collisionBoxArray.length,P1=Au?Au.boxStartIndex:Qi.collisionBoxArray.length,O1=Au?Au.boxEndIndex:Qi.collisionBoxArray.length,I1=Su?Su.boxStartIndex:Qi.collisionBoxArray.length,z1=Su?Su.boxEndIndex:Qi.collisionBoxArray.length,fl=-1,af=function(ac,fd){return ac&&ac.circleDiameter?Math.max(ac.circleDiameter,fd):fd};fl=af(iu,fl),fl=af(Mu,fl),fl=af(Au,fl);var cd=(fl=af(Su,fl))>-1?1:0;cd&&(fl*=k1/ka),Qi.glyphOffsetArray.length>=mi.MAX_GLYPHS&&L("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Zo.sortKey!==void 0&&Qi.addToSortKeyRanges(Qi.symbolInstances.length,Zo.sortKey),Qi.symbolInstances.emplaceBack(Xs.x,Xs.y,_l.right>=0?_l.right:-1,_l.center>=0?_l.center:-1,_l.left>=0?_l.left:-1,_l.vertical||-1,ih,ah,rd,S1,E1,L1,C1,P1,O1,I1,z1,nc,td,nd,Qp,ed,cd,0,rh,oh,sh,fl)}(Wr,tc,w1,Yi,wi,Vi,bl,Wr.layers[0],Wr.collisionBoxArray,ri.index,ri.sourceLayerIndex,Wr.index,qc,Xf,Wc,to,Hc,Gc,Yc,Zs,ri,Bi,Lo,Va,si)};if(Zu==="line")for(var Tu=0,Zc=xp(ri.geometry,0,0,ni,ni);Tu<Zc.length;Tu+=1)for(var Xc=Zc[Tu],ku=0,Jc=a1(Xc,Yu,wu,Yi.vertical||Es,wi,Ls,eu,Wr.overscaling,ni);ku<Jc.length;ku+=1){var Kc=Jc[ku];Es&&u1(Wr,Es.text,Jf,Kc)||tu(Xc,Kc)}else if(Zu==="line-center")for(var Ju=0,Ku=ri.geometry;Ju<Ku.length;Ju+=1){var nu=Ku[Ju];if(nu.length>1){var $u=i1(nu,wu,Yi.vertical||Es,wi,Ls,eu);$u&&tu(nu,$u)}}else if(ri.type==="Polygon")for(var ru=0,Qu=If(ri.geometry,0);ru<Qu.length;ru+=1){var ec=Qu[ru],jp=s1(ec,16);tu(ec[0],new pu(jp.x,jp.y,0))}else if(ri.type==="LineString")for(var Kf=0,Up=ri.geometry;Kf<Up.length;Kf+=1){var $f=Up[Kf];tu($f,new pu($f[0].x,$f[0].y,0))}else if(ri.type==="Point")for(var Qf=0,Vp=ri.geometry;Qf<Vp.length;Qf+=1)for(var eh=0,qp=Vp[Qf];eh<qp.length;eh+=1){var th=qp[eh];tu([th],new pu(th.x,th.y,0))}}(S,yr,Ur,ca,ue,Mt,Vr,zr,Ir,Sa,je)},lr=0,br=S.features;lr<br.length;lr+=1)Kn();Pe&&S.generateCollisionDebugBuffers()},o.perspective=function(S,D,X,ue,Ae){var Pe,je=1/Math.tan(D/2);return S[0]=je/X,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=je,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[11]=-1,S[12]=0,S[13]=0,S[15]=0,Ae!=null&&Ae!==1/0?(Pe=1/(ue-Ae),S[10]=(Ae+ue)*Pe,S[14]=2*Ae*ue*Pe):(S[10]=-1,S[14]=-2*ue),S},o.pick=function(S,D){for(var X={},ue=0;ue<D.length;ue++){var Ae=D[ue];Ae in S&&(X[Ae]=S[Ae])}return X},o.plugin=ya,o.polygonIntersectsPolygon=Zl,o.postMapLoadEvent=xe,o.postTurnstileEvent=Ie,o.potpack=op,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.register=Lr,o.registerForPluginStateChange=function(S){return S({pluginStatus:Kr,pluginURL:Ki}),ma.on("pluginStateChange",S),S},o.renderColorRamp=Bh,o.rotate=function(S,D,X){var ue=D[0],Ae=D[1],Pe=D[2],je=D[3],$e=Math.sin(X),ut=Math.cos(X);return S[0]=ue*ut+Pe*$e,S[1]=Ae*ut+je*$e,S[2]=ue*-$e+Pe*ut,S[3]=Ae*-$e+je*ut,S},o.rotateX=function(S,D,X){var ue=Math.sin(X),Ae=Math.cos(X),Pe=D[4],je=D[5],$e=D[6],ut=D[7],wt=D[8],Mt=D[9],Nt=D[10],Wt=D[11];return D!==S&&(S[0]=D[0],S[1]=D[1],S[2]=D[2],S[3]=D[3],S[12]=D[12],S[13]=D[13],S[14]=D[14],S[15]=D[15]),S[4]=Pe*Ae+wt*ue,S[5]=je*Ae+Mt*ue,S[6]=$e*Ae+Nt*ue,S[7]=ut*Ae+Wt*ue,S[8]=wt*Ae-Pe*ue,S[9]=Mt*Ae-je*ue,S[10]=Nt*Ae-$e*ue,S[11]=Wt*Ae-ut*ue,S},o.rotateZ=function(S,D,X){var ue=Math.sin(X),Ae=Math.cos(X),Pe=D[0],je=D[1],$e=D[2],ut=D[3],wt=D[4],Mt=D[5],Nt=D[6],Wt=D[7];return D!==S&&(S[8]=D[8],S[9]=D[9],S[10]=D[10],S[11]=D[11],S[12]=D[12],S[13]=D[13],S[14]=D[14],S[15]=D[15]),S[0]=Pe*Ae+wt*ue,S[1]=je*Ae+Mt*ue,S[2]=$e*Ae+Nt*ue,S[3]=ut*Ae+Wt*ue,S[4]=wt*Ae-Pe*ue,S[5]=Mt*Ae-je*ue,S[6]=Nt*Ae-$e*ue,S[7]=Wt*Ae-ut*ue,S},o.scale=function(S,D,X){var ue=X[0],Ae=X[1],Pe=X[2];return S[0]=D[0]*ue,S[1]=D[1]*ue,S[2]=D[2]*ue,S[3]=D[3]*ue,S[4]=D[4]*Ae,S[5]=D[5]*Ae,S[6]=D[6]*Ae,S[7]=D[7]*Ae,S[8]=D[8]*Pe,S[9]=D[9]*Pe,S[10]=D[10]*Pe,S[11]=D[11]*Pe,S[12]=D[12],S[13]=D[13],S[14]=D[14],S[15]=D[15],S},o.scale$1=function(S,D,X){return S[0]=D[0]*X,S[1]=D[1]*X,S[2]=D[2]*X,S[3]=D[3]*X,S},o.scale$2=function(S,D,X){return S[0]=D[0]*X,S[1]=D[1]*X,S[2]=D[2]*X,S},o.setCacheLimits=function(S,D){ze=S,Re=D},o.setRTLTextPlugin=function(S,D,X){if(X===void 0&&(X=!1),Kr===lo||Kr===ja||Kr===ko)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ki=J.resolveURL(S),Kr=lo,Ho=D,uo(),X||Ts()},o.sphericalToCartesian=function(S){var D=S[0],X=S[1],ue=S[2];return X+=90,X*=Math.PI/180,ue*=Math.PI/180,{x:D*Math.cos(X)*Math.sin(ue),y:D*Math.sin(X)*Math.sin(ue),z:D*Math.cos(ue)}},o.sqrLen=Qd,o.styleSpec=Ze,o.sub=$d,o.symbolSize=r1,o.transformMat3=function(S,D,X){var ue=D[0],Ae=D[1],Pe=D[2];return S[0]=ue*X[0]+Ae*X[3]+Pe*X[6],S[1]=ue*X[1]+Ae*X[4]+Pe*X[7],S[2]=ue*X[2]+Ae*X[5]+Pe*X[8],S},o.transformMat4=Ac,o.translate=function(S,D,X){var ue,Ae,Pe,je,$e,ut,wt,Mt,Nt,Wt,Ut,ln,fn=X[0],Mn=X[1],Tn=X[2];return D===S?(S[12]=D[0]*fn+D[4]*Mn+D[8]*Tn+D[12],S[13]=D[1]*fn+D[5]*Mn+D[9]*Tn+D[13],S[14]=D[2]*fn+D[6]*Mn+D[10]*Tn+D[14],S[15]=D[3]*fn+D[7]*Mn+D[11]*Tn+D[15]):(ue=D[0],Ae=D[1],Pe=D[2],je=D[3],$e=D[4],ut=D[5],wt=D[6],Mt=D[7],Nt=D[8],Wt=D[9],Ut=D[10],ln=D[11],S[0]=ue,S[1]=Ae,S[2]=Pe,S[3]=je,S[4]=$e,S[5]=ut,S[6]=wt,S[7]=Mt,S[8]=Nt,S[9]=Wt,S[10]=Ut,S[11]=ln,S[12]=ue*fn+$e*Mn+Nt*Tn+D[12],S[13]=Ae*fn+ut*Mn+Wt*Tn+D[13],S[14]=Pe*fn+wt*Mn+Ut*Tn+D[14],S[15]=je*fn+Mt*Mn+ln*Tn+D[15]),S},o.triggerPluginCompletionEvent=va,o.uniqueId=v,o.validateCustomStyleLayer=function(S){var D=[],X=S.id;return X===void 0&&D.push({message:"layers."+X+': missing required property "id"'}),S.render===void 0&&D.push({message:"layers."+X+': missing required method "render"'}),S.renderingMode&&S.renderingMode!=="2d"&&S.renderingMode!=="3d"&&D.push({message:"layers."+X+': property "renderingMode" must be either "2d" or "3d"'}),D},o.validateLight=os,o.validateStyle=so,o.values=function(S){var D=[];for(var X in S)D.push(S[X]);return D},o.vectorTile=uu,o.version=_,o.warnOnce=L,o.webpSupported=te,o.window=r,o.wrap=g}),A(0,function(o){function w(Ge){var Ye=typeof Ge;if(Ye==="number"||Ye==="boolean"||Ye==="string"||Ge==null)return JSON.stringify(Ge);if(Array.isArray(Ge)){for(var Ne="[",We=0,st=Ge;We<st.length;We+=1)Ne+=w(st[We])+",";return Ne+"]"}for(var it=Object.keys(Ge).sort(),Fe="{",Be=0;Be<it.length;Be++)Fe+=JSON.stringify(it[Be])+":"+w(Ge[it[Be]])+",";return Fe+"}"}function _(Ge){for(var Ye="",Ne=0,We=o.refProperties;Ne<We.length;Ne+=1)Ye+="/"+w(Ge[We[Ne]]);return Ye}var p=function(Ge){this.keyCache={},Ge&&this.replace(Ge)};p.prototype.replace=function(Ge){this._layerConfigs={},this._layers={},this.update(Ge,[])},p.prototype.update=function(Ge,Ye){for(var Ne=this,We=0,st=Ge;We<st.length;We+=1){var it=st[We];this._layerConfigs[it.id]=it;var Fe=this._layers[it.id]=o.createStyleLayer(it);Fe._featureFilter=o.featureFilter(Fe.filter),this.keyCache[it.id]&&delete this.keyCache[it.id]}for(var Be=0,at=Ye;Be<at.length;Be+=1){var Ze=at[Be];delete this.keyCache[Ze],delete this._layerConfigs[Ze],delete this._layers[Ze]}this.familiesBySource={};for(var ht=0,vt=function(Pt,Bt){for(var Kt={},sn=0;sn<Pt.length;sn++){var Gt=Bt&&Bt[Pt[sn].id]||_(Pt[sn]);Bt&&(Bt[Pt[sn].id]=Gt);var Yt=Kt[Gt];Yt||(Yt=Kt[Gt]=[]),Yt.push(Pt[sn])}var rn=[];for(var Ln in Kt)rn.push(Kt[Ln]);return rn}(o.values(this._layerConfigs),this.keyCache);ht<vt.length;ht+=1){var mt=vt[ht].map(function(Pt){return Ne._layers[Pt.id]}),ft=mt[0];if(ft.visibility!=="none"){var Et=ft.source||"",Tt=this.familiesBySource[Et];Tt||(Tt=this.familiesBySource[Et]={});var xt=ft.sourceLayer||"_geojsonTileLayer",Ct=Tt[xt];Ct||(Ct=Tt[xt]=[]),Ct.push(mt)}}};var s=function(Ge){var Ye={},Ne=[];for(var We in Ge){var st=Ge[We],it=Ye[We]={};for(var Fe in st){var Be=st[+Fe];if(Be&&Be.bitmap.width!==0&&Be.bitmap.height!==0){var at={x:0,y:0,w:Be.bitmap.width+2,h:Be.bitmap.height+2};Ne.push(at),it[Fe]={rect:at,metrics:Be.metrics}}}}var Ze=o.potpack(Ne),ht=Ze.w,vt=Ze.h,mt=new o.AlphaImage({width:ht||1,height:vt||1});for(var ft in Ge){var Et=Ge[ft];for(var Tt in Et){var xt=Et[+Tt];if(xt&&xt.bitmap.width!==0&&xt.bitmap.height!==0){var Ct=Ye[ft][Tt].rect;o.AlphaImage.copy(xt.bitmap,mt,{x:0,y:0},{x:Ct.x+1,y:Ct.y+1},xt.bitmap)}}}this.image=mt,this.positions=Ye};o.register("GlyphAtlas",s);var n=function(Ge){this.tileID=new o.OverscaledTileID(Ge.tileID.overscaledZ,Ge.tileID.wrap,Ge.tileID.canonical.z,Ge.tileID.canonical.x,Ge.tileID.canonical.y),this.uid=Ge.uid,this.zoom=Ge.zoom,this.pixelRatio=Ge.pixelRatio,this.tileSize=Ge.tileSize,this.source=Ge.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ge.showCollisionBoxes,this.collectResourceTiming=!!Ge.collectResourceTiming,this.returnDependencies=!!Ge.returnDependencies,this.promoteId=Ge.promoteId};function a(Ge,Ye,Ne){for(var We=new o.EvaluationParameters(Ye),st=0,it=Ge;st<it.length;st+=1)it[st].recalculate(We,Ne)}function r(Ge,Ye){var Ne=o.getArrayBuffer(Ge.request,function(We,st,it,Fe){We?Ye(We):st&&Ye(null,{vectorTile:new o.vectorTile.VectorTile(new o.pbf(st)),rawData:st,cacheControl:it,expires:Fe})});return function(){Ne.cancel(),Ye()}}n.prototype.parse=function(Ge,Ye,Ne,We,st){var it=this;this.status="parsing",this.data=Ge,this.collisionBoxArray=new o.CollisionBoxArray;var Fe=new o.DictionaryCoder(Object.keys(Ge.layers).sort()),Be=new o.FeatureIndex(this.tileID,this.promoteId);Be.bucketLayerIDs=[];var at,Ze,ht,vt,mt={},ft={featureIndex:Be,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ne},Et=Ye.familiesBySource[this.source];for(var Tt in Et){var xt=Ge.layers[Tt];if(xt){xt.version===1&&o.warnOnce('Vector tile source "'+this.source+'" layer "'+Tt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Ct=Fe.encode(Tt),Pt=[],Bt=0;Bt<xt.length;Bt++){var Kt=xt.feature(Bt),sn=Be.getId(Kt,Tt);Pt.push({feature:Kt,id:sn,index:Bt,sourceLayerIndex:Ct})}for(var Gt=0,Yt=Et[Tt];Gt<Yt.length;Gt+=1){var rn=Yt[Gt],Ln=rn[0];Ln.minzoom&&this.zoom<Math.floor(Ln.minzoom)||Ln.maxzoom&&this.zoom>=Ln.maxzoom||Ln.visibility!=="none"&&(a(rn,this.zoom,Ne),(mt[Ln.id]=Ln.createBucket({index:Be.bucketLayerIDs.length,layers:rn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ct,sourceID:this.source})).populate(Pt,ft,this.tileID.canonical),Be.bucketLayerIDs.push(rn.map(function(an){return an.id})))}}}var Sn=o.mapObject(ft.glyphDependencies,function(an){return Object.keys(an).map(Number)});Object.keys(Sn).length?We.send("getGlyphs",{uid:this.uid,stacks:Sn},function(an,pn){at||(at=an,Ze=pn,cn.call(it))}):Ze={};var gn=Object.keys(ft.iconDependencies);gn.length?We.send("getImages",{icons:gn,source:this.source,tileID:this.tileID,type:"icons"},function(an,pn){at||(at=an,ht=pn,cn.call(it))}):ht={};var $t=Object.keys(ft.patternDependencies);function cn(){if(at)return st(at);if(Ze&&ht&&vt){var an=new s(Ze),pn=new o.ImageAtlas(ht,vt);for(var An in mt){var Cn=mt[An];Cn instanceof o.SymbolBucket?(a(Cn.layers,this.zoom,Ne),o.performSymbolLayout(Cn,Ze,an.positions,ht,pn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Cn.hasPattern&&(Cn instanceof o.LineBucket||Cn instanceof o.FillBucket||Cn instanceof o.FillExtrusionBucket)&&(a(Cn.layers,this.zoom,Ne),Cn.addFeatures(ft,this.tileID.canonical,pn.patternPositions))}this.status="done",st(null,{buckets:o.values(mt).filter(function(Rn){return!Rn.isEmpty()}),featureIndex:Be,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:an.image,imageAtlas:pn,glyphMap:this.returnDependencies?Ze:null,iconMap:this.returnDependencies?ht:null,glyphPositions:this.returnDependencies?an.positions:null})}}$t.length?We.send("getImages",{icons:$t,source:this.source,tileID:this.tileID,type:"patterns"},function(an,pn){at||(at=an,vt=pn,cn.call(it))}):vt={},cn.call(this)};var i=function(Ge,Ye,Ne,We){this.actor=Ge,this.layerIndex=Ye,this.availableImages=Ne,this.loadVectorData=We||r,this.loading={},this.loaded={}};i.prototype.loadTile=function(Ge,Ye){var Ne=this,We=Ge.uid;this.loading||(this.loading={});var st=!!(Ge&&Ge.request&&Ge.request.collectResourceTiming)&&new o.RequestPerformance(Ge.request),it=this.loading[We]=new n(Ge);it.abort=this.loadVectorData(Ge,function(Fe,Be){if(delete Ne.loading[We],Fe||!Be)return it.status="done",Ne.loaded[We]=it,Ye(Fe);var at=Be.rawData,Ze={};Be.expires&&(Ze.expires=Be.expires),Be.cacheControl&&(Ze.cacheControl=Be.cacheControl);var ht={};if(st){var vt=st.finish();vt&&(ht.resourceTiming=JSON.parse(JSON.stringify(vt)))}it.vectorTile=Be.vectorTile,it.parse(Be.vectorTile,Ne.layerIndex,Ne.availableImages,Ne.actor,function(mt,ft){if(mt||!ft)return Ye(mt);Ye(null,o.extend({rawTileData:at.slice(0)},ft,Ze,ht))}),Ne.loaded=Ne.loaded||{},Ne.loaded[We]=it})},i.prototype.reloadTile=function(Ge,Ye){var Ne=this,We=this.loaded,st=Ge.uid,it=this;if(We&&We[st]){var Fe=We[st];Fe.showCollisionBoxes=Ge.showCollisionBoxes;var Be=function(at,Ze){var ht=Fe.reloadCallback;ht&&(delete Fe.reloadCallback,Fe.parse(Fe.vectorTile,it.layerIndex,Ne.availableImages,it.actor,ht)),Ye(at,Ze)};Fe.status==="parsing"?Fe.reloadCallback=Be:Fe.status==="done"&&(Fe.vectorTile?Fe.parse(Fe.vectorTile,this.layerIndex,this.availableImages,this.actor,Be):Be())}},i.prototype.abortTile=function(Ge,Ye){var Ne=this.loading,We=Ge.uid;Ne&&Ne[We]&&Ne[We].abort&&(Ne[We].abort(),delete Ne[We]),Ye()},i.prototype.removeTile=function(Ge,Ye){var Ne=this.loaded,We=Ge.uid;Ne&&Ne[We]&&delete Ne[We],Ye()};var l=o.window.ImageBitmap,u=function(){this.loaded={}};u.prototype.loadTile=function(Ge,Ye){var Ne=Ge.uid,We=Ge.encoding,st=Ge.rawImageData,it=l&&st instanceof l?this.getImageData(st):st,Fe=new o.DEMData(Ne,it,We);this.loaded=this.loaded||{},this.loaded[Ne]=Fe,Ye(null,Fe)},u.prototype.getImageData=function(Ge){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ge.width,Ge.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ge.width,this.offscreenCanvas.height=Ge.height,this.offscreenCanvasContext.drawImage(Ge,0,0,Ge.width,Ge.height);var Ye=this.offscreenCanvasContext.getImageData(-1,-1,Ge.width+2,Ge.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new o.RGBAImage({width:Ye.width,height:Ye.height},Ye.data)},u.prototype.removeTile=function(Ge){var Ye=this.loaded,Ne=Ge.uid;Ye&&Ye[Ne]&&delete Ye[Ne]};var c=function Ge(Ye,Ne){var We,st=Ye&&Ye.type;if(st==="FeatureCollection")for(We=0;We<Ye.features.length;We++)Ge(Ye.features[We],Ne);else if(st==="GeometryCollection")for(We=0;We<Ye.geometries.length;We++)Ge(Ye.geometries[We],Ne);else if(st==="Feature")Ge(Ye.geometry,Ne);else if(st==="Polygon")g(Ye.coordinates,Ne);else if(st==="MultiPolygon")for(We=0;We<Ye.coordinates.length;We++)g(Ye.coordinates[We],Ne);return Ye};function g(Ge,Ye){if(Ge.length!==0){f(Ge[0],Ye);for(var Ne=1;Ne<Ge.length;Ne++)f(Ge[Ne],!Ye)}}function f(Ge,Ye){for(var Ne=0,We=0,st=Ge.length,it=st-1;We<st;it=We++)Ne+=(Ge[We][0]-Ge[it][0])*(Ge[it][1]+Ge[We][1]);Ne>=0!=!!Ye&&Ge.reverse()}var b=o.vectorTile.VectorTileFeature.prototype.toGeoJSON,v=function(Ge){this._feature=Ge,this.extent=o.EXTENT,this.type=Ge.type,this.properties=Ge.tags,"id"in Ge&&!isNaN(Ge.id)&&(this.id=parseInt(Ge.id,10))};v.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Ge=[],Ye=0,Ne=this._feature.geometry;Ye<Ne.length;Ye+=1){var We=Ne[Ye];Ge.push([new o.Point$1(We[0],We[1])])}return Ge}for(var st=[],it=0,Fe=this._feature.geometry;it<Fe.length;it+=1){for(var Be=[],at=0,Ze=Fe[it];at<Ze.length;at+=1){var ht=Ze[at];Be.push(new o.Point$1(ht[0],ht[1]))}st.push(Be)}return st},v.prototype.toGeoJSON=function(Ge,Ye,Ne){return b.call(this,Ge,Ye,Ne)};var d=function(Ge){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=Ge.length,this._features=Ge};d.prototype.feature=function(Ge){return new v(this._features[Ge])};var m=o.vectorTile.VectorTileFeature,x=y;function y(Ge,Ye){this.options=Ye||{},this.features=Ge,this.length=Ge.length}function T(Ge,Ye){this.id=typeof Ge.id=="number"?Ge.id:void 0,this.type=Ge.type,this.rawGeometry=Ge.type===1?[Ge.geometry]:Ge.geometry,this.properties=Ge.tags,this.extent=Ye||4096}y.prototype.feature=function(Ge){return new T(this.features[Ge],this.options.extent)},T.prototype.loadGeometry=function(){var Ge=this.rawGeometry;this.geometry=[];for(var Ye=0;Ye<Ge.length;Ye++){for(var Ne=Ge[Ye],We=[],st=0;st<Ne.length;st++)We.push(new o.Point$1(Ne[st][0],Ne[st][1]));this.geometry.push(We)}return this.geometry},T.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ge=this.geometry,Ye=1/0,Ne=-1/0,We=1/0,st=-1/0,it=0;it<Ge.length;it++)for(var Fe=Ge[it],Be=0;Be<Fe.length;Be++){var at=Fe[Be];Ye=Math.min(Ye,at.x),Ne=Math.max(Ne,at.x),We=Math.min(We,at.y),st=Math.max(st,at.y)}return[Ye,We,Ne,st]},T.prototype.toGeoJSON=m.prototype.toGeoJSON;var h=P,E=P,k=function(Ge,Ye){Ye=Ye||{};var Ne={};for(var We in Ge)Ne[We]=new x(Ge[We].features,Ye),Ne[We].name=We,Ne[We].version=Ye.version,Ne[We].extent=Ye.extent;return P({layers:Ne})},L=x;function P(Ge){var Ye=new o.pbf;return function(Ne,We){for(var st in Ne.layers)We.writeMessage(3,I,Ne.layers[st])}(Ge,Ye),Ye.finish()}function I(Ge,Ye){var Ne;Ye.writeVarintField(15,Ge.version||1),Ye.writeStringField(1,Ge.name||""),Ye.writeVarintField(5,Ge.extent||4096);var We={keys:[],values:[],keycache:{},valuecache:{}};for(Ne=0;Ne<Ge.length;Ne++)We.feature=Ge.feature(Ne),Ye.writeMessage(2,z,We);var st=We.keys;for(Ne=0;Ne<st.length;Ne++)Ye.writeStringField(3,st[Ne]);var it=We.values;for(Ne=0;Ne<it.length;Ne++)Ye.writeMessage(4,Z,it[Ne])}function z(Ge,Ye){var Ne=Ge.feature;Ne.id!==void 0&&Ye.writeVarintField(1,Ne.id),Ye.writeMessage(2,F,Ge),Ye.writeVarintField(3,Ne.type),Ye.writeMessage(4,j,Ne)}function F(Ge,Ye){var Ne=Ge.feature,We=Ge.keys,st=Ge.values,it=Ge.keycache,Fe=Ge.valuecache;for(var Be in Ne.properties){var at=it[Be];at===void 0&&(We.push(Be),at=We.length-1,it[Be]=at),Ye.writeVarint(at);var Ze=Ne.properties[Be],ht=typeof Ze;ht!=="string"&&ht!=="boolean"&&ht!=="number"&&(Ze=JSON.stringify(Ze));var vt=ht+":"+Ze,mt=Fe[vt];mt===void 0&&(st.push(Ze),mt=st.length-1,Fe[vt]=mt),Ye.writeVarint(mt)}}function U(Ge,Ye){return(Ye<<3)+(7&Ge)}function R(Ge){return Ge<<1^Ge>>31}function j(Ge,Ye){for(var Ne=Ge.loadGeometry(),We=Ge.type,st=0,it=0,Fe=Ne.length,Be=0;Be<Fe;Be++){var at=Ne[Be],Ze=1;We===1&&(Ze=at.length),Ye.writeVarint(U(1,Ze));for(var ht=We===3?at.length-1:at.length,vt=0;vt<ht;vt++){vt===1&&We!==1&&Ye.writeVarint(U(2,ht-1));var mt=at[vt].x-st,ft=at[vt].y-it;Ye.writeVarint(R(mt)),Ye.writeVarint(R(ft)),st+=mt,it+=ft}We===3&&Ye.writeVarint(U(7,1))}}function Z(Ge,Ye){var Ne=typeof Ge;Ne==="string"?Ye.writeStringField(1,Ge):Ne==="boolean"?Ye.writeBooleanField(7,Ge):Ne==="number"&&(Ge%1!=0?Ye.writeDoubleField(3,Ge):Ge<0?Ye.writeSVarintField(6,Ge):Ye.writeVarintField(5,Ge))}function B(Ge,Ye,Ne,We,st,it){if(!(st-We<=Ne)){var Fe=We+st>>1;q(Ge,Ye,Fe,We,st,it%2),B(Ge,Ye,Ne,We,Fe-1,it+1),B(Ge,Ye,Ne,Fe+1,st,it+1)}}function q(Ge,Ye,Ne,We,st,it){for(;st>We;){if(st-We>600){var Fe=st-We+1,Be=Ne-We+1,at=Math.log(Fe),Ze=.5*Math.exp(2*at/3),ht=.5*Math.sqrt(at*Ze*(Fe-Ze)/Fe)*(Be-Fe/2<0?-1:1);q(Ge,Ye,Ne,Math.max(We,Math.floor(Ne-Be*Ze/Fe+ht)),Math.min(st,Math.floor(Ne+(Fe-Be)*Ze/Fe+ht)),it)}var vt=Ye[2*Ne+it],mt=We,ft=st;for(V(Ge,Ye,We,Ne),Ye[2*st+it]>vt&&V(Ge,Ye,We,st);mt<ft;){for(V(Ge,Ye,mt,ft),mt++,ft--;Ye[2*mt+it]<vt;)mt++;for(;Ye[2*ft+it]>vt;)ft--}Ye[2*We+it]===vt?V(Ge,Ye,We,ft):V(Ge,Ye,++ft,st),ft<=Ne&&(We=ft+1),Ne<=ft&&(st=ft-1)}}function V(Ge,Ye,Ne,We){ne(Ge,Ne,We),ne(Ye,2*Ne,2*We),ne(Ye,2*Ne+1,2*We+1)}function ne(Ge,Ye,Ne){var We=Ge[Ye];Ge[Ye]=Ge[Ne],Ge[Ne]=We}function ee(Ge,Ye,Ne,We){var st=Ge-Ne,it=Ye-We;return st*st+it*it}h.fromVectorTileJs=E,h.fromGeojsonVt=k,h.GeoJSONWrapper=L;var $=function(Ge){return Ge[0]},J=function(Ge){return Ge[1]},K=function(Ge,Ye,Ne,We,st){Ye===void 0&&(Ye=$),Ne===void 0&&(Ne=J),We===void 0&&(We=64),st===void 0&&(st=Float64Array),this.nodeSize=We,this.points=Ge;for(var it=Ge.length<65536?Uint16Array:Uint32Array,Fe=this.ids=new it(Ge.length),Be=this.coords=new st(2*Ge.length),at=0;at<Ge.length;at++)Fe[at]=at,Be[2*at]=Ye(Ge[at]),Be[2*at+1]=Ne(Ge[at]);B(Fe,Be,We,0,Fe.length-1,0)};K.prototype.range=function(Ge,Ye,Ne,We){return function(st,it,Fe,Be,at,Ze,ht){for(var vt,mt,ft=[0,st.length-1,0],Et=[];ft.length;){var Tt=ft.pop(),xt=ft.pop(),Ct=ft.pop();if(xt-Ct<=ht)for(var Pt=Ct;Pt<=xt;Pt++)vt=it[2*Pt],mt=it[2*Pt+1],vt>=Fe&&vt<=at&&mt>=Be&&mt<=Ze&&Et.push(st[Pt]);else{var Bt=Math.floor((Ct+xt)/2);vt=it[2*Bt],mt=it[2*Bt+1],vt>=Fe&&vt<=at&&mt>=Be&&mt<=Ze&&Et.push(st[Bt]);var Kt=(Tt+1)%2;(Tt===0?Fe<=vt:Be<=mt)&&(ft.push(Ct),ft.push(Bt-1),ft.push(Kt)),(Tt===0?at>=vt:Ze>=mt)&&(ft.push(Bt+1),ft.push(xt),ft.push(Kt))}}return Et}(this.ids,this.coords,Ge,Ye,Ne,We,this.nodeSize)},K.prototype.within=function(Ge,Ye,Ne){return function(We,st,it,Fe,Be,at){for(var Ze=[0,We.length-1,0],ht=[],vt=Be*Be;Ze.length;){var mt=Ze.pop(),ft=Ze.pop(),Et=Ze.pop();if(ft-Et<=at)for(var Tt=Et;Tt<=ft;Tt++)ee(st[2*Tt],st[2*Tt+1],it,Fe)<=vt&&ht.push(We[Tt]);else{var xt=Math.floor((Et+ft)/2),Ct=st[2*xt],Pt=st[2*xt+1];ee(Ct,Pt,it,Fe)<=vt&&ht.push(We[xt]);var Bt=(mt+1)%2;(mt===0?it-Be<=Ct:Fe-Be<=Pt)&&(Ze.push(Et),Ze.push(xt-1),Ze.push(Bt)),(mt===0?it+Be>=Ct:Fe+Be>=Pt)&&(Ze.push(xt+1),Ze.push(ft),Ze.push(Bt))}}return ht}(this.ids,this.coords,Ge,Ye,Ne,this.nodeSize)};var te={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Ge){return Ge}},ie=function(Ge){this.options=be(Object.create(te),Ge),this.trees=new Array(this.options.maxZoom+1)};function ae(Ge,Ye,Ne,We,st){return{x:Ge,y:Ye,zoom:1/0,id:Ne,parentId:-1,numPoints:We,properties:st}}function se(Ge,Ye){var Ne=Ge.geometry.coordinates,We=Ne[0],st=Ne[1];return{x:ge(We),y:ve(st),zoom:1/0,index:Ye,parentId:-1}}function ce(Ge){return{type:"Feature",id:Ge.id,properties:de(Ge),geometry:{type:"Point",coordinates:[(We=Ge.x,360*(We-.5)),(Ye=Ge.y,Ne=(180-360*Ye)*Math.PI/180,360*Math.atan(Math.exp(Ne))/Math.PI-90)]}};var Ye,Ne,We}function de(Ge){var Ye=Ge.numPoints,Ne=Ye>=1e4?Math.round(Ye/1e3)+"k":Ye>=1e3?Math.round(Ye/100)/10+"k":Ye;return be(be({},Ge.properties),{cluster:!0,cluster_id:Ge.id,point_count:Ye,point_count_abbreviated:Ne})}function ge(Ge){return Ge/360+.5}function ve(Ge){var Ye=Math.sin(Ge*Math.PI/180),Ne=.5-.25*Math.log((1+Ye)/(1-Ye))/Math.PI;return Ne<0?0:Ne>1?1:Ne}function be(Ge,Ye){for(var Ne in Ye)Ge[Ne]=Ye[Ne];return Ge}function me(Ge){return Ge.x}function Se(Ge){return Ge.y}function we(Ge,Ye,Ne,We){for(var st,it=We,Fe=Ne-Ye>>1,Be=Ne-Ye,at=Ge[Ye],Ze=Ge[Ye+1],ht=Ge[Ne],vt=Ge[Ne+1],mt=Ye+3;mt<Ne;mt+=3){var ft=_e(Ge[mt],Ge[mt+1],at,Ze,ht,vt);if(ft>it)st=mt,it=ft;else if(ft===it){var Et=Math.abs(mt-Fe);Et<Be&&(st=mt,Be=Et)}}it>We&&(st-Ye>3&&we(Ge,Ye,st,We),Ge[st+2]=it,Ne-st>3&&we(Ge,st,Ne,We))}function _e(Ge,Ye,Ne,We,st,it){var Fe=st-Ne,Be=it-We;if(Fe!==0||Be!==0){var at=((Ge-Ne)*Fe+(Ye-We)*Be)/(Fe*Fe+Be*Be);at>1?(Ne=st,We=it):at>0&&(Ne+=Fe*at,We+=Be*at)}return(Fe=Ge-Ne)*Fe+(Be=Ye-We)*Be}function oe(Ge,Ye,Ne,We){var st={id:Ge===void 0?null:Ge,type:Ye,geometry:Ne,tags:We,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(it){var Fe=it.geometry,Be=it.type;if(Be==="Point"||Be==="MultiPoint"||Be==="LineString")le(it,Fe);else if(Be==="Polygon"||Be==="MultiLineString")for(var at=0;at<Fe.length;at++)le(it,Fe[at]);else if(Be==="MultiPolygon")for(at=0;at<Fe.length;at++)for(var Ze=0;Ze<Fe[at].length;Ze++)le(it,Fe[at][Ze])}(st),st}function le(Ge,Ye){for(var Ne=0;Ne<Ye.length;Ne+=3)Ge.minX=Math.min(Ge.minX,Ye[Ne]),Ge.minY=Math.min(Ge.minY,Ye[Ne+1]),Ge.maxX=Math.max(Ge.maxX,Ye[Ne]),Ge.maxY=Math.max(Ge.maxY,Ye[Ne+1])}function pe(Ge,Ye,Ne,We){if(Ye.geometry){var st=Ye.geometry.coordinates,it=Ye.geometry.type,Fe=Math.pow(Ne.tolerance/((1<<Ne.maxZoom)*Ne.extent),2),Be=[],at=Ye.id;if(Ne.promoteId?at=Ye.properties[Ne.promoteId]:Ne.generateId&&(at=We||0),it==="Point")Ee(st,Be);else if(it==="MultiPoint")for(var Ze=0;Ze<st.length;Ze++)Ee(st[Ze],Be);else if(it==="LineString")Te(st,Be,Fe,!1);else if(it==="MultiLineString"){if(Ne.lineMetrics){for(Ze=0;Ze<st.length;Ze++)Be=[],Te(st[Ze],Be,Fe,!1),Ge.push(oe(at,"LineString",Be,Ye.properties));return}Me(st,Be,Fe,!1)}else if(it==="Polygon")Me(st,Be,Fe,!0);else{if(it!=="MultiPolygon"){if(it==="GeometryCollection"){for(Ze=0;Ze<Ye.geometry.geometries.length;Ze++)pe(Ge,{id:at,geometry:Ye.geometry.geometries[Ze],properties:Ye.properties},Ne,We);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ze=0;Ze<st.length;Ze++){var ht=[];Me(st[Ze],ht,Fe,!0),Be.push(ht)}}Ge.push(oe(at,it,Be,Ye.properties))}}function Ee(Ge,Ye){Ye.push(Le(Ge[0])),Ye.push(Ie(Ge[1])),Ye.push(0)}function Te(Ge,Ye,Ne,We){for(var st,it,Fe=0,Be=0;Be<Ge.length;Be++){var at=Le(Ge[Be][0]),Ze=Ie(Ge[Be][1]);Ye.push(at),Ye.push(Ze),Ye.push(0),Be>0&&(Fe+=We?(st*Ze-at*it)/2:Math.sqrt(Math.pow(at-st,2)+Math.pow(Ze-it,2))),st=at,it=Ze}var ht=Ye.length-3;Ye[2]=1,we(Ye,0,ht,Ne),Ye[ht+2]=1,Ye.size=Math.abs(Fe),Ye.start=0,Ye.end=Ye.size}function Me(Ge,Ye,Ne,We){for(var st=0;st<Ge.length;st++){var it=[];Te(Ge[st],it,Ne,We),Ye.push(it)}}function Le(Ge){return Ge/360+.5}function Ie(Ge){var Ye=Math.sin(Ge*Math.PI/180),Ne=.5-.25*Math.log((1+Ye)/(1-Ye))/Math.PI;return Ne<0?0:Ne>1?1:Ne}function he(Ge,Ye,Ne,We,st,it,Fe,Be){if(We/=Ye,it>=(Ne/=Ye)&&Fe<We)return Ge;if(Fe<Ne||it>=We)return null;for(var at=[],Ze=0;Ze<Ge.length;Ze++){var ht=Ge[Ze],vt=ht.geometry,mt=ht.type,ft=st===0?ht.minX:ht.minY,Et=st===0?ht.maxX:ht.maxY;if(ft>=Ne&&Et<We)at.push(ht);else if(!(Et<Ne||ft>=We)){var Tt=[];if(mt==="Point"||mt==="MultiPoint")xe(vt,Tt,Ne,We,st);else if(mt==="LineString")ke(vt,Tt,Ne,We,st,!1,Be.lineMetrics);else if(mt==="MultiLineString")Re(vt,Tt,Ne,We,st,!1);else if(mt==="Polygon")Re(vt,Tt,Ne,We,st,!0);else if(mt==="MultiPolygon")for(var xt=0;xt<vt.length;xt++){var Ct=[];Re(vt[xt],Ct,Ne,We,st,!0),Ct.length&&Tt.push(Ct)}if(Tt.length){if(Be.lineMetrics&&mt==="LineString"){for(xt=0;xt<Tt.length;xt++)at.push(oe(ht.id,mt,Tt[xt],ht.tags));continue}mt!=="LineString"&&mt!=="MultiLineString"||(Tt.length===1?(mt="LineString",Tt=Tt[0]):mt="MultiLineString"),mt!=="Point"&&mt!=="MultiPoint"||(mt=Tt.length===3?"Point":"MultiPoint"),at.push(oe(ht.id,mt,Tt,ht.tags))}}}return at.length?at:null}function xe(Ge,Ye,Ne,We,st){for(var it=0;it<Ge.length;it+=3){var Fe=Ge[it+st];Fe>=Ne&&Fe<=We&&(Ye.push(Ge[it]),Ye.push(Ge[it+1]),Ye.push(Ge[it+2]))}}function ke(Ge,Ye,Ne,We,st,it,Fe){for(var Be,at,Ze=ze(Ge),ht=st===0?Ve:qe,vt=Ge.start,mt=0;mt<Ge.length-3;mt+=3){var ft=Ge[mt],Et=Ge[mt+1],Tt=Ge[mt+2],xt=Ge[mt+3],Ct=Ge[mt+4],Pt=st===0?ft:Et,Bt=st===0?xt:Ct,Kt=!1;Fe&&(Be=Math.sqrt(Math.pow(ft-xt,2)+Math.pow(Et-Ct,2))),Pt<Ne?Bt>Ne&&(at=ht(Ze,ft,Et,xt,Ct,Ne),Fe&&(Ze.start=vt+Be*at)):Pt>We?Bt<We&&(at=ht(Ze,ft,Et,xt,Ct,We),Fe&&(Ze.start=vt+Be*at)):Oe(Ze,ft,Et,Tt),Bt<Ne&&Pt>=Ne&&(at=ht(Ze,ft,Et,xt,Ct,Ne),Kt=!0),Bt>We&&Pt<=We&&(at=ht(Ze,ft,Et,xt,Ct,We),Kt=!0),!it&&Kt&&(Fe&&(Ze.end=vt+Be*at),Ye.push(Ze),Ze=ze(Ge)),Fe&&(vt+=Be)}var sn=Ge.length-3;ft=Ge[sn],Et=Ge[sn+1],Tt=Ge[sn+2],(Pt=st===0?ft:Et)>=Ne&&Pt<=We&&Oe(Ze,ft,Et,Tt),sn=Ze.length-3,it&&sn>=3&&(Ze[sn]!==Ze[0]||Ze[sn+1]!==Ze[1])&&Oe(Ze,Ze[0],Ze[1],Ze[2]),Ze.length&&Ye.push(Ze)}function ze(Ge){var Ye=[];return Ye.size=Ge.size,Ye.start=Ge.start,Ye.end=Ge.end,Ye}function Re(Ge,Ye,Ne,We,st,it){for(var Fe=0;Fe<Ge.length;Fe++)ke(Ge[Fe],Ye,Ne,We,st,it,!1)}function Oe(Ge,Ye,Ne,We){Ge.push(Ye),Ge.push(Ne),Ge.push(We)}function Ve(Ge,Ye,Ne,We,st,it){var Fe=(it-Ye)/(We-Ye);return Ge.push(it),Ge.push(Ne+(st-Ne)*Fe),Ge.push(1),Fe}function qe(Ge,Ye,Ne,We,st,it){var Fe=(it-Ne)/(st-Ne);return Ge.push(Ye+(We-Ye)*Fe),Ge.push(it),Ge.push(1),Fe}function Je(Ge,Ye){for(var Ne=[],We=0;We<Ge.length;We++){var st,it=Ge[We],Fe=it.type;if(Fe==="Point"||Fe==="MultiPoint"||Fe==="LineString")st=ot(it.geometry,Ye);else if(Fe==="MultiLineString"||Fe==="Polygon"){st=[];for(var Be=0;Be<it.geometry.length;Be++)st.push(ot(it.geometry[Be],Ye))}else if(Fe==="MultiPolygon")for(st=[],Be=0;Be<it.geometry.length;Be++){for(var at=[],Ze=0;Ze<it.geometry[Be].length;Ze++)at.push(ot(it.geometry[Be][Ze],Ye));st.push(at)}Ne.push(oe(it.id,Fe,st,it.tags))}return Ne}function ot(Ge,Ye){var Ne=[];Ne.size=Ge.size,Ge.start!==void 0&&(Ne.start=Ge.start,Ne.end=Ge.end);for(var We=0;We<Ge.length;We+=3)Ne.push(Ge[We]+Ye,Ge[We+1],Ge[We+2]);return Ne}function rt(Ge,Ye){if(Ge.transformed)return Ge;var Ne,We,st,it=1<<Ge.z,Fe=Ge.x,Be=Ge.y;for(Ne=0;Ne<Ge.features.length;Ne++){var at=Ge.features[Ne],Ze=at.geometry,ht=at.type;if(at.geometry=[],ht===1)for(We=0;We<Ze.length;We+=2)at.geometry.push(dt(Ze[We],Ze[We+1],Ye,it,Fe,Be));else for(We=0;We<Ze.length;We++){var vt=[];for(st=0;st<Ze[We].length;st+=2)vt.push(dt(Ze[We][st],Ze[We][st+1],Ye,it,Fe,Be));at.geometry.push(vt)}}return Ge.transformed=!0,Ge}function dt(Ge,Ye,Ne,We,st,it){return[Math.round(Ne*(Ge*We-st)),Math.round(Ne*(Ye*We-it))]}function _t(Ge,Ye,Ne,We,st){for(var it=Ye===st.maxZoom?0:st.tolerance/((1<<Ye)*st.extent),Fe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ne,y:We,z:Ye,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Be=0;Be<Ge.length;Be++){Fe.numFeatures++,yt(Fe,Ge[Be],it,st);var at=Ge[Be].minX,Ze=Ge[Be].minY,ht=Ge[Be].maxX,vt=Ge[Be].maxY;at<Fe.minX&&(Fe.minX=at),Ze<Fe.minY&&(Fe.minY=Ze),ht>Fe.maxX&&(Fe.maxX=ht),vt>Fe.maxY&&(Fe.maxY=vt)}return Fe}function yt(Ge,Ye,Ne,We){var st=Ye.geometry,it=Ye.type,Fe=[];if(it==="Point"||it==="MultiPoint")for(var Be=0;Be<st.length;Be+=3)Fe.push(st[Be]),Fe.push(st[Be+1]),Ge.numPoints++,Ge.numSimplified++;else if(it==="LineString")et(Fe,st,Ge,Ne,!1,!1);else if(it==="MultiLineString"||it==="Polygon")for(Be=0;Be<st.length;Be++)et(Fe,st[Be],Ge,Ne,it==="Polygon",Be===0);else if(it==="MultiPolygon")for(var at=0;at<st.length;at++){var Ze=st[at];for(Be=0;Be<Ze.length;Be++)et(Fe,Ze[Be],Ge,Ne,!0,Be===0)}if(Fe.length){var ht=Ye.tags||null;if(it==="LineString"&&We.lineMetrics){for(var vt in ht={},Ye.tags)ht[vt]=Ye.tags[vt];ht.mapbox_clip_start=st.start/st.size,ht.mapbox_clip_end=st.end/st.size}var mt={geometry:Fe,type:it==="Polygon"||it==="MultiPolygon"?3:it==="LineString"||it==="MultiLineString"?2:1,tags:ht};Ye.id!==null&&(mt.id=Ye.id),Ge.features.push(mt)}}function et(Ge,Ye,Ne,We,st,it){var Fe=We*We;if(We>0&&Ye.size<(st?Fe:We))Ne.numPoints+=Ye.length/3;else{for(var Be=[],at=0;at<Ye.length;at+=3)(We===0||Ye[at+2]>Fe)&&(Ne.numSimplified++,Be.push(Ye[at]),Be.push(Ye[at+1])),Ne.numPoints++;st&&function(Ze,ht){for(var vt=0,mt=0,ft=Ze.length,Et=ft-2;mt<ft;Et=mt,mt+=2)vt+=(Ze[mt]-Ze[Et])*(Ze[mt+1]+Ze[Et+1]);if(vt>0===ht)for(mt=0,ft=Ze.length;mt<ft/2;mt+=2){var Tt=Ze[mt],xt=Ze[mt+1];Ze[mt]=Ze[ft-2-mt],Ze[mt+1]=Ze[ft-1-mt],Ze[ft-2-mt]=Tt,Ze[ft-1-mt]=xt}}(Be,it),Ge.push(Be)}}function nt(Ge,Ye){var Ne=(Ye=this.options=function(st,it){for(var Fe in it)st[Fe]=it[Fe];return st}(Object.create(this.options),Ye)).debug;if(Ne&&console.time("preprocess data"),Ye.maxZoom<0||Ye.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ye.promoteId&&Ye.generateId)throw new Error("promoteId and generateId cannot be used together.");var We=function(st,it){var Fe=[];if(st.type==="FeatureCollection")for(var Be=0;Be<st.features.length;Be++)pe(Fe,st.features[Be],it,Be);else st.type==="Feature"?pe(Fe,st,it):pe(Fe,{geometry:st},it);return Fe}(Ge,Ye);this.tiles={},this.tileCoords=[],Ne&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ye.indexMaxZoom,Ye.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(We=function(st,it){var Fe=it.buffer/it.extent,Be=st,at=he(st,1,-1-Fe,Fe,0,-1,2,it),Ze=he(st,1,1-Fe,2+Fe,0,-1,2,it);return(at||Ze)&&(Be=he(st,1,-Fe,1+Fe,0,-1,2,it)||[],at&&(Be=Je(at,1).concat(Be)),Ze&&(Be=Be.concat(Je(Ze,-1)))),Be}(We,Ye)).length&&this.splitTile(We,0,0,0),Ne&&(We.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function At(Ge,Ye,Ne){return 32*((1<<Ge)*Ne+Ye)+Ge}function Rt(Ge,Ye){var Ne=Ge.tileID.canonical;if(!this._geoJSONIndex)return Ye(null,null);var We=this._geoJSONIndex.getTile(Ne.z,Ne.x,Ne.y);if(!We)return Ye(null,null);var st=new d(We.features),it=h(st);it.byteOffset===0&&it.byteLength===it.buffer.byteLength||(it=new Uint8Array(it)),Ye(null,{vectorTile:st,rawData:it.buffer})}ie.prototype.load=function(Ge){var Ye=this.options,Ne=Ye.log,We=Ye.minZoom,st=Ye.maxZoom,it=Ye.nodeSize;Ne&&console.time("total time");var Fe="prepare "+Ge.length+" points";Ne&&console.time(Fe),this.points=Ge;for(var Be=[],at=0;at<Ge.length;at++)Ge[at].geometry&&Be.push(se(Ge[at],at));this.trees[st+1]=new K(Be,me,Se,it,Float32Array),Ne&&console.timeEnd(Fe);for(var Ze=st;Ze>=We;Ze--){var ht=+Date.now();Be=this._cluster(Be,Ze),this.trees[Ze]=new K(Be,me,Se,it,Float32Array),Ne&&console.log("z%d: %d clusters in %dms",Ze,Be.length,+Date.now()-ht)}return Ne&&console.timeEnd("total time"),this},ie.prototype.getClusters=function(Ge,Ye){var Ne=((Ge[0]+180)%360+360)%360-180,We=Math.max(-90,Math.min(90,Ge[1])),st=Ge[2]===180?180:((Ge[2]+180)%360+360)%360-180,it=Math.max(-90,Math.min(90,Ge[3]));if(Ge[2]-Ge[0]>=360)Ne=-180,st=180;else if(Ne>st){var Fe=this.getClusters([Ne,We,180,it],Ye),Be=this.getClusters([-180,We,st,it],Ye);return Fe.concat(Be)}for(var at=this.trees[this._limitZoom(Ye)],Ze=[],ht=0,vt=at.range(ge(Ne),ve(it),ge(st),ve(We));ht<vt.length;ht+=1){var mt=vt[ht],ft=at.points[mt];Ze.push(ft.numPoints?ce(ft):this.points[ft.index])}return Ze},ie.prototype.getChildren=function(Ge){var Ye=this._getOriginId(Ge),Ne=this._getOriginZoom(Ge),We="No cluster with the specified id.",st=this.trees[Ne];if(!st)throw new Error(We);var it=st.points[Ye];if(!it)throw new Error(We);for(var Fe=this.options.radius/(this.options.extent*Math.pow(2,Ne-1)),Be=[],at=0,Ze=st.within(it.x,it.y,Fe);at<Ze.length;at+=1){var ht=Ze[at],vt=st.points[ht];vt.parentId===Ge&&Be.push(vt.numPoints?ce(vt):this.points[vt.index])}if(Be.length===0)throw new Error(We);return Be},ie.prototype.getLeaves=function(Ge,Ye,Ne){Ye=Ye||10,Ne=Ne||0;var We=[];return this._appendLeaves(We,Ge,Ye,Ne,0),We},ie.prototype.getTile=function(Ge,Ye,Ne){var We=this.trees[this._limitZoom(Ge)],st=Math.pow(2,Ge),it=this.options,Fe=it.extent,Be=it.radius/Fe,at=(Ne-Be)/st,Ze=(Ne+1+Be)/st,ht={features:[]};return this._addTileFeatures(We.range((Ye-Be)/st,at,(Ye+1+Be)/st,Ze),We.points,Ye,Ne,st,ht),Ye===0&&this._addTileFeatures(We.range(1-Be/st,at,1,Ze),We.points,st,Ne,st,ht),Ye===st-1&&this._addTileFeatures(We.range(0,at,Be/st,Ze),We.points,-1,Ne,st,ht),ht.features.length?ht:null},ie.prototype.getClusterExpansionZoom=function(Ge){for(var Ye=this._getOriginZoom(Ge)-1;Ye<=this.options.maxZoom;){var Ne=this.getChildren(Ge);if(Ye++,Ne.length!==1)break;Ge=Ne[0].properties.cluster_id}return Ye},ie.prototype._appendLeaves=function(Ge,Ye,Ne,We,st){for(var it=0,Fe=this.getChildren(Ye);it<Fe.length;it+=1){var Be=Fe[it],at=Be.properties;if(at&&at.cluster?st+at.point_count<=We?st+=at.point_count:st=this._appendLeaves(Ge,at.cluster_id,Ne,We,st):st<We?st++:Ge.push(Be),Ge.length===Ne)break}return st},ie.prototype._addTileFeatures=function(Ge,Ye,Ne,We,st,it){for(var Fe=0,Be=Ge;Fe<Be.length;Fe+=1){var at=Ye[Be[Fe]],Ze=at.numPoints,ht={type:1,geometry:[[Math.round(this.options.extent*(at.x*st-Ne)),Math.round(this.options.extent*(at.y*st-We))]],tags:Ze?de(at):this.points[at.index].properties},vt=void 0;Ze?vt=at.id:this.options.generateId?vt=at.index:this.points[at.index].id&&(vt=this.points[at.index].id),vt!==void 0&&(ht.id=vt),it.features.push(ht)}},ie.prototype._limitZoom=function(Ge){return Math.max(this.options.minZoom,Math.min(+Ge,this.options.maxZoom+1))},ie.prototype._cluster=function(Ge,Ye){for(var Ne=[],We=this.options,st=We.radius,it=We.extent,Fe=We.reduce,Be=We.minPoints,at=st/(it*Math.pow(2,Ye)),Ze=0;Ze<Ge.length;Ze++){var ht=Ge[Ze];if(!(ht.zoom<=Ye)){ht.zoom=Ye;for(var vt=this.trees[Ye+1],mt=vt.within(ht.x,ht.y,at),ft=ht.numPoints||1,Et=ft,Tt=0,xt=mt;Tt<xt.length;Tt+=1){var Ct=xt[Tt],Pt=vt.points[Ct];Pt.zoom>Ye&&(Et+=Pt.numPoints||1)}if(Et>=Be){for(var Bt=ht.x*ft,Kt=ht.y*ft,sn=Fe&&ft>1?this._map(ht,!0):null,Gt=(Ze<<5)+(Ye+1)+this.points.length,Yt=0,rn=mt;Yt<rn.length;Yt+=1){var Ln=rn[Yt],Sn=vt.points[Ln];if(!(Sn.zoom<=Ye)){Sn.zoom=Ye;var gn=Sn.numPoints||1;Bt+=Sn.x*gn,Kt+=Sn.y*gn,Sn.parentId=Gt,Fe&&(sn||(sn=this._map(ht,!0)),Fe(sn,this._map(Sn)))}}ht.parentId=Gt,Ne.push(ae(Bt/Et,Kt/Et,Gt,Et,sn))}else if(Ne.push(ht),Et>1)for(var $t=0,cn=mt;$t<cn.length;$t+=1){var an=cn[$t],pn=vt.points[an];pn.zoom<=Ye||(pn.zoom=Ye,Ne.push(pn))}}}return Ne},ie.prototype._getOriginId=function(Ge){return Ge-this.points.length>>5},ie.prototype._getOriginZoom=function(Ge){return(Ge-this.points.length)%32},ie.prototype._map=function(Ge,Ye){if(Ge.numPoints)return Ye?be({},Ge.properties):Ge.properties;var Ne=this.points[Ge.index].properties,We=this.options.map(Ne);return Ye&&We===Ne?be({},We):We},nt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},nt.prototype.splitTile=function(Ge,Ye,Ne,We,st,it,Fe){for(var Be=[Ge,Ye,Ne,We],at=this.options,Ze=at.debug;Be.length;){We=Be.pop(),Ne=Be.pop(),Ye=Be.pop(),Ge=Be.pop();var ht=1<<Ye,vt=At(Ye,Ne,We),mt=this.tiles[vt];if(!mt&&(Ze>1&&console.time("creation"),mt=this.tiles[vt]=_t(Ge,Ye,Ne,We,at),this.tileCoords.push({z:Ye,x:Ne,y:We}),Ze)){Ze>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ye,Ne,We,mt.numFeatures,mt.numPoints,mt.numSimplified),console.timeEnd("creation"));var ft="z"+Ye;this.stats[ft]=(this.stats[ft]||0)+1,this.total++}if(mt.source=Ge,st){if(Ye===at.maxZoom||Ye===st)continue;var Et=1<<st-Ye;if(Ne!==Math.floor(it/Et)||We!==Math.floor(Fe/Et))continue}else if(Ye===at.indexMaxZoom||mt.numPoints<=at.indexMaxPoints)continue;if(mt.source=null,Ge.length!==0){Ze>1&&console.time("clipping");var Tt,xt,Ct,Pt,Bt,Kt,sn=.5*at.buffer/at.extent,Gt=.5-sn,Yt=.5+sn,rn=1+sn;Tt=xt=Ct=Pt=null,Bt=he(Ge,ht,Ne-sn,Ne+Yt,0,mt.minX,mt.maxX,at),Kt=he(Ge,ht,Ne+Gt,Ne+rn,0,mt.minX,mt.maxX,at),Ge=null,Bt&&(Tt=he(Bt,ht,We-sn,We+Yt,1,mt.minY,mt.maxY,at),xt=he(Bt,ht,We+Gt,We+rn,1,mt.minY,mt.maxY,at),Bt=null),Kt&&(Ct=he(Kt,ht,We-sn,We+Yt,1,mt.minY,mt.maxY,at),Pt=he(Kt,ht,We+Gt,We+rn,1,mt.minY,mt.maxY,at),Kt=null),Ze>1&&console.timeEnd("clipping"),Be.push(Tt||[],Ye+1,2*Ne,2*We),Be.push(xt||[],Ye+1,2*Ne,2*We+1),Be.push(Ct||[],Ye+1,2*Ne+1,2*We),Be.push(Pt||[],Ye+1,2*Ne+1,2*We+1)}}},nt.prototype.getTile=function(Ge,Ye,Ne){var We=this.options,st=We.extent,it=We.debug;if(Ge<0||Ge>24)return null;var Fe=1<<Ge,Be=At(Ge,Ye=(Ye%Fe+Fe)%Fe,Ne);if(this.tiles[Be])return rt(this.tiles[Be],st);it>1&&console.log("drilling down to z%d-%d-%d",Ge,Ye,Ne);for(var at,Ze=Ge,ht=Ye,vt=Ne;!at&&Ze>0;)Ze--,ht=Math.floor(ht/2),vt=Math.floor(vt/2),at=this.tiles[At(Ze,ht,vt)];return at&&at.source?(it>1&&console.log("found parent tile z%d-%d-%d",Ze,ht,vt),it>1&&console.time("drilling down"),this.splitTile(at.source,Ze,ht,vt,Ge,Ye,Ne),it>1&&console.timeEnd("drilling down"),this.tiles[Be]?rt(this.tiles[Be],st):null):null};var Ft=function(Ge){function Ye(Ne,We,st,it){Ge.call(this,Ne,We,st,Rt),it&&(this.loadGeoJSON=it)}return Ge&&(Ye.__proto__=Ge),Ye.prototype=Object.create(Ge&&Ge.prototype),Ye.prototype.constructor=Ye,Ye.prototype.loadData=function(Ne,We){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=We,this._pendingLoadDataParams=Ne,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ye.prototype._loadData=function(){var Ne=this;if(this._pendingCallback&&this._pendingLoadDataParams){var We=this._pendingCallback,st=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var it=!!(st&&st.request&&st.request.collectResourceTiming)&&new o.RequestPerformance(st.request);this.loadGeoJSON(st,function(Fe,Be){if(Fe||!Be)return We(Fe);if(typeof Be!="object")return We(new Error("Input data given to '"+st.source+"' is not a valid GeoJSON object."));c(Be,!0);try{if(st.filter){var at=o.createExpression(st.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(at.result==="error")throw new Error(at.value.map(function(mt){return mt.key+": "+mt.message}).join(", "));var Ze=Be.features.filter(function(mt){return at.value.evaluate({zoom:0},mt)});Be={type:"FeatureCollection",features:Ze}}Ne._geoJSONIndex=st.cluster?new ie(function(mt){var ft=mt.superclusterOptions,Et=mt.clusterProperties;if(!Et||!ft)return ft;for(var Tt={},xt={},Ct={accumulated:null,zoom:0},Pt={properties:null},Bt=Object.keys(Et),Kt=0,sn=Bt;Kt<sn.length;Kt+=1){var Gt=sn[Kt],Yt=Et[Gt],rn=Yt[0],Ln=Yt[1],Sn=o.createExpression(Ln),gn=o.createExpression(typeof rn=="string"?[rn,["accumulated"],["get",Gt]]:rn);Tt[Gt]=Sn.value,xt[Gt]=gn.value}return ft.map=function($t){Pt.properties=$t;for(var cn={},an=0,pn=Bt;an<pn.length;an+=1){var An=pn[an];cn[An]=Tt[An].evaluate(Ct,Pt)}return cn},ft.reduce=function($t,cn){Pt.properties=cn;for(var an=0,pn=Bt;an<pn.length;an+=1){var An=pn[an];Ct.accumulated=$t[An],$t[An]=xt[An].evaluate(Ct,Pt)}},ft}(st)).load(Be.features):function(mt,ft){return new nt(mt,ft)}(Be,st.geojsonVtOptions)}catch(mt){return We(mt)}Ne.loaded={};var ht={};if(it){var vt=it.finish();vt&&(ht.resourceTiming={},ht.resourceTiming[st.source]=JSON.parse(JSON.stringify(vt)))}We(null,ht)})}},Ye.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Ye.prototype.reloadTile=function(Ne,We){var st=this.loaded,it=Ne.uid;return st&&st[it]?Ge.prototype.reloadTile.call(this,Ne,We):this.loadTile(Ne,We)},Ye.prototype.loadGeoJSON=function(Ne,We){if(Ne.request)o.getJSON(Ne.request,We);else{if(typeof Ne.data!="string")return We(new Error("Input data given to '"+Ne.source+"' is not a valid GeoJSON object."));try{return We(null,JSON.parse(Ne.data))}catch{return We(new Error("Input data given to '"+Ne.source+"' is not a valid GeoJSON object."))}}},Ye.prototype.removeSource=function(Ne,We){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),We()},Ye.prototype.getClusterExpansionZoom=function(Ne,We){try{We(null,this._geoJSONIndex.getClusterExpansionZoom(Ne.clusterId))}catch(st){We(st)}},Ye.prototype.getClusterChildren=function(Ne,We){try{We(null,this._geoJSONIndex.getChildren(Ne.clusterId))}catch(st){We(st)}},Ye.prototype.getClusterLeaves=function(Ne,We){try{We(null,this._geoJSONIndex.getLeaves(Ne.clusterId,Ne.limit,Ne.offset))}catch(st){We(st)}},Ye}(i),It=function(Ge){var Ye=this;this.self=Ge,this.actor=new o.Actor(Ge,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:i,geojson:Ft},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Ne,We){if(Ye.workerSourceTypes[Ne])throw new Error('Worker source with name "'+Ne+'" already registered.');Ye.workerSourceTypes[Ne]=We},this.self.registerRTLTextPlugin=function(Ne){if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=Ne.applyArabicShaping,o.plugin.processBidirectionalText=Ne.processBidirectionalText,o.plugin.processStyledBidirectionalText=Ne.processStyledBidirectionalText}};return It.prototype.setReferrer=function(Ge,Ye){this.referrer=Ye},It.prototype.setImages=function(Ge,Ye,Ne){for(var We in this.availableImages[Ge]=Ye,this.workerSources[Ge]){var st=this.workerSources[Ge][We];for(var it in st)st[it].availableImages=Ye}Ne()},It.prototype.setLayers=function(Ge,Ye,Ne){this.getLayerIndex(Ge).replace(Ye),Ne()},It.prototype.updateLayers=function(Ge,Ye,Ne){this.getLayerIndex(Ge).update(Ye.layers,Ye.removedIds),Ne()},It.prototype.loadTile=function(Ge,Ye,Ne){this.getWorkerSource(Ge,Ye.type,Ye.source).loadTile(Ye,Ne)},It.prototype.loadDEMTile=function(Ge,Ye,Ne){this.getDEMWorkerSource(Ge,Ye.source).loadTile(Ye,Ne)},It.prototype.reloadTile=function(Ge,Ye,Ne){this.getWorkerSource(Ge,Ye.type,Ye.source).reloadTile(Ye,Ne)},It.prototype.abortTile=function(Ge,Ye,Ne){this.getWorkerSource(Ge,Ye.type,Ye.source).abortTile(Ye,Ne)},It.prototype.removeTile=function(Ge,Ye,Ne){this.getWorkerSource(Ge,Ye.type,Ye.source).removeTile(Ye,Ne)},It.prototype.removeDEMTile=function(Ge,Ye){this.getDEMWorkerSource(Ge,Ye.source).removeTile(Ye)},It.prototype.removeSource=function(Ge,Ye,Ne){if(this.workerSources[Ge]&&this.workerSources[Ge][Ye.type]&&this.workerSources[Ge][Ye.type][Ye.source]){var We=this.workerSources[Ge][Ye.type][Ye.source];delete this.workerSources[Ge][Ye.type][Ye.source],We.removeSource!==void 0?We.removeSource(Ye,Ne):Ne()}},It.prototype.loadWorkerSource=function(Ge,Ye,Ne){try{this.self.importScripts(Ye.url),Ne()}catch(We){Ne(We.toString())}},It.prototype.syncRTLPluginState=function(Ge,Ye,Ne){try{o.plugin.setState(Ye);var We=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&We!=null){this.self.importScripts(We);var st=o.plugin.isParsed();Ne(st?void 0:new Error("RTL Text Plugin failed to import scripts from "+We),st)}}catch(it){Ne(it.toString())}},It.prototype.getAvailableImages=function(Ge){var Ye=this.availableImages[Ge];return Ye||(Ye=[]),Ye},It.prototype.getLayerIndex=function(Ge){var Ye=this.layerIndexes[Ge];return Ye||(Ye=this.layerIndexes[Ge]=new p),Ye},It.prototype.getWorkerSource=function(Ge,Ye,Ne){var We=this;if(this.workerSources[Ge]||(this.workerSources[Ge]={}),this.workerSources[Ge][Ye]||(this.workerSources[Ge][Ye]={}),!this.workerSources[Ge][Ye][Ne]){var st={send:function(it,Fe,Be){We.actor.send(it,Fe,Be,Ge)}};this.workerSources[Ge][Ye][Ne]=new this.workerSourceTypes[Ye](st,this.getLayerIndex(Ge),this.getAvailableImages(Ge))}return this.workerSources[Ge][Ye][Ne]},It.prototype.getDEMWorkerSource=function(Ge,Ye){return this.demWorkerSources[Ge]||(this.demWorkerSources[Ge]={}),this.demWorkerSources[Ge][Ye]||(this.demWorkerSources[Ge][Ye]=new u),this.demWorkerSources[Ge][Ye]},It.prototype.enforceCacheSizeLimit=function(Ge,Ye){o.enforceCacheSizeLimit(Ye)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new It(self)),It}),A(0,function(o){var w=o.createCommonjsModule(function(N){function W(H){return!G(H)}function G(H){return typeof window<"u"&&typeof document<"u"?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var re,fe,ye=new Blob([""],{type:"text/javascript"}),Ce=URL.createObjectURL(ye);try{fe=new Worker(Ce),re=!0}catch{re=!1}return fe&&fe.terminate(),URL.revokeObjectURL(Ce),re}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var re=document.createElement("canvas");re.width=re.height=1;var fe=re.getContext("2d");if(!fe)return!1;var ye=fe.getImageData(0,0,1,1);return ye&&ye.width===re.width}()?(Q=H&&H.failIfMajorPerformanceCaveat,C[Q]===void 0&&(C[Q]=function(re){var fe=function(Ce){var De=document.createElement("canvas"),Ue=Object.create(W.webGLContextAttributes);return Ue.failIfMajorPerformanceCaveat=Ce,De.probablySupportsContext?De.probablySupportsContext("webgl",Ue)||De.probablySupportsContext("experimental-webgl",Ue):De.supportsContext?De.supportsContext("webgl",Ue)||De.supportsContext("experimental-webgl",Ue):De.getContext("webgl",Ue)||De.getContext("experimental-webgl",Ue)}(re);if(!fe)return!1;var ye=fe.createShader(fe.VERTEX_SHADER);return!(!ye||fe.isContextLost())&&(fe.shaderSource(ye,"void main() {}"),fe.compileShader(ye),fe.getShaderParameter(ye,fe.COMPILE_STATUS)===!0)}(Q)),C[Q]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var Q}N.exports?N.exports=W:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=W,window.mapboxgl.notSupportedReason=G);var C={};W.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),_={create:function(N,W,G){var C=o.window.document.createElement(N);return W!==void 0&&(C.className=W),G&&G.appendChild(C),C},createNS:function(N,W){return o.window.document.createElementNS(N,W)}},p=o.window.document&&o.window.document.documentElement.style;function s(N){if(!p)return N[0];for(var W=0;W<N.length;W++)if(N[W]in p)return N[W];return N[0]}var n,a=s(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);_.disableDrag=function(){p&&a&&(n=p[a],p[a]="none")},_.enableDrag=function(){p&&a&&(p[a]=n)};var r=s(["transform","WebkitTransform"]);_.setTransform=function(N,W){N.style[r]=W};var i=!1;try{var l=Object.defineProperty({},"passive",{get:function(){i=!0}});o.window.addEventListener("test",l,l),o.window.removeEventListener("test",l,l)}catch{i=!1}_.addEventListener=function(N,W,G,C){C===void 0&&(C={}),"passive"in C&&i?N.addEventListener(W,G,C):N.addEventListener(W,G,C.capture)},_.removeEventListener=function(N,W,G,C){C===void 0&&(C={}),"passive"in C&&i?N.removeEventListener(W,G,C):N.removeEventListener(W,G,C.capture)};var u=function(N){N.preventDefault(),N.stopPropagation(),o.window.removeEventListener("click",u,!0)};function c(N){var W=N.userImage;return!!(W&&W.render&&W.render())&&(N.data.replace(new Uint8Array(W.data.buffer)),!0)}_.suppressClick=function(){o.window.addEventListener("click",u,!0),o.window.setTimeout(function(){o.window.removeEventListener("click",u,!0)},0)},_.mousePos=function(N,W){var G=N.getBoundingClientRect();return new o.Point(W.clientX-G.left-N.clientLeft,W.clientY-G.top-N.clientTop)},_.touchPos=function(N,W){for(var G=N.getBoundingClientRect(),C=[],H=0;H<W.length;H++)C.push(new o.Point(W[H].clientX-G.left-N.clientLeft,W[H].clientY-G.top-N.clientTop));return C},_.mouseButton=function(N){return o.window.InstallTrigger!==void 0&&N.button===2&&N.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:N.button},_.remove=function(N){N.parentNode&&N.parentNode.removeChild(N)};var g=function(N){function W(){N.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.isLoaded=function(){return this.loaded},W.prototype.setLoaded=function(G){if(this.loaded!==G&&(this.loaded=G,G)){for(var C=0,H=this.requestors;C<H.length;C+=1){var Q=H[C],re=Q.ids,fe=Q.callback;this._notify(re,fe)}this.requestors=[]}},W.prototype.getImage=function(G){return this.images[G]},W.prototype.addImage=function(G,C){this._validate(G,C)&&(this.images[G]=C)},W.prototype._validate=function(G,C){var H=!0;return this._validateStretch(C.stretchX,C.data&&C.data.width)||(this.fire(new o.ErrorEvent(new Error('Image "'+G+'" has invalid "stretchX" value'))),H=!1),this._validateStretch(C.stretchY,C.data&&C.data.height)||(this.fire(new o.ErrorEvent(new Error('Image "'+G+'" has invalid "stretchY" value'))),H=!1),this._validateContent(C.content,C)||(this.fire(new o.ErrorEvent(new Error('Image "'+G+'" has invalid "content" value'))),H=!1),H},W.prototype._validateStretch=function(G,C){if(!G)return!0;for(var H=0,Q=0,re=G;Q<re.length;Q+=1){var fe=re[Q];if(fe[0]<H||fe[1]<fe[0]||C<fe[1])return!1;H=fe[1]}return!0},W.prototype._validateContent=function(G,C){return!(G&&(G.length!==4||G[0]<0||C.data.width<G[0]||G[1]<0||C.data.height<G[1]||G[2]<0||C.data.width<G[2]||G[3]<0||C.data.height<G[3]||G[2]<G[0]||G[3]<G[1]))},W.prototype.updateImage=function(G,C){var H=this.images[G];C.version=H.version+1,this.images[G]=C,this.updatedImages[G]=!0},W.prototype.removeImage=function(G){var C=this.images[G];delete this.images[G],delete this.patterns[G],C.userImage&&C.userImage.onRemove&&C.userImage.onRemove()},W.prototype.listImages=function(){return Object.keys(this.images)},W.prototype.getImages=function(G,C){var H=!0;if(!this.isLoaded())for(var Q=0,re=G;Q<re.length;Q+=1){var fe=re[Q];this.images[fe]||(H=!1)}this.isLoaded()||H?this._notify(G,C):this.requestors.push({ids:G,callback:C})},W.prototype._notify=function(G,C){for(var H={},Q=0,re=G;Q<re.length;Q+=1){var fe=re[Q];this.images[fe]||this.fire(new o.Event("styleimagemissing",{id:fe}));var ye=this.images[fe];ye?H[fe]={data:ye.data.clone(),pixelRatio:ye.pixelRatio,sdf:ye.sdf,version:ye.version,stretchX:ye.stretchX,stretchY:ye.stretchY,content:ye.content,hasRenderCallback:!!(ye.userImage&&ye.userImage.render)}:o.warnOnce('Image "'+fe+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}C(null,H)},W.prototype.getPixelSize=function(){var G=this.atlasImage;return{width:G.width,height:G.height}},W.prototype.getPattern=function(G){var C=this.patterns[G],H=this.getImage(G);if(!H)return null;if(C&&C.position.version===H.version)return C.position;if(C)C.position.version=H.version;else{var Q={w:H.data.width+2,h:H.data.height+2,x:0,y:0},re=new o.ImagePosition(Q,H);this.patterns[G]={bin:Q,position:re}}return this._updatePatternAtlas(),this.patterns[G].position},W.prototype.bind=function(G){var C=G.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(G,this.atlasImage,C.RGBA),this.atlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE)},W.prototype._updatePatternAtlas=function(){var G=[];for(var C in this.patterns)G.push(this.patterns[C].bin);var H=o.potpack(G),Q=H.w,re=H.h,fe=this.atlasImage;for(var ye in fe.resize({width:Q||1,height:re||1}),this.patterns){var Ce=this.patterns[ye].bin,De=Ce.x+1,Ue=Ce.y+1,He=this.images[ye].data,tt=He.width,ct=He.height;o.RGBAImage.copy(He,fe,{x:0,y:0},{x:De,y:Ue},{width:tt,height:ct}),o.RGBAImage.copy(He,fe,{x:0,y:ct-1},{x:De,y:Ue-1},{width:tt,height:1}),o.RGBAImage.copy(He,fe,{x:0,y:0},{x:De,y:Ue+ct},{width:tt,height:1}),o.RGBAImage.copy(He,fe,{x:tt-1,y:0},{x:De-1,y:Ue},{width:1,height:ct}),o.RGBAImage.copy(He,fe,{x:0,y:0},{x:De+tt,y:Ue},{width:1,height:ct})}this.dirty=!0},W.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},W.prototype.dispatchRenderCallbacks=function(G){for(var C=0,H=G;C<H.length;C+=1){var Q=H[C];if(!this.callbackDispatchedThisFrame[Q]){this.callbackDispatchedThisFrame[Q]=!0;var re=this.images[Q];c(re)&&this.updateImage(Q,re)}}},W}(o.Evented),f=d,b=d,v=1e20;function d(N,W,G,C,H,Q){this.fontSize=N||24,this.buffer=W===void 0?3:W,this.cutoff=C||.25,this.fontFamily=H||"sans-serif",this.fontWeight=Q||"normal",this.radius=G||8;var re=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=re,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(re*re),this.gridInner=new Float64Array(re*re),this.f=new Float64Array(re),this.d=new Float64Array(re),this.z=new Float64Array(re+1),this.v=new Int16Array(re),this.middle=Math.round(re/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function m(N,W,G,C,H,Q,re){for(var fe=0;fe<W;fe++){for(var ye=0;ye<G;ye++)C[ye]=N[ye*W+fe];for(x(C,H,Q,re,G),ye=0;ye<G;ye++)N[ye*W+fe]=H[ye]}for(ye=0;ye<G;ye++){for(fe=0;fe<W;fe++)C[fe]=N[ye*W+fe];for(x(C,H,Q,re,W),fe=0;fe<W;fe++)N[ye*W+fe]=Math.sqrt(H[fe])}}function x(N,W,G,C,H){G[0]=0,C[0]=-v,C[1]=+v;for(var Q=1,re=0;Q<H;Q++){for(var fe=(N[Q]+Q*Q-(N[G[re]]+G[re]*G[re]))/(2*Q-2*G[re]);fe<=C[re];)re--,fe=(N[Q]+Q*Q-(N[G[re]]+G[re]*G[re]))/(2*Q-2*G[re]);G[++re]=Q,C[re]=fe,C[re+1]=+v}for(Q=0,re=0;Q<H;Q++){for(;C[re+1]<Q;)re++;W[Q]=(Q-G[re])*(Q-G[re])+N[G[re]]}}d.prototype.draw=function(N){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(N,this.buffer,this.middle);for(var W=this.ctx.getImageData(0,0,this.size,this.size),G=new Uint8ClampedArray(this.size*this.size),C=0;C<this.size*this.size;C++){var H=W.data[4*C+3]/255;this.gridOuter[C]=H===1?0:H===0?v:Math.pow(Math.max(0,.5-H),2),this.gridInner[C]=H===1?v:H===0?0:Math.pow(Math.max(0,H-.5),2)}for(m(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),m(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),C=0;C<this.size*this.size;C++){var Q=this.gridOuter[C]-this.gridInner[C];G[C]=Math.max(0,Math.min(255,Math.round(255-255*(Q/this.radius+this.cutoff))))}return G},f.default=b;var y=function(N,W){this.requestManager=N,this.localIdeographFontFamily=W,this.entries={}};y.prototype.setURL=function(N){this.url=N},y.prototype.getGlyphs=function(N,W){var G=this,C=[];for(var H in N)for(var Q=0,re=N[H];Q<re.length;Q+=1){var fe=re[Q];C.push({stack:H,id:fe})}o.asyncAll(C,function(ye,Ce){var De=ye.stack,Ue=ye.id,He=G.entries[De];He||(He=G.entries[De]={glyphs:{},requests:{},ranges:{}});var tt=He.glyphs[Ue];if(tt===void 0){if(tt=G._tinySDF(He,De,Ue))return He.glyphs[Ue]=tt,void Ce(null,{stack:De,id:Ue,glyph:tt});var ct=Math.floor(Ue/256);if(256*ct>65535)Ce(new Error("glyphs > 65535 not supported"));else if(He.ranges[ct])Ce(null,{stack:De,id:Ue,glyph:tt});else{var pt=He.requests[ct];pt||(pt=He.requests[ct]=[],y.loadGlyphRange(De,ct,G.url,G.requestManager,function(kt,Lt){if(Lt){for(var St in Lt)G._doesCharSupportLocalGlyph(+St)||(He.glyphs[+St]=Lt[+St]);He.ranges[ct]=!0}for(var jt=0,zt=pt;jt<zt.length;jt+=1)(0,zt[jt])(kt,Lt);delete He.requests[ct]})),pt.push(function(kt,Lt){kt?Ce(kt):Lt&&Ce(null,{stack:De,id:Ue,glyph:Lt[Ue]||null})})}}else Ce(null,{stack:De,id:Ue,glyph:tt})},function(ye,Ce){if(ye)W(ye);else if(Ce){for(var De={},Ue=0,He=Ce;Ue<He.length;Ue+=1){var tt=He[Ue],ct=tt.stack,pt=tt.id,kt=tt.glyph;(De[ct]||(De[ct]={}))[pt]=kt&&{id:kt.id,bitmap:kt.bitmap.clone(),metrics:kt.metrics}}W(null,De)}})},y.prototype._doesCharSupportLocalGlyph=function(N){return!!this.localIdeographFontFamily&&(o.isChar["CJK Unified Ideographs"](N)||o.isChar["Hangul Syllables"](N)||o.isChar.Hiragana(N)||o.isChar.Katakana(N))},y.prototype._tinySDF=function(N,W,G){var C=this.localIdeographFontFamily;if(C&&this._doesCharSupportLocalGlyph(G)){var H=N.tinySDF;if(!H){var Q="400";/bold/i.test(W)?Q="900":/medium/i.test(W)?Q="500":/light/i.test(W)&&(Q="200"),H=N.tinySDF=new y.TinySDF(24,3,8,.25,C,Q)}return{id:G,bitmap:new o.AlphaImage({width:30,height:30},H.draw(String.fromCharCode(G))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},y.loadGlyphRange=function(N,W,G,C,H){var Q=256*W,re=Q+255,fe=C.transformRequest(C.normalizeGlyphsURL(G).replace("{fontstack}",N).replace("{range}",Q+"-"+re),o.ResourceType.Glyphs);o.getArrayBuffer(fe,function(ye,Ce){if(ye)H(ye);else if(Ce){for(var De={},Ue=0,He=o.parseGlyphPBF(Ce);Ue<He.length;Ue+=1){var tt=He[Ue];De[tt.id]=tt}H(null,De)}})},y.TinySDF=f;var T=function(){this.specification=o.styleSpec.light.position};T.prototype.possiblyEvaluate=function(N,W){return o.sphericalToCartesian(N.expression.evaluate(W))},T.prototype.interpolate=function(N,W,G){return{x:o.number(N.x,W.x,G),y:o.number(N.y,W.y,G),z:o.number(N.z,W.z,G)}};var h=new o.Properties({anchor:new o.DataConstantProperty(o.styleSpec.light.anchor),position:new T,color:new o.DataConstantProperty(o.styleSpec.light.color),intensity:new o.DataConstantProperty(o.styleSpec.light.intensity)}),E="-transition",k=function(N){function W(G){N.call(this),this._transitionable=new o.Transitionable(h),this.setLight(G),this._transitioning=this._transitionable.untransitioned()}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getLight=function(){return this._transitionable.serialize()},W.prototype.setLight=function(G,C){if(C===void 0&&(C={}),!this._validate(o.validateLight,G,C))for(var H in G){var Q=G[H];o.endsWith(H,E)?this._transitionable.setTransition(H.slice(0,-11),Q):this._transitionable.setValue(H,Q)}},W.prototype.updateTransitions=function(G){this._transitioning=this._transitionable.transitioned(G,this._transitioning)},W.prototype.hasTransition=function(){return this._transitioning.hasTransition()},W.prototype.recalculate=function(G){this.properties=this._transitioning.possiblyEvaluate(G)},W.prototype._validate=function(G,C,H){return(!H||H.validate!==!1)&&o.emitValidationErrors(this,G.call(o.validateStyle,o.extend({value:C,style:{glyphs:!0,sprite:!0},styleSpec:o.styleSpec})))},W}(o.Evented),L=function(N,W){this.width=N,this.height=W,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};L.prototype.getDash=function(N,W){var G=N.join(",")+String(W);return this.dashEntry[G]||(this.dashEntry[G]=this.addDash(N,W)),this.dashEntry[G]},L.prototype.getDashRanges=function(N,W,G){var C=[],H=N.length%2==1?-N[N.length-1]*G:0,Q=N[0]*G,re=!0;C.push({left:H,right:Q,isDash:re,zeroLength:N[0]===0});for(var fe=N[0],ye=1;ye<N.length;ye++){re=!re;var Ce=N[ye];H=fe*G,Q=(fe+=Ce)*G,C.push({left:H,right:Q,isDash:re,zeroLength:Ce===0})}return C},L.prototype.addRoundDash=function(N,W,G){for(var C=W/2,H=-G;H<=G;H++)for(var Q=this.nextRow+G+H,re=this.width*Q,fe=0,ye=N[fe],Ce=0;Ce<this.width;Ce++){Ce/ye.right>1&&(ye=N[++fe]);var De=Math.abs(Ce-ye.left),Ue=Math.abs(Ce-ye.right),He=Math.min(De,Ue),tt=void 0,ct=H/G*(C+1);if(ye.isDash){var pt=C-Math.abs(ct);tt=Math.sqrt(He*He+pt*pt)}else tt=C-Math.sqrt(He*He+ct*ct);this.data[re+Ce]=Math.max(0,Math.min(255,tt+128))}},L.prototype.addRegularDash=function(N){for(var W=N.length-1;W>=0;--W){var G=N[W],C=N[W+1];G.zeroLength?N.splice(W,1):C&&C.isDash===G.isDash&&(C.left=G.left,N.splice(W,1))}var H=N[0],Q=N[N.length-1];H.isDash===Q.isDash&&(H.left=Q.left-this.width,Q.right=H.right+this.width);for(var re=this.width*this.nextRow,fe=0,ye=N[fe],Ce=0;Ce<this.width;Ce++){Ce/ye.right>1&&(ye=N[++fe]);var De=Math.abs(Ce-ye.left),Ue=Math.abs(Ce-ye.right),He=Math.min(De,Ue),tt=ye.isDash?He:-He;this.data[re+Ce]=Math.max(0,Math.min(255,tt+128))}},L.prototype.addDash=function(N,W){var G=W?7:0,C=2*G+1;if(this.nextRow+C>this.height)return o.warnOnce("LineAtlas out of space"),null;for(var H=0,Q=0;Q<N.length;Q++)H+=N[Q];if(H!==0){var re=this.width/H,fe=this.getDashRanges(N,this.width,re);W?this.addRoundDash(fe,re,G):this.addRegularDash(fe)}var ye={y:(this.nextRow+G+.5)/this.height,height:2*G/this.height,width:H};return this.nextRow+=C,this.dirty=!0,ye},L.prototype.bind=function(N){var W=N.gl;this.texture?(W.bindTexture(W.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,W.texSubImage2D(W.TEXTURE_2D,0,0,0,this.width,this.height,W.ALPHA,W.UNSIGNED_BYTE,this.data))):(this.texture=W.createTexture(),W.bindTexture(W.TEXTURE_2D,this.texture),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_S,W.REPEAT),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_T,W.REPEAT),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MIN_FILTER,W.LINEAR),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MAG_FILTER,W.LINEAR),W.texImage2D(W.TEXTURE_2D,0,W.ALPHA,this.width,this.height,0,W.ALPHA,W.UNSIGNED_BYTE,this.data))};var P=function N(W,G){this.workerPool=W,this.actors=[],this.currentActor=0,this.id=o.uniqueId();for(var C=this.workerPool.acquire(this.id),H=0;H<C.length;H++){var Q=C[H],re=new N.Actor(Q,G,this.id);re.name="Worker "+H,this.actors.push(re)}};function I(N,W,G){var C=function(H,Q){if(H)return G(H);if(Q){var re=o.pick(o.extend(Q,N),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Q.vector_layers&&(re.vectorLayers=Q.vector_layers,re.vectorLayerIds=re.vectorLayers.map(function(fe){return fe.id})),re.tiles=W.canonicalizeTileset(re,N.url),G(null,re)}};return N.url?o.getJSON(W.transformRequest(W.normalizeSourceURL(N.url),o.ResourceType.Source),C):o.browser.frame(function(){return C(null,N)})}P.prototype.broadcast=function(N,W,G){G=G||function(){},o.asyncAll(this.actors,function(C,H){C.send(N,W,H)},G)},P.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},P.prototype.remove=function(){this.actors.forEach(function(N){N.remove()}),this.actors=[],this.workerPool.release(this.id)},P.Actor=o.Actor;var z=function(N,W,G){this.bounds=o.LngLatBounds.convert(this.validateBounds(N)),this.minzoom=W||0,this.maxzoom=G||24};z.prototype.validateBounds=function(N){return Array.isArray(N)&&N.length===4?[Math.max(-180,N[0]),Math.max(-90,N[1]),Math.min(180,N[2]),Math.min(90,N[3])]:[-180,-90,180,90]},z.prototype.contains=function(N){var W=Math.pow(2,N.z),G=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*W),C=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*W),H=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*W),Q=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*W);return N.x>=G&&N.x<H&&N.y>=C&&N.y<Q};var F=function(N){function W(G,C,H,Q){if(N.call(this),this.id=G,this.dispatcher=H,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(C,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},C),this._collectResourceTiming=C.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Q)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.load=function(){var G=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,function(C,H){G._tileJSONRequest=null,G._loaded=!0,C?G.fire(new o.ErrorEvent(C)):H&&(o.extend(G,H),H.bounds&&(G.tileBounds=new z(H.bounds,G.minzoom,G.maxzoom)),o.postTurnstileEvent(H.tiles,G.map._requestManager._customAccessToken),o.postMapLoadEvent(H.tiles,G.map._getMapId(),G.map._requestManager._skuToken,G.map._requestManager._customAccessToken),G.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),G.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},W.prototype.loaded=function(){return this._loaded},W.prototype.hasTile=function(G){return!this.tileBounds||this.tileBounds.contains(G.canonical)},W.prototype.onAdd=function(G){this.map=G,this.load()},W.prototype.setSourceProperty=function(G){this._tileJSONRequest&&this._tileJSONRequest.cancel(),G(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},W.prototype.setTiles=function(G){var C=this;return this.setSourceProperty(function(){C._options.tiles=G}),this},W.prototype.setUrl=function(G){var C=this;return this.setSourceProperty(function(){C.url=G,C._options.url=G}),this},W.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},W.prototype.serialize=function(){return o.extend({},this._options)},W.prototype.loadTile=function(G,C){var H=this.map._requestManager.normalizeTileURL(G.tileID.canonical.url(this.tiles,this.scheme)),Q={request:this.map._requestManager.transformRequest(H,o.ResourceType.Tile),uid:G.uid,tileID:G.tileID,zoom:G.tileID.overscaledZ,tileSize:this.tileSize*G.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function re(fe,ye){return delete G.request,G.aborted?C(null):fe&&fe.status!==404?C(fe):(ye&&ye.resourceTiming&&(G.resourceTiming=ye.resourceTiming),this.map._refreshExpiredTiles&&ye&&G.setExpiryData(ye),G.loadVectorData(ye,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),C(null),void(G.reloadCallback&&(this.loadTile(G,G.reloadCallback),G.reloadCallback=null)))}Q.request.collectResourceTiming=this._collectResourceTiming,G.actor&&G.state!=="expired"?G.state==="loading"?G.reloadCallback=C:G.request=G.actor.send("reloadTile",Q,re.bind(this)):(G.actor=this.dispatcher.getActor(),G.request=G.actor.send("loadTile",Q,re.bind(this)))},W.prototype.abortTile=function(G){G.request&&(G.request.cancel(),delete G.request),G.actor&&G.actor.send("abortTile",{uid:G.uid,type:this.type,source:this.id},void 0)},W.prototype.unloadTile=function(G){G.unloadVectorData(),G.actor&&G.actor.send("removeTile",{uid:G.uid,type:this.type,source:this.id},void 0)},W.prototype.hasTransition=function(){return!1},W}(o.Evented),U=function(N){function W(G,C,H,Q){N.call(this),this.id=G,this.dispatcher=H,this.setEventedParent(Q),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},C),o.extend(this,o.pick(C,["url","scheme","tileSize"]))}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.load=function(){var G=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,function(C,H){G._tileJSONRequest=null,G._loaded=!0,C?G.fire(new o.ErrorEvent(C)):H&&(o.extend(G,H),H.bounds&&(G.tileBounds=new z(H.bounds,G.minzoom,G.maxzoom)),o.postTurnstileEvent(H.tiles),o.postMapLoadEvent(H.tiles,G.map._getMapId(),G.map._requestManager._skuToken),G.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),G.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},W.prototype.loaded=function(){return this._loaded},W.prototype.onAdd=function(G){this.map=G,this.load()},W.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},W.prototype.serialize=function(){return o.extend({},this._options)},W.prototype.hasTile=function(G){return!this.tileBounds||this.tileBounds.contains(G.canonical)},W.prototype.loadTile=function(G,C){var H=this,Q=this.map._requestManager.normalizeTileURL(G.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);G.request=o.getImage(this.map._requestManager.transformRequest(Q,o.ResourceType.Tile),function(re,fe){if(delete G.request,G.aborted)G.state="unloaded",C(null);else if(re)G.state="errored",C(re);else if(fe){H.map._refreshExpiredTiles&&G.setExpiryData(fe),delete fe.cacheControl,delete fe.expires;var ye=H.map.painter.context,Ce=ye.gl;G.texture=H.map.painter.getTileTexture(fe.width),G.texture?G.texture.update(fe,{useMipmap:!0}):(G.texture=new o.Texture(ye,fe,Ce.RGBA,{useMipmap:!0}),G.texture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST),ye.extTextureFilterAnisotropic&&Ce.texParameterf(Ce.TEXTURE_2D,ye.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ye.extTextureFilterAnisotropicMax)),G.state="loaded",o.cacheEntryPossiblyAdded(H.dispatcher),C(null)}})},W.prototype.abortTile=function(G,C){G.request&&(G.request.cancel(),delete G.request),C()},W.prototype.unloadTile=function(G,C){G.texture&&this.map.painter.saveTileTexture(G.texture),C()},W.prototype.hasTransition=function(){return!1},W}(o.Evented),R=function(N){function W(G,C,H,Q){N.call(this,G,C,H,Q),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},C),this.encoding=C.encoding||"mapbox"}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},W.prototype.loadTile=function(G,C){var H=this.map._requestManager.normalizeTileURL(G.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Q(re,fe){re&&(G.state="errored",C(re)),fe&&(G.dem=fe,G.needsHillshadePrepare=!0,G.state="loaded",C(null))}G.request=o.getImage(this.map._requestManager.transformRequest(H,o.ResourceType.Tile),(function(re,fe){if(delete G.request,G.aborted)G.state="unloaded",C(null);else if(re)G.state="errored",C(re);else if(fe){this.map._refreshExpiredTiles&&G.setExpiryData(fe),delete fe.cacheControl,delete fe.expires;var ye=o.window.ImageBitmap&&fe instanceof o.window.ImageBitmap&&o.offscreenCanvasSupported()?fe:o.browser.getImageData(fe,1),Ce={uid:G.uid,coord:G.tileID,source:this.id,rawImageData:ye,encoding:this.encoding};G.actor&&G.state!=="expired"||(G.actor=this.dispatcher.getActor(),G.actor.send("loadDEMTile",Ce,Q.bind(this)))}}).bind(this)),G.neighboringTiles=this._getNeighboringTiles(G.tileID)},W.prototype._getNeighboringTiles=function(G){var C=G.canonical,H=Math.pow(2,C.z),Q=(C.x-1+H)%H,re=C.x===0?G.wrap-1:G.wrap,fe=(C.x+1+H)%H,ye=C.x+1===H?G.wrap+1:G.wrap,Ce={};return Ce[new o.OverscaledTileID(G.overscaledZ,re,C.z,Q,C.y).key]={backfilled:!1},Ce[new o.OverscaledTileID(G.overscaledZ,ye,C.z,fe,C.y).key]={backfilled:!1},C.y>0&&(Ce[new o.OverscaledTileID(G.overscaledZ,re,C.z,Q,C.y-1).key]={backfilled:!1},Ce[new o.OverscaledTileID(G.overscaledZ,G.wrap,C.z,C.x,C.y-1).key]={backfilled:!1},Ce[new o.OverscaledTileID(G.overscaledZ,ye,C.z,fe,C.y-1).key]={backfilled:!1}),C.y+1<H&&(Ce[new o.OverscaledTileID(G.overscaledZ,re,C.z,Q,C.y+1).key]={backfilled:!1},Ce[new o.OverscaledTileID(G.overscaledZ,G.wrap,C.z,C.x,C.y+1).key]={backfilled:!1},Ce[new o.OverscaledTileID(G.overscaledZ,ye,C.z,fe,C.y+1).key]={backfilled:!1}),Ce},W.prototype.unloadTile=function(G){G.demTexture&&this.map.painter.saveTileTexture(G.demTexture),G.fbo&&(G.fbo.destroy(),delete G.fbo),G.dem&&delete G.dem,delete G.neighboringTiles,G.state="unloaded",G.actor&&G.actor.send("removeDEMTile",{uid:G.uid,source:this.id})},W}(U),j=function(N){function W(G,C,H,Q){N.call(this),this.id=G,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=H.getActor(),this.setEventedParent(Q),this._data=C.data,this._options=o.extend({},C),this._collectResourceTiming=C.collectResourceTiming,this._resourceTiming=[],C.maxzoom!==void 0&&(this.maxzoom=C.maxzoom),C.type&&(this.type=C.type),C.attribution&&(this.attribution=C.attribution),this.promoteId=C.promoteId;var re=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:C.cluster||!1,geojsonVtOptions:{buffer:(C.buffer!==void 0?C.buffer:128)*re,tolerance:(C.tolerance!==void 0?C.tolerance:.375)*re,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:C.lineMetrics||!1,generateId:C.generateId||!1},superclusterOptions:{maxZoom:C.clusterMaxZoom!==void 0?Math.min(C.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,C.clusterMinPoints||2),extent:o.EXTENT,radius:(C.clusterRadius||50)*re,log:!1,generateId:C.generateId||!1},clusterProperties:C.clusterProperties,filter:C.filter},C.workerOptions)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.load=function(){var G=this;this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(C){if(C)G.fire(new o.ErrorEvent(C));else{var H={dataType:"source",sourceDataType:"metadata"};G._collectResourceTiming&&G._resourceTiming&&G._resourceTiming.length>0&&(H.resourceTiming=G._resourceTiming,G._resourceTiming=[]),G.fire(new o.Event("data",H))}})},W.prototype.onAdd=function(G){this.map=G,this.load()},W.prototype.setData=function(G){var C=this;return this._data=G,this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(H){if(H)C.fire(new o.ErrorEvent(H));else{var Q={dataType:"source",sourceDataType:"content"};C._collectResourceTiming&&C._resourceTiming&&C._resourceTiming.length>0&&(Q.resourceTiming=C._resourceTiming,C._resourceTiming=[]),C.fire(new o.Event("data",Q))}}),this},W.prototype.getClusterExpansionZoom=function(G,C){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:G,source:this.id},C),this},W.prototype.getClusterChildren=function(G,C){return this.actor.send("geojson.getClusterChildren",{clusterId:G,source:this.id},C),this},W.prototype.getClusterLeaves=function(G,C,H,Q){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:G,limit:C,offset:H},Q),this},W.prototype._updateWorkerData=function(G){var C=this;this._loaded=!1;var H=o.extend({},this.workerOptions),Q=this._data;typeof Q=="string"?(H.request=this.map._requestManager.transformRequest(o.browser.resolveURL(Q),o.ResourceType.Source),H.request.collectResourceTiming=this._collectResourceTiming):H.data=JSON.stringify(Q),this.actor.send(this.type+".loadData",H,function(re,fe){C._removed||fe&&fe.abandoned||(C._loaded=!0,fe&&fe.resourceTiming&&fe.resourceTiming[C.id]&&(C._resourceTiming=fe.resourceTiming[C.id].slice(0)),C.actor.send(C.type+".coalesce",{source:H.source},null),G(re))})},W.prototype.loaded=function(){return this._loaded},W.prototype.loadTile=function(G,C){var H=this,Q=G.actor?"reloadTile":"loadTile";G.actor=this.actor;var re={type:this.type,uid:G.uid,tileID:G.tileID,zoom:G.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};G.request=this.actor.send(Q,re,function(fe,ye){return delete G.request,G.unloadVectorData(),G.aborted?C(null):fe?C(fe):(G.loadVectorData(ye,H.map.painter,Q==="reloadTile"),C(null))})},W.prototype.abortTile=function(G){G.request&&(G.request.cancel(),delete G.request),G.aborted=!0},W.prototype.unloadTile=function(G){G.unloadVectorData(),this.actor.send("removeTile",{uid:G.uid,type:this.type,source:this.id})},W.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},W.prototype.serialize=function(){return o.extend({},this._options,{type:this.type,data:this._data})},W.prototype.hasTransition=function(){return!1},W}(o.Evented),Z=o.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),B=function(N){function W(G,C,H,Q){N.call(this),this.id=G,this.dispatcher=H,this.coordinates=C.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Q),this.options=C}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.load=function(G,C){var H=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),function(Q,re){H._loaded=!0,Q?H.fire(new o.ErrorEvent(Q)):re&&(H.image=re,G&&(H.coordinates=G),C&&C(),H._finishLoading())})},W.prototype.loaded=function(){return this._loaded},W.prototype.updateImage=function(G){var C=this;return this.image&&G.url?(this.options.url=G.url,this.load(G.coordinates,function(){C.texture=null}),this):this},W.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))},W.prototype.onAdd=function(G){this.map=G,this.load()},W.prototype.setCoordinates=function(G){var C=this;this.coordinates=G;var H=G.map(o.MercatorCoordinate.fromLngLat);this.tileID=function(re){for(var fe=1/0,ye=1/0,Ce=-1/0,De=-1/0,Ue=0,He=re;Ue<He.length;Ue+=1){var tt=He[Ue];fe=Math.min(fe,tt.x),ye=Math.min(ye,tt.y),Ce=Math.max(Ce,tt.x),De=Math.max(De,tt.y)}var ct=Ce-fe,pt=De-ye,kt=Math.max(ct,pt),Lt=Math.max(0,Math.floor(-Math.log(kt)/Math.LN2)),St=Math.pow(2,Lt);return new o.CanonicalTileID(Lt,Math.floor((fe+Ce)/2*St),Math.floor((ye+De)/2*St))}(H),this.minzoom=this.maxzoom=this.tileID.z;var Q=H.map(function(re){return C.tileID.getTilePoint(re)._round()});return this._boundsArray=new o.StructArrayLayout4i8,this._boundsArray.emplaceBack(Q[0].x,Q[0].y,0,0),this._boundsArray.emplaceBack(Q[1].x,Q[1].y,o.EXTENT,0),this._boundsArray.emplaceBack(Q[3].x,Q[3].y,0,o.EXTENT),this._boundsArray.emplaceBack(Q[2].x,Q[2].y,o.EXTENT,o.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this},W.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var G=this.map.painter.context,C=G.gl;for(var H in this.boundsBuffer||(this.boundsBuffer=G.createVertexBuffer(this._boundsArray,Z.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new o.Texture(G,this.image,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE)),this.tiles){var Q=this.tiles[H];Q.state!=="loaded"&&(Q.state="loaded",Q.texture=this.texture)}}},W.prototype.loadTile=function(G,C){this.tileID&&this.tileID.equals(G.tileID.canonical)?(this.tiles[String(G.tileID.wrap)]=G,G.buckets={},C(null)):(G.state="errored",C(null))},W.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},W.prototype.hasTransition=function(){return!1},W}(o.Evented),q=function(N){function W(G,C,H,Q){N.call(this,G,C,H,Q),this.roundZoom=!0,this.type="video",this.options=C}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.load=function(){var G=this;this._loaded=!1;var C=this.options;this.urls=[];for(var H=0,Q=C.urls;H<Q.length;H+=1){var re=Q[H];this.urls.push(this.map._requestManager.transformRequest(re,o.ResourceType.Source).url)}o.getVideo(this.urls,function(fe,ye){G._loaded=!0,fe?G.fire(new o.ErrorEvent(fe)):ye&&(G.video=ye,G.video.loop=!0,G.video.addEventListener("playing",function(){G.map.triggerRepaint()}),G.map&&G.video.play(),G._finishLoading())})},W.prototype.pause=function(){this.video&&this.video.pause()},W.prototype.play=function(){this.video&&this.video.play()},W.prototype.seek=function(G){if(this.video){var C=this.video.seekable;G<C.start(0)||G>C.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+C.start(0)+" and "+C.end(0)+"-second mark."))):this.video.currentTime=G}},W.prototype.getVideo=function(){return this.video},W.prototype.onAdd=function(G){this.map||(this.map=G,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},W.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var G=this.map.painter.context,C=G.gl;for(var H in this.boundsBuffer||(this.boundsBuffer=G.createVertexBuffer(this._boundsArray,Z.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE),C.texSubImage2D(C.TEXTURE_2D,0,0,0,C.RGBA,C.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(G,this.video,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE)),this.tiles){var Q=this.tiles[H];Q.state!=="loaded"&&(Q.state="loaded",Q.texture=this.texture)}}},W.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},W.prototype.hasTransition=function(){return this.video&&!this.video.paused},W}(B),V=function(N){function W(G,C,H,Q){N.call(this,G,C,H,Q),C.coordinates?Array.isArray(C.coordinates)&&C.coordinates.length===4&&!C.coordinates.some(function(re){return!Array.isArray(re)||re.length!==2||re.some(function(fe){return typeof fe!="number"})})||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+G,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+G,null,'missing required property "coordinates"'))),C.animate&&typeof C.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError("sources."+G,null,'optional "animate" property must be a boolean value'))),C.canvas?typeof C.canvas=="string"||C.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+G,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+G,null,'missing required property "canvas"'))),this.options=C,this.animate=C.animate===void 0||C.animate}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},W.prototype.getCanvas=function(){return this.canvas},W.prototype.onAdd=function(G){this.map=G,this.load(),this.canvas&&this.animate&&this.play()},W.prototype.onRemove=function(){this.pause()},W.prototype.prepare=function(){var G=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,G=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,G=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var C=this.map.painter.context,H=C.gl;for(var Q in this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,Z.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(G||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(C,this.canvas,H.RGBA,{premultiply:!0}),this.tiles){var re=this.tiles[Q];re.state!=="loaded"&&(re.state="loaded",re.texture=this.texture)}}},W.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},W.prototype.hasTransition=function(){return this._playing},W.prototype._hasInvalidDimensions=function(){for(var G=0,C=[this.canvas.width,this.canvas.height];G<C.length;G+=1){var H=C[G];if(isNaN(H)||H<=0)return!0}return!1},W}(B),ne={vector:F,raster:U,"raster-dem":R,geojson:j,video:q,image:B,canvas:V};function ee(N,W){var G=o.identity([]);return o.translate(G,G,[1,1,0]),o.scale(G,G,[.5*N.width,.5*N.height,1]),o.multiply(G,G,N.calculatePosMatrix(W.toUnwrapped()))}function $(N,W,G,C,H,Q){var re=function(pt,kt,Lt){if(pt)for(var St=0,jt=pt;St<jt.length;St+=1){var zt=kt[jt[St]];if(zt&&zt.source===Lt&&zt.type==="fill-extrusion")return!0}else for(var Qt in kt){var Zt=kt[Qt];if(Zt.source===Lt&&Zt.type==="fill-extrusion")return!0}return!1}(H&&H.layers,W,N.id),fe=Q.maxPitchScaleFactor(),ye=N.tilesIn(C,fe,re);ye.sort(J);for(var Ce=[],De=0,Ue=ye;De<Ue.length;De+=1){var He=Ue[De];Ce.push({wrappedTileID:He.tileID.wrapped().key,queryResults:He.tile.queryRenderedFeatures(W,G,N._state,He.queryGeometry,He.cameraQueryGeometry,He.scale,H,Q,fe,ee(N.transform,He.tileID))})}var tt=function(pt){for(var kt={},Lt={},St=0,jt=pt;St<jt.length;St+=1){var zt=jt[St],Qt=zt.queryResults,Zt=zt.wrappedTileID,Vt=Lt[Zt]=Lt[Zt]||{};for(var vn in Qt)for(var bn=Qt[vn],On=Vt[vn]=Vt[vn]||{},Dn=kt[vn]=kt[vn]||[],Yn=0,ir=bn;Yn<ir.length;Yn+=1){var gr=ir[Yn];On[gr.featureIndex]||(On[gr.featureIndex]=!0,Dn.push(gr))}}return kt}(Ce);for(var ct in tt)tt[ct].forEach(function(pt){var kt=pt.feature,Lt=N.getFeatureState(kt.layer["source-layer"],kt.id);kt.source=kt.layer.source,kt.layer["source-layer"]&&(kt.sourceLayer=kt.layer["source-layer"]),kt.state=Lt});return tt}function J(N,W){var G=N.tileID,C=W.tileID;return G.overscaledZ-C.overscaledZ||G.canonical.y-C.canonical.y||G.wrap-C.wrap||G.canonical.x-C.canonical.x}var K=function(N,W){this.max=N,this.onRemove=W,this.reset()};K.prototype.reset=function(){for(var N in this.data)for(var W=0,G=this.data[N];W<G.length;W+=1){var C=G[W];C.timeout&&clearTimeout(C.timeout),this.onRemove(C.value)}return this.data={},this.order=[],this},K.prototype.add=function(N,W,G){var C=this,H=N.wrapped().key;this.data[H]===void 0&&(this.data[H]=[]);var Q={value:W,timeout:void 0};if(G!==void 0&&(Q.timeout=setTimeout(function(){C.remove(N,Q)},G)),this.data[H].push(Q),this.order.push(H),this.order.length>this.max){var re=this._getAndRemoveByKey(this.order[0]);re&&this.onRemove(re)}return this},K.prototype.has=function(N){return N.wrapped().key in this.data},K.prototype.getAndRemove=function(N){return this.has(N)?this._getAndRemoveByKey(N.wrapped().key):null},K.prototype._getAndRemoveByKey=function(N){var W=this.data[N].shift();return W.timeout&&clearTimeout(W.timeout),this.data[N].length===0&&delete this.data[N],this.order.splice(this.order.indexOf(N),1),W.value},K.prototype.getByKey=function(N){var W=this.data[N];return W?W[0].value:null},K.prototype.get=function(N){return this.has(N)?this.data[N.wrapped().key][0].value:null},K.prototype.remove=function(N,W){if(!this.has(N))return this;var G=N.wrapped().key,C=W===void 0?0:this.data[G].indexOf(W),H=this.data[G][C];return this.data[G].splice(C,1),H.timeout&&clearTimeout(H.timeout),this.data[G].length===0&&delete this.data[G],this.onRemove(H.value),this.order.splice(this.order.indexOf(G),1),this},K.prototype.setMaxSize=function(N){for(this.max=N;this.order.length>this.max;){var W=this._getAndRemoveByKey(this.order[0]);W&&this.onRemove(W)}return this},K.prototype.filter=function(N){var W=[];for(var G in this.data)for(var C=0,H=this.data[G];C<H.length;C+=1){var Q=H[C];N(Q.value)||W.push(Q)}for(var re=0,fe=W;re<fe.length;re+=1){var ye=fe[re];this.remove(ye.value.tileID,ye)}};var te=function(N,W,G){this.context=N;var C=N.gl;this.buffer=C.createBuffer(),this.dynamicDraw=!!G,this.context.unbindVAO(),N.bindElementBuffer.set(this.buffer),C.bufferData(C.ELEMENT_ARRAY_BUFFER,W.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||delete W.arrayBuffer};te.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},te.prototype.updateData=function(N){var W=this.context.gl;this.context.unbindVAO(),this.bind(),W.bufferSubData(W.ELEMENT_ARRAY_BUFFER,0,N.arrayBuffer)},te.prototype.destroy=function(){var N=this.context.gl;this.buffer&&(N.deleteBuffer(this.buffer),delete this.buffer)};var ie={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ae=function(N,W,G,C){this.length=W.length,this.attributes=G,this.itemSize=W.bytesPerElement,this.dynamicDraw=C,this.context=N;var H=N.gl;this.buffer=H.createBuffer(),N.bindVertexBuffer.set(this.buffer),H.bufferData(H.ARRAY_BUFFER,W.arrayBuffer,this.dynamicDraw?H.DYNAMIC_DRAW:H.STATIC_DRAW),this.dynamicDraw||delete W.arrayBuffer};ae.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ae.prototype.updateData=function(N){var W=this.context.gl;this.bind(),W.bufferSubData(W.ARRAY_BUFFER,0,N.arrayBuffer)},ae.prototype.enableAttributes=function(N,W){for(var G=0;G<this.attributes.length;G++){var C=this.attributes[G],H=W.attributes[C.name];H!==void 0&&N.enableVertexAttribArray(H)}},ae.prototype.setVertexAttribPointers=function(N,W,G){for(var C=0;C<this.attributes.length;C++){var H=this.attributes[C],Q=W.attributes[H.name];Q!==void 0&&N.vertexAttribPointer(Q,H.components,N[ie[H.type]],!1,this.itemSize,H.offset+this.itemSize*(G||0))}},ae.prototype.destroy=function(){var N=this.context.gl;this.buffer&&(N.deleteBuffer(this.buffer),delete this.buffer)};var se=function(N){this.gl=N.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};se.prototype.get=function(){return this.current},se.prototype.set=function(N){},se.prototype.getDefault=function(){return this.default},se.prototype.setDefault=function(){this.set(this.default)};var ce=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return o.Color.transparent},W.prototype.set=function(G){var C=this.current;(G.r!==C.r||G.g!==C.g||G.b!==C.b||G.a!==C.a||this.dirty)&&(this.gl.clearColor(G.r,G.g,G.b,G.a),this.current=G,this.dirty=!1)},W}(se),de=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 1},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.clearDepth(G),this.current=G,this.dirty=!1)},W}(se),ge=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 0},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.clearStencil(G),this.current=G,this.dirty=!1)},W}(se),ve=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return[!0,!0,!0,!0]},W.prototype.set=function(G){var C=this.current;(G[0]!==C[0]||G[1]!==C[1]||G[2]!==C[2]||G[3]!==C[3]||this.dirty)&&(this.gl.colorMask(G[0],G[1],G[2],G[3]),this.current=G,this.dirty=!1)},W}(se),be=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!0},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.depthMask(G),this.current=G,this.dirty=!1)},W}(se),me=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 255},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.stencilMask(G),this.current=G,this.dirty=!1)},W}(se),Se=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},W.prototype.set=function(G){var C=this.current;(G.func!==C.func||G.ref!==C.ref||G.mask!==C.mask||this.dirty)&&(this.gl.stencilFunc(G.func,G.ref,G.mask),this.current=G,this.dirty=!1)},W}(se),we=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var G=this.gl;return[G.KEEP,G.KEEP,G.KEEP]},W.prototype.set=function(G){var C=this.current;(G[0]!==C[0]||G[1]!==C[1]||G[2]!==C[2]||this.dirty)&&(this.gl.stencilOp(G[0],G[1],G[2]),this.current=G,this.dirty=!1)},W}(se),_e=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(G){if(G!==this.current||this.dirty){var C=this.gl;G?C.enable(C.STENCIL_TEST):C.disable(C.STENCIL_TEST),this.current=G,this.dirty=!1}},W}(se),oe=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return[0,1]},W.prototype.set=function(G){var C=this.current;(G[0]!==C[0]||G[1]!==C[1]||this.dirty)&&(this.gl.depthRange(G[0],G[1]),this.current=G,this.dirty=!1)},W}(se),le=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(G){if(G!==this.current||this.dirty){var C=this.gl;G?C.enable(C.DEPTH_TEST):C.disable(C.DEPTH_TEST),this.current=G,this.dirty=!1}},W}(se),pe=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.LESS},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.depthFunc(G),this.current=G,this.dirty=!1)},W}(se),Ee=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(G){if(G!==this.current||this.dirty){var C=this.gl;G?C.enable(C.BLEND):C.disable(C.BLEND),this.current=G,this.dirty=!1}},W}(se),Te=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var G=this.gl;return[G.ONE,G.ZERO]},W.prototype.set=function(G){var C=this.current;(G[0]!==C[0]||G[1]!==C[1]||this.dirty)&&(this.gl.blendFunc(G[0],G[1]),this.current=G,this.dirty=!1)},W}(se),Me=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return o.Color.transparent},W.prototype.set=function(G){var C=this.current;(G.r!==C.r||G.g!==C.g||G.b!==C.b||G.a!==C.a||this.dirty)&&(this.gl.blendColor(G.r,G.g,G.b,G.a),this.current=G,this.dirty=!1)},W}(se),Le=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.FUNC_ADD},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.blendEquation(G),this.current=G,this.dirty=!1)},W}(se),Ie=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(G){if(G!==this.current||this.dirty){var C=this.gl;G?C.enable(C.CULL_FACE):C.disable(C.CULL_FACE),this.current=G,this.dirty=!1}},W}(se),he=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.BACK},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.cullFace(G),this.current=G,this.dirty=!1)},W}(se),xe=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.CCW},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.frontFace(G),this.current=G,this.dirty=!1)},W}(se),ke=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.useProgram(G),this.current=G,this.dirty=!1)},W}(se),ze=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.TEXTURE0},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.activeTexture(G),this.current=G,this.dirty=!1)},W}(se),Re=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var G=this.gl;return[0,0,G.drawingBufferWidth,G.drawingBufferHeight]},W.prototype.set=function(G){var C=this.current;(G[0]!==C[0]||G[1]!==C[1]||G[2]!==C[2]||G[3]!==C[3]||this.dirty)&&(this.gl.viewport(G[0],G[1],G[2],G[3]),this.current=G,this.dirty=!1)},W}(se),Oe=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(G){if(G!==this.current||this.dirty){var C=this.gl;C.bindFramebuffer(C.FRAMEBUFFER,G),this.current=G,this.dirty=!1}},W}(se),Ve=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(G){if(G!==this.current||this.dirty){var C=this.gl;C.bindRenderbuffer(C.RENDERBUFFER,G),this.current=G,this.dirty=!1}},W}(se),qe=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(G){if(G!==this.current||this.dirty){var C=this.gl;C.bindTexture(C.TEXTURE_2D,G),this.current=G,this.dirty=!1}},W}(se),Je=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(G){if(G!==this.current||this.dirty){var C=this.gl;C.bindBuffer(C.ARRAY_BUFFER,G),this.current=G,this.dirty=!1}},W}(se),ot=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(G){var C=this.gl;C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,G),this.current=G,this.dirty=!1},W}(se),rt=function(N){function W(G){N.call(this,G),this.vao=G.extVertexArrayObject}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(G){this.vao&&(G!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(G),this.current=G,this.dirty=!1)},W}(se),dt=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 4},W.prototype.set=function(G){if(G!==this.current||this.dirty){var C=this.gl;C.pixelStorei(C.UNPACK_ALIGNMENT,G),this.current=G,this.dirty=!1}},W}(se),_t=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(G){if(G!==this.current||this.dirty){var C=this.gl;C.pixelStorei(C.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G),this.current=G,this.dirty=!1}},W}(se),yt=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(G){if(G!==this.current||this.dirty){var C=this.gl;C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,G),this.current=G,this.dirty=!1}},W}(se),et=function(N){function W(G,C){N.call(this,G),this.context=G,this.parent=C}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W}(se),nt=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.setDirty=function(){this.dirty=!0},W.prototype.set=function(G){if(G!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var C=this.gl;C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,G,0),this.current=G,this.dirty=!1}},W}(et),At=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.set=function(G){if(G!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var C=this.gl;C.framebufferRenderbuffer(C.FRAMEBUFFER,C.DEPTH_ATTACHMENT,C.RENDERBUFFER,G),this.current=G,this.dirty=!1}},W}(et),Rt=function(N,W,G,C){this.context=N,this.width=W,this.height=G;var H=N.gl,Q=this.framebuffer=H.createFramebuffer();this.colorAttachment=new nt(N,Q),C&&(this.depthAttachment=new At(N,Q))};Rt.prototype.destroy=function(){var N=this.context.gl,W=this.colorAttachment.get();if(W&&N.deleteTexture(W),this.depthAttachment){var G=this.depthAttachment.get();G&&N.deleteRenderbuffer(G)}N.deleteFramebuffer(this.framebuffer)};var Ft=function(N,W,G){this.func=N,this.mask=W,this.range=G};Ft.ReadOnly=!1,Ft.ReadWrite=!0,Ft.disabled=new Ft(519,Ft.ReadOnly,[0,1]);var It=7680,Ge=function(N,W,G,C,H,Q){this.test=N,this.ref=W,this.mask=G,this.fail=C,this.depthFail=H,this.pass=Q};Ge.disabled=new Ge({func:519,mask:0},0,0,It,It,It);var Ye=function(N,W,G){this.blendFunction=N,this.blendColor=W,this.mask=G};Ye.Replace=[1,0],Ye.disabled=new Ye(Ye.Replace,o.Color.transparent,[!1,!1,!1,!1]),Ye.unblended=new Ye(Ye.Replace,o.Color.transparent,[!0,!0,!0,!0]),Ye.alphaBlended=new Ye([1,771],o.Color.transparent,[!0,!0,!0,!0]);var Ne=function(N,W,G){this.enable=N,this.mode=W,this.frontFace=G};Ne.disabled=new Ne(!1,1029,2305),Ne.backCCW=new Ne(!0,1029,2305);var We=function(N){this.gl=N,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ce(this),this.clearDepth=new de(this),this.clearStencil=new ge(this),this.colorMask=new ve(this),this.depthMask=new be(this),this.stencilMask=new me(this),this.stencilFunc=new Se(this),this.stencilOp=new we(this),this.stencilTest=new _e(this),this.depthRange=new oe(this),this.depthTest=new le(this),this.depthFunc=new pe(this),this.blend=new Ee(this),this.blendFunc=new Te(this),this.blendColor=new Me(this),this.blendEquation=new Le(this),this.cullFace=new Ie(this),this.cullFaceSide=new he(this),this.frontFace=new xe(this),this.program=new ke(this),this.activeTexture=new ze(this),this.viewport=new Re(this),this.bindFramebuffer=new Oe(this),this.bindRenderbuffer=new Ve(this),this.bindTexture=new qe(this),this.bindVertexBuffer=new Je(this),this.bindElementBuffer=new ot(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new rt(this),this.pixelStoreUnpack=new dt(this),this.pixelStoreUnpackPremultiplyAlpha=new _t(this),this.pixelStoreUnpackFlipY=new yt(this),this.extTextureFilterAnisotropic=N.getExtension("EXT_texture_filter_anisotropic")||N.getExtension("MOZ_EXT_texture_filter_anisotropic")||N.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=N.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=N.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(N.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=N.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=N.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=N.getParameter(N.MAX_TEXTURE_SIZE)};We.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},We.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},We.prototype.createIndexBuffer=function(N,W){return new te(this,N,W)},We.prototype.createVertexBuffer=function(N,W,G){return new ae(this,N,W,G)},We.prototype.createRenderbuffer=function(N,W,G){var C=this.gl,H=C.createRenderbuffer();return this.bindRenderbuffer.set(H),C.renderbufferStorage(C.RENDERBUFFER,N,W,G),this.bindRenderbuffer.set(null),H},We.prototype.createFramebuffer=function(N,W,G){return new Rt(this,N,W,G)},We.prototype.clear=function(N){var W=N.color,G=N.depth,C=this.gl,H=0;W&&(H|=C.COLOR_BUFFER_BIT,this.clearColor.set(W),this.colorMask.set([!0,!0,!0,!0])),G!==void 0&&(H|=C.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(G),this.depthMask.set(!0)),C.clear(H)},We.prototype.setCullFace=function(N){N.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(N.mode),this.frontFace.set(N.frontFace))},We.prototype.setDepthMode=function(N){N.func!==this.gl.ALWAYS||N.mask?(this.depthTest.set(!0),this.depthFunc.set(N.func),this.depthMask.set(N.mask),this.depthRange.set(N.range)):this.depthTest.set(!1)},We.prototype.setStencilMode=function(N){N.test.func!==this.gl.ALWAYS||N.mask?(this.stencilTest.set(!0),this.stencilMask.set(N.mask),this.stencilOp.set([N.fail,N.depthFail,N.pass]),this.stencilFunc.set({func:N.test.func,ref:N.ref,mask:N.test.mask})):this.stencilTest.set(!1)},We.prototype.setColorMode=function(N){o.deepEqual(N.blendFunction,Ye.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(N.blendFunction),this.blendColor.set(N.blendColor)),this.colorMask.set(N.mask)},We.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var st=function(N){function W(G,C,H){var Q=this;N.call(this),this.id=G,this.dispatcher=H,this.on("data",function(re){re.dataType==="source"&&re.sourceDataType==="metadata"&&(Q._sourceLoaded=!0),Q._sourceLoaded&&!Q._paused&&re.dataType==="source"&&re.sourceDataType==="content"&&(Q.reload(),Q.transform&&Q.update(Q.transform))}),this.on("error",function(){Q._sourceErrored=!0}),this._source=function(re,fe,ye,Ce){var De=new ne[fe.type](re,fe,ye,Ce);if(De.id!==re)throw new Error("Expected Source id to be "+re+" instead of "+De.id);return o.bindAll(["load","abort","unload","serialize","prepare"],De),De}(G,C,H,this),this._tiles={},this._cache=new K(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new o.SourceFeatureState}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.onAdd=function(G){this.map=G,this._maxTileCacheSize=G?G._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(G)},W.prototype.onRemove=function(G){this._source&&this._source.onRemove&&this._source.onRemove(G)},W.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var G in this._tiles){var C=this._tiles[G];if(C.state!=="loaded"&&C.state!=="errored")return!1}return!0},W.prototype.getSource=function(){return this._source},W.prototype.pause=function(){this._paused=!0},W.prototype.resume=function(){if(this._paused){var G=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,G&&this.reload(),this.transform&&this.update(this.transform)}},W.prototype._loadTile=function(G,C){return this._source.loadTile(G,C)},W.prototype._unloadTile=function(G){if(this._source.unloadTile)return this._source.unloadTile(G,function(){})},W.prototype._abortTile=function(G){if(this._source.abortTile)return this._source.abortTile(G,function(){})},W.prototype.serialize=function(){return this._source.serialize()},W.prototype.prepare=function(G){for(var C in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var H=this._tiles[C];H.upload(G),H.prepare(this.map.style.imageManager)}},W.prototype.getIds=function(){return o.values(this._tiles).map(function(G){return G.tileID}).sort(it).map(function(G){return G.key})},W.prototype.getRenderableIds=function(G){var C=this,H=[];for(var Q in this._tiles)this._isIdRenderable(Q,G)&&H.push(this._tiles[Q]);return G?H.sort(function(re,fe){var ye=re.tileID,Ce=fe.tileID,De=new o.Point(ye.canonical.x,ye.canonical.y)._rotate(C.transform.angle),Ue=new o.Point(Ce.canonical.x,Ce.canonical.y)._rotate(C.transform.angle);return ye.overscaledZ-Ce.overscaledZ||Ue.y-De.y||Ue.x-De.x}).map(function(re){return re.tileID.key}):H.map(function(re){return re.tileID}).sort(it).map(function(re){return re.key})},W.prototype.hasRenderableParent=function(G){var C=this.findLoadedParent(G,0);return!!C&&this._isIdRenderable(C.tileID.key)},W.prototype._isIdRenderable=function(G,C){return this._tiles[G]&&this._tiles[G].hasData()&&!this._coveredTiles[G]&&(C||!this._tiles[G].holdingForFade())},W.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var G in this._cache.reset(),this._tiles)this._tiles[G].state!=="errored"&&this._reloadTile(G,"reloading")},W.prototype._reloadTile=function(G,C){var H=this._tiles[G];H&&(H.state!=="loading"&&(H.state=C),this._loadTile(H,this._tileLoaded.bind(this,H,G,C)))},W.prototype._tileLoaded=function(G,C,H,Q){if(Q)return G.state="errored",void(Q.status!==404?this._source.fire(new o.ErrorEvent(Q,{tile:G})):this.update(this.transform));G.timeAdded=o.browser.now(),H==="expired"&&(G.refreshedUponExpiration=!0),this._setTileReloadTimer(C,G),this.getSource().type==="raster-dem"&&G.dem&&this._backfillDEM(G),this._state.initializeTileState(G,this.map?this.map.painter:null),this._source.fire(new o.Event("data",{dataType:"source",tile:G,coord:G.tileID}))},W.prototype._backfillDEM=function(G){for(var C=this.getRenderableIds(),H=0;H<C.length;H++){var Q=C[H];if(G.neighboringTiles&&G.neighboringTiles[Q]){var re=this.getTileByID(Q);fe(G,re),fe(re,G)}}function fe(ye,Ce){ye.needsHillshadePrepare=!0;var De=Ce.tileID.canonical.x-ye.tileID.canonical.x,Ue=Ce.tileID.canonical.y-ye.tileID.canonical.y,He=Math.pow(2,ye.tileID.canonical.z),tt=Ce.tileID.key;De===0&&Ue===0||Math.abs(Ue)>1||(Math.abs(De)>1&&(Math.abs(De+He)===1?De+=He:Math.abs(De-He)===1&&(De-=He)),Ce.dem&&ye.dem&&(ye.dem.backfillBorder(Ce.dem,De,Ue),ye.neighboringTiles&&ye.neighboringTiles[tt]&&(ye.neighboringTiles[tt].backfilled=!0)))}},W.prototype.getTile=function(G){return this.getTileByID(G.key)},W.prototype.getTileByID=function(G){return this._tiles[G]},W.prototype._retainLoadedChildren=function(G,C,H,Q){for(var re in this._tiles){var fe=this._tiles[re];if(!(Q[re]||!fe.hasData()||fe.tileID.overscaledZ<=C||fe.tileID.overscaledZ>H)){for(var ye=fe.tileID;fe&&fe.tileID.overscaledZ>C+1;){var Ce=fe.tileID.scaledTo(fe.tileID.overscaledZ-1);(fe=this._tiles[Ce.key])&&fe.hasData()&&(ye=Ce)}for(var De=ye;De.overscaledZ>C;)if(G[(De=De.scaledTo(De.overscaledZ-1)).key]){Q[ye.key]=ye;break}}}},W.prototype.findLoadedParent=function(G,C){if(G.key in this._loadedParentTiles){var H=this._loadedParentTiles[G.key];return H&&H.tileID.overscaledZ>=C?H:null}for(var Q=G.overscaledZ-1;Q>=C;Q--){var re=G.scaledTo(Q),fe=this._getLoadedTile(re);if(fe)return fe}},W.prototype._getLoadedTile=function(G){var C=this._tiles[G.key];return C&&C.hasData()?C:this._cache.getByKey(G.wrapped().key)},W.prototype.updateCacheSize=function(G){var C=(Math.ceil(G.width/this._source.tileSize)+1)*(Math.ceil(G.height/this._source.tileSize)+1),H=Math.floor(5*C),Q=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,H):H;this._cache.setMaxSize(Q)},W.prototype.handleWrapJump=function(G){var C=(G-(this._prevLng===void 0?G:this._prevLng))/360,H=Math.round(C);if(this._prevLng=G,H){var Q={};for(var re in this._tiles){var fe=this._tiles[re];fe.tileID=fe.tileID.unwrapTo(fe.tileID.wrap+H),Q[fe.tileID.key]=fe}for(var ye in this._tiles=Q,this._timers)clearTimeout(this._timers[ye]),delete this._timers[ye];for(var Ce in this._tiles){var De=this._tiles[Ce];this._setTileReloadTimer(Ce,De)}}},W.prototype.update=function(G){var C=this;if(this.transform=G,this._sourceLoaded&&!this._paused){var H;this.updateCacheSize(G),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?H=G.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Vt){return new o.OverscaledTileID(Vt.canonical.z,Vt.wrap,Vt.canonical.z,Vt.canonical.x,Vt.canonical.y)}):(H=G.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(H=H.filter(function(Vt){return C._source.hasTile(Vt)}))):H=[];var Q=G.coveringZoomLevel(this._source),re=Math.max(Q-W.maxOverzooming,this._source.minzoom),fe=Math.max(Q+W.maxUnderzooming,this._source.minzoom),ye=this._updateRetainedTiles(H,Q);if(Fe(this._source.type)){for(var Ce={},De={},Ue=0,He=Object.keys(ye);Ue<He.length;Ue+=1){var tt=He[Ue],ct=ye[tt],pt=this._tiles[tt];if(pt&&!(pt.fadeEndTime&&pt.fadeEndTime<=o.browser.now())){var kt=this.findLoadedParent(ct,re);kt&&(this._addTile(kt.tileID),Ce[kt.tileID.key]=kt.tileID),De[tt]=ct}}for(var Lt in this._retainLoadedChildren(De,Q,fe,ye),Ce)ye[Lt]||(this._coveredTiles[Lt]=!0,ye[Lt]=Ce[Lt])}for(var St in ye)this._tiles[St].clearFadeHold();for(var jt=0,zt=o.keysDifference(this._tiles,ye);jt<zt.length;jt+=1){var Qt=zt[jt],Zt=this._tiles[Qt];Zt.hasSymbolBuckets&&!Zt.holdingForFade()?Zt.setHoldDuration(this.map._fadeDuration):Zt.hasSymbolBuckets&&!Zt.symbolFadeFinished()||this._removeTile(Qt)}this._updateLoadedParentTileCache()}},W.prototype.releaseSymbolFadeTiles=function(){for(var G in this._tiles)this._tiles[G].holdingForFade()&&this._removeTile(G)},W.prototype._updateRetainedTiles=function(G,C){for(var H={},Q={},re=Math.max(C-W.maxOverzooming,this._source.minzoom),fe=Math.max(C+W.maxUnderzooming,this._source.minzoom),ye={},Ce=0,De=G;Ce<De.length;Ce+=1){var Ue=De[Ce],He=this._addTile(Ue);H[Ue.key]=Ue,He.hasData()||C<this._source.maxzoom&&(ye[Ue.key]=Ue)}this._retainLoadedChildren(ye,C,fe,H);for(var tt=0,ct=G;tt<ct.length;tt+=1){var pt=ct[tt],kt=this._tiles[pt.key];if(!kt.hasData()){if(C+1>this._source.maxzoom){var Lt=pt.children(this._source.maxzoom)[0],St=this.getTile(Lt);if(St&&St.hasData()){H[Lt.key]=Lt;continue}}else{var jt=pt.children(this._source.maxzoom);if(H[jt[0].key]&&H[jt[1].key]&&H[jt[2].key]&&H[jt[3].key])continue}for(var zt=kt.wasRequested(),Qt=pt.overscaledZ-1;Qt>=re;--Qt){var Zt=pt.scaledTo(Qt);if(Q[Zt.key]||(Q[Zt.key]=!0,!(kt=this.getTile(Zt))&&zt&&(kt=this._addTile(Zt)),kt&&(H[Zt.key]=Zt,zt=kt.wasRequested(),kt.hasData())))break}}}return H},W.prototype._updateLoadedParentTileCache=function(){for(var G in this._loadedParentTiles={},this._tiles){for(var C=[],H=void 0,Q=this._tiles[G].tileID;Q.overscaledZ>0;){if(Q.key in this._loadedParentTiles){H=this._loadedParentTiles[Q.key];break}C.push(Q.key);var re=Q.scaledTo(Q.overscaledZ-1);if(H=this._getLoadedTile(re))break;Q=re}for(var fe=0,ye=C;fe<ye.length;fe+=1){var Ce=ye[fe];this._loadedParentTiles[Ce]=H}}},W.prototype._addTile=function(G){var C=this._tiles[G.key];if(C)return C;(C=this._cache.getAndRemove(G))&&(this._setTileReloadTimer(G.key,C),C.tileID=G,this._state.initializeTileState(C,this.map?this.map.painter:null),this._cacheTimers[G.key]&&(clearTimeout(this._cacheTimers[G.key]),delete this._cacheTimers[G.key],this._setTileReloadTimer(G.key,C)));var H=!!C;return H||(C=new o.Tile(G,this._source.tileSize*G.overscaleFactor()),this._loadTile(C,this._tileLoaded.bind(this,C,G.key,C.state))),C?(C.uses++,this._tiles[G.key]=C,H||this._source.fire(new o.Event("dataloading",{tile:C,coord:C.tileID,dataType:"source"})),C):null},W.prototype._setTileReloadTimer=function(G,C){var H=this;G in this._timers&&(clearTimeout(this._timers[G]),delete this._timers[G]);var Q=C.getExpiryTimeout();Q&&(this._timers[G]=setTimeout(function(){H._reloadTile(G,"expired"),delete H._timers[G]},Q))},W.prototype._removeTile=function(G){var C=this._tiles[G];C&&(C.uses--,delete this._tiles[G],this._timers[G]&&(clearTimeout(this._timers[G]),delete this._timers[G]),C.uses>0||(C.hasData()&&C.state!=="reloading"?this._cache.add(C.tileID,C,C.getExpiryTimeout()):(C.aborted=!0,this._abortTile(C),this._unloadTile(C))))},W.prototype.clearTiles=function(){for(var G in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(G);this._cache.reset()},W.prototype.tilesIn=function(G,C,H){var Q=this,re=[],fe=this.transform;if(!fe)return re;for(var ye=H?fe.getCameraQueryGeometry(G):G,Ce=G.map(function(Qt){return fe.pointCoordinate(Qt)}),De=ye.map(function(Qt){return fe.pointCoordinate(Qt)}),Ue=this.getIds(),He=1/0,tt=1/0,ct=-1/0,pt=-1/0,kt=0,Lt=De;kt<Lt.length;kt+=1){var St=Lt[kt];He=Math.min(He,St.x),tt=Math.min(tt,St.y),ct=Math.max(ct,St.x),pt=Math.max(pt,St.y)}for(var jt=function(Qt){var Zt=Q._tiles[Ue[Qt]];if(!Zt.holdingForFade()){var Vt=Zt.tileID,vn=Math.pow(2,fe.zoom-Zt.tileID.overscaledZ),bn=C*Zt.queryPadding*o.EXTENT/Zt.tileSize/vn,On=[Vt.getTilePoint(new o.MercatorCoordinate(He,tt)),Vt.getTilePoint(new o.MercatorCoordinate(ct,pt))];if(On[0].x-bn<o.EXTENT&&On[0].y-bn<o.EXTENT&&On[1].x+bn>=0&&On[1].y+bn>=0){var Dn=Ce.map(function(ir){return Vt.getTilePoint(ir)}),Yn=De.map(function(ir){return Vt.getTilePoint(ir)});re.push({tile:Zt,tileID:Vt,queryGeometry:Dn,cameraQueryGeometry:Yn,scale:vn})}}},zt=0;zt<Ue.length;zt++)jt(zt);return re},W.prototype.getVisibleCoordinates=function(G){for(var C=this,H=this.getRenderableIds(G).map(function(ye){return C._tiles[ye].tileID}),Q=0,re=H;Q<re.length;Q+=1){var fe=re[Q];fe.posMatrix=this.transform.calculatePosMatrix(fe.toUnwrapped())}return H},W.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Fe(this._source.type))for(var G in this._tiles){var C=this._tiles[G];if(C.fadeEndTime!==void 0&&C.fadeEndTime>=o.browser.now())return!0}return!1},W.prototype.setFeatureState=function(G,C,H){G=G||"_geojsonTileLayer",this._state.updateState(G,C,H)},W.prototype.removeFeatureState=function(G,C,H){G=G||"_geojsonTileLayer",this._state.removeFeatureState(G,C,H)},W.prototype.getFeatureState=function(G,C){return G=G||"_geojsonTileLayer",this._state.getState(G,C)},W.prototype.setDependencies=function(G,C,H){var Q=this._tiles[G];Q&&Q.setDependencies(C,H)},W.prototype.reloadTilesForDependencies=function(G,C){for(var H in this._tiles)this._tiles[H].hasDependency(G,C)&&this._reloadTile(H,"reloading");this._cache.filter(function(Q){return!Q.hasDependency(G,C)})},W}(o.Evented);function it(N,W){var G=Math.abs(2*N.wrap)-+(N.wrap<0),C=Math.abs(2*W.wrap)-+(W.wrap<0);return N.overscaledZ-W.overscaledZ||C-G||W.canonical.y-N.canonical.y||W.canonical.x-N.canonical.x}function Fe(N){return N==="raster"||N==="image"||N==="video"}function Be(){return new o.window.Worker(lt.workerUrl)}st.maxOverzooming=10,st.maxUnderzooming=3;var at="mapboxgl_preloaded_worker_pool",Ze=function(){this.active={}};Ze.prototype.acquire=function(N){if(!this.workers)for(this.workers=[];this.workers.length<Ze.workerCount;)this.workers.push(new Be);return this.active[N]=!0,this.workers.slice()},Ze.prototype.release=function(N){delete this.active[N],this.numActive()===0&&(this.workers.forEach(function(W){W.terminate()}),this.workers=null)},Ze.prototype.isPreloaded=function(){return!!this.active[at]},Ze.prototype.numActive=function(){return Object.keys(this.active).length};var ht,vt=Math.floor(o.browser.hardwareConcurrency/2);function mt(){return ht||(ht=new Ze),ht}function ft(N,W){var G={};for(var C in N)C!=="ref"&&(G[C]=N[C]);return o.refProperties.forEach(function(H){H in W&&(G[H]=W[H])}),G}function Et(N){N=N.slice();for(var W=Object.create(null),G=0;G<N.length;G++)W[N[G].id]=N[G];for(var C=0;C<N.length;C++)"ref"in N[C]&&(N[C]=ft(N[C],W[N[C].ref]));return N}Ze.workerCount=Math.max(Math.min(vt,6),1);var Tt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function xt(N,W,G){G.push({command:Tt.addSource,args:[N,W[N]]})}function Ct(N,W,G){W.push({command:Tt.removeSource,args:[N]}),G[N]=!0}function Pt(N,W,G,C){Ct(N,G,C),xt(N,W,G)}function Bt(N,W,G){var C;for(C in N[G])if(N[G].hasOwnProperty(C)&&C!=="data"&&!o.deepEqual(N[G][C],W[G][C]))return!1;for(C in W[G])if(W[G].hasOwnProperty(C)&&C!=="data"&&!o.deepEqual(N[G][C],W[G][C]))return!1;return!0}function Kt(N,W,G,C,H,Q){var re;for(re in W=W||{},N=N||{})N.hasOwnProperty(re)&&(o.deepEqual(N[re],W[re])||G.push({command:Q,args:[C,re,W[re],H]}));for(re in W)W.hasOwnProperty(re)&&!N.hasOwnProperty(re)&&(o.deepEqual(N[re],W[re])||G.push({command:Q,args:[C,re,W[re],H]}))}function sn(N){return N.id}function Gt(N,W){return N[W.id]=W,N}function Yt(N,W){if(!N)return[{command:Tt.setStyle,args:[W]}];var G=[];try{if(!o.deepEqual(N.version,W.version))return[{command:Tt.setStyle,args:[W]}];o.deepEqual(N.center,W.center)||G.push({command:Tt.setCenter,args:[W.center]}),o.deepEqual(N.zoom,W.zoom)||G.push({command:Tt.setZoom,args:[W.zoom]}),o.deepEqual(N.bearing,W.bearing)||G.push({command:Tt.setBearing,args:[W.bearing]}),o.deepEqual(N.pitch,W.pitch)||G.push({command:Tt.setPitch,args:[W.pitch]}),o.deepEqual(N.sprite,W.sprite)||G.push({command:Tt.setSprite,args:[W.sprite]}),o.deepEqual(N.glyphs,W.glyphs)||G.push({command:Tt.setGlyphs,args:[W.glyphs]}),o.deepEqual(N.transition,W.transition)||G.push({command:Tt.setTransition,args:[W.transition]}),o.deepEqual(N.light,W.light)||G.push({command:Tt.setLight,args:[W.light]});var C={},H=[];(function(re,fe,ye,Ce){var De;for(De in fe=fe||{},re=re||{})re.hasOwnProperty(De)&&(fe.hasOwnProperty(De)||Ct(De,ye,Ce));for(De in fe)fe.hasOwnProperty(De)&&(re.hasOwnProperty(De)?o.deepEqual(re[De],fe[De])||(re[De].type==="geojson"&&fe[De].type==="geojson"&&Bt(re,fe,De)?ye.push({command:Tt.setGeoJSONSourceData,args:[De,fe[De].data]}):Pt(De,fe,ye,Ce)):xt(De,fe,ye))})(N.sources,W.sources,H,C);var Q=[];N.layers&&N.layers.forEach(function(re){C[re.source]?G.push({command:Tt.removeLayer,args:[re.id]}):Q.push(re)}),G=G.concat(H),function(re,fe,ye){fe=fe||[];var Ce,De,Ue,He,tt,ct,pt,kt=(re=re||[]).map(sn),Lt=fe.map(sn),St=re.reduce(Gt,{}),jt=fe.reduce(Gt,{}),zt=kt.slice(),Qt=Object.create(null);for(Ce=0,De=0;Ce<kt.length;Ce++)Ue=kt[Ce],jt.hasOwnProperty(Ue)?De++:(ye.push({command:Tt.removeLayer,args:[Ue]}),zt.splice(zt.indexOf(Ue,De),1));for(Ce=0,De=0;Ce<Lt.length;Ce++)Ue=Lt[Lt.length-1-Ce],zt[zt.length-1-Ce]!==Ue&&(St.hasOwnProperty(Ue)?(ye.push({command:Tt.removeLayer,args:[Ue]}),zt.splice(zt.lastIndexOf(Ue,zt.length-De),1)):De++,ct=zt[zt.length-Ce],ye.push({command:Tt.addLayer,args:[jt[Ue],ct]}),zt.splice(zt.length-Ce,0,Ue),Qt[Ue]=!0);for(Ce=0;Ce<Lt.length;Ce++)if(He=St[Ue=Lt[Ce]],tt=jt[Ue],!Qt[Ue]&&!o.deepEqual(He,tt))if(o.deepEqual(He.source,tt.source)&&o.deepEqual(He["source-layer"],tt["source-layer"])&&o.deepEqual(He.type,tt.type)){for(pt in Kt(He.layout,tt.layout,ye,Ue,null,Tt.setLayoutProperty),Kt(He.paint,tt.paint,ye,Ue,null,Tt.setPaintProperty),o.deepEqual(He.filter,tt.filter)||ye.push({command:Tt.setFilter,args:[Ue,tt.filter]}),o.deepEqual(He.minzoom,tt.minzoom)&&o.deepEqual(He.maxzoom,tt.maxzoom)||ye.push({command:Tt.setLayerZoomRange,args:[Ue,tt.minzoom,tt.maxzoom]}),He)He.hasOwnProperty(pt)&&pt!=="layout"&&pt!=="paint"&&pt!=="filter"&&pt!=="metadata"&&pt!=="minzoom"&&pt!=="maxzoom"&&(pt.indexOf("paint.")===0?Kt(He[pt],tt[pt],ye,Ue,pt.slice(6),Tt.setPaintProperty):o.deepEqual(He[pt],tt[pt])||ye.push({command:Tt.setLayerProperty,args:[Ue,pt,tt[pt]]}));for(pt in tt)tt.hasOwnProperty(pt)&&!He.hasOwnProperty(pt)&&pt!=="layout"&&pt!=="paint"&&pt!=="filter"&&pt!=="metadata"&&pt!=="minzoom"&&pt!=="maxzoom"&&(pt.indexOf("paint.")===0?Kt(He[pt],tt[pt],ye,Ue,pt.slice(6),Tt.setPaintProperty):o.deepEqual(He[pt],tt[pt])||ye.push({command:Tt.setLayerProperty,args:[Ue,pt,tt[pt]]}))}else ye.push({command:Tt.removeLayer,args:[Ue]}),ct=zt[zt.lastIndexOf(Ue)+1],ye.push({command:Tt.addLayer,args:[tt,ct]})}(Q,W.layers,G)}catch(re){console.warn("Unable to compute style diff:",re),G=[{command:Tt.setStyle,args:[W]}]}return G}var rn=function(N,W){this.reset(N,W)};rn.prototype.reset=function(N,W){this.points=N||[],this._distances=[0];for(var G=1;G<this.points.length;G++)this._distances[G]=this._distances[G-1]+this.points[G].dist(this.points[G-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(W||0,.5*this.length),this.paddedLength=this.length-2*this.padding},rn.prototype.lerp=function(N){if(this.points.length===1)return this.points[0];N=o.clamp(N,0,1);for(var W=1,G=this._distances[W],C=N*this.paddedLength+this.padding;G<C&&W<this._distances.length;)G=this._distances[++W];var H=W-1,Q=this._distances[H],re=G-Q,fe=re>0?(C-Q)/re:0;return this.points[H].mult(1-fe).add(this.points[W].mult(fe))};var Ln=function(N,W,G){var C=this.boxCells=[],H=this.circleCells=[];this.xCellCount=Math.ceil(N/G),this.yCellCount=Math.ceil(W/G);for(var Q=0;Q<this.xCellCount*this.yCellCount;Q++)C.push([]),H.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=N,this.height=W,this.xScale=this.xCellCount/N,this.yScale=this.yCellCount/W,this.boxUid=0,this.circleUid=0};function Sn(N,W,G,C,H){var Q=o.create();return W?(o.scale(Q,Q,[1/H,1/H,1]),G||o.rotateZ(Q,Q,C.angle)):o.multiply(Q,C.labelPlaneMatrix,N),Q}function gn(N,W,G,C,H){if(W){var Q=o.clone(N);return o.scale(Q,Q,[H,H,1]),G||o.rotateZ(Q,Q,-C.angle),Q}return C.glCoordMatrix}function $t(N,W){var G=[N.x,N.y,0,1];ar(G,G,W);var C=G[3];return{point:new o.Point(G[0]/C,G[1]/C),signedDistanceFromCamera:C}}function cn(N,W){return .5+N/W*.5}function an(N,W){var G=N[0]/N[3],C=N[1]/N[3];return G>=-W[0]&&G<=W[0]&&C>=-W[1]&&C<=W[1]}function pn(N,W,G,C,H,Q,re,fe){var ye=C?N.textSizeData:N.iconSizeData,Ce=o.evaluateSizeForZoom(ye,G.transform.zoom),De=[256/G.width*2+1,256/G.height*2+1],Ue=C?N.text.dynamicLayoutVertexArray:N.icon.dynamicLayoutVertexArray;Ue.clear();for(var He=N.lineVertexArray,tt=C?N.text.placedSymbolArray:N.icon.placedSymbolArray,ct=G.transform.width/G.transform.height,pt=!1,kt=0;kt<tt.length;kt++){var Lt=tt.get(kt);if(Lt.hidden||Lt.writingMode===o.WritingMode.vertical&&!pt)Un(Lt.numGlyphs,Ue);else{pt=!1;var St=[Lt.anchorX,Lt.anchorY,0,1];if(o.transformMat4(St,St,W),an(St,De)){var jt=St[3],zt=cn(G.transform.cameraToCenterDistance,jt),Qt=o.evaluateSizeForFeature(ye,Ce,Lt),Zt=re?Qt/zt:Qt*zt,Vt=new o.Point(Lt.anchorX,Lt.anchorY),vn=$t(Vt,H).point,bn={},On=Rn(Lt,Zt,!1,fe,W,H,Q,N.glyphOffsetArray,He,Ue,vn,Vt,bn,ct);pt=On.useVertical,(On.notEnoughRoom||pt||On.needsFlipping&&Rn(Lt,Zt,!0,fe,W,H,Q,N.glyphOffsetArray,He,Ue,vn,Vt,bn,ct).notEnoughRoom)&&Un(Lt.numGlyphs,Ue)}else Un(Lt.numGlyphs,Ue)}}C?N.text.dynamicLayoutVertexBuffer.updateData(Ue):N.icon.dynamicLayoutVertexBuffer.updateData(Ue)}function An(N,W,G,C,H,Q,re,fe,ye,Ce,De){var Ue=fe.glyphStartIndex+fe.numGlyphs,He=fe.lineStartIndex,tt=fe.lineStartIndex+fe.lineLength,ct=W.getoffsetX(fe.glyphStartIndex),pt=W.getoffsetX(Ue-1),kt=In(N*ct,G,C,H,Q,re,fe.segment,He,tt,ye,Ce,De);if(!kt)return null;var Lt=In(N*pt,G,C,H,Q,re,fe.segment,He,tt,ye,Ce,De);return Lt?{first:kt,last:Lt}:null}function Cn(N,W,G,C){return N===o.WritingMode.horizontal&&Math.abs(G.y-W.y)>Math.abs(G.x-W.x)*C?{useVertical:!0}:(N===o.WritingMode.vertical?W.y<G.y:W.x>G.x)?{needsFlipping:!0}:null}function Rn(N,W,G,C,H,Q,re,fe,ye,Ce,De,Ue,He,tt){var ct,pt=W/24,kt=N.lineOffsetX*pt,Lt=N.lineOffsetY*pt;if(N.numGlyphs>1){var St=N.glyphStartIndex+N.numGlyphs,jt=N.lineStartIndex,zt=N.lineStartIndex+N.lineLength,Qt=An(pt,fe,kt,Lt,G,De,Ue,N,ye,Q,He);if(!Qt)return{notEnoughRoom:!0};var Zt=$t(Qt.first.point,re).point,Vt=$t(Qt.last.point,re).point;if(C&&!G){var vn=Cn(N.writingMode,Zt,Vt,tt);if(vn)return vn}ct=[Qt.first];for(var bn=N.glyphStartIndex+1;bn<St-1;bn++)ct.push(In(pt*fe.getoffsetX(bn),kt,Lt,G,De,Ue,N.segment,jt,zt,ye,Q,He));ct.push(Qt.last)}else{if(C&&!G){var On=$t(Ue,H).point,Dn=N.lineStartIndex+N.segment+1,Yn=new o.Point(ye.getx(Dn),ye.gety(Dn)),ir=$t(Yn,H),gr=ir.signedDistanceFromCamera>0?ir.point:Fn(Ue,Yn,On,1,H),Jn=Cn(N.writingMode,On,gr,tt);if(Jn)return Jn}var pr=In(pt*fe.getoffsetX(N.glyphStartIndex),kt,Lt,G,De,Ue,N.segment,N.lineStartIndex,N.lineStartIndex+N.lineLength,ye,Q,He);if(!pr)return{notEnoughRoom:!0};ct=[pr]}for(var wr=0,Or=ct;wr<Or.length;wr+=1){var nr=Or[wr];o.addDynamicAttributes(Ce,nr.point,nr.angle)}return{}}function Fn(N,W,G,C,H){var Q=$t(N.add(N.sub(W)._unit()),H).point,re=G.sub(Q);return G.add(re._mult(C/re.mag()))}function In(N,W,G,C,H,Q,re,fe,ye,Ce,De,Ue){var He=C?N-W:N+W,tt=He>0?1:-1,ct=0;C&&(tt*=-1,ct=Math.PI),tt<0&&(ct+=Math.PI);for(var pt=tt>0?fe+re:fe+re+1,kt=H,Lt=H,St=0,jt=0,zt=Math.abs(He),Qt=[];St+jt<=zt;){if((pt+=tt)<fe||pt>=ye)return null;if(Lt=kt,Qt.push(kt),(kt=Ue[pt])===void 0){var Zt=new o.Point(Ce.getx(pt),Ce.gety(pt)),Vt=$t(Zt,De);if(Vt.signedDistanceFromCamera>0)kt=Ue[pt]=Vt.point;else{var vn=pt-tt;kt=Fn(St===0?Q:new o.Point(Ce.getx(vn),Ce.gety(vn)),Zt,Lt,zt-St+1,De)}}St+=jt,jt=Lt.dist(kt)}var bn=(zt-St)/jt,On=kt.sub(Lt),Dn=On.mult(bn)._add(Lt);Dn._add(On._unit()._perp()._mult(G*tt));var Yn=ct+Math.atan2(kt.y-Lt.y,kt.x-Lt.x);return Qt.push(Dn),{point:Dn,angle:Yn,path:Qt}}Ln.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ln.prototype.insert=function(N,W,G,C,H){this._forEachCell(W,G,C,H,this._insertBoxCell,this.boxUid++),this.boxKeys.push(N),this.bboxes.push(W),this.bboxes.push(G),this.bboxes.push(C),this.bboxes.push(H)},Ln.prototype.insertCircle=function(N,W,G,C){this._forEachCell(W-C,G-C,W+C,G+C,this._insertCircleCell,this.circleUid++),this.circleKeys.push(N),this.circles.push(W),this.circles.push(G),this.circles.push(C)},Ln.prototype._insertBoxCell=function(N,W,G,C,H,Q){this.boxCells[H].push(Q)},Ln.prototype._insertCircleCell=function(N,W,G,C,H,Q){this.circleCells[H].push(Q)},Ln.prototype._query=function(N,W,G,C,H,Q){if(G<0||N>this.width||C<0||W>this.height)return!H&&[];var re=[];if(N<=0&&W<=0&&this.width<=G&&this.height<=C){if(H)return!0;for(var fe=0;fe<this.boxKeys.length;fe++)re.push({key:this.boxKeys[fe],x1:this.bboxes[4*fe],y1:this.bboxes[4*fe+1],x2:this.bboxes[4*fe+2],y2:this.bboxes[4*fe+3]});for(var ye=0;ye<this.circleKeys.length;ye++){var Ce=this.circles[3*ye],De=this.circles[3*ye+1],Ue=this.circles[3*ye+2];re.push({key:this.circleKeys[ye],x1:Ce-Ue,y1:De-Ue,x2:Ce+Ue,y2:De+Ue})}return Q?re.filter(Q):re}var He={hitTest:H,seenUids:{box:{},circle:{}}};return this._forEachCell(N,W,G,C,this._queryCell,re,He,Q),H?re.length>0:re},Ln.prototype._queryCircle=function(N,W,G,C,H){var Q=N-G,re=N+G,fe=W-G,ye=W+G;if(re<0||Q>this.width||ye<0||fe>this.height)return!C&&[];var Ce=[],De={hitTest:C,circle:{x:N,y:W,radius:G},seenUids:{box:{},circle:{}}};return this._forEachCell(Q,fe,re,ye,this._queryCellCircle,Ce,De,H),C?Ce.length>0:Ce},Ln.prototype.query=function(N,W,G,C,H){return this._query(N,W,G,C,!1,H)},Ln.prototype.hitTest=function(N,W,G,C,H){return this._query(N,W,G,C,!0,H)},Ln.prototype.hitTestCircle=function(N,W,G,C){return this._queryCircle(N,W,G,!0,C)},Ln.prototype._queryCell=function(N,W,G,C,H,Q,re,fe){var ye=re.seenUids,Ce=this.boxCells[H];if(Ce!==null)for(var De=this.bboxes,Ue=0,He=Ce;Ue<He.length;Ue+=1){var tt=He[Ue];if(!ye.box[tt]){ye.box[tt]=!0;var ct=4*tt;if(N<=De[ct+2]&&W<=De[ct+3]&&G>=De[ct+0]&&C>=De[ct+1]&&(!fe||fe(this.boxKeys[tt]))){if(re.hitTest)return Q.push(!0),!0;Q.push({key:this.boxKeys[tt],x1:De[ct],y1:De[ct+1],x2:De[ct+2],y2:De[ct+3]})}}}var pt=this.circleCells[H];if(pt!==null)for(var kt=this.circles,Lt=0,St=pt;Lt<St.length;Lt+=1){var jt=St[Lt];if(!ye.circle[jt]){ye.circle[jt]=!0;var zt=3*jt;if(this._circleAndRectCollide(kt[zt],kt[zt+1],kt[zt+2],N,W,G,C)&&(!fe||fe(this.circleKeys[jt]))){if(re.hitTest)return Q.push(!0),!0;var Qt=kt[zt],Zt=kt[zt+1],Vt=kt[zt+2];Q.push({key:this.circleKeys[jt],x1:Qt-Vt,y1:Zt-Vt,x2:Qt+Vt,y2:Zt+Vt})}}}},Ln.prototype._queryCellCircle=function(N,W,G,C,H,Q,re,fe){var ye=re.circle,Ce=re.seenUids,De=this.boxCells[H];if(De!==null)for(var Ue=this.bboxes,He=0,tt=De;He<tt.length;He+=1){var ct=tt[He];if(!Ce.box[ct]){Ce.box[ct]=!0;var pt=4*ct;if(this._circleAndRectCollide(ye.x,ye.y,ye.radius,Ue[pt+0],Ue[pt+1],Ue[pt+2],Ue[pt+3])&&(!fe||fe(this.boxKeys[ct])))return Q.push(!0),!0}}var kt=this.circleCells[H];if(kt!==null)for(var Lt=this.circles,St=0,jt=kt;St<jt.length;St+=1){var zt=jt[St];if(!Ce.circle[zt]){Ce.circle[zt]=!0;var Qt=3*zt;if(this._circlesCollide(Lt[Qt],Lt[Qt+1],Lt[Qt+2],ye.x,ye.y,ye.radius)&&(!fe||fe(this.circleKeys[zt])))return Q.push(!0),!0}}},Ln.prototype._forEachCell=function(N,W,G,C,H,Q,re,fe){for(var ye=this._convertToXCellCoord(N),Ce=this._convertToYCellCoord(W),De=this._convertToXCellCoord(G),Ue=this._convertToYCellCoord(C),He=ye;He<=De;He++)for(var tt=Ce;tt<=Ue;tt++){var ct=this.xCellCount*tt+He;if(H.call(this,N,W,G,C,ct,Q,re,fe))return}},Ln.prototype._convertToXCellCoord=function(N){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(N*this.xScale)))},Ln.prototype._convertToYCellCoord=function(N){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(N*this.yScale)))},Ln.prototype._circlesCollide=function(N,W,G,C,H,Q){var re=C-N,fe=H-W,ye=G+Q;return ye*ye>re*re+fe*fe},Ln.prototype._circleAndRectCollide=function(N,W,G,C,H,Q,re){var fe=(Q-C)/2,ye=Math.abs(N-(C+fe));if(ye>fe+G)return!1;var Ce=(re-H)/2,De=Math.abs(W-(H+Ce));if(De>Ce+G)return!1;if(ye<=fe||De<=Ce)return!0;var Ue=ye-fe,He=De-Ce;return Ue*Ue+He*He<=G*G};var Hn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Un(N,W){for(var G=0;G<N;G++){var C=W.length;W.resize(C+4),W.float32.set(Hn,3*C)}}function ar(N,W,G){var C=W[0],H=W[1];return N[0]=G[0]*C+G[4]*H+G[12],N[1]=G[1]*C+G[5]*H+G[13],N[3]=G[3]*C+G[7]*H+G[15],N}var ur=100,cr=function(N,W,G){W===void 0&&(W=new Ln(N.width+200,N.height+200,25)),G===void 0&&(G=new Ln(N.width+200,N.height+200,25)),this.transform=N,this.grid=W,this.ignoredGrid=G,this.pitchfactor=Math.cos(N._pitch)*N.cameraToCenterDistance,this.screenRightBoundary=N.width+ur,this.screenBottomBoundary=N.height+ur,this.gridRightBoundary=N.width+200,this.gridBottomBoundary=N.height+200};function er(N,W,G){return W*(o.EXTENT/(N.tileSize*Math.pow(2,G-N.tileID.overscaledZ)))}cr.prototype.placeCollisionBox=function(N,W,G,C,H){var Q=this.projectAndGetPerspectiveRatio(C,N.anchorPointX,N.anchorPointY),re=G*Q.perspectiveRatio,fe=N.x1*re+Q.point.x,ye=N.y1*re+Q.point.y,Ce=N.x2*re+Q.point.x,De=N.y2*re+Q.point.y;return!this.isInsideGrid(fe,ye,Ce,De)||!W&&this.grid.hitTest(fe,ye,Ce,De,H)?{box:[],offscreen:!1}:{box:[fe,ye,Ce,De],offscreen:this.isOffscreen(fe,ye,Ce,De)}},cr.prototype.placeCollisionCircles=function(N,W,G,C,H,Q,re,fe,ye,Ce,De,Ue,He){var tt=[],ct=new o.Point(W.anchorX,W.anchorY),pt=$t(ct,Q),kt=cn(this.transform.cameraToCenterDistance,pt.signedDistanceFromCamera),Lt=(Ce?H/kt:H*kt)/o.ONE_EM,St=$t(ct,re).point,jt=An(Lt,C,W.lineOffsetX*Lt,W.lineOffsetY*Lt,!1,St,ct,W,G,re,{}),zt=!1,Qt=!1,Zt=!0;if(jt){for(var Vt=.5*Ue*kt+He,vn=new o.Point(-100,-100),bn=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),On=new rn,Dn=jt.first,Yn=jt.last,ir=[],gr=Dn.path.length-1;gr>=1;gr--)ir.push(Dn.path[gr]);for(var Jn=1;Jn<Yn.path.length;Jn++)ir.push(Yn.path[Jn]);var pr=2.5*Vt;if(fe){var wr=ir.map(function($r){return $t($r,fe)});ir=wr.some(function($r){return $r.signedDistanceFromCamera<=0})?[]:wr.map(function($r){return $r.point})}var Or=[];if(ir.length>0){for(var nr=ir[0].clone(),hr=ir[0].clone(),Mr=1;Mr<ir.length;Mr++)nr.x=Math.min(nr.x,ir[Mr].x),nr.y=Math.min(nr.y,ir[Mr].y),hr.x=Math.max(hr.x,ir[Mr].x),hr.y=Math.max(hr.y,ir[Mr].y);Or=nr.x>=vn.x&&hr.x<=bn.x&&nr.y>=vn.y&&hr.y<=bn.y?[ir]:hr.x<vn.x||nr.x>bn.x||hr.y<vn.y||nr.y>bn.y?[]:o.clipLine([ir],vn.x,vn.y,bn.x,bn.y)}for(var vr=0,Cr=Or;vr<Cr.length;vr+=1){var Dr=Cr[vr];On.reset(Dr,.25*Vt);var qr;qr=On.length<=.5*Vt?1:Math.ceil(On.paddedLength/pr)+1;for(var Hr=0;Hr<qr;Hr++){var Yr=Hr/Math.max(qr-1,1),Jr=On.lerp(Yr),vi=Jr.x+ur,Oi=Jr.y+ur;tt.push(vi,Oi,Vt,0);var ua=vi-Vt,Wi=Oi-Vt,na=vi+Vt,_i=Oi+Vt;if(Zt=Zt&&this.isOffscreen(ua,Wi,na,_i),Qt=Qt||this.isInsideGrid(ua,Wi,na,_i),!N&&this.grid.hitTestCircle(vi,Oi,Vt,De)&&(zt=!0,!ye))return{circles:[],offscreen:!1,collisionDetected:zt}}}}return{circles:!ye&&zt||!Qt?[]:tt,offscreen:Zt,collisionDetected:zt}},cr.prototype.queryRenderedSymbols=function(N){if(N.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var W=[],G=1/0,C=1/0,H=-1/0,Q=-1/0,re=0,fe=N;re<fe.length;re+=1){var ye=fe[re],Ce=new o.Point(ye.x+ur,ye.y+ur);G=Math.min(G,Ce.x),C=Math.min(C,Ce.y),H=Math.max(H,Ce.x),Q=Math.max(Q,Ce.y),W.push(Ce)}for(var De={},Ue={},He=0,tt=this.grid.query(G,C,H,Q).concat(this.ignoredGrid.query(G,C,H,Q));He<tt.length;He+=1){var ct=tt[He],pt=ct.key;if(De[pt.bucketInstanceId]===void 0&&(De[pt.bucketInstanceId]={}),!De[pt.bucketInstanceId][pt.featureIndex]){var kt=[new o.Point(ct.x1,ct.y1),new o.Point(ct.x2,ct.y1),new o.Point(ct.x2,ct.y2),new o.Point(ct.x1,ct.y2)];o.polygonIntersectsPolygon(W,kt)&&(De[pt.bucketInstanceId][pt.featureIndex]=!0,Ue[pt.bucketInstanceId]===void 0&&(Ue[pt.bucketInstanceId]=[]),Ue[pt.bucketInstanceId].push(pt.featureIndex))}}return Ue},cr.prototype.insertCollisionBox=function(N,W,G,C,H){var Q={bucketInstanceId:G,featureIndex:C,collisionGroupID:H};(W?this.ignoredGrid:this.grid).insert(Q,N[0],N[1],N[2],N[3])},cr.prototype.insertCollisionCircles=function(N,W,G,C,H){for(var Q=W?this.ignoredGrid:this.grid,re={bucketInstanceId:G,featureIndex:C,collisionGroupID:H},fe=0;fe<N.length;fe+=4)Q.insertCircle(re,N[fe],N[fe+1],N[fe+2])},cr.prototype.projectAndGetPerspectiveRatio=function(N,W,G){var C=[W,G,0,1];return ar(C,C,N),{point:new o.Point((C[0]/C[3]+1)/2*this.transform.width+ur,(-C[1]/C[3]+1)/2*this.transform.height+ur),perspectiveRatio:.5+this.transform.cameraToCenterDistance/C[3]*.5}},cr.prototype.isOffscreen=function(N,W,G,C){return G<ur||N>=this.screenRightBoundary||C<ur||W>this.screenBottomBoundary},cr.prototype.isInsideGrid=function(N,W,G,C){return G>=0&&N<this.gridRightBoundary&&C>=0&&W<this.gridBottomBoundary},cr.prototype.getViewportMatrix=function(){var N=o.identity([]);return o.translate(N,N,[-100,-100,0]),N};var Tr=function(N,W,G,C){this.opacity=N?Math.max(0,Math.min(1,N.opacity+(N.placed?W:-W))):C&&G?1:0,this.placed=G};Tr.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Ht=function(N,W,G,C,H){this.text=new Tr(N?N.text:null,W,G,H),this.icon=new Tr(N?N.icon:null,W,C,H)};Ht.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var on=function(N,W,G){this.text=N,this.icon=W,this.skipFade=G},wn=function(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]},mn=function(N,W,G,C,H){this.bucketInstanceId=N,this.featureIndex=W,this.sourceLayerIndex=G,this.bucketIndex=C,this.tileID=H},Pn=function(N){this.crossSourceCollisions=N,this.maxGroupID=0,this.collisionGroups={}};function Wn(N,W,G,C,H){var Q=o.getAnchorAlignment(N),re=-(Q.horizontalAlign-.5)*W,fe=-(Q.verticalAlign-.5)*G,ye=o.evaluateVariableOffset(N,C);return new o.Point(re+ye[0]*H,fe+ye[1]*H)}function Bn(N,W,G,C,H,Q){var re=N.x1,fe=N.x2,ye=N.y1,Ce=N.y2,De=N.anchorPointX,Ue=N.anchorPointY,He=new o.Point(W,G);return C&&He._rotate(H?Q:-Q),{x1:re+He.x,y1:ye+He.y,x2:fe+He.x,y2:Ce+He.y,anchorPointX:De,anchorPointY:Ue}}Pn.prototype.get=function(N){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[N]){var W=++this.maxGroupID;this.collisionGroups[N]={ID:W,predicate:function(G){return G.collisionGroupID===W}}}return this.collisionGroups[N]};var jn=function(N,W,G,C){this.transform=N.clone(),this.collisionIndex=new cr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=W,this.retainedQueryData={},this.collisionGroups=new Pn(G),this.collisionCircleArrays={},this.prevPlacement=C,C&&(C.prevPlacement=void 0),this.placedOrientations={}};function rr(N,W,G,C,H){N.emplaceBack(W?1:0,G?1:0,C||0,H||0),N.emplaceBack(W?1:0,G?1:0,C||0,H||0),N.emplaceBack(W?1:0,G?1:0,C||0,H||0),N.emplaceBack(W?1:0,G?1:0,C||0,H||0)}jn.prototype.getBucketParts=function(N,W,G,C){var H=G.getBucket(W),Q=G.latestFeatureIndex;if(H&&Q&&W.id===H.layerIds[0]){var re=G.collisionBoxArray,fe=H.layers[0].layout,ye=Math.pow(2,this.transform.zoom-G.tileID.overscaledZ),Ce=G.tileSize/o.EXTENT,De=this.transform.calculatePosMatrix(G.tileID.toUnwrapped()),Ue=fe.get("text-pitch-alignment")==="map",He=fe.get("text-rotation-alignment")==="map",tt=er(G,1,this.transform.zoom),ct=Sn(De,Ue,He,this.transform,tt),pt=null;if(Ue){var kt=gn(De,Ue,He,this.transform,tt);pt=o.multiply([],this.transform.labelPlaneMatrix,kt)}this.retainedQueryData[H.bucketInstanceId]=new mn(H.bucketInstanceId,Q,H.sourceLayerIndex,H.index,G.tileID);var Lt={bucket:H,layout:fe,posMatrix:De,textLabelPlaneMatrix:ct,labelToScreenMatrix:pt,scale:ye,textPixelRatio:Ce,holdingForFade:G.holdingForFade(),collisionBoxArray:re,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(H.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(H.sourceID)};if(C)for(var St=0,jt=H.sortKeyRanges;St<jt.length;St+=1){var zt=jt[St],Qt=zt.sortKey,Zt=zt.symbolInstanceStart,Vt=zt.symbolInstanceEnd;N.push({sortKey:Qt,symbolInstanceStart:Zt,symbolInstanceEnd:Vt,parameters:Lt})}else N.push({symbolInstanceStart:0,symbolInstanceEnd:H.symbolInstances.length,parameters:Lt})}},jn.prototype.attemptAnchorPlacement=function(N,W,G,C,H,Q,re,fe,ye,Ce,De,Ue,He,tt,ct){var pt,kt=[Ue.textOffset0,Ue.textOffset1],Lt=Wn(N,G,C,kt,H),St=this.collisionIndex.placeCollisionBox(Bn(W,Lt.x,Lt.y,Q,re,this.transform.angle),De,fe,ye,Ce.predicate);if(!ct||this.collisionIndex.placeCollisionBox(Bn(ct,Lt.x,Lt.y,Q,re,this.transform.angle),De,fe,ye,Ce.predicate).box.length!==0)return St.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Ue.crossTileID]&&this.prevPlacement.placements[Ue.crossTileID]&&this.prevPlacement.placements[Ue.crossTileID].text&&(pt=this.prevPlacement.variableOffsets[Ue.crossTileID].anchor),this.variableOffsets[Ue.crossTileID]={textOffset:kt,width:G,height:C,anchor:N,textBoxScale:H,prevAnchor:pt},this.markUsedJustification(He,N,Ue,tt),He.allowVerticalPlacement&&(this.markUsedOrientation(He,tt,Ue),this.placedOrientations[Ue.crossTileID]=tt),{shift:Lt,placedGlyphBoxes:St}):void 0},jn.prototype.placeLayerBucketPart=function(N,W,G){var C=this,H=N.parameters,Q=H.bucket,re=H.layout,fe=H.posMatrix,ye=H.textLabelPlaneMatrix,Ce=H.labelToScreenMatrix,De=H.textPixelRatio,Ue=H.holdingForFade,He=H.collisionBoxArray,tt=H.partiallyEvaluatedTextSize,ct=H.collisionGroup,pt=re.get("text-optional"),kt=re.get("icon-optional"),Lt=re.get("text-allow-overlap"),St=re.get("icon-allow-overlap"),jt=re.get("text-rotation-alignment")==="map",zt=re.get("text-pitch-alignment")==="map",Qt=re.get("icon-text-fit")!=="none",Zt=re.get("symbol-z-order")==="viewport-y",Vt=Lt&&(St||!Q.hasIconData()||kt),vn=St&&(Lt||!Q.hasTextData()||pt);!Q.collisionArrays&&He&&Q.deserializeCollisionBoxes(He);var bn=function(Jn,pr){if(!W[Jn.crossTileID])if(Ue)C.placements[Jn.crossTileID]=new on(!1,!1,!1);else{var wr,Or=!1,nr=!1,hr=!0,Mr=null,vr={box:null,offscreen:null},Cr={box:null,offscreen:null},Dr=null,qr=null,Hr=0,Yr=0,Jr=0;pr.textFeatureIndex?Hr=pr.textFeatureIndex:Jn.useRuntimeCollisionCircles&&(Hr=Jn.featureIndex),pr.verticalTextFeatureIndex&&(Yr=pr.verticalTextFeatureIndex);var vi=pr.textBox;if(vi){var Oi=function(Si){var Oa=o.WritingMode.horizontal;if(Q.allowVerticalPlacement&&!Si&&C.prevPlacement){var $i=C.prevPlacement.placedOrientations[Jn.crossTileID];$i&&(C.placedOrientations[Jn.crossTileID]=$i,Oa=$i,C.markUsedOrientation(Q,Oa,Jn))}return Oa},ua=function(Si,Oa){if(Q.allowVerticalPlacement&&Jn.numVerticalGlyphVertices>0&&pr.verticalTextBox)for(var $i=0,Zl=Q.writingModes;$i<Zl.length&&(Zl[$i]===o.WritingMode.vertical?(vr=Oa(),Cr=vr):vr=Si(),!(vr&&vr.box&&vr.box.length));$i+=1);else vr=Si()};if(re.get("text-variable-anchor")){var Wi=re.get("text-variable-anchor");if(C.prevPlacement&&C.prevPlacement.variableOffsets[Jn.crossTileID]){var na=C.prevPlacement.variableOffsets[Jn.crossTileID];Wi.indexOf(na.anchor)>0&&(Wi=Wi.filter(function(Si){return Si!==na.anchor})).unshift(na.anchor)}var _i=function(Si,Oa,$i){for(var Zl=Si.x2-Si.x1,Tf=Si.y2-Si.y1,xc=Jn.textBoxScale,kf=Qt&&!St?Oa:null,Cl={box:[],offscreen:!1},Af=Lt?2*Wi.length:Wi.length,Pl=0;Pl<Af;++Pl){var bc=Wi[Pl%Wi.length],_c=Pl>=Wi.length,ll=C.attemptAnchorPlacement(bc,Si,Zl,Tf,xc,jt,zt,De,fe,ct,_c,Jn,Q,$i,kf);if(ll&&(Cl=ll.placedGlyphBoxes)&&Cl.box&&Cl.box.length){Or=!0,Mr=ll.shift;break}}return Cl};ua(function(){return _i(vi,pr.iconBox,o.WritingMode.horizontal)},function(){var Si=pr.verticalTextBox,Oa=vr&&vr.box&&vr.box.length;return Q.allowVerticalPlacement&&!Oa&&Jn.numVerticalGlyphVertices>0&&Si?_i(Si,pr.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null}}),vr&&(Or=vr.box,hr=vr.offscreen);var $r=Oi(vr&&vr.box);if(!Or&&C.prevPlacement){var Ai=C.prevPlacement.variableOffsets[Jn.crossTileID];Ai&&(C.variableOffsets[Jn.crossTileID]=Ai,C.markUsedJustification(Q,Ai.anchor,Jn,$r))}}else{var ci=function(Si,Oa){var $i=C.collisionIndex.placeCollisionBox(Si,Lt,De,fe,ct.predicate);return $i&&$i.box&&$i.box.length&&(C.markUsedOrientation(Q,Oa,Jn),C.placedOrientations[Jn.crossTileID]=Oa),$i};ua(function(){return ci(vi,o.WritingMode.horizontal)},function(){var Si=pr.verticalTextBox;return Q.allowVerticalPlacement&&Jn.numVerticalGlyphVertices>0&&Si?ci(Si,o.WritingMode.vertical):{box:null,offscreen:null}}),Oi(vr&&vr.box&&vr.box.length)}}if(Or=(wr=vr)&&wr.box&&wr.box.length>0,hr=wr&&wr.offscreen,Jn.useRuntimeCollisionCircles){var ti=Q.text.placedSymbolArray.get(Jn.centerJustifiedTextSymbolIndex),Mi=o.evaluateSizeForFeature(Q.textSizeData,tt,ti),Ii=re.get("text-padding"),Ui=Jn.collisionCircleDiameter;Dr=C.collisionIndex.placeCollisionCircles(Lt,ti,Q.lineVertexArray,Q.glyphOffsetArray,Mi,fe,ye,Ce,G,zt,ct.predicate,Ui,Ii),Or=Lt||Dr.circles.length>0&&!Dr.collisionDetected,hr=hr&&Dr.offscreen}if(pr.iconFeatureIndex&&(Jr=pr.iconFeatureIndex),pr.iconBox){var Ms=function(Si){var Oa=Qt&&Mr?Bn(Si,Mr.x,Mr.y,jt,zt,C.transform.angle):Si;return C.collisionIndex.placeCollisionBox(Oa,St,De,fe,ct.predicate)};nr=Cr&&Cr.box&&Cr.box.length&&pr.verticalIconBox?(qr=Ms(pr.verticalIconBox)).box.length>0:(qr=Ms(pr.iconBox)).box.length>0,hr=hr&&qr.offscreen}var Ss=pt||Jn.numHorizontalGlyphVertices===0&&Jn.numVerticalGlyphVertices===0,ni=kt||Jn.numIconVertices===0;if(Ss||ni?ni?Ss||(nr=nr&&Or):Or=nr&&Or:nr=Or=nr&&Or,Or&&wr&&wr.box&&(Cr&&Cr.box&&Yr?C.collisionIndex.insertCollisionBox(wr.box,re.get("text-ignore-placement"),Q.bucketInstanceId,Yr,ct.ID):C.collisionIndex.insertCollisionBox(wr.box,re.get("text-ignore-placement"),Q.bucketInstanceId,Hr,ct.ID)),nr&&qr&&C.collisionIndex.insertCollisionBox(qr.box,re.get("icon-ignore-placement"),Q.bucketInstanceId,Jr,ct.ID),Dr&&(Or&&C.collisionIndex.insertCollisionCircles(Dr.circles,re.get("text-ignore-placement"),Q.bucketInstanceId,Hr,ct.ID),G)){var sl=Q.bucketInstanceId,qs=C.collisionCircleArrays[sl];qs===void 0&&(qs=C.collisionCircleArrays[sl]=new wn);for(var Mo=0;Mo<Dr.circles.length;Mo+=4)qs.circles.push(Dr.circles[Mo+0]),qs.circles.push(Dr.circles[Mo+1]),qs.circles.push(Dr.circles[Mo+2]),qs.circles.push(Dr.collisionDetected?1:0)}C.placements[Jn.crossTileID]=new on(Or||Vt,nr||vn,hr||Q.justReloaded),W[Jn.crossTileID]=!0}};if(Zt)for(var On=Q.getSortedSymbolIndexes(this.transform.angle),Dn=On.length-1;Dn>=0;--Dn){var Yn=On[Dn];bn(Q.symbolInstances.get(Yn),Q.collisionArrays[Yn])}else for(var ir=N.symbolInstanceStart;ir<N.symbolInstanceEnd;ir++)bn(Q.symbolInstances.get(ir),Q.collisionArrays[ir]);if(G&&Q.bucketInstanceId in this.collisionCircleArrays){var gr=this.collisionCircleArrays[Q.bucketInstanceId];o.invert(gr.invProjMatrix,fe),gr.viewportMatrix=this.collisionIndex.getViewportMatrix()}Q.justReloaded=!1},jn.prototype.markUsedJustification=function(N,W,G,C){var H,Q={left:G.leftJustifiedTextSymbolIndex,center:G.centerJustifiedTextSymbolIndex,right:G.rightJustifiedTextSymbolIndex};H=C===o.WritingMode.vertical?G.verticalPlacedTextSymbolIndex:Q[o.getAnchorJustification(W)];for(var re=0,fe=[G.leftJustifiedTextSymbolIndex,G.centerJustifiedTextSymbolIndex,G.rightJustifiedTextSymbolIndex,G.verticalPlacedTextSymbolIndex];re<fe.length;re+=1){var ye=fe[re];ye>=0&&(N.text.placedSymbolArray.get(ye).crossTileID=H>=0&&ye!==H?0:G.crossTileID)}},jn.prototype.markUsedOrientation=function(N,W,G){for(var C=W===o.WritingMode.horizontal||W===o.WritingMode.horizontalOnly?W:0,H=W===o.WritingMode.vertical?W:0,Q=0,re=[G.leftJustifiedTextSymbolIndex,G.centerJustifiedTextSymbolIndex,G.rightJustifiedTextSymbolIndex];Q<re.length;Q+=1){var fe=re[Q];N.text.placedSymbolArray.get(fe).placedOrientation=C}G.verticalPlacedTextSymbolIndex&&(N.text.placedSymbolArray.get(G.verticalPlacedTextSymbolIndex).placedOrientation=H)},jn.prototype.commit=function(N){this.commitTime=N,this.zoomAtLastRecencyCheck=this.transform.zoom;var W=this.prevPlacement,G=!1;this.prevZoomAdjustment=W?W.zoomAdjustment(this.transform.zoom):0;var C=W?W.symbolFadeChange(N):1,H=W?W.opacities:{},Q=W?W.variableOffsets:{},re=W?W.placedOrientations:{};for(var fe in this.placements){var ye=this.placements[fe],Ce=H[fe];Ce?(this.opacities[fe]=new Ht(Ce,C,ye.text,ye.icon),G=G||ye.text!==Ce.text.placed||ye.icon!==Ce.icon.placed):(this.opacities[fe]=new Ht(null,C,ye.text,ye.icon,ye.skipFade),G=G||ye.text||ye.icon)}for(var De in H){var Ue=H[De];if(!this.opacities[De]){var He=new Ht(Ue,C,!1,!1);He.isHidden()||(this.opacities[De]=He,G=G||Ue.text.placed||Ue.icon.placed)}}for(var tt in Q)this.variableOffsets[tt]||!this.opacities[tt]||this.opacities[tt].isHidden()||(this.variableOffsets[tt]=Q[tt]);for(var ct in re)this.placedOrientations[ct]||!this.opacities[ct]||this.opacities[ct].isHidden()||(this.placedOrientations[ct]=re[ct]);G?this.lastPlacementChangeTime=N:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=W?W.lastPlacementChangeTime:N)},jn.prototype.updateLayerOpacities=function(N,W){for(var G={},C=0,H=W;C<H.length;C+=1){var Q=H[C],re=Q.getBucket(N);re&&Q.latestFeatureIndex&&N.id===re.layerIds[0]&&this.updateBucketOpacities(re,G,Q.collisionBoxArray)}},jn.prototype.updateBucketOpacities=function(N,W,G){var C=this;N.hasTextData()&&N.text.opacityVertexArray.clear(),N.hasIconData()&&N.icon.opacityVertexArray.clear(),N.hasIconCollisionBoxData()&&N.iconCollisionBox.collisionVertexArray.clear(),N.hasTextCollisionBoxData()&&N.textCollisionBox.collisionVertexArray.clear();var H=N.layers[0].layout,Q=new Ht(null,0,!1,!1,!0),re=H.get("text-allow-overlap"),fe=H.get("icon-allow-overlap"),ye=H.get("text-variable-anchor"),Ce=H.get("text-rotation-alignment")==="map",De=H.get("text-pitch-alignment")==="map",Ue=H.get("icon-text-fit")!=="none",He=new Ht(null,0,re&&(fe||!N.hasIconData()||H.get("icon-optional")),fe&&(re||!N.hasTextData()||H.get("text-optional")),!0);!N.collisionArrays&&G&&(N.hasIconCollisionBoxData()||N.hasTextCollisionBoxData())&&N.deserializeCollisionBoxes(G);for(var tt=function(Lt,St,jt){for(var zt=0;zt<St/4;zt++)Lt.opacityVertexArray.emplaceBack(jt)},ct=function(Lt){var St=N.symbolInstances.get(Lt),jt=St.numHorizontalGlyphVertices,zt=St.numVerticalGlyphVertices,Qt=St.crossTileID,Zt=W[Qt],Vt=C.opacities[Qt];Zt?Vt=Q:Vt||(Vt=He,C.opacities[Qt]=Vt),W[Qt]=!0;var vn=jt>0||zt>0,bn=St.numIconVertices>0,On=C.placedOrientations[St.crossTileID],Dn=On===o.WritingMode.vertical,Yn=On===o.WritingMode.horizontal||On===o.WritingMode.horizontalOnly;if(vn){var ir=kn(Vt.text),gr=Dn?hn:ir;tt(N.text,jt,gr);var Jn=Yn?hn:ir;tt(N.text,zt,Jn);var pr=Vt.text.isHidden();[St.rightJustifiedTextSymbolIndex,St.centerJustifiedTextSymbolIndex,St.leftJustifiedTextSymbolIndex].forEach(function(Jr){Jr>=0&&(N.text.placedSymbolArray.get(Jr).hidden=pr||Dn?1:0)}),St.verticalPlacedTextSymbolIndex>=0&&(N.text.placedSymbolArray.get(St.verticalPlacedTextSymbolIndex).hidden=pr||Yn?1:0);var wr=C.variableOffsets[St.crossTileID];wr&&C.markUsedJustification(N,wr.anchor,St,On);var Or=C.placedOrientations[St.crossTileID];Or&&(C.markUsedJustification(N,"left",St,Or),C.markUsedOrientation(N,Or,St))}if(bn){var nr=kn(Vt.icon),hr=!(Ue&&St.verticalPlacedIconSymbolIndex&&Dn);if(St.placedIconSymbolIndex>=0){var Mr=hr?nr:hn;tt(N.icon,St.numIconVertices,Mr),N.icon.placedSymbolArray.get(St.placedIconSymbolIndex).hidden=Vt.icon.isHidden()}if(St.verticalPlacedIconSymbolIndex>=0){var vr=hr?hn:nr;tt(N.icon,St.numVerticalIconVertices,vr),N.icon.placedSymbolArray.get(St.verticalPlacedIconSymbolIndex).hidden=Vt.icon.isHidden()}}if(N.hasIconCollisionBoxData()||N.hasTextCollisionBoxData()){var Cr=N.collisionArrays[Lt];if(Cr){var Dr=new o.Point(0,0);if(Cr.textBox||Cr.verticalTextBox){var qr=!0;if(ye){var Hr=C.variableOffsets[Qt];Hr?(Dr=Wn(Hr.anchor,Hr.width,Hr.height,Hr.textOffset,Hr.textBoxScale),Ce&&Dr._rotate(De?C.transform.angle:-C.transform.angle)):qr=!1}Cr.textBox&&rr(N.textCollisionBox.collisionVertexArray,Vt.text.placed,!qr||Dn,Dr.x,Dr.y),Cr.verticalTextBox&&rr(N.textCollisionBox.collisionVertexArray,Vt.text.placed,!qr||Yn,Dr.x,Dr.y)}var Yr=!!(!Yn&&Cr.verticalIconBox);Cr.iconBox&&rr(N.iconCollisionBox.collisionVertexArray,Vt.icon.placed,Yr,Ue?Dr.x:0,Ue?Dr.y:0),Cr.verticalIconBox&&rr(N.iconCollisionBox.collisionVertexArray,Vt.icon.placed,!Yr,Ue?Dr.x:0,Ue?Dr.y:0)}}},pt=0;pt<N.symbolInstances.length;pt++)ct(pt);if(N.sortFeatures(this.transform.angle),this.retainedQueryData[N.bucketInstanceId]&&(this.retainedQueryData[N.bucketInstanceId].featureSortOrder=N.featureSortOrder),N.hasTextData()&&N.text.opacityVertexBuffer&&N.text.opacityVertexBuffer.updateData(N.text.opacityVertexArray),N.hasIconData()&&N.icon.opacityVertexBuffer&&N.icon.opacityVertexBuffer.updateData(N.icon.opacityVertexArray),N.hasIconCollisionBoxData()&&N.iconCollisionBox.collisionVertexBuffer&&N.iconCollisionBox.collisionVertexBuffer.updateData(N.iconCollisionBox.collisionVertexArray),N.hasTextCollisionBoxData()&&N.textCollisionBox.collisionVertexBuffer&&N.textCollisionBox.collisionVertexBuffer.updateData(N.textCollisionBox.collisionVertexArray),N.bucketInstanceId in this.collisionCircleArrays){var kt=this.collisionCircleArrays[N.bucketInstanceId];N.placementInvProjMatrix=kt.invProjMatrix,N.placementViewportMatrix=kt.viewportMatrix,N.collisionCircleArray=kt.circles,delete this.collisionCircleArrays[N.bucketInstanceId]}},jn.prototype.symbolFadeChange=function(N){return this.fadeDuration===0?1:(N-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},jn.prototype.zoomAdjustment=function(N){return Math.max(0,(this.transform.zoom-N)/1.5)},jn.prototype.hasTransitions=function(N){return this.stale||N-this.lastPlacementChangeTime<this.fadeDuration},jn.prototype.stillRecent=function(N,W){var G=this.zoomAtLastRecencyCheck===W?1-this.zoomAdjustment(W):1;return this.zoomAtLastRecencyCheck=W,this.commitTime+this.fadeDuration*G>N},jn.prototype.setStale=function(){this.stale=!0};var Xt=Math.pow(2,25),yn=Math.pow(2,24),Ot=Math.pow(2,17),Jt=Math.pow(2,16),nn=Math.pow(2,9),_n=Math.pow(2,8),xn=Math.pow(2,1);function kn(N){if(N.opacity===0&&!N.placed)return 0;if(N.opacity===1&&N.placed)return 4294967295;var W=N.placed?1:0,G=Math.floor(127*N.opacity);return G*Xt+W*yn+G*Ot+W*Jt+G*nn+W*_n+G*xn+W}var hn=0,en=function(N){this._sortAcrossTiles=N.layout.get("symbol-z-order")!=="viewport-y"&&N.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};en.prototype.continuePlacement=function(N,W,G,C,H){for(var Q=this._bucketParts;this._currentTileIndex<N.length;){var re=N[this._currentTileIndex];if(W.getBucketParts(Q,C,re,this._sortAcrossTiles),this._currentTileIndex++,H())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Q.sort(function(ye,Ce){return ye.sortKey-Ce.sortKey}));this._currentPartIndex<Q.length;){var fe=Q[this._currentPartIndex];if(W.placeLayerBucketPart(fe,this._seenCrossTileIDs,G),this._currentPartIndex++,H())return!0}return!1};var tn=function(N,W,G,C,H,Q,re){this.placement=new jn(N,H,Q,re),this._currentPlacementIndex=W.length-1,this._forceFullPlacement=G,this._showCollisionBoxes=C,this._done=!1};tn.prototype.isDone=function(){return this._done},tn.prototype.continuePlacement=function(N,W,G){for(var C=this,H=o.browser.now(),Q=function(){var ye=o.browser.now()-H;return!C._forceFullPlacement&&ye>2};this._currentPlacementIndex>=0;){var re=W[N[this._currentPlacementIndex]],fe=this.placement.collisionIndex.transform.zoom;if(re.type==="symbol"&&(!re.minzoom||re.minzoom<=fe)&&(!re.maxzoom||re.maxzoom>fe)){if(this._inProgressLayer||(this._inProgressLayer=new en(re)),this._inProgressLayer.continuePlacement(G[re.source],this.placement,this._showCollisionBoxes,re,Q))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},tn.prototype.commit=function(N){return this.placement.commit(N),this.placement};var un=512/o.EXTENT/2,dn=function(N,W,G){this.tileID=N,this.indexedSymbolInstances={},this.bucketInstanceId=G;for(var C=0;C<W.length;C++){var H=W.get(C),Q=H.key;this.indexedSymbolInstances[Q]||(this.indexedSymbolInstances[Q]=[]),this.indexedSymbolInstances[Q].push({crossTileID:H.crossTileID,coord:this.getScaledCoordinates(H,N)})}};dn.prototype.getScaledCoordinates=function(N,W){var G=W.canonical.z-this.tileID.canonical.z,C=un/Math.pow(2,G);return{x:Math.floor((W.canonical.x*o.EXTENT+N.anchorX)*C),y:Math.floor((W.canonical.y*o.EXTENT+N.anchorY)*C)}},dn.prototype.findMatches=function(N,W,G){for(var C=this.tileID.canonical.z<W.canonical.z?1:Math.pow(2,this.tileID.canonical.z-W.canonical.z),H=0;H<N.length;H++){var Q=N.get(H);if(!Q.crossTileID){var re=this.indexedSymbolInstances[Q.key];if(re)for(var fe=this.getScaledCoordinates(Q,W),ye=0,Ce=re;ye<Ce.length;ye+=1){var De=Ce[ye];if(Math.abs(De.coord.x-fe.x)<=C&&Math.abs(De.coord.y-fe.y)<=C&&!G[De.crossTileID]){G[De.crossTileID]=!0,Q.crossTileID=De.crossTileID;break}}}}};var En=function(){this.maxCrossTileID=0};En.prototype.generate=function(){return++this.maxCrossTileID};var zn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};zn.prototype.handleWrapJump=function(N){var W=Math.round((N-this.lng)/360);if(W!==0)for(var G in this.indexes){var C=this.indexes[G],H={};for(var Q in C){var re=C[Q];re.tileID=re.tileID.unwrapTo(re.tileID.wrap+W),H[re.tileID.key]=re}this.indexes[G]=H}this.lng=N},zn.prototype.addBucket=function(N,W,G){if(this.indexes[N.overscaledZ]&&this.indexes[N.overscaledZ][N.key]){if(this.indexes[N.overscaledZ][N.key].bucketInstanceId===W.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(N.overscaledZ,this.indexes[N.overscaledZ][N.key])}for(var C=0;C<W.symbolInstances.length;C++)W.symbolInstances.get(C).crossTileID=0;this.usedCrossTileIDs[N.overscaledZ]||(this.usedCrossTileIDs[N.overscaledZ]={});var H=this.usedCrossTileIDs[N.overscaledZ];for(var Q in this.indexes){var re=this.indexes[Q];if(Number(Q)>N.overscaledZ)for(var fe in re){var ye=re[fe];ye.tileID.isChildOf(N)&&ye.findMatches(W.symbolInstances,N,H)}else{var Ce=re[N.scaledTo(Number(Q)).key];Ce&&Ce.findMatches(W.symbolInstances,N,H)}}for(var De=0;De<W.symbolInstances.length;De++){var Ue=W.symbolInstances.get(De);Ue.crossTileID||(Ue.crossTileID=G.generate(),H[Ue.crossTileID]=!0)}return this.indexes[N.overscaledZ]===void 0&&(this.indexes[N.overscaledZ]={}),this.indexes[N.overscaledZ][N.key]=new dn(N,W.symbolInstances,W.bucketInstanceId),!0},zn.prototype.removeBucketCrossTileIDs=function(N,W){for(var G in W.indexedSymbolInstances)for(var C=0,H=W.indexedSymbolInstances[G];C<H.length;C+=1){var Q=H[C];delete this.usedCrossTileIDs[N][Q.crossTileID]}},zn.prototype.removeStaleBuckets=function(N){var W=!1;for(var G in this.indexes){var C=this.indexes[G];for(var H in C)N[C[H].bucketInstanceId]||(this.removeBucketCrossTileIDs(G,C[H]),delete C[H],W=!0)}return W};var qn=function(){this.layerIndexes={},this.crossTileIDs=new En,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};qn.prototype.addLayer=function(N,W,G){var C=this.layerIndexes[N.id];C===void 0&&(C=this.layerIndexes[N.id]=new zn);var H=!1,Q={};C.handleWrapJump(G);for(var re=0,fe=W;re<fe.length;re+=1){var ye=fe[re],Ce=ye.getBucket(N);Ce&&N.id===Ce.layerIds[0]&&(Ce.bucketInstanceId||(Ce.bucketInstanceId=++this.maxBucketInstanceId),C.addBucket(ye.tileID,Ce,this.crossTileIDs)&&(H=!0),Q[Ce.bucketInstanceId]=!0)}return C.removeStaleBuckets(Q)&&(H=!0),H},qn.prototype.pruneUnusedLayers=function(N){var W={};for(var G in N.forEach(function(C){W[C]=!0}),this.layerIndexes)W[G]||delete this.layerIndexes[G]};var Gn=function(N,W){return o.emitValidationErrors(N,W&&W.filter(function(G){return G.identifier!=="source.canvas"}))},$n=o.pick(Tt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Xn=o.pick(Tt,["setCenter","setZoom","setBearing","setPitch"]),or=function(){var N={},W=o.styleSpec.$version;for(var G in o.styleSpec.$root){var C=o.styleSpec.$root[G];if(C.required){var H;(H=G==="version"?W:C.type==="array"?[]:{})!=null&&(N[G]=H)}}return N}(),tr=function(N){function W(G,C){var H=this;C===void 0&&(C={}),N.call(this),this.map=G,this.dispatcher=new P(mt(),this),this.imageManager=new g,this.imageManager.setEventedParent(this),this.glyphManager=new y(G._requestManager,C.localIdeographFontFamily),this.lineAtlas=new L(256,512),this.crossTileSymbolIndex=new qn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());var Q=this;this._rtlTextPluginCallback=W.registerForPluginStateChange(function(re){var fe={pluginStatus:re.pluginStatus,pluginURL:re.pluginURL};Q.dispatcher.broadcast("syncRTLPluginState",fe,function(ye,Ce){if(o.triggerPluginCompletionEvent(ye),Ce&&Ce.every(function(Ue){return Ue}))for(var De in Q.sourceCaches)Q.sourceCaches[De].reload()})}),this.on("data",function(re){if(re.dataType==="source"&&re.sourceDataType==="metadata"){var fe=H.sourceCaches[re.sourceId];if(fe){var ye=fe.getSource();if(ye&&ye.vectorLayerIds)for(var Ce in H._layers){var De=H._layers[Ce];De.source===ye.id&&H._validateLayer(De)}}}})}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.loadURL=function(G,C){var H=this;C===void 0&&(C={}),this.fire(new o.Event("dataloading",{dataType:"style"}));var Q=typeof C.validate=="boolean"?C.validate:!o.isMapboxURL(G);G=this.map._requestManager.normalizeStyleURL(G,C.accessToken);var re=this.map._requestManager.transformRequest(G,o.ResourceType.Style);this._request=o.getJSON(re,function(fe,ye){H._request=null,fe?H.fire(new o.ErrorEvent(fe)):ye&&H._load(ye,Q)})},W.prototype.loadJSON=function(G,C){var H=this;C===void 0&&(C={}),this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.browser.frame(function(){H._request=null,H._load(G,C.validate!==!1)})},W.prototype.loadEmpty=function(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(or,!1)},W.prototype._load=function(G,C){if(!C||!Gn(this,o.validateStyle(G))){for(var H in this._loaded=!0,this.stylesheet=G,G.sources)this.addSource(H,G.sources[H],{validate:!1});G.sprite?this._loadSprite(G.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(G.glyphs);var Q=Et(this.stylesheet.layers);this._order=Q.map(function(Ce){return Ce.id}),this._layers={},this._serializedLayers={};for(var re=0,fe=Q;re<fe.length;re+=1){var ye=fe[re];(ye=o.createStyleLayer(ye)).setEventedParent(this,{layer:{id:ye.id}}),this._layers[ye.id]=ye,this._serializedLayers[ye.id]=ye.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new k(this.stylesheet.light),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}},W.prototype._loadSprite=function(G){var C=this;this._spriteRequest=function(H,Q,re){var fe,ye,Ce,De=o.browser.devicePixelRatio>1?"@2x":"",Ue=o.getJSON(Q.transformRequest(Q.normalizeSpriteURL(H,De,".json"),o.ResourceType.SpriteJSON),function(ct,pt){Ue=null,Ce||(Ce=ct,fe=pt,tt())}),He=o.getImage(Q.transformRequest(Q.normalizeSpriteURL(H,De,".png"),o.ResourceType.SpriteImage),function(ct,pt){He=null,Ce||(Ce=ct,ye=pt,tt())});function tt(){if(Ce)re(Ce);else if(fe&&ye){var ct=o.browser.getImageData(ye),pt={};for(var kt in fe){var Lt=fe[kt],St=Lt.width,jt=Lt.height,zt=Lt.x,Qt=Lt.y,Zt=Lt.sdf,Vt=Lt.pixelRatio,vn=Lt.stretchX,bn=Lt.stretchY,On=Lt.content,Dn=new o.RGBAImage({width:St,height:jt});o.RGBAImage.copy(ct,Dn,{x:zt,y:Qt},{x:0,y:0},{width:St,height:jt}),pt[kt]={data:Dn,pixelRatio:Vt,sdf:Zt,stretchX:vn,stretchY:bn,content:On}}re(null,pt)}}return{cancel:function(){Ue&&(Ue.cancel(),Ue=null),He&&(He.cancel(),He=null)}}}(G,this.map._requestManager,function(H,Q){if(C._spriteRequest=null,H)C.fire(new o.ErrorEvent(H));else if(Q)for(var re in Q)C.imageManager.addImage(re,Q[re]);C.imageManager.setLoaded(!0),C._availableImages=C.imageManager.listImages(),C.dispatcher.broadcast("setImages",C._availableImages),C.fire(new o.Event("data",{dataType:"style"}))})},W.prototype._validateLayer=function(G){var C=this.sourceCaches[G.source];if(C){var H=G.sourceLayer;if(H){var Q=C.getSource();(Q.type==="geojson"||Q.vectorLayerIds&&Q.vectorLayerIds.indexOf(H)===-1)&&this.fire(new o.ErrorEvent(new Error('Source layer "'+H+'" does not exist on source "'+Q.id+'" as specified by style layer "'+G.id+'"')))}}},W.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var G in this.sourceCaches)if(!this.sourceCaches[G].loaded())return!1;return!!this.imageManager.isLoaded()},W.prototype._serializeLayers=function(G){for(var C=[],H=0,Q=G;H<Q.length;H+=1){var re=Q[H],fe=this._layers[re];fe.type!=="custom"&&C.push(fe.serialize())}return C},W.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var G in this.sourceCaches)if(this.sourceCaches[G].hasTransition())return!0;for(var C in this._layers)if(this._layers[C].hasTransition())return!0;return!1},W.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},W.prototype.update=function(G){if(this._loaded){var C=this._changed;if(this._changed){var H=Object.keys(this._updatedLayers),Q=Object.keys(this._removedLayers);for(var re in(H.length||Q.length)&&this._updateWorkerLayers(H,Q),this._updatedSources){var fe=this._updatedSources[re];fe==="reload"?this._reloadSource(re):fe==="clear"&&this._clearSource(re)}for(var ye in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[ye].updateTransitions(G);this.light.updateTransitions(G),this._resetUpdates()}var Ce={};for(var De in this.sourceCaches){var Ue=this.sourceCaches[De];Ce[De]=Ue.used,Ue.used=!1}for(var He=0,tt=this._order;He<tt.length;He+=1){var ct=tt[He],pt=this._layers[ct];pt.recalculate(G,this._availableImages),!pt.isHidden(G.zoom)&&pt.source&&(this.sourceCaches[pt.source].used=!0)}for(var kt in Ce){var Lt=this.sourceCaches[kt];Ce[kt]!==Lt.used&&Lt.fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:kt}))}this.light.recalculate(G),this.z=G.zoom,C&&this.fire(new o.Event("data",{dataType:"style"}))}},W.prototype._updateTilesForChangedImages=function(){var G=Object.keys(this._changedImages);if(G.length){for(var C in this.sourceCaches)this.sourceCaches[C].reloadTilesForDependencies(["icons","patterns"],G);this._changedImages={}}},W.prototype._updateWorkerLayers=function(G,C){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(G),removedIds:C})},W.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},W.prototype.setState=function(G){var C=this;if(this._checkLoaded(),Gn(this,o.validateStyle(G)))return!1;(G=o.clone$1(G)).layers=Et(G.layers);var H=Yt(this.serialize(),G).filter(function(re){return!(re.command in Xn)});if(H.length===0)return!1;var Q=H.filter(function(re){return!(re.command in $n)});if(Q.length>0)throw new Error("Unimplemented: "+Q.map(function(re){return re.command}).join(", ")+".");return H.forEach(function(re){re.command!=="setTransition"&&C[re.command].apply(C,re.args)}),this.stylesheet=G,!0},W.prototype.addImage=function(G,C){if(this.getImage(G))return this.fire(new o.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(G,C),this._afterImageUpdated(G)},W.prototype.updateImage=function(G,C){this.imageManager.updateImage(G,C)},W.prototype.getImage=function(G){return this.imageManager.getImage(G)},W.prototype.removeImage=function(G){if(!this.getImage(G))return this.fire(new o.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(G),this._afterImageUpdated(G)},W.prototype._afterImageUpdated=function(G){this._availableImages=this.imageManager.listImages(),this._changedImages[G]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))},W.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},W.prototype.addSource=function(G,C,H){var Q=this;if(H===void 0&&(H={}),this._checkLoaded(),this.sourceCaches[G]!==void 0)throw new Error("There is already a source with this ID");if(!C.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(C).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(C.type)>=0&&this._validate(o.validateStyle.source,"sources."+G,C,null,H))){this.map&&this.map._collectResourceTiming&&(C.collectResourceTiming=!0);var re=this.sourceCaches[G]=new st(G,C,this.dispatcher);re.style=this,re.setEventedParent(this,function(){return{isSourceLoaded:Q.loaded(),source:re.serialize(),sourceId:G}}),re.onAdd(this.map),this._changed=!0}},W.prototype.removeSource=function(G){if(this._checkLoaded(),this.sourceCaches[G]===void 0)throw new Error("There is no source with this ID");for(var C in this._layers)if(this._layers[C].source===G)return this.fire(new o.ErrorEvent(new Error('Source "'+G+'" cannot be removed while layer "'+C+'" is using it.')));var H=this.sourceCaches[G];delete this.sourceCaches[G],delete this._updatedSources[G],H.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:G})),H.setEventedParent(null),H.clearTiles(),H.onRemove&&H.onRemove(this.map),this._changed=!0},W.prototype.setGeoJSONSourceData=function(G,C){this._checkLoaded(),this.sourceCaches[G].getSource().setData(C),this._changed=!0},W.prototype.getSource=function(G){return this.sourceCaches[G]&&this.sourceCaches[G].getSource()},W.prototype.addLayer=function(G,C,H){H===void 0&&(H={}),this._checkLoaded();var Q=G.id;if(this.getLayer(Q))this.fire(new o.ErrorEvent(new Error('Layer with id "'+Q+'" already exists on this map')));else{var re;if(G.type==="custom"){if(Gn(this,o.validateCustomStyleLayer(G)))return;re=o.createStyleLayer(G)}else{if(typeof G.source=="object"&&(this.addSource(Q,G.source),G=o.clone$1(G),G=o.extend(G,{source:Q})),this._validate(o.validateStyle.layer,"layers."+Q,G,{arrayIndex:-1},H))return;re=o.createStyleLayer(G),this._validateLayer(re),re.setEventedParent(this,{layer:{id:Q}}),this._serializedLayers[re.id]=re.serialize()}var fe=C?this._order.indexOf(C):this._order.length;if(C&&fe===-1)this.fire(new o.ErrorEvent(new Error('Layer with id "'+C+'" does not exist on this map.')));else{if(this._order.splice(fe,0,Q),this._layerOrderChanged=!0,this._layers[Q]=re,this._removedLayers[Q]&&re.source&&re.type!=="custom"){var ye=this._removedLayers[Q];delete this._removedLayers[Q],ye.type!==re.type?this._updatedSources[re.source]="clear":(this._updatedSources[re.source]="reload",this.sourceCaches[re.source].pause())}this._updateLayer(re),re.onAdd&&re.onAdd(this.map)}}},W.prototype.moveLayer=function(G,C){if(this._checkLoaded(),this._changed=!0,this._layers[G]){if(G!==C){var H=this._order.indexOf(G);this._order.splice(H,1);var Q=C?this._order.indexOf(C):this._order.length;C&&Q===-1?this.fire(new o.ErrorEvent(new Error('Layer with id "'+C+'" does not exist on this map.'))):(this._order.splice(Q,0,G),this._layerOrderChanged=!0)}}else this.fire(new o.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style and cannot be moved.")))},W.prototype.removeLayer=function(G){this._checkLoaded();var C=this._layers[G];if(C){C.setEventedParent(null);var H=this._order.indexOf(G);this._order.splice(H,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[G]=C,delete this._layers[G],delete this._serializedLayers[G],delete this._updatedLayers[G],delete this._updatedPaintProps[G],C.onRemove&&C.onRemove(this.map)}else this.fire(new o.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style and cannot be removed.")))},W.prototype.getLayer=function(G){return this._layers[G]},W.prototype.hasLayer=function(G){return G in this._layers},W.prototype.setLayerZoomRange=function(G,C,H){this._checkLoaded();var Q=this.getLayer(G);Q?Q.minzoom===C&&Q.maxzoom===H||(C!=null&&(Q.minzoom=C),H!=null&&(Q.maxzoom=H),this._updateLayer(Q)):this.fire(new o.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style and cannot have zoom extent.")))},W.prototype.setFilter=function(G,C,H){H===void 0&&(H={}),this._checkLoaded();var Q=this.getLayer(G);if(Q){if(!o.deepEqual(Q.filter,C))return C==null?(Q.filter=void 0,void this._updateLayer(Q)):void(this._validate(o.validateStyle.filter,"layers."+Q.id+".filter",C,null,H)||(Q.filter=o.clone$1(C),this._updateLayer(Q)))}else this.fire(new o.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style and cannot be filtered.")))},W.prototype.getFilter=function(G){return o.clone$1(this.getLayer(G).filter)},W.prototype.setLayoutProperty=function(G,C,H,Q){Q===void 0&&(Q={}),this._checkLoaded();var re=this.getLayer(G);re?o.deepEqual(re.getLayoutProperty(C),H)||(re.setLayoutProperty(C,H,Q),this._updateLayer(re)):this.fire(new o.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style and cannot be styled.")))},W.prototype.getLayoutProperty=function(G,C){var H=this.getLayer(G);if(H)return H.getLayoutProperty(C);this.fire(new o.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style.")))},W.prototype.setPaintProperty=function(G,C,H,Q){Q===void 0&&(Q={}),this._checkLoaded();var re=this.getLayer(G);re?o.deepEqual(re.getPaintProperty(C),H)||(re.setPaintProperty(C,H,Q)&&this._updateLayer(re),this._changed=!0,this._updatedPaintProps[G]=!0):this.fire(new o.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style and cannot be styled.")))},W.prototype.getPaintProperty=function(G,C){return this.getLayer(G).getPaintProperty(C)},W.prototype.setFeatureState=function(G,C){this._checkLoaded();var H=G.source,Q=G.sourceLayer,re=this.sourceCaches[H];if(re!==void 0){var fe=re.getSource().type;fe==="geojson"&&Q?this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):fe!=="vector"||Q?(G.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),re.setFeatureState(Q,G.id,C)):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+H+"' does not exist in the map's style.")))},W.prototype.removeFeatureState=function(G,C){this._checkLoaded();var H=G.source,Q=this.sourceCaches[H];if(Q!==void 0){var re=Q.getSource().type,fe=re==="vector"?G.sourceLayer:void 0;re!=="vector"||fe?C&&typeof G.id!="string"&&typeof G.id!="number"?this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):Q.removeFeatureState(fe,G.id,C):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+H+"' does not exist in the map's style.")))},W.prototype.getFeatureState=function(G){this._checkLoaded();var C=G.source,H=G.sourceLayer,Q=this.sourceCaches[C];if(Q!==void 0){if(Q.getSource().type!=="vector"||H)return G.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),Q.getFeatureState(H,G.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+C+"' does not exist in the map's style.")))},W.prototype.getTransition=function(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},W.prototype.serialize=function(){return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:o.mapObject(this.sourceCaches,function(G){return G.serialize()}),layers:this._serializeLayers(this._order)},function(G){return G!==void 0})},W.prototype._updateLayer=function(G){this._updatedLayers[G.id]=!0,G.source&&!this._updatedSources[G.source]&&this.sourceCaches[G.source].getSource().type!=="raster"&&(this._updatedSources[G.source]="reload",this.sourceCaches[G.source].pause()),this._changed=!0},W.prototype._flattenAndSortRenderedFeatures=function(G){for(var C=this,H=function(On){return C._layers[On].type==="fill-extrusion"},Q={},re=[],fe=this._order.length-1;fe>=0;fe--){var ye=this._order[fe];if(H(ye)){Q[ye]=fe;for(var Ce=0,De=G;Ce<De.length;Ce+=1){var Ue=De[Ce][ye];if(Ue)for(var He=0,tt=Ue;He<tt.length;He+=1){var ct=tt[He];re.push(ct)}}}}re.sort(function(On,Dn){return Dn.intersectionZ-On.intersectionZ});for(var pt=[],kt=this._order.length-1;kt>=0;kt--){var Lt=this._order[kt];if(H(Lt))for(var St=re.length-1;St>=0;St--){var jt=re[St].feature;if(Q[jt.layer.id]<kt)break;pt.push(jt),re.pop()}else for(var zt=0,Qt=G;zt<Qt.length;zt+=1){var Zt=Qt[zt][Lt];if(Zt)for(var Vt=0,vn=Zt;Vt<vn.length;Vt+=1){var bn=vn[Vt];pt.push(bn.feature)}}}return pt},W.prototype.queryRenderedFeatures=function(G,C,H){C&&C.filter&&this._validate(o.validateStyle.filter,"queryRenderedFeatures.filter",C.filter,null,C);var Q={};if(C&&C.layers){if(!Array.isArray(C.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var re=0,fe=C.layers;re<fe.length;re+=1){var ye=fe[re],Ce=this._layers[ye];if(!Ce)return this.fire(new o.ErrorEvent(new Error("The layer '"+ye+"' does not exist in the map's style and cannot be queried for features."))),[];Q[Ce.source]=!0}}var De=[];for(var Ue in C.availableImages=this._availableImages,this.sourceCaches)C.layers&&!Q[Ue]||De.push($(this.sourceCaches[Ue],this._layers,this._serializedLayers,G,C,H));return this.placement&&De.push(function(He,tt,ct,pt,kt,Lt,St){for(var jt={},zt=Lt.queryRenderedSymbols(pt),Qt=[],Zt=0,Vt=Object.keys(zt).map(Number);Zt<Vt.length;Zt+=1){var vn=Vt[Zt];Qt.push(St[vn])}Qt.sort(J);for(var bn=function(){var gr=Dn[On],Jn=gr.featureIndex.lookupSymbolFeatures(zt[gr.bucketInstanceId],tt,gr.bucketIndex,gr.sourceLayerIndex,kt.filter,kt.layers,kt.availableImages,He);for(var pr in Jn){var wr=jt[pr]=jt[pr]||[],Or=Jn[pr];Or.sort(function(vr,Cr){var Dr=gr.featureSortOrder;if(Dr){var qr=Dr.indexOf(vr.featureIndex);return Dr.indexOf(Cr.featureIndex)-qr}return Cr.featureIndex-vr.featureIndex});for(var nr=0,hr=Or;nr<hr.length;nr+=1){var Mr=hr[nr];wr.push(Mr)}}},On=0,Dn=Qt;On<Dn.length;On+=1)bn();var Yn=function(gr){jt[gr].forEach(function(Jn){var pr=Jn.feature,wr=He[gr],Or=ct[wr.source].getFeatureState(pr.layer["source-layer"],pr.id);pr.source=pr.layer.source,pr.layer["source-layer"]&&(pr.sourceLayer=pr.layer["source-layer"]),pr.state=Or})};for(var ir in jt)Yn(ir);return jt}(this._layers,this._serializedLayers,this.sourceCaches,G,C,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(De)},W.prototype.querySourceFeatures=function(G,C){C&&C.filter&&this._validate(o.validateStyle.filter,"querySourceFeatures.filter",C.filter,null,C);var H=this.sourceCaches[G];return H?function(Q,re){for(var fe=Q.getRenderableIds().map(function(tt){return Q.getTileByID(tt)}),ye=[],Ce={},De=0;De<fe.length;De++){var Ue=fe[De],He=Ue.tileID.canonical.key;Ce[He]||(Ce[He]=!0,Ue.querySourceFeatures(ye,re))}return ye}(H,C):[]},W.prototype.addSourceType=function(G,C,H){return W.getSourceType(G)?H(new Error('A source type called "'+G+'" already exists.')):(W.setSourceType(G,C),C.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:G,url:C.workerSourceURL},H):H(null,null))},W.prototype.getLight=function(){return this.light.getLight()},W.prototype.setLight=function(G,C){C===void 0&&(C={}),this._checkLoaded();var H=this.light.getLight(),Q=!1;for(var re in G)if(!o.deepEqual(G[re],H[re])){Q=!0;break}if(Q){var fe={now:o.browser.now(),transition:o.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(G,C),this.light.updateTransitions(fe)}},W.prototype._validate=function(G,C,H,Q,re){return re===void 0&&(re={}),(!re||re.validate!==!1)&&Gn(this,G.call(o.validateStyle,o.extend({key:C,style:this.serialize(),value:H,styleSpec:o.styleSpec},Q)))},W.prototype._remove=function(){for(var G in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[G].setEventedParent(null);for(var C in this.sourceCaches)this.sourceCaches[C].clearTiles(),this.sourceCaches[C].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},W.prototype._clearSource=function(G){this.sourceCaches[G].clearTiles()},W.prototype._reloadSource=function(G){this.sourceCaches[G].resume(),this.sourceCaches[G].reload()},W.prototype._updateSources=function(G){for(var C in this.sourceCaches)this.sourceCaches[C].update(G)},W.prototype._generateCollisionBoxes=function(){for(var G in this.sourceCaches)this._reloadSource(G)},W.prototype._updatePlacement=function(G,C,H,Q,re){re===void 0&&(re=!1);for(var fe=!1,ye=!1,Ce={},De=0,Ue=this._order;De<Ue.length;De+=1){var He=Ue[De],tt=this._layers[He];if(tt.type==="symbol"){if(!Ce[tt.source]){var ct=this.sourceCaches[tt.source];Ce[tt.source]=ct.getRenderableIds(!0).map(function(zt){return ct.getTileByID(zt)}).sort(function(zt,Qt){return Qt.tileID.overscaledZ-zt.tileID.overscaledZ||(zt.tileID.isLessThan(Qt.tileID)?-1:1)})}var pt=this.crossTileSymbolIndex.addLayer(tt,Ce[tt.source],G.center.lng);fe=fe||pt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((re=re||this._layerOrderChanged||H===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.browser.now(),G.zoom))&&(this.pauseablePlacement=new tn(G,this._order,re,C,H,Q,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Ce),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.browser.now()),ye=!0),fe&&this.pauseablePlacement.placement.setStale()),ye||fe)for(var kt=0,Lt=this._order;kt<Lt.length;kt+=1){var St=Lt[kt],jt=this._layers[St];jt.type==="symbol"&&this.placement.updateLayerOpacities(jt,Ce[jt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.browser.now())},W.prototype._releaseSymbolFadeTiles=function(){for(var G in this.sourceCaches)this.sourceCaches[G].releaseSymbolFadeTiles()},W.prototype.getImages=function(G,C,H){this.imageManager.getImages(C.icons,H),this._updateTilesForChangedImages();var Q=this.sourceCaches[C.source];Q&&Q.setDependencies(C.tileID.key,C.type,C.icons)},W.prototype.getGlyphs=function(G,C,H){this.glyphManager.getGlyphs(C.stacks,H)},W.prototype.getResource=function(G,C,H){return o.makeRequest(C,H)},W}(o.Evented);tr.getSourceType=function(N){return ne[N]},tr.setSourceType=function(N,W){ne[N]=W},tr.registerForPluginStateChange=o.registerForPluginStateChange;var Qn=o.createLayout([{name:"a_pos",type:"Int16",components:2}]),mr=xi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),fr=xi(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),dr=xi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),sr=xi(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),xr=xi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Er=xi(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),jr=xi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),fi=xi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),pi=xi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Ni=xi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),li=xi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Pi=xi(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),pa=xi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),da=xi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Xo=xi(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Vl=xi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Ps=xi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Os=xi(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Js=xi(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),qa=xi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ks=xi(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),$s=xi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Qs=xi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),vo=xi(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Co=xi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Jo=xi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function xi(N,W){var G=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,C=W.match(/attribute ([\w]+) ([\w]+)/g),H=N.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Q=W.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),re=Q?Q.concat(H):H,fe={};return{fragmentSource:N=N.replace(G,function(ye,Ce,De,Ue,He){return fe[He]=!0,Ce==="define"?`
#ifndef HAS_UNIFORM_u_`+He+`
varying `+De+" "+Ue+" "+He+`;
#else
uniform `+De+" "+Ue+" u_"+He+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+He+`
    `+De+" "+Ue+" "+He+" = u_"+He+`;
#endif
`}),vertexSource:W=W.replace(G,function(ye,Ce,De,Ue,He){var tt=Ue==="float"?"vec2":"vec4",ct=He.match(/color/)?"color":tt;return fe[He]?Ce==="define"?`
#ifndef HAS_UNIFORM_u_`+He+`
uniform lowp float u_`+He+`_t;
attribute `+De+" "+tt+" a_"+He+`;
varying `+De+" "+Ue+" "+He+`;
#else
uniform `+De+" "+Ue+" u_"+He+`;
#endif
`:ct==="vec4"?`
#ifndef HAS_UNIFORM_u_`+He+`
    `+He+" = a_"+He+`;
#else
    `+De+" "+Ue+" "+He+" = u_"+He+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+He+`
    `+He+" = unpack_mix_"+ct+"(a_"+He+", u_"+He+`_t);
#else
    `+De+" "+Ue+" "+He+" = u_"+He+`;
#endif
`:Ce==="define"?`
#ifndef HAS_UNIFORM_u_`+He+`
uniform lowp float u_`+He+`_t;
attribute `+De+" "+tt+" a_"+He+`;
#else
uniform `+De+" "+Ue+" u_"+He+`;
#endif
`:ct==="vec4"?`
#ifndef HAS_UNIFORM_u_`+He+`
    `+De+" "+Ue+" "+He+" = a_"+He+`;
#else
    `+De+" "+Ue+" "+He+" = u_"+He+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+He+`
    `+De+" "+Ue+" "+He+" = unpack_mix_"+ct+"(a_"+He+", u_"+He+`_t);
#else
    `+De+" "+Ue+" "+He+" = u_"+He+`;
#endif
`}),staticAttributes:C,staticUniforms:re}}var qi=Object.freeze({__proto__:null,prelude:mr,background:fr,backgroundPattern:dr,circle:sr,clippingMask:xr,heatmap:Er,heatmapTexture:jr,collisionBox:fi,collisionCircle:pi,debug:Ni,fill:li,fillOutline:Pi,fillOutlinePattern:pa,fillPattern:da,fillExtrusion:Xo,fillExtrusionPattern:Vl,hillshadePrepare:Ps,hillshade:Os,line:Js,lineGradient:qa,linePattern:Ks,lineSDF:$s,raster:Qs,symbolIcon:vo,symbolSDF:Co,symbolTextAndIcon:Jo}),mo=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function ro(N){for(var W=[],G=0;G<N.length;G++)if(N[G]!==null){var C=N[G].split(" ");W.push(C.pop())}return W}mo.prototype.bind=function(N,W,G,C,H,Q,re,fe){this.context=N;for(var ye=this.boundPaintVertexBuffers.length!==C.length,Ce=0;!ye&&Ce<C.length;Ce++)this.boundPaintVertexBuffers[Ce]!==C[Ce]&&(ye=!0);var De=!this.vao||this.boundProgram!==W||this.boundLayoutVertexBuffer!==G||ye||this.boundIndexBuffer!==H||this.boundVertexOffset!==Q||this.boundDynamicVertexBuffer!==re||this.boundDynamicVertexBuffer2!==fe;!N.extVertexArrayObject||De?this.freshBind(W,G,C,H,Q,re,fe):(N.bindVertexArrayOES.set(this.vao),re&&re.bind(),H&&H.dynamicDraw&&H.bind(),fe&&fe.bind())},mo.prototype.freshBind=function(N,W,G,C,H,Q,re){var fe,ye=N.numAttributes,Ce=this.context,De=Ce.gl;if(Ce.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ce.extVertexArrayObject.createVertexArrayOES(),Ce.bindVertexArrayOES.set(this.vao),fe=0,this.boundProgram=N,this.boundLayoutVertexBuffer=W,this.boundPaintVertexBuffers=G,this.boundIndexBuffer=C,this.boundVertexOffset=H,this.boundDynamicVertexBuffer=Q,this.boundDynamicVertexBuffer2=re;else{fe=Ce.currentNumAttributes||0;for(var Ue=ye;Ue<fe;Ue++)De.disableVertexAttribArray(Ue)}W.enableAttributes(De,N);for(var He=0,tt=G;He<tt.length;He+=1)tt[He].enableAttributes(De,N);Q&&Q.enableAttributes(De,N),re&&re.enableAttributes(De,N),W.bind(),W.setVertexAttribPointers(De,N,H);for(var ct=0,pt=G;ct<pt.length;ct+=1){var kt=pt[ct];kt.bind(),kt.setVertexAttribPointers(De,N,H)}Q&&(Q.bind(),Q.setVertexAttribPointers(De,N,H)),C&&C.bind(),re&&(re.bind(),re.setVertexAttribPointers(De,N,H)),Ce.currentNumAttributes=ye},mo.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Ha=function(N,W,G,C,H,Q){var re=N.gl;this.program=re.createProgram();for(var fe=ro(G.staticAttributes),ye=C?C.getBinderAttributes():[],Ce=fe.concat(ye),De=G.staticUniforms?ro(G.staticUniforms):[],Ue=C?C.getBinderUniforms():[],He=[],tt=0,ct=De.concat(Ue);tt<ct.length;tt+=1){var pt=ct[tt];He.indexOf(pt)<0&&He.push(pt)}var kt=C?C.defines():[];Q&&kt.push("#define OVERDRAW_INSPECTOR;");var Lt=kt.concat(mr.fragmentSource,G.fragmentSource).join(`
`),St=kt.concat(mr.vertexSource,G.vertexSource).join(`
`),jt=re.createShader(re.FRAGMENT_SHADER);if(re.isContextLost())this.failedToCreate=!0;else{re.shaderSource(jt,Lt),re.compileShader(jt),re.attachShader(this.program,jt);var zt=re.createShader(re.VERTEX_SHADER);if(re.isContextLost())this.failedToCreate=!0;else{re.shaderSource(zt,St),re.compileShader(zt),re.attachShader(this.program,zt),this.attributes={};var Qt={};this.numAttributes=Ce.length;for(var Zt=0;Zt<this.numAttributes;Zt++)Ce[Zt]&&(re.bindAttribLocation(this.program,Zt,Ce[Zt]),this.attributes[Ce[Zt]]=Zt);re.linkProgram(this.program),re.deleteShader(zt),re.deleteShader(jt);for(var Vt=0;Vt<He.length;Vt++){var vn=He[Vt];if(vn&&!Qt[vn]){var bn=re.getUniformLocation(this.program,vn);bn&&(Qt[vn]=bn)}}this.fixedUniforms=H(N,Qt),this.binderUniforms=C?C.getUniforms(N,Qt):[]}}};function Po(N,W,G){var C=1/er(G,1,W.transform.tileZoom),H=Math.pow(2,G.tileID.overscaledZ),Q=G.tileSize*Math.pow(2,W.transform.tileZoom)/H,re=Q*(G.tileID.canonical.x+G.tileID.wrap*H),fe=Q*G.tileID.canonical.y;return{u_image:0,u_texsize:G.imageAtlasTexture.size,u_scale:[C,N.fromScale,N.toScale],u_fade:N.t,u_pixel_coord_upper:[re>>16,fe>>16],u_pixel_coord_lower:[65535&re,65535&fe]}}Ha.prototype.draw=function(N,W,G,C,H,Q,re,fe,ye,Ce,De,Ue,He,tt,ct,pt){var kt,Lt=N.gl;if(!this.failedToCreate){for(var St in N.program.set(this.program),N.setDepthMode(G),N.setStencilMode(C),N.setColorMode(H),N.setCullFace(Q),this.fixedUniforms)this.fixedUniforms[St].set(re[St]);tt&&tt.setUniforms(N,this.binderUniforms,Ue,{zoom:He});for(var jt=(kt={},kt[Lt.LINES]=2,kt[Lt.TRIANGLES]=3,kt[Lt.LINE_STRIP]=1,kt)[W],zt=0,Qt=De.get();zt<Qt.length;zt+=1){var Zt=Qt[zt],Vt=Zt.vaos||(Zt.vaos={});(Vt[fe]||(Vt[fe]=new mo)).bind(N,this,ye,tt?tt.getPaintVertexBuffers():[],Ce,Zt.vertexOffset,ct,pt),Lt.drawElements(W,Zt.primitiveLength*jt,Lt.UNSIGNED_SHORT,Zt.primitiveOffset*jt*2)}}};var io=function(N,W,G,C){var H=W.style.light,Q=H.properties.get("position"),re=[Q.x,Q.y,Q.z],fe=o.create$1();H.properties.get("anchor")==="viewport"&&o.fromRotation(fe,-W.transform.angle),o.transformMat3(re,re,fe);var ye=H.properties.get("color");return{u_matrix:N,u_lightpos:re,u_lightintensity:H.properties.get("intensity"),u_lightcolor:[ye.r,ye.g,ye.b],u_vertical_gradient:+G,u_opacity:C}},Oo=function(N,W,G,C,H,Q,re){return o.extend(io(N,W,G,C),Po(Q,W,re),{u_height_factor:-Math.pow(2,H.overscaledZ)/re.tileSize/8})},yo=function(N){return{u_matrix:N}},Io=function(N,W,G,C){return o.extend(yo(N),Po(G,W,C))},ao=function(N,W){return{u_matrix:N,u_world:W}},hl=function(N,W,G,C,H){return o.extend(Io(N,W,G,C),{u_world:H})},el=function(N,W,G,C){var H,Q,re=N.transform;if(C.paint.get("circle-pitch-alignment")==="map"){var fe=er(G,1,re.zoom);H=!0,Q=[fe,fe]}else H=!1,Q=re.pixelsToGLUnits;return{u_camera_to_center_distance:re.cameraToCenterDistance,u_scale_with_map:+(C.paint.get("circle-pitch-scale")==="map"),u_matrix:N.translatePosMatrix(W.posMatrix,G,C.paint.get("circle-translate"),C.paint.get("circle-translate-anchor")),u_pitch_with_map:+H,u_device_pixel_ratio:o.browser.devicePixelRatio,u_extrude_scale:Q}},Ko=function(N,W,G){var C=er(G,1,W.zoom),H=Math.pow(2,W.zoom-G.tileID.overscaledZ),Q=G.tileID.overscaleFactor();return{u_matrix:N,u_camera_to_center_distance:W.cameraToCenterDistance,u_pixels_to_tile_units:C,u_extrude_scale:[W.pixelsToGLUnits[0]/(C*H),W.pixelsToGLUnits[1]/(C*H)],u_overscale_factor:Q}},Tl=function(N,W,G){return{u_matrix:N,u_inv_matrix:W,u_camera_to_center_distance:G.cameraToCenterDistance,u_viewport_size:[G.width,G.height]}},kl=function(N,W,G){return G===void 0&&(G=1),{u_matrix:N,u_color:W,u_overlay:0,u_overlay_scale:G}},$o=function(N){return{u_matrix:N}},Al=function(N,W,G,C){return{u_matrix:N,u_extrude_scale:er(W,1,G),u_intensity:C}},ql=function(N,W,G,C){var H=o.create();o.ortho(H,0,N.width,N.height,0,0,1);var Q=N.context.gl;return{u_matrix:H,u_world:[Q.drawingBufferWidth,Q.drawingBufferHeight],u_image:G,u_color_ramp:C,u_opacity:W.paint.get("heatmap-opacity")}},Hl=function(N,W,G){var C=G.paint.get("hillshade-shadow-color"),H=G.paint.get("hillshade-highlight-color"),Q=G.paint.get("hillshade-accent-color"),re=G.paint.get("hillshade-illumination-direction")*(Math.PI/180);G.paint.get("hillshade-illumination-anchor")==="viewport"&&(re-=N.transform.angle);var fe,ye,Ce,De=!N.options.moving;return{u_matrix:N.transform.calculatePosMatrix(W.tileID.toUnwrapped(),De),u_image:0,u_latrange:(fe=W.tileID,ye=Math.pow(2,fe.canonical.z),Ce=fe.canonical.y,[new o.MercatorCoordinate(0,Ce/ye).toLngLat().lat,new o.MercatorCoordinate(0,(Ce+1)/ye).toLngLat().lat]),u_light:[G.paint.get("hillshade-exaggeration"),re],u_shadow:C,u_highlight:H,u_accent:Q}},Qo=function(N,W){var G=W.stride,C=o.create();return o.ortho(C,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(C,C,[0,-o.EXTENT,0]),{u_matrix:C,u_image:1,u_dimension:[G,G],u_zoom:N.overscaledZ,u_unpack:W.getUnpackVector()}},oo=function(N,W,G){var C=N.transform;return{u_matrix:Ga(N,W,G),u_ratio:1/er(W,1,C.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]]}},ds=function(N,W,G,C){return o.extend(oo(N,W,G),{u_image:0,u_image_height:C})},es=function(N,W,G,C){var H=N.transform,Q=ts(W,H);return{u_matrix:Ga(N,W,G),u_texsize:W.imageAtlasTexture.size,u_ratio:1/er(W,1,H.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_image:0,u_scale:[Q,C.fromScale,C.toScale],u_fade:C.t,u_units_to_pixels:[1/H.pixelsToGLUnits[0],1/H.pixelsToGLUnits[1]]}},Is=function(N,W,G,C,H){var Q=N.transform,re=N.lineAtlas,fe=ts(W,Q),ye=G.layout.get("line-cap")==="round",Ce=re.getDash(C.from,ye),De=re.getDash(C.to,ye),Ue=Ce.width*H.fromScale,He=De.width*H.toScale;return o.extend(oo(N,W,G),{u_patternscale_a:[fe/Ue,-Ce.height/2],u_patternscale_b:[fe/He,-De.height/2],u_sdfgamma:re.width/(256*Math.min(Ue,He)*o.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ce.y,u_tex_y_b:De.y,u_mix:H.t})};function ts(N,W){return 1/er(N,1,W.tileZoom)}function Ga(N,W,G){return N.translatePosMatrix(W.tileID.posMatrix,W,G.paint.get("line-translate"),G.paint.get("line-translate-anchor"))}var pl=function(N,W,G,C,H){return{u_matrix:N,u_tl_parent:W,u_scale_parent:G,u_buffer_scale:1,u_fade_t:C.mix,u_opacity:C.opacity*H.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:H.paint.get("raster-brightness-min"),u_brightness_high:H.paint.get("raster-brightness-max"),u_saturation_factor:(re=H.paint.get("raster-saturation"),re>0?1-1/(1.001-re):-re),u_contrast_factor:(Q=H.paint.get("raster-contrast"),Q>0?1/(1-Q):1+Q),u_spin_weights:zo(H.paint.get("raster-hue-rotate"))};var Q,re};function zo(N){N*=Math.PI/180;var W=Math.sin(N),G=Math.cos(N);return[(2*G+1)/3,(-Math.sqrt(3)*W-G+1)/3,(Math.sqrt(3)*W-G+1)/3]}var xo,bo=function(N,W,G,C,H,Q,re,fe,ye,Ce){var De=H.transform;return{u_is_size_zoom_constant:+(N==="constant"||N==="source"),u_is_size_feature_constant:+(N==="constant"||N==="camera"),u_size_t:W?W.uSizeT:0,u_size:W?W.uSize:0,u_camera_to_center_distance:De.cameraToCenterDistance,u_pitch:De.pitch/360*2*Math.PI,u_rotate_symbol:+G,u_aspect_ratio:De.width/De.height,u_fade_change:H.options.fadeDuration?H.symbolFadeChange:1,u_matrix:Q,u_label_plane_matrix:re,u_coord_matrix:fe,u_is_text:+ye,u_pitch_with_map:+C,u_texsize:Ce,u_texture:0}},Do=function(N,W,G,C,H,Q,re,fe,ye,Ce,De){var Ue=H.transform;return o.extend(bo(N,W,G,C,H,Q,re,fe,ye,Ce),{u_gamma_scale:C?Math.cos(Ue._pitch)*Ue.cameraToCenterDistance:1,u_device_pixel_ratio:o.browser.devicePixelRatio,u_is_halo:+De})},Zr=function(N,W,G,C,H,Q,re,fe,ye,Ce){return o.extend(Do(N,W,G,C,H,Q,re,fe,!0,ye,!0),{u_texsize_icon:Ce,u_texture_icon:1})},gs=function(N,W,G){return{u_matrix:N,u_opacity:W,u_color:G}},Gl=function(N,W,G,C,H,Q){return o.extend(function(re,fe,ye,Ce){var De=ye.imageManager.getPattern(re.from.toString()),Ue=ye.imageManager.getPattern(re.to.toString()),He=ye.imageManager.getPixelSize(),tt=He.width,ct=He.height,pt=Math.pow(2,Ce.tileID.overscaledZ),kt=Ce.tileSize*Math.pow(2,ye.transform.tileZoom)/pt,Lt=kt*(Ce.tileID.canonical.x+Ce.tileID.wrap*pt),St=kt*Ce.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:De.tl,u_pattern_br_a:De.br,u_pattern_tl_b:Ue.tl,u_pattern_br_b:Ue.br,u_texsize:[tt,ct],u_mix:fe.t,u_pattern_size_a:De.displaySize,u_pattern_size_b:Ue.displaySize,u_scale_a:fe.fromScale,u_scale_b:fe.toScale,u_tile_units_to_pixels:1/er(Ce,1,ye.transform.tileZoom),u_pixel_coord_upper:[Lt>>16,St>>16],u_pixel_coord_lower:[65535&Lt,65535&St]}}(C,Q,G,H),{u_matrix:N,u_opacity:W})},tl={fillExtrusion:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_lightpos:new o.Uniform3f(N,W.u_lightpos),u_lightintensity:new o.Uniform1f(N,W.u_lightintensity),u_lightcolor:new o.Uniform3f(N,W.u_lightcolor),u_vertical_gradient:new o.Uniform1f(N,W.u_vertical_gradient),u_opacity:new o.Uniform1f(N,W.u_opacity)}},fillExtrusionPattern:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_lightpos:new o.Uniform3f(N,W.u_lightpos),u_lightintensity:new o.Uniform1f(N,W.u_lightintensity),u_lightcolor:new o.Uniform3f(N,W.u_lightcolor),u_vertical_gradient:new o.Uniform1f(N,W.u_vertical_gradient),u_height_factor:new o.Uniform1f(N,W.u_height_factor),u_image:new o.Uniform1i(N,W.u_image),u_texsize:new o.Uniform2f(N,W.u_texsize),u_pixel_coord_upper:new o.Uniform2f(N,W.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(N,W.u_pixel_coord_lower),u_scale:new o.Uniform3f(N,W.u_scale),u_fade:new o.Uniform1f(N,W.u_fade),u_opacity:new o.Uniform1f(N,W.u_opacity)}},fill:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix)}},fillPattern:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_image:new o.Uniform1i(N,W.u_image),u_texsize:new o.Uniform2f(N,W.u_texsize),u_pixel_coord_upper:new o.Uniform2f(N,W.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(N,W.u_pixel_coord_lower),u_scale:new o.Uniform3f(N,W.u_scale),u_fade:new o.Uniform1f(N,W.u_fade)}},fillOutline:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_world:new o.Uniform2f(N,W.u_world)}},fillOutlinePattern:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_world:new o.Uniform2f(N,W.u_world),u_image:new o.Uniform1i(N,W.u_image),u_texsize:new o.Uniform2f(N,W.u_texsize),u_pixel_coord_upper:new o.Uniform2f(N,W.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(N,W.u_pixel_coord_lower),u_scale:new o.Uniform3f(N,W.u_scale),u_fade:new o.Uniform1f(N,W.u_fade)}},circle:function(N,W){return{u_camera_to_center_distance:new o.Uniform1f(N,W.u_camera_to_center_distance),u_scale_with_map:new o.Uniform1i(N,W.u_scale_with_map),u_pitch_with_map:new o.Uniform1i(N,W.u_pitch_with_map),u_extrude_scale:new o.Uniform2f(N,W.u_extrude_scale),u_device_pixel_ratio:new o.Uniform1f(N,W.u_device_pixel_ratio),u_matrix:new o.UniformMatrix4f(N,W.u_matrix)}},collisionBox:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_camera_to_center_distance:new o.Uniform1f(N,W.u_camera_to_center_distance),u_pixels_to_tile_units:new o.Uniform1f(N,W.u_pixels_to_tile_units),u_extrude_scale:new o.Uniform2f(N,W.u_extrude_scale),u_overscale_factor:new o.Uniform1f(N,W.u_overscale_factor)}},collisionCircle:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_inv_matrix:new o.UniformMatrix4f(N,W.u_inv_matrix),u_camera_to_center_distance:new o.Uniform1f(N,W.u_camera_to_center_distance),u_viewport_size:new o.Uniform2f(N,W.u_viewport_size)}},debug:function(N,W){return{u_color:new o.UniformColor(N,W.u_color),u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_overlay:new o.Uniform1i(N,W.u_overlay),u_overlay_scale:new o.Uniform1f(N,W.u_overlay_scale)}},clippingMask:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix)}},heatmap:function(N,W){return{u_extrude_scale:new o.Uniform1f(N,W.u_extrude_scale),u_intensity:new o.Uniform1f(N,W.u_intensity),u_matrix:new o.UniformMatrix4f(N,W.u_matrix)}},heatmapTexture:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_world:new o.Uniform2f(N,W.u_world),u_image:new o.Uniform1i(N,W.u_image),u_color_ramp:new o.Uniform1i(N,W.u_color_ramp),u_opacity:new o.Uniform1f(N,W.u_opacity)}},hillshade:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_image:new o.Uniform1i(N,W.u_image),u_latrange:new o.Uniform2f(N,W.u_latrange),u_light:new o.Uniform2f(N,W.u_light),u_shadow:new o.UniformColor(N,W.u_shadow),u_highlight:new o.UniformColor(N,W.u_highlight),u_accent:new o.UniformColor(N,W.u_accent)}},hillshadePrepare:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_image:new o.Uniform1i(N,W.u_image),u_dimension:new o.Uniform2f(N,W.u_dimension),u_zoom:new o.Uniform1f(N,W.u_zoom),u_unpack:new o.Uniform4f(N,W.u_unpack)}},line:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_ratio:new o.Uniform1f(N,W.u_ratio),u_device_pixel_ratio:new o.Uniform1f(N,W.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(N,W.u_units_to_pixels)}},lineGradient:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_ratio:new o.Uniform1f(N,W.u_ratio),u_device_pixel_ratio:new o.Uniform1f(N,W.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(N,W.u_units_to_pixels),u_image:new o.Uniform1i(N,W.u_image),u_image_height:new o.Uniform1f(N,W.u_image_height)}},linePattern:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_texsize:new o.Uniform2f(N,W.u_texsize),u_ratio:new o.Uniform1f(N,W.u_ratio),u_device_pixel_ratio:new o.Uniform1f(N,W.u_device_pixel_ratio),u_image:new o.Uniform1i(N,W.u_image),u_units_to_pixels:new o.Uniform2f(N,W.u_units_to_pixels),u_scale:new o.Uniform3f(N,W.u_scale),u_fade:new o.Uniform1f(N,W.u_fade)}},lineSDF:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_ratio:new o.Uniform1f(N,W.u_ratio),u_device_pixel_ratio:new o.Uniform1f(N,W.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(N,W.u_units_to_pixels),u_patternscale_a:new o.Uniform2f(N,W.u_patternscale_a),u_patternscale_b:new o.Uniform2f(N,W.u_patternscale_b),u_sdfgamma:new o.Uniform1f(N,W.u_sdfgamma),u_image:new o.Uniform1i(N,W.u_image),u_tex_y_a:new o.Uniform1f(N,W.u_tex_y_a),u_tex_y_b:new o.Uniform1f(N,W.u_tex_y_b),u_mix:new o.Uniform1f(N,W.u_mix)}},raster:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_tl_parent:new o.Uniform2f(N,W.u_tl_parent),u_scale_parent:new o.Uniform1f(N,W.u_scale_parent),u_buffer_scale:new o.Uniform1f(N,W.u_buffer_scale),u_fade_t:new o.Uniform1f(N,W.u_fade_t),u_opacity:new o.Uniform1f(N,W.u_opacity),u_image0:new o.Uniform1i(N,W.u_image0),u_image1:new o.Uniform1i(N,W.u_image1),u_brightness_low:new o.Uniform1f(N,W.u_brightness_low),u_brightness_high:new o.Uniform1f(N,W.u_brightness_high),u_saturation_factor:new o.Uniform1f(N,W.u_saturation_factor),u_contrast_factor:new o.Uniform1f(N,W.u_contrast_factor),u_spin_weights:new o.Uniform3f(N,W.u_spin_weights)}},symbolIcon:function(N,W){return{u_is_size_zoom_constant:new o.Uniform1i(N,W.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(N,W.u_is_size_feature_constant),u_size_t:new o.Uniform1f(N,W.u_size_t),u_size:new o.Uniform1f(N,W.u_size),u_camera_to_center_distance:new o.Uniform1f(N,W.u_camera_to_center_distance),u_pitch:new o.Uniform1f(N,W.u_pitch),u_rotate_symbol:new o.Uniform1i(N,W.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(N,W.u_aspect_ratio),u_fade_change:new o.Uniform1f(N,W.u_fade_change),u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(N,W.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(N,W.u_coord_matrix),u_is_text:new o.Uniform1i(N,W.u_is_text),u_pitch_with_map:new o.Uniform1i(N,W.u_pitch_with_map),u_texsize:new o.Uniform2f(N,W.u_texsize),u_texture:new o.Uniform1i(N,W.u_texture)}},symbolSDF:function(N,W){return{u_is_size_zoom_constant:new o.Uniform1i(N,W.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(N,W.u_is_size_feature_constant),u_size_t:new o.Uniform1f(N,W.u_size_t),u_size:new o.Uniform1f(N,W.u_size),u_camera_to_center_distance:new o.Uniform1f(N,W.u_camera_to_center_distance),u_pitch:new o.Uniform1f(N,W.u_pitch),u_rotate_symbol:new o.Uniform1i(N,W.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(N,W.u_aspect_ratio),u_fade_change:new o.Uniform1f(N,W.u_fade_change),u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(N,W.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(N,W.u_coord_matrix),u_is_text:new o.Uniform1i(N,W.u_is_text),u_pitch_with_map:new o.Uniform1i(N,W.u_pitch_with_map),u_texsize:new o.Uniform2f(N,W.u_texsize),u_texture:new o.Uniform1i(N,W.u_texture),u_gamma_scale:new o.Uniform1f(N,W.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(N,W.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(N,W.u_is_halo)}},symbolTextAndIcon:function(N,W){return{u_is_size_zoom_constant:new o.Uniform1i(N,W.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(N,W.u_is_size_feature_constant),u_size_t:new o.Uniform1f(N,W.u_size_t),u_size:new o.Uniform1f(N,W.u_size),u_camera_to_center_distance:new o.Uniform1f(N,W.u_camera_to_center_distance),u_pitch:new o.Uniform1f(N,W.u_pitch),u_rotate_symbol:new o.Uniform1i(N,W.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(N,W.u_aspect_ratio),u_fade_change:new o.Uniform1f(N,W.u_fade_change),u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(N,W.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(N,W.u_coord_matrix),u_is_text:new o.Uniform1i(N,W.u_is_text),u_pitch_with_map:new o.Uniform1i(N,W.u_pitch_with_map),u_texsize:new o.Uniform2f(N,W.u_texsize),u_texsize_icon:new o.Uniform2f(N,W.u_texsize_icon),u_texture:new o.Uniform1i(N,W.u_texture),u_texture_icon:new o.Uniform1i(N,W.u_texture_icon),u_gamma_scale:new o.Uniform1f(N,W.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(N,W.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(N,W.u_is_halo)}},background:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_opacity:new o.Uniform1f(N,W.u_opacity),u_color:new o.UniformColor(N,W.u_color)}},backgroundPattern:function(N,W){return{u_matrix:new o.UniformMatrix4f(N,W.u_matrix),u_opacity:new o.Uniform1f(N,W.u_opacity),u_image:new o.Uniform1i(N,W.u_image),u_pattern_tl_a:new o.Uniform2f(N,W.u_pattern_tl_a),u_pattern_br_a:new o.Uniform2f(N,W.u_pattern_br_a),u_pattern_tl_b:new o.Uniform2f(N,W.u_pattern_tl_b),u_pattern_br_b:new o.Uniform2f(N,W.u_pattern_br_b),u_texsize:new o.Uniform2f(N,W.u_texsize),u_mix:new o.Uniform1f(N,W.u_mix),u_pattern_size_a:new o.Uniform2f(N,W.u_pattern_size_a),u_pattern_size_b:new o.Uniform2f(N,W.u_pattern_size_b),u_scale_a:new o.Uniform1f(N,W.u_scale_a),u_scale_b:new o.Uniform1f(N,W.u_scale_b),u_pixel_coord_upper:new o.Uniform2f(N,W.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(N,W.u_pixel_coord_lower),u_tile_units_to_pixels:new o.Uniform1f(N,W.u_tile_units_to_pixels)}}};function vs(N,W,G,C,H,Q,re){for(var fe=N.context,ye=fe.gl,Ce=N.useProgram("collisionBox"),De=[],Ue=0,He=0,tt=0;tt<C.length;tt++){var ct=C[tt],pt=W.getTile(ct),kt=pt.getBucket(G);if(kt){var Lt=ct.posMatrix;H[0]===0&&H[1]===0||(Lt=N.translatePosMatrix(ct.posMatrix,pt,H,Q));var St=re?kt.textCollisionBox:kt.iconCollisionBox,jt=kt.collisionCircleArray;if(jt.length>0){var zt=o.create(),Qt=Lt;o.mul(zt,kt.placementInvProjMatrix,N.transform.glCoordMatrix),o.mul(zt,zt,kt.placementViewportMatrix),De.push({circleArray:jt,circleOffset:He,transform:Qt,invTransform:zt}),He=Ue+=jt.length/4}St&&Ce.draw(fe,ye.LINES,Ft.disabled,Ge.disabled,N.colorModeForRenderPass(),Ne.disabled,Ko(Lt,N.transform,pt),G.id,St.layoutVertexBuffer,St.indexBuffer,St.segments,null,N.transform.zoom,null,null,St.collisionVertexBuffer)}}if(re&&De.length){var Zt=N.useProgram("collisionCircle"),Vt=new o.StructArrayLayout2f1f2i16;Vt.resize(4*Ue),Vt._trim();for(var vn=0,bn=0,On=De;bn<On.length;bn+=1)for(var Dn=On[bn],Yn=0;Yn<Dn.circleArray.length/4;Yn++){var ir=4*Yn,gr=Dn.circleArray[ir+0],Jn=Dn.circleArray[ir+1],pr=Dn.circleArray[ir+2],wr=Dn.circleArray[ir+3];Vt.emplace(vn++,gr,Jn,pr,wr,0),Vt.emplace(vn++,gr,Jn,pr,wr,1),Vt.emplace(vn++,gr,Jn,pr,wr,2),Vt.emplace(vn++,gr,Jn,pr,wr,3)}(!xo||xo.length<2*Ue)&&(xo=function(Dr){var qr=2*Dr,Hr=new o.StructArrayLayout3ui6;Hr.resize(qr),Hr._trim();for(var Yr=0;Yr<qr;Yr++){var Jr=6*Yr;Hr.uint16[Jr+0]=4*Yr+0,Hr.uint16[Jr+1]=4*Yr+1,Hr.uint16[Jr+2]=4*Yr+2,Hr.uint16[Jr+3]=4*Yr+2,Hr.uint16[Jr+4]=4*Yr+3,Hr.uint16[Jr+5]=4*Yr+0}return Hr}(Ue));for(var Or=fe.createIndexBuffer(xo,!0),nr=fe.createVertexBuffer(Vt,o.collisionCircleLayout.members,!0),hr=0,Mr=De;hr<Mr.length;hr+=1){var vr=Mr[hr],Cr=Tl(vr.transform,vr.invTransform,N.transform);Zt.draw(fe,ye.TRIANGLES,Ft.disabled,Ge.disabled,N.colorModeForRenderPass(),Ne.disabled,Cr,G.id,nr,Or,o.SegmentVector.simpleSegment(0,2*vr.circleOffset,vr.circleArray.length,vr.circleArray.length/2),null,N.transform.zoom,null,null,null)}nr.destroy(),Or.destroy()}}var Ml=o.identity(new Float32Array(16));function Wl(N,W,G,C,H,Q){var re=o.getAnchorAlignment(N),fe=-(re.horizontalAlign-.5)*W,ye=-(re.verticalAlign-.5)*G,Ce=o.evaluateVariableOffset(N,C);return new o.Point((fe/H+Ce[0])*Q,(ye/H+Ce[1])*Q)}function nl(N,W,G,C,H,Q,re,fe,ye,Ce,De){var Ue=N.text.placedSymbolArray,He=N.text.dynamicLayoutVertexArray,tt=N.icon.dynamicLayoutVertexArray,ct={};He.clear();for(var pt=0;pt<Ue.length;pt++){var kt=Ue.get(pt),Lt=N.allowVerticalPlacement&&!kt.placedOrientation,St=kt.hidden||!kt.crossTileID||Lt?null:C[kt.crossTileID];if(St){var jt=new o.Point(kt.anchorX,kt.anchorY),zt=$t(jt,G?fe:re),Qt=cn(Q.cameraToCenterDistance,zt.signedDistanceFromCamera),Zt=H.evaluateSizeForFeature(N.textSizeData,Ce,kt)*Qt/o.ONE_EM;G&&(Zt*=N.tilePixelRatio/ye);for(var Vt=St.width,vn=St.height,bn=Wl(St.anchor,Vt,vn,St.textOffset,St.textBoxScale,Zt),On=G?$t(jt.add(bn),re).point:zt.point.add(W?bn.rotate(-Q.angle):bn),Dn=N.allowVerticalPlacement&&kt.placedOrientation===o.WritingMode.vertical?Math.PI/2:0,Yn=0;Yn<kt.numGlyphs;Yn++)o.addDynamicAttributes(He,On,Dn);De&&kt.associatedIconIndex>=0&&(ct[kt.associatedIconIndex]={shiftedAnchor:On,angle:Dn})}else Un(kt.numGlyphs,He)}if(De){tt.clear();for(var ir=N.icon.placedSymbolArray,gr=0;gr<ir.length;gr++){var Jn=ir.get(gr);if(Jn.hidden)Un(Jn.numGlyphs,tt);else{var pr=ct[gr];if(pr)for(var wr=0;wr<Jn.numGlyphs;wr++)o.addDynamicAttributes(tt,pr.shiftedAnchor,pr.angle);else Un(Jn.numGlyphs,tt)}}N.icon.dynamicLayoutVertexBuffer.updateData(tt)}N.text.dynamicLayoutVertexBuffer.updateData(He)}function Yl(N,W,G){return G.iconsInText&&W?"symbolTextAndIcon":N?"symbolSDF":"symbolIcon"}function Ro(N,W,G,C,H,Q,re,fe,ye,Ce,De,Ue){for(var He=N.context,tt=He.gl,ct=N.transform,pt=fe==="map",kt=ye==="map",Lt=pt&&G.layout.get("symbol-placement")!=="point",St=pt&&!kt&&!Lt,jt=G.layout.get("symbol-sort-key").constantOr(1)!==void 0,zt=!1,Qt=N.depthModeForSublayer(0,Ft.ReadOnly),Zt=G.layout.get("text-variable-anchor"),Vt=[],vn=0,bn=C;vn<bn.length;vn+=1){var On=bn[vn],Dn=W.getTile(On),Yn=Dn.getBucket(G);if(Yn){var ir=H?Yn.text:Yn.icon;if(ir&&ir.segments.get().length){var gr=ir.programConfigurations.get(G.id),Jn=H||Yn.sdfIcons,pr=H?Yn.textSizeData:Yn.iconSizeData,wr=kt||ct.pitch!==0,Or=N.useProgram(Yl(Jn,H,Yn),gr),nr=o.evaluateSizeForZoom(pr,ct.zoom),hr=void 0,Mr=[0,0],vr=void 0,Cr=void 0,Dr=null,qr=void 0;if(H){if(vr=Dn.glyphAtlasTexture,Cr=tt.LINEAR,hr=Dn.glyphAtlasTexture.size,Yn.iconsInText){Mr=Dn.imageAtlasTexture.size,Dr=Dn.imageAtlasTexture;var Hr=pr.kind==="composite"||pr.kind==="camera";qr=wr||N.options.rotating||N.options.zooming||Hr?tt.LINEAR:tt.NEAREST}}else{var Yr=G.layout.get("icon-size").constantOr(0)!==1||Yn.iconsNeedLinear;vr=Dn.imageAtlasTexture,Cr=Jn||N.options.rotating||N.options.zooming||Yr||wr?tt.LINEAR:tt.NEAREST,hr=Dn.imageAtlasTexture.size}var Jr=er(Dn,1,N.transform.zoom),vi=Sn(On.posMatrix,kt,pt,N.transform,Jr),Oi=gn(On.posMatrix,kt,pt,N.transform,Jr),ua=Zt&&Yn.hasTextData(),Wi=G.layout.get("icon-text-fit")!=="none"&&ua&&Yn.hasIconData();Lt&&pn(Yn,On.posMatrix,N,H,vi,Oi,kt,Ce);var na=N.translatePosMatrix(On.posMatrix,Dn,Q,re),_i=Lt||H&&Zt||Wi?Ml:vi,$r=N.translatePosMatrix(Oi,Dn,Q,re,!0),Ai=Jn&&G.paint.get(H?"text-halo-width":"icon-halo-width").constantOr(1)!==0,ci={program:Or,buffers:ir,uniformValues:Jn?Yn.iconsInText?Zr(pr.kind,nr,St,kt,N,na,_i,$r,hr,Mr):Do(pr.kind,nr,St,kt,N,na,_i,$r,H,hr,!0):bo(pr.kind,nr,St,kt,N,na,_i,$r,H,hr),atlasTexture:vr,atlasTextureIcon:Dr,atlasInterpolation:Cr,atlasInterpolationIcon:qr,isSDF:Jn,hasHalo:Ai};if(jt&&Yn.canOverlap){zt=!0;for(var ti=0,Mi=ir.segments.get();ti<Mi.length;ti+=1){var Ii=Mi[ti];Vt.push({segments:new o.SegmentVector([Ii]),sortKey:Ii.sortKey,state:ci})}}else Vt.push({segments:ir.segments,sortKey:0,state:ci})}}}zt&&Vt.sort(function(qs,Mo){return qs.sortKey-Mo.sortKey});for(var Ui=0,Ms=Vt;Ui<Ms.length;Ui+=1){var Ss=Ms[Ui],ni=Ss.state;if(He.activeTexture.set(tt.TEXTURE0),ni.atlasTexture.bind(ni.atlasInterpolation,tt.CLAMP_TO_EDGE),ni.atlasTextureIcon&&(He.activeTexture.set(tt.TEXTURE1),ni.atlasTextureIcon&&ni.atlasTextureIcon.bind(ni.atlasInterpolationIcon,tt.CLAMP_TO_EDGE)),ni.isSDF){var sl=ni.uniformValues;ni.hasHalo&&(sl.u_is_halo=1,ns(ni.buffers,Ss.segments,G,N,ni.program,Qt,De,Ue,sl)),sl.u_is_halo=0}ns(ni.buffers,Ss.segments,G,N,ni.program,Qt,De,Ue,ni.uniformValues)}}function ns(N,W,G,C,H,Q,re,fe,ye){var Ce=C.context,De=Ce.gl;H.draw(Ce,De.TRIANGLES,Q,re,fe,Ne.disabled,ye,G.id,N.layoutVertexBuffer,N.indexBuffer,W,G.paint,C.transform.zoom,N.programConfigurations.get(G.id),N.dynamicLayoutVertexBuffer,N.opacityVertexBuffer)}function _o(N,W,G,C,H,Q,re){var fe,ye,Ce,De,Ue,He=N.context.gl,tt=G.paint.get("fill-pattern"),ct=tt&&tt.constantOr(1),pt=G.getCrossfadeParameters();re?(ye=ct&&!G.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",fe=He.LINES):(ye=ct?"fillPattern":"fill",fe=He.TRIANGLES);for(var kt=0,Lt=C;kt<Lt.length;kt+=1){var St=Lt[kt],jt=W.getTile(St);if(!ct||jt.patternsLoaded()){var zt=jt.getBucket(G);if(zt){var Qt=zt.programConfigurations.get(G.id),Zt=N.useProgram(ye,Qt);ct&&(N.context.activeTexture.set(He.TEXTURE0),jt.imageAtlasTexture.bind(He.LINEAR,He.CLAMP_TO_EDGE),Qt.updatePaintBuffers(pt));var Vt=tt.constantOr(null);if(Vt&&jt.imageAtlas){var vn=jt.imageAtlas,bn=vn.patternPositions[Vt.to.toString()],On=vn.patternPositions[Vt.from.toString()];bn&&On&&Qt.setConstantPatternPositions(bn,On)}var Dn=N.translatePosMatrix(St.posMatrix,jt,G.paint.get("fill-translate"),G.paint.get("fill-translate-anchor"));if(re){De=zt.indexBuffer2,Ue=zt.segments2;var Yn=[He.drawingBufferWidth,He.drawingBufferHeight];Ce=ye==="fillOutlinePattern"&&ct?hl(Dn,N,pt,jt,Yn):ao(Dn,Yn)}else De=zt.indexBuffer,Ue=zt.segments,Ce=ct?Io(Dn,N,pt,jt):yo(Dn);Zt.draw(N.context,fe,H,N.stencilModeForClipping(St),Q,Ne.disabled,Ce,G.id,zt.layoutVertexBuffer,De,Ue,G.paint,N.transform.zoom,Qt)}}}}function Wa(N,W,G,C,H,Q,re){for(var fe=N.context,ye=fe.gl,Ce=G.paint.get("fill-extrusion-pattern"),De=Ce.constantOr(1),Ue=G.getCrossfadeParameters(),He=G.paint.get("fill-extrusion-opacity"),tt=0,ct=C;tt<ct.length;tt+=1){var pt=ct[tt],kt=W.getTile(pt),Lt=kt.getBucket(G);if(Lt){var St=Lt.programConfigurations.get(G.id),jt=N.useProgram(De?"fillExtrusionPattern":"fillExtrusion",St);De&&(N.context.activeTexture.set(ye.TEXTURE0),kt.imageAtlasTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE),St.updatePaintBuffers(Ue));var zt=Ce.constantOr(null);if(zt&&kt.imageAtlas){var Qt=kt.imageAtlas,Zt=Qt.patternPositions[zt.to.toString()],Vt=Qt.patternPositions[zt.from.toString()];Zt&&Vt&&St.setConstantPatternPositions(Zt,Vt)}var vn=N.translatePosMatrix(pt.posMatrix,kt,G.paint.get("fill-extrusion-translate"),G.paint.get("fill-extrusion-translate-anchor")),bn=G.paint.get("fill-extrusion-vertical-gradient"),On=De?Oo(vn,N,bn,He,pt,Ue,kt):io(vn,N,bn,He);jt.draw(fe,fe.gl.TRIANGLES,H,Q,re,Ne.backCCW,On,G.id,Lt.layoutVertexBuffer,Lt.indexBuffer,Lt.segments,G.paint,N.transform.zoom,St)}}}function ms(N,W,G,C,H,Q){var re=N.context,fe=re.gl,ye=W.fbo;if(ye){var Ce=N.useProgram("hillshade");re.activeTexture.set(fe.TEXTURE0),fe.bindTexture(fe.TEXTURE_2D,ye.colorAttachment.get());var De=Hl(N,W,G);Ce.draw(re,fe.TRIANGLES,C,H,Q,Ne.disabled,De,G.id,N.rasterBoundsBuffer,N.quadTriangleIndexBuffer,N.rasterBoundsSegments)}}function Sl(N,W,G,C,H,Q){var re=N.context,fe=re.gl,ye=W.dem;if(ye&&ye.data){var Ce=ye.dim,De=ye.stride,Ue=ye.getPixels();if(re.activeTexture.set(fe.TEXTURE1),re.pixelStoreUnpackPremultiplyAlpha.set(!1),W.demTexture=W.demTexture||N.getTileTexture(De),W.demTexture){var He=W.demTexture;He.update(Ue,{premultiply:!1}),He.bind(fe.NEAREST,fe.CLAMP_TO_EDGE)}else W.demTexture=new o.Texture(re,Ue,fe.RGBA,{premultiply:!1}),W.demTexture.bind(fe.NEAREST,fe.CLAMP_TO_EDGE);re.activeTexture.set(fe.TEXTURE0);var tt=W.fbo;if(!tt){var ct=new o.Texture(re,{width:Ce,height:Ce,data:null},fe.RGBA);ct.bind(fe.LINEAR,fe.CLAMP_TO_EDGE),(tt=W.fbo=re.createFramebuffer(Ce,Ce,!0)).colorAttachment.set(ct.texture)}re.bindFramebuffer.set(tt.framebuffer),re.viewport.set([0,0,Ce,Ce]),N.useProgram("hillshadePrepare").draw(re,fe.TRIANGLES,C,H,Q,Ne.disabled,Qo(W.tileID,ye),G.id,N.rasterBoundsBuffer,N.quadTriangleIndexBuffer,N.rasterBoundsSegments),W.needsHillshadePrepare=!1}}function zs(N,W,G,C,H){var Q=C.paint.get("raster-fade-duration");if(Q>0){var re=o.browser.now(),fe=(re-N.timeAdded)/Q,ye=W?(re-W.timeAdded)/Q:-1,Ce=G.getSource(),De=H.coveringZoomLevel({tileSize:Ce.tileSize,roundZoom:Ce.roundZoom}),Ue=!W||Math.abs(W.tileID.overscaledZ-De)>Math.abs(N.tileID.overscaledZ-De),He=Ue&&N.refreshedUponExpiration?1:o.clamp(Ue?fe:1-ye,0,1);return N.refreshedUponExpiration&&fe>=1&&(N.refreshedUponExpiration=!1),W?{opacity:1,mix:1-He}:{opacity:He,mix:0}}return{opacity:1,mix:0}}var rl=new o.Color(1,0,0,1),Ea=new o.Color(0,1,0,1),il=new o.Color(0,0,1,1),El=new o.Color(1,0,1,1),ys=new o.Color(0,1,1,1);function rs(N){var W=N.transform.padding;xs(N,N.transform.height-(W.top||0),3,rl),xs(N,W.bottom||0,3,Ea),is(N,W.left||0,3,il),is(N,N.transform.width-(W.right||0),3,El);var G=N.transform.centerPoint;(function(C,H,Q,re){var fe=20,ye=2;as(C,H-ye/2,Q-fe/2,ye,fe,re),as(C,H-fe/2,Q-ye/2,fe,ye,re)})(N,G.x,N.transform.height-G.y,ys)}function xs(N,W,G,C){as(N,0,W+G/2,N.transform.width,G,C)}function is(N,W,G,C){as(N,W-G/2,0,G,N.transform.height,C)}function as(N,W,G,C,H,Q){var re=N.context,fe=re.gl;fe.enable(fe.SCISSOR_TEST),fe.scissor(W*o.browser.devicePixelRatio,G*o.browser.devicePixelRatio,C*o.browser.devicePixelRatio,H*o.browser.devicePixelRatio),re.clear({color:Q}),fe.disable(fe.SCISSOR_TEST)}function Ds(N,W,G){var C=N.context,H=C.gl,Q=G.posMatrix,re=N.useProgram("debug"),fe=Ft.disabled,ye=Ge.disabled,Ce=N.colorModeForRenderPass(),De="$debug";C.activeTexture.set(H.TEXTURE0),N.emptyTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),re.draw(C,H.LINE_STRIP,fe,ye,Ce,Ne.disabled,kl(Q,o.Color.red),De,N.debugBuffer,N.tileBorderIndexBuffer,N.debugSegments);var Ue=W.getTileByID(G.key).latestRawTileData,He=Ue&&Ue.byteLength||0,tt=Math.floor(He/1024),ct=W.getTile(G).tileSize,pt=512/Math.min(ct,512)*(G.overscaledZ/N.transform.zoom)*.5,kt=G.canonical.toString();G.overscaledZ!==G.canonical.z&&(kt+=" => "+G.overscaledZ),function(Lt,St){Lt.initDebugOverlayCanvas();var jt=Lt.debugOverlayCanvas,zt=Lt.context.gl,Qt=Lt.debugOverlayCanvas.getContext("2d");Qt.clearRect(0,0,jt.width,jt.height),Qt.shadowColor="white",Qt.shadowBlur=2,Qt.lineWidth=1.5,Qt.strokeStyle="white",Qt.textBaseline="top",Qt.font="bold 36px Open Sans, sans-serif",Qt.fillText(St,5,5),Qt.strokeText(St,5,5),Lt.debugOverlayTexture.update(jt),Lt.debugOverlayTexture.bind(zt.LINEAR,zt.CLAMP_TO_EDGE)}(N,kt+" "+tt+"kb"),re.draw(C,H.TRIANGLES,fe,ye,Ye.alphaBlended,Ne.disabled,kl(Q,o.Color.transparent,pt),De,N.debugBuffer,N.quadTriangleIndexBuffer,N.debugSegments)}var al={symbol:function(N,W,G,C,H){if(N.renderPass==="translucent"){var Q=Ge.disabled,re=N.colorModeForRenderPass();G.layout.get("text-variable-anchor")&&function(fe,ye,Ce,De,Ue,He,tt){for(var ct=ye.transform,pt=Ue==="map",kt=He==="map",Lt=0,St=fe;Lt<St.length;Lt+=1){var jt=St[Lt],zt=De.getTile(jt),Qt=zt.getBucket(Ce);if(Qt&&Qt.text&&Qt.text.segments.get().length){var Zt=Qt.textSizeData,Vt=o.evaluateSizeForZoom(Zt,ct.zoom),vn=er(zt,1,ye.transform.zoom),bn=Sn(jt.posMatrix,kt,pt,ye.transform,vn),On=Ce.layout.get("icon-text-fit")!=="none"&&Qt.hasIconData();if(Vt){var Dn=Math.pow(2,ct.zoom-zt.tileID.overscaledZ);nl(Qt,pt,kt,tt,o.symbolSize,ct,bn,jt.posMatrix,Dn,Vt,On)}}}}(C,N,G,W,G.layout.get("text-rotation-alignment"),G.layout.get("text-pitch-alignment"),H),G.paint.get("icon-opacity").constantOr(1)!==0&&Ro(N,W,G,C,!1,G.paint.get("icon-translate"),G.paint.get("icon-translate-anchor"),G.layout.get("icon-rotation-alignment"),G.layout.get("icon-pitch-alignment"),G.layout.get("icon-keep-upright"),Q,re),G.paint.get("text-opacity").constantOr(1)!==0&&Ro(N,W,G,C,!0,G.paint.get("text-translate"),G.paint.get("text-translate-anchor"),G.layout.get("text-rotation-alignment"),G.layout.get("text-pitch-alignment"),G.layout.get("text-keep-upright"),Q,re),W.map.showCollisionBoxes&&(vs(N,W,G,C,G.paint.get("text-translate"),G.paint.get("text-translate-anchor"),!0),vs(N,W,G,C,G.paint.get("icon-translate"),G.paint.get("icon-translate-anchor"),!1))}},circle:function(N,W,G,C){if(N.renderPass==="translucent"){var H=G.paint.get("circle-opacity"),Q=G.paint.get("circle-stroke-width"),re=G.paint.get("circle-stroke-opacity"),fe=G.layout.get("circle-sort-key").constantOr(1)!==void 0;if(H.constantOr(1)!==0||Q.constantOr(1)!==0&&re.constantOr(1)!==0){for(var ye=N.context,Ce=ye.gl,De=N.depthModeForSublayer(0,Ft.ReadOnly),Ue=Ge.disabled,He=N.colorModeForRenderPass(),tt=[],ct=0;ct<C.length;ct++){var pt=C[ct],kt=W.getTile(pt),Lt=kt.getBucket(G);if(Lt){var St=Lt.programConfigurations.get(G.id),jt={programConfiguration:St,program:N.useProgram("circle",St),layoutVertexBuffer:Lt.layoutVertexBuffer,indexBuffer:Lt.indexBuffer,uniformValues:el(N,pt,kt,G)};if(fe)for(var zt=0,Qt=Lt.segments.get();zt<Qt.length;zt+=1){var Zt=Qt[zt];tt.push({segments:new o.SegmentVector([Zt]),sortKey:Zt.sortKey,state:jt})}else tt.push({segments:Lt.segments,sortKey:0,state:jt})}}fe&&tt.sort(function(wr,Or){return wr.sortKey-Or.sortKey});for(var Vt=0,vn=tt;Vt<vn.length;Vt+=1){var bn=vn[Vt],On=bn.state,Dn=On.programConfiguration,Yn=On.program,ir=On.layoutVertexBuffer,gr=On.indexBuffer,Jn=On.uniformValues,pr=bn.segments;Yn.draw(ye,Ce.TRIANGLES,De,Ue,He,Ne.disabled,Jn,G.id,ir,gr,pr,G.paint,N.transform.zoom,Dn)}}}},heatmap:function(N,W,G,C){if(G.paint.get("heatmap-opacity")!==0)if(N.renderPass==="offscreen"){var H=N.context,Q=H.gl,re=Ge.disabled,fe=new Ye([Q.ONE,Q.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(pt,kt,Lt){var St=pt.gl;pt.activeTexture.set(St.TEXTURE1),pt.viewport.set([0,0,kt.width/4,kt.height/4]);var jt=Lt.heatmapFbo;if(jt)St.bindTexture(St.TEXTURE_2D,jt.colorAttachment.get()),pt.bindFramebuffer.set(jt.framebuffer);else{var zt=St.createTexture();St.bindTexture(St.TEXTURE_2D,zt),St.texParameteri(St.TEXTURE_2D,St.TEXTURE_WRAP_S,St.CLAMP_TO_EDGE),St.texParameteri(St.TEXTURE_2D,St.TEXTURE_WRAP_T,St.CLAMP_TO_EDGE),St.texParameteri(St.TEXTURE_2D,St.TEXTURE_MIN_FILTER,St.LINEAR),St.texParameteri(St.TEXTURE_2D,St.TEXTURE_MAG_FILTER,St.LINEAR),jt=Lt.heatmapFbo=pt.createFramebuffer(kt.width/4,kt.height/4,!1),function(Qt,Zt,Vt,vn){var bn=Qt.gl,On=Qt.extRenderToTextureHalfFloat?Qt.extTextureHalfFloat.HALF_FLOAT_OES:bn.UNSIGNED_BYTE;bn.texImage2D(bn.TEXTURE_2D,0,bn.RGBA,Zt.width/4,Zt.height/4,0,bn.RGBA,On,null),vn.colorAttachment.set(Vt)}(pt,kt,zt,jt)}})(H,N,G),H.clear({color:o.Color.transparent});for(var ye=0;ye<C.length;ye++){var Ce=C[ye];if(!W.hasRenderableParent(Ce)){var De=W.getTile(Ce),Ue=De.getBucket(G);if(Ue){var He=Ue.programConfigurations.get(G.id),tt=N.useProgram("heatmap",He),ct=N.transform.zoom;tt.draw(H,Q.TRIANGLES,Ft.disabled,re,fe,Ne.disabled,Al(Ce.posMatrix,De,ct,G.paint.get("heatmap-intensity")),G.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,G.paint,N.transform.zoom,He)}}}H.viewport.set([0,0,N.width,N.height])}else N.renderPass==="translucent"&&(N.context.setColorMode(N.colorModeForRenderPass()),function(pt,kt){var Lt=pt.context,St=Lt.gl,jt=kt.heatmapFbo;if(jt){Lt.activeTexture.set(St.TEXTURE0),St.bindTexture(St.TEXTURE_2D,jt.colorAttachment.get()),Lt.activeTexture.set(St.TEXTURE1);var zt=kt.colorRampTexture;zt||(zt=kt.colorRampTexture=new o.Texture(Lt,kt.colorRamp,St.RGBA)),zt.bind(St.LINEAR,St.CLAMP_TO_EDGE),pt.useProgram("heatmapTexture").draw(Lt,St.TRIANGLES,Ft.disabled,Ge.disabled,pt.colorModeForRenderPass(),Ne.disabled,ql(pt,kt,0,1),kt.id,pt.viewportBuffer,pt.quadTriangleIndexBuffer,pt.viewportSegments,kt.paint,pt.transform.zoom)}}(N,G))},line:function(N,W,G,C){if(N.renderPass==="translucent"){var H=G.paint.get("line-opacity"),Q=G.paint.get("line-width");if(H.constantOr(1)!==0&&Q.constantOr(1)!==0)for(var re=N.depthModeForSublayer(0,Ft.ReadOnly),fe=N.colorModeForRenderPass(),ye=G.paint.get("line-dasharray"),Ce=G.paint.get("line-pattern"),De=Ce.constantOr(1),Ue=G.paint.get("line-gradient"),He=G.getCrossfadeParameters(),tt=De?"linePattern":ye?"lineSDF":Ue?"lineGradient":"line",ct=N.context,pt=ct.gl,kt=!0,Lt=0,St=C;Lt<St.length;Lt+=1){var jt=St[Lt],zt=W.getTile(jt);if(!De||zt.patternsLoaded()){var Qt=zt.getBucket(G);if(Qt){var Zt=Qt.programConfigurations.get(G.id),Vt=N.context.program.get(),vn=N.useProgram(tt,Zt),bn=kt||vn.program!==Vt,On=Ce.constantOr(null);if(On&&zt.imageAtlas){var Dn=zt.imageAtlas,Yn=Dn.patternPositions[On.to.toString()],ir=Dn.patternPositions[On.from.toString()];Yn&&ir&&Zt.setConstantPatternPositions(Yn,ir)}var gr=De?es(N,zt,G,He):ye?Is(N,zt,G,ye,He):Ue?ds(N,zt,G,Qt.lineClipsArray.length):oo(N,zt,G);if(De)ct.activeTexture.set(pt.TEXTURE0),zt.imageAtlasTexture.bind(pt.LINEAR,pt.CLAMP_TO_EDGE),Zt.updatePaintBuffers(He);else if(ye&&(bn||N.lineAtlas.dirty))ct.activeTexture.set(pt.TEXTURE0),N.lineAtlas.bind(ct);else if(Ue){var Jn=Qt.gradients[G.id],pr=Jn.texture;if(G.gradientVersion!==Jn.version){var wr=256;if(G.stepInterpolant){var Or=W.getSource().maxzoom,nr=jt.canonical.z===Or?Math.ceil(1<<N.transform.maxZoom-jt.canonical.z):1,hr=Qt.maxLineLength/o.EXTENT*1024*nr;wr=o.clamp(o.nextPowerOfTwo(hr),256,ct.maxTextureSize)}Jn.gradient=o.renderColorRamp({expression:G.gradientExpression(),evaluationKey:"lineProgress",resolution:wr,image:Jn.gradient||void 0,clips:Qt.lineClipsArray}),Jn.texture?Jn.texture.update(Jn.gradient):Jn.texture=new o.Texture(ct,Jn.gradient,pt.RGBA),Jn.version=G.gradientVersion,pr=Jn.texture}ct.activeTexture.set(pt.TEXTURE0),pr.bind(G.stepInterpolant?pt.NEAREST:pt.LINEAR,pt.CLAMP_TO_EDGE)}vn.draw(ct,pt.TRIANGLES,re,N.stencilModeForClipping(jt),fe,Ne.disabled,gr,G.id,Qt.layoutVertexBuffer,Qt.indexBuffer,Qt.segments,G.paint,N.transform.zoom,Zt,Qt.layoutVertexBuffer2),kt=!1}}}}},fill:function(N,W,G,C){var H=G.paint.get("fill-color"),Q=G.paint.get("fill-opacity");if(Q.constantOr(1)!==0){var re=N.colorModeForRenderPass(),fe=G.paint.get("fill-pattern"),ye=N.opaquePassEnabledForLayer()&&!fe.constantOr(1)&&H.constantOr(o.Color.transparent).a===1&&Q.constantOr(0)===1?"opaque":"translucent";if(N.renderPass===ye){var Ce=N.depthModeForSublayer(1,N.renderPass==="opaque"?Ft.ReadWrite:Ft.ReadOnly);_o(N,W,G,C,Ce,re,!1)}if(N.renderPass==="translucent"&&G.paint.get("fill-antialias")){var De=N.depthModeForSublayer(G.getPaintProperty("fill-outline-color")?2:0,Ft.ReadOnly);_o(N,W,G,C,De,re,!0)}}},"fill-extrusion":function(N,W,G,C){var H=G.paint.get("fill-extrusion-opacity");if(H!==0&&N.renderPass==="translucent"){var Q=new Ft(N.context.gl.LEQUAL,Ft.ReadWrite,N.depthRangeFor3D);if(H!==1||G.paint.get("fill-extrusion-pattern").constantOr(1))Wa(N,W,G,C,Q,Ge.disabled,Ye.disabled),Wa(N,W,G,C,Q,N.stencilModeFor3D(),N.colorModeForRenderPass());else{var re=N.colorModeForRenderPass();Wa(N,W,G,C,Q,Ge.disabled,re)}}},hillshade:function(N,W,G,C){if(N.renderPass==="offscreen"||N.renderPass==="translucent"){for(var H=N.context,Q=N.depthModeForSublayer(0,Ft.ReadOnly),re=N.colorModeForRenderPass(),fe=N.renderPass==="translucent"?N.stencilConfigForOverlap(C):[{},C],ye=fe[0],Ce=0,De=fe[1];Ce<De.length;Ce+=1){var Ue=De[Ce],He=W.getTile(Ue);He.needsHillshadePrepare&&N.renderPass==="offscreen"?Sl(N,He,G,Q,Ge.disabled,re):N.renderPass==="translucent"&&ms(N,He,G,Q,ye[Ue.overscaledZ],re)}H.viewport.set([0,0,N.width,N.height])}},raster:function(N,W,G,C){if(N.renderPass==="translucent"&&G.paint.get("raster-opacity")!==0&&C.length)for(var H=N.context,Q=H.gl,re=W.getSource(),fe=N.useProgram("raster"),ye=N.colorModeForRenderPass(),Ce=re instanceof B?[{},C]:N.stencilConfigForOverlap(C),De=Ce[0],Ue=Ce[1],He=Ue[Ue.length-1].overscaledZ,tt=!N.options.moving,ct=0,pt=Ue;ct<pt.length;ct+=1){var kt=pt[ct],Lt=N.depthModeForSublayer(kt.overscaledZ-He,G.paint.get("raster-opacity")===1?Ft.ReadWrite:Ft.ReadOnly,Q.LESS),St=W.getTile(kt),jt=N.transform.calculatePosMatrix(kt.toUnwrapped(),tt);St.registerFadeDuration(G.paint.get("raster-fade-duration"));var zt=W.findLoadedParent(kt,0),Qt=zs(St,zt,W,G,N.transform),Zt=void 0,Vt=void 0,vn=G.paint.get("raster-resampling")==="nearest"?Q.NEAREST:Q.LINEAR;H.activeTexture.set(Q.TEXTURE0),St.texture.bind(vn,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST),H.activeTexture.set(Q.TEXTURE1),zt?(zt.texture.bind(vn,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST),Zt=Math.pow(2,zt.tileID.overscaledZ-St.tileID.overscaledZ),Vt=[St.tileID.canonical.x*Zt%1,St.tileID.canonical.y*Zt%1]):St.texture.bind(vn,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST);var bn=pl(jt,Vt||[0,0],Zt||1,Qt,G);re instanceof B?fe.draw(H,Q.TRIANGLES,Lt,Ge.disabled,ye,Ne.disabled,bn,G.id,re.boundsBuffer,N.quadTriangleIndexBuffer,re.boundsSegments):fe.draw(H,Q.TRIANGLES,Lt,De[kt.overscaledZ],ye,Ne.disabled,bn,G.id,N.rasterBoundsBuffer,N.quadTriangleIndexBuffer,N.rasterBoundsSegments)}},background:function(N,W,G){var C=G.paint.get("background-color"),H=G.paint.get("background-opacity");if(H!==0){var Q=N.context,re=Q.gl,fe=N.transform,ye=fe.tileSize,Ce=G.paint.get("background-pattern");if(!N.isPatternMissing(Ce)){var De=!Ce&&C.a===1&&H===1&&N.opaquePassEnabledForLayer()?"opaque":"translucent";if(N.renderPass===De){var Ue=Ge.disabled,He=N.depthModeForSublayer(0,De==="opaque"?Ft.ReadWrite:Ft.ReadOnly),tt=N.colorModeForRenderPass(),ct=N.useProgram(Ce?"backgroundPattern":"background"),pt=fe.coveringTiles({tileSize:ye});Ce&&(Q.activeTexture.set(re.TEXTURE0),N.imageManager.bind(N.context));for(var kt=G.getCrossfadeParameters(),Lt=0,St=pt;Lt<St.length;Lt+=1){var jt=St[Lt],zt=N.transform.calculatePosMatrix(jt.toUnwrapped()),Qt=Ce?Gl(zt,H,N,Ce,{tileID:jt,tileSize:ye},kt):gs(zt,H,C);ct.draw(Q,re.TRIANGLES,He,Ue,tt,Ne.disabled,Qt,G.id,N.tileExtentBuffer,N.quadTriangleIndexBuffer,N.tileExtentSegments)}}}}},debug:function(N,W,G){for(var C=0;C<G.length;C++)Ds(N,W,G[C])},custom:function(N,W,G){var C=N.context,H=G.implementation;if(N.renderPass==="offscreen"){var Q=H.prerender;Q&&(N.setCustomLayerDefaults(),C.setColorMode(N.colorModeForRenderPass()),Q.call(H,C.gl,N.transform.customLayerMatrix()),C.setDirty(),N.setBaseState())}else if(N.renderPass==="translucent"){N.setCustomLayerDefaults(),C.setColorMode(N.colorModeForRenderPass()),C.setStencilMode(Ge.disabled);var re=H.renderingMode==="3d"?new Ft(N.context.gl.LEQUAL,Ft.ReadWrite,N.depthRangeFor3D):N.depthModeForSublayer(0,Ft.ReadOnly);C.setDepthMode(re),H.render(C.gl,N.transform.customLayerMatrix()),C.setDirty(),N.setBaseState(),C.bindFramebuffer.set(null)}}},ai=function(N,W){this.context=new We(N),this.transform=W,this._tileTextures={},this.setup(),this.numSublayers=st.maxUnderzooming+st.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new qn,this.gpuTimers={}};ai.prototype.resize=function(N,W){if(this.width=N*o.browser.devicePixelRatio,this.height=W*o.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var G=0,C=this.style._order;G<C.length;G+=1){var H=C[G];this.style._layers[H].resize()}},ai.prototype.setup=function(){var N=this.context,W=new o.StructArrayLayout2i4;W.emplaceBack(0,0),W.emplaceBack(o.EXTENT,0),W.emplaceBack(0,o.EXTENT),W.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=N.createVertexBuffer(W,Qn.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);var G=new o.StructArrayLayout2i4;G.emplaceBack(0,0),G.emplaceBack(o.EXTENT,0),G.emplaceBack(0,o.EXTENT),G.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=N.createVertexBuffer(G,Qn.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);var C=new o.StructArrayLayout4i8;C.emplaceBack(0,0,0,0),C.emplaceBack(o.EXTENT,0,o.EXTENT,0),C.emplaceBack(0,o.EXTENT,0,o.EXTENT),C.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.rasterBoundsBuffer=N.createVertexBuffer(C,Z.members),this.rasterBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);var H=new o.StructArrayLayout2i4;H.emplaceBack(0,0),H.emplaceBack(1,0),H.emplaceBack(0,1),H.emplaceBack(1,1),this.viewportBuffer=N.createVertexBuffer(H,Qn.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);var Q=new o.StructArrayLayout1ui2;Q.emplaceBack(0),Q.emplaceBack(1),Q.emplaceBack(3),Q.emplaceBack(2),Q.emplaceBack(0),this.tileBorderIndexBuffer=N.createIndexBuffer(Q);var re=new o.StructArrayLayout3ui6;re.emplaceBack(0,1,2),re.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=N.createIndexBuffer(re),this.emptyTexture=new o.Texture(N,{width:1,height:1,data:new Uint8Array([0,0,0,0])},N.gl.RGBA);var fe=this.context.gl;this.stencilClearMode=new Ge({func:fe.ALWAYS,mask:0},0,255,fe.ZERO,fe.ZERO,fe.ZERO)},ai.prototype.clearStencil=function(){var N=this.context,W=N.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var G=o.create();o.ortho(G,0,this.width,this.height,0,0,1),o.scale(G,G,[W.drawingBufferWidth,W.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(N,W.TRIANGLES,Ft.disabled,this.stencilClearMode,Ye.disabled,Ne.disabled,$o(G),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ai.prototype._renderTileClippingMasks=function(N,W){if(this.currentStencilSource!==N.source&&N.isTileClipped()&&W&&W.length){this.currentStencilSource=N.source;var G=this.context,C=G.gl;this.nextStencilID+W.length>256&&this.clearStencil(),G.setColorMode(Ye.disabled),G.setDepthMode(Ft.disabled);var H=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Q=0,re=W;Q<re.length;Q+=1){var fe=re[Q],ye=this._tileClippingMaskIDs[fe.key]=this.nextStencilID++;H.draw(G,C.TRIANGLES,Ft.disabled,new Ge({func:C.ALWAYS,mask:0},ye,255,C.KEEP,C.KEEP,C.REPLACE),Ye.disabled,Ne.disabled,$o(fe.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ai.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var N=this.nextStencilID++,W=this.context.gl;return new Ge({func:W.NOTEQUAL,mask:255},N,255,W.KEEP,W.KEEP,W.REPLACE)},ai.prototype.stencilModeForClipping=function(N){var W=this.context.gl;return new Ge({func:W.EQUAL,mask:255},this._tileClippingMaskIDs[N.key],0,W.KEEP,W.KEEP,W.REPLACE)},ai.prototype.stencilConfigForOverlap=function(N){var W,G=this.context.gl,C=N.sort(function(ye,Ce){return Ce.overscaledZ-ye.overscaledZ}),H=C[C.length-1].overscaledZ,Q=C[0].overscaledZ-H+1;if(Q>1){this.currentStencilSource=void 0,this.nextStencilID+Q>256&&this.clearStencil();for(var re={},fe=0;fe<Q;fe++)re[fe+H]=new Ge({func:G.GEQUAL,mask:255},fe+this.nextStencilID,255,G.KEEP,G.KEEP,G.REPLACE);return this.nextStencilID+=Q,[re,C]}return[(W={},W[H]=Ge.disabled,W),C]},ai.prototype.colorModeForRenderPass=function(){var N=this.context.gl;if(this._showOverdrawInspector){var W=.125;return new Ye([N.CONSTANT_COLOR,N.ONE],new o.Color(W,W,W,0),[!0,!0,!0,!0])}return this.renderPass==="opaque"?Ye.unblended:Ye.alphaBlended},ai.prototype.depthModeForSublayer=function(N,W,G){if(!this.opaquePassEnabledForLayer())return Ft.disabled;var C=1-((1+this.currentLayer)*this.numSublayers+N)*this.depthEpsilon;return new Ft(G||this.context.gl.LEQUAL,W,[C,C])},ai.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ai.prototype.render=function(N,W){var G=this;this.style=N,this.options=W,this.lineAtlas=N.lineAtlas,this.imageManager=N.imageManager,this.glyphManager=N.glyphManager,this.symbolFadeChange=N.placement.symbolFadeChange(o.browser.now()),this.imageManager.beginFrame();var C=this.style._order,H=this.style.sourceCaches;for(var Q in H){var re=H[Q];re.used&&re.prepare(this.context)}var fe,ye,Ce={},De={},Ue={};for(var He in H){var tt=H[He];Ce[He]=tt.getVisibleCoordinates(),De[He]=Ce[He].slice().reverse(),Ue[He]=tt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var ct=0;ct<C.length;ct++){var pt=C[ct];if(this.style._layers[pt].is3D()){this.opaquePassCutoff=ct;break}}this.renderPass="offscreen";for(var kt=0,Lt=C;kt<Lt.length;kt+=1){var St=Lt[kt],jt=this.style._layers[St];if(jt.hasOffscreenPass()&&!jt.isHidden(this.transform.zoom)){var zt=De[jt.source];(jt.type==="custom"||zt.length)&&this.renderLayer(this,H[jt.source],jt,zt)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:W.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=W.showOverdrawInspector,this.depthRangeFor3D=[0,1-(N._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=C.length-1;this.currentLayer>=0;this.currentLayer--){var Qt=this.style._layers[C[this.currentLayer]],Zt=H[Qt.source],Vt=Ce[Qt.source];this._renderTileClippingMasks(Qt,Vt),this.renderLayer(this,Zt,Qt,Vt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<C.length;this.currentLayer++){var vn=this.style._layers[C[this.currentLayer]],bn=H[vn.source],On=(vn.type==="symbol"?Ue:De)[vn.source];this._renderTileClippingMasks(vn,Ce[vn.source]),this.renderLayer(this,bn,vn,On)}this.options.showTileBoundaries&&(o.values(this.style._layers).forEach(function(Dn){Dn.source&&!Dn.isHidden(G.transform.zoom)&&(Dn.source!==(ye&&ye.id)&&(ye=G.style.sourceCaches[Dn.source]),(!fe||fe.getSource().maxzoom<ye.getSource().maxzoom)&&(fe=ye))}),fe&&al.debug(this,fe,fe.getVisibleCoordinates())),this.options.showPadding&&rs(this),this.context.setDefault()},ai.prototype.renderLayer=function(N,W,G,C){G.isHidden(this.transform.zoom)||(G.type==="background"||G.type==="custom"||C.length)&&(this.id=G.id,this.gpuTimingStart(G),al[G.type](N,W,G,C,this.style.placement.variableOffsets),this.gpuTimingEnd())},ai.prototype.gpuTimingStart=function(N){if(this.options.gpuTiming){var W=this.context.extTimerQuery,G=this.gpuTimers[N.id];G||(G=this.gpuTimers[N.id]={calls:0,cpuTime:0,query:W.createQueryEXT()}),G.calls++,W.beginQueryEXT(W.TIME_ELAPSED_EXT,G.query)}},ai.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var N=this.context.extTimerQuery;N.endQueryEXT(N.TIME_ELAPSED_EXT)}},ai.prototype.collectGpuTimers=function(){var N=this.gpuTimers;return this.gpuTimers={},N},ai.prototype.queryGpuTimers=function(N){var W={};for(var G in N){var C=N[G],H=this.context.extTimerQuery,Q=H.getQueryObjectEXT(C.query,H.QUERY_RESULT_EXT)/1e6;H.deleteQueryEXT(C.query),W[G]=Q}return W},ai.prototype.translatePosMatrix=function(N,W,G,C,H){if(!G[0]&&!G[1])return N;var Q=H?C==="map"?this.transform.angle:0:C==="viewport"?-this.transform.angle:0;if(Q){var re=Math.sin(Q),fe=Math.cos(Q);G=[G[0]*fe-G[1]*re,G[0]*re+G[1]*fe]}var ye=[H?G[0]:er(W,G[0],this.transform.zoom),H?G[1]:er(W,G[1],this.transform.zoom),0],Ce=new Float32Array(16);return o.translate(Ce,N,ye),Ce},ai.prototype.saveTileTexture=function(N){var W=this._tileTextures[N.size[0]];W?W.push(N):this._tileTextures[N.size[0]]=[N]},ai.prototype.getTileTexture=function(N){var W=this._tileTextures[N];return W&&W.length>0?W.pop():null},ai.prototype.isPatternMissing=function(N){if(!N)return!1;if(!N.from||!N.to)return!0;var W=this.imageManager.getPattern(N.from.toString()),G=this.imageManager.getPattern(N.to.toString());return!W||!G},ai.prototype.useProgram=function(N,W){this.cache=this.cache||{};var G=""+N+(W?W.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[G]||(this.cache[G]=new Ha(this.context,N,qi[N],W,tl[N],this._showOverdrawInspector)),this.cache[G]},ai.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ai.prototype.setBaseState=function(){var N=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(N.FUNC_ADD)},ai.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var N=this.context.gl;this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,N.RGBA)}},ai.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Fo=function(N,W){this.points=N,this.planes=W};Fo.fromInvProjectionMatrix=function(N,W,G){var C=Math.pow(2,G),H=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(re){return o.transformMat4([],re,N)}).map(function(re){return o.scale$1([],re,1/re[3]/W*C)}),Q=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(re){var fe=o.sub([],H[re[0]],H[re[1]]),ye=o.sub([],H[re[2]],H[re[1]]),Ce=o.normalize([],o.cross([],fe,ye)),De=-o.dot(Ce,H[re[1]]);return Ce.concat(De)});return new Fo(H,Q)};var ta=function(N,W){this.min=N,this.max=W,this.center=o.scale$2([],o.add([],this.min,this.max),.5)};ta.prototype.quadrant=function(N){for(var W=[N%2==0,N<2],G=o.clone$2(this.min),C=o.clone$2(this.max),H=0;H<W.length;H++)G[H]=W[H]?this.min[H]:this.center[H],C[H]=W[H]?this.center[H]:this.max[H];return C[2]=this.max[2],new ta(G,C)},ta.prototype.distanceX=function(N){return Math.max(Math.min(this.max[0],N[0]),this.min[0])-N[0]},ta.prototype.distanceY=function(N){return Math.max(Math.min(this.max[1],N[1]),this.min[1])-N[1]},ta.prototype.intersects=function(N){for(var W=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],G=!0,C=0;C<N.planes.length;C++){for(var H=N.planes[C],Q=0,re=0;re<W.length;re++)Q+=o.dot$1(H,W[re])>=0;if(Q===0)return 0;Q!==W.length&&(G=!1)}if(G)return 2;for(var fe=0;fe<3;fe++){for(var ye=Number.MAX_VALUE,Ce=-Number.MAX_VALUE,De=0;De<N.points.length;De++){var Ue=N.points[De][fe]-this.min[fe];ye=Math.min(ye,Ue),Ce=Math.max(Ce,Ue)}if(Ce<0||ye>this.max[fe]-this.min[fe])return 0}return 1};var Ya=function(N,W,G,C){if(N===void 0&&(N=0),W===void 0&&(W=0),G===void 0&&(G=0),C===void 0&&(C=0),isNaN(N)||N<0||isNaN(W)||W<0||isNaN(G)||G<0||isNaN(C)||C<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=N,this.bottom=W,this.left=G,this.right=C};Ya.prototype.interpolate=function(N,W,G){return W.top!=null&&N.top!=null&&(this.top=o.number(N.top,W.top,G)),W.bottom!=null&&N.bottom!=null&&(this.bottom=o.number(N.bottom,W.bottom,G)),W.left!=null&&N.left!=null&&(this.left=o.number(N.left,W.left,G)),W.right!=null&&N.right!=null&&(this.right=o.number(N.right,W.right,G)),this},Ya.prototype.getCenter=function(N,W){var G=o.clamp((this.left+N-this.right)/2,0,N),C=o.clamp((this.top+W-this.bottom)/2,0,W);return new o.Point(G,C)},Ya.prototype.equals=function(N){return this.top===N.top&&this.bottom===N.bottom&&this.left===N.left&&this.right===N.right},Ya.prototype.clone=function(){return new Ya(this.top,this.bottom,this.left,this.right)},Ya.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Qr=function(N,W,G,C,H){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=H===void 0||H,this._minZoom=N||0,this._maxZoom=W||22,this._minPitch=G??0,this._maxPitch=C??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ya,this._posMatrixCache={},this._alignedPosMatrixCache={}},ii={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Qr.prototype.clone=function(){var N=new Qr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return N.tileSize=this.tileSize,N.latRange=this.latRange,N.width=this.width,N.height=this.height,N._center=this._center,N.zoom=this.zoom,N.angle=this.angle,N._fov=this._fov,N._pitch=this._pitch,N._unmodified=this._unmodified,N._edgeInsets=this._edgeInsets.clone(),N._calcMatrices(),N},ii.minZoom.get=function(){return this._minZoom},ii.minZoom.set=function(N){this._minZoom!==N&&(this._minZoom=N,this.zoom=Math.max(this.zoom,N))},ii.maxZoom.get=function(){return this._maxZoom},ii.maxZoom.set=function(N){this._maxZoom!==N&&(this._maxZoom=N,this.zoom=Math.min(this.zoom,N))},ii.minPitch.get=function(){return this._minPitch},ii.minPitch.set=function(N){this._minPitch!==N&&(this._minPitch=N,this.pitch=Math.max(this.pitch,N))},ii.maxPitch.get=function(){return this._maxPitch},ii.maxPitch.set=function(N){this._maxPitch!==N&&(this._maxPitch=N,this.pitch=Math.min(this.pitch,N))},ii.renderWorldCopies.get=function(){return this._renderWorldCopies},ii.renderWorldCopies.set=function(N){N===void 0?N=!0:N===null&&(N=!1),this._renderWorldCopies=N},ii.worldSize.get=function(){return this.tileSize*this.scale},ii.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},ii.size.get=function(){return new o.Point(this.width,this.height)},ii.bearing.get=function(){return-this.angle/Math.PI*180},ii.bearing.set=function(N){var W=-o.wrap(N,-180,180)*Math.PI/180;this.angle!==W&&(this._unmodified=!1,this.angle=W,this._calcMatrices(),this.rotationMatrix=o.create$2(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},ii.pitch.get=function(){return this._pitch/Math.PI*180},ii.pitch.set=function(N){var W=o.clamp(N,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==W&&(this._unmodified=!1,this._pitch=W,this._calcMatrices())},ii.fov.get=function(){return this._fov/Math.PI*180},ii.fov.set=function(N){N=Math.max(.01,Math.min(60,N)),this._fov!==N&&(this._unmodified=!1,this._fov=N/180*Math.PI,this._calcMatrices())},ii.zoom.get=function(){return this._zoom},ii.zoom.set=function(N){var W=Math.min(Math.max(N,this.minZoom),this.maxZoom);this._zoom!==W&&(this._unmodified=!1,this._zoom=W,this.scale=this.zoomScale(W),this.tileZoom=Math.floor(W),this.zoomFraction=W-this.tileZoom,this._constrain(),this._calcMatrices())},ii.center.get=function(){return this._center},ii.center.set=function(N){N.lat===this._center.lat&&N.lng===this._center.lng||(this._unmodified=!1,this._center=N,this._constrain(),this._calcMatrices())},ii.padding.get=function(){return this._edgeInsets.toJSON()},ii.padding.set=function(N){this._edgeInsets.equals(N)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,N,1),this._calcMatrices())},ii.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Qr.prototype.isPaddingEqual=function(N){return this._edgeInsets.equals(N)},Qr.prototype.interpolatePadding=function(N,W,G){this._unmodified=!1,this._edgeInsets.interpolate(N,W,G),this._constrain(),this._calcMatrices()},Qr.prototype.coveringZoomLevel=function(N){var W=(N.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/N.tileSize));return Math.max(0,W)},Qr.prototype.getVisibleUnwrappedCoordinates=function(N){var W=[new o.UnwrappedTileID(0,N)];if(this._renderWorldCopies)for(var G=this.pointCoordinate(new o.Point(0,0)),C=this.pointCoordinate(new o.Point(this.width,0)),H=this.pointCoordinate(new o.Point(this.width,this.height)),Q=this.pointCoordinate(new o.Point(0,this.height)),re=Math.floor(Math.min(G.x,C.x,H.x,Q.x)),fe=Math.floor(Math.max(G.x,C.x,H.x,Q.x)),ye=re-1;ye<=fe+1;ye++)ye!==0&&W.push(new o.UnwrappedTileID(ye,N));return W},Qr.prototype.coveringTiles=function(N){var W=this.coveringZoomLevel(N),G=W;if(N.minzoom!==void 0&&W<N.minzoom)return[];N.maxzoom!==void 0&&W>N.maxzoom&&(W=N.maxzoom);var C=o.MercatorCoordinate.fromLngLat(this.center),H=Math.pow(2,W),Q=[H*C.x,H*C.y,0],re=Fo.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,W),fe=N.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(fe=W);var ye=function(On){return{aabb:new ta([On*H,0,0],[(On+1)*H,H,0]),zoom:0,x:0,y:0,wrap:On,fullyVisible:!1}},Ce=[],De=[],Ue=W,He=N.reparseOverscaled?G:W;if(this._renderWorldCopies)for(var tt=1;tt<=3;tt++)Ce.push(ye(-tt)),Ce.push(ye(tt));for(Ce.push(ye(0));Ce.length>0;){var ct=Ce.pop(),pt=ct.x,kt=ct.y,Lt=ct.fullyVisible;if(!Lt){var St=ct.aabb.intersects(re);if(St===0)continue;Lt=St===2}var jt=ct.aabb.distanceX(Q),zt=ct.aabb.distanceY(Q),Qt=Math.max(Math.abs(jt),Math.abs(zt)),Zt=3+(1<<Ue-ct.zoom)-2;if(ct.zoom===Ue||Qt>Zt&&ct.zoom>=fe)De.push({tileID:new o.OverscaledTileID(ct.zoom===Ue?He:ct.zoom,ct.wrap,ct.zoom,pt,kt),distanceSq:o.sqrLen([Q[0]-.5-pt,Q[1]-.5-kt])});else for(var Vt=0;Vt<4;Vt++){var vn=(pt<<1)+Vt%2,bn=(kt<<1)+(Vt>>1);Ce.push({aabb:ct.aabb.quadrant(Vt),zoom:ct.zoom+1,x:vn,y:bn,wrap:ct.wrap,fullyVisible:Lt})}}return De.sort(function(On,Dn){return On.distanceSq-Dn.distanceSq}).map(function(On){return On.tileID})},Qr.prototype.resize=function(N,W){this.width=N,this.height=W,this.pixelsToGLUnits=[2/N,-2/W],this._constrain(),this._calcMatrices()},ii.unmodified.get=function(){return this._unmodified},Qr.prototype.zoomScale=function(N){return Math.pow(2,N)},Qr.prototype.scaleZoom=function(N){return Math.log(N)/Math.LN2},Qr.prototype.project=function(N){var W=o.clamp(N.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.Point(o.mercatorXfromLng(N.lng)*this.worldSize,o.mercatorYfromLat(W)*this.worldSize)},Qr.prototype.unproject=function(N){return new o.MercatorCoordinate(N.x/this.worldSize,N.y/this.worldSize).toLngLat()},ii.point.get=function(){return this.project(this.center)},Qr.prototype.setLocationAtPoint=function(N,W){var G=this.pointCoordinate(W),C=this.pointCoordinate(this.centerPoint),H=this.locationCoordinate(N),Q=new o.MercatorCoordinate(H.x-(G.x-C.x),H.y-(G.y-C.y));this.center=this.coordinateLocation(Q),this._renderWorldCopies&&(this.center=this.center.wrap())},Qr.prototype.locationPoint=function(N){return this.coordinatePoint(this.locationCoordinate(N))},Qr.prototype.pointLocation=function(N){return this.coordinateLocation(this.pointCoordinate(N))},Qr.prototype.locationCoordinate=function(N){return o.MercatorCoordinate.fromLngLat(N)},Qr.prototype.coordinateLocation=function(N){return N.toLngLat()},Qr.prototype.pointCoordinate=function(N){var W=[N.x,N.y,0,1],G=[N.x,N.y,1,1];o.transformMat4(W,W,this.pixelMatrixInverse),o.transformMat4(G,G,this.pixelMatrixInverse);var C=W[3],H=G[3],Q=W[0]/C,re=G[0]/H,fe=W[1]/C,ye=G[1]/H,Ce=W[2]/C,De=G[2]/H,Ue=Ce===De?0:(0-Ce)/(De-Ce);return new o.MercatorCoordinate(o.number(Q,re,Ue)/this.worldSize,o.number(fe,ye,Ue)/this.worldSize)},Qr.prototype.coordinatePoint=function(N){var W=[N.x*this.worldSize,N.y*this.worldSize,0,1];return o.transformMat4(W,W,this.pixelMatrix),new o.Point(W[0]/W[3],W[1]/W[3])},Qr.prototype.getBounds=function(){return new o.LngLatBounds().extend(this.pointLocation(new o.Point(0,0))).extend(this.pointLocation(new o.Point(this.width,0))).extend(this.pointLocation(new o.Point(this.width,this.height))).extend(this.pointLocation(new o.Point(0,this.height)))},Qr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new o.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Qr.prototype.setMaxBounds=function(N){N?(this.lngRange=[N.getWest(),N.getEast()],this.latRange=[N.getSouth(),N.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Qr.prototype.calculatePosMatrix=function(N,W){W===void 0&&(W=!1);var G=N.key,C=W?this._alignedPosMatrixCache:this._posMatrixCache;if(C[G])return C[G];var H=N.canonical,Q=this.worldSize/this.zoomScale(H.z),re=H.x+Math.pow(2,H.z)*N.wrap,fe=o.identity(new Float64Array(16));return o.translate(fe,fe,[re*Q,H.y*Q,0]),o.scale(fe,fe,[Q/o.EXTENT,Q/o.EXTENT,1]),o.multiply(fe,W?this.alignedProjMatrix:this.projMatrix,fe),C[G]=new Float32Array(fe),C[G]},Qr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Qr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var N,W,G,C,H=-90,Q=90,re=-180,fe=180,ye=this.size,Ce=this._unmodified;if(this.latRange){var De=this.latRange;H=o.mercatorYfromLat(De[1])*this.worldSize,N=(Q=o.mercatorYfromLat(De[0])*this.worldSize)-H<ye.y?ye.y/(Q-H):0}if(this.lngRange){var Ue=this.lngRange;re=o.mercatorXfromLng(Ue[0])*this.worldSize,W=(fe=o.mercatorXfromLng(Ue[1])*this.worldSize)-re<ye.x?ye.x/(fe-re):0}var He=this.point,tt=Math.max(W||0,N||0);if(tt)return this.center=this.unproject(new o.Point(W?(fe+re)/2:He.x,N?(Q+H)/2:He.y)),this.zoom+=this.scaleZoom(tt),this._unmodified=Ce,void(this._constraining=!1);if(this.latRange){var ct=He.y,pt=ye.y/2;ct-pt<H&&(C=H+pt),ct+pt>Q&&(C=Q-pt)}if(this.lngRange){var kt=He.x,Lt=ye.x/2;kt-Lt<re&&(G=re+Lt),kt+Lt>fe&&(G=fe-Lt)}G===void 0&&C===void 0||(this.center=this.unproject(new o.Point(G!==void 0?G:He.x,C!==void 0?C:He.y))),this._unmodified=Ce,this._constraining=!1}},Qr.prototype._calcMatrices=function(){if(this.height){var N=this._fov/2,W=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(N)*this.height;var G=Math.PI/2+this._pitch,C=this._fov*(.5+W.y/this.height),H=Math.sin(C)*this.cameraToCenterDistance/Math.sin(o.clamp(Math.PI-G-C,.01,Math.PI-.01)),Q=this.point,re=Q.x,fe=Q.y,ye=1.01*(Math.cos(Math.PI/2-this._pitch)*H+this.cameraToCenterDistance),Ce=this.height/50,De=new Float64Array(16);o.perspective(De,this._fov,this.width/this.height,Ce,ye),De[8]=2*-W.x/this.width,De[9]=2*W.y/this.height,o.scale(De,De,[1,-1,1]),o.translate(De,De,[0,0,-this.cameraToCenterDistance]),o.rotateX(De,De,this._pitch),o.rotateZ(De,De,this.angle),o.translate(De,De,[-re,-fe,0]),this.mercatorMatrix=o.scale([],De,[this.worldSize,this.worldSize,this.worldSize]),o.scale(De,De,[1,1,o.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=De,this.invProjMatrix=o.invert([],this.projMatrix);var Ue=this.width%2/2,He=this.height%2/2,tt=Math.cos(this.angle),ct=Math.sin(this.angle),pt=re-Math.round(re)+tt*Ue+ct*He,kt=fe-Math.round(fe)+tt*He+ct*Ue,Lt=new Float64Array(De);if(o.translate(Lt,Lt,[pt>.5?pt-1:pt,kt>.5?kt-1:kt,0]),this.alignedProjMatrix=Lt,De=o.create(),o.scale(De,De,[this.width/2,-this.height/2,1]),o.translate(De,De,[1,-1,0]),this.labelPlaneMatrix=De,De=o.create(),o.scale(De,De,[1,-1,1]),o.translate(De,De,[-1,-1,0]),o.scale(De,De,[2/this.width,2/this.height,1]),this.glCoordMatrix=De,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(De=o.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=De,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Qr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var N=this.pointCoordinate(new o.Point(0,0)),W=[N.x*this.worldSize,N.y*this.worldSize,0,1];return o.transformMat4(W,W,this.pixelMatrix)[3]/this.cameraToCenterDistance},Qr.prototype.getCameraPoint=function(){var N=this._pitch,W=Math.tan(N)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,W))},Qr.prototype.getCameraQueryGeometry=function(N){var W=this.getCameraPoint();if(N.length===1)return[N[0],W];for(var G=W.x,C=W.y,H=W.x,Q=W.y,re=0,fe=N;re<fe.length;re+=1){var ye=fe[re];G=Math.min(G,ye.x),C=Math.min(C,ye.y),H=Math.max(H,ye.x),Q=Math.max(Q,ye.y)}return[new o.Point(G,C),new o.Point(H,C),new o.Point(H,Q),new o.Point(G,Q),new o.Point(G,C)]},Object.defineProperties(Qr.prototype,ii);var La=function(N){var W,G,C,H,Q;this._hashName=N&&encodeURIComponent(N),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(W=this._updateHashUnthrottled.bind(this),G=300,C=!1,H=null,Q=function(){H=null,C&&(W(),H=setTimeout(Q,G),C=!1)},function(){return C=!0,H||Q(),H})};La.prototype.addTo=function(N){return this._map=N,o.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},La.prototype.remove=function(){return o.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},La.prototype.getHashString=function(N){var W=this._map.getCenter(),G=Math.round(100*this._map.getZoom())/100,C=Math.ceil((G*Math.LN2+Math.log(512/360/.5))/Math.LN10),H=Math.pow(10,C),Q=Math.round(W.lng*H)/H,re=Math.round(W.lat*H)/H,fe=this._map.getBearing(),ye=this._map.getPitch(),Ce="";if(Ce+=N?"/"+Q+"/"+re+"/"+G:G+"/"+re+"/"+Q,(fe||ye)&&(Ce+="/"+Math.round(10*fe)/10),ye&&(Ce+="/"+Math.round(ye)),this._hashName){var De=this._hashName,Ue=!1,He=o.window.location.hash.slice(1).split("&").map(function(tt){var ct=tt.split("=")[0];return ct===De?(Ue=!0,ct+"="+Ce):tt}).filter(function(tt){return tt});return Ue||He.push(De+"="+Ce),"#"+He.join("&")}return"#"+Ce},La.prototype._getCurrentHash=function(){var N,W=this,G=o.window.location.hash.replace("#","");return this._hashName?(G.split("&").map(function(C){return C.split("=")}).forEach(function(C){C[0]===W._hashName&&(N=C)}),(N&&N[1]||"").split("/")):G.split("/")},La.prototype._onHashChange=function(){var N=this._getCurrentHash();if(N.length>=3&&!N.some(function(G){return isNaN(G)})){var W=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(N[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+N[2],+N[1]],zoom:+N[0],bearing:W,pitch:+(N[4]||0)}),!0}return!1},La.prototype._updateHashUnthrottled=function(){var N=o.window.location.href.replace(/(#.+)?$/,this.getHashString());try{o.window.history.replaceState(o.window.history.state,null,N)}catch{}};var bs={linearity:.3,easing:o.bezier(0,0,.3,1)},Rs=o.extend({deceleration:2500,maxSpeed:1400},bs),ol=o.extend({deceleration:20,maxSpeed:1400},bs),Fs=o.extend({deceleration:1e3,maxSpeed:360},bs),Bs=o.extend({deceleration:1e3,maxSpeed:90},bs),Da=function(N){this._map=N,this.clear()};function Bo(N,W){(!N.duration||N.duration<W.duration)&&(N.duration=W.duration,N.easing=W.easing)}function No(N,W,G){var C=G.maxSpeed,H=G.linearity,Q=G.deceleration,re=o.clamp(N*H/(W/1e3),-C,C),fe=Math.abs(re)/(Q*H);return{easing:G.easing,duration:1e3*fe,amount:re*(fe/2)}}Da.prototype.clear=function(){this._inertiaBuffer=[]},Da.prototype.record=function(N){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.browser.now(),settings:N})},Da.prototype._drainInertiaBuffer=function(){for(var N=this._inertiaBuffer,W=o.browser.now();N.length>0&&W-N[0].time>160;)N.shift()},Da.prototype._onMoveEnd=function(N){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var W={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0},G=0,C=this._inertiaBuffer;G<C.length;G+=1){var H=C[G].settings;W.zoom+=H.zoomDelta||0,W.bearing+=H.bearingDelta||0,W.pitch+=H.pitchDelta||0,H.panDelta&&W.pan._add(H.panDelta),H.around&&(W.around=H.around),H.pinchAround&&(W.pinchAround=H.pinchAround)}var Q=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,re={};if(W.pan.mag()){var fe=No(W.pan.mag(),Q,o.extend({},Rs,N||{}));re.offset=W.pan.mult(fe.amount/W.pan.mag()),re.center=this._map.transform.center,Bo(re,fe)}if(W.zoom){var ye=No(W.zoom,Q,ol);re.zoom=this._map.transform.zoom+ye.amount,Bo(re,ye)}if(W.bearing){var Ce=No(W.bearing,Q,Fs);re.bearing=this._map.transform.bearing+o.clamp(Ce.amount,-179,179),Bo(re,Ce)}if(W.pitch){var De=No(W.pitch,Q,Bs);re.pitch=this._map.transform.pitch+De.amount,Bo(re,De)}if(re.zoom||re.bearing){var Ue=W.pinchAround===void 0?W.around:W.pinchAround;re.around=Ue?this._map.unproject(Ue):this._map.getCenter()}return this.clear(),o.extend(re,{noMoveStart:!0})}};var sa=function(N){function W(C,H,Q,re){re===void 0&&(re={});var fe=_.mousePos(H.getCanvasContainer(),Q),ye=H.unproject(fe);N.call(this,C,o.extend({point:fe,lngLat:ye,originalEvent:Q},re)),this._defaultPrevented=!1,this.target=H}N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W;var G={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},G.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,G),W}(o.Event),Ns=function(N){function W(C,H,Q){var re=C==="touchend"?Q.changedTouches:Q.touches,fe=_.touchPos(H.getCanvasContainer(),re),ye=fe.map(function(Ue){return H.unproject(Ue)}),Ce=fe.reduce(function(Ue,He,tt,ct){return Ue.add(He.div(ct.length))},new o.Point(0,0)),De=H.unproject(Ce);N.call(this,C,{points:fe,point:Ce,lngLats:ye,lngLat:De,originalEvent:Q}),this._defaultPrevented=!1}N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W;var G={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},G.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,G),W}(o.Event),Ra=function(N){function W(C,H,Q){N.call(this,C,{originalEvent:Q}),this._defaultPrevented=!1}N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W;var G={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},G.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,G),W}(o.Event),Hi=function(N,W){this._map=N,this._clickTolerance=W.clickTolerance};Hi.prototype.reset=function(){delete this._mousedownPos},Hi.prototype.wheel=function(N){return this._firePreventable(new Ra(N.type,this._map,N))},Hi.prototype.mousedown=function(N,W){return this._mousedownPos=W,this._firePreventable(new sa(N.type,this._map,N))},Hi.prototype.mouseup=function(N){this._map.fire(new sa(N.type,this._map,N))},Hi.prototype.click=function(N,W){this._mousedownPos&&this._mousedownPos.dist(W)>=this._clickTolerance||this._map.fire(new sa(N.type,this._map,N))},Hi.prototype.dblclick=function(N){return this._firePreventable(new sa(N.type,this._map,N))},Hi.prototype.mouseover=function(N){this._map.fire(new sa(N.type,this._map,N))},Hi.prototype.mouseout=function(N){this._map.fire(new sa(N.type,this._map,N))},Hi.prototype.touchstart=function(N){return this._firePreventable(new Ns(N.type,this._map,N))},Hi.prototype.touchmove=function(N){this._map.fire(new Ns(N.type,this._map,N))},Hi.prototype.touchend=function(N){this._map.fire(new Ns(N.type,this._map,N))},Hi.prototype.touchcancel=function(N){this._map.fire(new Ns(N.type,this._map,N))},Hi.prototype._firePreventable=function(N){if(this._map.fire(N),N.defaultPrevented)return{}},Hi.prototype.isEnabled=function(){return!0},Hi.prototype.isActive=function(){return!1},Hi.prototype.enable=function(){},Hi.prototype.disable=function(){};var Xi=function(N){this._map=N};Xi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Xi.prototype.mousemove=function(N){this._map.fire(new sa(N.type,this._map,N))},Xi.prototype.mousedown=function(){this._delayContextMenu=!0},Xi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new sa("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Xi.prototype.contextmenu=function(N){this._delayContextMenu?this._contextMenuEvent=N:this._map.fire(new sa(N.type,this._map,N)),this._map.listens("contextmenu")&&N.preventDefault()},Xi.prototype.isEnabled=function(){return!0},Xi.prototype.isActive=function(){return!1},Xi.prototype.enable=function(){},Xi.prototype.disable=function(){};var hi=function(N,W){this._map=N,this._el=N.getCanvasContainer(),this._container=N.getContainer(),this._clickTolerance=W.clickTolerance||1};function Ji(N,W){for(var G={},C=0;C<N.length;C++)G[N[C].identifier]=W[C];return G}hi.prototype.isEnabled=function(){return!!this._enabled},hi.prototype.isActive=function(){return!!this._active},hi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},hi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},hi.prototype.mousedown=function(N,W){this.isEnabled()&&N.shiftKey&&N.button===0&&(_.disableDrag(),this._startPos=this._lastPos=W,this._active=!0)},hi.prototype.mousemoveWindow=function(N,W){if(this._active){var G=W;if(!(this._lastPos.equals(G)||!this._box&&G.dist(this._startPos)<this._clickTolerance)){var C=this._startPos;this._lastPos=G,this._box||(this._box=_.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",N));var H=Math.min(C.x,G.x),Q=Math.max(C.x,G.x),re=Math.min(C.y,G.y),fe=Math.max(C.y,G.y);_.setTransform(this._box,"translate("+H+"px,"+re+"px)"),this._box.style.width=Q-H+"px",this._box.style.height=fe-re+"px"}}},hi.prototype.mouseupWindow=function(N,W){var G=this;if(this._active&&N.button===0){var C=this._startPos,H=W;if(this.reset(),_.suppressClick(),C.x!==H.x||C.y!==H.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:N})),{cameraAnimation:function(Q){return Q.fitScreenCoordinates(C,H,G._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",N)}},hi.prototype.keydown=function(N){this._active&&N.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",N))},hi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(_.remove(this._box),this._box=null),_.enableDrag(),delete this._startPos,delete this._lastPos},hi.prototype._fireEvent=function(N,W){return this._map.fire(new o.Event(N,{originalEvent:W}))};var so=function(N){this.reset(),this.numTouches=N.numTouches};so.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},so.prototype.touchstart=function(N,W,G){(this.centroid||G.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=N.timeStamp),G.length===this.numTouches&&(this.centroid=function(C){for(var H=new o.Point(0,0),Q=0,re=C;Q<re.length;Q+=1){var fe=re[Q];H._add(fe)}return H.div(C.length)}(W),this.touches=Ji(G,W)))},so.prototype.touchmove=function(N,W,G){if(!this.aborted&&this.centroid){var C=Ji(G,W);for(var H in this.touches){var Q=this.touches[H],re=C[H];(!re||re.dist(Q)>30)&&(this.aborted=!0)}}},so.prototype.touchend=function(N,W,G){if((!this.centroid||N.timeStamp-this.startTime>500)&&(this.aborted=!0),G.length===0){var C=!this.aborted&&this.centroid;if(this.reset(),C)return C}};var os=function(N){this.singleTap=new so(N),this.numTaps=N.numTaps,this.reset()};os.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},os.prototype.touchstart=function(N,W,G){this.singleTap.touchstart(N,W,G)},os.prototype.touchmove=function(N,W,G){this.singleTap.touchmove(N,W,G)},os.prototype.touchend=function(N,W,G){var C=this.singleTap.touchend(N,W,G);if(C){var H=N.timeStamp-this.lastTime<500,Q=!this.lastTap||this.lastTap.dist(C)<30;if(H&&Q||this.reset(),this.count++,this.lastTime=N.timeStamp,this.lastTap=C,this.count===this.numTaps)return this.reset(),C}};var Za=function(){this._zoomIn=new os({numTouches:1,numTaps:2}),this._zoomOut=new os({numTouches:2,numTaps:1}),this.reset()};Za.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Za.prototype.touchstart=function(N,W,G){this._zoomIn.touchstart(N,W,G),this._zoomOut.touchstart(N,W,G)},Za.prototype.touchmove=function(N,W,G){this._zoomIn.touchmove(N,W,G),this._zoomOut.touchmove(N,W,G)},Za.prototype.touchend=function(N,W,G){var C=this,H=this._zoomIn.touchend(N,W,G),Q=this._zoomOut.touchend(N,W,G);return H?(this._active=!0,N.preventDefault(),setTimeout(function(){return C.reset()},0),{cameraAnimation:function(re){return re.easeTo({duration:300,zoom:re.getZoom()+1,around:re.unproject(H)},{originalEvent:N})}}):Q?(this._active=!0,N.preventDefault(),setTimeout(function(){return C.reset()},0),{cameraAnimation:function(re){return re.easeTo({duration:300,zoom:re.getZoom()-1,around:re.unproject(Q)},{originalEvent:N})}}):void 0},Za.prototype.touchcancel=function(){this.reset()},Za.prototype.enable=function(){this._enabled=!0},Za.prototype.disable=function(){this._enabled=!1,this.reset()},Za.prototype.isEnabled=function(){return this._enabled},Za.prototype.isActive=function(){return this._active};var jo={};jo[0]=1,jo[2]=2;var ga=function(N){this.reset(),this._clickTolerance=N.clickTolerance||1};ga.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},ga.prototype._correctButton=function(N,W){return!1},ga.prototype._move=function(N,W){return{}},ga.prototype.mousedown=function(N,W){if(!this._lastPoint){var G=_.mouseButton(N);this._correctButton(N,G)&&(this._lastPoint=W,this._eventButton=G)}},ga.prototype.mousemoveWindow=function(N,W){var G=this._lastPoint;if(G){if(N.preventDefault(),function(C,H){var Q=jo[H];return C.buttons===void 0||(C.buttons&Q)!==Q}(N,this._eventButton))this.reset();else if(this._moved||!(W.dist(G)<this._clickTolerance))return this._moved=!0,this._lastPoint=W,this._move(G,W)}},ga.prototype.mouseupWindow=function(N){this._lastPoint&&_.mouseButton(N)===this._eventButton&&(this._moved&&_.suppressClick(),this.reset())},ga.prototype.enable=function(){this._enabled=!0},ga.prototype.disable=function(){this._enabled=!1,this.reset()},ga.prototype.isEnabled=function(){return this._enabled},ga.prototype.isActive=function(){return this._active};var ss=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.mousedown=function(G,C){N.prototype.mousedown.call(this,G,C),this._lastPoint&&(this._active=!0)},W.prototype._correctButton=function(G,C){return C===0&&!G.ctrlKey},W.prototype._move=function(G,C){return{around:C,panDelta:C.sub(G)}},W}(ga),wo=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype._correctButton=function(G,C){return C===0&&G.ctrlKey||C===2},W.prototype._move=function(G,C){var H=.8*(C.x-G.x);if(H)return this._active=!0,{bearingDelta:H}},W.prototype.contextmenu=function(G){G.preventDefault()},W}(ga),Fa=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype._correctButton=function(G,C){return C===0&&G.ctrlKey||C===2},W.prototype._move=function(G,C){var H=-.5*(C.y-G.y);if(H)return this._active=!0,{pitchDelta:H}},W.prototype.contextmenu=function(G){G.preventDefault()},W}(ga),Ba=function(N){this._minTouches=1,this._clickTolerance=N.clickTolerance||1,this.reset()};Ba.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)},Ba.prototype.touchstart=function(N,W,G){return this._calculateTransform(N,W,G)},Ba.prototype.touchmove=function(N,W,G){if(this._active&&!(G.length<this._minTouches))return N.preventDefault(),this._calculateTransform(N,W,G)},Ba.prototype.touchend=function(N,W,G){this._calculateTransform(N,W,G),this._active&&G.length<this._minTouches&&this.reset()},Ba.prototype.touchcancel=function(){this.reset()},Ba.prototype._calculateTransform=function(N,W,G){G.length>0&&(this._active=!0);var C=Ji(G,W),H=new o.Point(0,0),Q=new o.Point(0,0),re=0;for(var fe in C){var ye=C[fe],Ce=this._touches[fe];Ce&&(H._add(ye),Q._add(ye.sub(Ce)),re++,C[fe]=ye)}if(this._touches=C,!(re<this._minTouches)&&Q.mag()){var De=Q.div(re);if(this._sum._add(De),!(this._sum.mag()<this._clickTolerance))return{around:H.div(re),panDelta:De}}},Ba.prototype.enable=function(){this._enabled=!0},Ba.prototype.disable=function(){this._enabled=!1,this.reset()},Ba.prototype.isEnabled=function(){return this._enabled},Ba.prototype.isActive=function(){return this._active};var di=function(){this.reset()};function Xa(N,W,G){for(var C=0;C<N.length;C++)if(N[C].identifier===G)return W[C]}di.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},di.prototype._start=function(N){},di.prototype._move=function(N,W,G){return{}},di.prototype.touchstart=function(N,W,G){this._firstTwoTouches||G.length<2||(this._firstTwoTouches=[G[0].identifier,G[1].identifier],this._start([W[0],W[1]]))},di.prototype.touchmove=function(N,W,G){if(this._firstTwoTouches){N.preventDefault();var C=this._firstTwoTouches,H=C[0],Q=C[1],re=Xa(G,W,H),fe=Xa(G,W,Q);if(re&&fe){var ye=this._aroundCenter?null:re.add(fe).div(2);return this._move([re,fe],ye,N)}}},di.prototype.touchend=function(N,W,G){if(this._firstTwoTouches){var C=this._firstTwoTouches,H=C[0],Q=C[1],re=Xa(G,W,H),fe=Xa(G,W,Q);re&&fe||(this._active&&_.suppressClick(),this.reset())}},di.prototype.touchcancel=function(){this.reset()},di.prototype.enable=function(N){this._enabled=!0,this._aroundCenter=!!N&&N.around==="center"},di.prototype.disable=function(){this._enabled=!1,this.reset()},di.prototype.isEnabled=function(){return this._enabled},di.prototype.isActive=function(){return this._active};function Lr(N,W){return Math.log(N/W)/Math.LN2}var js=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.reset=function(){N.prototype.reset.call(this),delete this._distance,delete this._startDistance},W.prototype._start=function(G){this._startDistance=this._distance=G[0].dist(G[1])},W.prototype._move=function(G,C){var H=this._distance;if(this._distance=G[0].dist(G[1]),this._active||!(Math.abs(Lr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Lr(this._distance,H),pinchAround:C}},W}(di);function dl(N,W){return 180*N.angleWith(W)/Math.PI}var Uo=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.reset=function(){N.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},W.prototype._start=function(G){this._startVector=this._vector=G[0].sub(G[1]),this._minDiameter=G[0].dist(G[1])},W.prototype._move=function(G,C){var H=this._vector;if(this._vector=G[0].sub(G[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:dl(this._vector,H),pinchAround:C}},W.prototype._isBelowThreshold=function(G){this._minDiameter=Math.min(this._minDiameter,G.mag());var C=25/(Math.PI*this._minDiameter)*360,H=dl(G,this._startVector);return Math.abs(H)<C},W}(di);function Vo(N){return Math.abs(N.y)>Math.abs(N.x)}var ls=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.reset=function(){N.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},W.prototype._start=function(G){this._lastPoints=G,Vo(G[0].sub(G[1]))&&(this._valid=!1)},W.prototype._move=function(G,C,H){var Q=G[0].sub(this._lastPoints[0]),re=G[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Q,re,H.timeStamp),this._valid)return this._lastPoints=G,this._active=!0,{pitchDelta:(Q.y+re.y)/2*-.5}},W.prototype.gestureBeginsVertically=function(G,C,H){if(this._valid!==void 0)return this._valid;var Q=G.mag()>=2,re=C.mag()>=2;if(Q||re){if(!Q||!re)return this._firstMove===void 0&&(this._firstMove=H),H-this._firstMove<100&&void 0;var fe=G.y>0==C.y>0;return Vo(G)&&Vo(C)&&fe}},W}(di),_s={panStep:100,bearingStep:15,pitchStep:10},_r=function(){var N=_s;this._panStep=N.panStep,this._bearingStep=N.bearingStep,this._pitchStep=N.pitchStep,this._rotationDisabled=!1};function Us(N){return N*(2-N)}_r.prototype.reset=function(){this._active=!1},_r.prototype.keydown=function(N){var W=this;if(!(N.altKey||N.ctrlKey||N.metaKey)){var G=0,C=0,H=0,Q=0,re=0;switch(N.keyCode){case 61:case 107:case 171:case 187:G=1;break;case 189:case 109:case 173:G=-1;break;case 37:N.shiftKey?C=-1:(N.preventDefault(),Q=-1);break;case 39:N.shiftKey?C=1:(N.preventDefault(),Q=1);break;case 38:N.shiftKey?H=1:(N.preventDefault(),re=-1);break;case 40:N.shiftKey?H=-1:(N.preventDefault(),re=1);break;default:return}return this._rotationDisabled&&(C=0,H=0),{cameraAnimation:function(fe){var ye=fe.getZoom();fe.easeTo({duration:300,easeId:"keyboardHandler",easing:Us,zoom:G?Math.round(ye)+G*(N.shiftKey?2:1):ye,bearing:fe.getBearing()+C*W._bearingStep,pitch:fe.getPitch()+H*W._pitchStep,offset:[-Q*W._panStep,-re*W._panStep],center:fe.getCenter()},{originalEvent:N})}}}},_r.prototype.enable=function(){this._enabled=!0},_r.prototype.disable=function(){this._enabled=!1,this.reset()},_r.prototype.isEnabled=function(){return this._enabled},_r.prototype.isActive=function(){return this._active},_r.prototype.disableRotation=function(){this._rotationDisabled=!0},_r.prototype.enableRotation=function(){this._rotationDisabled=!1};var To=4.000244140625,Gi=function(N,W){this._map=N,this._el=N.getCanvasContainer(),this._handler=W,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout"],this)};Gi.prototype.setZoomRate=function(N){this._defaultZoomRate=N},Gi.prototype.setWheelZoomRate=function(N){this._wheelZoomRate=N},Gi.prototype.isEnabled=function(){return!!this._enabled},Gi.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Gi.prototype.isZooming=function(){return!!this._zooming},Gi.prototype.enable=function(N){this.isEnabled()||(this._enabled=!0,this._aroundCenter=N&&N.around==="center")},Gi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Gi.prototype.wheel=function(N){if(this.isEnabled()){var W=N.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*N.deltaY:N.deltaY,G=o.browser.now(),C=G-(this._lastWheelEventTime||0);this._lastWheelEventTime=G,W!==0&&W%To==0?this._type="wheel":W!==0&&Math.abs(W)<4?this._type="trackpad":C>400?(this._type=null,this._lastValue=W,this._timeout=setTimeout(this._onTimeout,40,N)):this._type||(this._type=Math.abs(C*W)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,W+=this._lastValue)),N.shiftKey&&W&&(W/=4),this._type&&(this._lastWheelEvent=N,this._delta-=W,this._active||this._start(N)),N.preventDefault()}},Gi.prototype._onTimeout=function(N){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(N)},Gi.prototype._start=function(N){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var W=_.mousePos(this._el,N);this._around=o.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(W)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Gi.prototype.renderFrame=function(){var N=this;if(this._frameId&&(this._frameId=null,this.isActive())){var W=this._map.transform;if(this._delta!==0){var G=this._type==="wheel"&&Math.abs(this._delta)>To?this._wheelZoomRate:this._defaultZoomRate,C=2/(1+Math.exp(-Math.abs(this._delta*G)));this._delta<0&&C!==0&&(C=1/C);var H=typeof this._targetZoom=="number"?W.zoomScale(this._targetZoom):W.scale;this._targetZoom=Math.min(W.maxZoom,Math.max(W.minZoom,W.scaleZoom(H*C))),this._type==="wheel"&&(this._startZoom=W.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Q,re=typeof this._targetZoom=="number"?this._targetZoom:W.zoom,fe=this._startZoom,ye=this._easing,Ce=!1;if(this._type==="wheel"&&fe&&ye){var De=Math.min((o.browser.now()-this._lastWheelEventTime)/200,1),Ue=ye(De);Q=o.number(fe,re,Ue),De<1?this._frameId||(this._frameId=!0):Ce=!0}else Q=re,Ce=!0;return this._active=!0,Ce&&(this._active=!1,this._finishTimeout=setTimeout(function(){N._zooming=!1,N._handler._triggerRenderFrame(),delete N._targetZoom,delete N._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Ce,zoomDelta:Q-W.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Gi.prototype._smoothOutEasing=function(N){var W=o.ease;if(this._prevEase){var G=this._prevEase,C=(o.browser.now()-G.start)/G.duration,H=G.easing(C+.01)-G.easing(C),Q=.27/Math.sqrt(H*H+1e-4)*.01,re=Math.sqrt(.0729-Q*Q);W=o.bezier(Q,re,.25,1)}return this._prevEase={start:o.browser.now(),duration:N,easing:W},W},Gi.prototype.reset=function(){this._active=!1};var qo=function(N,W){this._clickZoom=N,this._tapZoom=W};qo.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},qo.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},qo.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},qo.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Ja=function(){this.reset()};Ja.prototype.reset=function(){this._active=!1},Ja.prototype.dblclick=function(N,W){return N.preventDefault(),{cameraAnimation:function(G){G.easeTo({duration:300,zoom:G.getZoom()+(N.shiftKey?-1:1),around:G.unproject(W)},{originalEvent:N})}}},Ja.prototype.enable=function(){this._enabled=!0},Ja.prototype.disable=function(){this._enabled=!1,this.reset()},Ja.prototype.isEnabled=function(){return this._enabled},Ja.prototype.isActive=function(){return this._active};var Na=function(){this._tap=new os({numTouches:1,numTaps:1}),this.reset()};Na.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Na.prototype.touchstart=function(N,W,G){this._swipePoint||(this._tapTime&&N.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?G.length>0&&(this._swipePoint=W[0],this._swipeTouch=G[0].identifier):this._tap.touchstart(N,W,G))},Na.prototype.touchmove=function(N,W,G){if(this._tapTime){if(this._swipePoint){if(G[0].identifier!==this._swipeTouch)return;var C=W[0],H=C.y-this._swipePoint.y;return this._swipePoint=C,N.preventDefault(),this._active=!0,{zoomDelta:H/128}}}else this._tap.touchmove(N,W,G)},Na.prototype.touchend=function(N,W,G){this._tapTime?this._swipePoint&&G.length===0&&this.reset():this._tap.touchend(N,W,G)&&(this._tapTime=N.timeStamp)},Na.prototype.touchcancel=function(){this.reset()},Na.prototype.enable=function(){this._enabled=!0},Na.prototype.disable=function(){this._enabled=!1,this.reset()},Na.prototype.isEnabled=function(){return this._enabled},Na.prototype.isActive=function(){return this._active};var la=function(N,W,G){this._el=N,this._mousePan=W,this._touchPan=G};la.prototype.enable=function(N){this._inertiaOptions=N||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},la.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},la.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},la.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var lo=function(N,W,G){this._pitchWithRotate=N.pitchWithRotate,this._mouseRotate=W,this._mousePitch=G};lo.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},lo.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},lo.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},lo.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ja=function(N,W,G,C){this._el=N,this._touchZoom=W,this._touchRotate=G,this._tapDragZoom=C,this._rotationDisabled=!1,this._enabled=!0};ja.prototype.enable=function(N){this._touchZoom.enable(N),this._rotationDisabled||this._touchRotate.enable(N),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},ja.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},ja.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},ja.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},ja.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},ja.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var ko=function(N){return N.zoom||N.drag||N.pitch||N.rotate},Vs=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W}(o.Event);function Ho(N){return N.panDelta&&N.panDelta.mag()||N.zoomDelta||N.bearingDelta||N.pitchDelta}var Kr=function(N,W){this._map=N,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Da(N),this._bearingSnap=W.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(W),o.bindAll(["handleEvent","handleWindowEvent"],this);var G=this._el;this._listeners=[[G,"touchstart",{passive:!0}],[G,"touchmove",{passive:!1}],[G,"touchend",void 0],[G,"touchcancel",void 0],[G,"mousedown",void 0],[G,"mousemove",void 0],[G,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[G,"mouseover",void 0],[G,"mouseout",void 0],[G,"dblclick",void 0],[G,"click",void 0],[G,"keydown",{capture:!1}],[G,"keyup",void 0],[G,"wheel",{passive:!1}],[G,"contextmenu",void 0],[o.window,"blur",void 0]];for(var C=0,H=this._listeners;C<H.length;C+=1){var Q=H[C],re=Q[0],fe=Q[1],ye=Q[2];_.addEventListener(re,fe,re===o.window.document?this.handleWindowEvent:this.handleEvent,ye)}};Kr.prototype.destroy=function(){for(var N=0,W=this._listeners;N<W.length;N+=1){var G=W[N],C=G[0],H=G[1],Q=G[2];_.removeEventListener(C,H,C===o.window.document?this.handleWindowEvent:this.handleEvent,Q)}},Kr.prototype._addDefaultHandlers=function(N){var W=this._map,G=W.getCanvasContainer();this._add("mapEvent",new Hi(W,N));var C=W.boxZoom=new hi(W,N);this._add("boxZoom",C);var H=new Za,Q=new Ja;W.doubleClickZoom=new qo(Q,H),this._add("tapZoom",H),this._add("clickZoom",Q);var re=new Na;this._add("tapDragZoom",re);var fe=W.touchPitch=new ls;this._add("touchPitch",fe);var ye=new wo(N),Ce=new Fa(N);W.dragRotate=new lo(N,ye,Ce),this._add("mouseRotate",ye,["mousePitch"]),this._add("mousePitch",Ce,["mouseRotate"]);var De=new ss(N),Ue=new Ba(N);W.dragPan=new la(G,De,Ue),this._add("mousePan",De),this._add("touchPan",Ue,["touchZoom","touchRotate"]);var He=new Uo,tt=new js;W.touchZoomRotate=new ja(G,tt,He,re),this._add("touchRotate",He,["touchPan","touchZoom"]),this._add("touchZoom",tt,["touchPan","touchRotate"]);var ct=W.scrollZoom=new Gi(W,this);this._add("scrollZoom",ct,["mousePan"]);var pt=W.keyboard=new _r;this._add("keyboard",pt),this._add("blockableMapEvent",new Xi(W));for(var kt=0,Lt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];kt<Lt.length;kt+=1){var St=Lt[kt];N.interactive&&N[St]&&W[St].enable(N[St])}},Kr.prototype._add=function(N,W,G){this._handlers.push({handlerName:N,handler:W,allowed:G}),this._handlersById[N]=W},Kr.prototype.stop=function(N){if(!this._updatingCamera){for(var W=0,G=this._handlers;W<G.length;W+=1)G[W].handler.reset();this._inertia.clear(),this._fireEvents({},{},N),this._changes=[]}},Kr.prototype.isActive=function(){for(var N=0,W=this._handlers;N<W.length;N+=1)if(W[N].handler.isActive())return!0;return!1},Kr.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Kr.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Kr.prototype.isMoving=function(){return!!ko(this._eventsInProgress)||this.isZooming()},Kr.prototype._blockedByActive=function(N,W,G){for(var C in N)if(C!==G&&(!W||W.indexOf(C)<0))return!0;return!1},Kr.prototype.handleWindowEvent=function(N){this.handleEvent(N,N.type+"Window")},Kr.prototype._getMapTouches=function(N){for(var W=[],G=0,C=N;G<C.length;G+=1){var H=C[G],Q=H.target;this._el.contains(Q)&&W.push(H)}return W},Kr.prototype.handleEvent=function(N,W){if(N.type!=="blur"){this._updatingCamera=!0;for(var G=N.type==="renderFrame"?void 0:N,C={needsRenderFrame:!1},H={},Q={},re=N.touches?this._getMapTouches(N.touches):void 0,fe=re?_.touchPos(this._el,re):_.mousePos(this._el,N),ye=0,Ce=this._handlers;ye<Ce.length;ye+=1){var De=Ce[ye],Ue=De.handlerName,He=De.handler,tt=De.allowed;if(He.isEnabled()){var ct=void 0;this._blockedByActive(Q,tt,Ue)?He.reset():He[W||N.type]&&(ct=He[W||N.type](N,fe,re),this.mergeHandlerResult(C,H,ct,Ue,G),ct&&ct.needsRenderFrame&&this._triggerRenderFrame()),(ct||He.isActive())&&(Q[Ue]=He)}}var pt={};for(var kt in this._previousActiveHandlers)Q[kt]||(pt[kt]=G);this._previousActiveHandlers=Q,(Object.keys(pt).length||Ho(C))&&(this._changes.push([C,H,pt]),this._triggerRenderFrame()),(Object.keys(Q).length||Ho(C))&&this._map._stop(!0),this._updatingCamera=!1;var Lt=C.cameraAnimation;Lt&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Lt(this._map))}else this.stop(!0)},Kr.prototype.mergeHandlerResult=function(N,W,G,C,H){if(G){o.extend(N,G);var Q={handlerName:C,originalEvent:G.originalEvent||H};G.zoomDelta!==void 0&&(W.zoom=Q),G.panDelta!==void 0&&(W.drag=Q),G.pitchDelta!==void 0&&(W.pitch=Q),G.bearingDelta!==void 0&&(W.rotate=Q)}},Kr.prototype._applyChanges=function(){for(var N={},W={},G={},C=0,H=this._changes;C<H.length;C+=1){var Q=H[C],re=Q[0],fe=Q[1],ye=Q[2];re.panDelta&&(N.panDelta=(N.panDelta||new o.Point(0,0))._add(re.panDelta)),re.zoomDelta&&(N.zoomDelta=(N.zoomDelta||0)+re.zoomDelta),re.bearingDelta&&(N.bearingDelta=(N.bearingDelta||0)+re.bearingDelta),re.pitchDelta&&(N.pitchDelta=(N.pitchDelta||0)+re.pitchDelta),re.around!==void 0&&(N.around=re.around),re.pinchAround!==void 0&&(N.pinchAround=re.pinchAround),re.noInertia&&(N.noInertia=re.noInertia),o.extend(W,fe),o.extend(G,ye)}this._updateMapTransform(N,W,G),this._changes=[]},Kr.prototype._updateMapTransform=function(N,W,G){var C=this._map,H=C.transform;if(!Ho(N))return this._fireEvents(W,G,!0);var Q=N.panDelta,re=N.zoomDelta,fe=N.bearingDelta,ye=N.pitchDelta,Ce=N.around,De=N.pinchAround;De!==void 0&&(Ce=De),C._stop(!0),Ce=Ce||C.transform.centerPoint;var Ue=H.pointLocation(Q?Ce.sub(Q):Ce);fe&&(H.bearing+=fe),ye&&(H.pitch+=ye),re&&(H.zoom+=re),H.setLocationAtPoint(Ue,Ce),this._map._update(),N.noInertia||this._inertia.record(N),this._fireEvents(W,G,!0)},Kr.prototype._fireEvents=function(N,W,G){var C=this,H=ko(this._eventsInProgress),Q=ko(N),re={};for(var fe in N){var ye=N[fe].originalEvent;this._eventsInProgress[fe]||(re[fe+"start"]=ye),this._eventsInProgress[fe]=N[fe]}for(var Ce in!H&&Q&&this._fireEvent("movestart",Q.originalEvent),re)this._fireEvent(Ce,re[Ce]);for(var De in Q&&this._fireEvent("move",Q.originalEvent),N){var Ue=N[De].originalEvent;this._fireEvent(De,Ue)}var He,tt={};for(var ct in this._eventsInProgress){var pt=this._eventsInProgress[ct],kt=pt.handlerName,Lt=pt.originalEvent;this._handlersById[kt].isActive()||(delete this._eventsInProgress[ct],He=W[kt]||Lt,tt[ct+"end"]=He)}for(var St in tt)this._fireEvent(St,tt[St]);var jt=ko(this._eventsInProgress);if(G&&(H||Q)&&!jt){this._updatingCamera=!0;var zt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Qt=function(Zt){return Zt!==0&&-C._bearingSnap<Zt&&Zt<C._bearingSnap};zt?(Qt(zt.bearing||this._map.getBearing())&&(zt.bearing=0),this._map.easeTo(zt,{originalEvent:He})):(this._map.fire(new o.Event("moveend",{originalEvent:He})),Qt(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Kr.prototype._fireEvent=function(N,W){this._map.fire(new o.Event(N,W?{originalEvent:W}:{}))},Kr.prototype._requestFrame=function(){var N=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(W){delete N._frameId,N.handleEvent(new Vs("renderFrame",{timeStamp:W})),N._applyChanges()})},Kr.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Ki=function(N){function W(G,C){N.call(this),this._moving=!1,this._zooming=!1,this.transform=G,this._bearingSnap=C.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getCenter=function(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)},W.prototype.setCenter=function(G,C){return this.jumpTo({center:G},C)},W.prototype.panBy=function(G,C,H){return G=o.Point.convert(G).mult(-1),this.panTo(this.transform.center,o.extend({offset:G},C),H)},W.prototype.panTo=function(G,C,H){return this.easeTo(o.extend({center:G},C),H)},W.prototype.getZoom=function(){return this.transform.zoom},W.prototype.setZoom=function(G,C){return this.jumpTo({zoom:G},C),this},W.prototype.zoomTo=function(G,C,H){return this.easeTo(o.extend({zoom:G},C),H)},W.prototype.zoomIn=function(G,C){return this.zoomTo(this.getZoom()+1,G,C),this},W.prototype.zoomOut=function(G,C){return this.zoomTo(this.getZoom()-1,G,C),this},W.prototype.getBearing=function(){return this.transform.bearing},W.prototype.setBearing=function(G,C){return this.jumpTo({bearing:G},C),this},W.prototype.getPadding=function(){return this.transform.padding},W.prototype.setPadding=function(G,C){return this.jumpTo({padding:G},C),this},W.prototype.rotateTo=function(G,C,H){return this.easeTo(o.extend({bearing:G},C),H)},W.prototype.resetNorth=function(G,C){return this.rotateTo(0,o.extend({duration:1e3},G),C),this},W.prototype.resetNorthPitch=function(G,C){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},G),C),this},W.prototype.snapToNorth=function(G,C){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(G,C):this},W.prototype.getPitch=function(){return this.transform.pitch},W.prototype.setPitch=function(G,C){return this.jumpTo({pitch:G},C),this},W.prototype.cameraForBounds=function(G,C){G=o.LngLatBounds.convert(G);var H=C&&C.bearing||0;return this._cameraForBoxAndBearing(G.getNorthWest(),G.getSouthEast(),H,C)},W.prototype._cameraForBoxAndBearing=function(G,C,H,Q){var re={top:0,bottom:0,right:0,left:0};if(typeof(Q=o.extend({padding:re,offset:[0,0],maxZoom:this.transform.maxZoom},Q)).padding=="number"){var fe=Q.padding;Q.padding={top:fe,bottom:fe,right:fe,left:fe}}Q.padding=o.extend(re,Q.padding);var ye=this.transform,Ce=ye.padding,De=ye.project(o.LngLat.convert(G)),Ue=ye.project(o.LngLat.convert(C)),He=De.rotate(-H*Math.PI/180),tt=Ue.rotate(-H*Math.PI/180),ct=new o.Point(Math.max(He.x,tt.x),Math.max(He.y,tt.y)),pt=new o.Point(Math.min(He.x,tt.x),Math.min(He.y,tt.y)),kt=ct.sub(pt),Lt=(ye.width-(Ce.left+Ce.right+Q.padding.left+Q.padding.right))/kt.x,St=(ye.height-(Ce.top+Ce.bottom+Q.padding.top+Q.padding.bottom))/kt.y;if(!(St<0||Lt<0)){var jt=Math.min(ye.scaleZoom(ye.scale*Math.min(Lt,St)),Q.maxZoom),zt=typeof Q.offset.x=="number"?new o.Point(Q.offset.x,Q.offset.y):o.Point.convert(Q.offset),Qt=(Q.padding.left-Q.padding.right)/2,Zt=(Q.padding.top-Q.padding.bottom)/2,Vt=new o.Point(Qt,Zt).rotate(H*Math.PI/180),vn=zt.add(Vt).mult(ye.scale/ye.zoomScale(jt));return{center:ye.unproject(De.add(Ue).div(2).sub(vn)),zoom:jt,bearing:H}}o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},W.prototype.fitBounds=function(G,C,H){return this._fitInternal(this.cameraForBounds(G,C),C,H)},W.prototype.fitScreenCoordinates=function(G,C,H,Q,re){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.Point.convert(G)),this.transform.pointLocation(o.Point.convert(C)),H,Q),Q,re)},W.prototype._fitInternal=function(G,C,H){return G?(delete(C=o.extend(G,C)).padding,C.linear?this.easeTo(C,H):this.flyTo(C,H)):this},W.prototype.jumpTo=function(G,C){this.stop();var H=this.transform,Q=!1,re=!1,fe=!1;return"zoom"in G&&H.zoom!==+G.zoom&&(Q=!0,H.zoom=+G.zoom),G.center!==void 0&&(H.center=o.LngLat.convert(G.center)),"bearing"in G&&H.bearing!==+G.bearing&&(re=!0,H.bearing=+G.bearing),"pitch"in G&&H.pitch!==+G.pitch&&(fe=!0,H.pitch=+G.pitch),G.padding==null||H.isPaddingEqual(G.padding)||(H.padding=G.padding),this.fire(new o.Event("movestart",C)).fire(new o.Event("move",C)),Q&&this.fire(new o.Event("zoomstart",C)).fire(new o.Event("zoom",C)).fire(new o.Event("zoomend",C)),re&&this.fire(new o.Event("rotatestart",C)).fire(new o.Event("rotate",C)).fire(new o.Event("rotateend",C)),fe&&this.fire(new o.Event("pitchstart",C)).fire(new o.Event("pitch",C)).fire(new o.Event("pitchend",C)),this.fire(new o.Event("moveend",C))},W.prototype.easeTo=function(G,C){var H=this;this._stop(!1,G.easeId),((G=o.extend({offset:[0,0],duration:500,easing:o.ease},G)).animate===!1||!G.essential&&o.browser.prefersReducedMotion)&&(G.duration=0);var Q=this.transform,re=this.getZoom(),fe=this.getBearing(),ye=this.getPitch(),Ce=this.getPadding(),De="zoom"in G?+G.zoom:re,Ue="bearing"in G?this._normalizeBearing(G.bearing,fe):fe,He="pitch"in G?+G.pitch:ye,tt="padding"in G?G.padding:Q.padding,ct=o.Point.convert(G.offset),pt=Q.centerPoint.add(ct),kt=Q.pointLocation(pt),Lt=o.LngLat.convert(G.center||kt);this._normalizeCenter(Lt);var St,jt,zt=Q.project(kt),Qt=Q.project(Lt).sub(zt),Zt=Q.zoomScale(De-re);G.around&&(St=o.LngLat.convert(G.around),jt=Q.locationPoint(St));var Vt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||De!==re,this._rotating=this._rotating||fe!==Ue,this._pitching=this._pitching||He!==ye,this._padding=!Q.isPaddingEqual(tt),this._easeId=G.easeId,this._prepareEase(C,G.noMoveStart,Vt),this._ease(function(vn){if(H._zooming&&(Q.zoom=o.number(re,De,vn)),H._rotating&&(Q.bearing=o.number(fe,Ue,vn)),H._pitching&&(Q.pitch=o.number(ye,He,vn)),H._padding&&(Q.interpolatePadding(Ce,tt,vn),pt=Q.centerPoint.add(ct)),St)Q.setLocationAtPoint(St,jt);else{var bn=Q.zoomScale(Q.zoom-re),On=De>re?Math.min(2,Zt):Math.max(.5,Zt),Dn=Math.pow(On,1-vn),Yn=Q.unproject(zt.add(Qt.mult(vn*Dn)).mult(bn));Q.setLocationAtPoint(Q.renderWorldCopies?Yn.wrap():Yn,pt)}H._fireMoveEvents(C)},function(vn){H._afterEase(C,vn)},G),this},W.prototype._prepareEase=function(G,C,H){H===void 0&&(H={}),this._moving=!0,C||H.moving||this.fire(new o.Event("movestart",G)),this._zooming&&!H.zooming&&this.fire(new o.Event("zoomstart",G)),this._rotating&&!H.rotating&&this.fire(new o.Event("rotatestart",G)),this._pitching&&!H.pitching&&this.fire(new o.Event("pitchstart",G))},W.prototype._fireMoveEvents=function(G){this.fire(new o.Event("move",G)),this._zooming&&this.fire(new o.Event("zoom",G)),this._rotating&&this.fire(new o.Event("rotate",G)),this._pitching&&this.fire(new o.Event("pitch",G))},W.prototype._afterEase=function(G,C){if(!this._easeId||!C||this._easeId!==C){delete this._easeId;var H=this._zooming,Q=this._rotating,re=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,H&&this.fire(new o.Event("zoomend",G)),Q&&this.fire(new o.Event("rotateend",G)),re&&this.fire(new o.Event("pitchend",G)),this.fire(new o.Event("moveend",G))}},W.prototype.flyTo=function(G,C){var H=this;if(!G.essential&&o.browser.prefersReducedMotion){var Q=o.pick(G,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Q,C)}this.stop(),G=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},G);var re=this.transform,fe=this.getZoom(),ye=this.getBearing(),Ce=this.getPitch(),De=this.getPadding(),Ue="zoom"in G?o.clamp(+G.zoom,re.minZoom,re.maxZoom):fe,He="bearing"in G?this._normalizeBearing(G.bearing,ye):ye,tt="pitch"in G?+G.pitch:Ce,ct="padding"in G?G.padding:re.padding,pt=re.zoomScale(Ue-fe),kt=o.Point.convert(G.offset),Lt=re.centerPoint.add(kt),St=re.pointLocation(Lt),jt=o.LngLat.convert(G.center||St);this._normalizeCenter(jt);var zt=re.project(St),Qt=re.project(jt).sub(zt),Zt=G.curve,Vt=Math.max(re.width,re.height),vn=Vt/pt,bn=Qt.mag();if("minZoom"in G){var On=o.clamp(Math.min(G.minZoom,fe,Ue),re.minZoom,re.maxZoom),Dn=Vt/re.zoomScale(On-fe);Zt=Math.sqrt(Dn/bn*2)}var Yn=Zt*Zt;function ir(vr){var Cr=(vn*vn-Vt*Vt+(vr?-1:1)*Yn*Yn*bn*bn)/(2*(vr?vn:Vt)*Yn*bn);return Math.log(Math.sqrt(Cr*Cr+1)-Cr)}function gr(vr){return(Math.exp(vr)-Math.exp(-vr))/2}function Jn(vr){return(Math.exp(vr)+Math.exp(-vr))/2}var pr=ir(0),wr=function(vr){return Jn(pr)/Jn(pr+Zt*vr)},Or=function(vr){return Vt*((Jn(pr)*(gr(Cr=pr+Zt*vr)/Jn(Cr))-gr(pr))/Yn)/bn;var Cr},nr=(ir(1)-pr)/Zt;if(Math.abs(bn)<1e-6||!isFinite(nr)){if(Math.abs(Vt-vn)<1e-6)return this.easeTo(G,C);var hr=vn<Vt?-1:1;nr=Math.abs(Math.log(vn/Vt))/Zt,Or=function(){return 0},wr=function(vr){return Math.exp(hr*Zt*vr)}}if("duration"in G)G.duration=+G.duration;else{var Mr="screenSpeed"in G?+G.screenSpeed/Zt:+G.speed;G.duration=1e3*nr/Mr}return G.maxDuration&&G.duration>G.maxDuration&&(G.duration=0),this._zooming=!0,this._rotating=ye!==He,this._pitching=tt!==Ce,this._padding=!re.isPaddingEqual(ct),this._prepareEase(C,!1),this._ease(function(vr){var Cr=vr*nr,Dr=1/wr(Cr);re.zoom=vr===1?Ue:fe+re.scaleZoom(Dr),H._rotating&&(re.bearing=o.number(ye,He,vr)),H._pitching&&(re.pitch=o.number(Ce,tt,vr)),H._padding&&(re.interpolatePadding(De,ct,vr),Lt=re.centerPoint.add(kt));var qr=vr===1?jt:re.unproject(zt.add(Qt.mult(Or(Cr))).mult(Dr));re.setLocationAtPoint(re.renderWorldCopies?qr.wrap():qr,Lt),H._fireMoveEvents(C)},function(){return H._afterEase(C)},G),this},W.prototype.isEasing=function(){return!!this._easeFrameId},W.prototype.stop=function(){return this._stop()},W.prototype._stop=function(G,C){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var H=this._onEaseEnd;delete this._onEaseEnd,H.call(this,C)}if(!G){var Q=this.handlers;Q&&Q.stop(!1)}return this},W.prototype._ease=function(G,C,H){H.animate===!1||H.duration===0?(G(1),C()):(this._easeStart=o.browser.now(),this._easeOptions=H,this._onEaseFrame=G,this._onEaseEnd=C,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},W.prototype._renderFrameCallback=function(){var G=Math.min((o.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(G)),G<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},W.prototype._normalizeBearing=function(G,C){G=o.wrap(G,-180,180);var H=Math.abs(G-C);return Math.abs(G-360-C)<H&&(G-=360),Math.abs(G+360-C)<H&&(G+=360),G},W.prototype._normalizeCenter=function(G){var C=this.transform;if(C.renderWorldCopies&&!C.lngRange){var H=G.lng-C.center.lng;G.lng+=H>180?-360:H<-180?360:0}},W}(o.Evented),va=function(N){N===void 0&&(N={}),this.options=N,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};va.prototype.getDefaultPosition=function(){return"bottom-right"},va.prototype.onAdd=function(N){var W=this.options&&this.options.compact;return this._map=N,this._container=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=_.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=_.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),W&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),W===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},va.prototype.onRemove=function(){_.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},va.prototype._setElementTitle=function(N,W){var G=this._map._getUIString("AttributionControl."+W);N.title=G,N.setAttribute("aria-label",G)},va.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},va.prototype._updateEditLink=function(){var N=this._editLink;N||(N=this._editLink=this._container.querySelector(".mapbox-improve-map"));var W=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(N){var G=W.reduce(function(C,H,Q){return H.value&&(C+=H.key+"="+H.value+(Q<W.length-1?"&":"")),C},"?");N.href=o.config.FEEDBACK_URL+"/"+G+(this._map._hash?this._map._hash.getHashString(!0):""),N.rel="noopener nofollow",this._setElementTitle(N,"MapFeedback")}},va.prototype._updateData=function(N){!N||N.sourceDataType!=="metadata"&&N.sourceDataType!=="visibility"&&N.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},va.prototype._updateAttributions=function(){if(this._map.style){var N=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?N=N.concat(this.options.customAttribution.map(function(fe){return typeof fe!="string"?"":fe})):typeof this.options.customAttribution=="string"&&N.push(this.options.customAttribution)),this._map.style.stylesheet){var W=this._map.style.stylesheet;this.styleOwner=W.owner,this.styleId=W.id}var G=this._map.style.sourceCaches;for(var C in G){var H=G[C];if(H.used){var Q=H.getSource();Q.attribution&&N.indexOf(Q.attribution)<0&&N.push(Q.attribution)}}N.sort(function(fe,ye){return fe.length-ye.length});var re=(N=N.filter(function(fe,ye){for(var Ce=ye+1;Ce<N.length;Ce++)if(N[Ce].indexOf(fe)>=0)return!1;return!0})).join(" | ");re!==this._attribHTML&&(this._attribHTML=re,N.length?(this._innerContainer.innerHTML=re,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},va.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var uo=function(){o.bindAll(["_updateLogo"],this),o.bindAll(["_updateCompact"],this)};uo.prototype.onAdd=function(N){this._map=N,this._container=_.create("div","mapboxgl-ctrl");var W=_.create("a","mapboxgl-ctrl-logo");return W.target="_blank",W.rel="noopener nofollow",W.href="https://www.mapbox.com/",W.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),W.setAttribute("rel","noopener nofollow"),this._container.appendChild(W),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},uo.prototype.onRemove=function(){_.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},uo.prototype.getDefaultPosition=function(){return"bottom-left"},uo.prototype._updateLogo=function(N){N&&N.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},uo.prototype._logoRequired=function(){if(this._map.style){var N=this._map.style.sourceCaches;for(var W in N)if(N[W].getSource().mapbox_logo)return!0;return!1}},uo.prototype._updateCompact=function(){var N=this._container.children;if(N.length){var W=N[0];this._map.getCanvasContainer().offsetWidth<250?W.classList.add("mapboxgl-compact"):W.classList.remove("mapboxgl-compact")}};var ma=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ma.prototype.add=function(N){var W=++this._id;return this._queue.push({callback:N,id:W,cancelled:!1}),W},ma.prototype.remove=function(N){for(var W=this._currentlyRunning,G=0,C=W?this._queue.concat(W):this._queue;G<C.length;G+=1){var H=C[G];if(H.id===N)return void(H.cancelled=!0)}},ma.prototype.run=function(N){N===void 0&&(N=0);var W=this._currentlyRunning=this._queue;this._queue=[];for(var G=0,C=W;G<C.length;G+=1){var H=C[G];if(!H.cancelled&&(H.callback(N),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ma.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ws={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ts=o.window.HTMLImageElement,ya=o.window.HTMLElement,Xr=o.window.ImageBitmap,co=60,us={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:co,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Ka=function(N){function W(C){var H=this;if((C=o.extend({},us,C)).minZoom!=null&&C.maxZoom!=null&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(C.minPitch!=null&&C.maxPitch!=null&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(C.minPitch!=null&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(C.maxPitch!=null&&C.maxPitch>co)throw new Error("maxPitch must be less than or equal to 60");var Q=new Qr(C.minZoom,C.maxZoom,C.minPitch,C.maxPitch,C.renderWorldCopies);if(N.call(this,Q,C),this._interactive=C.interactive,this._maxTileCacheSize=C.maxTileCacheSize,this._failIfMajorPerformanceCaveat=C.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=C.preserveDrawingBuffer,this._antialias=C.antialias,this._trackResize=C.trackResize,this._bearingSnap=C.bearingSnap,this._refreshExpiredTiles=C.refreshExpiredTiles,this._fadeDuration=C.fadeDuration,this._crossSourceCollisions=C.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=C.collectResourceTiming,this._renderTaskQueue=new ma,this._controls=[],this._mapId=o.uniqueId(),this._locale=o.extend({},ws,C.locale),this._clickTolerance=C.clickTolerance,this._requestManager=new o.RequestManager(C.transformRequest,C.accessToken),typeof C.container=="string"){if(this._container=o.window.document.getElementById(C.container),!this._container)throw new Error("Container '"+C.container+"' not found.")}else{if(!(C.container instanceof ya))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(C.maxBounds&&this.setMaxBounds(C.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return H._update(!1)}),this.on("moveend",function(){return H._update(!1)}),this.on("zoom",function(){return H._update(!0)}),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Kr(this,C);var re=typeof C.hash=="string"&&C.hash||void 0;this._hash=C.hash&&new La(re).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:C.center,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch}),C.bounds&&(this.resize(),this.fitBounds(C.bounds,o.extend({},C.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=C.localIdeographFontFamily,C.style&&this.setStyle(C.style,{localIdeographFontFamily:C.localIdeographFontFamily}),C.attributionControl&&this.addControl(new va({customAttribution:C.customAttribution})),this.addControl(new uo,C.logoPosition),this.on("style.load",function(){H.transform.unmodified&&H.jumpTo(H.style.stylesheet)}),this.on("data",function(fe){H._update(fe.dataType==="style"),H.fire(new o.Event(fe.dataType+"data",fe))}),this.on("dataloading",function(fe){H.fire(new o.Event(fe.dataType+"dataloading",fe))})}N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W;var G={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return W.prototype._getMapId=function(){return this._mapId},W.prototype.addControl=function(C,H){if(H===void 0&&(H=C.getDefaultPosition?C.getDefaultPosition():"top-right"),!C||!C.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Q=C.onAdd(this);this._controls.push(C);var re=this._controlPositions[H];return H.indexOf("bottom")!==-1?re.insertBefore(Q,re.firstChild):re.appendChild(Q),this},W.prototype.removeControl=function(C){if(!C||!C.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var H=this._controls.indexOf(C);return H>-1&&this._controls.splice(H,1),C.onRemove(this),this},W.prototype.hasControl=function(C){return this._controls.indexOf(C)>-1},W.prototype.resize=function(C){var H=this._containerDimensions(),Q=H[0],re=H[1];this._resizeCanvas(Q,re),this.transform.resize(Q,re),this.painter.resize(Q,re);var fe=!this._moving;return fe&&(this.stop(),this.fire(new o.Event("movestart",C)).fire(new o.Event("move",C))),this.fire(new o.Event("resize",C)),fe&&this.fire(new o.Event("moveend",C)),this},W.prototype.getBounds=function(){return this.transform.getBounds()},W.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},W.prototype.setMaxBounds=function(C){return this.transform.setMaxBounds(o.LngLatBounds.convert(C)),this._update()},W.prototype.setMinZoom=function(C){if((C=C??-2)>=-2&&C<=this.transform.maxZoom)return this.transform.minZoom=C,this._update(),this.getZoom()<C&&this.setZoom(C),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},W.prototype.getMinZoom=function(){return this.transform.minZoom},W.prototype.setMaxZoom=function(C){if((C=C??22)>=this.transform.minZoom)return this.transform.maxZoom=C,this._update(),this.getZoom()>C&&this.setZoom(C),this;throw new Error("maxZoom must be greater than the current minZoom")},W.prototype.getMaxZoom=function(){return this.transform.maxZoom},W.prototype.setMinPitch=function(C){if((C=C??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(C>=0&&C<=this.transform.maxPitch)return this.transform.minPitch=C,this._update(),this.getPitch()<C&&this.setPitch(C),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},W.prototype.getMinPitch=function(){return this.transform.minPitch},W.prototype.setMaxPitch=function(C){if((C=C??co)>co)throw new Error("maxPitch must be less than or equal to 60");if(C>=this.transform.minPitch)return this.transform.maxPitch=C,this._update(),this.getPitch()>C&&this.setPitch(C),this;throw new Error("maxPitch must be greater than the current minPitch")},W.prototype.getMaxPitch=function(){return this.transform.maxPitch},W.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},W.prototype.setRenderWorldCopies=function(C){return this.transform.renderWorldCopies=C,this._update()},W.prototype.project=function(C){return this.transform.locationPoint(o.LngLat.convert(C))},W.prototype.unproject=function(C){return this.transform.pointLocation(o.Point.convert(C))},W.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},W.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},W.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},W.prototype._createDelegatedListener=function(C,H,Q){var re,fe=this;if(C==="mouseenter"||C==="mouseover"){var ye=!1;return{layer:H,listener:Q,delegates:{mousemove:function(De){var Ue=fe.getLayer(H)?fe.queryRenderedFeatures(De.point,{layers:[H]}):[];Ue.length?ye||(ye=!0,Q.call(fe,new sa(C,fe,De.originalEvent,{features:Ue}))):ye=!1},mouseout:function(){ye=!1}}}}if(C==="mouseleave"||C==="mouseout"){var Ce=!1;return{layer:H,listener:Q,delegates:{mousemove:function(De){(fe.getLayer(H)?fe.queryRenderedFeatures(De.point,{layers:[H]}):[]).length?Ce=!0:Ce&&(Ce=!1,Q.call(fe,new sa(C,fe,De.originalEvent)))},mouseout:function(De){Ce&&(Ce=!1,Q.call(fe,new sa(C,fe,De.originalEvent)))}}}}return{layer:H,listener:Q,delegates:(re={},re[C]=function(De){var Ue=fe.getLayer(H)?fe.queryRenderedFeatures(De.point,{layers:[H]}):[];Ue.length&&(De.features=Ue,Q.call(fe,De),delete De.features)},re)}},W.prototype.on=function(C,H,Q){if(Q===void 0)return N.prototype.on.call(this,C,H);var re=this._createDelegatedListener(C,H,Q);for(var fe in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[C]=this._delegatedListeners[C]||[],this._delegatedListeners[C].push(re),re.delegates)this.on(fe,re.delegates[fe]);return this},W.prototype.once=function(C,H,Q){if(Q===void 0)return N.prototype.once.call(this,C,H);var re=this._createDelegatedListener(C,H,Q);for(var fe in re.delegates)this.once(fe,re.delegates[fe]);return this},W.prototype.off=function(C,H,Q){var re=this;return Q===void 0?N.prototype.off.call(this,C,H):(this._delegatedListeners&&this._delegatedListeners[C]&&function(fe){for(var ye=fe[C],Ce=0;Ce<ye.length;Ce++){var De=ye[Ce];if(De.layer===H&&De.listener===Q){for(var Ue in De.delegates)re.off(Ue,De.delegates[Ue]);return ye.splice(Ce,1),re}}}(this._delegatedListeners),this)},W.prototype.queryRenderedFeatures=function(C,H){if(!this.style)return[];var Q;if(H!==void 0||C===void 0||C instanceof o.Point||Array.isArray(C)||(H=C,C=void 0),H=H||{},(C=C||[[0,0],[this.transform.width,this.transform.height]])instanceof o.Point||typeof C[0]=="number")Q=[o.Point.convert(C)];else{var re=o.Point.convert(C[0]),fe=o.Point.convert(C[1]);Q=[re,new o.Point(fe.x,re.y),fe,new o.Point(re.x,fe.y),re]}return this.style.queryRenderedFeatures(Q,H,this.transform)},W.prototype.querySourceFeatures=function(C,H){return this.style.querySourceFeatures(C,H)},W.prototype.setStyle=function(C,H){return(H=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},H)).diff!==!1&&H.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&C?(this._diffStyle(C,H),this):(this._localIdeographFontFamily=H.localIdeographFontFamily,this._updateStyle(C,H))},W.prototype._getUIString=function(C){var H=this._locale[C];if(H==null)throw new Error("Missing UI string '"+C+"'");return H},W.prototype._updateStyle=function(C,H){return this.style&&(this.style.setEventedParent(null),this.style._remove()),C?(this.style=new tr(this,H||{}),this.style.setEventedParent(this,{style:this.style}),typeof C=="string"?this.style.loadURL(C):this.style.loadJSON(C),this):(delete this.style,this)},W.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new tr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},W.prototype._diffStyle=function(C,H){var Q=this;if(typeof C=="string"){var re=this._requestManager.normalizeStyleURL(C),fe=this._requestManager.transformRequest(re,o.ResourceType.Style);o.getJSON(fe,function(ye,Ce){ye?Q.fire(new o.ErrorEvent(ye)):Ce&&Q._updateDiff(Ce,H)})}else typeof C=="object"&&this._updateDiff(C,H)},W.prototype._updateDiff=function(C,H){try{this.style.setState(C)&&this._update(!0)}catch(Q){o.warnOnce("Unable to perform style diff: "+(Q.message||Q.error||Q)+".  Rebuilding the style from scratch."),this._updateStyle(C,H)}},W.prototype.getStyle=function(){if(this.style)return this.style.serialize()},W.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")},W.prototype.addSource=function(C,H){return this._lazyInitEmptyStyle(),this.style.addSource(C,H),this._update(!0)},W.prototype.isSourceLoaded=function(C){var H=this.style&&this.style.sourceCaches[C];if(H!==void 0)return H.loaded();this.fire(new o.ErrorEvent(new Error("There is no source with ID '"+C+"'")))},W.prototype.areTilesLoaded=function(){var C=this.style&&this.style.sourceCaches;for(var H in C){var Q=C[H]._tiles;for(var re in Q){var fe=Q[re];if(fe.state!=="loaded"&&fe.state!=="errored")return!1}}return!0},W.prototype.addSourceType=function(C,H,Q){return this._lazyInitEmptyStyle(),this.style.addSourceType(C,H,Q)},W.prototype.removeSource=function(C){return this.style.removeSource(C),this._update(!0)},W.prototype.getSource=function(C){return this.style.getSource(C)},W.prototype.addImage=function(C,H,Q){Q===void 0&&(Q={});var re=Q.pixelRatio;re===void 0&&(re=1);var fe=Q.sdf;fe===void 0&&(fe=!1);var ye=Q.stretchX,Ce=Q.stretchY,De=Q.content;if(this._lazyInitEmptyStyle(),H instanceof Ts||Xr&&H instanceof Xr){var Ue=o.browser.getImageData(H),He=Ue.width,tt=Ue.height,ct=Ue.data;this.style.addImage(C,{data:new o.RGBAImage({width:He,height:tt},ct),pixelRatio:re,stretchX:ye,stretchY:Ce,content:De,sdf:fe,version:0})}else{if(H.width===void 0||H.height===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var pt=H.width,kt=H.height,Lt=H.data,St=H;this.style.addImage(C,{data:new o.RGBAImage({width:pt,height:kt},new Uint8Array(Lt)),pixelRatio:re,stretchX:ye,stretchY:Ce,content:De,sdf:fe,version:0,userImage:St}),St.onAdd&&St.onAdd(this,C)}},W.prototype.updateImage=function(C,H){var Q=this.style.getImage(C);if(!Q)return this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var re=H instanceof Ts||Xr&&H instanceof Xr?o.browser.getImageData(H):H,fe=re.width,ye=re.height,Ce=re.data;if(fe===void 0||ye===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(fe!==Q.data.width||ye!==Q.data.height)return this.fire(new o.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var De=!(H instanceof Ts||Xr&&H instanceof Xr);Q.data.replace(Ce,De),this.style.updateImage(C,Q)},W.prototype.hasImage=function(C){return C?!!this.style.getImage(C):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)},W.prototype.removeImage=function(C){this.style.removeImage(C)},W.prototype.loadImage=function(C,H){o.getImage(this._requestManager.transformRequest(C,o.ResourceType.Image),H)},W.prototype.listImages=function(){return this.style.listImages()},W.prototype.addLayer=function(C,H){return this._lazyInitEmptyStyle(),this.style.addLayer(C,H),this._update(!0)},W.prototype.moveLayer=function(C,H){return this.style.moveLayer(C,H),this._update(!0)},W.prototype.removeLayer=function(C){return this.style.removeLayer(C),this._update(!0)},W.prototype.getLayer=function(C){return this.style.getLayer(C)},W.prototype.setLayerZoomRange=function(C,H,Q){return this.style.setLayerZoomRange(C,H,Q),this._update(!0)},W.prototype.setFilter=function(C,H,Q){return Q===void 0&&(Q={}),this.style.setFilter(C,H,Q),this._update(!0)},W.prototype.getFilter=function(C){return this.style.getFilter(C)},W.prototype.setPaintProperty=function(C,H,Q,re){return re===void 0&&(re={}),this.style.setPaintProperty(C,H,Q,re),this._update(!0)},W.prototype.getPaintProperty=function(C,H){return this.style.getPaintProperty(C,H)},W.prototype.setLayoutProperty=function(C,H,Q,re){return re===void 0&&(re={}),this.style.setLayoutProperty(C,H,Q,re),this._update(!0)},W.prototype.getLayoutProperty=function(C,H){return this.style.getLayoutProperty(C,H)},W.prototype.setLight=function(C,H){return H===void 0&&(H={}),this._lazyInitEmptyStyle(),this.style.setLight(C,H),this._update(!0)},W.prototype.getLight=function(){return this.style.getLight()},W.prototype.setFeatureState=function(C,H){return this.style.setFeatureState(C,H),this._update()},W.prototype.removeFeatureState=function(C,H){return this.style.removeFeatureState(C,H),this._update()},W.prototype.getFeatureState=function(C){return this.style.getFeatureState(C)},W.prototype.getContainer=function(){return this._container},W.prototype.getCanvasContainer=function(){return this._canvasContainer},W.prototype.getCanvas=function(){return this._canvas},W.prototype._containerDimensions=function(){var C=0,H=0;return this._container&&(C=this._container.clientWidth||400,H=this._container.clientHeight||300),[C,H]},W.prototype._detectMissingCSS=function(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},W.prototype._setupContainer=function(){var C=this._container;C.classList.add("mapboxgl-map"),(this._missingCSSCanary=_.create("div","mapboxgl-canary",C)).style.visibility="hidden",this._detectMissingCSS();var H=this._canvasContainer=_.create("div","mapboxgl-canvas-container",C);this._interactive&&H.classList.add("mapboxgl-interactive"),this._canvas=_.create("canvas","mapboxgl-canvas",H),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var Q=this._containerDimensions();this._resizeCanvas(Q[0],Q[1]);var re=this._controlContainer=_.create("div","mapboxgl-control-container",C),fe=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(ye){fe[ye]=_.create("div","mapboxgl-ctrl-"+ye,re)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},W.prototype._resizeCanvas=function(C,H){var Q=o.browser.devicePixelRatio||1;this._canvas.width=Q*C,this._canvas.height=Q*H,this._canvas.style.width=C+"px",this._canvas.style.height=H+"px"},W.prototype._setupPainter=function(){var C=o.extend({},w.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),H=this._canvas.getContext("webgl",C)||this._canvas.getContext("experimental-webgl",C);H?(this.painter=new ai(H,this.transform),o.webpSupported.testSupport(H)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))},W.prototype._contextLost=function(C){C.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:C}))},W.prototype._contextRestored=function(C){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:C}))},W.prototype._onMapScroll=function(C){if(C.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},W.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},W.prototype._update=function(C){return this.style?(this._styleDirty=this._styleDirty||C,this._sourcesDirty=!0,this.triggerRepaint(),this):this},W.prototype._requestRenderFrame=function(C){return this._update(),this._renderTaskQueue.add(C)},W.prototype._cancelRenderFrame=function(C){this._renderTaskQueue.remove(C)},W.prototype._render=function(C){var H,Q=this,re=0,fe=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(H=fe.createQueryEXT(),fe.beginQueryEXT(fe.TIME_ELAPSED_EXT,H),re=o.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(C),!this._removed){var ye=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Ce=this.transform.zoom,De=o.browser.now();this.style.zoomHistory.update(Ce,De);var Ue=new o.EvaluationParameters(Ce,{now:De,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),He=Ue.crossFadingFactor();He===1&&He===this._crossFadingFactor||(ye=!0,this._crossFadingFactor=He),this.style.update(Ue)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||ye)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var tt=o.browser.now()-re;fe.endQueryEXT(fe.TIME_ELAPSED_EXT,H),setTimeout(function(){var kt=fe.getQueryObjectEXT(H,fe.QUERY_RESULT_EXT)/1e6;fe.deleteQueryEXT(H),Q.fire(new o.Event("gpu-timing-frame",{cpuTime:tt,gpuTime:kt}))},50)}if(this.listens("gpu-timing-layer")){var ct=this.painter.collectGpuTimers();setTimeout(function(){var kt=Q.painter.queryGpuTimers(ct);Q.fire(new o.Event("gpu-timing-layer",{layerTimes:kt}))},50)}var pt=this._sourcesDirty||this._styleDirty||this._placementDirty;return pt||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.Event("idle")),!this._loaded||this._fullyLoaded||pt||(this._fullyLoaded=!0),this}},W.prototype.remove=function(){this._hash&&this._hash.remove();for(var C=0,H=this._controls;C<H.length;C+=1)H[C].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1));var Q=this.painter.context.gl.getExtension("WEBGL_lose_context");Q&&Q.loseContext&&Q.loseContext(),ks(this._canvasContainer),ks(this._controlContainer),ks(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new o.Event("remove"))},W.prototype.triggerRepaint=function(){var C=this;this.style&&!this._frame&&(this._frame=o.browser.frame(function(H){C._frame=null,C._render(H)}))},W.prototype._onWindowOnline=function(){this._update()},W.prototype._onWindowResize=function(C){this._trackResize&&this.resize({originalEvent:C})._update()},G.showTileBoundaries.get=function(){return!!this._showTileBoundaries},G.showTileBoundaries.set=function(C){this._showTileBoundaries!==C&&(this._showTileBoundaries=C,this._update())},G.showPadding.get=function(){return!!this._showPadding},G.showPadding.set=function(C){this._showPadding!==C&&(this._showPadding=C,this._update())},G.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},G.showCollisionBoxes.set=function(C){this._showCollisionBoxes!==C&&(this._showCollisionBoxes=C,C?this.style._generateCollisionBoxes():this._update())},G.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},G.showOverdrawInspector.set=function(C){this._showOverdrawInspector!==C&&(this._showOverdrawInspector=C,this._update())},G.repaint.get=function(){return!!this._repaint},G.repaint.set=function(C){this._repaint!==C&&(this._repaint=C,this.triggerRepaint())},G.vertices.get=function(){return!!this._vertices},G.vertices.set=function(C){this._vertices=C,this._update()},W.prototype._setCacheLimits=function(C,H){o.setCacheLimits(C,H)},G.version.get=function(){return o.version},Object.defineProperties(W.prototype,G),W}(Ki);function ks(N){N.parentNode&&N.parentNode.removeChild(N)}var As={showCompass:!0,showZoom:!0,visualizePitch:!1},$a=function(N){var W=this;this.options=o.extend({},As,N),this._container=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(G){return G.preventDefault()}),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(G){return W._map.zoomIn({},{originalEvent:G})}),_.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(G){return W._map.zoomOut({},{originalEvent:G})}),_.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(G){W.options.visualizePitch?W._map.resetNorthPitch({},{originalEvent:G}):W._map.resetNorth({},{originalEvent:G})}),this._compassIcon=_.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};$a.prototype._updateZoomButtons=function(){var N=this._map.getZoom(),W=N===this._map.getMaxZoom(),G=N===this._map.getMinZoom();this._zoomInButton.disabled=W,this._zoomOutButton.disabled=G,this._zoomInButton.setAttribute("aria-disabled",W.toString()),this._zoomOutButton.setAttribute("aria-disabled",G.toString())},$a.prototype._rotateCompassArrow=function(){var N=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=N},$a.prototype.onAdd=function(N){return this._map=N,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new gi(this._map,this._compass,this.options.visualizePitch)),this._container},$a.prototype.onRemove=function(){_.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},$a.prototype._createButton=function(N,W){var G=_.create("button",N,this._container);return G.type="button",G.addEventListener("click",W),G},$a.prototype._setButtonTitle=function(N,W){var G=this._map._getUIString("NavigationControl."+W);N.title=G,N.setAttribute("aria-label",G)};var gi=function(N,W,G){G===void 0&&(G=!1),this._clickTolerance=10,this.element=W,this.mouseRotate=new wo({clickTolerance:N.dragRotate._mouseRotate._clickTolerance}),this.map=N,G&&(this.mousePitch=new Fa({clickTolerance:N.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),_.addEventListener(W,"mousedown",this.mousedown),_.addEventListener(W,"touchstart",this.touchstart,{passive:!1}),_.addEventListener(W,"touchmove",this.touchmove),_.addEventListener(W,"touchend",this.touchend),_.addEventListener(W,"touchcancel",this.reset)};function cs(N,W,G){if(N=new o.LngLat(N.lng,N.lat),W){var C=new o.LngLat(N.lng-360,N.lat),H=new o.LngLat(N.lng+360,N.lat),Q=G.locationPoint(N).distSqr(W);G.locationPoint(C).distSqr(W)<Q?N=C:G.locationPoint(H).distSqr(W)<Q&&(N=H)}for(;Math.abs(N.lng-G.center.lng)>180;){var re=G.locationPoint(N);if(re.x>=0&&re.y>=0&&re.x<=G.width&&re.y<=G.height)break;N.lng>G.center.lng?N.lng-=360:N.lng+=360}return N}gi.prototype.down=function(N,W){this.mouseRotate.mousedown(N,W),this.mousePitch&&this.mousePitch.mousedown(N,W),_.disableDrag()},gi.prototype.move=function(N,W){var G=this.map,C=this.mouseRotate.mousemoveWindow(N,W);if(C&&C.bearingDelta&&G.setBearing(G.getBearing()+C.bearingDelta),this.mousePitch){var H=this.mousePitch.mousemoveWindow(N,W);H&&H.pitchDelta&&G.setPitch(G.getPitch()+H.pitchDelta)}},gi.prototype.off=function(){var N=this.element;_.removeEventListener(N,"mousedown",this.mousedown),_.removeEventListener(N,"touchstart",this.touchstart,{passive:!1}),_.removeEventListener(N,"touchmove",this.touchmove),_.removeEventListener(N,"touchend",this.touchend),_.removeEventListener(N,"touchcancel",this.reset),this.offTemp()},gi.prototype.offTemp=function(){_.enableDrag(),_.removeEventListener(o.window,"mousemove",this.mousemove),_.removeEventListener(o.window,"mouseup",this.mouseup)},gi.prototype.mousedown=function(N){this.down(o.extend({},N,{ctrlKey:!0,preventDefault:function(){return N.preventDefault()}}),_.mousePos(this.element,N)),_.addEventListener(o.window,"mousemove",this.mousemove),_.addEventListener(o.window,"mouseup",this.mouseup)},gi.prototype.mousemove=function(N){this.move(N,_.mousePos(this.element,N))},gi.prototype.mouseup=function(N){this.mouseRotate.mouseupWindow(N),this.mousePitch&&this.mousePitch.mouseupWindow(N),this.offTemp()},gi.prototype.touchstart=function(N){N.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=_.touchPos(this.element,N.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return N.preventDefault()}},this._startPos))},gi.prototype.touchmove=function(N){N.targetTouches.length!==1?this.reset():(this._lastPos=_.touchPos(this.element,N.targetTouches)[0],this.move({preventDefault:function(){return N.preventDefault()}},this._lastPos))},gi.prototype.touchend=function(N){N.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},gi.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Pr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Br(N,W,G){var C=N.classList;for(var H in Pr)C.remove("mapboxgl-"+G+"-anchor-"+H);C.add("mapboxgl-"+G+"-anchor-"+W)}var Ca,fo=function(N){function W(G,C){if(N.call(this),(G instanceof o.window.HTMLElement||C)&&(G=o.extend({element:G},C)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=G&&G.anchor||"center",this._color=G&&G.color||"#3FB1CE",this._scale=G&&G.scale||1,this._draggable=G&&G.draggable||!1,this._clickTolerance=G&&G.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=G&&G.rotation||0,this._rotationAlignment=G&&G.rotationAlignment||"auto",this._pitchAlignment=G&&G.pitchAlignment&&G.pitchAlignment!=="auto"?G.pitchAlignment:this._rotationAlignment,G&&G.element)this._element=G.element,this._offset=o.Point.convert(G&&G.offset||[0,0]);else{this._defaultMarker=!0,this._element=_.create("div"),this._element.setAttribute("aria-label","Map marker");var H=_.createNS("http://www.w3.org/2000/svg","svg");H.setAttributeNS(null,"display","block"),H.setAttributeNS(null,"height","41px"),H.setAttributeNS(null,"width","27px"),H.setAttributeNS(null,"viewBox","0 0 27 41");var Q=_.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"stroke","none"),Q.setAttributeNS(null,"stroke-width","1"),Q.setAttributeNS(null,"fill","none"),Q.setAttributeNS(null,"fill-rule","evenodd");var re=_.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"fill-rule","nonzero");var fe=_.createNS("http://www.w3.org/2000/svg","g");fe.setAttributeNS(null,"transform","translate(3.0, 29.0)"),fe.setAttributeNS(null,"fill","#000000");for(var ye=0,Ce=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];ye<Ce.length;ye+=1){var De=Ce[ye],Ue=_.createNS("http://www.w3.org/2000/svg","ellipse");Ue.setAttributeNS(null,"opacity","0.04"),Ue.setAttributeNS(null,"cx","10.5"),Ue.setAttributeNS(null,"cy","5.80029008"),Ue.setAttributeNS(null,"rx",De.rx),Ue.setAttributeNS(null,"ry",De.ry),fe.appendChild(Ue)}var He=_.createNS("http://www.w3.org/2000/svg","g");He.setAttributeNS(null,"fill",this._color);var tt=_.createNS("http://www.w3.org/2000/svg","path");tt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),He.appendChild(tt);var ct=_.createNS("http://www.w3.org/2000/svg","g");ct.setAttributeNS(null,"opacity","0.25"),ct.setAttributeNS(null,"fill","#000000");var pt=_.createNS("http://www.w3.org/2000/svg","path");pt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ct.appendChild(pt);var kt=_.createNS("http://www.w3.org/2000/svg","g");kt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),kt.setAttributeNS(null,"fill","#FFFFFF");var Lt=_.createNS("http://www.w3.org/2000/svg","g");Lt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var St=_.createNS("http://www.w3.org/2000/svg","circle");St.setAttributeNS(null,"fill","#000000"),St.setAttributeNS(null,"opacity","0.25"),St.setAttributeNS(null,"cx","5.5"),St.setAttributeNS(null,"cy","5.5"),St.setAttributeNS(null,"r","5.4999962");var jt=_.createNS("http://www.w3.org/2000/svg","circle");jt.setAttributeNS(null,"fill","#FFFFFF"),jt.setAttributeNS(null,"cx","5.5"),jt.setAttributeNS(null,"cy","5.5"),jt.setAttributeNS(null,"r","5.4999962"),Lt.appendChild(St),Lt.appendChild(jt),re.appendChild(fe),re.appendChild(He),re.appendChild(ct),re.appendChild(kt),re.appendChild(Lt),H.appendChild(re),H.setAttributeNS(null,"height",41*this._scale+"px"),H.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(H),this._offset=o.Point.convert(G&&G.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(zt){zt.preventDefault()}),this._element.addEventListener("mousedown",function(zt){zt.preventDefault()}),Br(this._element,this._anchor,"marker"),this._popup=null}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.addTo=function(G){return this.remove(),this._map=G,G.getCanvasContainer().appendChild(this._element),G.on("move",this._update),G.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},W.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),_.remove(this._element),this._popup&&this._popup.remove(),this},W.prototype.getLngLat=function(){return this._lngLat},W.prototype.setLngLat=function(G){return this._lngLat=o.LngLat.convert(G),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},W.prototype.getElement=function(){return this._element},W.prototype.setPopup=function(G){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),G){if(!("offset"in G.options)){var C=13.5,H=Math.sqrt(Math.pow(C,2)/2);G.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[H,-1*(24.6+H)],"bottom-right":[-H,-1*(24.6+H)],left:[C,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=G,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},W.prototype._onKeyPress=function(G){var C=G.code,H=G.charCode||G.keyCode;C!=="Space"&&C!=="Enter"&&H!==32&&H!==13||this.togglePopup()},W.prototype._onMapClick=function(G){var C=G.originalEvent.target,H=this._element;this._popup&&(C===H||H.contains(C))&&this.togglePopup()},W.prototype.getPopup=function(){return this._popup},W.prototype.togglePopup=function(){var G=this._popup;return G?(G.isOpen()?G.remove():G.addTo(this._map),this):this},W.prototype._update=function(G){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=cs(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var C="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?C="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(C="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var H="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?H="rotateX(0deg)":this._pitchAlignment==="map"&&(H="rotateX("+this._map.getPitch()+"deg)"),G&&G.type!=="moveend"||(this._pos=this._pos.round()),_.setTransform(this._element,Pr[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+H+" "+C)}},W.prototype.getOffset=function(){return this._offset},W.prototype.setOffset=function(G){return this._offset=o.Point.convert(G),this._update(),this},W.prototype._onMove=function(G){if(!this._isDragging){var C=this._clickTolerance||this._map._clickTolerance;this._isDragging=G.point.dist(this._pointerdownPos)>=C}this._isDragging&&(this._pos=G.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))},W.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"},W.prototype._addDragHandler=function(G){this._element.contains(G.originalEvent.target)&&(G.preventDefault(),this._positionDelta=G.point.sub(this._pos).add(this._offset),this._pointerdownPos=G.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},W.prototype.setDraggable=function(G){return this._draggable=!!G,this._map&&(G?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},W.prototype.isDraggable=function(){return this._draggable},W.prototype.setRotation=function(G){return this._rotation=G||0,this._update(),this},W.prototype.getRotation=function(){return this._rotation},W.prototype.setRotationAlignment=function(G){return this._rotationAlignment=G||"auto",this._update(),this},W.prototype.getRotationAlignment=function(){return this._rotationAlignment},W.prototype.setPitchAlignment=function(G){return this._pitchAlignment=G&&G!=="auto"?G:this._rotationAlignment,this._update(),this},W.prototype.getPitchAlignment=function(){return this._pitchAlignment},W}(o.Evented),Ao={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Ri=0,ho=!1,oi=function(N){function W(G){N.call(this),this.options=o.extend({},Ao,G),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.onAdd=function(G){return this._map=G,this._container=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),C=this._setupUI,Ca!==void 0?C(Ca):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(function(H){Ca=H.state!=="denied",C(Ca)}):(Ca=!!o.window.navigator.geolocation,C(Ca)),this._container;var C},W.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),_.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ri=0,ho=!1},W.prototype._isOutOfMapMaxBounds=function(G){var C=this._map.getMaxBounds(),H=G.coords;return C&&(H.longitude<C.getWest()||H.longitude>C.getEast()||H.latitude<C.getSouth()||H.latitude>C.getNorth())},W.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},W.prototype._onSuccess=function(G){if(this._map){if(this._isOutOfMapMaxBounds(G))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",G)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=G,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(G),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(G),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",G)),this._finish()}},W.prototype._updateCamera=function(G){var C=new o.LngLat(G.coords.longitude,G.coords.latitude),H=G.coords.accuracy,Q=this._map.getBearing(),re=o.extend({bearing:Q},this.options.fitBoundsOptions);this._map.fitBounds(C.toBounds(H),re,{geolocateSource:!0})},W.prototype._updateMarker=function(G){if(G){var C=new o.LngLat(G.coords.longitude,G.coords.latitude);this._accuracyCircleMarker.setLngLat(C).addTo(this._map),this._userLocationDotMarker.setLngLat(C).addTo(this._map),this._accuracy=G.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},W.prototype._updateCircleRadius=function(){var G=this._map._container.clientHeight/2,C=this._map.unproject([0,G]),H=this._map.unproject([1,G]),Q=C.distanceTo(H),re=Math.ceil(2*this._accuracy/Q);this._circleElement.style.width=re+"px",this._circleElement.style.height=re+"px"},W.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},W.prototype._onError=function(G){if(this._map){if(this.options.trackUserLocation)if(G.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var C=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=C,this._geolocateButton.setAttribute("aria-label",C),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(G.code===3&&ho)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",G)),this._finish()}},W.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},W.prototype._setupUI=function(G){var C=this;if(this._container.addEventListener("contextmenu",function(re){return re.preventDefault()}),this._geolocateButton=_.create("button","mapboxgl-ctrl-geolocate",this._container),_.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",G===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var H=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=H,this._geolocateButton.setAttribute("aria-label",H)}else{var Q=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Q,this._geolocateButton.setAttribute("aria-label",Q)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=_.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new fo(this._dotElement),this._circleElement=_.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new fo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(re){var fe=re.originalEvent&&re.originalEvent.type==="resize";re.geolocateSource||C._watchState!=="ACTIVE_LOCK"||fe||(C._watchState="BACKGROUND",C._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),C._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),C.fire(new o.Event("trackuserlocationend")))})},W.prototype.trigger=function(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ri--,ho=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var G;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Ri>1?(G={maximumAge:6e5,timeout:0},ho=!0):(G=this.options.positionOptions,ho=!1),this._geolocationWatchID=o.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,G)}}else o.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},W.prototype._clearWatch=function(){o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},W}(o.Evented),Ll={maxWidth:100,unit:"metric"},Pa=function(N){this.options=o.extend({},Ll,N),o.bindAll(["_onMove","setUnit"],this)};function ui(N,W,G){var C=G&&G.maxWidth||100,H=N._container.clientHeight/2,Q=N.unproject([0,H]),re=N.unproject([C,H]),fe=Q.distanceTo(re);if(G&&G.unit==="imperial"){var ye=3.2808*fe;ye>5280?bi(W,C,ye/5280,N._getUIString("ScaleControl.Miles")):bi(W,C,ye,N._getUIString("ScaleControl.Feet"))}else G&&G.unit==="nautical"?bi(W,C,fe/1852,N._getUIString("ScaleControl.NauticalMiles")):fe>=1e3?bi(W,C,fe/1e3,N._getUIString("ScaleControl.Kilometers")):bi(W,C,fe,N._getUIString("ScaleControl.Meters"))}function bi(N,W,G,C){var H,Q,re,fe=(H=G,(Q=Math.pow(10,(""+Math.floor(H)).length-1))*((re=H/Q)>=10?10:re>=5?5:re>=3?3:re>=2?2:re>=1?1:function(Ce){var De=Math.pow(10,Math.ceil(-Math.log(Ce)/Math.LN10));return Math.round(Ce*De)/De}(re))),ye=fe/G;N.style.width=W*ye+"px",N.innerHTML=fe+"&nbsp;"+C}Pa.prototype.getDefaultPosition=function(){return"bottom-left"},Pa.prototype._onMove=function(){ui(this._map,this._container,this.options)},Pa.prototype.onAdd=function(N){return this._map=N,this._container=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",N.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Pa.prototype.onRemove=function(){_.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Pa.prototype.setUnit=function(N){this.options.unit=N,ui(this._map,this._container,this.options)};var Ta=function(N){this._fullscreen=!1,N&&N.container&&(N.container instanceof o.window.HTMLElement?this._container=N.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ta.prototype.onAdd=function(N){return this._map=N,this._container||(this._container=this._map.getContainer()),this._controlContainer=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ta.prototype.onRemove=function(){_.remove(this._controlContainer),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ta.prototype._checkFullscreenSupport=function(){return!!(o.window.document.fullscreenEnabled||o.window.document.mozFullScreenEnabled||o.window.document.msFullscreenEnabled||o.window.document.webkitFullscreenEnabled)},Ta.prototype._setupUI=function(){var N=this._fullscreenButton=_.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);_.create("span","mapboxgl-ctrl-icon",N).setAttribute("aria-hidden",!0),N.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ta.prototype._updateTitle=function(){var N=this._getTitle();this._fullscreenButton.setAttribute("aria-label",N),this._fullscreenButton.title=N},Ta.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ta.prototype._isFullscreen=function(){return this._fullscreen},Ta.prototype._changeIcon=function(){(o.window.document.fullscreenElement||o.window.document.mozFullScreenElement||o.window.document.webkitFullscreenElement||o.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ta.prototype._onClickFullscreen=function(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.mozCancelFullScreen?o.window.document.mozCancelFullScreen():o.window.document.msExitFullscreen?o.window.document.msExitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Go={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},vl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Xe=function(N){function W(G){N.call(this),this.options=o.extend(Object.create(Go),G),o.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.addTo=function(G){return this._map&&this.remove(),this._map=G,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new o.Event("open")),this},W.prototype.isOpen=function(){return!!this._map},W.prototype.remove=function(){return this._content&&_.remove(this._content),this._container&&(_.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.Event("close")),this},W.prototype.getLngLat=function(){return this._lngLat},W.prototype.setLngLat=function(G){return this._lngLat=o.LngLat.convert(G),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},W.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},W.prototype.getElement=function(){return this._container},W.prototype.setText=function(G){return this.setDOMContent(o.window.document.createTextNode(G))},W.prototype.setHTML=function(G){var C,H=o.window.document.createDocumentFragment(),Q=o.window.document.createElement("body");for(Q.innerHTML=G;C=Q.firstChild;)H.appendChild(C);return this.setDOMContent(H)},W.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},W.prototype.setMaxWidth=function(G){return this.options.maxWidth=G,this._update(),this},W.prototype.setDOMContent=function(G){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=_.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(G),this._createCloseButton(),this._update(),this._focusFirstElement(),this},W.prototype.addClassName=function(G){this._container&&this._container.classList.add(G)},W.prototype.removeClassName=function(G){this._container&&this._container.classList.remove(G)},W.prototype.setOffset=function(G){return this.options.offset=G,this._update(),this},W.prototype.toggleClassName=function(G){if(this._container)return this._container.classList.toggle(G)},W.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=_.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},W.prototype._onMouseUp=function(G){this._update(G.point)},W.prototype._onMouseMove=function(G){this._update(G.point)},W.prototype._onDrag=function(G){this._update(G.point)},W.prototype._update=function(G){var C=this,H=this._lngLat||this._trackPointer;if(this._map&&H&&this._content&&(this._container||(this._container=_.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=_.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(He){return C._container.classList.add(He)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=cs(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||G)){var Q=this._pos=this._trackPointer&&G?G:this._map.project(this._lngLat),re=this.options.anchor,fe=Qe(this.options.offset);if(!re){var ye,Ce=this._container.offsetWidth,De=this._container.offsetHeight;ye=Q.y+fe.bottom.y<De?["top"]:Q.y>this._map.transform.height-De?["bottom"]:[],Q.x<Ce/2?ye.push("left"):Q.x>this._map.transform.width-Ce/2&&ye.push("right"),re=ye.length===0?"bottom":ye.join("-")}var Ue=Q.add(fe[re]).round();_.setTransform(this._container,Pr[re]+" translate("+Ue.x+"px,"+Ue.y+"px)"),Br(this._container,re,"popup")}},W.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var G=this._container.querySelector(vl);G&&G.focus()}},W.prototype._onClose=function(){this.remove()},W}(o.Evented);function Qe(N){if(N){if(typeof N=="number"){var W=Math.round(Math.sqrt(.5*Math.pow(N,2)));return{center:new o.Point(0,0),top:new o.Point(0,N),"top-left":new o.Point(W,W),"top-right":new o.Point(-W,W),bottom:new o.Point(0,-N),"bottom-left":new o.Point(W,-W),"bottom-right":new o.Point(-W,-W),left:new o.Point(N,0),right:new o.Point(-N,0)}}if(N instanceof o.Point||Array.isArray(N)){var G=o.Point.convert(N);return{center:G,top:G,"top-left":G,"top-right":G,bottom:G,"bottom-left":G,"bottom-right":G,left:G,right:G}}return{center:o.Point.convert(N.center||[0,0]),top:o.Point.convert(N.top||[0,0]),"top-left":o.Point.convert(N["top-left"]||[0,0]),"top-right":o.Point.convert(N["top-right"]||[0,0]),bottom:o.Point.convert(N.bottom||[0,0]),"bottom-left":o.Point.convert(N["bottom-left"]||[0,0]),"bottom-right":o.Point.convert(N["bottom-right"]||[0,0]),left:o.Point.convert(N.left||[0,0]),right:o.Point.convert(N.right||[0,0])}}return Qe(new o.Point(0,0))}var lt={version:o.version,supported:w,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:Ka,NavigationControl:$a,GeolocateControl:oi,AttributionControl:va,ScaleControl:Pa,FullscreenControl:Ta,Popup:Xe,Marker:fo,Style:tr,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,Evented:o.Evented,config:o.config,prewarm:function(){mt().acquire(at)},clearPrewarmedResources:function(){var N=ht;N&&(N.isPreloaded()&&N.numActive()===1?(N.release(at),ht=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(N){o.config.ACCESS_TOKEN=N},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(N){o.config.API_URL=N},get workerCount(){return Ze.workerCount},set workerCount(N){Ze.workerCount=N},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(N){o.config.MAX_PARALLEL_IMAGE_REQUESTS=N},clearStorage:function(N){o.clearTileCache(N)},workerUrl:""};return lt}),M}()},3108:function(Y,O,e){Y.exports=e(26099)},26099:function(Y,O,e){var M=e(64928),A=e(32420),o=e(51160),w=e(76752),_=e(55616),p=e(31264),s=e(47520),n=e(18400),a=e(72512),r=e(76244);function i(l,u){for(var c=u[0],g=u[1],f=1/(u[2]-c),b=1/(u[3]-g),v=new Array(l.length),d=0,m=l.length/2;d<m;d++)v[2*d]=A((l[2*d]-c)*f,0,1),v[2*d+1]=A((l[2*d+1]-g)*b,0,1);return v}Y.exports=function(l,u){u||(u={}),l=s(l,"float64"),u=_(u,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var c=p(u.maxDepth,255),g=p(u.bounds,w(l,2));g[0]===g[2]&&g[2]++,g[1]===g[3]&&g[3]++;var f,b=i(l,g),v=l.length>>>1;u.dtype||(u.dtype="array"),typeof u.dtype=="string"?f=new(a(u.dtype))(v):u.dtype&&(f=u.dtype,Array.isArray(f)&&(f.length=v));for(var d=0;d<v;++d)f[d]=d;var m=[],x=[],y=[],T=[];(function F(U,R,j,Z,B,q){if(!Z.length)return null;var V=m[B]||(m[B]=[]),ne=y[B]||(y[B]=[]),ee=x[B]||(x[B]=[]),$=V.length;if(++B>c||q>1073741824){for(var J=0;J<Z.length;J++)V.push(Z[J]),ne.push(q),ee.push(null,null,null,null);return $}if(V.push(Z[0]),ne.push(q),Z.length<=1)return ee.push(null,null,null,null),$;for(var K=.5*j,te=U+K,ie=R+K,ae=[],se=[],ce=[],de=[],ge=1,ve=Z.length;ge<ve;ge++){var be=Z[ge],me=b[2*be],Se=b[2*be+1];me<te?Se<ie?ae.push(be):se.push(be):Se<ie?ce.push(be):de.push(be)}return q<<=2,ee.push(F(U,R,K,ae,B,q),F(U,ie,K,se,B,q+1),F(te,R,K,ce,B,q+2),F(te,ie,K,de,B,q+3)),$})(0,0,1,f,0,1);for(var h=0,E=0;E<m.length;E++){var k=m[E];if(f.set)f.set(k,h);else for(var L=0,P=k.length;L<P;L++)f[L+h]=k[L];var I=h+m[E].length;T[E]=[h,I],h=I}return f.range=function(){for(var F,U=[],R=arguments.length;R--;)U[R]=arguments[R];if(n(U[U.length-1])){var j=U.pop();U.length||j.x==null&&j.l==null&&j.left==null||(U=[j],F={}),F=_(j,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else F={};U.length||(U=g);var Z,B=o.apply(void 0,U),q=[Math.min(B.x,B.x+B.width),Math.min(B.y,B.y+B.height),Math.max(B.x,B.x+B.width),Math.max(B.y,B.y+B.height)],V=q[0],ne=q[1],ee=q[2],$=q[3],J=i([V,ne,ee,$],g),K=J[0],te=J[1],ie=J[2],ae=J[3],se=p(F.level,m.length);if(F.d!=null&&(typeof F.d=="number"?Z=[F.d,F.d]:F.d.length&&(Z=F.d),se=Math.min(Math.max(Math.ceil(-r(Math.abs(Z[0])/(g[2]-g[0]))),Math.ceil(-r(Math.abs(Z[1])/(g[3]-g[1])))),se)),se=Math.min(se,m.length),F.lod)return function(de,ge,ve,be,me){for(var Se=[],we=0;we<me;we++){var _e=y[we],oe=T[we][0],le=z(de,ge,we),pe=z(ve,be,we),Ee=M.ge(_e,le),Te=M.gt(_e,pe,Ee,_e.length-1);Se[we]=[Ee+oe,Te+oe]}return Se}(K,te,ie,ae,se);var ce=[];return function de(ge,ve,be,me,Se,we){if(Se!==null&&we!==null&&!(K>ge+be||te>ve+be||ie<ge||ae<ve||me>=se||Se===we)){var _e=m[me];we===void 0&&(we=_e.length);for(var oe=Se;oe<we;oe++){var le=_e[oe],pe=l[2*le],Ee=l[2*le+1];pe>=V&&pe<=ee&&Ee>=ne&&Ee<=$&&ce.push(le)}var Te=x[me],Me=Te[4*Se+0],Le=Te[4*Se+1],Ie=Te[4*Se+2],he=Te[4*Se+3],xe=function(Re,Oe){for(var Ve=null,qe=0;Ve===null;)if(Ve=Re[4*Oe+qe],++qe>Re.length)return null;return Ve}(Te,Se+1),ke=.5*be,ze=me+1;de(ge,ve,ke,ze,Me,Le||Ie||he||xe),de(ge,ve+ke,ke,ze,Le,Ie||he||xe),de(ge+ke,ve,ke,ze,Ie,he||xe),de(ge+ke,ve+ke,ke,ze,he,xe)}}(0,0,1,0,0,1),ce},f;function z(F,U,R){for(var j=1,Z=.5,B=.5,q=.5,V=0;V<R;V++)j<<=2,j+=F<Z?U<B?0:1:U<B?2:3,q*=.5,Z+=F<Z?-q:q,B+=U<B?-q:q;return j}}},40440:function(Y,O,e){Object.defineProperty(O,"__esModule",{value:!0});var M=e(3256),A=6378137;function o(p){var s=0;if(p&&p.length>0){s+=Math.abs(w(p[0]));for(var n=1;n<p.length;n++)s-=Math.abs(w(p[n]))}return s}function w(p){var s,n,a,r,i,l,u=0,c=p.length;if(c>2){for(l=0;l<c;l++)l===c-2?(a=c-2,r=c-1,i=0):l===c-1?(a=c-1,r=0,i=1):(a=l,r=l+1,i=l+2),s=p[a],n=p[r],u+=(_(p[i][0])-_(s[0]))*Math.sin(_(n[1]));u=u*A*A/2}return u}function _(p){return p*Math.PI/180}O.default=function(p){return M.geomReduce(p,function(s,n){return s+function(a){var r,i=0;switch(a.type){case"Polygon":return o(a.coordinates);case"MultiPolygon":for(r=0;r<a.coordinates.length;r++)i+=o(a.coordinates[r]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(n)},0)}},46284:function(Y,O){function e(l,u,c){c===void 0&&(c={});var g={type:"Feature"};return(c.id===0||c.id)&&(g.id=c.id),c.bbox&&(g.bbox=c.bbox),g.properties=u||{},g.geometry=l,g}function M(l,u,c){if(c===void 0&&(c={}),!l)throw new Error("coordinates is required");if(!Array.isArray(l))throw new Error("coordinates must be an Array");if(l.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!i(l[0])||!i(l[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:l},u,c)}function A(l,u,c){c===void 0&&(c={});for(var g=0,f=l;g<f.length;g++){var b=f[g];if(b.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var v=0;v<b[b.length-1].length;v++)if(b[b.length-1][v]!==b[0][v])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:l},u,c)}function o(l,u,c){if(c===void 0&&(c={}),l.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:l},u,c)}function w(l,u){u===void 0&&(u={});var c={type:"FeatureCollection"};return u.id&&(c.id=u.id),u.bbox&&(c.bbox=u.bbox),c.features=l,c}function _(l,u,c){return c===void 0&&(c={}),e({type:"MultiLineString",coordinates:l},u,c)}function p(l,u,c){return c===void 0&&(c={}),e({type:"MultiPoint",coordinates:l},u,c)}function s(l,u,c){return c===void 0&&(c={}),e({type:"MultiPolygon",coordinates:l},u,c)}function n(l,u){u===void 0&&(u="kilometers");var c=O.factors[u];if(!c)throw new Error(u+" units is invalid");return l*c}function a(l,u){u===void 0&&(u="kilometers");var c=O.factors[u];if(!c)throw new Error(u+" units is invalid");return l/c}function r(l){return l%(2*Math.PI)*180/Math.PI}function i(l){return!isNaN(l)&&l!==null&&!Array.isArray(l)}Object.defineProperty(O,"__esModule",{value:!0}),O.earthRadius=63710088e-1,O.factors={centimeters:100*O.earthRadius,centimetres:100*O.earthRadius,degrees:O.earthRadius/111325,feet:3.28084*O.earthRadius,inches:39.37*O.earthRadius,kilometers:O.earthRadius/1e3,kilometres:O.earthRadius/1e3,meters:O.earthRadius,metres:O.earthRadius,miles:O.earthRadius/1609.344,millimeters:1e3*O.earthRadius,millimetres:1e3*O.earthRadius,nauticalmiles:O.earthRadius/1852,radians:1,yards:1.0936*O.earthRadius},O.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/O.earthRadius,yards:1.0936133},O.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},O.feature=e,O.geometry=function(l,u,c){switch(l){case"Point":return M(u).geometry;case"LineString":return o(u).geometry;case"Polygon":return A(u).geometry;case"MultiPoint":return p(u).geometry;case"MultiLineString":return _(u).geometry;case"MultiPolygon":return s(u).geometry;default:throw new Error(l+" is invalid")}},O.point=M,O.points=function(l,u,c){return c===void 0&&(c={}),w(l.map(function(g){return M(g,u)}),c)},O.polygon=A,O.polygons=function(l,u,c){return c===void 0&&(c={}),w(l.map(function(g){return A(g,u)}),c)},O.lineString=o,O.lineStrings=function(l,u,c){return c===void 0&&(c={}),w(l.map(function(g){return o(g,u)}),c)},O.featureCollection=w,O.multiLineString=_,O.multiPoint=p,O.multiPolygon=s,O.geometryCollection=function(l,u,c){return c===void 0&&(c={}),e({type:"GeometryCollection",geometries:l},u,c)},O.round=function(l,u){if(u===void 0&&(u=0),u&&!(u>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,u||0);return Math.round(l*c)/c},O.radiansToLength=n,O.lengthToRadians=a,O.lengthToDegrees=function(l,u){return r(a(l,u))},O.bearingToAzimuth=function(l){var u=l%360;return u<0&&(u+=360),u},O.radiansToDegrees=r,O.degreesToRadians=function(l){return l%360*Math.PI/180},O.convertLength=function(l,u,c){if(u===void 0&&(u="kilometers"),c===void 0&&(c="kilometers"),!(l>=0))throw new Error("length must be a positive number");return n(a(l,u),c)},O.convertArea=function(l,u,c){if(u===void 0&&(u="meters"),c===void 0&&(c="kilometers"),!(l>=0))throw new Error("area must be a positive number");var g=O.areaFactors[u];if(!g)throw new Error("invalid original units");var f=O.areaFactors[c];if(!f)throw new Error("invalid final units");return l/g*f},O.isNumber=i,O.isObject=function(l){return!!l&&l.constructor===Object},O.validateBBox=function(l){if(!l)throw new Error("bbox is required");if(!Array.isArray(l))throw new Error("bbox must be an Array");if(l.length!==4&&l.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");l.forEach(function(u){if(!i(u))throw new Error("bbox must only contain numbers")})},O.validateId=function(l){if(!l)throw new Error("id is required");if(["string","number"].indexOf(typeof l)===-1)throw new Error("id must be a number or a string")}},3256:function(Y,O,e){Object.defineProperty(O,"__esModule",{value:!0});var M=e(46284);function A(a,r,i){if(a!==null)for(var l,u,c,g,f,b,v,d,m=0,x=0,y=a.type,T=y==="FeatureCollection",h=y==="Feature",E=T?a.features.length:1,k=0;k<E;k++){f=(d=!!(v=T?a.features[k].geometry:h?a.geometry:a)&&v.type==="GeometryCollection")?v.geometries.length:1;for(var L=0;L<f;L++){var P=0,I=0;if((g=d?v.geometries[L]:v)!==null){b=g.coordinates;var z=g.type;switch(m=!i||z!=="Polygon"&&z!=="MultiPolygon"?0:1,z){case null:break;case"Point":if(r(b,x,k,P,I)===!1)return!1;x++,P++;break;case"LineString":case"MultiPoint":for(l=0;l<b.length;l++){if(r(b[l],x,k,P,I)===!1)return!1;x++,z==="MultiPoint"&&P++}z==="LineString"&&P++;break;case"Polygon":case"MultiLineString":for(l=0;l<b.length;l++){for(u=0;u<b[l].length-m;u++){if(r(b[l][u],x,k,P,I)===!1)return!1;x++}z==="MultiLineString"&&P++,z==="Polygon"&&I++}z==="Polygon"&&P++;break;case"MultiPolygon":for(l=0;l<b.length;l++){for(I=0,u=0;u<b[l].length;u++){for(c=0;c<b[l][u].length-m;c++){if(r(b[l][u][c],x,k,P,I)===!1)return!1;x++}I++}P++}break;case"GeometryCollection":for(l=0;l<g.geometries.length;l++)if(A(g.geometries[l],r,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(a,r){var i;switch(a.type){case"FeatureCollection":for(i=0;i<a.features.length&&r(a.features[i].properties,i)!==!1;i++);break;case"Feature":r(a.properties,0)}}function w(a,r){if(a.type==="Feature")r(a,0);else if(a.type==="FeatureCollection")for(var i=0;i<a.features.length&&r(a.features[i],i)!==!1;i++);}function _(a,r){var i,l,u,c,g,f,b,v,d,m,x=0,y=a.type==="FeatureCollection",T=a.type==="Feature",h=y?a.features.length:1;for(i=0;i<h;i++){for(f=y?a.features[i].geometry:T?a.geometry:a,v=y?a.features[i].properties:T?a.properties:{},d=y?a.features[i].bbox:T?a.bbox:void 0,m=y?a.features[i].id:T?a.id:void 0,g=(b=!!f&&f.type==="GeometryCollection")?f.geometries.length:1,u=0;u<g;u++)if((c=b?f.geometries[u]:f)!==null)switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(c,x,v,d,m)===!1)return!1;break;case"GeometryCollection":for(l=0;l<c.geometries.length;l++)if(r(c.geometries[l],x,v,d,m)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,x,v,d,m)===!1)return!1;x++}}function p(a,r){_(a,function(i,l,u,c,g){var f,b=i===null?null:i.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return r(M.feature(i,u,{bbox:c,id:g}),l,0)!==!1&&void 0}switch(b){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon"}for(var v=0;v<i.coordinates.length;v++){var d={type:f,coordinates:i.coordinates[v]};if(r(M.feature(d,u),l,v)===!1)return!1}})}function s(a,r){p(a,function(i,l,u){var c=0;if(i.geometry){var g=i.geometry.type;if(g!=="Point"&&g!=="MultiPoint"){var f,b=0,v=0,d=0;return A(i,function(m,x,y,T,h){if(f===void 0||l>b||T>v||h>d)return f=m,b=l,v=T,d=h,void(c=0);var E=M.lineString([f,m],i.properties);if(r(E,l,u,h,c)===!1)return!1;c++,f=m})!==!1&&void 0}}})}function n(a,r){if(!a)throw new Error("geojson is required");p(a,function(i,l,u){if(i.geometry!==null){var c=i.geometry.type,g=i.geometry.coordinates;switch(c){case"LineString":if(r(i,l,u,0,0)===!1)return!1;break;case"Polygon":for(var f=0;f<g.length;f++)if(r(M.lineString(g[f],i.properties),l,u,f)===!1)return!1}}})}O.coordEach=A,O.coordReduce=function(a,r,i,l){var u=i;return A(a,function(c,g,f,b,v){u=g===0&&i===void 0?c:r(u,c,g,f,b,v)},l),u},O.propEach=o,O.propReduce=function(a,r,i){var l=i;return o(a,function(u,c){l=c===0&&i===void 0?u:r(l,u,c)}),l},O.featureEach=w,O.featureReduce=function(a,r,i){var l=i;return w(a,function(u,c){l=c===0&&i===void 0?u:r(l,u,c)}),l},O.coordAll=function(a){var r=[];return A(a,function(i){r.push(i)}),r},O.geomEach=_,O.geomReduce=function(a,r,i){var l=i;return _(a,function(u,c,g,f,b){l=c===0&&i===void 0?u:r(l,u,c,g,f,b)}),l},O.flattenEach=p,O.flattenReduce=function(a,r,i){var l=i;return p(a,function(u,c,g){l=c===0&&g===0&&i===void 0?u:r(l,u,c,g)}),l},O.segmentEach=s,O.segmentReduce=function(a,r,i){var l=i,u=!1;return s(a,function(c,g,f,b,v){l=u===!1&&i===void 0?c:r(l,c,g,f,b,v),u=!0}),l},O.lineEach=n,O.lineReduce=function(a,r,i){var l=i;return n(a,function(u,c,g,f){l=c===0&&i===void 0?u:r(l,u,c,g,f)}),l},O.findSegment=function(a,r){if(r=r||{},!M.isObject(r))throw new Error("options is invalid");var i,l=r.featureIndex||0,u=r.multiFeatureIndex||0,c=r.geometryIndex||0,g=r.segmentIndex||0,f=r.properties;switch(a.type){case"FeatureCollection":l<0&&(l=a.features.length+l),f=f||a.features[l].properties,i=a.features[l].geometry;break;case"Feature":f=f||a.properties,i=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=a;break;default:throw new Error("geojson is invalid")}if(i===null)return null;var b=i.coordinates;switch(i.type){case"Point":case"MultiPoint":return null;case"LineString":return g<0&&(g=b.length+g-1),M.lineString([b[g],b[g+1]],f,r);case"Polygon":return c<0&&(c=b.length+c),g<0&&(g=b[c].length+g-1),M.lineString([b[c][g],b[c][g+1]],f,r);case"MultiLineString":return u<0&&(u=b.length+u),g<0&&(g=b[u].length+g-1),M.lineString([b[u][g],b[u][g+1]],f,r);case"MultiPolygon":return u<0&&(u=b.length+u),c<0&&(c=b[u].length+c),g<0&&(g=b[u][c].length-g-1),M.lineString([b[u][c][g],b[u][c][g+1]],f,r)}throw new Error("geojson is invalid")},O.findPoint=function(a,r){if(r=r||{},!M.isObject(r))throw new Error("options is invalid");var i,l=r.featureIndex||0,u=r.multiFeatureIndex||0,c=r.geometryIndex||0,g=r.coordIndex||0,f=r.properties;switch(a.type){case"FeatureCollection":l<0&&(l=a.features.length+l),f=f||a.features[l].properties,i=a.features[l].geometry;break;case"Feature":f=f||a.properties,i=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=a;break;default:throw new Error("geojson is invalid")}if(i===null)return null;var b=i.coordinates;switch(i.type){case"Point":return M.point(b,f,r);case"MultiPoint":return u<0&&(u=b.length+u),M.point(b[u],f,r);case"LineString":return g<0&&(g=b.length+g),M.point(b[g],f,r);case"Polygon":return c<0&&(c=b.length+c),g<0&&(g=b[c].length+g),M.point(b[c][g],f,r);case"MultiLineString":return u<0&&(u=b.length+u),g<0&&(g=b[u].length+g),M.point(b[u][g],f,r);case"MultiPolygon":return u<0&&(u=b.length+u),c<0&&(c=b[u].length+c),g<0&&(g=b[u][c].length-g),M.point(b[u][c][g],f,r)}throw new Error("geojson is invalid")}},42428:function(Y,O,e){Object.defineProperty(O,"__esModule",{value:!0});var M=e(84880);function A(o){var w=[1/0,1/0,-1/0,-1/0];return M.coordEach(o,function(_){w[0]>_[0]&&(w[0]=_[0]),w[1]>_[1]&&(w[1]=_[1]),w[2]<_[0]&&(w[2]=_[0]),w[3]<_[1]&&(w[3]=_[1])}),w}A.default=A,O.default=A},76796:function(Y,O){function e(l,u,c){c===void 0&&(c={});var g={type:"Feature"};return(c.id===0||c.id)&&(g.id=c.id),c.bbox&&(g.bbox=c.bbox),g.properties=u||{},g.geometry=l,g}function M(l,u,c){if(c===void 0&&(c={}),!l)throw new Error("coordinates is required");if(!Array.isArray(l))throw new Error("coordinates must be an Array");if(l.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!i(l[0])||!i(l[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:l},u,c)}function A(l,u,c){c===void 0&&(c={});for(var g=0,f=l;g<f.length;g++){var b=f[g];if(b.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var v=0;v<b[b.length-1].length;v++)if(b[b.length-1][v]!==b[0][v])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:l},u,c)}function o(l,u,c){if(c===void 0&&(c={}),l.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:l},u,c)}function w(l,u){u===void 0&&(u={});var c={type:"FeatureCollection"};return u.id&&(c.id=u.id),u.bbox&&(c.bbox=u.bbox),c.features=l,c}function _(l,u,c){return c===void 0&&(c={}),e({type:"MultiLineString",coordinates:l},u,c)}function p(l,u,c){return c===void 0&&(c={}),e({type:"MultiPoint",coordinates:l},u,c)}function s(l,u,c){return c===void 0&&(c={}),e({type:"MultiPolygon",coordinates:l},u,c)}function n(l,u){u===void 0&&(u="kilometers");var c=O.factors[u];if(!c)throw new Error(u+" units is invalid");return l*c}function a(l,u){u===void 0&&(u="kilometers");var c=O.factors[u];if(!c)throw new Error(u+" units is invalid");return l/c}function r(l){return l%(2*Math.PI)*180/Math.PI}function i(l){return!isNaN(l)&&l!==null&&!Array.isArray(l)}Object.defineProperty(O,"__esModule",{value:!0}),O.earthRadius=63710088e-1,O.factors={centimeters:100*O.earthRadius,centimetres:100*O.earthRadius,degrees:O.earthRadius/111325,feet:3.28084*O.earthRadius,inches:39.37*O.earthRadius,kilometers:O.earthRadius/1e3,kilometres:O.earthRadius/1e3,meters:O.earthRadius,metres:O.earthRadius,miles:O.earthRadius/1609.344,millimeters:1e3*O.earthRadius,millimetres:1e3*O.earthRadius,nauticalmiles:O.earthRadius/1852,radians:1,yards:1.0936*O.earthRadius},O.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/O.earthRadius,yards:1.0936133},O.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},O.feature=e,O.geometry=function(l,u,c){switch(l){case"Point":return M(u).geometry;case"LineString":return o(u).geometry;case"Polygon":return A(u).geometry;case"MultiPoint":return p(u).geometry;case"MultiLineString":return _(u).geometry;case"MultiPolygon":return s(u).geometry;default:throw new Error(l+" is invalid")}},O.point=M,O.points=function(l,u,c){return c===void 0&&(c={}),w(l.map(function(g){return M(g,u)}),c)},O.polygon=A,O.polygons=function(l,u,c){return c===void 0&&(c={}),w(l.map(function(g){return A(g,u)}),c)},O.lineString=o,O.lineStrings=function(l,u,c){return c===void 0&&(c={}),w(l.map(function(g){return o(g,u)}),c)},O.featureCollection=w,O.multiLineString=_,O.multiPoint=p,O.multiPolygon=s,O.geometryCollection=function(l,u,c){return c===void 0&&(c={}),e({type:"GeometryCollection",geometries:l},u,c)},O.round=function(l,u){if(u===void 0&&(u=0),u&&!(u>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,u||0);return Math.round(l*c)/c},O.radiansToLength=n,O.lengthToRadians=a,O.lengthToDegrees=function(l,u){return r(a(l,u))},O.bearingToAzimuth=function(l){var u=l%360;return u<0&&(u+=360),u},O.radiansToDegrees=r,O.degreesToRadians=function(l){return l%360*Math.PI/180},O.convertLength=function(l,u,c){if(u===void 0&&(u="kilometers"),c===void 0&&(c="kilometers"),!(l>=0))throw new Error("length must be a positive number");return n(a(l,u),c)},O.convertArea=function(l,u,c){if(u===void 0&&(u="meters"),c===void 0&&(c="kilometers"),!(l>=0))throw new Error("area must be a positive number");var g=O.areaFactors[u];if(!g)throw new Error("invalid original units");var f=O.areaFactors[c];if(!f)throw new Error("invalid final units");return l/g*f},O.isNumber=i,O.isObject=function(l){return!!l&&l.constructor===Object},O.validateBBox=function(l){if(!l)throw new Error("bbox is required");if(!Array.isArray(l))throw new Error("bbox must be an Array");if(l.length!==4&&l.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");l.forEach(function(u){if(!i(u))throw new Error("bbox must only contain numbers")})},O.validateId=function(l){if(!l)throw new Error("id is required");if(["string","number"].indexOf(typeof l)===-1)throw new Error("id must be a number or a string")}},84880:function(Y,O,e){Object.defineProperty(O,"__esModule",{value:!0});var M=e(76796);function A(a,r,i){if(a!==null)for(var l,u,c,g,f,b,v,d,m=0,x=0,y=a.type,T=y==="FeatureCollection",h=y==="Feature",E=T?a.features.length:1,k=0;k<E;k++){f=(d=!!(v=T?a.features[k].geometry:h?a.geometry:a)&&v.type==="GeometryCollection")?v.geometries.length:1;for(var L=0;L<f;L++){var P=0,I=0;if((g=d?v.geometries[L]:v)!==null){b=g.coordinates;var z=g.type;switch(m=!i||z!=="Polygon"&&z!=="MultiPolygon"?0:1,z){case null:break;case"Point":if(r(b,x,k,P,I)===!1)return!1;x++,P++;break;case"LineString":case"MultiPoint":for(l=0;l<b.length;l++){if(r(b[l],x,k,P,I)===!1)return!1;x++,z==="MultiPoint"&&P++}z==="LineString"&&P++;break;case"Polygon":case"MultiLineString":for(l=0;l<b.length;l++){for(u=0;u<b[l].length-m;u++){if(r(b[l][u],x,k,P,I)===!1)return!1;x++}z==="MultiLineString"&&P++,z==="Polygon"&&I++}z==="Polygon"&&P++;break;case"MultiPolygon":for(l=0;l<b.length;l++){for(I=0,u=0;u<b[l].length;u++){for(c=0;c<b[l][u].length-m;c++){if(r(b[l][u][c],x,k,P,I)===!1)return!1;x++}I++}P++}break;case"GeometryCollection":for(l=0;l<g.geometries.length;l++)if(A(g.geometries[l],r,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(a,r){var i;switch(a.type){case"FeatureCollection":for(i=0;i<a.features.length&&r(a.features[i].properties,i)!==!1;i++);break;case"Feature":r(a.properties,0)}}function w(a,r){if(a.type==="Feature")r(a,0);else if(a.type==="FeatureCollection")for(var i=0;i<a.features.length&&r(a.features[i],i)!==!1;i++);}function _(a,r){var i,l,u,c,g,f,b,v,d,m,x=0,y=a.type==="FeatureCollection",T=a.type==="Feature",h=y?a.features.length:1;for(i=0;i<h;i++){for(f=y?a.features[i].geometry:T?a.geometry:a,v=y?a.features[i].properties:T?a.properties:{},d=y?a.features[i].bbox:T?a.bbox:void 0,m=y?a.features[i].id:T?a.id:void 0,g=(b=!!f&&f.type==="GeometryCollection")?f.geometries.length:1,u=0;u<g;u++)if((c=b?f.geometries[u]:f)!==null)switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(c,x,v,d,m)===!1)return!1;break;case"GeometryCollection":for(l=0;l<c.geometries.length;l++)if(r(c.geometries[l],x,v,d,m)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,x,v,d,m)===!1)return!1;x++}}function p(a,r){_(a,function(i,l,u,c,g){var f,b=i===null?null:i.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return r(M.feature(i,u,{bbox:c,id:g}),l,0)!==!1&&void 0}switch(b){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon"}for(var v=0;v<i.coordinates.length;v++){var d={type:f,coordinates:i.coordinates[v]};if(r(M.feature(d,u),l,v)===!1)return!1}})}function s(a,r){p(a,function(i,l,u){var c=0;if(i.geometry){var g=i.geometry.type;if(g!=="Point"&&g!=="MultiPoint"){var f,b=0,v=0,d=0;return A(i,function(m,x,y,T,h){if(f===void 0||l>b||T>v||h>d)return f=m,b=l,v=T,d=h,void(c=0);var E=M.lineString([f,m],i.properties);if(r(E,l,u,h,c)===!1)return!1;c++,f=m})!==!1&&void 0}}})}function n(a,r){if(!a)throw new Error("geojson is required");p(a,function(i,l,u){if(i.geometry!==null){var c=i.geometry.type,g=i.geometry.coordinates;switch(c){case"LineString":if(r(i,l,u,0,0)===!1)return!1;break;case"Polygon":for(var f=0;f<g.length;f++)if(r(M.lineString(g[f],i.properties),l,u,f)===!1)return!1}}})}O.coordEach=A,O.coordReduce=function(a,r,i,l){var u=i;return A(a,function(c,g,f,b,v){u=g===0&&i===void 0?c:r(u,c,g,f,b,v)},l),u},O.propEach=o,O.propReduce=function(a,r,i){var l=i;return o(a,function(u,c){l=c===0&&i===void 0?u:r(l,u,c)}),l},O.featureEach=w,O.featureReduce=function(a,r,i){var l=i;return w(a,function(u,c){l=c===0&&i===void 0?u:r(l,u,c)}),l},O.coordAll=function(a){var r=[];return A(a,function(i){r.push(i)}),r},O.geomEach=_,O.geomReduce=function(a,r,i){var l=i;return _(a,function(u,c,g,f,b){l=c===0&&i===void 0?u:r(l,u,c,g,f,b)}),l},O.flattenEach=p,O.flattenReduce=function(a,r,i){var l=i;return p(a,function(u,c,g){l=c===0&&g===0&&i===void 0?u:r(l,u,c,g)}),l},O.segmentEach=s,O.segmentReduce=function(a,r,i){var l=i,u=!1;return s(a,function(c,g,f,b,v){l=u===!1&&i===void 0?c:r(l,c,g,f,b,v),u=!0}),l},O.lineEach=n,O.lineReduce=function(a,r,i){var l=i;return n(a,function(u,c,g,f){l=c===0&&i===void 0?u:r(l,u,c,g,f)}),l},O.findSegment=function(a,r){if(r=r||{},!M.isObject(r))throw new Error("options is invalid");var i,l=r.featureIndex||0,u=r.multiFeatureIndex||0,c=r.geometryIndex||0,g=r.segmentIndex||0,f=r.properties;switch(a.type){case"FeatureCollection":l<0&&(l=a.features.length+l),f=f||a.features[l].properties,i=a.features[l].geometry;break;case"Feature":f=f||a.properties,i=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=a;break;default:throw new Error("geojson is invalid")}if(i===null)return null;var b=i.coordinates;switch(i.type){case"Point":case"MultiPoint":return null;case"LineString":return g<0&&(g=b.length+g-1),M.lineString([b[g],b[g+1]],f,r);case"Polygon":return c<0&&(c=b.length+c),g<0&&(g=b[c].length+g-1),M.lineString([b[c][g],b[c][g+1]],f,r);case"MultiLineString":return u<0&&(u=b.length+u),g<0&&(g=b[u].length+g-1),M.lineString([b[u][g],b[u][g+1]],f,r);case"MultiPolygon":return u<0&&(u=b.length+u),c<0&&(c=b[u].length+c),g<0&&(g=b[u][c].length-g-1),M.lineString([b[u][c][g],b[u][c][g+1]],f,r)}throw new Error("geojson is invalid")},O.findPoint=function(a,r){if(r=r||{},!M.isObject(r))throw new Error("options is invalid");var i,l=r.featureIndex||0,u=r.multiFeatureIndex||0,c=r.geometryIndex||0,g=r.coordIndex||0,f=r.properties;switch(a.type){case"FeatureCollection":l<0&&(l=a.features.length+l),f=f||a.features[l].properties,i=a.features[l].geometry;break;case"Feature":f=f||a.properties,i=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=a;break;default:throw new Error("geojson is invalid")}if(i===null)return null;var b=i.coordinates;switch(i.type){case"Point":return M.point(b,f,r);case"MultiPoint":return u<0&&(u=b.length+u),M.point(b[u],f,r);case"LineString":return g<0&&(g=b.length+g),M.point(b[g],f,r);case"Polygon":return c<0&&(c=b.length+c),g<0&&(g=b[c].length+g),M.point(b[c][g],f,r);case"MultiLineString":return u<0&&(u=b.length+u),g<0&&(g=b[u].length+g),M.point(b[u][g],f,r);case"MultiPolygon":return u<0&&(u=b.length+u),c<0&&(c=b[u].length+c),g<0&&(g=b[u][c].length-g),M.point(b[u][c][g],f,r)}throw new Error("geojson is invalid")}},77844:function(Y,O,e){Object.defineProperty(O,"__esModule",{value:!0});var M=e(43752),A=e(49840);O.default=function(o,w){w===void 0&&(w={});var _=0,p=0,s=0;return M.coordEach(o,function(n){_+=n[0],p+=n[1],s++}),A.point([_/s,p/s],w.properties)}},49840:function(Y,O){function e(l,u,c){c===void 0&&(c={});var g={type:"Feature"};return(c.id===0||c.id)&&(g.id=c.id),c.bbox&&(g.bbox=c.bbox),g.properties=u||{},g.geometry=l,g}function M(l,u,c){return c===void 0&&(c={}),e({type:"Point",coordinates:l},u,c)}function A(l,u,c){c===void 0&&(c={});for(var g=0,f=l;g<f.length;g++){var b=f[g];if(b.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var v=0;v<b[b.length-1].length;v++)if(b[b.length-1][v]!==b[0][v])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:l},u,c)}function o(l,u,c){if(c===void 0&&(c={}),l.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:l},u,c)}function w(l,u){u===void 0&&(u={});var c={type:"FeatureCollection"};return u.id&&(c.id=u.id),u.bbox&&(c.bbox=u.bbox),c.features=l,c}function _(l,u,c){return c===void 0&&(c={}),e({type:"MultiLineString",coordinates:l},u,c)}function p(l,u,c){return c===void 0&&(c={}),e({type:"MultiPoint",coordinates:l},u,c)}function s(l,u,c){return c===void 0&&(c={}),e({type:"MultiPolygon",coordinates:l},u,c)}function n(l,u){u===void 0&&(u="kilometers");var c=O.factors[u];if(!c)throw new Error(u+" units is invalid");return l*c}function a(l,u){u===void 0&&(u="kilometers");var c=O.factors[u];if(!c)throw new Error(u+" units is invalid");return l/c}function r(l){return l%(2*Math.PI)*180/Math.PI}function i(l){return!isNaN(l)&&l!==null&&!Array.isArray(l)&&!/^\s*$/.test(l)}Object.defineProperty(O,"__esModule",{value:!0}),O.earthRadius=63710088e-1,O.factors={centimeters:100*O.earthRadius,centimetres:100*O.earthRadius,degrees:O.earthRadius/111325,feet:3.28084*O.earthRadius,inches:39.37*O.earthRadius,kilometers:O.earthRadius/1e3,kilometres:O.earthRadius/1e3,meters:O.earthRadius,metres:O.earthRadius,miles:O.earthRadius/1609.344,millimeters:1e3*O.earthRadius,millimetres:1e3*O.earthRadius,nauticalmiles:O.earthRadius/1852,radians:1,yards:O.earthRadius/1.0936},O.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/O.earthRadius,yards:.91441111923921},O.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},O.feature=e,O.geometry=function(l,u,c){switch(l){case"Point":return M(u).geometry;case"LineString":return o(u).geometry;case"Polygon":return A(u).geometry;case"MultiPoint":return p(u).geometry;case"MultiLineString":return _(u).geometry;case"MultiPolygon":return s(u).geometry;default:throw new Error(l+" is invalid")}},O.point=M,O.points=function(l,u,c){return c===void 0&&(c={}),w(l.map(function(g){return M(g,u)}),c)},O.polygon=A,O.polygons=function(l,u,c){return c===void 0&&(c={}),w(l.map(function(g){return A(g,u)}),c)},O.lineString=o,O.lineStrings=function(l,u,c){return c===void 0&&(c={}),w(l.map(function(g){return o(g,u)}),c)},O.featureCollection=w,O.multiLineString=_,O.multiPoint=p,O.multiPolygon=s,O.geometryCollection=function(l,u,c){return c===void 0&&(c={}),e({type:"GeometryCollection",geometries:l},u,c)},O.round=function(l,u){if(u===void 0&&(u=0),u&&!(u>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,u||0);return Math.round(l*c)/c},O.radiansToLength=n,O.lengthToRadians=a,O.lengthToDegrees=function(l,u){return r(a(l,u))},O.bearingToAzimuth=function(l){var u=l%360;return u<0&&(u+=360),u},O.radiansToDegrees=r,O.degreesToRadians=function(l){return l%360*Math.PI/180},O.convertLength=function(l,u,c){if(u===void 0&&(u="kilometers"),c===void 0&&(c="kilometers"),!(l>=0))throw new Error("length must be a positive number");return n(a(l,u),c)},O.convertArea=function(l,u,c){if(u===void 0&&(u="meters"),c===void 0&&(c="kilometers"),!(l>=0))throw new Error("area must be a positive number");var g=O.areaFactors[u];if(!g)throw new Error("invalid original units");var f=O.areaFactors[c];if(!f)throw new Error("invalid final units");return l/g*f},O.isNumber=i,O.isObject=function(l){return!!l&&l.constructor===Object},O.validateBBox=function(l){if(!l)throw new Error("bbox is required");if(!Array.isArray(l))throw new Error("bbox must be an Array");if(l.length!==4&&l.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");l.forEach(function(u){if(!i(u))throw new Error("bbox must only contain numbers")})},O.validateId=function(l){if(!l)throw new Error("id is required");if(["string","number"].indexOf(typeof l)===-1)throw new Error("id must be a number or a string")},O.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},O.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},O.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},O.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},O.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},O.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},O.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},43752:function(Y,O,e){Object.defineProperty(O,"__esModule",{value:!0});var M=e(49840);function A(a,r,i){if(a!==null)for(var l,u,c,g,f,b,v,d,m=0,x=0,y=a.type,T=y==="FeatureCollection",h=y==="Feature",E=T?a.features.length:1,k=0;k<E;k++){f=(d=!!(v=T?a.features[k].geometry:h?a.geometry:a)&&v.type==="GeometryCollection")?v.geometries.length:1;for(var L=0;L<f;L++){var P=0,I=0;if((g=d?v.geometries[L]:v)!==null){b=g.coordinates;var z=g.type;switch(m=!i||z!=="Polygon"&&z!=="MultiPolygon"?0:1,z){case null:break;case"Point":if(r(b,x,k,P,I)===!1)return!1;x++,P++;break;case"LineString":case"MultiPoint":for(l=0;l<b.length;l++){if(r(b[l],x,k,P,I)===!1)return!1;x++,z==="MultiPoint"&&P++}z==="LineString"&&P++;break;case"Polygon":case"MultiLineString":for(l=0;l<b.length;l++){for(u=0;u<b[l].length-m;u++){if(r(b[l][u],x,k,P,I)===!1)return!1;x++}z==="MultiLineString"&&P++,z==="Polygon"&&I++}z==="Polygon"&&P++;break;case"MultiPolygon":for(l=0;l<b.length;l++){for(I=0,u=0;u<b[l].length;u++){for(c=0;c<b[l][u].length-m;c++){if(r(b[l][u][c],x,k,P,I)===!1)return!1;x++}I++}P++}break;case"GeometryCollection":for(l=0;l<g.geometries.length;l++)if(A(g.geometries[l],r,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(a,r){var i;switch(a.type){case"FeatureCollection":for(i=0;i<a.features.length&&r(a.features[i].properties,i)!==!1;i++);break;case"Feature":r(a.properties,0)}}function w(a,r){if(a.type==="Feature")r(a,0);else if(a.type==="FeatureCollection")for(var i=0;i<a.features.length&&r(a.features[i],i)!==!1;i++);}function _(a,r){var i,l,u,c,g,f,b,v,d,m,x=0,y=a.type==="FeatureCollection",T=a.type==="Feature",h=y?a.features.length:1;for(i=0;i<h;i++){for(f=y?a.features[i].geometry:T?a.geometry:a,v=y?a.features[i].properties:T?a.properties:{},d=y?a.features[i].bbox:T?a.bbox:void 0,m=y?a.features[i].id:T?a.id:void 0,g=(b=!!f&&f.type==="GeometryCollection")?f.geometries.length:1,u=0;u<g;u++)if((c=b?f.geometries[u]:f)!==null)switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(c,x,v,d,m)===!1)return!1;break;case"GeometryCollection":for(l=0;l<c.geometries.length;l++)if(r(c.geometries[l],x,v,d,m)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,x,v,d,m)===!1)return!1;x++}}function p(a,r){_(a,function(i,l,u,c,g){var f,b=i===null?null:i.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return r(M.feature(i,u,{bbox:c,id:g}),l,0)!==!1&&void 0}switch(b){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon"}for(var v=0;v<i.coordinates.length;v++){var d={type:f,coordinates:i.coordinates[v]};if(r(M.feature(d,u),l,v)===!1)return!1}})}function s(a,r){p(a,function(i,l,u){var c=0;if(i.geometry){var g=i.geometry.type;if(g!=="Point"&&g!=="MultiPoint"){var f,b=0,v=0,d=0;return A(i,function(m,x,y,T,h){if(f===void 0||l>b||T>v||h>d)return f=m,b=l,v=T,d=h,void(c=0);var E=M.lineString([f,m],i.properties);if(r(E,l,u,h,c)===!1)return!1;c++,f=m})!==!1&&void 0}}})}function n(a,r){if(!a)throw new Error("geojson is required");p(a,function(i,l,u){if(i.geometry!==null){var c=i.geometry.type,g=i.geometry.coordinates;switch(c){case"LineString":if(r(i,l,u,0,0)===!1)return!1;break;case"Polygon":for(var f=0;f<g.length;f++)if(r(M.lineString(g[f],i.properties),l,u,f)===!1)return!1}}})}O.coordEach=A,O.coordReduce=function(a,r,i,l){var u=i;return A(a,function(c,g,f,b,v){u=g===0&&i===void 0?c:r(u,c,g,f,b,v)},l),u},O.propEach=o,O.propReduce=function(a,r,i){var l=i;return o(a,function(u,c){l=c===0&&i===void 0?u:r(l,u,c)}),l},O.featureEach=w,O.featureReduce=function(a,r,i){var l=i;return w(a,function(u,c){l=c===0&&i===void 0?u:r(l,u,c)}),l},O.coordAll=function(a){var r=[];return A(a,function(i){r.push(i)}),r},O.geomEach=_,O.geomReduce=function(a,r,i){var l=i;return _(a,function(u,c,g,f,b){l=c===0&&i===void 0?u:r(l,u,c,g,f,b)}),l},O.flattenEach=p,O.flattenReduce=function(a,r,i){var l=i;return p(a,function(u,c,g){l=c===0&&g===0&&i===void 0?u:r(l,u,c,g)}),l},O.segmentEach=s,O.segmentReduce=function(a,r,i){var l=i,u=!1;return s(a,function(c,g,f,b,v){l=u===!1&&i===void 0?c:r(l,c,g,f,b,v),u=!0}),l},O.lineEach=n,O.lineReduce=function(a,r,i){var l=i;return n(a,function(u,c,g,f){l=c===0&&i===void 0?u:r(l,u,c,g,f)}),l},O.findSegment=function(a,r){if(r=r||{},!M.isObject(r))throw new Error("options is invalid");var i,l=r.featureIndex||0,u=r.multiFeatureIndex||0,c=r.geometryIndex||0,g=r.segmentIndex||0,f=r.properties;switch(a.type){case"FeatureCollection":l<0&&(l=a.features.length+l),f=f||a.features[l].properties,i=a.features[l].geometry;break;case"Feature":f=f||a.properties,i=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=a;break;default:throw new Error("geojson is invalid")}if(i===null)return null;var b=i.coordinates;switch(i.type){case"Point":case"MultiPoint":return null;case"LineString":return g<0&&(g=b.length+g-1),M.lineString([b[g],b[g+1]],f,r);case"Polygon":return c<0&&(c=b.length+c),g<0&&(g=b[c].length+g-1),M.lineString([b[c][g],b[c][g+1]],f,r);case"MultiLineString":return u<0&&(u=b.length+u),g<0&&(g=b[u].length+g-1),M.lineString([b[u][g],b[u][g+1]],f,r);case"MultiPolygon":return u<0&&(u=b.length+u),c<0&&(c=b[u].length+c),g<0&&(g=b[u][c].length-g-1),M.lineString([b[u][c][g],b[u][c][g+1]],f,r)}throw new Error("geojson is invalid")},O.findPoint=function(a,r){if(r=r||{},!M.isObject(r))throw new Error("options is invalid");var i,l=r.featureIndex||0,u=r.multiFeatureIndex||0,c=r.geometryIndex||0,g=r.coordIndex||0,f=r.properties;switch(a.type){case"FeatureCollection":l<0&&(l=a.features.length+l),f=f||a.features[l].properties,i=a.features[l].geometry;break;case"Feature":f=f||a.properties,i=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=a;break;default:throw new Error("geojson is invalid")}if(i===null)return null;var b=i.coordinates;switch(i.type){case"Point":return M.point(b,f,r);case"MultiPoint":return u<0&&(u=b.length+u),M.point(b[u],f,r);case"LineString":return g<0&&(g=b.length+g),M.point(b[g],f,r);case"Polygon":return c<0&&(c=b.length+c),g<0&&(g=b[c].length+g),M.point(b[c][g],f,r);case"MultiLineString":return u<0&&(u=b.length+u),g<0&&(g=b[u].length+g),M.point(b[u][g],f,r);case"MultiPolygon":return u<0&&(u=b.length+u),c<0&&(c=b[u].length+c),g<0&&(g=b[u][c].length-g),M.point(b[u][c][g],f,r)}throw new Error("geojson is invalid")}},49972:function(Y){Y.exports=function(O){var e=0,M=0,A=0,o=0;return O.map(function(w){var _=(w=w.slice())[0],p=_.toUpperCase();if(_!=p)switch(w[0]=p,_){case"a":w[6]+=A,w[7]+=o;break;case"v":w[1]+=o;break;case"h":w[1]+=A;break;default:for(var s=1;s<w.length;)w[s++]+=A,w[s++]+=o}switch(p){case"Z":A=e,o=M;break;case"H":A=w[1];break;case"V":o=w[1];break;case"M":A=e=w[1],o=M=w[2];break;default:A=w[w.length-2],o=w[w.length-1]}return w})}},76752:function(Y){Y.exports=function(O,e){if(!O||O.length==null)throw Error("Argument should be an array");e=e==null?1:Math.floor(e);for(var M=Array(2*e),A=0;A<e;A++){for(var o=-1/0,w=1/0,_=A,p=O.length;_<p;_+=e)O[_]>o&&(o=O[_]),O[_]<w&&(w=O[_]);M[A]=w,M[e+A]=o}return M}},10272:function(Y){Y.exports=function(O,e,M){if(typeof Array.prototype.findIndex=="function")return O.findIndex(e,M);if(typeof e!="function")throw new TypeError("predicate must be a function");var A=Object(O),o=A.length;if(o===0)return-1;for(var w=0;w<o;w++)if(e.call(M,A[w],w,A))return w;return-1}},71152:function(Y,O,e){var M=e(76752);Y.exports=function(A,o,w){if(!A||A.length==null)throw Error("Argument should be an array");o==null&&(o=1),w==null&&(w=M(A,o));for(var _=0;_<o;_++){var p=w[o+_],s=w[_],n=_,a=A.length;if(p===1/0&&s===-1/0)for(n=_;n<a;n+=o)A[n]=A[n]===p?1:A[n]===s?0:.5;else if(p===1/0)for(n=_;n<a;n+=o)A[n]=A[n]===p?1:0;else if(s===-1/0)for(n=_;n<a;n+=o)A[n]=A[n]===s?0:1;else{var r=p-s;for(n=_;n<a;n+=o)isNaN(A[n])||(A[n]=r===0?.5:(A[n]-s)/r)}}return A}},67752:function(Y){Y.exports=function(O,e){var M=typeof O=="number",A=typeof e=="number";M&&!A?(e=O,O=0):M||A||(O=0,e=0);var o=(e|=0)-(O|=0);if(o<0)throw new Error("array length must be positive");for(var w=new Array(o),_=0,p=O;_<o;_++,p++)w[_]=p;return w}},45408:function(Y,O,e){var M=e(4168);function A(R){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},A(R)}var o,w,_=e(86832).codes,p=_.ERR_AMBIGUOUS_ARGUMENT,s=_.ERR_INVALID_ARG_TYPE,n=_.ERR_INVALID_ARG_VALUE,a=_.ERR_INVALID_RETURN_VALUE,r=_.ERR_MISSING_ARGS,i=e(26144),l=e(35840).inspect,u=e(35840).types,c=u.isPromise,g=u.isRegExp,f=Object.assign?Object.assign:e(60964).assign,b=Object.is?Object.is:e(39896);function v(){var R=e(25116);o=R.isDeepEqual,w=R.isDeepStrictEqual}var d=!1,m=Y.exports=h,x={};function y(R){throw R.message instanceof Error?R.message:new i(R)}function T(R,j,Z,B){if(!Z){var q=!1;if(j===0)q=!0,B="No value argument passed to `assert.ok()`";else if(B instanceof Error)throw B;var V=new i({actual:Z,expected:!0,message:B,operator:"==",stackStartFn:R});throw V.generatedMessage=q,V}}function h(){for(var R=arguments.length,j=new Array(R),Z=0;Z<R;Z++)j[Z]=arguments[Z];T.apply(void 0,[h,j.length].concat(j))}m.fail=function R(j,Z,B,q,V){var ne,ee=arguments.length;if(ee===0?ne="Failed":ee===1?(B=j,j=void 0):(d===!1&&(d=!0,(M.emitWarning?M.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),ee===2&&(q="!=")),B instanceof Error)throw B;var $={actual:j,expected:Z,operator:q===void 0?"fail":q,stackStartFn:V||R};B!==void 0&&($.message=B);var J=new i($);throw ne&&(J.message=ne,J.generatedMessage=!0),J},m.AssertionError=i,m.ok=h,m.equal=function R(j,Z,B){if(arguments.length<2)throw new r("actual","expected");j!=Z&&y({actual:j,expected:Z,message:B,operator:"==",stackStartFn:R})},m.notEqual=function R(j,Z,B){if(arguments.length<2)throw new r("actual","expected");j==Z&&y({actual:j,expected:Z,message:B,operator:"!=",stackStartFn:R})},m.deepEqual=function R(j,Z,B){if(arguments.length<2)throw new r("actual","expected");o===void 0&&v(),o(j,Z)||y({actual:j,expected:Z,message:B,operator:"deepEqual",stackStartFn:R})},m.notDeepEqual=function R(j,Z,B){if(arguments.length<2)throw new r("actual","expected");o===void 0&&v(),o(j,Z)&&y({actual:j,expected:Z,message:B,operator:"notDeepEqual",stackStartFn:R})},m.deepStrictEqual=function R(j,Z,B){if(arguments.length<2)throw new r("actual","expected");o===void 0&&v(),w(j,Z)||y({actual:j,expected:Z,message:B,operator:"deepStrictEqual",stackStartFn:R})},m.notDeepStrictEqual=function R(j,Z,B){if(arguments.length<2)throw new r("actual","expected");o===void 0&&v(),w(j,Z)&&y({actual:j,expected:Z,message:B,operator:"notDeepStrictEqual",stackStartFn:R})},m.strictEqual=function R(j,Z,B){if(arguments.length<2)throw new r("actual","expected");b(j,Z)||y({actual:j,expected:Z,message:B,operator:"strictEqual",stackStartFn:R})},m.notStrictEqual=function R(j,Z,B){if(arguments.length<2)throw new r("actual","expected");b(j,Z)&&y({actual:j,expected:Z,message:B,operator:"notStrictEqual",stackStartFn:R})};var E=function R(j,Z,B){var q=this;(function(V,ne){if(!(V instanceof ne))throw new TypeError("Cannot call a class as a function")})(this,R),Z.forEach(function(V){V in j&&(B!==void 0&&typeof B[V]=="string"&&g(j[V])&&j[V].test(B[V])?q[V]=B[V]:q[V]=j[V])})};function k(R,j,Z,B){if(typeof j!="function"){if(g(j))return j.test(R);if(arguments.length===2)throw new s("expected",["Function","RegExp"],j);if(A(R)!=="object"||R===null){var q=new i({actual:R,expected:j,message:Z,operator:"deepStrictEqual",stackStartFn:B});throw q.operator=B.name,q}var V=Object.keys(j);if(j instanceof Error)V.push("name","message");else if(V.length===0)throw new n("error",j,"may not be an empty object");return o===void 0&&v(),V.forEach(function(ne){typeof R[ne]=="string"&&g(j[ne])&&j[ne].test(R[ne])||function(ee,$,J,K,te,ie){if(!(J in ee)||!w(ee[J],$[J])){if(!K){var ae=new E(ee,te),se=new E($,te,ee),ce=new i({actual:ae,expected:se,operator:"deepStrictEqual",stackStartFn:ie});throw ce.actual=ee,ce.expected=$,ce.operator=ie.name,ce}y({actual:ee,expected:$,message:K,operator:ie.name,stackStartFn:ie})}}(R,j,ne,Z,V,B)}),!0}return j.prototype!==void 0&&R instanceof j||!Error.isPrototypeOf(j)&&j.call({},R)===!0}function L(R){if(typeof R!="function")throw new s("fn","Function",R);try{R()}catch(j){return j}return x}function P(R){return c(R)||R!==null&&A(R)==="object"&&typeof R.then=="function"&&typeof R.catch=="function"}function I(R){return Promise.resolve().then(function(){var j;if(typeof R=="function"){if(!P(j=R()))throw new a("instance of Promise","promiseFn",j)}else{if(!P(R))throw new s("promiseFn",["Function","Promise"],R);j=R}return Promise.resolve().then(function(){return j}).then(function(){return x}).catch(function(Z){return Z})})}function z(R,j,Z,B){if(typeof Z=="string"){if(arguments.length===4)throw new s("error",["Object","Error","Function","RegExp"],Z);if(A(j)==="object"&&j!==null){if(j.message===Z)throw new p("error/message",'The error message "'.concat(j.message,'" is identical to the message.'))}else if(j===Z)throw new p("error/message",'The error "'.concat(j,'" is identical to the message.'));B=Z,Z=void 0}else if(Z!=null&&A(Z)!=="object"&&typeof Z!="function")throw new s("error",["Object","Error","Function","RegExp"],Z);if(j===x){var q="";Z&&Z.name&&(q+=" (".concat(Z.name,")")),q+=B?": ".concat(B):".";var V=R.name==="rejects"?"rejection":"exception";y({actual:void 0,expected:Z,operator:R.name,message:"Missing expected ".concat(V).concat(q),stackStartFn:R})}if(Z&&!k(j,Z,B,R))throw j}function F(R,j,Z,B){if(j!==x){if(typeof Z=="string"&&(B=Z,Z=void 0),!Z||k(j,Z)){var q=B?": ".concat(B):".",V=R.name==="doesNotReject"?"rejection":"exception";y({actual:j,expected:Z,operator:R.name,message:"Got unwanted ".concat(V).concat(q,`
`)+'Actual message: "'.concat(j&&j.message,'"'),stackStartFn:R})}throw j}}function U(){for(var R=arguments.length,j=new Array(R),Z=0;Z<R;Z++)j[Z]=arguments[Z];T.apply(void 0,[U,j.length].concat(j))}m.throws=function R(j){for(var Z=arguments.length,B=new Array(Z>1?Z-1:0),q=1;q<Z;q++)B[q-1]=arguments[q];z.apply(void 0,[R,L(j)].concat(B))},m.rejects=function R(j){for(var Z=arguments.length,B=new Array(Z>1?Z-1:0),q=1;q<Z;q++)B[q-1]=arguments[q];return I(j).then(function(V){return z.apply(void 0,[R,V].concat(B))})},m.doesNotThrow=function R(j){for(var Z=arguments.length,B=new Array(Z>1?Z-1:0),q=1;q<Z;q++)B[q-1]=arguments[q];F.apply(void 0,[R,L(j)].concat(B))},m.doesNotReject=function R(j){for(var Z=arguments.length,B=new Array(Z>1?Z-1:0),q=1;q<Z;q++)B[q-1]=arguments[q];return I(j).then(function(V){return F.apply(void 0,[R,V].concat(B))})},m.ifError=function R(j){if(j!=null){var Z="ifError got unwanted exception: ";A(j)==="object"&&typeof j.message=="string"?j.message.length===0&&j.constructor?Z+=j.constructor.name:Z+=j.message:Z+=l(j);var B=new i({actual:j,expected:null,operator:"ifError",message:Z,stackStartFn:R}),q=j.stack;if(typeof q=="string"){var V=q.split(`
`);V.shift();for(var ne=B.stack.split(`
`),ee=0;ee<V.length;ee++){var $=ne.indexOf(V[ee]);if($!==-1){ne=ne.slice(0,$);break}}B.stack="".concat(ne.join(`
`),`
`).concat(V.join(`
`))}throw B}},m.strict=f(U,m,{equal:m.strictEqual,deepEqual:m.deepStrictEqual,notEqual:m.notStrictEqual,notDeepEqual:m.notDeepStrictEqual}),m.strict.strict=m.strict},26144:function(Y,O,e){var M=e(4168);function A(y,T,h){return T in y?Object.defineProperty(y,T,{value:h,enumerable:!0,configurable:!0,writable:!0}):y[T]=h,y}function o(y,T){for(var h=0;h<T.length;h++){var E=T[h];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(y,E.key,E)}}function w(y,T){return!T||r(T)!=="object"&&typeof T!="function"?_(y):T}function _(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function p(y){var T=typeof Map=="function"?new Map:void 0;return p=function(h){if(h===null||(E=h,Function.toString.call(E).indexOf("[native code]")===-1))return h;var E;if(typeof h!="function")throw new TypeError("Super expression must either be null or a function");if(T!==void 0){if(T.has(h))return T.get(h);T.set(h,k)}function k(){return s(h,arguments,a(this).constructor)}return k.prototype=Object.create(h.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),n(k,h)},p(y)}function s(y,T,h){return s=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(E,k,L){var P=[null];P.push.apply(P,k);var I=new(Function.bind.apply(E,P));return L&&n(I,L.prototype),I},s.apply(null,arguments)}function n(y,T){return n=Object.setPrototypeOf||function(h,E){return h.__proto__=E,h},n(y,T)}function a(y){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},a(y)}function r(y){return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},r(y)}var i=e(35840).inspect,l=e(86832).codes.ERR_INVALID_ARG_TYPE;function u(y,T,h){return(h===void 0||h>y.length)&&(h=y.length),y.substring(h-T.length,h)===T}var c="",g="",f="",b="",v={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function d(y){var T=Object.keys(y),h=Object.create(Object.getPrototypeOf(y));return T.forEach(function(E){h[E]=y[E]}),Object.defineProperty(h,"message",{value:y.message}),h}function m(y){return i(y,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var x=function(y){function T(k){var L;if(function(ne,ee){if(!(ne instanceof ee))throw new TypeError("Cannot call a class as a function")}(this,T),r(k)!=="object"||k===null)throw new l("options","Object",k);var P=k.message,I=k.operator,z=k.stackStartFn,F=k.actual,U=k.expected,R=Error.stackTraceLimit;if(Error.stackTraceLimit=0,P!=null)L=w(this,a(T).call(this,String(P)));else if(M.stderr&&M.stderr.isTTY&&(M.stderr&&M.stderr.getColorDepth&&M.stderr.getColorDepth()!==1?(c="\x1B[34m",g="\x1B[32m",b="\x1B[39m",f="\x1B[31m"):(c="",g="",b="",f="")),r(F)==="object"&&F!==null&&r(U)==="object"&&U!==null&&"stack"in F&&F instanceof Error&&"stack"in U&&U instanceof Error&&(F=d(F),U=d(U)),I==="deepStrictEqual"||I==="strictEqual")L=w(this,a(T).call(this,function(ne,ee,$){var J="",K="",te=0,ie="",ae=!1,se=m(ne),ce=se.split(`
`),de=m(ee).split(`
`),ge=0,ve="";if($==="strictEqual"&&r(ne)==="object"&&r(ee)==="object"&&ne!==null&&ee!==null&&($="strictEqualObject"),ce.length===1&&de.length===1&&ce[0]!==de[0]){var be=ce[0].length+de[0].length;if(be<=10){if(!(r(ne)==="object"&&ne!==null||r(ee)==="object"&&ee!==null||ne===0&&ee===0))return"".concat(v[$],`

`)+"".concat(ce[0]," !== ").concat(de[0],`
`)}else if($!=="strictEqualObject"&&be<(M.stderr&&M.stderr.isTTY?M.stderr.columns:80)){for(;ce[0][ge]===de[0][ge];)ge++;ge>2&&(ve=`
  `.concat(function(Ie,he){if(he=Math.floor(he),Ie.length==0||he==0)return"";var xe=Ie.length*he;for(he=Math.floor(Math.log(he)/Math.log(2));he;)Ie+=Ie,he--;return Ie+Ie.substring(0,xe-Ie.length)}(" ",ge),"^"),ge=0)}}for(var me=ce[ce.length-1],Se=de[de.length-1];me===Se&&(ge++<2?ie=`
  `.concat(me).concat(ie):J=me,ce.pop(),de.pop(),ce.length!==0&&de.length!==0);)me=ce[ce.length-1],Se=de[de.length-1];var we=Math.max(ce.length,de.length);if(we===0){var _e=se.split(`
`);if(_e.length>30)for(_e[26]="".concat(c,"...").concat(b);_e.length>27;)_e.pop();return"".concat(v.notIdentical,`

`).concat(_e.join(`
`),`
`)}ge>3&&(ie=`
`.concat(c,"...").concat(b).concat(ie),ae=!0),J!==""&&(ie=`
  `.concat(J).concat(ie),J="");var oe=0,le=v[$]+`
`.concat(g,"+ actual").concat(b," ").concat(f,"- expected").concat(b),pe=" ".concat(c,"...").concat(b," Lines skipped");for(ge=0;ge<we;ge++){var Ee=ge-te;if(ce.length<ge+1)Ee>1&&ge>2&&(Ee>4?(K+=`
`.concat(c,"...").concat(b),ae=!0):Ee>3&&(K+=`
  `.concat(de[ge-2]),oe++),K+=`
  `.concat(de[ge-1]),oe++),te=ge,J+=`
`.concat(f,"-").concat(b," ").concat(de[ge]),oe++;else if(de.length<ge+1)Ee>1&&ge>2&&(Ee>4?(K+=`
`.concat(c,"...").concat(b),ae=!0):Ee>3&&(K+=`
  `.concat(ce[ge-2]),oe++),K+=`
  `.concat(ce[ge-1]),oe++),te=ge,K+=`
`.concat(g,"+").concat(b," ").concat(ce[ge]),oe++;else{var Te=de[ge],Me=ce[ge],Le=Me!==Te&&(!u(Me,",")||Me.slice(0,-1)!==Te);Le&&u(Te,",")&&Te.slice(0,-1)===Me&&(Le=!1,Me+=","),Le?(Ee>1&&ge>2&&(Ee>4?(K+=`
`.concat(c,"...").concat(b),ae=!0):Ee>3&&(K+=`
  `.concat(ce[ge-2]),oe++),K+=`
  `.concat(ce[ge-1]),oe++),te=ge,K+=`
`.concat(g,"+").concat(b," ").concat(Me),J+=`
`.concat(f,"-").concat(b," ").concat(Te),oe+=2):(K+=J,J="",Ee!==1&&ge!==0||(K+=`
  `.concat(Me),oe++))}if(oe>20&&ge<we-2)return"".concat(le).concat(pe,`
`).concat(K,`
`).concat(c,"...").concat(b).concat(J,`
`)+"".concat(c,"...").concat(b)}return"".concat(le).concat(ae?pe:"",`
`).concat(K).concat(J).concat(ie).concat(ve)}(F,U,I)));else if(I==="notDeepStrictEqual"||I==="notStrictEqual"){var j=v[I],Z=m(F).split(`
`);if(I==="notStrictEqual"&&r(F)==="object"&&F!==null&&(j=v.notStrictEqualObject),Z.length>30)for(Z[26]="".concat(c,"...").concat(b);Z.length>27;)Z.pop();L=Z.length===1?w(this,a(T).call(this,"".concat(j," ").concat(Z[0]))):w(this,a(T).call(this,"".concat(j,`

`).concat(Z.join(`
`),`
`)))}else{var B=m(F),q="",V=v[I];I==="notDeepEqual"||I==="notEqual"?(B="".concat(v[I],`

`).concat(B)).length>1024&&(B="".concat(B.slice(0,1021),"...")):(q="".concat(m(U)),B.length>512&&(B="".concat(B.slice(0,509),"...")),q.length>512&&(q="".concat(q.slice(0,509),"...")),I==="deepEqual"||I==="equal"?B="".concat(V,`

`).concat(B,`

should equal

`):q=" ".concat(I," ").concat(q)),L=w(this,a(T).call(this,"".concat(B).concat(q)))}return Error.stackTraceLimit=R,L.generatedMessage=!P,Object.defineProperty(_(L),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),L.code="ERR_ASSERTION",L.actual=F,L.expected=U,L.operator=I,Error.captureStackTrace&&Error.captureStackTrace(_(L),z),L.stack,L.name="AssertionError",w(L)}var h,E;return function(k,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(L&&L.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),L&&n(k,L)}(T,y),h=T,E=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:i.custom,value:function(k,L){return i(this,function(P){for(var I=1;I<arguments.length;I++){var z=arguments[I]!=null?arguments[I]:{},F=Object.keys(z);typeof Object.getOwnPropertySymbols=="function"&&(F=F.concat(Object.getOwnPropertySymbols(z).filter(function(U){return Object.getOwnPropertyDescriptor(z,U).enumerable}))),F.forEach(function(U){A(P,U,z[U])})}return P}({},L,{customInspect:!1,depth:0}))}}],E&&o(h.prototype,E),T}(p(Error));Y.exports=x},86832:function(Y,O,e){function M(a){return M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},M(a)}function A(a){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},A(a)}function o(a,r){return o=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i},o(a,r)}var w,_,p={};function s(a,r,i){i||(i=Error);var l=function(u){function c(g,f,b){var v;return function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}(this,c),v=function(d,m){return!m||M(m)!=="object"&&typeof m!="function"?function(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}(d):m}(this,A(c).call(this,function(d,m,x){return typeof r=="string"?r:r(d,m,x)}(g,f,b))),v.code=a,v}return function(g,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(f&&f.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),f&&o(g,f)}(c,u),c}(i);p[a]=l}function n(a,r){if(Array.isArray(a)){var i=a.length;return a=a.map(function(l){return String(l)}),i>2?"one of ".concat(r," ").concat(a.slice(0,i-1).join(", "),", or ")+a[i-1]:i===2?"one of ".concat(r," ").concat(a[0]," or ").concat(a[1]):"of ".concat(r," ").concat(a[0])}return"of ".concat(r," ").concat(String(a))}s("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),s("ERR_INVALID_ARG_TYPE",function(a,r,i){var l,u,c,g,f;if(w===void 0&&(w=e(45408)),w(typeof a=="string","'name' must be a string"),typeof r=="string"&&(u="not ",r.substr(0,4)===u)?(l="must not be",r=r.replace(/^not /,"")):l="must be",function(v,d,m){return(m===void 0||m>v.length)&&(m=v.length),v.substring(m-9,m)===d}(a," argument"))c="The ".concat(a," ").concat(l," ").concat(n(r,"type"));else{var b=(typeof f!="number"&&(f=0),f+1>(g=a).length||g.indexOf(".",f)===-1?"argument":"property");c='The "'.concat(a,'" ').concat(b," ").concat(l," ").concat(n(r,"type"))}return c+". Received type ".concat(M(i))},TypeError),s("ERR_INVALID_ARG_VALUE",function(a,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";_===void 0&&(_=e(35840));var l=_.inspect(r);return l.length>128&&(l="".concat(l.slice(0,128),"...")),"The argument '".concat(a,"' ").concat(i,". Received ").concat(l)},TypeError),s("ERR_INVALID_RETURN_VALUE",function(a,r,i){var l;return l=i&&i.constructor&&i.constructor.name?"instance of ".concat(i.constructor.name):"type ".concat(M(i)),"Expected ".concat(a,' to be returned from the "').concat(r,'"')+" function but got ".concat(l,".")},TypeError),s("ERR_MISSING_ARGS",function(){for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];w===void 0&&(w=e(45408)),w(r.length>0,"At least one arg needs to be specified");var l="The ",u=r.length;switch(r=r.map(function(c){return'"'.concat(c,'"')}),u){case 1:l+="".concat(r[0]," argument");break;case 2:l+="".concat(r[0]," and ").concat(r[1]," arguments");break;default:l+=r.slice(0,u-1).join(", "),l+=", and ".concat(r[u-1]," arguments")}return"".concat(l," must be specified")},TypeError),Y.exports.codes=p},25116:function(Y,O,e){function M(te,ie){return function(ae){if(Array.isArray(ae))return ae}(te)||function(ae,se){var ce=[],de=!0,ge=!1,ve=void 0;try{for(var be,me=ae[Symbol.iterator]();!(de=(be=me.next()).done)&&(ce.push(be.value),!se||ce.length!==se);de=!0);}catch(Se){ge=!0,ve=Se}finally{try{de||me.return==null||me.return()}finally{if(ge)throw ve}}return ce}(te,ie)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function A(te){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ie){return typeof ie}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},A(te)}var o=/a/g.flags!==void 0,w=function(te){var ie=[];return te.forEach(function(ae){return ie.push(ae)}),ie},_=function(te){var ie=[];return te.forEach(function(ae,se){return ie.push([se,ae])}),ie},p=Object.is?Object.is:e(39896),s=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},n=Number.isNaN?Number.isNaN:e(1560);function a(te){return te.call.bind(te)}var r=a(Object.prototype.hasOwnProperty),i=a(Object.prototype.propertyIsEnumerable),l=a(Object.prototype.toString),u=e(35840).types,c=u.isAnyArrayBuffer,g=u.isArrayBufferView,f=u.isDate,b=u.isMap,v=u.isRegExp,d=u.isSet,m=u.isNativeError,x=u.isBoxedPrimitive,y=u.isNumberObject,T=u.isStringObject,h=u.isBooleanObject,E=u.isBigIntObject,k=u.isSymbolObject,L=u.isFloat32Array,P=u.isFloat64Array;function I(te){if(te.length===0||te.length>10)return!0;for(var ie=0;ie<te.length;ie++){var ae=te.charCodeAt(ie);if(ae<48||ae>57)return!0}return te.length===10&&te>=Math.pow(2,32)}function z(te){return Object.keys(te).filter(I).concat(s(te).filter(Object.prototype.propertyIsEnumerable.bind(te)))}function F(te,ie){if(te===ie)return 0;for(var ae=te.length,se=ie.length,ce=0,de=Math.min(ae,se);ce<de;++ce)if(te[ce]!==ie[ce]){ae=te[ce],se=ie[ce];break}return ae<se?-1:se<ae?1:0}var U=0,R=1,j=2,Z=3;function B(te,ie,ae,se){if(te===ie)return te!==0||!ae||p(te,ie);if(ae){if(A(te)!=="object")return typeof te=="number"&&n(te)&&n(ie);if(A(ie)!=="object"||te===null||ie===null||Object.getPrototypeOf(te)!==Object.getPrototypeOf(ie))return!1}else{if(te===null||A(te)!=="object")return(ie===null||A(ie)!=="object")&&te==ie;if(ie===null||A(ie)!=="object")return!1}var ce,de,ge,ve,be=l(te);if(be!==l(ie))return!1;if(Array.isArray(te)){if(te.length!==ie.length)return!1;var me=z(te),Se=z(ie);return me.length===Se.length&&V(te,ie,ae,se,R,me)}if(be==="[object Object]"&&(!b(te)&&b(ie)||!d(te)&&d(ie)))return!1;if(f(te)){if(!f(ie)||Date.prototype.getTime.call(te)!==Date.prototype.getTime.call(ie))return!1}else if(v(te)){if(!v(ie)||(ge=te,ve=ie,!(o?ge.source===ve.source&&ge.flags===ve.flags:RegExp.prototype.toString.call(ge)===RegExp.prototype.toString.call(ve))))return!1}else if(m(te)||te instanceof Error){if(te.message!==ie.message||te.name!==ie.name)return!1}else{if(g(te)){if(ae||!L(te)&&!P(te)){if(!function(oe,le){return oe.byteLength===le.byteLength&&F(new Uint8Array(oe.buffer,oe.byteOffset,oe.byteLength),new Uint8Array(le.buffer,le.byteOffset,le.byteLength))===0}(te,ie))return!1}else if(!function(oe,le){if(oe.byteLength!==le.byteLength)return!1;for(var pe=0;pe<oe.byteLength;pe++)if(oe[pe]!==le[pe])return!1;return!0}(te,ie))return!1;var we=z(te),_e=z(ie);return we.length===_e.length&&V(te,ie,ae,se,U,we)}if(d(te))return!(!d(ie)||te.size!==ie.size)&&V(te,ie,ae,se,j);if(b(te))return!(!b(ie)||te.size!==ie.size)&&V(te,ie,ae,se,Z);if(c(te)){if(de=ie,(ce=te).byteLength!==de.byteLength||F(new Uint8Array(ce),new Uint8Array(de))!==0)return!1}else if(x(te)&&!function(oe,le){return y(oe)?y(le)&&p(Number.prototype.valueOf.call(oe),Number.prototype.valueOf.call(le)):T(oe)?T(le)&&String.prototype.valueOf.call(oe)===String.prototype.valueOf.call(le):h(oe)?h(le)&&Boolean.prototype.valueOf.call(oe)===Boolean.prototype.valueOf.call(le):E(oe)?E(le)&&BigInt.prototype.valueOf.call(oe)===BigInt.prototype.valueOf.call(le):k(le)&&Symbol.prototype.valueOf.call(oe)===Symbol.prototype.valueOf.call(le)}(te,ie))return!1}return V(te,ie,ae,se,U)}function q(te,ie){return ie.filter(function(ae){return i(te,ae)})}function V(te,ie,ae,se,ce,de){if(arguments.length===5){de=Object.keys(te);var ge=Object.keys(ie);if(de.length!==ge.length)return!1}for(var ve=0;ve<de.length;ve++)if(!r(ie,de[ve]))return!1;if(ae&&arguments.length===5){var be=s(te);if(be.length!==0){var me=0;for(ve=0;ve<be.length;ve++){var Se=be[ve];if(i(te,Se)){if(!i(ie,Se))return!1;de.push(Se),me++}else if(i(ie,Se))return!1}var we=s(ie);if(be.length!==we.length&&q(ie,we).length!==me)return!1}else{var _e=s(ie);if(_e.length!==0&&q(ie,_e).length!==0)return!1}}if(de.length===0&&(ce===U||ce===R&&te.length===0||te.size===0))return!0;if(se===void 0)se={val1:new Map,val2:new Map,position:0};else{var oe=se.val1.get(te);if(oe!==void 0){var le=se.val2.get(ie);if(le!==void 0)return oe===le}se.position++}se.val1.set(te,se.position),se.val2.set(ie,se.position);var pe=function(Ee,Te,Me,Le,Ie,he){var xe=0;if(he===j){if(!function(Oe,Ve,qe,Je){for(var ot=null,rt=w(Oe),dt=0;dt<rt.length;dt++){var _t=rt[dt];if(A(_t)==="object"&&_t!==null)ot===null&&(ot=new Set),ot.add(_t);else if(!Ve.has(_t)){if(qe||!$(Oe,Ve,_t))return!1;ot===null&&(ot=new Set),ot.add(_t)}}if(ot!==null){for(var yt=w(Ve),et=0;et<yt.length;et++){var nt=yt[et];if(A(nt)==="object"&&nt!==null){if(!ne(ot,nt,qe,Je))return!1}else if(!qe&&!Oe.has(nt)&&!ne(ot,nt,qe,Je))return!1}return ot.size===0}return!0}(Ee,Te,Me,Ie))return!1}else if(he===Z){if(!function(Oe,Ve,qe,Je){for(var ot=null,rt=_(Oe),dt=0;dt<rt.length;dt++){var _t=M(rt[dt],2),yt=_t[0],et=_t[1];if(A(yt)==="object"&&yt!==null)ot===null&&(ot=new Set),ot.add(yt);else{var nt=Ve.get(yt);if(nt===void 0&&!Ve.has(yt)||!B(et,nt,qe,Je)){if(qe||!J(Oe,Ve,yt,et,Je))return!1;ot===null&&(ot=new Set),ot.add(yt)}}}if(ot!==null){for(var At=_(Ve),Rt=0;Rt<At.length;Rt++){var Ft=M(At[Rt],2),It=(yt=Ft[0],Ft[1]);if(A(yt)==="object"&&yt!==null){if(!K(ot,Oe,yt,It,qe,Je))return!1}else if(!(qe||Oe.has(yt)&&B(Oe.get(yt),It,!1,Je)||K(ot,Oe,yt,It,!1,Je)))return!1}return ot.size===0}return!0}(Ee,Te,Me,Ie))return!1}else if(he===R)for(;xe<Ee.length;xe++){if(!r(Ee,xe)){if(r(Te,xe))return!1;for(var ke=Object.keys(Ee);xe<ke.length;xe++){var ze=ke[xe];if(!r(Te,ze)||!B(Ee[ze],Te[ze],Me,Ie))return!1}return ke.length===Object.keys(Te).length}if(!r(Te,xe)||!B(Ee[xe],Te[xe],Me,Ie))return!1}for(xe=0;xe<Le.length;xe++){var Re=Le[xe];if(!B(Ee[Re],Te[Re],Me,Ie))return!1}return!0}(te,ie,ae,de,se,ce);return se.val1.delete(te),se.val2.delete(ie),pe}function ne(te,ie,ae,se){for(var ce=w(te),de=0;de<ce.length;de++){var ge=ce[de];if(B(ie,ge,ae,se))return te.delete(ge),!0}return!1}function ee(te){switch(A(te)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":te=+te;case"number":if(n(te))return!1}return!0}function $(te,ie,ae){var se=ee(ae);return se??(ie.has(se)&&!te.has(se))}function J(te,ie,ae,se,ce){var de=ee(ae);if(de!=null)return de;var ge=ie.get(de);return!(ge===void 0&&!ie.has(de)||!B(se,ge,!1,ce))&&!te.has(de)&&B(se,ge,!1,ce)}function K(te,ie,ae,se,ce,de){for(var ge=w(te),ve=0;ve<ge.length;ve++){var be=ge[ve];if(B(ae,be,ce,de)&&B(se,ie.get(be),ce,de))return te.delete(be),!0}return!1}Y.exports={isDeepEqual:function(te,ie){return B(te,ie,!1)},isDeepStrictEqual:function(te,ie){return B(te,ie,!0)}}},83160:function(Y,O,e){e.r(O),e.d(O,{decode:function(){return _},encode:function(){return w}});for(var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=typeof Uint8Array>"u"?[]:new Uint8Array(256),o=0;o<64;o++)A[M.charCodeAt(o)]=o;var w=function(p){var s,n=new Uint8Array(p),a=n.length,r="";for(s=0;s<a;s+=3)r+=M[n[s]>>2],r+=M[(3&n[s])<<4|n[s+1]>>4],r+=M[(15&n[s+1])<<2|n[s+2]>>6],r+=M[63&n[s+2]];return a%3==2?r=r.substring(0,r.length-1)+"=":a%3==1&&(r=r.substring(0,r.length-2)+"=="),r},_=function(p){var s,n,a,r,i,l=.75*p.length,u=p.length,c=0;p[p.length-1]==="="&&(l--,p[p.length-2]==="="&&l--);var g=new ArrayBuffer(l),f=new Uint8Array(g);for(s=0;s<u;s+=4)n=A[p.charCodeAt(s)],a=A[p.charCodeAt(s+1)],r=A[p.charCodeAt(s+2)],i=A[p.charCodeAt(s+3)],f[c++]=n<<2|a>>4,f[c++]=(15&a)<<4|r>>2,f[c++]=(3&r)<<6|63&i;return g}},59968:function(Y,O){O.byteLength=function(s){var n=_(s),a=n[0],r=n[1];return 3*(a+r)/4-r},O.toByteArray=function(s){var n,a,r=_(s),i=r[0],l=r[1],u=new A(function(f,b,v){return 3*(b+v)/4-v}(0,i,l)),c=0,g=l>0?i-4:i;for(a=0;a<g;a+=4)n=M[s.charCodeAt(a)]<<18|M[s.charCodeAt(a+1)]<<12|M[s.charCodeAt(a+2)]<<6|M[s.charCodeAt(a+3)],u[c++]=n>>16&255,u[c++]=n>>8&255,u[c++]=255&n;return l===2&&(n=M[s.charCodeAt(a)]<<2|M[s.charCodeAt(a+1)]>>4,u[c++]=255&n),l===1&&(n=M[s.charCodeAt(a)]<<10|M[s.charCodeAt(a+1)]<<4|M[s.charCodeAt(a+2)]>>2,u[c++]=n>>8&255,u[c++]=255&n),u},O.fromByteArray=function(s){for(var n,a=s.length,r=a%3,i=[],l=16383,u=0,c=a-r;u<c;u+=l)i.push(p(s,u,u+l>c?c:u+l));return r===1?(n=s[a-1],i.push(e[n>>2]+e[n<<4&63]+"==")):r===2&&(n=(s[a-2]<<8)+s[a-1],i.push(e[n>>10]+e[n>>4&63]+e[n<<2&63]+"=")),i.join("")};for(var e=[],M=[],A=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=0;w<64;++w)e[w]=o[w],M[o.charCodeAt(w)]=w;function _(s){var n=s.length;if(n%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var a=s.indexOf("=");return a===-1&&(a=n),[a,a===n?0:4-a%4]}function p(s,n,a){for(var r,i,l=[],u=n;u<a;u+=3)r=(s[u]<<16&16711680)+(s[u+1]<<8&65280)+(255&s[u+2]),l.push(e[(i=r)>>18&63]+e[i>>12&63]+e[i>>6&63]+e[63&i]);return l.join("")}M[45]=62,M[95]=63},64928:function(Y){function O(_,p,s,n,a){for(var r=a+1;n<=a;){var i=n+a>>>1,l=_[i];(s!==void 0?s(l,p):l-p)>=0?(r=i,a=i-1):n=i+1}return r}function e(_,p,s,n,a){for(var r=a+1;n<=a;){var i=n+a>>>1,l=_[i];(s!==void 0?s(l,p):l-p)>0?(r=i,a=i-1):n=i+1}return r}function M(_,p,s,n,a){for(var r=n-1;n<=a;){var i=n+a>>>1,l=_[i];(s!==void 0?s(l,p):l-p)<0?(r=i,n=i+1):a=i-1}return r}function A(_,p,s,n,a){for(var r=n-1;n<=a;){var i=n+a>>>1,l=_[i];(s!==void 0?s(l,p):l-p)<=0?(r=i,n=i+1):a=i-1}return r}function o(_,p,s,n,a){for(;n<=a;){var r=n+a>>>1,i=_[r],l=s!==void 0?s(i,p):i-p;if(l===0)return r;l<=0?n=r+1:a=r-1}return-1}function w(_,p,s,n,a,r){return typeof s=="function"?r(_,p,s,n===void 0?0:0|n,a===void 0?_.length-1:0|a):r(_,p,void 0,s===void 0?0:0|s,n===void 0?_.length-1:0|n)}Y.exports={ge:function(_,p,s,n,a){return w(_,p,s,n,a,O)},gt:function(_,p,s,n,a){return w(_,p,s,n,a,e)},lt:function(_,p,s,n,a){return w(_,p,s,n,a,M)},le:function(_,p,s,n,a){return w(_,p,s,n,a,A)},eq:function(_,p,s,n,a){return w(_,p,s,n,a,o)}}},308:function(Y,O){function e(A){var o=32;return(A&=-A)&&o--,65535&A&&(o-=16),16711935&A&&(o-=8),252645135&A&&(o-=4),858993459&A&&(o-=2),1431655765&A&&(o-=1),o}O.INT_BITS=32,O.INT_MAX=2147483647,O.INT_MIN=-2147483648,O.sign=function(A){return(A>0)-(A<0)},O.abs=function(A){var o=A>>31;return(A^o)-o},O.min=function(A,o){return o^(A^o)&-(A<o)},O.max=function(A,o){return A^(A^o)&-(A<o)},O.isPow2=function(A){return!(A&A-1||!A)},O.log2=function(A){var o,w;return o=(A>65535)<<4,o|=w=((A>>>=o)>255)<<3,o|=w=((A>>>=w)>15)<<2,(o|=w=((A>>>=w)>3)<<1)|(A>>>=w)>>1},O.log10=function(A){return A>=1e9?9:A>=1e8?8:A>=1e7?7:A>=1e6?6:A>=1e5?5:A>=1e4?4:A>=1e3?3:A>=100?2:A>=10?1:0},O.popCount=function(A){return 16843009*((A=(858993459&(A-=A>>>1&1431655765))+(A>>>2&858993459))+(A>>>4)&252645135)>>>24},O.countTrailingZeros=e,O.nextPow2=function(A){return A+=A===0,--A,A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,1+(A|=A>>>16)},O.prevPow2=function(A){return A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,(A|=A>>>16)-(A>>>1)},O.parity=function(A){return A^=A>>>16,A^=A>>>8,A^=A>>>4,27030>>>(A&=15)&1};var M=new Array(256);(function(A){for(var o=0;o<256;++o){var w=o,_=o,p=7;for(w>>>=1;w;w>>>=1)_<<=1,_|=1&w,--p;A[o]=_<<p&255}})(M),O.reverse=function(A){return M[255&A]<<24|M[A>>>8&255]<<16|M[A>>>16&255]<<8|M[A>>>24&255]},O.interleave2=function(A,o){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A&=65535)|A<<8))|A<<4))|A<<2))|A<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o&=65535)|o<<8))|o<<4))|o<<2))|o<<1))<<1},O.deinterleave2=function(A,o){return(A=65535&((A=16711935&((A=252645135&((A=858993459&((A=A>>>o&1431655765)|A>>>1))|A>>>2))|A>>>4))|A>>>16))<<16>>16},O.interleave3=function(A,o,w){return A=1227133513&((A=3272356035&((A=251719695&((A=4278190335&((A&=1023)|A<<16))|A<<8))|A<<4))|A<<2),(A|=(o=1227133513&((o=3272356035&((o=251719695&((o=4278190335&((o&=1023)|o<<16))|o<<8))|o<<4))|o<<2))<<1)|(w=1227133513&((w=3272356035&((w=251719695&((w=4278190335&((w&=1023)|w<<16))|w<<8))|w<<4))|w<<2))<<2},O.deinterleave3=function(A,o){return(A=1023&((A=4278190335&((A=251719695&((A=3272356035&((A=A>>>o&1227133513)|A>>>2))|A>>>4))|A>>>8))|A>>>16))<<22>>22},O.nextCombination=function(A){var o=A|A-1;return o+1|(~o&-~o)-1>>>e(A)+1}},29620:function(Y,O,e){var M=e(32420);Y.exports=function(_,p){p||(p={});var s,n,a,r,i,l,u,c,g,f,b,v=p.cutoff==null?.25:p.cutoff,d=p.radius==null?8:p.radius,m=p.channel||0;if(ArrayBuffer.isView(_)||Array.isArray(_)){if(!p.width||!p.height)throw Error("For raw data width and height should be provided by options");s=p.width,n=p.height,r=_,l=p.stride?p.stride:Math.floor(_.length/s/n)}else window.HTMLCanvasElement&&_ instanceof window.HTMLCanvasElement?(u=(c=_).getContext("2d"),s=c.width,n=c.height,r=(g=u.getImageData(0,0,s,n)).data,l=4):window.CanvasRenderingContext2D&&_ instanceof window.CanvasRenderingContext2D?(u=_,s=(c=_.canvas).width,n=c.height,r=(g=u.getImageData(0,0,s,n)).data,l=4):window.ImageData&&_ instanceof window.ImageData&&(g=_,s=_.width,n=_.height,r=g.data,l=4);if(a=Math.max(s,n),window.Uint8ClampedArray&&r instanceof window.Uint8ClampedArray||window.Uint8Array&&r instanceof window.Uint8Array)for(i=r,r=Array(s*n),f=0,b=i.length;f<b;f++)r[f]=i[f*l+m]/255;else if(l!==1)throw Error("Raw data can have only 1 value per pixel");var x=Array(s*n),y=Array(s*n),T=Array(a),h=Array(a),E=Array(a+1),k=Array(a);for(f=0,b=s*n;f<b;f++){var L=r[f];x[f]=L===1?0:L===0?A:Math.pow(Math.max(0,.5-L),2),y[f]=L===1?A:L===0?0:Math.pow(Math.max(0,L-.5),2)}o(x,s,n,T,h,k,E),o(y,s,n,T,h,k,E);var P=window.Float32Array?new Float32Array(s*n):new Array(s*n);for(f=0,b=s*n;f<b;f++)P[f]=M(1-((x[f]-y[f])/d+v),0,1);return P};var A=1e20;function o(_,p,s,n,a,r,i){for(var l=0;l<p;l++){for(var u=0;u<s;u++)n[u]=_[u*p+l];for(w(n,a,r,i,s),u=0;u<s;u++)_[u*p+l]=a[u]}for(u=0;u<s;u++){for(l=0;l<p;l++)n[l]=_[u*p+l];for(w(n,a,r,i,p),l=0;l<p;l++)_[u*p+l]=Math.sqrt(a[l])}}function w(_,p,s,n,a){s[0]=0,n[0]=-A,n[1]=+A;for(var r=1,i=0;r<a;r++){for(var l=(_[r]+r*r-(_[s[i]]+s[i]*s[i]))/(2*r-2*s[i]);l<=n[i];)i--,l=(_[r]+r*r-(_[s[i]]+s[i]*s[i]))/(2*r-2*s[i]);s[++i]=r,n[i]=l,n[i+1]=+A}for(r=0,i=0;r<a;r++){for(;n[i+1]<r;)i++;p[r]=(r-s[i])*(r-s[i])+_[s[i]]}}},99676:function(Y,O,e){var M=e(53664),A=e(57916),o=A(M("String.prototype.indexOf"));Y.exports=function(w,_){var p=M(w,!!_);return typeof p=="function"&&o(w,".prototype.")>-1?A(p):p}},57916:function(Y,O,e){var M=e(8844),A=e(53664),o=e(14500),w=A("%TypeError%"),_=A("%Function.prototype.apply%"),p=A("%Function.prototype.call%"),s=A("%Reflect.apply%",!0)||M.call(p,_),n=A("%Object.defineProperty%",!0),a=A("%Math.max%");if(n)try{n({},"a",{value:1})}catch{n=null}Y.exports=function(i){if(typeof i!="function")throw new w("a function is required");var l=s(M,p,arguments);return o(l,1+a(0,i.length-(arguments.length-1)),!0)};var r=function(){return s(M,_,arguments)};n?n(Y.exports,"apply",{value:r}):Y.exports.apply=r},32420:function(Y){Y.exports=function(O,e,M){return e<M?O<e?e:O>M?M:O:O<M?M:O>e?e:O}},3808:function(Y,O,e){var M=e(32420);function A(o,w){w==null&&(w=!0);var _=o[0],p=o[1],s=o[2],n=o[3];return n==null&&(n=w?1:255),w&&(_*=255,p*=255,s*=255,n*=255),16777216*(_=255&M(_,0,255))+((p=255&M(p,0,255))<<16)+((s=255&M(s,0,255))<<8)+(255&M(n,0,255))}Y.exports=A,Y.exports.to=A,Y.exports.from=function(o,w){var _=(o=+o)>>>24,p=(16711680&o)>>>16,s=(65280&o)>>>8,n=255&o;return w===!1?[_,p,s,n]:[_/255,p/255,s/255,n/255]}},17592:function(Y){Y.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},72160:function(Y,O,e){var M=e(96824),A=e(32420),o=e(72512);Y.exports=function(w,_){_!=="float"&&_||(_="array"),_==="uint"&&(_="uint8"),_==="uint_clamped"&&(_="uint8_clamped");var p=new(o(_))(4),s=_!=="uint8"&&_!=="uint8_clamped";return w.length&&typeof w!="string"||((w=M(w))[0]/=255,w[1]/=255,w[2]/=255),function(n){return n instanceof Uint8Array||n instanceof Uint8ClampedArray||!!(Array.isArray(n)&&(n[0]>1||n[0]===0)&&(n[1]>1||n[1]===0)&&(n[2]>1||n[2]===0)&&(!n[3]||n[3]>1))}(w)?(p[0]=w[0],p[1]=w[1],p[2]=w[2],p[3]=w[3]!=null?w[3]:255,s&&(p[0]/=255,p[1]/=255,p[2]/=255,p[3]/=255),p):(s?(p[0]=w[0],p[1]=w[1],p[2]=w[2],p[3]=w[3]!=null?w[3]:1):(p[0]=A(Math.floor(255*w[0]),0,255),p[1]=A(Math.floor(255*w[1]),0,255),p[2]=A(Math.floor(255*w[2]),0,255),p[3]=w[3]==null?255:A(Math.floor(255*w[3]),0,255)),p)}},81704:function(Y,O,e){var M=e(17592),A=e(58908),o=e(31264);Y.exports=function(_){var p,s,n=[],a=1;if(typeof _=="string")if(M[_])n=M[_].slice(),s="rgb";else if(_==="transparent")a=0,s="rgb",n=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(_)){var r=_.slice(1);a=1,(u=r.length)<=4?(n=[parseInt(r[0]+r[0],16),parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16)],u===4&&(a=parseInt(r[3]+r[3],16)/255)):(n=[parseInt(r[0]+r[1],16),parseInt(r[2]+r[3],16),parseInt(r[4]+r[5],16)],u===8&&(a=parseInt(r[6]+r[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),s="rgb"}else if(p=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(_)){var i=p[1],l=i==="rgb";s=r=i.replace(/a$/,"");var u=r==="cmyk"?4:r==="gray"?1:3;n=p[2].trim().split(/\s*,\s*/).map(function(g,f){if(/%$/.test(g))return f===u?parseFloat(g)/100:r==="rgb"?255*parseFloat(g)/100:parseFloat(g);if(r[f]==="h"){if(/deg$/.test(g))return parseFloat(g);if(w[g]!==void 0)return w[g]}return parseFloat(g)}),i===r&&n.push(1),a=l||n[u]===void 0?1:n[u],n=n.slice(0,u)}else _.length>10&&/[0-9](?:\s|\/)/.test(_)&&(n=_.match(/([0-9]+)/g).map(function(g){return parseFloat(g)}),s=_.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(_))if(A(_)){var c=o(_.r,_.red,_.R,null);c!==null?(s="rgb",n=[c,o(_.g,_.green,_.G),o(_.b,_.blue,_.B)]):(s="hsl",n=[o(_.h,_.hue,_.H),o(_.s,_.saturation,_.S),o(_.l,_.lightness,_.L,_.b,_.brightness)]),a=o(_.a,_.alpha,_.opacity,1),_.opacity!=null&&(a/=100)}else(Array.isArray(_)||e.g.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(_))&&(n=[_[0],_[1],_[2]],s="rgb",a=_.length===4?_[3]:1);else s="rgb",n=[_>>>16,(65280&_)>>>8,255&_];return{space:s,values:n,alpha:a}};var w={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},96824:function(Y,O,e){var M=e(81704),A=e(53576),o=e(32420);Y.exports=function(w){var _,p=M(w);return p.space?((_=Array(3))[0]=o(p.values[0],0,255),_[1]=o(p.values[1],0,255),_[2]=o(p.values[2],0,255),p.space[0]==="h"&&(_=A.rgb(_)),_.push(o(p.alpha,0,1)),_):[]}},53576:function(Y,O,e){var M=e(19336);Y.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(A){var o,w,_,p,s,n=A[0]/360,a=A[1]/100,r=A[2]/100;if(a===0)return[s=255*r,s,s];o=2*r-(w=r<.5?r*(1+a):r+a-r*a),p=[0,0,0];for(var i=0;i<3;i++)(_=n+.3333333333333333*-(i-1))<0?_++:_>1&&_--,s=6*_<1?o+6*(w-o)*_:2*_<1?w:3*_<2?o+(w-o)*(.6666666666666666-_)*6:o,p[i]=255*s;return p}},M.hsl=function(A){var o,w,_=A[0]/255,p=A[1]/255,s=A[2]/255,n=Math.min(_,p,s),a=Math.max(_,p,s),r=a-n;return a===n?o=0:_===a?o=(p-s)/r:p===a?o=2+(s-_)/r:s===a&&(o=4+(_-p)/r),(o=Math.min(60*o,360))<0&&(o+=360),w=(n+a)/2,[o,100*(a===n?0:w<=.5?r/(a+n):r/(2-a-n)),100*w]}},19336:function(Y){Y.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},36116:function(Y){Y.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|)o.?tom(e|)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},42771:function(Y,O,e){Y.exports={parse:e(46416),stringify:e(49395)}},8744:function(Y,O,e){var M=e(30584);Y.exports={isSize:function(A){return/^[\d\.]/.test(A)||A.indexOf("/")!==-1||M.indexOf(A)!==-1}}},46416:function(Y,O,e){var M=e(92384),A=e(68194),o=e(3748),w=e(2904),_=e(47916),p=e(7294),s=e(39956),n=e(8744).isSize;Y.exports=r;var a=r.cache={};function r(l){if(typeof l!="string")throw new Error("Font argument must be a string.");if(a[l])return a[l];if(l==="")throw new Error("Cannot parse an empty string.");if(o.indexOf(l)!==-1)return a[l]={system:l};for(var u,c={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},g=s(l,/\s+/);u=g.shift();){if(A.indexOf(u)!==-1)return["style","variant","weight","stretch"].forEach(function(b){c[b]=u}),a[l]=c;if(_.indexOf(u)===-1)if(u!=="normal"&&u!=="small-caps")if(p.indexOf(u)===-1){if(w.indexOf(u)===-1){if(n(u)){var f=s(u,"/");if(c.size=f[0],f[1]!=null?c.lineHeight=i(f[1]):g[0]==="/"&&(g.shift(),c.lineHeight=i(g.shift())),!g.length)throw new Error("Missing required font-family.");return c.family=s(g.join(" "),/\s*,\s*/).map(M),a[l]=c}throw new Error("Unknown or unsupported font token: "+u)}c.weight=u}else c.stretch=u;else c.variant=u;else c.style=u}throw new Error("Missing required font-size.")}function i(l){var u=parseFloat(l);return u.toString()===l?u:l}},49395:function(Y,O,e){var M=e(55616),A=e(8744).isSize,o=l(e(68194)),w=l(e(3748)),_=l(e(2904)),p=l(e(47916)),s=l(e(7294)),n={normal:1,"small-caps":1},a={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},r="serif";function i(u,c){if(u&&!c[u]&&!o[u])throw Error("Unknown keyword `"+u+"`");return u}function l(u){for(var c={},g=0;g<u.length;g++)c[u[g]]=1;return c}Y.exports=function(u){if((u=M(u,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return u.system&&i(u.system,w),u.system;if(i(u.style,p),i(u.variant,n),i(u.weight,_),i(u.stretch,s),u.size==null&&(u.size="1rem"),typeof u.size=="number"&&(u.size+="px"),!A)throw Error("Bad size value `"+u.size+"`");u.family||(u.family=r),Array.isArray(u.family)&&(u.family.length||(u.family=[r]),u.family=u.family.map(function(g){return a[g]?g:'"'+g+'"'}).join(", "));var c=[];return c.push(u.style),u.variant!==u.style&&c.push(u.variant),u.weight!==u.variant&&u.weight!==u.style&&c.push(u.weight),u.stretch!==u.weight&&u.stretch!==u.variant&&u.stretch!==u.style&&c.push(u.stretch),c.push(u.size+(u.lineHeight==null||u.lineHeight==="normal"||u.lineHeight+""=="1"?"":"/"+u.lineHeight)),c.push(u.family),c.filter(Boolean).join(" ")}},27940:function(Y,O,e){var M,A=e(81680),o=e(18496),w=e(87396),_=e(95920),p=e(50868),s=e(84323),n=Function.prototype.bind,a=Object.defineProperty,r=Object.prototype.hasOwnProperty;M=function(i,l,u){var c,g=o(l)&&w(l.value);return delete(c=_(l)).writable,delete c.value,c.get=function(){return!u.overwriteDefinition&&r.call(this,i)?g:(l.value=n.call(g,u.resolveContext?u.resolveContext(this):this),a(this,i,l),this[i])},c},Y.exports=function(i){var l=p(arguments[1]);return A(l.resolveContext)&&w(l.resolveContext),s(i,function(u,c){return M(c,u,l)})}},21092:function(Y,O,e){var M=e(81680),A=e(85488),o=e(38452),w=e(50868),_=e(71056),p=Y.exports=function(s,n){var a,r,i,l,u;return arguments.length<2||typeof s!="string"?(l=n,n=s,s=null):l=arguments[2],M(s)?(a=_.call(s,"c"),r=_.call(s,"e"),i=_.call(s,"w")):(a=i=!0,r=!1),u={value:n,configurable:a,enumerable:r,writable:i},l?o(w(l),u):u};p.gs=function(s,n,a){var r,i,l,u;return typeof s!="string"?(l=a,a=n,n=s,s=null):l=arguments[3],M(n)?A(n)?M(a)?A(a)||(l=a,a=void 0):a=void 0:(l=n,n=a=void 0):n=void 0,M(s)?(r=_.call(s,"c"),i=_.call(s,"e")):(r=!0,i=!1),u={get:n,set:a,configurable:r,enumerable:i},l?o(w(l),u):u}},84706:function(Y,O,e){function M(i,l){return i<l?-1:i>l?1:i>=l?0:NaN}e.d(O,{XE:function(){return M},kv:function(){return w},mo:function(){return p},Uf:function(){return s},SY:function(){return n},ik:function(){return a},oh:function(){return r}}),(A=M).length===1&&(o=A,A=function(i,l){return M(o(i),l)});var A,o;function w(i,l){var u,c,g=i.length,f=-1;if(l==null){for(;++f<g;)if((u=i[f])!=null&&u>=u)for(c=u;++f<g;)(u=i[f])!=null&&u>c&&(c=u)}else for(;++f<g;)if((u=l(i[f],f,i))!=null&&u>=u)for(c=u;++f<g;)(u=l(i[f],f,i))!=null&&u>c&&(c=u);return c}function _(i){return i===null?NaN:+i}function p(i,l){var u,c=i.length,g=c,f=-1,b=0;if(l==null)for(;++f<c;)isNaN(u=_(i[f]))?--g:b+=u;else for(;++f<c;)isNaN(u=_(l(i[f],f,i)))?--g:b+=u;if(g)return b/g}function s(i){for(var l,u,c,g=i.length,f=-1,b=0;++f<g;)b+=i[f].length;for(u=new Array(b);--g>=0;)for(l=(c=i[g]).length;--l>=0;)u[--b]=c[l];return u}function n(i,l){var u,c,g=i.length,f=-1;if(l==null){for(;++f<g;)if((u=i[f])!=null&&u>=u)for(c=u;++f<g;)(u=i[f])!=null&&c>u&&(c=u)}else for(;++f<g;)if((u=l(i[f],f,i))!=null&&u>=u)for(c=u;++f<g;)(u=l(i[f],f,i))!=null&&c>u&&(c=u);return c}function a(i,l,u){i=+i,l=+l,u=(g=arguments.length)<2?(l=i,i=0,1):g<3?1:+u;for(var c=-1,g=0|Math.max(0,Math.ceil((l-i)/u)),f=new Array(g);++c<g;)f[c]=i+c*u;return f}function r(i,l){var u,c=i.length,g=-1,f=0;if(l==null)for(;++g<c;)(u=+i[g])&&(f+=u);else for(;++g<c;)(u=+l(i[g],g,i))&&(f+=u);return f}},34712:function(Y,O,e){e.d(O,{kH:function(){return w},UJ:function(){return _}});var M="$";function A(){}function o(l,u){var c=new A;if(l instanceof A)l.each(function(d,m){c.set(m,d)});else if(Array.isArray(l)){var g,f=-1,b=l.length;if(u==null)for(;++f<b;)c.set(f,l[f]);else for(;++f<b;)c.set(u(g=l[f],f,l),g)}else if(l)for(var v in l)c.set(v,l[v]);return c}A.prototype=o.prototype={constructor:A,has:function(l){return M+l in this},get:function(l){return this[M+l]},set:function(l,u){return this[M+l]=u,this},remove:function(l){var u=M+l;return u in this&&delete this[u]},clear:function(){for(var l in this)l[0]===M&&delete this[l]},keys:function(){var l=[];for(var u in this)u[0]===M&&l.push(u.slice(1));return l},values:function(){var l=[];for(var u in this)u[0]===M&&l.push(this[u]);return l},entries:function(){var l=[];for(var u in this)u[0]===M&&l.push({key:u.slice(1),value:this[u]});return l},size:function(){var l=0;for(var u in this)u[0]===M&&++l;return l},empty:function(){for(var l in this)if(l[0]===M)return!1;return!0},each:function(l){for(var u in this)u[0]===M&&l(this[u],u.slice(1),this)}};var w=o;function _(){var l,u,c,g=[],f=[];function b(d,m,x,y){if(m>=g.length)return l!=null&&d.sort(l),u!=null?u(d):d;for(var T,h,E,k=-1,L=d.length,P=g[m++],I=w(),z=x();++k<L;)(E=I.get(T=P(h=d[k])+""))?E.push(h):I.set(T,[h]);return I.each(function(F,U){y(z,U,b(F,m,x,y))}),z}function v(d,m){if(++m>g.length)return d;var x,y=f[m-1];return u!=null&&m>=g.length?x=d.entries():(x=[],d.each(function(T,h){x.push({key:h,values:v(T,m)})})),y!=null?x.sort(function(T,h){return y(T.key,h.key)}):x}return c={object:function(d){return b(d,0,p,s)},map:function(d){return b(d,0,n,a)},entries:function(d){return v(b(d,0,n,a),0)},key:function(d){return g.push(d),c},sortKeys:function(d){return f[g.length-1]=d,c},sortValues:function(d){return l=d,c},rollup:function(d){return u=d,c}}}function p(){return{}}function s(l,u,c){l[u]=c}function n(){return w()}function a(l,u,c){l.set(u,c)}function r(){}var i=w.prototype;r.prototype={constructor:r,has:i.has,add:function(l){return this[M+(l+="")]=l,this},remove:i.remove,clear:i.clear,values:i.keys,size:i.size,empty:i.empty,each:i.each}},49812:function(Y,O,e){function M(be,me){var Se;function we(){var _e,oe,le=Se.length,pe=0,Ee=0;for(_e=0;_e<le;++_e)pe+=(oe=Se[_e]).x,Ee+=oe.y;for(pe=pe/le-be,Ee=Ee/le-me,_e=0;_e<le;++_e)(oe=Se[_e]).x-=pe,oe.y-=Ee}return be==null&&(be=0),me==null&&(me=0),we.initialize=function(_e){Se=_e},we.x=function(_e){return arguments.length?(be=+_e,we):be},we.y=function(_e){return arguments.length?(me=+_e,we):me},we}function A(be){return function(){return be}}function o(){return 1e-6*(Math.random()-.5)}function w(be,me,Se,we){if(isNaN(me)||isNaN(Se))return be;var _e,oe,le,pe,Ee,Te,Me,Le,Ie,he=be._root,xe={data:we},ke=be._x0,ze=be._y0,Re=be._x1,Oe=be._y1;if(!he)return be._root=xe,be;for(;he.length;)if((Te=me>=(oe=(ke+Re)/2))?ke=oe:Re=oe,(Me=Se>=(le=(ze+Oe)/2))?ze=le:Oe=le,_e=he,!(he=he[Le=Me<<1|Te]))return _e[Le]=xe,be;if(pe=+be._x.call(null,he.data),Ee=+be._y.call(null,he.data),me===pe&&Se===Ee)return xe.next=he,_e?_e[Le]=xe:be._root=xe,be;do _e=_e?_e[Le]=new Array(4):be._root=new Array(4),(Te=me>=(oe=(ke+Re)/2))?ke=oe:Re=oe,(Me=Se>=(le=(ze+Oe)/2))?ze=le:Oe=le;while((Le=Me<<1|Te)==(Ie=(Ee>=le)<<1|pe>=oe));return _e[Ie]=he,_e[Le]=xe,be}function _(be,me,Se,we,_e){this.node=be,this.x0=me,this.y0=Se,this.x1=we,this.y1=_e}function p(be){return be[0]}function s(be){return be[1]}function n(be,me,Se){var we=new a(me??p,Se??s,NaN,NaN,NaN,NaN);return be==null?we:we.addAll(be)}function a(be,me,Se,we,_e,oe){this._x=be,this._y=me,this._x0=Se,this._y0=we,this._x1=_e,this._y1=oe,this._root=void 0}function r(be){for(var me={data:be.data},Se=me;be=be.next;)Se=Se.next={data:be.data};return me}e.r(O),e.d(O,{forceCenter:function(){return M},forceCollide:function(){return c},forceLink:function(){return v},forceManyBody:function(){return ce},forceRadial:function(){return de},forceSimulation:function(){return se},forceX:function(){return ge},forceY:function(){return ve}});var i=n.prototype=a.prototype;function l(be){return be.x+be.vx}function u(be){return be.y+be.vy}function c(be){var me,Se,we=1,_e=1;function oe(){for(var Ee,Te,Me,Le,Ie,he,xe,ke=me.length,ze=0;ze<_e;++ze)for(Te=n(me,l,u).visitAfter(le),Ee=0;Ee<ke;++Ee)Me=me[Ee],he=Se[Me.index],xe=he*he,Le=Me.x+Me.vx,Ie=Me.y+Me.vy,Te.visit(Re);function Re(Oe,Ve,qe,Je,ot){var rt=Oe.data,dt=Oe.r,_t=he+dt;if(!rt)return Ve>Le+_t||Je<Le-_t||qe>Ie+_t||ot<Ie-_t;if(rt.index>Me.index){var yt=Le-rt.x-rt.vx,et=Ie-rt.y-rt.vy,nt=yt*yt+et*et;nt<_t*_t&&(yt===0&&(nt+=(yt=o())*yt),et===0&&(nt+=(et=o())*et),nt=(_t-(nt=Math.sqrt(nt)))/nt*we,Me.vx+=(yt*=nt)*(_t=(dt*=dt)/(xe+dt)),Me.vy+=(et*=nt)*_t,rt.vx-=yt*(_t=1-_t),rt.vy-=et*_t)}}}function le(Ee){if(Ee.data)return Ee.r=Se[Ee.data.index];for(var Te=Ee.r=0;Te<4;++Te)Ee[Te]&&Ee[Te].r>Ee.r&&(Ee.r=Ee[Te].r)}function pe(){if(me){var Ee,Te,Me=me.length;for(Se=new Array(Me),Ee=0;Ee<Me;++Ee)Te=me[Ee],Se[Te.index]=+be(Te,Ee,me)}}return typeof be!="function"&&(be=A(be==null?1:+be)),oe.initialize=function(Ee){me=Ee,pe()},oe.iterations=function(Ee){return arguments.length?(_e=+Ee,oe):_e},oe.strength=function(Ee){return arguments.length?(we=+Ee,oe):we},oe.radius=function(Ee){return arguments.length?(be=typeof Ee=="function"?Ee:A(+Ee),pe(),oe):be},oe}i.copy=function(){var be,me,Se=new a(this._x,this._y,this._x0,this._y0,this._x1,this._y1),we=this._root;if(!we)return Se;if(!we.length)return Se._root=r(we),Se;for(be=[{source:we,target:Se._root=new Array(4)}];we=be.pop();)for(var _e=0;_e<4;++_e)(me=we.source[_e])&&(me.length?be.push({source:me,target:we.target[_e]=new Array(4)}):we.target[_e]=r(me));return Se},i.add=function(be){var me=+this._x.call(null,be),Se=+this._y.call(null,be);return w(this.cover(me,Se),me,Se,be)},i.addAll=function(be){var me,Se,we,_e,oe=be.length,le=new Array(oe),pe=new Array(oe),Ee=1/0,Te=1/0,Me=-1/0,Le=-1/0;for(Se=0;Se<oe;++Se)isNaN(we=+this._x.call(null,me=be[Se]))||isNaN(_e=+this._y.call(null,me))||(le[Se]=we,pe[Se]=_e,we<Ee&&(Ee=we),we>Me&&(Me=we),_e<Te&&(Te=_e),_e>Le&&(Le=_e));if(Ee>Me||Te>Le)return this;for(this.cover(Ee,Te).cover(Me,Le),Se=0;Se<oe;++Se)w(this,le[Se],pe[Se],be[Se]);return this},i.cover=function(be,me){if(isNaN(be=+be)||isNaN(me=+me))return this;var Se=this._x0,we=this._y0,_e=this._x1,oe=this._y1;if(isNaN(Se))_e=(Se=Math.floor(be))+1,oe=(we=Math.floor(me))+1;else{for(var le,pe,Ee=_e-Se,Te=this._root;Se>be||be>=_e||we>me||me>=oe;)switch(pe=(me<we)<<1|be<Se,(le=new Array(4))[pe]=Te,Te=le,Ee*=2,pe){case 0:_e=Se+Ee,oe=we+Ee;break;case 1:Se=_e-Ee,oe=we+Ee;break;case 2:_e=Se+Ee,we=oe-Ee;break;case 3:Se=_e-Ee,we=oe-Ee}this._root&&this._root.length&&(this._root=Te)}return this._x0=Se,this._y0=we,this._x1=_e,this._y1=oe,this},i.data=function(){var be=[];return this.visit(function(me){if(!me.length)do be.push(me.data);while(me=me.next)}),be},i.extent=function(be){return arguments.length?this.cover(+be[0][0],+be[0][1]).cover(+be[1][0],+be[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},i.find=function(be,me,Se){var we,_e,oe,le,pe,Ee,Te,Me=this._x0,Le=this._y0,Ie=this._x1,he=this._y1,xe=[],ke=this._root;for(ke&&xe.push(new _(ke,Me,Le,Ie,he)),Se==null?Se=1/0:(Me=be-Se,Le=me-Se,Ie=be+Se,he=me+Se,Se*=Se);Ee=xe.pop();)if(!(!(ke=Ee.node)||(_e=Ee.x0)>Ie||(oe=Ee.y0)>he||(le=Ee.x1)<Me||(pe=Ee.y1)<Le))if(ke.length){var ze=(_e+le)/2,Re=(oe+pe)/2;xe.push(new _(ke[3],ze,Re,le,pe),new _(ke[2],_e,Re,ze,pe),new _(ke[1],ze,oe,le,Re),new _(ke[0],_e,oe,ze,Re)),(Te=(me>=Re)<<1|be>=ze)&&(Ee=xe[xe.length-1],xe[xe.length-1]=xe[xe.length-1-Te],xe[xe.length-1-Te]=Ee)}else{var Oe=be-+this._x.call(null,ke.data),Ve=me-+this._y.call(null,ke.data),qe=Oe*Oe+Ve*Ve;if(qe<Se){var Je=Math.sqrt(Se=qe);Me=be-Je,Le=me-Je,Ie=be+Je,he=me+Je,we=ke.data}}return we},i.remove=function(be){if(isNaN(oe=+this._x.call(null,be))||isNaN(le=+this._y.call(null,be)))return this;var me,Se,we,_e,oe,le,pe,Ee,Te,Me,Le,Ie,he=this._root,xe=this._x0,ke=this._y0,ze=this._x1,Re=this._y1;if(!he)return this;if(he.length)for(;;){if((Te=oe>=(pe=(xe+ze)/2))?xe=pe:ze=pe,(Me=le>=(Ee=(ke+Re)/2))?ke=Ee:Re=Ee,me=he,!(he=he[Le=Me<<1|Te]))return this;if(!he.length)break;(me[Le+1&3]||me[Le+2&3]||me[Le+3&3])&&(Se=me,Ie=Le)}for(;he.data!==be;)if(we=he,!(he=he.next))return this;return(_e=he.next)&&delete he.next,we?(_e?we.next=_e:delete we.next,this):me?(_e?me[Le]=_e:delete me[Le],(he=me[0]||me[1]||me[2]||me[3])&&he===(me[3]||me[2]||me[1]||me[0])&&!he.length&&(Se?Se[Ie]=he:this._root=he),this):(this._root=_e,this)},i.removeAll=function(be){for(var me=0,Se=be.length;me<Se;++me)this.remove(be[me]);return this},i.root=function(){return this._root},i.size=function(){var be=0;return this.visit(function(me){if(!me.length)do++be;while(me=me.next)}),be},i.visit=function(be){var me,Se,we,_e,oe,le,pe=[],Ee=this._root;for(Ee&&pe.push(new _(Ee,this._x0,this._y0,this._x1,this._y1));me=pe.pop();)if(!be(Ee=me.node,we=me.x0,_e=me.y0,oe=me.x1,le=me.y1)&&Ee.length){var Te=(we+oe)/2,Me=(_e+le)/2;(Se=Ee[3])&&pe.push(new _(Se,Te,Me,oe,le)),(Se=Ee[2])&&pe.push(new _(Se,we,Me,Te,le)),(Se=Ee[1])&&pe.push(new _(Se,Te,_e,oe,Me)),(Se=Ee[0])&&pe.push(new _(Se,we,_e,Te,Me))}return this},i.visitAfter=function(be){var me,Se=[],we=[];for(this._root&&Se.push(new _(this._root,this._x0,this._y0,this._x1,this._y1));me=Se.pop();){var _e=me.node;if(_e.length){var oe,le=me.x0,pe=me.y0,Ee=me.x1,Te=me.y1,Me=(le+Ee)/2,Le=(pe+Te)/2;(oe=_e[0])&&Se.push(new _(oe,le,pe,Me,Le)),(oe=_e[1])&&Se.push(new _(oe,Me,pe,Ee,Le)),(oe=_e[2])&&Se.push(new _(oe,le,Le,Me,Te)),(oe=_e[3])&&Se.push(new _(oe,Me,Le,Ee,Te))}we.push(me)}for(;me=we.pop();)be(me.node,me.x0,me.y0,me.x1,me.y1);return this},i.x=function(be){return arguments.length?(this._x=be,this):this._x},i.y=function(be){return arguments.length?(this._y=be,this):this._y};var g=e(34712);function f(be){return be.index}function b(be,me){var Se=be.get(me);if(!Se)throw new Error("missing: "+me);return Se}function v(be){var me,Se,we,_e,oe,le=f,pe=function(xe){return 1/Math.min(_e[xe.source.index],_e[xe.target.index])},Ee=A(30),Te=1;function Me(xe){for(var ke=0,ze=be.length;ke<Te;++ke)for(var Re,Oe,Ve,qe,Je,ot,rt,dt=0;dt<ze;++dt)Oe=(Re=be[dt]).source,qe=(Ve=Re.target).x+Ve.vx-Oe.x-Oe.vx||o(),Je=Ve.y+Ve.vy-Oe.y-Oe.vy||o(),qe*=ot=((ot=Math.sqrt(qe*qe+Je*Je))-Se[dt])/ot*xe*me[dt],Je*=ot,Ve.vx-=qe*(rt=oe[dt]),Ve.vy-=Je*rt,Oe.vx+=qe*(rt=1-rt),Oe.vy+=Je*rt}function Le(){if(we){var xe,ke,ze=we.length,Re=be.length,Oe=(0,g.kH)(we,le);for(xe=0,_e=new Array(ze);xe<Re;++xe)(ke=be[xe]).index=xe,typeof ke.source!="object"&&(ke.source=b(Oe,ke.source)),typeof ke.target!="object"&&(ke.target=b(Oe,ke.target)),_e[ke.source.index]=(_e[ke.source.index]||0)+1,_e[ke.target.index]=(_e[ke.target.index]||0)+1;for(xe=0,oe=new Array(Re);xe<Re;++xe)ke=be[xe],oe[xe]=_e[ke.source.index]/(_e[ke.source.index]+_e[ke.target.index]);me=new Array(Re),Ie(),Se=new Array(Re),he()}}function Ie(){if(we)for(var xe=0,ke=be.length;xe<ke;++xe)me[xe]=+pe(be[xe],xe,be)}function he(){if(we)for(var xe=0,ke=be.length;xe<ke;++xe)Se[xe]=+Ee(be[xe],xe,be)}return be==null&&(be=[]),Me.initialize=function(xe){we=xe,Le()},Me.links=function(xe){return arguments.length?(be=xe,Le(),Me):be},Me.id=function(xe){return arguments.length?(le=xe,Me):le},Me.iterations=function(xe){return arguments.length?(Te=+xe,Me):Te},Me.strength=function(xe){return arguments.length?(pe=typeof xe=="function"?xe:A(+xe),Ie(),Me):pe},Me.distance=function(xe){return arguments.length?(Ee=typeof xe=="function"?xe:A(+xe),he(),Me):Ee},Me}var d={value:function(){}};function m(){for(var be,me=0,Se=arguments.length,we={};me<Se;++me){if(!(be=arguments[me]+"")||be in we||/[\s.]/.test(be))throw new Error("illegal type: "+be);we[be]=[]}return new x(we)}function x(be){this._=be}function y(be,me){for(var Se,we=0,_e=be.length;we<_e;++we)if((Se=be[we]).name===me)return Se.value}function T(be,me,Se){for(var we=0,_e=be.length;we<_e;++we)if(be[we].name===me){be[we]=d,be=be.slice(0,we).concat(be.slice(we+1));break}return Se!=null&&be.push({name:me,value:Se}),be}x.prototype=m.prototype={constructor:x,on:function(be,me){var Se,we,_e=this._,oe=(we=_e,(be+"").trim().split(/^|\s+/).map(function(Ee){var Te="",Me=Ee.indexOf(".");if(Me>=0&&(Te=Ee.slice(Me+1),Ee=Ee.slice(0,Me)),Ee&&!we.hasOwnProperty(Ee))throw new Error("unknown type: "+Ee);return{type:Ee,name:Te}})),le=-1,pe=oe.length;if(!(arguments.length<2)){if(me!=null&&typeof me!="function")throw new Error("invalid callback: "+me);for(;++le<pe;)if(Se=(be=oe[le]).type)_e[Se]=T(_e[Se],be.name,me);else if(me==null)for(Se in _e)_e[Se]=T(_e[Se],be.name,null);return this}for(;++le<pe;)if((Se=(be=oe[le]).type)&&(Se=y(_e[Se],be.name)))return Se},copy:function(){var be={},me=this._;for(var Se in me)be[Se]=me[Se].slice();return new x(be)},call:function(be,me){if((Se=arguments.length-2)>0)for(var Se,we,_e=new Array(Se),oe=0;oe<Se;++oe)_e[oe]=arguments[oe+2];if(!this._.hasOwnProperty(be))throw new Error("unknown type: "+be);for(oe=0,Se=(we=this._[be]).length;oe<Se;++oe)we[oe].value.apply(me,_e)},apply:function(be,me,Se){if(!this._.hasOwnProperty(be))throw new Error("unknown type: "+be);for(var we=this._[be],_e=0,oe=we.length;_e<oe;++_e)we[_e].value.apply(me,Se)}};var h,E,k=m,L=0,P=0,I=0,z=1e3,F=0,U=0,R=0,j=typeof performance=="object"&&performance.now?performance:Date,Z=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(be){setTimeout(be,17)};function B(){return U||(Z(q),U=j.now()+R)}function q(){U=0}function V(){this._call=this._time=this._next=null}function ne(be,me,Se){var we=new V;return we.restart(be,me,Se),we}function ee(){U=(F=j.now())+R,L=P=0;try{(function(){B(),++L;for(var be,me=h;me;)(be=U-me._time)>=0&&me._call.call(null,be),me=me._next;--L})()}finally{L=0,function(){for(var be,me,Se=h,we=1/0;Se;)Se._call?(we>Se._time&&(we=Se._time),be=Se,Se=Se._next):(me=Se._next,Se._next=null,Se=be?be._next=me:h=me);E=be,J(we)}(),U=0}}function $(){var be=j.now(),me=be-F;me>z&&(R-=me,F=be)}function J(be){L||(P&&(P=clearTimeout(P)),be-U>24?(be<1/0&&(P=setTimeout(ee,be-j.now()-R)),I&&(I=clearInterval(I))):(I||(F=j.now(),I=setInterval($,z)),L=1,Z(ee)))}function K(be){return be.x}function te(be){return be.y}V.prototype=ne.prototype={constructor:V,restart:function(be,me,Se){if(typeof be!="function")throw new TypeError("callback is not a function");Se=(Se==null?B():+Se)+(me==null?0:+me),this._next||E===this||(E?E._next=this:h=this,E=this),this._call=be,this._time=Se,J()},stop:function(){this._call&&(this._call=null,this._time=1/0,J())}};var ie=10,ae=Math.PI*(3-Math.sqrt(5));function se(be){var me,Se=1,we=.001,_e=1-Math.pow(we,1/300),oe=0,le=.6,pe=(0,g.kH)(),Ee=ne(Me),Te=k("tick","end");function Me(){Le(),Te.call("tick",me),Se<we&&(Ee.stop(),Te.call("end",me))}function Le(xe){var ke,ze,Re=be.length;xe===void 0&&(xe=1);for(var Oe=0;Oe<xe;++Oe)for(Se+=(oe-Se)*_e,pe.each(function(Ve){Ve(Se)}),ke=0;ke<Re;++ke)(ze=be[ke]).fx==null?ze.x+=ze.vx*=le:(ze.x=ze.fx,ze.vx=0),ze.fy==null?ze.y+=ze.vy*=le:(ze.y=ze.fy,ze.vy=0);return me}function Ie(){for(var xe,ke=0,ze=be.length;ke<ze;++ke){if((xe=be[ke]).index=ke,xe.fx!=null&&(xe.x=xe.fx),xe.fy!=null&&(xe.y=xe.fy),isNaN(xe.x)||isNaN(xe.y)){var Re=ie*Math.sqrt(ke),Oe=ke*ae;xe.x=Re*Math.cos(Oe),xe.y=Re*Math.sin(Oe)}(isNaN(xe.vx)||isNaN(xe.vy))&&(xe.vx=xe.vy=0)}}function he(xe){return xe.initialize&&xe.initialize(be),xe}return be==null&&(be=[]),Ie(),me={tick:Le,restart:function(){return Ee.restart(Me),me},stop:function(){return Ee.stop(),me},nodes:function(xe){return arguments.length?(be=xe,Ie(),pe.each(he),me):be},alpha:function(xe){return arguments.length?(Se=+xe,me):Se},alphaMin:function(xe){return arguments.length?(we=+xe,me):we},alphaDecay:function(xe){return arguments.length?(_e=+xe,me):+_e},alphaTarget:function(xe){return arguments.length?(oe=+xe,me):oe},velocityDecay:function(xe){return arguments.length?(le=1-xe,me):1-le},force:function(xe,ke){return arguments.length>1?(ke==null?pe.remove(xe):pe.set(xe,he(ke)),me):pe.get(xe)},find:function(xe,ke,ze){var Re,Oe,Ve,qe,Je,ot=0,rt=be.length;for(ze==null?ze=1/0:ze*=ze,ot=0;ot<rt;++ot)(Ve=(Re=xe-(qe=be[ot]).x)*Re+(Oe=ke-qe.y)*Oe)<ze&&(Je=qe,ze=Ve);return Je},on:function(xe,ke){return arguments.length>1?(Te.on(xe,ke),me):Te.on(xe)}}}function ce(){var be,me,Se,we,_e=A(-30),oe=1,le=1/0,pe=.81;function Ee(Ie){var he,xe=be.length,ke=n(be,K,te).visitAfter(Me);for(Se=Ie,he=0;he<xe;++he)me=be[he],ke.visit(Le)}function Te(){if(be){var Ie,he,xe=be.length;for(we=new Array(xe),Ie=0;Ie<xe;++Ie)he=be[Ie],we[he.index]=+_e(he,Ie,be)}}function Me(Ie){var he,xe,ke,ze,Re,Oe=0,Ve=0;if(Ie.length){for(ke=ze=Re=0;Re<4;++Re)(he=Ie[Re])&&(xe=Math.abs(he.value))&&(Oe+=he.value,Ve+=xe,ke+=xe*he.x,ze+=xe*he.y);Ie.x=ke/Ve,Ie.y=ze/Ve}else{(he=Ie).x=he.data.x,he.y=he.data.y;do Oe+=we[he.data.index];while(he=he.next)}Ie.value=Oe}function Le(Ie,he,xe,ke){if(!Ie.value)return!0;var ze=Ie.x-me.x,Re=Ie.y-me.y,Oe=ke-he,Ve=ze*ze+Re*Re;if(Oe*Oe/pe<Ve)return Ve<le&&(ze===0&&(Ve+=(ze=o())*ze),Re===0&&(Ve+=(Re=o())*Re),Ve<oe&&(Ve=Math.sqrt(oe*Ve)),me.vx+=ze*Ie.value*Se/Ve,me.vy+=Re*Ie.value*Se/Ve),!0;if(!(Ie.length||Ve>=le)){(Ie.data!==me||Ie.next)&&(ze===0&&(Ve+=(ze=o())*ze),Re===0&&(Ve+=(Re=o())*Re),Ve<oe&&(Ve=Math.sqrt(oe*Ve)));do Ie.data!==me&&(Oe=we[Ie.data.index]*Se/Ve,me.vx+=ze*Oe,me.vy+=Re*Oe);while(Ie=Ie.next)}}return Ee.initialize=function(Ie){be=Ie,Te()},Ee.strength=function(Ie){return arguments.length?(_e=typeof Ie=="function"?Ie:A(+Ie),Te(),Ee):_e},Ee.distanceMin=function(Ie){return arguments.length?(oe=Ie*Ie,Ee):Math.sqrt(oe)},Ee.distanceMax=function(Ie){return arguments.length?(le=Ie*Ie,Ee):Math.sqrt(le)},Ee.theta=function(Ie){return arguments.length?(pe=Ie*Ie,Ee):Math.sqrt(pe)},Ee}function de(be,me,Se){var we,_e,oe,le=A(.1);function pe(Te){for(var Me=0,Le=we.length;Me<Le;++Me){var Ie=we[Me],he=Ie.x-me||1e-6,xe=Ie.y-Se||1e-6,ke=Math.sqrt(he*he+xe*xe),ze=(oe[Me]-ke)*_e[Me]*Te/ke;Ie.vx+=he*ze,Ie.vy+=xe*ze}}function Ee(){if(we){var Te,Me=we.length;for(_e=new Array(Me),oe=new Array(Me),Te=0;Te<Me;++Te)oe[Te]=+be(we[Te],Te,we),_e[Te]=isNaN(oe[Te])?0:+le(we[Te],Te,we)}}return typeof be!="function"&&(be=A(+be)),me==null&&(me=0),Se==null&&(Se=0),pe.initialize=function(Te){we=Te,Ee()},pe.strength=function(Te){return arguments.length?(le=typeof Te=="function"?Te:A(+Te),Ee(),pe):le},pe.radius=function(Te){return arguments.length?(be=typeof Te=="function"?Te:A(+Te),Ee(),pe):be},pe.x=function(Te){return arguments.length?(me=+Te,pe):me},pe.y=function(Te){return arguments.length?(Se=+Te,pe):Se},pe}function ge(be){var me,Se,we,_e=A(.1);function oe(pe){for(var Ee,Te=0,Me=me.length;Te<Me;++Te)(Ee=me[Te]).vx+=(we[Te]-Ee.x)*Se[Te]*pe}function le(){if(me){var pe,Ee=me.length;for(Se=new Array(Ee),we=new Array(Ee),pe=0;pe<Ee;++pe)Se[pe]=isNaN(we[pe]=+be(me[pe],pe,me))?0:+_e(me[pe],pe,me)}}return typeof be!="function"&&(be=A(be==null?0:+be)),oe.initialize=function(pe){me=pe,le()},oe.strength=function(pe){return arguments.length?(_e=typeof pe=="function"?pe:A(+pe),le(),oe):_e},oe.x=function(pe){return arguments.length?(be=typeof pe=="function"?pe:A(+pe),le(),oe):be},oe}function ve(be){var me,Se,we,_e=A(.1);function oe(pe){for(var Ee,Te=0,Me=me.length;Te<Me;++Te)(Ee=me[Te]).vy+=(we[Te]-Ee.y)*Se[Te]*pe}function le(){if(me){var pe,Ee=me.length;for(Se=new Array(Ee),we=new Array(Ee),pe=0;pe<Ee;++pe)Se[pe]=isNaN(we[pe]=+be(me[pe],pe,me))?0:+_e(me[pe],pe,me)}}return typeof be!="function"&&(be=A(be==null?0:+be)),oe.initialize=function(pe){me=pe,le()},oe.strength=function(pe){return arguments.length?(_e=typeof pe=="function"?pe:A(+pe),le(),oe):_e},oe.y=function(pe){return arguments.length?(be=typeof pe=="function"?pe:A(+pe),le(),oe):be},oe}},57624:function(Y,O,e){function M(c,g){if((f=(c=g?c.toExponential(g-1):c.toExponential()).indexOf("e"))<0)return null;var f,b=c.slice(0,f);return[b.length>1?b[0]+b.slice(2):b,+c.slice(f+1)]}e.d(O,{E9:function(){return r},SO:function(){return u}});var A,o=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function w(c){if(!(g=o.exec(c)))throw new Error("invalid format: "+c);var g;return new _({fill:g[1],align:g[2],sign:g[3],symbol:g[4],zero:g[5],width:g[6],comma:g[7],precision:g[8]&&g[8].slice(1),trim:g[9],type:g[10]})}function _(c){this.fill=c.fill===void 0?" ":c.fill+"",this.align=c.align===void 0?">":c.align+"",this.sign=c.sign===void 0?"-":c.sign+"",this.symbol=c.symbol===void 0?"":c.symbol+"",this.zero=!!c.zero,this.width=c.width===void 0?void 0:+c.width,this.comma=!!c.comma,this.precision=c.precision===void 0?void 0:+c.precision,this.trim=!!c.trim,this.type=c.type===void 0?"":c.type+""}function p(c,g){var f=M(c,g);if(!f)return c+"";var b=f[0],v=f[1];return v<0?"0."+new Array(-v).join("0")+b:b.length>v+1?b.slice(0,v+1)+"."+b.slice(v+1):b+new Array(v-b.length+2).join("0")}w.prototype=_.prototype,_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var s={"%":function(c,g){return(100*c).toFixed(g)},b:function(c){return Math.round(c).toString(2)},c:function(c){return c+""},d:function(c){return Math.abs(c=Math.round(c))>=1e21?c.toLocaleString("en").replace(/,/g,""):c.toString(10)},e:function(c,g){return c.toExponential(g)},f:function(c,g){return c.toFixed(g)},g:function(c,g){return c.toPrecision(g)},o:function(c){return Math.round(c).toString(8)},p:function(c,g){return p(100*c,g)},r:p,s:function(c,g){var f=M(c,g);if(!f)return c+"";var b=f[0],v=f[1],d=v-(A=3*Math.max(-8,Math.min(8,Math.floor(v/3))))+1,m=b.length;return d===m?b:d>m?b+new Array(d-m+1).join("0"):d>0?b.slice(0,d)+"."+b.slice(d):"0."+new Array(1-d).join("0")+M(c,Math.max(0,g+d-1))[0]},X:function(c){return Math.round(c).toString(16).toUpperCase()},x:function(c){return Math.round(c).toString(16)}};function n(c){return c}var a,r,i=Array.prototype.map,l=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function u(c){var g,f,b=c.grouping===void 0||c.thousands===void 0?n:(g=i.call(c.grouping,Number),f=c.thousands+"",function(k,L){for(var P=k.length,I=[],z=0,F=g[0],U=0;P>0&&F>0&&(U+F+1>L&&(F=Math.max(1,L-U)),I.push(k.substring(P-=F,P+F)),!((U+=F+1)>L));)F=g[z=(z+1)%g.length];return I.reverse().join(f)}),v=c.currency===void 0?"":c.currency[0]+"",d=c.currency===void 0?"":c.currency[1]+"",m=c.decimal===void 0?".":c.decimal+"",x=c.numerals===void 0?n:function(k){return function(L){return L.replace(/[0-9]/g,function(P){return k[+P]})}}(i.call(c.numerals,String)),y=c.percent===void 0?"%":c.percent+"",T=c.minus===void 0?"-":c.minus+"",h=c.nan===void 0?"NaN":c.nan+"";function E(k){var L=(k=w(k)).fill,P=k.align,I=k.sign,z=k.symbol,F=k.zero,U=k.width,R=k.comma,j=k.precision,Z=k.trim,B=k.type;B==="n"?(R=!0,B="g"):s[B]||(j===void 0&&(j=12),Z=!0,B="g"),(F||L==="0"&&P==="=")&&(F=!0,L="0",P="=");var q=z==="$"?v:z==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():"",V=z==="$"?d:/[%p]/.test(B)?y:"",ne=s[B],ee=/[defgprs%]/.test(B);function $(J){var K,te,ie,ae=q,se=V;if(B==="c")se=ne(J)+se,J="";else{var ce=(J=+J)<0||1/J<0;if(J=isNaN(J)?h:ne(Math.abs(J),j),Z&&(J=function(ve){e:for(var be,me=ve.length,Se=1,we=-1;Se<me;++Se)switch(ve[Se]){case".":we=be=Se;break;case"0":we===0&&(we=Se),be=Se;break;default:if(!+ve[Se])break e;we>0&&(we=0)}return we>0?ve.slice(0,we)+ve.slice(be+1):ve}(J)),ce&&+J==0&&I!=="+"&&(ce=!1),ae=(ce?I==="("?I:T:I==="-"||I==="("?"":I)+ae,se=(B==="s"?l[8+A/3]:"")+se+(ce&&I==="("?")":""),ee){for(K=-1,te=J.length;++K<te;)if(48>(ie=J.charCodeAt(K))||ie>57){se=(ie===46?m+J.slice(K+1):J.slice(K))+se,J=J.slice(0,K);break}}}R&&!F&&(J=b(J,1/0));var de=ae.length+J.length+se.length,ge=de<U?new Array(U-de+1).join(L):"";switch(R&&F&&(J=b(ge+J,ge.length?U-se.length:1/0),ge=""),P){case"<":J=ae+J+se+ge;break;case"=":J=ae+ge+J+se;break;case"^":J=ge.slice(0,de=ge.length>>1)+ae+J+se+ge.slice(de);break;default:J=ge+ae+J+se}return x(J)}return j=j===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j)),$.toString=function(){return k+""},$}return{format:E,formatPrefix:function(k,L){var P,I=E(((k=w(k)).type="f",k)),z=3*Math.max(-8,Math.min(8,Math.floor((P=L,((P=M(Math.abs(P)))?P[1]:NaN)/3)))),F=Math.pow(10,-z),U=l[8+z/3];return function(R){return I(F*R)+U}}}}a=u({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),r=a.format,a.formatPrefix},87108:function(Y,O,e){e.r(O),e.d(O,{geoAiry:function(){return R},geoAiryRaw:function(){return U},geoAitoff:function(){return Z},geoAitoffRaw:function(){return j},geoArmadillo:function(){return q},geoArmadilloRaw:function(){return B},geoAugust:function(){return ne},geoAugustRaw:function(){return V},geoBaker:function(){return K},geoBakerRaw:function(){return J},geoBerghaus:function(){return ae},geoBerghausRaw:function(){return ie},geoBertin1953:function(){return Se},geoBertin1953Raw:function(){return me},geoBoggs:function(){return Me},geoBoggsRaw:function(){return Te},geoBonne:function(){return ke},geoBonneRaw:function(){return xe},geoBottomley:function(){return Re},geoBottomleyRaw:function(){return ze},geoBromley:function(){return Ve},geoBromleyRaw:function(){return Oe},geoChamberlin:function(){return nt},geoChamberlinAfrica:function(){return et},geoChamberlinRaw:function(){return _t},geoCollignon:function(){return Rt},geoCollignonRaw:function(){return At},geoCraig:function(){return It},geoCraigRaw:function(){return Ft},geoCraster:function(){return Ne},geoCrasterRaw:function(){return Ye},geoCylindricalEqualArea:function(){return st},geoCylindricalEqualAreaRaw:function(){return We},geoCylindricalStereographic:function(){return Fe},geoCylindricalStereographicRaw:function(){return it},geoEckert1:function(){return at},geoEckert1Raw:function(){return Be},geoEckert2:function(){return ht},geoEckert2Raw:function(){return Ze},geoEckert3:function(){return mt},geoEckert3Raw:function(){return vt},geoEckert4:function(){return Et},geoEckert4Raw:function(){return ft},geoEckert5:function(){return xt},geoEckert5Raw:function(){return Tt},geoEckert6:function(){return Pt},geoEckert6Raw:function(){return Ct},geoEisenlohr:function(){return sn},geoEisenlohrRaw:function(){return Kt},geoFahey:function(){return rn},geoFaheyRaw:function(){return Yt},geoFoucaut:function(){return Sn},geoFoucautRaw:function(){return Ln},geoFoucautSinusoidal:function(){return $t},geoFoucautSinusoidalRaw:function(){return gn},geoGilbert:function(){return Cn},geoGingery:function(){return Hn},geoGingeryRaw:function(){return Rn},geoGinzburg4:function(){return ur},geoGinzburg4Raw:function(){return ar},geoGinzburg5:function(){return er},geoGinzburg5Raw:function(){return cr},geoGinzburg6:function(){return Ht},geoGinzburg6Raw:function(){return Tr},geoGinzburg8:function(){return wn},geoGinzburg8Raw:function(){return on},geoGinzburg9:function(){return Pn},geoGinzburg9Raw:function(){return mn},geoGringorten:function(){return jn},geoGringortenQuincuncial:function(){return ga},geoGringortenRaw:function(){return Bn},geoGuyou:function(){return Ot},geoGuyouRaw:function(){return yn},geoHammer:function(){return ge},geoHammerRaw:function(){return ce},geoHammerRetroazimuthal:function(){return xn},geoHammerRetroazimuthalRaw:function(){return nn},geoHealpix:function(){return qn},geoHealpixRaw:function(){return un},geoHill:function(){return $n},geoHillRaw:function(){return Gn},geoHomolosine:function(){return fr},geoHomolosineRaw:function(){return mr},geoHufnagel:function(){return sr},geoHufnagelRaw:function(){return dr},geoHyperelliptical:function(){return fi},geoHyperellipticalRaw:function(){return jr},geoInterrupt:function(){return li},geoInterruptedBoggs:function(){return pa},geoInterruptedHomolosine:function(){return Xo},geoInterruptedMollweide:function(){return Ps},geoInterruptedMollweideHemispheres:function(){return Js},geoInterruptedQuarticAuthalic:function(){return Wl},geoInterruptedSinuMollweide:function(){return Ks},geoInterruptedSinusoidal:function(){return Qs},geoKavrayskiy7:function(){return Co},geoKavrayskiy7Raw:function(){return vo},geoLagrange:function(){return xi},geoLagrangeRaw:function(){return Jo},geoLarrivee:function(){return ro},geoLarriveeRaw:function(){return mo},geoLaskowski:function(){return Po},geoLaskowskiRaw:function(){return Ha},geoLittrow:function(){return Oo},geoLittrowRaw:function(){return io},geoLoximuthal:function(){return Io},geoLoximuthalRaw:function(){return yo},geoMiller:function(){return hl},geoMillerRaw:function(){return ao},geoModifiedStereographic:function(){return es},geoModifiedStereographicAlaska:function(){return ql},geoModifiedStereographicGs48:function(){return Hl},geoModifiedStereographicGs50:function(){return Qo},geoModifiedStereographicLee:function(){return ds},geoModifiedStereographicMiller:function(){return oo},geoModifiedStereographicRaw:function(){return el},geoMollweide:function(){return le},geoMollweideRaw:function(){return oe},geoMtFlatPolarParabolic:function(){return pl},geoMtFlatPolarParabolicRaw:function(){return Ga},geoMtFlatPolarQuartic:function(){return xo},geoMtFlatPolarQuarticRaw:function(){return zo},geoMtFlatPolarSinusoidal:function(){return Do},geoMtFlatPolarSinusoidalRaw:function(){return bo},geoNaturalEarth:function(){return Zr.c},geoNaturalEarth2:function(){return Gl},geoNaturalEarth2Raw:function(){return gs},geoNaturalEarthRaw:function(){return Zr.g},geoNellHammer:function(){return vs},geoNellHammerRaw:function(){return tl},geoNicolosi:function(){return Yl},geoNicolosiRaw:function(){return nl},geoPatterson:function(){return El},geoPattersonRaw:function(){return il},geoPeirceQuincuncial:function(){return ss},geoPierceQuincuncial:function(){return ss},geoPolyconic:function(){return rs},geoPolyconicRaw:function(){return ys},geoPolyhedral:function(){return ai},geoPolyhedralButterfly:function(){return bs},geoPolyhedralCollignon:function(){return Fs},geoPolyhedralWaterman:function(){return Bs},geoProject:function(){return Ns},geoQuantize:function(){return wo},geoQuincuncial:function(){return jo},geoRectangularPolyconic:function(){return Ba},geoRectangularPolyconicRaw:function(){return Fa},geoRobinson:function(){return Lr},geoRobinsonRaw:function(){return Xa},geoSatellite:function(){return dl},geoSatelliteRaw:function(){return js},geoSinuMollweide:function(){return Qn},geoSinuMollweideRaw:function(){return tr},geoSinusoidal:function(){return he},geoSinusoidalRaw:function(){return Ie},geoStitch:function(){return Ki},geoTimes:function(){return uo},geoTimesRaw:function(){return va},geoTwoPointAzimuthal:function(){return ya},geoTwoPointAzimuthalRaw:function(){return ws},geoTwoPointAzimuthalUsa:function(){return Ts},geoTwoPointEquidistant:function(){return us},geoTwoPointEquidistantRaw:function(){return Xr},geoTwoPointEquidistantUsa:function(){return co},geoVanDerGrinten:function(){return ks},geoVanDerGrinten2:function(){return $a},geoVanDerGrinten2Raw:function(){return As},geoVanDerGrinten3:function(){return cs},geoVanDerGrinten3Raw:function(){return gi},geoVanDerGrinten4:function(){return Br},geoVanDerGrinten4Raw:function(){return Pr},geoVanDerGrintenRaw:function(){return Ka},geoWagner:function(){return fo},geoWagner4:function(){return Ll},geoWagner4Raw:function(){return oi},geoWagner6:function(){return ui},geoWagner6Raw:function(){return Pa},geoWagner7:function(){return Ao},geoWagnerRaw:function(){return Ca},geoWiechel:function(){return Ta},geoWiechelRaw:function(){return bi},geoWinkel3:function(){return vl},geoWinkel3Raw:function(){return Go}});var M=e(87952),A=Math.abs,o=Math.atan,w=Math.atan2,_=Math.cos,p=Math.exp,s=Math.floor,n=Math.log,a=Math.max,r=Math.min,i=Math.pow,l=Math.round,u=Math.sign||function(Xe){return Xe>0?1:Xe<0?-1:0},c=Math.sin,g=Math.tan,f=1e-6,b=1e-12,v=Math.PI,d=v/2,m=v/4,x=Math.SQRT1_2,y=I(2),T=I(v),h=2*v,E=180/v,k=v/180;function L(Xe){return Xe>1?d:Xe<-1?-d:Math.asin(Xe)}function P(Xe){return Xe>1?0:Xe<-1?v:Math.acos(Xe)}function I(Xe){return Xe>0?Math.sqrt(Xe):0}function z(Xe){return(p(Xe)-p(-Xe))/2}function F(Xe){return(p(Xe)+p(-Xe))/2}function U(Xe){var Qe=g(Xe/2),lt=2*n(_(Xe/2))/(Qe*Qe);function N(W,G){var C=_(W),H=_(G),Q=c(G),re=H*C,fe=-((1-re?n((1+re)/2)/(1-re):-.5)+lt/(1+re));return[fe*H*c(W),fe*Q]}return N.invert=function(W,G){var C,H=I(W*W+G*G),Q=-Xe/2,re=50;if(!H)return[0,0];do{var fe=Q/2,ye=_(fe),Ce=c(fe),De=Ce/ye,Ue=-n(A(ye));Q-=C=(2/De*Ue-lt*De-H)/(-Ue/(Ce*Ce)+1-lt/(2*ye*ye))*(ye<0?.7:1)}while(A(C)>f&&--re>0);var He=c(Q);return[w(W*He,H*_(Q)),L(G*He/H)]},N}function R(){var Xe=d,Qe=(0,M.U)(U),lt=Qe(Xe);return lt.radius=function(N){return arguments.length?Qe(Xe=N*k):Xe*E},lt.scale(179.976).clipAngle(147)}function j(Xe,Qe){var lt=_(Qe),N=function(W){return W?W/Math.sin(W):1}(P(lt*_(Xe/=2)));return[2*lt*c(Xe)*N,c(Qe)*N]}function Z(){return(0,M.c)(j).scale(152.63)}function B(Xe){var Qe=c(Xe),lt=_(Xe),N=Xe>=0?1:-1,W=g(N*Xe),G=(1+Qe-lt)/2;function C(H,Q){var re=_(Q),fe=_(H/=2);return[(1+re)*c(H),(N*Q>-w(fe,W)-.001?0:10*-N)+G+c(Q)*lt-(1+re)*Qe*fe]}return C.invert=function(H,Q){var re=0,fe=0,ye=50;do{var Ce=_(re),De=c(re),Ue=_(fe),He=c(fe),tt=1+Ue,ct=tt*De-H,pt=G+He*lt-tt*Qe*Ce-Q,kt=tt*Ce/2,Lt=-De*He,St=Qe*tt*De/2,jt=lt*Ue+Qe*Ce*He,zt=Lt*St-jt*kt,Qt=(pt*Lt-ct*jt)/zt/2,Zt=(ct*St-pt*kt)/zt;A(Zt)>2&&(Zt/=2),re-=Qt,fe-=Zt}while((A(Qt)>f||A(Zt)>f)&&--ye>0);return N*fe>-w(_(re),W)-.001?[2*re,fe]:null},C}function q(){var Xe=20*k,Qe=Xe>=0?1:-1,lt=g(Qe*Xe),N=(0,M.U)(B),W=N(Xe),G=W.stream;return W.parallel=function(C){return arguments.length?(lt=g((Qe=(Xe=C*k)>=0?1:-1)*Xe),N(Xe)):Xe*E},W.stream=function(C){var H=W.rotate(),Q=G(C),re=(W.rotate([0,0]),G(C)),fe=W.precision();return W.rotate(H),Q.sphere=function(){re.polygonStart(),re.lineStart();for(var ye=-180*Qe;Qe*ye<180;ye+=90*Qe)re.point(ye,90*Qe);if(Xe)for(;Qe*(ye-=3*Qe*fe)>=-180;)re.point(ye,Qe*-w(_(ye*k/2),lt)*E);re.lineEnd(),re.polygonEnd()},Q},W.scale(218.695).center([0,28.0974])}function V(Xe,Qe){var lt=g(Qe/2),N=I(1-lt*lt),W=1+N*_(Xe/=2),G=c(Xe)*N/W,C=lt/W,H=G*G,Q=C*C;return[1.3333333333333333*G*(3+H-3*Q),1.3333333333333333*C*(3+3*H-Q)]}function ne(){return(0,M.c)(V).scale(66.1603)}j.invert=function(Xe,Qe){if(!(Xe*Xe+4*Qe*Qe>v*v+f)){var lt=Xe,N=Qe,W=25;do{var G,C=c(lt),H=c(lt/2),Q=_(lt/2),re=c(N),fe=_(N),ye=c(2*N),Ce=re*re,De=fe*fe,Ue=H*H,He=1-De*Q*Q,tt=He?P(fe*Q)*I(G=1/He):G=0,ct=2*tt*fe*H-Xe,pt=tt*re-Qe,kt=G*(De*Ue+tt*fe*Q*Ce),Lt=G*(.5*C*ye-2*tt*re*H),St=.25*G*(ye*H-tt*re*De*C),jt=G*(Ce*Q+tt*Ue*fe),zt=Lt*St-jt*kt;if(!zt)break;var Qt=(pt*Lt-ct*jt)/zt,Zt=(ct*St-pt*kt)/zt;lt-=Qt,N-=Zt}while((A(Qt)>f||A(Zt)>f)&&--W>0);return[lt,N]}},V.invert=function(Xe,Qe){if(Qe*=.375,!(Xe*=.375)&&A(Qe)>1)return null;var lt=1+Xe*Xe+Qe*Qe,N=I((lt-I(lt*lt-4*Qe*Qe))/2),W=L(N)/3,G=N?function(re){return n(re+I(re*re-1))}(A(Qe/N))/3:function(re){return n(re+I(re*re+1))}(A(Xe))/3,C=_(W),H=F(G),Q=H*H-C*C;return[2*u(Xe)*w(z(G)*C,.25-Q),2*u(Qe)*w(H*c(W),.25+Q)]};var ee=I(8),$=n(1+y);function J(Xe,Qe){var lt=A(Qe);return lt<m?[Xe,n(g(m+Qe/2))]:[Xe*_(lt)*(2*y-1/c(lt)),u(Qe)*(2*y*(lt-m)-n(g(lt/2)))]}function K(){return(0,M.c)(J).scale(112.314)}J.invert=function(Xe,Qe){if((N=A(Qe))<$)return[Xe,2*o(p(Qe))-d];var lt,N,W=m,G=25;do{var C=_(W/2),H=g(W/2);W-=lt=(ee*(W-m)-n(H)-N)/(ee-C*C/(2*H))}while(A(lt)>b&&--G>0);return[Xe/(_(W)*(ee-1/c(W))),u(Qe)*W]};var te=e(69020);function ie(Xe){var Qe=2*v/Xe;function lt(N,W){var G=(0,te.O)(N,W);if(A(N)>d){var C=w(G[1],G[0]),H=I(G[0]*G[0]+G[1]*G[1]),Q=Qe*l((C-d)/Qe)+d,re=w(c(C-=Q),2-_(C));C=Q+L(v/H*c(re))-re,G[0]=H*_(C),G[1]=H*c(C)}return G}return lt.invert=function(N,W){var G=I(N*N+W*W);if(G>d){var C=w(W,N),H=Qe*l((C-d)/Qe)+d,Q=C>H?-1:1,re=G*_(H-C),fe=1/g(Q*P((re-v)/I(v*(v-2*re)+G*G)));C=H+2*o((fe+Q*I(fe*fe-3))/3),N=G*_(C),W=G*c(C)}return te.O.invert(N,W)},lt}function ae(){var Xe=5,Qe=(0,M.U)(ie),lt=Qe(Xe),N=lt.stream,W=.01,G=-_(W*k),C=c(W*k);return lt.lobes=function(H){return arguments.length?Qe(Xe=+H):Xe},lt.stream=function(H){var Q=lt.rotate(),re=N(H),fe=(lt.rotate([0,0]),N(H));return lt.rotate(Q),re.sphere=function(){fe.polygonStart(),fe.lineStart();for(var ye=0,Ce=360/Xe,De=2*v/Xe,Ue=90-180/Xe,He=d;ye<Xe;++ye,Ue-=Ce,He-=De)fe.point(w(C*_(He),G)*E,L(C*c(He))*E),Ue<-90?(fe.point(-90,-180-Ue-W),fe.point(-90,-180-Ue+W)):(fe.point(90,Ue+W),fe.point(90,Ue-W));fe.lineEnd(),fe.polygonEnd()},re},lt.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var se=e(54724);function ce(Xe,Qe){if(arguments.length<2&&(Qe=Xe),Qe===1)return se.y;if(Qe===1/0)return de;function lt(N,W){var G=(0,se.y)(N/Qe,W);return G[0]*=Xe,G}return lt.invert=function(N,W){var G=se.y.invert(N/Xe,W);return G[0]*=Qe,G},lt}function de(Xe,Qe){return[Xe*_(Qe)/_(Qe/=2),2*c(Qe)]}function ge(){var Xe=2,Qe=(0,M.U)(ce),lt=Qe(Xe);return lt.coefficient=function(N){return arguments.length?Qe(Xe=+N):Xe},lt.scale(169.529)}function ve(Xe,Qe,lt){var N,W,G,C=100;lt=lt===void 0?0:+lt,Qe=+Qe;do(W=Xe(lt))===(G=Xe(lt+f))&&(G=W+f),lt-=N=-1*f*(W-Qe)/(W-G);while(C-- >0&&A(N)>f);return C<0?NaN:lt}function be(Xe,Qe,lt){return Qe===void 0&&(Qe=40),lt===void 0&&(lt=b),function(N,W,G,C){var H,Q,re;G=G===void 0?0:+G,C=C===void 0?0:+C;for(var fe=0;fe<Qe;fe++){var ye=Xe(G,C),Ce=ye[0]-N,De=ye[1]-W;if(A(Ce)<lt&&A(De)<lt)break;var Ue=Ce*Ce+De*De;if(Ue>H)G-=Q/=2,C-=re/=2;else{H=Ue;var He=(G>0?-1:1)*lt,tt=(C>0?-1:1)*lt,ct=Xe(G+He,C),pt=Xe(G,C+tt),kt=(ct[0]-ye[0])/He,Lt=(ct[1]-ye[1])/He,St=(pt[0]-ye[0])/tt,jt=(pt[1]-ye[1])/tt,zt=jt*kt-Lt*St,Qt=(A(zt)<.5?.5:1)/zt;if(G+=Q=(De*St-Ce*jt)*Qt,C+=re=(Ce*Lt-De*kt)*Qt,A(Q)<lt&&A(re)<lt)break}}return[G,C]}}function me(){var Xe=ce(1.68,2);function Qe(lt,N){if(lt+N<-1.4){var W=(lt-N+1.6)*(lt+N+1.4)/8;lt+=W,N-=.8*W*c(N+v/2)}var G=Xe(lt,N),C=(1-_(lt*N))/12;return G[1]<0&&(G[0]*=1+C),G[1]>0&&(G[1]*=1+C/1.5*G[0]*G[0]),G}return Qe.invert=be(Qe),Qe}function Se(){return(0,M.c)(me()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function we(Xe,Qe){var lt,N=Xe*c(Qe),W=30;do Qe-=lt=(Qe+c(Qe)-N)/(1+_(Qe));while(A(lt)>f&&--W>0);return Qe/2}function _e(Xe,Qe,lt){function N(W,G){return[Xe*W*_(G=we(lt,G)),Qe*c(G)]}return N.invert=function(W,G){return G=L(G/Qe),[W/(Xe*_(G)),L((2*G+c(2*G))/lt)]},N}de.invert=function(Xe,Qe){var lt=2*L(Qe/2);return[Xe*_(lt/2)/_(lt),lt]};var oe=_e(y/d,y,v);function le(){return(0,M.c)(oe).scale(169.529)}var pe=2.00276,Ee=1.11072;function Te(Xe,Qe){var lt=we(v,Qe);return[pe*Xe/(1/_(Qe)+Ee/_(lt)),(Qe+y*c(lt))/pe]}function Me(){return(0,M.c)(Te).scale(160.857)}function Le(Xe){var Qe=0,lt=(0,M.U)(Xe),N=lt(Qe);return N.parallel=function(W){return arguments.length?lt(Qe=W*k):Qe*E},N}function Ie(Xe,Qe){return[Xe*_(Qe),Qe]}function he(){return(0,M.c)(Ie).scale(152.63)}function xe(Xe){if(!Xe)return Ie;var Qe=1/g(Xe);function lt(N,W){var G=Qe+Xe-W,C=G&&N*_(W)/G;return[G*c(C),Qe-G*_(C)]}return lt.invert=function(N,W){var G=I(N*N+(W=Qe-W)*W),C=Qe+Xe-G;return[G/_(C)*w(N,W),C]},lt}function ke(){return Le(xe).scale(123.082).center([0,26.1441]).parallel(45)}function ze(Xe){function Qe(lt,N){var W=d-N,G=W&&lt*Xe*c(W)/W;return[W*c(G)/Xe,d-W*_(G)]}return Qe.invert=function(lt,N){var W=lt*Xe,G=d-N,C=I(W*W+G*G),H=w(W,G);return[(C?C/c(C):1)*H/Xe,d-C]},Qe}function Re(){var Xe=.5,Qe=(0,M.U)(ze),lt=Qe(Xe);return lt.fraction=function(N){return arguments.length?Qe(Xe=+N):Xe},lt.scale(158.837)}Te.invert=function(Xe,Qe){var lt,N,W=pe*Qe,G=Qe<0?-m:m,C=25;do N=W-y*c(G),G-=lt=(c(2*G)+2*G-v*c(N))/(2*_(2*G)+2+v*_(N)*y*_(G));while(A(lt)>f&&--C>0);return N=W-y*c(G),[Xe*(1/_(N)+Ee/_(G))/pe,N]},Ie.invert=function(Xe,Qe){return[Xe/_(Qe),Qe]};var Oe=_e(1,4/v,v);function Ve(){return(0,M.c)(Oe).scale(152.63)}var qe=e(24052),Je=e(92992);function ot(Xe,Qe,lt,N,W,G){var C,H=_(G);if(A(Xe)>1||A(G)>1)C=P(lt*W+Qe*N*H);else{var Q=c(Xe/2),re=c(G/2);C=2*L(I(Q*Q+Qe*N*re*re))}return A(C)>f?[C,w(N*c(G),Qe*W-lt*N*H)]:[0,0]}function rt(Xe,Qe,lt){return P((Xe*Xe+Qe*Qe-lt*lt)/(2*Xe*Qe))}function dt(Xe){return Xe-2*v*s((Xe+v)/(2*v))}function _t(Xe,Qe,lt){for(var N,W=[[Xe[0],Xe[1],c(Xe[1]),_(Xe[1])],[Qe[0],Qe[1],c(Qe[1]),_(Qe[1])],[lt[0],lt[1],c(lt[1]),_(lt[1])]],G=W[2],C=0;C<3;++C,G=N)N=W[C],G.v=ot(N[1]-G[1],G[3],G[2],N[3],N[2],N[0]-G[0]),G.point=[0,0];var H=rt(W[0].v[0],W[2].v[0],W[1].v[0]),Q=rt(W[0].v[0],W[1].v[0],W[2].v[0]),re=v-H;W[2].point[1]=0,W[0].point[0]=-(W[1].point[0]=W[0].v[0]/2);var fe=[W[2].point[0]=W[0].point[0]+W[2].v[0]*_(H),2*(W[0].point[1]=W[1].point[1]=W[2].v[0]*c(H))];return function(ye,Ce){var De,Ue=c(Ce),He=_(Ce),tt=new Array(3);for(De=0;De<3;++De){var ct=W[De];if(tt[De]=ot(Ce-ct[1],ct[3],ct[2],He,Ue,ye-ct[0]),!tt[De][0])return ct.point;tt[De][1]=dt(tt[De][1]-ct.v[1])}var pt=fe.slice();for(De=0;De<3;++De){var kt=De==2?0:De+1,Lt=rt(W[De].v[0],tt[De][0],tt[kt][0]);tt[De][1]<0&&(Lt=-Lt),De?De==1?(Lt=Q-Lt,pt[0]-=tt[De][0]*_(Lt),pt[1]-=tt[De][0]*c(Lt)):(Lt=re-Lt,pt[0]+=tt[De][0]*_(Lt),pt[1]+=tt[De][0]*c(Lt)):(pt[0]+=tt[De][0]*_(Lt),pt[1]-=tt[De][0]*c(Lt))}return pt[0]/=3,pt[1]/=3,pt}}function yt(Xe){return Xe[0]*=k,Xe[1]*=k,Xe}function et(){return nt([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function nt(Xe,Qe,lt){var N=(0,qe.c)({type:"MultiPoint",coordinates:[Xe,Qe,lt]}),W=[-N[0],-N[1]],G=(0,Je.c)(W),C=_t(yt(G(Xe)),yt(G(Qe)),yt(G(lt)));C.invert=be(C);var H=(0,M.c)(C).rotate(W),Q=H.center;return delete H.rotate,H.center=function(re){return arguments.length?Q(G(re)):G.invert(Q())},H.clipAngle(90)}function At(Xe,Qe){var lt=I(1-c(Qe));return[2/T*Xe*lt,T*(1-lt)]}function Rt(){return(0,M.c)(At).scale(95.6464).center([0,30])}function Ft(Xe){var Qe=g(Xe);function lt(N,W){return[N,(N?N/c(N):1)*(c(W)*_(N)-Qe*_(W))]}return lt.invert=Qe?function(N,W){N&&(W*=c(N)/N);var G=_(N);return[N,2*w(I(G*G+Qe*Qe-W*W)-G,Qe-W)]}:function(N,W){return[N,L(N?W*g(N)/N:W)]},lt}function It(){return Le(Ft).scale(249.828).clipAngle(90)}At.invert=function(Xe,Qe){var lt=(lt=Qe/T-1)*lt;return[lt>0?Xe*I(v/lt)/2:0,L(1-lt)]};var Ge=I(3);function Ye(Xe,Qe){return[Ge*Xe*(2*_(2*Qe/3)-1)/T,Ge*T*c(Qe/3)]}function Ne(){return(0,M.c)(Ye).scale(156.19)}function We(Xe){var Qe=_(Xe);function lt(N,W){return[N*Qe,c(W)/Qe]}return lt.invert=function(N,W){return[N/Qe,L(W*Qe)]},lt}function st(){return Le(We).parallel(38.58).scale(195.044)}function it(Xe){var Qe=_(Xe);function lt(N,W){return[N*Qe,(1+Qe)*g(W/2)]}return lt.invert=function(N,W){return[N/Qe,2*o(W/(1+Qe))]},lt}function Fe(){return Le(it).scale(124.75)}function Be(Xe,Qe){var lt=I(8/(3*v));return[lt*Xe*(1-A(Qe)/v),lt*Qe]}function at(){return(0,M.c)(Be).scale(165.664)}function Ze(Xe,Qe){var lt=I(4-3*c(A(Qe)));return[2/I(6*v)*Xe*lt,u(Qe)*I(2*v/3)*(2-lt)]}function ht(){return(0,M.c)(Ze).scale(165.664)}function vt(Xe,Qe){var lt=I(v*(4+v));return[2/lt*Xe*(1+I(1-4*Qe*Qe/(v*v))),4/lt*Qe]}function mt(){return(0,M.c)(vt).scale(180.739)}function ft(Xe,Qe){var lt=(2+d)*c(Qe);Qe/=2;for(var N=0,W=1/0;N<10&&A(W)>f;N++){var G=_(Qe);Qe-=W=(Qe+c(Qe)*(G+2)-lt)/(2*G*(1+G))}return[2/I(v*(4+v))*Xe*(1+_(Qe)),2*I(v/(4+v))*c(Qe)]}function Et(){return(0,M.c)(ft).scale(180.739)}function Tt(Xe,Qe){return[Xe*(1+_(Qe))/I(2+v),2*Qe/I(2+v)]}function xt(){return(0,M.c)(Tt).scale(173.044)}function Ct(Xe,Qe){for(var lt=(1+d)*c(Qe),N=0,W=1/0;N<10&&A(W)>f;N++)Qe-=W=(Qe+c(Qe)-lt)/(1+_(Qe));return lt=I(2+v),[Xe*(1+_(Qe))/lt,2*Qe/lt]}function Pt(){return(0,M.c)(Ct).scale(173.044)}Ye.invert=function(Xe,Qe){var lt=3*L(Qe/(Ge*T));return[T*Xe/(Ge*(2*_(2*lt/3)-1)),lt]},Be.invert=function(Xe,Qe){var lt=I(8/(3*v)),N=Qe/lt;return[Xe/(lt*(1-A(N)/v)),N]},Ze.invert=function(Xe,Qe){var lt=2-A(Qe)/I(2*v/3);return[Xe*I(6*v)/(2*lt),u(Qe)*L((4-lt*lt)/3)]},vt.invert=function(Xe,Qe){var lt=I(v*(4+v))/2;return[Xe*lt/(1+I(1-Qe*Qe*(4+v)/(4*v))),Qe*lt/2]},ft.invert=function(Xe,Qe){var lt=Qe*I((4+v)/v)/2,N=L(lt),W=_(N);return[Xe/(2/I(v*(4+v))*(1+W)),L((N+lt*(W+2))/(2+d))]},Tt.invert=function(Xe,Qe){var lt=I(2+v),N=Qe*lt/2;return[lt*Xe/(1+_(N)),N]},Ct.invert=function(Xe,Qe){var lt=1+d,N=I(lt/2);return[2*Xe*N/(1+_(Qe*=N)),L((Qe+c(Qe))/lt)]};var Bt=3+2*y;function Kt(Xe,Qe){var lt=c(Xe/=2),N=_(Xe),W=I(_(Qe)),G=_(Qe/=2),C=c(Qe)/(G+y*N*W),H=I(2/(1+C*C)),Q=I((y*G+(N+lt)*W)/(y*G+(N-lt)*W));return[Bt*(H*(Q-1/Q)-2*n(Q)),Bt*(H*C*(Q+1/Q)-2*o(C))]}function sn(){return(0,M.c)(Kt).scale(62.5271)}Kt.invert=function(Xe,Qe){if(!(lt=V.invert(Xe/1.2,1.065*Qe)))return null;var lt,N=lt[0],W=lt[1],G=20;Xe/=Bt,Qe/=Bt;do{var C=N/2,H=W/2,Q=c(C),re=_(C),fe=c(H),ye=_(H),Ce=_(W),De=I(Ce),Ue=fe/(ye+y*re*De),He=Ue*Ue,tt=I(2/(1+He)),ct=(y*ye+(re+Q)*De)/(y*ye+(re-Q)*De),pt=I(ct),kt=pt-1/pt,Lt=pt+1/pt,St=tt*kt-2*n(pt)-Xe,jt=tt*Ue*Lt-2*o(Ue)-Qe,zt=fe&&x*De*Q*He/fe,Qt=(y*re*ye+De)/(2*(ye+y*re*De)*(ye+y*re*De)*De),Zt=-.5*Ue*tt*tt*tt,Vt=Zt*zt,vn=Zt*Qt,bn=(bn=2*ye+y*De*(re-Q))*bn*pt,On=(y*re*ye*De+Ce)/bn,Dn=-y*Q*fe/(De*bn),Yn=kt*Vt-2*On/pt+tt*(On+On/ct),ir=kt*vn-2*Dn/pt+tt*(Dn+Dn/ct),gr=Ue*Lt*Vt-2*zt/(1+He)+tt*Lt*zt+tt*Ue*(On-On/ct),Jn=Ue*Lt*vn-2*Qt/(1+He)+tt*Lt*Qt+tt*Ue*(Dn-Dn/ct),pr=ir*gr-Jn*Yn;if(!pr)break;var wr=(jt*ir-St*Jn)/pr,Or=(St*gr-jt*Yn)/pr;N-=wr,W=a(-d,r(d,W-Or))}while((A(wr)>f||A(Or)>f)&&--G>0);return A(A(W)-d)<f?[0,W]:G&&[N,W]};var Gt=_(35*k);function Yt(Xe,Qe){var lt=g(Qe/2);return[Xe*Gt*I(1-lt*lt),(1+Gt)*lt]}function rn(){return(0,M.c)(Yt).scale(137.152)}function Ln(Xe,Qe){var lt=Qe/2,N=_(lt);return[2*Xe/T*_(Qe)*N*N,T*g(lt)]}function Sn(){return(0,M.c)(Ln).scale(135.264)}function gn(Xe){var Qe=1-Xe,lt=W(v,0)[0]-W(-v,0)[0],N=I(2*(W(0,d)[1]-W(0,-d)[1])/lt);function W(H,Q){var re=_(Q),fe=c(Q);return[re/(Qe+Xe*re)*H,Qe*Q+Xe*fe]}function G(H,Q){var re=W(H,Q);return[re[0]*N,re[1]/N]}function C(H){return G(0,H)[1]}return G.invert=function(H,Q){var re=ve(C,Q);return[H/N*(Xe+Qe/_(re)),re]},G}function $t(){var Xe=.5,Qe=(0,M.U)(gn),lt=Qe(Xe);return lt.alpha=function(N){return arguments.length?Qe(Xe=+N):Xe},lt.scale(168.725)}Yt.invert=function(Xe,Qe){var lt=Qe/(1+Gt);return[Xe&&Xe/(Gt*I(1-lt*lt)),2*o(lt)]},Ln.invert=function(Xe,Qe){var lt=o(Qe/T),N=_(lt),W=2*lt;return[Xe*T/2/(_(W)*N*N),W]};var cn=e(4888),an=e(69604);function pn(Xe){return[Xe[0]/2,L(g(Xe[1]/2*k))*E]}function An(Xe){return[2*Xe[0],2*o(c(Xe[1]*k))*E]}function Cn(Xe){Xe==null&&(Xe=cn.c);var Qe=Xe(),lt=(0,an.c)().scale(E).precision(0).clipAngle(null).translate([0,0]);function N(G){return Qe(pn(G))}function W(G){N[G]=function(){return arguments.length?(Qe[G].apply(Qe,arguments),N):Qe[G]()}}return Qe.invert&&(N.invert=function(G){return An(Qe.invert(G))}),N.stream=function(G){var C=Qe.stream(G),H=lt.stream({point:function(Q,re){C.point(Q/2,L(g(-re/2*k))*E)},lineStart:function(){C.lineStart()},lineEnd:function(){C.lineEnd()},polygonStart:function(){C.polygonStart()},polygonEnd:function(){C.polygonEnd()}});return H.sphere=C.sphere,H},N.rotate=function(G){return arguments.length?(lt.rotate(G),N):lt.rotate()},N.center=function(G){return arguments.length?(Qe.center(pn(G)),N):An(Qe.center())},W("angle"),W("clipAngle"),W("clipExtent"),W("fitExtent"),W("fitHeight"),W("fitSize"),W("fitWidth"),W("scale"),W("translate"),W("precision"),N.scale(249.5)}function Rn(Xe,Qe){var lt=2*v/Qe,N=Xe*Xe;function W(G,C){var H=(0,te.O)(G,C),Q=H[0],re=H[1],fe=Q*Q+re*re;if(fe>N){var ye=I(fe),Ce=w(re,Q),De=lt*l(Ce/lt),Ue=Ce-De,He=Xe*_(Ue),tt=(Xe*c(Ue)-Ue*c(He))/(d-He),ct=Fn(Ue,tt),pt=(v-Xe)/In(ct,He,v);Q=ye;var kt,Lt=50;do Q-=kt=(Xe+In(ct,He,Q)*pt-ye)/(ct(Q)*pt);while(A(kt)>f&&--Lt>0);re=Ue*c(Q),Q<d&&(re-=tt*(Q-d));var St=c(De),jt=_(De);H[0]=Q*jt-re*St,H[1]=Q*St+re*jt}return H}return W.invert=function(G,C){var H=G*G+C*C;if(H>N){var Q=I(H),re=w(C,G),fe=lt*l(re/lt),ye=re-fe;G=Q*_(ye),C=Q*c(ye);for(var Ce=G-d,De=c(G),Ue=C/De,He=G<d?1/0:0,tt=10;;){var ct=Xe*c(Ue),pt=Xe*_(Ue),kt=c(pt),Lt=d-pt,St=(ct-Ue*kt)/Lt,jt=Fn(Ue,St);if(A(He)<b||!--tt)break;Ue-=He=(Ue*De-St*Ce-C)/(De-2*Ce*(Lt*(pt+Ue*ct*_(pt)-kt)-ct*(ct-Ue*kt))/(Lt*Lt))}G=(Q=Xe+In(jt,pt,G)*(v-Xe)/In(jt,pt,v))*_(re=fe+Ue),C=Q*c(re)}return te.O.invert(G,C)},W}function Fn(Xe,Qe){return function(lt){var N=Xe*_(lt);return lt<d&&(N-=Qe),I(1+N*N)}}function In(Xe,Qe,lt){for(var N=(lt-Qe)/50,W=Xe(Qe)+Xe(lt),G=1,C=Qe;G<50;++G)W+=2*Xe(C+=N);return .5*W*N}function Hn(){var Xe=6,Qe=30*k,lt=_(Qe),N=c(Qe),W=(0,M.U)(Rn),G=W(Qe,Xe),C=G.stream,H=-_(.01*k),Q=c(.01*k);return G.radius=function(re){return arguments.length?(lt=_(Qe=re*k),N=c(Qe),W(Qe,Xe)):Qe*E},G.lobes=function(re){return arguments.length?W(Qe,Xe=+re):Xe},G.stream=function(re){var fe=G.rotate(),ye=C(re),Ce=(G.rotate([0,0]),C(re));return G.rotate(fe),ye.sphere=function(){Ce.polygonStart(),Ce.lineStart();for(var De=0,Ue=2*v/Xe,He=0;De<Xe;++De,He-=Ue)Ce.point(w(Q*_(He),H)*E,L(Q*c(He))*E),Ce.point(w(N*_(He-Ue/2),lt)*E,L(N*c(He-Ue/2))*E);Ce.lineEnd(),Ce.polygonEnd()},ye},G.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function Un(Xe,Qe,lt,N,W,G,C,H){function Q(re,fe){if(!fe)return[Xe*re/v,0];var ye=fe*fe,Ce=Xe+ye*(Qe+ye*(lt+ye*N)),De=fe*(W-1+ye*(G-H+ye*C)),Ue=(Ce*Ce+De*De)/(2*De),He=re*L(Ce/Ue)/v;return[Ue*c(He),fe*(1+ye*H)+Ue*(1-_(He))]}return arguments.length<8&&(H=0),Q.invert=function(re,fe){var ye,Ce,De=v*re/Xe,Ue=fe,He=50;do{var tt=Ue*Ue,ct=Xe+tt*(Qe+tt*(lt+tt*N)),pt=Ue*(W-1+tt*(G-H+tt*C)),kt=ct*ct+pt*pt,Lt=2*pt,St=kt/Lt,jt=St*St,zt=L(ct/St)/v,Qt=De*zt,Zt=ct*ct,Vt=(2*Qe+tt*(4*lt+6*tt*N))*Ue,vn=W+tt*(3*G+5*tt*C),bn=(2*(ct*Vt+pt*(vn-1))*Lt-kt*(2*(vn-1)))/(Lt*Lt),On=_(Qt),Dn=c(Qt),Yn=St*On,ir=St*Dn,gr=De/v*(1/I(1-Zt/jt))*(Vt*St-ct*bn)/jt,Jn=ir-re,pr=Ue*(1+tt*H)+St-Yn-fe,wr=bn*Dn+Yn*gr,Or=Yn*zt,nr=1+bn-(bn*On-ir*gr),hr=ir*zt,Mr=wr*hr-nr*Or;if(!Mr)break;De-=ye=(pr*wr-Jn*nr)/Mr,Ue-=Ce=(Jn*hr-pr*Or)/Mr}while((A(ye)>f||A(Ce)>f)&&--He>0);return[De,Ue]},Q}var ar=Un(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function ur(){return(0,M.c)(ar).scale(149.995)}var cr=Un(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function er(){return(0,M.c)(cr).scale(153.93)}var Tr=Un(5/6*v,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Ht(){return(0,M.c)(Tr).scale(130.945)}function on(Xe,Qe){var lt=Xe*Xe,N=Qe*Qe;return[Xe*(1-.162388*N)*(.87-952426e-9*lt*lt),Qe*(1+N/12)]}function wn(){return(0,M.c)(on).scale(131.747)}on.invert=function(Xe,Qe){var lt,N=Xe,W=Qe,G=50;do{var C=W*W;W-=lt=(W*(1+C/12)-Qe)/(1+C/4)}while(A(lt)>f&&--G>0);G=50,Xe/=1-.162388*C;do{var H=(H=N*N)*H;N-=lt=(N*(.87-952426e-9*H)-Xe)/(.87-.00476213*H)}while(A(lt)>f&&--G>0);return[N,W]};var mn=Un(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Pn(){return(0,M.c)(mn).scale(131.087)}function Wn(Xe){var Qe=Xe(d,0)[0]-Xe(-d,0)[0];function lt(N,W){var G=N>0?-.5:.5,C=Xe(N+G*v,W);return C[0]-=G*Qe,C}return Xe.invert&&(lt.invert=function(N,W){var G=N>0?-.5:.5,C=Xe.invert(N+G*Qe,W),H=C[0]-G*v;return H<-v?H+=2*v:H>v&&(H-=2*v),C[0]=H,C}),lt}function Bn(Xe,Qe){var lt=u(Xe),N=u(Qe),W=_(Qe),G=_(Xe)*W,C=c(Xe)*W,H=c(N*Qe);Xe=A(w(C,H)),Qe=L(G),A(Xe-d)>f&&(Xe%=d);var Q=function(re,fe){if(fe===d)return[0,0];var ye,Ce,De=c(fe),Ue=De*De,He=Ue*Ue,tt=1+He,ct=1+3*He,pt=1-He,kt=L(1/I(tt)),Lt=pt+Ue*tt*kt,St=(1-De)/Lt,jt=I(St),zt=St*tt,Qt=I(zt),Zt=jt*pt;if(re===0)return[0,-(Zt+Ue*Qt)];var Vt,vn=_(fe),bn=1/vn,On=2*De*vn,Dn=(-Lt*vn-(1-De)*((-3*Ue+kt*ct)*On))/(Lt*Lt),Yn=-bn*On,ir=-bn*(Ue*tt*Dn+St*ct*On),gr=-2*bn*(pt*(.5*Dn/jt)-2*Ue*jt*On),Jn=4*re/v;if(re>.222*v||fe<v/4&&re>.175*v){if(ye=(Zt+Ue*I(zt*(1+He)-Zt*Zt))/(1+He),re>v/4)return[ye,ye];var pr=ye,wr=.5*ye;ye=.5*(wr+pr),Ce=50;do{var Or=ye*(gr+Yn*I(zt-ye*ye))+ir*L(ye/Qt)-Jn;if(!Or)break;Or<0?wr=ye:pr=ye,ye=.5*(wr+pr)}while(A(pr-wr)>f&&--Ce>0)}else{ye=f,Ce=25;do{var nr=ye*ye,hr=I(zt-nr),Mr=gr+Yn*hr,vr=ye*Mr+ir*L(ye/Qt)-Jn;ye-=Vt=hr?vr/(Mr+(ir-Yn*nr)/hr):0}while(A(Vt)>f&&--Ce>0)}return[ye,-Zt-Ue*I(zt-ye*ye)]}(Xe>v/4?d-Xe:Xe,Qe);return Xe>v/4&&(H=Q[0],Q[0]=-Q[1],Q[1]=-H),Q[0]*=lt,Q[1]*=-N,Q}function jn(){return(0,M.c)(Wn(Bn)).scale(239.75)}function rr(Xe,Qe){var lt,N,W,G,C,H;if(Qe<f)return[(G=c(Xe))-(lt=Qe*(Xe-G*(N=_(Xe)))/4)*N,N+lt*G,1-Qe*G*G/2,Xe-lt];if(Qe>=1-f)return lt=(1-Qe)/4,W=1/(N=F(Xe)),[(G=((H=p(2*(H=Xe)))-1)/(H+1))+lt*((C=N*z(Xe))-Xe)/(N*N),W-lt*G*W*(C-Xe),W+lt*G*W*(C+Xe),2*o(p(Xe))-d+lt*(C-Xe)/N];var Q=[1,0,0,0,0,0,0,0,0],re=[I(Qe),0,0,0,0,0,0,0,0],fe=0;for(N=I(1-Qe),C=1;A(re[fe]/Q[fe])>f&&fe<8;)lt=Q[fe++],re[fe]=(lt-N)/2,Q[fe]=(lt+N)/2,N=I(lt*N),C*=2;W=C*Q[fe]*Xe;do W=(L(G=re[fe]*c(N=W)/Q[fe])+W)/2;while(--fe);return[c(W),G=_(W),G/_(W-N),W]}function Xt(Xe,Qe){if(!Qe)return Xe;if(Qe===1)return n(g(Xe/2+m));for(var lt=1,N=I(1-Qe),W=I(Qe),G=0;A(W)>f;G++){if(Xe%v){var C=o(N*g(Xe)/lt);C<0&&(C+=v),Xe+=C+~~(Xe/v)*v}else Xe+=Xe;W=(lt+N)/2,N=I(lt*N),W=((lt=W)-N)/2}return Xe/(i(2,G)*lt)}function yn(Xe,Qe){var lt=(y-1)/(y+1),N=I(1-lt*lt),W=Xt(d,N*N),G=n(g(v/4+A(Qe)/2)),C=p(-1*G)/I(lt),H=function(re,fe){var ye=re*re,Ce=fe+1,De=1-ye-fe*fe;return[.5*((re>=0?d:-d)-w(De,2*re)),-.25*n(De*De+4*ye)+.5*n(Ce*Ce+ye)]}(C*_(-1*Xe),C*c(-1*Xe)),Q=function(re,fe,ye){var Ce=A(re),De=z(A(fe));if(Ce){var Ue=1/c(Ce),He=1/(g(Ce)*g(Ce)),tt=-(He+ye*(De*De*Ue*Ue)-1+ye),ct=(-tt+I(tt*tt-(ye-1)*He*4))/2;return[Xt(o(1/I(ct)),ye)*u(re),Xt(o(I((ct/He-1)/ye)),1-ye)*u(fe)]}return[0,Xt(o(De),1-ye)*u(fe)]}(H[0],H[1],N*N);return[-Q[1],(Qe>=0?1:-1)*(.5*W-Q[0])]}function Ot(){return(0,M.c)(Wn(yn)).scale(151.496)}Bn.invert=function(Xe,Qe){A(Xe)>1&&(Xe=2*u(Xe)-Xe),A(Qe)>1&&(Qe=2*u(Qe)-Qe);var lt=u(Xe),N=u(Qe),W=-lt*Xe,G=-N*Qe,C=G/W<1,H=function(ye,Ce){for(var De=0,Ue=1,He=.5,tt=50;;){var ct=He*He,pt=I(He),kt=L(1/I(1+ct)),Lt=1-ct+He*(1+ct)*kt,St=(1-pt)/Lt,jt=I(St),zt=St*(1+ct),Qt=jt*(1-ct),Zt=I(zt-ye*ye),Vt=Ce+Qt+He*Zt;if(A(Ue-De)<b||--tt==0||Vt===0)break;Vt>0?De=He:Ue=He,He=.5*(De+Ue)}if(!tt)return null;var vn=L(pt),bn=_(vn),On=1/bn,Dn=2*pt*bn,Yn=(-Lt*bn-(-3*He+kt*(1+3*ct))*Dn*(1-pt))/(Lt*Lt);return[v/4*(ye*(-2*On*((1-ct)*(.5*Yn/jt)-2*He*jt*Dn)+-On*Dn*Zt)+-On*(He*(1+ct)*Yn+St*(1+3*ct)*Dn)*L(ye/I(zt))),vn]}(C?G:W,C?W:G),Q=H[0],re=H[1],fe=_(re);return C&&(Q=-d-Q),[lt*(w(c(Q)*fe,-c(re))+v),N*L(_(Q)*fe)]},yn.invert=function(Xe,Qe){var lt,N,W,G,C,H,Q=(y-1)/(y+1),re=I(1-Q*Q),fe=(N=-Xe,W=re*re,(lt=.5*Xt(d,re*re)-Qe)?(G=rr(lt,W),N?(H=(C=rr(N,1-W))[1]*C[1]+W*G[0]*G[0]*C[0]*C[0],[[G[0]*C[2]/H,G[1]*G[2]*C[0]*C[1]/H],[G[1]*C[1]/H,-G[0]*G[2]*C[0]*C[2]/H],[G[2]*C[1]*C[2]/H,-W*G[0]*G[1]*C[0]/H]]):[[G[0],0],[G[1],0],[G[2],0]]):[[0,(C=rr(N,1-W))[0]/C[1]],[1/C[1],0],[C[2]/C[1],0]]),ye=function(Ce,De){var Ue=De[0]*De[0]+De[1]*De[1];return[(Ce[0]*De[0]+Ce[1]*De[1])/Ue,(Ce[1]*De[0]-Ce[0]*De[1])/Ue]}(fe[0],fe[1]);return[w(ye[1],ye[0])/-1,2*o(p(-.5*n(Q*ye[0]*ye[0]+Q*ye[1]*ye[1])))-d]};var Jt=e(61780);function nn(Xe){var Qe=c(Xe),lt=_(Xe),N=_n(Xe);function W(G,C){var H=N(G,C);G=H[0],C=H[1];var Q=c(C),re=_(C),fe=_(G),ye=P(Qe*Q+lt*re*fe),Ce=c(ye),De=A(Ce)>f?ye/Ce:1;return[De*lt*c(G),(A(G)>d?De:-De)*(Qe*re-lt*Q*fe)]}return N.invert=_n(-Xe),W.invert=function(G,C){var H=I(G*G+C*C),Q=-c(H),re=_(H),fe=H*re,ye=-C*Q,Ce=H*Qe,De=I(fe*fe+ye*ye-Ce*Ce),Ue=w(fe*Ce+ye*De,ye*Ce-fe*De),He=(H>d?-1:1)*w(G*Q,H*_(Ue)*re+C*c(Ue)*Q);return N.invert(He,Ue)},W}function _n(Xe){var Qe=c(Xe),lt=_(Xe);return function(N,W){var G=_(W),C=_(N)*G,H=c(N)*G,Q=c(W);return[w(H,C*lt-Q*Qe),L(Q*lt+C*Qe)]}}function xn(){var Xe=0,Qe=(0,M.U)(nn),lt=Qe(Xe),N=lt.rotate,W=lt.stream,G=(0,Jt.c)();return lt.parallel=function(C){if(!arguments.length)return Xe*E;var H=lt.rotate();return Qe(Xe=C*k).rotate(H)},lt.rotate=function(C){return arguments.length?(N.call(lt,[C[0],C[1]-Xe*E]),G.center([-C[0],-C[1]]),lt):((C=N.call(lt))[1]+=Xe*E,C)},lt.stream=function(C){return(C=W(C)).sphere=function(){C.polygonStart();var H,Q=G.radius(89.99)().coordinates[0],re=Q.length-1,fe=-1;for(C.lineStart();++fe<re;)C.point((H=Q[fe])[0],H[1]);for(C.lineEnd(),re=(Q=G.radius(90.01)().coordinates[0]).length-1,C.lineStart();--fe>=0;)C.point((H=Q[fe])[0],H[1]);C.lineEnd(),C.polygonEnd()},C},lt.scale(79.4187).parallel(45).clipAngle(179.999)}var kn=e(84706),hn=e(16016),en=L(1-1/3)*E,tn=We(0);function un(Xe){var Qe=en*k,lt=At(v,Qe)[0]-At(-v,Qe)[0],N=tn(0,Qe)[1],W=At(0,Qe)[1],G=T-W,C=h/Xe,H=4/h,Q=N+G*G*4/h;function re(fe,ye){var Ce,De=A(ye);if(De>Qe){var Ue=r(Xe-1,a(0,s((fe+v)/C)));(Ce=At(fe+=v*(Xe-1)/Xe-Ue*C,De))[0]=Ce[0]*h/lt-h*(Xe-1)/(2*Xe)+Ue*h/Xe,Ce[1]=N+4*(Ce[1]-W)*G/h,ye<0&&(Ce[1]=-Ce[1])}else Ce=tn(fe,ye);return Ce[0]*=H,Ce[1]/=Q,Ce}return re.invert=function(fe,ye){fe/=H;var Ce=A(ye*=Q);if(Ce>N){var De=r(Xe-1,a(0,s((fe+v)/C)));fe=(fe+v*(Xe-1)/Xe-De*C)*lt/h;var Ue=At.invert(fe,.25*(Ce-N)*h/G+W);return Ue[0]-=v*(Xe-1)/Xe-De*C,ye<0&&(Ue[1]=-Ue[1]),Ue}return tn.invert(fe,ye)},re}function dn(Xe,Qe){return[Xe,1&Qe?90-f:en]}function En(Xe,Qe){return[Xe,1&Qe?-90+f:-en]}function zn(Xe){return[Xe[0]*(1-f),Xe[1]]}function qn(){var Xe=4,Qe=(0,M.U)(un),lt=Qe(Xe),N=lt.stream;return lt.lobes=function(W){return arguments.length?Qe(Xe=+W):Xe},lt.stream=function(W){var G=lt.rotate(),C=N(W),H=(lt.rotate([0,0]),N(W));return lt.rotate(G),C.sphere=function(){var Q,re;(0,hn.c)((Q=180/Xe,re=[].concat((0,kn.ik)(-180,180+Q/2,Q).map(dn),(0,kn.ik)(180,-180-Q/2,-Q).map(En)),{type:"Polygon",coordinates:[Q===180?re.map(zn):re]}),H)},C},lt.scale(239.75)}function Gn(Xe){var Qe,lt=1+Xe,N=L(c(1/lt)),W=2*I(v/(Qe=v+4*N*lt)),G=.5*W*(lt+I(Xe*(2+Xe))),C=Xe*Xe,H=lt*lt;function Q(re,fe){var ye,Ce,De=1-c(fe);if(De&&De<2){var Ue,He=d-fe,tt=25;do{var ct=c(He),pt=_(He),kt=N+w(ct,lt-pt),Lt=1+H-2*lt*pt;He-=Ue=(He-C*N-lt*ct+Lt*kt-.5*De*Qe)/(2*lt*ct*kt)}while(A(Ue)>b&&--tt>0);ye=W*I(Lt),Ce=re*kt/v}else ye=W*(Xe+De),Ce=re*N/v;return[ye*c(Ce),G-ye*_(Ce)]}return Q.invert=function(re,fe){var ye=re*re+(fe-=G)*fe,Ce=(1+H-ye/(W*W))/(2*lt),De=P(Ce),Ue=c(De),He=N+w(Ue,lt-Ce);return[L(re/I(ye))*v/He,L(1-2*(De-C*N-lt*Ue+(1+H-2*lt*Ce)*He)/Qe)]},Q}function $n(){var Xe=1,Qe=(0,M.U)(Gn),lt=Qe(Xe);return lt.ratio=function(N){return arguments.length?Qe(Xe=+N):Xe},lt.scale(167.774).center([0,18.67])}var Xn=.7109889596207567,or=.0528035274542;function tr(Xe,Qe){return Qe>-Xn?((Xe=oe(Xe,Qe))[1]+=or,Xe):Ie(Xe,Qe)}function Qn(){return(0,M.c)(tr).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function mr(Xe,Qe){return A(Qe)>Xn?((Xe=oe(Xe,Qe))[1]-=Qe>0?or:-or,Xe):Ie(Xe,Qe)}function fr(){return(0,M.c)(mr).scale(152.63)}function dr(Xe,Qe,lt,N){var W=I(4*v/(2*lt+(1+Xe-Qe/2)*c(2*lt)+(Xe+Qe)/2*c(4*lt)+Qe/2*c(6*lt))),G=I(N*c(lt)*I((1+Xe*_(2*lt)+Qe*_(4*lt))/(1+Xe+Qe))),C=lt*Q(1);function H(ye){return I(1+Xe*_(2*ye)+Qe*_(4*ye))}function Q(ye){var Ce=ye*lt;return(2*Ce+(1+Xe-Qe/2)*c(2*Ce)+(Xe+Qe)/2*c(4*Ce)+Qe/2*c(6*Ce))/lt}function re(ye){return H(ye)*c(ye)}var fe=function(ye,Ce){var De=lt*ve(Q,C*c(Ce)/lt,Ce/v);isNaN(De)&&(De=lt*u(Ce));var Ue=W*H(De);return[Ue*G*ye/v*_(De),Ue/G*c(De)]};return fe.invert=function(ye,Ce){var De=ve(re,Ce*G/W);return[ye*v/(_(De)*W*G*H(De)),L(lt*Q(De/lt)/C)]},lt===0&&(W=I(N/v),(fe=function(ye,Ce){return[ye*W,c(Ce)/W]}).invert=function(ye,Ce){return[ye/W,L(Ce*W)]}),fe}function sr(){var Xe=1,Qe=0,lt=45*k,N=2,W=(0,M.U)(dr),G=W(Xe,Qe,lt,N);return G.a=function(C){return arguments.length?W(Xe=+C,Qe,lt,N):Xe},G.b=function(C){return arguments.length?W(Xe,Qe=+C,lt,N):Qe},G.psiMax=function(C){return arguments.length?W(Xe,Qe,lt=+C*k,N):lt*E},G.ratio=function(C){return arguments.length?W(Xe,Qe,lt,N=+C):N},G.scale(180.739)}function xr(Xe,Qe,lt,N,W,G,C,H,Q,re,fe){if(fe.nanEncountered)return NaN;var ye,Ce,De,Ue,He,tt,ct,pt,kt,Lt;if(Ce=Xe(Qe+.25*(ye=lt-Qe)),De=Xe(lt-.25*ye),isNaN(Ce))fe.nanEncountered=!0;else{if(!isNaN(De))return Lt=((tt=(Ue=ye*(N+4*Ce+W)/12)+(He=ye*(W+4*De+G)/12))-C)/15,re>Q?(fe.maxDepthCount++,tt+Lt):Math.abs(Lt)<H?tt+Lt:(pt=xr(Xe,Qe,ct=Qe+.5*ye,N,Ce,W,Ue,.5*H,Q,re+1,fe),isNaN(pt)?(fe.nanEncountered=!0,NaN):(kt=xr(Xe,ct,lt,W,De,G,He,.5*H,Q,re+1,fe),isNaN(kt)?(fe.nanEncountered=!0,NaN):pt+kt));fe.nanEncountered=!0}}function Er(Xe,Qe,lt,N,W){N===void 0&&(N=1e-8),W===void 0&&(W=20);var G=Xe(Qe),C=Xe(.5*(Qe+lt)),H=Xe(lt);return xr(Xe,Qe,lt,G,C,H,(G+4*C+H)*(lt-Qe)/6,N,W,1,{maxDepthCount:0,nanEncountered:!1})}function jr(Xe,Qe,lt){function N(De){return Xe+(1-Xe)*i(1-i(De,Qe),1/Qe)}function W(De){return Er(N,0,De,1e-4)}for(var G=1/W(1),C=1e3,H=1.00000001*G,Q=[],re=0;re<=C;re++)Q.push(W(re/C)*H);function fe(De){var Ue=0,He=C,tt=500;do Q[tt]>De?He=tt:Ue=tt,tt=Ue+He>>1;while(tt>Ue);var ct=Q[tt+1]-Q[tt];return ct&&(ct=(De-Q[tt+1])/ct),(tt+1+ct)/C}var ye=2*fe(1)/v*G/lt,Ce=function(De,Ue){var He=fe(A(c(Ue))),tt=N(He)*De;return He/=ye,[tt,Ue>=0?He:-He]};return Ce.invert=function(De,Ue){var He;return A(Ue*=ye)<1&&(He=u(Ue)*L(W(A(Ue))*G)),[De/N(A(Ue)),He]},Ce}function fi(){var Xe=0,Qe=2.5,lt=1.183136,N=(0,M.U)(jr),W=N(Xe,Qe,lt);return W.alpha=function(G){return arguments.length?N(Xe=+G,Qe,lt):Xe},W.k=function(G){return arguments.length?N(Xe,Qe=+G,lt):Qe},W.gamma=function(G){return arguments.length?N(Xe,Qe,lt=+G):lt},W.scale(152.63)}function pi(Xe,Qe){return A(Xe[0]-Qe[0])<f&&A(Xe[1]-Qe[1])<f}function Ni(Xe,Qe){for(var lt,N,W,G=-1,C=Xe.length,H=Xe[0],Q=[];++G<C;){N=((lt=Xe[G])[0]-H[0])/Qe,W=(lt[1]-H[1])/Qe;for(var re=0;re<Qe;++re)Q.push([H[0]+re*N,H[1]+re*W]);H=lt}return Q.push(lt),Q}function li(Xe,Qe,lt){var N,W;function G(Q,re){for(var fe=re<0?-1:1,ye=Qe[+(re<0)],Ce=0,De=ye.length-1;Ce<De&&Q>ye[Ce][2][0];++Ce);var Ue=Xe(Q-ye[Ce][1][0],re);return Ue[0]+=Xe(ye[Ce][1][0],fe*re>fe*ye[Ce][0][1]?ye[Ce][0][1]:re)[0],Ue}lt?G.invert=lt(G):Xe.invert&&(G.invert=function(Q,re){for(var fe=W[+(re<0)],ye=Qe[+(re<0)],Ce=0,De=fe.length;Ce<De;++Ce){var Ue=fe[Ce];if(Ue[0][0]<=Q&&Q<Ue[1][0]&&Ue[0][1]<=re&&re<Ue[1][1]){var He=Xe.invert(Q-Xe(ye[Ce][1][0],0)[0],re);return He[0]+=ye[Ce][1][0],pi(G(He[0],He[1]),[Q,re])?He:null}}});var C=(0,M.c)(G),H=C.stream;return C.stream=function(Q){var re=C.rotate(),fe=H(Q),ye=(C.rotate([0,0]),H(Q));return C.rotate(re),fe.sphere=function(){(0,hn.c)(N,ye)},fe},C.lobes=function(Q){return arguments.length?(N=function(re){var fe,ye,Ce,De,Ue,He,tt,ct=[],pt=re[0].length;for(tt=0;tt<pt;++tt)ye=(fe=re[0][tt])[0][0],Ce=fe[0][1],De=fe[1][1],Ue=fe[2][0],He=fe[2][1],ct.push(Ni([[ye+f,Ce+f],[ye+f,De-f],[Ue-f,De-f],[Ue-f,He+f]],30));for(tt=re[1].length-1;tt>=0;--tt)ye=(fe=re[1][tt])[0][0],Ce=fe[0][1],De=fe[1][1],Ue=fe[2][0],He=fe[2][1],ct.push(Ni([[Ue-f,He-f],[Ue-f,De+f],[ye+f,De+f],[ye+f,Ce-f]],30));return{type:"Polygon",coordinates:[(0,kn.Uf)(ct)]}}(Q),Qe=Q.map(function(re){return re.map(function(fe){return[[fe[0][0]*k,fe[0][1]*k],[fe[1][0]*k,fe[1][1]*k],[fe[2][0]*k,fe[2][1]*k]]})}),W=Qe.map(function(re){return re.map(function(fe){var ye,Ce=Xe(fe[0][0],fe[0][1])[0],De=Xe(fe[2][0],fe[2][1])[0],Ue=Xe(fe[1][0],fe[0][1])[1],He=Xe(fe[1][0],fe[1][1])[1];return Ue>He&&(ye=Ue,Ue=He,He=ye),[[Ce,Ue],[De,He]]})}),C):Qe.map(function(re){return re.map(function(fe){return[[fe[0][0]*E,fe[0][1]*E],[fe[1][0]*E,fe[1][1]*E],[fe[2][0]*E,fe[2][1]*E]]})})},Qe!=null&&C.lobes(Qe),C}tr.invert=function(Xe,Qe){return Qe>-Xn?oe.invert(Xe,Qe-or):Ie.invert(Xe,Qe)},mr.invert=function(Xe,Qe){return A(Qe)>Xn?oe.invert(Xe,Qe+(Qe>0?or:-or)):Ie.invert(Xe,Qe)};var Pi=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function pa(){return li(Te,Pi).scale(160.857)}var da=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Xo(){return li(mr,da).scale(152.63)}var Vl=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Ps(){return li(oe,Vl).scale(169.529)}var Os=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Js(){return li(oe,Os).scale(169.529).rotate([20,0])}var qa=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Ks(){return li(tr,qa,be).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var $s=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Qs(){return li(Ie,$s).scale(152.63).rotate([-20,0])}function vo(Xe,Qe){return[3/h*Xe*I(v*v/3-Qe*Qe),Qe]}function Co(){return(0,M.c)(vo).scale(158.837)}function Jo(Xe){function Qe(lt,N){if(A(A(N)-d)<f)return[0,N<0?-2:2];var W=c(N),G=i((1+W)/(1-W),Xe/2),C=.5*(G+1/G)+_(lt*=Xe);return[2*c(lt)/C,(G-1/G)/C]}return Qe.invert=function(lt,N){var W=A(N);if(A(W-2)<f)return lt?null:[0,u(N)*d];if(W>2)return null;var G=(lt/=2)*lt,C=(N/=2)*N,H=2*N/(1+G+C);return H=i((1+H)/(1-H),1/Xe),[w(2*lt,1-G-C)/Xe,L((H-1)/(H+1))]},Qe}function xi(){var Xe=.5,Qe=(0,M.U)(Jo),lt=Qe(Xe);return lt.spacing=function(N){return arguments.length?Qe(Xe=+N):Xe},lt.scale(124.75)}vo.invert=function(Xe,Qe){return[h/3*Xe/I(v*v/3-Qe*Qe),Qe]};var qi=v/y;function mo(Xe,Qe){return[Xe*(1+I(_(Qe)))/2,Qe/(_(Qe/2)*_(Xe/6))]}function ro(){return(0,M.c)(mo).scale(97.2672)}function Ha(Xe,Qe){var lt=Xe*Xe,N=Qe*Qe;return[Xe*(.975534+N*(-.0143059*lt-.119161+-.0547009*N)),Qe*(1.00384+lt*(.0802894+-.02855*N+199025e-9*lt)+N*(.0998909+-.0491032*N))]}function Po(){return(0,M.c)(Ha).scale(139.98)}function io(Xe,Qe){return[c(Xe)/_(Qe),g(Qe)*_(Xe)]}function Oo(){return(0,M.c)(io).scale(144.049).clipAngle(89.999)}function yo(Xe){var Qe=_(Xe),lt=g(m+Xe/2);function N(W,G){var C=G-Xe,H=A(C)<f?W*Qe:A(H=m+G/2)<f||A(A(H)-d)<f?0:W*C/n(g(H)/lt);return[H,C]}return N.invert=function(W,G){var C,H=G+Xe;return[A(G)<f?W/Qe:A(C=m+H/2)<f||A(A(C)-d)<f?0:W*n(g(C)/lt)/G,H]},N}function Io(){return Le(yo).parallel(40).scale(158.837)}function ao(Xe,Qe){return[Xe,1.25*n(g(m+.4*Qe))]}function hl(){return(0,M.c)(ao).scale(108.318)}function el(Xe){var Qe=Xe.length-1;function lt(N,W){for(var G,C=_(W),H=2/(1+C*_(N)),Q=H*C*c(N),re=H*c(W),fe=Qe,ye=Xe[fe],Ce=ye[0],De=ye[1];--fe>=0;)Ce=(ye=Xe[fe])[0]+Q*(G=Ce)-re*De,De=ye[1]+Q*De+re*G;return[Ce=Q*(G=Ce)-re*De,De=Q*De+re*G]}return lt.invert=function(N,W){var G=20,C=N,H=W;do{for(var Q,re=Qe,fe=Xe[re],ye=fe[0],Ce=fe[1],De=0,Ue=0;--re>=0;)De=ye+C*(Q=De)-H*Ue,Ue=Ce+C*Ue+H*Q,ye=(fe=Xe[re])[0]+C*(Q=ye)-H*Ce,Ce=fe[1]+C*Ce+H*Q;var He,tt,ct=(De=ye+C*(Q=De)-H*Ue)*De+(Ue=Ce+C*Ue+H*Q)*Ue;C-=He=((ye=C*(Q=ye)-H*Ce-N)*De+(Ce=C*Ce+H*Q-W)*Ue)/ct,H-=tt=(Ce*De-ye*Ue)/ct}while(A(He)+A(tt)>f*f&&--G>0);if(G){var pt=I(C*C+H*H),kt=2*o(.5*pt),Lt=c(kt);return[w(C*Lt,pt*_(kt)),pt?L(H*Lt/pt):0]}},lt}mo.invert=function(Xe,Qe){var lt=A(Xe),N=A(Qe),W=f,G=d;N<qi?G*=N/qi:W+=6*P(qi/N);for(var C=0;C<25;C++){var H=c(G),Q=I(_(G)),re=c(G/2),fe=_(G/2),ye=c(W/6),Ce=_(W/6),De=.5*W*(1+Q)-lt,Ue=G/(fe*Ce)-N,He=Q?-.25*W*H/Q:0,tt=.5*(1+Q),ct=(1+.5*G*re/fe)/(fe*Ce),pt=G/fe*(ye/6)/(Ce*Ce),kt=He*pt-ct*tt,Lt=(De*pt-Ue*tt)/kt,St=(Ue*He-De*ct)/kt;if(G-=Lt,W-=St,A(Lt)<f&&A(St)<f)break}return[Xe<0?-W:W,Qe<0?-G:G]},Ha.invert=function(Xe,Qe){var lt=u(Xe)*v,N=Qe/2,W=50;do{var G=lt*lt,C=N*N,H=lt*N,Q=lt*(.975534+C*(-.0143059*G-.119161+-.0547009*C))-Xe,re=N*(1.00384+G*(.0802894+-.02855*C+199025e-9*G)+C*(.0998909+-.0491032*C))-Qe,fe=.975534-C*(.119161+3*G*.0143059+.0547009*C),ye=-H*(.238322+.2188036*C+.0286118*G),Ce=H*(.1605788+7961e-7*G+-.0571*C),De=1.00384+G*(.0802894+199025e-9*G)+C*(3*(.0998909-.02855*G)-.245516*C),Ue=ye*Ce-De*fe,He=(re*ye-Q*De)/Ue,tt=(Q*Ce-re*fe)/Ue;lt-=He,N-=tt}while((A(He)>f||A(tt)>f)&&--W>0);return W&&[lt,N]},io.invert=function(Xe,Qe){var lt=Xe*Xe,N=Qe*Qe+1,W=lt+N,G=Xe?x*I((W-I(W*W-4*lt))/lt):1/I(N);return[L(Xe*G),u(Qe)*P(G)]},ao.invert=function(Xe,Qe){return[Xe,2.5*o(p(.8*Qe))-.625*v]};var Ko=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Tl=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],kl=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],$o=[[.9245,0],[0,0],[.01943,0]],Al=[[.721316,0],[0,0],[-.00881625,-.00617325]];function ql(){return es(Ko,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function Hl(){return es(Tl,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Qo(){return es(kl,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function oo(){return es($o,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function ds(){return es(Al,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function es(Xe,Qe){var lt=(0,M.c)(el(Xe)).rotate(Qe).clipAngle(90),N=(0,Je.c)(Qe),W=lt.center;return delete lt.rotate,lt.center=function(G){return arguments.length?W(N(G)):N.invert(W())},lt}var Is=I(6),ts=I(7);function Ga(Xe,Qe){var lt=L(7*c(Qe)/(3*Is));return[Is*Xe*(2*_(2*lt/3)-1)/ts,9*c(lt/3)/ts]}function pl(){return(0,M.c)(Ga).scale(164.859)}function zo(Xe,Qe){for(var lt,N=(1+x)*c(Qe),W=Qe,G=0;G<25&&(W-=lt=(c(W/2)+c(W)-N)/(.5*_(W/2)+_(W)),!(A(lt)<f));G++);return[Xe*(1+2*_(W)/_(W/2))/(3*y),2*I(3)*c(W/2)/I(2+y)]}function xo(){return(0,M.c)(zo).scale(188.209)}function bo(Xe,Qe){for(var lt,N=I(6/(4+v)),W=(1+v/4)*c(Qe),G=Qe/2,C=0;C<25&&(G-=lt=(G/2+c(G)-W)/(.5+_(G)),!(A(lt)<f));C++);return[N*(.5+_(G))*Xe/1.5,N*G]}function Do(){return(0,M.c)(bo).scale(166.518)}Ga.invert=function(Xe,Qe){var lt=3*L(Qe*ts/9);return[Xe*ts/(Is*(2*_(2*lt/3)-1)),L(3*c(lt)*Is/7)]},zo.invert=function(Xe,Qe){var lt=Qe*I(2+y)/(2*I(3)),N=2*L(lt);return[3*y*Xe/(1+2*_(N)/_(N/2)),L((lt+c(N))/(1+x))]},bo.invert=function(Xe,Qe){var lt=I(6/(4+v)),N=Qe/lt;return A(A(N)-d)<f&&(N=N<0?-d:d),[1.5*Xe/(lt*(.5+_(N))),L((N/2+c(N))/(1+v/4))]};var Zr=e(47984);function gs(Xe,Qe){var lt=Qe*Qe,N=lt*lt,W=lt*N;return[Xe*(.84719-.13063*lt+W*W*(.05494*lt-.04515-.02326*N+.00331*W)),Qe*(1.01183+N*N*(.01926*lt-.02625-.00396*N))]}function Gl(){return(0,M.c)(gs).scale(175.295)}function tl(Xe,Qe){return[Xe*(1+_(Qe))/2,2*(Qe-g(Qe/2))]}function vs(){return(0,M.c)(tl).scale(152.63)}gs.invert=function(Xe,Qe){var lt,N,W,G,C=Qe,H=25;do C-=lt=(C*(1.01183+(W=(N=C*C)*N)*W*(.01926*N-.02625-.00396*W))-Qe)/(1.01183+W*W*(.21186*N-.23625+-.05148*W));while(A(lt)>b&&--H>0);return[Xe/(.84719-.13063*(N=C*C)+(G=N*(W=N*N))*G*(.05494*N-.04515-.02326*W+.00331*G)),C]},tl.invert=function(Xe,Qe){for(var lt=Qe/2,N=0,W=1/0;N<10&&A(W)>f;++N){var G=_(Qe/2);Qe-=W=(Qe-g(Qe/2)-lt)/(1-.5/(G*G))}return[2*Xe/(1+_(Qe)),Qe]};var Ml=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Wl(){return li(ce(1/0),Ml).rotate([20,0]).scale(152.63)}function nl(Xe,Qe){var lt=c(Qe),N=_(Qe),W=u(Xe);if(Xe===0||A(Qe)===d)return[0,Qe];if(Qe===0)return[Xe,0];if(A(Xe)===d)return[Xe*N,d*lt];var G=v/(2*Xe)-2*Xe/v,C=2*Qe/v,H=(1-C*C)/(lt-C),Q=G*G,re=H*H,fe=1+Q/re,ye=1+re/Q,Ce=(G*lt/H-G/2)/fe,De=(re*lt/Q+H/2)/ye,Ue=De*De-(re*lt*lt/Q+H*lt-1)/ye;return[d*(Ce+I(Ce*Ce+N*N/fe)*W),d*(De+I(Ue<0?0:Ue)*u(-Qe*G)*W)]}function Yl(){return(0,M.c)(nl).scale(127.267)}nl.invert=function(Xe,Qe){var lt=(Xe/=d)*Xe,N=lt+(Qe/=d)*Qe,W=v*v;return[Xe?(N-1+I((1-N)*(1-N)+4*lt))/(2*Xe)*d:0,ve(function(G){return N*(v*c(G)-2*G)*v+4*G*G*(Qe-c(G))+2*v*G-W*Qe},0)]};var Ro=1.0148,ns=.23185,_o=-.14499,Wa=.02406,ms=Ro,Sl=5*ns,zs=7*_o,rl=9*Wa,Ea=1.790857183;function il(Xe,Qe){var lt=Qe*Qe;return[Xe,Qe*(Ro+lt*lt*(ns+lt*(_o+Wa*lt)))]}function El(){return(0,M.c)(il).scale(139.319)}function ys(Xe,Qe){if(A(Qe)<f)return[Xe,0];var lt=g(Qe),N=Xe*c(Qe);return[c(N)/lt,Qe+(1-_(N))/lt]}function rs(){return(0,M.c)(ys).scale(103.74)}il.invert=function(Xe,Qe){Qe>Ea?Qe=Ea:Qe<-1.790857183&&(Qe=-1.790857183);var lt,N=Qe;do{var W=N*N;N-=lt=(N*(Ro+W*W*(ns+W*(_o+Wa*W)))-Qe)/(ms+W*W*(Sl+W*(zs+rl*W)))}while(A(lt)>f);return[Xe,N]},ys.invert=function(Xe,Qe){if(A(Qe)<f)return[Xe,0];var lt,N=Xe*Xe+Qe*Qe,W=.5*Qe,G=10;do{var C=g(W),H=1/_(W),Q=N-2*Qe*W+W*W;W-=lt=(C*Q+2*(W-Qe))/(2+Q*H*H+2*(W-Qe)*C)}while(A(lt)>f&&--G>0);return C=g(W),[(A(Qe)<A(W+1/C)?L(Xe*C):u(Qe)*u(Xe)*(P(A(Xe*C))+d))/c(W),W]};var xs=e(13696),is=e(27284);function as(Xe,Qe){return[Xe[0]*Qe[0]+Xe[1]*Qe[3],Xe[0]*Qe[1]+Xe[1]*Qe[4],Xe[0]*Qe[2]+Xe[1]*Qe[5]+Xe[2],Xe[3]*Qe[0]+Xe[4]*Qe[3],Xe[3]*Qe[1]+Xe[4]*Qe[4],Xe[3]*Qe[2]+Xe[4]*Qe[5]+Xe[5]]}function Ds(Xe,Qe){return[Xe[0]-Qe[0],Xe[1]-Qe[1]]}function al(Xe){return I(Xe[0]*Xe[0]+Xe[1]*Xe[1])}function ai(Xe,Qe,lt){function N(H,Q){var re,fe=Qe(H,Q),ye=fe.project([H*E,Q*E]);return(re=fe.transform)?[re[0]*ye[0]+re[1]*ye[1]+re[2],-(re[3]*ye[0]+re[4]*ye[1]+re[5])]:(ye[1]=-ye[1],ye)}function W(H,Q){var re=H.project.invert,fe=H.transform,ye=Q;if(fe&&(fe=function(tt){var ct=1/(tt[0]*tt[4]-tt[1]*tt[3]);return[ct*tt[4],-ct*tt[1],ct*(tt[1]*tt[5]-tt[2]*tt[4]),-ct*tt[3],ct*tt[0],ct*(tt[2]*tt[3]-tt[0]*tt[5])]}(fe),ye=[fe[0]*ye[0]+fe[1]*ye[1]+fe[2],fe[3]*ye[0]+fe[4]*ye[1]+fe[5]]),re&&H===function(tt){return Qe(tt[0]*k,tt[1]*k)}(Ce=re(ye)))return Ce;for(var Ce,De=H.children,Ue=0,He=De&&De.length;Ue<He;++Ue)if(Ce=W(De[Ue],Q))return Ce}(function H(Q,re){if(Q.edges=function(St){for(var jt=St.length,zt=[],Qt=St[jt-1],Zt=0;Zt<jt;++Zt)zt.push([Qt,Qt=St[Zt]]);return zt}(Q.face),re.face){var fe=Q.shared=function(St,jt){for(var zt,Qt,Zt=St.length,Vt=null,vn=0;vn<Zt;++vn){zt=St[vn];for(var bn=jt.length;--bn>=0;)if(Qt=jt[bn],zt[0]===Qt[0]&&zt[1]===Qt[1]){if(Vt)return[Vt,zt];Vt=zt}}}(Q.face,re.face),ye=(He=fe.map(re.project),tt=fe.map(Q.project),ct=Ds(He[1],He[0]),pt=Ds(tt[1],tt[0]),kt=function(St,jt){return w(St[0]*jt[1]-St[1]*jt[0],St[0]*jt[0]+St[1]*jt[1])}(ct,pt),Lt=al(ct)/al(pt),as([1,0,He[0][0],0,1,He[0][1]],as([Lt,0,0,0,Lt,0],as([_(kt),c(kt),0,-c(kt),_(kt),0],[1,0,-tt[0][0],0,1,-tt[0][1]]))));Q.transform=re.transform?as(re.transform,ye):ye;for(var Ce=re.edges,De=0,Ue=Ce.length;De<Ue;++De)ta(fe[0],Ce[De][1])&&ta(fe[1],Ce[De][0])&&(Ce[De]=Q),ta(fe[0],Ce[De][0])&&ta(fe[1],Ce[De][1])&&(Ce[De]=Q);for(De=0,Ue=(Ce=Q.edges).length;De<Ue;++De)ta(fe[0],Ce[De][0])&&ta(fe[1],Ce[De][1])&&(Ce[De]=re),ta(fe[0],Ce[De][1])&&ta(fe[1],Ce[De][0])&&(Ce[De]=re)}else Q.transform=re.transform;var He,tt,ct,pt,kt,Lt;return Q.children&&Q.children.forEach(function(St){H(St,Q)}),Q})(Xe,{transform:null}),Ya(Xe)&&(N.invert=function(H,Q){var re=W(Xe,[H,-Q]);return re&&(re[0]*=k,re[1]*=k,re)});var G=(0,M.c)(N),C=G.stream;return G.stream=function(H){var Q=G.rotate(),re=C(H),fe=(G.rotate([0,0]),C(H));return G.rotate(Q),re.sphere=function(){fe.polygonStart(),fe.lineStart(),Fo(fe,Xe),fe.lineEnd(),fe.polygonEnd()},re},G.angle(lt==null?-30:lt*E)}function Fo(Xe,Qe,lt){var N,W,G=Qe.edges,C=G.length,H={type:"MultiPoint",coordinates:Qe.face},Q=Qe.face.filter(function(He){return A(He[1])!==90}),re=(0,xs.c)({type:"MultiPoint",coordinates:Q}),fe=!1,ye=-1,Ce=re[1][0]-re[0][0],De=Ce===180||Ce===360?[(re[0][0]+re[1][0])/2,(re[0][1]+re[1][1])/2]:(0,qe.c)(H);if(lt)for(;++ye<C&&G[ye]!==lt;);++ye;for(var Ue=0;Ue<C;++Ue)W=G[(Ue+ye)%C],Array.isArray(W)?(fe||(Xe.point((N=(0,is.c)(W[0],De)(f))[0],N[1]),fe=!0),Xe.point((N=(0,is.c)(W[1],De)(f))[0],N[1])):(fe=!1,W!==lt&&Fo(Xe,W,Qe))}function ta(Xe,Qe){return Xe&&Qe&&Xe[0]===Qe[0]&&Xe[1]===Qe[1]}function Ya(Xe){return Xe.project.invert||Xe.children&&Xe.children.some(Ya)}var Qr=e(53285),ii=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],La=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Xe){return Xe.map(function(Qe){return ii[Qe]})});function bs(Xe){Xe=Xe||function(lt){var N=(0,qe.c)({type:"MultiPoint",coordinates:lt});return(0,Qr.c)().scale(1).translate([0,0]).rotate([-N[0],-N[1]])};var Qe=La.map(function(lt){return{face:lt,project:Xe(lt)}});return[-1,0,0,1,0,1,4,5].forEach(function(lt,N){var W=Qe[lt];W&&(W.children||(W.children=[])).push(Qe[N])}),ai(Qe[0],function(lt,N){return Qe[lt<-v/2?N<0?6:4:lt<0?N<0?2:0:lt<v/2?N<0?3:1:N<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var Rs=2/I(3);function ol(Xe,Qe){var lt=At(Xe,Qe);return[lt[0]*Rs,lt[1]]}function Fs(Xe){Xe=Xe||function(lt){var N=(0,qe.c)({type:"MultiPoint",coordinates:lt});return(0,M.c)(ol).translate([0,0]).scale(1).rotate(N[1]>0?[-N[0],0]:[180-N[0],180])};var Qe=La.map(function(lt){return{face:lt,project:Xe(lt)}});return[-1,0,0,1,0,1,4,5].forEach(function(lt,N){var W=Qe[lt];W&&(W.children||(W.children=[])).push(Qe[N])}),ai(Qe[0],function(lt,N){return Qe[lt<-v/2?N<0?6:4:lt<0?N<0?2:0:lt<v/2?N<0?3:1:N<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Bs(Xe){Xe=Xe||function(G){var C=G.length===6?(0,qe.c)({type:"MultiPoint",coordinates:G}):G[0];return(0,Qr.c)().scale(1).translate([0,0]).rotate([-C[0],-C[1]])};var Qe=La.map(function(G){for(var C,H=G.map(No),Q=H.length,re=H[Q-1],fe=[],ye=0;ye<Q;++ye)C=H[ye],fe.push(Bo([.9486832980505138*re[0]+.31622776601683794*C[0],.9486832980505138*re[1]+.31622776601683794*C[1],.9486832980505138*re[2]+.31622776601683794*C[2]]),Bo([.9486832980505138*C[0]+.31622776601683794*re[0],.9486832980505138*C[1]+.31622776601683794*re[1],.9486832980505138*C[2]+.31622776601683794*re[2]])),re=C;return fe}),lt=[],N=[-1,0,0,1,0,1,4,5];Qe.forEach(function(G,C){for(var H,Q,re=La[C],fe=re.length,ye=lt[C]=[],Ce=0;Ce<fe;++Ce)Qe.push([re[Ce],G[(2*Ce+2)%(2*fe)],G[(2*Ce+1)%(2*fe)]]),N.push(C),ye.push((H=No(G[(2*Ce+2)%(2*fe)]),Q=No(G[(2*Ce+1)%(2*fe)]),[H[1]*Q[2]-H[2]*Q[1],H[2]*Q[0]-H[0]*Q[2],H[0]*Q[1]-H[1]*Q[0]]))});var W=Qe.map(function(G){return{project:Xe(G),face:G}});return N.forEach(function(G,C){var H=W[G];H&&(H.children||(H.children=[])).push(W[C])}),ai(W[0],function(G,C){var H=_(C),Q=[H*_(G),H*c(G),c(C)],re=G<-v/2?C<0?6:4:G<0?C<0?2:0:G<v/2?C<0?3:1:C<0?7:5,fe=lt[re];return W[Da(fe[0],Q)<0?8+3*re:Da(fe[1],Q)<0?8+3*re+1:Da(fe[2],Q)<0?8+3*re+2:re]}).angle(-30).scale(110.625).center([0,45])}function Da(Xe,Qe){for(var lt=0,N=Xe.length,W=0;lt<N;++lt)W+=Xe[lt]*Qe[lt];return W}function Bo(Xe){return[w(Xe[1],Xe[0])*E,L(a(-1,r(1,Xe[2])))*E]}function No(Xe){var Qe=Xe[0]*k,lt=Xe[1]*k,N=_(lt);return[N*_(Qe),N*c(Qe),c(lt)]}function sa(){}function Ns(Xe,Qe){var lt,N=Qe.stream;if(!N)throw new Error("invalid projection");switch(Xe&&Xe.type){case"Feature":lt=Hi;break;case"FeatureCollection":lt=Ra;break;default:lt=Xi}return lt(Xe,N)}function Ra(Xe,Qe){return{type:"FeatureCollection",features:Xe.features.map(function(lt){return Hi(lt,Qe)})}}function Hi(Xe,Qe){return{type:"Feature",id:Xe.id,properties:Xe.properties,geometry:Xi(Xe.geometry,Qe)}}function Xi(Xe,Qe){if(!Xe)return null;if(Xe.type==="GeometryCollection")return function(N,W){return{type:"GeometryCollection",geometries:N.geometries.map(function(G){return Xi(G,W)})}}(Xe,Qe);var lt;switch(Xe.type){case"Point":case"MultiPoint":lt=so;break;case"LineString":case"MultiLineString":lt=os;break;case"Polygon":case"MultiPolygon":case"Sphere":lt=Za;break;default:return null}return(0,hn.c)(Xe,Qe(lt)),lt.result()}ol.invert=function(Xe,Qe){return At.invert(Xe/Rs,Qe)};var hi=[],Ji=[],so={point:function(Xe,Qe){hi.push([Xe,Qe])},result:function(){var Xe=hi.length?hi.length<2?{type:"Point",coordinates:hi[0]}:{type:"MultiPoint",coordinates:hi}:null;return hi=[],Xe}},os={lineStart:sa,point:function(Xe,Qe){hi.push([Xe,Qe])},lineEnd:function(){hi.length&&(Ji.push(hi),hi=[])},result:function(){var Xe=Ji.length?Ji.length<2?{type:"LineString",coordinates:Ji[0]}:{type:"MultiLineString",coordinates:Ji}:null;return Ji=[],Xe}},Za={polygonStart:sa,lineStart:sa,point:function(Xe,Qe){hi.push([Xe,Qe])},lineEnd:function(){var Xe=hi.length;if(Xe){do hi.push(hi[0].slice());while(++Xe<4);Ji.push(hi),hi=[]}},polygonEnd:sa,result:function(){if(!Ji.length)return null;var Xe=[],Qe=[];return Ji.forEach(function(lt){(function(N){if((W=N.length)<4)return!1;for(var W,G=0,C=N[W-1][1]*N[0][0]-N[W-1][0]*N[0][1];++G<W;)C+=N[G-1][1]*N[G][0]-N[G-1][0]*N[G][1];return C<=0})(lt)?Xe.push([lt]):Qe.push(lt)}),Qe.forEach(function(lt){var N=lt[0];Xe.some(function(W){if(function(G,C){for(var H=C[0],Q=C[1],re=!1,fe=0,ye=G.length,Ce=ye-1;fe<ye;Ce=fe++){var De=G[fe],Ue=De[0],He=De[1],tt=G[Ce],ct=tt[0],pt=tt[1];He>Q^pt>Q&&H<(ct-Ue)*(Q-He)/(pt-He)+Ue&&(re=!re)}return re}(W[0],N))return W.push(lt),!0})||Xe.push([lt])}),Ji=[],Xe.length?Xe.length>1?{type:"MultiPolygon",coordinates:Xe}:{type:"Polygon",coordinates:Xe[0]}:null}};function jo(Xe){var Qe=Xe(d,0)[0]-Xe(-d,0)[0];function lt(N,W){var G=A(N)<d,C=Xe(G?N:N>0?N-v:N+v,W),H=(C[0]-C[1])*x,Q=(C[0]+C[1])*x;if(G)return[H,Q];var re=Qe*x,fe=H>0^Q>0?-1:1;return[fe*H-u(Q)*re,fe*Q-u(H)*re]}return Xe.invert&&(lt.invert=function(N,W){var G=(N+W)*x,C=(W-N)*x,H=A(G)<.5*Qe&&A(C)<.5*Qe;if(!H){var Q=Qe*x,re=G>0^C>0?-1:1,fe=-re*N+(C>0?1:-1)*Q,ye=-re*W+(G>0?1:-1)*Q;G=(-fe-ye)*x,C=(fe-ye)*x}var Ce=Xe.invert(G,C);return H||(Ce[0]+=G>0?v:-v),Ce}),(0,M.c)(lt).rotate([-90,-90,45]).clipAngle(179.999)}function ga(){return jo(Bn).scale(176.423)}function ss(){return jo(yn).scale(111.48)}function wo(Xe,Qe){if(!(0<=(Qe=+Qe)&&Qe<=20))throw new Error("invalid digits");function lt(re){var fe=re.length,ye=2,Ce=new Array(fe);for(Ce[0]=+re[0].toFixed(Qe),Ce[1]=+re[1].toFixed(Qe);ye<fe;)Ce[ye]=re[ye],++ye;return Ce}function N(re){return re.map(lt)}function W(re){for(var fe=lt(re[0]),ye=[fe],Ce=1;Ce<re.length;Ce++){var De=lt(re[Ce]);(De.length>2||De[0]!=fe[0]||De[1]!=fe[1])&&(ye.push(De),fe=De)}return ye.length===1&&re.length>1&&ye.push(lt(re[re.length-1])),ye}function G(re){return re.map(W)}function C(re){if(re==null)return re;var fe;switch(re.type){case"GeometryCollection":fe={type:"GeometryCollection",geometries:re.geometries.map(C)};break;case"Point":fe={type:"Point",coordinates:lt(re.coordinates)};break;case"MultiPoint":fe={type:re.type,coordinates:N(re.coordinates)};break;case"LineString":fe={type:re.type,coordinates:W(re.coordinates)};break;case"MultiLineString":case"Polygon":fe={type:re.type,coordinates:G(re.coordinates)};break;case"MultiPolygon":fe={type:"MultiPolygon",coordinates:re.coordinates.map(G)};break;default:return re}return re.bbox!=null&&(fe.bbox=re.bbox),fe}function H(re){var fe={type:"Feature",properties:re.properties,geometry:C(re.geometry)};return re.id!=null&&(fe.id=re.id),re.bbox!=null&&(fe.bbox=re.bbox),fe}if(Xe!=null)switch(Xe.type){case"Feature":return H(Xe);case"FeatureCollection":var Q={type:"FeatureCollection",features:Xe.features.map(H)};return Xe.bbox!=null&&(Q.bbox=Xe.bbox),Q;default:return C(Xe)}return Xe}function Fa(Xe){var Qe=c(Xe);function lt(N,W){var G=Qe?g(N*Qe/2)/Qe:N/2;if(!W)return[2*G,-Xe];var C=2*o(G*c(W)),H=1/g(W);return[c(C)*H,W+(1-_(C))*H-Xe]}return lt.invert=function(N,W){if(A(W+=Xe)<f)return[Qe?2*o(Qe*N/2)/Qe:N,0];var G,C=N*N+W*W,H=0,Q=10;do{var re=g(H),fe=1/_(H),ye=C-2*W*H+H*H;H-=G=(re*ye+2*(H-W))/(2+ye*fe*fe+2*(H-W)*re)}while(A(G)>f&&--Q>0);var Ce=N*(re=g(H)),De=g(A(W)<A(H+1/re)?.5*L(Ce):.5*P(Ce)+v/4)/c(H);return[Qe?2*o(Qe*De)/Qe:2*De,H]},lt}function Ba(){return Le(Fa).scale(131.215)}var di=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Xa(Xe,Qe){var lt,N=r(18,36*A(Qe)/v),W=s(N),G=N-W,C=(lt=di[W])[0],H=lt[1],Q=(lt=di[++W])[0],re=lt[1],fe=(lt=di[r(19,++W)])[0],ye=lt[1];return[Xe*(Q+G*(fe-C)/2+G*G*(fe-2*Q+C)/2),(Qe>0?d:-d)*(re+G*(ye-H)/2+G*G*(ye-2*re+H)/2)]}function Lr(){return(0,M.c)(Xa).scale(152.63)}function js(Xe,Qe){var lt=function(C){function H(Q,re){var fe=_(re),ye=(C-1)/(C-fe*_(Q));return[ye*fe*c(Q),ye*c(re)]}return H.invert=function(Q,re){var fe=Q*Q+re*re,ye=I(fe),Ce=(C-I(1-fe*(C+1)/(C-1)))/((C-1)/ye+ye/(C-1));return[w(Q*Ce,ye*I(1-Ce*Ce)),ye?L(re*Ce/ye):0]},H}(Xe);if(!Qe)return lt;var N=_(Qe),W=c(Qe);function G(C,H){var Q=lt(C,H),re=Q[1],fe=re*W/(Xe-1)+N;return[Q[0]*N/fe,re/fe]}return G.invert=function(C,H){var Q=(Xe-1)/(Xe-1-H*W);return lt.invert(Q*C,Q*H*N)},G}function dl(){var Xe=2,Qe=0,lt=(0,M.U)(js),N=lt(Xe,Qe);return N.distance=function(W){return arguments.length?lt(Xe=+W,Qe):Xe},N.tilt=function(W){return arguments.length?lt(Xe,Qe=W*k):Qe*E},N.scale(432.147).clipAngle(P(1/Xe)*E-1e-6)}di.forEach(function(Xe){Xe[1]*=1.0144}),Xa.invert=function(Xe,Qe){var lt=Qe/d,N=90*lt,W=r(18,A(N/5)),G=a(0,s(W));do{var C=di[G][1],H=di[G+1][1],Q=di[r(19,G+2)][1],re=Q-C,fe=Q-2*H+C,ye=2*(A(lt)-H)/re,Ce=fe/re,De=ye*(1-Ce*ye*(1-2*Ce*ye));if(De>=0||G===1){N=(Qe>=0?5:-5)*(De+W);var Ue,He=50;do De=(W=r(18,A(N)/5))-(G=s(W)),C=di[G][1],H=di[G+1][1],Q=di[r(19,G+2)][1],N-=(Ue=(Qe>=0?d:-d)*(H+De*(Q-C)/2+De*De*(Q-2*H+C)/2)-Qe)*E;while(A(Ue)>b&&--He>0);break}}while(--G>=0);var tt=di[G][0],ct=di[G+1][0],pt=di[r(19,G+2)][0];return[Xe/(ct+De*(pt-tt)/2+De*De*(pt-2*ct+tt)/2),N*k]};var Uo=1e-4,Vo=1e4,ls=-180,_s=ls+Uo,_r=180,Us=_r-Uo,To=-90,Gi=To+Uo,qo=90,Ja=qo-Uo;function Na(Xe){return Xe.length>0}function la(Xe){return Xe===To||Xe===qo?[0,Xe]:[ls,(Qe=Xe,Math.floor(Qe*Vo)/Vo)];var Qe}function lo(Xe){var Qe=Xe[0],lt=Xe[1],N=!1;return Qe<=_s?(Qe=ls,N=!0):Qe>=Us&&(Qe=_r,N=!0),lt<=Gi?(lt=To,N=!0):lt>=Ja&&(lt=qo,N=!0),N?[Qe,lt]:Xe}function ja(Xe){return Xe.map(lo)}function ko(Xe,Qe,lt){for(var N=0,W=Xe.length;N<W;++N){var G=Xe[N].slice();lt.push({index:-1,polygon:Qe,ring:G});for(var C=0,H=G.length;C<H;++C){var Q=G[C],re=Q[0],fe=Q[1];if(re<=_s||re>=Us||fe<=Gi||fe>=Ja){G[C]=lo(Q);for(var ye=C+1;ye<H;++ye){var Ce=G[ye],De=Ce[0],Ue=Ce[1];if(De>_s&&De<Us&&Ue>Gi&&Ue<Ja)break}if(ye===C+1)continue;if(C){var He={index:-1,polygon:Qe,ring:G.slice(0,C+1)};He.ring[He.ring.length-1]=la(fe),lt[lt.length-1]=He}else lt.pop();if(ye>=H)break;lt.push({index:-1,polygon:Qe,ring:G=G.slice(ye-1)}),G[0]=la(G[0][1]),C=-1,H=G.length}}}}function Vs(Xe){var Qe,lt,N,W,G,C,H=Xe.length,Q={},re={};for(Qe=0;Qe<H;++Qe)N=(lt=Xe[Qe]).ring[0],G=lt.ring[lt.ring.length-1],N[0]!==G[0]||N[1]!==G[1]?(lt.index=Qe,Q[N]=re[G]=lt):(lt.polygon.push(lt.ring),Xe[Qe]=null);for(Qe=0;Qe<H;++Qe)if(lt=Xe[Qe]){if(N=lt.ring[0],G=lt.ring[lt.ring.length-1],W=re[N],C=Q[G],delete Q[N],delete re[G],N[0]===G[0]&&N[1]===G[1]){lt.polygon.push(lt.ring);continue}W?(delete re[N],delete Q[W.ring[0]],W.ring.pop(),Xe[W.index]=null,lt={index:-1,polygon:W.polygon,ring:W.ring.concat(lt.ring)},W===C?lt.polygon.push(lt.ring):(lt.index=H++,Xe.push(Q[lt.ring[0]]=re[lt.ring[lt.ring.length-1]]=lt))):C?(delete Q[G],delete re[C.ring[C.ring.length-1]],lt.ring.pop(),lt={index:H++,polygon:C.polygon,ring:lt.ring.concat(C.ring)},Xe[C.index]=null,Xe.push(Q[lt.ring[0]]=re[lt.ring[lt.ring.length-1]]=lt)):(lt.ring.push(lt.ring[0]),lt.polygon.push(lt.ring))}}function Ho(Xe){var Qe={type:"Feature",geometry:Kr(Xe.geometry)};return Xe.id!=null&&(Qe.id=Xe.id),Xe.bbox!=null&&(Qe.bbox=Xe.bbox),Xe.properties!=null&&(Qe.properties=Xe.properties),Qe}function Kr(Xe){if(Xe==null)return Xe;var Qe,lt,N,W;switch(Xe.type){case"GeometryCollection":Qe={type:"GeometryCollection",geometries:Xe.geometries.map(Kr)};break;case"Point":Qe={type:"Point",coordinates:lo(Xe.coordinates)};break;case"MultiPoint":case"LineString":Qe={type:Xe.type,coordinates:ja(Xe.coordinates)};break;case"MultiLineString":Qe={type:"MultiLineString",coordinates:Xe.coordinates.map(ja)};break;case"Polygon":var G=[];ko(Xe.coordinates,G,lt=[]),Vs(lt),Qe={type:"Polygon",coordinates:G};break;case"MultiPolygon":lt=[],N=-1,W=Xe.coordinates.length;for(var C=new Array(W);++N<W;)ko(Xe.coordinates[N],C[N]=[],lt);Vs(lt),Qe={type:"MultiPolygon",coordinates:C.filter(Na)};break;default:return Xe}return Xe.bbox!=null&&(Qe.bbox=Xe.bbox),Qe}function Ki(Xe){if(Xe==null)return Xe;switch(Xe.type){case"Feature":return Ho(Xe);case"FeatureCollection":var Qe={type:"FeatureCollection",features:Xe.features.map(Ho)};return Xe.bbox!=null&&(Qe.bbox=Xe.bbox),Qe;default:return Kr(Xe)}}function va(Xe,Qe){var lt=g(Qe/2),N=c(m*lt);return[Xe*(.74482-.34588*N*N),1.70711*lt]}function uo(){return(0,M.c)(va).scale(146.153)}function ma(Xe,Qe,lt){var N=(0,is.c)(Qe,lt),W=N(.5),G=(0,Je.c)([-W[0],-W[1]])(Qe),C=N.distance/2,H=-L(c(G[1]*k)/c(C)),Q=[-W[0],-W[1],-(G[0]>0?v-H:H)*E],re=(0,M.c)(Xe(C)).rotate(Q),fe=(0,Je.c)(Q),ye=re.center;return delete re.rotate,re.center=function(Ce){return arguments.length?ye(fe(Ce)):fe.invert(ye())},re.clipAngle(90)}function ws(Xe){var Qe=_(Xe);function lt(N,W){var G=(0,Qr.Y)(N,W);return G[0]*=Qe,G}return lt.invert=function(N,W){return Qr.Y.invert(N/Qe,W)},lt}function Ts(){return ya([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function ya(Xe,Qe){return ma(ws,Xe,Qe)}function Xr(Xe){if(!(Xe*=2))return te.O;var Qe=-Xe/2,lt=-Qe,N=Xe*Xe,W=g(lt),G=.5/c(lt);function C(H,Q){var re=P(_(Q)*_(H-Qe)),fe=P(_(Q)*_(H-lt));return[((re*=re)-(fe*=fe))/(2*Xe),(Q<0?-1:1)*I(4*N*fe-(N-re+fe)*(N-re+fe))/(2*Xe)]}return C.invert=function(H,Q){var re,fe,ye=Q*Q,Ce=_(I(ye+(re=H+Qe)*re)),De=_(I(ye+(re=H+lt)*re));return[w(fe=Ce-De,re=(Ce+De)*W),(Q<0?-1:1)*P(I(re*re+fe*fe)*G)]},C}function co(){return us([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function us(Xe,Qe){return ma(Xr,Xe,Qe)}function Ka(Xe,Qe){if(A(Qe)<f)return[Xe,0];var lt=A(Qe/d),N=L(lt);if(A(Xe)<f||A(A(Qe)-d)<f)return[0,u(Qe)*v*g(N/2)];var W=_(N),G=A(v/Xe-Xe/v)/2,C=G*G,H=W/(lt+W-1),Q=H*(2/lt-1),re=Q*Q,fe=re+C,ye=H-re,Ce=C+H;return[u(Xe)*v*(G*ye+I(C*ye*ye-fe*(H*H-re)))/fe,u(Qe)*v*(Q*Ce-G*I((C+1)*fe-Ce*Ce))/fe]}function ks(){return(0,M.c)(Ka).scale(79.4183)}function As(Xe,Qe){if(A(Qe)<f)return[Xe,0];var lt=A(Qe/d),N=L(lt);if(A(Xe)<f||A(A(Qe)-d)<f)return[0,u(Qe)*v*g(N/2)];var W=_(N),G=A(v/Xe-Xe/v)/2,C=G*G,H=W*(I(1+C)-G*W)/(1+C*lt*lt);return[u(Xe)*v*H,u(Qe)*v*I(1-H*(2*G+H))]}function $a(){return(0,M.c)(As).scale(79.4183)}function gi(Xe,Qe){if(A(Qe)<f)return[Xe,0];var lt=Qe/d,N=L(lt);if(A(Xe)<f||A(A(Qe)-d)<f)return[0,v*g(N/2)];var W=(v/Xe-Xe/v)/2,G=lt/(1+_(N));return[v*(u(Xe)*I(W*W+1-G*G)-W),v*G]}function cs(){return(0,M.c)(gi).scale(79.4183)}function Pr(Xe,Qe){if(!Qe)return[Xe,0];var lt=A(Qe);if(!Xe||lt===d)return[0,Qe];var N=lt/d,W=N*N,G=(8*N-W*(W+2)-5)/(2*W*(N-1)),C=G*G,H=N*G,Q=W+C+2*H,re=N+3*G,fe=Xe/d,ye=fe+1/fe,Ce=u(A(Xe)-d)*I(ye*ye-4),De=Ce*Ce,Ue=(Ce*(Q+C-1)+2*I(Q*(W+C*De-1)+(1-W)*(W*(re*re+4*C)+12*H*C+4*C*C)))/(4*Q+De);return[u(Xe)*d*Ue,u(Qe)*d*I(1+Ce*A(Ue)-Ue*Ue)]}function Br(){return(0,M.c)(Pr).scale(127.16)}function Ca(Xe,Qe,lt,N){var W=v/3;Xe=a(Xe,f),Qe=a(Qe,f),Xe=r(Xe,d),Qe=r(Qe,v-f),lt=a(lt,0),lt=r(lt,100-f);var G=(N=a(N,f))/100,C=P((lt/100+1)*_(W))/W,H=c(Xe)/c(C*d),Q=Qe/v,re=I(G*c(Xe/2)/c(Qe/2));return function(fe,ye,Ce,De,Ue){function He(tt,ct){var pt=Ce*c(De*ct),kt=I(1-pt*pt),Lt=I(2/(1+kt*_(tt*=Ue)));return[fe*kt*Lt*c(tt),ye*pt*Lt]}return He.invert=function(tt,ct){var pt=tt/fe,kt=ct/ye,Lt=I(pt*pt+kt*kt),St=2*L(Lt/2);return[w(tt*g(St),fe*Lt)/Ue,Lt&&L(ct*c(St)/(ye*Ce*Lt))/De]},He}(re/I(Q*H*C),1/(re*I(Q*H*C)),H,C,Q)}function fo(){var Xe=65*k,Qe=60*k,lt=20,N=200,W=(0,M.U)(Ca),G=W(Xe,Qe,lt,N);return G.poleline=function(C){return arguments.length?W(Xe=+C*k,Qe,lt,N):Xe*E},G.parallels=function(C){return arguments.length?W(Xe,Qe=+C*k,lt,N):Qe*E},G.inflation=function(C){return arguments.length?W(Xe,Qe,lt=+C,N):lt},G.ratio=function(C){return arguments.length?W(Xe,Qe,lt,N=+C):N},G.scale(163.775)}function Ao(){return fo().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}va.invert=function(Xe,Qe){var lt=Qe/1.70711,N=c(m*lt);return[Xe/(.74482-.34588*N*N),2*o(lt)]},Ka.invert=function(Xe,Qe){if(A(Qe)<f)return[Xe,0];if(A(Xe)<f)return[0,d*c(2*o(Qe/v))];var lt=(Xe/=v)*Xe,N=(Qe/=v)*Qe,W=lt+N,G=W*W,C=-A(Qe)*(1+W),H=C-2*N+lt,Q=-2*C+1+2*N+G,re=N/Q+(2*H*H*H/(Q*Q*Q)-9*C*H/(Q*Q))/27,fe=(C-H*H/(3*Q))/Q,ye=2*I(-fe/3),Ce=P(3*re/(fe*ye))/3;return[v*(W-1+I(1+2*(lt-N)+G))/(2*Xe),u(Qe)*v*(-ye*_(Ce+v/3)-H/(3*Q))]},As.invert=function(Xe,Qe){if(!Xe)return[0,d*c(2*o(Qe/v))];var lt=A(Xe/v),N=(1-lt*lt-(Qe/=v)*Qe)/(2*lt),W=I(N*N+1);return[u(Xe)*v*(W-N),u(Qe)*d*c(2*w(I((1-2*N*lt)*(N+W)-lt),I(W+N+lt)))]},gi.invert=function(Xe,Qe){if(!Qe)return[Xe,0];var lt=Qe/v,N=(v*v*(1-lt*lt)-Xe*Xe)/(2*v*Xe);return[Xe?v*(u(Xe)*I(N*N+1)-N):0,d*c(2*o(lt))]},Pr.invert=function(Xe,Qe){var lt;if(!Xe||!Qe)return[Xe,Qe];Qe/=v;var N=u(Xe)*Xe/d,W=(N*N-1+4*Qe*Qe)/A(N),G=W*W,C=2*Qe,H=50;do{var Q=C*C,re=(8*C-Q*(Q+2)-5)/(2*Q*(C-1)),fe=(3*C-Q*C-10)/(2*Q*C),ye=re*re,Ce=C*re,De=C+re,Ue=De*De,He=C+3*re,tt=-2*De*(4*Ce*ye+(1-4*Q+3*Q*Q)*(1+fe)+ye*(14*Q-6-G+(8*Q-8-2*G)*fe)+Ce*(12*Q-8+(10*Q-10-G)*fe)),ct=I(Ue*(Q+ye*G-1)+(1-Q)*(Q*(He*He+4*ye)+ye*(12*Ce+4*ye)));C-=lt=(W*(Ue+ye-1)+2*ct-N*(4*Ue+G))/(W*(2*re*fe+2*De*(1+fe))+tt/ct-8*De*(W*(-1+ye+Ue)+2*ct)*(1+fe)/(G+4*Ue))}while(lt>f&&--H>0);return[u(Xe)*(I(W*W+4)+W)*v/4,d*C]};var Ri=4*v+3*I(3),ho=2*I(2*v*I(3)/Ri),oi=_e(ho*I(3)/v,ho,Ri/6);function Ll(){return(0,M.c)(oi).scale(176.84)}function Pa(Xe,Qe){return[Xe*I(1-3*Qe*Qe/(v*v)),Qe]}function ui(){return(0,M.c)(Pa).scale(152.63)}function bi(Xe,Qe){var lt=_(Qe),N=_(Xe)*lt,W=1-N,G=_(Xe=w(c(Xe)*lt,-c(Qe))),C=c(Xe);return[C*(lt=I(1-N*N))-G*W,-G*lt-C*W]}function Ta(){return(0,M.c)(bi).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function Go(Xe,Qe){var lt=j(Xe,Qe);return[(lt[0]+Xe/d)/2,(lt[1]+Qe)/2]}function vl(){return(0,M.c)(Go).scale(158.837)}Pa.invert=function(Xe,Qe){return[Xe/I(1-3*Qe*Qe/(v*v)),Qe]},bi.invert=function(Xe,Qe){var lt=(Xe*Xe+Qe*Qe)/-2,N=I(-lt*(2+lt)),W=Qe*lt+Xe*N,G=Xe*lt-Qe*N,C=I(G*G+W*W);return[w(N*W,C*(1+lt)),C?-L(N*G/C):0]},Go.invert=function(Xe,Qe){var lt=Xe,N=Qe,W=25;do{var G,C=_(N),H=c(N),Q=c(2*N),re=H*H,fe=C*C,ye=c(lt),Ce=_(lt/2),De=c(lt/2),Ue=De*De,He=1-fe*Ce*Ce,tt=He?P(C*Ce)*I(G=1/He):G=0,ct=.5*(2*tt*C*De+lt/d)-Xe,pt=.5*(tt*H+N)-Qe,kt=.5*G*(fe*Ue+tt*C*Ce*re)+.5/d,Lt=G*(ye*Q/4-tt*H*De),St=.125*G*(Q*De-tt*H*fe*ye),jt=.5*G*(re*Ce+tt*Ue*C)+.5,zt=Lt*St-jt*kt,Qt=(pt*Lt-ct*jt)/zt,Zt=(ct*St-pt*kt)/zt;lt-=Qt,N-=Zt}while((A(Qt)>f||A(Zt)>f)&&--W>0);return[lt,N]}},88728:function(Y,O,e){function M(){return new A}function A(){this.reset()}e.d(O,{c:function(){return M}}),A.prototype={constructor:A,reset:function(){this.s=this.t=0},add:function(_){w(o,_,this.t),w(this,o.s,this.s),this.s?this.t+=o.t:this.s=o.t},valueOf:function(){return this.s}};var o=new A;function w(_,p,s){var n=_.s=p+s,a=n-p,r=n-a;_.t=p-r+(s-a)}},95384:function(Y,O,e){e.d(O,{cp:function(){return b},mQ:function(){return r},oB:function(){return l}});var M,A,o,w,_,p=e(88728),s=e(64528),n=e(70932),a=e(16016),r=(0,p.c)(),i=(0,p.c)(),l={point:n.c,lineStart:n.c,lineEnd:n.c,polygonStart:function(){r.reset(),l.lineStart=u,l.lineEnd=c},polygonEnd:function(){var v=+r;i.add(v<0?s.kD+v:v),this.lineStart=this.lineEnd=this.point=n.c},sphere:function(){i.add(s.kD)}};function u(){l.point=g}function c(){f(M,A)}function g(v,d){l.point=f,M=v,A=d,v*=s.qw,d*=s.qw,o=v,w=(0,s.W8)(d=d/2+s.wL),_=(0,s.g$)(d)}function f(v,d){v*=s.qw,d=(d*=s.qw)/2+s.wL;var m=v-o,x=m>=0?1:-1,y=x*m,T=(0,s.W8)(d),h=(0,s.g$)(d),E=_*h,k=w*T+E*(0,s.W8)(y),L=E*x*(0,s.g$)(y);r.add((0,s.WE)(L,k)),o=v,w=T,_=h}function b(v){return i.reset(),(0,a.c)(v,l),2*i}},13696:function(Y,O,e){e.d(O,{c:function(){return P}});var M,A,o,w,_,p,s,n,a,r,i=e(88728),l=e(95384),u=e(84220),c=e(64528),g=e(16016),f=(0,i.c)(),b={point:v,lineStart:m,lineEnd:x,polygonStart:function(){b.point=y,b.lineStart=T,b.lineEnd=h,f.reset(),l.oB.polygonStart()},polygonEnd:function(){l.oB.polygonEnd(),b.point=v,b.lineStart=m,b.lineEnd=x,l.mQ<0?(M=-(o=180),A=-(w=90)):f>c.Gg?w=90:f<-c.Gg&&(A=-90),r[0]=M,r[1]=o},sphere:function(){M=-(o=180),A=-(w=90)}};function v(I,z){a.push(r=[M=I,o=I]),z<A&&(A=z),z>w&&(w=z)}function d(I,z){var F=(0,u.ux)([I*c.qw,z*c.qw]);if(n){var U=(0,u.CW)(n,F),R=[U[1],-U[0],0],j=(0,u.CW)(R,U);(0,u.cJ)(j),j=(0,u.G)(j);var Z,B=I-_,q=B>0?1:-1,V=j[0]*c.oh*q,ne=(0,c.a2)(B)>180;ne^(q*_<V&&V<q*I)?(Z=j[1]*c.oh)>w&&(w=Z):ne^(q*_<(V=(V+360)%360-180)&&V<q*I)?(Z=-j[1]*c.oh)<A&&(A=Z):(z<A&&(A=z),z>w&&(w=z)),ne?I<_?E(M,I)>E(M,o)&&(o=I):E(I,o)>E(M,o)&&(M=I):o>=M?(I<M&&(M=I),I>o&&(o=I)):I>_?E(M,I)>E(M,o)&&(o=I):E(I,o)>E(M,o)&&(M=I)}else a.push(r=[M=I,o=I]);z<A&&(A=z),z>w&&(w=z),n=F,_=I}function m(){b.point=d}function x(){r[0]=M,r[1]=o,b.point=v,n=null}function y(I,z){if(n){var F=I-_;f.add((0,c.a2)(F)>180?F+(F>0?360:-360):F)}else p=I,s=z;l.oB.point(I,z),d(I,z)}function T(){l.oB.lineStart()}function h(){y(p,s),l.oB.lineEnd(),(0,c.a2)(f)>c.Gg&&(M=-(o=180)),r[0]=M,r[1]=o,n=null}function E(I,z){return(z-=I)<0?z+360:z}function k(I,z){return I[0]-z[0]}function L(I,z){return I[0]<=I[1]?I[0]<=z&&z<=I[1]:z<I[0]||I[1]<z}function P(I){var z,F,U,R,j,Z,B;if(w=o=-(M=A=1/0),a=[],(0,g.c)(I,b),F=a.length){for(a.sort(k),z=1,j=[U=a[0]];z<F;++z)L(U,(R=a[z])[0])||L(U,R[1])?(E(U[0],R[1])>E(U[0],U[1])&&(U[1]=R[1]),E(R[0],U[1])>E(U[0],U[1])&&(U[0]=R[0])):j.push(U=R);for(Z=-1/0,z=0,U=j[F=j.length-1];z<=F;U=R,++z)R=j[z],(B=E(U[1],R[0]))>Z&&(Z=B,M=R[0],o=U[1])}return a=r=null,M===1/0||A===1/0?[[NaN,NaN],[NaN,NaN]]:[[M,A],[o,w]]}},84220:function(Y,O,e){e.d(O,{CW:function(){return _},Ez:function(){return w},G:function(){return A},cJ:function(){return n},mg:function(){return p},ux:function(){return o},wx:function(){return s}});var M=e(64528);function A(a){return[(0,M.WE)(a[1],a[0]),(0,M.qR)(a[2])]}function o(a){var r=a[0],i=a[1],l=(0,M.W8)(i);return[l*(0,M.W8)(r),l*(0,M.g$)(r),(0,M.g$)(i)]}function w(a,r){return a[0]*r[0]+a[1]*r[1]+a[2]*r[2]}function _(a,r){return[a[1]*r[2]-a[2]*r[1],a[2]*r[0]-a[0]*r[2],a[0]*r[1]-a[1]*r[0]]}function p(a,r){a[0]+=r[0],a[1]+=r[1],a[2]+=r[2]}function s(a,r){return[a[0]*r,a[1]*r,a[2]*r]}function n(a){var r=(0,M._I)(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=r,a[1]/=r,a[2]/=r}},24052:function(Y,O,e){e.d(O,{c:function(){return F}});var M,A,o,w,_,p,s,n,a,r,i,l,u,c,g,f,b=e(64528),v=e(70932),d=e(16016),m={sphere:v.c,point:x,lineStart:T,lineEnd:k,polygonStart:function(){m.lineStart=L,m.lineEnd=P},polygonEnd:function(){m.lineStart=T,m.lineEnd=k}};function x(U,R){U*=b.qw,R*=b.qw;var j=(0,b.W8)(R);y(j*(0,b.W8)(U),j*(0,b.g$)(U),(0,b.g$)(R))}function y(U,R,j){++M,o+=(U-o)/M,w+=(R-w)/M,_+=(j-_)/M}function T(){m.point=h}function h(U,R){U*=b.qw,R*=b.qw;var j=(0,b.W8)(R);c=j*(0,b.W8)(U),g=j*(0,b.g$)(U),f=(0,b.g$)(R),m.point=E,y(c,g,f)}function E(U,R){U*=b.qw,R*=b.qw;var j=(0,b.W8)(R),Z=j*(0,b.W8)(U),B=j*(0,b.g$)(U),q=(0,b.g$)(R),V=(0,b.WE)((0,b._I)((V=g*q-f*B)*V+(V=f*Z-c*q)*V+(V=c*B-g*Z)*V),c*Z+g*B+f*q);A+=V,p+=V*(c+(c=Z)),s+=V*(g+(g=B)),n+=V*(f+(f=q)),y(c,g,f)}function k(){m.point=x}function L(){m.point=I}function P(){z(l,u),m.point=x}function I(U,R){l=U,u=R,U*=b.qw,R*=b.qw,m.point=z;var j=(0,b.W8)(R);c=j*(0,b.W8)(U),g=j*(0,b.g$)(U),f=(0,b.g$)(R),y(c,g,f)}function z(U,R){U*=b.qw,R*=b.qw;var j=(0,b.W8)(R),Z=j*(0,b.W8)(U),B=j*(0,b.g$)(U),q=(0,b.g$)(R),V=g*q-f*B,ne=f*Z-c*q,ee=c*B-g*Z,$=(0,b._I)(V*V+ne*ne+ee*ee),J=(0,b.qR)($),K=$&&-J/$;a+=K*V,r+=K*ne,i+=K*ee,A+=J,p+=J*(c+(c=Z)),s+=J*(g+(g=B)),n+=J*(f+(f=q)),y(c,g,f)}function F(U){M=A=o=w=_=p=s=n=a=r=i=0,(0,d.c)(U,m);var R=a,j=r,Z=i,B=R*R+j*j+Z*Z;return B<b.a8&&(R=p,j=s,Z=n,A<b.Gg&&(R=o,j=w,Z=_),(B=R*R+j*j+Z*Z)<b.a8)?[NaN,NaN]:[(0,b.WE)(j,R)*b.oh,(0,b.qR)(Z/(0,b._I)(B))*b.oh]}},61780:function(Y,O,e){e.d(O,{Q:function(){return _},c:function(){return s}});var M=e(84220);function A(n){return function(){return n}}var o=e(64528),w=e(92992);function _(n,a,r,i,l,u){if(r){var c=(0,o.W8)(a),g=(0,o.g$)(a),f=i*r;l==null?(l=a+i*o.kD,u=a-f/2):(l=p(c,l),u=p(c,u),(i>0?l<u:l>u)&&(l+=i*o.kD));for(var b,v=l;i>0?v>u:v<u;v-=f)b=(0,M.G)([c,-g*(0,o.W8)(v),-g*(0,o.g$)(v)]),n.point(b[0],b[1])}}function p(n,a){(a=(0,M.ux)(a))[0]-=n,(0,M.cJ)(a);var r=(0,o.mE)(-a[1]);return((-a[2]<0?-r:r)+o.kD-o.Gg)%o.kD}function s(){var n,a,r=A([0,0]),i=A(90),l=A(6),u={point:function(g,f){n.push(g=a(g,f)),g[0]*=o.oh,g[1]*=o.oh}};function c(){var g=r.apply(this,arguments),f=i.apply(this,arguments)*o.qw,b=l.apply(this,arguments)*o.qw;return n=[],a=(0,w.O)(-g[0]*o.qw,-g[1]*o.qw,0).invert,_(u,f,b,1),g={type:"Polygon",coordinates:[n]},n=a=null,g}return c.center=function(g){return arguments.length?(r=typeof g=="function"?g:A([+g[0],+g[1]]),c):r},c.radius=function(g){return arguments.length?(i=typeof g=="function"?g:A(+g),c):i},c.precision=function(g){return arguments.length?(l=typeof g=="function"?g:A(+g),c):l},c}},78284:function(Y,O,e){var M=e(14229),A=e(64528);O.c=(0,M.c)(function(){return!0},function(o){var w,_=NaN,p=NaN,s=NaN;return{lineStart:function(){o.lineStart(),w=1},point:function(n,a){var r=n>0?A.pi:-A.pi,i=(0,A.a2)(n-_);(0,A.a2)(i-A.pi)<A.Gg?(o.point(_,p=(p+a)/2>0?A.or:-A.or),o.point(s,p),o.lineEnd(),o.lineStart(),o.point(r,p),o.point(n,p),w=0):s!==r&&i>=A.pi&&((0,A.a2)(_-s)<A.Gg&&(_-=s*A.Gg),(0,A.a2)(n-r)<A.Gg&&(n-=r*A.Gg),p=function(l,u,c,g){var f,b,v=(0,A.g$)(l-c);return(0,A.a2)(v)>A.Gg?(0,A.MQ)(((0,A.g$)(u)*(b=(0,A.W8)(g))*(0,A.g$)(c)-(0,A.g$)(g)*(f=(0,A.W8)(u))*(0,A.g$)(l))/(f*b*v)):(u+g)/2}(_,p,n,a),o.point(s,p),o.lineEnd(),o.lineStart(),o.point(r,p),w=0),o.point(_=n,p=a),s=r},lineEnd:function(){o.lineEnd(),_=p=NaN},clean:function(){return 2-w}}},function(o,w,_,p){var s;if(o==null)s=_*A.or,p.point(-A.pi,s),p.point(0,s),p.point(A.pi,s),p.point(A.pi,0),p.point(A.pi,-s),p.point(0,-s),p.point(-A.pi,-s),p.point(-A.pi,0),p.point(-A.pi,s);else if((0,A.a2)(o[0]-w[0])>A.Gg){var n=o[0]<w[0]?A.pi:-A.pi;s=_*n/2,p.point(-n,s),p.point(0,s),p.point(n,s)}else p.point(w[0],w[1])},[-A.pi,-A.or])},97208:function(Y,O,e){e.d(O,{c:function(){return A}});var M=e(70932);function A(){var o,w=[];return{point:function(_,p,s){o.push([_,p,s])},lineStart:function(){w.push(o=[])},lineEnd:M.c,rejoin:function(){w.length>1&&w.push(w.pop().concat(w.shift()))},result:function(){var _=w;return w=[],o=null,_}}}},2728:function(Y,O,e){e.d(O,{c:function(){return p}});var M=e(84220),A=e(61780),o=e(64528),w=e(41860),_=e(14229);function p(s){var n=(0,o.W8)(s),a=6*o.qw,r=n>0,i=(0,o.a2)(n)>o.Gg;function l(g,f){return(0,o.W8)(g)*(0,o.W8)(f)>n}function u(g,f,b){var v=(0,M.ux)(g),d=(0,M.ux)(f),m=[1,0,0],x=(0,M.CW)(v,d),y=(0,M.Ez)(x,x),T=x[0],h=y-T*T;if(!h)return!b&&g;var E=n*y/h,k=-n*T/h,L=(0,M.CW)(m,x),P=(0,M.wx)(m,E),I=(0,M.wx)(x,k);(0,M.mg)(P,I);var z=L,F=(0,M.Ez)(P,z),U=(0,M.Ez)(z,z),R=F*F-U*((0,M.Ez)(P,P)-1);if(!(R<0)){var j=(0,o._I)(R),Z=(0,M.wx)(z,(-F-j)/U);if((0,M.mg)(Z,P),Z=(0,M.G)(Z),!b)return Z;var B,q=g[0],V=f[0],ne=g[1],ee=f[1];V<q&&(B=q,q=V,V=B);var $=V-q,J=(0,o.a2)($-o.pi)<o.Gg;if(!J&&ee<ne&&(B=ne,ne=ee,ee=B),J||$<o.Gg?J?ne+ee>0^Z[1]<((0,o.a2)(Z[0]-q)<o.Gg?ne:ee):ne<=Z[1]&&Z[1]<=ee:$>o.pi^(q<=Z[0]&&Z[0]<=V)){var K=(0,M.wx)(z,(-F+j)/U);return(0,M.mg)(K,P),[Z,(0,M.G)(K)]}}}function c(g,f){var b=r?s:o.pi-s,v=0;return g<-b?v|=1:g>b&&(v|=2),f<-b?v|=4:f>b&&(v|=8),v}return(0,_.c)(l,function(g){var f,b,v,d,m;return{lineStart:function(){d=v=!1,m=1},point:function(x,y){var T,h=[x,y],E=l(x,y),k=r?E?0:c(x,y):E?c(x+(x<0?o.pi:-o.pi),y):0;if(!f&&(d=v=E)&&g.lineStart(),E!==v&&(!(T=u(f,h))||(0,w.c)(f,T)||(0,w.c)(h,T))&&(h[2]=1),E!==v)m=0,E?(g.lineStart(),T=u(h,f),g.point(T[0],T[1])):(T=u(f,h),g.point(T[0],T[1],2),g.lineEnd()),f=T;else if(i&&f&&r^E){var L;k&b||!(L=u(h,f,!0))||(m=0,r?(g.lineStart(),g.point(L[0][0],L[0][1]),g.point(L[1][0],L[1][1]),g.lineEnd()):(g.point(L[1][0],L[1][1]),g.lineEnd(),g.lineStart(),g.point(L[0][0],L[0][1],3)))}!E||f&&(0,w.c)(f,h)||g.point(h[0],h[1]),f=h,v=E,b=k},lineEnd:function(){v&&g.lineEnd(),f=null},clean:function(){return m|(d&&v)<<1}}},function(g,f,b,v){(0,A.Q)(v,s,a,b,g,f)},r?[0,-s]:[-o.pi,s-o.pi])}},14229:function(Y,O,e){e.d(O,{c:function(){return p}});var M=e(97208),A=e(32232),o=e(64528),w=e(58196),_=e(84706);function p(a,r,i,l){return function(u){var c,g,f,b=r(u),v=(0,M.c)(),d=r(v),m=!1,x={point:y,lineStart:h,lineEnd:E,polygonStart:function(){x.point=k,x.lineStart=L,x.lineEnd=P,g=[],c=[]},polygonEnd:function(){x.point=y,x.lineStart=h,x.lineEnd=E,g=(0,_.Uf)(g);var I=(0,w.c)(c,l);g.length?(m||(u.polygonStart(),m=!0),(0,A.c)(g,n,I,i,u)):I&&(m||(u.polygonStart(),m=!0),u.lineStart(),i(null,null,1,u),u.lineEnd()),m&&(u.polygonEnd(),m=!1),g=c=null},sphere:function(){u.polygonStart(),u.lineStart(),i(null,null,1,u),u.lineEnd(),u.polygonEnd()}};function y(I,z){a(I,z)&&u.point(I,z)}function T(I,z){b.point(I,z)}function h(){x.point=T,b.lineStart()}function E(){x.point=y,b.lineEnd()}function k(I,z){f.push([I,z]),d.point(I,z)}function L(){d.lineStart(),f=[]}function P(){k(f[0][0],f[0][1]),d.lineEnd();var I,z,F,U,R=d.clean(),j=v.result(),Z=j.length;if(f.pop(),c.push(f),f=null,Z)if(1&R){if((z=(F=j[0]).length-1)>0){for(m||(u.polygonStart(),m=!0),u.lineStart(),I=0;I<z;++I)u.point((U=F[I])[0],U[1]);u.lineEnd()}}else Z>1&&2&R&&j.push(j.pop().concat(j.shift())),g.push(j.filter(s))}return x}}function s(a){return a.length>1}function n(a,r){return((a=a.x)[0]<0?a[1]-o.or-o.Gg:o.or-a[1])-((r=r.x)[0]<0?r[1]-o.or-o.Gg:o.or-r[1])}},21676:function(Y,O,e){e.d(O,{c:function(){return s}});var M=e(64528),A=e(97208),o=e(32232),w=e(84706),_=1e9,p=-_;function s(n,a,r,i){function l(b,v){return n<=b&&b<=r&&a<=v&&v<=i}function u(b,v,d,m){var x=0,y=0;if(b==null||(x=c(b,d))!==(y=c(v,d))||f(b,v)<0^d>0)do m.point(x===0||x===3?n:r,x>1?i:a);while((x=(x+d+4)%4)!==y);else m.point(v[0],v[1])}function c(b,v){return(0,M.a2)(b[0]-n)<M.Gg?v>0?0:3:(0,M.a2)(b[0]-r)<M.Gg?v>0?2:1:(0,M.a2)(b[1]-a)<M.Gg?v>0?1:0:v>0?3:2}function g(b,v){return f(b.x,v.x)}function f(b,v){var d=c(b,1),m=c(v,1);return d!==m?d-m:d===0?v[1]-b[1]:d===1?b[0]-v[0]:d===2?b[1]-v[1]:v[0]-b[0]}return function(b){var v,d,m,x,y,T,h,E,k,L,P,I=b,z=(0,A.c)(),F={point:U,lineStart:function(){F.point=R,d&&d.push(m=[]),L=!0,k=!1,h=E=NaN},lineEnd:function(){v&&(R(x,y),T&&k&&z.rejoin(),v.push(z.result())),F.point=U,k&&I.lineEnd()},polygonStart:function(){I=z,v=[],d=[],P=!0},polygonEnd:function(){var j=function(){for(var q=0,V=0,ne=d.length;V<ne;++V)for(var ee,$,J=d[V],K=1,te=J.length,ie=J[0],ae=ie[0],se=ie[1];K<te;++K)ee=ae,$=se,ae=(ie=J[K])[0],se=ie[1],$<=i?se>i&&(ae-ee)*(i-$)>(se-$)*(n-ee)&&++q:se<=i&&(ae-ee)*(i-$)<(se-$)*(n-ee)&&--q;return q}(),Z=P&&j,B=(v=(0,w.Uf)(v)).length;(Z||B)&&(b.polygonStart(),Z&&(b.lineStart(),u(null,null,1,b),b.lineEnd()),B&&(0,o.c)(v,g,j,u,b),b.polygonEnd()),I=b,v=d=m=null}};function U(j,Z){l(j,Z)&&I.point(j,Z)}function R(j,Z){var B=l(j,Z);if(d&&m.push([j,Z]),L)x=j,y=Z,T=B,L=!1,B&&(I.lineStart(),I.point(j,Z));else if(B&&k)I.point(j,Z);else{var q=[h=Math.max(p,Math.min(_,h)),E=Math.max(p,Math.min(_,E))],V=[j=Math.max(p,Math.min(_,j)),Z=Math.max(p,Math.min(_,Z))];(function(ne,ee,$,J,K,te){var ie,ae=ne[0],se=ne[1],ce=0,de=1,ge=ee[0]-ae,ve=ee[1]-se;if(ie=$-ae,ge||!(ie>0)){if(ie/=ge,ge<0){if(ie<ce)return;ie<de&&(de=ie)}else if(ge>0){if(ie>de)return;ie>ce&&(ce=ie)}if(ie=K-ae,ge||!(ie<0)){if(ie/=ge,ge<0){if(ie>de)return;ie>ce&&(ce=ie)}else if(ge>0){if(ie<ce)return;ie<de&&(de=ie)}if(ie=J-se,ve||!(ie>0)){if(ie/=ve,ve<0){if(ie<ce)return;ie<de&&(de=ie)}else if(ve>0){if(ie>de)return;ie>ce&&(ce=ie)}if(ie=te-se,ve||!(ie<0)){if(ie/=ve,ve<0){if(ie>de)return;ie>ce&&(ce=ie)}else if(ve>0){if(ie<ce)return;ie<de&&(de=ie)}return ce>0&&(ne[0]=ae+ce*ge,ne[1]=se+ce*ve),de<1&&(ee[0]=ae+de*ge,ee[1]=se+de*ve),!0}}}}})(q,V,n,a,r,i)?(k||(I.lineStart(),I.point(q[0],q[1])),I.point(V[0],V[1]),B||I.lineEnd(),P=!1):B&&(I.lineStart(),I.point(j,Z),P=!1)}h=j,E=Z,k=B}return F}}},32232:function(Y,O,e){e.d(O,{c:function(){return w}});var M=e(41860),A=e(64528);function o(p,s,n,a){this.x=p,this.z=s,this.o=n,this.e=a,this.v=!1,this.n=this.p=null}function w(p,s,n,a,r){var i,l,u=[],c=[];if(p.forEach(function(m){if(!((x=m.length-1)<=0)){var x,y,T=m[0],h=m[x];if((0,M.c)(T,h)){if(!T[2]&&!h[2]){for(r.lineStart(),i=0;i<x;++i)r.point((T=m[i])[0],T[1]);return void r.lineEnd()}h[0]+=2*A.Gg}u.push(y=new o(T,m,null,!0)),c.push(y.o=new o(T,null,y,!1)),u.push(y=new o(h,m,null,!1)),c.push(y.o=new o(h,null,y,!0))}}),u.length){for(c.sort(s),_(u),_(c),i=0,l=c.length;i<l;++i)c[i].e=n=!n;for(var g,f,b=u[0];;){for(var v=b,d=!0;v.v;)if((v=v.n)===b)return;g=v.z,r.lineStart();do{if(v.v=v.o.v=!0,v.e){if(d)for(i=0,l=g.length;i<l;++i)r.point((f=g[i])[0],f[1]);else a(v.x,v.n.x,1,r);v=v.n}else{if(d)for(g=v.p.z,i=g.length-1;i>=0;--i)r.point((f=g[i])[0],f[1]);else a(v.x,v.p.x,-1,r);v=v.p}g=(v=v.o).z,d=!d}while(!v.v);r.lineEnd()}}}function _(p){if(s=p.length){for(var s,n,a=0,r=p[0];++a<s;)r.n=n=p[a],n.p=r,r=n;r.n=n=p[0],n.p=r}}},68120:function(Y,O,e){function M(A,o){function w(_,p){return _=A(_,p),o(_[0],_[1])}return A.invert&&o.invert&&(w.invert=function(_,p){return(_=o.invert(_,p))&&A.invert(_[0],_[1])}),w}e.d(O,{c:function(){return M}})},7376:function(Y,O,e){function M(A){return A}e.d(O,{c:function(){return M}})},83356:function(Y,O,e){e.r(O),e.d(O,{geoAlbers:function(){return mt},geoAlbersUsa:function(){return Et},geoArea:function(){return M.cp},geoAzimuthalEqualArea:function(){return Tt.c},geoAzimuthalEqualAreaRaw:function(){return Tt.y},geoAzimuthalEquidistant:function(){return xt.c},geoAzimuthalEquidistantRaw:function(){return xt.O},geoBounds:function(){return A.c},geoCentroid:function(){return o.c},geoCircle:function(){return w.c},geoClipAntimeridian:function(){return _.c},geoClipCircle:function(){return p.c},geoClipExtent:function(){return n},geoClipRectangle:function(){return s.c},geoConicConformal:function(){return Yt},geoConicConformalRaw:function(){return Gt},geoConicEqualArea:function(){return vt},geoConicEqualAreaRaw:function(){return ht},geoConicEquidistant:function(){return Sn},geoConicEquidistantRaw:function(){return Ln},geoContains:function(){return j},geoDistance:function(){return E},geoEqualEarth:function(){return Cn},geoEqualEarthRaw:function(){return An},geoEquirectangular:function(){return rn.c},geoEquirectangularRaw:function(){return rn.u},geoGnomonic:function(){return Rn.c},geoGnomonicRaw:function(){return Rn.Y},geoGraticule:function(){return V},geoGraticule10:function(){return ne},geoIdentity:function(){return In},geoInterpolate:function(){return te.c},geoLength:function(){return y},geoMercator:function(){return Bt},geoMercatorRaw:function(){return Pt},geoNaturalEarth1:function(){return Hn.c},geoNaturalEarth1Raw:function(){return Hn.g},geoOrthographic:function(){return Un.c},geoOrthographicRaw:function(){return Un.t},geoPath:function(){return Be},geoProjection:function(){return at.c},geoProjectionMutator:function(){return at.U},geoRotation:function(){return Ct.c},geoStereographic:function(){return cr},geoStereographicRaw:function(){return ur},geoStream:function(){return f.c},geoTransform:function(){return Fn.c},geoTransverseMercator:function(){return Tr},geoTransverseMercatorRaw:function(){return er}});var M=e(95384),A=e(13696),o=e(24052),w=e(61780),_=e(78284),p=e(2728),s=e(21676);function n(){var Ht,on,wn,mn=0,Pn=0,Wn=960,Bn=500;return wn={stream:function(jn){return Ht&&on===jn?Ht:Ht=(0,s.c)(mn,Pn,Wn,Bn)(on=jn)},extent:function(jn){return arguments.length?(mn=+jn[0][0],Pn=+jn[0][1],Wn=+jn[1][0],Bn=+jn[1][1],Ht=on=null,wn):[[mn,Pn],[Wn,Bn]]}}}var a,r,i,l=e(58196),u=e(88728),c=e(64528),g=e(70932),f=e(16016),b=(0,u.c)(),v={sphere:g.c,point:g.c,lineStart:function(){v.point=m,v.lineEnd=d},lineEnd:g.c,polygonStart:g.c,polygonEnd:g.c};function d(){v.point=v.lineEnd=g.c}function m(Ht,on){Ht*=c.qw,on*=c.qw,a=Ht,r=(0,c.g$)(on),i=(0,c.W8)(on),v.point=x}function x(Ht,on){Ht*=c.qw,on*=c.qw;var wn=(0,c.g$)(on),mn=(0,c.W8)(on),Pn=(0,c.a2)(Ht-a),Wn=(0,c.W8)(Pn),Bn=mn*(0,c.g$)(Pn),jn=i*wn-r*mn*Wn,rr=r*wn+i*mn*Wn;b.add((0,c.WE)((0,c._I)(Bn*Bn+jn*jn),rr)),a=Ht,r=wn,i=mn}function y(Ht){return b.reset(),(0,f.c)(Ht,v),+b}var T=[null,null],h={type:"LineString",coordinates:T};function E(Ht,on){return T[0]=Ht,T[1]=on,y(h)}var k={Feature:function(Ht,on){return P(Ht.geometry,on)},FeatureCollection:function(Ht,on){for(var wn=Ht.features,mn=-1,Pn=wn.length;++mn<Pn;)if(P(wn[mn].geometry,on))return!0;return!1}},L={Sphere:function(){return!0},Point:function(Ht,on){return I(Ht.coordinates,on)},MultiPoint:function(Ht,on){for(var wn=Ht.coordinates,mn=-1,Pn=wn.length;++mn<Pn;)if(I(wn[mn],on))return!0;return!1},LineString:function(Ht,on){return z(Ht.coordinates,on)},MultiLineString:function(Ht,on){for(var wn=Ht.coordinates,mn=-1,Pn=wn.length;++mn<Pn;)if(z(wn[mn],on))return!0;return!1},Polygon:function(Ht,on){return F(Ht.coordinates,on)},MultiPolygon:function(Ht,on){for(var wn=Ht.coordinates,mn=-1,Pn=wn.length;++mn<Pn;)if(F(wn[mn],on))return!0;return!1},GeometryCollection:function(Ht,on){for(var wn=Ht.geometries,mn=-1,Pn=wn.length;++mn<Pn;)if(P(wn[mn],on))return!0;return!1}};function P(Ht,on){return!(!Ht||!L.hasOwnProperty(Ht.type))&&L[Ht.type](Ht,on)}function I(Ht,on){return E(Ht,on)===0}function z(Ht,on){for(var wn,mn,Pn,Wn=0,Bn=Ht.length;Wn<Bn;Wn++){if((mn=E(Ht[Wn],on))===0||Wn>0&&(Pn=E(Ht[Wn],Ht[Wn-1]))>0&&wn<=Pn&&mn<=Pn&&(wn+mn-Pn)*(1-Math.pow((wn-mn)/Pn,2))<c.a8*Pn)return!0;wn=mn}return!1}function F(Ht,on){return!!(0,l.c)(Ht.map(U),R(on))}function U(Ht){return(Ht=Ht.map(R)).pop(),Ht}function R(Ht){return[Ht[0]*c.qw,Ht[1]*c.qw]}function j(Ht,on){return(Ht&&k.hasOwnProperty(Ht.type)?k[Ht.type]:P)(Ht,on)}var Z=e(84706);function B(Ht,on,wn){var mn=(0,Z.ik)(Ht,on-c.Gg,wn).concat(on);return function(Pn){return mn.map(function(Wn){return[Pn,Wn]})}}function q(Ht,on,wn){var mn=(0,Z.ik)(Ht,on-c.Gg,wn).concat(on);return function(Pn){return mn.map(function(Wn){return[Wn,Pn]})}}function V(){var Ht,on,wn,mn,Pn,Wn,Bn,jn,rr,Xt,yn,Ot,Jt=10,nn=Jt,_n=90,xn=360,kn=2.5;function hn(){return{type:"MultiLineString",coordinates:en()}}function en(){return(0,Z.ik)((0,c.Km)(mn/_n)*_n,wn,_n).map(yn).concat((0,Z.ik)((0,c.Km)(jn/xn)*xn,Bn,xn).map(Ot)).concat((0,Z.ik)((0,c.Km)(on/Jt)*Jt,Ht,Jt).filter(function(tn){return(0,c.a2)(tn%_n)>c.Gg}).map(rr)).concat((0,Z.ik)((0,c.Km)(Wn/nn)*nn,Pn,nn).filter(function(tn){return(0,c.a2)(tn%xn)>c.Gg}).map(Xt))}return hn.lines=function(){return en().map(function(tn){return{type:"LineString",coordinates:tn}})},hn.outline=function(){return{type:"Polygon",coordinates:[yn(mn).concat(Ot(Bn).slice(1),yn(wn).reverse().slice(1),Ot(jn).reverse().slice(1))]}},hn.extent=function(tn){return arguments.length?hn.extentMajor(tn).extentMinor(tn):hn.extentMinor()},hn.extentMajor=function(tn){return arguments.length?(mn=+tn[0][0],wn=+tn[1][0],jn=+tn[0][1],Bn=+tn[1][1],mn>wn&&(tn=mn,mn=wn,wn=tn),jn>Bn&&(tn=jn,jn=Bn,Bn=tn),hn.precision(kn)):[[mn,jn],[wn,Bn]]},hn.extentMinor=function(tn){return arguments.length?(on=+tn[0][0],Ht=+tn[1][0],Wn=+tn[0][1],Pn=+tn[1][1],on>Ht&&(tn=on,on=Ht,Ht=tn),Wn>Pn&&(tn=Wn,Wn=Pn,Pn=tn),hn.precision(kn)):[[on,Wn],[Ht,Pn]]},hn.step=function(tn){return arguments.length?hn.stepMajor(tn).stepMinor(tn):hn.stepMinor()},hn.stepMajor=function(tn){return arguments.length?(_n=+tn[0],xn=+tn[1],hn):[_n,xn]},hn.stepMinor=function(tn){return arguments.length?(Jt=+tn[0],nn=+tn[1],hn):[Jt,nn]},hn.precision=function(tn){return arguments.length?(kn=+tn,rr=B(Wn,Pn,90),Xt=q(on,Ht,kn),yn=B(jn,Bn,90),Ot=q(mn,wn,kn),hn):kn},hn.extentMajor([[-180,-90+c.Gg],[180,90-c.Gg]]).extentMinor([[-180,-80-c.Gg],[180,80+c.Gg]])}function ne(){return V()()}var ee,$,J,K,te=e(27284),ie=e(7376),ae=(0,u.c)(),se=(0,u.c)(),ce={point:g.c,lineStart:g.c,lineEnd:g.c,polygonStart:function(){ce.lineStart=de,ce.lineEnd=be},polygonEnd:function(){ce.lineStart=ce.lineEnd=ce.point=g.c,ae.add((0,c.a2)(se)),se.reset()},result:function(){var Ht=ae/2;return ae.reset(),Ht}};function de(){ce.point=ge}function ge(Ht,on){ce.point=ve,ee=J=Ht,$=K=on}function ve(Ht,on){se.add(K*Ht-J*on),J=Ht,K=on}function be(){ve(ee,$)}var me,Se,we,_e,oe=ce,le=e(73784),pe=0,Ee=0,Te=0,Me=0,Le=0,Ie=0,he=0,xe=0,ke=0,ze={point:Re,lineStart:Oe,lineEnd:Je,polygonStart:function(){ze.lineStart=ot,ze.lineEnd=rt},polygonEnd:function(){ze.point=Re,ze.lineStart=Oe,ze.lineEnd=Je},result:function(){var Ht=ke?[he/ke,xe/ke]:Ie?[Me/Ie,Le/Ie]:Te?[pe/Te,Ee/Te]:[NaN,NaN];return pe=Ee=Te=Me=Le=Ie=he=xe=ke=0,Ht}};function Re(Ht,on){pe+=Ht,Ee+=on,++Te}function Oe(){ze.point=Ve}function Ve(Ht,on){ze.point=qe,Re(we=Ht,_e=on)}function qe(Ht,on){var wn=Ht-we,mn=on-_e,Pn=(0,c._I)(wn*wn+mn*mn);Me+=Pn*(we+Ht)/2,Le+=Pn*(_e+on)/2,Ie+=Pn,Re(we=Ht,_e=on)}function Je(){ze.point=Re}function ot(){ze.point=dt}function rt(){_t(me,Se)}function dt(Ht,on){ze.point=_t,Re(me=we=Ht,Se=_e=on)}function _t(Ht,on){var wn=Ht-we,mn=on-_e,Pn=(0,c._I)(wn*wn+mn*mn);Me+=Pn*(we+Ht)/2,Le+=Pn*(_e+on)/2,Ie+=Pn,he+=(Pn=_e*Ht-we*on)*(we+Ht),xe+=Pn*(_e+on),ke+=3*Pn,Re(we=Ht,_e=on)}var yt=ze;function et(Ht){this._context=Ht}et.prototype={_radius:4.5,pointRadius:function(Ht){return this._radius=Ht,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(Ht,on){switch(this._point){case 0:this._context.moveTo(Ht,on),this._point=1;break;case 1:this._context.lineTo(Ht,on);break;default:this._context.moveTo(Ht+this._radius,on),this._context.arc(Ht,on,this._radius,0,c.kD)}},result:g.c};var nt,At,Rt,Ft,It,Ge=(0,u.c)(),Ye={point:g.c,lineStart:function(){Ye.point=Ne},lineEnd:function(){nt&&We(At,Rt),Ye.point=g.c},polygonStart:function(){nt=!0},polygonEnd:function(){nt=null},result:function(){var Ht=+Ge;return Ge.reset(),Ht}};function Ne(Ht,on){Ye.point=We,At=Ft=Ht,Rt=It=on}function We(Ht,on){Ft-=Ht,It-=on,Ge.add((0,c._I)(Ft*Ft+It*It)),Ft=Ht,It=on}var st=Ye;function it(){this._string=[]}function Fe(Ht){return"m0,"+Ht+"a"+Ht+","+Ht+" 0 1,1 0,"+-2*Ht+"a"+Ht+","+Ht+" 0 1,1 0,"+2*Ht+"z"}function Be(Ht,on){var wn,mn,Pn=4.5;function Wn(Bn){return Bn&&(typeof Pn=="function"&&mn.pointRadius(+Pn.apply(this,arguments)),(0,f.c)(Bn,wn(mn))),mn.result()}return Wn.area=function(Bn){return(0,f.c)(Bn,wn(oe)),oe.result()},Wn.measure=function(Bn){return(0,f.c)(Bn,wn(st)),st.result()},Wn.bounds=function(Bn){return(0,f.c)(Bn,wn(le.c)),le.c.result()},Wn.centroid=function(Bn){return(0,f.c)(Bn,wn(yt)),yt.result()},Wn.projection=function(Bn){return arguments.length?(wn=Bn==null?(Ht=null,ie.c):(Ht=Bn).stream,Wn):Ht},Wn.context=function(Bn){return arguments.length?(mn=Bn==null?(on=null,new it):new et(on=Bn),typeof Pn!="function"&&mn.pointRadius(Pn),Wn):on},Wn.pointRadius=function(Bn){return arguments.length?(Pn=typeof Bn=="function"?Bn:(mn.pointRadius(+Bn),+Bn),Wn):Pn},Wn.projection(Ht).context(on)}it.prototype={_radius:4.5,_circle:Fe(4.5),pointRadius:function(Ht){return(Ht=+Ht)!==this._radius&&(this._radius=Ht,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(Ht,on){switch(this._point){case 0:this._string.push("M",Ht,",",on),this._point=1;break;case 1:this._string.push("L",Ht,",",on);break;default:this._circle==null&&(this._circle=Fe(this._radius)),this._string.push("M",Ht,",",on,this._circle)}},result:function(){if(this._string.length){var Ht=this._string.join("");return this._string=[],Ht}return null}};var at=e(87952);function Ze(Ht){var on=0,wn=c.pi/3,mn=(0,at.U)(Ht),Pn=mn(on,wn);return Pn.parallels=function(Wn){return arguments.length?mn(on=Wn[0]*c.qw,wn=Wn[1]*c.qw):[on*c.oh,wn*c.oh]},Pn}function ht(Ht,on){var wn=(0,c.g$)(Ht),mn=(wn+(0,c.g$)(on))/2;if((0,c.a2)(mn)<c.Gg)return function(jn){var rr=(0,c.W8)(jn);function Xt(yn,Ot){return[yn*rr,(0,c.g$)(Ot)/rr]}return Xt.invert=function(yn,Ot){return[yn/rr,(0,c.qR)(Ot*rr)]},Xt}(Ht);var Pn=1+wn*(2*mn-wn),Wn=(0,c._I)(Pn)/mn;function Bn(jn,rr){var Xt=(0,c._I)(Pn-2*mn*(0,c.g$)(rr))/mn;return[Xt*(0,c.g$)(jn*=mn),Wn-Xt*(0,c.W8)(jn)]}return Bn.invert=function(jn,rr){var Xt=Wn-rr,yn=(0,c.WE)(jn,(0,c.a2)(Xt))*(0,c.kq)(Xt);return Xt*mn<0&&(yn-=c.pi*(0,c.kq)(jn)*(0,c.kq)(Xt)),[yn/mn,(0,c.qR)((Pn-(jn*jn+Xt*Xt)*mn*mn)/(2*mn))]},Bn}function vt(){return Ze(ht).scale(155.424).center([0,33.6442])}function mt(){return vt().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var ft=e(86420);function Et(){var Ht,on,wn,mn,Pn,Wn,Bn=mt(),jn=vt().rotate([154,0]).center([-2,58.5]).parallels([55,65]),rr=vt().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Xt={point:function(Jt,nn){Wn=[Jt,nn]}};function yn(Jt){var nn=Jt[0],_n=Jt[1];return Wn=null,wn.point(nn,_n),Wn||(mn.point(nn,_n),Wn)||(Pn.point(nn,_n),Wn)}function Ot(){return Ht=on=null,yn}return yn.invert=function(Jt){var nn=Bn.scale(),_n=Bn.translate(),xn=(Jt[0]-_n[0])/nn,kn=(Jt[1]-_n[1])/nn;return(kn>=.12&&kn<.234&&xn>=-.425&&xn<-.214?jn:kn>=.166&&kn<.234&&xn>=-.214&&xn<-.115?rr:Bn).invert(Jt)},yn.stream=function(Jt){return Ht&&on===Jt?Ht:(nn=[Bn.stream(on=Jt),jn.stream(Jt),rr.stream(Jt)],_n=nn.length,Ht={point:function(xn,kn){for(var hn=-1;++hn<_n;)nn[hn].point(xn,kn)},sphere:function(){for(var xn=-1;++xn<_n;)nn[xn].sphere()},lineStart:function(){for(var xn=-1;++xn<_n;)nn[xn].lineStart()},lineEnd:function(){for(var xn=-1;++xn<_n;)nn[xn].lineEnd()},polygonStart:function(){for(var xn=-1;++xn<_n;)nn[xn].polygonStart()},polygonEnd:function(){for(var xn=-1;++xn<_n;)nn[xn].polygonEnd()}});var nn,_n},yn.precision=function(Jt){return arguments.length?(Bn.precision(Jt),jn.precision(Jt),rr.precision(Jt),Ot()):Bn.precision()},yn.scale=function(Jt){return arguments.length?(Bn.scale(Jt),jn.scale(.35*Jt),rr.scale(Jt),yn.translate(Bn.translate())):Bn.scale()},yn.translate=function(Jt){if(!arguments.length)return Bn.translate();var nn=Bn.scale(),_n=+Jt[0],xn=+Jt[1];return wn=Bn.translate(Jt).clipExtent([[_n-.455*nn,xn-.238*nn],[_n+.455*nn,xn+.238*nn]]).stream(Xt),mn=jn.translate([_n-.307*nn,xn+.201*nn]).clipExtent([[_n-.425*nn+c.Gg,xn+.12*nn+c.Gg],[_n-.214*nn-c.Gg,xn+.234*nn-c.Gg]]).stream(Xt),Pn=rr.translate([_n-.205*nn,xn+.212*nn]).clipExtent([[_n-.214*nn+c.Gg,xn+.166*nn+c.Gg],[_n-.115*nn-c.Gg,xn+.234*nn-c.Gg]]).stream(Xt),Ot()},yn.fitExtent=function(Jt,nn){return(0,ft.QX)(yn,Jt,nn)},yn.fitSize=function(Jt,nn){return(0,ft.UV)(yn,Jt,nn)},yn.fitWidth=function(Jt,nn){return(0,ft.Qx)(yn,Jt,nn)},yn.fitHeight=function(Jt,nn){return(0,ft.OW)(yn,Jt,nn)},yn.scale(1070)}var Tt=e(54724),xt=e(69020),Ct=e(92992);function Pt(Ht,on){return[Ht,(0,c.Yz)((0,c.a6)((c.or+on)/2))]}function Bt(){return Kt(Pt).scale(961/c.kD)}function Kt(Ht){var on,wn,mn,Pn=(0,at.c)(Ht),Wn=Pn.center,Bn=Pn.scale,jn=Pn.translate,rr=Pn.clipExtent,Xt=null;function yn(){var Ot=c.pi*Bn(),Jt=Pn((0,Ct.c)(Pn.rotate()).invert([0,0]));return rr(Xt==null?[[Jt[0]-Ot,Jt[1]-Ot],[Jt[0]+Ot,Jt[1]+Ot]]:Ht===Pt?[[Math.max(Jt[0]-Ot,Xt),on],[Math.min(Jt[0]+Ot,wn),mn]]:[[Xt,Math.max(Jt[1]-Ot,on)],[wn,Math.min(Jt[1]+Ot,mn)]])}return Pn.scale=function(Ot){return arguments.length?(Bn(Ot),yn()):Bn()},Pn.translate=function(Ot){return arguments.length?(jn(Ot),yn()):jn()},Pn.center=function(Ot){return arguments.length?(Wn(Ot),yn()):Wn()},Pn.clipExtent=function(Ot){return arguments.length?(Ot==null?Xt=on=wn=mn=null:(Xt=+Ot[0][0],on=+Ot[0][1],wn=+Ot[1][0],mn=+Ot[1][1]),yn()):Xt==null?null:[[Xt,on],[wn,mn]]},yn()}function sn(Ht){return(0,c.a6)((c.or+Ht)/2)}function Gt(Ht,on){var wn=(0,c.W8)(Ht),mn=Ht===on?(0,c.g$)(Ht):(0,c.Yz)(wn/(0,c.W8)(on))/(0,c.Yz)(sn(on)/sn(Ht)),Pn=wn*(0,c.g3)(sn(Ht),mn)/mn;if(!mn)return Pt;function Wn(Bn,jn){Pn>0?jn<-c.or+c.Gg&&(jn=-c.or+c.Gg):jn>c.or-c.Gg&&(jn=c.or-c.Gg);var rr=Pn/(0,c.g3)(sn(jn),mn);return[rr*(0,c.g$)(mn*Bn),Pn-rr*(0,c.W8)(mn*Bn)]}return Wn.invert=function(Bn,jn){var rr=Pn-jn,Xt=(0,c.kq)(mn)*(0,c._I)(Bn*Bn+rr*rr),yn=(0,c.WE)(Bn,(0,c.a2)(rr))*(0,c.kq)(rr);return rr*mn<0&&(yn-=c.pi*(0,c.kq)(Bn)*(0,c.kq)(rr)),[yn/mn,2*(0,c.MQ)((0,c.g3)(Pn/Xt,1/mn))-c.or]},Wn}function Yt(){return Ze(Gt).scale(109.5).parallels([30,30])}Pt.invert=function(Ht,on){return[Ht,2*(0,c.MQ)((0,c.oN)(on))-c.or]};var rn=e(69604);function Ln(Ht,on){var wn=(0,c.W8)(Ht),mn=Ht===on?(0,c.g$)(Ht):(wn-(0,c.W8)(on))/(on-Ht),Pn=wn/mn+Ht;if((0,c.a2)(mn)<c.Gg)return rn.u;function Wn(Bn,jn){var rr=Pn-jn,Xt=mn*Bn;return[rr*(0,c.g$)(Xt),Pn-rr*(0,c.W8)(Xt)]}return Wn.invert=function(Bn,jn){var rr=Pn-jn,Xt=(0,c.WE)(Bn,(0,c.a2)(rr))*(0,c.kq)(rr);return rr*mn<0&&(Xt-=c.pi*(0,c.kq)(Bn)*(0,c.kq)(rr)),[Xt/mn,Pn-(0,c.kq)(mn)*(0,c._I)(Bn*Bn+rr*rr)]},Wn}function Sn(){return Ze(Ln).scale(131.154).center([0,13.9389])}var gn=1.340264,$t=-.081106,cn=893e-6,an=.003796,pn=(0,c._I)(3)/2;function An(Ht,on){var wn=(0,c.qR)(pn*(0,c.g$)(on)),mn=wn*wn,Pn=mn*mn*mn;return[Ht*(0,c.W8)(wn)/(pn*(gn+3*$t*mn+Pn*(7*cn+9*an*mn))),wn*(gn+$t*mn+Pn*(cn+an*mn))]}function Cn(){return(0,at.c)(An).scale(177.158)}An.invert=function(Ht,on){for(var wn,mn=on,Pn=mn*mn,Wn=Pn*Pn*Pn,Bn=0;Bn<12&&(Wn=(Pn=(mn-=wn=(mn*(gn+$t*Pn+Wn*(cn+an*Pn))-on)/(gn+3*$t*Pn+Wn*(7*cn+9*an*Pn)))*mn)*Pn*Pn,!((0,c.a2)(wn)<c.a8));++Bn);return[pn*Ht*(gn+3*$t*Pn+Wn*(7*cn+9*an*Pn))/(0,c.W8)(mn),(0,c.qR)((0,c.g$)(mn)/pn)]};var Rn=e(53285),Fn=e(15196);function In(){var Ht,on,wn,mn,Pn,Wn,Bn,jn=1,rr=0,Xt=0,yn=1,Ot=1,Jt=0,nn=null,_n=1,xn=1,kn=(0,Fn.s)({point:function(un,dn){var En=tn([un,dn]);this.stream.point(En[0],En[1])}}),hn=ie.c;function en(){return _n=jn*yn,xn=jn*Ot,Wn=Bn=null,tn}function tn(un){var dn=un[0]*_n,En=un[1]*xn;if(Jt){var zn=En*Ht-dn*on;dn=dn*Ht+En*on,En=zn}return[dn+rr,En+Xt]}return tn.invert=function(un){var dn=un[0]-rr,En=un[1]-Xt;if(Jt){var zn=En*Ht+dn*on;dn=dn*Ht-En*on,En=zn}return[dn/_n,En/xn]},tn.stream=function(un){return Wn&&Bn===un?Wn:Wn=kn(hn(Bn=un))},tn.postclip=function(un){return arguments.length?(hn=un,nn=wn=mn=Pn=null,en()):hn},tn.clipExtent=function(un){return arguments.length?(hn=un==null?(nn=wn=mn=Pn=null,ie.c):(0,s.c)(nn=+un[0][0],wn=+un[0][1],mn=+un[1][0],Pn=+un[1][1]),en()):nn==null?null:[[nn,wn],[mn,Pn]]},tn.scale=function(un){return arguments.length?(jn=+un,en()):jn},tn.translate=function(un){return arguments.length?(rr=+un[0],Xt=+un[1],en()):[rr,Xt]},tn.angle=function(un){return arguments.length?(Jt=un%360*c.qw,on=(0,c.g$)(Jt),Ht=(0,c.W8)(Jt),en()):Jt*c.oh},tn.reflectX=function(un){return arguments.length?(yn=un?-1:1,en()):yn<0},tn.reflectY=function(un){return arguments.length?(Ot=un?-1:1,en()):Ot<0},tn.fitExtent=function(un,dn){return(0,ft.QX)(tn,un,dn)},tn.fitSize=function(un,dn){return(0,ft.UV)(tn,un,dn)},tn.fitWidth=function(un,dn){return(0,ft.Qx)(tn,un,dn)},tn.fitHeight=function(un,dn){return(0,ft.OW)(tn,un,dn)},tn}var Hn=e(47984),Un=e(4888),ar=e(62280);function ur(Ht,on){var wn=(0,c.W8)(on),mn=1+(0,c.W8)(Ht)*wn;return[wn*(0,c.g$)(Ht)/mn,(0,c.g$)(on)/mn]}function cr(){return(0,at.c)(ur).scale(250).clipAngle(142)}function er(Ht,on){return[(0,c.Yz)((0,c.a6)((c.or+on)/2)),-Ht]}function Tr(){var Ht=Kt(er),on=Ht.center,wn=Ht.rotate;return Ht.center=function(mn){return arguments.length?on([-mn[1],mn[0]]):[(mn=on())[1],-mn[0]]},Ht.rotate=function(mn){return arguments.length?wn([mn[0],mn[1],mn.length>2?mn[2]+90:90]):[(mn=wn())[0],mn[1],mn[2]-90]},wn([0,0,90]).scale(159.155)}ur.invert=(0,ar.g)(function(Ht){return 2*(0,c.MQ)(Ht)}),er.invert=function(Ht,on){return[-on,2*(0,c.MQ)((0,c.oN)(Ht))-c.or]}},27284:function(Y,O,e){e.d(O,{c:function(){return A}});var M=e(64528);function A(o,w){var _=o[0]*M.qw,p=o[1]*M.qw,s=w[0]*M.qw,n=w[1]*M.qw,a=(0,M.W8)(p),r=(0,M.g$)(p),i=(0,M.W8)(n),l=(0,M.g$)(n),u=a*(0,M.W8)(_),c=a*(0,M.g$)(_),g=i*(0,M.W8)(s),f=i*(0,M.g$)(s),b=2*(0,M.qR)((0,M._I)((0,M.SD)(n-p)+a*i*(0,M.SD)(s-_))),v=(0,M.g$)(b),d=b?function(m){var x=(0,M.g$)(m*=b)/v,y=(0,M.g$)(b-m)/v,T=y*u+x*g,h=y*c+x*f,E=y*r+x*l;return[(0,M.WE)(h,T)*M.oh,(0,M.WE)(E,(0,M._I)(T*T+h*h))*M.oh]}:function(){return[_*M.oh,p*M.oh]};return d.distance=b,d}},64528:function(Y,O,e){e.d(O,{Gg:function(){return M},Km:function(){return u},MQ:function(){return r},SD:function(){return T},W8:function(){return l},WE:function(){return i},Yz:function(){return g},_I:function(){return d},a2:function(){return a},a6:function(){return m},a8:function(){return A},g$:function(){return b},g3:function(){return f},kD:function(){return p},kq:function(){return v},mE:function(){return x},oN:function(){return c},oh:function(){return s},or:function(){return w},pi:function(){return o},qR:function(){return y},qw:function(){return n},wL:function(){return _}});var M=1e-6,A=1e-12,o=Math.PI,w=o/2,_=o/4,p=2*o,s=180/o,n=o/180,a=Math.abs,r=Math.atan,i=Math.atan2,l=Math.cos,u=Math.ceil,c=Math.exp,g=Math.log,f=Math.pow,b=Math.sin,v=Math.sign||function(h){return h>0?1:h<0?-1:0},d=Math.sqrt,m=Math.tan;function x(h){return h>1?0:h<-1?o:Math.acos(h)}function y(h){return h>1?w:h<-1?-w:Math.asin(h)}function T(h){return(h=b(h/2))*h}},70932:function(Y,O,e){function M(){}e.d(O,{c:function(){return M}})},73784:function(Y,O,e){var M=e(70932),A=1/0,o=A,w=-A,_=w,p={point:function(s,n){s<A&&(A=s),s>w&&(w=s),n<o&&(o=n),n>_&&(_=n)},lineStart:M.c,lineEnd:M.c,polygonStart:M.c,polygonEnd:M.c,result:function(){var s=[[A,o],[w,_]];return w=_=-(o=A=1/0),s}};O.c=p},41860:function(Y,O,e){e.d(O,{c:function(){return A}});var M=e(64528);function A(o,w){return(0,M.a2)(o[0]-w[0])<M.Gg&&(0,M.a2)(o[1]-w[1])<M.Gg}},58196:function(Y,O,e){e.d(O,{c:function(){return p}});var M=e(88728),A=e(84220),o=e(64528),w=(0,M.c)();function _(s){return(0,o.a2)(s[0])<=o.pi?s[0]:(0,o.kq)(s[0])*(((0,o.a2)(s[0])+o.pi)%o.kD-o.pi)}function p(s,n){var a=_(n),r=n[1],i=(0,o.g$)(r),l=[(0,o.g$)(a),-(0,o.W8)(a),0],u=0,c=0;w.reset(),i===1?r=o.or+o.Gg:i===-1&&(r=-o.or-o.Gg);for(var g=0,f=s.length;g<f;++g)if(v=(b=s[g]).length)for(var b,v,d=b[v-1],m=_(d),x=d[1]/2+o.wL,y=(0,o.g$)(x),T=(0,o.W8)(x),h=0;h<v;++h,m=k,y=P,T=I,d=E){var E=b[h],k=_(E),L=E[1]/2+o.wL,P=(0,o.g$)(L),I=(0,o.W8)(L),z=k-m,F=z>=0?1:-1,U=F*z,R=U>o.pi,j=y*P;if(w.add((0,o.WE)(j*F*(0,o.g$)(U),T*I+j*(0,o.W8)(U))),u+=R?z+F*o.kD:z,R^m>=a^k>=a){var Z=(0,A.CW)((0,A.ux)(d),(0,A.ux)(E));(0,A.cJ)(Z);var B=(0,A.CW)(l,Z);(0,A.cJ)(B);var q=(R^z>=0?-1:1)*(0,o.qR)(B[2]);(r>q||r===q&&(Z[0]||Z[1]))&&(c+=R^z>=0?1:-1)}}return(u<-o.Gg||u<o.Gg&&w<-o.Gg)^1&c}},62280:function(Y,O,e){e.d(O,{a:function(){return A},g:function(){return o}});var M=e(64528);function A(w){return function(_,p){var s=(0,M.W8)(_),n=(0,M.W8)(p),a=w(s*n);return[a*n*(0,M.g$)(_),a*(0,M.g$)(p)]}}function o(w){return function(_,p){var s=(0,M._I)(_*_+p*p),n=w(s),a=(0,M.g$)(n),r=(0,M.W8)(n);return[(0,M.WE)(_*a,s*r),(0,M.qR)(s&&p*a/s)]}}},54724:function(Y,O,e){e.d(O,{c:function(){return _},y:function(){return w}});var M=e(64528),A=e(62280),o=e(87952),w=(0,A.a)(function(p){return(0,M._I)(2/(1+p))});function _(){return(0,o.c)(w).scale(124.75).clipAngle(179.999)}w.invert=(0,A.g)(function(p){return 2*(0,M.qR)(p/2)})},69020:function(Y,O,e){e.d(O,{O:function(){return w},c:function(){return _}});var M=e(64528),A=e(62280),o=e(87952),w=(0,A.a)(function(p){return(p=(0,M.mE)(p))&&p/(0,M.g$)(p)});function _(){return(0,o.c)(w).scale(79.4188).clipAngle(179.999)}w.invert=(0,A.g)(function(p){return p})},69604:function(Y,O,e){e.d(O,{c:function(){return o},u:function(){return A}});var M=e(87952);function A(w,_){return[w,_]}function o(){return(0,M.c)(A).scale(152.63)}A.invert=A},86420:function(Y,O,e){e.d(O,{OW:function(){return s},QX:function(){return w},Qx:function(){return p},UV:function(){return _}});var M=e(16016),A=e(73784);function o(n,a,r){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),i!=null&&n.clipExtent(null),(0,M.c)(r,n.stream(A.c)),a(A.c.result()),i!=null&&n.clipExtent(i),n}function w(n,a,r){return o(n,function(i){var l=a[1][0]-a[0][0],u=a[1][1]-a[0][1],c=Math.min(l/(i[1][0]-i[0][0]),u/(i[1][1]-i[0][1])),g=+a[0][0]+(l-c*(i[1][0]+i[0][0]))/2,f=+a[0][1]+(u-c*(i[1][1]+i[0][1]))/2;n.scale(150*c).translate([g,f])},r)}function _(n,a,r){return w(n,[[0,0],a],r)}function p(n,a,r){return o(n,function(i){var l=+a,u=l/(i[1][0]-i[0][0]),c=(l-u*(i[1][0]+i[0][0]))/2,g=-u*i[0][1];n.scale(150*u).translate([c,g])},r)}function s(n,a,r){return o(n,function(i){var l=+a,u=l/(i[1][1]-i[0][1]),c=-u*i[0][0],g=(l-u*(i[1][1]+i[0][1]))/2;n.scale(150*u).translate([c,g])},r)}},53285:function(Y,O,e){e.d(O,{Y:function(){return w},c:function(){return _}});var M=e(64528),A=e(62280),o=e(87952);function w(p,s){var n=(0,M.W8)(s),a=(0,M.W8)(p)*n;return[n*(0,M.g$)(p)/a,(0,M.g$)(s)/a]}function _(){return(0,o.c)(w).scale(144.049).clipAngle(60)}w.invert=(0,A.g)(M.MQ)},87952:function(Y,O,e){e.d(O,{c:function(){return b},U:function(){return v}});var M=e(78284),A=e(2728),o=e(21676),w=e(68120),_=e(7376),p=e(64528),s=e(92992),n=e(15196),a=e(86420),r=e(84220),i=16,l=(0,p.W8)(30*p.qw);function u(d,m){return+m?function(x,y){function T(h,E,k,L,P,I,z,F,U,R,j,Z,B,q){var V=z-h,ne=F-E,ee=V*V+ne*ne;if(ee>4*y&&B--){var $=L+R,J=P+j,K=I+Z,te=(0,p._I)($*$+J*J+K*K),ie=(0,p.qR)(K/=te),ae=(0,p.a2)((0,p.a2)(K)-1)<p.Gg||(0,p.a2)(k-U)<p.Gg?(k+U)/2:(0,p.WE)(J,$),se=x(ae,ie),ce=se[0],de=se[1],ge=ce-h,ve=de-E,be=ne*ge-V*ve;(be*be/ee>y||(0,p.a2)((V*ge+ne*ve)/ee-.5)>.3||L*R+P*j+I*Z<l)&&(T(h,E,k,L,P,I,ce,de,ae,$/=te,J/=te,K,B,q),q.point(ce,de),T(ce,de,ae,$,J,K,z,F,U,R,j,Z,B,q))}}return function(h){var E,k,L,P,I,z,F,U,R,j,Z,B,q={point:V,lineStart:ne,lineEnd:$,polygonStart:function(){h.polygonStart(),q.lineStart=J},polygonEnd:function(){h.polygonEnd(),q.lineStart=ne}};function V(ie,ae){ie=x(ie,ae),h.point(ie[0],ie[1])}function ne(){U=NaN,q.point=ee,h.lineStart()}function ee(ie,ae){var se=(0,r.ux)([ie,ae]),ce=x(ie,ae);T(U,R,F,j,Z,B,U=ce[0],R=ce[1],F=ie,j=se[0],Z=se[1],B=se[2],i,h),h.point(U,R)}function $(){q.point=V,h.lineEnd()}function J(){ne(),q.point=K,q.lineEnd=te}function K(ie,ae){ee(E=ie,ae),k=U,L=R,P=j,I=Z,z=B,q.point=ee}function te(){T(U,R,F,j,Z,B,k,L,E,P,I,z,i,h),q.lineEnd=$,$()}return q}}(d,m):function(x){return(0,n.s)({point:function(y,T){y=x(y,T),this.stream.point(y[0],y[1])}})}(d)}var c=(0,n.s)({point:function(d,m){this.stream.point(d*p.qw,m*p.qw)}});function g(d,m,x,y,T){function h(E,k){return[m+d*(E*=y),x-d*(k*=T)]}return h.invert=function(E,k){return[(E-m)/d*y,(x-k)/d*T]},h}function f(d,m,x,y,T,h){var E=(0,p.W8)(h),k=(0,p.g$)(h),L=E*d,P=k*d,I=E/d,z=k/d,F=(k*x-E*m)/d,U=(k*m+E*x)/d;function R(j,Z){return[L*(j*=y)-P*(Z*=T)+m,x-P*j-L*Z]}return R.invert=function(j,Z){return[y*(I*j-z*Z+F),T*(U-z*j-I*Z)]},R}function b(d){return v(function(){return d})()}function v(d){var m,x,y,T,h,E,k,L,P,I,z=150,F=480,U=250,R=0,j=0,Z=0,B=0,q=0,V=0,ne=1,ee=1,$=null,J=M.c,K=null,te=_.c,ie=.5;function ae(ge){return L(ge[0]*p.qw,ge[1]*p.qw)}function se(ge){return(ge=L.invert(ge[0],ge[1]))&&[ge[0]*p.oh,ge[1]*p.oh]}function ce(){var ge=f(z,0,0,ne,ee,V).apply(null,m(R,j)),ve=(V?f:g)(z,F-ge[0],U-ge[1],ne,ee,V);return x=(0,s.O)(Z,B,q),k=(0,w.c)(m,ve),L=(0,w.c)(x,k),E=u(k,ie),de()}function de(){return P=I=null,ae}return ae.stream=function(ge){return P&&I===ge?P:P=c(function(ve){return(0,n.s)({point:function(be,me){var Se=ve(be,me);return this.stream.point(Se[0],Se[1])}})}(x)(J(E(te(I=ge)))))},ae.preclip=function(ge){return arguments.length?(J=ge,$=void 0,de()):J},ae.postclip=function(ge){return arguments.length?(te=ge,K=y=T=h=null,de()):te},ae.clipAngle=function(ge){return arguments.length?(J=+ge?(0,A.c)($=ge*p.qw):($=null,M.c),de()):$*p.oh},ae.clipExtent=function(ge){return arguments.length?(te=ge==null?(K=y=T=h=null,_.c):(0,o.c)(K=+ge[0][0],y=+ge[0][1],T=+ge[1][0],h=+ge[1][1]),de()):K==null?null:[[K,y],[T,h]]},ae.scale=function(ge){return arguments.length?(z=+ge,ce()):z},ae.translate=function(ge){return arguments.length?(F=+ge[0],U=+ge[1],ce()):[F,U]},ae.center=function(ge){return arguments.length?(R=ge[0]%360*p.qw,j=ge[1]%360*p.qw,ce()):[R*p.oh,j*p.oh]},ae.rotate=function(ge){return arguments.length?(Z=ge[0]%360*p.qw,B=ge[1]%360*p.qw,q=ge.length>2?ge[2]%360*p.qw:0,ce()):[Z*p.oh,B*p.oh,q*p.oh]},ae.angle=function(ge){return arguments.length?(V=ge%360*p.qw,ce()):V*p.oh},ae.reflectX=function(ge){return arguments.length?(ne=ge?-1:1,ce()):ne<0},ae.reflectY=function(ge){return arguments.length?(ee=ge?-1:1,ce()):ee<0},ae.precision=function(ge){return arguments.length?(E=u(k,ie=ge*ge),de()):(0,p._I)(ie)},ae.fitExtent=function(ge,ve){return(0,a.QX)(ae,ge,ve)},ae.fitSize=function(ge,ve){return(0,a.UV)(ae,ge,ve)},ae.fitWidth=function(ge,ve){return(0,a.Qx)(ae,ge,ve)},ae.fitHeight=function(ge,ve){return(0,a.OW)(ae,ge,ve)},function(){return m=d.apply(this,arguments),ae.invert=m.invert&&se,ce()}}},47984:function(Y,O,e){e.d(O,{c:function(){return w},g:function(){return o}});var M=e(87952),A=e(64528);function o(_,p){var s=p*p,n=s*s;return[_*(.8707-.131979*s+n*(n*(.003971*s-.001529*n)-.013791)),p*(1.007226+s*(.015085+n*(.028874*s-.044475-.005916*n)))]}function w(){return(0,M.c)(o).scale(175.295)}o.invert=function(_,p){var s,n=p,a=25;do{var r=n*n,i=r*r;n-=s=(n*(1.007226+r*(.015085+i*(.028874*r-.044475-.005916*i)))-p)/(1.007226+r*(.045255+i*(.259866*r-.311325-.06507600000000001*i)))}while((0,A.a2)(s)>A.Gg&&--a>0);return[_/(.8707+(r=n*n)*(r*(r*r*r*(.003971-.001529*r)-.013791)-.131979)),n]}},4888:function(Y,O,e){e.d(O,{c:function(){return _},t:function(){return w}});var M=e(64528),A=e(62280),o=e(87952);function w(p,s){return[(0,M.W8)(s)*(0,M.g$)(p),(0,M.g$)(s)]}function _(){return(0,o.c)(w).scale(249.5).clipAngle(90+M.Gg)}w.invert=(0,A.g)(M.qR)},92992:function(Y,O,e){e.d(O,{O:function(){return w},c:function(){return n}});var M=e(68120),A=e(64528);function o(a,r){return[(0,A.a2)(a)>A.pi?a+Math.round(-a/A.kD)*A.kD:a,r]}function w(a,r,i){return(a%=A.kD)?r||i?(0,M.c)(p(a),s(r,i)):p(a):r||i?s(r,i):o}function _(a){return function(r,i){return[(r+=a)>A.pi?r-A.kD:r<-A.pi?r+A.kD:r,i]}}function p(a){var r=_(a);return r.invert=_(-a),r}function s(a,r){var i=(0,A.W8)(a),l=(0,A.g$)(a),u=(0,A.W8)(r),c=(0,A.g$)(r);function g(f,b){var v=(0,A.W8)(b),d=(0,A.W8)(f)*v,m=(0,A.g$)(f)*v,x=(0,A.g$)(b),y=x*i+d*l;return[(0,A.WE)(m*u-y*c,d*i-x*l),(0,A.qR)(y*u+m*c)]}return g.invert=function(f,b){var v=(0,A.W8)(b),d=(0,A.W8)(f)*v,m=(0,A.g$)(f)*v,x=(0,A.g$)(b),y=x*u-m*c;return[(0,A.WE)(m*u+x*c,d*i+y*l),(0,A.qR)(y*i-d*l)]},g}function n(a){function r(i){return(i=a(i[0]*A.qw,i[1]*A.qw))[0]*=A.oh,i[1]*=A.oh,i}return a=w(a[0]*A.qw,a[1]*A.qw,a.length>2?a[2]*A.qw:0),r.invert=function(i){return(i=a.invert(i[0]*A.qw,i[1]*A.qw))[0]*=A.oh,i[1]*=A.oh,i},r}o.invert=o},16016:function(Y,O,e){function M(s,n){s&&o.hasOwnProperty(s.type)&&o[s.type](s,n)}e.d(O,{c:function(){return p}});var A={Feature:function(s,n){M(s.geometry,n)},FeatureCollection:function(s,n){for(var a=s.features,r=-1,i=a.length;++r<i;)M(a[r].geometry,n)}},o={Sphere:function(s,n){n.sphere()},Point:function(s,n){s=s.coordinates,n.point(s[0],s[1],s[2])},MultiPoint:function(s,n){for(var a=s.coordinates,r=-1,i=a.length;++r<i;)s=a[r],n.point(s[0],s[1],s[2])},LineString:function(s,n){w(s.coordinates,n,0)},MultiLineString:function(s,n){for(var a=s.coordinates,r=-1,i=a.length;++r<i;)w(a[r],n,0)},Polygon:function(s,n){_(s.coordinates,n)},MultiPolygon:function(s,n){for(var a=s.coordinates,r=-1,i=a.length;++r<i;)_(a[r],n)},GeometryCollection:function(s,n){for(var a=s.geometries,r=-1,i=a.length;++r<i;)M(a[r],n)}};function w(s,n,a){var r,i=-1,l=s.length-a;for(n.lineStart();++i<l;)r=s[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function _(s,n){var a=-1,r=s.length;for(n.polygonStart();++a<r;)w(s[a],n,1);n.polygonEnd()}function p(s,n){s&&A.hasOwnProperty(s.type)?A[s.type](s,n):M(s,n)}},15196:function(Y,O,e){function M(w){return{stream:A(w)}}function A(w){return function(_){var p=new o;for(var s in w)p[s]=w[s];return p.stream=_,p}}function o(){}e.d(O,{c:function(){return M},s:function(){return A}}),o.prototype={constructor:o,point:function(w,_){this.stream.point(w,_)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},74148:function(Y,O,e){function M(le,pe){return le.parent===pe.parent?1:2}function A(le,pe){return le+pe.x}function o(le,pe){return Math.max(le,pe.y)}function w(){var le=M,pe=1,Ee=1,Te=!1;function Me(Le){var Ie,he=0;Le.eachAfter(function(Oe){var Ve=Oe.children;Ve?(Oe.x=function(qe){return qe.reduce(A,0)/qe.length}(Ve),Oe.y=function(qe){return 1+qe.reduce(o,0)}(Ve)):(Oe.x=Ie?he+=le(Oe,Ie):0,Oe.y=0,Ie=Oe)});var xe=function(Oe){for(var Ve;Ve=Oe.children;)Oe=Ve[0];return Oe}(Le),ke=function(Oe){for(var Ve;Ve=Oe.children;)Oe=Ve[Ve.length-1];return Oe}(Le),ze=xe.x-le(xe,ke)/2,Re=ke.x+le(ke,xe)/2;return Le.eachAfter(Te?function(Oe){Oe.x=(Oe.x-Le.x)*pe,Oe.y=(Le.y-Oe.y)*Ee}:function(Oe){Oe.x=(Oe.x-ze)/(Re-ze)*pe,Oe.y=(1-(Le.y?Oe.y/Le.y:1))*Ee})}return Me.separation=function(Le){return arguments.length?(le=Le,Me):le},Me.size=function(Le){return arguments.length?(Te=!1,pe=+Le[0],Ee=+Le[1],Me):Te?null:[pe,Ee]},Me.nodeSize=function(Le){return arguments.length?(Te=!0,pe=+Le[0],Ee=+Le[1],Me):Te?[pe,Ee]:null},Me}function _(le){var pe=0,Ee=le.children,Te=Ee&&Ee.length;if(Te)for(;--Te>=0;)pe+=Ee[Te].value;else pe=1;le.value=pe}function p(le,pe){var Ee,Te,Me,Le,Ie,he=new r(le),xe=+le.value&&(he.value=le.value),ke=[he];for(pe==null&&(pe=s);Ee=ke.pop();)if(xe&&(Ee.value=+Ee.data.value),(Me=pe(Ee.data))&&(Ie=Me.length))for(Ee.children=new Array(Ie),Le=Ie-1;Le>=0;--Le)ke.push(Te=Ee.children[Le]=new r(Me[Le])),Te.parent=Ee,Te.depth=Ee.depth+1;return he.eachBefore(a)}function s(le){return le.children}function n(le){le.data=le.data.data}function a(le){var pe=0;do le.height=pe;while((le=le.parent)&&le.height<++pe)}function r(le){this.data=le,this.depth=this.height=0,this.parent=null}e.r(O),e.d(O,{cluster:function(){return w},hierarchy:function(){return p},pack:function(){return z},packEnclose:function(){return l},packSiblings:function(){return E},partition:function(){return B},stratify:function(){return J},tree:function(){return de},treemap:function(){return Se},treemapBinary:function(){return we},treemapDice:function(){return Z},treemapResquarify:function(){return oe},treemapSlice:function(){return ge},treemapSliceDice:function(){return _e},treemapSquarify:function(){return me}}),r.prototype=p.prototype={constructor:r,count:function(){return this.eachAfter(_)},each:function(le){var pe,Ee,Te,Me,Le=this,Ie=[Le];do for(pe=Ie.reverse(),Ie=[];Le=pe.pop();)if(le(Le),Ee=Le.children)for(Te=0,Me=Ee.length;Te<Me;++Te)Ie.push(Ee[Te]);while(Ie.length);return this},eachAfter:function(le){for(var pe,Ee,Te,Me=this,Le=[Me],Ie=[];Me=Le.pop();)if(Ie.push(Me),pe=Me.children)for(Ee=0,Te=pe.length;Ee<Te;++Ee)Le.push(pe[Ee]);for(;Me=Ie.pop();)le(Me);return this},eachBefore:function(le){for(var pe,Ee,Te=this,Me=[Te];Te=Me.pop();)if(le(Te),pe=Te.children)for(Ee=pe.length-1;Ee>=0;--Ee)Me.push(pe[Ee]);return this},sum:function(le){return this.eachAfter(function(pe){for(var Ee=+le(pe.data)||0,Te=pe.children,Me=Te&&Te.length;--Me>=0;)Ee+=Te[Me].value;pe.value=Ee})},sort:function(le){return this.eachBefore(function(pe){pe.children&&pe.children.sort(le)})},path:function(le){for(var pe=this,Ee=function(Le,Ie){if(Le===Ie)return Le;var he=Le.ancestors(),xe=Ie.ancestors(),ke=null;for(Le=he.pop(),Ie=xe.pop();Le===Ie;)ke=Le,Le=he.pop(),Ie=xe.pop();return ke}(pe,le),Te=[pe];pe!==Ee;)pe=pe.parent,Te.push(pe);for(var Me=Te.length;le!==Ee;)Te.splice(Me,0,le),le=le.parent;return Te},ancestors:function(){for(var le=this,pe=[le];le=le.parent;)pe.push(le);return pe},descendants:function(){var le=[];return this.each(function(pe){le.push(pe)}),le},leaves:function(){var le=[];return this.eachBefore(function(pe){pe.children||le.push(pe)}),le},links:function(){var le=this,pe=[];return le.each(function(Ee){Ee!==le&&pe.push({source:Ee.parent,target:Ee})}),pe},copy:function(){return p(this).eachBefore(n)}};var i=Array.prototype.slice;function l(le){for(var pe,Ee,Te=0,Me=(le=function(Ie){for(var he,xe,ke=Ie.length;ke;)xe=Math.random()*ke--|0,he=Ie[ke],Ie[ke]=Ie[xe],Ie[xe]=he;return Ie}(i.call(le))).length,Le=[];Te<Me;)pe=le[Te],Ee&&g(Ee,pe)?++Te:(Ee=b(Le=u(Le,pe)),Te=0);return Ee}function u(le,pe){var Ee,Te;if(f(pe,le))return[pe];for(Ee=0;Ee<le.length;++Ee)if(c(pe,le[Ee])&&f(v(le[Ee],pe),le))return[le[Ee],pe];for(Ee=0;Ee<le.length-1;++Ee)for(Te=Ee+1;Te<le.length;++Te)if(c(v(le[Ee],le[Te]),pe)&&c(v(le[Ee],pe),le[Te])&&c(v(le[Te],pe),le[Ee])&&f(d(le[Ee],le[Te],pe),le))return[le[Ee],le[Te],pe];throw new Error}function c(le,pe){var Ee=le.r-pe.r,Te=pe.x-le.x,Me=pe.y-le.y;return Ee<0||Ee*Ee<Te*Te+Me*Me}function g(le,pe){var Ee=le.r-pe.r+1e-6,Te=pe.x-le.x,Me=pe.y-le.y;return Ee>0&&Ee*Ee>Te*Te+Me*Me}function f(le,pe){for(var Ee=0;Ee<pe.length;++Ee)if(!g(le,pe[Ee]))return!1;return!0}function b(le){switch(le.length){case 1:return{x:(pe=le[0]).x,y:pe.y,r:pe.r};case 2:return v(le[0],le[1]);case 3:return d(le[0],le[1],le[2])}var pe}function v(le,pe){var Ee=le.x,Te=le.y,Me=le.r,Le=pe.x,Ie=pe.y,he=pe.r,xe=Le-Ee,ke=Ie-Te,ze=he-Me,Re=Math.sqrt(xe*xe+ke*ke);return{x:(Ee+Le+xe/Re*ze)/2,y:(Te+Ie+ke/Re*ze)/2,r:(Re+Me+he)/2}}function d(le,pe,Ee){var Te=le.x,Me=le.y,Le=le.r,Ie=pe.x,he=pe.y,xe=pe.r,ke=Ee.x,ze=Ee.y,Re=Ee.r,Oe=Te-Ie,Ve=Te-ke,qe=Me-he,Je=Me-ze,ot=xe-Le,rt=Re-Le,dt=Te*Te+Me*Me-Le*Le,_t=dt-Ie*Ie-he*he+xe*xe,yt=dt-ke*ke-ze*ze+Re*Re,et=Ve*qe-Oe*Je,nt=(qe*yt-Je*_t)/(2*et)-Te,At=(Je*ot-qe*rt)/et,Rt=(Ve*_t-Oe*yt)/(2*et)-Me,Ft=(Oe*rt-Ve*ot)/et,It=At*At+Ft*Ft-1,Ge=2*(Le+nt*At+Rt*Ft),Ye=nt*nt+Rt*Rt-Le*Le,Ne=-(It?(Ge+Math.sqrt(Ge*Ge-4*It*Ye))/(2*It):Ye/Ge);return{x:Te+nt+At*Ne,y:Me+Rt+Ft*Ne,r:Ne}}function m(le,pe,Ee){var Te,Me,Le,Ie,he=le.x-pe.x,xe=le.y-pe.y,ke=he*he+xe*xe;ke?(Me=pe.r+Ee.r,Me*=Me,Ie=le.r+Ee.r,Me>(Ie*=Ie)?(Te=(ke+Ie-Me)/(2*ke),Le=Math.sqrt(Math.max(0,Ie/ke-Te*Te)),Ee.x=le.x-Te*he-Le*xe,Ee.y=le.y-Te*xe+Le*he):(Te=(ke+Me-Ie)/(2*ke),Le=Math.sqrt(Math.max(0,Me/ke-Te*Te)),Ee.x=pe.x+Te*he-Le*xe,Ee.y=pe.y+Te*xe+Le*he)):(Ee.x=pe.x+Ee.r,Ee.y=pe.y)}function x(le,pe){var Ee=le.r+pe.r-1e-6,Te=pe.x-le.x,Me=pe.y-le.y;return Ee>0&&Ee*Ee>Te*Te+Me*Me}function y(le){var pe=le._,Ee=le.next._,Te=pe.r+Ee.r,Me=(pe.x*Ee.r+Ee.x*pe.r)/Te,Le=(pe.y*Ee.r+Ee.y*pe.r)/Te;return Me*Me+Le*Le}function T(le){this._=le,this.next=null,this.previous=null}function h(le){if(!(Me=le.length))return 0;var pe,Ee,Te,Me,Le,Ie,he,xe,ke,ze,Re;if((pe=le[0]).x=0,pe.y=0,!(Me>1))return pe.r;if(Ee=le[1],pe.x=-Ee.r,Ee.x=pe.r,Ee.y=0,!(Me>2))return pe.r+Ee.r;m(Ee,pe,Te=le[2]),pe=new T(pe),Ee=new T(Ee),Te=new T(Te),pe.next=Te.previous=Ee,Ee.next=pe.previous=Te,Te.next=Ee.previous=pe;e:for(he=3;he<Me;++he){m(pe._,Ee._,Te=le[he]),Te=new T(Te),xe=Ee.next,ke=pe.previous,ze=Ee._.r,Re=pe._.r;do if(ze<=Re){if(x(xe._,Te._)){Ee=xe,pe.next=Ee,Ee.previous=pe,--he;continue e}ze+=xe._.r,xe=xe.next}else{if(x(ke._,Te._)){(pe=ke).next=Ee,Ee.previous=pe,--he;continue e}Re+=ke._.r,ke=ke.previous}while(xe!==ke.next);for(Te.previous=pe,Te.next=Ee,pe.next=Ee.previous=Ee=Te,Le=y(pe);(Te=Te.next)!==Ee;)(Ie=y(Te))<Le&&(pe=Te,Le=Ie);Ee=pe.next}for(pe=[Ee._],Te=Ee;(Te=Te.next)!==Ee;)pe.push(Te._);for(Te=l(pe),he=0;he<Me;++he)(pe=le[he]).x-=Te.x,pe.y-=Te.y;return Te.r}function E(le){return h(le),le}function k(le){if(typeof le!="function")throw new Error;return le}function L(){return 0}function P(le){return function(){return le}}function I(le){return Math.sqrt(le.value)}function z(){var le=null,pe=1,Ee=1,Te=L;function Me(Le){return Le.x=pe/2,Le.y=Ee/2,le?Le.eachBefore(F(le)).eachAfter(U(Te,.5)).eachBefore(R(1)):Le.eachBefore(F(I)).eachAfter(U(L,1)).eachAfter(U(Te,Le.r/Math.min(pe,Ee))).eachBefore(R(Math.min(pe,Ee)/(2*Le.r))),Le}return Me.radius=function(Le){return arguments.length?(le=(Ie=Le)==null?null:k(Ie),Me):le;var Ie},Me.size=function(Le){return arguments.length?(pe=+Le[0],Ee=+Le[1],Me):[pe,Ee]},Me.padding=function(Le){return arguments.length?(Te=typeof Le=="function"?Le:P(+Le),Me):Te},Me}function F(le){return function(pe){pe.children||(pe.r=Math.max(0,+le(pe)||0))}}function U(le,pe){return function(Ee){if(Te=Ee.children){var Te,Me,Le,Ie=Te.length,he=le(Ee)*pe||0;if(he)for(Me=0;Me<Ie;++Me)Te[Me].r+=he;if(Le=h(Te),he)for(Me=0;Me<Ie;++Me)Te[Me].r-=he;Ee.r=Le+he}}}function R(le){return function(pe){var Ee=pe.parent;pe.r*=le,Ee&&(pe.x=Ee.x+le*pe.x,pe.y=Ee.y+le*pe.y)}}function j(le){le.x0=Math.round(le.x0),le.y0=Math.round(le.y0),le.x1=Math.round(le.x1),le.y1=Math.round(le.y1)}function Z(le,pe,Ee,Te,Me){for(var Le,Ie=le.children,he=-1,xe=Ie.length,ke=le.value&&(Te-pe)/le.value;++he<xe;)(Le=Ie[he]).y0=Ee,Le.y1=Me,Le.x0=pe,Le.x1=pe+=Le.value*ke}function B(){var le=1,pe=1,Ee=0,Te=!1;function Me(Le){var Ie=Le.height+1;return Le.x0=Le.y0=Ee,Le.x1=le,Le.y1=pe/Ie,Le.eachBefore(function(he,xe){return function(ke){ke.children&&Z(ke,ke.x0,he*(ke.depth+1)/xe,ke.x1,he*(ke.depth+2)/xe);var ze=ke.x0,Re=ke.y0,Oe=ke.x1-Ee,Ve=ke.y1-Ee;Oe<ze&&(ze=Oe=(ze+Oe)/2),Ve<Re&&(Re=Ve=(Re+Ve)/2),ke.x0=ze,ke.y0=Re,ke.x1=Oe,ke.y1=Ve}}(pe,Ie)),Te&&Le.eachBefore(j),Le}return Me.round=function(Le){return arguments.length?(Te=!!Le,Me):Te},Me.size=function(Le){return arguments.length?(le=+Le[0],pe=+Le[1],Me):[le,pe]},Me.padding=function(Le){return arguments.length?(Ee=+Le,Me):Ee},Me}var q="$",V={depth:-1},ne={};function ee(le){return le.id}function $(le){return le.parentId}function J(){var le=ee,pe=$;function Ee(Te){var Me,Le,Ie,he,xe,ke,ze,Re=Te.length,Oe=new Array(Re),Ve={};for(Le=0;Le<Re;++Le)Me=Te[Le],xe=Oe[Le]=new r(Me),(ke=le(Me,Le,Te))!=null&&(ke+="")&&(Ve[ze=q+(xe.id=ke)]=ze in Ve?ne:xe);for(Le=0;Le<Re;++Le)if(xe=Oe[Le],(ke=pe(Te[Le],Le,Te))!=null&&(ke+="")){if(!(he=Ve[q+ke]))throw new Error("missing: "+ke);if(he===ne)throw new Error("ambiguous: "+ke);he.children?he.children.push(xe):he.children=[xe],xe.parent=he}else{if(Ie)throw new Error("multiple roots");Ie=xe}if(!Ie)throw new Error("no root");if(Ie.parent=V,Ie.eachBefore(function(qe){qe.depth=qe.parent.depth+1,--Re}).eachBefore(a),Ie.parent=null,Re>0)throw new Error("cycle");return Ie}return Ee.id=function(Te){return arguments.length?(le=k(Te),Ee):le},Ee.parentId=function(Te){return arguments.length?(pe=k(Te),Ee):pe},Ee}function K(le,pe){return le.parent===pe.parent?1:2}function te(le){var pe=le.children;return pe?pe[0]:le.t}function ie(le){var pe=le.children;return pe?pe[pe.length-1]:le.t}function ae(le,pe,Ee){var Te=Ee/(pe.i-le.i);pe.c-=Te,pe.s+=Ee,le.c+=Te,pe.z+=Ee,pe.m+=Ee}function se(le,pe,Ee){return le.a.parent===pe.parent?le.a:Ee}function ce(le,pe){this._=le,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=pe}function de(){var le=K,pe=1,Ee=1,Te=null;function Me(xe){var ke=function(rt){for(var dt,_t,yt,et,nt,At=new ce(rt,0),Rt=[At];dt=Rt.pop();)if(yt=dt._.children)for(dt.children=new Array(nt=yt.length),et=nt-1;et>=0;--et)Rt.push(_t=dt.children[et]=new ce(yt[et],et)),_t.parent=dt;return(At.parent=new ce(null,0)).children=[At],At}(xe);if(ke.eachAfter(Le),ke.parent.m=-ke.z,ke.eachBefore(Ie),Te)xe.eachBefore(he);else{var ze=xe,Re=xe,Oe=xe;xe.eachBefore(function(rt){rt.x<ze.x&&(ze=rt),rt.x>Re.x&&(Re=rt),rt.depth>Oe.depth&&(Oe=rt)});var Ve=ze===Re?1:le(ze,Re)/2,qe=Ve-ze.x,Je=pe/(Re.x+Ve+qe),ot=Ee/(Oe.depth||1);xe.eachBefore(function(rt){rt.x=(rt.x+qe)*Je,rt.y=rt.depth*ot})}return xe}function Le(xe){var ke=xe.children,ze=xe.parent.children,Re=xe.i?ze[xe.i-1]:null;if(ke){(function(Ve){for(var qe,Je=0,ot=0,rt=Ve.children,dt=rt.length;--dt>=0;)(qe=rt[dt]).z+=Je,qe.m+=Je,Je+=qe.s+(ot+=qe.c)})(xe);var Oe=(ke[0].z+ke[ke.length-1].z)/2;Re?(xe.z=Re.z+le(xe._,Re._),xe.m=xe.z-Oe):xe.z=Oe}else Re&&(xe.z=Re.z+le(xe._,Re._));xe.parent.A=function(Ve,qe,Je){if(qe){for(var ot,rt=Ve,dt=Ve,_t=qe,yt=rt.parent.children[0],et=rt.m,nt=dt.m,At=_t.m,Rt=yt.m;_t=ie(_t),rt=te(rt),_t&&rt;)yt=te(yt),(dt=ie(dt)).a=Ve,(ot=_t.z+At-rt.z-et+le(_t._,rt._))>0&&(ae(se(_t,Ve,Je),Ve,ot),et+=ot,nt+=ot),At+=_t.m,et+=rt.m,Rt+=yt.m,nt+=dt.m;_t&&!ie(dt)&&(dt.t=_t,dt.m+=At-nt),rt&&!te(yt)&&(yt.t=rt,yt.m+=et-Rt,Je=Ve)}return Je}(xe,Re,xe.parent.A||ze[0])}function Ie(xe){xe._.x=xe.z+xe.parent.m,xe.m+=xe.parent.m}function he(xe){xe.x*=pe,xe.y=xe.depth*Ee}return Me.separation=function(xe){return arguments.length?(le=xe,Me):le},Me.size=function(xe){return arguments.length?(Te=!1,pe=+xe[0],Ee=+xe[1],Me):Te?null:[pe,Ee]},Me.nodeSize=function(xe){return arguments.length?(Te=!0,pe=+xe[0],Ee=+xe[1],Me):Te?[pe,Ee]:null},Me}function ge(le,pe,Ee,Te,Me){for(var Le,Ie=le.children,he=-1,xe=Ie.length,ke=le.value&&(Me-Ee)/le.value;++he<xe;)(Le=Ie[he]).x0=pe,Le.x1=Te,Le.y0=Ee,Le.y1=Ee+=Le.value*ke}ce.prototype=Object.create(r.prototype);var ve=(1+Math.sqrt(5))/2;function be(le,pe,Ee,Te,Me,Le){for(var Ie,he,xe,ke,ze,Re,Oe,Ve,qe,Je,ot,rt=[],dt=pe.children,_t=0,yt=0,et=dt.length,nt=pe.value;_t<et;){xe=Me-Ee,ke=Le-Te;do ze=dt[yt++].value;while(!ze&&yt<et);for(Re=Oe=ze,ot=ze*ze*(Je=Math.max(ke/xe,xe/ke)/(nt*le)),qe=Math.max(Oe/ot,ot/Re);yt<et;++yt){if(ze+=he=dt[yt].value,he<Re&&(Re=he),he>Oe&&(Oe=he),ot=ze*ze*Je,(Ve=Math.max(Oe/ot,ot/Re))>qe){ze-=he;break}qe=Ve}rt.push(Ie={value:ze,dice:xe<ke,children:dt.slice(_t,yt)}),Ie.dice?Z(Ie,Ee,Te,Me,nt?Te+=ke*ze/nt:Le):ge(Ie,Ee,Te,nt?Ee+=xe*ze/nt:Me,Le),nt-=ze,_t=yt}return rt}var me=function le(pe){function Ee(Te,Me,Le,Ie,he){be(pe,Te,Me,Le,Ie,he)}return Ee.ratio=function(Te){return le((Te=+Te)>1?Te:1)},Ee}(ve);function Se(){var le=me,pe=!1,Ee=1,Te=1,Me=[0],Le=L,Ie=L,he=L,xe=L,ke=L;function ze(Oe){return Oe.x0=Oe.y0=0,Oe.x1=Ee,Oe.y1=Te,Oe.eachBefore(Re),Me=[0],pe&&Oe.eachBefore(j),Oe}function Re(Oe){var Ve=Me[Oe.depth],qe=Oe.x0+Ve,Je=Oe.y0+Ve,ot=Oe.x1-Ve,rt=Oe.y1-Ve;ot<qe&&(qe=ot=(qe+ot)/2),rt<Je&&(Je=rt=(Je+rt)/2),Oe.x0=qe,Oe.y0=Je,Oe.x1=ot,Oe.y1=rt,Oe.children&&(Ve=Me[Oe.depth+1]=Le(Oe)/2,qe+=ke(Oe)-Ve,Je+=Ie(Oe)-Ve,(ot-=he(Oe)-Ve)<qe&&(qe=ot=(qe+ot)/2),(rt-=xe(Oe)-Ve)<Je&&(Je=rt=(Je+rt)/2),le(Oe,qe,Je,ot,rt))}return ze.round=function(Oe){return arguments.length?(pe=!!Oe,ze):pe},ze.size=function(Oe){return arguments.length?(Ee=+Oe[0],Te=+Oe[1],ze):[Ee,Te]},ze.tile=function(Oe){return arguments.length?(le=k(Oe),ze):le},ze.padding=function(Oe){return arguments.length?ze.paddingInner(Oe).paddingOuter(Oe):ze.paddingInner()},ze.paddingInner=function(Oe){return arguments.length?(Le=typeof Oe=="function"?Oe:P(+Oe),ze):Le},ze.paddingOuter=function(Oe){return arguments.length?ze.paddingTop(Oe).paddingRight(Oe).paddingBottom(Oe).paddingLeft(Oe):ze.paddingTop()},ze.paddingTop=function(Oe){return arguments.length?(Ie=typeof Oe=="function"?Oe:P(+Oe),ze):Ie},ze.paddingRight=function(Oe){return arguments.length?(he=typeof Oe=="function"?Oe:P(+Oe),ze):he},ze.paddingBottom=function(Oe){return arguments.length?(xe=typeof Oe=="function"?Oe:P(+Oe),ze):xe},ze.paddingLeft=function(Oe){return arguments.length?(ke=typeof Oe=="function"?Oe:P(+Oe),ze):ke},ze}function we(le,pe,Ee,Te,Me){var Le,Ie,he=le.children,xe=he.length,ke=new Array(xe+1);for(ke[0]=Ie=Le=0;Le<xe;++Le)ke[Le+1]=Ie+=he[Le].value;(function ze(Re,Oe,Ve,qe,Je,ot,rt){if(Re>=Oe-1){var dt=he[Re];return dt.x0=qe,dt.y0=Je,dt.x1=ot,void(dt.y1=rt)}for(var _t=ke[Re],yt=Ve/2+_t,et=Re+1,nt=Oe-1;et<nt;){var At=et+nt>>>1;ke[At]<yt?et=At+1:nt=At}yt-ke[et-1]<ke[et]-yt&&Re+1<et&&--et;var Rt=ke[et]-_t,Ft=Ve-Rt;if(ot-qe>rt-Je){var It=(qe*Ft+ot*Rt)/Ve;ze(Re,et,Rt,qe,Je,It,rt),ze(et,Oe,Ft,It,Je,ot,rt)}else{var Ge=(Je*Ft+rt*Rt)/Ve;ze(Re,et,Rt,qe,Je,ot,Ge),ze(et,Oe,Ft,qe,Ge,ot,rt)}})(0,xe,le.value,pe,Ee,Te,Me)}function _e(le,pe,Ee,Te,Me){(1&le.depth?ge:Z)(le,pe,Ee,Te,Me)}var oe=function le(pe){function Ee(Te,Me,Le,Ie,he){if((xe=Te._squarify)&&xe.ratio===pe)for(var xe,ke,ze,Re,Oe,Ve=-1,qe=xe.length,Je=Te.value;++Ve<qe;){for(ze=(ke=xe[Ve]).children,Re=ke.value=0,Oe=ze.length;Re<Oe;++Re)ke.value+=ze[Re].value;ke.dice?Z(ke,Me,Le,Ie,Le+=(he-Le)*ke.value/Je):ge(ke,Me,Le,Me+=(Ie-Me)*ke.value/Je,he),Je-=ke.value}else Te._squarify=xe=be(pe,Te,Me,Le,Ie,he),xe.ratio=pe}return Ee.ratio=function(Te){return le((Te=+Te)>1?Te:1)},Ee}(ve)},10132:function(Y,O,e){e.d(O,{ak:function(){return g}});var M=Math.PI,A=2*M,o=1e-6,w=A-o;function _(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function p(){return new _}_.prototype=p.prototype={constructor:_,moveTo:function(f,b){this._+="M"+(this._x0=this._x1=+f)+","+(this._y0=this._y1=+b)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(f,b){this._+="L"+(this._x1=+f)+","+(this._y1=+b)},quadraticCurveTo:function(f,b,v,d){this._+="Q"+ +f+","+ +b+","+(this._x1=+v)+","+(this._y1=+d)},bezierCurveTo:function(f,b,v,d,m,x){this._+="C"+ +f+","+ +b+","+ +v+","+ +d+","+(this._x1=+m)+","+(this._y1=+x)},arcTo:function(f,b,v,d,m){f=+f,b=+b,v=+v,d=+d,m=+m;var x=this._x1,y=this._y1,T=v-f,h=d-b,E=x-f,k=y-b,L=E*E+k*k;if(m<0)throw new Error("negative radius: "+m);if(this._x1===null)this._+="M"+(this._x1=f)+","+(this._y1=b);else if(L>o)if(Math.abs(k*T-h*E)>o&&m){var P=v-x,I=d-y,z=T*T+h*h,F=P*P+I*I,U=Math.sqrt(z),R=Math.sqrt(L),j=m*Math.tan((M-Math.acos((z+L-F)/(2*U*R)))/2),Z=j/R,B=j/U;Math.abs(Z-1)>o&&(this._+="L"+(f+Z*E)+","+(b+Z*k)),this._+="A"+m+","+m+",0,0,"+ +(k*P>E*I)+","+(this._x1=f+B*T)+","+(this._y1=b+B*h)}else this._+="L"+(this._x1=f)+","+(this._y1=b)},arc:function(f,b,v,d,m,x){f=+f,b=+b,x=!!x;var y=(v=+v)*Math.cos(d),T=v*Math.sin(d),h=f+y,E=b+T,k=1^x,L=x?d-m:m-d;if(v<0)throw new Error("negative radius: "+v);this._x1===null?this._+="M"+h+","+E:(Math.abs(this._x1-h)>o||Math.abs(this._y1-E)>o)&&(this._+="L"+h+","+E),v&&(L<0&&(L=L%A+A),L>w?this._+="A"+v+","+v+",0,1,"+k+","+(f-y)+","+(b-T)+"A"+v+","+v+",0,1,"+k+","+(this._x1=h)+","+(this._y1=E):L>o&&(this._+="A"+v+","+v+",0,"+ +(L>=M)+","+k+","+(this._x1=f+v*Math.cos(m))+","+(this._y1=b+v*Math.sin(m))))},rect:function(f,b,v,d){this._+="M"+(this._x0=this._x1=+f)+","+(this._y0=this._y1=+b)+"h"+ +v+"v"+ +d+"h"+-v+"Z"},toString:function(){return this._}};var s=p,n=Array.prototype.slice;function a(f){return function(){return f}}function r(f){return f[0]}function i(f){return f[1]}function l(f){return f.source}function u(f){return f.target}function c(f,b,v,d,m){f.moveTo(b,v),f.bezierCurveTo(b=(b+d)/2,v,b,m,d,m)}function g(){return function(f){var b=l,v=u,d=r,m=i,x=null;function y(){var T,h=n.call(arguments),E=b.apply(this,h),k=v.apply(this,h);if(x||(x=T=s()),f(x,+d.apply(this,(h[0]=E,h)),+m.apply(this,h),+d.apply(this,(h[0]=k,h)),+m.apply(this,h)),T)return x=null,T+""||null}return y.source=function(T){return arguments.length?(b=T,y):b},y.target=function(T){return arguments.length?(v=T,y):v},y.x=function(T){return arguments.length?(d=typeof T=="function"?T:a(+T),y):d},y.y=function(T){return arguments.length?(m=typeof T=="function"?T:a(+T),y):m},y.context=function(T){return arguments.length?(x=T??null,y):x},y}(c)}},94336:function(Y,O,e){e.d(O,{Yn:function(){return l},m_:function(){return r},E9:function(){return u}});var M=e(8208),A=e(58931),o=e(46192),w=e(68936),_=e(32171),p=e(53528);function s(et){if(0<=et.y&&et.y<100){var nt=new Date(-1,et.m,et.d,et.H,et.M,et.S,et.L);return nt.setFullYear(et.y),nt}return new Date(et.y,et.m,et.d,et.H,et.M,et.S,et.L)}function n(et){if(0<=et.y&&et.y<100){var nt=new Date(Date.UTC(-1,et.m,et.d,et.H,et.M,et.S,et.L));return nt.setUTCFullYear(et.y),nt}return new Date(Date.UTC(et.y,et.m,et.d,et.H,et.M,et.S,et.L))}function a(et,nt,At){return{y:et,m:nt,d:At,H:0,M:0,S:0,L:0}}function r(et){var nt=et.dateTime,At=et.date,Rt=et.time,Ft=et.periods,It=et.days,Ge=et.shortDays,Ye=et.months,Ne=et.shortMonths,We=m(Ft),st=x(Ft),it=m(It),Fe=x(It),Be=m(Ge),at=x(Ge),Ze=m(Ye),ht=x(Ye),vt=m(Ne),mt=x(Ne),ft={a:function(Bt){return Ge[Bt.getDay()]},A:function(Bt){return It[Bt.getDay()]},b:function(Bt){return Ne[Bt.getMonth()]},B:function(Bt){return Ye[Bt.getMonth()]},c:null,d:J,e:J,f:se,H:K,I:te,j:ie,L:ae,m:ce,M:de,p:function(Bt){return Ft[+(Bt.getHours()>=12)]},q:function(Bt){return 1+~~(Bt.getMonth()/3)},Q:_t,s:yt,S:ge,u:ve,U:be,V:me,w:Se,W:we,x:null,X:null,y:_e,Y:oe,Z:le,"%":dt},Et={a:function(Bt){return Ge[Bt.getUTCDay()]},A:function(Bt){return It[Bt.getUTCDay()]},b:function(Bt){return Ne[Bt.getUTCMonth()]},B:function(Bt){return Ye[Bt.getUTCMonth()]},c:null,d:pe,e:pe,f:Ie,H:Ee,I:Te,j:Me,L:Le,m:he,M:xe,p:function(Bt){return Ft[+(Bt.getUTCHours()>=12)]},q:function(Bt){return 1+~~(Bt.getUTCMonth()/3)},Q:_t,s:yt,S:ke,u:ze,U:Re,V:Oe,w:Ve,W:qe,x:null,X:null,y:Je,Y:ot,Z:rt,"%":dt},Tt={a:function(Bt,Kt,sn){var Gt=Be.exec(Kt.slice(sn));return Gt?(Bt.w=at[Gt[0].toLowerCase()],sn+Gt[0].length):-1},A:function(Bt,Kt,sn){var Gt=it.exec(Kt.slice(sn));return Gt?(Bt.w=Fe[Gt[0].toLowerCase()],sn+Gt[0].length):-1},b:function(Bt,Kt,sn){var Gt=vt.exec(Kt.slice(sn));return Gt?(Bt.m=mt[Gt[0].toLowerCase()],sn+Gt[0].length):-1},B:function(Bt,Kt,sn){var Gt=Ze.exec(Kt.slice(sn));return Gt?(Bt.m=ht[Gt[0].toLowerCase()],sn+Gt[0].length):-1},c:function(Bt,Kt,sn){return Pt(Bt,nt,Kt,sn)},d:U,e:U,f:V,H:j,I:j,j:R,L:q,m:F,M:Z,p:function(Bt,Kt,sn){var Gt=We.exec(Kt.slice(sn));return Gt?(Bt.p=st[Gt[0].toLowerCase()],sn+Gt[0].length):-1},q:z,Q:ee,s:$,S:B,u:T,U:h,V:E,w:y,W:k,x:function(Bt,Kt,sn){return Pt(Bt,At,Kt,sn)},X:function(Bt,Kt,sn){return Pt(Bt,Rt,Kt,sn)},y:P,Y:L,Z:I,"%":ne};function xt(Bt,Kt){return function(sn){var Gt,Yt,rn,Ln=[],Sn=-1,gn=0,$t=Bt.length;for(sn instanceof Date||(sn=new Date(+sn));++Sn<$t;)Bt.charCodeAt(Sn)===37&&(Ln.push(Bt.slice(gn,Sn)),(Yt=c[Gt=Bt.charAt(++Sn)])!=null?Gt=Bt.charAt(++Sn):Yt=Gt==="e"?" ":"0",(rn=Kt[Gt])&&(Gt=rn(sn,Yt)),Ln.push(Gt),gn=Sn+1);return Ln.push(Bt.slice(gn,Sn)),Ln.join("")}}function Ct(Bt,Kt){return function(sn){var Gt,Yt,rn=a(1900,void 0,1);if(Pt(rn,Bt,sn+="",0)!=sn.length)return null;if("Q"in rn)return new Date(rn.Q);if("s"in rn)return new Date(1e3*rn.s+("L"in rn?rn.L:0));if(Kt&&!("Z"in rn)&&(rn.Z=0),"p"in rn&&(rn.H=rn.H%12+12*rn.p),rn.m===void 0&&(rn.m="q"in rn?rn.q:0),"V"in rn){if(rn.V<1||rn.V>53)return null;"w"in rn||(rn.w=1),"Z"in rn?(Yt=(Gt=n(a(rn.y,0,1))).getUTCDay(),Gt=Yt>4||Yt===0?M.ot.ceil(Gt):(0,M.ot)(Gt),Gt=A.c.offset(Gt,7*(rn.V-1)),rn.y=Gt.getUTCFullYear(),rn.m=Gt.getUTCMonth(),rn.d=Gt.getUTCDate()+(rn.w+6)%7):(Yt=(Gt=s(a(rn.y,0,1))).getDay(),Gt=Yt>4||Yt===0?o.qT.ceil(Gt):(0,o.qT)(Gt),Gt=w.c.offset(Gt,7*(rn.V-1)),rn.y=Gt.getFullYear(),rn.m=Gt.getMonth(),rn.d=Gt.getDate()+(rn.w+6)%7)}else("W"in rn||"U"in rn)&&("w"in rn||(rn.w="u"in rn?rn.u%7:"W"in rn?1:0),Yt="Z"in rn?n(a(rn.y,0,1)).getUTCDay():s(a(rn.y,0,1)).getDay(),rn.m=0,rn.d="W"in rn?(rn.w+6)%7+7*rn.W-(Yt+5)%7:rn.w+7*rn.U-(Yt+6)%7);return"Z"in rn?(rn.H+=rn.Z/100|0,rn.M+=rn.Z%100,n(rn)):s(rn)}}function Pt(Bt,Kt,sn,Gt){for(var Yt,rn,Ln=0,Sn=Kt.length,gn=sn.length;Ln<Sn;){if(Gt>=gn)return-1;if((Yt=Kt.charCodeAt(Ln++))===37){if(Yt=Kt.charAt(Ln++),!(rn=Tt[Yt in c?Kt.charAt(Ln++):Yt])||(Gt=rn(Bt,sn,Gt))<0)return-1}else if(Yt!=sn.charCodeAt(Gt++))return-1}return Gt}return ft.x=xt(At,ft),ft.X=xt(Rt,ft),ft.c=xt(nt,ft),Et.x=xt(At,Et),Et.X=xt(Rt,Et),Et.c=xt(nt,Et),{format:function(Bt){var Kt=xt(Bt+="",ft);return Kt.toString=function(){return Bt},Kt},parse:function(Bt){var Kt=Ct(Bt+="",!1);return Kt.toString=function(){return Bt},Kt},utcFormat:function(Bt){var Kt=xt(Bt+="",Et);return Kt.toString=function(){return Bt},Kt},utcParse:function(Bt){var Kt=Ct(Bt+="",!0);return Kt.toString=function(){return Bt},Kt}}}var i,l,u,c={"-":"",_:" ",0:"0"},g=/^\s*\d+/,f=/^%/,b=/[\\^$*+?|[\]().{}]/g;function v(et,nt,At){var Rt=et<0?"-":"",Ft=(Rt?-et:et)+"",It=Ft.length;return Rt+(It<At?new Array(At-It+1).join(nt)+Ft:Ft)}function d(et){return et.replace(b,"\\$&")}function m(et){return new RegExp("^(?:"+et.map(d).join("|")+")","i")}function x(et){for(var nt={},At=-1,Rt=et.length;++At<Rt;)nt[et[At].toLowerCase()]=At;return nt}function y(et,nt,At){var Rt=g.exec(nt.slice(At,At+1));return Rt?(et.w=+Rt[0],At+Rt[0].length):-1}function T(et,nt,At){var Rt=g.exec(nt.slice(At,At+1));return Rt?(et.u=+Rt[0],At+Rt[0].length):-1}function h(et,nt,At){var Rt=g.exec(nt.slice(At,At+2));return Rt?(et.U=+Rt[0],At+Rt[0].length):-1}function E(et,nt,At){var Rt=g.exec(nt.slice(At,At+2));return Rt?(et.V=+Rt[0],At+Rt[0].length):-1}function k(et,nt,At){var Rt=g.exec(nt.slice(At,At+2));return Rt?(et.W=+Rt[0],At+Rt[0].length):-1}function L(et,nt,At){var Rt=g.exec(nt.slice(At,At+4));return Rt?(et.y=+Rt[0],At+Rt[0].length):-1}function P(et,nt,At){var Rt=g.exec(nt.slice(At,At+2));return Rt?(et.y=+Rt[0]+(+Rt[0]>68?1900:2e3),At+Rt[0].length):-1}function I(et,nt,At){var Rt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(nt.slice(At,At+6));return Rt?(et.Z=Rt[1]?0:-(Rt[2]+(Rt[3]||"00")),At+Rt[0].length):-1}function z(et,nt,At){var Rt=g.exec(nt.slice(At,At+1));return Rt?(et.q=3*Rt[0]-3,At+Rt[0].length):-1}function F(et,nt,At){var Rt=g.exec(nt.slice(At,At+2));return Rt?(et.m=Rt[0]-1,At+Rt[0].length):-1}function U(et,nt,At){var Rt=g.exec(nt.slice(At,At+2));return Rt?(et.d=+Rt[0],At+Rt[0].length):-1}function R(et,nt,At){var Rt=g.exec(nt.slice(At,At+3));return Rt?(et.m=0,et.d=+Rt[0],At+Rt[0].length):-1}function j(et,nt,At){var Rt=g.exec(nt.slice(At,At+2));return Rt?(et.H=+Rt[0],At+Rt[0].length):-1}function Z(et,nt,At){var Rt=g.exec(nt.slice(At,At+2));return Rt?(et.M=+Rt[0],At+Rt[0].length):-1}function B(et,nt,At){var Rt=g.exec(nt.slice(At,At+2));return Rt?(et.S=+Rt[0],At+Rt[0].length):-1}function q(et,nt,At){var Rt=g.exec(nt.slice(At,At+3));return Rt?(et.L=+Rt[0],At+Rt[0].length):-1}function V(et,nt,At){var Rt=g.exec(nt.slice(At,At+6));return Rt?(et.L=Math.floor(Rt[0]/1e3),At+Rt[0].length):-1}function ne(et,nt,At){var Rt=f.exec(nt.slice(At,At+1));return Rt?At+Rt[0].length:-1}function ee(et,nt,At){var Rt=g.exec(nt.slice(At));return Rt?(et.Q=+Rt[0],At+Rt[0].length):-1}function $(et,nt,At){var Rt=g.exec(nt.slice(At));return Rt?(et.s=+Rt[0],At+Rt[0].length):-1}function J(et,nt){return v(et.getDate(),nt,2)}function K(et,nt){return v(et.getHours(),nt,2)}function te(et,nt){return v(et.getHours()%12||12,nt,2)}function ie(et,nt){return v(1+w.c.count((0,_.c)(et),et),nt,3)}function ae(et,nt){return v(et.getMilliseconds(),nt,3)}function se(et,nt){return ae(et,nt)+"000"}function ce(et,nt){return v(et.getMonth()+1,nt,2)}function de(et,nt){return v(et.getMinutes(),nt,2)}function ge(et,nt){return v(et.getSeconds(),nt,2)}function ve(et){var nt=et.getDay();return nt===0?7:nt}function be(et,nt){return v(o.uU.count((0,_.c)(et)-1,et),nt,2)}function me(et,nt){var At=et.getDay();return et=At>=4||At===0?(0,o.kD)(et):o.kD.ceil(et),v(o.kD.count((0,_.c)(et),et)+((0,_.c)(et).getDay()===4),nt,2)}function Se(et){return et.getDay()}function we(et,nt){return v(o.qT.count((0,_.c)(et)-1,et),nt,2)}function _e(et,nt){return v(et.getFullYear()%100,nt,2)}function oe(et,nt){return v(et.getFullYear()%1e4,nt,4)}function le(et){var nt=et.getTimezoneOffset();return(nt>0?"-":(nt*=-1,"+"))+v(nt/60|0,"0",2)+v(nt%60,"0",2)}function pe(et,nt){return v(et.getUTCDate(),nt,2)}function Ee(et,nt){return v(et.getUTCHours(),nt,2)}function Te(et,nt){return v(et.getUTCHours()%12||12,nt,2)}function Me(et,nt){return v(1+A.c.count((0,p.c)(et),et),nt,3)}function Le(et,nt){return v(et.getUTCMilliseconds(),nt,3)}function Ie(et,nt){return Le(et,nt)+"000"}function he(et,nt){return v(et.getUTCMonth()+1,nt,2)}function xe(et,nt){return v(et.getUTCMinutes(),nt,2)}function ke(et,nt){return v(et.getUTCSeconds(),nt,2)}function ze(et){var nt=et.getUTCDay();return nt===0?7:nt}function Re(et,nt){return v(M.EV.count((0,p.c)(et)-1,et),nt,2)}function Oe(et,nt){var At=et.getUTCDay();return et=At>=4||At===0?(0,M.yA)(et):M.yA.ceil(et),v(M.yA.count((0,p.c)(et),et)+((0,p.c)(et).getUTCDay()===4),nt,2)}function Ve(et){return et.getUTCDay()}function qe(et,nt){return v(M.ot.count((0,p.c)(et)-1,et),nt,2)}function Je(et,nt){return v(et.getUTCFullYear()%100,nt,2)}function ot(et,nt){return v(et.getUTCFullYear()%1e4,nt,4)}function rt(){return"+0000"}function dt(){return"%"}function _t(et){return+et}function yt(et){return Math.floor(+et/1e3)}i=r({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),l=i.format,i.parse,u=i.utcFormat,i.utcParse},68936:function(Y,O,e){e.d(O,{m:function(){return w}});var M=e(81628),A=e(69792),o=(0,M.c)(function(_){_.setHours(0,0,0,0)},function(_,p){_.setDate(_.getDate()+p)},function(_,p){return(p-_-(p.getTimezoneOffset()-_.getTimezoneOffset())*A.iy)/A.SK},function(_){return _.getDate()-1});O.c=o;var w=o.range},69792:function(Y,O,e){e.d(O,{KK:function(){return _},SK:function(){return w},cg:function(){return o},iy:function(){return A},yc:function(){return M}});var M=1e3,A=6e4,o=36e5,w=864e5,_=6048e5},73220:function(Y,O,e){e.r(O),e.d(O,{timeDay:function(){return g.c},timeDays:function(){return g.m},timeFriday:function(){return f.iB},timeFridays:function(){return f.sJ},timeHour:function(){return u},timeHours:function(){return c},timeInterval:function(){return M.c},timeMillisecond:function(){return o},timeMilliseconds:function(){return w},timeMinute:function(){return r},timeMinutes:function(){return i},timeMonday:function(){return f.qT},timeMondays:function(){return f.QP},timeMonth:function(){return v},timeMonths:function(){return d},timeSaturday:function(){return f.Wc},timeSaturdays:function(){return f.aI},timeSecond:function(){return s},timeSeconds:function(){return n},timeSunday:function(){return f.uU},timeSundays:function(){return f.Ab},timeThursday:function(){return f.kD},timeThursdays:function(){return f.eC},timeTuesday:function(){return f.Mf},timeTuesdays:function(){return f.Oc},timeWednesday:function(){return f.eg},timeWednesdays:function(){return f.sn},timeWeek:function(){return f.uU},timeWeeks:function(){return f.Ab},timeYear:function(){return m.c},timeYears:function(){return m.Q},utcDay:function(){return L.c},utcDays:function(){return L.o},utcFriday:function(){return P.od},utcFridays:function(){return P.iG},utcHour:function(){return E},utcHours:function(){return k},utcMillisecond:function(){return o},utcMilliseconds:function(){return w},utcMinute:function(){return y},utcMinutes:function(){return T},utcMonday:function(){return P.ot},utcMondays:function(){return P.iO},utcMonth:function(){return z},utcMonths:function(){return F},utcSaturday:function(){return P.Ad},utcSaturdays:function(){return P.K8},utcSecond:function(){return s},utcSeconds:function(){return n},utcSunday:function(){return P.EV},utcSundays:function(){return P.Wq},utcThursday:function(){return P.yA},utcThursdays:function(){return P.ob},utcTuesday:function(){return P.sG},utcTuesdays:function(){return P.kl},utcWednesday:function(){return P._6},utcWednesdays:function(){return P.W_},utcWeek:function(){return P.EV},utcWeeks:function(){return P.Wq},utcYear:function(){return U.c},utcYears:function(){return U.i}});var M=e(81628),A=(0,M.c)(function(){},function(R,j){R.setTime(+R+j)},function(R,j){return j-R});A.every=function(R){return R=Math.floor(R),isFinite(R)&&R>0?R>1?(0,M.c)(function(j){j.setTime(Math.floor(j/R)*R)},function(j,Z){j.setTime(+j+Z*R)},function(j,Z){return(Z-j)/R}):A:null};var o=A,w=A.range,_=e(69792),p=(0,M.c)(function(R){R.setTime(R-R.getMilliseconds())},function(R,j){R.setTime(+R+j*_.yc)},function(R,j){return(j-R)/_.yc},function(R){return R.getUTCSeconds()}),s=p,n=p.range,a=(0,M.c)(function(R){R.setTime(R-R.getMilliseconds()-R.getSeconds()*_.yc)},function(R,j){R.setTime(+R+j*_.iy)},function(R,j){return(j-R)/_.iy},function(R){return R.getMinutes()}),r=a,i=a.range,l=(0,M.c)(function(R){R.setTime(R-R.getMilliseconds()-R.getSeconds()*_.yc-R.getMinutes()*_.iy)},function(R,j){R.setTime(+R+j*_.cg)},function(R,j){return(j-R)/_.cg},function(R){return R.getHours()}),u=l,c=l.range,g=e(68936),f=e(46192),b=(0,M.c)(function(R){R.setDate(1),R.setHours(0,0,0,0)},function(R,j){R.setMonth(R.getMonth()+j)},function(R,j){return j.getMonth()-R.getMonth()+12*(j.getFullYear()-R.getFullYear())},function(R){return R.getMonth()}),v=b,d=b.range,m=e(32171),x=(0,M.c)(function(R){R.setUTCSeconds(0,0)},function(R,j){R.setTime(+R+j*_.iy)},function(R,j){return(j-R)/_.iy},function(R){return R.getUTCMinutes()}),y=x,T=x.range,h=(0,M.c)(function(R){R.setUTCMinutes(0,0,0)},function(R,j){R.setTime(+R+j*_.cg)},function(R,j){return(j-R)/_.cg},function(R){return R.getUTCHours()}),E=h,k=h.range,L=e(58931),P=e(8208),I=(0,M.c)(function(R){R.setUTCDate(1),R.setUTCHours(0,0,0,0)},function(R,j){R.setUTCMonth(R.getUTCMonth()+j)},function(R,j){return j.getUTCMonth()-R.getUTCMonth()+12*(j.getUTCFullYear()-R.getUTCFullYear())},function(R){return R.getUTCMonth()}),z=I,F=I.range,U=e(53528)},81628:function(Y,O,e){e.d(O,{c:function(){return o}});var M=new Date,A=new Date;function o(w,_,p,s){function n(a){return w(a=arguments.length===0?new Date:new Date(+a)),a}return n.floor=function(a){return w(a=new Date(+a)),a},n.ceil=function(a){return w(a=new Date(a-1)),_(a,1),w(a),a},n.round=function(a){var r=n(a),i=n.ceil(a);return a-r<i-a?r:i},n.offset=function(a,r){return _(a=new Date(+a),r==null?1:Math.floor(r)),a},n.range=function(a,r,i){var l,u=[];if(a=n.ceil(a),i=i==null?1:Math.floor(i),!(a<r&&i>0))return u;do u.push(l=new Date(+a)),_(a,i),w(a);while(l<a&&a<r);return u},n.filter=function(a){return o(function(r){if(r>=r)for(;w(r),!a(r);)r.setTime(r-1)},function(r,i){if(r>=r)if(i<0)for(;++i<=0;)for(;_(r,-1),!a(r););else for(;--i>=0;)for(;_(r,1),!a(r););})},p&&(n.count=function(a,r){return M.setTime(+a),A.setTime(+r),w(M),w(A),Math.floor(p(M,A))},n.every=function(a){return a=Math.floor(a),isFinite(a)&&a>0?a>1?n.filter(s?function(r){return s(r)%a==0}:function(r){return n.count(0,r)%a==0}):n:null}),n}},58931:function(Y,O,e){e.d(O,{o:function(){return w}});var M=e(81628),A=e(69792),o=(0,M.c)(function(_){_.setUTCHours(0,0,0,0)},function(_,p){_.setUTCDate(_.getUTCDate()+p)},function(_,p){return(p-_)/A.SK},function(_){return _.getUTCDate()-1});O.c=o;var w=o.range},8208:function(Y,O,e){e.d(O,{Ad:function(){return r},EV:function(){return w},K8:function(){return b},W_:function(){return c},Wq:function(){return i},_6:function(){return s},iG:function(){return f},iO:function(){return l},kl:function(){return u},ob:function(){return g},od:function(){return a},ot:function(){return _},sG:function(){return p},yA:function(){return n}});var M=e(81628),A=e(69792);function o(v){return(0,M.c)(function(d){d.setUTCDate(d.getUTCDate()-(d.getUTCDay()+7-v)%7),d.setUTCHours(0,0,0,0)},function(d,m){d.setUTCDate(d.getUTCDate()+7*m)},function(d,m){return(m-d)/A.KK})}var w=o(0),_=o(1),p=o(2),s=o(3),n=o(4),a=o(5),r=o(6),i=w.range,l=_.range,u=p.range,c=s.range,g=n.range,f=a.range,b=r.range},53528:function(Y,O,e){e.d(O,{i:function(){return o}});var M=e(81628),A=(0,M.c)(function(w){w.setUTCMonth(0,1),w.setUTCHours(0,0,0,0)},function(w,_){w.setUTCFullYear(w.getUTCFullYear()+_)},function(w,_){return _.getUTCFullYear()-w.getUTCFullYear()},function(w){return w.getUTCFullYear()});A.every=function(w){return isFinite(w=Math.floor(w))&&w>0?(0,M.c)(function(_){_.setUTCFullYear(Math.floor(_.getUTCFullYear()/w)*w),_.setUTCMonth(0,1),_.setUTCHours(0,0,0,0)},function(_,p){_.setUTCFullYear(_.getUTCFullYear()+p*w)}):null},O.c=A;var o=A.range},46192:function(Y,O,e){e.d(O,{Ab:function(){return i},Mf:function(){return p},Oc:function(){return u},QP:function(){return l},Wc:function(){return r},aI:function(){return b},eC:function(){return g},eg:function(){return s},iB:function(){return a},kD:function(){return n},qT:function(){return _},sJ:function(){return f},sn:function(){return c},uU:function(){return w}});var M=e(81628),A=e(69792);function o(v){return(0,M.c)(function(d){d.setDate(d.getDate()-(d.getDay()+7-v)%7),d.setHours(0,0,0,0)},function(d,m){d.setDate(d.getDate()+7*m)},function(d,m){return(m-d-(m.getTimezoneOffset()-d.getTimezoneOffset())*A.iy)/A.KK})}var w=o(0),_=o(1),p=o(2),s=o(3),n=o(4),a=o(5),r=o(6),i=w.range,l=_.range,u=p.range,c=s.range,g=n.range,f=a.range,b=r.range},32171:function(Y,O,e){e.d(O,{Q:function(){return o}});var M=e(81628),A=(0,M.c)(function(w){w.setMonth(0,1),w.setHours(0,0,0,0)},function(w,_){w.setFullYear(w.getFullYear()+_)},function(w,_){return _.getFullYear()-w.getFullYear()},function(w){return w.getFullYear()});A.every=function(w){return isFinite(w=Math.floor(w))&&w>0?(0,M.c)(function(_){_.setFullYear(Math.floor(_.getFullYear()/w)*w),_.setMonth(0,1),_.setHours(0,0,0,0)},function(_,p){_.setFullYear(_.getFullYear()+p*w)}):null},O.c=A;var o=A.range},64348:function(Y,O,e){var M=e(39640)(),A=e(53664),o=M&&A("%Object.defineProperty%",!0);if(o)try{o({},"a",{value:1})}catch{o=!1}var w=A("%SyntaxError%"),_=A("%TypeError%"),p=e(2304);Y.exports=function(s,n,a){if(!s||typeof s!="object"&&typeof s!="function")throw new _("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new _("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new _("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new _("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new _("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new _("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,l=arguments.length>5?arguments[5]:null,u=arguments.length>6&&arguments[6],c=!!p&&p(s,n);if(o)o(s,n,{configurable:l===null&&c?c.configurable:!l,enumerable:r===null&&c?c.enumerable:!r,value:a,writable:i===null&&c?c.writable:!i});else{if(!u&&(r||i||l))throw new w("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");s[n]=a}}},81288:function(Y,O,e){var M=e(41820),A=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",o=Object.prototype.toString,w=Array.prototype.concat,_=Object.defineProperty,p=e(39640)(),s=_&&p,n=function(r,i,l,u){if(i in r){if(u===!0){if(r[i]===l)return}else if(typeof(c=u)!="function"||o.call(c)!=="[object Function]"||!u())return}var c;s?_(r,i,{configurable:!0,enumerable:!1,value:l,writable:!0}):r[i]=l},a=function(r,i){var l=arguments.length>2?arguments[2]:{},u=M(i);A&&(u=w.call(u,Object.getOwnPropertySymbols(i)));for(var c=0;c<u.length;c+=1)n(r,u[c],i[u[c]],l[u[c]])};a.supportsDescriptors=!!s,Y.exports=a},31264:function(Y){Y.exports=function(){for(var O=0;O<arguments.length;O++)if(arguments[O]!==void 0)return arguments[O]}},63768:function(Y){Y.exports=M;var O=(M.canvas=document.createElement("canvas")).getContext("2d"),e=A([32,126]);function M(o,w){Array.isArray(o)&&(o=o.join(", "));var _,p={},s=16,n=.05;w&&(w.length===2&&typeof w[0]=="number"?_=A(w):Array.isArray(w)?_=w:(w.o?_=A(w.o):w.pairs&&(_=w.pairs),w.fontSize&&(s=w.fontSize),w.threshold!=null&&(n=w.threshold))),_||(_=e),O.font=s+"px "+o;for(var a=0;a<_.length;a++){var r=_[a],i=O.measureText(r[0]).width+O.measureText(r[1]).width,l=O.measureText(r).width;if(Math.abs(i-l)>s*n){var u=(l-i)/s;p[r]=1e3*u}}return p}function A(o){for(var w=[],_=o[0];_<=o[1];_++)for(var p=String.fromCharCode(_),s=o[0];s<o[1];s++){var n=p+String.fromCharCode(s);w.push(n)}return w}M.createPairs=A,M.ascii=e},22235:function(Y,O,e){var M=e(49972),A=e(48816),o={M:"moveTo",C:"bezierCurveTo"};Y.exports=function(w,_){w.beginPath(),A(M(_)).forEach(function(p){var s=p[0],n=p.slice(1);w[o[s]].apply(w,n)}),w.closePath()}},72512:function(Y){Y.exports=function(O){switch(O){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},10352:function(Y){function O(e,M,A){var o=0|e[A];if(o<=0)return[];var w,_=new Array(o);if(A===e.length-1)for(w=0;w<o;++w)_[w]=M;else for(w=0;w<o;++w)_[w]=O(e,M,A+1);return _}Y.exports=function(e,M){switch(M===void 0&&(M=0),typeof e){case"number":if(e>0)return function(A,o){var w,_;for(w=new Array(A),_=0;_<A;++_)w[_]=o;return w}(0|e,M);break;case"object":if(typeof e.length=="number")return O(e,M,0)}return[]}},28912:function(Y){function O(E,k,L){L=L||2;var P,I,z,F,U,R,j,Z=k&&k.length,B=Z?k[0]*L:E.length,q=e(E,0,B,L,!0),V=[];if(!q||q.next===q.prev)return V;if(Z&&(q=function(ee,$,J,K){var te,ie,ae,se=[];for(te=0,ie=$.length;te<ie;te++)(ae=e(ee,$[te]*K,te<ie-1?$[te+1]*K:ee.length,K,!1))===ae.next&&(ae.steiner=!0),se.push(i(ae));for(se.sort(s),te=0;te<se.length;te++)n(se[te],J),J=M(J,J.next);return J}(E,k,q,L)),E.length>80*L){P=z=E[0],I=F=E[1];for(var ne=L;ne<B;ne+=L)(U=E[ne])<P&&(P=U),(R=E[ne+1])<I&&(I=R),U>z&&(z=U),R>F&&(F=R);j=(j=Math.max(z-P,F-I))!==0?1/j:0}return A(q,V,L,P,I,j),V}function e(E,k,L,P,I){var z,F;if(I===h(E,k,L,P)>0)for(z=k;z<L;z+=P)F=x(z,E[z],E[z+1],F);else for(z=L-P;z>=k;z-=P)F=x(z,E[z],E[z+1],F);return F&&g(F,F.next)&&(y(F),F=F.next),F}function M(E,k){if(!E)return E;k||(k=E);var L,P=E;do if(L=!1,P.steiner||!g(P,P.next)&&c(P.prev,P,P.next)!==0)P=P.next;else{if(y(P),(P=k=P.prev)===P.next)break;L=!0}while(L||P!==k);return k}function A(E,k,L,P,I,z,F){if(E){!F&&z&&function(Z,B,q,V){var ne=Z;do ne.z===null&&(ne.z=r(ne.x,ne.y,B,q,V)),ne.prevZ=ne.prev,ne.nextZ=ne.next,ne=ne.next;while(ne!==Z);ne.prevZ.nextZ=null,ne.prevZ=null,function(ee){var $,J,K,te,ie,ae,se,ce,de=1;do{for(J=ee,ee=null,ie=null,ae=0;J;){for(ae++,K=J,se=0,$=0;$<de&&(se++,K=K.nextZ);$++);for(ce=de;se>0||ce>0&&K;)se!==0&&(ce===0||!K||J.z<=K.z)?(te=J,J=J.nextZ,se--):(te=K,K=K.nextZ,ce--),ie?ie.nextZ=te:ee=te,te.prevZ=ie,ie=te;J=K}ie.nextZ=null,de*=2}while(ae>1)}(ne)}(E,P,I,z);for(var U,R,j=E;E.prev!==E.next;)if(U=E.prev,R=E.next,z?w(E,P,I,z):o(E))k.push(U.i/L),k.push(E.i/L),k.push(R.i/L),y(E),E=R.next,j=R.next;else if((E=R)===j){F?F===1?A(E=_(M(E),k,L),k,L,P,I,z,2):F===2&&p(E,k,L,P,I,z):A(M(E),k,L,P,I,z,1);break}}}function o(E){var k=E.prev,L=E,P=E.next;if(c(k,L,P)>=0)return!1;for(var I=E.next.next;I!==E.prev;){if(l(k.x,k.y,L.x,L.y,P.x,P.y,I.x,I.y)&&c(I.prev,I,I.next)>=0)return!1;I=I.next}return!0}function w(E,k,L,P){var I=E.prev,z=E,F=E.next;if(c(I,z,F)>=0)return!1;for(var U=I.x<z.x?I.x<F.x?I.x:F.x:z.x<F.x?z.x:F.x,R=I.y<z.y?I.y<F.y?I.y:F.y:z.y<F.y?z.y:F.y,j=I.x>z.x?I.x>F.x?I.x:F.x:z.x>F.x?z.x:F.x,Z=I.y>z.y?I.y>F.y?I.y:F.y:z.y>F.y?z.y:F.y,B=r(U,R,k,L,P),q=r(j,Z,k,L,P),V=E.prevZ,ne=E.nextZ;V&&V.z>=B&&ne&&ne.z<=q;){if(V!==E.prev&&V!==E.next&&l(I.x,I.y,z.x,z.y,F.x,F.y,V.x,V.y)&&c(V.prev,V,V.next)>=0||(V=V.prevZ,ne!==E.prev&&ne!==E.next&&l(I.x,I.y,z.x,z.y,F.x,F.y,ne.x,ne.y)&&c(ne.prev,ne,ne.next)>=0))return!1;ne=ne.nextZ}for(;V&&V.z>=B;){if(V!==E.prev&&V!==E.next&&l(I.x,I.y,z.x,z.y,F.x,F.y,V.x,V.y)&&c(V.prev,V,V.next)>=0)return!1;V=V.prevZ}for(;ne&&ne.z<=q;){if(ne!==E.prev&&ne!==E.next&&l(I.x,I.y,z.x,z.y,F.x,F.y,ne.x,ne.y)&&c(ne.prev,ne,ne.next)>=0)return!1;ne=ne.nextZ}return!0}function _(E,k,L){var P=E;do{var I=P.prev,z=P.next.next;!g(I,z)&&f(I,P,P.next,z)&&d(I,z)&&d(z,I)&&(k.push(I.i/L),k.push(P.i/L),k.push(z.i/L),y(P),y(P.next),P=E=z),P=P.next}while(P!==E);return M(P)}function p(E,k,L,P,I,z){var F=E;do{for(var U=F.next.next;U!==F.prev;){if(F.i!==U.i&&u(F,U)){var R=m(F,U);return F=M(F,F.next),R=M(R,R.next),A(F,k,L,P,I,z),void A(R,k,L,P,I,z)}U=U.next}F=F.next}while(F!==E)}function s(E,k){return E.x-k.x}function n(E,k){if(k=function(P,I){var z,F=I,U=P.x,R=P.y,j=-1/0;do{if(R<=F.y&&R>=F.next.y&&F.next.y!==F.y){var Z=F.x+(R-F.y)*(F.next.x-F.x)/(F.next.y-F.y);if(Z<=U&&Z>j){if(j=Z,Z===U){if(R===F.y)return F;if(R===F.next.y)return F.next}z=F.x<F.next.x?F:F.next}}F=F.next}while(F!==I);if(!z)return null;if(U===j)return z;var B,q=z,V=z.x,ne=z.y,ee=1/0;F=z;do U>=F.x&&F.x>=V&&U!==F.x&&l(R<ne?U:j,R,V,ne,R<ne?j:U,R,F.x,F.y)&&(B=Math.abs(R-F.y)/(U-F.x),d(F,P)&&(B<ee||B===ee&&(F.x>z.x||F.x===z.x&&a(z,F)))&&(z=F,ee=B)),F=F.next;while(F!==q);return z}(E,k),k){var L=m(k,E);M(k,k.next),M(L,L.next)}}function a(E,k){return c(E.prev,E,k.prev)<0&&c(k.next,E,E.next)<0}function r(E,k,L,P,I){return(E=1431655765&((E=858993459&((E=252645135&((E=16711935&((E=32767*(E-L)*I)|E<<8))|E<<4))|E<<2))|E<<1))|(k=1431655765&((k=858993459&((k=252645135&((k=16711935&((k=32767*(k-P)*I)|k<<8))|k<<4))|k<<2))|k<<1))<<1}function i(E){var k=E,L=E;do(k.x<L.x||k.x===L.x&&k.y<L.y)&&(L=k),k=k.next;while(k!==E);return L}function l(E,k,L,P,I,z,F,U){return(I-F)*(k-U)-(E-F)*(z-U)>=0&&(E-F)*(P-U)-(L-F)*(k-U)>=0&&(L-F)*(z-U)-(I-F)*(P-U)>=0}function u(E,k){return E.next.i!==k.i&&E.prev.i!==k.i&&!function(L,P){var I=L;do{if(I.i!==L.i&&I.next.i!==L.i&&I.i!==P.i&&I.next.i!==P.i&&f(I,I.next,L,P))return!0;I=I.next}while(I!==L);return!1}(E,k)&&(d(E,k)&&d(k,E)&&function(L,P){var I=L,z=!1,F=(L.x+P.x)/2,U=(L.y+P.y)/2;do I.y>U!=I.next.y>U&&I.next.y!==I.y&&F<(I.next.x-I.x)*(U-I.y)/(I.next.y-I.y)+I.x&&(z=!z),I=I.next;while(I!==L);return z}(E,k)&&(c(E.prev,E,k.prev)||c(E,k.prev,k))||g(E,k)&&c(E.prev,E,E.next)>0&&c(k.prev,k,k.next)>0)}function c(E,k,L){return(k.y-E.y)*(L.x-k.x)-(k.x-E.x)*(L.y-k.y)}function g(E,k){return E.x===k.x&&E.y===k.y}function f(E,k,L,P){var I=v(c(E,k,L)),z=v(c(E,k,P)),F=v(c(L,P,E)),U=v(c(L,P,k));return I!==z&&F!==U||!(I!==0||!b(E,L,k))||!(z!==0||!b(E,P,k))||!(F!==0||!b(L,E,P))||!(U!==0||!b(L,k,P))}function b(E,k,L){return k.x<=Math.max(E.x,L.x)&&k.x>=Math.min(E.x,L.x)&&k.y<=Math.max(E.y,L.y)&&k.y>=Math.min(E.y,L.y)}function v(E){return E>0?1:E<0?-1:0}function d(E,k){return c(E.prev,E,E.next)<0?c(E,k,E.next)>=0&&c(E,E.prev,k)>=0:c(E,k,E.prev)<0||c(E,E.next,k)<0}function m(E,k){var L=new T(E.i,E.x,E.y),P=new T(k.i,k.x,k.y),I=E.next,z=k.prev;return E.next=k,k.prev=E,L.next=I,I.prev=L,P.next=L,L.prev=P,z.next=P,P.prev=z,P}function x(E,k,L,P){var I=new T(E,k,L);return P?(I.next=P.next,I.prev=P,P.next.prev=I,P.next=I):(I.prev=I,I.next=I),I}function y(E){E.next.prev=E.prev,E.prev.next=E.next,E.prevZ&&(E.prevZ.nextZ=E.nextZ),E.nextZ&&(E.nextZ.prevZ=E.prevZ)}function T(E,k,L){this.i=E,this.x=k,this.y=L,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function h(E,k,L,P){for(var I=0,z=k,F=L-P;z<L;z+=P)I+=(E[F]-E[z])*(E[z+1]+E[F+1]),F=z;return I}Y.exports=O,Y.exports.default=O,O.deviation=function(E,k,L,P){var I=k&&k.length,z=I?k[0]*L:E.length,F=Math.abs(h(E,0,z,L));if(I)for(var U=0,R=k.length;U<R;U++){var j=k[U]*L,Z=U<R-1?k[U+1]*L:E.length;F-=Math.abs(h(E,j,Z,L))}var B=0;for(U=0;U<P.length;U+=3){var q=P[U]*L,V=P[U+1]*L,ne=P[U+2]*L;B+=Math.abs((E[q]-E[ne])*(E[V+1]-E[q+1])-(E[q]-E[V])*(E[ne+1]-E[q+1]))}return F===0&&B===0?0:Math.abs((B-F)/F)},O.flatten=function(E){for(var k=E[0][0].length,L={vertices:[],holes:[],dimensions:k},P=0,I=0;I<E.length;I++){for(var z=0;z<E[I].length;z++)for(var F=0;F<k;F++)L.vertices.push(E[I][z][F]);I>0&&(P+=E[I-1].length,L.holes.push(P))}return L}},6688:function(Y,O,e){var M=e(78484);Y.exports=function(A,o){var w,_=[],p=[],s=[],n={},a=[];function r(d){s[d]=!1,n.hasOwnProperty(d)&&Object.keys(n[d]).forEach(function(m){delete n[d][m],s[m]&&r(m)})}function i(d){var m,x,y=!1;for(p.push(d),s[d]=!0,m=0;m<a[d].length;m++)(x=a[d][m])===w?(l(w,p),y=!0):s[x]||(y=i(x));if(y)r(d);else for(m=0;m<a[d].length;m++){x=a[d][m];var T=n[x];T||(T={},n[x]=T),T[x]=!0}return p.pop(),y}function l(d,m){var x=[].concat(m).concat(d);o?o(i):_.push(x)}function u(d){(function(L){for(var P=0;P<A.length;P++)P<L&&(A[P]=[]),A[P]=A[P].filter(function(I){return I>=L})})(d);for(var m,x=M(A).components.filter(function(L){return L.length>1}),y=1/0,T=0;T<x.length;T++)for(var h=0;h<x[T].length;h++)x[T][h]<y&&(y=x[T][h],m=T);var E=x[m];if(!E)return!1;var k=A.map(function(L,P){return E.indexOf(P)===-1?[]:L.filter(function(I){return E.indexOf(I)!==-1})});return{leastVertex:y,adjList:k}}w=0;for(var c=A.length;w<c;){var g=u(w);if(w=g.leastVertex,a=g.adjList){for(var f=0;f<a.length;f++)for(var b=0;b<a[f].length;b++){var v=a[f][b];s[+v]=!1,n[v]={}}i(w),w+=1}else w=c}return o?void 0:_}},41476:function(Y,O,e){var M=e(9252);Y.exports=function(){return M(this).length=0,this}},74772:function(Y,O,e){Y.exports=e(44716)()?Array.from:e(80816)},44716:function(Y){Y.exports=function(){var O,e,M=Array.from;return typeof M=="function"&&(e=M(O=["raz","dwa"]),!!(e&&e!==O&&e[1]==="dwa"))}},80816:function(Y,O,e){var M=e(92664).iterator,A=e(60948),o=e(17024),w=e(81304),_=e(34044),p=e(9252),s=e(42584),n=e(29768),a=Array.isArray,r=Function.prototype.call,i={configurable:!0,enumerable:!0,writable:!0,value:null},l=Object.defineProperty;Y.exports=function(u){var c,g,f,b,v,d,m,x,y,T,h=arguments[1],E=arguments[2];if(u=Object(p(u)),s(h)&&_(h),this&&this!==Array&&o(this))c=this;else{if(!h){if(A(u))return(v=u.length)!==1?Array.apply(null,u):((b=new Array(1))[0]=u[0],b);if(a(u)){for(b=new Array(v=u.length),g=0;g<v;++g)b[g]=u[g];return b}}b=[]}if(!a(u)){if((y=u[M])!==void 0){for(m=_(y).call(u),c&&(b=new c),x=m.next(),g=0;!x.done;)T=h?r.call(h,E,x.value,g):x.value,c?(i.value=T,l(b,g,i)):b[g]=T,x=m.next(),++g;v=g}else if(n(u)){for(v=u.length,c&&(b=new c),g=0,f=0;g<v;++g)T=u[g],g+1<v&&(d=T.charCodeAt(0))>=55296&&d<=56319&&(T+=u[++g]),T=h?r.call(h,E,T,f):T,c?(i.value=T,l(b,f,i)):b[f]=T,++f;v=f}}if(v===void 0)for(v=w(u.length),c&&(b=new c(v)),g=0;g<v;++g)T=h?r.call(h,E,u[g],g):u[g],c?(i.value=T,l(b,g,i)):b[g]=T;return c&&(i.value=null,b.length=v),b}},60948:function(Y){var O=Object.prototype.toString,e=O.call(function(){return arguments}());Y.exports=function(M){return O.call(M)===e}},17024:function(Y){var O=Object.prototype.toString,e=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);Y.exports=function(M){return typeof M=="function"&&e(O.call(M))}},33208:function(Y){Y.exports=function(){}},85608:function(Y,O,e){Y.exports=e(37328)()?Math.sign:e(92928)},37328:function(Y){Y.exports=function(){var O=Math.sign;return typeof O=="function"&&O(10)===1&&O(-20)===-1}},92928:function(Y){Y.exports=function(O){return O=Number(O),isNaN(O)||O===0?O:O>0?1:-1}},96936:function(Y,O,e){var M=e(85608),A=Math.abs,o=Math.floor;Y.exports=function(w){return isNaN(w)?0:(w=Number(w))!==0&&isFinite(w)?M(w)*o(A(w)):w}},81304:function(Y,O,e){var M=e(96936),A=Math.max;Y.exports=function(o){return A(0,M(o))}},14428:function(Y,O,e){var M=e(34044),A=e(9252),o=Function.prototype.bind,w=Function.prototype.call,_=Object.keys,p=Object.prototype.propertyIsEnumerable;Y.exports=function(s,n){return function(a,r){var i,l=arguments[2],u=arguments[3];return a=Object(A(a)),M(r),i=_(a),u&&i.sort(typeof u=="function"?o.call(u,a):void 0),typeof s!="function"&&(s=i[s]),w.call(s,i,function(c,g){return p.call(a,c)?w.call(r,l,a[c],c,a,g):n})}}},38452:function(Y,O,e){Y.exports=e(96276)()?Object.assign:e(81892)},96276:function(Y){Y.exports=function(){var O,e=Object.assign;return typeof e=="function"&&(e(O={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),O.foo+O.bar+O.trzy==="razdwatrzy")}},81892:function(Y,O,e){var M=e(54768),A=e(9252),o=Math.max;Y.exports=function(w,_){var p,s,n,a=o(arguments.length,2);for(w=Object(A(w)),n=function(r){try{w[r]=_[r]}catch(i){p||(p=i)}},s=1;s<a;++s)M(_=arguments[s]).forEach(n);if(p!==void 0)throw p;return w}},95920:function(Y,O,e){var M=e(74772),A=e(38452),o=e(9252);Y.exports=function(w){var _=Object(o(w)),p=arguments[1],s=Object(arguments[2]);if(_!==w&&!p)return _;var n={};return p?M(p,function(a){(s.ensure||a in w)&&(n[a]=w[a])}):A(n,w),n}},14452:function(Y,O,e){var M,A,o,w,_=Object.create;e(63092)()||(M=e(8672)),Y.exports=M?M.level!==1?_:(A={},o={},w={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(p){o[p]=p!=="__proto__"?w:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(A,o),Object.defineProperty(M,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:A}),function(p,s){return _(p===null?A:p,s)}):_},42748:function(Y,O,e){Y.exports=e(14428)("forEach")},69127:function(Y,O,e){var M=e(42584),A={function:!0,object:!0};Y.exports=function(o){return M(o)&&A[typeof o]||!1}},42584:function(Y,O,e){var M=e(33208)();Y.exports=function(A){return A!==M&&A!==null}},54768:function(Y,O,e){Y.exports=e(87888)()?Object.keys:e(89592)},87888:function(Y){Y.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},89592:function(Y,O,e){var M=e(42584),A=Object.keys;Y.exports=function(o){return A(M(o)?Object(o):o)}},84323:function(Y,O,e){var M=e(34044),A=e(42748),o=Function.prototype.call;Y.exports=function(w,_){var p={},s=arguments[2];return M(_),A(w,function(n,a,r,i){p[a]=o.call(_,s,n,a,r,i)}),p}},50868:function(Y,O,e){var M=e(42584),A=Array.prototype.forEach,o=Object.create;Y.exports=function(w){var _=o(null);return A.call(arguments,function(p){M(p)&&function(s,n){var a;for(a in s)n[a]=s[a]}(Object(p),_)}),_}},69932:function(Y,O,e){Y.exports=e(63092)()?Object.setPrototypeOf:e(8672)},63092:function(Y){var O=Object.create,e=Object.getPrototypeOf,M={};Y.exports=function(){var A=Object.setPrototypeOf;return typeof A=="function"&&e(A((arguments[0]||O)(null),M))===M}},8672:function(Y,O,e){var M,A,o,w,_=e(69127),p=e(9252),s=Object.prototype.isPrototypeOf,n=Object.defineProperty,a={configurable:!0,enumerable:!1,writable:!0,value:void 0};M=function(r,i){if(p(r),i===null||_(i))return r;throw new TypeError("Prototype must be null or an object")},Y.exports=(A=function(){var r,i=Object.create(null),l={},u=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(u){try{(r=u.set).call(i,l)}catch{}if(Object.getPrototypeOf(i)===l)return{set:r,level:2}}return i.__proto__=l,Object.getPrototypeOf(i)===l?{level:2}:((i={}).__proto__=l,Object.getPrototypeOf(i)===l&&{level:1})}(),A?(A.level===2?A.set?(w=A.set,o=function(r,i){return w.call(M(r,i),i),r}):o=function(r,i){return M(r,i).__proto__=i,r}:o=function r(i,l){var u;return M(i,l),(u=s.call(r.nullPolyfill,i))&&delete r.nullPolyfill.__proto__,l===null&&(l=r.nullPolyfill),i.__proto__=l,u&&n(r.nullPolyfill,"__proto__",a),i},Object.defineProperty(o,"level",{configurable:!1,enumerable:!1,writable:!1,value:A.level})):null),e(14452)},34044:function(Y){Y.exports=function(O){if(typeof O!="function")throw new TypeError(O+" is not a function");return O}},92584:function(Y,O,e){var M=e(69127);Y.exports=function(A){if(!M(A))throw new TypeError(A+" is not an Object");return A}},9252:function(Y,O,e){var M=e(42584);Y.exports=function(A){if(!M(A))throw new TypeError("Cannot use null or undefined");return A}},71056:function(Y,O,e){Y.exports=e(42976)()?String.prototype.contains:e(93040)},42976:function(Y){var O="razdwatrzy";Y.exports=function(){return typeof O.contains=="function"&&O.contains("dwa")===!0&&O.contains("foo")===!1}},93040:function(Y){var O=String.prototype.indexOf;Y.exports=function(e){return O.call(this,e,arguments[1])>-1}},29768:function(Y){var O=Object.prototype.toString,e=O.call("");Y.exports=function(M){return typeof M=="string"||M&&typeof M=="object"&&(M instanceof String||O.call(M)===e)||!1}},82252:function(Y){var O=Object.create(null),e=Math.random;Y.exports=function(){var M;do M=e().toString(36).slice(2);while(O[M]);return M}},52104:function(Y,O,e){var M,A=e(69932),o=e(71056),w=e(21092),_=e(92664),p=e(85512),s=Object.defineProperty;M=Y.exports=function(n,a){if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");p.call(this,n),a=a?o.call(a,"key+value")?"key+value":o.call(a,"key")?"key":"value":"value",s(this,"__kind__",w("",a))},A&&A(M,p),delete M.prototype.constructor,M.prototype=Object.create(p.prototype,{_resolve:w(function(n){return this.__kind__==="value"?this.__list__[n]:this.__kind__==="key+value"?[n,this.__list__[n]]:n})}),s(M.prototype,_.toStringTag,w("c","Array Iterator"))},76024:function(Y,O,e){var M=e(60948),A=e(34044),o=e(29768),w=e(76252),_=Array.isArray,p=Function.prototype.call,s=Array.prototype.some;Y.exports=function(n,a){var r,i,l,u,c,g,f,b,v=arguments[2];if(_(n)||M(n)?r="array":o(n)?r="string":n=w(n),A(a),l=function(){u=!0},r!=="array")if(r!=="string")for(i=n.next();!i.done;){if(p.call(a,v,i.value,l),u)return;i=n.next()}else for(g=n.length,c=0;c<g&&(f=n[c],c+1<g&&(b=f.charCodeAt(0))>=55296&&b<=56319&&(f+=n[++c]),p.call(a,v,f,l),!u);++c);else s.call(n,function(d){return p.call(a,v,d,l),u})}},76252:function(Y,O,e){var M=e(60948),A=e(29768),o=e(52104),w=e(80940),_=e(52891),p=e(92664).iterator;Y.exports=function(s){return typeof _(s)[p]=="function"?s[p]():M(s)?new o(s):A(s)?new w(s):new o(s)}},85512:function(Y,O,e){var M,A=e(41476),o=e(38452),w=e(34044),_=e(9252),p=e(21092),s=e(27940),n=e(92664),a=Object.defineProperty,r=Object.defineProperties;Y.exports=M=function(i,l){if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");r(this,{__list__:p("w",_(i)),__context__:p("w",l),__nextIndex__:p("w",0)}),l&&(w(l.on),l.on("_add",this._onAdd),l.on("_delete",this._onDelete),l.on("_clear",this._onClear))},delete M.prototype.constructor,r(M.prototype,o({_next:p(function(){var i;if(this.__list__)return this.__redo__&&(i=this.__redo__.shift())!==void 0?i:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:p(function(){return this._createResult(this._next())}),_createResult:p(function(i){return i===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(i)}}),_resolve:p(function(i){return this.__list__[i]}),_unBind:p(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:p(function(){return"[object "+(this[n.toStringTag]||"Object")+"]"})},s({_onAdd:p(function(i){i>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(l,u){l>=i&&(this.__redo__[u]=++l)},this),this.__redo__.push(i)):a(this,"__redo__",p("c",[i])))}),_onDelete:p(function(i){var l;i>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&((l=this.__redo__.indexOf(i))!==-1&&this.__redo__.splice(l,1),this.__redo__.forEach(function(u,c){u>i&&(this.__redo__[c]=--u)},this)))}),_onClear:p(function(){this.__redo__&&A.call(this.__redo__),this.__nextIndex__=0})}))),a(M.prototype,n.iterator,p(function(){return this}))},76368:function(Y,O,e){var M=e(60948),A=e(42584),o=e(29768),w=e(92664).iterator,_=Array.isArray;Y.exports=function(p){return!(!A(p)||!_(p)&&!o(p)&&!M(p)&&typeof p[w]!="function")}},80940:function(Y,O,e){var M,A=e(69932),o=e(21092),w=e(92664),_=e(85512),p=Object.defineProperty;M=Y.exports=function(s){if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");s=String(s),_.call(this,s),p(this,"__length__",o("",s.length))},A&&A(M,_),delete M.prototype.constructor,M.prototype=Object.create(_.prototype,{_next:o(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:o(function(s){var n,a=this.__list__[s];return this.__nextIndex__===this.__length__?a:(n=a.charCodeAt(0))>=55296&&n<=56319?a+this.__list__[this.__nextIndex__++]:a})}),p(M.prototype,w.toStringTag,o("c","String Iterator"))},52891:function(Y,O,e){var M=e(76368);Y.exports=function(A){if(!M(A))throw new TypeError(A+" is not iterable");return A}},60964:function(Y){function O(e,M){if(e==null)throw new TypeError("Cannot convert first argument to object");for(var A=Object(e),o=1;o<arguments.length;o++){var w=arguments[o];if(w!=null)for(var _=Object.keys(Object(w)),p=0,s=_.length;p<s;p++){var n=_[p],a=Object.getOwnPropertyDescriptor(w,n);a!==void 0&&a.enumerable&&(A[n]=w[n])}}return A}Y.exports={assign:O,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:O})}}},92664:function(Y,O,e){Y.exports=e(43580)()?e(12296).Symbol:e(18376)},43580:function(Y,O,e){var M=e(12296),A={object:!0,symbol:!0};Y.exports=function(){var o,w=M.Symbol;if(typeof w!="function")return!1;o=w("test symbol");try{String(o)}catch{return!1}return!!A[typeof w.iterator]&&!!A[typeof w.toPrimitive]&&!!A[typeof w.toStringTag]}},53908:function(Y){Y.exports=function(O){return!!O&&(typeof O=="symbol"||!!O.constructor&&O.constructor.name==="Symbol"&&O[O.constructor.toStringTag]==="Symbol")}},96863:function(Y,O,e){var M=e(21092),A=Object.create,o=Object.defineProperty,w=Object.prototype,_=A(null);Y.exports=function(p){for(var s,n,a=0;_[p+(a||"")];)++a;return _[p+=a||""]=!0,o(w,s="@@"+p,M.gs(null,function(r){n||(n=!0,o(this,s,M(r)),n=!1)})),s}},53540:function(Y,O,e){var M=e(21092),A=e(12296).Symbol;Y.exports=function(o){return Object.defineProperties(o,{hasInstance:M("",A&&A.hasInstance||o("hasInstance")),isConcatSpreadable:M("",A&&A.isConcatSpreadable||o("isConcatSpreadable")),iterator:M("",A&&A.iterator||o("iterator")),match:M("",A&&A.match||o("match")),replace:M("",A&&A.replace||o("replace")),search:M("",A&&A.search||o("search")),species:M("",A&&A.species||o("species")),split:M("",A&&A.split||o("split")),toPrimitive:M("",A&&A.toPrimitive||o("toPrimitive")),toStringTag:M("",A&&A.toStringTag||o("toStringTag")),unscopables:M("",A&&A.unscopables||o("unscopables"))})}},73852:function(Y,O,e){var M=e(21092),A=e(63948),o=Object.create(null);Y.exports=function(w){return Object.defineProperties(w,{for:M(function(_){return o[_]?o[_]:o[_]=w(String(_))}),keyFor:M(function(_){var p;for(p in A(_),o)if(o[p]===_)return p})})}},18376:function(Y,O,e){var M,A,o,w=e(21092),_=e(63948),p=e(12296).Symbol,s=e(96863),n=e(53540),a=e(73852),r=Object.create,i=Object.defineProperties,l=Object.defineProperty;if(typeof p=="function")try{String(p()),o=!0}catch{}else p=null;A=function(u){if(this instanceof A)throw new TypeError("Symbol is not a constructor");return M(u)},Y.exports=M=function u(c){var g;if(this instanceof u)throw new TypeError("Symbol is not a constructor");return o?p(c):(g=r(A.prototype),c=c===void 0?"":String(c),i(g,{__description__:w("",c),__name__:w("",s(c))}))},n(M),a(M),i(A.prototype,{constructor:w(M),toString:w("",function(){return this.__name__})}),i(M.prototype,{toString:w(function(){return"Symbol ("+_(this).__description__+")"}),valueOf:w(function(){return _(this)})}),l(M.prototype,M.toPrimitive,w("",function(){var u=_(this);return typeof u=="symbol"?u:u.toString()})),l(M.prototype,M.toStringTag,w("c","Symbol")),l(A.prototype,M.toStringTag,w("c",M.prototype[M.toStringTag])),l(A.prototype,M.toPrimitive,w("c",M.prototype[M.toPrimitive]))},63948:function(Y,O,e){var M=e(53908);Y.exports=function(A){if(!M(A))throw new TypeError(A+" is not a symbol");return A}},60463:function(Y,O,e){Y.exports=e(96979)()?WeakMap:e(64864)},96979:function(Y){Y.exports=function(){var O,e;if(typeof WeakMap!="function")return!1;try{O=new WeakMap([[e={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return String(O)==="[object WeakMap]"&&typeof O.set=="function"&&O.set({},1)===O&&typeof O.delete=="function"&&typeof O.has=="function"&&O.get(e)==="one"}},69876:function(Y){Y.exports=typeof WeakMap=="function"&&Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"},64864:function(Y,O,e){var M,A=e(42584),o=e(69932),w=e(92584),_=e(9252),p=e(82252),s=e(21092),n=e(76252),a=e(76024),r=e(92664).toStringTag,i=e(69876),l=Array.isArray,u=Object.defineProperty,c=Object.prototype.hasOwnProperty,g=Object.getPrototypeOf;Y.exports=M=function(){var f,b=arguments[0];if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");return f=i&&o&&WeakMap!==M?o(new WeakMap,g(this)):this,A(b)&&(l(b)||(b=n(b))),u(f,"__weakMapData__",s("c","$weakMap$"+p())),b&&a(b,function(v){_(v),f.set(v[0],v[1])}),f},i&&(o&&o(M,WeakMap),M.prototype=Object.create(WeakMap.prototype,{constructor:s(M)})),Object.defineProperties(M.prototype,{delete:s(function(f){return!!c.call(w(f),this.__weakMapData__)&&(delete f[this.__weakMapData__],!0)}),get:s(function(f){if(c.call(w(f),this.__weakMapData__))return f[this.__weakMapData__]}),has:s(function(f){return c.call(w(f),this.__weakMapData__)}),set:s(function(f,b){return u(w(f),this.__weakMapData__,s("c",b)),this}),toString:s(function(){return"[object WeakMap]"})}),u(M.prototype,r,s("c","WeakMap"))},61252:function(Y){var O,e=typeof Reflect=="object"?Reflect:null,M=e&&typeof e.apply=="function"?e.apply:function(c,g,f){return Function.prototype.apply.call(c,g,f)};O=e&&typeof e.ownKeys=="function"?e.ownKeys:Object.getOwnPropertySymbols?function(c){return Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c))}:function(c){return Object.getOwnPropertyNames(c)};var A=Number.isNaN||function(c){return c!=c};function o(){o.init.call(this)}Y.exports=o,Y.exports.once=function(c,g){return new Promise(function(f,b){function v(m){c.removeListener(g,d),b(m)}function d(){typeof c.removeListener=="function"&&c.removeListener("error",v),f([].slice.call(arguments))}u(c,g,d,{once:!0}),g!=="error"&&function(m,x,y){typeof m.on=="function"&&u(m,"error",x,{once:!0})}(c,v)})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var w=10;function _(c){if(typeof c!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof c)}function p(c){return c._maxListeners===void 0?o.defaultMaxListeners:c._maxListeners}function s(c,g,f,b){var v,d,m,x;if(_(f),(d=c._events)===void 0?(d=c._events=Object.create(null),c._eventsCount=0):(d.newListener!==void 0&&(c.emit("newListener",g,f.listener?f.listener:f),d=c._events),m=d[g]),m===void 0)m=d[g]=f,++c._eventsCount;else if(typeof m=="function"?m=d[g]=b?[f,m]:[m,f]:b?m.unshift(f):m.push(f),(v=p(c))>0&&m.length>v&&!m.warned){m.warned=!0;var y=new Error("Possible EventEmitter memory leak detected. "+m.length+" "+String(g)+" listeners added. Use emitter.setMaxListeners() to increase limit");y.name="MaxListenersExceededWarning",y.emitter=c,y.type=g,y.count=m.length,x=y,console&&console.warn&&console.warn(x)}return c}function n(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function a(c,g,f){var b={fired:!1,wrapFn:void 0,target:c,type:g,listener:f},v=n.bind(b);return v.listener=f,b.wrapFn=v,v}function r(c,g,f){var b=c._events;if(b===void 0)return[];var v=b[g];return v===void 0?[]:typeof v=="function"?f?[v.listener||v]:[v]:f?function(d){for(var m=new Array(d.length),x=0;x<m.length;++x)m[x]=d[x].listener||d[x];return m}(v):l(v,v.length)}function i(c){var g=this._events;if(g!==void 0){var f=g[c];if(typeof f=="function")return 1;if(f!==void 0)return f.length}return 0}function l(c,g){for(var f=new Array(g),b=0;b<g;++b)f[b]=c[b];return f}function u(c,g,f,b){if(typeof c.on=="function")b.once?c.once(g,f):c.on(g,f);else{if(typeof c.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof c);c.addEventListener(g,function v(d){b.once&&c.removeEventListener(g,v),f(d)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return w},set:function(c){if(typeof c!="number"||c<0||A(c))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+c+".");w=c}}),o.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(c){if(typeof c!="number"||c<0||A(c))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+c+".");return this._maxListeners=c,this},o.prototype.getMaxListeners=function(){return p(this)},o.prototype.emit=function(c){for(var g=[],f=1;f<arguments.length;f++)g.push(arguments[f]);var b=c==="error",v=this._events;if(v!==void 0)b=b&&v.error===void 0;else if(!b)return!1;if(b){var d;if(g.length>0&&(d=g[0]),d instanceof Error)throw d;var m=new Error("Unhandled error."+(d?" ("+d.message+")":""));throw m.context=d,m}var x=v[c];if(x===void 0)return!1;if(typeof x=="function")M(x,this,g);else{var y=x.length,T=l(x,y);for(f=0;f<y;++f)M(T[f],this,g)}return!0},o.prototype.addListener=function(c,g){return s(this,c,g,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(c,g){return s(this,c,g,!0)},o.prototype.once=function(c,g){return _(g),this.on(c,a(this,c,g)),this},o.prototype.prependOnceListener=function(c,g){return _(g),this.prependListener(c,a(this,c,g)),this},o.prototype.removeListener=function(c,g){var f,b,v,d,m;if(_(g),(b=this._events)===void 0)return this;if((f=b[c])===void 0)return this;if(f===g||f.listener===g)--this._eventsCount==0?this._events=Object.create(null):(delete b[c],b.removeListener&&this.emit("removeListener",c,f.listener||g));else if(typeof f!="function"){for(v=-1,d=f.length-1;d>=0;d--)if(f[d]===g||f[d].listener===g){m=f[d].listener,v=d;break}if(v<0)return this;v===0?f.shift():function(x,y){for(;y+1<x.length;y++)x[y]=x[y+1];x.pop()}(f,v),f.length===1&&(b[c]=f[0]),b.removeListener!==void 0&&this.emit("removeListener",c,m||g)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(c){var g,f,b;if((f=this._events)===void 0)return this;if(f.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):f[c]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete f[c]),this;if(arguments.length===0){var v,d=Object.keys(f);for(b=0;b<d.length;++b)(v=d[b])!=="removeListener"&&this.removeAllListeners(v);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(g=f[c])=="function")this.removeListener(c,g);else if(g!==void 0)for(b=g.length-1;b>=0;b--)this.removeListener(c,g[b]);return this},o.prototype.listeners=function(c){return r(this,c,!0)},o.prototype.rawListeners=function(c){return r(this,c,!1)},o.listenerCount=function(c,g){return typeof c.listenerCount=="function"?c.listenerCount(g):i.call(c,g)},o.prototype.listenerCount=i,o.prototype.eventNames=function(){return this._eventsCount>0?O(this._events):[]}},39072:function(Y){var O=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};Y.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return O()}try{return __global__||O()}finally{delete Object.prototype.__global__}}()},12296:function(Y,O,e){Y.exports=e(45072)()?globalThis:e(39072)},45072:function(Y){Y.exports=function(){return typeof globalThis=="object"&&!!globalThis&&globalThis.Array===Array}},38248:function(Y,O,e){var M=e(94576);Y.exports=function(A){var o=typeof A;if(o==="string"){var w=A;if((A=+A)==0&&M(w))return!1}else if(o!=="number")return!1;return A-A<1}},47520:function(Y,O,e){var M=e(72512);Y.exports=function(A,o,w){if(!A)throw new TypeError("must specify data as first parameter");if(w=0|+(w||0),Array.isArray(A)&&A[0]&&typeof A[0][0]=="number"){var _,p,s,n,a=A[0].length,r=A.length*a;o&&typeof o!="string"||(o=new(M(o||"float32"))(r+w));var i=o.length-w;if(r!==i)throw new Error("source length "+r+" ("+a+"x"+A.length+") does not match destination length "+i);for(_=0,s=w;_<A.length;_++)for(p=0;p<a;p++)o[s++]=A[_][p]===null?NaN:A[_][p]}else if(o&&typeof o!="string")o.set(A,w);else{var l=M(o||"float32");if(Array.isArray(A)||o==="array")for(_=0,s=w,n=(o=new l(A.length+w)).length;s<n;s++,_++)o[s]=A[_]===null?NaN:A[_];else w===0?o=new l(A):(o=new l(A.length+w)).set(A,w)}return o}},33888:function(Y,O,e){var M=e(49395),A=[32,126];Y.exports=function(o){var w=(o=o||{}).shape?o.shape:o.canvas?[o.canvas.width,o.canvas.height]:[512,512],_=o.canvas||document.createElement("canvas"),p=o.font,s=typeof o.step=="number"?[o.step,o.step]:o.step||[32,32],n=o.chars||A;if(p&&typeof p!="string"&&(p=M(p)),Array.isArray(n)){if(n.length===2&&typeof n[0]=="number"&&typeof n[1]=="number"){for(var a=[],r=n[0],i=0;r<=n[1];r++)a[i++]=String.fromCharCode(r);n=a}}else n=String(n).split("");w=w.slice(),_.width=w[0],_.height=w[1];var l=_.getContext("2d");l.fillStyle="#000",l.fillRect(0,0,_.width,_.height),l.font=p,l.textAlign="center",l.textBaseline="middle",l.fillStyle="#fff";var u=s[0]/2,c=s[1]/2;for(r=0;r<n.length;r++)l.fillText(n[r],u,c),(u+=s[0])>w[0]-s[0]/2&&(u=s[0]/2,c+=s[1]);return _}},71920:function(Y){function O(o,w){w||(w={}),(typeof o=="string"||Array.isArray(o))&&(w.family=o);var _=Array.isArray(w.family)?w.family.join(", "):w.family;if(!_)throw Error("`family` must be defined");var p=w.size||w.fontSize||w.em||48,s=w.weight||w.fontWeight||"",n=(o=[w.style||w.fontStyle||"",s,p].join(" ")+"px "+_,w.origin||"top");if(O.cache[_]&&p<=O.cache[_].em)return e(O.cache[_],n);var a=w.canvas||O.canvas,r=a.getContext("2d"),i={upper:w.upper!==void 0?w.upper:"H",lower:w.lower!==void 0?w.lower:"x",descent:w.descent!==void 0?w.descent:"p",ascent:w.ascent!==void 0?w.ascent:"h",tittle:w.tittle!==void 0?w.tittle:"i",overshoot:w.overshoot!==void 0?w.overshoot:"O"},l=Math.ceil(1.5*p);a.height=l,a.width=.5*l,r.font=o;var u="H",c={top:0};r.clearRect(0,0,l,l),r.textBaseline="top",r.fillStyle="black",r.fillText(u,0,0);var g=M(r.getImageData(0,0,l,l));r.clearRect(0,0,l,l),r.textBaseline="bottom",r.fillText(u,0,l);var f=M(r.getImageData(0,0,l,l));c.lineHeight=c.bottom=l-f+g,r.clearRect(0,0,l,l),r.textBaseline="alphabetic",r.fillText(u,0,l);var b=l-M(r.getImageData(0,0,l,l))-1+g;c.baseline=c.alphabetic=b,r.clearRect(0,0,l,l),r.textBaseline="middle",r.fillText(u,0,.5*l);var v=M(r.getImageData(0,0,l,l));c.median=c.middle=l-v-1+g-.5*l,r.clearRect(0,0,l,l),r.textBaseline="hanging",r.fillText(u,0,.5*l);var d=M(r.getImageData(0,0,l,l));c.hanging=l-d-1+g-.5*l,r.clearRect(0,0,l,l),r.textBaseline="ideographic",r.fillText(u,0,l);var m=M(r.getImageData(0,0,l,l));if(c.ideographic=l-m-1+g,i.upper&&(r.clearRect(0,0,l,l),r.textBaseline="top",r.fillText(i.upper,0,0),c.upper=M(r.getImageData(0,0,l,l)),c.capHeight=c.baseline-c.upper),i.lower&&(r.clearRect(0,0,l,l),r.textBaseline="top",r.fillText(i.lower,0,0),c.lower=M(r.getImageData(0,0,l,l)),c.xHeight=c.baseline-c.lower),i.tittle&&(r.clearRect(0,0,l,l),r.textBaseline="top",r.fillText(i.tittle,0,0),c.tittle=M(r.getImageData(0,0,l,l))),i.ascent&&(r.clearRect(0,0,l,l),r.textBaseline="top",r.fillText(i.ascent,0,0),c.ascent=M(r.getImageData(0,0,l,l))),i.descent&&(r.clearRect(0,0,l,l),r.textBaseline="top",r.fillText(i.descent,0,0),c.descent=A(r.getImageData(0,0,l,l))),i.overshoot){r.clearRect(0,0,l,l),r.textBaseline="top",r.fillText(i.overshoot,0,0);var x=A(r.getImageData(0,0,l,l));c.overshoot=x-b}for(var y in c)c[y]/=p;return c.em=p,O.cache[_]=c,e(c,n)}function e(o,w){var _={};for(var p in typeof w=="string"&&(w=o[w]),o)p!=="em"&&(_[p]=o[p]-w);return _}function M(o){for(var w=o.height,_=o.data,p=3;p<_.length;p+=4)if(_[p]!==0)return Math.floor(.25*(p-3)/w)}function A(o){for(var w=o.height,_=o.data,p=_.length-1;p>0;p-=4)if(_[p]!==0)return Math.floor(.25*(p-3)/w)}Y.exports=O,O.canvas=document.createElement("canvas"),O.cache={}},46492:function(Y,O,e){var M=e(90720),A=Object.prototype.toString,o=Object.prototype.hasOwnProperty;Y.exports=function(w,_,p){if(!M(_))throw new TypeError("iterator must be a function");var s;arguments.length>=3&&(s=p),A.call(w)==="[object Array]"?function(n,a,r){for(var i=0,l=n.length;i<l;i++)o.call(n,i)&&(r==null?a(n[i],i,n):a.call(r,n[i],i,n))}(w,_,s):typeof w=="string"?function(n,a,r){for(var i=0,l=n.length;i<l;i++)r==null?a(n.charAt(i),i,n):a.call(r,n.charAt(i),i,n)}(w,_,s):function(n,a,r){for(var i in n)o.call(n,i)&&(r==null?a(n[i],i,n):a.call(r,n[i],i,n))}(w,_,s)}},74336:function(Y){var O=Object.prototype.toString,e=Math.max,M=function(A,o){for(var w=[],_=0;_<A.length;_+=1)w[_]=A[_];for(var p=0;p<o.length;p+=1)w[p+A.length]=o[p];return w};Y.exports=function(A){var o=this;if(typeof o!="function"||O.apply(o)!=="[object Function]")throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var w,_=function(r,i){for(var l=[],u=1,c=0;u<r.length;u+=1,c+=1)l[c]=r[u];return l}(arguments),p=e(0,o.length-_.length),s=[],n=0;n<p;n++)s[n]="$"+n;if(w=Function("binder","return function ("+function(r,i){for(var l="",u=0;u<r.length;u+=1)l+=r[u],u+1<r.length&&(l+=",");return l}(s)+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof w){var r=o.apply(this,M(_,arguments));return Object(r)===r?r:this}return o.apply(A,M(_,arguments))}),o.prototype){var a=function(){};a.prototype=o.prototype,w.prototype=new a,a.prototype=null}return w}},8844:function(Y,O,e){var M=e(74336);Y.exports=Function.prototype.bind||M},13380:function(Y){Y.exports=function(O,e){if(typeof O!="string")throw new TypeError("must specify type string");if(e=e||{},typeof document>"u"&&!e.canvas)return null;var M=e.canvas||document.createElement("canvas");typeof e.width=="number"&&(M.width=e.width),typeof e.height=="number"&&(M.height=e.height);var A,o=e;try{var w=[O];O.indexOf("webgl")===0&&w.push("experimental-"+O);for(var _=0;_<w.length;_++)if(A=M.getContext(w[_],o))return A}catch{A=null}return A||null}},53664:function(Y,O,e){var M,A=SyntaxError,o=Function,w=TypeError,_=function(P){try{return o('"use strict"; return ('+P+").constructor;")()}catch{}},p=Object.getOwnPropertyDescriptor;if(p)try{p({},"")}catch{p=null}var s=function(){throw new w},n=p?function(){try{return s}catch{try{return p(arguments,"callee").get}catch{return s}}}():s,a=e(71080)(),r=e(69572)(),i=Object.getPrototypeOf||(r?function(P){return P.__proto__}:null),l={},u=typeof Uint8Array<"u"&&i?i(Uint8Array):M,c={"%AggregateError%":typeof AggregateError>"u"?M:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?M:ArrayBuffer,"%ArrayIteratorPrototype%":a&&i?i([][Symbol.iterator]()):M,"%AsyncFromSyncIteratorPrototype%":M,"%AsyncFunction%":l,"%AsyncGenerator%":l,"%AsyncGeneratorFunction%":l,"%AsyncIteratorPrototype%":l,"%Atomics%":typeof Atomics>"u"?M:Atomics,"%BigInt%":typeof BigInt>"u"?M:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?M:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?M:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?M:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?M:Float32Array,"%Float64Array%":typeof Float64Array>"u"?M:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?M:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":l,"%Int8Array%":typeof Int8Array>"u"?M:Int8Array,"%Int16Array%":typeof Int16Array>"u"?M:Int16Array,"%Int32Array%":typeof Int32Array>"u"?M:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":a&&i?i(i([][Symbol.iterator]())):M,"%JSON%":typeof JSON=="object"?JSON:M,"%Map%":typeof Map>"u"?M:Map,"%MapIteratorPrototype%":typeof Map<"u"&&a&&i?i(new Map()[Symbol.iterator]()):M,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?M:Promise,"%Proxy%":typeof Proxy>"u"?M:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?M:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?M:Set,"%SetIteratorPrototype%":typeof Set<"u"&&a&&i?i(new Set()[Symbol.iterator]()):M,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?M:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":a&&i?i(""[Symbol.iterator]()):M,"%Symbol%":a?Symbol:M,"%SyntaxError%":A,"%ThrowTypeError%":n,"%TypedArray%":u,"%TypeError%":w,"%Uint8Array%":typeof Uint8Array>"u"?M:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?M:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?M:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?M:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?M:WeakMap,"%WeakRef%":typeof WeakRef>"u"?M:WeakRef,"%WeakSet%":typeof WeakSet>"u"?M:WeakSet};if(i)try{null.error}catch(P){var g=i(i(P));c["%Error.prototype%"]=g}var f=function P(I){var z;if(I==="%AsyncFunction%")z=_("async function () {}");else if(I==="%GeneratorFunction%")z=_("function* () {}");else if(I==="%AsyncGeneratorFunction%")z=_("async function* () {}");else if(I==="%AsyncGenerator%"){var F=P("%AsyncGeneratorFunction%");F&&(z=F.prototype)}else if(I==="%AsyncIteratorPrototype%"){var U=P("%AsyncGenerator%");U&&i&&(z=i(U.prototype))}return c[I]=z,z},b={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},v=e(8844),d=e(92064),m=v.call(Function.call,Array.prototype.concat),x=v.call(Function.apply,Array.prototype.splice),y=v.call(Function.call,String.prototype.replace),T=v.call(Function.call,String.prototype.slice),h=v.call(Function.call,RegExp.prototype.exec),E=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,k=/\\(\\)?/g,L=function(P,I){var z,F=P;if(d(b,F)&&(F="%"+(z=b[F])[0]+"%"),d(c,F)){var U=c[F];if(U===l&&(U=f(F)),U===void 0&&!I)throw new w("intrinsic "+P+" exists, but is not available. Please file an issue!");return{alias:z,name:F,value:U}}throw new A("intrinsic "+P+" does not exist!")};Y.exports=function(P,I){if(typeof P!="string"||P.length===0)throw new w("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof I!="boolean")throw new w('"allowMissing" argument must be a boolean');if(h(/^%?[^%]*%?$/,P)===null)throw new A("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var z=function(K){var te=T(K,0,1),ie=T(K,-1);if(te==="%"&&ie!=="%")throw new A("invalid intrinsic syntax, expected closing `%`");if(ie==="%"&&te!=="%")throw new A("invalid intrinsic syntax, expected opening `%`");var ae=[];return y(K,E,function(se,ce,de,ge){ae[ae.length]=de?y(ge,k,"$1"):ce||se}),ae}(P),F=z.length>0?z[0]:"",U=L("%"+F+"%",I),R=U.name,j=U.value,Z=!1,B=U.alias;B&&(F=B[0],x(z,m([0,1],B)));for(var q=1,V=!0;q<z.length;q+=1){var ne=z[q],ee=T(ne,0,1),$=T(ne,-1);if((ee==='"'||ee==="'"||ee==="`"||$==='"'||$==="'"||$==="`")&&ee!==$)throw new A("property names with quotes must have matching quotes");if(ne!=="constructor"&&V||(Z=!0),d(c,R="%"+(F+="."+ne)+"%"))j=c[R];else if(j!=null){if(!(ne in j)){if(!I)throw new w("base intrinsic for "+P+" exists, but the property is not available.");return}if(p&&q+1>=z.length){var J=p(j,ne);j=(V=!!J)&&"get"in J&&!("originalValue"in J.get)?J.get:j[ne]}else V=d(j,ne),j=j[ne];V&&!Z&&(c[R]=j)}}return j}},12408:function(Y){Y.exports=function(O,e){var M=e[0],A=e[1],o=e[2],w=e[3],_=e[4],p=e[5],s=e[6],n=e[7],a=e[8],r=e[9],i=e[10],l=e[11],u=e[12],c=e[13],g=e[14],f=e[15];return O[0]=p*(i*f-l*g)-r*(s*f-n*g)+c*(s*l-n*i),O[1]=-(A*(i*f-l*g)-r*(o*f-w*g)+c*(o*l-w*i)),O[2]=A*(s*f-n*g)-p*(o*f-w*g)+c*(o*n-w*s),O[3]=-(A*(s*l-n*i)-p*(o*l-w*i)+r*(o*n-w*s)),O[4]=-(_*(i*f-l*g)-a*(s*f-n*g)+u*(s*l-n*i)),O[5]=M*(i*f-l*g)-a*(o*f-w*g)+u*(o*l-w*i),O[6]=-(M*(s*f-n*g)-_*(o*f-w*g)+u*(o*n-w*s)),O[7]=M*(s*l-n*i)-_*(o*l-w*i)+a*(o*n-w*s),O[8]=_*(r*f-l*c)-a*(p*f-n*c)+u*(p*l-n*r),O[9]=-(M*(r*f-l*c)-a*(A*f-w*c)+u*(A*l-w*r)),O[10]=M*(p*f-n*c)-_*(A*f-w*c)+u*(A*n-w*p),O[11]=-(M*(p*l-n*r)-_*(A*l-w*r)+a*(A*n-w*p)),O[12]=-(_*(r*g-i*c)-a*(p*g-s*c)+u*(p*i-s*r)),O[13]=M*(r*g-i*c)-a*(A*g-o*c)+u*(A*i-o*r),O[14]=-(M*(p*g-s*c)-_*(A*g-o*c)+u*(A*s-o*p)),O[15]=M*(p*i-s*r)-_*(A*i-o*r)+a*(A*s-o*p),O}},76860:function(Y){Y.exports=function(O){var e=new Float32Array(16);return e[0]=O[0],e[1]=O[1],e[2]=O[2],e[3]=O[3],e[4]=O[4],e[5]=O[5],e[6]=O[6],e[7]=O[7],e[8]=O[8],e[9]=O[9],e[10]=O[10],e[11]=O[11],e[12]=O[12],e[13]=O[13],e[14]=O[14],e[15]=O[15],e}},64492:function(Y){Y.exports=function(O,e){return O[0]=e[0],O[1]=e[1],O[2]=e[2],O[3]=e[3],O[4]=e[4],O[5]=e[5],O[6]=e[6],O[7]=e[7],O[8]=e[8],O[9]=e[9],O[10]=e[10],O[11]=e[11],O[12]=e[12],O[13]=e[13],O[14]=e[14],O[15]=e[15],O}},54212:function(Y){Y.exports=function(){var O=new Float32Array(16);return O[0]=1,O[1]=0,O[2]=0,O[3]=0,O[4]=0,O[5]=1,O[6]=0,O[7]=0,O[8]=0,O[9]=0,O[10]=1,O[11]=0,O[12]=0,O[13]=0,O[14]=0,O[15]=1,O}},70800:function(Y){Y.exports=function(O){var e=O[0],M=O[1],A=O[2],o=O[3],w=O[4],_=O[5],p=O[6],s=O[7],n=O[8],a=O[9],r=O[10],i=O[11],l=O[12],u=O[13],c=O[14],g=O[15];return(e*_-M*w)*(r*g-i*c)-(e*p-A*w)*(a*g-i*u)+(e*s-o*w)*(a*c-r*u)+(M*p-A*_)*(n*g-i*l)-(M*s-o*_)*(n*c-r*l)+(A*s-o*p)*(n*u-a*l)}},61784:function(Y){Y.exports=function(O,e){var M=e[0],A=e[1],o=e[2],w=e[3],_=M+M,p=A+A,s=o+o,n=M*_,a=A*_,r=A*p,i=o*_,l=o*p,u=o*s,c=w*_,g=w*p,f=w*s;return O[0]=1-r-u,O[1]=a+f,O[2]=i-g,O[3]=0,O[4]=a-f,O[5]=1-n-u,O[6]=l+c,O[7]=0,O[8]=i+g,O[9]=l-c,O[10]=1-n-r,O[11]=0,O[12]=0,O[13]=0,O[14]=0,O[15]=1,O}},91616:function(Y){Y.exports=function(O,e,M){var A,o,w,_=M[0],p=M[1],s=M[2],n=Math.sqrt(_*_+p*p+s*s);return Math.abs(n)<1e-6?null:(_*=n=1/n,p*=n,s*=n,A=Math.sin(e),w=1-(o=Math.cos(e)),O[0]=_*_*w+o,O[1]=p*_*w+s*A,O[2]=s*_*w-p*A,O[3]=0,O[4]=_*p*w-s*A,O[5]=p*p*w+o,O[6]=s*p*w+_*A,O[7]=0,O[8]=_*s*w+p*A,O[9]=p*s*w-_*A,O[10]=s*s*w+o,O[11]=0,O[12]=0,O[13]=0,O[14]=0,O[15]=1,O)}},51944:function(Y){Y.exports=function(O,e,M){var A=e[0],o=e[1],w=e[2],_=e[3],p=A+A,s=o+o,n=w+w,a=A*p,r=A*s,i=A*n,l=o*s,u=o*n,c=w*n,g=_*p,f=_*s,b=_*n;return O[0]=1-(l+c),O[1]=r+b,O[2]=i-f,O[3]=0,O[4]=r-b,O[5]=1-(a+c),O[6]=u+g,O[7]=0,O[8]=i+f,O[9]=u-g,O[10]=1-(a+l),O[11]=0,O[12]=M[0],O[13]=M[1],O[14]=M[2],O[15]=1,O}},69444:function(Y){Y.exports=function(O,e){return O[0]=e[0],O[1]=0,O[2]=0,O[3]=0,O[4]=0,O[5]=e[1],O[6]=0,O[7]=0,O[8]=0,O[9]=0,O[10]=e[2],O[11]=0,O[12]=0,O[13]=0,O[14]=0,O[15]=1,O}},48268:function(Y){Y.exports=function(O,e){return O[0]=1,O[1]=0,O[2]=0,O[3]=0,O[4]=0,O[5]=1,O[6]=0,O[7]=0,O[8]=0,O[9]=0,O[10]=1,O[11]=0,O[12]=e[0],O[13]=e[1],O[14]=e[2],O[15]=1,O}},21856:function(Y){Y.exports=function(O,e){var M=Math.sin(e),A=Math.cos(e);return O[0]=1,O[1]=0,O[2]=0,O[3]=0,O[4]=0,O[5]=A,O[6]=M,O[7]=0,O[8]=0,O[9]=-M,O[10]=A,O[11]=0,O[12]=0,O[13]=0,O[14]=0,O[15]=1,O}},79216:function(Y){Y.exports=function(O,e){var M=Math.sin(e),A=Math.cos(e);return O[0]=A,O[1]=0,O[2]=-M,O[3]=0,O[4]=0,O[5]=1,O[6]=0,O[7]=0,O[8]=M,O[9]=0,O[10]=A,O[11]=0,O[12]=0,O[13]=0,O[14]=0,O[15]=1,O}},57736:function(Y){Y.exports=function(O,e){var M=Math.sin(e),A=Math.cos(e);return O[0]=A,O[1]=M,O[2]=0,O[3]=0,O[4]=-M,O[5]=A,O[6]=0,O[7]=0,O[8]=0,O[9]=0,O[10]=1,O[11]=0,O[12]=0,O[13]=0,O[14]=0,O[15]=1,O}},38848:function(Y){Y.exports=function(O,e,M,A,o,w,_){var p=1/(M-e),s=1/(o-A),n=1/(w-_);return O[0]=2*w*p,O[1]=0,O[2]=0,O[3]=0,O[4]=0,O[5]=2*w*s,O[6]=0,O[7]=0,O[8]=(M+e)*p,O[9]=(o+A)*s,O[10]=(_+w)*n,O[11]=-1,O[12]=0,O[13]=0,O[14]=_*w*2*n,O[15]=0,O}},36635:function(Y){Y.exports=function(O){return O[0]=1,O[1]=0,O[2]=0,O[3]=0,O[4]=0,O[5]=1,O[6]=0,O[7]=0,O[8]=0,O[9]=0,O[10]=1,O[11]=0,O[12]=0,O[13]=0,O[14]=0,O[15]=1,O}},36524:function(Y,O,e){Y.exports={create:e(54212),clone:e(76860),copy:e(64492),identity:e(36635),transpose:e(86520),invert:e(4308),adjoint:e(12408),determinant:e(70800),multiply:e(80944),translate:e(35176),scale:e(68152),rotate:e(30016),rotateX:e(15456),rotateY:e(64840),rotateZ:e(4192),fromRotation:e(91616),fromRotationTranslation:e(51944),fromScaling:e(69444),fromTranslation:e(48268),fromXRotation:e(21856),fromYRotation:e(79216),fromZRotation:e(57736),fromQuat:e(61784),frustum:e(38848),perspective:e(51296),perspectiveFromFieldOfView:e(63688),ortho:e(97688),lookAt:e(56508),str:e(89412)}},4308:function(Y){Y.exports=function(O,e){var M=e[0],A=e[1],o=e[2],w=e[3],_=e[4],p=e[5],s=e[6],n=e[7],a=e[8],r=e[9],i=e[10],l=e[11],u=e[12],c=e[13],g=e[14],f=e[15],b=M*p-A*_,v=M*s-o*_,d=M*n-w*_,m=A*s-o*p,x=A*n-w*p,y=o*n-w*s,T=a*c-r*u,h=a*g-i*u,E=a*f-l*u,k=r*g-i*c,L=r*f-l*c,P=i*f-l*g,I=b*P-v*L+d*k+m*E-x*h+y*T;return I?(I=1/I,O[0]=(p*P-s*L+n*k)*I,O[1]=(o*L-A*P-w*k)*I,O[2]=(c*y-g*x+f*m)*I,O[3]=(i*x-r*y-l*m)*I,O[4]=(s*E-_*P-n*h)*I,O[5]=(M*P-o*E+w*h)*I,O[6]=(g*d-u*y-f*v)*I,O[7]=(a*y-i*d+l*v)*I,O[8]=(_*L-p*E+n*T)*I,O[9]=(A*E-M*L-w*T)*I,O[10]=(u*x-c*d+f*b)*I,O[11]=(r*d-a*x-l*b)*I,O[12]=(p*h-_*k-s*T)*I,O[13]=(M*k-A*h+o*T)*I,O[14]=(c*v-u*m-g*b)*I,O[15]=(a*m-r*v+i*b)*I,O):null}},56508:function(Y,O,e){var M=e(36635);Y.exports=function(A,o,w,_){var p,s,n,a,r,i,l,u,c,g,f=o[0],b=o[1],v=o[2],d=_[0],m=_[1],x=_[2],y=w[0],T=w[1],h=w[2];return Math.abs(f-y)<1e-6&&Math.abs(b-T)<1e-6&&Math.abs(v-h)<1e-6?M(A):(l=f-y,u=b-T,c=v-h,p=m*(c*=g=1/Math.sqrt(l*l+u*u+c*c))-x*(u*=g),s=x*(l*=g)-d*c,n=d*u-m*l,(g=Math.sqrt(p*p+s*s+n*n))?(p*=g=1/g,s*=g,n*=g):(p=0,s=0,n=0),a=u*n-c*s,r=c*p-l*n,i=l*s-u*p,(g=Math.sqrt(a*a+r*r+i*i))?(a*=g=1/g,r*=g,i*=g):(a=0,r=0,i=0),A[0]=p,A[1]=a,A[2]=l,A[3]=0,A[4]=s,A[5]=r,A[6]=u,A[7]=0,A[8]=n,A[9]=i,A[10]=c,A[11]=0,A[12]=-(p*f+s*b+n*v),A[13]=-(a*f+r*b+i*v),A[14]=-(l*f+u*b+c*v),A[15]=1,A)}},80944:function(Y){Y.exports=function(O,e,M){var A=e[0],o=e[1],w=e[2],_=e[3],p=e[4],s=e[5],n=e[6],a=e[7],r=e[8],i=e[9],l=e[10],u=e[11],c=e[12],g=e[13],f=e[14],b=e[15],v=M[0],d=M[1],m=M[2],x=M[3];return O[0]=v*A+d*p+m*r+x*c,O[1]=v*o+d*s+m*i+x*g,O[2]=v*w+d*n+m*l+x*f,O[3]=v*_+d*a+m*u+x*b,v=M[4],d=M[5],m=M[6],x=M[7],O[4]=v*A+d*p+m*r+x*c,O[5]=v*o+d*s+m*i+x*g,O[6]=v*w+d*n+m*l+x*f,O[7]=v*_+d*a+m*u+x*b,v=M[8],d=M[9],m=M[10],x=M[11],O[8]=v*A+d*p+m*r+x*c,O[9]=v*o+d*s+m*i+x*g,O[10]=v*w+d*n+m*l+x*f,O[11]=v*_+d*a+m*u+x*b,v=M[12],d=M[13],m=M[14],x=M[15],O[12]=v*A+d*p+m*r+x*c,O[13]=v*o+d*s+m*i+x*g,O[14]=v*w+d*n+m*l+x*f,O[15]=v*_+d*a+m*u+x*b,O}},97688:function(Y){Y.exports=function(O,e,M,A,o,w,_){var p=1/(e-M),s=1/(A-o),n=1/(w-_);return O[0]=-2*p,O[1]=0,O[2]=0,O[3]=0,O[4]=0,O[5]=-2*s,O[6]=0,O[7]=0,O[8]=0,O[9]=0,O[10]=2*n,O[11]=0,O[12]=(e+M)*p,O[13]=(o+A)*s,O[14]=(_+w)*n,O[15]=1,O}},51296:function(Y){Y.exports=function(O,e,M,A,o){var w=1/Math.tan(e/2),_=1/(A-o);return O[0]=w/M,O[1]=0,O[2]=0,O[3]=0,O[4]=0,O[5]=w,O[6]=0,O[7]=0,O[8]=0,O[9]=0,O[10]=(o+A)*_,O[11]=-1,O[12]=0,O[13]=0,O[14]=2*o*A*_,O[15]=0,O}},63688:function(Y){Y.exports=function(O,e,M,A){var o=Math.tan(e.upDegrees*Math.PI/180),w=Math.tan(e.downDegrees*Math.PI/180),_=Math.tan(e.leftDegrees*Math.PI/180),p=Math.tan(e.rightDegrees*Math.PI/180),s=2/(_+p),n=2/(o+w);return O[0]=s,O[1]=0,O[2]=0,O[3]=0,O[4]=0,O[5]=n,O[6]=0,O[7]=0,O[8]=-(_-p)*s*.5,O[9]=(o-w)*n*.5,O[10]=A/(M-A),O[11]=-1,O[12]=0,O[13]=0,O[14]=A*M/(M-A),O[15]=0,O}},30016:function(Y){Y.exports=function(O,e,M,A){var o,w,_,p,s,n,a,r,i,l,u,c,g,f,b,v,d,m,x,y,T,h,E,k,L=A[0],P=A[1],I=A[2],z=Math.sqrt(L*L+P*P+I*I);return Math.abs(z)<1e-6?null:(L*=z=1/z,P*=z,I*=z,o=Math.sin(M),_=1-(w=Math.cos(M)),p=e[0],s=e[1],n=e[2],a=e[3],r=e[4],i=e[5],l=e[6],u=e[7],c=e[8],g=e[9],f=e[10],b=e[11],v=L*L*_+w,d=P*L*_+I*o,m=I*L*_-P*o,x=L*P*_-I*o,y=P*P*_+w,T=I*P*_+L*o,h=L*I*_+P*o,E=P*I*_-L*o,k=I*I*_+w,O[0]=p*v+r*d+c*m,O[1]=s*v+i*d+g*m,O[2]=n*v+l*d+f*m,O[3]=a*v+u*d+b*m,O[4]=p*x+r*y+c*T,O[5]=s*x+i*y+g*T,O[6]=n*x+l*y+f*T,O[7]=a*x+u*y+b*T,O[8]=p*h+r*E+c*k,O[9]=s*h+i*E+g*k,O[10]=n*h+l*E+f*k,O[11]=a*h+u*E+b*k,e!==O&&(O[12]=e[12],O[13]=e[13],O[14]=e[14],O[15]=e[15]),O)}},15456:function(Y){Y.exports=function(O,e,M){var A=Math.sin(M),o=Math.cos(M),w=e[4],_=e[5],p=e[6],s=e[7],n=e[8],a=e[9],r=e[10],i=e[11];return e!==O&&(O[0]=e[0],O[1]=e[1],O[2]=e[2],O[3]=e[3],O[12]=e[12],O[13]=e[13],O[14]=e[14],O[15]=e[15]),O[4]=w*o+n*A,O[5]=_*o+a*A,O[6]=p*o+r*A,O[7]=s*o+i*A,O[8]=n*o-w*A,O[9]=a*o-_*A,O[10]=r*o-p*A,O[11]=i*o-s*A,O}},64840:function(Y){Y.exports=function(O,e,M){var A=Math.sin(M),o=Math.cos(M),w=e[0],_=e[1],p=e[2],s=e[3],n=e[8],a=e[9],r=e[10],i=e[11];return e!==O&&(O[4]=e[4],O[5]=e[5],O[6]=e[6],O[7]=e[7],O[12]=e[12],O[13]=e[13],O[14]=e[14],O[15]=e[15]),O[0]=w*o-n*A,O[1]=_*o-a*A,O[2]=p*o-r*A,O[3]=s*o-i*A,O[8]=w*A+n*o,O[9]=_*A+a*o,O[10]=p*A+r*o,O[11]=s*A+i*o,O}},4192:function(Y){Y.exports=function(O,e,M){var A=Math.sin(M),o=Math.cos(M),w=e[0],_=e[1],p=e[2],s=e[3],n=e[4],a=e[5],r=e[6],i=e[7];return e!==O&&(O[8]=e[8],O[9]=e[9],O[10]=e[10],O[11]=e[11],O[12]=e[12],O[13]=e[13],O[14]=e[14],O[15]=e[15]),O[0]=w*o+n*A,O[1]=_*o+a*A,O[2]=p*o+r*A,O[3]=s*o+i*A,O[4]=n*o-w*A,O[5]=a*o-_*A,O[6]=r*o-p*A,O[7]=i*o-s*A,O}},68152:function(Y){Y.exports=function(O,e,M){var A=M[0],o=M[1],w=M[2];return O[0]=e[0]*A,O[1]=e[1]*A,O[2]=e[2]*A,O[3]=e[3]*A,O[4]=e[4]*o,O[5]=e[5]*o,O[6]=e[6]*o,O[7]=e[7]*o,O[8]=e[8]*w,O[9]=e[9]*w,O[10]=e[10]*w,O[11]=e[11]*w,O[12]=e[12],O[13]=e[13],O[14]=e[14],O[15]=e[15],O}},89412:function(Y){Y.exports=function(O){return"mat4("+O[0]+", "+O[1]+", "+O[2]+", "+O[3]+", "+O[4]+", "+O[5]+", "+O[6]+", "+O[7]+", "+O[8]+", "+O[9]+", "+O[10]+", "+O[11]+", "+O[12]+", "+O[13]+", "+O[14]+", "+O[15]+")"}},35176:function(Y){Y.exports=function(O,e,M){var A,o,w,_,p,s,n,a,r,i,l,u,c=M[0],g=M[1],f=M[2];return e===O?(O[12]=e[0]*c+e[4]*g+e[8]*f+e[12],O[13]=e[1]*c+e[5]*g+e[9]*f+e[13],O[14]=e[2]*c+e[6]*g+e[10]*f+e[14],O[15]=e[3]*c+e[7]*g+e[11]*f+e[15]):(A=e[0],o=e[1],w=e[2],_=e[3],p=e[4],s=e[5],n=e[6],a=e[7],r=e[8],i=e[9],l=e[10],u=e[11],O[0]=A,O[1]=o,O[2]=w,O[3]=_,O[4]=p,O[5]=s,O[6]=n,O[7]=a,O[8]=r,O[9]=i,O[10]=l,O[11]=u,O[12]=A*c+p*g+r*f+e[12],O[13]=o*c+s*g+i*f+e[13],O[14]=w*c+n*g+l*f+e[14],O[15]=_*c+a*g+u*f+e[15]),O}},86520:function(Y){Y.exports=function(O,e){if(O===e){var M=e[1],A=e[2],o=e[3],w=e[6],_=e[7],p=e[11];O[1]=e[4],O[2]=e[8],O[3]=e[12],O[4]=M,O[6]=e[9],O[7]=e[13],O[8]=A,O[9]=w,O[11]=e[14],O[12]=o,O[13]=_,O[14]=p}else O[0]=e[0],O[1]=e[4],O[2]=e[8],O[3]=e[12],O[4]=e[1],O[5]=e[5],O[6]=e[9],O[7]=e[13],O[8]=e[2],O[9]=e[6],O[10]=e[10],O[11]=e[14],O[12]=e[3],O[13]=e[7],O[14]=e[11],O[15]=e[15];return O}},23352:function(Y,O,e){var M=e(42771),A=e(55616),o=e(28624),w=e(55212),_=e(60463),p=e(72160),s=e(33888),n=e(14144),a=e(51160),r=e(58908),i=e(65819),l=e(23464),u=e(63768),c=e(50896),g=e(71920),f=e(47520),b=e(308).nextPow2,v=new _,d=!1;if(document.body){var m=document.body.appendChild(document.createElement("div"));m.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(m).fontStretch&&(d=!0),document.body.removeChild(m)}var x=function(y){(function(T){return typeof T=="function"&&T._gl&&T.prop&&T.texture&&T.buffer})(y)?(y={regl:y},this.gl=y.regl._gl):this.gl=w(y),this.shader=v.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=y.regl||o({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),v.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(r(y)?y:{})};x.prototype.createShader=function(){var y=this.regl,T=y({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:y.prop("count"),offset:y.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:y.this("sizeBuffer")},width:{offset:0,stride:8,buffer:y.this("sizeBuffer")},char:y.this("charBuffer"),position:y.this("position")},uniforms:{atlasSize:function(h,E){return[E.atlas.width,E.atlas.height]},atlasDim:function(h,E){return[E.atlas.cols,E.atlas.rows]},atlas:function(h,E){return E.atlas.texture},charStep:function(h,E){return E.atlas.step},em:function(h,E){return E.atlas.em},color:y.prop("color"),opacity:y.prop("opacity"),viewport:y.this("viewportArray"),scale:y.this("scale"),align:y.prop("align"),baseline:y.prop("baseline"),translate:y.this("translate"),positionOffset:y.prop("positionOffset")},primitive:"points",viewport:y.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`});return{regl:y,draw:T,atlas:{}}},x.prototype.update=function(y){var T=this;if(typeof y=="string")y={text:y};else if(!y)return;(y=A(y,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity!=null&&(Array.isArray(y.opacity)?this.opacity=y.opacity.map(function(pe){return parseFloat(pe)}):this.opacity=parseFloat(y.opacity)),y.viewport!=null&&(this.viewport=a(y.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),y.kerning!=null&&(this.kerning=y.kerning),y.offset!=null&&(typeof y.offset=="number"&&(y.offset=[y.offset,0]),this.positionOffset=f(y.offset)),y.direction&&(this.direction=y.direction),y.range&&(this.range=y.range,this.scale=[1/(y.range[2]-y.range[0]),1/(y.range[3]-y.range[1])],this.translate=[-y.range[0],-y.range[1]]),y.scale&&(this.scale=y.scale),y.translate&&(this.translate=y.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||y.font||(y.font=x.baseFontSize+"px sans-serif");var h,E=!1,k=!1;if(y.font&&(Array.isArray(y.font)?y.font:[y.font]).forEach(function(pe,Ee){if(typeof pe=="string")try{pe=M.parse(pe)}catch{pe=M.parse(x.baseFontSize+"px "+pe)}else pe=M.parse(M.stringify(pe));var Te=M.stringify({size:x.baseFontSize,family:pe.family,stretch:d?pe.stretch:void 0,variant:pe.variant,weight:pe.weight,style:pe.style}),Me=i(pe.size),Le=Math.round(Me[0]*l(Me[1]));if(Le!==T.fontSize[Ee]&&(k=!0,T.fontSize[Ee]=Le),!(T.font[Ee]&&Te==T.font[Ee].baseString||(E=!0,T.font[Ee]=x.fonts[Te],T.font[Ee]))){var Ie=pe.family.join(", "),he=[pe.style];pe.style!=pe.variant&&he.push(pe.variant),pe.variant!=pe.weight&&he.push(pe.weight),d&&pe.weight!=pe.stretch&&he.push(pe.stretch),T.font[Ee]={baseString:Te,family:Ie,weight:pe.weight,stretch:pe.stretch,style:pe.style,variant:pe.variant,width:{},kerning:{},metrics:g(Ie,{origin:"top",fontSize:x.baseFontSize,fontStyle:he.join(" ")})},x.fonts[Te]=T.font[Ee]}}),(E||k)&&this.font.forEach(function(pe,Ee){var Te=M.stringify({size:T.fontSize[Ee],family:pe.family,stretch:d?pe.stretch:void 0,variant:pe.variant,weight:pe.weight,style:pe.style});if(T.fontAtlas[Ee]=T.shader.atlas[Te],!T.fontAtlas[Ee]){var Me=pe.metrics;T.shader.atlas[Te]=T.fontAtlas[Ee]={fontString:Te,step:2*Math.ceil(T.fontSize[Ee]*Me.bottom*.5),em:T.fontSize[Ee],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:T.regl.texture()}}y.text==null&&(y.text=T.text)}),typeof y.text=="string"&&y.position&&y.position.length>2){for(var L=Array(.5*y.position.length),P=0;P<L.length;P++)L[P]=y.text;y.text=L}if(y.text!=null||E){if(this.textOffsets=[0],Array.isArray(y.text)){this.count=y.text[0].length,this.counts=[this.count];for(var I=1;I<y.text.length;I++)this.textOffsets[I]=this.textOffsets[I-1]+y.text[I-1].length,this.count+=y.text[I].length,this.counts.push(y.text[I].length);this.text=y.text.join("")}else this.text=y.text,this.count=this.text.length,this.counts=[this.count];h=[],this.font.forEach(function(pe,Ee){x.atlasContext.font=pe.baseString;for(var Te=T.fontAtlas[Ee],Me=0;Me<T.text.length;Me++){var Le=T.text.charAt(Me);if(Te.ids[Le]==null&&(Te.ids[Le]=Te.chars.length,Te.chars.push(Le),h.push(Le)),pe.width[Le]==null&&(pe.width[Le]=x.atlasContext.measureText(Le).width/x.baseFontSize,T.kerning)){var Ie=[];for(var he in pe.width)Ie.push(he+Le,Le+he);c(pe.kerning,u(pe.family,{pairs:Ie}))}}})}if(y.position)if(y.position.length>2){for(var z=!y.position[0].length,F=n.mallocFloat(2*this.count),U=0,R=0;U<this.counts.length;U++){var j=this.counts[U];if(z)for(var Z=0;Z<j;Z++)F[R++]=y.position[2*U],F[R++]=y.position[2*U+1];else for(var B=0;B<j;B++)F[R++]=y.position[U][0],F[R++]=y.position[U][1]}this.position.call?this.position({type:"float",data:F}):this.position=this.regl.buffer({type:"float",data:F}),n.freeFloat(F)}else this.position.destroy&&this.position.destroy(),this.position={constant:y.position};if(y.text||E){var q=n.mallocUint8(this.count),V=n.mallocFloat(2*this.count);this.textWidth=[];for(var ne=0,ee=0;ne<this.counts.length;ne++){for(var $=this.counts[ne],J=this.font[ne]||this.font[0],K=this.fontAtlas[ne]||this.fontAtlas[0],te=0;te<$;te++){var ie=this.text.charAt(ee),ae=this.text.charAt(ee-1);if(q[ee]=K.ids[ie],V[2*ee]=J.width[ie],te){var se=V[2*ee-2],ce=V[2*ee],de=V[2*ee-1]+.5*se+.5*ce;if(this.kerning){var ge=J.kerning[ae+ie];ge&&(de+=.001*ge)}V[2*ee+1]=de}else V[2*ee+1]=.5*V[2*ee];ee++}this.textWidth.push(V.length?.5*V[2*ee-2]+V[2*ee-1]:0)}y.align||(y.align=this.align),this.charBuffer({data:q,type:"uint8",usage:"stream"}),this.sizeBuffer({data:V,type:"float",usage:"stream"}),n.freeUint8(q),n.freeFloat(V),h.length&&this.font.forEach(function(pe,Ee){var Te=T.fontAtlas[Ee],Me=Te.step,Le=Math.floor(x.maxAtlasSize/Me),Ie=Math.min(Le,Te.chars.length),he=Math.ceil(Te.chars.length/Ie),xe=b(Ie*Me),ke=b(he*Me);Te.width=xe,Te.height=ke,Te.rows=he,Te.cols=Ie,Te.em&&Te.texture({data:s({canvas:x.atlasCanvas,font:Te.fontString,chars:Te.chars,shape:[xe,ke],step:[Me,Me]})})})}if(y.align&&(this.align=y.align,this.alignOffset=this.textWidth.map(function(pe,Ee){var Te=Array.isArray(T.align)?T.align.length>1?T.align[Ee]:T.align[0]:T.align;if(typeof Te=="number")return Te;switch(Te){case"right":case"end":return-pe;case"center":case"centre":case"middle":return .5*-pe}return 0})),this.baseline==null&&y.baseline==null&&(y.baseline=0),y.baseline!=null&&(this.baseline=y.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(pe,Ee){var Te=(T.font[Ee]||T.font[0]).metrics,Me=0;return Me+=.5*Te.bottom,-1*(Me+=typeof pe=="number"?pe-Te.baseline:-Te[pe])})),y.color!=null)if(y.color||(y.color="transparent"),typeof y.color!="string"&&isNaN(y.color)){var ve;if(typeof y.color[0]=="number"&&y.color.length>this.counts.length){var be=y.color.length;ve=n.mallocUint8(be);for(var me=(y.color.subarray||y.color.slice).bind(y.color),Se=0;Se<be;Se+=4)ve.set(p(me(Se,Se+4),"uint8"),Se)}else{var we=y.color.length;ve=n.mallocUint8(4*we);for(var _e=0;_e<we;_e++)ve.set(p(y.color[_e]||0,"uint8"),4*_e)}this.color=ve}else this.color=p(y.color,"uint8");if(y.position||y.text||y.color||y.baseline||y.align||y.font||y.offset||y.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var oe=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(oe);for(var le=0;le<this.batch.length;le++)this.batch[le]={count:this.counts.length>1?this.counts[le]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[le]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*le,4*le+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[le]:this.opacity,baseline:this.baselineOffset[le]!=null?this.baselineOffset[le]:this.baselineOffset[0],align:this.align?this.alignOffset[le]!=null?this.alignOffset[le]:this.alignOffset[0]:0,atlas:this.fontAtlas[le]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*le,2*le+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]},x.prototype.destroy=function(){},x.prototype.kerning=!0,x.prototype.position={constant:new Float32Array(2)},x.prototype.translate=null,x.prototype.scale=null,x.prototype.font=null,x.prototype.text="",x.prototype.positionOffset=[0,0],x.prototype.opacity=1,x.prototype.color=new Uint8Array([0,0,0,255]),x.prototype.alignOffset=[0,0],x.maxAtlasSize=1024,x.atlasCanvas=document.createElement("canvas"),x.atlasContext=x.atlasCanvas.getContext("2d",{alpha:!1}),x.baseFontSize=64,x.fonts={},Y.exports=x},55212:function(Y,O,e){var M=e(55616);function A(_){if(_.container)if(_.container==document.body)document.body.style.width||(_.canvas.width=_.width||_.pixelRatio*e.g.innerWidth),document.body.style.height||(_.canvas.height=_.height||_.pixelRatio*e.g.innerHeight);else{var p=_.container.getBoundingClientRect();_.canvas.width=_.width||p.right-p.left,_.canvas.height=_.height||p.bottom-p.top}}function o(_){return typeof _.getContext=="function"&&"width"in _&&"height"in _}function w(){var _=document.createElement("canvas");return _.style.position="absolute",_.style.top=0,_.style.left=0,_}Y.exports=function(_){var p;if(_?typeof _=="string"&&(_={container:_}):_={},(_=o(_)||typeof(p=_).nodeName=="string"&&typeof p.appendChild=="function"&&typeof p.getBoundingClientRect=="function"?{container:_}:function(n){return typeof n.drawArrays=="function"||typeof n.drawElements=="function"}(_)?{gl:_}:M(_,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(_.pixelRatio=e.g.pixelRatio||1),_.gl)return _.gl;if(_.canvas&&(_.container=_.canvas.parentNode),_.container){if(typeof _.container=="string"){var s=document.querySelector(_.container);if(!s)throw Error("Element "+_.container+" is not found");_.container=s}o(_.container)?(_.canvas=_.container,_.container=_.canvas.parentNode):_.canvas||(_.canvas=w(),_.container.appendChild(_.canvas),A(_))}else if(!_.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");_.container=document.body||document.documentElement,_.canvas=w(),_.container.appendChild(_.canvas),A(_)}return _.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(n){try{_.gl=_.canvas.getContext(n,_.attrs)}catch{}return _.gl}),_.gl}},26444:function(Y){Y.exports=function(O){typeof O=="string"&&(O=[O]);for(var e=[].slice.call(arguments,1),M=[],A=0;A<O.length-1;A++)M.push(O[A],e[A]||"");return M.push(O[A]),M.join("")}},2304:function(Y,O,e){var M=e(53664)("%Object.getOwnPropertyDescriptor%",!0);if(M)try{M([],"length")}catch{M=null}Y.exports=M},52264:function(Y,O,e){var M,A=e(24200);M=typeof e.g.matchMedia=="function"?!e.g.matchMedia("(hover: none)").matches:A,Y.exports=M},89184:function(Y,O,e){var M=e(24200);Y.exports=M&&function(){var A=!1;try{var o=Object.defineProperty({},"passive",{get:function(){A=!0}});window.addEventListener("test",null,o),window.removeEventListener("test",null,o)}catch{A=!1}return A}()},39640:function(Y,O,e){var M=e(53664)("%Object.defineProperty%",!0),A=function(){if(M)try{return M({},"a",{value:1}),!0}catch{return!1}return!1};A.hasArrayLengthDefineBug=function(){if(!A())return null;try{return M([],"length",{value:1}).length!==1}catch{return!0}},Y.exports=A},69572:function(Y){var O={foo:{}},e=Object;Y.exports=function(){return{__proto__:O}.foo===O.foo&&!({__proto__:null}instanceof e)}},71080:function(Y,O,e){var M=typeof Symbol<"u"&&Symbol,A=e(89320);Y.exports=function(){return typeof M=="function"&&typeof Symbol=="function"&&typeof M("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&A()}},89320:function(Y){Y.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var O={},e=Symbol("test"),M=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(M)!=="[object Symbol]")return!1;for(e in O[e]=42,O)return!1;if(typeof Object.keys=="function"&&Object.keys(O).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(O).length!==0)return!1;var A=Object.getOwnPropertySymbols(O);if(A.length!==1||A[0]!==e||!Object.prototype.propertyIsEnumerable.call(O,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(O,e);if(o.value!==42||o.enumerable!==!0)return!1}return!0}},46672:function(Y,O,e){var M=e(89320);Y.exports=function(){return M()&&!!Symbol.toStringTag}},92064:function(Y,O,e){var M=Function.prototype.call,A=Object.prototype.hasOwnProperty,o=e(8844);Y.exports=o.call(M,A)},35984:function(Y,O){O.read=function(e,M,A,o,w){var _,p,s=8*w-o-1,n=(1<<s)-1,a=n>>1,r=-7,i=A?w-1:0,l=A?-1:1,u=e[M+i];for(i+=l,_=u&(1<<-r)-1,u>>=-r,r+=s;r>0;_=256*_+e[M+i],i+=l,r-=8);for(p=_&(1<<-r)-1,_>>=-r,r+=o;r>0;p=256*p+e[M+i],i+=l,r-=8);if(_===0)_=1-a;else{if(_===n)return p?NaN:1/0*(u?-1:1);p+=Math.pow(2,o),_-=a}return(u?-1:1)*p*Math.pow(2,_-o)},O.write=function(e,M,A,o,w,_){var p,s,n,a=8*_-w-1,r=(1<<a)-1,i=r>>1,l=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,u=o?0:_-1,c=o?1:-1,g=M<0||M===0&&1/M<0?1:0;for(M=Math.abs(M),isNaN(M)||M===1/0?(s=isNaN(M)?1:0,p=r):(p=Math.floor(Math.log(M)/Math.LN2),M*(n=Math.pow(2,-p))<1&&(p--,n*=2),(M+=p+i>=1?l/n:l*Math.pow(2,1-i))*n>=2&&(p++,n/=2),p+i>=r?(s=0,p=r):p+i>=1?(s=(M*n-1)*Math.pow(2,w),p+=i):(s=M*Math.pow(2,i-1)*Math.pow(2,w),p=0));w>=8;e[A+u]=255&s,u+=c,s/=256,w-=8);for(p=p<<w|s,a+=w;a>0;e[A+u]=255&p,u+=c,p/=256,a-=8);e[A+u-c]|=128*g}},6768:function(Y){typeof Object.create=="function"?Y.exports=function(O,e){e&&(O.super_=e,O.prototype=Object.create(e.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}))}:Y.exports=function(O,e){if(e){O.super_=e;var M=function(){};M.prototype=e.prototype,O.prototype=new M,O.prototype.constructor=O}}},91148:function(Y,O,e){var M=e(46672)(),A=e(99676)("Object.prototype.toString"),o=function(p){return!(M&&p&&typeof p=="object"&&Symbol.toStringTag in p)&&A(p)==="[object Arguments]"},w=function(p){return!!o(p)||p!==null&&typeof p=="object"&&typeof p.length=="number"&&p.length>=0&&A(p)!=="[object Array]"&&A(p.callee)==="[object Function]"},_=function(){return o(arguments)}();o.isLegacyArguments=w,Y.exports=_?o:w},24200:function(Y){Y.exports=!0},90720:function(Y){var O,e,M=Function.prototype.toString,A=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply;if(typeof A=="function"&&typeof Object.defineProperty=="function")try{O=Object.defineProperty({},"length",{get:function(){throw e}}),e={},A(function(){throw 42},null,O)}catch(i){i!==e&&(A=null)}else A=null;var o=/^\s*class\b/,w=function(i){try{var l=M.call(i);return o.test(l)}catch{return!1}},_=function(i){try{return!w(i)&&(M.call(i),!0)}catch{return!1}},p=Object.prototype.toString,s=typeof Symbol=="function"&&!!Symbol.toStringTag,n=!(0 in[,]),a=function(){return!1};if(typeof document=="object"){var r=document.all;p.call(r)===p.call(document.all)&&(a=function(i){if((n||!i)&&(i===void 0||typeof i=="object"))try{var l=p.call(i);return(l==="[object HTMLAllCollection]"||l==="[object HTML document.all class]"||l==="[object HTMLCollection]"||l==="[object Object]")&&i("")==null}catch{}return!1})}Y.exports=A?function(i){if(a(i))return!0;if(!i||typeof i!="function"&&typeof i!="object")return!1;try{A(i,null,O)}catch(l){if(l!==e)return!1}return!w(i)&&_(i)}:function(i){if(a(i))return!0;if(!i||typeof i!="function"&&typeof i!="object")return!1;if(s)return _(i);if(w(i))return!1;var l=p.call(i);return!(l!=="[object Function]"&&l!=="[object GeneratorFunction]"&&!/^\[object HTML/.test(l))&&_(i)}},84420:function(Y,O,e){var M,A=Object.prototype.toString,o=Function.prototype.toString,w=/^\s*(?:function)?\*/,_=e(46672)(),p=Object.getPrototypeOf;Y.exports=function(s){if(typeof s!="function")return!1;if(w.test(o.call(s)))return!0;if(!_)return A.call(s)==="[object GeneratorFunction]";if(!p)return!1;if(M===void 0){var n=function(){if(!_)return!1;try{return Function("return function*() {}")()}catch{}}();M=!!n&&p(n)}return p(s)===M}},96604:function(Y){Y.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},85992:function(Y){Y.exports=function(O){return O!=O}},1560:function(Y,O,e){var M=e(57916),A=e(81288),o=e(85992),w=e(57740),_=e(59736),p=M(w(),Number);A(p,{getPolyfill:w,implementation:o,shim:_}),Y.exports=p},57740:function(Y,O,e){var M=e(85992);Y.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:M}},59736:function(Y,O,e){var M=e(81288),A=e(57740);Y.exports=function(){var o=A();return M(Number,{isNaN:o},{isNaN:function(){return Number.isNaN!==o}}),o}},18400:function(Y){Y.exports=function(O){var e=typeof O;return O!==null&&(e==="object"||e==="function")}},58908:function(Y){var O=Object.prototype.toString;Y.exports=function(e){var M;return O.call(e)==="[object Object]"&&((M=Object.getPrototypeOf(e))===null||M===Object.getPrototypeOf({}))}},94576:function(Y){Y.exports=function(O){for(var e,M=O.length,A=0;A<M;A++)if(((e=O.charCodeAt(A))<9||e>13)&&e!==32&&e!==133&&e!==160&&e!==5760&&e!==6158&&(e<8192||e>8205)&&e!==8232&&e!==8233&&e!==8239&&e!==8287&&e!==8288&&e!==12288&&e!==65279)return!1;return!0}},53520:function(Y){Y.exports=function(O){return typeof O=="string"&&(O=O.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(O)&&/[\dz]$/i.test(O)&&O.length>4))}},7728:function(Y,O,e){var M=e(46492),A=e(63436),o=e(99676),w=o("Object.prototype.toString"),_=e(46672)(),p=e(2304),s=typeof globalThis>"u"?e.g:globalThis,n=A(),a=o("Array.prototype.indexOf",!0)||function(u,c){for(var g=0;g<u.length;g+=1)if(u[g]===c)return g;return-1},r=o("String.prototype.slice"),i={},l=Object.getPrototypeOf;_&&p&&l&&M(n,function(u){var c=new s[u];if(Symbol.toStringTag in c){var g=l(c),f=p(g,Symbol.toStringTag);if(!f){var b=l(g);f=p(b,Symbol.toStringTag)}i[u]=f.get}}),Y.exports=function(u){if(!u||typeof u!="object")return!1;if(!_||!(Symbol.toStringTag in u)){var c=r(w(u),8,-1);return a(n,c)>-1}return!!p&&function(g){var f=!1;return M(i,function(b,v){if(!f)try{f=b.call(g)===v}catch{}}),f}(u)}},76244:function(Y){Y.exports=Math.log2||function(O){return Math.log(O)*Math.LOG2E}},62644:function(Y,O,e){Y.exports=function(A,o){o||(o=A,A=window);var w=0,_=0,p=0,s={shift:!1,alt:!1,control:!1,meta:!1},n=!1;function a(d){var m=!1;return"altKey"in d&&(m=m||d.altKey!==s.alt,s.alt=!!d.altKey),"shiftKey"in d&&(m=m||d.shiftKey!==s.shift,s.shift=!!d.shiftKey),"ctrlKey"in d&&(m=m||d.ctrlKey!==s.control,s.control=!!d.ctrlKey),"metaKey"in d&&(m=m||d.metaKey!==s.meta,s.meta=!!d.metaKey),m}function r(d,m){var x=M.x(m),y=M.y(m);"buttons"in m&&(d=0|m.buttons),(d!==w||x!==_||y!==p||a(m))&&(w=0|d,_=x||0,p=y||0,o&&o(w,_,p,s))}function i(d){r(0,d)}function l(){(w||_||p||s.shift||s.alt||s.meta||s.control)&&(_=p=0,w=0,s.shift=s.alt=s.control=s.meta=!1,o&&o(0,0,0,s))}function u(d){a(d)&&o&&o(w,_,p,s)}function c(d){M.buttons(d)===0?r(0,d):r(w,d)}function g(d){r(w|M.buttons(d),d)}function f(d){r(w&~M.buttons(d),d)}function b(){n||(n=!0,A.addEventListener("mousemove",c),A.addEventListener("mousedown",g),A.addEventListener("mouseup",f),A.addEventListener("mouseleave",i),A.addEventListener("mouseenter",i),A.addEventListener("mouseout",i),A.addEventListener("mouseover",i),A.addEventListener("blur",l),A.addEventListener("keyup",u),A.addEventListener("keydown",u),A.addEventListener("keypress",u),A!==window&&(window.addEventListener("blur",l),window.addEventListener("keyup",u),window.addEventListener("keydown",u),window.addEventListener("keypress",u)))}b();var v={element:A};return Object.defineProperties(v,{enabled:{get:function(){return n},set:function(d){d?b():n&&(n=!1,A.removeEventListener("mousemove",c),A.removeEventListener("mousedown",g),A.removeEventListener("mouseup",f),A.removeEventListener("mouseleave",i),A.removeEventListener("mouseenter",i),A.removeEventListener("mouseout",i),A.removeEventListener("mouseover",i),A.removeEventListener("blur",l),A.removeEventListener("keyup",u),A.removeEventListener("keydown",u),A.removeEventListener("keypress",u),A!==window&&(window.removeEventListener("blur",l),window.removeEventListener("keyup",u),window.removeEventListener("keydown",u),window.removeEventListener("keypress",u)))},enumerable:!0},buttons:{get:function(){return w},enumerable:!0},x:{get:function(){return _},enumerable:!0},y:{get:function(){return p},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),v};var M=e(93784)},29128:function(Y){var O={left:0,top:0};Y.exports=function(e,M,A){M=M||e.currentTarget||e.srcElement,Array.isArray(A)||(A=[0,0]);var o,w=e.clientX||0,_=e.clientY||0,p=(o=M)===window||o===document||o===document.body?O:o.getBoundingClientRect();return A[0]=w-p.left,A[1]=_-p.top,A}},93784:function(Y,O){function e(M){return M.target||M.srcElement||window}O.buttons=function(M){if(typeof M=="object"){if("buttons"in M)return M.buttons;if("which"in M){if((A=M.which)===2)return 4;if(A===3)return 2;if(A>0)return 1<<A-1}else if("button"in M){var A;if((A=M.button)===1)return 4;if(A===2)return 2;if(A>=0)return 1<<A}}return 0},O.element=e,O.x=function(M){if(typeof M=="object"){if("offsetX"in M)return M.offsetX;var A=e(M).getBoundingClientRect();return M.clientX-A.left}return 0},O.y=function(M){if(typeof M=="object"){if("offsetY"in M)return M.offsetY;var A=e(M).getBoundingClientRect();return M.clientY-A.top}return 0}},97264:function(Y,O,e){var M=e(23464);Y.exports=function(A,o,w){typeof A=="function"&&(w=!!o,o=A,A=window);var _=M("ex",A),p=function(s){w&&s.preventDefault();var n=s.deltaX||0,a=s.deltaY||0,r=s.deltaZ||0,i=1;switch(s.deltaMode){case 1:i=_;break;case 2:i=window.innerHeight}if(a*=i,r*=i,(n*=i)||a||r)return o(n,a,r,s)};return A.addEventListener("wheel",p),p}},88324:function(Y,O,e){var M;(function(A,o,w){o[A]=o[A]||function(){var _,p,s,n=Object.prototype.toString,a=typeof setImmediate<"u"?function(x){return setImmediate(x)}:setTimeout;try{Object.defineProperty({},"x",{}),_=function(x,y,T,h){return Object.defineProperty(x,y,{value:T,writable:!0,configurable:h!==!1})}}catch{_=function(y,T,h){return y[T]=h,y}}function r(x,y){s.add(x,y),p||(p=a(s.drain))}function i(x){var y,T=typeof x;return x==null||T!="object"&&T!="function"||(y=x.then),typeof y=="function"&&y}function l(){for(var x=0;x<this.chain.length;x++)u(this,this.state===1?this.chain[x].success:this.chain[x].failure,this.chain[x]);this.chain.length=0}function u(x,y,T){var h,E;try{y===!1?T.reject(x.msg):(h=y===!0?x.msg:y.call(void 0,x.msg))===T.promise?T.reject(TypeError("Promise-chain cycle")):(E=i(h))?E.call(h,T.resolve,T.reject):T.resolve(h)}catch(k){T.reject(k)}}function c(x){var y,T=this;if(!T.triggered){T.triggered=!0,T.def&&(T=T.def);try{(y=i(x))?r(function(){var h=new b(T);try{y.call(x,function(){c.apply(h,arguments)},function(){g.apply(h,arguments)})}catch(E){g.call(h,E)}}):(T.msg=x,T.state=1,T.chain.length>0&&r(l,T))}catch(h){g.call(new b(T),h)}}}function g(x){var y=this;y.triggered||(y.triggered=!0,y.def&&(y=y.def),y.msg=x,y.state=2,y.chain.length>0&&r(l,y))}function f(x,y,T,h){for(var E=0;E<y.length;E++)(function(k){x.resolve(y[k]).then(function(L){T(k,L)},h)})(E)}function b(x){this.def=x,this.triggered=!1}function v(x){this.promise=x,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function d(x){if(typeof x!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var y=new v(this);this.then=function(T,h){var E={success:typeof T!="function"||T,failure:typeof h=="function"&&h};return E.promise=new this.constructor(function(k,L){if(typeof k!="function"||typeof L!="function")throw TypeError("Not a function");E.resolve=k,E.reject=L}),y.chain.push(E),y.state!==0&&r(l,y),E.promise},this.catch=function(T){return this.then(void 0,T)};try{x.call(void 0,function(T){c.call(y,T)},function(T){g.call(y,T)})}catch(T){g.call(y,T)}}s=function(){var x,y,T;function h(E,k){this.fn=E,this.self=k,this.next=void 0}return{add:function(E,k){T=new h(E,k),y?y.next=T:x=T,y=T,T=void 0},drain:function(){var E=x;for(x=y=p=void 0;E;)E.fn.call(E.self),E=E.next}}}();var m=_({},"constructor",d,!1);return d.prototype=m,_(m,"__NPO__",0,!1),_(d,"resolve",function(x){return x&&typeof x=="object"&&x.__NPO__===1?x:new this(function(y,T){if(typeof y!="function"||typeof T!="function")throw TypeError("Not a function");y(x)})}),_(d,"reject",function(x){return new this(function(y,T){if(typeof y!="function"||typeof T!="function")throw TypeError("Not a function");T(x)})}),_(d,"all",function(x){var y=this;return n.call(x)!="[object Array]"?y.reject(TypeError("Not an array")):x.length===0?y.resolve([]):new y(function(T,h){if(typeof T!="function"||typeof h!="function")throw TypeError("Not a function");var E=x.length,k=Array(E),L=0;f(y,x,function(P,I){k[P]=I,++L===E&&T(k)},h)})}),_(d,"race",function(x){var y=this;return n.call(x)!="[object Array]"?y.reject(TypeError("Not an array")):new y(function(T,h){if(typeof T!="function"||typeof h!="function")throw TypeError("Not a function");f(y,x,function(E,k){T(k)},h)})}),d}(),Y.exports?Y.exports=o[A]:(M=(function(){return o[A]}).call(O,e,O,Y))===void 0||(Y.exports=M)})("Promise",e.g!==void 0?e.g:this)},48816:function(Y){var O=Math.PI,e=_(120);function M(p,s,n,a){return["C",p,s,n,a,n,a]}function A(p,s,n,a,r,i){return["C",p/3+.6666666666666666*n,s/3+.6666666666666666*a,r/3+.6666666666666666*n,i/3+.6666666666666666*a,r,i]}function o(p,s,n,a,r,i,l,u,c,g){if(g)E=g[0],k=g[1],T=g[2],h=g[3];else{var f=w(p,s,-r);p=f.x,s=f.y;var b=(p-(u=(f=w(u,c,-r)).x))/2,v=(s-(c=f.y))/2,d=b*b/(n*n)+v*v/(a*a);d>1&&(n*=d=Math.sqrt(d),a*=d);var m=n*n,x=a*a,y=(i==l?-1:1)*Math.sqrt(Math.abs((m*x-m*v*v-x*b*b)/(m*v*v+x*b*b)));y==1/0&&(y=1);var T=y*n*v/a+(p+u)/2,h=y*-a*b/n+(s+c)/2,E=Math.asin(((s-h)/a).toFixed(9)),k=Math.asin(((c-h)/a).toFixed(9));(E=p<T?O-E:E)<0&&(E=2*O+E),(k=u<T?O-k:k)<0&&(k=2*O+k),l&&E>k&&(E-=2*O),!l&&k>E&&(k-=2*O)}if(Math.abs(k-E)>e){var L=k,P=u,I=c;k=E+e*(l&&k>E?1:-1);var z=o(u=T+n*Math.cos(k),c=h+a*Math.sin(k),n,a,r,0,l,P,I,[k,L,T,h])}var F=Math.tan((k-E)/4),U=4/3*n*F,R=4/3*a*F,j=[2*p-(p+U*Math.sin(E)),2*s-(s-R*Math.cos(E)),u+U*Math.sin(k),c-R*Math.cos(k),u,c];if(g)return j;z&&(j=j.concat(z));for(var Z=0;Z<j.length;){var B=w(j[Z],j[Z+1],r);j[Z++]=B.x,j[Z++]=B.y}return j}function w(p,s,n){return{x:p*Math.cos(n)-s*Math.sin(n),y:p*Math.sin(n)+s*Math.cos(n)}}function _(p){return p*(O/180)}Y.exports=function(p){for(var s,n=[],a=0,r=0,i=0,l=0,u=null,c=null,g=0,f=0,b=0,v=p.length;b<v;b++){var d=p[b],m=d[0];switch(m){case"M":i=d[1],l=d[2];break;case"A":(d=o(g,f,d[1],d[2],_(d[3]),d[4],d[5],d[6],d[7])).unshift("C"),d.length>7&&(n.push(d.splice(0,7)),d.unshift("C"));break;case"S":var x=g,y=f;s!="C"&&s!="S"||(x+=x-a,y+=y-r),d=["C",x,y,d[1],d[2],d[3],d[4]];break;case"T":s=="Q"||s=="T"?(u=2*g-u,c=2*f-c):(u=g,c=f),d=A(g,f,u,c,d[1],d[2]);break;case"Q":u=d[1],c=d[2],d=A(g,f,d[1],d[2],d[3],d[4]);break;case"L":d=M(g,f,d[1],d[2]);break;case"H":d=M(g,f,d[1],f);break;case"V":d=M(g,f,g,d[1]);break;case"Z":d=M(g,f,i,l)}s=m,g=d[d.length-2],f=d[d.length-1],d.length>4?(a=d[d.length-4],r=d[d.length-3]):(a=g,r=f),n.push(d)}return n}},50896:function(Y){var O=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;Y.exports=function(){try{if(!Object.assign)return!1;var A=new String("abc");if(A[5]="de",Object.getOwnPropertyNames(A)[0]==="5")return!1;for(var o={},w=0;w<10;w++)o["_"+String.fromCharCode(w)]=w;if(Object.getOwnPropertyNames(o).map(function(p){return o[p]}).join("")!=="0123456789")return!1;var _={};return"abcdefghijklmnopqrst".split("").forEach(function(p){_[p]=p}),Object.keys(Object.assign({},_)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(A,o){for(var w,_,p=function(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}(A),s=1;s<arguments.length;s++){for(var n in w=Object(arguments[s]))e.call(w,n)&&(p[n]=w[n]);if(O){_=O(w);for(var a=0;a<_.length;a++)M.call(w,_[a])&&(p[_[a]]=w[_[a]])}}return p}},76835:function(Y){var O=function(e){return e!=e};Y.exports=function(e,M){return e===0&&M===0?1/e==1/M:e===M||!(!O(e)||!O(M))}},39896:function(Y,O,e){var M=e(81288),A=e(57916),o=e(76835),w=e(66148),_=e(16408),p=A(w(),Object);M(p,{getPolyfill:w,implementation:o,shim:_}),Y.exports=p},66148:function(Y,O,e){var M=e(76835);Y.exports=function(){return typeof Object.is=="function"?Object.is:M}},16408:function(Y,O,e){var M=e(66148),A=e(81288);Y.exports=function(){var o=M();return A(Object,{is:o},{is:function(){return Object.is!==o}}),o}},32764:function(Y,O,e){var M;if(!Object.keys){var A=Object.prototype.hasOwnProperty,o=Object.prototype.toString,w=e(97344),_=Object.prototype.propertyIsEnumerable,p=!_.call({toString:null},"toString"),s=_.call(function(){},"prototype"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=function(l){var u=l.constructor;return u&&u.prototype===l},r={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},i=function(){if(typeof window>"u")return!1;for(var l in window)try{if(!r["$"+l]&&A.call(window,l)&&window[l]!==null&&typeof window[l]=="object")try{a(window[l])}catch{return!0}}catch{return!0}return!1}();M=function(l){var u=l!==null&&typeof l=="object",c=o.call(l)==="[object Function]",g=w(l),f=u&&o.call(l)==="[object String]",b=[];if(!u&&!c&&!g)throw new TypeError("Object.keys called on a non-object");var v=s&&c;if(f&&l.length>0&&!A.call(l,0))for(var d=0;d<l.length;++d)b.push(String(d));if(g&&l.length>0)for(var m=0;m<l.length;++m)b.push(String(m));else for(var x in l)v&&x==="prototype"||!A.call(l,x)||b.push(String(x));if(p)for(var y=function(h){if(typeof window>"u"||!i)return a(h);try{return a(h)}catch{return!1}}(l),T=0;T<n.length;++T)y&&n[T]==="constructor"||!A.call(l,n[T])||b.push(n[T]);return b}}Y.exports=M},41820:function(Y,O,e){var M=Array.prototype.slice,A=e(97344),o=Object.keys,w=o?function(p){return o(p)}:e(32764),_=Object.keys;w.shim=function(){if(Object.keys){var p=function(){var s=Object.keys(arguments);return s&&s.length===arguments.length}(1,2);p||(Object.keys=function(s){return A(s)?_(M.call(s)):_(s)})}else Object.keys=w;return Object.keys||w},Y.exports=w},97344:function(Y){var O=Object.prototype.toString;Y.exports=function(e){var M=O.call(e),A=M==="[object Arguments]";return A||(A=M!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&O.call(e.callee)==="[object Function]"),A}},32868:function(Y){function O(A,o){if(typeof A!="string")return[A];var w=[A];typeof o=="string"||Array.isArray(o)?o={brackets:o}:o||(o={});var _=o.brackets?Array.isArray(o.brackets)?o.brackets:[o.brackets]:["{}","[]","()"],p=o.escape||"___",s=!!o.flat;_.forEach(function(a){var r=new RegExp(["\\",a[0],"[^\\",a[0],"\\",a[1],"]*\\",a[1]].join("")),i=[];function l(u,c,g){var f=w.push(u.slice(a[0].length,-a[1].length))-1;return i.push(f),p+f+p}w.forEach(function(u,c){for(var g,f=0;u!=g;)if(g=u,u=u.replace(r,l),f++>1e4)throw Error("References have circular dependency. Please, check them.");w[c]=u}),i=i.reverse(),w=w.map(function(u){return i.forEach(function(c){u=u.replace(new RegExp("(\\"+p+c+"\\"+p+")","g"),a[0]+"$1"+a[1])}),u})});var n=new RegExp("\\"+p+"([0-9]+)\\"+p);return s?w:function a(r,i,l){for(var u,c=[],g=0;u=n.exec(r);){if(g++>1e4)throw Error("Circular references in parenthesis");c.push(r.slice(0,u.index)),c.push(a(i[u[1]],i)),r=r.slice(u.index+u[0].length)}return c.push(r),c}(w[0],w)}function e(A,o){if(o&&o.flat){var w,_=o&&o.escape||"___",p=A[0];if(!p)return"";for(var s=new RegExp("\\"+_+"([0-9]+)\\"+_),n=0;p!=w;){if(n++>1e4)throw Error("Circular references in "+A);w=p,p=p.replace(s,a)}return p}return A.reduce(function r(i,l){return Array.isArray(l)&&(l=l.reduce(r,"")),i+l},"");function a(r,i){if(A[i]==null)throw Error("Reference "+i+"is undefined");return A[i]}}function M(A,o){return Array.isArray(A)?e(A,o):O(A,o)}M.parse=O,M.stringify=e,Y.exports=M},51160:function(Y,O,e){var M=e(55616);Y.exports=function(A){var o;return arguments.length>1&&(A=arguments),typeof A=="string"?A=A.split(/\s/).map(parseFloat):typeof A=="number"&&(A=[A]),A.length&&typeof A[0]=="number"?o=A.length===1?{width:A[0],height:A[0],x:0,y:0}:A.length===2?{width:A[0],height:A[1],x:0,y:0}:{x:A[0],y:A[1],width:A[2]-A[0]||0,height:A[3]-A[1]||0}:A&&(o={x:(A=M(A,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:A.top||0},A.width==null?A.right?o.width=A.right-o.x:o.width=0:o.width=A.width,A.height==null?A.bottom?o.height=A.bottom-o.y:o.height=0:o.height=A.height),o}},21984:function(Y){Y.exports=function(A){var o=[];return A.replace(e,function(w,_,p){var s=_.toLowerCase();for(p=function(n){var a=n.match(M);return a?a.map(Number):[]}(p),s=="m"&&p.length>2&&(o.push([_].concat(p.splice(0,2))),s="l",_=_=="m"?"l":"L");;){if(p.length==O[s])return p.unshift(_),o.push(p);if(p.length<O[s])throw new Error("malformed path data");o.push([_].concat(p.splice(0,O[s])))}}),o};var O={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/gi,M=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},65819:function(Y){Y.exports=function(O,e){e||(e=[0,""]),O=String(O);var M=parseFloat(O,10);return e[0]=M,e[1]=O.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},41984:function(Y,O,e){var M=e(4168);(function(){var A,o,w,_,p,s;typeof performance<"u"&&performance!==null&&performance.now?Y.exports=function(){return performance.now()}:M!=null&&M.hrtime?(Y.exports=function(){return(A()-p)/1e6},o=M.hrtime,_=(A=function(){var n;return 1e9*(n=o())[0]+n[1]})(),s=1e9*M.uptime(),p=_-s):Date.now?(Y.exports=function(){return Date.now()-w},w=Date.now()):(Y.exports=function(){return new Date().getTime()-w},w=new Date().getTime())}).call(this)},55616:function(Y){Y.exports=function(M,A,o){var w,_,p={};if(typeof A=="string"&&(A=e(A)),Array.isArray(A)){var s={};for(_=0;_<A.length;_++)s[A[_]]=!0;A=s}for(w in A)A[w]=e(A[w]);var n={};for(w in A){var a=A[w];if(Array.isArray(a))for(_=0;_<a.length;_++){var r=a[_];if(o&&(n[r]=!0),r in M){if(p[w]=M[r],o)for(var i=_;i<a.length;i++)n[a[i]]=!0;break}}else w in M&&(A[w]&&(p[w]=M[w]),o&&(n[w]=!0))}if(o)for(w in M)n[w]||(p[w]=M[w]);return p};var O={};function e(M){return O[M]?O[M]:(typeof M=="string"&&(M=O[M]=M.split(/\s*,\s*|\s+/)),M)}},61456:function(Y){Y.exports=function(O,e,M,A){var o=O[0],w=O[1],_=!1;M===void 0&&(M=0),A===void 0&&(A=e.length);for(var p=A-M,s=0,n=p-1;s<p;n=s++){var a=e[s+M][0],r=e[s+M][1],i=e[n+M][0],l=e[n+M][1];r>w!=l>w&&o<(i-a)*(w-r)/(l-r)+a&&(_=!_)}return _}},14756:function(Y,O,e){var M,A=e(7688),o=e(28648),w=e(72200),_=e(11403),p=e(82368),s=e(17792),n=!1,a=o();function r(i,l,u){var c=M.segments(i),g=M.segments(l),f=u(M.combine(c,g));return M.polygon(f)}M={buildLog:function(i){return i===!0?n=A():i===!1&&(n=!1),n!==!1&&n.list},epsilon:function(i){return a.epsilon(i)},segments:function(i){var l=w(!0,a,n);return i.regions.forEach(l.addRegion),{segments:l.calculate(i.inverted),inverted:i.inverted}},combine:function(i,l){return{combined:w(!1,a,n).calculate(i.segments,i.inverted,l.segments,l.inverted),inverted1:i.inverted,inverted2:l.inverted}},selectUnion:function(i){return{segments:p.union(i.combined,n),inverted:i.inverted1||i.inverted2}},selectIntersect:function(i){return{segments:p.intersect(i.combined,n),inverted:i.inverted1&&i.inverted2}},selectDifference:function(i){return{segments:p.difference(i.combined,n),inverted:i.inverted1&&!i.inverted2}},selectDifferenceRev:function(i){return{segments:p.differenceRev(i.combined,n),inverted:!i.inverted1&&i.inverted2}},selectXor:function(i){return{segments:p.xor(i.combined,n),inverted:i.inverted1!==i.inverted2}},polygon:function(i){return{regions:_(i.segments,a,n),inverted:i.inverted}},polygonFromGeoJSON:function(i){return s.toPolygon(M,i)},polygonToGeoJSON:function(i){return s.fromPolygon(M,a,i)},union:function(i,l){return r(i,l,M.selectUnion)},intersect:function(i,l){return r(i,l,M.selectIntersect)},difference:function(i,l){return r(i,l,M.selectDifference)},differenceRev:function(i,l){return r(i,l,M.selectDifferenceRev)},xor:function(i,l){return r(i,l,M.selectXor)}},typeof window=="object"&&(window.PolyBool=M),Y.exports=M},7688:function(Y){Y.exports=function(){var O,e=0,M=!1;function A(o,w){return O.list.push({type:o,data:w?JSON.parse(JSON.stringify(w)):void 0}),O}return O={list:[],segmentId:function(){return e++},checkIntersection:function(o,w){return A("check",{seg1:o,seg2:w})},segmentChop:function(o,w){return A("div_seg",{seg:o,pt:w}),A("chop",{seg:o,pt:w})},statusRemove:function(o){return A("pop_seg",{seg:o})},segmentUpdate:function(o){return A("seg_update",{seg:o})},segmentNew:function(o,w){return A("new_seg",{seg:o,primary:w})},segmentRemove:function(o){return A("rem_seg",{seg:o})},tempStatus:function(o,w,_){return A("temp_status",{seg:o,above:w,below:_})},rewind:function(o){return A("rewind",{seg:o})},status:function(o,w,_){return A("status",{seg:o,above:w,below:_})},vert:function(o){return o===M?O:(M=o,A("vert",{x:o}))},log:function(o){return typeof o!="string"&&(o=JSON.stringify(o,!1,"  ")),A("log",{txt:o})},reset:function(){return A("reset")},selected:function(o){return A("selected",{segs:o})},chainStart:function(o){return A("chain_start",{seg:o})},chainRemoveHead:function(o,w){return A("chain_rem_head",{index:o,pt:w})},chainRemoveTail:function(o,w){return A("chain_rem_tail",{index:o,pt:w})},chainNew:function(o,w){return A("chain_new",{pt1:o,pt2:w})},chainMatch:function(o){return A("chain_match",{index:o})},chainClose:function(o){return A("chain_close",{index:o})},chainAddHead:function(o,w){return A("chain_add_head",{index:o,pt:w})},chainAddTail:function(o,w){return A("chain_add_tail",{index:o,pt:w})},chainConnect:function(o,w){return A("chain_con",{index1:o,index2:w})},chainReverse:function(o){return A("chain_rev",{index:o})},chainJoin:function(o,w){return A("chain_join",{index1:o,index2:w})},done:function(){return A("done")}}}},28648:function(Y){Y.exports=function(O){typeof O!="number"&&(O=1e-10);var e={epsilon:function(M){return typeof M=="number"&&(O=M),O},pointAboveOrOnLine:function(M,A,o){var w=A[0],_=A[1],p=o[0],s=o[1],n=M[0];return(p-w)*(M[1]-_)-(s-_)*(n-w)>=-O},pointBetween:function(M,A,o){var w=M[1]-A[1],_=o[0]-A[0],p=M[0]-A[0],s=o[1]-A[1],n=p*_+w*s;return!(n<O||n-(_*_+s*s)>-O)},pointsSameX:function(M,A){return Math.abs(M[0]-A[0])<O},pointsSameY:function(M,A){return Math.abs(M[1]-A[1])<O},pointsSame:function(M,A){return e.pointsSameX(M,A)&&e.pointsSameY(M,A)},pointsCompare:function(M,A){return e.pointsSameX(M,A)?e.pointsSameY(M,A)?0:M[1]<A[1]?-1:1:M[0]<A[0]?-1:1},pointsCollinear:function(M,A,o){var w=M[0]-A[0],_=M[1]-A[1],p=A[0]-o[0],s=A[1]-o[1];return Math.abs(w*s-p*_)<O},linesIntersect:function(M,A,o,w){var _=A[0]-M[0],p=A[1]-M[1],s=w[0]-o[0],n=w[1]-o[1],a=_*n-p*s;if(Math.abs(a)<O)return!1;var r=M[0]-o[0],i=M[1]-o[1],l=(s*i-n*r)/a,u=(_*i-p*r)/a,c={alongA:0,alongB:0,pt:[M[0]+l*_,M[1]+l*p]};return c.alongA=l<=-O?-2:l<O?-1:l-1<=-O?0:l-1<O?1:2,c.alongB=u<=-O?-2:u<O?-1:u-1<=-O?0:u-1<O?1:2,c},pointInsideRegion:function(M,A){for(var o=M[0],w=M[1],_=A[A.length-1][0],p=A[A.length-1][1],s=!1,n=0;n<A.length;n++){var a=A[n][0],r=A[n][1];r-w>O!=p-w>O&&(_-a)*(w-r)/(p-r)+a-o>O&&(s=!s),_=a,p=r}return s}};return e}},17792:function(Y){var O={toPolygon:function(e,M){function A(_){if(_.length<=0)return e.segments({inverted:!1,regions:[]});function p(a){var r=a.slice(0,a.length-1);return e.segments({inverted:!1,regions:[r]})}for(var s=p(_[0]),n=1;n<_.length;n++)s=e.selectDifference(e.combine(s,p(_[n])));return s}if(M.type==="Polygon")return e.polygon(A(M.coordinates));if(M.type==="MultiPolygon"){for(var o=e.segments({inverted:!1,regions:[]}),w=0;w<M.coordinates.length;w++)o=e.selectUnion(e.combine(o,A(M.coordinates[w])));return e.polygon(o)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,M,A){function o(u,c){return M.pointInsideRegion([.5*(u[0][0]+u[1][0]),.5*(u[0][1]+u[1][1])],c)}function w(u){return{region:u,children:[]}}A=e.polygon(e.segments(A));var _=w(null);function p(u,c){for(var g=0;g<u.children.length;g++)if(o(c,(b=u.children[g]).region))return void p(b,c);var f=w(c);for(g=0;g<u.children.length;g++){var b;o((b=u.children[g]).region,c)&&(f.children.push(b),u.children.splice(g,1),g--)}u.children.push(f)}for(var s=0;s<A.regions.length;s++){var n=A.regions[s];n.length<3||p(_,n)}function a(u,c){for(var g=0,f=u[u.length-1][0],b=u[u.length-1][1],v=[],d=0;d<u.length;d++){var m=u[d][0],x=u[d][1];v.push([m,x]),g+=x*f-m*b,f=m,b=x}return g<0!==c&&v.reverse(),v.push([v[0][0],v[0][1]]),v}var r=[];function i(u){var c=[a(u.region,!1)];r.push(c);for(var g=0;g<u.children.length;g++)c.push(l(u.children[g]))}function l(u){for(var c=0;c<u.children.length;c++)i(u.children[c]);return a(u.region,!0)}for(s=0;s<_.children.length;s++)i(_.children[s]);return r.length<=0?{type:"Polygon",coordinates:[]}:r.length==1?{type:"Polygon",coordinates:r[0]}:{type:"MultiPolygon",coordinates:r}}};Y.exports=O},72200:function(Y,O,e){var M=e(48088);Y.exports=function(A,o,w){function _(i,l,u){return{id:w?w.segmentId():-1,start:i,end:l,myFill:{above:u.myFill.above,below:u.myFill.below},otherFill:null}}var p=M.create();function s(i,l){p.insertBefore(i,function(u){return c=i.isStart,g=i.pt,f=l,b=u.isStart,v=u.pt,d=u.other.pt,((m=o.pointsCompare(g,v))!==0?m:o.pointsSame(f,d)?0:c!==b?c?1:-1:o.pointAboveOrOnLine(f,b?v:d,b?d:v)?1:-1)<0;var c,g,f,b,v,d,m})}function n(i,l){var u=function(c,g){var f=M.node({isStart:!0,pt:c.start,seg:c,primary:g,other:null,status:null});return s(f,c.end),f}(i,l);return function(c,g,f){var b=M.node({isStart:!1,pt:g.end,seg:g,primary:f,other:c,status:null});c.other=b,s(b,c.pt)}(u,i,l),u}function a(i,l){var u=_(l,i.seg.end,i.seg);return function(c,g){w&&w.segmentChop(c.seg,g),c.other.remove(),c.seg.end=g,c.other.pt=g,s(c.other,c.pt)}(i,l),n(u,i.primary)}function r(i,l){var u=M.create();function c(L){return u.findTransition(function(P){var I,z,F,U,R,j;return I=L,z=P.ev,F=I.seg.start,U=I.seg.end,R=z.seg.start,j=z.seg.end,(o.pointsCollinear(F,R,j)?o.pointsCollinear(U,R,j)||o.pointAboveOrOnLine(U,R,j)?1:-1:o.pointAboveOrOnLine(F,R,j)?1:-1)>0})}function g(L,P){var I=L.seg,z=P.seg,F=I.start,U=I.end,R=z.start,j=z.end;w&&w.checkIntersection(I,z);var Z=o.linesIntersect(F,U,R,j);if(Z===!1){if(!o.pointsCollinear(F,U,R)||o.pointsSame(F,j)||o.pointsSame(U,R))return!1;var B=o.pointsSame(F,R),q=o.pointsSame(U,j);if(B&&q)return P;var V=!B&&o.pointBetween(F,R,j),ne=!q&&o.pointBetween(U,R,j);if(B)return ne?a(P,U):a(L,j),P;V&&(q||(ne?a(P,U):a(L,j)),a(P,F))}else Z.alongA===0&&(Z.alongB===-1?a(L,R):Z.alongB===0?a(L,Z.pt):Z.alongB===1&&a(L,j)),Z.alongB===0&&(Z.alongA===-1?a(P,F):Z.alongA===0?a(P,Z.pt):Z.alongA===1&&a(P,U));return!1}for(var f=[];!p.isEmpty();){var b=p.getHead();if(w&&w.vert(b.pt[0]),b.isStart){let L=function(){if(d){var P=g(b,d);if(P)return P}return!!m&&g(b,m)};var k=L;w&&w.segmentNew(b.seg,b.primary);var v=c(b),d=v.before?v.before.ev:null,m=v.after?v.after.ev:null;w&&w.tempStatus(b.seg,!!d&&d.seg,!!m&&m.seg);var x,y,T=L();if(T&&(A?(y=b.seg.myFill.below===null||b.seg.myFill.above!==b.seg.myFill.below)&&(T.seg.myFill.above=!T.seg.myFill.above):T.seg.otherFill=b.seg.myFill,w&&w.segmentUpdate(T.seg),b.other.remove(),b.remove()),p.getHead()!==b){w&&w.rewind(b.seg);continue}A?(y=b.seg.myFill.below===null||b.seg.myFill.above!==b.seg.myFill.below,b.seg.myFill.below=m?m.seg.myFill.above:i,b.seg.myFill.above=y?!b.seg.myFill.below:b.seg.myFill.below):b.seg.otherFill===null&&(x=m?b.primary===m.primary?m.seg.otherFill.above:m.seg.myFill.above:b.primary?l:i,b.seg.otherFill={above:x,below:x}),w&&w.status(b.seg,!!d&&d.seg,!!m&&m.seg),b.other.status=v.insert(M.node({ev:b}))}else{var h=b.status;if(h===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(u.exists(h.prev)&&u.exists(h.next)&&g(h.prev.ev,h.next.ev),w&&w.statusRemove(h.ev.seg),h.remove(),!b.primary){var E=b.seg.myFill;b.seg.myFill=b.seg.otherFill,b.seg.otherFill=E}f.push(b.seg)}p.getHead().remove()}return w&&w.done(),f}return A?{addRegion:function(i){for(var l,u,c,g=i[i.length-1],f=0;f<i.length;f++){l=g,g=i[f];var b=o.pointsCompare(l,g);b!==0&&n((u=b<0?l:g,c=b<0?g:l,{id:w?w.segmentId():-1,start:u,end:c,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(i){return r(i,!1)}}:{calculate:function(i,l,u,c){return i.forEach(function(g){n(_(g.start,g.end,g),!0)}),u.forEach(function(g){n(_(g.start,g.end,g),!1)}),r(l,c)}}}},48088:function(Y){Y.exports={create:function(){var O={root:{root:!0,next:null},exists:function(e){return e!==null&&e!==O.root},isEmpty:function(){return O.root.next===null},getHead:function(){return O.root.next},insertBefore:function(e,M){for(var A=O.root,o=O.root.next;o!==null;){if(M(o))return e.prev=o.prev,e.next=o,o.prev.next=e,void(o.prev=e);A=o,o=o.next}A.next=e,e.prev=A,e.next=null},findTransition:function(e){for(var M=O.root,A=O.root.next;A!==null&&!e(A);)M=A,A=A.next;return{before:M===O.root?null:M,after:A,insert:function(o){return o.prev=M,o.next=A,M.next=o,A!==null&&(A.prev=o),o}}}};return O},node:function(O){return O.prev=null,O.next=null,O.remove=function(){O.prev.next=O.next,O.next&&(O.next.prev=O.prev),O.prev=null,O.next=null},O}}},11403:function(Y){Y.exports=function(O,e,M){var A=[],o=[];return O.forEach(function(w){var _=w.start,p=w.end;if(e.pointsSame(_,p))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{M&&M.chainStart(w);for(var s={index:0,matches_head:!1,matches_pt1:!1},n={index:0,matches_head:!1,matches_pt1:!1},a=s,r=0;r<A.length;r++){var i=(f=A[r])[0],l=(f[1],f[f.length-1]);if(f[f.length-2],e.pointsSame(i,_)){if(h(r,!0,!0))break}else if(e.pointsSame(i,p)){if(h(r,!0,!1))break}else if(e.pointsSame(l,_)){if(h(r,!1,!0))break}else if(e.pointsSame(l,p)&&h(r,!1,!1))break}if(a===s)return A.push([_,p]),void(M&&M.chainNew(_,p));if(a===n){M&&M.chainMatch(s.index);var u=s.index,c=s.matches_pt1?p:_,g=s.matches_head,f=A[u],b=g?f[0]:f[f.length-1],v=g?f[1]:f[f.length-2],d=g?f[f.length-1]:f[0],m=g?f[f.length-2]:f[1];return e.pointsCollinear(v,b,c)&&(g?(M&&M.chainRemoveHead(s.index,c),f.shift()):(M&&M.chainRemoveTail(s.index,c),f.pop()),b=v),e.pointsSame(d,c)?(A.splice(u,1),e.pointsCollinear(m,d,b)&&(g?(M&&M.chainRemoveTail(s.index,b),f.pop()):(M&&M.chainRemoveHead(s.index,b),f.shift())),M&&M.chainClose(s.index),void o.push(f)):void(g?(M&&M.chainAddHead(s.index,c),f.unshift(c)):(M&&M.chainAddTail(s.index,c),f.push(c)))}var x=s.index,y=n.index;M&&M.chainConnect(x,y);var T=A[x].length<A[y].length;s.matches_head?n.matches_head?T?(E(x),k(x,y)):(E(y),k(y,x)):k(y,x):n.matches_head?k(x,y):T?(E(x),k(y,x)):(E(y),k(x,y))}function h(L,P,I){return a.index=L,a.matches_head=P,a.matches_pt1=I,a===s?(a=n,!1):(a=null,!0)}function E(L){M&&M.chainReverse(L),A[L].reverse()}function k(L,P){var I=A[L],z=A[P],F=I[I.length-1],U=I[I.length-2],R=z[0],j=z[1];e.pointsCollinear(U,F,R)&&(M&&M.chainRemoveTail(L,F),I.pop(),F=U),e.pointsCollinear(F,R,j)&&(M&&M.chainRemoveHead(P,R),z.shift()),M&&M.chainJoin(L,P),A[L]=I.concat(z),A.splice(P,1)}}),o}},82368:function(Y){function O(M,A,o){var w=[];return M.forEach(function(_){var p=(_.myFill.above?8:0)+(_.myFill.below?4:0)+(_.otherFill&&_.otherFill.above?2:0)+(_.otherFill&&_.otherFill.below?1:0);A[p]!==0&&w.push({id:o?o.segmentId():-1,start:_.start,end:_.end,myFill:{above:A[p]===1,below:A[p]===2},otherFill:null})}),o&&o.selected(w),w}var e={union:function(M,A){return O(M,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],A)},intersect:function(M,A){return O(M,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],A)},difference:function(M,A){return O(M,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],A)},differenceRev:function(M,A){return O(M,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],A)},xor:function(M,A){return O(M,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],A)}};Y.exports=e},9696:function(Y,O,e){var M=e(29936).Transform,A=e(55619);function o(){M.call(this,{readableObjectMode:!0})}function w(_,p,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=_,p&&(this.code=p),s&&(this.statusCode=s)}o.prototype=Object.create(M.prototype),o.prototype.constructor=o,A(o.prototype),O.gS=function(_,p,s){for(var n=p,a=0;a<s.length;)if(_[n++]!==s[a++])return!1;return!0},O.wR=function(_,p){var s=[],n=0;if(p&&p==="hex")for(;n<_.length;)s.push(parseInt(_.slice(n,n+2),16)),n+=2;else for(;n<_.length;n++)s.push(255&_.charCodeAt(n));return s},O.Bz=function(_,p){return _[p]|_[p+1]<<8},O.eW=function(_,p){return _[p+1]|_[p]<<8},O.st=function(_,p){return _[p]|_[p+1]<<8|_[p+2]<<16|16777216*_[p+3]},O.eI=function(_,p){return _[p+3]|_[p+2]<<8|_[p+1]<<16|16777216*_[p]},w.prototype=Object.create(Error.prototype),w.prototype.constructor=w},11688:function(Y){function O(A,o){var w=new Error(A);return w.code=o,w}function e(A){try{return decodeURIComponent(escape(A))}catch{return A}}function M(A,o,w){this.input=A.subarray(o,w),this.start=o;var _=String.fromCharCode.apply(null,this.input.subarray(0,4));if(_!=="II*\0"&&_!=="MM\0*")throw O("invalid TIFF signature","EBADDATA");this.big_endian=_[0]==="M"}M.prototype.each=function(A){this.aborted=!1;var o=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:o}];this.ifds_to_read.length>0&&!this.aborted;){var w=this.ifds_to_read.shift();w.offset&&this.scan_ifd(w.id,w.offset,A)}},M.prototype.read_uint16=function(A){var o=this.input;if(A+2>o.length)throw O("unexpected EOF","EBADDATA");return this.big_endian?256*o[A]+o[A+1]:o[A]+256*o[A+1]},M.prototype.read_uint32=function(A){var o=this.input;if(A+4>o.length)throw O("unexpected EOF","EBADDATA");return this.big_endian?16777216*o[A]+65536*o[A+1]+256*o[A+2]+o[A+3]:o[A]+256*o[A+1]+65536*o[A+2]+16777216*o[A+3]},M.prototype.is_subifd_link=function(A,o){return A===0&&o===34665||A===0&&o===34853||A===34665&&o===40965},M.prototype.exif_format_length=function(A){switch(A){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},M.prototype.exif_format_read=function(A,o){var w;switch(A){case 1:case 2:return this.input[o];case 6:return(w=this.input[o])|33554430*(128&w);case 3:return this.read_uint16(o);case 8:return(w=this.read_uint16(o))|131070*(32768&w);case 4:return this.read_uint32(o);case 9:return 0|this.read_uint32(o);default:return null}},M.prototype.scan_ifd=function(A,o,w){var _=this.read_uint16(o);o+=2;for(var p=0;p<_;p++){var s=this.read_uint16(o),n=this.read_uint16(o+2),a=this.read_uint32(o+4),r=this.exif_format_length(n),i=a*r,l=i<=4?o+8:this.read_uint32(o+8),u=!1;if(l+i>this.input.length)throw O("unexpected EOF","EBADDATA");for(var c=[],g=l,f=0;f<a;f++,g+=r){var b=this.exif_format_read(n,g);if(b===null){c=null;break}c.push(b)}if(Array.isArray(c)&&n===2&&(c=e(String.fromCharCode.apply(null,c)))&&c[c.length-1]==="\0"&&(c=c.slice(0,-1)),this.is_subifd_link(A,s)&&Array.isArray(c)&&Number.isInteger(c[0])&&c[0]>0&&(this.ifds_to_read.push({id:s,offset:c[0]}),u=!0),w({is_big_endian:this.big_endian,ifd:A,tag:s,format:n,count:a,entry_offset:o+this.start,data_length:i,data_offset:l+this.start,value:c,is_subifd_link:u})===!1)return void(this.aborted=!0);o+=12}A===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(o)})},Y.exports.ExifParser=M,Y.exports.get_orientation=function(A){var o=0;try{return new M(A,0,A.length).each(function(w){if(w.ifd===0&&w.tag===274&&Array.isArray(w.value))return o=w.value[0],!1}),o}catch{return-1}}},44600:function(Y,O,e){var M=e(9696).eW,A=e(9696).eI;function o(a,r){if(a.length<4+r)return null;var i=A(a,r);return a.length<i+r||i<8?null:{boxtype:String.fromCharCode.apply(null,a.slice(r+4,r+8)),data:a.slice(r+8,r+i),end:r+i}}function w(a,r){for(var i=0;;){var l=o(a,i);if(!l)break;switch(l.boxtype){case"ispe":r.sizes.push({width:A(l.data,4),height:A(l.data,8)});break;case"irot":r.transforms.push({type:"irot",value:3&l.data[0]});break;case"imir":r.transforms.push({type:"imir",value:1&l.data[0]})}i=l.end}}function _(a,r,i){for(var l=0,u=0;u<i;u++)l=256*l+(a[r+u]||0);return l}function p(a,r){for(var i=a[4]>>4&15,l=15&a[4],u=a[5]>>4&15,c=M(a,6),g=8,f=0;f<c;f++){var b=M(a,g),v=M(a,g+=2),d=_(a,g+=2,u),m=M(a,g+=u);if(g+=2,v===0&&m===1){var x=_(a,g,i),y=_(a,g+i,l);r.item_loc[b]={length:y,offset:x+d}}g+=m*(i+l)}}function s(a,r){for(var i=M(a,4),l=6,u=0;u<i;u++){var c=o(a,l);if(!c)break;if(c.boxtype==="infe"){for(var g=M(c.data,4),f="",b=8;b<c.data.length&&c.data[b];b++)f+=String.fromCharCode(c.data[b]);r.item_inf[f]=g}l=c.end}}function n(a,r){for(var i=0;;){var l=o(a,i);if(!l)break;l.boxtype==="ipco"&&w(l.data,r),i=l.end}}Y.exports.unbox=o,Y.exports.readSizeFromMeta=function(a){var r={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(b,v){for(var d=4;;){var m=o(b,d);if(!m)break;m.boxtype==="iprp"&&n(m.data,v),m.boxtype==="iloc"&&p(m.data,v),m.boxtype==="iinf"&&s(m.data,v),d=m.end}}(a,r),r.sizes.length){var i,l,u,c=(l=(i=r.sizes).reduce(function(b,v){return b.width>v.width||b.width===v.width&&b.height>v.height?b:v}),u=i.reduce(function(b,v){return b.height>v.height||b.height===v.height&&b.width>v.width?b:v}),l.width>u.height||l.width===u.height&&l.height>u.width?l:u),g=1;r.transforms.forEach(function(b){var v={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},d={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(b.type==="imir"&&(g=b.value===0?d[g]:v[g=v[g=d[g]]]),b.type==="irot")for(var m=0;m<b.value;m++)g=v[g]});var f=null;return r.item_inf.Exif&&(f=r.item_loc[r.item_inf.Exif]),{width:c.width,height:c.height,orientation:r.transforms.length?g:null,variants:r.sizes,exif_location:f}}},Y.exports.getMimeType=function(a){var r=String.fromCharCode.apply(null,a.slice(0,4)),i={};i[r]=!0;for(var l=8;l<a.length;l+=4)i[String.fromCharCode.apply(null,a.slice(l,l+4))]=!0;if(i.mif1||i.msf1||i.miaf)return r==="avif"||r==="avis"||r==="avio"?{type:"avif",mime:"image/avif"}:r==="heic"||r==="heix"?{type:"heic",mime:"image/heic"}:r==="hevc"||r==="hevx"?{type:"heic",mime:"image/heic-sequence"}:i.avif||i.avis?{type:"avif",mime:"image/avif"}:i.heic||i.heix||i.hevc||i.hevx||i.heis?i.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},40528:function(Y,O,e){var M=e(9696).wR,A=e(9696).gS,o=e(9696).eI,w=e(44600),_=e(11688),p=M("ftyp");Y.exports=function(s){if(A(s,4,p)){var n=w.unbox(s,0);if(n){var a=w.getMimeType(n.data);if(a){for(var r,i=n.end;;){var l=w.unbox(s,i);if(!l)break;if(i=l.end,l.boxtype==="mdat")return;if(l.boxtype==="meta"){r=l.data;break}}if(r){var u=w.readSizeFromMeta(r);if(u){var c={width:u.width,height:u.height,type:a.type,mime:a.mime,wUnits:"px",hUnits:"px"};if(u.variants.length>1&&(c.variants=u.variants),u.orientation&&(c.orientation=u.orientation),u.exif_location&&u.exif_location.offset+u.exif_location.length<=s.length){var g=o(s,u.exif_location.offset),f=s.slice(u.exif_location.offset+g+4,u.exif_location.offset+u.exif_location.length),b=_.get_orientation(f);b>0&&(c.orientation=b)}return c}}}}}}},38728:function(Y,O,e){var M=e(9696).wR,A=e(9696).gS,o=e(9696).Bz,w=M("BM");Y.exports=function(_){if(!(_.length<26)&&A(_,0,w))return{width:o(_,18),height:o(_,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},5588:function(Y,O,e){var M=e(9696).wR,A=e(9696).gS,o=e(9696).Bz,w=M("GIF87a"),_=M("GIF89a");Y.exports=function(p){if(!(p.length<10)&&(A(p,0,w)||A(p,0,_)))return{width:o(p,6),height:o(p,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},41924:function(Y,O,e){var M=e(9696).Bz;Y.exports=function(A){var o=M(A,0),w=M(A,2),_=M(A,4);if(o===0&&w===1&&_){for(var p=[],s={width:0,height:0},n=0;n<_;n++){var a=A[6+16*n]||256,r=A[6+16*n+1]||256,i={width:a,height:r};p.push(i),(a>s.width||r>s.height)&&(s=i)}return{width:s.width,height:s.height,variants:p,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},87968:function(Y,O,e){var M=e(9696).eW,A=e(9696).wR,o=e(9696).gS,w=e(11688),_=A("Exif\0\0");Y.exports=function(p){if(!(p.length<2)&&p[0]===255&&p[1]===216&&p[2]===255)for(var s=2;;){for(;;){if(p.length-s<2)return;if(p[s++]===255)break}for(var n,a,r=p[s++];r===255;)r=p[s++];if(208<=r&&r<=217||r===1)n=0;else{if(!(192<=r&&r<=254)||p.length-s<2)return;n=M(p,s)-2,s+=2}if(r===217||r===218)return;if(r===225&&n>=10&&o(p,s,_)&&(a=w.get_orientation(p.slice(s+6,s+n))),n>=5&&192<=r&&r<=207&&r!==196&&r!==200&&r!==204){if(p.length-s<n)return;var i={width:M(p,s+3),height:M(p,s+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return a>0&&(i.orientation=a),i}s+=n}}},37276:function(Y,O,e){var M=e(9696).wR,A=e(9696).gS,o=e(9696).eI,w=M(`PNG\r

`),_=M("IHDR");Y.exports=function(p){if(!(p.length<24)&&A(p,0,w)&&A(p,12,_))return{width:o(p,16),height:o(p,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},90328:function(Y,O,e){var M=e(9696).wR,A=e(9696).gS,o=e(9696).eI,w=M("8BPS\0");Y.exports=function(_){if(!(_.length<22)&&A(_,0,w))return{width:o(_,18),height:o(_,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},16024:function(Y){function O(s){return typeof s=="number"&&isFinite(s)&&s>0}var e=/<[-_.:a-zA-Z0-9][^>]*>/,M=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,A=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,o=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,w=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,_=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function p(s){return _.test(s)?s.match(_)[0]:"px"}Y.exports=function(s){if(function(d){var m,x=0,y=d.length;for(d[0]===239&&d[1]===187&&d[2]===191&&(x=3);x<y&&((m=d[x])===32||m===9||m===13||m===10);)x++;return x!==y&&d[x]===60}(s)){for(var n="",a=0;a<s.length;a++)n+=String.fromCharCode(s[a]);var r=(n.match(e)||[""])[0];if(M.test(r)){var i=function(d){var m=d.match(A),x=d.match(o),y=d.match(w);return{width:m&&(m[1]||m[2]),height:x&&(x[1]||x[2]),viewbox:y&&(y[1]||y[2])}}(r),l=parseFloat(i.width),u=parseFloat(i.height);if(i.width&&i.height)return!O(l)||!O(u)?void 0:{width:l,height:u,type:"svg",mime:"image/svg+xml",wUnits:p(i.width),hUnits:p(i.height)};var c=(i.viewbox||"").split(" "),g={width:c[2],height:c[3]},f=parseFloat(g.width),b=parseFloat(g.height);if(O(f)&&O(b)&&p(g.width)===p(g.height)){var v=f/b;return i.width?O(l)?{width:l,height:l/v,type:"svg",mime:"image/svg+xml",wUnits:p(i.width),hUnits:p(i.width)}:void 0:i.height?O(u)?{width:u*v,height:u,type:"svg",mime:"image/svg+xml",wUnits:p(i.height),hUnits:p(i.height)}:void 0:{width:f,height:b,type:"svg",mime:"image/svg+xml",wUnits:p(g.width),hUnits:p(g.height)}}}}}},98792:function(Y,O,e){var M=e(9696).wR,A=e(9696).gS,o=e(9696).Bz,w=e(9696).eW,_=e(9696).st,p=e(9696).eI,s=M("II*\0"),n=M("MM\0*");function a(l,u,c){return c?w(l,u):o(l,u)}function r(l,u,c){return c?p(l,u):_(l,u)}function i(l,u,c){var g=a(l,u+2,c);return r(l,u+4,c)!==1||g!==3&&g!==4?null:g===3?a(l,u+8,c):r(l,u+8,c)}Y.exports=function(l){if(!(l.length<8)&&(A(l,0,s)||A(l,0,n))){var u=l[0]===77,c=r(l,4,u)-8;if(!(c<0)){var g=c+8;if(!(l.length-g<2)){var f=12*a(l,g+0,u);if(!(f<=0||(g+=2,l.length-g<f))){var b,v,d,m;for(b=0;b<f;b+=12)(m=a(l,g+b,u))===256?v=i(l,g+b,u):m===257&&(d=i(l,g+b,u));return v&&d?{width:v,height:d,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},20704:function(Y,O,e){var M=e(9696).wR,A=e(9696).gS,o=e(9696).Bz,w=e(9696).st,_=e(11688),p=M("RIFF"),s=M("WEBP");function n(i,l){if(i[l+3]===157&&i[l+4]===1&&i[l+5]===42)return{width:16383&o(i,l+6),height:16383&o(i,l+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function a(i,l){if(i[l]===47){var u=w(i,l+1);return{width:1+(16383&u),height:1+(u>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function r(i,l){return{width:1+(i[l+6]<<16|i[l+5]<<8|i[l+4]),height:1+(i[l+9]<<l|i[l+8]<<8|i[l+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}Y.exports=function(i){if(!(i.length<16)&&(A(i,0,p)||A(i,8,s))){var l=12,u=null,c=0,g=w(i,4)+8;if(!(g>i.length)){for(;l+8<g;)if(i[l]!==0){var f=String.fromCharCode.apply(null,i.slice(l,l+4)),b=w(i,l+4);f==="VP8 "&&b>=10?u=u||n(i,l+8):f==="VP8L"&&b>=9?u=u||a(i,l+8):f==="VP8X"&&b>=10?u=u||r(i,l+8):f==="EXIF"&&(c=_.get_orientation(i.slice(l+8,l+8+b)),l=1/0),l+=8+b}else l++;if(u)return c>0&&(u.orientation=c),u}}}},87480:function(Y,O,e){Y.exports={avif:e(40528),bmp:e(38728),gif:e(5588),ico:e(41924),jpeg:e(87968),png:e(37276),psd:e(90328),svg:e(16024),tiff:e(98792),webp:e(20704)}},19480:function(Y,O,e){var M=e(87480);Y.exports=function(A){return function(o){for(var w=Object.keys(M),_=0;_<w.length;_++){var p=M[w[_]](o);if(p)return p}return null}(A)},Y.exports.parsers=M},4168:function(Y){var O,e,M=Y.exports={};function A(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function w(u){if(O===setTimeout)return setTimeout(u,0);if((O===A||!O)&&setTimeout)return O=setTimeout,setTimeout(u,0);try{return O(u,0)}catch{try{return O.call(null,u,0)}catch{return O.call(this,u,0)}}}(function(){try{O=typeof setTimeout=="function"?setTimeout:A}catch{O=A}try{e=typeof clearTimeout=="function"?clearTimeout:o}catch{e=o}})();var _,p=[],s=!1,n=-1;function a(){s&&_&&(s=!1,_.length?p=_.concat(p):n=-1,p.length&&r())}function r(){if(!s){var u=w(a);s=!0;for(var c=p.length;c;){for(_=p,p=[];++n<c;)_&&_[n].run();n=-1,c=p.length}_=null,s=!1,function(g){if(e===clearTimeout)return clearTimeout(g);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(g);try{return e(g)}catch{try{return e.call(null,g)}catch{return e.call(this,g)}}}(u)}}function i(u,c){this.fun=u,this.array=c}function l(){}M.nextTick=function(u){var c=new Array(arguments.length-1);if(arguments.length>1)for(var g=1;g<arguments.length;g++)c[g-1]=arguments[g];p.push(new i(u,c)),p.length!==1||s||w(r)},i.prototype.run=function(){this.fun.apply(null,this.array)},M.title="browser",M.browser=!0,M.env={},M.argv=[],M.version="",M.versions={},M.on=l,M.addListener=l,M.once=l,M.off=l,M.removeListener=l,M.removeAllListeners=l,M.emit=l,M.prependListener=l,M.prependOnceListener=l,M.listeners=function(u){return[]},M.binding=function(u){throw new Error("process.binding is not supported")},M.cwd=function(){return"/"},M.chdir=function(u){throw new Error("process.chdir is not supported")},M.umask=function(){return 0}},3951:function(Y,O,e){for(var M=e(41984),A=typeof window>"u"?e.g:window,o=["moz","webkit"],w="AnimationFrame",_=A["request"+w],p=A["cancel"+w]||A["cancelRequest"+w],s=0;!_&&s<o.length;s++)_=A[o[s]+"Request"+w],p=A[o[s]+"Cancel"+w]||A[o[s]+"CancelRequest"+w];if(!_||!p){var n=0,a=0,r=[];_=function(i){if(r.length===0){var l=M(),u=Math.max(0,16.666666666666668-(l-n));n=u+l,setTimeout(function(){var c=r.slice(0);r.length=0;for(var g=0;g<c.length;g++)if(!c[g].cancelled)try{c[g].callback(n)}catch(f){setTimeout(function(){throw f},0)}},Math.round(u))}return r.push({handle:++a,callback:i,cancelled:!1}),a},p=function(i){for(var l=0;l<r.length;l++)r[l].handle===i&&(r[l].cancelled=!0)}}Y.exports=function(i){return _.call(A,i)},Y.exports.cancel=function(){p.apply(A,arguments)},Y.exports.polyfill=function(i){i||(i=A),i.requestAnimationFrame=_,i.cancelAnimationFrame=p}},24544:function(Y,O,e){var M=e(76752),A=e(72160),o=e(45223),w=e(55616),_=e(50896),p=e(47520),s=e(37816),n=s.float32,a=s.fract32;Y.exports=function(i,l){if(typeof i=="function"?(l||(l={}),l.regl=i):l=i,l.length&&(l.positions=l),!(i=l.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var u,c,g,f,b,v,d=i._gl,m={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},x=[];return f=i.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),c=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),g=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),b=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),v=i.buffer({usage:"static",type:"float",data:r}),E(l),u=i({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:i.prop("range"),lineWidth:i.prop("lineWidth"),capSize:i.prop("capSize"),opacity:i.prop("opacity"),scale:i.prop("scale"),translate:i.prop("translate"),scaleFract:i.prop("scaleFract"),translateFract:i.prop("translateFract"),viewport:function(L,P){return[P.viewport.x,P.viewport.y,L.viewportWidth,L.viewportHeight]}},attributes:{color:{buffer:f,offset:function(L,P){return 4*P.offset},divisor:1},position:{buffer:c,offset:function(L,P){return 8*P.offset},divisor:1},positionFract:{buffer:g,offset:function(L,P){return 8*P.offset},divisor:1},error:{buffer:b,offset:function(L,P){return 16*P.offset},divisor:1},direction:{buffer:v,stride:24,offset:0},lineOffset:{buffer:v,stride:24,offset:8},capOffset:{buffer:v,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:i.prop("viewport")},viewport:i.prop("viewport"),stencil:!1,instances:i.prop("count"),count:r.length}),_(y,{update:E,draw:T,destroy:k,regl:i,gl:d,canvas:d.canvas,groups:x}),y;function y(L){L?E(L):L===null&&k(),T()}function T(L){if(typeof L=="number")return h(L);L&&!Array.isArray(L)&&(L=[L]),i._refresh(),x.forEach(function(P,I){P&&(L&&(L[I]?P.draw=!0:P.draw=!1),P.draw?h(I):P.draw=!0)})}function h(L){typeof L=="number"&&(L=x[L]),L!=null&&L&&L.count&&L.color&&L.opacity&&L.positions&&L.positions.length>1&&(L.scaleRatio=[L.scale[0]*L.viewport.width,L.scale[1]*L.viewport.height],u(L),L.after&&L.after(L))}function E(L){if(L){L.length!=null?typeof L[0]=="number"&&(L=[{positions:L}]):Array.isArray(L)||(L=[L]);var P=0,I=0;if(y.groups=x=L.map(function(B,q){var V=x[q];return B&&(typeof B=="function"?B={after:B}:typeof B[0]=="number"&&(B={positions:B}),B=w(B,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),V||(x[q]=V={id:q,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},B=_({},m,B)),o(V,B,[{lineWidth:function(ne){return .5*+ne},capSize:function(ne){return .5*+ne},opacity:parseFloat,errors:function(ne){return ne=p(ne),I+=ne.length,ne},positions:function(ne,ee){return ne=p(ne,"float64"),ee.count=Math.floor(ne.length/2),ee.bounds=M(ne,2),ee.offset=P,P+=ee.count,ne}},{color:function(ne,ee){var $=ee.count;if(ne||(ne="transparent"),!Array.isArray(ne)||typeof ne[0]=="number"){var J=ne;ne=Array($);for(var K=0;K<$;K++)ne[K]=J}if(ne.length<$)throw Error("Not enough colors");for(var te=new Uint8Array(4*$),ie=0;ie<$;ie++){var ae=A(ne[ie],"uint8");te.set(ae,4*ie)}return te},range:function(ne,ee,$){var J=ee.bounds;return ne||(ne=J),ee.scale=[1/(ne[2]-ne[0]),1/(ne[3]-ne[1])],ee.translate=[-ne[0],-ne[1]],ee.scaleFract=a(ee.scale),ee.translateFract=a(ee.translate),ne},viewport:function(ne){var ee;return Array.isArray(ne)?ee={x:ne[0],y:ne[1],width:ne[2]-ne[0],height:ne[3]-ne[1]}:ne?(ee={x:ne.x||ne.left||0,y:ne.y||ne.top||0},ne.right?ee.width=ne.right-ee.x:ee.width=ne.w||ne.width||0,ne.bottom?ee.height=ne.bottom-ee.y:ee.height=ne.h||ne.height||0):ee={x:0,y:0,width:d.drawingBufferWidth,height:d.drawingBufferHeight},ee}}])),V}),P||I){var z=x.reduce(function(B,q,V){return B+(q?q.count:0)},0),F=new Float64Array(2*z),U=new Uint8Array(4*z),R=new Float32Array(4*z);x.forEach(function(B,q){if(B){var V=B.positions,ne=B.count,ee=B.offset,$=B.color,J=B.errors;ne&&(U.set($,4*ee),R.set(J,4*ee),F.set(V,2*ee))}});var j=n(F);c(j);var Z=a(F,j);g(Z),f(U),b(R)}}}function k(){c.destroy(),g.destroy(),f.destroy(),b.destroy(),v.destroy()}};var r=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},13472:function(Y,O,e){var M=e(72160),A=e(76752),o=e(50896),w=e(26444),_=e(55616),p=e(47520),s=e(28912),n=e(71152),a=e(37816),r=a.float32,i=a.fract32,l=e(60463),u=e(51160),c=e(10272);function g(f,b){if(!(this instanceof g))return new g(f,b);if(typeof f=="function"?(b||(b={}),b.regl=f):b=f,b.length&&(b.positions=b),!(f=b.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=f._gl,this.regl=f,this.passes=[],this.shaders=g.shaders.has(f)?g.shaders.get(f):g.shaders.set(f,g.createShaders(f)).get(f),this.update(b)}Y.exports=g,g.dashMult=2,g.maxPatternLength=256,g.precisionThreshold=3e6,g.maxPoints=1e4,g.maxLines=2048,g.shaders=new l,g.createShaders=function(f){var b,v=f.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),d={primitive:"triangle strip",instances:f.prop("count"),count:4,offset:0,uniforms:{miterMode:function(x,y){return y.join==="round"?2:1},miterLimit:f.prop("miterLimit"),scale:f.prop("scale"),scaleFract:f.prop("scaleFract"),translateFract:f.prop("translateFract"),translate:f.prop("translate"),thickness:f.prop("thickness"),dashTexture:f.prop("dashTexture"),opacity:f.prop("opacity"),pixelRatio:f.context("pixelRatio"),id:f.prop("id"),dashLength:f.prop("dashLength"),viewport:function(x,y){return[y.viewport.x,y.viewport.y,x.viewportWidth,x.viewportHeight]},depth:f.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(x,y){return!y.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:f.prop("viewport")},viewport:f.prop("viewport")},m=f(o({vert:w([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:w([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:v,divisor:0,stride:8,offset:0},lineTop:{buffer:v,divisor:0,stride:8,offset:4},aCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:f.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},d));try{b=f(o({cull:{enable:!0,face:"back"},vert:w([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:w([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:v,divisor:0,stride:8,offset:0},lineTop:{buffer:v,divisor:0,stride:8,offset:4},aColor:{buffer:f.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:f.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},d))}catch{b=m}return{fill:f({primitive:"triangle",elements:function(x,y){return y.triangles},offset:0,vert:w([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:w([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:f.prop("scale"),color:f.prop("fill"),scaleFract:f.prop("scaleFract"),translateFract:f.prop("translateFract"),translate:f.prop("translate"),opacity:f.prop("opacity"),pixelRatio:f.context("pixelRatio"),id:f.prop("id"),viewport:function(x,y){return[y.viewport.x,y.viewport.y,x.viewportWidth,x.viewportHeight]}},attributes:{position:{buffer:f.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:8}},blend:d.blend,depth:{enable:!1},scissor:d.scissor,stencil:d.stencil,viewport:d.viewport}),rect:m,miter:b}},g.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},g.prototype.render=function(){for(var f,b=[],v=arguments.length;v--;)b[v]=arguments[v];b.length&&(f=this).update.apply(f,b),this.draw()},g.prototype.draw=function(){for(var f=this,b=[],v=arguments.length;v--;)b[v]=arguments[v];return(b.length?b:this.passes).forEach(function(d,m){var x;if(d&&Array.isArray(d))return(x=f).draw.apply(x,d);typeof d=="number"&&(d=f.passes[d]),d&&d.count>1&&d.opacity&&(f.regl._refresh(),d.fill&&d.triangles&&d.triangles.length>2&&f.shaders.fill(d),d.thickness&&(d.scale[0]*d.viewport.width>g.precisionThreshold||d.scale[1]*d.viewport.height>g.precisionThreshold||d.join==="rect"||!d.join&&(d.thickness<=2||d.count>=g.maxPoints)?f.shaders.rect(d):f.shaders.miter(d)))}),this},g.prototype.update=function(f){var b=this;if(f){f.length!=null?typeof f[0]=="number"&&(f=[{positions:f}]):Array.isArray(f)||(f=[f]);var v=this.regl,d=this.gl;if(f.forEach(function(h,E){var k=b.passes[E];if(h!==void 0)if(h!==null){if(typeof h[0]=="number"&&(h={positions:h}),h=_(h,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),k||(b.passes[E]=k={id:E,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:v.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:v.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:v.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:v.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},h=o({},g.defaults,h)),h.thickness!=null&&(k.thickness=parseFloat(h.thickness)),h.opacity!=null&&(k.opacity=parseFloat(h.opacity)),h.miterLimit!=null&&(k.miterLimit=parseFloat(h.miterLimit)),h.overlay!=null&&(k.overlay=!!h.overlay,E<g.maxLines&&(k.depth=2*(g.maxLines-1-E%g.maxLines)/g.maxLines-1)),h.join!=null&&(k.join=h.join),h.hole!=null&&(k.hole=h.hole),h.fill!=null&&(k.fill=h.fill?M(h.fill,"uint8"):null),h.viewport!=null&&(k.viewport=u(h.viewport)),k.viewport||(k.viewport=u([d.drawingBufferWidth,d.drawingBufferHeight])),h.close!=null&&(k.close=h.close),h.positions===null&&(h.positions=[]),h.positions){var L,P;if(h.positions.x&&h.positions.y){var I=h.positions.x,z=h.positions.y;P=k.count=Math.max(I.length,z.length),L=new Float64Array(2*P);for(var F=0;F<P;F++)L[2*F]=I[F],L[2*F+1]=z[F]}else L=p(h.positions,"float64"),P=k.count=Math.floor(L.length/2);var U=k.bounds=A(L,2);if(k.fill){for(var R=[],j={},Z=0,B=0,q=0,V=k.count;B<V;B++){var ne=L[2*B],ee=L[2*B+1];isNaN(ne)||isNaN(ee)||ne==null||ee==null?(ne=L[2*Z],ee=L[2*Z+1],j[B]=Z):Z=B,R[q++]=ne,R[q++]=ee}if(h.splitNull){k.count-1 in j||(j[k.count]=k.count-1);var $=Object.keys(j).map(Number).sort(function(yt,et){return yt-et}),J=[],K=0,te=k.hole!=null?k.hole[0]:null;if(te!=null){var ie=c($,function(yt){return yt>=te});($=$.slice(0,ie)).push(te)}for(var ae=function(yt){var et=R.slice(2*K,2*$[yt]).concat(te?R.slice(2*te):[]),nt=(k.hole||[]).map(function(Rt){return Rt-te+($[yt]-K)}),At=s(et,nt);At=At.map(function(Rt){return Rt+K+(Rt+K<$[yt]?0:te-$[yt])}),J.push.apply(J,At),K=$[yt]+1},se=0;se<$.length;se++)ae(se);for(var ce=0,de=J.length;ce<de;ce++)j[J[ce]]!=null&&(J[ce]=j[J[ce]]);k.triangles=J}else{for(var ge=s(R,k.hole||[]),ve=0,be=ge.length;ve<be;ve++)j[ge[ve]]!=null&&(ge[ve]=j[ge[ve]]);k.triangles=ge}}var me=new Float64Array(L);n(me,2,U);var Se=new Float64Array(2*P+6);k.close?L[0]===L[2*P-2]&&L[1]===L[2*P-1]?(Se[0]=me[2*P-4],Se[1]=me[2*P-3]):(Se[0]=me[2*P-2],Se[1]=me[2*P-1]):(Se[0]=me[0],Se[1]=me[1]),Se.set(me,2),k.close?L[0]===L[2*P-2]&&L[1]===L[2*P-1]?(Se[2*P+2]=me[2],Se[2*P+3]=me[3],k.count-=1):(Se[2*P+2]=me[0],Se[2*P+3]=me[1],Se[2*P+4]=me[2],Se[2*P+5]=me[3]):(Se[2*P+2]=me[2*P-2],Se[2*P+3]=me[2*P-1],Se[2*P+4]=me[2*P-2],Se[2*P+5]=me[2*P-1]);var we=r(Se);k.positionBuffer(we);var _e=i(Se,we);k.positionFractBuffer(_e)}if(h.range?k.range=h.range:k.range||(k.range=k.bounds),(h.range||h.positions)&&k.count){var oe=k.bounds,le=oe[2]-oe[0],pe=oe[3]-oe[1],Ee=k.range[2]-k.range[0],Te=k.range[3]-k.range[1];k.scale=[le/Ee,pe/Te],k.translate=[-k.range[0]/Ee+oe[0]/Ee||0,-k.range[1]/Te+oe[1]/Te||0],k.scaleFract=i(k.scale),k.translateFract=i(k.translate)}if(h.dashes){var Me,Le=0;if(!h.dashes||h.dashes.length<2)Le=1,Me=new Uint8Array([255,255,255,255,255,255,255,255]);else{Le=0;for(var Ie=0;Ie<h.dashes.length;++Ie)Le+=h.dashes[Ie];Me=new Uint8Array(Le*g.dashMult);for(var he=0,xe=255,ke=0;ke<2;ke++)for(var ze=0;ze<h.dashes.length;++ze){for(var Re=0,Oe=h.dashes[ze]*g.dashMult*.5;Re<Oe;++Re)Me[he++]=xe;xe^=255}}k.dashLength=Le,k.dashTexture({channels:1,data:Me,width:Me.length,height:1,mag:"linear",min:"linear"},0,0)}if(h.color){var Ve=k.count,qe=h.color;qe||(qe="transparent");var Je=new Uint8Array(4*Ve+4);if(Array.isArray(qe)&&typeof qe[0]!="number"){for(var ot=0;ot<Ve;ot++){var rt=M(qe[ot],"uint8");Je.set(rt,4*ot)}Je.set(M(qe[0],"uint8"),4*Ve)}else for(var dt=M(qe,"uint8"),_t=0;_t<Ve+1;_t++)Je.set(dt,4*_t);k.colorBuffer({usage:"dynamic",type:"uint8",data:Je})}}else b.passes[E]=null}),f.length<this.passes.length){for(var m=f.length;m<this.passes.length;m++){var x=this.passes[m];x&&(x.colorBuffer.destroy(),x.positionBuffer.destroy(),x.dashTexture.destroy())}this.passes.length=f.length}for(var y=[],T=0;T<this.passes.length;T++)this.passes[T]!==null&&y.push(this.passes[T]);return this.passes=y,this}},g.prototype.destroy=function(){return this.passes.forEach(function(f){f.colorBuffer.destroy(),f.positionBuffer.destroy(),f.dashTexture.destroy()}),this.passes.length=0,this}},38540:function(Y,O,e){function M(d,m){return function(x){if(Array.isArray(x))return x}(d)||function(x,y){var T=x==null?null:typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(T!=null){var h,E,k,L,P=[],I=!0,z=!1;try{if(k=(T=T.call(x)).next,y===0){if(Object(T)!==T)return;I=!1}else for(;!(I=(h=k.call(T)).done)&&(P.push(h.value),P.length!==y);I=!0);}catch(F){z=!0,E=F}finally{try{if(!I&&T.return!=null&&(L=T.return(),Object(L)!==L))return}finally{if(z)throw E}}return P}}(d,m)||A(d,m)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function A(d,m){if(d){if(typeof d=="string")return o(d,m);var x=Object.prototype.toString.call(d).slice(8,-1);return x==="Object"&&d.constructor&&(x=d.constructor.name),x==="Map"||x==="Set"?Array.from(d):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?o(d,m):void 0}}function o(d,m){(m==null||m>d.length)&&(m=d.length);for(var x=0,y=new Array(m);x<m;x++)y[x]=d[x];return y}var w=e(72160),_=e(76752),p=e(3808),s=e(3108),n=e(50896),a=e(26444),r=e(55616),i=e(45223),l=e(47520),u=e(96604),c=e(37816),g=e(51160),f=b;function b(d,m){var x=this;if(!(this instanceof b))return new b(d,m);typeof d=="function"?(m||(m={}),m.regl=d):(m=d,d=null),m&&m.length&&(m.positions=m);var y,T=(d=m.regl)._gl,h=[];this.tooManyColors=u,y=d.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),n(this,{regl:d,gl:T,groups:[],markerCache:[null],markerTextures:[null],palette:h,paletteIds:{},paletteTexture:y,maxColors:255,maxSize:100,canvas:T.canvas}),this.update(m);var E={uniforms:{constPointSize:!!m.constPointSize,opacity:d.prop("opacity"),paletteSize:function(P,I){return[x.tooManyColors?0:255,y.height]},pixelRatio:d.context("pixelRatio"),scale:d.prop("scale"),scaleFract:d.prop("scaleFract"),translate:d.prop("translate"),translateFract:d.prop("translateFract"),markerTexture:d.prop("markerTexture"),paletteTexture:y},attributes:{x:function(P,I){return I.xAttr||{buffer:I.positionBuffer,stride:8,offset:0}},y:function(P,I){return I.yAttr||{buffer:I.positionBuffer,stride:8,offset:4}},xFract:function(P,I){return I.xAttr?{constant:[0,0]}:{buffer:I.positionFractBuffer,stride:8,offset:0}},yFract:function(P,I){return I.yAttr?{constant:[0,0]}:{buffer:I.positionFractBuffer,stride:8,offset:4}},size:function(P,I){return I.size.length?{buffer:I.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*I.size/x.maxSize)]}},borderSize:function(P,I){return I.borderSize.length?{buffer:I.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*I.borderSize/x.maxSize)]}},colorId:function(P,I){return I.color.length?{buffer:I.colorBuffer,stride:x.tooManyColors?8:4,offset:0}:{constant:x.tooManyColors?h.slice(4*I.color,4*I.color+4):[I.color]}},borderColorId:function(P,I){return I.borderColor.length?{buffer:I.colorBuffer,stride:x.tooManyColors?8:4,offset:x.tooManyColors?4:2}:{constant:x.tooManyColors?h.slice(4*I.borderColor,4*I.borderColor+4):[I.borderColor]}},isActive:function(P,I){return I.activation===!0?{constant:[1]}:I.activation?I.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:d.prop("viewport")},viewport:d.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:d.prop("elements"),count:d.prop("count"),offset:d.prop("offset"),primitive:"points"},k=n({},E);k.frag=a([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),k.vert=a([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}
`]),this.drawMarker=d(k);var L=n({},E);L.frag=a([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),L.vert=a([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),u&&(L.frag=L.frag.replace("smoothstep","smoothStep"),k.frag=k.frag.replace("smoothstep","smoothStep")),this.drawCircle=d(L)}b.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},b.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},b.prototype.draw=function(){for(var d=this,m=arguments.length,x=new Array(m),y=0;y<m;y++)x[y]=arguments[y];var T=this.groups;if(x.length===1&&Array.isArray(x[0])&&(x[0][0]===null||Array.isArray(x[0][0]))&&(x=x[0]),this.regl._refresh(),x.length)for(var h=0;h<x.length;h++)this.drawItem(h,x[h]);else T.forEach(function(E,k){d.drawItem(k)});return this},b.prototype.drawItem=function(d,m){var x,y=this.groups,T=y[d];if(typeof m=="number"&&(d=m,T=y[m],m=null),T&&T.count&&T.opacity){T.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,T,m));for(var h=[],E=1;E<T.activation.length;E++)T.activation[E]&&(T.activation[E]===!0||T.activation[E].data.length)&&h.push.apply(h,function(k){if(Array.isArray(k))return o(k)}(x=this.getMarkerDrawOptions(E,T,m))||function(k){if(typeof Symbol<"u"&&k[Symbol.iterator]!=null||k["@@iterator"]!=null)return Array.from(k)}(x)||A(x)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}());h.length&&this.drawMarker(h)}},b.prototype.getMarkerDrawOptions=function(d,m,x){var y=m.range,T=m.tree,h=m.viewport,E=m.activation,k=m.selectionBuffer,L=m.count;if(this.regl,!T)return x?[n({},m,{markerTexture:this.markerTextures[d],activation:E[d],count:x.length,elements:x,offset:0})]:[n({},m,{markerTexture:this.markerTextures[d],activation:E[d],offset:0})];var P=[],I=T.range(y,{lod:!0,px:[(y[2]-y[0])/h.width,(y[3]-y[1])/h.height]});if(x){for(var z=E[d].data,F=new Uint8Array(L),U=0;U<x.length;U++){var R=x[U];F[R]=z?z[R]:1}k.subdata(F)}for(var j=I.length;j--;){var Z=M(I[j],2),B=Z[0],q=Z[1];P.push(n({},m,{markerTexture:this.markerTextures[d],activation:x?k:E[d],offset:B,count:q-B}))}return P},b.prototype.update=function(){for(var d=this,m=arguments.length,x=new Array(m),y=0;y<m;y++)x[y]=arguments[y];if(x.length){x.length===1&&Array.isArray(x[0])&&(x=x[0]);var T=this.groups,h=this.gl,E=this.regl,k=this.maxSize,L=this.maxColors,P=this.palette;this.groups=T=x.map(function(I,z){var F=T[z];if(I===void 0)return F;I===null?I={positions:null}:typeof I=="function"?I={ondraw:I}:typeof I[0]=="number"&&(I={positions:I}),(I=r(I,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions===null&&(I.positions=[]),I.tooManyColors!=null&&(d.tooManyColors=I.tooManyColors),F||(T[z]=F={id:z,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:E.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:E.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:E.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:E.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:E.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},I=n({},b.defaults,I)),I.positions&&!("marker"in I)&&(I.marker=F.marker,delete F.marker),I.marker&&!("positions"in I)&&(I.positions=F.positions,delete F.positions);var U=0,R=0;if(i(F,I,[{snap:!0,size:function(ve,be){return ve==null&&(ve=b.defaults.size),U+=ve&&ve.length?1:0,ve},borderSize:function(ve,be){return ve==null&&(ve=b.defaults.borderSize),U+=ve&&ve.length?1:0,ve},opacity:parseFloat,color:function(ve,be){return ve==null&&(ve=b.defaults.color),ve=d.updateColor(ve),R++,ve},borderColor:function(ve,be){return ve==null&&(ve=b.defaults.borderColor),ve=d.updateColor(ve),R++,ve},bounds:function(ve,be,me){return"range"in me||(me.range=null),ve},positions:function(ve,be,me){var Se=be.snap,we=be.positionBuffer,_e=be.positionFractBuffer,oe=be.selectionBuffer;if(ve.x||ve.y)return ve.x.length?be.xAttr={buffer:E.buffer(ve.x),offset:0,stride:4,count:ve.x.length}:be.xAttr={buffer:ve.x.buffer,offset:4*ve.x.offset||0,stride:4*(ve.x.stride||1),count:ve.x.count},ve.y.length?be.yAttr={buffer:E.buffer(ve.y),offset:0,stride:4,count:ve.y.length}:be.yAttr={buffer:ve.y.buffer,offset:4*ve.y.offset||0,stride:4*(ve.y.stride||1),count:ve.y.count},be.count=Math.max(be.xAttr.count,be.yAttr.count),ve;ve=l(ve,"float64");var le=be.count=Math.floor(ve.length/2),pe=be.bounds=le?_(ve,2):null;if(me.range||be.range||(delete be.range,me.range=pe),me.marker||be.marker||(delete be.marker,me.marker=null),Se&&(Se===!0||le>Se)?be.tree=s(ve,{bounds:pe}):Se&&Se.length&&(be.tree=Se),be.tree){var Ee={primitive:"points",usage:"static",data:be.tree,type:"uint32"};be.elements?be.elements(Ee):be.elements=E.elements(Ee)}var Te=c.float32(ve);return we({data:Te,usage:"dynamic"}),_e({data:c.fract32(ve,Te),usage:"dynamic"}),oe({data:new Uint8Array(le),type:"uint8",usage:"stream"}),ve}},{marker:function(ve,be,me){var Se=be.activation;if(Se.forEach(function(Te){return Te&&Te.destroy&&Te.destroy()}),Se.length=0,ve&&typeof ve[0]!="number"){for(var we=[],_e=0,oe=Math.min(ve.length,be.count);_e<oe;_e++){var le=d.addMarker(ve[_e]);we[le]||(we[le]=new Uint8Array(be.count)),we[le][_e]=1}for(var pe=0;pe<we.length;pe++)if(we[pe]){var Ee={data:we[pe],type:"uint8",usage:"static"};Se[pe]?Se[pe](Ee):Se[pe]=E.buffer(Ee),Se[pe].data=we[pe]}}else Se[d.addMarker(ve)]=!0;return ve},range:function(ve,be,me){var Se=be.bounds;if(Se)return ve||(ve=Se),be.scale=[1/(ve[2]-ve[0]),1/(ve[3]-ve[1])],be.translate=[-ve[0],-ve[1]],be.scaleFract=c.fract(be.scale),be.translateFract=c.fract(be.translate),ve},viewport:function(ve){return g(ve||[h.drawingBufferWidth,h.drawingBufferHeight])}}]),U){var j=F,Z=j.count,B=j.size,q=j.borderSize,V=j.sizeBuffer,ne=new Uint8Array(2*Z);if(B.length||q.length)for(var ee=0;ee<Z;ee++)ne[2*ee]=Math.round(255*(B[ee]==null?B:B[ee])/k),ne[2*ee+1]=Math.round(255*(q[ee]==null?q:q[ee])/k);V({data:ne,usage:"dynamic"})}if(R){var $,J=F,K=J.count,te=J.color,ie=J.borderColor,ae=J.colorBuffer;if(d.tooManyColors){if(te.length||ie.length){$=new Uint8Array(8*K);for(var se=0;se<K;se++){var ce=te[se];$[8*se]=P[4*ce],$[8*se+1]=P[4*ce+1],$[8*se+2]=P[4*ce+2],$[8*se+3]=P[4*ce+3];var de=ie[se];$[8*se+4]=P[4*de],$[8*se+5]=P[4*de+1],$[8*se+6]=P[4*de+2],$[8*se+7]=P[4*de+3]}}}else if(te.length||ie.length){$=new Uint8Array(4*K+2);for(var ge=0;ge<K;ge++)te[ge]!=null&&($[4*ge]=te[ge]%L,$[4*ge+1]=Math.floor(te[ge]/L)),ie[ge]!=null&&($[4*ge+2]=ie[ge]%L,$[4*ge+3]=Math.floor(ie[ge]/L))}ae({data:$||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return F})}},b.prototype.addMarker=function(d){var m,x=this.markerTextures,y=this.regl,T=this.markerCache,h=d==null?0:T.indexOf(d);if(h>=0)return h;if(d instanceof Uint8Array||d instanceof Uint8ClampedArray)m=d;else{m=new Uint8Array(d.length);for(var E=0,k=d.length;E<k;E++)m[E]=255*d[E]}var L=Math.floor(Math.sqrt(m.length));return h=x.length,T.push(d),x.push(y.texture({channels:1,data:m,radius:L,mag:"linear",min:"linear"})),h},b.prototype.updateColor=function(d){var m=this.paletteIds,x=this.palette,y=this.maxColors;Array.isArray(d)||(d=[d]);var T=[];if(typeof d[0]=="number"){var h=[];if(Array.isArray(d))for(var E=0;E<d.length;E+=4)h.push(d.slice(E,E+4));else for(var k=0;k<d.length;k+=4)h.push(d.subarray(k,k+4));d=h}for(var L=0;L<d.length;L++){var P=d[L];P=w(P,"uint8");var I=p(P,!1);if(m[I]==null){var z=x.length;m[I]=Math.floor(z/4),x[z]=P[0],x[z+1]=P[1],x[z+2]=P[2],x[z+3]=P[3]}T[L]=m[I]}return!this.tooManyColors&&x.length>4*y&&(this.tooManyColors=!0),this.updatePalette(x),T.length===1?T[0]:T},b.prototype.updatePalette=function(d){if(!this.tooManyColors){var m=this.maxColors,x=this.paletteTexture,y=Math.ceil(.25*d.length/m);if(y>1)for(var T=.25*(d=d.slice()).length%m;T<y*m;T++)d.push(0,0,0,0);x.height<y&&x.resize(m,y),x.subimage({width:Math.min(.25*d.length,m),height:y,data:d},0,0)}},b.prototype.destroy=function(){return this.groups.forEach(function(d){d.sizeBuffer.destroy(),d.positionBuffer.destroy(),d.positionFractBuffer.destroy(),d.colorBuffer.destroy(),d.activation.forEach(function(m){return m&&m.destroy&&m.destroy()}),d.selectionBuffer.destroy(),d.elements&&d.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(d){return d&&d.destroy&&d.destroy()}),this};var v=e(50896);Y.exports=function(d,m){var x=new f(d,m),y=x.render.bind(x);return v(y,{render:y,update:x.update.bind(x),draw:x.draw.bind(x),destroy:x.destroy.bind(x),regl:x.regl,gl:x.gl,canvas:x.gl.canvas,groups:x.groups,markers:x.markerCache,palette:x.palette}),y}},55795:function(Y,O,e){var M=e(38540),A=e(55616),o=e(76752),w=e(3951),_=e(67752),p=e(51160),s=e(47520);function n(l,u){if(!(this instanceof n))return new n(l);this.traces=[],this.passes={},this.regl=l,this.scatter=M(l),this.canvas=this.scatter.canvas}function a(l,u,c){return(l.id!=null?l.id:l)<<16|(255&u)<<8|255&c}function r(l,u,c){var g,f,b,v,d=l[u],m=l[c];return d.length>2?(d[0],d[2],g=d[1],f=d[3]):d.length?(g=d[0],f=d[1]):(d.x,g=d.y,d.x,d.width,f=d.y+d.height),m.length>2?(b=m[0],v=m[2],m[1],m[3]):m.length?(b=m[0],v=m[1]):(b=m.x,m.y,v=m.x+m.width,m.y,m.height),[b,g,v,f]}function i(l){if(typeof l=="number")return[l,l,l,l];if(l.length===2)return[l[0],l[1],l[0],l[1]];var u=p(l);return[u.x,u.y,u.x+u.width,u.y+u.height]}Y.exports=n,n.prototype.render=function(){for(var l,u=this,c=[],g=arguments.length;g--;)c[g]=arguments[g];return c.length&&(l=this).update.apply(l,c),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=w(function(){u.draw(),u.dirty=!0,u.planned=null})):(this.draw(),this.dirty=!0,w(function(){u.dirty=!1})),this)},n.prototype.update=function(){for(var l,u=[],c=arguments.length;c--;)u[c]=arguments[c];if(u.length){for(var g=0;g<u.length;g++)this.updateItem(g,u[g]);this.traces=this.traces.filter(Boolean);for(var f=[],b=0,v=0;v<this.traces.length;v++){for(var d=this.traces[v],m=this.traces[v].passes,x=0;x<m.length;x++)f.push(this.passes[m[x]]);d.passOffset=b,b+=d.passes.length}return(l=this.scatter).update.apply(l,f),this}},n.prototype.updateItem=function(l,u){var c=this.regl;if(u===null)return this.traces[l]=null,this;if(!u)return this;var g,f=A(u,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),b=this.traces[l]||(this.traces[l]={id:l,buffer:c.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:p([c._gl.drawingBufferWidth,c._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(f.color!=null&&(b.color=f.color),f.size!=null&&(b.size=f.size),f.marker!=null&&(b.marker=f.marker),f.borderColor!=null&&(b.borderColor=f.borderColor),f.borderSize!=null&&(b.borderSize=f.borderSize),f.opacity!=null&&(b.opacity=f.opacity),f.viewport&&(b.viewport=p(f.viewport)),f.diagonal!=null&&(b.diagonal=f.diagonal),f.upper!=null&&(b.upper=f.upper),f.lower!=null&&(b.lower=f.lower),f.data){b.buffer(s(f.data)),b.columns=f.data.length,b.count=f.data[0].length,b.bounds=[];for(var v=0;v<b.columns;v++)b.bounds[v]=o(f.data[v],1)}f.range&&(b.range=f.range,g=b.range&&typeof b.range[0]!="number"),f.domain&&(b.domain=f.domain);var d=!1;f.padding!=null&&(Array.isArray(f.padding)&&f.padding.length===b.columns&&typeof f.padding[f.padding.length-1]=="number"?(b.padding=f.padding.map(i),d=!0):b.padding=i(f.padding));var m=b.columns,x=b.count,y=b.viewport.width,T=b.viewport.height,h=b.viewport.x,E=b.viewport.y,k=y/m,L=T/m;b.passes=[];for(var P=0;P<m;P++)for(var I=0;I<m;I++)if((b.diagonal||I!==P)&&(b.upper||!(P>I))&&(b.lower||!(P<I))){var z=a(b.id,P,I),F=this.passes[z]||(this.passes[z]={});if(f.data&&(f.transpose?F.positions={x:{buffer:b.buffer,offset:I,count:x,stride:m},y:{buffer:b.buffer,offset:P,count:x,stride:m}}:F.positions={x:{buffer:b.buffer,offset:I*x,count:x},y:{buffer:b.buffer,offset:P*x,count:x}},F.bounds=r(b.bounds,P,I)),f.domain||f.viewport||f.data){var U=d?r(b.padding,P,I):b.padding;if(b.domain){var R=r(b.domain,P,I),j=R[0],Z=R[1],B=R[2],q=R[3];F.viewport=[h+j*y+U[0],E+Z*T+U[1],h+B*y-U[2],E+q*T-U[3]]}else F.viewport=[h+I*k+k*U[0],E+P*L+L*U[1],h+(I+1)*k-k*U[2],E+(P+1)*L-L*U[3]]}f.color&&(F.color=b.color),f.size&&(F.size=b.size),f.marker&&(F.marker=b.marker),f.borderSize&&(F.borderSize=b.borderSize),f.borderColor&&(F.borderColor=b.borderColor),f.opacity&&(F.opacity=b.opacity),f.range&&(F.range=g?r(b.range,P,I):b.range||F.bounds),b.passes.push(z)}return this},n.prototype.draw=function(){for(var l,u=[],c=arguments.length;c--;)u[c]=arguments[c];if(u.length){for(var g=[],f=0;f<u.length;f++)if(typeof u[f]=="number"){var b=this.traces[u[f]],v=b.passes,d=b.passOffset;g.push.apply(g,_(d,d+v.length))}else if(u[f].length){var m=u[f],x=this.traces[f],y=x.passes,T=x.passOffset;y=y.map(function(h,E){g[T+E]=m})}(l=this.scatter).draw.apply(l,g)}else this.scatter.draw();return this},n.prototype.destroy=function(){return this.traces.forEach(function(l){l.buffer&&l.buffer.destroy&&l.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},28624:function(Y){Y.exports=function(){function O(Ne,We){this.id=ie++,this.type=Ne,this.data=We}function e(Ne){if(Ne.length===0)return[];var We=Ne.charAt(0),st=Ne.charAt(Ne.length-1);if(1<Ne.length&&We===st&&(We==='"'||We==="'"))return['"'+Ne.substr(1,Ne.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(We=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ne))return e(Ne.substr(0,We.index)).concat(e(We[1])).concat(e(Ne.substr(We.index+We[0].length)));if((We=Ne.split(".")).length===1)return['"'+Ne.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Ne=[],st=0;st<We.length;++st)Ne=Ne.concat(e(We[st]));return Ne}function M(Ne){return"["+e(Ne).join("][")+"]"}function A(Ne){return typeof Ne=="string"?Ne.split():Ne}function o(Ne){return typeof Ne=="string"?document.querySelector(Ne):Ne}function w(Ne){var We,st,it,Fe,Be=Ne||{};Ne={};var at=[],Ze=[],ht=typeof window>"u"?1:window.devicePixelRatio,vt=!1,mt={},ft=function(Tt){},Et=function(){};if(typeof Be=="string"?We=document.querySelector(Be):typeof Be=="object"&&(typeof Be.nodeName=="string"&&typeof Be.appendChild=="function"&&typeof Be.getBoundingClientRect=="function"?We=Be:typeof Be.drawArrays=="function"||typeof Be.drawElements=="function"?it=(Fe=Be).canvas:("gl"in Be?Fe=Be.gl:"canvas"in Be?it=o(Be.canvas):"container"in Be&&(st=o(Be.container)),"attributes"in Be&&(Ne=Be.attributes),"extensions"in Be&&(at=A(Be.extensions)),"optionalExtensions"in Be&&(Ze=A(Be.optionalExtensions)),"onDone"in Be&&(ft=Be.onDone),"profile"in Be&&(vt=!!Be.profile),"pixelRatio"in Be&&(ht=+Be.pixelRatio),"cachedCode"in Be&&(mt=Be.cachedCode))),We&&(We.nodeName.toLowerCase()==="canvas"?it=We:st=We),!Fe){if(!it){if(!(We=function(Tt,xt,Ct){function Pt(){var sn=window.innerWidth,Gt=window.innerHeight;Tt!==document.body&&(sn=(Gt=Kt.getBoundingClientRect()).right-Gt.left,Gt=Gt.bottom-Gt.top),Kt.width=Ct*sn,Kt.height=Ct*Gt}var Bt,Kt=document.createElement("canvas");return te(Kt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Tt.appendChild(Kt),Tt===document.body&&(Kt.style.position="absolute",te(Tt.style,{margin:0,padding:0})),Tt!==document.body&&typeof ResizeObserver=="function"?(Bt=new ResizeObserver(function(){setTimeout(Pt)})).observe(Tt):window.addEventListener("resize",Pt,!1),Pt(),{canvas:Kt,onDestroy:function(){Bt?Bt.disconnect():window.removeEventListener("resize",Pt),Tt.removeChild(Kt)}}}(st||document.body,0,ht)))return null;it=We.canvas,Et=We.onDestroy}Ne.premultipliedAlpha===void 0&&(Ne.premultipliedAlpha=!0),Fe=function(Tt,xt){function Ct(Pt){try{return Tt.getContext(Pt,xt)}catch{return null}}return Ct("webgl")||Ct("experimental-webgl")||Ct("webgl-experimental")}(it,Ne)}return Fe?{gl:Fe,canvas:it,container:st,extensions:at,optionalExtensions:Ze,pixelRatio:ht,profile:vt,cachedCode:mt,onDone:ft,onDestroy:Et}:(Et(),ft("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function _(Ne,We){for(var st=Array(Ne),it=0;it<Ne;++it)st[it]=We(it);return st}function p(Ne){var We,st;return We=(65535<Ne)<<4,We|=st=(255<(Ne>>>=We))<<3,(We|=st=(15<(Ne>>>=st))<<2)|(st=(3<(Ne>>>=st))<<1)|Ne>>>st>>1}function s(){function Ne(it){e:{for(var Fe=16;268435456>=Fe;Fe*=16)if(it<=Fe){it=Fe;break e}it=0}return 0<(Fe=st[p(it)>>2]).length?Fe.pop():new ArrayBuffer(it)}function We(it){st[p(it.byteLength)>>2].push(it)}var st=_(8,function(){return[]});return{alloc:Ne,free:We,allocType:function(it,Fe){var Be=null;switch(it){case 5120:Be=new Int8Array(Ne(Fe),0,Fe);break;case 5121:Be=new Uint8Array(Ne(Fe),0,Fe);break;case 5122:Be=new Int16Array(Ne(2*Fe),0,Fe);break;case 5123:Be=new Uint16Array(Ne(2*Fe),0,Fe);break;case 5124:Be=new Int32Array(Ne(4*Fe),0,Fe);break;case 5125:Be=new Uint32Array(Ne(4*Fe),0,Fe);break;case 5126:Be=new Float32Array(Ne(4*Fe),0,Fe);break;default:return null}return Be.length!==Fe?Be.subarray(0,Fe):Be},freeType:function(it){We(it.buffer)}}}function n(Ne){return!!Ne&&typeof Ne=="object"&&Array.isArray(Ne.shape)&&Array.isArray(Ne.stride)&&typeof Ne.offset=="number"&&Ne.shape.length===Ne.stride.length&&(Array.isArray(Ne.data)||ve(Ne.data))}function a(Ne,We,st,it,Fe,Be){for(var at=0;at<We;++at)for(var Ze=Ne[at],ht=0;ht<st;++ht)for(var vt=Ze[ht],mt=0;mt<it;++mt)Fe[Be++]=vt[mt]}function r(Ne,We,st,it,Fe){for(var Be=1,at=st+1;at<We.length;++at)Be*=We[at];var Ze=We[st];if(We.length-st==4){var ht=We[st+1],vt=We[st+2];for(We=We[st+3],at=0;at<Ze;++at)a(Ne[at],ht,vt,We,it,Fe),Fe+=Be}else for(at=0;at<Ze;++at)r(Ne[at],We,st+1,it,Fe),Fe+=Be}function i(Ne){return 0|Se[Object.prototype.toString.call(Ne)]}function l(Ne,We){for(var st=0;st<We.length;++st)Ne[st]=We[st]}function u(Ne,We,st,it,Fe,Be,at){for(var Ze=0,ht=0;ht<st;++ht)for(var vt=0;vt<it;++vt)Ne[Ze++]=We[Fe*ht+Be*vt+at]}function c(Ne,We,st,it){function Fe(ft){this.id=ht++,this.buffer=Ne.createBuffer(),this.type=ft,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,st.profile&&(this.stats={size:0})}function Be(ft,Et,Tt){ft.byteLength=Et.byteLength,Ne.bufferData(ft.type,Et,Tt)}function at(ft,Et,Tt,xt,Ct,Pt){if(ft.usage=Tt,Array.isArray(Et)){if(ft.dtype=xt||5126,0<Et.length)if(Array.isArray(Et[0])){Ct=le(Et);for(var Bt=xt=1;Bt<Ct.length;++Bt)xt*=Ct[Bt];ft.dimension=xt,Be(ft,Et=oe(Et,Ct,ft.dtype),Tt),Pt?ft.persistentData=Et:de.freeType(Et)}else typeof Et[0]=="number"?(ft.dimension=Ct,l(Ct=de.allocType(ft.dtype,Et.length),Et),Be(ft,Ct,Tt),Pt?ft.persistentData=Ct:de.freeType(Ct)):ve(Et[0])&&(ft.dimension=Et[0].length,ft.dtype=xt||i(Et[0])||5126,Be(ft,Et=oe(Et,[Et.length,Et[0].length],ft.dtype),Tt),Pt?ft.persistentData=Et:de.freeType(Et))}else if(ve(Et))ft.dtype=xt||i(Et),ft.dimension=Ct,Be(ft,Et,Tt),Pt&&(ft.persistentData=new Uint8Array(new Uint8Array(Et.buffer)));else if(n(Et)){Ct=Et.shape;var Kt=Et.stride,sn=(Bt=Et.offset,0),Gt=0,Yt=0,rn=0;Ct.length===1?(sn=Ct[0],Gt=1,Yt=Kt[0],rn=0):Ct.length===2&&(sn=Ct[0],Gt=Ct[1],Yt=Kt[0],rn=Kt[1]),ft.dtype=xt||i(Et.data)||5126,ft.dimension=Gt,u(Ct=de.allocType(ft.dtype,sn*Gt),Et.data,sn,Gt,Yt,rn,Bt),Be(ft,Ct,Tt),Pt?ft.persistentData=Ct:de.freeType(Ct)}else Et instanceof ArrayBuffer&&(ft.dtype=5121,ft.dimension=Ct,Be(ft,Et,Tt),Pt&&(ft.persistentData=new Uint8Array(new Uint8Array(Et))))}function Ze(ft){We.bufferCount--,it(ft),Ne.deleteBuffer(ft.buffer),ft.buffer=null,delete vt[ft.id]}var ht=0,vt={};Fe.prototype.bind=function(){Ne.bindBuffer(this.type,this.buffer)},Fe.prototype.destroy=function(){Ze(this)};var mt=[];return st.profile&&(We.getTotalBufferSize=function(){var ft=0;return Object.keys(vt).forEach(function(Et){ft+=vt[Et].stats.size}),ft}),{create:function(ft,Et,Tt,xt){function Ct(Bt){var Kt=35044,sn=null,Gt=0,Yt=0,rn=1;return Array.isArray(Bt)||ve(Bt)||n(Bt)||Bt instanceof ArrayBuffer?sn=Bt:typeof Bt=="number"?Gt=0|Bt:Bt&&("data"in Bt&&(sn=Bt.data),"usage"in Bt&&(Kt=_e[Bt.usage]),"type"in Bt&&(Yt=we[Bt.type]),"dimension"in Bt&&(rn=0|Bt.dimension),"length"in Bt&&(Gt=0|Bt.length)),Pt.bind(),sn?at(Pt,sn,Kt,Yt,rn,xt):(Gt&&Ne.bufferData(Pt.type,Gt,Kt),Pt.dtype=Yt||5121,Pt.usage=Kt,Pt.dimension=rn,Pt.byteLength=Gt),st.profile&&(Pt.stats.size=Pt.byteLength*pe[Pt.dtype]),Ct}We.bufferCount++;var Pt=new Fe(Et);return vt[Pt.id]=Pt,Tt||Ct(ft),Ct._reglType="buffer",Ct._buffer=Pt,Ct.subdata=function(Bt,Kt){var sn,Gt=0|(Kt||0);if(Pt.bind(),ve(Bt)||Bt instanceof ArrayBuffer)Ne.bufferSubData(Pt.type,Gt,Bt);else if(Array.isArray(Bt)){if(0<Bt.length)if(typeof Bt[0]=="number"){var Yt=de.allocType(Pt.dtype,Bt.length);l(Yt,Bt),Ne.bufferSubData(Pt.type,Gt,Yt),de.freeType(Yt)}else(Array.isArray(Bt[0])||ve(Bt[0]))&&(sn=le(Bt),Yt=oe(Bt,sn,Pt.dtype),Ne.bufferSubData(Pt.type,Gt,Yt),de.freeType(Yt))}else if(n(Bt)){sn=Bt.shape;var rn=Bt.stride,Ln=Yt=0,Sn=0,gn=0;sn.length===1?(Yt=sn[0],Ln=1,Sn=rn[0],gn=0):sn.length===2&&(Yt=sn[0],Ln=sn[1],Sn=rn[0],gn=rn[1]),sn=Array.isArray(Bt.data)?Pt.dtype:i(Bt.data),u(sn=de.allocType(sn,Yt*Ln),Bt.data,Yt,Ln,Sn,gn,Bt.offset),Ne.bufferSubData(Pt.type,Gt,sn),de.freeType(sn)}return Ct},st.profile&&(Ct.stats=Pt.stats),Ct.destroy=function(){Ze(Pt)},Ct},createStream:function(ft,Et){var Tt=mt.pop();return Tt||(Tt=new Fe(ft)),Tt.bind(),at(Tt,Et,35040,0,1,!1),Tt},destroyStream:function(ft){mt.push(ft)},clear:function(){be(vt).forEach(Ze),mt.forEach(Ze)},getBuffer:function(ft){return ft&&ft._buffer instanceof Fe?ft._buffer:null},restore:function(){be(vt).forEach(function(ft){ft.buffer=Ne.createBuffer(),Ne.bindBuffer(ft.type,ft.buffer),Ne.bufferData(ft.type,ft.persistentData||ft.byteLength,ft.usage)})},_initBuffer:at}}function g(Ne,We,st,it){function Fe(ft){this.id=ht++,Ze[this.id]=this,this.buffer=ft,this.primType=4,this.type=this.vertCount=0}function Be(ft,Et,Tt,xt,Ct,Pt,Bt){var Kt;if(ft.buffer.bind(),Et?((Kt=Bt)||ve(Et)&&(!n(Et)||ve(Et.data))||(Kt=We.oes_element_index_uint?5125:5123),st._initBuffer(ft.buffer,Et,Tt,Kt,3)):(Ne.bufferData(34963,Pt,Tt),ft.buffer.dtype=Kt||5121,ft.buffer.usage=Tt,ft.buffer.dimension=3,ft.buffer.byteLength=Pt),Kt=Bt,!Bt){switch(ft.buffer.dtype){case 5121:case 5120:Kt=5121;break;case 5123:case 5122:Kt=5123;break;case 5125:case 5124:Kt=5125}ft.buffer.dtype=Kt}ft.type=Kt,0>(Et=Ct)&&(Et=ft.buffer.byteLength,Kt===5123?Et>>=1:Kt===5125&&(Et>>=2)),ft.vertCount=Et,Et=xt,0>xt&&(Et=4,(xt=ft.buffer.dimension)===1&&(Et=0),xt===2&&(Et=1),xt===3&&(Et=4)),ft.primType=Et}function at(ft){it.elementsCount--,delete Ze[ft.id],ft.buffer.destroy(),ft.buffer=null}var Ze={},ht=0,vt={uint8:5121,uint16:5123};We.oes_element_index_uint&&(vt.uint32=5125),Fe.prototype.bind=function(){this.buffer.bind()};var mt=[];return{create:function(ft,Et){function Tt(Pt){if(Pt)if(typeof Pt=="number")xt(Pt),Ct.primType=4,Ct.vertCount=0|Pt,Ct.type=5121;else{var Bt=null,Kt=35044,sn=-1,Gt=-1,Yt=0,rn=0;Array.isArray(Pt)||ve(Pt)||n(Pt)?Bt=Pt:("data"in Pt&&(Bt=Pt.data),"usage"in Pt&&(Kt=_e[Pt.usage]),"primitive"in Pt&&(sn=Ee[Pt.primitive]),"count"in Pt&&(Gt=0|Pt.count),"type"in Pt&&(rn=vt[Pt.type]),"length"in Pt?Yt=0|Pt.length:(Yt=Gt,rn===5123||rn===5122?Yt*=2:rn!==5125&&rn!==5124||(Yt*=4))),Be(Ct,Bt,Kt,sn,Gt,Yt,rn)}else xt(),Ct.primType=4,Ct.vertCount=0,Ct.type=5121;return Tt}var xt=st.create(null,34963,!0),Ct=new Fe(xt._buffer);return it.elementsCount++,Tt(ft),Tt._reglType="elements",Tt._elements=Ct,Tt.subdata=function(Pt,Bt){return xt.subdata(Pt,Bt),Tt},Tt.destroy=function(){at(Ct)},Tt},createStream:function(ft){var Et=mt.pop();return Et||(Et=new Fe(st.create(null,34963,!0,!1)._buffer)),Be(Et,ft,35040,-1,-1,0,0),Et},destroyStream:function(ft){mt.push(ft)},getElements:function(ft){return typeof ft=="function"&&ft._elements instanceof Fe?ft._elements:null},clear:function(){be(Ze).forEach(at)}}}function f(Ne){for(var We=de.allocType(5123,Ne.length),st=0;st<Ne.length;++st)if(isNaN(Ne[st]))We[st]=65535;else if(Ne[st]===1/0)We[st]=31744;else if(Ne[st]===-1/0)We[st]=64512;else{Te[0]=Ne[st];var it=(Be=Me[0])>>>31<<15,Fe=(Be<<1>>>24)-127,Be=Be>>13&1023;We[st]=-24>Fe?it:-14>Fe?it+(Be+1024>>-14-Fe):15<Fe?it+31744:it+(Fe+15<<10)+Be}return We}function b(Ne){return Array.isArray(Ne)||ve(Ne)}function v(Ne){return"[object "+Ne+"]"}function d(Ne){return Array.isArray(Ne)&&(Ne.length===0||typeof Ne[0]=="number")}function m(Ne){return!(!Array.isArray(Ne)||Ne.length===0||!b(Ne[0]))}function x(Ne){return Object.prototype.toString.call(Ne)}function y(Ne){if(!Ne)return!1;var We=x(Ne);return 0<=qe.indexOf(We)||d(Ne)||m(Ne)||n(Ne)}function T(Ne,We){Ne.type===36193?(Ne.data=f(We),de.freeType(We)):Ne.data=We}function h(Ne,We,st,it,Fe,Be){if(Ne=ot[Ne]!==void 0?ot[Ne]:he[Ne]*Je[We],Be&&(Ne*=6),Fe){for(it=0;1<=st;)it+=Ne*st*st,st/=2;return it}return Ne*st*it}function E(Ne,We,st,it,Fe,Be,at){function Ze(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function ht(Xt,yn){Xt.internalformat=yn.internalformat,Xt.format=yn.format,Xt.type=yn.type,Xt.compressed=yn.compressed,Xt.premultiplyAlpha=yn.premultiplyAlpha,Xt.flipY=yn.flipY,Xt.unpackAlignment=yn.unpackAlignment,Xt.colorSpace=yn.colorSpace,Xt.width=yn.width,Xt.height=yn.height,Xt.channels=yn.channels}function vt(Xt,yn){if(typeof yn=="object"&&yn){"premultiplyAlpha"in yn&&(Xt.premultiplyAlpha=yn.premultiplyAlpha),"flipY"in yn&&(Xt.flipY=yn.flipY),"alignment"in yn&&(Xt.unpackAlignment=yn.alignment),"colorSpace"in yn&&(Xt.colorSpace=Fn[yn.colorSpace]),"type"in yn&&(Xt.type=In[yn.type]);var Ot=Xt.width,Jt=Xt.height,nn=Xt.channels,_n=!1;"shape"in yn?(Ot=yn.shape[0],Jt=yn.shape[1],yn.shape.length===3&&(nn=yn.shape[2],_n=!0)):("radius"in yn&&(Ot=Jt=yn.radius),"width"in yn&&(Ot=yn.width),"height"in yn&&(Jt=yn.height),"channels"in yn&&(nn=yn.channels,_n=!0)),Xt.width=0|Ot,Xt.height=0|Jt,Xt.channels=0|nn,Ot=!1,"format"in yn&&(Ot=yn.format,Jt=Xt.internalformat=Hn[Ot],Xt.format=wn[Jt],Ot in In&&!("type"in yn)&&(Xt.type=In[Ot]),Ot in Un&&(Xt.compressed=!0),Ot=!0),!_n&&Ot?Xt.channels=he[Xt.format]:_n&&!Ot&&Xt.channels!==Ie[Xt.format]&&(Xt.format=Xt.internalformat=Ie[Xt.channels])}}function mt(Xt){Ne.pixelStorei(37440,Xt.flipY),Ne.pixelStorei(37441,Xt.premultiplyAlpha),Ne.pixelStorei(37443,Xt.colorSpace),Ne.pixelStorei(3317,Xt.unpackAlignment)}function ft(){Ze.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Et(Xt,yn){var Ot=null;if(y(yn)?Ot=yn:yn&&(vt(Xt,yn),"x"in yn&&(Xt.xOffset=0|yn.x),"y"in yn&&(Xt.yOffset=0|yn.y),y(yn.data)&&(Ot=yn.data)),yn.copy){var Jt=Fe.viewportWidth,nn=Fe.viewportHeight;Xt.width=Xt.width||Jt-Xt.xOffset,Xt.height=Xt.height||nn-Xt.yOffset,Xt.needsCopy=!0}else if(Ot){if(ve(Ot))Xt.channels=Xt.channels||4,Xt.data=Ot,"type"in yn||Xt.type!==5121||(Xt.type=0|Se[Object.prototype.toString.call(Ot)]);else if(d(Ot)){switch(Xt.channels=Xt.channels||4,nn=(Jt=Ot).length,Xt.type){case 5121:case 5123:case 5125:case 5126:(nn=de.allocType(Xt.type,nn)).set(Jt),Xt.data=nn;break;case 36193:Xt.data=f(Jt)}Xt.alignment=1,Xt.needsFree=!0}else if(n(Ot)){Jt=Ot.data,Array.isArray(Jt)||Xt.type!==5121||(Xt.type=0|Se[Object.prototype.toString.call(Jt)]),nn=Ot.shape;var _n,xn,kn,hn,en=Ot.stride;nn.length===3?(kn=nn[2],hn=en[2]):hn=kn=1,_n=nn[0],xn=nn[1],nn=en[0],en=en[1],Xt.alignment=1,Xt.width=_n,Xt.height=xn,Xt.channels=kn,Xt.format=Xt.internalformat=Ie[kn],Xt.needsFree=!0,_n=hn,Ot=Ot.offset,kn=Xt.width,hn=Xt.height,xn=Xt.channels;for(var tn=de.allocType(Xt.type===36193?5126:Xt.type,kn*hn*xn),un=0,dn=0;dn<hn;++dn)for(var En=0;En<kn;++En)for(var zn=0;zn<xn;++zn)tn[un++]=Jt[nn*En+en*dn+_n*zn+Ot];T(Xt,tn)}else if(x(Ot)===xe||x(Ot)===ke||x(Ot)===ze)x(Ot)===xe||x(Ot)===ke?Xt.element=Ot:Xt.element=Ot.canvas,Xt.width=Xt.element.width,Xt.height=Xt.element.height,Xt.channels=4;else if(x(Ot)===Re)Xt.element=Ot,Xt.width=Ot.width,Xt.height=Ot.height,Xt.channels=4;else if(x(Ot)===Oe)Xt.element=Ot,Xt.width=Ot.naturalWidth,Xt.height=Ot.naturalHeight,Xt.channels=4;else if(x(Ot)===Ve)Xt.element=Ot,Xt.width=Ot.videoWidth,Xt.height=Ot.videoHeight,Xt.channels=4;else if(m(Ot)){for(Jt=Xt.width||Ot[0].length,nn=Xt.height||Ot.length,en=Xt.channels,en=b(Ot[0][0])?en||Ot[0][0].length:en||1,_n=me.shape(Ot),kn=1,hn=0;hn<_n.length;++hn)kn*=_n[hn];kn=de.allocType(Xt.type===36193?5126:Xt.type,kn),me.flatten(Ot,_n,"",kn),T(Xt,kn),Xt.alignment=1,Xt.width=Jt,Xt.height=nn,Xt.channels=en,Xt.format=Xt.internalformat=Ie[en],Xt.needsFree=!0}}else Xt.width=Xt.width||1,Xt.height=Xt.height||1,Xt.channels=Xt.channels||4}function Tt(Xt,yn,Ot,Jt,nn){var _n=Xt.element,xn=Xt.data,kn=Xt.internalformat,hn=Xt.format,en=Xt.type,tn=Xt.width,un=Xt.height;mt(Xt),_n?Ne.texSubImage2D(yn,nn,Ot,Jt,hn,en,_n):Xt.compressed?Ne.compressedTexSubImage2D(yn,nn,Ot,Jt,kn,tn,un,xn):Xt.needsCopy?(it(),Ne.copyTexSubImage2D(yn,nn,Ot,Jt,Xt.xOffset,Xt.yOffset,tn,un)):Ne.texSubImage2D(yn,nn,Ot,Jt,tn,un,hn,en,xn)}function xt(){return mn.pop()||new ft}function Ct(Xt){Xt.needsFree&&de.freeType(Xt.data),ft.call(Xt),mn.push(Xt)}function Pt(){Ze.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Bt(Xt,yn,Ot){var Jt=Xt.images[0]=xt();Xt.mipmask=1,Jt.width=Xt.width=yn,Jt.height=Xt.height=Ot,Jt.channels=Xt.channels=4}function Kt(Xt,yn){var Ot=null;if(y(yn))ht(Ot=Xt.images[0]=xt(),Xt),Et(Ot,yn),Xt.mipmask=1;else if(vt(Xt,yn),Array.isArray(yn.mipmap))for(var Jt=yn.mipmap,nn=0;nn<Jt.length;++nn)ht(Ot=Xt.images[nn]=xt(),Xt),Ot.width>>=nn,Ot.height>>=nn,Et(Ot,Jt[nn]),Xt.mipmask|=1<<nn;else ht(Ot=Xt.images[0]=xt(),Xt),Et(Ot,yn),Xt.mipmask=1;ht(Xt,Xt.images[0])}function sn(Xt,yn){for(var Ot=Xt.images,Jt=0;Jt<Ot.length&&Ot[Jt];++Jt){var nn=Ot[Jt],_n=yn,xn=Jt,kn=nn.element,hn=nn.data,en=nn.internalformat,tn=nn.format,un=nn.type,dn=nn.width,En=nn.height;mt(nn),kn?Ne.texImage2D(_n,xn,tn,tn,un,kn):nn.compressed?Ne.compressedTexImage2D(_n,xn,en,dn,En,0,hn):nn.needsCopy?(it(),Ne.copyTexImage2D(_n,xn,tn,nn.xOffset,nn.yOffset,dn,En,0)):Ne.texImage2D(_n,xn,tn,dn,En,0,tn,un,hn||null)}}function Gt(){var Xt=Pn.pop()||new Pt;Ze.call(Xt);for(var yn=Xt.mipmask=0;16>yn;++yn)Xt.images[yn]=null;return Xt}function Yt(Xt){for(var yn=Xt.images,Ot=0;Ot<yn.length;++Ot)yn[Ot]&&Ct(yn[Ot]),yn[Ot]=null;Pn.push(Xt)}function rn(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Ln(Xt,yn){"min"in yn&&(Xt.minFilter=Rn[yn.min],0<=Le.indexOf(Xt.minFilter)&&!("faces"in yn)&&(Xt.genMipmaps=!0)),"mag"in yn&&(Xt.magFilter=Cn[yn.mag]);var Ot=Xt.wrapS,Jt=Xt.wrapT;if("wrap"in yn){var nn=yn.wrap;typeof nn=="string"?Ot=Jt=An[nn]:Array.isArray(nn)&&(Ot=An[nn[0]],Jt=An[nn[1]])}else"wrapS"in yn&&(Ot=An[yn.wrapS]),"wrapT"in yn&&(Jt=An[yn.wrapT]);if(Xt.wrapS=Ot,Xt.wrapT=Jt,"anisotropic"in yn&&(Xt.anisotropic=yn.anisotropic),"mipmap"in yn){switch(Ot=!1,typeof yn.mipmap){case"string":Xt.mipmapHint=pn[yn.mipmap],Ot=Xt.genMipmaps=!0;break;case"boolean":Ot=Xt.genMipmaps=yn.mipmap;break;case"object":Xt.genMipmaps=!1,Ot=!0}!Ot||"min"in yn||(Xt.minFilter=9984)}}function Sn(Xt,yn){Ne.texParameteri(yn,10241,Xt.minFilter),Ne.texParameteri(yn,10240,Xt.magFilter),Ne.texParameteri(yn,10242,Xt.wrapS),Ne.texParameteri(yn,10243,Xt.wrapT),We.ext_texture_filter_anisotropic&&Ne.texParameteri(yn,34046,Xt.anisotropic),Xt.genMipmaps&&(Ne.hint(33170,Xt.mipmapHint),Ne.generateMipmap(yn))}function gn(Xt){Ze.call(this),this.mipmask=0,this.internalformat=6408,this.id=Wn++,this.refCount=1,this.target=Xt,this.texture=Ne.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new rn,at.profile&&(this.stats={size:0})}function $t(Xt){Ne.activeTexture(33984),Ne.bindTexture(Xt.target,Xt.texture)}function cn(){var Xt=rr[0];Xt?Ne.bindTexture(Xt.target,Xt.texture):Ne.bindTexture(3553,null)}function an(Xt){var yn=Xt.texture,Ot=Xt.unit,Jt=Xt.target;0<=Ot&&(Ne.activeTexture(33984+Ot),Ne.bindTexture(Jt,null),rr[Ot]=null),Ne.deleteTexture(yn),Xt.texture=null,Xt.params=null,Xt.pixels=null,Xt.refCount=0,delete Bn[Xt.id],Be.textureCount--}var pn={"don't care":4352,"dont care":4352,nice:4354,fast:4353},An={repeat:10497,clamp:33071,mirror:33648},Cn={nearest:9728,linear:9729},Rn=te({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Cn),Fn={none:0,browser:37444},In={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Hn={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Un={};We.ext_srgb&&(Hn.srgb=35904,Hn.srgba=35906),We.oes_texture_float&&(In.float32=In.float=5126),We.oes_texture_half_float&&(In.float16=In["half float"]=36193),We.webgl_depth_texture&&(te(Hn,{depth:6402,"depth stencil":34041}),te(In,{uint16:5123,uint32:5125,"depth stencil":34042})),We.webgl_compressed_texture_s3tc&&te(Un,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),We.webgl_compressed_texture_atc&&te(Un,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),We.webgl_compressed_texture_pvrtc&&te(Un,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),We.webgl_compressed_texture_etc1&&(Un["rgb etc1"]=36196);var ar=Array.prototype.slice.call(Ne.getParameter(34467));Object.keys(Un).forEach(function(Xt){var yn=Un[Xt];0<=ar.indexOf(yn)&&(Hn[Xt]=yn)});var ur=Object.keys(Hn);st.textureFormats=ur;var cr=[];Object.keys(Hn).forEach(function(Xt){cr[Hn[Xt]]=Xt});var er=[];Object.keys(In).forEach(function(Xt){er[In[Xt]]=Xt});var Tr=[];Object.keys(Cn).forEach(function(Xt){Tr[Cn[Xt]]=Xt});var Ht=[];Object.keys(Rn).forEach(function(Xt){Ht[Rn[Xt]]=Xt});var on=[];Object.keys(An).forEach(function(Xt){on[An[Xt]]=Xt});var wn=ur.reduce(function(Xt,yn){var Ot=Hn[yn];return Ot===6409||Ot===6406||Ot===6409||Ot===6410||Ot===6402||Ot===34041||We.ext_srgb&&(Ot===35904||Ot===35906)?Xt[Ot]=Ot:Ot===32855||0<=yn.indexOf("rgba")?Xt[Ot]=6408:Xt[Ot]=6407,Xt},{}),mn=[],Pn=[],Wn=0,Bn={},jn=st.maxTextureUnits,rr=Array(jn).map(function(){return null});return te(gn.prototype,{bind:function(){this.bindCount+=1;var Xt=this.unit;if(0>Xt){for(var yn=0;yn<jn;++yn){var Ot=rr[yn];if(Ot){if(0<Ot.bindCount)continue;Ot.unit=-1}rr[yn]=this,Xt=yn;break}at.profile&&Be.maxTextureUnits<Xt+1&&(Be.maxTextureUnits=Xt+1),this.unit=Xt,Ne.activeTexture(33984+Xt),Ne.bindTexture(this.target,this.texture)}return Xt},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&an(this)}}),at.profile&&(Be.getTotalTextureSize=function(){var Xt=0;return Object.keys(Bn).forEach(function(yn){Xt+=Bn[yn].stats.size}),Xt}),{create2D:function(Xt,yn){function Ot(nn,_n){var xn=Jt.texInfo;rn.call(xn);var kn=Gt();return typeof nn=="number"?Bt(kn,0|nn,typeof _n=="number"?0|_n:0|nn):nn?(Ln(xn,nn),Kt(kn,nn)):Bt(kn,1,1),xn.genMipmaps&&(kn.mipmask=(kn.width<<1)-1),Jt.mipmask=kn.mipmask,ht(Jt,kn),Jt.internalformat=kn.internalformat,Ot.width=kn.width,Ot.height=kn.height,$t(Jt),sn(kn,3553),Sn(xn,3553),cn(),Yt(kn),at.profile&&(Jt.stats.size=h(Jt.internalformat,Jt.type,kn.width,kn.height,xn.genMipmaps,!1)),Ot.format=cr[Jt.internalformat],Ot.type=er[Jt.type],Ot.mag=Tr[xn.magFilter],Ot.min=Ht[xn.minFilter],Ot.wrapS=on[xn.wrapS],Ot.wrapT=on[xn.wrapT],Ot}var Jt=new gn(3553);return Bn[Jt.id]=Jt,Be.textureCount++,Ot(Xt,yn),Ot.subimage=function(nn,_n,xn,kn){_n|=0,xn|=0,kn|=0;var hn=xt();return ht(hn,Jt),hn.width=0,hn.height=0,Et(hn,nn),hn.width=hn.width||(Jt.width>>kn)-_n,hn.height=hn.height||(Jt.height>>kn)-xn,$t(Jt),Tt(hn,3553,_n,xn,kn),cn(),Ct(hn),Ot},Ot.resize=function(nn,_n){var xn=0|nn,kn=0|_n||xn;if(xn===Jt.width&&kn===Jt.height)return Ot;Ot.width=Jt.width=xn,Ot.height=Jt.height=kn,$t(Jt);for(var hn=0;Jt.mipmask>>hn;++hn){var en=xn>>hn,tn=kn>>hn;if(!en||!tn)break;Ne.texImage2D(3553,hn,Jt.format,en,tn,0,Jt.format,Jt.type,null)}return cn(),at.profile&&(Jt.stats.size=h(Jt.internalformat,Jt.type,xn,kn,!1,!1)),Ot},Ot._reglType="texture2d",Ot._texture=Jt,at.profile&&(Ot.stats=Jt.stats),Ot.destroy=function(){Jt.decRef()},Ot},createCube:function(Xt,yn,Ot,Jt,nn,_n){function xn(en,tn,un,dn,En,zn){var qn,Gn=kn.texInfo;for(rn.call(Gn),qn=0;6>qn;++qn)hn[qn]=Gt();if(typeof en!="number"&&en){if(typeof en=="object")if(tn)Kt(hn[0],en),Kt(hn[1],tn),Kt(hn[2],un),Kt(hn[3],dn),Kt(hn[4],En),Kt(hn[5],zn);else if(Ln(Gn,en),vt(kn,en),"faces"in en)for(en=en.faces,qn=0;6>qn;++qn)ht(hn[qn],kn),Kt(hn[qn],en[qn]);else for(qn=0;6>qn;++qn)Kt(hn[qn],en)}else for(en=0|en||1,qn=0;6>qn;++qn)Bt(hn[qn],en,en);for(ht(kn,hn[0]),kn.mipmask=Gn.genMipmaps?(hn[0].width<<1)-1:hn[0].mipmask,kn.internalformat=hn[0].internalformat,xn.width=hn[0].width,xn.height=hn[0].height,$t(kn),qn=0;6>qn;++qn)sn(hn[qn],34069+qn);for(Sn(Gn,34067),cn(),at.profile&&(kn.stats.size=h(kn.internalformat,kn.type,xn.width,xn.height,Gn.genMipmaps,!0)),xn.format=cr[kn.internalformat],xn.type=er[kn.type],xn.mag=Tr[Gn.magFilter],xn.min=Ht[Gn.minFilter],xn.wrapS=on[Gn.wrapS],xn.wrapT=on[Gn.wrapT],qn=0;6>qn;++qn)Yt(hn[qn]);return xn}var kn=new gn(34067);Bn[kn.id]=kn,Be.cubeCount++;var hn=Array(6);return xn(Xt,yn,Ot,Jt,nn,_n),xn.subimage=function(en,tn,un,dn,En){un|=0,dn|=0,En|=0;var zn=xt();return ht(zn,kn),zn.width=0,zn.height=0,Et(zn,tn),zn.width=zn.width||(kn.width>>En)-un,zn.height=zn.height||(kn.height>>En)-dn,$t(kn),Tt(zn,34069+en,un,dn,En),cn(),Ct(zn),xn},xn.resize=function(en){if((en|=0)!==kn.width){xn.width=kn.width=en,xn.height=kn.height=en,$t(kn);for(var tn=0;6>tn;++tn)for(var un=0;kn.mipmask>>un;++un)Ne.texImage2D(34069+tn,un,kn.format,en>>un,en>>un,0,kn.format,kn.type,null);return cn(),at.profile&&(kn.stats.size=h(kn.internalformat,kn.type,xn.width,xn.height,!1,!0)),xn}},xn._reglType="textureCube",xn._texture=kn,at.profile&&(xn.stats=kn.stats),xn.destroy=function(){kn.decRef()},xn},clear:function(){for(var Xt=0;Xt<jn;++Xt)Ne.activeTexture(33984+Xt),Ne.bindTexture(3553,null),rr[Xt]=null;be(Bn).forEach(an),Be.cubeCount=0,Be.textureCount=0},getTexture:function(Xt){return null},restore:function(){for(var Xt=0;Xt<jn;++Xt){var yn=rr[Xt];yn&&(yn.bindCount=0,yn.unit=-1,rr[Xt]=null)}be(Bn).forEach(function(Ot){Ot.texture=Ne.createTexture(),Ne.bindTexture(Ot.target,Ot.texture);for(var Jt=0;32>Jt;++Jt)if(Ot.mipmask&1<<Jt)if(Ot.target===3553)Ne.texImage2D(3553,Jt,Ot.internalformat,Ot.width>>Jt,Ot.height>>Jt,0,Ot.internalformat,Ot.type,null);else for(var nn=0;6>nn;++nn)Ne.texImage2D(34069+nn,Jt,Ot.internalformat,Ot.width>>Jt,Ot.height>>Jt,0,Ot.internalformat,Ot.type,null);Sn(Ot.texInfo,Ot.target)})},refresh:function(){for(var Xt=0;Xt<jn;++Xt){var yn=rr[Xt];yn&&(yn.bindCount=0,yn.unit=-1,rr[Xt]=null),Ne.activeTexture(33984+Xt),Ne.bindTexture(3553,null),Ne.bindTexture(34067,null)}}}}function k(Ne,We,st,it,Fe,Be){function at(gn,$t,cn){this.target=gn,this.texture=$t,this.renderbuffer=cn;var an=gn=0;$t?(gn=$t.width,an=$t.height):cn&&(gn=cn.width,an=cn.height),this.width=gn,this.height=an}function Ze(gn){gn&&(gn.texture&&gn.texture._texture.decRef(),gn.renderbuffer&&gn.renderbuffer._renderbuffer.decRef())}function ht(gn,$t,cn){gn&&(gn.texture?gn.texture._texture.refCount+=1:gn.renderbuffer._renderbuffer.refCount+=1)}function vt(gn,$t){$t&&($t.texture?Ne.framebufferTexture2D(36160,gn,$t.target,$t.texture._texture.texture,0):Ne.framebufferRenderbuffer(36160,gn,36161,$t.renderbuffer._renderbuffer.renderbuffer))}function mt(gn){var $t=3553,cn=null,an=null,pn=gn;return typeof gn=="object"&&(pn=gn.data,"target"in gn&&($t=0|gn.target)),(gn=pn._reglType)==="texture2d"||gn==="textureCube"?cn=pn:gn==="renderbuffer"&&(an=pn,$t=36161),new at($t,cn,an)}function ft(gn,$t,cn,an,pn){return cn?((gn=it.create2D({width:gn,height:$t,format:an,type:pn}))._texture.refCount=0,new at(3553,gn,null)):((gn=Fe.create({width:gn,height:$t,format:an}))._renderbuffer.refCount=0,new at(36161,null,gn))}function Et(gn){return gn&&(gn.texture||gn.renderbuffer)}function Tt(gn,$t,cn){gn&&(gn.texture?gn.texture.resize($t,cn):gn.renderbuffer&&gn.renderbuffer.resize($t,cn),gn.width=$t,gn.height=cn)}function xt(){this.id=Ln++,Sn[this.id]=this,this.framebuffer=Ne.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Ct(gn){gn.colorAttachments.forEach(Ze),Ze(gn.depthAttachment),Ze(gn.stencilAttachment),Ze(gn.depthStencilAttachment)}function Pt(gn){Ne.deleteFramebuffer(gn.framebuffer),gn.framebuffer=null,Be.framebufferCount--,delete Sn[gn.id]}function Bt(gn){var $t;Ne.bindFramebuffer(36160,gn.framebuffer);var cn=gn.colorAttachments;for($t=0;$t<cn.length;++$t)vt(36064+$t,cn[$t]);for($t=cn.length;$t<st.maxColorAttachments;++$t)Ne.framebufferTexture2D(36160,36064+$t,3553,null,0);Ne.framebufferTexture2D(36160,33306,3553,null,0),Ne.framebufferTexture2D(36160,36096,3553,null,0),Ne.framebufferTexture2D(36160,36128,3553,null,0),vt(36096,gn.depthAttachment),vt(36128,gn.stencilAttachment),vt(33306,gn.depthStencilAttachment),Ne.checkFramebufferStatus(36160),Ne.isContextLost(),Ne.bindFramebuffer(36160,sn.next?sn.next.framebuffer:null),sn.cur=sn.next,Ne.getError()}function Kt(gn,$t){function cn(pn,An){var Cn,Rn=0,Fn=0,In=!0,Hn=!0;Cn=null;var Un=!0,ar="rgba",ur="uint8",cr=1,er=null,Tr=null,Ht=null,on=!1;typeof pn=="number"?(Rn=0|pn,Fn=0|An||Rn):pn?("shape"in pn?(Rn=(Fn=pn.shape)[0],Fn=Fn[1]):("radius"in pn&&(Rn=Fn=pn.radius),"width"in pn&&(Rn=pn.width),"height"in pn&&(Fn=pn.height)),("color"in pn||"colors"in pn)&&(Cn=pn.color||pn.colors,Array.isArray(Cn)),Cn||("colorCount"in pn&&(cr=0|pn.colorCount),"colorTexture"in pn&&(Un=!!pn.colorTexture,ar="rgba4"),"colorType"in pn&&(ur=pn.colorType,!Un)&&(ur==="half float"||ur==="float16"?ar="rgba16f":ur!=="float"&&ur!=="float32"||(ar="rgba32f")),"colorFormat"in pn&&(ar=pn.colorFormat,0<=Gt.indexOf(ar)?Un=!0:0<=Yt.indexOf(ar)&&(Un=!1))),("depthTexture"in pn||"depthStencilTexture"in pn)&&(on=!(!pn.depthTexture&&!pn.depthStencilTexture)),"depth"in pn&&(typeof pn.depth=="boolean"?In=pn.depth:(er=pn.depth,Hn=!1)),"stencil"in pn&&(typeof pn.stencil=="boolean"?Hn=pn.stencil:(Tr=pn.stencil,In=!1)),"depthStencil"in pn&&(typeof pn.depthStencil=="boolean"?In=Hn=pn.depthStencil:(Ht=pn.depthStencil,Hn=In=!1))):Rn=Fn=1;var wn=null,mn=null,Pn=null,Wn=null;if(Array.isArray(Cn))wn=Cn.map(mt);else if(Cn)wn=[mt(Cn)];else for(wn=Array(cr),Cn=0;Cn<cr;++Cn)wn[Cn]=ft(Rn,Fn,Un,ar,ur);for(Rn=Rn||wn[0].width,Fn=Fn||wn[0].height,er?mn=mt(er):In&&!Hn&&(mn=ft(Rn,Fn,on,"depth","uint32")),Tr?Pn=mt(Tr):Hn&&!In&&(Pn=ft(Rn,Fn,!1,"stencil","uint8")),Ht?Wn=mt(Ht):!er&&!Tr&&Hn&&In&&(Wn=ft(Rn,Fn,on,"depth stencil","depth stencil")),In=null,Cn=0;Cn<wn.length;++Cn)ht(wn[Cn]),wn[Cn]&&wn[Cn].texture&&(Hn=_t[wn[Cn].texture._texture.format]*yt[wn[Cn].texture._texture.type],In===null&&(In=Hn));return ht(mn),ht(Pn),ht(Wn),Ct(an),an.width=Rn,an.height=Fn,an.colorAttachments=wn,an.depthAttachment=mn,an.stencilAttachment=Pn,an.depthStencilAttachment=Wn,cn.color=wn.map(Et),cn.depth=Et(mn),cn.stencil=Et(Pn),cn.depthStencil=Et(Wn),cn.width=an.width,cn.height=an.height,Bt(an),cn}var an=new xt;return Be.framebufferCount++,cn(gn,$t),te(cn,{resize:function(pn,An){var Cn=Math.max(0|pn,1),Rn=Math.max(0|An||Cn,1);if(Cn===an.width&&Rn===an.height)return cn;for(var Fn=an.colorAttachments,In=0;In<Fn.length;++In)Tt(Fn[In],Cn,Rn);return Tt(an.depthAttachment,Cn,Rn),Tt(an.stencilAttachment,Cn,Rn),Tt(an.depthStencilAttachment,Cn,Rn),an.width=cn.width=Cn,an.height=cn.height=Rn,Bt(an),cn},_reglType:"framebuffer",_framebuffer:an,destroy:function(){Pt(an),Ct(an)},use:function(pn){sn.setFBO({framebuffer:cn},pn)}})}var sn={cur:null,next:null,dirty:!1,setFBO:null},Gt=["rgba"],Yt=["rgba4","rgb565","rgb5 a1"];We.ext_srgb&&Yt.push("srgba"),We.ext_color_buffer_half_float&&Yt.push("rgba16f","rgb16f"),We.webgl_color_buffer_float&&Yt.push("rgba32f");var rn=["uint8"];We.oes_texture_half_float&&rn.push("half float","float16"),We.oes_texture_float&&rn.push("float","float32");var Ln=0,Sn={};return te(sn,{getFramebuffer:function(gn){return typeof gn=="function"&&gn._reglType==="framebuffer"&&(gn=gn._framebuffer)instanceof xt?gn:null},create:Kt,createCube:function(gn){function $t(an){var pn,An={color:null},Cn=0,Rn=null;pn="rgba";var Fn="uint8",In=1;if(typeof an=="number"?Cn=0|an:an?("shape"in an?Cn=an.shape[0]:("radius"in an&&(Cn=0|an.radius),"width"in an?Cn=0|an.width:"height"in an&&(Cn=0|an.height)),("color"in an||"colors"in an)&&(Rn=an.color||an.colors,Array.isArray(Rn)),Rn||("colorCount"in an&&(In=0|an.colorCount),"colorType"in an&&(Fn=an.colorType),"colorFormat"in an&&(pn=an.colorFormat)),"depth"in an&&(An.depth=an.depth),"stencil"in an&&(An.stencil=an.stencil),"depthStencil"in an&&(An.depthStencil=an.depthStencil)):Cn=1,Rn)if(Array.isArray(Rn))for(an=[],pn=0;pn<Rn.length;++pn)an[pn]=Rn[pn];else an=[Rn];else for(an=Array(In),Rn={radius:Cn,format:pn,type:Fn},pn=0;pn<In;++pn)an[pn]=it.createCube(Rn);for(An.color=Array(an.length),pn=0;pn<an.length;++pn)In=an[pn],Cn=Cn||In.width,An.color[pn]={target:34069,data:an[pn]};for(pn=0;6>pn;++pn){for(In=0;In<an.length;++In)An.color[In].target=34069+pn;0<pn&&(An.depth=cn[0].depth,An.stencil=cn[0].stencil,An.depthStencil=cn[0].depthStencil),cn[pn]?cn[pn](An):cn[pn]=Kt(An)}return te($t,{width:Cn,height:Cn,color:an})}var cn=Array(6);return $t(gn),te($t,{faces:cn,resize:function(an){var pn=0|an;if(pn===$t.width)return $t;var An=$t.color;for(an=0;an<An.length;++an)An[an].resize(pn);for(an=0;6>an;++an)cn[an].resize(pn);return $t.width=$t.height=pn,$t},_reglType:"framebufferCube",destroy:function(){cn.forEach(function(an){an.destroy()})}})},clear:function(){be(Sn).forEach(Pt)},restore:function(){sn.cur=null,sn.next=null,sn.dirty=!0,be(Sn).forEach(function(gn){gn.framebuffer=Ne.createFramebuffer(),Bt(gn)})}})}function L(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function P(Ne,We,st,it,Fe,Be,at){function Ze(){this.id=++mt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var Tt=We.oes_vertex_array_object;this.vao=Tt?Tt.createVertexArrayOES():null,ft[this.id]=this,this.buffers=[]}var ht=st.maxAttributes,vt=Array(ht);for(st=0;st<ht;++st)vt[st]=new L;var mt=0,ft={},Et={Record:L,scope:{},state:vt,currentVAO:null,targetVAO:null,restore:We.oes_vertex_array_object?function(){We.oes_vertex_array_object&&be(ft).forEach(function(Tt){Tt.refresh()})}:function(){},createVAO:function(Tt){function xt(Pt){var Bt;Array.isArray(Pt)?(Bt=Pt,Ct.elements&&Ct.ownsElements&&Ct.elements.destroy(),Ct.elements=null,Ct.ownsElements=!1,Ct.offset=0,Ct.count=0,Ct.instances=-1,Ct.primitive=4):(Pt.elements?(Bt=Pt.elements,Ct.ownsElements?(typeof Bt=="function"&&Bt._reglType==="elements"?Ct.elements.destroy():Ct.elements(Bt),Ct.ownsElements=!1):Be.getElements(Pt.elements)?(Ct.elements=Pt.elements,Ct.ownsElements=!1):(Ct.elements=Be.create(Pt.elements),Ct.ownsElements=!0)):(Ct.elements=null,Ct.ownsElements=!1),Bt=Pt.attributes,Ct.offset=0,Ct.count=-1,Ct.instances=-1,Ct.primitive=4,Ct.elements&&(Ct.count=Ct.elements._elements.vertCount,Ct.primitive=Ct.elements._elements.primType),"offset"in Pt&&(Ct.offset=0|Pt.offset),"count"in Pt&&(Ct.count=0|Pt.count),"instances"in Pt&&(Ct.instances=0|Pt.instances),"primitive"in Pt&&(Ct.primitive=Ee[Pt.primitive])),Pt={};var Kt=Ct.attributes;Kt.length=Bt.length;for(var sn=0;sn<Bt.length;++sn){var Gt,Yt=Bt[sn],rn=Kt[sn]=new L,Ln=Yt.data||Yt;Array.isArray(Ln)||ve(Ln)||n(Ln)?(Ct.buffers[sn]&&(Gt=Ct.buffers[sn],ve(Ln)&&Gt._buffer.byteLength>=Ln.byteLength?Gt.subdata(Ln):(Gt.destroy(),Ct.buffers[sn]=null)),Ct.buffers[sn]||(Gt=Ct.buffers[sn]=Fe.create(Yt,34962,!1,!0)),rn.buffer=Fe.getBuffer(Gt),rn.size=0|rn.buffer.dimension,rn.normalized=!1,rn.type=rn.buffer.dtype,rn.offset=0,rn.stride=0,rn.divisor=0,rn.state=1,Pt[sn]=1):Fe.getBuffer(Yt)?(rn.buffer=Fe.getBuffer(Yt),rn.size=0|rn.buffer.dimension,rn.normalized=!1,rn.type=rn.buffer.dtype,rn.offset=0,rn.stride=0,rn.divisor=0,rn.state=1):Fe.getBuffer(Yt.buffer)?(rn.buffer=Fe.getBuffer(Yt.buffer),rn.size=0|(+Yt.size||rn.buffer.dimension),rn.normalized=!!Yt.normalized||!1,rn.type="type"in Yt?we[Yt.type]:rn.buffer.dtype,rn.offset=0|(Yt.offset||0),rn.stride=0|(Yt.stride||0),rn.divisor=0|(Yt.divisor||0),rn.state=1):"x"in Yt&&(rn.x=+Yt.x||0,rn.y=+Yt.y||0,rn.z=+Yt.z||0,rn.w=+Yt.w||0,rn.state=2)}for(Gt=0;Gt<Ct.buffers.length;++Gt)!Pt[Gt]&&Ct.buffers[Gt]&&(Ct.buffers[Gt].destroy(),Ct.buffers[Gt]=null);return Ct.refresh(),xt}var Ct=new Ze;return it.vaoCount+=1,xt.destroy=function(){for(var Pt=0;Pt<Ct.buffers.length;++Pt)Ct.buffers[Pt]&&Ct.buffers[Pt].destroy();Ct.buffers.length=0,Ct.ownsElements&&(Ct.elements.destroy(),Ct.elements=null,Ct.ownsElements=!1),Ct.destroy()},xt._vao=Ct,xt._reglType="vao",xt(Tt)},getVAO:function(Tt){return typeof Tt=="function"&&Tt._vao?Tt._vao:null},destroyBuffer:function(Tt){for(var xt=0;xt<vt.length;++xt){var Ct=vt[xt];Ct.buffer===Tt&&(Ne.disableVertexAttribArray(xt),Ct.buffer=null)}},setVAO:We.oes_vertex_array_object?function(Tt){if(Tt!==Et.currentVAO){var xt=We.oes_vertex_array_object;Tt?xt.bindVertexArrayOES(Tt.vao):xt.bindVertexArrayOES(null),Et.currentVAO=Tt}}:function(Tt){if(Tt!==Et.currentVAO){if(Tt)Tt.bindAttrs();else{for(var xt=We.angle_instanced_arrays,Ct=0;Ct<vt.length;++Ct){var Pt=vt[Ct];Pt.buffer?(Ne.enableVertexAttribArray(Ct),Pt.buffer.bind(),Ne.vertexAttribPointer(Ct,Pt.size,Pt.type,Pt.normalized,Pt.stride,Pt.offfset),xt&&Pt.divisor&&xt.vertexAttribDivisorANGLE(Ct,Pt.divisor)):(Ne.disableVertexAttribArray(Ct),Ne.vertexAttrib4f(Ct,Pt.x,Pt.y,Pt.z,Pt.w))}at.elements?Ne.bindBuffer(34963,at.elements.buffer.buffer):Ne.bindBuffer(34963,null)}Et.currentVAO=Tt}},clear:We.oes_vertex_array_object?function(){be(ft).forEach(function(Tt){Tt.destroy()})}:function(){}};return Ze.prototype.bindAttrs=function(){for(var Tt=We.angle_instanced_arrays,xt=this.attributes,Ct=0;Ct<xt.length;++Ct){var Pt=xt[Ct];Pt.buffer?(Ne.enableVertexAttribArray(Ct),Ne.bindBuffer(34962,Pt.buffer.buffer),Ne.vertexAttribPointer(Ct,Pt.size,Pt.type,Pt.normalized,Pt.stride,Pt.offset),Tt&&Pt.divisor&&Tt.vertexAttribDivisorANGLE(Ct,Pt.divisor)):(Ne.disableVertexAttribArray(Ct),Ne.vertexAttrib4f(Ct,Pt.x,Pt.y,Pt.z,Pt.w))}for(Tt=xt.length;Tt<ht;++Tt)Ne.disableVertexAttribArray(Tt);(Tt=Be.getElements(this.elements))?Ne.bindBuffer(34963,Tt.buffer.buffer):Ne.bindBuffer(34963,null)},Ze.prototype.refresh=function(){var Tt=We.oes_vertex_array_object;Tt&&(Tt.bindVertexArrayOES(this.vao),this.bindAttrs(),Et.currentVAO=null,Tt.bindVertexArrayOES(null))},Ze.prototype.destroy=function(){if(this.vao){var Tt=We.oes_vertex_array_object;this===Et.currentVAO&&(Et.currentVAO=null,Tt.bindVertexArrayOES(null)),Tt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ft[this.id]&&(delete ft[this.id],--it.vaoCount)},Et}function I(Ne,We,st,it){function Fe(xt,Ct,Pt,Bt){this.name=xt,this.id=Ct,this.location=Pt,this.info=Bt}function Be(xt,Ct){for(var Pt=0;Pt<xt.length;++Pt)if(xt[Pt].id===Ct.id)return void(xt[Pt].location=Ct.location);xt.push(Ct)}function at(xt,Ct,Pt){if(!(Kt=(Pt=xt===35632?vt:mt)[Ct])){var Bt=We.str(Ct),Kt=Ne.createShader(xt);Ne.shaderSource(Kt,Bt),Ne.compileShader(Kt),Pt[Ct]=Kt}return Kt}function Ze(xt,Ct){this.id=Tt++,this.fragId=xt,this.vertId=Ct,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,it.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function ht(xt,Ct,Pt){var Bt;Bt=at(35632,xt.fragId);var Kt=at(35633,xt.vertId);if(Ct=xt.program=Ne.createProgram(),Ne.attachShader(Ct,Bt),Ne.attachShader(Ct,Kt),Pt)for(Bt=0;Bt<Pt.length;++Bt)Kt=Pt[Bt],Ne.bindAttribLocation(Ct,Kt[0],Kt[1]);Ne.linkProgram(Ct),Kt=Ne.getProgramParameter(Ct,35718),it.profile&&(xt.stats.uniformsCount=Kt);var sn=xt.uniforms;for(Bt=0;Bt<Kt;++Bt)if(Pt=Ne.getActiveUniform(Ct,Bt))if(1<Pt.size)for(var Gt=0;Gt<Pt.size;++Gt){var Yt=Pt.name.replace("[0]","["+Gt+"]");Be(sn,new Fe(Yt,We.id(Yt),Ne.getUniformLocation(Ct,Yt),Pt))}else Be(sn,new Fe(Pt.name,We.id(Pt.name),Ne.getUniformLocation(Ct,Pt.name),Pt));for(Kt=Ne.getProgramParameter(Ct,35721),it.profile&&(xt.stats.attributesCount=Kt),xt=xt.attributes,Bt=0;Bt<Kt;++Bt)(Pt=Ne.getActiveAttrib(Ct,Bt))&&Be(xt,new Fe(Pt.name,We.id(Pt.name),Ne.getAttribLocation(Ct,Pt.name),Pt))}var vt={},mt={},ft={},Et=[],Tt=0;return it.profile&&(st.getMaxUniformsCount=function(){var xt=0;return Et.forEach(function(Ct){Ct.stats.uniformsCount>xt&&(xt=Ct.stats.uniformsCount)}),xt},st.getMaxAttributesCount=function(){var xt=0;return Et.forEach(function(Ct){Ct.stats.attributesCount>xt&&(xt=Ct.stats.attributesCount)}),xt}),{clear:function(){var xt=Ne.deleteShader.bind(Ne);be(vt).forEach(xt),vt={},be(mt).forEach(xt),mt={},Et.forEach(function(Ct){Ne.deleteProgram(Ct.program)}),Et.length=0,ft={},st.shaderCount=0},program:function(xt,Ct,Pt,Bt){var Kt=ft[Ct];Kt||(Kt=ft[Ct]={});var sn=Kt[xt];if(sn&&(sn.refCount++,!Bt))return sn;var Gt=new Ze(Ct,xt);return st.shaderCount++,ht(Gt,Pt,Bt),sn||(Kt[xt]=Gt),Et.push(Gt),te(Gt,{destroy:function(){if(Gt.refCount--,0>=Gt.refCount){Ne.deleteProgram(Gt.program);var Yt=Et.indexOf(Gt);Et.splice(Yt,1),st.shaderCount--}0>=Kt[Gt.vertId].refCount&&(Ne.deleteShader(mt[Gt.vertId]),delete mt[Gt.vertId],delete ft[Gt.fragId][Gt.vertId]),Object.keys(ft[Gt.fragId]).length||(Ne.deleteShader(vt[Gt.fragId]),delete vt[Gt.fragId],delete ft[Gt.fragId])}})},restore:function(){vt={},mt={};for(var xt=0;xt<Et.length;++xt)ht(Et[xt],null,Et[xt].attributes.map(function(Ct){return[Ct.location,Ct.name]}))},shader:at,frag:-1,vert:-1}}function z(Ne,We,st,it,Fe,Be,at){function Ze(ht){var vt;vt=We.next===null?5121:We.next.colorAttachments[0].texture._texture.type;var mt=0,ft=0,Et=it.framebufferWidth,Tt=it.framebufferHeight,xt=null;return ve(ht)?xt=ht:ht&&(mt=0|ht.x,ft=0|ht.y,Et=0|(ht.width||it.framebufferWidth-mt),Tt=0|(ht.height||it.framebufferHeight-ft),xt=ht.data||null),st(),ht=Et*Tt*4,xt||(vt===5121?xt=new Uint8Array(ht):vt===5126&&(xt=xt||new Float32Array(ht))),Ne.pixelStorei(3333,4),Ne.readPixels(mt,ft,Et,Tt,6408,vt,xt),xt}return function(ht){return ht&&"framebuffer"in ht?function(vt){var mt;return We.setFBO({framebuffer:vt.framebuffer},function(){mt=Ze(vt)}),mt}(ht):Ze(ht)}}function F(Ne,We){return Ne>>>We|Ne<<32-We}function U(Ne,We){var st=(65535&Ne)+(65535&We);return(Ne>>16)+(We>>16)+(st>>16)<<16|65535&st}function R(Ne){return Array.prototype.slice.call(Ne)}function j(Ne){return R(Ne).join("")}function Z(Ne){function We(){var mt=[],ft=[];return te(function(){mt.push.apply(mt,R(arguments))},{def:function(){var Et="v"+Fe++;return ft.push(Et),0<arguments.length&&(mt.push(Et,"="),mt.push.apply(mt,R(arguments)),mt.push(";")),Et},toString:function(){return j([0<ft.length?"var "+ft.join(",")+";":"",j(mt)])}})}function st(){function mt(Ct,Pt){Et(Ct,Pt,"=",ft.def(Ct,Pt),";")}var ft=We(),Et=We(),Tt=ft.toString,xt=Et.toString;return te(function(){ft.apply(ft,R(arguments))},{def:ft.def,entry:ft,exit:Et,save:mt,set:function(Ct,Pt,Bt){mt(Ct,Pt),ft(Ct,Pt,"=",Bt,";")},toString:function(){return Tt()+xt()}})}var it=Ne&&Ne.cache,Fe=0,Be=[],at=[],Ze=[],ht=We(),vt={};return{global:ht,link:function(mt,ft){var Et=ft&&ft.stable;if(!Et){for(var Tt=0;Tt<at.length;++Tt)if(at[Tt]===mt&&!Ze[Tt])return Be[Tt]}return Tt="g"+Fe++,Be.push(Tt),at.push(mt),Ze.push(Et),Tt},block:We,proc:function(mt,ft){function Et(){var Pt="a"+Tt.length;return Tt.push(Pt),Pt}var Tt=[];ft=ft||0;for(var xt=0;xt<ft;++xt)Et();var Ct=(xt=st()).toString;return vt[mt]=te(xt,{arg:Et,toString:function(){return j(["function(",Tt.join(),"){",Ct(),"}"])}})},scope:st,cond:function(){var mt=j(arguments),ft=st(),Et=st(),Tt=ft.toString,xt=Et.toString;return te(ft,{then:function(){return ft.apply(ft,R(arguments)),this},else:function(){return Et.apply(Et,R(arguments)),this},toString:function(){var Ct=xt();return Ct&&(Ct="else{"+Ct+"}"),j(["if(",mt,"){",Tt(),"}",Ct])}})},compile:function(){var mt=['"use strict";',ht,"return {"];Object.keys(vt).forEach(function(Tt){mt.push('"',Tt,'":',vt[Tt].toString(),",")}),mt.push("}");var ft,Et=j(mt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return it&&(ft=function(Tt){for(var xt,Ct="",Pt=0;Pt<Tt.length;Pt++)xt=Tt.charCodeAt(Pt),Ct+="0123456789abcdef".charAt(xt>>>4&15)+"0123456789abcdef".charAt(15&xt);return Ct}(function(Tt){for(var xt=Array(Tt.length>>2),Ct=0;Ct<xt.length;Ct++)xt[Ct]=0;for(Ct=0;Ct<8*Tt.length;Ct+=8)xt[Ct>>5]|=(255&Tt.charCodeAt(Ct/8))<<24-Ct%32;var Pt,Bt,Kt,sn,Gt,Yt,rn,Ln,Sn,gn,$t,cn=8*Tt.length;for(Tt=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Ct=Array(64),xt[cn>>5]|=128<<24-cn%32,xt[15+(cn+64>>9<<4)]=cn,Ln=0;Ln<xt.length;Ln+=16){for(cn=Tt[0],Pt=Tt[1],Bt=Tt[2],Kt=Tt[3],sn=Tt[4],Gt=Tt[5],Yt=Tt[6],rn=Tt[7],Sn=0;64>Sn;Sn++){var an;16>Sn?Ct[Sn]=xt[Sn+Ln]:(gn=Sn,$t=U($t=F($t=Ct[Sn-2],17)^F($t,19)^$t>>>10,Ct[Sn-7]),an=F(an=Ct[Sn-15],7)^F(an,18)^an>>>3,Ct[gn]=U(U($t,an),Ct[Sn-16])),gn=U(U(U(U(rn,gn=F(gn=sn,6)^F(gn,11)^F(gn,25)),sn&Gt^~sn&Yt),et[Sn]),Ct[Sn]),$t=U(rn=F(rn=cn,2)^F(rn,13)^F(rn,22),cn&Pt^cn&Bt^Pt&Bt),rn=Yt,Yt=Gt,Gt=sn,sn=U(Kt,gn),Kt=Bt,Bt=Pt,Pt=cn,cn=U(gn,$t)}Tt[0]=U(cn,Tt[0]),Tt[1]=U(Pt,Tt[1]),Tt[2]=U(Bt,Tt[2]),Tt[3]=U(Kt,Tt[3]),Tt[4]=U(sn,Tt[4]),Tt[5]=U(Gt,Tt[5]),Tt[6]=U(Yt,Tt[6]),Tt[7]=U(rn,Tt[7])}for(xt="",Ct=0;Ct<32*Tt.length;Ct+=8)xt+=String.fromCharCode(Tt[Ct>>5]>>>24-Ct%32&255);return xt}(function(Tt){for(var xt,Ct,Pt="",Bt=-1;++Bt<Tt.length;)xt=Tt.charCodeAt(Bt),Ct=Bt+1<Tt.length?Tt.charCodeAt(Bt+1):0,55296<=xt&&56319>=xt&&56320<=Ct&&57343>=Ct&&(xt=65536+((1023&xt)<<10)+(1023&Ct),Bt++),127>=xt?Pt+=String.fromCharCode(xt):2047>=xt?Pt+=String.fromCharCode(192|xt>>>6&31,128|63&xt):65535>=xt?Pt+=String.fromCharCode(224|xt>>>12&15,128|xt>>>6&63,128|63&xt):2097151>=xt&&(Pt+=String.fromCharCode(240|xt>>>18&7,128|xt>>>12&63,128|xt>>>6&63,128|63&xt));return Pt}(Et))),it[ft])?it[ft].apply(null,at):(Et=Function.apply(null,Be.concat(Et)),it&&(it[ft]=Et),Et.apply(null,at))}}}function B(Ne){return Array.isArray(Ne)||ve(Ne)||n(Ne)}function q(Ne){return Ne.sort(function(We,st){return We==="viewport"?-1:st==="viewport"?1:We<st?-1:1})}function V(Ne,We,st,it){this.thisDep=Ne,this.contextDep=We,this.propDep=st,this.append=it}function ne(Ne){return Ne&&!(Ne.thisDep||Ne.contextDep||Ne.propDep)}function ee(Ne){return new V(!1,!1,!1,Ne)}function $(Ne,We){var st=Ne.type;if(st===0)return new V(!0,1<=(st=Ne.data.length),2<=st,We);if(st===4)return new V((st=Ne.data).thisDep,st.contextDep,st.propDep,We);if(st===5)return new V(!1,!1,!1,We);if(st===6){for(var it=st=!1,Fe=!1,Be=0;Be<Ne.data.length;++Be){var at=Ne.data[Be];at.type===1?Fe=!0:at.type===2?it=!0:at.type===3?st=!0:at.type===0?(st=!0,1<=(at=at.data)&&(it=!0),2<=at&&(Fe=!0)):at.type===4&&(st=st||at.data.thisDep,it=it||at.data.contextDep,Fe=Fe||at.data.propDep)}return new V(st,it,Fe,We)}return new V(st===3,st===2,st===1,We)}function J(Ne,We,st,it,Fe,Be,at,Ze,ht,vt,mt,ft,Et,Tt,xt,Ct){function Pt(Ot){return Ot.replace(".","_")}function Bt(Ot,Jt,nn){var _n=Pt(Ot);Wn.push(Ot),Pn[_n]=mn[_n]=!!nn,Bn[_n]=Jt}function Kt(Ot,Jt,nn){var _n=Pt(Ot);Wn.push(Ot),Array.isArray(nn)?(mn[_n]=nn.slice(),Pn[_n]=nn.slice()):mn[_n]=Pn[_n]=nn,jn[_n]=Jt}function sn(){var Ot=Z({cache:xt}),Jt=Ot.link,nn=Ot.global;Ot.id=yn++,Ot.batchId="0";var _n=Jt(rr),xn=Ot.shared={props:"a0"};Object.keys(rr).forEach(function(un){xn[un]=nn.def(_n,".",un)});var kn=Ot.next={},hn=Ot.current={};Object.keys(jn).forEach(function(un){Array.isArray(mn[un])&&(kn[un]=nn.def(xn.next,".",un),hn[un]=nn.def(xn.current,".",un))});var en=Ot.constants={};Object.keys(Xt).forEach(function(un){en[un]=nn.def(JSON.stringify(Xt[un]))}),Ot.invoke=function(un,dn){switch(dn.type){case 0:var En=["this",xn.context,xn.props,Ot.batchId];return un.def(Jt(dn.data),".call(",En.slice(0,Math.max(dn.data.length+1,4)),")");case 1:return un.def(xn.props,dn.data);case 2:return un.def(xn.context,dn.data);case 3:return un.def("this",dn.data);case 4:return dn.data.append(Ot,un),dn.data.ref;case 5:return dn.data.toString();case 6:return dn.data.map(function(zn){return Ot.invoke(un,zn)})}},Ot.attribCache={};var tn={};return Ot.scopeAttrib=function(un){if((un=We.id(un))in tn)return tn[un];var dn=vt.scope[un];return dn||(dn=vt.scope[un]=new er),tn[un]=Jt(dn)},Ot}function Gt(Ot,Jt){var nn=Ot.static,_n=Ot.dynamic;if("framebuffer"in nn){var xn=nn.framebuffer;return xn?(xn=Ze.getFramebuffer(xn),ee(function(hn,en){var tn=hn.link(xn),un=hn.shared;return en.set(un.framebuffer,".next",tn),un=un.context,en.set(un,".framebufferWidth",tn+".width"),en.set(un,".framebufferHeight",tn+".height"),tn})):ee(function(hn,en){var tn=hn.shared;return en.set(tn.framebuffer,".next","null"),tn=tn.context,en.set(tn,".framebufferWidth",tn+".drawingBufferWidth"),en.set(tn,".framebufferHeight",tn+".drawingBufferHeight"),"null"})}if("framebuffer"in _n){var kn=_n.framebuffer;return $(kn,function(hn,en){var tn=hn.invoke(en,kn),un=hn.shared,dn=un.framebuffer;return tn=en.def(dn,".getFramebuffer(",tn,")"),en.set(dn,".next",tn),un=un.context,en.set(un,".framebufferWidth",tn+"?"+tn+".width:"+un+".drawingBufferWidth"),en.set(un,".framebufferHeight",tn+"?"+tn+".height:"+un+".drawingBufferHeight"),tn})}return null}function Yt(Ot,Jt,nn){function _n(un){if(un in xn){var dn=We.id(xn[un]);return(un=ee(function(){return dn})).id=dn,un}if(un in kn){var En=kn[un];return $(En,function(zn,qn){var Gn=zn.invoke(qn,En);return qn.def(zn.shared.strings,".id(",Gn,")")})}return null}var xn=Ot.static,kn=Ot.dynamic,hn=_n("frag"),en=_n("vert"),tn=null;return ne(hn)&&ne(en)?(tn=mt.program(en.id,hn.id,null,nn),Ot=ee(function(un,dn){return un.link(tn)})):Ot=new V(hn&&hn.thisDep||en&&en.thisDep,hn&&hn.contextDep||en&&en.contextDep,hn&&hn.propDep||en&&en.propDep,function(un,dn){var En,zn,qn=un.shared.shader;return En=hn?hn.append(un,dn):dn.def(qn,".","frag"),zn=en?en.append(un,dn):dn.def(qn,".","vert"),dn.def(qn+".program("+zn+","+En+")")}),{frag:hn,vert:en,progVar:Ot,program:tn}}function rn(Ot,Jt){function nn(Gn,$n){if(Gn in _n){var Xn=0|_n[Gn];return $n?kn.offset=Xn:kn.instances=Xn,ee(function(tr,Qn){return $n&&(tr.OFFSET=Xn),Xn})}if(Gn in xn){var or=xn[Gn];return $(or,function(tr,Qn){var mr=tr.invoke(Qn,or);return $n&&(tr.OFFSET=mr),mr})}if($n){if(tn)return ee(function(tr,Qn){return tr.OFFSET=0});if(hn)return new V(en.thisDep,en.contextDep,en.propDep,function(tr,Qn){return Qn.def(tr.shared.vao+".currentVAO?"+tr.shared.vao+".currentVAO.offset:0")})}else if(hn)return new V(en.thisDep,en.contextDep,en.propDep,function(tr,Qn){return Qn.def(tr.shared.vao+".currentVAO?"+tr.shared.vao+".currentVAO.instances:-1")});return null}var _n=Ot.static,xn=Ot.dynamic,kn={},hn=!1,en=function(){if("vao"in _n){var Gn=_n.vao;return Gn!==null&&vt.getVAO(Gn)===null&&(Gn=vt.createVAO(Gn)),hn=!0,kn.vao=Gn,ee(function(Xn){var or=vt.getVAO(Gn);return or?Xn.link(or):"null"})}if("vao"in xn){hn=!0;var $n=xn.vao;return $($n,function(Xn,or){var tr=Xn.invoke(or,$n);return or.def(Xn.shared.vao+".getVAO("+tr+")")})}return null}(),tn=!1,un=function(){if("elements"in _n){var Gn=_n.elements;if(kn.elements=Gn,B(Gn)){var $n=kn.elements=Be.create(Gn,!0);Gn=Be.getElements($n),tn=!0}else Gn&&(Gn=Be.getElements(Gn),tn=!0);return $n=ee(function(or,tr){if(Gn){var Qn=or.link(Gn);return or.ELEMENTS=Qn}return or.ELEMENTS=null}),$n.value=Gn,$n}if("elements"in xn){tn=!0;var Xn=xn.elements;return $(Xn,function(or,tr){var Qn=(mr=or.shared).isBufferArgs,mr=mr.elements,fr=or.invoke(tr,Xn),dr=tr.def("null");return Qn=tr.def(Qn,"(",fr,")"),fr=or.cond(Qn).then(dr,"=",mr,".createStream(",fr,");").else(dr,"=",mr,".getElements(",fr,");"),tr.entry(fr),tr.exit(or.cond(Qn).then(mr,".destroyStream(",dr,");")),or.ELEMENTS=dr})}return hn?new V(en.thisDep,en.contextDep,en.propDep,function(or,tr){return tr.def(or.shared.vao+".currentVAO?"+or.shared.elements+".getElements("+or.shared.vao+".currentVAO.elements):null")}):null}(),dn=nn("offset",!0),En=function(){if("primitive"in _n){var Gn=_n.primitive;return kn.primitive=Gn,ee(function(Xn,or){return Ee[Gn]})}if("primitive"in xn){var $n=xn.primitive;return $($n,function(Xn,or){var tr=Xn.constants.primTypes,Qn=Xn.invoke(or,$n);return or.def(tr,"[",Qn,"]")})}return tn?ne(un)?un.value?ee(function(Xn,or){return or.def(Xn.ELEMENTS,".primType")}):ee(function(){return 4}):new V(un.thisDep,un.contextDep,un.propDep,function(Xn,or){var tr=Xn.ELEMENTS;return or.def(tr,"?",tr,".primType:",4)}):hn?new V(en.thisDep,en.contextDep,en.propDep,function(Xn,or){return or.def(Xn.shared.vao+".currentVAO?"+Xn.shared.vao+".currentVAO.primitive:4")}):null}(),zn=function(){if("count"in _n){var Gn=0|_n.count;return kn.count=Gn,ee(function(){return Gn})}if("count"in xn){var $n=xn.count;return $($n,function(Xn,or){return Xn.invoke(or,$n)})}return tn?ne(un)?un?dn?new V(dn.thisDep,dn.contextDep,dn.propDep,function(Xn,or){return or.def(Xn.ELEMENTS,".vertCount-",Xn.OFFSET)}):ee(function(Xn,or){return or.def(Xn.ELEMENTS,".vertCount")}):ee(function(){return-1}):new V(un.thisDep||dn.thisDep,un.contextDep||dn.contextDep,un.propDep||dn.propDep,function(Xn,or){var tr=Xn.ELEMENTS;return Xn.OFFSET?or.def(tr,"?",tr,".vertCount-",Xn.OFFSET,":-1"):or.def(tr,"?",tr,".vertCount:-1")}):hn?new V(en.thisDep,en.contextDep,en.propDep,function(Xn,or){return or.def(Xn.shared.vao,".currentVAO?",Xn.shared.vao,".currentVAO.count:-1")}):null}(),qn=nn("instances",!1);return{elements:un,primitive:En,count:zn,instances:qn,offset:dn,vao:en,vaoActive:hn,elementsActive:tn,static:kn}}function Ln(Ot,Jt){var nn=Ot.static,_n=Ot.dynamic,xn={};return Object.keys(nn).forEach(function(kn){var hn=nn[kn],en=We.id(kn),tn=new er;if(B(hn))tn.state=1,tn.buffer=Fe.getBuffer(Fe.create(hn,34962,!1,!0)),tn.type=0;else if(dn=Fe.getBuffer(hn))tn.state=1,tn.buffer=dn,tn.type=0;else if("constant"in hn){var un=hn.constant;tn.buffer="null",tn.state=2,typeof un=="number"?tn.x=un:nt.forEach(function(Xn,or){or<un.length&&(tn[Xn]=un[or])})}else{var dn=B(hn.buffer)?Fe.getBuffer(Fe.create(hn.buffer,34962,!1,!0)):Fe.getBuffer(hn.buffer),En=0|hn.offset,zn=0|hn.stride,qn=0|hn.size,Gn=!!hn.normalized,$n=0;"type"in hn&&($n=we[hn.type]),hn=0|hn.divisor,tn.buffer=dn,tn.state=1,tn.size=qn,tn.normalized=Gn,tn.type=$n||dn.dtype,tn.offset=En,tn.stride=zn,tn.divisor=hn}xn[kn]=ee(function(Xn,or){var tr=Xn.attribCache;if(en in tr)return tr[en];var Qn={isStream:!1};return Object.keys(tn).forEach(function(mr){Qn[mr]=tn[mr]}),tn.buffer&&(Qn.buffer=Xn.link(tn.buffer),Qn.type=Qn.type||Qn.buffer+".dtype"),tr[en]=Qn})}),Object.keys(_n).forEach(function(kn){var hn=_n[kn];xn[kn]=$(hn,function(en,tn){function un(tr){tn(Gn[tr],"=",dn,".",tr,"|0;")}var dn=en.invoke(tn,hn),En=en.shared,zn=en.constants,qn=En.isBufferArgs,Gn=(En=En.buffer,{isStream:tn.def(!1)}),$n=new er;$n.state=1,Object.keys($n).forEach(function(tr){Gn[tr]=tn.def(""+$n[tr])});var Xn=Gn.buffer,or=Gn.type;return tn("if(",qn,"(",dn,")){",Gn.isStream,"=true;",Xn,"=",En,".createStream(",34962,",",dn,");",or,"=",Xn,".dtype;","}else{",Xn,"=",En,".getBuffer(",dn,");","if(",Xn,"){",or,"=",Xn,".dtype;",'}else if("constant" in ',dn,"){",Gn.state,"=",2,";","if(typeof "+dn+'.constant === "number"){',Gn[nt[0]],"=",dn,".constant;",nt.slice(1).map(function(tr){return Gn[tr]}).join("="),"=0;","}else{",nt.map(function(tr,Qn){return Gn[tr]+"="+dn+".constant.length>"+Qn+"?"+dn+".constant["+Qn+"]:0;"}).join(""),"}}else{","if(",qn,"(",dn,".buffer)){",Xn,"=",En,".createStream(",34962,",",dn,".buffer);","}else{",Xn,"=",En,".getBuffer(",dn,".buffer);","}",or,'="type" in ',dn,"?",zn.glTypes,"[",dn,".type]:",Xn,".dtype;",Gn.normalized,"=!!",dn,".normalized;"),un("size"),un("offset"),un("stride"),un("divisor"),tn("}}"),tn.exit("if(",Gn.isStream,"){",En,".destroyStream(",Xn,");","}"),Gn})}),xn}function Sn(Ot,Jt,nn,_n,xn){function kn($n){var Xn=en[$n];Xn&&(un[$n]=Xn)}var hn=function($n,Xn){if(typeof(or=$n.static).frag=="string"&&typeof or.vert=="string"){if(0<Object.keys(Xn.dynamic).length)return null;var or=Xn.static,tr=Object.keys(or);if(0<tr.length&&typeof or[tr[0]]=="number"){for(var Qn=[],mr=0;mr<tr.length;++mr)Qn.push([0|or[tr[mr]],tr[mr]]);return Qn}}return null}(Ot,Jt),en=function($n,Xn,or){function tr(dr){if(dr in Qn){var sr=Qn[dr];dr=!0;var xr,Er,jr=0|sr.x,fi=0|sr.y;return"width"in sr?xr=0|sr.width:dr=!1,"height"in sr?Er=0|sr.height:dr=!1,new V(!dr&&Xn&&Xn.thisDep,!dr&&Xn&&Xn.contextDep,!dr&&Xn&&Xn.propDep,function(Ni,li){var Pi=Ni.shared.context,pa=xr;"width"in sr||(pa=li.def(Pi,".","framebufferWidth","-",jr));var da=Er;return"height"in sr||(da=li.def(Pi,".","framebufferHeight","-",fi)),[jr,fi,pa,da]})}if(dr in mr){var pi=mr[dr];return dr=$(pi,function(Ni,li){var Pi=Ni.invoke(li,pi),pa=Ni.shared.context,da=li.def(Pi,".x|0"),Xo=li.def(Pi,".y|0");return[da,Xo,li.def('"width" in ',Pi,"?",Pi,".width|0:","(",pa,".","framebufferWidth","-",da,")"),Pi=li.def('"height" in ',Pi,"?",Pi,".height|0:","(",pa,".","framebufferHeight","-",Xo,")")]}),Xn&&(dr.thisDep=dr.thisDep||Xn.thisDep,dr.contextDep=dr.contextDep||Xn.contextDep,dr.propDep=dr.propDep||Xn.propDep),dr}return Xn?new V(Xn.thisDep,Xn.contextDep,Xn.propDep,function(Ni,li){var Pi=Ni.shared.context;return[0,0,li.def(Pi,".","framebufferWidth"),li.def(Pi,".","framebufferHeight")]}):null}var Qn=$n.static,mr=$n.dynamic;if($n=tr("viewport")){var fr=$n;$n=new V($n.thisDep,$n.contextDep,$n.propDep,function(dr,sr){var xr=fr.append(dr,sr),Er=dr.shared.context;return sr.set(Er,".viewportWidth",xr[2]),sr.set(Er,".viewportHeight",xr[3]),xr})}return{viewport:$n,scissor_box:tr("scissor.box")}}(Ot,En=Gt(Ot)),tn=rn(Ot),un=function($n,Xn){var or=$n.static,tr=$n.dynamic,Qn={};return Wn.forEach(function(mr){function fr(sr,xr){if(mr in or){var Er=sr(or[mr]);Qn[dr]=ee(function(){return Er})}else if(mr in tr){var jr=tr[mr];Qn[dr]=$(jr,function(fi,pi){return xr(fi,pi,fi.invoke(pi,jr))})}}var dr=Pt(mr);switch(mr){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return fr(function(sr){return sr},function(sr,xr,Er){return Er});case"depth.func":return fr(function(sr){return Ft[sr]},function(sr,xr,Er){return xr.def(sr.constants.compareFuncs,"[",Er,"]")});case"depth.range":return fr(function(sr){return sr},function(sr,xr,Er){return[xr.def("+",Er,"[0]"),xr=xr.def("+",Er,"[1]")]});case"blend.func":return fr(function(sr){return[Rt["srcRGB"in sr?sr.srcRGB:sr.src],Rt["dstRGB"in sr?sr.dstRGB:sr.dst],Rt["srcAlpha"in sr?sr.srcAlpha:sr.src],Rt["dstAlpha"in sr?sr.dstAlpha:sr.dst]]},function(sr,xr,Er){function jr(li,Pi){return xr.def('"',li,Pi,'" in ',Er,"?",Er,".",li,Pi,":",Er,".",li)}sr=sr.constants.blendFuncs;var fi=jr("src","RGB"),pi=jr("dst","RGB"),Ni=(fi=xr.def(sr,"[",fi,"]"),xr.def(sr,"[",jr("src","Alpha"),"]"));return[fi,pi=xr.def(sr,"[",pi,"]"),Ni,sr=xr.def(sr,"[",jr("dst","Alpha"),"]")]});case"blend.equation":return fr(function(sr){return typeof sr=="string"?[Tr[sr],Tr[sr]]:typeof sr=="object"?[Tr[sr.rgb],Tr[sr.alpha]]:void 0},function(sr,xr,Er){var jr=sr.constants.blendEquations,fi=xr.def(),pi=xr.def();return(sr=sr.cond("typeof ",Er,'==="string"')).then(fi,"=",pi,"=",jr,"[",Er,"];"),sr.else(fi,"=",jr,"[",Er,".rgb];",pi,"=",jr,"[",Er,".alpha];"),xr(sr),[fi,pi]});case"blend.color":return fr(function(sr){return _(4,function(xr){return+sr[xr]})},function(sr,xr,Er){return _(4,function(jr){return xr.def("+",Er,"[",jr,"]")})});case"stencil.mask":return fr(function(sr){return 0|sr},function(sr,xr,Er){return xr.def(Er,"|0")});case"stencil.func":return fr(function(sr){return[Ft[sr.cmp||"keep"],sr.ref||0,"mask"in sr?sr.mask:-1]},function(sr,xr,Er){return[sr=xr.def('"cmp" in ',Er,"?",sr.constants.compareFuncs,"[",Er,".cmp]",":",7680),xr.def(Er,".ref|0"),xr=xr.def('"mask" in ',Er,"?",Er,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return fr(function(sr){return[mr==="stencil.opBack"?1029:1028,It[sr.fail||"keep"],It[sr.zfail||"keep"],It[sr.zpass||"keep"]]},function(sr,xr,Er){function jr(pi){return xr.def('"',pi,'" in ',Er,"?",fi,"[",Er,".",pi,"]:",7680)}var fi=sr.constants.stencilOps;return[mr==="stencil.opBack"?1029:1028,jr("fail"),jr("zfail"),jr("zpass")]});case"polygonOffset.offset":return fr(function(sr){return[0|sr.factor,0|sr.units]},function(sr,xr,Er){return[xr.def(Er,".factor|0"),xr=xr.def(Er,".units|0")]});case"cull.face":return fr(function(sr){var xr=0;return sr==="front"?xr=1028:sr==="back"&&(xr=1029),xr},function(sr,xr,Er){return xr.def(Er,'==="front"?',1028,":",1029)});case"frontFace":return fr(function(sr){return Ge[sr]},function(sr,xr,Er){return xr.def(Er+'==="cw"?2304:2305')});case"colorMask":return fr(function(sr){return sr.map(function(xr){return!!xr})},function(sr,xr,Er){return _(4,function(jr){return"!!"+Er+"["+jr+"]"})});case"sample.coverage":return fr(function(sr){return["value"in sr?sr.value:1,!!sr.invert]},function(sr,xr,Er){return[xr.def('"value" in ',Er,"?+",Er,".value:1"),xr=xr.def("!!",Er,".invert")]})}}),Qn}(Ot),dn=Yt(Ot,0,hn);kn("viewport"),kn(Pt("scissor.box"));var En,zn=0<Object.keys(un).length;if((En={framebuffer:En,draw:tn,shader:dn,state:un,dirty:zn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function($n){var Xn,or=$n.static;if($n=$n.dynamic,"profile"in or){var tr=!!or.profile;(Xn=ee(function(mr,fr){return tr})).enable=tr}else if("profile"in $n){var Qn=$n.profile;Xn=$(Qn,function(mr,fr){return mr.invoke(fr,Qn)})}return Xn}(Ot),En.uniforms=function($n,Xn){var or=$n.static,tr=$n.dynamic,Qn={};return Object.keys(or).forEach(function(mr){var fr,dr=or[mr];if(typeof dr=="number"||typeof dr=="boolean")fr=ee(function(){return dr});else if(typeof dr=="function"){var sr=dr._reglType;sr==="texture2d"||sr==="textureCube"?fr=ee(function(xr){return xr.link(dr)}):sr!=="framebuffer"&&sr!=="framebufferCube"||(fr=ee(function(xr){return xr.link(dr.color[0])}))}else b(dr)&&(fr=ee(function(xr){return xr.global.def("[",_(dr.length,function(Er){return dr[Er]}),"]")}));fr.value=dr,Qn[mr]=fr}),Object.keys(tr).forEach(function(mr){var fr=tr[mr];Qn[mr]=$(fr,function(dr,sr){return dr.invoke(sr,fr)})}),Qn}(nn),En.drawVAO=En.scopeVAO=tn.vao,!En.drawVAO&&dn.program&&!hn&&st.angle_instanced_arrays&&tn.static.elements){var qn=!0;if(Ot=dn.program.attributes.map(function($n){return $n=Jt.static[$n],qn=qn&&!!$n,$n}),qn&&0<Ot.length){var Gn=vt.getVAO(vt.createVAO({attributes:Ot,elements:tn.static.elements}));En.drawVAO=new V(null,null,null,function($n,Xn){return $n.link(Gn)}),En.useVAO=!0}}return hn?En.useVAO=!0:En.attributes=Ln(Jt),En.context=function($n){var Xn=$n.static,or=$n.dynamic,tr={};return Object.keys(Xn).forEach(function(Qn){var mr=Xn[Qn];tr[Qn]=ee(function(fr,dr){return typeof mr=="number"||typeof mr=="boolean"?""+mr:fr.link(mr)})}),Object.keys(or).forEach(function(Qn){var mr=or[Qn];tr[Qn]=$(mr,function(fr,dr){return fr.invoke(dr,mr)})}),tr}(_n),En}function gn(Ot,Jt,nn){var _n=Ot.shared.context,xn=Ot.scope();Object.keys(nn).forEach(function(kn){Jt.save(_n,"."+kn);var hn=nn[kn].append(Ot,Jt);Array.isArray(hn)?xn(_n,".",kn,"=[",hn.join(),"];"):xn(_n,".",kn,"=",hn,";")}),Jt(xn)}function $t(Ot,Jt,nn,_n){var xn,kn=(en=Ot.shared).gl,hn=en.framebuffer;on&&(xn=Jt.def(en.extensions,".webgl_draw_buffers"));var en=(tn=Ot.constants).drawBuffer,tn=tn.backBuffer;Ot=nn?nn.append(Ot,Jt):Jt.def(hn,".next"),_n||Jt("if(",Ot,"!==",hn,".cur){"),Jt("if(",Ot,"){",kn,".bindFramebuffer(",36160,",",Ot,".framebuffer);"),on&&Jt(xn,".drawBuffersWEBGL(",en,"[",Ot,".colorAttachments.length]);"),Jt("}else{",kn,".bindFramebuffer(",36160,",null);"),on&&Jt(xn,".drawBuffersWEBGL(",tn,");"),Jt("}",hn,".cur=",Ot,";"),_n||Jt("}")}function cn(Ot,Jt,nn){var _n=Ot.shared,xn=_n.gl,kn=Ot.current,hn=Ot.next,en=_n.current,tn=_n.next,un=Ot.cond(en,".dirty");Wn.forEach(function(dn){var En,zn;if(!((dn=Pt(dn))in nn.state))if(dn in hn){En=hn[dn],zn=kn[dn];var qn=_(mn[dn].length,function(Gn){return un.def(En,"[",Gn,"]")});un(Ot.cond(qn.map(function(Gn,$n){return Gn+"!=="+zn+"["+$n+"]"}).join("||")).then(xn,".",jn[dn],"(",qn,");",qn.map(function(Gn,$n){return zn+"["+$n+"]="+Gn}).join(";"),";"))}else En=un.def(tn,".",dn),qn=Ot.cond(En,"!==",en,".",dn),un(qn),dn in Bn?qn(Ot.cond(En).then(xn,".enable(",Bn[dn],");").else(xn,".disable(",Bn[dn],");"),en,".",dn,"=",En,";"):qn(xn,".",jn[dn],"(",En,");",en,".",dn,"=",En,";")}),Object.keys(nn.state).length===0&&un(en,".dirty=false;"),Jt(un)}function an(Ot,Jt,nn,_n){var xn,kn=Ot.shared,hn=Ot.current,en=kn.current,tn=kn.gl;q(Object.keys(nn)).forEach(function(un){var dn=nn[un];if(!_n||_n(dn)){var En=dn.append(Ot,Jt);if(Bn[un]){var zn=Bn[un];ne(dn)?(xn=Ot.link(En,{stable:!0}),Jt(Ot.cond(xn).then(tn,".enable(",zn,");").else(tn,".disable(",zn,");")),Jt(en,".",un,"=",xn,";")):(Jt(Ot.cond(En).then(tn,".enable(",zn,");").else(tn,".disable(",zn,");")),Jt(en,".",un,"=",En,";"))}else if(b(En)){var qn=hn[un];Jt(tn,".",jn[un],"(",En,");",En.map(function(Gn,$n){return qn+"["+$n+"]="+Gn}).join(";"),";")}else ne(dn)?(xn=Ot.link(En,{stable:!0}),Jt(tn,".",jn[un],"(",xn,");",en,".",un,"=",xn,";")):Jt(tn,".",jn[un],"(",En,");",en,".",un,"=",En,";")}})}function pn(Ot,Jt){Ht&&(Ot.instancing=Jt.def(Ot.shared.extensions,".angle_instanced_arrays"))}function An(Ot,Jt,nn,_n,xn){function kn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function hn($n){$n(un=Jt.def(),"=",kn(),";"),typeof xn=="string"?$n(zn,".count+=",xn,";"):$n(zn,".count++;"),Tt&&(_n?$n(dn=Jt.def(),"=",Gn,".getNumPendingQueries();"):$n(Gn,".beginQuery(",zn,");"))}function en($n){$n(zn,".cpuTime+=",kn(),"-",un,";"),Tt&&(_n?$n(Gn,".pushScopeStats(",dn,",",Gn,".getNumPendingQueries(),",zn,");"):$n(Gn,".endQuery();"))}function tn($n){var Xn=Jt.def(qn,".profile");Jt(qn,".profile=",$n,";"),Jt.exit(qn,".profile=",Xn,";")}var un,dn,En=Ot.shared,zn=Ot.stats,qn=En.current,Gn=En.timer;if(nn=nn.profile){if(ne(nn))return void(nn.enable?(hn(Jt),en(Jt.exit),tn("true")):tn("false"));tn(nn=nn.append(Ot,Jt))}else nn=Jt.def(qn,".profile");hn(En=Ot.block()),Jt("if(",nn,"){",En,"}"),en(Ot=Ot.block()),Jt.exit("if(",nn,"){",Ot,"}")}function Cn(Ot,Jt,nn,_n,xn){function kn(en,tn,un){function dn(){Jt("if(!",Gn,".buffer){",zn,".enableVertexAttribArray(",qn,");}");var tr,Qn=un.type;tr=un.size?Jt.def(un.size,"||",tn):tn,Jt("if(",Gn,".type!==",Qn,"||",Gn,".size!==",tr,"||",or.map(function(mr){return Gn+"."+mr+"!=="+un[mr]}).join("||"),"){",zn,".bindBuffer(",34962,",",$n,".buffer);",zn,".vertexAttribPointer(",[qn,tr,Qn,un.normalized,un.stride,un.offset],");",Gn,".type=",Qn,";",Gn,".size=",tr,";",or.map(function(mr){return Gn+"."+mr+"="+un[mr]+";"}).join(""),"}"),Ht&&(Qn=un.divisor,Jt("if(",Gn,".divisor!==",Qn,"){",Ot.instancing,".vertexAttribDivisorANGLE(",[qn,Qn],");",Gn,".divisor=",Qn,";}"))}function En(){Jt("if(",Gn,".buffer){",zn,".disableVertexAttribArray(",qn,");",Gn,".buffer=null;","}if(",nt.map(function(tr,Qn){return Gn+"."+tr+"!=="+Xn[Qn]}).join("||"),"){",zn,".vertexAttrib4f(",qn,",",Xn,");",nt.map(function(tr,Qn){return Gn+"."+tr+"="+Xn[Qn]+";"}).join(""),"}")}var zn=hn.gl,qn=Jt.def(en,".location"),Gn=Jt.def(hn.attributes,"[",qn,"]");en=un.state;var $n=un.buffer,Xn=[un.x,un.y,un.z,un.w],or=["buffer","normalized","offset","stride"];en===1?dn():en===2?En():(Jt("if(",en,"===",1,"){"),dn(),Jt("}else{"),En(),Jt("}"))}var hn=Ot.shared;_n.forEach(function(en){var tn,un=en.name,dn=nn.attributes[un];if(dn){if(!xn(dn))return;tn=dn.append(Ot,Jt)}else{if(!xn(Ye))return;var En=Ot.scopeAttrib(un);tn={},Object.keys(new er).forEach(function(zn){tn[zn]=Jt.def(En,".",zn)})}kn(Ot.link(en),function(zn){switch(zn){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(en.info.type),tn)})}function Rn(Ot,Jt,nn,_n,xn,kn){for(var hn,en=Ot.shared,tn=en.gl,un=0;un<_n.length;++un){var dn,En=(Gn=_n[un]).name,zn=Gn.info.type,qn=nn.uniforms[En],Gn=Ot.link(Gn)+".location";if(qn){if(!xn(qn))continue;if(ne(qn)){if(En=qn.value,zn===35678||zn===35680)Jt(tn,".uniform1i(",Gn,",",(zn=Ot.link(En._texture||En.color[0]._texture))+".bind());"),Jt.exit(zn,".unbind();");else if(zn===35674||zn===35675||zn===35676)qn=2,zn===35675?qn=3:zn===35676&&(qn=4),Jt(tn,".uniformMatrix",qn,"fv(",Gn,",false,",En=Ot.global.def("new Float32Array(["+Array.prototype.slice.call(En)+"])"),");");else{switch(zn){case 5126:hn="1f";break;case 35664:hn="2f";break;case 35665:hn="3f";break;case 35666:hn="4f";break;case 35670:case 5124:hn="1i";break;case 35671:case 35667:hn="2i";break;case 35672:case 35668:hn="3i";break;case 35673:case 35669:hn="4i"}Jt(tn,".uniform",hn,"(",Gn,",",b(En)?Array.prototype.slice.call(En):En,");")}continue}dn=qn.append(Ot,Jt)}else{if(!xn(Ye))continue;dn=Jt.def(en.uniforms,"[",We.id(En),"]")}switch(zn===35678?Jt("if(",dn,"&&",dn,'._reglType==="framebuffer"){',dn,"=",dn,".color[0];","}"):zn===35680&&Jt("if(",dn,"&&",dn,'._reglType==="framebufferCube"){',dn,"=",dn,".color[0];","}"),En=1,zn){case 35678:case 35680:zn=Jt.def(dn,"._texture"),Jt(tn,".uniform1i(",Gn,",",zn,".bind());"),Jt.exit(zn,".unbind();");continue;case 5124:case 35670:hn="1i";break;case 35667:case 35671:hn="2i",En=2;break;case 35668:case 35672:hn="3i",En=3;break;case 35669:case 35673:hn="4i",En=4;break;case 5126:hn="1f";break;case 35664:hn="2f",En=2;break;case 35665:hn="3f",En=3;break;case 35666:hn="4f",En=4;break;case 35674:hn="Matrix2fv";break;case 35675:hn="Matrix3fv";break;case 35676:hn="Matrix4fv"}if(hn.charAt(0)==="M"){Jt(tn,".uniform",hn,"(",Gn,","),Gn=Math.pow(zn-35674+2,2);var $n=Ot.global.def("new Float32Array(",Gn,")");Array.isArray(dn)?Jt("false,(",_(Gn,function(or){return $n+"["+or+"]="+dn[or]}),",",$n,")"):Jt("false,(Array.isArray(",dn,")||",dn," instanceof Float32Array)?",dn,":(",_(Gn,function(or){return $n+"["+or+"]="+dn+"["+or+"]"}),",",$n,")"),Jt(");")}else{if(1<En){zn=[];var Xn=[];for(qn=0;qn<En;++qn)Array.isArray(dn)?Xn.push(dn[qn]):Xn.push(Jt.def(dn+"["+qn+"]")),kn&&zn.push(Jt.def());kn&&Jt("if(!",Ot.batchId,"||",zn.map(function(or,tr){return or+"!=="+Xn[tr]}).join("||"),"){",zn.map(function(or,tr){return or+"="+Xn[tr]+";"}).join("")),Jt(tn,".uniform",hn,"(",Gn,",",Xn.join(","),");")}else kn&&(zn=Jt.def(),Jt("if(!",Ot.batchId,"||",zn,"!==",dn,"){",zn,"=",dn,";")),Jt(tn,".uniform",hn,"(",Gn,",",dn,");");kn&&Jt("}")}}}function Fn(Ot,Jt,nn,_n){function xn(Qn){var mr=zn[Qn];return mr?mr.contextDep&&_n.contextDynamic||mr.propDep?mr.append(Ot,nn):mr.append(Ot,Jt):Jt.def(En,".",Qn)}function kn(){function Qn(){nn(tn,".drawElementsInstancedANGLE(",[Gn,Xn,or,$n+"<<(("+or+"-5121)>>1)",en],");")}function mr(){nn(tn,".drawArraysInstancedANGLE(",[Gn,$n,Xn,en],");")}qn&&qn!=="null"?tr?Qn():(nn("if(",qn,"){"),Qn(),nn("}else{"),mr(),nn("}")):mr()}function hn(){function Qn(){nn(dn+".drawElements("+[Gn,Xn,or,$n+"<<(("+or+"-5121)>>1)"]+");")}function mr(){nn(dn+".drawArrays("+[Gn,$n,Xn]+");")}qn&&qn!=="null"?tr?Qn():(nn("if(",qn,"){"),Qn(),nn("}else{"),mr(),nn("}")):mr()}var en,tn,un=Ot.shared,dn=un.gl,En=un.draw,zn=_n.draw,qn=function(){var Qn=zn.elements,mr=Jt;return Qn?((Qn.contextDep&&_n.contextDynamic||Qn.propDep)&&(mr=nn),Qn=Qn.append(Ot,mr),zn.elementsActive&&mr("if("+Qn+")"+dn+".bindBuffer(34963,"+Qn+".buffer.buffer);")):(Qn=mr.def(),mr(Qn,"=",En,".","elements",";","if(",Qn,"){",dn,".bindBuffer(",34963,",",Qn,".buffer.buffer);}","else if(",un.vao,".currentVAO){",Qn,"=",Ot.shared.elements+".getElements("+un.vao,".currentVAO.elements);",wn?"":"if("+Qn+")"+dn+".bindBuffer(34963,"+Qn+".buffer.buffer);","}")),Qn}(),Gn=xn("primitive"),$n=xn("offset"),Xn=function(){var Qn=zn.count,mr=Jt;return Qn?((Qn.contextDep&&_n.contextDynamic||Qn.propDep)&&(mr=nn),Qn=Qn.append(Ot,mr)):Qn=mr.def(En,".","count"),Qn}();if(typeof Xn=="number"){if(Xn===0)return}else nn("if(",Xn,"){"),nn.exit("}");Ht&&(en=xn("instances"),tn=Ot.instancing);var or=qn+".type",tr=zn.elements&&ne(zn.elements)&&!zn.vaoActive;Ht&&(typeof en!="number"||0<=en)?typeof en=="string"?(nn("if(",en,">0){"),kn(),nn("}else if(",en,"<0){"),hn(),nn("}")):kn():hn()}function In(Ot,Jt,nn,_n,xn){return xn=(Jt=sn()).proc("body",xn),Ht&&(Jt.instancing=xn.def(Jt.shared.extensions,".angle_instanced_arrays")),Ot(Jt,xn,nn,_n),Jt.compile().body}function Hn(Ot,Jt,nn,_n){pn(Ot,Jt),nn.useVAO?nn.drawVAO?Jt(Ot.shared.vao,".setVAO(",nn.drawVAO.append(Ot,Jt),");"):Jt(Ot.shared.vao,".setVAO(",Ot.shared.vao,".targetVAO);"):(Jt(Ot.shared.vao,".setVAO(null);"),Cn(Ot,Jt,nn,_n.attributes,function(){return!0})),Rn(Ot,Jt,nn,_n.uniforms,function(){return!0},!1),Fn(Ot,Jt,Jt,nn)}function Un(Ot,Jt,nn,_n){function xn(){return!0}Ot.batchId="a1",pn(Ot,Jt),Cn(Ot,Jt,nn,_n.attributes,xn),Rn(Ot,Jt,nn,_n.uniforms,xn,!1),Fn(Ot,Jt,Jt,nn)}function ar(Ot,Jt,nn,_n){function xn(En){return En.contextDep&&hn||En.propDep}function kn(En){return!xn(En)}pn(Ot,Jt);var hn=nn.contextDep,en=Jt.def(),tn=Jt.def();Ot.shared.props=tn,Ot.batchId=en;var un=Ot.scope(),dn=Ot.scope();Jt(un.entry,"for(",en,"=0;",en,"<","a1",";++",en,"){",tn,"=","a0","[",en,"];",dn,"}",un.exit),nn.needsContext&&gn(Ot,dn,nn.context),nn.needsFramebuffer&&$t(Ot,dn,nn.framebuffer),an(Ot,dn,nn.state,xn),nn.profile&&xn(nn.profile)&&An(Ot,dn,nn,!1,!0),_n?(nn.useVAO?nn.drawVAO?xn(nn.drawVAO)?dn(Ot.shared.vao,".setVAO(",nn.drawVAO.append(Ot,dn),");"):un(Ot.shared.vao,".setVAO(",nn.drawVAO.append(Ot,un),");"):un(Ot.shared.vao,".setVAO(",Ot.shared.vao,".targetVAO);"):(un(Ot.shared.vao,".setVAO(null);"),Cn(Ot,un,nn,_n.attributes,kn),Cn(Ot,dn,nn,_n.attributes,xn)),Rn(Ot,un,nn,_n.uniforms,kn,!1),Rn(Ot,dn,nn,_n.uniforms,xn,!0),Fn(Ot,un,dn,nn)):(Jt=Ot.global.def("{}"),_n=nn.shader.progVar.append(Ot,dn),tn=dn.def(_n,".id"),un=dn.def(Jt,"[",tn,"]"),dn(Ot.shared.gl,".useProgram(",_n,".program);","if(!",un,"){",un,"=",Jt,"[",tn,"]=",Ot.link(function(En){return In(Un,Ot,nn,En,2)}),"(",_n,");}",un,".call(this,a0[",en,"],",en,");"))}function ur(Ot,Jt){function nn(en){var tn=Jt.shader[en];tn&&(tn=tn.append(Ot,_n),isNaN(tn)?_n.set(xn.shader,"."+en,tn):_n.set(xn.shader,"."+en,Ot.link(tn,{stable:!0})))}var _n=Ot.proc("scope",3);Ot.batchId="a2";var xn=Ot.shared,kn=xn.current;if(gn(Ot,_n,Jt.context),Jt.framebuffer&&Jt.framebuffer.append(Ot,_n),q(Object.keys(Jt.state)).forEach(function(en){var tn=Jt.state[en],un=tn.append(Ot,_n);b(un)?un.forEach(function(dn,En){isNaN(dn)?_n.set(Ot.next[en],"["+En+"]",dn):_n.set(Ot.next[en],"["+En+"]",Ot.link(dn,{stable:!0}))}):ne(tn)?_n.set(xn.next,"."+en,Ot.link(un,{stable:!0})):_n.set(xn.next,"."+en,un)}),An(Ot,_n,Jt,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(en){var tn=Jt.draw[en];tn&&(tn=tn.append(Ot,_n),isNaN(tn)?_n.set(xn.draw,"."+en,tn):_n.set(xn.draw,"."+en,Ot.link(tn),{stable:!0}))}),Object.keys(Jt.uniforms).forEach(function(en){var tn=Jt.uniforms[en].append(Ot,_n);Array.isArray(tn)&&(tn="["+tn.map(function(un){return isNaN(un)?un:Ot.link(un,{stable:!0})})+"]"),_n.set(xn.uniforms,"["+Ot.link(We.id(en),{stable:!0})+"]",tn)}),Object.keys(Jt.attributes).forEach(function(en){var tn=Jt.attributes[en].append(Ot,_n),un=Ot.scopeAttrib(en);Object.keys(new er).forEach(function(dn){_n.set(un,"."+dn,tn[dn])})}),Jt.scopeVAO){var hn=Jt.scopeVAO.append(Ot,_n);isNaN(hn)?_n.set(xn.vao,".targetVAO",hn):_n.set(xn.vao,".targetVAO",Ot.link(hn,{stable:!0}))}nn("vert"),nn("frag"),0<Object.keys(Jt.state).length&&(_n(kn,".dirty=true;"),_n.exit(kn,".dirty=true;")),_n("a1(",Ot.shared.context,",a0,",Ot.batchId,");")}function cr(Ot,Jt,nn){var _n=Jt.static[nn];if(_n&&function(dn){if(typeof dn=="object"&&!b(dn)){for(var En=Object.keys(dn),zn=0;zn<En.length;++zn)if(ae.isDynamic(dn[En[zn]]))return!0;return!1}}(_n)){var xn=Ot.global,kn=Object.keys(_n),hn=!1,en=!1,tn=!1,un=Ot.global.def("{}");kn.forEach(function(dn){var En=_n[dn];if(ae.isDynamic(En))typeof En=="function"&&(En=_n[dn]=ae.unbox(En)),dn=$(En,null),hn=hn||dn.thisDep,tn=tn||dn.propDep,en=en||dn.contextDep;else{switch(xn(un,".",dn,"="),typeof En){case"number":xn(En);break;case"string":xn('"',En,'"');break;case"object":Array.isArray(En)&&xn("[",En.join(),"]");break;default:xn(Ot.link(En))}xn(";")}}),Jt.dynamic[nn]=new ae.DynamicVariable(4,{thisDep:hn,contextDep:en,propDep:tn,ref:un,append:function(dn,En){kn.forEach(function(zn){var qn=_n[zn];ae.isDynamic(qn)&&(qn=dn.invoke(En,qn),En(un,".",zn,"=",qn,";"))})}}),delete Jt.static[nn]}}var er=vt.Record,Tr={add:32774,subtract:32778,"reverse subtract":32779};st.ext_blend_minmax&&(Tr.min=32775,Tr.max=32776);var Ht=st.angle_instanced_arrays,on=st.webgl_draw_buffers,wn=st.oes_vertex_array_object,mn={dirty:!0,profile:Ct.profile},Pn={},Wn=[],Bn={},jn={};Bt("dither",3024),Bt("blend.enable",3042),Kt("blend.color","blendColor",[0,0,0,0]),Kt("blend.equation","blendEquationSeparate",[32774,32774]),Kt("blend.func","blendFuncSeparate",[1,0,1,0]),Bt("depth.enable",2929,!0),Kt("depth.func","depthFunc",513),Kt("depth.range","depthRange",[0,1]),Kt("depth.mask","depthMask",!0),Kt("colorMask","colorMask",[!0,!0,!0,!0]),Bt("cull.enable",2884),Kt("cull.face","cullFace",1029),Kt("frontFace","frontFace",2305),Kt("lineWidth","lineWidth",1),Bt("polygonOffset.enable",32823),Kt("polygonOffset.offset","polygonOffset",[0,0]),Bt("sample.alpha",32926),Bt("sample.enable",32928),Kt("sample.coverage","sampleCoverage",[1,!1]),Bt("stencil.enable",2960),Kt("stencil.mask","stencilMask",-1),Kt("stencil.func","stencilFunc",[519,0,-1]),Kt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Kt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),Bt("scissor.enable",3089),Kt("scissor.box","scissor",[0,0,Ne.drawingBufferWidth,Ne.drawingBufferHeight]),Kt("viewport","viewport",[0,0,Ne.drawingBufferWidth,Ne.drawingBufferHeight]);var rr={gl:Ne,context:Et,strings:We,next:Pn,current:mn,draw:ft,elements:Be,buffer:Fe,shader:mt,attributes:vt.state,vao:vt,uniforms:ht,framebuffer:Ze,extensions:st,timer:Tt,isBufferArgs:B},Xt={primTypes:Ee,compareFuncs:Ft,blendFuncs:Rt,blendEquations:Tr,stencilOps:It,glTypes:we,orientationType:Ge};on&&(Xt.backBuffer=[1029],Xt.drawBuffer=_(it.maxDrawbuffers,function(Ot){return Ot===0?[0]:_(Ot,function(Jt){return 36064+Jt})}));var yn=0;return{next:Pn,current:mn,procs:function(){var Ot=sn(),Jt=Ot.proc("poll"),nn=Ot.proc("refresh"),_n=Ot.block();Jt(_n),nn(_n);var xn,kn=(tn=Ot.shared).gl,hn=tn.next,en=tn.current;_n(en,".dirty=false;"),$t(Ot,Jt),$t(Ot,nn,null,!0),Ht&&(xn=Ot.link(Ht)),st.oes_vertex_array_object&&nn(Ot.link(st.oes_vertex_array_object),".bindVertexArrayOES(null);");var tn=nn.def(tn.attributes),un=nn.def(0),dn=Ot.cond(un,".buffer");dn.then(kn,".enableVertexAttribArray(i);",kn,".bindBuffer(",34962,",",un,".buffer.buffer);",kn,".vertexAttribPointer(i,",un,".size,",un,".type,",un,".normalized,",un,".stride,",un,".offset);").else(kn,".disableVertexAttribArray(i);",kn,".vertexAttrib4f(i,",un,".x,",un,".y,",un,".z,",un,".w);",un,".buffer=null;");var En=Ot.link(it.maxAttributes,{stable:!0});return nn("for(var i=0;i<",En,";++i){",un,"=",tn,"[i];",dn,"}"),Ht&&nn("for(var i=0;i<",En,";++i){",xn,".vertexAttribDivisorANGLE(i,",tn,"[i].divisor);","}"),nn(Ot.shared.vao,".currentVAO=null;",Ot.shared.vao,".setVAO(",Ot.shared.vao,".targetVAO);"),Object.keys(Bn).forEach(function(zn){var qn=Bn[zn],Gn=_n.def(hn,".",zn),$n=Ot.block();$n("if(",Gn,"){",kn,".enable(",qn,")}else{",kn,".disable(",qn,")}",en,".",zn,"=",Gn,";"),nn($n),Jt("if(",Gn,"!==",en,".",zn,"){",$n,"}")}),Object.keys(jn).forEach(function(zn){var qn,Gn,$n=jn[zn],Xn=mn[zn],or=Ot.block();or(kn,".",$n,"("),b(Xn)?($n=Xn.length,qn=Ot.global.def(hn,".",zn),Gn=Ot.global.def(en,".",zn),or(_($n,function(tr){return qn+"["+tr+"]"}),");",_($n,function(tr){return Gn+"["+tr+"]="+qn+"["+tr+"];"}).join("")),Jt("if(",_($n,function(tr){return qn+"["+tr+"]!=="+Gn+"["+tr+"]"}).join("||"),"){",or,"}")):(qn=_n.def(hn,".",zn),Gn=_n.def(en,".",zn),or(qn,");",en,".",zn,"=",qn,";"),Jt("if(",qn,"!==",Gn,"){",or,"}")),nn(or)}),Ot.compile()}(),compile:function(Ot,Jt,nn,_n,xn){var kn=sn();kn.stats=kn.link(xn),Object.keys(Jt.static).forEach(function(en){cr(kn,Jt,en)}),At.forEach(function(en){cr(kn,Ot,en)});var hn=Sn(Ot,Jt,nn,_n);return hn.shader.program&&(hn.shader.program.attributes.sort(function(en,tn){return en.name<tn.name?-1:1}),hn.shader.program.uniforms.sort(function(en,tn){return en.name<tn.name?-1:1})),function(en,tn){var un=en.proc("draw",1);pn(en,un),gn(en,un,tn.context),$t(en,un,tn.framebuffer),cn(en,un,tn),an(en,un,tn.state),An(en,un,tn,!1,!0);var dn=tn.shader.progVar.append(en,un);if(un(en.shared.gl,".useProgram(",dn,".program);"),tn.shader.program)Hn(en,un,tn,tn.shader.program);else{un(en.shared.vao,".setVAO(null);");var En=en.global.def("{}"),zn=un.def(dn,".id"),qn=un.def(En,"[",zn,"]");un(en.cond(qn).then(qn,".call(this,a0);").else(qn,"=",En,"[",zn,"]=",en.link(function(Gn){return In(Hn,en,tn,Gn,1)}),"(",dn,");",qn,".call(this,a0);"))}0<Object.keys(tn.state).length&&un(en.shared.current,".dirty=true;"),en.shared.vao&&un(en.shared.vao,".setVAO(null);")}(kn,hn),ur(kn,hn),function(en,tn){function un(Xn){return Xn.contextDep&&En||Xn.propDep}var dn=en.proc("batch",2);en.batchId="0",pn(en,dn);var En=!1,zn=!0;Object.keys(tn.context).forEach(function(Xn){En=En||tn.context[Xn].propDep}),En||(gn(en,dn,tn.context),zn=!1);var qn=!1;if((Gn=tn.framebuffer)?(Gn.propDep?En=qn=!0:Gn.contextDep&&En&&(qn=!0),qn||$t(en,dn,Gn)):$t(en,dn,null),tn.state.viewport&&tn.state.viewport.propDep&&(En=!0),cn(en,dn,tn),an(en,dn,tn.state,function(Xn){return!un(Xn)}),tn.profile&&un(tn.profile)||An(en,dn,tn,!1,"a1"),tn.contextDep=En,tn.needsContext=zn,tn.needsFramebuffer=qn,(zn=tn.shader.progVar).contextDep&&En||zn.propDep)ar(en,dn,tn,null);else if(zn=zn.append(en,dn),dn(en.shared.gl,".useProgram(",zn,".program);"),tn.shader.program)ar(en,dn,tn,tn.shader.program);else{dn(en.shared.vao,".setVAO(null);");var Gn=en.global.def("{}"),$n=(qn=dn.def(zn,".id"),dn.def(Gn,"[",qn,"]"));dn(en.cond($n).then($n,".call(this,a0,a1);").else($n,"=",Gn,"[",qn,"]=",en.link(function(Xn){return In(ar,en,tn,Xn,2)}),"(",zn,");",$n,".call(this,a0,a1);"))}0<Object.keys(tn.state).length&&dn(en.shared.current,".dirty=true;"),en.shared.vao&&dn(en.shared.vao,".setVAO(null);")}(kn,hn),te(kn.compile(),{destroy:function(){hn.shader.program.destroy()}})}}}function K(Ne,We){for(var st=0;st<Ne.length;++st)if(Ne[st]===We)return st;return-1}var te=function(Ne,We){for(var st=Object.keys(We),it=0;it<st.length;++it)Ne[st[it]]=We[st[it]];return Ne},ie=0,ae={DynamicVariable:O,define:function(Ne,We){return new O(Ne,M(We+""))},isDynamic:function(Ne){return typeof Ne=="function"&&!Ne._reglType||Ne instanceof O},unbox:function Ne(We,st){return typeof We=="function"?new O(0,We):typeof We=="number"||typeof We=="boolean"?new O(5,We):Array.isArray(We)?new O(6,We.map(function(it,Fe){return Ne(it)})):We instanceof O?We:void 0},accessor:M},se={next:typeof requestAnimationFrame=="function"?function(Ne){return requestAnimationFrame(Ne)}:function(Ne){return setTimeout(Ne,16)},cancel:typeof cancelAnimationFrame=="function"?function(Ne){return cancelAnimationFrame(Ne)}:clearTimeout},ce=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},de=s();de.zero=s();var ge=function(Ne,We){var st=1;We.ext_texture_filter_anisotropic&&(st=Ne.getParameter(34047));var it=1,Fe=1;We.webgl_draw_buffers&&(it=Ne.getParameter(34852),Fe=Ne.getParameter(36063));var Be=!!We.oes_texture_float;if(Be){Be=Ne.createTexture(),Ne.bindTexture(3553,Be),Ne.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var at=Ne.createFramebuffer();if(Ne.bindFramebuffer(36160,at),Ne.framebufferTexture2D(36160,36064,3553,Be,0),Ne.bindTexture(3553,null),Ne.checkFramebufferStatus(36160)!==36053)Be=!1;else{Ne.viewport(0,0,1,1),Ne.clearColor(1,0,0,1),Ne.clear(16384);var Ze=de.allocType(5126,4);Ne.readPixels(0,0,1,1,6408,5126,Ze),Ne.getError()?Be=!1:(Ne.deleteFramebuffer(at),Ne.deleteTexture(Be),Be=Ze[0]===1),de.freeType(Ze)}}return Ze=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(Ze=Ne.createTexture(),at=de.allocType(5121,36),Ne.activeTexture(33984),Ne.bindTexture(34067,Ze),Ne.texImage2D(34069,0,6408,3,3,0,6408,5121,at),de.freeType(at),Ne.bindTexture(34067,null),Ne.deleteTexture(Ze),Ze=!Ne.getError()),{colorBits:[Ne.getParameter(3410),Ne.getParameter(3411),Ne.getParameter(3412),Ne.getParameter(3413)],depthBits:Ne.getParameter(3414),stencilBits:Ne.getParameter(3415),subpixelBits:Ne.getParameter(3408),extensions:Object.keys(We).filter(function(ht){return!!We[ht]}),maxAnisotropic:st,maxDrawbuffers:it,maxColorAttachments:Fe,pointSizeDims:Ne.getParameter(33901),lineWidthDims:Ne.getParameter(33902),maxViewportDims:Ne.getParameter(3386),maxCombinedTextureUnits:Ne.getParameter(35661),maxCubeMapSize:Ne.getParameter(34076),maxRenderbufferSize:Ne.getParameter(34024),maxTextureUnits:Ne.getParameter(34930),maxTextureSize:Ne.getParameter(3379),maxAttributes:Ne.getParameter(34921),maxVertexUniforms:Ne.getParameter(36347),maxVertexTextureUnits:Ne.getParameter(35660),maxVaryingVectors:Ne.getParameter(36348),maxFragmentUniforms:Ne.getParameter(36349),glsl:Ne.getParameter(35724),renderer:Ne.getParameter(7937),vendor:Ne.getParameter(7936),version:Ne.getParameter(7938),readFloat:Be,npotTextureCube:Ze}},ve=function(Ne){return Ne instanceof Uint8Array||Ne instanceof Uint16Array||Ne instanceof Uint32Array||Ne instanceof Int8Array||Ne instanceof Int16Array||Ne instanceof Int32Array||Ne instanceof Float32Array||Ne instanceof Float64Array||Ne instanceof Uint8ClampedArray},be=function(Ne){return Object.keys(Ne).map(function(We){return Ne[We]})},me={shape:function(Ne){for(var We=[];Ne.length;Ne=Ne[0])We.push(Ne.length);return We},flatten:function(Ne,We,st,it){var Fe=1;if(We.length)for(var Be=0;Be<We.length;++Be)Fe*=We[Be];else Fe=0;switch(st=it||de.allocType(st,Fe),We.length){case 0:break;case 1:for(it=We[0],We=0;We<it;++We)st[We]=Ne[We];break;case 2:for(it=We[0],We=We[1],Be=Fe=0;Be<it;++Be)for(var at=Ne[Be],Ze=0;Ze<We;++Ze)st[Fe++]=at[Ze];break;case 3:a(Ne,We[0],We[1],We[2],st,0);break;default:r(Ne,We,0,st,0)}return st}},Se={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},we={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},_e={dynamic:35048,stream:35040,static:35044},oe=me.flatten,le=me.shape,pe=[];pe[5120]=1,pe[5122]=2,pe[5124]=4,pe[5121]=1,pe[5123]=2,pe[5125]=4,pe[5126]=4;var Ee={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Te=new Float32Array(1),Me=new Uint32Array(Te.buffer),Le=[9984,9986,9985,9987],Ie=[0,6409,6410,6407,6408],he={};he[6409]=he[6406]=he[6402]=1,he[34041]=he[6410]=2,he[6407]=he[35904]=3,he[6408]=he[35906]=4;var xe=v("HTMLCanvasElement"),ke=v("OffscreenCanvas"),ze=v("CanvasRenderingContext2D"),Re=v("ImageBitmap"),Oe=v("HTMLImageElement"),Ve=v("HTMLVideoElement"),qe=Object.keys(Se).concat([xe,ke,ze,Re,Oe,Ve]),Je=[];Je[5121]=1,Je[5126]=4,Je[36193]=2,Je[5123]=2,Je[5125]=4;var ot=[];ot[32854]=2,ot[32855]=2,ot[36194]=2,ot[34041]=4,ot[33776]=.5,ot[33777]=.5,ot[33778]=1,ot[33779]=1,ot[35986]=.5,ot[35987]=1,ot[34798]=1,ot[35840]=.5,ot[35841]=.25,ot[35842]=.5,ot[35843]=.25,ot[36196]=.5;var rt=[];rt[32854]=2,rt[32855]=2,rt[36194]=2,rt[33189]=2,rt[36168]=1,rt[34041]=4,rt[35907]=4,rt[34836]=16,rt[34842]=8,rt[34843]=6;var dt=function(Ne,We,st,it,Fe){function Be(ft){this.id=vt++,this.refCount=1,this.renderbuffer=ft,this.format=32854,this.height=this.width=0,Fe.profile&&(this.stats={size:0})}function at(ft){var Et=ft.renderbuffer;Ne.bindRenderbuffer(36161,null),Ne.deleteRenderbuffer(Et),ft.renderbuffer=null,ft.refCount=0,delete mt[ft.id],it.renderbufferCount--}var Ze={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};We.ext_srgb&&(Ze.srgba=35907),We.ext_color_buffer_half_float&&(Ze.rgba16f=34842,Ze.rgb16f=34843),We.webgl_color_buffer_float&&(Ze.rgba32f=34836);var ht=[];Object.keys(Ze).forEach(function(ft){ht[Ze[ft]]=ft});var vt=0,mt={};return Be.prototype.decRef=function(){0>=--this.refCount&&at(this)},Fe.profile&&(it.getTotalRenderbufferSize=function(){var ft=0;return Object.keys(mt).forEach(function(Et){ft+=mt[Et].stats.size}),ft}),{create:function(ft,Et){function Tt(Ct,Pt){var Bt=0,Kt=0,sn=32854;if(typeof Ct=="object"&&Ct?("shape"in Ct?(Bt=0|(Kt=Ct.shape)[0],Kt=0|Kt[1]):("radius"in Ct&&(Bt=Kt=0|Ct.radius),"width"in Ct&&(Bt=0|Ct.width),"height"in Ct&&(Kt=0|Ct.height)),"format"in Ct&&(sn=Ze[Ct.format])):typeof Ct=="number"?(Bt=0|Ct,Kt=typeof Pt=="number"?0|Pt:Bt):Ct||(Bt=Kt=1),Bt!==xt.width||Kt!==xt.height||sn!==xt.format)return Tt.width=xt.width=Bt,Tt.height=xt.height=Kt,xt.format=sn,Ne.bindRenderbuffer(36161,xt.renderbuffer),Ne.renderbufferStorage(36161,sn,Bt,Kt),Fe.profile&&(xt.stats.size=rt[xt.format]*xt.width*xt.height),Tt.format=ht[xt.format],Tt}var xt=new Be(Ne.createRenderbuffer());return mt[xt.id]=xt,it.renderbufferCount++,Tt(ft,Et),Tt.resize=function(Ct,Pt){var Bt=0|Ct,Kt=0|Pt||Bt;return Bt===xt.width&&Kt===xt.height||(Tt.width=xt.width=Bt,Tt.height=xt.height=Kt,Ne.bindRenderbuffer(36161,xt.renderbuffer),Ne.renderbufferStorage(36161,xt.format,Bt,Kt),Fe.profile&&(xt.stats.size=rt[xt.format]*xt.width*xt.height)),Tt},Tt._reglType="renderbuffer",Tt._renderbuffer=xt,Fe.profile&&(Tt.stats=xt.stats),Tt.destroy=function(){xt.decRef()},Tt},clear:function(){be(mt).forEach(at)},restore:function(){be(mt).forEach(function(ft){ft.renderbuffer=Ne.createRenderbuffer(),Ne.bindRenderbuffer(36161,ft.renderbuffer),Ne.renderbufferStorage(36161,ft.format,ft.width,ft.height)}),Ne.bindRenderbuffer(36161,null)}}},_t=[];_t[6408]=4,_t[6407]=3;var yt=[];yt[5121]=1,yt[5126]=4,yt[36193]=2;var et=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],nt=["x","y","z","w"],At="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Rt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ft={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},It={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ge={cw:2304,ccw:2305},Ye=new V(!1,!1,!1,function(){});return function(Ne){function We(){if(Un.length===0)Gt&&Gt.update(),er=null;else{er=se.next(We),mt();for(var Ht=Un.length-1;0<=Ht;--Ht){var on=Un[Ht];on&&on(Sn,null,0)}Tt.flush(),Gt&&Gt.update()}}function st(){!er&&0<Un.length&&(er=se.next(We))}function it(){er&&(se.cancel(We),er=null)}function Fe(Ht){Ht.preventDefault(),it(),ar.forEach(function(on){on()})}function Be(Ht){Tt.getError(),Ct.restore(),pn.restore(),$t.restore(),An.restore(),Cn.restore(),Rn.restore(),an.restore(),Gt&&Gt.restore(),Fn.procs.refresh(),st(),ur.forEach(function(on){on()})}function at(Ht){function on(Ot,Jt){var nn={},_n={};return Object.keys(Ot).forEach(function(xn){var kn=Ot[xn];if(ae.isDynamic(kn))_n[xn]=ae.unbox(kn,xn);else{if(Jt&&Array.isArray(kn)){for(var hn=0;hn<kn.length;++hn)if(ae.isDynamic(kn[hn]))return void(_n[xn]=ae.unbox(kn,xn))}nn[xn]=kn}}),{dynamic:_n,static:nn}}var wn=on(Ht.context||{},!0),mn=on(Ht.uniforms||{},!0),Pn=on(Ht.attributes||{},!1);Ht=on(function(Ot){function Jt(_n){if(_n in nn){var xn=nn[_n];delete nn[_n],Object.keys(xn).forEach(function(kn){nn[_n+"."+kn]=xn[kn]})}}var nn=te({},Ot);return delete nn.uniforms,delete nn.attributes,delete nn.context,delete nn.vao,"stencil"in nn&&nn.stencil.op&&(nn.stencil.opBack=nn.stencil.opFront=nn.stencil.op,delete nn.stencil.op),Jt("blend"),Jt("depth"),Jt("cull"),Jt("stencil"),Jt("polygonOffset"),Jt("scissor"),Jt("sample"),"vao"in Ot&&(nn.vao=Ot.vao),nn}(Ht),!1);var Wn={gpuTime:0,cpuTime:0,count:0},Bn=Fn.compile(Ht,Pn,mn,wn,Wn),jn=Bn.draw,rr=Bn.batch,Xt=Bn.scope,yn=[];return te(function(Ot,Jt){var nn;if(typeof Ot=="function")return Xt.call(this,null,Ot,0);if(typeof Jt=="function")if(typeof Ot=="number")for(nn=0;nn<Ot;++nn)Xt.call(this,null,Jt,nn);else{if(!Array.isArray(Ot))return Xt.call(this,Ot,Jt,0);for(nn=0;nn<Ot.length;++nn)Xt.call(this,Ot[nn],Jt,nn)}else if(typeof Ot=="number"){if(0<Ot)return rr.call(this,function(_n){for(;yn.length<_n;)yn.push(null);return yn}(0|Ot),0|Ot)}else{if(!Array.isArray(Ot))return jn.call(this,Ot);if(Ot.length)return rr.call(this,Ot,Ot.length)}},{stats:Wn,destroy:function(){Bn.destroy()}})}function Ze(Ht,on){var wn=0;Fn.procs.poll();var mn=on.color;mn&&(Tt.clearColor(+mn[0]||0,+mn[1]||0,+mn[2]||0,+mn[3]||0),wn|=16384),"depth"in on&&(Tt.clearDepth(+on.depth),wn|=256),"stencil"in on&&(Tt.clearStencil(0|on.stencil),wn|=1024),Tt.clear(wn)}function ht(Ht){return Un.push(Ht),st(),{cancel:function(){var on=K(Un,Ht);Un[on]=function wn(){var mn=K(Un,wn);Un[mn]=Un[Un.length-1],--Un.length,0>=Un.length&&it()}}}}function vt(){var Ht=In.viewport,on=In.scissor_box;Ht[0]=Ht[1]=on[0]=on[1]=0,Sn.viewportWidth=Sn.framebufferWidth=Sn.drawingBufferWidth=Ht[2]=on[2]=Tt.drawingBufferWidth,Sn.viewportHeight=Sn.framebufferHeight=Sn.drawingBufferHeight=Ht[3]=on[3]=Tt.drawingBufferHeight}function mt(){Sn.tick+=1,Sn.time=Et(),vt(),Fn.procs.poll()}function ft(){An.refresh(),vt(),Fn.procs.refresh(),Gt&&Gt.update()}function Et(){return(ce()-Yt)/1e3}if(!(Ne=w(Ne)))return null;var Tt=Ne.gl,xt=Tt.getContextAttributes();Tt.isContextLost();var Ct=function(Ht,on){function wn(Bn){var jn;Bn=Bn.toLowerCase();try{jn=mn[Bn]=Ht.getExtension(Bn)}catch{}return!!jn}for(var mn={},Pn=0;Pn<on.extensions.length;++Pn){var Wn=on.extensions[Pn];if(!wn(Wn))return on.onDestroy(),on.onDone('"'+Wn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return on.optionalExtensions.forEach(wn),{extensions:mn,restore:function(){Object.keys(mn).forEach(function(Bn){if(mn[Bn]&&!wn(Bn))throw Error("(regl): error restoring extension "+Bn)})}}}(Tt,Ne);if(!Ct)return null;var Pt=function(){var Ht={"":0},on=[""];return{id:function(wn){var mn=Ht[wn];return mn||(mn=Ht[wn]=on.length,on.push(wn),mn)},str:function(wn){return on[wn]}}}(),Bt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Kt=Ne.cachedCode||{},sn=Ct.extensions,Gt=function(Ht,on){function wn(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function mn(yn,Ot,Jt){var nn=Bn.pop()||new wn;nn.startQueryIndex=yn,nn.endQueryIndex=Ot,nn.sum=0,nn.stats=Jt,jn.push(nn)}if(!on.ext_disjoint_timer_query)return null;var Pn=[],Wn=[],Bn=[],jn=[],rr=[],Xt=[];return{beginQuery:function(yn){var Ot=Pn.pop()||on.ext_disjoint_timer_query.createQueryEXT();on.ext_disjoint_timer_query.beginQueryEXT(35007,Ot),Wn.push(Ot),mn(Wn.length-1,Wn.length,yn)},endQuery:function(){on.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:mn,update:function(){var yn,Ot;if((yn=Wn.length)!==0){Xt.length=Math.max(Xt.length,yn+1),rr.length=Math.max(rr.length,yn+1),rr[0]=0;var Jt=Xt[0]=0;for(Ot=yn=0;Ot<Wn.length;++Ot){var nn=Wn[Ot];on.ext_disjoint_timer_query.getQueryObjectEXT(nn,34919)?(Jt+=on.ext_disjoint_timer_query.getQueryObjectEXT(nn,34918),Pn.push(nn)):Wn[yn++]=nn,rr[Ot+1]=Jt,Xt[Ot+1]=yn}for(Wn.length=yn,Ot=yn=0;Ot<jn.length;++Ot){var _n=(Jt=jn[Ot]).startQueryIndex;nn=Jt.endQueryIndex,Jt.sum+=rr[nn]-rr[_n],_n=Xt[_n],(nn=Xt[nn])===_n?(Jt.stats.gpuTime+=Jt.sum/1e6,Bn.push(Jt)):(Jt.startQueryIndex=_n,Jt.endQueryIndex=nn,jn[yn++]=Jt)}jn.length=yn}},getNumPendingQueries:function(){return Wn.length},clear:function(){Pn.push.apply(Pn,Wn);for(var yn=0;yn<Pn.length;yn++)on.ext_disjoint_timer_query.deleteQueryEXT(Pn[yn]);Wn.length=0,Pn.length=0},restore:function(){Wn.length=0,Pn.length=0}}}(0,sn),Yt=ce(),rn=Tt.drawingBufferWidth,Ln=Tt.drawingBufferHeight,Sn={tick:0,time:0,viewportWidth:rn,viewportHeight:Ln,framebufferWidth:rn,framebufferHeight:Ln,drawingBufferWidth:rn,drawingBufferHeight:Ln,pixelRatio:Ne.pixelRatio},gn=(rn={elements:null,primitive:4,count:-1,offset:0,instances:-1},ge(Tt,sn)),$t=c(Tt,Bt,Ne,function(Ht){return an.destroyBuffer(Ht)}),cn=g(Tt,sn,$t,Bt),an=P(Tt,sn,gn,Bt,$t,cn,rn),pn=I(Tt,Pt,Bt,Ne),An=E(Tt,sn,gn,function(){Fn.procs.poll()},Sn,Bt,Ne),Cn=dt(Tt,sn,0,Bt,Ne),Rn=k(Tt,sn,gn,An,Cn,Bt),Fn=J(Tt,Pt,sn,gn,$t,cn,0,Rn,{},an,pn,rn,Sn,Gt,Kt,Ne),In=(Pt=z(Tt,Rn,Fn.procs.poll,Sn),Fn.next),Hn=Tt.canvas,Un=[],ar=[],ur=[],cr=[Ne.onDestroy],er=null;Hn&&(Hn.addEventListener("webglcontextlost",Fe,!1),Hn.addEventListener("webglcontextrestored",Be,!1));var Tr=Rn.setFBO=at({framebuffer:ae.define.call(null,1,"framebuffer")});return ft(),xt=te(at,{clear:function(Ht){if("framebuffer"in Ht)if(Ht.framebuffer&&Ht.framebuffer_reglType==="framebufferCube")for(var on=0;6>on;++on)Tr(te({framebuffer:Ht.framebuffer.faces[on]},Ht),Ze);else Tr(Ht,Ze);else Ze(0,Ht)},prop:ae.define.bind(null,1),context:ae.define.bind(null,2),this:ae.define.bind(null,3),draw:at({}),buffer:function(Ht){return $t.create(Ht,34962,!1,!1)},elements:function(Ht){return cn.create(Ht,!1)},texture:An.create2D,cube:An.createCube,renderbuffer:Cn.create,framebuffer:Rn.create,framebufferCube:Rn.createCube,vao:an.createVAO,attributes:xt,frame:ht,on:function(Ht,on){var wn;switch(Ht){case"frame":return ht(on);case"lost":wn=ar;break;case"restore":wn=ur;break;case"destroy":wn=cr}return wn.push(on),{cancel:function(){for(var mn=0;mn<wn.length;++mn)if(wn[mn]===on){wn[mn]=wn[wn.length-1],wn.pop();break}}}},limits:gn,hasExtension:function(Ht){return 0<=gn.extensions.indexOf(Ht.toLowerCase())},read:Pt,destroy:function(){Un.length=0,it(),Hn&&(Hn.removeEventListener("webglcontextlost",Fe),Hn.removeEventListener("webglcontextrestored",Be)),pn.clear(),Rn.clear(),Cn.clear(),an.clear(),An.clear(),cn.clear(),$t.clear(),Gt&&Gt.clear(),cr.forEach(function(Ht){Ht()})},_gl:Tt,_refresh:ft,poll:function(){mt(),Gt&&Gt.update()},now:Et,stats:Bt,getCachedCode:function(){return Kt},preloadCachedCode:function(Ht){Object.entries(Ht).forEach(function(on){Kt[on[0]]=on[1]})}}),Ne.onDone(null,xt),xt}}()},30456:function(Y,O,e){var M=e(33576),A=M.Buffer;function o(_,p){for(var s in _)p[s]=_[s]}function w(_,p,s){return A(_,p,s)}A.from&&A.alloc&&A.allocUnsafe&&A.allocUnsafeSlow?Y.exports=M:(o(M,O),O.Buffer=w),w.prototype=Object.create(A.prototype),o(A,w),w.from=function(_,p,s){if(typeof _=="number")throw new TypeError("Argument must not be a number");return A(_,p,s)},w.alloc=function(_,p,s){if(typeof _!="number")throw new TypeError("Argument must be a number");var n=A(_);return p!==void 0?typeof s=="string"?n.fill(p,s):n.fill(p):n.fill(0),n},w.allocUnsafe=function(_){if(typeof _!="number")throw new TypeError("Argument must be a number");return A(_)},w.allocUnsafeSlow=function(_){if(typeof _!="number")throw new TypeError("Argument must be a number");return M.SlowBuffer(_)}},14500:function(Y,O,e){var M=e(53664),A=e(64348),o=e(39640)(),w=e(2304),_=M("%TypeError%"),p=M("%Math.floor%");Y.exports=function(s,n){if(typeof s!="function")throw new _("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||p(n)!==n)throw new _("`length` must be a positive 32-bit integer");var a=arguments.length>2&&!!arguments[2],r=!0,i=!0;if("length"in s&&w){var l=w(s,"length");l&&!l.configurable&&(r=!1),l&&!l.writable&&(i=!1)}return(r||i||!a)&&(o?A(s,"length",n,!0,!0):A(s,"length",n)),s}},29936:function(Y,O,e){Y.exports=A;var M=e(61252).EventEmitter;function A(){M.call(this)}e(6768)(A,M),A.Readable=e(12348),A.Writable=e(11288),A.Duplex=e(15316),A.Transform=e(22477),A.PassThrough=e(27136),A.finished=e(15932),A.pipeline=e(38180),A.Stream=A,A.prototype.pipe=function(o,w){var _=this;function p(u){o.writable&&o.write(u)===!1&&_.pause&&_.pause()}function s(){_.readable&&_.resume&&_.resume()}_.on("data",p),o.on("drain",s),o._isStdio||w&&w.end===!1||(_.on("end",a),_.on("close",r));var n=!1;function a(){n||(n=!0,o.end())}function r(){n||(n=!0,typeof o.destroy=="function"&&o.destroy())}function i(u){if(l(),M.listenerCount(this,"error")===0)throw u}function l(){_.removeListener("data",p),o.removeListener("drain",s),_.removeListener("end",a),_.removeListener("close",r),_.removeListener("error",i),o.removeListener("error",i),_.removeListener("end",l),_.removeListener("close",l),o.removeListener("close",l)}return _.on("error",i),o.on("error",i),_.on("end",l),_.on("close",l),o.on("close",l),o.emit("pipe",_),o}},92784:function(Y){var O={};function e(A,o,w){w||(w=Error);var _=function(p){var s,n;function a(r,i,l){return p.call(this,function(u,c,g){return typeof o=="string"?o:o(u,c,g)}(r,i,l))||this}return n=p,(s=a).prototype=Object.create(n.prototype),s.prototype.constructor=s,s.__proto__=n,a}(w);_.prototype.name=w.name,_.prototype.code=A,O[A]=_}function M(A,o){if(Array.isArray(A)){var w=A.length;return A=A.map(function(_){return String(_)}),w>2?"one of ".concat(o," ").concat(A.slice(0,w-1).join(", "),", or ")+A[w-1]:w===2?"one of ".concat(o," ").concat(A[0]," or ").concat(A[1]):"of ".concat(o," ").concat(A[0])}return"of ".concat(o," ").concat(String(A))}e("ERR_INVALID_OPT_VALUE",function(A,o){return'The value "'+o+'" is invalid for option "'+A+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(A,o,w){var _,p,s,n,a;if(typeof o=="string"&&(p="not ",o.substr(0,4)===p)?(_="must not be",o=o.replace(/^not /,"")):_="must be",function(i,l,u){return(u===void 0||u>i.length)&&(u=i.length),i.substring(u-9,u)===l}(A," argument"))s="The ".concat(A," ").concat(_," ").concat(M(o,"type"));else{var r=(typeof a!="number"&&(a=0),a+1>(n=A).length||n.indexOf(".",a)===-1?"argument":"property");s='The "'.concat(A,'" ').concat(r," ").concat(_," ").concat(M(o,"type"))}return s+". Received type ".concat(typeof w)},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(A){return"The "+A+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(A){return"Cannot call "+A+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(A){return"Unknown encoding: "+A},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Y.exports.i=O},15316:function(Y,O,e){var M=e(4168),A=Object.keys||function(i){var l=[];for(var u in i)l.push(u);return l};Y.exports=n;var o=e(12348),w=e(11288);e(6768)(n,o);for(var _=A(w.prototype),p=0;p<_.length;p++){var s=_[p];n.prototype[s]||(n.prototype[s]=w.prototype[s])}function n(i){if(!(this instanceof n))return new n(i);o.call(this,i),w.call(this,i),this.allowHalfOpen=!0,i&&(i.readable===!1&&(this.readable=!1),i.writable===!1&&(this.writable=!1),i.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||M.nextTick(r,this)}function r(i){i.end()}Object.defineProperty(n.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(n.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(n.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(n.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(i){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=i,this._writableState.destroyed=i)}})},27136:function(Y,O,e){Y.exports=A;var M=e(22477);function A(o){if(!(this instanceof A))return new A(o);M.call(this,o)}e(6768)(A,M),A.prototype._transform=function(o,w,_){_(null,o)}},12348:function(Y,O,e){var M,A=e(4168);Y.exports=T,T.ReadableState=y,e(61252).EventEmitter;var o,w=function(ee,$){return ee.listeners($).length},_=e(4776),p=e(33576).Buffer,s=e.g.Uint8Array||function(){},n=e(19768);o=n&&n.debuglog?n.debuglog("stream"):function(){};var a,r,i,l=e(47264),u=e(55324),c=e(24888).getHighWaterMark,g=e(92784).i,f=g.ERR_INVALID_ARG_TYPE,b=g.ERR_STREAM_PUSH_AFTER_EOF,v=g.ERR_METHOD_NOT_IMPLEMENTED,d=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e(6768)(T,_);var m=u.errorOrDestroy,x=["error","close","destroy","pause","resume"];function y(ee,$,J){M=M||e(15316),ee=ee||{},typeof J!="boolean"&&(J=$ instanceof M),this.objectMode=!!ee.objectMode,J&&(this.objectMode=this.objectMode||!!ee.readableObjectMode),this.highWaterMark=c(this,ee,"readableHighWaterMark",J),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=ee.emitClose!==!1,this.autoDestroy=!!ee.autoDestroy,this.destroyed=!1,this.defaultEncoding=ee.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ee.encoding&&(a||(a=e(86032).o),this.decoder=new a(ee.encoding),this.encoding=ee.encoding)}function T(ee){if(M=M||e(15316),!(this instanceof T))return new T(ee);var $=this instanceof M;this._readableState=new y(ee,this,$),this.readable=!0,ee&&(typeof ee.read=="function"&&(this._read=ee.read),typeof ee.destroy=="function"&&(this._destroy=ee.destroy)),_.call(this)}function h(ee,$,J,K,te){o("readableAddChunk",$);var ie,ae=ee._readableState;if($===null)ae.reading=!1,function(se,ce){if(o("onEofChunk"),!ce.ended){if(ce.decoder){var de=ce.decoder.end();de&&de.length&&(ce.buffer.push(de),ce.length+=ce.objectMode?1:de.length)}ce.ended=!0,ce.sync?P(se):(ce.needReadable=!1,ce.emittedReadable||(ce.emittedReadable=!0,I(se)))}}(ee,ae);else if(te||(ie=function(se,ce){var de,ge;return ge=ce,p.isBuffer(ge)||ge instanceof s||typeof ce=="string"||ce===void 0||se.objectMode||(de=new f("chunk",["string","Buffer","Uint8Array"],ce)),de}(ae,$)),ie)m(ee,ie);else if(ae.objectMode||$&&$.length>0)if(typeof $=="string"||ae.objectMode||Object.getPrototypeOf($)===p.prototype||($=function(se){return p.from(se)}($)),K)ae.endEmitted?m(ee,new d):E(ee,ae,$,!0);else if(ae.ended)m(ee,new b);else{if(ae.destroyed)return!1;ae.reading=!1,ae.decoder&&!J?($=ae.decoder.write($),ae.objectMode||$.length!==0?E(ee,ae,$,!1):z(ee,ae)):E(ee,ae,$,!1)}else K||(ae.reading=!1,z(ee,ae));return!ae.ended&&(ae.length<ae.highWaterMark||ae.length===0)}function E(ee,$,J,K){$.flowing&&$.length===0&&!$.sync?($.awaitDrain=0,ee.emit("data",J)):($.length+=$.objectMode?1:J.length,K?$.buffer.unshift(J):$.buffer.push(J),$.needReadable&&P(ee)),z(ee,$)}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(ee){this._readableState&&(this._readableState.destroyed=ee)}}),T.prototype.destroy=u.destroy,T.prototype._undestroy=u.undestroy,T.prototype._destroy=function(ee,$){$(ee)},T.prototype.push=function(ee,$){var J,K=this._readableState;return K.objectMode?J=!0:typeof ee=="string"&&(($=$||K.defaultEncoding)!==K.encoding&&(ee=p.from(ee,$),$=""),J=!0),h(this,ee,$,!1,J)},T.prototype.unshift=function(ee){return h(this,ee,null,!0,!1)},T.prototype.isPaused=function(){return this._readableState.flowing===!1},T.prototype.setEncoding=function(ee){a||(a=e(86032).o);var $=new a(ee);this._readableState.decoder=$,this._readableState.encoding=this._readableState.decoder.encoding;for(var J=this._readableState.buffer.head,K="";J!==null;)K+=$.write(J.data),J=J.next;return this._readableState.buffer.clear(),K!==""&&this._readableState.buffer.push(K),this._readableState.length=K.length,this};var k=1073741824;function L(ee,$){return ee<=0||$.length===0&&$.ended?0:$.objectMode?1:ee!=ee?$.flowing&&$.length?$.buffer.head.data.length:$.length:(ee>$.highWaterMark&&($.highWaterMark=function(J){return J>=k?J=k:(J--,J|=J>>>1,J|=J>>>2,J|=J>>>4,J|=J>>>8,J|=J>>>16,J++),J}(ee)),ee<=$.length?ee:$.ended?$.length:($.needReadable=!0,0))}function P(ee){var $=ee._readableState;o("emitReadable",$.needReadable,$.emittedReadable),$.needReadable=!1,$.emittedReadable||(o("emitReadable",$.flowing),$.emittedReadable=!0,A.nextTick(I,ee))}function I(ee){var $=ee._readableState;o("emitReadable_",$.destroyed,$.length,$.ended),$.destroyed||!$.length&&!$.ended||(ee.emit("readable"),$.emittedReadable=!1),$.needReadable=!$.flowing&&!$.ended&&$.length<=$.highWaterMark,Z(ee)}function z(ee,$){$.readingMore||($.readingMore=!0,A.nextTick(F,ee,$))}function F(ee,$){for(;!$.reading&&!$.ended&&($.length<$.highWaterMark||$.flowing&&$.length===0);){var J=$.length;if(o("maybeReadMore read 0"),ee.read(0),J===$.length)break}$.readingMore=!1}function U(ee){var $=ee._readableState;$.readableListening=ee.listenerCount("readable")>0,$.resumeScheduled&&!$.paused?$.flowing=!0:ee.listenerCount("data")>0&&ee.resume()}function R(ee){o("readable nexttick read 0"),ee.read(0)}function j(ee,$){o("resume",$.reading),$.reading||ee.read(0),$.resumeScheduled=!1,ee.emit("resume"),Z(ee),$.flowing&&!$.reading&&ee.read(0)}function Z(ee){var $=ee._readableState;for(o("flow",$.flowing);$.flowing&&ee.read()!==null;);}function B(ee,$){return $.length===0?null:($.objectMode?J=$.buffer.shift():!ee||ee>=$.length?(J=$.decoder?$.buffer.join(""):$.buffer.length===1?$.buffer.first():$.buffer.concat($.length),$.buffer.clear()):J=$.buffer.consume(ee,$.decoder),J);var J}function q(ee){var $=ee._readableState;o("endReadable",$.endEmitted),$.endEmitted||($.ended=!0,A.nextTick(V,$,ee))}function V(ee,$){if(o("endReadableNT",ee.endEmitted,ee.length),!ee.endEmitted&&ee.length===0&&(ee.endEmitted=!0,$.readable=!1,$.emit("end"),ee.autoDestroy)){var J=$._writableState;(!J||J.autoDestroy&&J.finished)&&$.destroy()}}function ne(ee,$){for(var J=0,K=ee.length;J<K;J++)if(ee[J]===$)return J;return-1}T.prototype.read=function(ee){o("read",ee),ee=parseInt(ee,10);var $=this._readableState,J=ee;if(ee!==0&&($.emittedReadable=!1),ee===0&&$.needReadable&&(($.highWaterMark!==0?$.length>=$.highWaterMark:$.length>0)||$.ended))return o("read: emitReadable",$.length,$.ended),$.length===0&&$.ended?q(this):P(this),null;if((ee=L(ee,$))===0&&$.ended)return $.length===0&&q(this),null;var K,te=$.needReadable;return o("need readable",te),($.length===0||$.length-ee<$.highWaterMark)&&o("length less than watermark",te=!0),$.ended||$.reading?o("reading or ended",te=!1):te&&(o("do read"),$.reading=!0,$.sync=!0,$.length===0&&($.needReadable=!0),this._read($.highWaterMark),$.sync=!1,$.reading||(ee=L(J,$))),(K=ee>0?B(ee,$):null)===null?($.needReadable=$.length<=$.highWaterMark,ee=0):($.length-=ee,$.awaitDrain=0),$.length===0&&($.ended||($.needReadable=!0),J!==ee&&$.ended&&q(this)),K!==null&&this.emit("data",K),K},T.prototype._read=function(ee){m(this,new v("_read()"))},T.prototype.pipe=function(ee,$){var J=this,K=this._readableState;switch(K.pipesCount){case 0:K.pipes=ee;break;case 1:K.pipes=[K.pipes,ee];break;default:K.pipes.push(ee)}K.pipesCount+=1,o("pipe count=%d opts=%j",K.pipesCount,$);var te=$&&$.end===!1||ee===A.stdout||ee===A.stderr?be:ie;function ie(){o("onend"),ee.end()}K.endEmitted?A.nextTick(te):J.once("end",te),ee.on("unpipe",function me(Se,we){o("onunpipe"),Se===J&&we&&we.hasUnpiped===!1&&(we.hasUnpiped=!0,o("cleanup"),ee.removeListener("close",ge),ee.removeListener("finish",ve),ee.removeListener("drain",ae),ee.removeListener("error",de),ee.removeListener("unpipe",me),J.removeListener("end",ie),J.removeListener("end",be),J.removeListener("data",ce),se=!0,!K.awaitDrain||ee._writableState&&!ee._writableState.needDrain||ae())});var ae=function(me){return function(){var Se=me._readableState;o("pipeOnDrain",Se.awaitDrain),Se.awaitDrain&&Se.awaitDrain--,Se.awaitDrain===0&&w(me,"data")&&(Se.flowing=!0,Z(me))}}(J);ee.on("drain",ae);var se=!1;function ce(me){o("ondata");var Se=ee.write(me);o("dest.write",Se),Se===!1&&((K.pipesCount===1&&K.pipes===ee||K.pipesCount>1&&ne(K.pipes,ee)!==-1)&&!se&&(o("false write response, pause",K.awaitDrain),K.awaitDrain++),J.pause())}function de(me){o("onerror",me),be(),ee.removeListener("error",de),w(ee,"error")===0&&m(ee,me)}function ge(){ee.removeListener("finish",ve),be()}function ve(){o("onfinish"),ee.removeListener("close",ge),be()}function be(){o("unpipe"),J.unpipe(ee)}return J.on("data",ce),function(me,Se,we){if(typeof me.prependListener=="function")return me.prependListener(Se,we);me._events&&me._events[Se]?Array.isArray(me._events[Se])?me._events[Se].unshift(we):me._events[Se]=[we,me._events[Se]]:me.on(Se,we)}(ee,"error",de),ee.once("close",ge),ee.once("finish",ve),ee.emit("pipe",J),K.flowing||(o("pipe resume"),J.resume()),ee},T.prototype.unpipe=function(ee){var $=this._readableState,J={hasUnpiped:!1};if($.pipesCount===0)return this;if($.pipesCount===1)return ee&&ee!==$.pipes||(ee||(ee=$.pipes),$.pipes=null,$.pipesCount=0,$.flowing=!1,ee&&ee.emit("unpipe",this,J)),this;if(!ee){var K=$.pipes,te=$.pipesCount;$.pipes=null,$.pipesCount=0,$.flowing=!1;for(var ie=0;ie<te;ie++)K[ie].emit("unpipe",this,{hasUnpiped:!1});return this}var ae=ne($.pipes,ee);return ae===-1||($.pipes.splice(ae,1),$.pipesCount-=1,$.pipesCount===1&&($.pipes=$.pipes[0]),ee.emit("unpipe",this,J)),this},T.prototype.on=function(ee,$){var J=_.prototype.on.call(this,ee,$),K=this._readableState;return ee==="data"?(K.readableListening=this.listenerCount("readable")>0,K.flowing!==!1&&this.resume()):ee==="readable"&&(K.endEmitted||K.readableListening||(K.readableListening=K.needReadable=!0,K.flowing=!1,K.emittedReadable=!1,o("on readable",K.length,K.reading),K.length?P(this):K.reading||A.nextTick(R,this))),J},T.prototype.addListener=T.prototype.on,T.prototype.removeListener=function(ee,$){var J=_.prototype.removeListener.call(this,ee,$);return ee==="readable"&&A.nextTick(U,this),J},T.prototype.removeAllListeners=function(ee){var $=_.prototype.removeAllListeners.apply(this,arguments);return ee!=="readable"&&ee!==void 0||A.nextTick(U,this),$},T.prototype.resume=function(){var ee=this._readableState;return ee.flowing||(o("resume"),ee.flowing=!ee.readableListening,function($,J){J.resumeScheduled||(J.resumeScheduled=!0,A.nextTick(j,$,J))}(this,ee)),ee.paused=!1,this},T.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},T.prototype.wrap=function(ee){var $=this,J=this._readableState,K=!1;for(var te in ee.on("end",function(){if(o("wrapped end"),J.decoder&&!J.ended){var ae=J.decoder.end();ae&&ae.length&&$.push(ae)}$.push(null)}),ee.on("data",function(ae){o("wrapped data"),J.decoder&&(ae=J.decoder.write(ae)),J.objectMode&&ae==null||(J.objectMode||ae&&ae.length)&&($.push(ae)||(K=!0,ee.pause()))}),ee)this[te]===void 0&&typeof ee[te]=="function"&&(this[te]=function(ae){return function(){return ee[ae].apply(ee,arguments)}}(te));for(var ie=0;ie<x.length;ie++)ee.on(x[ie],this.emit.bind(this,x[ie]));return this._read=function(ae){o("wrapped _read",ae),K&&(K=!1,ee.resume())},this},typeof Symbol=="function"&&(T.prototype[Symbol.asyncIterator]=function(){return r===void 0&&(r=e(60328)),r(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ee){this._readableState&&(this._readableState.flowing=ee)}}),T._fromList=B,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(T.from=function(ee,$){return i===void 0&&(i=e(90555)),i(T,ee,$)})},22477:function(Y,O,e){Y.exports=n;var M=e(92784).i,A=M.ERR_METHOD_NOT_IMPLEMENTED,o=M.ERR_MULTIPLE_CALLBACK,w=M.ERR_TRANSFORM_ALREADY_TRANSFORMING,_=M.ERR_TRANSFORM_WITH_LENGTH_0,p=e(15316);function s(i,l){var u=this._transformState;u.transforming=!1;var c=u.writecb;if(c===null)return this.emit("error",new o);u.writechunk=null,u.writecb=null,l!=null&&this.push(l),c(i);var g=this._readableState;g.reading=!1,(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function n(i){if(!(this instanceof n))return new n(i);p.call(this,i),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,i&&(typeof i.transform=="function"&&(this._transform=i.transform),typeof i.flush=="function"&&(this._flush=i.flush)),this.on("prefinish",a)}function a(){var i=this;typeof this._flush!="function"||this._readableState.destroyed?r(this,null,null):this._flush(function(l,u){r(i,l,u)})}function r(i,l,u){if(l)return i.emit("error",l);if(u!=null&&i.push(u),i._writableState.length)throw new _;if(i._transformState.transforming)throw new w;return i.push(null)}e(6768)(n,p),n.prototype.push=function(i,l){return this._transformState.needTransform=!1,p.prototype.push.call(this,i,l)},n.prototype._transform=function(i,l,u){u(new A("_transform()"))},n.prototype._write=function(i,l,u){var c=this._transformState;if(c.writecb=u,c.writechunk=i,c.writeencoding=l,!c.transforming){var g=this._readableState;(c.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},n.prototype._read=function(i){var l=this._transformState;l.writechunk===null||l.transforming?l.needTransform=!0:(l.transforming=!0,this._transform(l.writechunk,l.writeencoding,l.afterTransform))},n.prototype._destroy=function(i,l){p.prototype._destroy.call(this,i,function(u){l(u)})}},11288:function(Y,O,e){var M,A=e(4168);function o(z){var F=this;this.next=null,this.entry=null,this.finish=function(){(function(U,R,j){var Z=U.entry;for(U.entry=null;Z;){var B=Z.callback;R.pendingcb--,B(void 0),Z=Z.next}R.corkedRequestsFree.next=U})(F,z)}}Y.exports=T,T.WritableState=y;var w,_={deprecate:e(96656)},p=e(4776),s=e(33576).Buffer,n=e.g.Uint8Array||function(){},a=e(55324),r=e(24888).getHighWaterMark,i=e(92784).i,l=i.ERR_INVALID_ARG_TYPE,u=i.ERR_METHOD_NOT_IMPLEMENTED,c=i.ERR_MULTIPLE_CALLBACK,g=i.ERR_STREAM_CANNOT_PIPE,f=i.ERR_STREAM_DESTROYED,b=i.ERR_STREAM_NULL_VALUES,v=i.ERR_STREAM_WRITE_AFTER_END,d=i.ERR_UNKNOWN_ENCODING,m=a.errorOrDestroy;function x(){}function y(z,F,U){M=M||e(15316),z=z||{},typeof U!="boolean"&&(U=F instanceof M),this.objectMode=!!z.objectMode,U&&(this.objectMode=this.objectMode||!!z.writableObjectMode),this.highWaterMark=r(this,z,"writableHighWaterMark",U),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var R=z.decodeStrings===!1;this.decodeStrings=!R,this.defaultEncoding=z.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(j){(function(Z,B){var q=Z._writableState,V=q.sync,ne=q.writecb;if(typeof ne!="function")throw new c;if(function($){$.writing=!1,$.writecb=null,$.length-=$.writelen,$.writelen=0}(q),B)(function($,J,K,te,ie){--J.pendingcb,K?(A.nextTick(ie,te),A.nextTick(I,$,J),$._writableState.errorEmitted=!0,m($,te)):(ie(te),$._writableState.errorEmitted=!0,m($,te),I($,J))})(Z,q,V,B,ne);else{var ee=L(q)||Z.destroyed;ee||q.corked||q.bufferProcessing||!q.bufferedRequest||k(Z,q),V?A.nextTick(E,Z,q,ee,ne):E(Z,q,ee,ne)}})(F,j)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=z.emitClose!==!1,this.autoDestroy=!!z.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function T(z){var F=this instanceof(M=M||e(15316));if(!F&&!w.call(T,this))return new T(z);this._writableState=new y(z,this,F),this.writable=!0,z&&(typeof z.write=="function"&&(this._write=z.write),typeof z.writev=="function"&&(this._writev=z.writev),typeof z.destroy=="function"&&(this._destroy=z.destroy),typeof z.final=="function"&&(this._final=z.final)),p.call(this)}function h(z,F,U,R,j,Z,B){F.writelen=R,F.writecb=B,F.writing=!0,F.sync=!0,F.destroyed?F.onwrite(new f("write")):U?z._writev(j,F.onwrite):z._write(j,Z,F.onwrite),F.sync=!1}function E(z,F,U,R){U||function(j,Z){Z.length===0&&Z.needDrain&&(Z.needDrain=!1,j.emit("drain"))}(z,F),F.pendingcb--,R(),I(z,F)}function k(z,F){F.bufferProcessing=!0;var U=F.bufferedRequest;if(z._writev&&U&&U.next){var R=F.bufferedRequestCount,j=new Array(R),Z=F.corkedRequestsFree;Z.entry=U;for(var B=0,q=!0;U;)j[B]=U,U.isBuf||(q=!1),U=U.next,B+=1;j.allBuffers=q,h(z,F,!0,F.length,j,"",Z.finish),F.pendingcb++,F.lastBufferedRequest=null,Z.next?(F.corkedRequestsFree=Z.next,Z.next=null):F.corkedRequestsFree=new o(F),F.bufferedRequestCount=0}else{for(;U;){var V=U.chunk,ne=U.encoding,ee=U.callback;if(h(z,F,!1,F.objectMode?1:V.length,V,ne,ee),U=U.next,F.bufferedRequestCount--,F.writing)break}U===null&&(F.lastBufferedRequest=null)}F.bufferedRequest=U,F.bufferProcessing=!1}function L(z){return z.ending&&z.length===0&&z.bufferedRequest===null&&!z.finished&&!z.writing}function P(z,F){z._final(function(U){F.pendingcb--,U&&m(z,U),F.prefinished=!0,z.emit("prefinish"),I(z,F)})}function I(z,F){var U=L(F);if(U&&(function(j,Z){Z.prefinished||Z.finalCalled||(typeof j._final!="function"||Z.destroyed?(Z.prefinished=!0,j.emit("prefinish")):(Z.pendingcb++,Z.finalCalled=!0,A.nextTick(P,j,Z)))}(z,F),F.pendingcb===0&&(F.finished=!0,z.emit("finish"),F.autoDestroy))){var R=z._readableState;(!R||R.autoDestroy&&R.endEmitted)&&z.destroy()}return U}e(6768)(T,p),y.prototype.getBuffer=function(){for(var z=this.bufferedRequest,F=[];z;)F.push(z),z=z.next;return F},function(){try{Object.defineProperty(y.prototype,"buffer",{get:_.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(w=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(z){return!!w.call(this,z)||this===T&&z&&z._writableState instanceof y}})):w=function(z){return z instanceof this},T.prototype.pipe=function(){m(this,new g)},T.prototype.write=function(z,F,U){var R,j=this._writableState,Z=!1,B=!j.objectMode&&(R=z,s.isBuffer(R)||R instanceof n);return B&&!s.isBuffer(z)&&(z=function(q){return s.from(q)}(z)),typeof F=="function"&&(U=F,F=null),B?F="buffer":F||(F=j.defaultEncoding),typeof U!="function"&&(U=x),j.ending?function(q,V){var ne=new v;m(q,ne),A.nextTick(V,ne)}(this,U):(B||function(q,V,ne,ee){var $;return ne===null?$=new b:typeof ne=="string"||V.objectMode||($=new l("chunk",["string","Buffer"],ne)),!$||(m(q,$),A.nextTick(ee,$),!1)}(this,j,z,U))&&(j.pendingcb++,Z=function(q,V,ne,ee,$,J){if(!ne){var K=function(se,ce,de){return se.objectMode||se.decodeStrings===!1||typeof ce!="string"||(ce=s.from(ce,de)),ce}(V,ee,$);ee!==K&&(ne=!0,$="buffer",ee=K)}var te=V.objectMode?1:ee.length;V.length+=te;var ie=V.length<V.highWaterMark;if(ie||(V.needDrain=!0),V.writing||V.corked){var ae=V.lastBufferedRequest;V.lastBufferedRequest={chunk:ee,encoding:$,isBuf:ne,callback:J,next:null},ae?ae.next=V.lastBufferedRequest:V.bufferedRequest=V.lastBufferedRequest,V.bufferedRequestCount+=1}else h(q,V,!1,te,ee,$,J);return ie}(this,j,B,z,F,U)),Z},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var z=this._writableState;z.corked&&(z.corked--,z.writing||z.corked||z.bufferProcessing||!z.bufferedRequest||k(this,z))},T.prototype.setDefaultEncoding=function(z){if(typeof z=="string"&&(z=z.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((z+"").toLowerCase())>-1))throw new d(z);return this._writableState.defaultEncoding=z,this},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),T.prototype._write=function(z,F,U){U(new u("_write()"))},T.prototype._writev=null,T.prototype.end=function(z,F,U){var R=this._writableState;return typeof z=="function"?(U=z,z=null,F=null):typeof F=="function"&&(U=F,F=null),z!=null&&this.write(z,F),R.corked&&(R.corked=1,this.uncork()),R.ending||function(j,Z,B){Z.ending=!0,I(j,Z),B&&(Z.finished?A.nextTick(B):j.once("finish",B)),Z.ended=!0,j.writable=!1}(this,R,U),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(z){this._writableState&&(this._writableState.destroyed=z)}}),T.prototype.destroy=a.destroy,T.prototype._undestroy=a.undestroy,T.prototype._destroy=function(z,F){F(z)}},60328:function(Y,O,e){var M,A=e(4168);function o(b,v,d){return v in b?Object.defineProperty(b,v,{value:d,enumerable:!0,configurable:!0,writable:!0}):b[v]=d,b}var w=e(15932),_=Symbol("lastResolve"),p=Symbol("lastReject"),s=Symbol("error"),n=Symbol("ended"),a=Symbol("lastPromise"),r=Symbol("handlePromise"),i=Symbol("stream");function l(b,v){return{value:b,done:v}}function u(b){var v=b[_];if(v!==null){var d=b[i].read();d!==null&&(b[a]=null,b[_]=null,b[p]=null,v(l(d,!1)))}}function c(b){A.nextTick(u,b)}var g=Object.getPrototypeOf(function(){}),f=Object.setPrototypeOf((o(M={get stream(){return this[i]},next:function(){var b=this,v=this[s];if(v!==null)return Promise.reject(v);if(this[n])return Promise.resolve(l(void 0,!0));if(this[i].destroyed)return new Promise(function(y,T){A.nextTick(function(){b[s]?T(b[s]):y(l(void 0,!0))})});var d,m=this[a];if(m)d=new Promise(function(y,T){return function(h,E){y.then(function(){T[n]?h(l(void 0,!0)):T[r](h,E)},E)}}(m,this));else{var x=this[i].read();if(x!==null)return Promise.resolve(l(x,!1));d=new Promise(this[r])}return this[a]=d,d}},Symbol.asyncIterator,function(){return this}),o(M,"return",function(){var b=this;return new Promise(function(v,d){b[i].destroy(null,function(m){m?d(m):v(l(void 0,!0))})})}),M),g);Y.exports=function(b){var v,d=Object.create(f,(o(v={},i,{value:b,writable:!0}),o(v,_,{value:null,writable:!0}),o(v,p,{value:null,writable:!0}),o(v,s,{value:null,writable:!0}),o(v,n,{value:b._readableState.endEmitted,writable:!0}),o(v,r,{value:function(m,x){var y=d[i].read();y?(d[a]=null,d[_]=null,d[p]=null,m(l(y,!1))):(d[_]=m,d[p]=x)},writable:!0}),v));return d[a]=null,w(b,function(m){if(m&&m.code!=="ERR_STREAM_PREMATURE_CLOSE"){var x=d[p];return x!==null&&(d[a]=null,d[_]=null,d[p]=null,x(m)),void(d[s]=m)}var y=d[_];y!==null&&(d[a]=null,d[_]=null,d[p]=null,y(l(void 0,!0))),d[n]=!0}),b.on("readable",c.bind(null,d)),d}},47264:function(Y,O,e){function M(s,n){var a=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);n&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),a.push.apply(a,r)}return a}function A(s,n,a){return n in s?Object.defineProperty(s,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[n]=a,s}function o(s,n){for(var a=0;a<n.length;a++){var r=n[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(s,r.key,r)}}var w=e(33576).Buffer,_=e(21576).inspect,p=_&&_.custom||"inspect";Y.exports=function(){function s(){(function(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")})(this,s),this.head=null,this.tail=null,this.length=0}var n,a;return n=s,a=[{key:"push",value:function(r){var i={data:r,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length}},{key:"unshift",value:function(r){var i={data:r,next:this.head};this.length===0&&(this.tail=i),this.head=i,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var i=this.head,l=""+i.data;i=i.next;)l+=r+i.data;return l}},{key:"concat",value:function(r){if(this.length===0)return w.alloc(0);for(var i,l,u,c=w.allocUnsafe(r>>>0),g=this.head,f=0;g;)i=g.data,l=c,u=f,w.prototype.copy.call(i,l,u),f+=g.data.length,g=g.next;return c}},{key:"consume",value:function(r,i){var l;return r<this.head.data.length?(l=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):l=r===this.head.data.length?this.shift():i?this._getString(r):this._getBuffer(r),l}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var i=this.head,l=1,u=i.data;for(r-=u.length;i=i.next;){var c=i.data,g=r>c.length?c.length:r;if(g===c.length?u+=c:u+=c.slice(0,r),(r-=g)==0){g===c.length?(++l,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=c.slice(g));break}++l}return this.length-=l,u}},{key:"_getBuffer",value:function(r){var i=w.allocUnsafe(r),l=this.head,u=1;for(l.data.copy(i),r-=l.data.length;l=l.next;){var c=l.data,g=r>c.length?c.length:r;if(c.copy(i,i.length-r,0,g),(r-=g)==0){g===c.length?(++u,l.next?this.head=l.next:this.head=this.tail=null):(this.head=l,l.data=c.slice(g));break}++u}return this.length-=u,i}},{key:p,value:function(r,i){return _(this,function(l){for(var u=1;u<arguments.length;u++){var c=arguments[u]!=null?arguments[u]:{};u%2?M(Object(c),!0).forEach(function(g){A(l,g,c[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(c)):M(Object(c)).forEach(function(g){Object.defineProperty(l,g,Object.getOwnPropertyDescriptor(c,g))})}return l}({},i,{depth:0,customInspect:!1}))}}],a&&o(n.prototype,a),s}()},55324:function(Y,O,e){var M=e(4168);function A(_,p){w(_,p),o(_)}function o(_){_._writableState&&!_._writableState.emitClose||_._readableState&&!_._readableState.emitClose||_.emit("close")}function w(_,p){_.emit("error",p)}Y.exports={destroy:function(_,p){var s=this,n=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return n||a?(p?p(_):_&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,M.nextTick(w,this,_)):M.nextTick(w,this,_)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(_||null,function(r){!p&&r?s._writableState?s._writableState.errorEmitted?M.nextTick(o,s):(s._writableState.errorEmitted=!0,M.nextTick(A,s,r)):M.nextTick(A,s,r):p?(M.nextTick(o,s),p(r)):M.nextTick(o,s)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(_,p){var s=_._readableState,n=_._writableState;s&&s.autoDestroy||n&&n.autoDestroy?_.destroy(p):_.emit("error",p)}}},15932:function(Y,O,e){var M=e(92784).i.ERR_STREAM_PREMATURE_CLOSE;function A(){}Y.exports=function o(w,_,p){if(typeof _=="function")return o(w,null,_);_||(_={}),p=function(b){var v=!1;return function(){if(!v){v=!0;for(var d=arguments.length,m=new Array(d),x=0;x<d;x++)m[x]=arguments[x];b.apply(this,m)}}}(p||A);var s=_.readable||_.readable!==!1&&w.readable,n=_.writable||_.writable!==!1&&w.writable,a=function(){w.writable||i()},r=w._writableState&&w._writableState.finished,i=function(){n=!1,r=!0,s||p.call(w)},l=w._readableState&&w._readableState.endEmitted,u=function(){s=!1,l=!0,n||p.call(w)},c=function(b){p.call(w,b)},g=function(){var b;return s&&!l?(w._readableState&&w._readableState.ended||(b=new M),p.call(w,b)):n&&!r?(w._writableState&&w._writableState.ended||(b=new M),p.call(w,b)):void 0},f=function(){w.req.on("finish",i)};return function(b){return b.setHeader&&typeof b.abort=="function"}(w)?(w.on("complete",i),w.on("abort",g),w.req?f():w.on("request",f)):n&&!w._writableState&&(w.on("end",a),w.on("close",a)),w.on("end",u),w.on("finish",i),_.error!==!1&&w.on("error",c),w.on("close",g),function(){w.removeListener("complete",i),w.removeListener("abort",g),w.removeListener("request",f),w.req&&w.req.removeListener("finish",i),w.removeListener("end",a),w.removeListener("close",a),w.removeListener("finish",i),w.removeListener("end",u),w.removeListener("error",c),w.removeListener("close",g)}}},90555:function(Y){Y.exports=function(){throw new Error("Readable.from is not available in the browser")}},38180:function(Y,O,e){var M,A=e(92784).i,o=A.ERR_MISSING_ARGS,w=A.ERR_STREAM_DESTROYED;function _(n){if(n)throw n}function p(n){n()}function s(n,a){return n.pipe(a)}Y.exports=function(){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];var i,l=function(c){return c.length?typeof c[c.length-1]!="function"?_:c.pop():_}(a);if(Array.isArray(a[0])&&(a=a[0]),a.length<2)throw new o("streams");var u=a.map(function(c,g){var f=g<a.length-1;return function(b,v,d,m){m=function(T){var h=!1;return function(){h||(h=!0,T.apply(void 0,arguments))}}(m);var x=!1;b.on("close",function(){x=!0}),M===void 0&&(M=e(15932)),M(b,{readable:v,writable:d},function(T){if(T)return m(T);x=!0,m()});var y=!1;return function(T){if(!x&&!y)return y=!0,function(h){return h.setHeader&&typeof h.abort=="function"}(b)?b.abort():typeof b.destroy=="function"?b.destroy():void m(T||new w("pipe"))}}(c,f,g>0,function(b){i||(i=b),b&&u.forEach(p),f||(u.forEach(p),l(i))})});return a.reduce(s)}},24888:function(Y,O,e){var M=e(92784).i.ERR_INVALID_OPT_VALUE;Y.exports={getHighWaterMark:function(A,o,w,_){var p=function(s,n,a){return s.highWaterMark!=null?s.highWaterMark:n?s[a]:null}(o,_,w);if(p!=null){if(!isFinite(p)||Math.floor(p)!==p||p<0)throw new M(_?w:"highWaterMark",p);return Math.floor(p)}return A.objectMode?16:16384}}},4776:function(Y,O,e){Y.exports=e(61252).EventEmitter},86032:function(Y,O,e){var M=e(30456).Buffer,A=M.isEncoding||function(l){switch((l=""+l)&&l.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(l){var u;switch(this.encoding=function(c){var g=function(f){if(!f)return"utf8";for(var b;;)switch(f){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return f;default:if(b)return;f=(""+f).toLowerCase(),b=!0}}(c);if(typeof g!="string"&&(M.isEncoding===A||!A(c)))throw new Error("Unknown encoding: "+c);return g||c}(l),this.encoding){case"utf16le":this.text=p,this.end=s,u=4;break;case"utf8":this.fillLast=_,u=4;break;case"base64":this.text=n,this.end=a,u=3;break;default:return this.write=r,void(this.end=i)}this.lastNeed=0,this.lastTotal=0,this.lastChar=M.allocUnsafe(u)}function w(l){return l<=127?0:l>>5==6?2:l>>4==14?3:l>>3==30?4:l>>6==2?-1:-2}function _(l){var u=this.lastTotal-this.lastNeed,c=function(g,f,b){if((192&f[0])!=128)return g.lastNeed=0,"";if(g.lastNeed>1&&f.length>1){if((192&f[1])!=128)return g.lastNeed=1,"";if(g.lastNeed>2&&f.length>2&&(192&f[2])!=128)return g.lastNeed=2,""}}(this,l);return c!==void 0?c:this.lastNeed<=l.length?(l.copy(this.lastChar,u,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(l.copy(this.lastChar,u,0,l.length),void(this.lastNeed-=l.length))}function p(l,u){if((l.length-u)%2==0){var c=l.toString("utf16le",u);if(c){var g=c.charCodeAt(c.length-1);if(g>=55296&&g<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=l[l.length-1],l.toString("utf16le",u,l.length-1)}function s(l){var u=l&&l.length?this.write(l):"";if(this.lastNeed){var c=this.lastTotal-this.lastNeed;return u+this.lastChar.toString("utf16le",0,c)}return u}function n(l,u){var c=(l.length-u)%3;return c===0?l.toString("base64",u):(this.lastNeed=3-c,this.lastTotal=3,c===1?this.lastChar[0]=l[l.length-1]:(this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1]),l.toString("base64",u,l.length-c))}function a(l){var u=l&&l.length?this.write(l):"";return this.lastNeed?u+this.lastChar.toString("base64",0,3-this.lastNeed):u}function r(l){return l.toString(this.encoding)}function i(l){return l&&l.length?this.write(l):""}O.o=o,o.prototype.write=function(l){if(l.length===0)return"";var u,c;if(this.lastNeed){if((u=this.fillLast(l))===void 0)return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<l.length?u?u+this.text(l,c):this.text(l,c):u||""},o.prototype.end=function(l){var u=l&&l.length?this.write(l):"";return this.lastNeed?u+"":u},o.prototype.text=function(l,u){var c=function(f,b,v){var d=b.length-1;if(d<v)return 0;var m=w(b[d]);return m>=0?(m>0&&(f.lastNeed=m-1),m):--d<v||m===-2?0:(m=w(b[d]))>=0?(m>0&&(f.lastNeed=m-2),m):--d<v||m===-2?0:(m=w(b[d]))>=0?(m>0&&(m===2?m=0:f.lastNeed=m-3),m):0}(this,l,u);if(!this.lastNeed)return l.toString("utf8",u);this.lastTotal=c;var g=l.length-(c-this.lastNeed);return l.copy(this.lastChar,0,g),l.toString("utf8",u,g)},o.prototype.fillLast=function(l){if(this.lastNeed<=l.length)return l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,l.length),this.lastNeed-=l.length}},55619:function(Y,O,e){var M=e(45408),A=e(86844)("stream-parser");Y.exports=function(f){var b=f&&typeof f._transform=="function",v=f&&typeof f._write=="function";if(!b&&!v)throw new Error("must pass a Writable or Transform stream in");A("extending Parser into stream"),f._bytes=n,f._skipBytes=a,b&&(f._passthrough=r),b?f._transform=l:f._write=i};var o=-1,w=0,_=1,p=2;function s(f){A("initializing parser stream"),f._parserBytesLeft=0,f._parserBuffers=[],f._parserBuffered=0,f._parserState=o,f._parserCallback=null,typeof f.push=="function"&&(f._parserOutput=f.push.bind(f)),f._parserInit=!0}function n(f,b){M(!this._parserCallback,'there is already a "callback" set!'),M(isFinite(f)&&f>0,'can only buffer a finite number of bytes > 0, got "'+f+'"'),this._parserInit||s(this),A("buffering %o bytes",f),this._parserBytesLeft=f,this._parserCallback=b,this._parserState=w}function a(f,b){M(!this._parserCallback,'there is already a "callback" set!'),M(f>0,'can only skip > 0 bytes, got "'+f+'"'),this._parserInit||s(this),A("skipping %o bytes",f),this._parserBytesLeft=f,this._parserCallback=b,this._parserState=_}function r(f,b){M(!this._parserCallback,'There is already a "callback" set!'),M(f>0,'can only pass through > 0 bytes, got "'+f+'"'),this._parserInit||s(this),A("passing through %o bytes",f),this._parserBytesLeft=f,this._parserCallback=b,this._parserState=p}function i(f,b,v){this._parserInit||s(this),A("write(%o bytes)",f.length),typeof b=="function"&&(v=b),c(this,f,null,v)}function l(f,b,v){this._parserInit||s(this),A("transform(%o bytes)",f.length),typeof b!="function"&&(b=this._parserOutput),c(this,f,b,v)}function u(f,b,v,d){if(f._parserBytesLeft-=b.length,A("%o bytes left for stream piece",f._parserBytesLeft),f._parserState===w?(f._parserBuffers.push(b),f._parserBuffered+=b.length):f._parserState===p&&v(b),f._parserBytesLeft!==0)return d;var m=f._parserCallback;if(m&&f._parserState===w&&f._parserBuffers.length>1&&(b=Buffer.concat(f._parserBuffers,f._parserBuffered)),f._parserState!==w&&(b=null),f._parserCallback=null,f._parserBuffered=0,f._parserState=o,f._parserBuffers.splice(0),m){var x=[];b&&x.push(b),v&&x.push(v);var y=m.length>x.length;y&&x.push(g(d));var T=m.apply(f,x);if(!y||d===T)return d}}var c=g(function f(b,v,d,m){return b._parserBytesLeft<=0?m(new Error("got data but not currently parsing anything")):v.length<=b._parserBytesLeft?function(){return u(b,v,d,m)}:function(){var x=v.slice(0,b._parserBytesLeft);return u(b,x,d,function(y){return y?m(y):v.length>x.length?function(){return f(b,v.slice(x.length),d,m)}:void 0})}});function g(f){return function(){for(var b=f.apply(this,arguments);typeof b=="function";)b=b();return b}}},86844:function(Y,O,e){var M=e(4168);function A(){var o;try{o=O.storage.debug}catch{}return!o&&M!==void 0&&"env"in M&&(o=M.env.DEBUG),o}(O=Y.exports=e(89416)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},O.formatArgs=function(o){var w=this.useColors;if(o[0]=(w?"%c":"")+this.namespace+(w?" %c":" ")+o[0]+(w?"%c ":" ")+"+"+O.humanize(this.diff),w){var _="color: "+this.color;o.splice(1,0,_,"color: inherit");var p=0,s=0;o[0].replace(/%[a-zA-Z%]/g,function(n){n!=="%%"&&(p++,n==="%c"&&(s=p))}),o.splice(s,0,_)}},O.save=function(o){try{o==null?O.storage.removeItem("debug"):O.storage.debug=o}catch{}},O.load=A,O.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},O.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),O.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],O.formatters.j=function(o){try{return JSON.stringify(o)}catch(w){return"[UnexpectedJSONParseError]: "+w.message}},O.enable(A())},89416:function(Y,O,e){var M;function A(o){function w(){if(w.enabled){var _=w,p=+new Date,s=p-(M||p);_.diff=s,_.prev=M,_.curr=p,M=p;for(var n=new Array(arguments.length),a=0;a<n.length;a++)n[a]=arguments[a];n[0]=O.coerce(n[0]),typeof n[0]!="string"&&n.unshift("%O");var r=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,function(i,l){if(i==="%%")return i;r++;var u=O.formatters[l];if(typeof u=="function"){var c=n[r];i=u.call(_,c),n.splice(r,1),r--}return i}),O.formatArgs.call(_,n),(w.log||O.log||console.log.bind(console)).apply(_,n)}}return w.namespace=o,w.enabled=O.enabled(o),w.useColors=O.useColors(),w.color=function(_){var p,s=0;for(p in _)s=(s<<5)-s+_.charCodeAt(p),s|=0;return O.colors[Math.abs(s)%O.colors.length]}(o),typeof O.init=="function"&&O.init(w),w}(O=Y.exports=A.debug=A.default=A).coerce=function(o){return o instanceof Error?o.stack||o.message:o},O.disable=function(){O.enable("")},O.enable=function(o){O.save(o),O.names=[],O.skips=[];for(var w=(typeof o=="string"?o:"").split(/[\s,]+/),_=w.length,p=0;p<_;p++)w[p]&&((o=w[p].replace(/\*/g,".*?"))[0]==="-"?O.skips.push(new RegExp("^"+o.substr(1)+"$")):O.names.push(new RegExp("^"+o+"$")))},O.enabled=function(o){var w,_;for(w=0,_=O.skips.length;w<_;w++)if(O.skips[w].test(o))return!1;for(w=0,_=O.names.length;w<_;w++)if(O.names[w].test(o))return!0;return!1},O.humanize=e(93744),O.names=[],O.skips=[],O.formatters={}},93744:function(Y){var O=1e3,e=60*O,M=60*e,A=24*M;function o(w,_,p){if(!(w<_))return w<1.5*_?Math.floor(w/_)+" "+p:Math.ceil(w/_)+" "+p+"s"}Y.exports=function(w,_){_=_||{};var p,s=typeof w;if(s==="string"&&w.length>0)return function(n){if(!((n=String(n)).length>100)){var a=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(n);if(a){var r=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"days":case"day":case"d":return r*A;case"hours":case"hour":case"hrs":case"hr":case"h":return r*M;case"minutes":case"minute":case"mins":case"min":case"m":return r*e;case"seconds":case"second":case"secs":case"sec":case"s":return r*O;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(w);if(s==="number"&&isNaN(w)===!1)return _.long?o(p=w,A,"day")||o(p,M,"hour")||o(p,e,"minute")||o(p,O,"second")||p+" ms":function(n){return n>=A?Math.round(n/A)+"d":n>=M?Math.round(n/M)+"h":n>=e?Math.round(n/e)+"m":n>=O?Math.round(n/O)+"s":n+"ms"}(w);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(w))}},39956:function(Y,O,e){var M=e(32868);Y.exports=function(A,o,w){if(A==null)throw Error("First argument should be a string");if(o==null)throw Error("Separator should be a string or a RegExp");w?(typeof w=="string"||Array.isArray(w))&&(w={ignore:w}):w={},w.escape==null&&(w.escape=!0),w.ignore==null?w.ignore=["[]","()","{}","<>",'""',"''","``","",""]:(typeof w.ignore=="string"&&(w.ignore=[w.ignore]),w.ignore=w.ignore.map(function(i){return i.length===1&&(i+=i),i}));var _=M.parse(A,{flat:!0,brackets:w.ignore}),p=_[0].split(o);if(w.escape){for(var s=[],n=0;n<p.length;n++){var a=p[n],r=p[n+1];a[a.length-1]==="\\"&&a[a.length-2]!=="\\"?(s.push(a+o+r),n++):s.push(a)}p=s}for(n=0;n<p.length;n++)_[0]=p[n],p[n]=M.stringify(_,{flat:!0});return p}},78484:function(Y){Y.exports=function(O){for(var e=O.length,M=new Array(e),A=new Array(e),o=new Array(e),w=new Array(e),_=new Array(e),p=new Array(e),s=0;s<e;++s)M[s]=-1,A[s]=0,o[s]=!1,w[s]=0,_[s]=-1,p[s]=[];var n,a=0,r=[],i=[];function l(g){var f=[g],b=[g];for(M[g]=A[g]=a,o[g]=!0,a+=1;b.length>0;){g=b[b.length-1];var v=O[g];if(w[g]<v.length){for(var d=w[g];d<v.length;++d){var m=v[d];if(M[m]<0){M[m]=A[m]=a,o[m]=!0,a+=1,f.push(m),b.push(m);break}o[m]&&(A[g]=0|Math.min(A[g],A[m])),_[m]>=0&&p[g].push(_[m])}w[g]=d}else{if(A[g]===M[g]){var x=[],y=[],T=0;for(d=f.length-1;d>=0;--d){var h=f[d];if(o[h]=!1,x.push(h),y.push(p[h]),T+=p[h].length,_[h]=r.length,h===g){f.length=d;break}}r.push(x);var E=new Array(T);for(d=0;d<y.length;d++)for(var k=0;k<y[d].length;k++)E[--T]=y[d][k];i.push(E)}b.pop()}}}for(s=0;s<e;++s)M[s]<0&&l(s);for(s=0;s<i.length;s++){var u=i[s];if(u.length!==0){u.sort(function(g,f){return g-f}),n=[u[0]];for(var c=1;c<u.length;c++)u[c]!==u[c-1]&&n.push(u[c]);i[s]=n}}return{components:r,adjacencyList:i}}},92848:function(Y,O,e){e.r(O);var M=2*Math.PI,A=function(_,p,s,n,a,r,i){var l=_.x,u=_.y;return{x:n*(l*=p)-a*(u*=s)+r,y:a*l+n*u+i}},o=function(_,p){var s=p===1.5707963267948966?.551915024494:p===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(p/4),n=Math.cos(_),a=Math.sin(_),r=Math.cos(_+p),i=Math.sin(_+p);return[{x:n-a*s,y:a+n*s},{x:r+i*s,y:i-r*s},{x:r,y:i}]},w=function(_,p,s,n){var a=_*s+p*n;return a>1&&(a=1),a<-1&&(a=-1),(_*n-p*s<0?-1:1)*Math.acos(a)};O.default=function(_){var p=_.px,s=_.py,n=_.cx,a=_.cy,r=_.rx,i=_.ry,l=_.xAxisRotation,u=l===void 0?0:l,c=_.largeArcFlag,g=c===void 0?0:c,f=_.sweepFlag,b=f===void 0?0:f,v=[];if(r===0||i===0)return[];var d=Math.sin(u*M/360),m=Math.cos(u*M/360),x=m*(p-n)/2+d*(s-a)/2,y=-d*(p-n)/2+m*(s-a)/2;if(x===0&&y===0)return[];r=Math.abs(r),i=Math.abs(i);var T=Math.pow(x,2)/Math.pow(r,2)+Math.pow(y,2)/Math.pow(i,2);T>1&&(r*=Math.sqrt(T),i*=Math.sqrt(T));var h=function(R,j,Z,B,q,V,ne,ee,$,J,K,te){var ie=Math.pow(q,2),ae=Math.pow(V,2),se=Math.pow(K,2),ce=Math.pow(te,2),de=ie*ae-ie*ce-ae*se;de<0&&(de=0),de/=ie*ce+ae*se;var ge=(de=Math.sqrt(de)*(ne===ee?-1:1))*q/V*te,ve=de*-V/q*K,be=J*ge-$*ve+(R+Z)/2,me=$*ge+J*ve+(j+B)/2,Se=(K-ge)/q,we=(te-ve)/V,_e=(-K-ge)/q,oe=(-te-ve)/V,le=w(1,0,Se,we),pe=w(Se,we,_e,oe);return ee===0&&pe>0&&(pe-=M),ee===1&&pe<0&&(pe+=M),[be,me,le,pe]}(p,s,n,a,r,i,g,b,d,m,x,y),E=function(R,j){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return function(Z,B){var q=[],V=!0,ne=!1,ee=void 0;try{for(var $,J=Z[Symbol.iterator]();!(V=($=J.next()).done)&&(q.push($.value),!B||q.length!==B);V=!0);}catch(K){ne=!0,ee=K}finally{try{!V&&J.return&&J.return()}finally{if(ne)throw ee}}return q}(R,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(h,4),k=E[0],L=E[1],P=E[2],I=E[3],z=Math.abs(I)/(M/4);Math.abs(1-z)<1e-7&&(z=1);var F=Math.max(Math.ceil(z),1);I/=F;for(var U=0;U<F;U++)v.push(o(P,I)),P+=I;return v.map(function(R){var j=A(R[0],r,i,m,d,k,L),Z=j.x,B=j.y,q=A(R[1],r,i,m,d,k,L),V=q.x,ne=q.y,ee=A(R[2],r,i,m,d,k,L);return{x1:Z,y1:B,x2:V,y2:ne,x:ee.x,y:ee.y}})}},74840:function(Y,O,e){var M=e(21984),A=e(49972),o=e(41976),w=e(53520),_=e(45408);Y.exports=function(p){if(Array.isArray(p)&&p.length===1&&typeof p[0]=="string"&&(p=p[0]),typeof p=="string"&&(_(w(p),"String is not an SVG path."),p=M(p)),_(Array.isArray(p),"Argument should be a string or an array of path segments."),p=A(p),!(p=o(p)).length)return[0,0,0,0];for(var s=[1/0,1/0,-1/0,-1/0],n=0,a=p.length;n<a;n++)for(var r=p[n].slice(1),i=0;i<r.length;i+=2)r[i+0]<s[0]&&(s[0]=r[i+0]),r[i+1]<s[1]&&(s[1]=r[i+1]),r[i+0]>s[2]&&(s[2]=r[i+0]),r[i+1]>s[3]&&(s[3]=r[i+1]);return s}},41976:function(Y,O,e){Y.exports=function(w){for(var _,p=[],s=0,n=0,a=0,r=0,i=null,l=null,u=0,c=0,g=0,f=w.length;g<f;g++){var b=w[g],v=b[0];switch(v){case"M":a=b[1],r=b[2];break;case"A":var d=M({px:u,py:c,cx:b[6],cy:b[7],rx:b[1],ry:b[2],xAxisRotation:b[3],largeArcFlag:b[4],sweepFlag:b[5]});if(!d.length)continue;for(var m,x=0;x<d.length;x++)b=["C",(m=d[x]).x1,m.y1,m.x2,m.y2,m.x,m.y],x<d.length-1&&p.push(b);break;case"S":var y=u,T=c;_!="C"&&_!="S"||(y+=y-s,T+=T-n),b=["C",y,T,b[1],b[2],b[3],b[4]];break;case"T":_=="Q"||_=="T"?(i=2*u-i,l=2*c-l):(i=u,l=c),b=o(u,c,i,l,b[1],b[2]);break;case"Q":i=b[1],l=b[2],b=o(u,c,b[1],b[2],b[3],b[4]);break;case"L":b=A(u,c,b[1],b[2]);break;case"H":b=A(u,c,b[1],c);break;case"V":b=A(u,c,u,b[1]);break;case"Z":b=A(u,c,a,r)}_=v,u=b[b.length-2],c=b[b.length-1],b.length>4?(s=b[b.length-4],n=b[b.length-3]):(s=u,n=c),p.push(b)}return p};var M=e(92848);function A(w,_,p,s){return["C",w,_,p,s,p,s]}function o(w,_,p,s,n,a){return["C",w/3+.6666666666666666*p,_/3+.6666666666666666*s,n/3+.6666666666666666*p,a/3+.6666666666666666*s,n,a]}},20472:function(Y,O,e){var M,A=e(74840),o=e(21984),w=e(22235),_=e(53520),p=e(29620),s=document.createElement("canvas"),n=s.getContext("2d");Y.exports=function(a,r){if(!_(a))throw Error("Argument should be valid svg path string");var i,l;r||(r={}),r.shape?(i=r.shape[0],l=r.shape[1]):(i=s.width=r.w||r.width||200,l=s.height=r.h||r.height||200);var u=Math.min(i,l),c=r.stroke||0,g=r.viewbox||r.viewBox||A(a),f=[i/(g[2]-g[0]),l/(g[3]-g[1])],b=Math.min(f[0]||0,f[1]||0)/2;if(n.fillStyle="black",n.fillRect(0,0,i,l),n.fillStyle="white",c&&(typeof c!="number"&&(c=1),n.strokeStyle=c>0?"white":"black",n.lineWidth=Math.abs(c)),n.translate(.5*i,.5*l),n.scale(b,b),function(){if(M!=null)return M;var m=document.createElement("canvas").getContext("2d");if(m.canvas.width=m.canvas.height=1,!window.Path2D)return M=!1;var x=new Path2D("M0,0h1v1h-1v-1Z");m.fillStyle="black",m.fill(x);var y=m.getImageData(0,0,1,1);return M=y&&y.data&&y.data[3]===255}()){var v=new Path2D(a);n.fill(v),c&&n.stroke(v)}else{var d=o(a);w(n,d),n.fill(),c&&n.stroke()}return n.setTransform(1,0,0,1,0,0),p(n,{cutoff:r.cutoff!=null?r.cutoff:.5,radius:r.radius!=null?r.radius:.5*u})}},49760:function(Y,O,e){var M;(function(A){var o=/^\s+/,w=/\s+$/,_=0,p=A.round,s=A.min,n=A.max,a=A.random;function r(K,te){if(te=te||{},(K=K||"")instanceof r)return K;if(!(this instanceof r))return new r(K,te);var ie=function(ae){var se,ce,de,ge={r:0,g:0,b:0},ve=1,be=null,me=null,Se=null,we=!1,_e=!1;return typeof ae=="string"&&(ae=function(oe){oe=oe.replace(o,"").replace(w,"").toLowerCase();var le,pe=!1;if(P[oe])oe=P[oe],pe=!0;else if(oe=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(le=$.rgb.exec(oe))?{r:le[1],g:le[2],b:le[3]}:(le=$.rgba.exec(oe))?{r:le[1],g:le[2],b:le[3],a:le[4]}:(le=$.hsl.exec(oe))?{h:le[1],s:le[2],l:le[3]}:(le=$.hsla.exec(oe))?{h:le[1],s:le[2],l:le[3],a:le[4]}:(le=$.hsv.exec(oe))?{h:le[1],s:le[2],v:le[3]}:(le=$.hsva.exec(oe))?{h:le[1],s:le[2],v:le[3],a:le[4]}:(le=$.hex8.exec(oe))?{r:R(le[1]),g:R(le[2]),b:R(le[3]),a:q(le[4]),format:pe?"name":"hex8"}:(le=$.hex6.exec(oe))?{r:R(le[1]),g:R(le[2]),b:R(le[3]),format:pe?"name":"hex"}:(le=$.hex4.exec(oe))?{r:R(le[1]+""+le[1]),g:R(le[2]+""+le[2]),b:R(le[3]+""+le[3]),a:q(le[4]+""+le[4]),format:pe?"name":"hex8"}:!!(le=$.hex3.exec(oe))&&{r:R(le[1]+""+le[1]),g:R(le[2]+""+le[2]),b:R(le[3]+""+le[3]),format:pe?"name":"hex"}}(ae)),typeof ae=="object"&&(J(ae.r)&&J(ae.g)&&J(ae.b)?(se=ae.r,ce=ae.g,de=ae.b,ge={r:255*F(se,255),g:255*F(ce,255),b:255*F(de,255)},we=!0,_e=String(ae.r).substr(-1)==="%"?"prgb":"rgb"):J(ae.h)&&J(ae.s)&&J(ae.v)?(be=Z(ae.s),me=Z(ae.v),ge=function(oe,le,pe){oe=6*F(oe,360),le=F(le,100),pe=F(pe,100);var Ee=A.floor(oe),Te=oe-Ee,Me=pe*(1-le),Le=pe*(1-Te*le),Ie=pe*(1-(1-Te)*le),he=Ee%6;return{r:255*[pe,Le,Me,Me,Ie,pe][he],g:255*[Ie,pe,pe,Le,Me,Me][he],b:255*[Me,Me,Ie,pe,pe,Le][he]}}(ae.h,be,me),we=!0,_e="hsv"):J(ae.h)&&J(ae.s)&&J(ae.l)&&(be=Z(ae.s),Se=Z(ae.l),ge=function(oe,le,pe){var Ee,Te,Me;function Le(xe,ke,ze){return ze<0&&(ze+=1),ze>1&&(ze-=1),ze<1/6?xe+6*(ke-xe)*ze:ze<.5?ke:ze<2/3?xe+(ke-xe)*(2/3-ze)*6:xe}if(oe=F(oe,360),le=F(le,100),pe=F(pe,100),le===0)Ee=Te=Me=pe;else{var Ie=pe<.5?pe*(1+le):pe+le-pe*le,he=2*pe-Ie;Ee=Le(he,Ie,oe+1/3),Te=Le(he,Ie,oe),Me=Le(he,Ie,oe-1/3)}return{r:255*Ee,g:255*Te,b:255*Me}}(ae.h,be,Se),we=!0,_e="hsl"),ae.hasOwnProperty("a")&&(ve=ae.a)),ve=z(ve),{ok:we,format:ae.format||_e,r:s(255,n(ge.r,0)),g:s(255,n(ge.g,0)),b:s(255,n(ge.b,0)),a:ve}}(K);this._originalInput=K,this._r=ie.r,this._g=ie.g,this._b=ie.b,this._a=ie.a,this._roundA=p(100*this._a)/100,this._format=te.format||ie.format,this._gradientType=te.gradientType,this._r<1&&(this._r=p(this._r)),this._g<1&&(this._g=p(this._g)),this._b<1&&(this._b=p(this._b)),this._ok=ie.ok,this._tc_id=_++}function i(K,te,ie){K=F(K,255),te=F(te,255),ie=F(ie,255);var ae,se,ce=n(K,te,ie),de=s(K,te,ie),ge=(ce+de)/2;if(ce==de)ae=se=0;else{var ve=ce-de;switch(se=ge>.5?ve/(2-ce-de):ve/(ce+de),ce){case K:ae=(te-ie)/ve+(te<ie?6:0);break;case te:ae=(ie-K)/ve+2;break;case ie:ae=(K-te)/ve+4}ae/=6}return{h:ae,s:se,l:ge}}function l(K,te,ie){K=F(K,255),te=F(te,255),ie=F(ie,255);var ae,se,ce=n(K,te,ie),de=s(K,te,ie),ge=ce,ve=ce-de;if(se=ce===0?0:ve/ce,ce==de)ae=0;else{switch(ce){case K:ae=(te-ie)/ve+(te<ie?6:0);break;case te:ae=(ie-K)/ve+2;break;case ie:ae=(K-te)/ve+4}ae/=6}return{h:ae,s:se,v:ge}}function u(K,te,ie,ae){var se=[j(p(K).toString(16)),j(p(te).toString(16)),j(p(ie).toString(16))];return ae&&se[0].charAt(0)==se[0].charAt(1)&&se[1].charAt(0)==se[1].charAt(1)&&se[2].charAt(0)==se[2].charAt(1)?se[0].charAt(0)+se[1].charAt(0)+se[2].charAt(0):se.join("")}function c(K,te,ie,ae){return[j(B(ae)),j(p(K).toString(16)),j(p(te).toString(16)),j(p(ie).toString(16))].join("")}function g(K,te){te=te===0?0:te||10;var ie=r(K).toHsl();return ie.s-=te/100,ie.s=U(ie.s),r(ie)}function f(K,te){te=te===0?0:te||10;var ie=r(K).toHsl();return ie.s+=te/100,ie.s=U(ie.s),r(ie)}function b(K){return r(K).desaturate(100)}function v(K,te){te=te===0?0:te||10;var ie=r(K).toHsl();return ie.l+=te/100,ie.l=U(ie.l),r(ie)}function d(K,te){te=te===0?0:te||10;var ie=r(K).toRgb();return ie.r=n(0,s(255,ie.r-p(-te/100*255))),ie.g=n(0,s(255,ie.g-p(-te/100*255))),ie.b=n(0,s(255,ie.b-p(-te/100*255))),r(ie)}function m(K,te){te=te===0?0:te||10;var ie=r(K).toHsl();return ie.l-=te/100,ie.l=U(ie.l),r(ie)}function x(K,te){var ie=r(K).toHsl(),ae=(ie.h+te)%360;return ie.h=ae<0?360+ae:ae,r(ie)}function y(K){var te=r(K).toHsl();return te.h=(te.h+180)%360,r(te)}function T(K){var te=r(K).toHsl(),ie=te.h;return[r(K),r({h:(ie+120)%360,s:te.s,l:te.l}),r({h:(ie+240)%360,s:te.s,l:te.l})]}function h(K){var te=r(K).toHsl(),ie=te.h;return[r(K),r({h:(ie+90)%360,s:te.s,l:te.l}),r({h:(ie+180)%360,s:te.s,l:te.l}),r({h:(ie+270)%360,s:te.s,l:te.l})]}function E(K){var te=r(K).toHsl(),ie=te.h;return[r(K),r({h:(ie+72)%360,s:te.s,l:te.l}),r({h:(ie+216)%360,s:te.s,l:te.l})]}function k(K,te,ie){te=te||6,ie=ie||30;var ae=r(K).toHsl(),se=360/ie,ce=[r(K)];for(ae.h=(ae.h-(se*te>>1)+720)%360;--te;)ae.h=(ae.h+se)%360,ce.push(r(ae));return ce}function L(K,te){te=te||6;for(var ie=r(K).toHsv(),ae=ie.h,se=ie.s,ce=ie.v,de=[],ge=1/te;te--;)de.push(r({h:ae,s:se,v:ce})),ce=(ce+ge)%1;return de}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var K=this.toRgb();return(299*K.r+587*K.g+114*K.b)/1e3},getLuminance:function(){var K,te,ie,ae=this.toRgb();return K=ae.r/255,te=ae.g/255,ie=ae.b/255,.2126*(K<=.03928?K/12.92:A.pow((K+.055)/1.055,2.4))+.7152*(te<=.03928?te/12.92:A.pow((te+.055)/1.055,2.4))+.0722*(ie<=.03928?ie/12.92:A.pow((ie+.055)/1.055,2.4))},setAlpha:function(K){return this._a=z(K),this._roundA=p(100*this._a)/100,this},toHsv:function(){var K=l(this._r,this._g,this._b);return{h:360*K.h,s:K.s,v:K.v,a:this._a}},toHsvString:function(){var K=l(this._r,this._g,this._b),te=p(360*K.h),ie=p(100*K.s),ae=p(100*K.v);return this._a==1?"hsv("+te+", "+ie+"%, "+ae+"%)":"hsva("+te+", "+ie+"%, "+ae+"%, "+this._roundA+")"},toHsl:function(){var K=i(this._r,this._g,this._b);return{h:360*K.h,s:K.s,l:K.l,a:this._a}},toHslString:function(){var K=i(this._r,this._g,this._b),te=p(360*K.h),ie=p(100*K.s),ae=p(100*K.l);return this._a==1?"hsl("+te+", "+ie+"%, "+ae+"%)":"hsla("+te+", "+ie+"%, "+ae+"%, "+this._roundA+")"},toHex:function(K){return u(this._r,this._g,this._b,K)},toHexString:function(K){return"#"+this.toHex(K)},toHex8:function(K){return function(te,ie,ae,se,ce){var de=[j(p(te).toString(16)),j(p(ie).toString(16)),j(p(ae).toString(16)),j(B(se))];return ce&&de[0].charAt(0)==de[0].charAt(1)&&de[1].charAt(0)==de[1].charAt(1)&&de[2].charAt(0)==de[2].charAt(1)&&de[3].charAt(0)==de[3].charAt(1)?de[0].charAt(0)+de[1].charAt(0)+de[2].charAt(0)+de[3].charAt(0):de.join("")}(this._r,this._g,this._b,this._a,K)},toHex8String:function(K){return"#"+this.toHex8(K)},toRgb:function(){return{r:p(this._r),g:p(this._g),b:p(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+p(this._r)+", "+p(this._g)+", "+p(this._b)+")":"rgba("+p(this._r)+", "+p(this._g)+", "+p(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:p(100*F(this._r,255))+"%",g:p(100*F(this._g,255))+"%",b:p(100*F(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+p(100*F(this._r,255))+"%, "+p(100*F(this._g,255))+"%, "+p(100*F(this._b,255))+"%)":"rgba("+p(100*F(this._r,255))+"%, "+p(100*F(this._g,255))+"%, "+p(100*F(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(I[u(this._r,this._g,this._b,!0)]||!1)},toFilter:function(K){var te="#"+c(this._r,this._g,this._b,this._a),ie=te,ae=this._gradientType?"GradientType = 1, ":"";if(K){var se=r(K);ie="#"+c(se._r,se._g,se._b,se._a)}return"progid:DXImageTransform.Microsoft.gradient("+ae+"startColorstr="+te+",endColorstr="+ie+")"},toString:function(K){var te=!!K;K=K||this._format;var ie=!1,ae=this._a<1&&this._a>=0;return te||!ae||K!=="hex"&&K!=="hex6"&&K!=="hex3"&&K!=="hex4"&&K!=="hex8"&&K!=="name"?(K==="rgb"&&(ie=this.toRgbString()),K==="prgb"&&(ie=this.toPercentageRgbString()),K!=="hex"&&K!=="hex6"||(ie=this.toHexString()),K==="hex3"&&(ie=this.toHexString(!0)),K==="hex4"&&(ie=this.toHex8String(!0)),K==="hex8"&&(ie=this.toHex8String()),K==="name"&&(ie=this.toName()),K==="hsl"&&(ie=this.toHslString()),K==="hsv"&&(ie=this.toHsvString()),ie||this.toHexString()):K==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(K,te){var ie=K.apply(null,[this].concat([].slice.call(te)));return this._r=ie._r,this._g=ie._g,this._b=ie._b,this.setAlpha(ie._a),this},lighten:function(){return this._applyModification(v,arguments)},brighten:function(){return this._applyModification(d,arguments)},darken:function(){return this._applyModification(m,arguments)},desaturate:function(){return this._applyModification(g,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(K,te){return K.apply(null,[this].concat([].slice.call(te)))},analogous:function(){return this._applyCombination(k,arguments)},complement:function(){return this._applyCombination(y,arguments)},monochromatic:function(){return this._applyCombination(L,arguments)},splitcomplement:function(){return this._applyCombination(E,arguments)},triad:function(){return this._applyCombination(T,arguments)},tetrad:function(){return this._applyCombination(h,arguments)}},r.fromRatio=function(K,te){if(typeof K=="object"){var ie={};for(var ae in K)K.hasOwnProperty(ae)&&(ie[ae]=ae==="a"?K[ae]:Z(K[ae]));K=ie}return r(K,te)},r.equals=function(K,te){return!(!K||!te)&&r(K).toRgbString()==r(te).toRgbString()},r.random=function(){return r.fromRatio({r:a(),g:a(),b:a()})},r.mix=function(K,te,ie){ie=ie===0?0:ie||50;var ae=r(K).toRgb(),se=r(te).toRgb(),ce=ie/100;return r({r:(se.r-ae.r)*ce+ae.r,g:(se.g-ae.g)*ce+ae.g,b:(se.b-ae.b)*ce+ae.b,a:(se.a-ae.a)*ce+ae.a})},r.readability=function(K,te){var ie=r(K),ae=r(te);return(A.max(ie.getLuminance(),ae.getLuminance())+.05)/(A.min(ie.getLuminance(),ae.getLuminance())+.05)},r.isReadable=function(K,te,ie){var ae,se,ce,de,ge,ve=r.readability(K,te);switch(se=!1,(ce=ie,(de=((ce=ce||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&de!=="AAA"&&(de="AA"),(ge=(ce.size||"small").toLowerCase())!=="small"&&ge!=="large"&&(ge="small"),ae={level:de,size:ge}).level+ae.size){case"AAsmall":case"AAAlarge":se=ve>=4.5;break;case"AAlarge":se=ve>=3;break;case"AAAsmall":se=ve>=7}return se},r.mostReadable=function(K,te,ie){var ae,se,ce,de,ge=null,ve=0;se=(ie=ie||{}).includeFallbackColors,ce=ie.level,de=ie.size;for(var be=0;be<te.length;be++)(ae=r.readability(K,te[be]))>ve&&(ve=ae,ge=r(te[be]));return r.isReadable(K,ge,{level:ce,size:de})||!se?ge:(ie.includeFallbackColors=!1,r.mostReadable(K,["#fff","#000"],ie))};var P=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},I=r.hexNames=function(K){var te={};for(var ie in K)K.hasOwnProperty(ie)&&(te[K[ie]]=ie);return te}(P);function z(K){return K=parseFloat(K),(isNaN(K)||K<0||K>1)&&(K=1),K}function F(K,te){(function(ae){return typeof ae=="string"&&ae.indexOf(".")!=-1&&parseFloat(ae)===1})(K)&&(K="100%");var ie=function(ae){return typeof ae=="string"&&ae.indexOf("%")!=-1}(K);return K=s(te,n(0,parseFloat(K))),ie&&(K=parseInt(K*te,10)/100),A.abs(K-te)<1e-6?1:K%te/parseFloat(te)}function U(K){return s(1,n(0,K))}function R(K){return parseInt(K,16)}function j(K){return K.length==1?"0"+K:""+K}function Z(K){return K<=1&&(K=100*K+"%"),K}function B(K){return A.round(255*parseFloat(K)).toString(16)}function q(K){return R(K)/255}var V,ne,ee,$=(ne="[\\s|\\(]+("+(V="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+V+")[,|\\s]+("+V+")\\s*\\)?",ee="[\\s|\\(]+("+V+")[,|\\s]+("+V+")[,|\\s]+("+V+")[,|\\s]+("+V+")\\s*\\)?",{CSS_UNIT:new RegExp(V),rgb:new RegExp("rgb"+ne),rgba:new RegExp("rgba"+ee),hsl:new RegExp("hsl"+ne),hsla:new RegExp("hsla"+ee),hsv:new RegExp("hsv"+ne),hsva:new RegExp("hsva"+ee),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function J(K){return!!$.CSS_UNIT.exec(K)}Y.exports?Y.exports=r:(M=(function(){return r}).call(O,e,O,Y))===void 0||(Y.exports=M)})(Math)},37816:function(Y){Y.exports=e,Y.exports.float32=Y.exports.float=e,Y.exports.fract32=Y.exports.fract=function(M,A){if(M.length){if(M instanceof Float32Array)return new Float32Array(M.length);A instanceof Float32Array||(A=e(M));for(var o=0,w=A.length;o<w;o++)A[o]=M[o]-A[o];return A}return e(M-e(M))};var O=new Float32Array(1);function e(M){return M.length?M instanceof Float32Array?M:new Float32Array(M):(O[0]=M,O[0])}},23464:function(Y,O,e){var M=e(65819);Y.exports=w;var A=96;function o(_,p){var s=M(getComputedStyle(_).getPropertyValue(p));return s[0]*w(s[1],_)}function w(_,p){switch(p=p||document.body,_=(_||"px").trim().toLowerCase(),p!==window&&p!==document||(p=document.body),_){case"%":return p.clientHeight/100;case"ch":case"ex":return function(s,n){var a=document.createElement("div");a.style["font-size"]="128"+s,n.appendChild(a);var r=o(a,"font-size")/128;return n.removeChild(a),r}(_,p);case"em":return o(p,"font-size");case"rem":return o(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return A;case"cm":return A/2.54;case"mm":return A/25.4;case"pt":return A/72;case"pc":return A/6}return 1}},55712:function(Y,O,e){function M(w){return w}function A(w,_){return typeof _=="string"&&(_=w.objects[_]),_.type==="GeometryCollection"?{type:"FeatureCollection",features:_.geometries.map(function(p){return o(w,p)})}:o(w,_)}function o(w,_){var p=_.id,s=_.bbox,n=_.properties==null?{}:_.properties,a=function(r,i){var l=function(d){if(d==null)return M;var m,x,y=d.scale[0],T=d.scale[1],h=d.translate[0],E=d.translate[1];return function(k,L){L||(m=x=0);var P=2,I=k.length,z=new Array(I);for(z[0]=(m+=k[0])*y+h,z[1]=(x+=k[1])*T+E;P<I;)z[P]=k[P],++P;return z}}(r.transform),u=r.arcs;function c(d,m){m.length&&m.pop();for(var x=u[d<0?~d:d],y=0,T=x.length;y<T;++y)m.push(l(x[y],y));d<0&&function(h,E){for(var k,L=h.length,P=L-E;P<--L;)k=h[P],h[P++]=h[L],h[L]=k}(m,T)}function g(d){return l(d)}function f(d){for(var m=[],x=0,y=d.length;x<y;++x)c(d[x],m);return m.length<2&&m.push(m[0]),m}function b(d){for(var m=f(d);m.length<4;)m.push(m[0]);return m}function v(d){return d.map(b)}return function d(m){var x,y=m.type;switch(y){case"GeometryCollection":return{type:y,geometries:m.geometries.map(d)};case"Point":x=g(m.coordinates);break;case"MultiPoint":x=m.coordinates.map(g);break;case"LineString":x=f(m.arcs);break;case"MultiLineString":x=m.arcs.map(f);break;case"Polygon":x=v(m.arcs);break;case"MultiPolygon":x=m.arcs.map(v);break;default:return null}return{type:y,coordinates:x}}(i)}(w,_);return p==null&&s==null?{type:"Feature",properties:n,geometry:a}:s==null?{type:"Feature",id:p,properties:n,geometry:a}:{type:"Feature",id:p,bbox:s,properties:n,geometry:a}}e.d(O,{NO:function(){return A}})},73384:function(Y,O,e){var M=e(54612);Y.exports=function(A){if(typeof A!="function"||!hasOwnProperty.call(A,"length"))return!1;try{if(typeof A.length!="number"||typeof A.call!="function"||typeof A.apply!="function")return!1}catch{return!1}return!M(A)}},57980:function(Y,O,e){var M=e(81680),A=e(7328),o=e(33940),w=e(18856),_=function(p,s){return p.replace("%v",w(s))};Y.exports=function(p,s,n){if(!A(n))throw new TypeError(_(s,p));if(!M(p)){if("default"in n)return n.default;if(n.isOptional)return null}var a=o(n.errorMessage);throw M(a)||(a=s),new TypeError(_(a,p))}},32336:function(Y){Y.exports=function(O){try{return O.toString()}catch{try{return String(O)}catch{return null}}}},18856:function(Y,O,e){var M=e(32336),A=/[\n\r\u2028\u2029]/g;Y.exports=function(o){var w=M(o);return w===null?"<Non-coercible to string value>":(w.length>100&&(w=w.slice(0,99)+""),w=w.replace(A,function(_){switch(_){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},7328:function(Y,O,e){var M=e(81680),A={object:!0,function:!0,undefined:!0};Y.exports=function(o){return!!M(o)&&hasOwnProperty.call(A,typeof o)}},87396:function(Y,O,e){var M=e(57980),A=e(85488);Y.exports=function(o){return A(o)?o:M(o,"%v is not a plain function",arguments[1])}},85488:function(Y,O,e){var M=e(73384),A=/^\s*class[\s{/}]/,o=Function.prototype.toString;Y.exports=function(w){return!!M(w)&&!A.test(o.call(w))}},54612:function(Y,O,e){var M=e(7328);Y.exports=function(A){if(!M(A))return!1;try{return!!A.constructor&&A.constructor.prototype===A}catch{return!1}}},33940:function(Y,O,e){var M=e(81680),A=e(7328),o=Object.prototype.toString;Y.exports=function(w){if(!M(w))return null;if(A(w)){var _=w.toString;if(typeof _!="function"||_===o)return null}try{return""+w}catch{return null}}},18496:function(Y,O,e){var M=e(57980),A=e(81680);Y.exports=function(o){return A(o)?o:M(o,"Cannot use %v",arguments[1])}},81680:function(Y){Y.exports=function(O){return O!=null}},14144:function(Y,O,e){var M=e(308),A=e(10352),o=e(33576).Buffer;e.g.__TYPEDARRAY_POOL||(e.g.__TYPEDARRAY_POOL={UINT8:A([32,0]),UINT16:A([32,0]),UINT32:A([32,0]),BIGUINT64:A([32,0]),INT8:A([32,0]),INT16:A([32,0]),INT32:A([32,0]),BIGINT64:A([32,0]),FLOAT:A([32,0]),DOUBLE:A([32,0]),DATA:A([32,0]),UINT8C:A([32,0]),BUFFER:A([32,0])});var w=typeof Uint8ClampedArray<"u",_=typeof BigUint64Array<"u",p=typeof BigInt64Array<"u",s=e.g.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=A([32,0])),s.BIGUINT64||(s.BIGUINT64=A([32,0])),s.BIGINT64||(s.BIGINT64=A([32,0])),s.BUFFER||(s.BUFFER=A([32,0]));var n=s.DATA,a=s.BUFFER;function r(E){if(E){var k=E.length||E.byteLength,L=M.log2(k);n[L].push(E)}}function i(E){E=M.nextPow2(E);var k=M.log2(E),L=n[k];return L.length>0?L.pop():new ArrayBuffer(E)}function l(E){return new Uint8Array(i(E),0,E)}function u(E){return new Uint16Array(i(2*E),0,E)}function c(E){return new Uint32Array(i(4*E),0,E)}function g(E){return new Int8Array(i(E),0,E)}function f(E){return new Int16Array(i(2*E),0,E)}function b(E){return new Int32Array(i(4*E),0,E)}function v(E){return new Float32Array(i(4*E),0,E)}function d(E){return new Float64Array(i(8*E),0,E)}function m(E){return w?new Uint8ClampedArray(i(E),0,E):l(E)}function x(E){return _?new BigUint64Array(i(8*E),0,E):null}function y(E){return p?new BigInt64Array(i(8*E),0,E):null}function T(E){return new DataView(i(E),0,E)}function h(E){E=M.nextPow2(E);var k=M.log2(E),L=a[k];return L.length>0?L.pop():new o(E)}O.free=function(E){if(o.isBuffer(E))a[M.log2(E.length)].push(E);else{if(Object.prototype.toString.call(E)!=="[object ArrayBuffer]"&&(E=E.buffer),!E)return;var k=E.length||E.byteLength,L=0|M.log2(k);n[L].push(E)}},O.freeUint8=O.freeUint16=O.freeUint32=O.freeBigUint64=O.freeInt8=O.freeInt16=O.freeInt32=O.freeBigInt64=O.freeFloat32=O.freeFloat=O.freeFloat64=O.freeDouble=O.freeUint8Clamped=O.freeDataView=function(E){r(E.buffer)},O.freeArrayBuffer=r,O.freeBuffer=function(E){a[M.log2(E.length)].push(E)},O.malloc=function(E,k){if(k===void 0||k==="arraybuffer")return i(E);switch(k){case"uint8":return l(E);case"uint16":return u(E);case"uint32":return c(E);case"int8":return g(E);case"int16":return f(E);case"int32":return b(E);case"float":case"float32":return v(E);case"double":case"float64":return d(E);case"uint8_clamped":return m(E);case"bigint64":return y(E);case"biguint64":return x(E);case"buffer":return h(E);case"data":case"dataview":return T(E);default:return null}return null},O.mallocArrayBuffer=i,O.mallocUint8=l,O.mallocUint16=u,O.mallocUint32=c,O.mallocInt8=g,O.mallocInt16=f,O.mallocInt32=b,O.mallocFloat32=O.mallocFloat=v,O.mallocFloat64=O.mallocDouble=d,O.mallocUint8Clamped=m,O.mallocBigUint64=x,O.mallocBigInt64=y,O.mallocDataView=T,O.mallocBuffer=h,O.clearCache=function(){for(var E=0;E<32;++E)s.UINT8[E].length=0,s.UINT16[E].length=0,s.UINT32[E].length=0,s.INT8[E].length=0,s.INT16[E].length=0,s.INT32[E].length=0,s.FLOAT[E].length=0,s.DOUBLE[E].length=0,s.BIGUINT64[E].length=0,s.BIGINT64[E].length=0,s.UINT8C[E].length=0,n[E].length=0,a[E].length=0}},92384:function(Y){var O=/[\'\"]/;Y.exports=function(e){return e?(O.test(e.charAt(0))&&(e=e.substr(1)),O.test(e.charAt(e.length-1))&&(e=e.substr(0,e.length-1)),e):""}},45223:function(Y){Y.exports=function(O,e,M){Array.isArray(M)||(M=[].slice.call(arguments,2));for(var A=0,o=M.length;A<o;A++){var w=M[A];for(var _ in w)if((e[_]===void 0||Array.isArray(e[_])||O[_]!==e[_])&&_ in e){var p;if(w[_]===!0)p=e[_];else if(w[_]===!1||typeof w[_]=="function"&&(p=w[_](e[_],O,e))===void 0)continue;O[_]=p}}return O}},96656:function(Y,O,e){function M(A){try{if(!e.g.localStorage)return!1}catch{return!1}var o=e.g.localStorage[A];return o!=null&&String(o).toLowerCase()==="true"}Y.exports=function(A,o){if(M("noDeprecation"))return A;var w=!1;return function(){if(!w){if(M("throwDeprecation"))throw new Error(o);M("traceDeprecation")?console.trace(o):console.warn(o),w=!0}return A.apply(this,arguments)}}},75272:function(Y){Y.exports=function(O){return O&&typeof O=="object"&&typeof O.copy=="function"&&typeof O.fill=="function"&&typeof O.readUInt8=="function"}},41088:function(Y,O,e){var M=e(91148),A=e(84420),o=e(96632),w=e(7728);function _(F){return F.call.bind(F)}var p=typeof BigInt<"u",s=typeof Symbol<"u",n=_(Object.prototype.toString),a=_(Number.prototype.valueOf),r=_(String.prototype.valueOf),i=_(Boolean.prototype.valueOf);if(p)var l=_(BigInt.prototype.valueOf);if(s)var u=_(Symbol.prototype.valueOf);function c(F,U){if(typeof F!="object")return!1;try{return U(F),!0}catch{return!1}}function g(F){return n(F)==="[object Map]"}function f(F){return n(F)==="[object Set]"}function b(F){return n(F)==="[object WeakMap]"}function v(F){return n(F)==="[object WeakSet]"}function d(F){return n(F)==="[object ArrayBuffer]"}function m(F){return typeof ArrayBuffer<"u"&&(d.working?d(F):F instanceof ArrayBuffer)}function x(F){return n(F)==="[object DataView]"}function y(F){return typeof DataView<"u"&&(x.working?x(F):F instanceof DataView)}O.isArgumentsObject=M,O.isGeneratorFunction=A,O.isTypedArray=w,O.isPromise=function(F){return typeof Promise<"u"&&F instanceof Promise||F!==null&&typeof F=="object"&&typeof F.then=="function"&&typeof F.catch=="function"},O.isArrayBufferView=function(F){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(F):w(F)||y(F)},O.isUint8Array=function(F){return o(F)==="Uint8Array"},O.isUint8ClampedArray=function(F){return o(F)==="Uint8ClampedArray"},O.isUint16Array=function(F){return o(F)==="Uint16Array"},O.isUint32Array=function(F){return o(F)==="Uint32Array"},O.isInt8Array=function(F){return o(F)==="Int8Array"},O.isInt16Array=function(F){return o(F)==="Int16Array"},O.isInt32Array=function(F){return o(F)==="Int32Array"},O.isFloat32Array=function(F){return o(F)==="Float32Array"},O.isFloat64Array=function(F){return o(F)==="Float64Array"},O.isBigInt64Array=function(F){return o(F)==="BigInt64Array"},O.isBigUint64Array=function(F){return o(F)==="BigUint64Array"},g.working=typeof Map<"u"&&g(new Map),O.isMap=function(F){return typeof Map<"u"&&(g.working?g(F):F instanceof Map)},f.working=typeof Set<"u"&&f(new Set),O.isSet=function(F){return typeof Set<"u"&&(f.working?f(F):F instanceof Set)},b.working=typeof WeakMap<"u"&&b(new WeakMap),O.isWeakMap=function(F){return typeof WeakMap<"u"&&(b.working?b(F):F instanceof WeakMap)},v.working=typeof WeakSet<"u"&&v(new WeakSet),O.isWeakSet=function(F){return v(F)},d.working=typeof ArrayBuffer<"u"&&d(new ArrayBuffer),O.isArrayBuffer=m,x.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&x(new DataView(new ArrayBuffer(1),0,1)),O.isDataView=y;var T=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function h(F){return n(F)==="[object SharedArrayBuffer]"}function E(F){return T!==void 0&&(h.working===void 0&&(h.working=h(new T)),h.working?h(F):F instanceof T)}function k(F){return c(F,a)}function L(F){return c(F,r)}function P(F){return c(F,i)}function I(F){return p&&c(F,l)}function z(F){return s&&c(F,u)}O.isSharedArrayBuffer=E,O.isAsyncFunction=function(F){return n(F)==="[object AsyncFunction]"},O.isMapIterator=function(F){return n(F)==="[object Map Iterator]"},O.isSetIterator=function(F){return n(F)==="[object Set Iterator]"},O.isGeneratorObject=function(F){return n(F)==="[object Generator]"},O.isWebAssemblyCompiledModule=function(F){return n(F)==="[object WebAssembly.Module]"},O.isNumberObject=k,O.isStringObject=L,O.isBooleanObject=P,O.isBigIntObject=I,O.isSymbolObject=z,O.isBoxedPrimitive=function(F){return k(F)||L(F)||P(F)||I(F)||z(F)},O.isAnyArrayBuffer=function(F){return typeof Uint8Array<"u"&&(m(F)||E(F))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(F){Object.defineProperty(O,F,{enumerable:!1,value:function(){throw new Error(F+" is not supported in userland")}})})},35840:function(Y,O,e){var M=e(4168),A=Object.getOwnPropertyDescriptors||function(z){for(var F=Object.keys(z),U={},R=0;R<F.length;R++)U[F[R]]=Object.getOwnPropertyDescriptor(z,F[R]);return U},o=/%[sdj%]/g;O.format=function(z){if(!b(z)){for(var F=[],U=0;U<arguments.length;U++)F.push(s(arguments[U]));return F.join(" ")}U=1;for(var R=arguments,j=R.length,Z=String(z).replace(o,function(q){if(q==="%%")return"%";if(U>=j)return q;switch(q){case"%s":return String(R[U++]);case"%d":return Number(R[U++]);case"%j":try{return JSON.stringify(R[U++])}catch{return"[Circular]"}default:return q}}),B=R[U];U<j;B=R[++U])g(B)||!m(B)?Z+=" "+B:Z+=" "+s(B);return Z},O.deprecate=function(z,F){if(M!==void 0&&M.noDeprecation===!0)return z;if(M===void 0)return function(){return O.deprecate(z,F).apply(this,arguments)};var U=!1;return function(){if(!U){if(M.throwDeprecation)throw new Error(F);M.traceDeprecation?console.trace(F):console.error(F),U=!0}return z.apply(this,arguments)}};var w={},_=/^$/;if(M.env.NODE_DEBUG){var p=M.env.NODE_DEBUG;p=p.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),_=new RegExp("^"+p+"$","i")}function s(z,F){var U={seen:[],stylize:a};return arguments.length>=3&&(U.depth=arguments[2]),arguments.length>=4&&(U.colors=arguments[3]),c(F)?U.showHidden=F:F&&O._extend(U,F),v(U.showHidden)&&(U.showHidden=!1),v(U.depth)&&(U.depth=2),v(U.colors)&&(U.colors=!1),v(U.customInspect)&&(U.customInspect=!0),U.colors&&(U.stylize=n),r(U,z,U.depth)}function n(z,F){var U=s.styles[F];return U?"\x1B["+s.colors[U][0]+"m"+z+"\x1B["+s.colors[U][1]+"m":z}function a(z,F){return z}function r(z,F,U){if(z.customInspect&&F&&T(F.inspect)&&F.inspect!==O.inspect&&(!F.constructor||F.constructor.prototype!==F)){var R=F.inspect(U,z);return b(R)||(R=r(z,R,U)),R}var j=function(J,K){if(v(K))return J.stylize("undefined","undefined");if(b(K)){var te="'"+JSON.stringify(K).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return J.stylize(te,"string")}return f(K)?J.stylize(""+K,"number"):c(K)?J.stylize(""+K,"boolean"):g(K)?J.stylize("null","null"):void 0}(z,F);if(j)return j;var Z=Object.keys(F),B=function(J){var K={};return J.forEach(function(te,ie){K[te]=!0}),K}(Z);if(z.showHidden&&(Z=Object.getOwnPropertyNames(F)),y(F)&&(Z.indexOf("message")>=0||Z.indexOf("description")>=0))return i(F);if(Z.length===0){if(T(F)){var q=F.name?": "+F.name:"";return z.stylize("[Function"+q+"]","special")}if(d(F))return z.stylize(RegExp.prototype.toString.call(F),"regexp");if(x(F))return z.stylize(Date.prototype.toString.call(F),"date");if(y(F))return i(F)}var V,ne="",ee=!1,$=["{","}"];return u(F)&&(ee=!0,$=["[","]"]),T(F)&&(ne=" [Function"+(F.name?": "+F.name:"")+"]"),d(F)&&(ne=" "+RegExp.prototype.toString.call(F)),x(F)&&(ne=" "+Date.prototype.toUTCString.call(F)),y(F)&&(ne=" "+i(F)),Z.length!==0||ee&&F.length!=0?U<0?d(F)?z.stylize(RegExp.prototype.toString.call(F),"regexp"):z.stylize("[Object]","special"):(z.seen.push(F),V=ee?function(J,K,te,ie,ae){for(var se=[],ce=0,de=K.length;ce<de;++ce)L(K,String(ce))?se.push(l(J,K,te,ie,String(ce),!0)):se.push("");return ae.forEach(function(ge){ge.match(/^\d+$/)||se.push(l(J,K,te,ie,ge,!0))}),se}(z,F,U,B,Z):Z.map(function(J){return l(z,F,U,B,J,ee)}),z.seen.pop(),function(J,K,te){return J.reduce(function(ie,ae){return ae.indexOf(`
`),ie+ae.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?te[0]+(K===""?"":K+`
 `)+" "+J.join(`,
  `)+" "+te[1]:te[0]+K+" "+J.join(", ")+" "+te[1]}(V,ne,$)):$[0]+ne+$[1]}function i(z){return"["+Error.prototype.toString.call(z)+"]"}function l(z,F,U,R,j,Z){var B,q,V;if((V=Object.getOwnPropertyDescriptor(F,j)||{value:F[j]}).get?q=V.set?z.stylize("[Getter/Setter]","special"):z.stylize("[Getter]","special"):V.set&&(q=z.stylize("[Setter]","special")),L(R,j)||(B="["+j+"]"),q||(z.seen.indexOf(V.value)<0?(q=g(U)?r(z,V.value,null):r(z,V.value,U-1)).indexOf(`
`)>-1&&(q=Z?q.split(`
`).map(function(ne){return"  "+ne}).join(`
`).slice(2):`
`+q.split(`
`).map(function(ne){return"   "+ne}).join(`
`)):q=z.stylize("[Circular]","special")),v(B)){if(Z&&j.match(/^\d+$/))return q;(B=JSON.stringify(""+j)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(B=B.slice(1,-1),B=z.stylize(B,"name")):(B=B.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),B=z.stylize(B,"string"))}return B+": "+q}function u(z){return Array.isArray(z)}function c(z){return typeof z=="boolean"}function g(z){return z===null}function f(z){return typeof z=="number"}function b(z){return typeof z=="string"}function v(z){return z===void 0}function d(z){return m(z)&&h(z)==="[object RegExp]"}function m(z){return typeof z=="object"&&z!==null}function x(z){return m(z)&&h(z)==="[object Date]"}function y(z){return m(z)&&(h(z)==="[object Error]"||z instanceof Error)}function T(z){return typeof z=="function"}function h(z){return Object.prototype.toString.call(z)}function E(z){return z<10?"0"+z.toString(10):z.toString(10)}O.debuglog=function(z){if(z=z.toUpperCase(),!w[z])if(_.test(z)){var F=M.pid;w[z]=function(){var U=O.format.apply(O,arguments);console.error("%s %d: %s",z,F,U)}}else w[z]=function(){};return w[z]},O.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},O.types=e(41088),O.isArray=u,O.isBoolean=c,O.isNull=g,O.isNullOrUndefined=function(z){return z==null},O.isNumber=f,O.isString=b,O.isSymbol=function(z){return typeof z=="symbol"},O.isUndefined=v,O.isRegExp=d,O.types.isRegExp=d,O.isObject=m,O.isDate=x,O.types.isDate=x,O.isError=y,O.types.isNativeError=y,O.isFunction=T,O.isPrimitive=function(z){return z===null||typeof z=="boolean"||typeof z=="number"||typeof z=="string"||typeof z=="symbol"||z===void 0},O.isBuffer=e(75272);var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function L(z,F){return Object.prototype.hasOwnProperty.call(z,F)}O.log=function(){var z,F;console.log("%s - %s",(F=[E((z=new Date).getHours()),E(z.getMinutes()),E(z.getSeconds())].join(":"),[z.getDate(),k[z.getMonth()],F].join(" ")),O.format.apply(O,arguments))},O.inherits=e(6768),O._extend=function(z,F){if(!F||!m(F))return z;for(var U=Object.keys(F),R=U.length;R--;)z[U[R]]=F[U[R]];return z};var P=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function I(z,F){if(!z){var U=new Error("Promise was rejected with a falsy value");U.reason=z,z=U}return F(z)}O.promisify=function(z){if(typeof z!="function")throw new TypeError('The "original" argument must be of type Function');if(P&&z[P]){var F;if(typeof(F=z[P])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(F,P,{value:F,enumerable:!1,writable:!1,configurable:!0}),F}function F(){for(var U,R,j=new Promise(function(q,V){U=q,R=V}),Z=[],B=0;B<arguments.length;B++)Z.push(arguments[B]);Z.push(function(q,V){q?R(q):U(V)});try{z.apply(this,Z)}catch(q){R(q)}return j}return Object.setPrototypeOf(F,Object.getPrototypeOf(z)),P&&Object.defineProperty(F,P,{value:F,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(F,A(z))},O.promisify.custom=P,O.callbackify=function(z){if(typeof z!="function")throw new TypeError('The "original" argument must be of type Function');function F(){for(var U=[],R=0;R<arguments.length;R++)U.push(arguments[R]);var j=U.pop();if(typeof j!="function")throw new TypeError("The last argument must be of type Function");var Z=this,B=function(){return j.apply(Z,arguments)};z.apply(this,U).then(function(q){M.nextTick(B.bind(null,null,q))},function(q){M.nextTick(I.bind(null,q,B))})}return Object.setPrototypeOf(F,Object.getPrototypeOf(z)),Object.defineProperties(F,A(z)),F}},5408:function(Y,O,e){var M=e(13380);Y.exports=function(A){return M("webgl",A)}},96632:function(Y,O,e){var M=e(46492),A=e(63436),o=e(57916),w=e(99676),_=e(2304),p=w("Object.prototype.toString"),s=e(46672)(),n=typeof globalThis>"u"?e.g:globalThis,a=A(),r=w("String.prototype.slice"),i=Object.getPrototypeOf,l=w("Array.prototype.indexOf",!0)||function(c,g){for(var f=0;f<c.length;f+=1)if(c[f]===g)return f;return-1},u={__proto__:null};M(a,s&&_&&i?function(c){var g=new n[c];if(Symbol.toStringTag in g){var f=i(g),b=_(f,Symbol.toStringTag);if(!b){var v=i(f);b=_(v,Symbol.toStringTag)}u["$"+c]=o(b.get)}}:function(c){var g=new n[c],f=g.slice||g.set;f&&(u["$"+c]=o(f))}),Y.exports=function(c){if(!c||typeof c!="object")return!1;if(!s){var g=r(p(c),8,-1);return l(a,g)>-1?g:g==="Object"&&function(f){var b=!1;return M(u,function(v,d){if(!b)try{v(f),b=r(d,1)}catch{}}),b}(c)}return _?function(f){var b=!1;return M(u,function(v,d){if(!b)try{"$"+v(f)===d&&(b=r(d,1))}catch{}}),b}(c):null}},67020:function(Y,O,e){var M=e(38700),A=e(50896),o=M.instance();function w(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}w.prototype=new M.baseCalendar,A(w.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(i,l){if(typeof i=="string"){var u=i.match(p);return u?u[0]:""}var c=this._validateYear(i),g=i.month(),f=""+this.toChineseMonth(c,g);return l&&f.length<2&&(f="0"+f),this.isIntercalaryMonth(c,g)&&(f+="i"),f},monthNames:function(i){if(typeof i=="string"){var l=i.match(s);return l?l[0]:""}var u=this._validateYear(i),c=i.month(),g=["","","","","","","","","","","",""][this.toChineseMonth(u,c)-1];return this.isIntercalaryMonth(u,c)&&(g=""+g),g},monthNamesShort:function(i){if(typeof i=="string"){var l=i.match(n);return l?l[0]:""}var u=this._validateYear(i),c=i.month(),g=["","","","","","","","","","","",""][this.toChineseMonth(u,c)-1];return this.isIntercalaryMonth(u,c)&&(g=""+g),g},parseMonth:function(i,l){i=this._validateYear(i);var u,c=parseInt(l);if(isNaN(c))l[0]===""&&(u=!0,l=l.substring(1)),l[l.length-1]===""&&(l=l.substring(0,l.length-1)),c=1+["","","","","","","","","","","",""].indexOf(l);else{var g=l[l.length-1];u=g==="i"||g==="I"}return this.toMonthIndex(i,c,u)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(i,l){if(i.year&&(i=i.year()),typeof i!="number"||i<1888||i>2111)throw l.replace(/\{0\}/,this.local.name);return i},toMonthIndex:function(i,l,u){var c=this.intercalaryMonth(i);if(u&&l!==c||l<1||l>12)throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return c?!u&&l<=c?l-1:l:l-1},toChineseMonth:function(i,l){i.year&&(l=(i=i.year()).month());var u=this.intercalaryMonth(i);if(l<0||l>(u?12:11))throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return u?l<u?l+1:l:l+1},intercalaryMonth:function(i){return i=this._validateYear(i),a[i-a[0]]>>13},isIntercalaryMonth:function(i,l){i.year&&(l=(i=i.year()).month());var u=this.intercalaryMonth(i);return!!u&&u===l},leapYear:function(i){return this.intercalaryMonth(i)!==0},weekOfYear:function(i,l,u){var c,g=this._validateYear(i,M.local.invalidyear),f=r[g-r[0]],b=f>>9&4095,v=f>>5&15,d=31&f;(c=o.newDate(b,v,d)).add(4-(c.dayOfWeek()||7),"d");var m=this.toJD(i,l,u)-c.toJD();return 1+Math.floor(m/7)},monthsInYear:function(i){return this.leapYear(i)?13:12},daysInMonth:function(i,l){i.year&&(l=i.month(),i=i.year()),i=this._validateYear(i);var u=a[i-a[0]];if(l>(u>>13?12:11))throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return u&1<<12-l?30:29},weekDay:function(i,l,u){return(this.dayOfWeek(i,l,u)||7)<6},toJD:function(i,l,u){var c=this._validate(i,f,u,M.local.invalidDate);i=this._validateYear(c.year()),l=c.month(),u=c.day();var g=this.isIntercalaryMonth(i,l),f=this.toChineseMonth(i,l),b=function(v,d,m,x,y){var T,h,E;if(typeof v=="object")h=v,T=d||{};else{var k;if(!(typeof v=="number"&&v>=1888&&v<=2111))throw new Error("Lunar year outside range 1888-2111");if(!(typeof d=="number"&&d>=1&&d<=12))throw new Error("Lunar month outside range 1 - 12");if(!(typeof m=="number"&&m>=1&&m<=30))throw new Error("Lunar day outside range 1 - 30");typeof x=="object"?(k=!1,T=x):(k=!!x,T={}),h={year:v,month:d,day:m,isIntercalary:k}}E=h.day-1;var L,P=a[h.year-a[0]],I=P>>13;L=I&&(h.month>I||h.isIntercalary)?h.month:h.month-1;for(var z=0;z<L;z++)E+=P&1<<12-z?30:29;var F=r[h.year-r[0]],U=new Date(F>>9&4095,(F>>5&15)-1,(31&F)+E);return T.year=U.getFullYear(),T.month=1+U.getMonth(),T.day=U.getDate(),T}(i,f,u,g);return o.toJD(b.year,b.month,b.day)},fromJD:function(i){var l=o.fromJD(i),u=function(g,f,b,v){var d,m;if(typeof g=="object")d=g,m=f||{};else{if(!(typeof g=="number"&&g>=1888&&g<=2111))throw new Error("Solar year outside range 1888-2111");if(!(typeof f=="number"&&f>=1&&f<=12))throw new Error("Solar month outside range 1 - 12");if(!(typeof b=="number"&&b>=1&&b<=31))throw new Error("Solar day outside range 1 - 31");d={year:g,month:f,day:b},m={}}var x=r[d.year-r[0]],y=d.year<<9|d.month<<5|d.day;m.year=y>=x?d.year:d.year-1,x=r[m.year-r[0]];var T,h=new Date(x>>9&4095,(x>>5&15)-1,31&x),E=new Date(d.year,d.month-1,d.day);T=Math.round((E-h)/864e5);var k,L=a[m.year-a[0]];for(k=0;k<13;k++){var P=L&1<<12-k?30:29;if(T<P)break;T-=P}var I=L>>13;return!I||k<I?(m.isIntercalary=!1,m.month=1+k):k===I?(m.isIntercalary=!0,m.month=k):(m.isIntercalary=!1,m.month=k),m.day=1+T,m}(l.year(),l.month(),l.day()),c=this.toMonthIndex(u.year,u.month,u.isIntercalary);return this.newDate(u.year,c,u.day)},fromString:function(i){var l=i.match(_),u=this._validateYear(+l[1]),c=+l[2],g=!!l[3],f=this.toMonthIndex(u,c,g),b=+l[4];return this.newDate(u,f,b)},add:function(i,l,u){var c=i.year(),g=i.month(),f=this.isIntercalaryMonth(c,g),b=this.toChineseMonth(c,g),v=Object.getPrototypeOf(w.prototype).add.call(this,i,l,u);if(u==="y"){var d=v.year(),m=v.month(),x=this.isIntercalaryMonth(d,b),y=f&&x?this.toMonthIndex(d,b,!0):this.toMonthIndex(d,b,!1);y!==m&&v.month(y)}return v}});var _=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,p=/^\d?\d[iI]?/m,s=/^??[]?/m,n=/^??[]?/m;M.calendars.chinese=w;var a=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],r=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},89792:function(Y,O,e){var M=e(38700),A=e(50896);function o(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,A(o.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(w){var _=this._validate(w,this.minMonth,this.minDay,M.local.invalidYear);return(w=_.year()+(_.year()<0?1:0))%4==3||w%4==-1},monthsInYear:function(w){return this._validate(w,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear),13},weekOfYear:function(w,_,p){var s=this.newDate(w,_,p);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(w,_){var p=this._validate(w,_,this.minDay,M.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(p.month()===13&&this.leapYear(p.year())?1:0)},weekDay:function(w,_,p){return(this.dayOfWeek(w,_,p)||7)<6},toJD:function(w,_,p){var s=this._validate(w,_,p,M.local.invalidDate);return(w=s.year())<0&&w++,s.day()+30*(s.month()-1)+365*(w-1)+Math.floor(w/4)+this.jdEpoch-1},fromJD:function(w){var _=Math.floor(w)+.5-this.jdEpoch,p=Math.floor((_-Math.floor((_+366)/1461))/365)+1;p<=0&&p--,_=Math.floor(w)+.5-this.newDate(p,1,1).toJD();var s=Math.floor(_/30)+1,n=_-30*(s-1)+1;return this.newDate(p,s,n)}}),M.calendars.coptic=o},55668:function(Y,O,e){var M=e(38700),A=e(50896);function o(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,A(o.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(_){return this._validate(_,this.minMonth,this.minDay,M.local.invalidYear),!1},monthsInYear:function(_){return this._validate(_,this.minMonth,this.minDay,M.local.invalidYear),13},daysInYear:function(_){return this._validate(_,this.minMonth,this.minDay,M.local.invalidYear),400},weekOfYear:function(_,p,s){var n=this.newDate(_,p,s);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/8)+1},daysInMonth:function(_,p){var s=this._validate(_,p,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(_,p,s){return(this._validate(_,p,s,M.local.invalidDate).day()+1)%8},weekDay:function(_,p,s){var n=this.dayOfWeek(_,p,s);return n>=2&&n<=6},extraInfo:function(_,p,s){var n=this._validate(_,p,s,M.local.invalidDate);return{century:w[Math.floor((n.year()-1)/100)+1]||""}},toJD:function(_,p,s){var n=this._validate(_,p,s,M.local.invalidDate);return _=n.year()+(n.year()<0?1:0),p=n.month(),(s=n.day())+(p>1?16:0)+(p>2?32*(p-2):0)+400*(_-1)+this.jdEpoch-1},fromJD:function(_){_=Math.floor(_+.5)-Math.floor(this.jdEpoch)-1;var p=Math.floor(_/400)+1;_-=400*(p-1),_+=_>15?16:0;var s=Math.floor(_/32)+1,n=_-32*(s-1)+1;return this.newDate(p<=0?p-1:p,s,n)}});var w={20:"Fruitbat",21:"Anchovy"};M.calendars.discworld=o},65168:function(Y,O,e){var M=e(38700),A=e(50896);function o(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,A(o.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(w){var _=this._validate(w,this.minMonth,this.minDay,M.local.invalidYear);return(w=_.year()+(_.year()<0?1:0))%4==3||w%4==-1},monthsInYear:function(w){return this._validate(w,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear),13},weekOfYear:function(w,_,p){var s=this.newDate(w,_,p);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(w,_){var p=this._validate(w,_,this.minDay,M.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(p.month()===13&&this.leapYear(p.year())?1:0)},weekDay:function(w,_,p){return(this.dayOfWeek(w,_,p)||7)<6},toJD:function(w,_,p){var s=this._validate(w,_,p,M.local.invalidDate);return(w=s.year())<0&&w++,s.day()+30*(s.month()-1)+365*(w-1)+Math.floor(w/4)+this.jdEpoch-1},fromJD:function(w){var _=Math.floor(w)+.5-this.jdEpoch,p=Math.floor((_-Math.floor((_+366)/1461))/365)+1;p<=0&&p--,_=Math.floor(w)+.5-this.newDate(p,1,1).toJD();var s=Math.floor(_/30)+1,n=_-30*(s-1)+1;return this.newDate(p,s,n)}}),M.calendars.ethiopian=o},2084:function(Y,O,e){var M=e(38700),A=e(50896);function o(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}function w(_,p){return _-p*Math.floor(_/p)}o.prototype=new M.baseCalendar,A(o.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var p=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear);return this._leapYear(p.year())},_leapYear:function(_){return w(7*(_=_<0?_+1:_)+1,19)<7},monthsInYear:function(_){return this._validate(_,this.minMonth,this.minDay,M.local.invalidYear),this._leapYear(_.year?_.year():_)?13:12},weekOfYear:function(_,p,s){var n=this.newDate(_,p,s);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(_){return _=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear).year(),this.toJD(_===-1?1:_+1,7,1)-this.toJD(_,7,1)},daysInMonth:function(_,p){return _.year&&(p=_.month(),_=_.year()),this._validate(_,p,this.minDay,M.local.invalidMonth),p===12&&this.leapYear(_)||p===8&&w(this.daysInYear(_),10)===5?30:p===9&&w(this.daysInYear(_),10)===3?29:this.daysPerMonth[p-1]},weekDay:function(_,p,s){return this.dayOfWeek(_,p,s)!==6},extraInfo:function(_,p,s){var n=this._validate(_,p,s,M.local.invalidDate);return{yearType:(this.leapYear(n)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(n)%10-3]}},toJD:function(_,p,s){var n=this._validate(_,p,s,M.local.invalidDate);_=n.year(),p=n.month(),s=n.day();var a=_<=0?_+1:_,r=this.jdEpoch+this._delay1(a)+this._delay2(a)+s+1;if(p<7){for(var i=7;i<=this.monthsInYear(_);i++)r+=this.daysInMonth(_,i);for(i=1;i<p;i++)r+=this.daysInMonth(_,i)}else for(i=7;i<p;i++)r+=this.daysInMonth(_,i);return r},_delay1:function(_){var p=Math.floor((235*_-234)/19),s=12084+13753*p,n=29*p+Math.floor(s/25920);return w(3*(n+1),7)<3&&n++,n},_delay2:function(_){var p=this._delay1(_-1),s=this._delay1(_);return this._delay1(_+1)-s==356?2:s-p==382?1:0},fromJD:function(_){_=Math.floor(_)+.5;for(var p=Math.floor(98496*(_-this.jdEpoch)/35975351)-1;_>=this.toJD(p===-1?1:p+1,7,1);)p++;for(var s=_<this.toJD(p,1,1)?7:1;_>this.toJD(p,s,this.daysInMonth(p,s));)s++;var n=_-this.toJD(p,s,1)+1;return this.newDate(p,s,n)}}),M.calendars.hebrew=o},26368:function(Y,O,e){var M=e(38700),A=e(50896);function o(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,A(o.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(w){return(11*this._validate(w,this.minMonth,this.minDay,M.local.invalidYear).year()+14)%30<11},weekOfYear:function(w,_,p){var s=this.newDate(w,_,p);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(w){return this.leapYear(w)?355:354},daysInMonth:function(w,_){var p=this._validate(w,_,this.minDay,M.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(p.month()===12&&this.leapYear(p.year())?1:0)},weekDay:function(w,_,p){return this.dayOfWeek(w,_,p)!==5},toJD:function(w,_,p){var s=this._validate(w,_,p,M.local.invalidDate);return w=s.year(),_=s.month(),w=w<=0?w+1:w,(p=s.day())+Math.ceil(29.5*(_-1))+354*(w-1)+Math.floor((3+11*w)/30)+this.jdEpoch-1},fromJD:function(w){w=Math.floor(w)+.5;var _=Math.floor((30*(w-this.jdEpoch)+10646)/10631);_=_<=0?_-1:_;var p=Math.min(12,Math.ceil((w-29-this.toJD(_,1,1))/29.5)+1),s=w-this.toJD(_,p,1)+1;return this.newDate(_,p,s)}}),M.calendars.islamic=o},24747:function(Y,O,e){var M=e(38700),A=e(50896);function o(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,A(o.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(w){var _=this._validate(w,this.minMonth,this.minDay,M.local.invalidYear);return(w=_.year()<0?_.year()+1:_.year())%4==0},weekOfYear:function(w,_,p){var s=this.newDate(w,_,p);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(w,_){var p=this._validate(w,_,this.minDay,M.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(p.month()===2&&this.leapYear(p.year())?1:0)},weekDay:function(w,_,p){return(this.dayOfWeek(w,_,p)||7)<6},toJD:function(w,_,p){var s=this._validate(w,_,p,M.local.invalidDate);return w=s.year(),_=s.month(),p=s.day(),w<0&&w++,_<=2&&(w--,_+=12),Math.floor(365.25*(w+4716))+Math.floor(30.6001*(_+1))+p-1524.5},fromJD:function(w){var _=Math.floor(w+.5)+1524,p=Math.floor((_-122.1)/365.25),s=Math.floor(365.25*p),n=Math.floor((_-s)/30.6001),a=n-Math.floor(n<14?1:13),r=p-Math.floor(a>2?4716:4715),i=_-s-Math.floor(30.6001*n);return r<=0&&r--,this.newDate(r,a,i)}}),M.calendars.julian=o},65616:function(Y,O,e){var M=e(38700),A=e(50896);function o(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}function w(p,s){return p-s*Math.floor(p/s)}function _(p,s){return w(p-1,s)+1}o.prototype=new M.baseCalendar,A(o.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(p){return this._validate(p,this.minMonth,this.minDay,M.local.invalidYear),!1},formatYear:function(p){p=this._validate(p,this.minMonth,this.minDay,M.local.invalidYear).year();var s=Math.floor(p/400);return p%=400,p+=p<0?400:0,s+"."+Math.floor(p/20)+"."+p%20},forYear:function(p){if((p=p.split(".")).length<3)throw"Invalid Mayan year";for(var s=0,n=0;n<p.length;n++){var a=parseInt(p[n],10);if(Math.abs(a)>19||n>0&&a<0)throw"Invalid Mayan year";s=20*s+a}return s},monthsInYear:function(p){return this._validate(p,this.minMonth,this.minDay,M.local.invalidYear),18},weekOfYear:function(p,s,n){return this._validate(p,s,n,M.local.invalidDate),0},daysInYear:function(p){return this._validate(p,this.minMonth,this.minDay,M.local.invalidYear),360},daysInMonth:function(p,s){return this._validate(p,s,this.minDay,M.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(p,s,n){return this._validate(p,s,n,M.local.invalidDate).day()},weekDay:function(p,s,n){return this._validate(p,s,n,M.local.invalidDate),!0},extraInfo:function(p,s,n){var a=this._validate(p,s,n,M.local.invalidDate).toJD(),r=this._toHaab(a),i=this._toTzolkin(a);return{haabMonthName:this.local.haabMonths[r[0]-1],haabMonth:r[0],haabDay:r[1],tzolkinDayName:this.local.tzolkinMonths[i[0]-1],tzolkinDay:i[0],tzolkinTrecena:i[1]}},_toHaab:function(p){var s=w(8+(p-=this.jdEpoch)+340,365);return[Math.floor(s/20)+1,w(s,20)]},_toTzolkin:function(p){return[_(20+(p-=this.jdEpoch),20),_(p+4,13)]},toJD:function(p,s,n){var a=this._validate(p,s,n,M.local.invalidDate);return a.day()+20*a.month()+360*a.year()+this.jdEpoch},fromJD:function(p){p=Math.floor(p)+.5-this.jdEpoch;var s=Math.floor(p/360);p%=360,p+=p<0?360:0;var n=Math.floor(p/20),a=p%20;return this.newDate(s,n,a)}}),M.calendars.mayan=o},30632:function(Y,O,e){var M=e(38700),A=e(50896);function o(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar;var w=M.instance("gregorian");A(o.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var p=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear);return w.leapYear(p.year()+(p.year()<1?1:0)+1469)},weekOfYear:function(_,p,s){var n=this.newDate(_,p,s);return n.add(1-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(_,p){var s=this._validate(_,p,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(_,p,s){return(this.dayOfWeek(_,p,s)||7)<6},toJD:function(_,p,s){var n=this._validate(_,p,s,M.local.invalidMonth);(_=n.year())<0&&_++;for(var a=n.day(),r=1;r<n.month();r++)a+=this.daysPerMonth[r-1];return a+w.toJD(_+1468,3,13)},fromJD:function(_){_=Math.floor(_+.5);for(var p=Math.floor((_-(this.jdEpoch-1))/366);_>=this.toJD(p+1,1,1);)p++;for(var s=_-Math.floor(this.toJD(p,1,1)+.5)+1,n=1;s>this.daysInMonth(p,n);)s-=this.daysInMonth(p,n),n++;return this.newDate(p,n,s)}}),M.calendars.nanakshahi=o},73040:function(Y,O,e){var M=e(38700),A=e(50896);function o(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,A(o.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(w){return this.daysInYear(w)!==this.daysPerYear},weekOfYear:function(w,_,p){var s=this.newDate(w,_,p);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(w){if(w=this._validate(w,this.minMonth,this.minDay,M.local.invalidYear).year(),this.NEPALI_CALENDAR_DATA[w]===void 0)return this.daysPerYear;for(var _=0,p=this.minMonth;p<=12;p++)_+=this.NEPALI_CALENDAR_DATA[w][p];return _},daysInMonth:function(w,_){return w.year&&(_=w.month(),w=w.year()),this._validate(w,_,this.minDay,M.local.invalidMonth),this.NEPALI_CALENDAR_DATA[w]===void 0?this.daysPerMonth[_-1]:this.NEPALI_CALENDAR_DATA[w][_]},weekDay:function(w,_,p){return this.dayOfWeek(w,_,p)!==6},toJD:function(w,_,p){var s=this._validate(w,_,p,M.local.invalidDate);w=s.year(),_=s.month(),p=s.day();var n=M.instance(),a=0,r=_,i=w;this._createMissingCalendarData(w);var l=w-(r>9||r===9&&p>=this.NEPALI_CALENDAR_DATA[i][0]?56:57);for(_!==9&&(a=p,r--);r!==9;)r<=0&&(r=12,i--),a+=this.NEPALI_CALENDAR_DATA[i][r],r--;return _===9?(a+=p-this.NEPALI_CALENDAR_DATA[i][0])<0&&(a+=n.daysInYear(l)):a+=this.NEPALI_CALENDAR_DATA[i][9]-this.NEPALI_CALENDAR_DATA[i][0],n.newDate(l,1,1).add(a,"d").toJD()},fromJD:function(w){var _=M.instance().fromJD(w),p=_.year(),s=_.dayOfYear(),n=p+56;this._createMissingCalendarData(n);for(var a=9,r=this.NEPALI_CALENDAR_DATA[n][0],i=this.NEPALI_CALENDAR_DATA[n][a]-r+1;s>i;)++a>12&&(a=1,n++),i+=this.NEPALI_CALENDAR_DATA[n][a];var l=this.NEPALI_CALENDAR_DATA[n][a]-(i-s);return this.newDate(n,a,l)},_createMissingCalendarData:function(w){var _=this.daysPerMonth.slice(0);_.unshift(17);for(var p=w-1;p<w+2;p++)this.NEPALI_CALENDAR_DATA[p]===void 0&&(this.NEPALI_CALENDAR_DATA[p]=_)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),M.calendars.nepali=o},1104:function(Y,O,e){var M=e(38700),A=e(50896);function o(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}function w(_,p){return _-p*Math.floor(_/p)}o.prototype=new M.baseCalendar,A(o.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(_){var p=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear);return 682*((p.year()-(p.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(_,p,s){var n=this.newDate(_,p,s);return n.add(-(n.dayOfWeek()+1)%7,"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(_,p){var s=this._validate(_,p,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(_,p,s){return this.dayOfWeek(_,p,s)!==5},toJD:function(_,p,s){var n=this._validate(_,p,s,M.local.invalidDate);_=n.year(),p=n.month(),s=n.day();var a=_-(_>=0?474:473),r=474+w(a,2820);return s+(p<=7?31*(p-1):30*(p-1)+6)+Math.floor((682*r-110)/2816)+365*(r-1)+1029983*Math.floor(a/2820)+this.jdEpoch-1},fromJD:function(_){var p=(_=Math.floor(_)+.5)-this.toJD(475,1,1),s=Math.floor(p/1029983),n=w(p,1029983),a=2820;if(n!==1029982){var r=Math.floor(n/366),i=w(n,366);a=Math.floor((2134*r+2816*i+2815)/1028522)+r+1}var l=a+2820*s+474;l=l<=0?l-1:l;var u=_-this.toJD(l,1,1)+1,c=u<=186?Math.ceil(u/31):Math.ceil((u-6)/30),g=_-this.toJD(l,c,1)+1;return this.newDate(l,c,g)}}),M.calendars.persian=o,M.calendars.jalali=o},51456:function(Y,O,e){var M=e(38700),A=e(50896),o=M.instance();function w(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}w.prototype=new M.baseCalendar,A(w.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(_){var p=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear);return _=this._t2gYear(p.year()),o.leapYear(_)},weekOfYear:function(_,p,s){var n=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear);return _=this._t2gYear(n.year()),o.weekOfYear(_,n.month(),n.day())},daysInMonth:function(_,p){var s=this._validate(_,p,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(_,p,s){return(this.dayOfWeek(_,p,s)||7)<6},toJD:function(_,p,s){var n=this._validate(_,p,s,M.local.invalidDate);return _=this._t2gYear(n.year()),o.toJD(_,n.month(),n.day())},fromJD:function(_){var p=o.fromJD(_),s=this._g2tYear(p.year());return this.newDate(s,p.month(),p.day())},_t2gYear:function(_){return _+this.yearsOffset+(_>=-this.yearsOffset&&_<=-1?1:0)},_g2tYear:function(_){return _-this.yearsOffset-(_>=1&&_<=this.yearsOffset?1:0)}}),M.calendars.taiwan=w},4592:function(Y,O,e){var M=e(38700),A=e(50896),o=M.instance();function w(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}w.prototype=new M.baseCalendar,A(w.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var p=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear);return _=this._t2gYear(p.year()),o.leapYear(_)},weekOfYear:function(_,p,s){var n=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear);return _=this._t2gYear(n.year()),o.weekOfYear(_,n.month(),n.day())},daysInMonth:function(_,p){var s=this._validate(_,p,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(_,p,s){return(this.dayOfWeek(_,p,s)||7)<6},toJD:function(_,p,s){var n=this._validate(_,p,s,M.local.invalidDate);return _=this._t2gYear(n.year()),o.toJD(_,n.month(),n.day())},fromJD:function(_){var p=o.fromJD(_),s=this._g2tYear(p.year());return this.newDate(s,p.month(),p.day())},_t2gYear:function(_){return _-this.yearsOffset-(_>=1&&_<=this.yearsOffset?1:0)},_g2tYear:function(_){return _+this.yearsOffset+(_>=-this.yearsOffset&&_<=-1?1:0)}}),M.calendars.thai=w},45348:function(Y,O,e){var M=e(38700),A=e(50896);function o(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,A(o.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(_){var p=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear);return this.daysInYear(p.year())===355},weekOfYear:function(_,p,s){var n=this.newDate(_,p,s);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(_){for(var p=0,s=1;s<=12;s++)p+=this.daysInMonth(_,s);return p},daysInMonth:function(_,p){for(var s=this._validate(_,p,this.minDay,M.local.invalidMonth).toJD()-24e5+.5,n=0,a=0;a<w.length;a++){if(w[a]>s)return w[n]-w[n-1];n++}return 30},weekDay:function(_,p,s){return this.dayOfWeek(_,p,s)!==5},toJD:function(_,p,s){var n=this._validate(_,p,s,M.local.invalidDate),a=12*(n.year()-1)+n.month()-15292;return n.day()+w[a-1]-1+24e5-.5},fromJD:function(_){for(var p=_-24e5+.5,s=0,n=0;n<w.length&&!(w[n]>p);n++)s++;var a=s+15292,r=Math.floor((a-1)/12),i=r+1,l=a-12*r,u=p-w[s-1]+1;return this.newDate(i,l,u)},isValid:function(_,p,s){var n=M.baseCalendar.prototype.isValid.apply(this,arguments);return n&&(n=(_=_.year!=null?_.year:_)>=1276&&_<=1500),n},_validate:function(_,p,s,n){var a=M.baseCalendar.prototype._validate.apply(this,arguments);if(a.year<1276||a.year>1500)throw n.replace(/\{0\}/,this.local.name);return a}}),M.calendars.ummalqura=o;var w=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},38700:function(Y,O,e){var M=e(50896);function A(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function o(n,a,r,i){if(this._calendar=n,this._year=a,this._month=r,this._day=i,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function w(n,a){return"000000".substring(0,a-(n=""+n).length)+n}function _(){this.shortYearCutoff="+10"}function p(n){this.local=this.regionalOptions[n]||this.regionalOptions[""]}M(A.prototype,{instance:function(n,a){n=(n||"gregorian").toLowerCase(),a=a||"";var r=this._localCals[n+"-"+a];if(!r&&this.calendars[n]&&(r=new this.calendars[n](a),this._localCals[n+"-"+a]=r),!r)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,n);return r},newDate:function(n,a,r,i,l){return(i=(n!=null&&n.year?n.calendar():typeof i=="string"?this.instance(i,l):i)||this.instance()).newDate(n,a,r)},substituteDigits:function(n){return function(a){return(a+"").replace(/[0-9]/g,function(r){return n[r]})}},substituteChineseDigits:function(n,a){return function(r){for(var i="",l=0;r>0;){var u=r%10;i=(u===0?"":n[u]+a[l])+i,l++,r=Math.floor(r/10)}return i.indexOf(n[1]+a[1])===0&&(i=i.substr(1)),i||n[0]}}}),M(o.prototype,{newDate:function(n,a,r){return this._calendar.newDate(n??this,a,r)},year:function(n){return arguments.length===0?this._year:this.set(n,"y")},month:function(n){return arguments.length===0?this._month:this.set(n,"m")},day:function(n){return arguments.length===0?this._day:this.set(n,"d")},date:function(n,a,r){if(!this._calendar.isValid(n,a,r))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=n,this._month=a,this._day=r,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(n,a){return this._calendar.add(this,n,a)},set:function(n,a){return this._calendar.set(this,n,a)},compareTo:function(n){if(this._calendar.name!==n._calendar.name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,n._calendar.local.name);var a=this._year!==n._year?this._year-n._year:this._month!==n._month?this.monthOfYear()-n.monthOfYear():this._day-n._day;return a===0?0:a<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(n){return this._calendar.fromJD(n)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(n){return this._calendar.fromJSDate(n)},toString:function(){return(this.year()<0?"-":"")+w(Math.abs(this.year()),4)+"-"+w(this.month(),2)+"-"+w(this.day(),2)}}),M(_.prototype,{_validateLevel:0,newDate:function(n,a,r){return n==null?this.today():(n.year&&(this._validate(n,a,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),r=n.day(),a=n.month(),n=n.year()),new o(this,n,a,r))},today:function(){return this.fromJSDate(new Date)},epoch:function(n){return this._validate(n,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(n){var a=this._validate(n,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(a.year()<0?"-":"")+w(Math.abs(a.year()),4)},monthsInYear:function(n){return this._validate(n,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear),12},monthOfYear:function(n,a){var r=this._validate(n,a,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(n,a){var r=(a+this.firstMonth-2*this.minMonth)%this.monthsInYear(n)+this.minMonth;return this._validate(n,r,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth),r},daysInYear:function(n){var a=this._validate(n,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return this.leapYear(a)?366:365},dayOfYear:function(n,a,r){var i=this._validate(n,a,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return i.toJD()-this.newDate(i.year(),this.fromMonthOfYear(i.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(n,a,r){var i=this._validate(n,a,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(i))+2)%this.daysInWeek()},extraInfo:function(n,a,r){return this._validate(n,a,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),{}},add:function(n,a,r){return this._validate(n,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate),this._correctAdd(n,this._add(n,a,r),a,r)},_add:function(n,a,r){if(this._validateLevel++,r==="d"||r==="w"){var i=n.toJD()+a*(r==="w"?this.daysInWeek():1),l=n.calendar().fromJD(i);return this._validateLevel--,[l.year(),l.month(),l.day()]}try{var u=n.year()+(r==="y"?a:0),c=n.monthOfYear()+(r==="m"?a:0);l=n.day(),r==="y"?(n.month()!==this.fromMonthOfYear(u,c)&&(c=this.newDate(u,n.month(),this.minDay).monthOfYear()),c=Math.min(c,this.monthsInYear(u)),l=Math.min(l,this.daysInMonth(u,this.fromMonthOfYear(u,c)))):r==="m"&&(function(f){for(;c<f.minMonth;)u--,c+=f.monthsInYear(u);for(var b=f.monthsInYear(u);c>b-1+f.minMonth;)u++,c-=b,b=f.monthsInYear(u)}(this),l=Math.min(l,this.daysInMonth(u,this.fromMonthOfYear(u,c))));var g=[u,this.fromMonthOfYear(u,c),l];return this._validateLevel--,g}catch(f){throw this._validateLevel--,f}},_correctAdd:function(n,a,r,i){if(!(this.hasYearZero||i!=="y"&&i!=="m"||a[0]!==0&&n.year()>0==a[0]>0)){var l={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[i],u=r<0?-1:1;a=this._add(n,r*l[0]+u*l[1],l[2])}return n.date(a[0],a[1],a[2])},set:function(n,a,r){this._validate(n,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate);var i=r==="y"?a:n.year(),l=r==="m"?a:n.month(),u=r==="d"?a:n.day();return r!=="y"&&r!=="m"||(u=Math.min(u,this.daysInMonth(i,l))),n.date(i,l,u)},isValid:function(n,a,r){this._validateLevel++;var i=this.hasYearZero||n!==0;if(i){var l=this.newDate(n,a,this.minDay);i=a>=this.minMonth&&a-this.minMonth<this.monthsInYear(l)&&r>=this.minDay&&r-this.minDay<this.daysInMonth(l)}return this._validateLevel--,i},toJSDate:function(n,a,r){var i=this._validate(n,a,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return s.instance().fromJD(this.toJD(i)).toJSDate()},fromJSDate:function(n){return this.fromJD(s.instance().fromJSDate(n).toJD())},_validate:function(n,a,r,i){if(n.year){if(this._validateLevel===0&&this.name!==n.calendar().name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,n.calendar().local.name);return n}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(n,a,r))throw i.replace(/\{0\}/,this.local.name);var l=this.newDate(n,a,r);return this._validateLevel--,l}catch(u){throw this._validateLevel--,u}}}),p.prototype=new _,M(p.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(n){var a=this._validate(n,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(n=a.year()+(a.year()<0?1:0))%4==0&&(n%100!=0||n%400==0)},weekOfYear:function(n,a,r){var i=this.newDate(n,a,r);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(n,a){var r=this._validate(n,a,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(n,a,r){return(this.dayOfWeek(n,a,r)||7)<6},toJD:function(n,a,r){var i=this._validate(n,a,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);n=i.year(),a=i.month(),r=i.day(),n<0&&n++,a<3&&(a+=12,n--);var l=Math.floor(n/100),u=2-l+Math.floor(l/4);return Math.floor(365.25*(n+4716))+Math.floor(30.6001*(a+1))+r+u-1524.5},fromJD:function(n){var a=Math.floor(n+.5),r=Math.floor((a-186721625e-2)/36524.25),i=1524+(r=a+1+r-Math.floor(r/4)),l=Math.floor((i-122.1)/365.25),u=Math.floor(365.25*l),c=Math.floor((i-u)/30.6001),g=i-u-Math.floor(30.6001*c),f=c-(c>13.5?13:1),b=l-(f>2.5?4716:4715);return b<=0&&b--,this.newDate(b,f,g)},toJSDate:function(n,a,r){var i=this._validate(n,a,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),l=new Date(i.year(),i.month()-1,i.day());return l.setHours(0),l.setMinutes(0),l.setSeconds(0),l.setMilliseconds(0),l.setHours(l.getHours()>12?l.getHours()+2:0),l},fromJSDate:function(n){return this.newDate(n.getFullYear(),n.getMonth()+1,n.getDate())}});var s=Y.exports=new A;s.cdate=o,s.baseCalendar=_,s.calendars.gregorian=p},15168:function(Y,O,e){var M=e(50896),A=e(38700);M(A.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),A.local=A.regionalOptions[""],M(A.cdate.prototype,{formatDate:function(o,w){return typeof o!="string"&&(w=o,o=""),this._calendar.formatDate(o||"",this,w)}}),M(A.baseCalendar.prototype,{UNIX_EPOCH:A.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:A.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(o,w,_){if(typeof o!="string"&&(_=w,w=o,o=""),!w)return"";if(w.calendar()!==this)throw A.local.invalidFormat||A.regionalOptions[""].invalidFormat;o=o||this.local.dateFormat;for(var p,s,n,a=(_=_||{}).dayNamesShort||this.local.dayNamesShort,r=_.dayNames||this.local.dayNames,i=_.monthNumbers||this.local.monthNumbers,l=_.monthNamesShort||this.local.monthNamesShort,u=_.monthNames||this.local.monthNames,c=(_.calculateWeek||this.local.calculateWeek,function(h,E){for(var k=1;T+k<o.length&&o.charAt(T+k)===h;)k++;return T+=k-1,Math.floor(k/(E||1))>1}),g=function(h,E,k,L){var P=""+E;if(c(h,L))for(;P.length<k;)P="0"+P;return P},f=this,b=function(h){return typeof i=="function"?i.call(f,h,c("m")):m(g("m",h.month(),2))},v=function(h,E){return E?typeof u=="function"?u.call(f,h):u[h.month()-f.minMonth]:typeof l=="function"?l.call(f,h):l[h.month()-f.minMonth]},d=this.local.digits,m=function(h){return _.localNumbers&&d?d(h):h},x="",y=!1,T=0;T<o.length;T++)if(y)o.charAt(T)!=="'"||c("'")?x+=o.charAt(T):y=!1;else switch(o.charAt(T)){case"d":x+=m(g("d",w.day(),2));break;case"D":x+=(p=w.dayOfWeek(),s=a,n=r,c("D")?n[p]:s[p]);break;case"o":x+=g("o",w.dayOfYear(),3);break;case"w":x+=g("w",w.weekOfYear(),2);break;case"m":x+=b(w);break;case"M":x+=v(w,c("M"));break;case"y":x+=c("y",2)?w.year():(w.year()%100<10?"0":"")+w.year()%100;break;case"Y":c("Y",2),x+=w.formatYear();break;case"J":x+=w.toJD();break;case"@":x+=(w.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":x+=(w.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":c("'")?x+="'":y=!0;break;default:x+=o.charAt(T)}return x},parseDate:function(o,w,_){if(w==null)throw A.local.invalidArguments||A.regionalOptions[""].invalidArguments;if((w=typeof w=="object"?w.toString():w+"")==="")return null;o=o||this.local.dateFormat;var p=(_=_||{}).shortYearCutoff||this.shortYearCutoff;p=typeof p!="string"?p:this.today().year()%100+parseInt(p,10);for(var s=_.dayNamesShort||this.local.dayNamesShort,n=_.dayNames||this.local.dayNames,a=_.parseMonth||this.local.parseMonth,r=_.monthNumbers||this.local.monthNumbers,i=_.monthNamesShort||this.local.monthNamesShort,l=_.monthNames||this.local.monthNames,u=-1,c=-1,g=-1,f=-1,b=-1,v=!1,d=!1,m=function(F,U){for(var R=1;P+R<o.length&&o.charAt(P+R)===F;)R++;return P+=R-1,Math.floor(R/(U||1))>1},x=function(F,U){var R=m(F,U),j=[2,3,R?4:2,R?4:2,10,11,20]["oyYJ@!".indexOf(F)+1],Z=new RegExp("^-?\\d{1,"+j+"}"),B=w.substring(L).match(Z);if(!B)throw(A.local.missingNumberAt||A.regionalOptions[""].missingNumberAt).replace(/\{0\}/,L);return L+=B[0].length,parseInt(B[0],10)},y=this,T=function(){if(typeof r=="function"){m("m");var F=r.call(y,w.substring(L));return L+=F.length,F}return x("m")},h=function(F,U,R,j){for(var Z=m(F,j)?R:U,B=0;B<Z.length;B++)if(w.substr(L,Z[B].length).toLowerCase()===Z[B].toLowerCase())return L+=Z[B].length,B+y.minMonth;throw(A.local.unknownNameAt||A.regionalOptions[""].unknownNameAt).replace(/\{0\}/,L)},E=function(){if(typeof l=="function"){var F=m("M")?l.call(y,w.substring(L)):i.call(y,w.substring(L));return L+=F.length,F}return h("M",i,l)},k=function(){if(w.charAt(L)!==o.charAt(P))throw(A.local.unexpectedLiteralAt||A.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,L);L++},L=0,P=0;P<o.length;P++)if(d)o.charAt(P)!=="'"||m("'")?k():d=!1;else switch(o.charAt(P)){case"d":f=x("d");break;case"D":h("D",s,n);break;case"o":b=x("o");break;case"w":x("w");break;case"m":g=T();break;case"M":g=E();break;case"y":var I=P;v=!m("y",2),P=I,c=x("y",2);break;case"Y":c=x("Y",2);break;case"J":u=x("J")+.5,w.charAt(L)==="."&&(L++,x("J"));break;case"@":u=x("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":u=x("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":L=w.length;break;case"'":m("'")?k():d=!0;break;default:k()}if(L<w.length)throw A.local.unexpectedText||A.regionalOptions[""].unexpectedText;if(c===-1?c=this.today().year():c<100&&v&&(c+=p===-1?1900:this.today().year()-this.today().year()%100-(c<=p?0:100)),typeof g=="string"&&(g=a.call(this,c,g)),b>-1){g=1,f=b;for(var z=this.daysInMonth(c,g);f>z;z=this.daysInMonth(c,g))g++,f-=z}return u>-1?this.fromJD(u):this.newDate(c,g,f)},determineDate:function(o,w,_,p,s){_&&typeof _!="object"&&(s=p,p=_,_=null),typeof p!="string"&&(s=p,p="");var n=this;return w=w?w.newDate():null,o==null?w:typeof o=="string"?function(a){try{return n.parseDate(p,a,s)}catch{}for(var r=((a=a.toLowerCase()).match(/^c/)&&_?_.newDate():null)||n.today(),i=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,l=i.exec(a);l;)r.add(parseInt(l[1],10),l[2]||"d"),l=i.exec(a);return r}(o):typeof o=="number"?isNaN(o)||o===1/0||o===-1/0?w:n.today().add(o,"d"):n.newDate(o)}})},21576:function(){},19768:function(){},63436:function(Y,O,e){var M=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],A=typeof globalThis>"u"?e.g:globalThis;Y.exports=function(){for(var o=[],w=0;w<M.length;w++)typeof A[M[w]]=="function"&&(o[o.length]=M[w]);return o}},67756:function(Y,O,e){function M(de,ge,ve){de.prototype=ge.prototype=ve,ve.constructor=de}function A(de,ge){var ve=Object.create(de.prototype);for(var be in ge)ve[be]=ge[be];return ve}function o(){}e.d(O,{qy:function(){return ce},Gz:function(){return ee}});var w=.7,_=1/w,p="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",n="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",a=/^#([0-9a-f]{3,8})$/,r=new RegExp("^rgb\\(".concat(p,",").concat(p,",").concat(p,"\\)$")),i=new RegExp("^rgb\\(".concat(n,",").concat(n,",").concat(n,"\\)$")),l=new RegExp("^rgba\\(".concat(p,",").concat(p,",").concat(p,",").concat(s,"\\)$")),u=new RegExp("^rgba\\(".concat(n,",").concat(n,",").concat(n,",").concat(s,"\\)$")),c=new RegExp("^hsl\\(".concat(s,",").concat(n,",").concat(n,"\\)$")),g=new RegExp("^hsla\\(".concat(s,",").concat(n,",").concat(n,",").concat(s,"\\)$")),f={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function b(){return this.rgb().formatHex()}function v(){return this.rgb().formatRgb()}function d(de){var ge,ve;return de=(de+"").trim().toLowerCase(),(ge=a.exec(de))?(ve=ge[1].length,ge=parseInt(ge[1],16),ve===6?m(ge):ve===3?new T(ge>>8&15|ge>>4&240,ge>>4&15|240&ge,(15&ge)<<4|15&ge,1):ve===8?x(ge>>24&255,ge>>16&255,ge>>8&255,(255&ge)/255):ve===4?x(ge>>12&15|ge>>8&240,ge>>8&15|ge>>4&240,ge>>4&15|240&ge,((15&ge)<<4|15&ge)/255):null):(ge=r.exec(de))?new T(ge[1],ge[2],ge[3],1):(ge=i.exec(de))?new T(255*ge[1]/100,255*ge[2]/100,255*ge[3]/100,1):(ge=l.exec(de))?x(ge[1],ge[2],ge[3],ge[4]):(ge=u.exec(de))?x(255*ge[1]/100,255*ge[2]/100,255*ge[3]/100,ge[4]):(ge=c.exec(de))?I(ge[1],ge[2]/100,ge[3]/100,1):(ge=g.exec(de))?I(ge[1],ge[2]/100,ge[3]/100,ge[4]):f.hasOwnProperty(de)?m(f[de]):de==="transparent"?new T(NaN,NaN,NaN,0):null}function m(de){return new T(de>>16&255,de>>8&255,255&de,1)}function x(de,ge,ve,be){return be<=0&&(de=ge=ve=NaN),new T(de,ge,ve,be)}function y(de,ge,ve,be){return arguments.length===1?((me=de)instanceof o||(me=d(me)),me?new T((me=me.rgb()).r,me.g,me.b,me.opacity):new T):new T(de,ge,ve,be??1);var me}function T(de,ge,ve,be){this.r=+de,this.g=+ge,this.b=+ve,this.opacity=+be}function h(){return"#".concat(P(this.r)).concat(P(this.g)).concat(P(this.b))}function E(){var de=k(this.opacity);return"".concat(de===1?"rgb(":"rgba(").concat(L(this.r),", ").concat(L(this.g),", ").concat(L(this.b)).concat(de===1?")":", ".concat(de,")"))}function k(de){return isNaN(de)?1:Math.max(0,Math.min(1,de))}function L(de){return Math.max(0,Math.min(255,Math.round(de)||0))}function P(de){return((de=L(de))<16?"0":"")+de.toString(16)}function I(de,ge,ve,be){return be<=0?de=ge=ve=NaN:ve<=0||ve>=1?de=ge=NaN:ge<=0&&(de=NaN),new F(de,ge,ve,be)}function z(de){if(de instanceof F)return new F(de.h,de.s,de.l,de.opacity);if(de instanceof o||(de=d(de)),!de)return new F;if(de instanceof F)return de;var ge=(de=de.rgb()).r/255,ve=de.g/255,be=de.b/255,me=Math.min(ge,ve,be),Se=Math.max(ge,ve,be),we=NaN,_e=Se-me,oe=(Se+me)/2;return _e?(we=ge===Se?(ve-be)/_e+6*(ve<be):ve===Se?(be-ge)/_e+2:(ge-ve)/_e+4,_e/=oe<.5?Se+me:2-Se-me,we*=60):_e=oe>0&&oe<1?0:we,new F(we,_e,oe,de.opacity)}function F(de,ge,ve,be){this.h=+de,this.s=+ge,this.l=+ve,this.opacity=+be}function U(de){return(de=(de||0)%360)<0?de+360:de}function R(de){return Math.max(0,Math.min(1,de||0))}function j(de,ge,ve){return 255*(de<60?ge+(ve-ge)*de/60:de<180?ve:de<240?ge+(ve-ge)*(240-de)/60:ge)}M(o,d,{copy:function(de){return Object.assign(new this.constructor,this,de)},displayable:function(){return this.rgb().displayable()},hex:b,formatHex:b,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return z(this).formatHsl()},formatRgb:v,toString:v}),M(T,y,A(o,{brighter:function(de){return de=de==null?_:Math.pow(_,de),new T(this.r*de,this.g*de,this.b*de,this.opacity)},darker:function(de){return de=de==null?w:Math.pow(w,de),new T(this.r*de,this.g*de,this.b*de,this.opacity)},rgb:function(){return this},clamp:function(){return new T(L(this.r),L(this.g),L(this.b),k(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:h,formatHex:h,formatHex8:function(){return"#".concat(P(this.r)).concat(P(this.g)).concat(P(this.b)).concat(P(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:E,toString:E})),M(F,function(de,ge,ve,be){return arguments.length===1?z(de):new F(de,ge,ve,be??1)},A(o,{brighter:function(de){return de=de==null?_:Math.pow(_,de),new F(this.h,this.s,this.l*de,this.opacity)},darker:function(de){return de=de==null?w:Math.pow(w,de),new F(this.h,this.s,this.l*de,this.opacity)},rgb:function(){var de=this.h%360+360*(this.h<0),ge=isNaN(de)||isNaN(this.s)?0:this.s,ve=this.l,be=ve+(ve<.5?ve:1-ve)*ge,me=2*ve-be;return new T(j(de>=240?de-240:de+120,me,be),j(de,me,be),j(de<120?de+240:de-120,me,be),this.opacity)},clamp:function(){return new F(U(this.h),R(this.s),R(this.l),k(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var de=k(this.opacity);return"".concat(de===1?"hsl(":"hsla(").concat(U(this.h),", ").concat(100*R(this.s),"%, ").concat(100*R(this.l),"%").concat(de===1?")":", ".concat(de,")"))}}));var Z=function(de){return function(){return de}};function B(de,ge){var ve=ge-de;return ve?function(be,me){return function(Se){return be+Se*me}}(de,ve):Z(isNaN(de)?ge:de)}var q=function de(ge){var ve=function(me){return(me=+me)==1?B:function(Se,we){return we-Se?function(_e,oe,le){return _e=Math.pow(_e,le),oe=Math.pow(oe,le)-_e,le=1/le,function(pe){return Math.pow(_e+pe*oe,le)}}(Se,we,me):Z(isNaN(Se)?we:Se)}}(ge);function be(me,Se){var we=ve((me=y(me)).r,(Se=y(Se)).r),_e=ve(me.g,Se.g),oe=ve(me.b,Se.b),le=B(me.opacity,Se.opacity);return function(pe){return me.r=we(pe),me.g=_e(pe),me.b=oe(pe),me.opacity=le(pe),me+""}}return be.gamma=de,be}(1);function V(de,ge){var ve,be=ge?ge.length:0,me=de?Math.min(be,de.length):0,Se=new Array(me),we=new Array(be);for(ve=0;ve<me;++ve)Se[ve]=ce(de[ve],ge[ve]);for(;ve<be;++ve)we[ve]=ge[ve];return function(_e){for(ve=0;ve<me;++ve)we[ve]=Se[ve](_e);return we}}function ne(de,ge){var ve=new Date;return de=+de,ge=+ge,function(be){return ve.setTime(de*(1-be)+ge*be),ve}}function ee(de,ge){return de=+de,ge=+ge,function(ve){return de*(1-ve)+ge*ve}}function $(de){return $=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ge){return typeof ge}:function(ge){return ge&&typeof Symbol=="function"&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":typeof ge},$(de)}function J(de,ge){var ve,be={},me={};for(ve in de!==null&&$(de)==="object"||(de={}),ge!==null&&$(ge)==="object"||(ge={}),ge)ve in de?be[ve]=ce(de[ve],ge[ve]):me[ve]=ge[ve];return function(Se){for(ve in be)me[ve]=be[ve](Se);return me}}var K=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,te=new RegExp(K.source,"g");function ie(de,ge){var ve,be,me,Se=K.lastIndex=te.lastIndex=0,we=-1,_e=[],oe=[];for(de+="",ge+="";(ve=K.exec(de))&&(be=te.exec(ge));)(me=be.index)>Se&&(me=ge.slice(Se,me),_e[we]?_e[we]+=me:_e[++we]=me),(ve=ve[0])===(be=be[0])?_e[we]?_e[we]+=be:_e[++we]=be:(_e[++we]=null,oe.push({i:we,x:ee(ve,be)})),Se=te.lastIndex;return Se<ge.length&&(me=ge.slice(Se),_e[we]?_e[we]+=me:_e[++we]=me),_e.length<2?oe[0]?function(le){return function(pe){return le(pe)+""}}(oe[0].x):function(le){return function(){return le}}(ge):(ge=oe.length,function(le){for(var pe,Ee=0;Ee<ge;++Ee)_e[(pe=oe[Ee]).i]=pe.x(le);return _e.join("")})}function ae(de,ge){ge||(ge=[]);var ve,be=de?Math.min(ge.length,de.length):0,me=ge.slice();return function(Se){for(ve=0;ve<be;++ve)me[ve]=de[ve]*(1-Se)+ge[ve]*Se;return me}}function se(de){return se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ge){return typeof ge}:function(ge){return ge&&typeof Symbol=="function"&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":typeof ge},se(de)}function ce(de,ge){var ve,be,me=se(ge);return ge==null||me==="boolean"?Z(ge):(me==="number"?ee:me==="string"?(ve=d(ge))?(ge=ve,q):ie:ge instanceof d?q:ge instanceof Date?ne:(be=ge,!ArrayBuffer.isView(be)||be instanceof DataView?Array.isArray(ge)?V:typeof ge.valueOf!="function"&&typeof ge.toString!="function"||isNaN(ge)?J:ee:ae))(de,ge)}},30584:function(Y){Y.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},7294:function(Y){Y.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},47916:function(Y){Y.exports=JSON.parse('["normal","italic","oblique"]')},2904:function(Y){Y.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},68194:function(Y){Y.exports=JSON.parse('["inherit","initial","unset"]')},3748:function(Y){Y.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},Dt={};function qt(Y){var O=Dt[Y];if(O!==void 0)return O.exports;var e=Dt[Y]={exports:{}};return bt[Y].call(e.exports,e,e.exports,qt),e.exports}return qt.n=function(Y){var O=Y&&Y.__esModule?function(){return Y.default}:function(){return Y};return qt.d(O,{a:O}),O},qt.d=function(Y,O){for(var e in O)qt.o(O,e)&&!qt.o(Y,e)&&Object.defineProperty(Y,e,{enumerable:!0,get:O[e]})},qt.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),qt.o=function(Y,O){return Object.prototype.hasOwnProperty.call(Y,O)},qt.r=function(Y){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Y,"__esModule",{value:!0})},qt(13792)}()})})(Vd);var eg=Vd.exports;const tg=Q1(eg),{abs:oc,cos:wl,sin:Lu,acos:ng,atan2:sc,sqrt:Rl,pow:Cs}=Math;function lc(gt){return gt<0?-Cs(-gt,1/3):Cs(gt,1/3)}const qd=Math.PI,sf=2*qd,Fl=qd/2,rg=1e-6,hh=Number.MAX_SAFE_INTEGER||9007199254740991,ph=Number.MIN_SAFE_INTEGER||-9007199254740991,ig={x:0,y:0,z:0},kr={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(gt,Ke){const bt=Ke(gt);let Dt=bt.x*bt.x+bt.y*bt.y;return typeof bt.z<"u"&&(Dt+=bt.z*bt.z),Rl(Dt)},compute:function(gt,Ke,bt){if(gt===0)return Ke[0].t=0,Ke[0];const Dt=Ke.length-1;if(gt===1)return Ke[Dt].t=1,Ke[Dt];const qt=1-gt;let Y=Ke;if(Dt===0)return Ke[0].t=gt,Ke[0];if(Dt===1){const e={x:qt*Y[0].x+gt*Y[1].x,y:qt*Y[0].y+gt*Y[1].y,t:gt};return bt&&(e.z=qt*Y[0].z+gt*Y[1].z),e}if(Dt<4){let e=qt*qt,M=gt*gt,A,o,w,_=0;Dt===2?(Y=[Y[0],Y[1],Y[2],ig],A=e,o=qt*gt*2,w=M):Dt===3&&(A=e*qt,o=e*gt*3,w=qt*M*3,_=gt*M);const p={x:A*Y[0].x+o*Y[1].x+w*Y[2].x+_*Y[3].x,y:A*Y[0].y+o*Y[1].y+w*Y[2].y+_*Y[3].y,t:gt};return bt&&(p.z=A*Y[0].z+o*Y[1].z+w*Y[2].z+_*Y[3].z),p}const O=JSON.parse(JSON.stringify(Ke));for(;O.length>1;){for(let e=0;e<O.length-1;e++)O[e]={x:O[e].x+(O[e+1].x-O[e].x)*gt,y:O[e].y+(O[e+1].y-O[e].y)*gt},typeof O[e].z<"u"&&(O[e].z=O[e].z+(O[e+1].z-O[e].z)*gt);O.splice(O.length-1,1)}return O[0].t=gt,O[0]},computeWithRatios:function(gt,Ke,bt,Dt){const qt=1-gt,Y=bt,O=Ke;let e=Y[0],M=Y[1],A=Y[2],o=Y[3],w;if(e*=qt,M*=gt,O.length===2)return w=e+M,{x:(e*O[0].x+M*O[1].x)/w,y:(e*O[0].y+M*O[1].y)/w,z:Dt?(e*O[0].z+M*O[1].z)/w:!1,t:gt};if(e*=qt,M*=2*qt,A*=gt*gt,O.length===3)return w=e+M+A,{x:(e*O[0].x+M*O[1].x+A*O[2].x)/w,y:(e*O[0].y+M*O[1].y+A*O[2].y)/w,z:Dt?(e*O[0].z+M*O[1].z+A*O[2].z)/w:!1,t:gt};if(e*=qt,M*=1.5*qt,A*=3*qt,o*=gt*gt*gt,O.length===4)return w=e+M+A+o,{x:(e*O[0].x+M*O[1].x+A*O[2].x+o*O[3].x)/w,y:(e*O[0].y+M*O[1].y+A*O[2].y+o*O[3].y)/w,z:Dt?(e*O[0].z+M*O[1].z+A*O[2].z+o*O[3].z)/w:!1,t:gt}},derive:function(gt,Ke){const bt=[];for(let Dt=gt,qt=Dt.length,Y=qt-1;qt>1;qt--,Y--){const O=[];for(let e=0,M;e<Y;e++)M={x:Y*(Dt[e+1].x-Dt[e].x),y:Y*(Dt[e+1].y-Dt[e].y)},Ke&&(M.z=Y*(Dt[e+1].z-Dt[e].z)),O.push(M);bt.push(O),Dt=O}return bt},between:function(gt,Ke,bt){return Ke<=gt&&gt<=bt||kr.approximately(gt,Ke)||kr.approximately(gt,bt)},approximately:function(gt,Ke,bt){return oc(gt-Ke)<=(bt||rg)},length:function(gt){const bt=kr.Tvalues.length;let Dt=0;for(let qt=0,Y;qt<bt;qt++)Y=.5*kr.Tvalues[qt]+.5,Dt+=kr.Cvalues[qt]*kr.arcfn(Y,gt);return .5*Dt},map:function(gt,Ke,bt,Dt,qt){const Y=bt-Ke,O=qt-Dt,e=gt-Ke,M=e/Y;return Dt+O*M},lerp:function(gt,Ke,bt){const Dt={x:Ke.x+gt*(bt.x-Ke.x),y:Ke.y+gt*(bt.y-Ke.y)};return Ke.z!==void 0&&bt.z!==void 0&&(Dt.z=Ke.z+gt*(bt.z-Ke.z)),Dt},pointToString:function(gt){let Ke=gt.x+"/"+gt.y;return typeof gt.z<"u"&&(Ke+="/"+gt.z),Ke},pointsToString:function(gt){return"["+gt.map(kr.pointToString).join(", ")+"]"},copy:function(gt){return JSON.parse(JSON.stringify(gt))},angle:function(gt,Ke,bt){const Dt=Ke.x-gt.x,qt=Ke.y-gt.y,Y=bt.x-gt.x,O=bt.y-gt.y,e=Dt*O-qt*Y,M=Dt*Y+qt*O;return sc(e,M)},round:function(gt,Ke){const bt=""+gt,Dt=bt.indexOf(".");return parseFloat(bt.substring(0,Dt+1+Ke))},dist:function(gt,Ke){const bt=gt.x-Ke.x,Dt=gt.y-Ke.y;return Rl(bt*bt+Dt*Dt)},closest:function(gt,Ke){let bt=Cs(2,63),Dt,qt;return gt.forEach(function(Y,O){qt=kr.dist(Ke,Y),qt<bt&&(bt=qt,Dt=O)}),{mdist:bt,mpos:Dt}},abcratio:function(gt,Ke){if(Ke!==2&&Ke!==3)return!1;if(typeof gt>"u")gt=.5;else if(gt===0||gt===1)return gt;const bt=Cs(gt,Ke)+Cs(1-gt,Ke),Dt=bt-1;return oc(Dt/bt)},projectionratio:function(gt,Ke){if(Ke!==2&&Ke!==3)return!1;if(typeof gt>"u")gt=.5;else if(gt===0||gt===1)return gt;const bt=Cs(1-gt,Ke),Dt=Cs(gt,Ke)+bt;return bt/Dt},lli8:function(gt,Ke,bt,Dt,qt,Y,O,e){const M=(gt*Dt-Ke*bt)*(qt-O)-(gt-bt)*(qt*e-Y*O),A=(gt*Dt-Ke*bt)*(Y-e)-(Ke-Dt)*(qt*e-Y*O),o=(gt-bt)*(Y-e)-(Ke-Dt)*(qt-O);return o==0?!1:{x:M/o,y:A/o}},lli4:function(gt,Ke,bt,Dt){const qt=gt.x,Y=gt.y,O=Ke.x,e=Ke.y,M=bt.x,A=bt.y,o=Dt.x,w=Dt.y;return kr.lli8(qt,Y,O,e,M,A,o,w)},lli:function(gt,Ke){return kr.lli4(gt,gt.c,Ke,Ke.c)},makeline:function(gt,Ke){return new ea(gt.x,gt.y,(gt.x+Ke.x)/2,(gt.y+Ke.y)/2,Ke.x,Ke.y)},findbbox:function(gt){let Ke=hh,bt=hh,Dt=ph,qt=ph;return gt.forEach(function(Y){const O=Y.bbox();Ke>O.x.min&&(Ke=O.x.min),bt>O.y.min&&(bt=O.y.min),Dt<O.x.max&&(Dt=O.x.max),qt<O.y.max&&(qt=O.y.max)}),{x:{min:Ke,mid:(Ke+Dt)/2,max:Dt,size:Dt-Ke},y:{min:bt,mid:(bt+qt)/2,max:qt,size:qt-bt}}},shapeintersections:function(gt,Ke,bt,Dt,qt){if(!kr.bboxoverlap(Ke,Dt))return[];const Y=[],O=[gt.startcap,gt.forward,gt.back,gt.endcap],e=[bt.startcap,bt.forward,bt.back,bt.endcap];return O.forEach(function(M){M.virtual||e.forEach(function(A){if(A.virtual)return;const o=M.intersects(A,qt);o.length>0&&(o.c1=M,o.c2=A,o.s1=gt,o.s2=bt,Y.push(o))})}),Y},makeshape:function(gt,Ke,bt){const Dt=Ke.points.length,qt=gt.points.length,Y=kr.makeline(Ke.points[Dt-1],gt.points[0]),O=kr.makeline(gt.points[qt-1],Ke.points[0]),e={startcap:Y,forward:gt,back:Ke,endcap:O,bbox:kr.findbbox([Y,gt,Ke,O])};return e.intersections=function(M){return kr.shapeintersections(e,e.bbox,M,M.bbox,bt)},e},getminmax:function(gt,Ke,bt){if(!bt)return{min:0,max:0};let Dt=hh,qt=ph,Y,O;bt.indexOf(0)===-1&&(bt=[0].concat(bt)),bt.indexOf(1)===-1&&bt.push(1);for(let e=0,M=bt.length;e<M;e++)Y=bt[e],O=gt.get(Y),O[Ke]<Dt&&(Dt=O[Ke]),O[Ke]>qt&&(qt=O[Ke]);return{min:Dt,mid:(Dt+qt)/2,max:qt,size:qt-Dt}},align:function(gt,Ke){const bt=Ke.p1.x,Dt=Ke.p1.y,qt=-sc(Ke.p2.y-Dt,Ke.p2.x-bt),Y=function(O){return{x:(O.x-bt)*wl(qt)-(O.y-Dt)*Lu(qt),y:(O.x-bt)*Lu(qt)+(O.y-Dt)*wl(qt)}};return gt.map(Y)},roots:function(gt,Ke){Ke=Ke||{p1:{x:0,y:0},p2:{x:1,y:0}};const bt=gt.length-1,Dt=kr.align(gt,Ke),qt=function(f){return 0<=f&&f<=1};if(bt===2){const f=Dt[0].y,b=Dt[1].y,v=Dt[2].y,d=f-2*b+v;if(d!==0){const m=-Rl(b*b-f*v),x=-f+b,y=-(m+x)/d,T=-(-m+x)/d;return[y,T].filter(qt)}else if(b!==v&&d===0)return[(2*b-v)/(2*b-2*v)].filter(qt);return[]}const Y=Dt[0].y,O=Dt[1].y,e=Dt[2].y,M=Dt[3].y;let A=-Y+3*O-3*e+M,o=3*Y-6*O+3*e,w=-3*Y+3*O,_=Y;if(kr.approximately(A,0)){if(kr.approximately(o,0))return kr.approximately(w,0)?[]:[-_/w].filter(qt);const f=Rl(w*w-4*o*_),b=2*o;return[(f-w)/b,(-w-f)/b].filter(qt)}o/=A,w/=A,_/=A;const p=(3*w-o*o)/3,s=p/3,n=(2*o*o*o-9*o*w+27*_)/27,a=n/2,r=a*a+s*s*s;let i,l,u,c,g;if(r<0){const f=-p/3,b=f*f*f,v=Rl(b),d=-n/(2*v),m=d<-1?-1:d>1?1:d,x=ng(m),y=lc(v),T=2*y;return u=T*wl(x/3)-o/3,c=T*wl((x+sf)/3)-o/3,g=T*wl((x+2*sf)/3)-o/3,[u,c,g].filter(qt)}else{if(r===0)return i=a<0?lc(-a):-lc(a),u=2*i-o/3,c=-i-o/3,[u,c].filter(qt);{const f=Rl(r);return i=lc(-a+f),l=lc(a+f),[i-l-o/3].filter(qt)}}},droots:function(gt){if(gt.length===3){const Ke=gt[0],bt=gt[1],Dt=gt[2],qt=Ke-2*bt+Dt;if(qt!==0){const Y=-Rl(bt*bt-Ke*Dt),O=-Ke+bt,e=-(Y+O)/qt,M=-(-Y+O)/qt;return[e,M]}else if(bt!==Dt&&qt===0)return[(2*bt-Dt)/(2*(bt-Dt))];return[]}if(gt.length===2){const Ke=gt[0],bt=gt[1];return Ke!==bt?[Ke/(Ke-bt)]:[]}return[]},curvature:function(gt,Ke,bt,Dt,qt){let Y,O,e,M,A=0,o=0;const w=kr.compute(gt,Ke),_=kr.compute(gt,bt),p=w.x*w.x+w.y*w.y;if(Dt?(Y=Rl(Cs(w.y*_.z-_.y*w.z,2)+Cs(w.z*_.x-_.z*w.x,2)+Cs(w.x*_.y-_.x*w.y,2)),O=Cs(p+w.z*w.z,3/2)):(Y=w.x*_.y-w.y*_.x,O=Cs(p,3/2)),Y===0||O===0)return{k:0,r:0};if(A=Y/O,o=O/Y,!qt){const s=kr.curvature(gt-.001,Ke,bt,Dt,!0).k,n=kr.curvature(gt+.001,Ke,bt,Dt,!0).k;M=(n-A+(A-s))/2,e=(oc(n-A)+oc(A-s))/2}return{k:A,r:o,dk:M,adk:e}},inflections:function(gt){if(gt.length<4)return[];const Ke=kr.align(gt,{p1:gt[0],p2:gt.slice(-1)[0]}),bt=Ke[2].x*Ke[1].y,Dt=Ke[3].x*Ke[1].y,qt=Ke[1].x*Ke[2].y,Y=Ke[3].x*Ke[2].y,O=18*(-3*bt+2*Dt+3*qt-Y),e=18*(3*bt-Dt-3*qt),M=18*(qt-bt);if(kr.approximately(O,0)){if(!kr.approximately(e,0)){let _=-M/e;if(0<=_&&_<=1)return[_]}return[]}const A=2*O;if(kr.approximately(A,0))return[];const o=e*e-4*O*M;if(o<0)return[];const w=Math.sqrt(o);return[(w-e)/A,-(e+w)/A].filter(function(_){return 0<=_&&_<=1})},bboxoverlap:function(gt,Ke){const bt=["x","y"],Dt=bt.length;for(let qt=0,Y,O,e,M;qt<Dt;qt++)if(Y=bt[qt],O=gt[Y].mid,e=Ke[Y].mid,M=(gt[Y].size+Ke[Y].size)/2,oc(O-e)>=M)return!1;return!0},expandbox:function(gt,Ke){Ke.x.min<gt.x.min&&(gt.x.min=Ke.x.min),Ke.y.min<gt.y.min&&(gt.y.min=Ke.y.min),Ke.z&&Ke.z.min<gt.z.min&&(gt.z.min=Ke.z.min),Ke.x.max>gt.x.max&&(gt.x.max=Ke.x.max),Ke.y.max>gt.y.max&&(gt.y.max=Ke.y.max),Ke.z&&Ke.z.max>gt.z.max&&(gt.z.max=Ke.z.max),gt.x.mid=(gt.x.min+gt.x.max)/2,gt.y.mid=(gt.y.min+gt.y.max)/2,gt.z&&(gt.z.mid=(gt.z.min+gt.z.max)/2),gt.x.size=gt.x.max-gt.x.min,gt.y.size=gt.y.max-gt.y.min,gt.z&&(gt.z.size=gt.z.max-gt.z.min)},pairiteration:function(gt,Ke,bt){const Dt=gt.bbox(),qt=Ke.bbox(),Y=1e5,O=bt||.5;if(Dt.x.size+Dt.y.size<O&&qt.x.size+qt.y.size<O)return[(Y*(gt._t1+gt._t2)/2|0)/Y+"/"+(Y*(Ke._t1+Ke._t2)/2|0)/Y];let e=gt.split(.5),M=Ke.split(.5),A=[{left:e.left,right:M.left},{left:e.left,right:M.right},{left:e.right,right:M.right},{left:e.right,right:M.left}];A=A.filter(function(w){return kr.bboxoverlap(w.left.bbox(),w.right.bbox())});let o=[];return A.length===0||(A.forEach(function(w){o=o.concat(kr.pairiteration(w.left,w.right,O))}),o=o.filter(function(w,_){return o.indexOf(w)===_})),o},getccenter:function(gt,Ke,bt){const Dt=Ke.x-gt.x,qt=Ke.y-gt.y,Y=bt.x-Ke.x,O=bt.y-Ke.y,e=Dt*wl(Fl)-qt*Lu(Fl),M=Dt*Lu(Fl)+qt*wl(Fl),A=Y*wl(Fl)-O*Lu(Fl),o=Y*Lu(Fl)+O*wl(Fl),w=(gt.x+Ke.x)/2,_=(gt.y+Ke.y)/2,p=(Ke.x+bt.x)/2,s=(Ke.y+bt.y)/2,n=w+e,a=_+M,r=p+A,i=s+o,l=kr.lli8(w,_,n,a,p,s,r,i),u=kr.dist(l,gt);let c=sc(gt.y-l.y,gt.x-l.x),g=sc(Ke.y-l.y,Ke.x-l.x),f=sc(bt.y-l.y,bt.x-l.x),b;return c<f?((c>g||g>f)&&(c+=sf),c>f&&(b=f,f=c,c=b)):f<g&&g<c?(b=f,f=c,c=b):f+=sf,l.s=c,l.e=f,l.r=u,l},numberSort:function(gt,Ke){return gt-Ke}};class dc{constructor(Ke){this.curves=[],this._3d=!1,Ke&&(this.curves=Ke,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(Ke){return kr.pointsToString(Ke.points)}).join(", ")+"]"}addCurve(Ke){this.curves.push(Ke),this._3d=this._3d||Ke._3d}length(){return this.curves.map(function(Ke){return Ke.length()}).reduce(function(Ke,bt){return Ke+bt})}curve(Ke){return this.curves[Ke]}bbox(){const Ke=this.curves;for(var bt=Ke[0].bbox(),Dt=1;Dt<Ke.length;Dt++)kr.expandbox(bt,Ke[Dt].bbox());return bt}offset(Ke){const bt=[];return this.curves.forEach(function(Dt){bt.push(...Dt.offset(Ke))}),new dc(bt)}}const{abs:uc,min:Ad,max:Md,cos:ag,sin:og,acos:sg,sqrt:cc}=Math,lg=Math.PI;class ea{constructor(Ke){let bt=Ke&&Ke.forEach?Ke:Array.from(arguments).slice(),Dt=!1;if(typeof bt[0]=="object"){Dt=bt.length;const p=[];bt.forEach(function(s){["x","y","z"].forEach(function(n){typeof s[n]<"u"&&p.push(s[n])})}),bt=p}let qt=!1;const Y=bt.length;if(Dt){if(Dt>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");qt=!0}}else if(Y!==6&&Y!==8&&Y!==9&&Y!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const O=this._3d=!qt&&(Y===9||Y===12)||Ke&&Ke[0]&&typeof Ke[0].z<"u",e=this.points=[];for(let p=0,s=O?3:2;p<Y;p+=s){var M={x:bt[p],y:bt[p+1]};O&&(M.z=bt[p+2]),e.push(M)}const A=this.order=e.length-1,o=this.dims=["x","y"];O&&o.push("z"),this.dimlen=o.length;const w=kr.align(e,{p1:e[0],p2:e[A]}),_=kr.dist(e[0],e[A]);this._linear=w.reduce((p,s)=>p+uc(s.y),0)<_/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(Ke,bt,Dt,qt){if(typeof qt>"u"&&(qt=.5),qt===0)return new ea(bt,bt,Dt);if(qt===1)return new ea(Ke,bt,bt);const Y=ea.getABC(2,Ke,bt,Dt,qt);return new ea(Ke,Y.A,Dt)}static cubicFromPoints(Ke,bt,Dt,qt,Y){typeof qt>"u"&&(qt=.5);const O=ea.getABC(3,Ke,bt,Dt,qt);typeof Y>"u"&&(Y=kr.dist(bt,O.C));const e=Y*(1-qt)/qt,M=kr.dist(Ke,Dt),A=(Dt.x-Ke.x)/M,o=(Dt.y-Ke.y)/M,w=Y*A,_=Y*o,p=e*A,s=e*o,n={x:bt.x-w,y:bt.y-_},a={x:bt.x+p,y:bt.y+s},r=O.A,i={x:r.x+(n.x-r.x)/(1-qt),y:r.y+(n.y-r.y)/(1-qt)},l={x:r.x+(a.x-r.x)/qt,y:r.y+(a.y-r.y)/qt},u={x:Ke.x+(i.x-Ke.x)/qt,y:Ke.y+(i.y-Ke.y)/qt},c={x:Dt.x+(l.x-Dt.x)/(1-qt),y:Dt.y+(l.y-Dt.y)/(1-qt)};return new ea(Ke,u,c,Dt)}static getUtils(){return kr}getUtils(){return ea.getUtils()}static get PolyBezier(){return dc}valueOf(){return this.toString()}toString(){return kr.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const Ke=this.points,bt=Ke[0].x,Dt=Ke[0].y,qt=["M",bt,Dt,this.order===2?"Q":"C"];for(let Y=1,O=Ke.length;Y<O;Y++)qt.push(Ke[Y].x),qt.push(Ke[Y].y);return qt.join(" ")}setRatios(Ke){if(Ke.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=Ke,this._lut=[]}verify(){const Ke=this.coordDigest();Ke!==this._print&&(this._print=Ke,this.update())}coordDigest(){return this.points.map(function(Ke,bt){return""+bt+Ke.x+Ke.y+(Ke.z?Ke.z:0)}).join("")}update(){this._lut=[],this.dpoints=kr.derive(this.points,this._3d),this.computedirection()}computedirection(){const Ke=this.points,bt=kr.angle(Ke[0],Ke[this.order],Ke[1]);this.clockwise=bt>0}length(){return kr.length(this.derivative.bind(this))}static getABC(Ke=2,bt,Dt,qt,Y=.5){const O=kr.projectionratio(Y,Ke),e=1-O,M={x:O*bt.x+e*qt.x,y:O*bt.y+e*qt.y},A=kr.abcratio(Y,Ke);return{A:{x:Dt.x+(Dt.x-M.x)/A,y:Dt.y+(Dt.y-M.y)/A},B:Dt,C:M,S:bt,E:qt}}getABC(Ke,bt){bt=bt||this.get(Ke);let Dt=this.points[0],qt=this.points[this.order];return ea.getABC(this.order,Dt,bt,qt,Ke)}getLUT(Ke){if(this.verify(),Ke=Ke||100,this._lut.length===Ke+1)return this._lut;this._lut=[],Ke++,this._lut=[];for(let bt=0,Dt,qt;bt<Ke;bt++)qt=bt/(Ke-1),Dt=this.compute(qt),Dt.t=qt,this._lut.push(Dt);return this._lut}on(Ke,bt){bt=bt||5;const Dt=this.getLUT(),qt=[];for(let Y=0,O,e=0;Y<Dt.length;Y++)O=Dt[Y],kr.dist(O,Ke)<bt&&(qt.push(O),e+=Y/Dt.length);return qt.length?t/=qt.length:!1}project(Ke){const bt=this.getLUT(),Dt=bt.length-1,qt=kr.closest(bt,Ke),Y=qt.mpos,O=(Y-1)/Dt,e=(Y+1)/Dt,M=.1/Dt;let A=qt.mdist,o=O,w=o,_;A+=1;for(let p;o<e+M;o+=M)_=this.compute(o),p=kr.dist(Ke,_),p<A&&(A=p,w=o);return w=w<0?0:w>1?1:w,_=this.compute(w),_.t=w,_.d=A,_}get(Ke){return this.compute(Ke)}point(Ke){return this.points[Ke]}compute(Ke){return this.ratios?kr.computeWithRatios(Ke,this.points,this.ratios,this._3d):kr.compute(Ke,this.points,this._3d,this.ratios)}raise(){const Ke=this.points,bt=[Ke[0]],Dt=Ke.length;for(let qt=1,Y,O;qt<Dt;qt++)Y=Ke[qt],O=Ke[qt-1],bt[qt]={x:(Dt-qt)/Dt*Y.x+qt/Dt*O.x,y:(Dt-qt)/Dt*Y.y+qt/Dt*O.y};return bt[Dt]=Ke[Dt-1],new ea(bt)}derivative(Ke){return kr.compute(Ke,this.dpoints[0],this._3d)}dderivative(Ke){return kr.compute(Ke,this.dpoints[1],this._3d)}align(){let Ke=this.points;return new ea(kr.align(Ke,{p1:Ke[0],p2:Ke[Ke.length-1]}))}curvature(Ke){return kr.curvature(Ke,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return kr.inflections(this.points)}normal(Ke){return this._3d?this.__normal3(Ke):this.__normal2(Ke)}__normal2(Ke){const bt=this.derivative(Ke),Dt=cc(bt.x*bt.x+bt.y*bt.y);return{t:Ke,x:-bt.y/Dt,y:bt.x/Dt}}__normal3(Ke){const bt=this.derivative(Ke),Dt=this.derivative(Ke+.01),qt=cc(bt.x*bt.x+bt.y*bt.y+bt.z*bt.z),Y=cc(Dt.x*Dt.x+Dt.y*Dt.y+Dt.z*Dt.z);bt.x/=qt,bt.y/=qt,bt.z/=qt,Dt.x/=Y,Dt.y/=Y,Dt.z/=Y;const O={x:Dt.y*bt.z-Dt.z*bt.y,y:Dt.z*bt.x-Dt.x*bt.z,z:Dt.x*bt.y-Dt.y*bt.x},e=cc(O.x*O.x+O.y*O.y+O.z*O.z);O.x/=e,O.y/=e,O.z/=e;const M=[O.x*O.x,O.x*O.y-O.z,O.x*O.z+O.y,O.x*O.y+O.z,O.y*O.y,O.y*O.z-O.x,O.x*O.z-O.y,O.y*O.z+O.x,O.z*O.z];return{t:Ke,x:M[0]*bt.x+M[1]*bt.y+M[2]*bt.z,y:M[3]*bt.x+M[4]*bt.y+M[5]*bt.z,z:M[6]*bt.x+M[7]*bt.y+M[8]*bt.z}}hull(Ke){let bt=this.points,Dt=[],qt=[],Y=0;for(qt[Y++]=bt[0],qt[Y++]=bt[1],qt[Y++]=bt[2],this.order===3&&(qt[Y++]=bt[3]);bt.length>1;){Dt=[];for(let O=0,e,M=bt.length-1;O<M;O++)e=kr.lerp(Ke,bt[O],bt[O+1]),qt[Y++]=e,Dt.push(e);bt=Dt}return qt}split(Ke,bt){if(Ke===0&&bt)return this.split(bt).left;if(bt===1)return this.split(Ke).right;const Dt=this.hull(Ke),qt={left:this.order===2?new ea([Dt[0],Dt[3],Dt[5]]):new ea([Dt[0],Dt[4],Dt[7],Dt[9]]),right:this.order===2?new ea([Dt[5],Dt[4],Dt[2]]):new ea([Dt[9],Dt[8],Dt[6],Dt[3]]),span:Dt};return qt.left._t1=kr.map(0,0,1,this._t1,this._t2),qt.left._t2=kr.map(Ke,0,1,this._t1,this._t2),qt.right._t1=kr.map(Ke,0,1,this._t1,this._t2),qt.right._t2=kr.map(1,0,1,this._t1,this._t2),bt?(bt=kr.map(bt,Ke,1,0,1),qt.right.split(bt).left):qt}extrema(){const Ke={};let bt=[];return this.dims.forEach((function(Dt){let qt=function(O){return O[Dt]},Y=this.dpoints[0].map(qt);Ke[Dt]=kr.droots(Y),this.order===3&&(Y=this.dpoints[1].map(qt),Ke[Dt]=Ke[Dt].concat(kr.droots(Y))),Ke[Dt]=Ke[Dt].filter(function(O){return O>=0&&O<=1}),bt=bt.concat(Ke[Dt].sort(kr.numberSort))}).bind(this)),Ke.values=bt.sort(kr.numberSort).filter(function(Dt,qt){return bt.indexOf(Dt)===qt}),Ke}bbox(){const Ke=this.extrema(),bt={};return this.dims.forEach((function(Dt){bt[Dt]=kr.getminmax(this,Dt,Ke[Dt])}).bind(this)),bt}overlaps(Ke){const bt=this.bbox(),Dt=Ke.bbox();return kr.bboxoverlap(bt,Dt)}offset(Ke,bt){if(typeof bt<"u"){const Dt=this.get(Ke),qt=this.normal(Ke),Y={c:Dt,n:qt,x:Dt.x+qt.x*bt,y:Dt.y+qt.y*bt};return this._3d&&(Y.z=Dt.z+qt.z*bt),Y}if(this._linear){const Dt=this.normal(0),qt=this.points.map(function(Y){const O={x:Y.x+Ke*Dt.x,y:Y.y+Ke*Dt.y};return Y.z&&Dt.z&&(O.z=Y.z+Ke*Dt.z),O});return[new ea(qt)]}return this.reduce().map(function(Dt){return Dt._linear?Dt.offset(Ke)[0]:Dt.scale(Ke)})}simple(){if(this.order===3){const qt=kr.angle(this.points[0],this.points[3],this.points[1]),Y=kr.angle(this.points[0],this.points[3],this.points[2]);if(qt>0&&Y<0||qt<0&&Y>0)return!1}const Ke=this.normal(0),bt=this.normal(1);let Dt=Ke.x*bt.x+Ke.y*bt.y;return this._3d&&(Dt+=Ke.z*bt.z),uc(sg(Dt))<lg/3}reduce(){let Ke,bt=0,Dt=0,qt=.01,Y,O=[],e=[],M=this.extrema().values;for(M.indexOf(0)===-1&&(M=[0].concat(M)),M.indexOf(1)===-1&&M.push(1),bt=M[0],Ke=1;Ke<M.length;Ke++)Dt=M[Ke],Y=this.split(bt,Dt),Y._t1=bt,Y._t2=Dt,O.push(Y),bt=Dt;return O.forEach(function(A){for(bt=0,Dt=0;Dt<=1;)for(Dt=bt+qt;Dt<=1+qt;Dt+=qt)if(Y=A.split(bt,Dt),!Y.simple()){if(Dt-=qt,uc(bt-Dt)<qt)return[];Y=A.split(bt,Dt),Y._t1=kr.map(bt,0,1,A._t1,A._t2),Y._t2=kr.map(Dt,0,1,A._t1,A._t2),e.push(Y),bt=Dt;break}bt<1&&(Y=A.split(bt,1),Y._t1=kr.map(bt,0,1,A._t1,A._t2),Y._t2=A._t2,e.push(Y))}),e}translate(Ke,bt,Dt){Dt=typeof Dt=="number"?Dt:bt;const qt=this.order;let Y=this.points.map((O,e)=>(1-e/qt)*bt+e/qt*Dt);return new ea(this.points.map((O,e)=>({x:O.x+Ke.x*Y[e],y:O.y+Ke.y*Y[e]})))}scale(Ke){const bt=this.order;let Dt=!1;if(typeof Ke=="function"&&(Dt=Ke),Dt&&bt===2)return this.raise().scale(Dt);const qt=this.clockwise,Y=this.points;if(this._linear)return this.translate(this.normal(0),Dt?Dt(0):Ke,Dt?Dt(1):Ke);const O=Dt?Dt(0):Ke,e=Dt?Dt(1):Ke,M=[this.offset(0,10),this.offset(1,10)],A=[],o=kr.lli4(M[0],M[0].c,M[1],M[1].c);if(!o)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(w){const _=A[w*bt]=kr.copy(Y[w*bt]);_.x+=(w?e:O)*M[w].n.x,_.y+=(w?e:O)*M[w].n.y}),Dt?([0,1].forEach(function(w){if(!(bt===2&&w)){var _=Y[w+1],p={x:_.x-o.x,y:_.y-o.y},s=Dt?Dt((w+1)/bt):Ke;Dt&&!qt&&(s=-s);var n=cc(p.x*p.x+p.y*p.y);p.x/=n,p.y/=n,A[w+1]={x:_.x+s*p.x,y:_.y+s*p.y}}}),new ea(A)):([0,1].forEach(w=>{if(bt===2&&w)return;const _=A[w*bt],p=this.derivative(w),s={x:_.x+p.x,y:_.y+p.y};A[w+1]=kr.lli4(_,s,o,Y[w+1])}),new ea(A))}outline(Ke,bt,Dt,qt){if(bt=bt===void 0?Ke:bt,this._linear){const c=this.normal(0),g=this.points[0],f=this.points[this.points.length-1];let b,v,d;Dt===void 0&&(Dt=Ke,qt=bt),b={x:g.x+c.x*Ke,y:g.y+c.y*Ke},d={x:f.x+c.x*Dt,y:f.y+c.y*Dt},v={x:(b.x+d.x)/2,y:(b.y+d.y)/2};const m=[b,v,d];b={x:g.x-c.x*bt,y:g.y-c.y*bt},d={x:f.x-c.x*qt,y:f.y-c.y*qt},v={x:(b.x+d.x)/2,y:(b.y+d.y)/2};const x=[d,v,b],y=kr.makeline(x[2],m[0]),T=kr.makeline(m[2],x[0]),h=[y,new ea(m),T,new ea(x)];return new dc(h)}const Y=this.reduce(),O=Y.length,e=[];let M=[],A,o=0,w=this.length();const _=typeof Dt<"u"&&typeof qt<"u";function p(c,g,f,b,v){return function(d){const m=b/f,x=(b+v)/f,y=g-c;return kr.map(d,0,1,c+m*y,c+x*y)}}Y.forEach(function(c){const g=c.length();_?(e.push(c.scale(p(Ke,Dt,w,o,g))),M.push(c.scale(p(-bt,-qt,w,o,g)))):(e.push(c.scale(Ke)),M.push(c.scale(-bt))),o+=g}),M=M.map(function(c){return A=c.points,A[3]?c.points=[A[3],A[2],A[1],A[0]]:c.points=[A[2],A[1],A[0]],c}).reverse();const s=e[0].points[0],n=e[O-1].points[e[O-1].points.length-1],a=M[O-1].points[M[O-1].points.length-1],r=M[0].points[0],i=kr.makeline(a,s),l=kr.makeline(n,r),u=[i].concat(e).concat([l]).concat(M);return new dc(u)}outlineshapes(Ke,bt,Dt){bt=bt||Ke;const qt=this.outline(Ke,bt).curves,Y=[];for(let O=1,e=qt.length;O<e/2;O++){const M=kr.makeshape(qt[O],qt[e-O],Dt);M.startcap.virtual=O>1,M.endcap.virtual=O<e/2-1,Y.push(M)}return Y}intersects(Ke,bt){return Ke?Ke.p1&&Ke.p2?this.lineIntersects(Ke):(Ke instanceof ea&&(Ke=Ke.reduce()),this.curveintersects(this.reduce(),Ke,bt)):this.selfintersects(bt)}lineIntersects(Ke){const bt=Ad(Ke.p1.x,Ke.p2.x),Dt=Ad(Ke.p1.y,Ke.p2.y),qt=Md(Ke.p1.x,Ke.p2.x),Y=Md(Ke.p1.y,Ke.p2.y);return kr.roots(this.points,Ke).filter(O=>{var e=this.get(O);return kr.between(e.x,bt,qt)&&kr.between(e.y,Dt,Y)})}selfintersects(Ke){const bt=this.reduce(),Dt=bt.length-2,qt=[];for(let Y=0,O,e,M;Y<Dt;Y++)e=bt.slice(Y,Y+1),M=bt.slice(Y+2),O=this.curveintersects(e,M,Ke),qt.push(...O);return qt}curveintersects(Ke,bt,Dt){const qt=[];Ke.forEach(function(O){bt.forEach(function(e){O.overlaps(e)&&qt.push({left:O,right:e})})});let Y=[];return qt.forEach(function(O){const e=kr.pairiteration(O.left,O.right,Dt);e.length>0&&(Y=Y.concat(e))}),Y}arcs(Ke){return Ke=Ke||.5,this._iterate(Ke,[])}_error(Ke,bt,Dt,qt){const Y=(qt-Dt)/4,O=this.get(Dt+Y),e=this.get(qt-Y),M=kr.dist(Ke,bt),A=kr.dist(Ke,O),o=kr.dist(Ke,e);return uc(A-M)+uc(o-M)}_iterate(Ke,bt){let Dt=0,qt=1,Y;do{Y=0,qt=1;let O=this.get(Dt),e,M,A,o,w=!1,_=!1,p,s=qt,n=1;do if(_=w,o=A,s=(Dt+qt)/2,e=this.get(s),M=this.get(qt),A=kr.getccenter(O,e,M),A.interval={start:Dt,end:qt},w=this._error(A,O,Dt,qt)<=Ke,p=_&&!w,p||(n=qt),w){if(qt>=1){if(A.interval.end=n=1,o=A,qt>1){let r={x:A.x+A.r*ag(A.e),y:A.y+A.r*og(A.e)};A.e+=kr.angle({x:A.x,y:A.y},r,this.get(1))}break}qt=qt+(qt-Dt)/2}else qt=s;while(!p&&Y++<100);if(Y>=100)break;o=o||A,bt.push(o),Dt=n}while(qt<1);return bt}}var ug=0;function Rr(gt,Ke,bt,Dt,qt,Y){var O,e,M={};for(e in Ke)e=="ref"?O=Ke[e]:M[e]=Ke[e];var A={type:gt,props:M,key:bt,ref:O,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--ug,__i:-1,__u:0,__source:qt,__self:Y};if(typeof gt=="function"&&(O=gt.defaultProps))for(e in O)M[e]===void 0&&(M[e]=O[e]);return Ci.vnode&&Ci.vnode(A),A}var cg=window.tabEmitter();const Hd={manual:[{x:0,y:0},{x:.5,y:.5},{x:1,y:1}],rand1:[{x:.4876945829913588,y:.2763923940734863},{x:.11860458756424586,y:.00462294199983182},{x:.6095959560413065,y:.6986860260328451},{x:.03412761093918215,y:.6323919424424749},{x:.532505169996403,y:.11403753819416007},{x:.258076410483818,y:.8121209818780057}]},df=go(100),gf=go(100),Ul=go([]),vc=go(null),mc=go(-1),vf=go(!0),Gd=go(Hd.rand1),Lh=go(Hd.manual.reduce((gt,Ke,bt)=>({...gt,[bt]:Ke}),{}));ps(()=>{const gt=vc.value,Ke={top:10,left:10,bottom:10,right:10},bt=(gt==null?void 0:gt.clientWidth)||1e3,Dt=(gt==null?void 0:gt.clientHeight)||1e3,qt={bottomLeft:Ke.bottom,bottomRight:bt-Ke.right,topLeft:Ke.top,topRight:Dt-Ke.left};return{width:bt,height:Dt,offset:Ke,box:qt}});const fg=()=>{const gt=parseInt((Math.random()*10).toString()),Ke=Array.from({length:gt},()=>({x:Math.random(),y:Math.random()}));Gd.value=Ke},hg=ps(()=>wf(gf.value,df.value)),Ch=ps(()=>new ea(Object.values(Lh.value)).getLUT(100));cg.on("points",gt=>{Lh.value=gt});const pg=(gt,Ke)=>{let bt=Ke;gt=100-gt,Ke=100-Ke,bt>99&&(bt=99),bt<0&&(bt=0);const Dt=Ch.value[bt],qt=mc.value>0?Dt.x:Dt.y,Y=mc.value<0?Dt.x:Dt.y,O=gt*qt,e=Ke*Y,M=Math.round(O+e);return vf.value?100-M:M},wf=(gt,Ke)=>pg(gt,Ke),ou=()=>{const gt=[];for(let Ke=0;Ke<100;Ke++){const bt=[];for(let Dt=0;Dt<100;Dt++){const qt=wf(Ke,Dt);bt.push(qt)}gt.push(bt)}return gt};df.subscribe(()=>{Ul.value=ou()});gf.subscribe(()=>{Ul.value=ou()});vc.subscribe(()=>{Ul.value=ou()});mc.subscribe(()=>{Ul.value=ou()});vf.subscribe(()=>{Ul.value=ou()});Ul.subscribe(gt=>{vc.value&&tg.newPlot(vc.value,[{z:gt,x:Array.from({length:100},(Ke,bt)=>`VS ${bt+1}`),y:Array.from({length:100},(Ke,bt)=>`ES ${bt+1}`),type:"heatmap",width:1e3}])});Gd.subscribe(gt=>{Ul.value=ou()});Lh.subscribe(gt=>{Ul.value=ou()});const dg=()=>Rr("input",{type:"number",value:df.value.toString(),min:1,max:100,onInput:gt=>{let Ke=parseInt(gt.currentTarget.value);Ke>100&&(Ke=100),Ke<1&&(Ke=1),df.value=Ke}}),gg=()=>Rr("button",{onClick:()=>{mc.value*=-1},children:["Switch Weights ",mc.value>0?"Views":"Earnings"]}),vg=()=>Rr("button",{onClick:()=>{vf.value=!vf.value},children:"Invert Score"}),mg=()=>Rr("input",{type:"number",disabled:!0,value:hg.value.toString(),min:1,max:100,onInput:gt=>{}}),yg=()=>Rr("input",{type:"number",value:gf.value,min:1,max:100,onInput:gt=>{let Ke=parseInt(gt.currentTarget.value);Ke>100&&(Ke=100),Ke<1&&(Ke=1),gf.value=Ke}}),xg=()=>Rr("div",{ref:gt=>{vc.value=gt},id:"heatmap",style:{width:"100%",height:"100%"}}),bg=()=>Rr("table",{children:[Rr("thead",{children:Rr("tr",{children:[Rr("th",{children:"EarningsScore"}),Rr("th",{children:"ViewsScore"}),Rr("th",{children:"Score"}),Rr("th",{children:"Weight"})]})}),Rr("tbody",{children:Array.from({length:100},(gt,Ke)=>{var O;const bt=100-Ke,Dt=bt,qt=100-wf(Dt,bt);let Y=(O=Ch.value)==null?void 0:O[parseInt(bt.toString())];return Y||(Y={x:0,y:0}),Rr("tr",{children:[Rr("td",{children:bt}),Rr("td",{children:Dt}),Rr("td",{children:qt}),Rr("td",{children:[Y.x.toFixed(2)," | ",Y.y.toFixed(2)]})]})})})]}),_g=()=>Rr("table",{children:[Rr("thead",{children:Rr("tr",{children:[Rr("th",{children:"EarningsScore"}),Rr("th",{children:"ViewsScore"}),Rr("th",{children:"Score"}),Rr("th",{children:"Weight"})]})}),Rr("tbody",{children:Array.from({length:100},(gt,Ke)=>{var e;const bt=Ke,Dt=100-bt,qt=100-wf(Dt,bt);let Y=bt;Y>99&&(Y=99),Y<0&&(Y=0);let O=(e=Ch.value)==null?void 0:e[parseInt(Y.toString())];return O||(O={x:0,y:0}),Rr("tr",{children:[Rr("td",{children:bt}),Rr("td",{children:Dt}),Rr("td",{children:qt}),Rr("td",{children:[O.x.toFixed(2)," | ",O.y.toFixed(2)]})]})})})]}),wg=()=>Rr("div",{style:{width:"100%",height:"100%",overflow:"scroll",display:"flex",flexDirection:"row",gap:"1rem",justifyContent:"center",marginTop:"40px"},children:[Rr(bg,{}),Rr(_g,{})]}),Tg=()=>Rr(Nl,{children:Rr("div",{style:{position:"absolute",top:"40px",left:"10px",display:"flex",flexDirection:"column",gap:"1rem",padding:"1rem",zIndex:1e3,borderRadius:"1rem",backgroundColor:"rgba(255,255,255,0.7)",color:"black"},children:[Rr("label",{style:{display:"flex",flexDirection:"row",gap:"1rem",alignItems:"center",justifyContent:"end"},children:["Views Score:",Rr(dg,{})]}),Rr("label",{style:{display:"flex",flexDirection:"row",gap:"1rem",alignItems:"center",justifyContent:"end"},children:["Earnings Score:",Rr(yg,{})]}),Rr("label",{style:{display:"flex",flexDirection:"row",gap:"1rem",alignItems:"center",justifyContent:"end"},children:["Score:",Rr(mg,{})]}),Rr(gg,{}),Rr(vg,{})]})}),mf=go(!1),Ph=go(!0),Oh=go(!1),Wd=go(!1),kg=ps(()=>mf.value?Rr(Tg,{}):null),Ag=ps(()=>Ph.value?Rr(xg,{}):null),Mg=ps(()=>Oh.value?Rr(wg,{}):null),Sg=ps(()=>Wd.value?Rr("div",{style:{width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.5)"}}):null),Sd=()=>{mf.value=!1,Ph.value=!1,Oh.value=!1,Wd.value=!1},Eg=()=>Rr(Nl,{children:[Rr("button",{onClick:()=>{mf.value=!mf.value},children:"Toggle Inputs"}),Rr("button",{onClick:()=>{Sd(),Ph.value=!0},children:" Heatmap"}),Rr("button",{onClick:()=>{Sd(),Oh.value=!0},children:" Table"}),Rr("button",{onClick:()=>{fg()},children:" Random Weights"}),Rr("button",{onClick:()=>{open("#draw","_blank")},children:" Draw"})]});function Lg(){return Rr(Nl,{children:[kg.value,Rr("div",{style:{width:"100vw",height:"100vh",position:"absolute",top:0,left:0,borderRadius:"1rem",overflow:"hidden"},children:[Rr("div",{style:{width:"100%",display:"flex",flexDirection:"row",gap:"1rem",justifyContent:"center",position:"absolute",top:"10px",left:"10px",zIndex:1e3},children:Rr(Eg,{})}),Ag.value,Mg.value,Sg.value]})]})}var Ih=window.tabEmitter();const hs=go([].reduce((gt,Ke,bt)=>({...gt,[bt]:Ke}),{})),_h=go({width:window.innerWidth,height:window.innerHeight}),Yd=ps(()=>{const gt={top:10,left:10,bottom:10,right:10},Ke=_h.value.width-gt.right,bt=_h.value.height-gt.bottom,Dt={bottomLeft:gt.bottom,bottomRight:Ke-gt.right,topLeft:gt.top,topRight:bt-gt.left};return{width:Ke,height:bt,offset:gt,box:Dt}}),Cg=()=>{const gt=Object.keys(hs.value).length;hs.value={...hs.value,[gt]:{x:.5,y:.5}},Ih.emit("points",hs.value)},Pg=()=>{const gt=localStorage.getItem("points"),Ke=document.createElement("a");Ke.href=`data:text/json;charset=utf-8,${encodeURIComponent(gt)}`,Ke.download="points.json",Ke.click(),Ke.remove()},Og=()=>{const gt=document.createElement("input");gt.type="file",gt.accept=".json",gt.onchange=Ke=>{const bt=Ke.target.files[0],Dt=new FileReader;Dt.onload=qt=>{const Y=JSON.parse(qt.target.result);hs.value=Y,Ih.emit("points",Y)},Dt.readAsText(bt)},gt.click(),gt.remove()};window.addEventListener("resize",()=>{const gt={width:window.innerWidth,height:window.innerHeight};_h.value=gt});ps(()=>new ea(Object.values(hs.value)).getLUT(100));window.addEventListener("storageChanged",gt=>{console.log(gt)});const Ig=(gt,Ke,bt)=>{const Dt={...hs.value};Dt[gt]={x:Ke,y:bt},Ih.emit("points",Dt),hs.value={...hs.value,[gt]:{x:Ke,y:bt}},localStorage.setItem("points",JSON.stringify(hs.value))},zg=gt=>{const Ke=bt=>{gt.onPointMove(bt)};return Rr("div",{style:{position:"absolute",top:gt.y,left:gt.x,width:"10px",height:"10px",backgroundColor:"red",borderRadius:"50%",marginTop:"5px",cursor:"grab",fontSize:"0.4rem",fontWeight:"bold",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center"},onMouseDown:bt=>{var Dt;bt.preventDefault(),bt.stopPropagation(),(Dt=bt.currentTarget)!=null&&Dt.style&&(bt.currentTarget.style.cursor="grabbing"),window.addEventListener("mousemove",Ke),window.addEventListener("mouseup",()=>{var qt;window.removeEventListener("mousemove",Ke),(qt=bt.currentTarget)!=null&&qt.style&&(bt.currentTarget.style.cursor="grab")})},children:gt.index})},fc=ps(()=>{const{box:gt,width:Ke,height:bt}=Yd.value;return{top:gt.topLeft,left:gt.bottomLeft,width:Ke-30,height:bt-30}}),Dg=ps(()=>Object.keys(hs.value).map(Ke=>({x:hs.value[Ke].x,y:hs.value[Ke].y,index:Ke})).map((Ke,bt)=>Rr(zg,{index:Ke.index,x:Ke.x*fc.value.width+fc.value.left,y:Ke.y*fc.value.height+fc.value.top,onPointMove:Dt=>{const qt=fc.value,Y=(Dt.clientX-qt.left)/qt.width,O=(Dt.clientY-qt.top)/qt.height;Ig(bt,Y,O)}}))),Rg=()=>{const{box:gt,width:Ke,height:bt}=Yd.value,Dt=$1(()=>({top:gt.topLeft,left:gt.bottomLeft,marginTop:20,marginLeft:20,width:Ke-30,height:bt-30}));return Rr(Nl,{children:[Rr("button",{onClick:Cg,children:"Add Point"}),Rr("button",{onClick:Pg,children:"Save Points"}),Rr("button",{onClick:Og,children:"Load Points"}),Rr("div",{style:{position:"absolute",...Dt.value,zIndex:1001,border:"1px solid red"},children:Dg.value})]})},Fg=window.location.hash,Bg=()=>Fg==="#draw"?Rr(Rg,{}):Rr(Lg,{});V1(Rr(Bg,{}),document.getElementById("app"));
</script>
    
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
